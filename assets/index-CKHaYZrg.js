(function(){const ae=document.createElement("link").relList;if(ae&&ae.supports&&ae.supports("modulepreload"))return;for(const Ze of document.querySelectorAll('link[rel="modulepreload"]'))Ne(Ze);new MutationObserver(Ze=>{for(const or of Ze)if(or.type==="childList")for(const j of or.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&Ne(j)}).observe(document,{childList:!0,subtree:!0});function xe(Ze){const or={};return Ze.integrity&&(or.integrity=Ze.integrity),Ze.referrerPolicy&&(or.referrerPolicy=Ze.referrerPolicy),Ze.crossOrigin==="use-credentials"?or.credentials="include":Ze.crossOrigin==="anonymous"?or.credentials="omit":or.credentials="same-origin",or}function Ne(Ze){if(Ze.ep)return;Ze.ep=!0;const or=xe(Ze);fetch(Ze.href,or)}})();const A1=(oe,ae)=>oe===ae,lu=Symbol("solid-proxy"),vd=Symbol("solid-track"),dv={equals:A1};let q0=np;const Xf=1,pv=2,tp={owned:null,cleanups:null,context:null,owner:null};var Do=null;let ud=null,M1=null,Mo=null,gs=null,af=null,Cv=0;function uv(oe,ae){const xe=Mo,Ne=Do,Ze=oe.length===0,or=ae===void 0?Ne:ae,j=Ze?tp:{owned:null,cleanups:null,context:or?or.context:null,owner:or},V=Ze?oe:()=>oe(()=>Yf(()=>Lv(j)));Do=j,Mo=null;try{return qc(V,!0)}finally{Mo=xe,Do=Ne}}function Hi(oe,ae){ae=ae?Object.assign({},dv,ae):dv;const xe={value:oe,observers:null,observerSlots:null,comparator:ae.equals||void 0},Ne=Ze=>(typeof Ze=="function"&&(Ze=Ze(xe.value)),rp(xe,Ze));return[ep.bind(xe),Ne]}function qa(oe,ae,xe){const Ne=wd(oe,ae,!1,Xf);Ph(Ne)}function Rl(oe,ae,xe){q0=P1;const Ne=wd(oe,ae,!1,Xf);Ne.user=!0,af?af.push(Ne):Ph(Ne)}function Gs(oe,ae,xe){xe=xe?Object.assign({},dv,xe):dv;const Ne=wd(oe,ae,!0,0);return Ne.observers=null,Ne.observerSlots=null,Ne.comparator=xe.equals||void 0,Ph(Ne),ep.bind(Ne)}function Wf(oe){return qc(oe,!1)}function Yf(oe){if(Mo===null)return oe();const ae=Mo;Mo=null;try{return oe()}finally{Mo=ae}}function S1(oe){Rl(()=>Yf(oe))}function $c(oe){return Do===null||(Do.cleanups===null?Do.cleanups=[oe]:Do.cleanups.push(oe)),oe}function dd(){return Mo}function E1(){return Do}function ep(){if(this.sources&&this.state)if(this.state===Xf)Ph(this);else{const oe=gs;gs=null,qc(()=>yv(this),!1),gs=oe}if(Mo){const oe=this.observers?this.observers.length:0;Mo.sources?(Mo.sources.push(this),Mo.sourceSlots.push(oe)):(Mo.sources=[this],Mo.sourceSlots=[oe]),this.observers?(this.observers.push(Mo),this.observerSlots.push(Mo.sources.length-1)):(this.observers=[Mo],this.observerSlots=[Mo.sources.length-1])}return this.value}function rp(oe,ae,xe){let Ne=oe.value;return(!oe.comparator||!oe.comparator(Ne,ae))&&(oe.value=ae,oe.observers&&oe.observers.length&&qc(()=>{for(let Ze=0;Ze<oe.observers.length;Ze+=1){const or=oe.observers[Ze],j=ud&&ud.running;j&&ud.disposed.has(or),(j?!or.tState:!or.state)&&(or.pure?gs.push(or):af.push(or),or.observers&&ap(or)),j||(or.state=Xf)}if(gs.length>1e6)throw gs=[],new Error},!1)),ae}function Ph(oe){if(!oe.fn)return;Lv(oe);const ae=Cv;C1(oe,oe.value,ae)}function C1(oe,ae,xe){let Ne;const Ze=Do,or=Mo;Mo=Do=oe;try{Ne=oe.fn(ae)}catch(j){return oe.pure&&(oe.state=Xf,oe.owned&&oe.owned.forEach(Lv),oe.owned=null),oe.updatedAt=xe+1,ip(j)}finally{Mo=or,Do=Ze}(!oe.updatedAt||oe.updatedAt<=xe)&&(oe.updatedAt!=null&&"observers"in oe?rp(oe,Ne):oe.value=Ne,oe.updatedAt=xe)}function wd(oe,ae,xe,Ne=Xf,Ze){const or={fn:oe,state:Ne,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:ae,owner:Do,context:Do?Do.context:null,pure:xe};return Do===null||Do!==tp&&(Do.owned?Do.owned.push(or):Do.owned=[or]),or}function gv(oe){if(oe.state===0)return;if(oe.state===pv)return yv(oe);if(oe.suspense&&Yf(oe.suspense.inFallback))return oe.suspense.effects.push(oe);const ae=[oe];for(;(oe=oe.owner)&&(!oe.updatedAt||oe.updatedAt<Cv);)oe.state&&ae.push(oe);for(let xe=ae.length-1;xe>=0;xe--)if(oe=ae[xe],oe.state===Xf)Ph(oe);else if(oe.state===pv){const Ne=gs;gs=null,qc(()=>yv(oe,ae[0]),!1),gs=Ne}}function qc(oe,ae){if(gs)return oe();let xe=!1;ae||(gs=[]),af?xe=!0:af=[],Cv++;try{const Ne=oe();return L1(xe),Ne}catch(Ne){xe||(af=null),gs=null,ip(Ne)}}function L1(oe){if(gs&&(np(gs),gs=null),oe)return;const ae=af;af=null,ae.length&&qc(()=>q0(ae),!1)}function np(oe){for(let ae=0;ae<oe.length;ae++)gv(oe[ae])}function P1(oe){let ae,xe=0;for(ae=0;ae<oe.length;ae++){const Ne=oe[ae];Ne.user?oe[xe++]=Ne:gv(Ne)}for(ae=0;ae<xe;ae++)gv(oe[ae])}function yv(oe,ae){oe.state=0;for(let xe=0;xe<oe.sources.length;xe+=1){const Ne=oe.sources[xe];if(Ne.sources){const Ze=Ne.state;Ze===Xf?Ne!==ae&&(!Ne.updatedAt||Ne.updatedAt<Cv)&&gv(Ne):Ze===pv&&yv(Ne,ae)}}}function ap(oe){for(let ae=0;ae<oe.observers.length;ae+=1){const xe=oe.observers[ae];xe.state||(xe.state=pv,xe.pure?gs.push(xe):af.push(xe),xe.observers&&ap(xe))}}function Lv(oe){let ae;if(oe.sources)for(;oe.sources.length;){const xe=oe.sources.pop(),Ne=oe.sourceSlots.pop(),Ze=xe.observers;if(Ze&&Ze.length){const or=Ze.pop(),j=xe.observerSlots.pop();Ne<Ze.length&&(or.sourceSlots[j]=Ne,Ze[Ne]=or,xe.observerSlots[Ne]=j)}}if(oe.owned){for(ae=oe.owned.length-1;ae>=0;ae--)Lv(oe.owned[ae]);oe.owned=null}if(oe.cleanups){for(ae=oe.cleanups.length-1;ae>=0;ae--)oe.cleanups[ae]();oe.cleanups=null}oe.state=0}function R1(oe){return oe instanceof Error?oe:new Error(typeof oe=="string"?oe:"Unknown error",{cause:oe})}function ip(oe,ae=Do){throw R1(oe)}const D1=Symbol("fallback");function z0(oe){for(let ae=0;ae<oe.length;ae++)oe[ae]()}function I1(oe,ae,xe={}){let Ne=[],Ze=[],or=[],j=0,V=ae.length>1?[]:null;return $c(()=>z0(or)),()=>{let t=oe()||[],b=t.length,P,o;return t[vd],Yf(()=>{let A,v,p,r,e,s,n,l,f;if(b===0)j!==0&&(z0(or),or=[],Ne=[],Ze=[],j=0,V&&(V=[])),xe.fallback&&(Ne=[D1],Ze[0]=uv(u=>(or[0]=u,xe.fallback())),j=1);else if(j===0){for(Ze=new Array(b),o=0;o<b;o++)Ne[o]=t[o],Ze[o]=uv(L);j=b}else{for(p=new Array(b),r=new Array(b),V&&(e=new Array(b)),s=0,n=Math.min(j,b);s<n&&Ne[s]===t[s];s++);for(n=j-1,l=b-1;n>=s&&l>=s&&Ne[n]===t[l];n--,l--)p[l]=Ze[n],r[l]=or[n],V&&(e[l]=V[n]);for(A=new Map,v=new Array(l+1),o=l;o>=s;o--)f=t[o],P=A.get(f),v[o]=P===void 0?-1:P,A.set(f,o);for(P=s;P<=n;P++)f=Ne[P],o=A.get(f),o!==void 0&&o!==-1?(p[o]=Ze[P],r[o]=or[P],V&&(e[o]=V[P]),o=v[o],A.set(f,o)):or[P]();for(o=s;o<b;o++)o in p?(Ze[o]=p[o],or[o]=r[o],V&&(V[o]=e[o],V[o](o))):Ze[o]=uv(L);Ze=Ze.slice(0,j=b),Ne=t.slice(0)}return Ze});function L(A){if(or[o]=A,V){const[v,p]=Hi(o);return V[o]=p,ae(t[o],v)}return ae(t[o])}}}let k1=!1;function Ya(oe,ae){return Yf(()=>oe(ae||{}))}function iv(){return!0}const pd={get(oe,ae,xe){return ae===lu?xe:oe.get(ae)},has(oe,ae){return ae===lu?!0:oe.has(ae)},set:iv,deleteProperty:iv,getOwnPropertyDescriptor(oe,ae){return{configurable:!0,enumerable:!0,get(){return oe.get(ae)},set:iv,deleteProperty:iv}},ownKeys(oe){return oe.keys()}};function fd(oe){return(oe=typeof oe=="function"?oe():oe)?oe:{}}function z1(){for(let oe=0,ae=this.length;oe<ae;++oe){const xe=this[oe]();if(xe!==void 0)return xe}}function _0(...oe){let ae=!1;for(let j=0;j<oe.length;j++){const V=oe[j];ae=ae||!!V&&lu in V,oe[j]=typeof V=="function"?(ae=!0,Gs(V)):V}if(ae)return new Proxy({get(j){for(let V=oe.length-1;V>=0;V--){const t=fd(oe[V])[j];if(t!==void 0)return t}},has(j){for(let V=oe.length-1;V>=0;V--)if(j in fd(oe[V]))return!0;return!1},keys(){const j=[];for(let V=0;V<oe.length;V++)j.push(...Object.keys(fd(oe[V])));return[...new Set(j)]}},pd);const xe={},Ne=Object.create(null);for(let j=oe.length-1;j>=0;j--){const V=oe[j];if(!V)continue;const t=Object.getOwnPropertyNames(V);for(let b=t.length-1;b>=0;b--){const P=t[b];if(P==="__proto__"||P==="constructor")continue;const o=Object.getOwnPropertyDescriptor(V,P);if(!Ne[P])Ne[P]=o.get?{enumerable:!0,configurable:!0,get:z1.bind(xe[P]=[o.get.bind(V)])}:o.value!==void 0?o:void 0;else{const L=xe[P];L&&(o.get?L.push(o.get.bind(V)):o.value!==void 0&&L.push(()=>o.value))}}}const Ze={},or=Object.keys(Ne);for(let j=or.length-1;j>=0;j--){const V=or[j],t=Ne[V];t&&t.get?Object.defineProperty(Ze,V,t):Ze[V]=t?t.value:void 0}return Ze}function _1(oe,...ae){if(lu in oe){const Ze=new Set(ae.length>1?ae.flat():ae[0]),or=ae.map(j=>new Proxy({get(V){return j.includes(V)?oe[V]:void 0},has(V){return j.includes(V)&&V in oe},keys(){return j.filter(V=>V in oe)}},pd));return or.push(new Proxy({get(j){return Ze.has(j)?void 0:oe[j]},has(j){return Ze.has(j)?!1:j in oe},keys(){return Object.keys(oe).filter(j=>!Ze.has(j))}},pd)),or}const xe={},Ne=ae.map(()=>({}));for(const Ze of Object.getOwnPropertyNames(oe)){const or=Object.getOwnPropertyDescriptor(oe,Ze),j=!or.get&&!or.set&&or.enumerable&&or.writable&&or.configurable;let V=!1,t=0;for(const b of ae)b.includes(Ze)&&(V=!0,j?Ne[t][Ze]=or.value:Object.defineProperty(Ne[t],Ze,or)),++t;V||(j?xe[Ze]=or.value:Object.defineProperty(xe,Ze,or))}return[...Ne,xe]}const F1=oe=>`Stale read from <${oe}>.`;function fv(oe){const ae="fallback"in oe&&{fallback:()=>oe.fallback};return Gs(I1(()=>oe.each,oe.children,ae||void 0))}function Dl(oe){const ae=oe.keyed,xe=Gs(()=>oe.when,void 0,{equals:(Ne,Ze)=>ae?Ne===Ze:!Ne==!Ze});return Gs(()=>{const Ne=xe();if(Ne){const Ze=oe.children;return typeof Ze=="function"&&Ze.length>0?Yf(()=>Ze(ae?Ne:()=>{if(!Yf(xe))throw F1("Show");return oe.when})):Ze}return oe.fallback},void 0,void 0)}const O1=new Set(["innerHTML","textContent","innerText","children"]),B1=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),N1=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),U1={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function V1(oe,ae,xe){let Ne=xe.length,Ze=ae.length,or=Ne,j=0,V=0,t=ae[Ze-1].nextSibling,b=null;for(;j<Ze||V<or;){if(ae[j]===xe[V]){j++,V++;continue}for(;ae[Ze-1]===xe[or-1];)Ze--,or--;if(Ze===j){const P=or<Ne?V?xe[V-1].nextSibling:xe[or-V]:t;for(;V<or;)oe.insertBefore(xe[V++],P)}else if(or===V)for(;j<Ze;)(!b||!b.has(ae[j]))&&ae[j].remove(),j++;else if(ae[j]===xe[or-1]&&xe[V]===ae[Ze-1]){const P=ae[--Ze].nextSibling;oe.insertBefore(xe[V++],ae[j++].nextSibling),oe.insertBefore(xe[--or],P),ae[Ze]=xe[or]}else{if(!b){b=new Map;let o=V;for(;o<or;)b.set(xe[o],o++)}const P=b.get(ae[j]);if(P!=null)if(V<P&&P<or){let o=j,L=1,A;for(;++o<Ze&&o<or&&!((A=b.get(ae[o]))==null||A!==P+L);)L++;if(L>P-V){const v=ae[j];for(;V<P;)oe.insertBefore(xe[V++],v)}else oe.replaceChild(xe[V++],ae[j++])}else j++;else ae[j++].remove()}}}const F0="_$DX_DELEGATE";function H1(oe,ae,xe,Ne={}){let Ze;return uv(or=>{Ze=or,ae===document?oe():Pa(ae,oe(),ae.firstChild?null:void 0,xe)},Ne.owner),()=>{Ze(),ae.textContent=""}}function gi(oe,ae,xe){let Ne;const Ze=()=>{const j=document.createElement("template");return j.innerHTML=oe,j.content.firstChild},or=()=>(Ne||(Ne=Ze())).cloneNode(!0);return or.cloneNode=or,or}function Il(oe,ae=window.document){const xe=ae[F0]||(ae[F0]=new Set);for(let Ne=0,Ze=oe.length;Ne<Ze;Ne++){const or=oe[Ne];xe.has(or)||(xe.add(or),ae.addEventListener(or,K1))}}function mv(oe,ae,xe){xe==null?oe.removeAttribute(ae):oe.setAttribute(ae,xe)}function G1(oe,ae,xe,Ne){Ne==null?oe.removeAttributeNS(ae,xe):oe.setAttributeNS(ae,xe,Ne)}function Fn(oe,ae){ae==null?oe.removeAttribute("class"):oe.className=ae}function op(oe,ae,xe,Ne){if(Ne)Array.isArray(xe)?(oe[`$$${ae}`]=xe[0],oe[`$$${ae}Data`]=xe[1]):oe[`$$${ae}`]=xe;else if(Array.isArray(xe)){const Ze=xe[0];oe.addEventListener(ae,xe[0]=or=>Ze.call(oe,xe[1],or))}else oe.addEventListener(ae,xe)}function W1(oe,ae,xe={}){const Ne=Object.keys(ae||{}),Ze=Object.keys(xe);let or,j;for(or=0,j=Ze.length;or<j;or++){const V=Ze[or];!V||V==="undefined"||ae[V]||(O0(oe,V,!1),delete xe[V])}for(or=0,j=Ne.length;or<j;or++){const V=Ne[or],t=!!ae[V];!V||V==="undefined"||xe[V]===t||!t||(O0(oe,V,!0),xe[V]=t)}return xe}function Y1(oe,ae,xe){if(!ae)return xe?mv(oe,"style"):ae;const Ne=oe.style;if(typeof ae=="string")return Ne.cssText=ae;typeof xe=="string"&&(Ne.cssText=xe=void 0),xe||(xe={}),ae||(ae={});let Ze,or;for(or in xe)ae[or]==null&&Ne.removeProperty(or),delete xe[or];for(or in ae)Ze=ae[or],Ze!==xe[or]&&(Ne.setProperty(or,Ze),xe[or]=Ze);return xe}function X1(oe,ae={},xe,Ne){const Ze={};return qa(()=>typeof ae.ref=="function"&&xv(ae.ref,oe)),qa(()=>Z1(oe,ae,xe,!0,Ze,!0)),Ze}function xv(oe,ae,xe){return Yf(()=>oe(ae,xe))}function Pa(oe,ae,xe,Ne){if(xe!==void 0&&!Ne&&(Ne=[]),typeof ae!="function")return bv(oe,ae,Ne,xe);qa(Ze=>bv(oe,ae(),Ze,xe),Ne)}function Z1(oe,ae,xe,Ne,Ze={},or=!1){ae||(ae={});for(const j in Ze)if(!(j in ae)){if(j==="children")continue;Ze[j]=B0(oe,j,null,Ze[j],xe,or)}for(const j in ae){if(j==="children")continue;const V=ae[j];Ze[j]=B0(oe,j,V,Ze[j],xe,or)}}function j1(oe){return oe.toLowerCase().replace(/-([a-z])/g,(ae,xe)=>xe.toUpperCase())}function O0(oe,ae,xe){const Ne=ae.trim().split(/\s+/);for(let Ze=0,or=Ne.length;Ze<or;Ze++)oe.classList.toggle(Ne[Ze],xe)}function B0(oe,ae,xe,Ne,Ze,or){let j,V,t,b;if(ae==="style")return Y1(oe,xe,Ne);if(ae==="classList")return W1(oe,xe,Ne);if(xe===Ne)return Ne;if(ae==="ref")or||xe(oe);else if(ae.slice(0,3)==="on:"){const P=ae.slice(3);Ne&&oe.removeEventListener(P,Ne),xe&&oe.addEventListener(P,xe)}else if(ae.slice(0,10)==="oncapture:"){const P=ae.slice(10);Ne&&oe.removeEventListener(P,Ne,!0),xe&&oe.addEventListener(P,xe,!0)}else if(ae.slice(0,2)==="on"){const P=ae.slice(2).toLowerCase(),o=N1.has(P);if(!o&&Ne){const L=Array.isArray(Ne)?Ne[0]:Ne;oe.removeEventListener(P,L)}(o||xe)&&(op(oe,P,xe,o),o&&Il([P]))}else if(ae.slice(0,5)==="attr:")mv(oe,ae.slice(5),xe);else if((b=ae.slice(0,5)==="prop:")||(t=O1.has(ae))||!Ze||(j=oe.nodeName.includes("-")))b&&(ae=ae.slice(5),V=!0),ae==="class"||ae==="className"?Fn(oe,xe):j&&!V&&!t?oe[j1(ae)]=xe:oe[ae]=xe;else{const P=ae.indexOf(":")>-1&&U1[ae.split(":")[0]];P?G1(oe,P,ae,xe):mv(oe,B1[ae]||ae,xe)}return xe}function K1(oe){const ae=`$$${oe.type}`;let xe=oe.composedPath&&oe.composedPath()[0]||oe.target;for(oe.target!==xe&&Object.defineProperty(oe,"target",{configurable:!0,value:xe}),Object.defineProperty(oe,"currentTarget",{configurable:!0,get(){return xe||document}});xe;){const Ne=xe[ae];if(Ne&&!xe.disabled){const Ze=xe[`${ae}Data`];if(Ze!==void 0?Ne.call(xe,Ze,oe):Ne.call(xe,oe),oe.cancelBubble)return}xe=xe._$host||xe.parentNode||xe.host}}function bv(oe,ae,xe,Ne,Ze){for(;typeof xe=="function";)xe=xe();if(ae===xe)return xe;const or=typeof ae,j=Ne!==void 0;if(oe=j&&xe[0]&&xe[0].parentNode||oe,or==="string"||or==="number"){if(or==="number"&&(ae=ae.toString(),ae===xe))return xe;if(j){let V=xe[0];V&&V.nodeType===3?V.data!==ae&&(V.data=ae):V=document.createTextNode(ae),xe=Zc(oe,xe,Ne,V)}else xe!==""&&typeof xe=="string"?xe=oe.firstChild.data=ae:xe=oe.textContent=ae}else if(ae==null||or==="boolean")xe=Zc(oe,xe,Ne);else{if(or==="function")return qa(()=>{let V=ae();for(;typeof V=="function";)V=V();xe=bv(oe,V,xe,Ne)}),()=>xe;if(Array.isArray(ae)){const V=[],t=xe&&Array.isArray(xe);if(gd(V,ae,xe,Ze))return qa(()=>xe=bv(oe,V,xe,Ne,!0)),()=>xe;if(V.length===0){if(xe=Zc(oe,xe,Ne),j)return xe}else t?xe.length===0?N0(oe,V,Ne):V1(oe,xe,V):(xe&&Zc(oe),N0(oe,V));xe=V}else if(ae.nodeType){if(Array.isArray(xe)){if(j)return xe=Zc(oe,xe,Ne,ae);Zc(oe,xe,null,ae)}else xe==null||xe===""||!oe.firstChild?oe.appendChild(ae):oe.replaceChild(ae,oe.firstChild);xe=ae}}return xe}function gd(oe,ae,xe,Ne){let Ze=!1;for(let or=0,j=ae.length;or<j;or++){let V=ae[or],t=xe&&xe[oe.length],b;if(!(V==null||V===!0||V===!1))if((b=typeof V)=="object"&&V.nodeType)oe.push(V);else if(Array.isArray(V))Ze=gd(oe,V,t)||Ze;else if(b==="function")if(Ne){for(;typeof V=="function";)V=V();Ze=gd(oe,Array.isArray(V)?V:[V],Array.isArray(t)?t:[t])||Ze}else oe.push(V),Ze=!0;else{const P=String(V);t&&t.nodeType===3&&t.data===P?oe.push(t):oe.push(document.createTextNode(P))}}return Ze}function N0(oe,ae,xe=null){for(let Ne=0,Ze=ae.length;Ne<Ze;Ne++)oe.insertBefore(ae[Ne],xe)}function Zc(oe,ae,xe,Ne){if(xe===void 0)return oe.textContent="";const Ze=Ne||document.createTextNode("");if(ae.length){let or=!1;for(let j=ae.length-1;j>=0;j--){const V=ae[j];if(Ze!==V){const t=V.parentNode===oe;!or&&!j?t?oe.replaceChild(Ze,V):oe.insertBefore(Ze,xe):t&&V.remove()}else or=!0}}else oe.insertBefore(Ze,xe);return[Ze]}const J1=!1;var Q1=!1;function $1(oe){if(oe.sheet)return oe.sheet;for(var ae=0;ae<document.styleSheets.length;ae++)if(document.styleSheets[ae].ownerNode===oe)return document.styleSheets[ae]}function q1(oe){var ae=document.createElement("style");return ae.setAttribute("data-emotion",oe.key),oe.nonce!==void 0&&ae.setAttribute("nonce",oe.nonce),ae.appendChild(document.createTextNode("")),ae.setAttribute("data-s",""),ae}var tm=function(){function oe(xe){var Ne=this;this._insertTag=function(Ze){var or;Ne.tags.length===0?Ne.insertionPoint?or=Ne.insertionPoint.nextSibling:Ne.prepend?or=Ne.container.firstChild:or=Ne.before:or=Ne.tags[Ne.tags.length-1].nextSibling,Ne.container.insertBefore(Ze,or),Ne.tags.push(Ze)},this.isSpeedy=xe.speedy===void 0?!Q1:xe.speedy,this.tags=[],this.ctr=0,this.nonce=xe.nonce,this.key=xe.key,this.container=xe.container,this.prepend=xe.prepend,this.insertionPoint=xe.insertionPoint,this.before=null}var ae=oe.prototype;return ae.hydrate=function(Ne){Ne.forEach(this._insertTag)},ae.insert=function(Ne){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(q1(this));var Ze=this.tags[this.tags.length-1];if(this.isSpeedy){var or=$1(Ze);try{or.insertRule(Ne,or.cssRules.length)}catch{}}else Ze.appendChild(document.createTextNode(Ne));this.ctr++},ae.flush=function(){this.tags.forEach(function(Ne){var Ze;return(Ze=Ne.parentNode)==null?void 0:Ze.removeChild(Ne)}),this.tags=[],this.ctr=0},oe}(),ps="-ms-",wv="-moz-",Ri="-webkit-",sp="comm",Td="rule",Ad="decl",em="@import",lp="@keyframes",rm="@layer",nm=Math.abs,Pv=String.fromCharCode,am=Object.assign;function im(oe,ae){return ns(oe,0)^45?(((ae<<2^ns(oe,0))<<2^ns(oe,1))<<2^ns(oe,2))<<2^ns(oe,3):0}function up(oe){return oe.trim()}function om(oe,ae){return(oe=ae.exec(oe))?oe[0]:oe}function Di(oe,ae,xe){return oe.replace(ae,xe)}function yd(oe,ae){return oe.indexOf(ae)}function ns(oe,ae){return oe.charCodeAt(ae)|0}function Sh(oe,ae,xe){return oe.slice(ae,xe)}function Pu(oe){return oe.length}function Md(oe){return oe.length}function ov(oe,ae){return ae.push(oe),oe}function sm(oe,ae){return oe.map(ae).join("")}var Rv=1,Qc=1,fp=0,Ws=0,Io=0,th="";function Dv(oe,ae,xe,Ne,Ze,or,j){return{value:oe,root:ae,parent:xe,type:Ne,props:Ze,children:or,line:Rv,column:Qc,length:j,return:""}}function Ah(oe,ae){return am(Dv("",null,null,"",null,null,0),oe,{length:-oe.length},ae)}function lm(){return Io}function um(){return Io=Ws>0?ns(th,--Ws):0,Qc--,Io===10&&(Qc=1,Rv--),Io}function al(){return Io=Ws<fp?ns(th,Ws++):0,Qc++,Io===10&&(Qc=1,Rv++),Io}function Du(){return ns(th,Ws)}function cv(){return Ws}function Rh(oe,ae){return Sh(th,oe,ae)}function Eh(oe){switch(oe){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function cp(oe){return Rv=Qc=1,fp=Pu(th=oe),Ws=0,[]}function hp(oe){return th="",oe}function hv(oe){return up(Rh(Ws-1,md(oe===91?oe+2:oe===40?oe+1:oe)))}function fm(oe){for(;(Io=Du())&&Io<33;)al();return Eh(oe)>2||Eh(Io)>3?"":" "}function cm(oe,ae){for(;--ae&&al()&&!(Io<48||Io>102||Io>57&&Io<65||Io>70&&Io<97););return Rh(oe,cv()+(ae<6&&Du()==32&&al()==32))}function md(oe){for(;al();)switch(Io){case oe:return Ws;case 34:case 39:oe!==34&&oe!==39&&md(Io);break;case 40:oe===41&&md(oe);break;case 92:al();break}return Ws}function hm(oe,ae){for(;al()&&oe+Io!==57;)if(oe+Io===84&&Du()===47)break;return"/*"+Rh(ae,Ws-1)+"*"+Pv(oe===47?oe:al())}function vm(oe){for(;!Eh(Du());)al();return Rh(oe,Ws)}function dm(oe){return hp(vv("",null,null,null,[""],oe=cp(oe),0,[0],oe))}function vv(oe,ae,xe,Ne,Ze,or,j,V,t){for(var b=0,P=0,o=j,L=0,A=0,v=0,p=1,r=1,e=1,s=0,n="",l=Ze,f=or,u=Ne,g=n;r;)switch(v=s,s=al()){case 40:if(v!=108&&ns(g,o-1)==58){yd(g+=Di(hv(s),"&","&\f"),"&\f")!=-1&&(e=-1);break}case 34:case 39:case 91:g+=hv(s);break;case 9:case 10:case 13:case 32:g+=fm(v);break;case 92:g+=cm(cv()-1,7);continue;case 47:switch(Du()){case 42:case 47:ov(pm(hm(al(),cv()),ae,xe),t);break;default:g+="/"}break;case 123*p:V[b++]=Pu(g)*e;case 125*p:case 59:case 0:switch(s){case 0:case 125:r=0;case 59+P:e==-1&&(g=Di(g,/\f/g,"")),A>0&&Pu(g)-o&&ov(A>32?V0(g+";",Ne,xe,o-1):V0(Di(g," ","")+";",Ne,xe,o-2),t);break;case 59:g+=";";default:if(ov(u=U0(g,ae,xe,b,P,Ze,V,n,l=[],f=[],o),or),s===123)if(P===0)vv(g,ae,u,u,l,or,o,V,f);else switch(L===99&&ns(g,3)===110?100:L){case 100:case 108:case 109:case 115:vv(oe,u,u,Ne&&ov(U0(oe,u,u,0,0,Ze,V,n,Ze,l=[],o),f),Ze,f,o,V,Ne?l:f);break;default:vv(g,u,u,u,[""],f,0,V,f)}}b=P=A=0,p=e=1,n=g="",o=j;break;case 58:o=1+Pu(g),A=v;default:if(p<1){if(s==123)--p;else if(s==125&&p++==0&&um()==125)continue}switch(g+=Pv(s),s*p){case 38:e=P>0?1:(g+="\f",-1);break;case 44:V[b++]=(Pu(g)-1)*e,e=1;break;case 64:Du()===45&&(g+=hv(al())),L=Du(),P=o=Pu(n=g+=vm(cv())),s++;break;case 45:v===45&&Pu(g)==2&&(p=0)}}return or}function U0(oe,ae,xe,Ne,Ze,or,j,V,t,b,P){for(var o=Ze-1,L=Ze===0?or:[""],A=Md(L),v=0,p=0,r=0;v<Ne;++v)for(var e=0,s=Sh(oe,o+1,o=nm(p=j[v])),n=oe;e<A;++e)(n=up(p>0?L[e]+" "+s:Di(s,/&\f/g,L[e])))&&(t[r++]=n);return Dv(oe,ae,xe,Ze===0?Td:V,t,b,P)}function pm(oe,ae,xe){return Dv(oe,ae,xe,sp,Pv(lm()),Sh(oe,2,-2),0)}function V0(oe,ae,xe,Ne){return Dv(oe,ae,xe,Ad,Sh(oe,0,Ne),Sh(oe,Ne+1,-1),Ne)}function Kc(oe,ae){for(var xe="",Ne=Md(oe),Ze=0;Ze<Ne;Ze++)xe+=ae(oe[Ze],Ze,oe,ae)||"";return xe}function gm(oe,ae,xe,Ne){switch(oe.type){case rm:if(oe.children.length)break;case em:case Ad:return oe.return=oe.return||oe.value;case sp:return"";case lp:return oe.return=oe.value+"{"+Kc(oe.children,Ne)+"}";case Td:oe.value=oe.props.join(",")}return Pu(xe=Kc(oe.children,Ne))?oe.return=oe.value+"{"+xe+"}":""}function ym(oe){var ae=Md(oe);return function(xe,Ne,Ze,or){for(var j="",V=0;V<ae;V++)j+=oe[V](xe,Ne,Ze,or)||"";return j}}function mm(oe){return function(ae){ae.root||(ae=ae.return)&&oe(ae)}}function xm(oe){var ae=Object.create(null);return function(xe){return ae[xe]===void 0&&(ae[xe]=oe(xe)),ae[xe]}}var bm=function(ae,xe,Ne){for(var Ze=0,or=0;Ze=or,or=Du(),Ze===38&&or===12&&(xe[Ne]=1),!Eh(or);)al();return Rh(ae,Ws)},wm=function(ae,xe){var Ne=-1,Ze=44;do switch(Eh(Ze)){case 0:Ze===38&&Du()===12&&(xe[Ne]=1),ae[Ne]+=bm(Ws-1,xe,Ne);break;case 2:ae[Ne]+=hv(Ze);break;case 4:if(Ze===44){ae[++Ne]=Du()===58?"&\f":"",xe[Ne]=ae[Ne].length;break}default:ae[Ne]+=Pv(Ze)}while(Ze=al());return ae},Tm=function(ae,xe){return hp(wm(cp(ae),xe))},H0=new WeakMap,Am=function(ae){if(!(ae.type!=="rule"||!ae.parent||ae.length<1)){for(var xe=ae.value,Ne=ae.parent,Ze=ae.column===Ne.column&&ae.line===Ne.line;Ne.type!=="rule";)if(Ne=Ne.parent,!Ne)return;if(!(ae.props.length===1&&xe.charCodeAt(0)!==58&&!H0.get(Ne))&&!Ze){H0.set(ae,!0);for(var or=[],j=Tm(xe,or),V=Ne.props,t=0,b=0;t<j.length;t++)for(var P=0;P<V.length;P++,b++)ae.props[b]=or[t]?j[t].replace(/&\f/g,V[P]):V[P]+" "+j[t]}}},Mm=function(ae){if(ae.type==="decl"){var xe=ae.value;xe.charCodeAt(0)===108&&xe.charCodeAt(2)===98&&(ae.return="",ae.value="")}};function vp(oe,ae){switch(im(oe,ae)){case 5103:return Ri+"print-"+oe+oe;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ri+oe+oe;case 5349:case 4246:case 4810:case 6968:case 2756:return Ri+oe+wv+oe+ps+oe+oe;case 6828:case 4268:return Ri+oe+ps+oe+oe;case 6165:return Ri+oe+ps+"flex-"+oe+oe;case 5187:return Ri+oe+Di(oe,/(\w+).+(:[^]+)/,Ri+"box-$1$2"+ps+"flex-$1$2")+oe;case 5443:return Ri+oe+ps+"flex-item-"+Di(oe,/flex-|-self/,"")+oe;case 4675:return Ri+oe+ps+"flex-line-pack"+Di(oe,/align-content|flex-|-self/,"")+oe;case 5548:return Ri+oe+ps+Di(oe,"shrink","negative")+oe;case 5292:return Ri+oe+ps+Di(oe,"basis","preferred-size")+oe;case 6060:return Ri+"box-"+Di(oe,"-grow","")+Ri+oe+ps+Di(oe,"grow","positive")+oe;case 4554:return Ri+Di(oe,/([^-])(transform)/g,"$1"+Ri+"$2")+oe;case 6187:return Di(Di(Di(oe,/(zoom-|grab)/,Ri+"$1"),/(image-set)/,Ri+"$1"),oe,"")+oe;case 5495:case 3959:return Di(oe,/(image-set\([^]*)/,Ri+"$1$`$1");case 4968:return Di(Di(oe,/(.+:)(flex-)?(.*)/,Ri+"box-pack:$3"+ps+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ri+oe+oe;case 4095:case 3583:case 4068:case 2532:return Di(oe,/(.+)-inline(.+)/,Ri+"$1$2")+oe;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pu(oe)-1-ae>6)switch(ns(oe,ae+1)){case 109:if(ns(oe,ae+4)!==45)break;case 102:return Di(oe,/(.+:)(.+)-([^]+)/,"$1"+Ri+"$2-$3$1"+wv+(ns(oe,ae+3)==108?"$3":"$2-$3"))+oe;case 115:return~yd(oe,"stretch")?vp(Di(oe,"stretch","fill-available"),ae)+oe:oe}break;case 4949:if(ns(oe,ae+1)!==115)break;case 6444:switch(ns(oe,Pu(oe)-3-(~yd(oe,"!important")&&10))){case 107:return Di(oe,":",":"+Ri)+oe;case 101:return Di(oe,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ri+(ns(oe,14)===45?"inline-":"")+"box$3$1"+Ri+"$2$3$1"+ps+"$2box$3")+oe}break;case 5936:switch(ns(oe,ae+11)){case 114:return Ri+oe+ps+Di(oe,/[svh]\w+-[tblr]{2}/,"tb")+oe;case 108:return Ri+oe+ps+Di(oe,/[svh]\w+-[tblr]{2}/,"tb-rl")+oe;case 45:return Ri+oe+ps+Di(oe,/[svh]\w+-[tblr]{2}/,"lr")+oe}return Ri+oe+ps+oe+oe}return oe}var Sm=function(ae,xe,Ne,Ze){if(ae.length>-1&&!ae.return)switch(ae.type){case Ad:ae.return=vp(ae.value,ae.length);break;case lp:return Kc([Ah(ae,{value:Di(ae.value,"@","@"+Ri)})],Ze);case Td:if(ae.length)return sm(ae.props,function(or){switch(om(or,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Kc([Ah(ae,{props:[Di(or,/:(read-\w+)/,":"+wv+"$1")]})],Ze);case"::placeholder":return Kc([Ah(ae,{props:[Di(or,/:(plac\w+)/,":"+Ri+"input-$1")]}),Ah(ae,{props:[Di(or,/:(plac\w+)/,":"+wv+"$1")]}),Ah(ae,{props:[Di(or,/:(plac\w+)/,ps+"input-$1")]})],Ze)}return""})}},Em=[Sm],Cm=function(ae){var xe=ae.key;if(xe==="css"){var Ne=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(Ne,function(p){var r=p.getAttribute("data-emotion");r.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var Ze=ae.stylisPlugins||Em,or={},j,V=[];j=ae.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+xe+' "]'),function(p){for(var r=p.getAttribute("data-emotion").split(" "),e=1;e<r.length;e++)or[r[e]]=!0;V.push(p)});var t,b=[Am,Mm];{var P,o=[gm,mm(function(p){P.insert(p)})],L=ym(b.concat(Ze,o)),A=function(r){return Kc(dm(r),L)};t=function(r,e,s,n){P=s,A(r?r+"{"+e.styles+"}":e.styles),n&&(v.inserted[e.name]=!0)}}var v={key:xe,sheet:new tm({key:xe,container:j,nonce:ae.nonce,speedy:ae.speedy,prepend:ae.prepend,insertionPoint:ae.insertionPoint}),nonce:ae.nonce,inserted:or,registered:{},insert:t};return v.sheet.hydrate(V),v};function Lm(oe){for(var ae=0,xe,Ne=0,Ze=oe.length;Ze>=4;++Ne,Ze-=4)xe=oe.charCodeAt(Ne)&255|(oe.charCodeAt(++Ne)&255)<<8|(oe.charCodeAt(++Ne)&255)<<16|(oe.charCodeAt(++Ne)&255)<<24,xe=(xe&65535)*1540483477+((xe>>>16)*59797<<16),xe^=xe>>>24,ae=(xe&65535)*1540483477+((xe>>>16)*59797<<16)^(ae&65535)*1540483477+((ae>>>16)*59797<<16);switch(Ze){case 3:ae^=(oe.charCodeAt(Ne+2)&255)<<16;case 2:ae^=(oe.charCodeAt(Ne+1)&255)<<8;case 1:ae^=oe.charCodeAt(Ne)&255,ae=(ae&65535)*1540483477+((ae>>>16)*59797<<16)}return ae^=ae>>>13,ae=(ae&65535)*1540483477+((ae>>>16)*59797<<16),((ae^ae>>>15)>>>0).toString(36)}var Pm={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Rm=!1,Dm=/[A-Z]|^ms/g,Im=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dp=function(ae){return ae.charCodeAt(1)===45},G0=function(ae){return ae!=null&&typeof ae!="boolean"},cd=xm(function(oe){return dp(oe)?oe:oe.replace(Dm,"-$&").toLowerCase()}),W0=function(ae,xe){switch(ae){case"animation":case"animationName":if(typeof xe=="string")return xe.replace(Im,function(Ne,Ze,or){return Gf={name:Ze,styles:or,next:Gf},Ze})}return Pm[ae]!==1&&!dp(ae)&&typeof xe=="number"&&xe!==0?xe+"px":xe},km="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Tv(oe,ae,xe){if(xe==null)return"";var Ne=xe;if(Ne.__emotion_styles!==void 0)return Ne;switch(typeof xe){case"boolean":return"";case"object":{var Ze=xe;if(Ze.anim===1)return Gf={name:Ze.name,styles:Ze.styles,next:Gf},Ze.name;var or=xe;if(or.styles!==void 0){var j=or.next;if(j!==void 0)for(;j!==void 0;)Gf={name:j.name,styles:j.styles,next:Gf},j=j.next;var V=or.styles+";";return V}return zm(oe,ae,xe)}}var t=xe;if(ae==null)return t;var b=ae[t];return b!==void 0?b:t}function zm(oe,ae,xe){var Ne="";if(Array.isArray(xe))for(var Ze=0;Ze<xe.length;Ze++)Ne+=Tv(oe,ae,xe[Ze])+";";else for(var or in xe){var j=xe[or];if(typeof j!="object"){var V=j;ae!=null&&ae[V]!==void 0?Ne+=or+"{"+ae[V]+"}":G0(V)&&(Ne+=cd(or)+":"+W0(or,V)+";")}else{if(or==="NO_COMPONENT_SELECTOR"&&Rm)throw new Error(km);if(Array.isArray(j)&&typeof j[0]=="string"&&(ae==null||ae[j[0]]===void 0))for(var t=0;t<j.length;t++)G0(j[t])&&(Ne+=cd(or)+":"+W0(or,j[t])+";");else{var b=Tv(oe,ae,j);switch(or){case"animation":case"animationName":{Ne+=cd(or)+":"+b+";";break}default:Ne+=or+"{"+b+"}"}}}}return Ne}var Y0=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Gf;function hd(oe,ae,xe){if(oe.length===1&&typeof oe[0]=="object"&&oe[0]!==null&&oe[0].styles!==void 0)return oe[0];var Ne=!0,Ze="";Gf=void 0;var or=oe[0];if(or==null||or.raw===void 0)Ne=!1,Ze+=Tv(xe,ae,or);else{var j=or;Ze+=j[0]}for(var V=1;V<oe.length;V++)if(Ze+=Tv(xe,ae,oe[V]),Ne){var t=or;Ze+=t[V]}Y0.lastIndex=0;for(var b="",P;(P=Y0.exec(Ze))!==null;)b+="-"+P[1];var o=Lm(Ze)+b;return{name:o,styles:Ze,next:Gf}}function pp(oe,ae,xe){var Ne="";return xe.split(" ").forEach(function(Ze){oe[Ze]!==void 0?ae.push(oe[Ze]+";"):Ne+=Ze+" "}),Ne}var _m=function(ae,xe,Ne){var Ze=ae.key+"-"+xe.name;ae.registered[Ze]===void 0&&(ae.registered[Ze]=xe.styles)},Fm=function(ae,xe,Ne){_m(ae,xe);var Ze=ae.key+"-"+xe.name;if(ae.inserted[xe.name]===void 0){var or=xe;do ae.insert(xe===or?"."+Ze:"",or,ae.sheet,!0),or=or.next;while(or!==void 0)}};function X0(oe,ae){if(oe.inserted[ae.name]===void 0)return oe.insert("",ae,oe.sheet,!0)}function Z0(oe,ae,xe){var Ne=[],Ze=pp(oe,Ne,xe);return Ne.length<2?xe:Ze+ae(Ne)}var Om=function(ae){var xe=Cm(ae);xe.sheet.speedy=function(V){this.isSpeedy=V},xe.compat=!0;var Ne=function(){for(var t=arguments.length,b=new Array(t),P=0;P<t;P++)b[P]=arguments[P];var o=hd(b,xe.registered,void 0);return Fm(xe,o),xe.key+"-"+o.name},Ze=function(){for(var t=arguments.length,b=new Array(t),P=0;P<t;P++)b[P]=arguments[P];var o=hd(b,xe.registered),L="animation-"+o.name;return X0(xe,{name:o.name,styles:"@keyframes "+L+"{"+o.styles+"}"}),L},or=function(){for(var t=arguments.length,b=new Array(t),P=0;P<t;P++)b[P]=arguments[P];var o=hd(b,xe.registered);X0(xe,o)},j=function(){for(var t=arguments.length,b=new Array(t),P=0;P<t;P++)b[P]=arguments[P];return Z0(xe.registered,Ne,Bm(b))};return{css:Ne,cx:j,injectGlobal:or,keyframes:Ze,hydrate:function(t){t.forEach(function(b){xe.inserted[b]=!0})},flush:function(){xe.registered={},xe.inserted={},xe.sheet.flush()},sheet:xe.sheet,cache:xe,getRegisteredStyles:pp.bind(null,xe.registered),merge:Z0.bind(null,xe.registered,Ne)}},Bm=function oe(ae){for(var xe="",Ne=0;Ne<ae.length;Ne++){var Ze=ae[Ne];if(Ze!=null){var or=void 0;switch(typeof Ze){case"boolean":break;case"object":{if(Array.isArray(Ze))or=oe(Ze);else{or="";for(var j in Ze)Ze[j]&&j&&(or&&(or+=" "),or+=j)}break}default:or=Ze}or&&(xe&&(xe+=" "),xe+=or)}}return xe},Nm=Om({key:"css"}),Wn=Nm.css;const Bn={primary:"#4A90E2",primaryDark:"#2F3A4B",secondary:"#50E3C2",background:"#1F2937",surface:"#374151",text:"#F3F4F6",textLight:"#D1D5DB",border:"#4B5563",shadow:"rgba(0, 0, 0, 0.3)",warning:"#F59E0B",error:"#EF4444",legendBackground:"#212121",legendText:"#212121"},bi={fontFamily:"'Inter', sans-serif",fontSize:{xs:"0.7rem",sm:"0.75rem",base:"0.9rem",md:"0.95rem",lg:"0.98rem",xl:"1rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem"},fontWeight:{normal:"400",medium:"500",semibold:"600",bold:"700"},lineHeight:{tight:"1.25",normal:"1.5",relaxed:"1.75"}};function Um(oe){return oe&&oe.__esModule&&Object.prototype.hasOwnProperty.call(oe,"default")?oe.default:oe}var gp={exports:{}};(function(oe,ae){(function(Ne,Ze){oe.exports=Ze()})(self,function(){return function(){var xe={79288:function(j,V,t){var b=t(3400),P={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in P){var L=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");b.addStyleRule(L,P[o])}},86712:function(j,V,t){j.exports=t(84224)},37240:function(j,V,t){j.exports=t(51132)},29744:function(j,V,t){j.exports=t(94456)},29352:function(j,V,t){j.exports=t(67244)},96144:function(j,V,t){j.exports=t(97776)},53219:function(j,V,t){j.exports=t(61712)},4624:function(j,V,t){j.exports=t(95856)},54543:function(j,V,t){j.exports=t(54272)},45e3:function(j,V,t){j.exports=t(85404)},62300:function(j,V,t){j.exports=t(26048)},6920:function(j,V,t){j.exports=t(66240)},10264:function(j,V,t){j.exports=t(40448)},32016:function(j,V,t){j.exports=t(64884)},27528:function(j,V,t){j.exports=t(15088)},75556:function(j,V,t){j.exports=t(76744)},39204:function(j,V,t){j.exports=t(94704)},73996:function(j,V,t){j.exports=t(62396)},16489:function(j,V,t){j.exports=t(32028)},5e3:function(j,V,t){j.exports=t(81932)},77280:function(j,V,t){j.exports=t(45536)},33992:function(j,V,t){j.exports=t(42600)},17600:function(j,V,t){j.exports=t(21536)},49116:function(j,V,t){j.exports=t(65664)},46808:function(j,V,t){j.exports=t(29044)},36168:function(j,V,t){j.exports=t(48928)},13792:function(j,V,t){var b=t(32016);b.register([t(37240),t(29352),t(5e3),t(33992),t(17600),t(49116),t(6920),t(67484),t(79440),t(39204),t(83096),t(36168),t(20260),t(63560),t(65832),t(46808),t(73996),t(48824),t(89904),t(25120),t(13752),t(4340),t(62300),t(29800),t(8363),t(54543),t(86636),t(42192),t(32140),t(77280),t(89296),t(56816),t(70192),t(45e3),t(27528),t(84764),t(3920),t(50248),t(4624),t(69967),t(10264),t(86152),t(53219),t(81604),t(63796),t(29744),t(89336),t(86712),t(75556),t(16489),t(97312),t(96144)]),j.exports=b},3920:function(j,V,t){j.exports=t(43480)},25120:function(j,V,t){j.exports=t(6296)},4340:function(j,V,t){j.exports=t(7404)},86152:function(j,V,t){j.exports=t(65456)},56816:function(j,V,t){j.exports=t(22020)},89296:function(j,V,t){j.exports=t(29928)},20260:function(j,V,t){j.exports=t(75792)},32140:function(j,V,t){j.exports=t(156)},84764:function(j,V,t){j.exports=t(45499)},48824:function(j,V,t){j.exports=t(3296)},69967:function(j,V,t){j.exports=t(4184)},8363:function(j,V,t){j.exports=t(36952)},86636:function(j,V,t){j.exports=t(38983)},70192:function(j,V,t){j.exports=t(11572)},81604:function(j,V,t){j.exports=t(76924)},63796:function(j,V,t){j.exports=t(62944)},89336:function(j,V,t){j.exports=t(95443)},67484:function(j,V,t){j.exports=t(34864)},97312:function(j,V,t){j.exports=t(76272)},42192:function(j,V,t){j.exports=t(97924)},29800:function(j,V,t){j.exports=t(15436)},63560:function(j,V,t){j.exports=t(5621)},89904:function(j,V,t){j.exports=t(91304)},50248:function(j,V,t){j.exports=t(41724)},65832:function(j,V,t){j.exports=t(31991)},79440:function(j,V,t){j.exports=t(22869)},13752:function(j,V,t){j.exports=t(67776)},83096:function(j,V,t){j.exports=t(95952)},72196:function(j){j.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},13916:function(j,V,t){var b=t(72196),P=t(25376),o=t(33816),L=t(31780).templatedArray;t(36208),j.exports=L("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:P({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:b.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:b.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:P({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},90272:function(j,V,t){var b=t(3400),P=t(54460),o=t(23816).draw;j.exports=function(p){var r=p._fullLayout,e=b.filterVisible(r.annotations);if(e.length&&p._fullData.length)return b.syncOrAsync([o,L],p)};function L(v){var p=v._fullLayout;b.filterVisible(p.annotations).forEach(function(r){var e=P.getFromId(v,r.xref),s=P.getFromId(v,r.yref),n=P.getRefType(r.xref),l=P.getRefType(r.yref);r._extremes={},n==="range"&&A(r,e),l==="range"&&A(r,s)})}function A(v,p){var r=p._id,e=r.charAt(0),s=v[e],n=v["a"+e],l=v[e+"ref"],f=v["a"+e+"ref"],u=v["_"+e+"padplus"],g=v["_"+e+"padminus"],h={x:1,y:-1}[e]*v[e+"shift"],T=3*v.arrowsize*v.arrowwidth||0,c=T+h,i=T-h,d=3*v.startarrowsize*v.arrowwidth||0,x=d+h,w=d-h,C;if(f===l){var y=P.findExtremes(p,[p.r2c(s)],{ppadplus:c,ppadminus:i}),S=P.findExtremes(p,[p.r2c(n)],{ppadplus:Math.max(u,x),ppadminus:Math.max(g,w)});C={min:[y.min[0],S.min[0]],max:[y.max[0],S.max[0]]}}else x=n?x+n:x,w=n?w-n:w,C=P.findExtremes(p,[p.r2c(s)],{ppadplus:Math.max(u,c,x),ppadminus:Math.max(g,i,w)});v._extremes[r]=C}},42300:function(j,V,t){var b=t(3400),P=t(24040),o=t(31780).arrayEditor;j.exports={hasClickToShow:L,onClick:A};function L(r,e){var s=v(r,e);return s.on.length>0||s.explicitOff.length>0}function A(r,e){var s=v(r,e),n=s.on,l=s.off.concat(s.explicitOff),f={},u=r._fullLayout.annotations,g,h;if(n.length||l.length){for(g=0;g<n.length;g++)h=o(r.layout,"annotations",u[n[g]]),h.modifyItem("visible",!0),b.extendFlat(f,h.getUpdateObj());for(g=0;g<l.length;g++)h=o(r.layout,"annotations",u[l[g]]),h.modifyItem("visible",!1),b.extendFlat(f,h.getUpdateObj());return P.call("update",r,{},f)}}function v(r,e){var s=r._fullLayout.annotations,n=[],l=[],f=[],u=(e||[]).length,g,h,T,c,i,d,x,w;for(g=0;g<s.length;g++)if(T=s[g],c=T.clicktoshow,c){for(h=0;h<u;h++)if(i=e[h],d=i.xaxis,x=i.yaxis,d._id===T.xref&&x._id===T.yref&&d.d2r(i.x)===p(T._xclick,d)&&x.d2r(i.y)===p(T._yclick,x)){T.visible?c==="onout"?w=l:w=f:w=n,w.push(g);break}h===u&&T.visible&&c==="onout"&&l.push(g)}return{on:n,off:l,explicitOff:f}}function p(r,e){return e.type==="log"?e.l2r(r):e.d2r(r)}},87192:function(j,V,t){var b=t(3400),P=t(76308);j.exports=function(L,A,v,p){p("opacity");var r=p("bgcolor"),e=p("bordercolor"),s=P.opacity(e);p("borderpad");var n=p("borderwidth"),l=p("showarrow");p("text",l?" ":v._dfltTitle.annotation),p("textangle"),b.coerceFont(p,"font",v.font),p("width"),p("align");var f=p("height");if(f&&p("valign"),l){var u=p("arrowside"),g,h;u.indexOf("end")!==-1&&(g=p("arrowhead"),h=p("arrowsize")),u.indexOf("start")!==-1&&(p("startarrowhead",g),p("startarrowsize",h)),p("arrowcolor",s?A.bordercolor:P.defaultLine),p("arrowwidth",(s&&n||1)*2),p("standoff"),p("startstandoff")}var T=p("hovertext"),c=v.hoverlabel||{};if(T){var i=p("hoverlabel.bgcolor",c.bgcolor||(P.opacity(r)?P.rgb(r):P.defaultLine)),d=p("hoverlabel.bordercolor",c.bordercolor||P.contrast(i)),x=b.extendFlat({},c.font);x.color||(x.color=d),b.coerceFont(p,"hoverlabel.font",x)}p("captureevents",!!T)}},26828:function(j,V,t){var b=t(38248),P=t(36896);j.exports=function(L,A,v,p){A=A||{};var r=v==="log"&&A.type==="linear",e=v==="linear"&&A.type==="log";if(!(r||e))return;var s=L._fullLayout.annotations,n=A._id.charAt(0),l,f;function u(h){var T=l[h],c=null;r?c=P(T,A.range):c=Math.pow(10,T),b(c)||(c=null),p(f+h,c)}for(var g=0;g<s.length;g++)l=s[g],f="annotations["+g+"].",l[n+"ref"]===A._id&&u(n),l["a"+n+"ref"]===A._id&&u("a"+n)}},45216:function(j,V,t){var b=t(3400),P=t(54460),o=t(51272),L=t(87192),A=t(13916);j.exports=function(r,e){o(r,e,{name:"annotations",handleItemDefaults:v})};function v(p,r,e){function s(M,a){return b.coerce(p,r,A,M,a)}var n=s("visible"),l=s("clicktoshow");if(n||l){L(p,r,e,s);for(var f=r.showarrow,u=["x","y"],g=[-10,-30],h={_fullLayout:e},T=0;T<2;T++){var c=u[T],i=P.coerceRef(p,r,h,c,"","paper");if(i!=="paper"){var d=P.getFromId(h,i);d._annIndices.push(r._index)}if(P.coercePosition(r,h,s,i,c,.5),f){var x="a"+c,w=P.coerceRef(p,r,h,x,"pixel",["pixel","paper"]);w!=="pixel"&&w!==i&&(w=r[x]="pixel");var C=w==="pixel"?g[T]:.4;P.coercePosition(r,h,s,w,x,C)}s(c+"anchor"),s(c+"shift")}if(b.noneOrAll(p,r,["x","y"]),f&&b.noneOrAll(p,r,["ax","ay"]),l){var y=s("xclick"),S=s("yclick");r._xclick=y===void 0?r.x:P.cleanPosition(y,h,r.xref),r._yclick=S===void 0?r.y:P.cleanPosition(S,h,r.yref)}}}},23816:function(j,V,t){var b=t(33428),P=t(24040),o=t(7316),L=t(3400),A=L.strTranslate,v=t(54460),p=t(76308),r=t(43616),e=t(93024),s=t(72736),n=t(93972),l=t(86476),f=t(31780).arrayEditor,u=t(33652);j.exports={draw:g,drawOne:h,drawRaw:c};function g(i){var d=i._fullLayout;d._infolayer.selectAll(".annotation").remove();for(var x=0;x<d.annotations.length;x++)d.annotations[x].visible&&h(i,x);return o.previousPromises(i)}function h(i,d){var x=i._fullLayout,w=x.annotations[d]||{},C=v.getFromId(i,w.xref),y=v.getFromId(i,w.yref);C&&C.setScale(),y&&y.setScale(),c(i,w,d,!1,C,y)}function T(i,d,x,w,C){var y=C[x],S=C[x+"ref"],M=x.indexOf("y")!==-1,a=v.getRefType(S)==="domain",E=M?w.h:w.w;return i?a?y+(M?-d:d)/i._length:i.p2r(i.r2p(y)+d):y+(M?-d:d)/E}function c(i,d,x,w,C,y){var S=i._fullLayout,M=i._fullLayout._size,a=i._context.edits,E,m;w?(E="annotation-"+w,m=w+".annotations"):(E="annotation",m="annotations");var k=f(i.layout,m,d),I=k.modifyBase,O=k.modifyItem,z=k.getUpdateObj;S._infolayer.selectAll("."+E+'[data-index="'+x+'"]').remove();var B="clip"+S._uid+"_ann"+x;if(!d._input||d.visible===!1){b.selectAll("#"+B).remove();return}var F={x:{},y:{}},_=+d.textangle||0,N=S._infolayer.append("g").classed(E,!0).attr("data-index",String(x)).style("opacity",d.opacity),G=N.append("g").classed("annotation-text-g",!0),X=a[d.showarrow?"annotationTail":"annotationPosition"],$=d.captureevents||a.annotationText||X;function et(dt){var mt={index:x,annotation:d._input,fullAnnotation:d,event:dt};return w&&(mt.subplotId=w),mt}var ot=G.append("g").style("pointer-events",$?"all":null).call(n,"pointer").on("click",function(){i._dragging=!1,i.emit("plotly_clickannotation",et(b.event))});d.hovertext&&ot.on("mouseover",function(){var dt=d.hoverlabel,mt=dt.font,gt=this.getBoundingClientRect(),Mt=i.getBoundingClientRect();e.loneHover({x0:gt.left-Mt.left,x1:gt.right-Mt.left,y:(gt.top+gt.bottom)/2-Mt.top,text:d.hovertext,color:dt.bgcolor,borderColor:dt.bordercolor,fontFamily:mt.family,fontSize:mt.size,fontColor:mt.color,fontWeight:mt.weight,fontStyle:mt.style,fontVariant:mt.variant,fontShadow:mt.fontShadow,fontLineposition:mt.fontLineposition,fontTextcase:mt.fontTextcase},{container:S._hoverlayer.node(),outerContainer:S._paper.node(),gd:i})}).on("mouseout",function(){e.loneUnhover(S._hoverlayer.node())});var nt=d.borderwidth,Z=d.borderpad,Q=nt+Z,W=ot.append("rect").attr("class","bg").style("stroke-width",nt+"px").call(p.stroke,d.bordercolor).call(p.fill,d.bgcolor),J=d.width||d.height,it=S._topclips.selectAll("#"+B).data(J?[0]:[]);it.enter().append("clipPath").classed("annclip",!0).attr("id",B).append("rect"),it.exit().remove();var K=d.font,H=S._meta?L.templateString(d.text,S._meta):d.text,at=ot.append("text").classed("annotation-text",!0).text(H);function tt(dt){return dt.call(r.font,K).attr({"text-anchor":{left:"start",right:"end"}[d.align]||"middle"}),s.convertToTspans(dt,i,lt),dt}function lt(){var dt=at.selectAll("a");if(dt.size()===1&&dt.text()===at.text()){var mt=ot.insert("a",":first-child").attr({"xlink:xlink:href":dt.attr("xlink:href"),"xlink:xlink:show":dt.attr("xlink:show")}).style({cursor:"pointer"});mt.node().appendChild(W.node())}var gt=ot.select(".annotation-text-math-group"),Mt=!gt.empty(),Lt=r.bBox((Mt?gt:at).node()),zt=Lt.width,xt=Lt.height,Ct=d.width||zt,wt=d.height||xt,Rt=Math.round(Ct+2*Q),Tt=Math.round(wt+2*Q);function Bt(mr,ir){return ir==="auto"&&(mr<.3333333333333333?ir="left":mr>.6666666666666666?ir="right":ir="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[ir]}for(var Gt=!1,te=["x","y"],Wt=0;Wt<te.length;Wt++){var jt=te[Wt],ie=d[jt+"ref"]||jt,ue=d["a"+jt+"ref"],fe={x:C,y}[jt],pe=(_+(jt==="x"?0:-90))*Math.PI/180,Te=Rt*Math.cos(pe),Qt=Tt*Math.sin(pe),Pt=Math.abs(Te)+Math.abs(Qt),Ot=d[jt+"anchor"],Nt=d[jt+"shift"]*(jt==="x"?1:-1),Ht=F[jt],St,kt,Ft,At,ft,pt=v.getRefType(ie);if(fe&&pt!=="domain"){var Dt=fe.r2fraction(d[jt]);(Dt<0||Dt>1)&&(ue===ie?(Dt=fe.r2fraction(d["a"+jt]),(Dt<0||Dt>1)&&(Gt=!0)):Gt=!0),St=fe._offset+fe.r2p(d[jt]),At=.5}else{var Ut=pt==="domain";jt==="x"?(Ft=d[jt],St=Ut?fe._offset+fe._length*Ft:St=M.l+M.w*Ft):(Ft=1-d[jt],St=Ut?fe._offset+fe._length*Ft:St=M.t+M.h*Ft),At=d.showarrow?.5:Ft}if(d.showarrow){Ht.head=St;var $t=d["a"+jt];if(ft=Te*Bt(.5,d.xanchor)-Qt*Bt(.5,d.yanchor),ue===ie){var re=v.getRefType(ue);re==="domain"?(jt==="y"&&($t=1-$t),Ht.tail=fe._offset+fe._length*$t):re==="paper"?jt==="y"?($t=1-$t,Ht.tail=M.t+M.h*$t):Ht.tail=M.l+M.w*$t:Ht.tail=fe._offset+fe.r2p($t),kt=ft}else Ht.tail=St+$t,kt=ft+$t;Ht.text=Ht.tail+ft;var Be=S[jt==="x"?"width":"height"];if(ie==="paper"&&(Ht.head=L.constrain(Ht.head,1,Be-1)),ue==="pixel"){var We=-Math.max(Ht.tail-3,Ht.text),me=Math.min(Ht.tail+3,Ht.text)-Be;We>0?(Ht.tail+=We,Ht.text+=We):me>0&&(Ht.tail-=me,Ht.text-=me)}Ht.tail+=Nt,Ht.head+=Nt}else ft=Pt*Bt(At,Ot),kt=ft,Ht.text=St+ft;Ht.text+=Nt,ft+=Nt,kt+=Nt,d["_"+jt+"padplus"]=Pt/2+kt,d["_"+jt+"padminus"]=Pt/2-kt,d["_"+jt+"size"]=Pt,d["_"+jt+"shift"]=ft}if(Gt){ot.remove();return}var Se=0,je=0;if(d.align!=="left"&&(Se=(Ct-zt)*(d.align==="center"?.5:1)),d.valign!=="top"&&(je=(wt-xt)*(d.valign==="middle"?.5:1)),Mt)gt.select("svg").attr({x:Q+Se-1,y:Q+je}).call(r.setClipUrl,J?B:null,i);else{var vr=Q+je-Lt.top,he=Q+Se-Lt.left;at.call(s.positionText,he,vr).call(r.setClipUrl,J?B:null,i)}it.select("rect").call(r.setRect,Q,Q,Ct,wt),W.call(r.setRect,nt/2,nt/2,Rt-nt,Tt-nt),ot.call(r.setTranslate,Math.round(F.x.text-Rt/2),Math.round(F.y.text-Tt/2)),G.attr({transform:"rotate("+_+","+F.x.text+","+F.y.text+")"});var Ye=function(mr,ir){N.selectAll(".annotation-arrow-g").remove();var ve=F.x.head,ne=F.y.head,ge=F.x.tail+mr,Ae=F.y.tail+ir,Re=F.x.text+mr,ze=F.y.text+ir,ke=L.rotationXYMatrix(_,Re,ze),_e=L.apply2DTransform(ke),Ke=L.apply2DTransform2(ke),hr=+W.attr("width"),cr=+W.attr("height"),dr=Re-.5*hr,fr=dr+hr,Lr=ze-.5*cr,xr=Lr+cr,Yt=[[dr,Lr,dr,xr],[dr,xr,fr,xr],[fr,xr,fr,Lr],[fr,Lr,dr,Lr]].map(Ke);if(!Yt.reduce(function(Tr,vn){return Tr^!!L.segmentsIntersect(ve,ne,ve+1e6,ne+1e6,vn[0],vn[1],vn[2],vn[3])},!1)){Yt.forEach(function(Tr){var vn=L.segmentsIntersect(ge,Ae,ve,ne,Tr[0],Tr[1],Tr[2],Tr[3]);vn&&(ge=vn.x,Ae=vn.y)});var Jt=d.arrowwidth,qe=d.arrowcolor,tr=d.arrowside,Ge=N.append("g").style({opacity:p.opacity(qe)}).classed("annotation-arrow-g",!0),Ee=Ge.append("path").attr("d","M"+ge+","+Ae+"L"+ve+","+ne).style("stroke-width",Jt+"px").call(p.stroke,p.rgb(qe));if(u(Ee,tr,d),a.annotationPosition&&Ee.node().parentNode&&!w){var Xe=ve,rr=ne;if(d.standoff){var Je=Math.sqrt(Math.pow(ve-ge,2)+Math.pow(ne-Ae,2));Xe+=d.standoff*(ge-ve)/Je,rr+=d.standoff*(Ae-ne)/Je}var He=Ge.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(ge-Xe)+","+(Ae-rr),transform:A(Xe,rr)}).style("stroke-width",Jt+6+"px").call(p.stroke,"rgba(0,0,0,0)").call(p.fill,"rgba(0,0,0,0)"),yr,Ir;l.init({element:He.node(),gd:i,prepFn:function(){var Tr=r.getTranslate(ot);yr=Tr.x,Ir=Tr.y,C&&C.autorange&&I(C._name+".autorange",!0),y&&y.autorange&&I(y._name+".autorange",!0)},moveFn:function(Tr,vn){var Or=_e(yr,Ir),En=Or[0]+Tr,nn=Or[1]+vn;ot.call(r.setTranslate,En,nn),O("x",T(C,Tr,"x",M,d)),O("y",T(y,vn,"y",M,d)),d.axref===d.xref&&O("ax",T(C,Tr,"ax",M,d)),d.ayref===d.yref&&O("ay",T(y,vn,"ay",M,d)),Ge.attr("transform",A(Tr,vn)),G.attr({transform:"rotate("+_+","+En+","+nn+")"})},doneFn:function(){P.call("_guiRelayout",i,z());var Tr=document.querySelector(".js-notes-box-panel");Tr&&Tr.redraw(Tr.selectedObj)}})}}};if(d.showarrow&&Ye(0,0),X){var Qe;l.init({element:ot.node(),gd:i,prepFn:function(){Qe=G.attr("transform")},moveFn:function(mr,ir){var ve="pointer";if(d.showarrow)d.axref===d.xref?O("ax",T(C,mr,"ax",M,d)):O("ax",d.ax+mr),d.ayref===d.yref?O("ay",T(y,ir,"ay",M.w,d)):O("ay",d.ay+ir),Ye(mr,ir);else{if(w)return;var ne,ge;if(C)ne=T(C,mr,"x",M,d);else{var Ae=d._xsize/M.w,Re=d.x+(d._xshift-d.xshift)/M.w-Ae/2;ne=l.align(Re+mr/M.w,Ae,0,1,d.xanchor)}if(y)ge=T(y,ir,"y",M,d);else{var ze=d._ysize/M.h,ke=d.y-(d._yshift+d.yshift)/M.h-ze/2;ge=l.align(ke-ir/M.h,ze,0,1,d.yanchor)}O("x",ne),O("y",ge),(!C||!y)&&(ve=l.getCursor(C?.5:ne,y?.5:ge,d.xanchor,d.yanchor))}G.attr({transform:A(mr,ir)+Qe}),n(ot,ve)},clickFn:function(mr,ir){d.captureevents&&i.emit("plotly_clickannotation",et(ir))},doneFn:function(){n(ot),P.call("_guiRelayout",i,z());var mr=document.querySelector(".js-notes-box-panel");mr&&mr.redraw(mr.selectedObj)}})}}a.annotationText?at.call(s.makeEditable,{delegate:ot,gd:i}).call(tt).on("edit",function(dt){d.text=dt,this.call(tt),O("text",dt),C&&C.autorange&&I(C._name+".autorange",!0),y&&y.autorange&&I(y._name+".autorange",!0),P.call("_guiRelayout",i,z())}):at.call(tt)}},33652:function(j,V,t){var b=t(33428),P=t(76308),o=t(72196),L=t(3400),A=L.strScale,v=L.strRotate,p=L.strTranslate;j.exports=function(e,s,n){var l=e.node(),f=o[n.arrowhead||0],u=o[n.startarrowhead||0],g=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),T=s.indexOf("start")>=0,c=s.indexOf("end")>=0,i=f.backoff*g+n.standoff,d=u.backoff*h+n.startstandoff,x,w,C,y;if(l.nodeName==="line"){x={x:+e.attr("x1"),y:+e.attr("y1")},w={x:+e.attr("x2"),y:+e.attr("y2")};var S=x.x-w.x,M=x.y-w.y;if(C=Math.atan2(M,S),y=C+Math.PI,i&&d&&i+d>Math.sqrt(S*S+M*M)){G();return}if(i){if(i*i>S*S+M*M){G();return}var a=i*Math.cos(C),E=i*Math.sin(C);w.x+=a,w.y+=E,e.attr({x2:w.x,y2:w.y})}if(d){if(d*d>S*S+M*M){G();return}var m=d*Math.cos(C),k=d*Math.sin(C);x.x-=m,x.y-=k,e.attr({x1:x.x,y1:x.y})}}else if(l.nodeName==="path"){var I=l.getTotalLength(),O="";if(I<i+d){G();return}var z=l.getPointAtLength(0),B=l.getPointAtLength(.1);C=Math.atan2(z.y-B.y,z.x-B.x),x=l.getPointAtLength(Math.min(d,I)),O="0px,"+d+"px,";var F=l.getPointAtLength(I),_=l.getPointAtLength(I-.1);y=Math.atan2(F.y-_.y,F.x-_.x),w=l.getPointAtLength(Math.max(0,I-i));var N=O?d+i:i;O+=I-N+"px,"+I+"px",e.style("stroke-dasharray",O)}function G(){e.style("stroke-dasharray","0px,100px")}function X($,et,ot,nt){$.path&&($.noRotate&&(ot=0),b.select(l.parentNode).append("path").attr({class:e.attr("class"),d:$.path,transform:p(et.x,et.y)+v(ot*180/Math.PI)+A(nt)}).style({fill:P.rgb(n.arrowcolor),"stroke-width":0}))}T&&X(u,x,C,h),c&&X(f,w,y,g)}},79180:function(j,V,t){var b=t(23816),P=t(42300);j.exports={moduleType:"component",name:"annotations",layoutAttributes:t(13916),supplyLayoutDefaults:t(45216),includeBasePlot:t(36632)("annotations"),calcAutorange:t(90272),draw:b.draw,drawOne:b.drawOne,drawRaw:b.drawRaw,hasClickToShow:P.hasClickToShow,onClick:P.onClick,convertCoords:t(26828)}},45899:function(j,V,t){var b=t(13916),P=t(67824).overrideAll,o=t(31780).templatedArray;j.exports=P(o("annotation",{visible:b.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:b.xanchor,xshift:b.xshift,yanchor:b.yanchor,yshift:b.yshift,text:b.text,textangle:b.textangle,font:b.font,width:b.width,height:b.height,opacity:b.opacity,align:b.align,valign:b.valign,bgcolor:b.bgcolor,bordercolor:b.bordercolor,borderpad:b.borderpad,borderwidth:b.borderwidth,showarrow:b.showarrow,arrowcolor:b.arrowcolor,arrowhead:b.arrowhead,startarrowhead:b.startarrowhead,arrowside:b.arrowside,arrowsize:b.arrowsize,startarrowsize:b.startarrowsize,arrowwidth:b.arrowwidth,standoff:b.standoff,startstandoff:b.startstandoff,hovertext:b.hovertext,hoverlabel:b.hoverlabel,captureevents:b.captureevents}),"calc","from-root")},42456:function(j,V,t){var b=t(3400),P=t(54460);j.exports=function(A){for(var v=A.fullSceneLayout,p=v.annotations,r=0;r<p.length;r++)o(p[r],A);A.fullLayout._infolayer.selectAll(".annotation-"+A.id).remove()};function o(L,A){var v=A.fullSceneLayout,p=v.domain,r=A.fullLayout._size,e={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};L._xa={},b.extendFlat(L._xa,e),P.setConvert(L._xa),L._xa._offset=r.l+p.x[0]*r.w,L._xa.l2p=function(){return .5*(1+L._pdata[0]/L._pdata[3])*r.w*(p.x[1]-p.x[0])},L._ya={},b.extendFlat(L._ya,e),P.setConvert(L._ya),L._ya._offset=r.t+(1-p.y[1])*r.h,L._ya.l2p=function(){return .5*(1-L._pdata[1]/L._pdata[3])*r.h*(p.y[1]-p.y[0])}}},52808:function(j,V,t){var b=t(3400),P=t(54460),o=t(51272),L=t(87192),A=t(45899);j.exports=function(r,e,s){o(r,e,{name:"annotations",handleItemDefaults:v,fullLayout:s.fullLayout})};function v(p,r,e,s){function n(u,g){return b.coerce(p,r,A,u,g)}function l(u){var g=u+"axis",h={_fullLayout:{}};return h._fullLayout[g]=e[g],P.coercePosition(r,h,n,u,u,.5)}var f=n("visible");f&&(L(p,r,s.fullLayout,n),l("x"),l("y"),l("z"),b.noneOrAll(p,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",n("xanchor"),n("yanchor"),n("xshift"),n("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",n("ax",-10),n("ay",-30),b.noneOrAll(p,r,["ax","ay"])))}},71836:function(j,V,t){var b=t(23816).drawRaw,P=t(94424),o=["x","y","z"];j.exports=function(A){for(var v=A.fullSceneLayout,p=A.dataScale,r=v.annotations,e=0;e<r.length;e++){for(var s=r[e],n=!1,l=0;l<3;l++){var f=o[l],u=s[f],g=v[f+"axis"],h=g.r2fraction(u);if(h<0||h>1){n=!0;break}}n?A.fullLayout._infolayer.select(".annotation-"+A.id+'[data-index="'+e+'"]').remove():(s._pdata=P(A.glplot.cameraParams,[v.xaxis.r2l(s.x)*p[0],v.yaxis.r2l(s.y)*p[1],v.zaxis.r2l(s.z)*p[2]]),b(A.graphDiv,s,e,A.id,s._xa,s._ya))}}},56864:function(j,V,t){var b=t(24040),P=t(3400);j.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t(45899)}}},layoutAttributes:t(45899),handleDefaults:t(52808),includeBasePlot:o,convert:t(42456),draw:t(71836)};function o(L,A){var v=b.subplotsRegistry.gl3d;if(v)for(var p=v.attrRegex,r=Object.keys(L),e=0;e<r.length;e++){var s=r[e];p.test(s)&&(L[s].annotations||[]).length&&(P.pushUnique(A._basePlotModules,v),P.pushUnique(A._subplots.gl3d,s))}}},54976:function(j,V,t){j.exports=t(38700),t(15168),t(67020),t(89792),t(55668),t(65168),t(2084),t(26368),t(24747),t(65616),t(30632),t(73040),t(1104),t(51456),t(4592),t(45348)},97776:function(j,V,t){var b=t(54976),P=t(3400),o=t(39032),L=o.EPOCHJD,A=o.ONEDAY,v={valType:"enumerated",values:P.sortObjectKeys(b.calendars),editType:"calc",dflt:"gregorian"},p=function(C,y,S,M){var a={};return a[S]=v,P.coerce(C,y,a,S,M)},r=function(C,y,S,M){for(var a=0;a<S.length;a++)p(C,y,S[a]+"calendar",M.calendar)},e={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},s={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},n={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},l="##",f={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:l,w:l,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function u(C,y,S){for(var M=Math.floor((y+.05)/A)+L,a=h(S).fromJD(M),E=0,m,k,I,O,z;(E=C.indexOf("%",E))!==-1;)m=C.charAt(E+1),m==="0"||m==="-"||m==="_"?(I=3,k=C.charAt(E+2),m==="_"&&(m="-")):(k=m,m="0",I=2),O=f[k],O?(O===l?z=l:z=a.formatDate(O[m]),C=C.substr(0,E)+z+C.substr(E+I),E+=z.length):E+=I;return C}var g={};function h(C){var y=g[C];return y||(y=g[C]=b.instance(C),y)}function T(C){return P.extendFlat({},v,{description:C})}function c(C){return"Sets the calendar system to use with `"+C+"` date data."}var i={xcalendar:T(c("x"))},d=P.extendFlat({},i,{ycalendar:T(c("y"))}),x=P.extendFlat({},d,{zcalendar:T(c("z"))}),w=T(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));j.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:d,bar:d,box:d,heatmap:d,contour:d,histogram:d,histogram2d:d,histogram2dcontour:d,scatter3d:x,surface:x,mesh3d:x,scattergl:d,ohlc:i,candlestick:i},layout:{calendar:T(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:w},yaxis:{calendar:w},scene:{xaxis:{calendar:w},yaxis:{calendar:w},zaxis:{calendar:w}},polar:{radialaxis:{calendar:w}}},transforms:{filter:{valuecalendar:T(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:T(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:v,handleDefaults:p,handleTraceDefaults:r,CANONICAL_SUNDAY:s,CANONICAL_TICK:e,DFLTRANGE:n,getCal:h,worldCalFmt:u}},22548:function(j,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=90.9090909090909},76308:function(j,V,t){var b=t(49760),P=t(38248),o=t(38116).isTypedArray,L=j.exports={},A=t(22548);L.defaults=A.defaults;var v=L.defaultLine=A.defaultLine;L.lightLine=A.lightLine;var p=L.background=A.background;L.tinyRGB=function(e){var s=e.toRgb();return"rgb("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+")"},L.rgb=function(e){return L.tinyRGB(b(e))},L.opacity=function(e){return e?b(e).getAlpha():0},L.addOpacity=function(e,s){var n=b(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+s+")"},L.combine=function(e,s){var n=b(e).toRgb();if(n.a===1)return b(e).toRgbString();var l=b(s||p).toRgb(),f=l.a===1?l:{r:255*(1-l.a)+l.r*l.a,g:255*(1-l.a)+l.g*l.a,b:255*(1-l.a)+l.b*l.a},u={r:f.r*(1-n.a)+n.r*n.a,g:f.g*(1-n.a)+n.g*n.a,b:f.b*(1-n.a)+n.b*n.a};return b(u).toRgbString()},L.interpolate=function(e,s,n){var l=b(e).toRgb(),f=b(s).toRgb(),u={r:n*l.r+(1-n)*f.r,g:n*l.g+(1-n)*f.g,b:n*l.b+(1-n)*f.b};return b(u).toRgbString()},L.contrast=function(e,s,n){var l=b(e);l.getAlpha()!==1&&(l=b(L.combine(e,p)));var f=l.isDark()?s?l.lighten(s):p:n?l.darken(n):v;return f.toString()},L.stroke=function(e,s){var n=b(s);e.style({stroke:L.tinyRGB(n),"stroke-opacity":n.getAlpha()})},L.fill=function(e,s){var n=b(s);e.style({fill:L.tinyRGB(n),"fill-opacity":n.getAlpha()})},L.clean=function(e){if(!(!e||typeof e!="object")){var s=Object.keys(e),n,l,f,u;for(n=0;n<s.length;n++)if(f=s[n],u=e[f],f.substr(f.length-5)==="color")if(Array.isArray(u))for(l=0;l<u.length;l++)u[l]=r(u[l]);else e[f]=r(u);else if(f.substr(f.length-10)==="colorscale"&&Array.isArray(u))for(l=0;l<u.length;l++)Array.isArray(u[l])&&(u[l][1]=r(u[l][1]));else if(Array.isArray(u)){var g=u[0];if(!Array.isArray(g)&&g&&typeof g=="object")for(l=0;l<u.length;l++)L.clean(u[l])}else u&&typeof u=="object"&&!o(u)&&L.clean(u)}};function r(e){if(P(e)||typeof e!="string")return e;var s=e.trim();if(s.substr(0,3)!=="rgb")return e;var n=s.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var l=n[1].trim().split(/\s*[\s,]\s*/),f=s.charAt(3)==="a"&&l.length===4;if(!f&&l.length!==3)return e;for(var u=0;u<l.length;u++){if(!l[u].length||(l[u]=Number(l[u]),!(l[u]>=0)))return e;if(u===3)l[u]>1&&(l[u]=1);else if(l[u]>=1)return e}var g=Math.round(l[0]*255)+", "+Math.round(l[1]*255)+", "+Math.round(l[2]*255);return f?"rgba("+g+", "+l[3]+")":"rgb("+g+")"}},42996:function(j,V,t){var b=t(94724),P=t(25376),o=t(92880).extendFlat,L=t(67824).overrideAll;j.exports=L({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:b.linecolor,outlinewidth:b.linewidth,bordercolor:b.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:b.minor.tickmode,nticks:b.nticks,tick0:b.tick0,dtick:b.dtick,tickvals:b.tickvals,ticktext:b.ticktext,ticks:o({},b.ticks,{dflt:""}),ticklabeloverflow:o({},b.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:b.ticklen,tickwidth:b.tickwidth,tickcolor:b.tickcolor,ticklabelstep:b.ticklabelstep,showticklabels:b.showticklabels,labelalias:b.labelalias,tickfont:P({}),tickangle:b.tickangle,tickformat:b.tickformat,tickformatstops:b.tickformatstops,tickprefix:b.tickprefix,showtickprefix:b.showtickprefix,ticksuffix:b.ticksuffix,showticksuffix:b.showticksuffix,separatethousands:b.separatethousands,exponentformat:b.exponentformat,minexponent:b.minexponent,showexponent:b.showexponent,title:{text:{valType:"string"},font:P({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:P({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},63964:function(j){j.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},64013:function(j,V,t){var b=t(3400),P=t(31780),o=t(26332),L=t(25404),A=t(95936),v=t(42568),p=t(42996);j.exports=function(e,s,n){var l=P.newContainer(s,"colorbar"),f=e.colorbar||{};function u(F,_){return b.coerce(f,l,p,F,_)}var g=n.margin||{t:0,b:0,l:0,r:0},h=n.width-g.l-g.r,T=n.height-g.t-g.b,c=u("orientation"),i=c==="v",d=u("thicknessmode");u("thickness",d==="fraction"?30/(i?h:T):30);var x=u("lenmode");u("len",x==="fraction"?1:i?T:h);var w=u("yref"),C=u("xref"),y=w==="paper",S=C==="paper",M,a,E,m="left";i?(E="middle",m=S?"left":"right",M=S?1.02:1,a=.5):(E=y?"bottom":"top",m="center",M=.5,a=y?1.02:1),b.coerce(f,l,{x:{valType:"number",min:S?-2:0,max:S?3:1,dflt:M}},"x"),b.coerce(f,l,{y:{valType:"number",min:y?-2:0,max:y?3:1,dflt:a}},"y"),u("xanchor",m),u("xpad"),u("yanchor",E),u("ypad"),b.noneOrAll(f,l,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor");var k=b.coerce(f,l,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:i?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");u("ticklabeloverflow",k.indexOf("inside")!==-1?"hide past domain":"hide past div"),o(f,l,u,"linear");var I=n.font,O={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,outerTicks:!1,font:I};k.indexOf("inside")!==-1&&(O.bgColor="black"),v(f,l,u,"linear",O),A(f,l,u,"linear",O),L(f,l,u,"linear",O),u("title.text",n._dfltTitle.colorbar);var z=l.showticklabels?l.tickfont:I,B=b.extendFlat({},I,{family:z.family,size:b.bigFont(z.size)});b.coerceFont(u,"title.font",B),u("title.side",i?"top":"right")}},37848:function(j,V,t){var b=t(33428),P=t(49760),o=t(7316),L=t(24040),A=t(54460),v=t(86476),p=t(3400),r=p.strTranslate,e=t(92880).extendFlat,s=t(93972),n=t(43616),l=t(76308),f=t(81668),u=t(72736),g=t(94288).flipScale,h=t(28336),T=t(37668),c=t(94724),i=t(84284),d=i.LINE_SPACING,x=i.FROM_TL,w=i.FROM_BR,C=t(63964).cn;function y(k){var I=k._fullLayout,O=I._infolayer.selectAll("g."+C.colorbar).data(S(k),function(z){return z._id});O.enter().append("g").attr("class",function(z){return z._id}).classed(C.colorbar,!0),O.each(function(z){var B=b.select(this);p.ensureSingle(B,"rect",C.cbbg),p.ensureSingle(B,"g",C.cbfills),p.ensureSingle(B,"g",C.cblines),p.ensureSingle(B,"g",C.cbaxis,function(_){_.classed(C.crisp,!0)}),p.ensureSingle(B,"g",C.cbtitleunshift,function(_){_.append("g").classed(C.cbtitle,!0)}),p.ensureSingle(B,"rect",C.cboutline);var F=M(B,z,k);F&&F.then&&(k._promises||[]).push(F),k._context.edits.colorbarPosition&&a(B,z,k)}),O.exit().each(function(z){o.autoMargin(k,z._id)}).remove(),O.order()}function S(k){var I=k._fullLayout,O=k.calcdata,z=[],B,F,_,N;function G(K){return e(K,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){typeof N.calc=="function"?N.calc(k,_,B):(B._fillgradient=F.reversescale?g(F.colorscale):F.colorscale,B._zrange=[F[N.min],F[N.max]])}for(var $=0;$<O.length;$++){var et=O[$];if(_=et[0].trace,!!_._module){var ot=_._module.colorbar;if(_.visible===!0&&ot)for(var nt=Array.isArray(ot),Z=nt?ot:[ot],Q=0;Q<Z.length;Q++){N=Z[Q];var W=N.container;F=W?_[W]:_,F&&F.showscale&&(B=G(F.colorbar),B._id="cb"+_.uid+(nt&&W?"-"+W:""),B._traceIndex=_.index,B._propPrefix=(W?W+".":"")+"colorbar.",B._meta=_._meta,X(),z.push(B))}}}for(var J in I._colorAxes)if(F=I[J],F.showscale){var it=I._colorAxes[J];B=G(F.colorbar),B._id="cb"+J,B._propPrefix=J+".colorbar.",B._meta=I._meta,N={min:"cmin",max:"cmax"},it[0]!=="heatmap"&&(_=it[1],N.calc=_._module.colorbar.calc),X(),z.push(B)}return z}function M(k,I,O){var z=I.orientation==="v",B=I.len,F=I.lenmode,_=I.thickness,N=I.thicknessmode,G=I.outlinewidth,X=I.borderwidth,$=I.bgcolor,et=I.xanchor,ot=I.yanchor,nt=I.xpad,Z=I.ypad,Q=I.x,W=z?I.y:1-I.y,J=I.yref==="paper",it=I.xref==="paper",K=O._fullLayout,H=K._size,at=I._fillcolor,tt=I._line,lt=I.title,dt=lt.side,mt=I._zrange||b.extent((typeof at=="function"?at:tt.color).domain()),gt=typeof tt.color=="function"?tt.color:function(){return tt.color},Mt=typeof at=="function"?at:function(){return at},Lt=I._levels,zt=E(O,I,mt),xt=zt.fill,Ct=zt.line,wt=Math.round(_*(N==="fraction"?z?H.w:H.h:1)),Rt=wt/(z?H.w:H.h),Tt=Math.round(B*(F==="fraction"?z?H.h:H.w:1)),Bt=Tt/(z?H.h:H.w),Gt=it?H.w:O._fullLayout.width,te=J?H.h:O._fullLayout.height,Wt=Math.round(z?Q*Gt+nt:W*te+Z),jt={center:.5,right:1}[et]||0,ie={top:1,middle:.5}[ot]||0,ue=z?Q-jt*Rt:W-ie*Rt,fe=z?W-ie*Bt:Q-jt*Bt,pe=Math.round(z?te*(1-fe):Gt*fe);I._lenFrac=Bt,I._thickFrac=Rt,I._uFrac=ue,I._vFrac=fe;var Te=I._axis=m(O,I,mt);Te.position=Rt+(z?Q+nt/H.w:W+Z/H.h);var Qt=["top","bottom"].indexOf(dt)!==-1;if(z&&Qt&&(Te.title.side=dt,Te.titlex=Q+nt/H.w,Te.titley=fe+(lt.side==="top"?Bt-Z/H.h:Z/H.h)),!z&&!Qt&&(Te.title.side=dt,Te.titley=W+Z/H.h,Te.titlex=fe+nt/H.w),tt.color&&I.tickmode==="auto"){Te.tickmode="linear",Te.tick0=Lt.start;var Pt=Lt.size,Ot=p.constrain(Tt/50,4,15)+1,Nt=(mt[1]-mt[0])/((I.nticks||Ot)*Pt);if(Nt>1){var Ht=Math.pow(10,Math.floor(Math.log(Nt)/Math.LN10));Pt*=Ht*p.roundUp(Nt/Ht,[2,5,10]),(Math.abs(Lt.start)/Lt.size+1e-6)%1<2e-6&&(Te.tick0=0)}Te.dtick=Pt}Te.domain=z?[fe+Z/H.h,fe+Bt-Z/H.h]:[fe+nt/H.w,fe+Bt-nt/H.w],Te.setScale(),k.attr("transform",r(Math.round(H.l),Math.round(H.t)));var St=k.select("."+C.cbtitleunshift).attr("transform",r(-Math.round(H.l),-Math.round(H.t))),kt=Te.ticklabelposition,Ft=Te.title.font.size,At=k.select("."+C.cbaxis),ft,pt=0,Dt=0;function Ut(me,Se){var je={propContainer:Te,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:K._dfltTitle.colorbar,containerGroup:k.select("."+C.cbtitle)},vr=me.charAt(0)==="h"?me.substr(1):"h"+me;k.selectAll("."+vr+",."+vr+"-math-group").remove(),f.draw(O,me,e(je,Se||{}))}function $t(){if(z&&Qt||!z&&!Qt){var me,Se;dt==="top"&&(me=nt+H.l+Gt*Q,Se=Z+H.t+te*(1-fe-Bt)+3+Ft*.75),dt==="bottom"&&(me=nt+H.l+Gt*Q,Se=Z+H.t+te*(1-fe)-3-Ft*.25),dt==="right"&&(Se=Z+H.t+te*W+3+Ft*.75,me=nt+H.l+Gt*fe),Ut(Te._id+"title",{attributes:{x:me,y:Se,"text-anchor":z?"start":"middle"}})}}function re(){if(z&&!Qt||!z&&Qt){var me=Te.position||0,Se=Te._offset+Te._length/2,je,vr;if(dt==="right")vr=Se,je=H.l+Gt*me+10+Ft*(Te.showticklabels?1:.5);else if(je=Se,dt==="bottom"&&(vr=H.t+te*me+10+(kt.indexOf("inside")===-1?Te.tickfont.size:0)+(Te.ticks!=="intside"&&I.ticklen||0)),dt==="top"){var he=lt.text.split("<br>").length;vr=H.t+te*me+10-wt-d*Ft*he}Ut((z?"h":"v")+Te._id+"title",{avoid:{selection:b.select(O).selectAll("g."+Te._id+"tick"),side:dt,offsetTop:z?0:H.t,offsetLeft:z?H.l:0,maxShift:z?K.width:K.height},attributes:{x:je,y:vr,"text-anchor":"middle"},transform:{rotate:z?-90:0,offset:0}})}}function Be(){if(!z&&!Qt||z&&Qt){var me=k.select("."+C.cbtitle),Se=me.select("text"),je=[-G/2,G/2],vr=me.select(".h"+Te._id+"title-math-group").node(),he=15.6;Se.node()&&(he=parseInt(Se.node().style.fontSize,10)*d);var Ye;if(vr?(Ye=n.bBox(vr),Dt=Ye.width,pt=Ye.height,pt>he&&(je[1]-=(pt-he)/2)):Se.node()&&!Se.classed(C.jsPlaceholder)&&(Ye=n.bBox(Se.node()),Dt=Ye.width,pt=Ye.height),z){if(pt){if(pt+=5,dt==="top")Te.domain[1]-=pt/H.h,je[1]*=-1;else{Te.domain[0]+=pt/H.h;var Qe=u.lineCount(Se);je[1]+=(1-Qe)*he}me.attr("transform",r(je[0],je[1])),Te.setScale()}}else Dt&&(dt==="right"&&(Te.domain[0]+=(Dt+Ft/2)/H.w),me.attr("transform",r(je[0],je[1])),Te.setScale())}k.selectAll("."+C.cbfills+",."+C.cblines).attr("transform",z?r(0,Math.round(H.h*(1-Te.domain[1]))):r(Math.round(H.w*Te.domain[0]),0)),At.attr("transform",z?r(0,Math.round(-H.t)):r(Math.round(-H.l),0));var mr=k.select("."+C.cbfills).selectAll("rect."+C.cbfill).attr("style","").data(xt);mr.enter().append("rect").classed(C.cbfill,!0).attr("style",""),mr.exit().remove();var ir=mt.map(Te.c2p).map(Math.round).sort(function(Re,ze){return Re-ze});mr.each(function(Re,ze){var ke=[ze===0?mt[0]:(xt[ze]+xt[ze-1])/2,ze===xt.length-1?mt[1]:(xt[ze]+xt[ze+1])/2].map(Te.c2p).map(Math.round);z&&(ke[1]=p.constrain(ke[1]+(ke[1]>ke[0])?1:-1,ir[0],ir[1]));var _e=b.select(this).attr(z?"x":"y",Wt).attr(z?"y":"x",b.min(ke)).attr(z?"width":"height",Math.max(wt,2)).attr(z?"height":"width",Math.max(b.max(ke)-b.min(ke),2));if(I._fillgradient)n.gradient(_e,O,I._id,z?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var Ke=Mt(Re).replace("e-","");_e.attr("fill",P(Ke).toHexString())}});var ve=k.select("."+C.cblines).selectAll("path."+C.cbline).data(tt.color&&tt.width?Ct:[]);ve.enter().append("path").classed(C.cbline,!0),ve.exit().remove(),ve.each(function(Re){var ze=Wt,ke=Math.round(Te.c2p(Re))+tt.width/2%1;b.select(this).attr("d","M"+(z?ze+","+ke:ke+","+ze)+(z?"h":"v")+wt).call(n.lineGroupStyle,tt.width,gt(Re),tt.dash)}),At.selectAll("g."+Te._id+"tick,path").remove();var ne=Wt+wt+(G||0)/2-(I.ticks==="outside"?1:0),ge=A.calcTicks(Te),Ae=A.getTickSigns(Te)[2];return A.drawTicks(O,Te,{vals:Te.ticks==="inside"?A.clipEnds(Te,ge):ge,layer:At,path:A.makeTickPath(Te,ne,Ae),transFn:A.makeTransTickFn(Te)}),A.drawLabels(O,Te,{vals:ge,layer:At,transFn:A.makeTransTickLabelFn(Te),labelFns:A.makeLabelFns(Te,ne)})}function We(){var me,Se=wt+G/2;kt.indexOf("inside")===-1&&(me=n.bBox(At.node()),Se+=z?me.width:me.height),ft=St.select("text");var je=0,vr=z&&dt==="top",he=!z&&dt==="right",Ye=0;if(ft.node()&&!ft.classed(C.jsPlaceholder)){var Qe,mr=St.select(".h"+Te._id+"title-math-group").node();mr&&(z&&Qt||!z&&!Qt)?(me=n.bBox(mr),je=me.width,Qe=me.height):(me=n.bBox(St.node()),je=me.right-H.l-(z?Wt:pe),Qe=me.bottom-H.t-(z?pe:Wt),!z&&dt==="top"&&(Se+=me.height,Ye=me.height)),he&&(ft.attr("transform",r(je/2+Ft/2,0)),je*=2),Se=Math.max(Se,z?je:Qe)}var ir=(z?nt:Z)*2+Se+X+G/2,ve=0;!z&&lt.text&&ot==="bottom"&&W<=0&&(ve=ir/2,ir+=ve,Ye+=ve),K._hColorbarMoveTitle=ve,K._hColorbarMoveCBTitle=Ye;var ne=X+G,ge=(z?Wt:pe)-ne/2-(z?nt:0),Ae=(z?pe:Wt)-(z?Tt:Z+Ye-ve);k.select("."+C.cbbg).attr("x",ge).attr("y",Ae).attr(z?"width":"height",Math.max(ir-ve,2)).attr(z?"height":"width",Math.max(Tt+ne,2)).call(l.fill,$).call(l.stroke,I.bordercolor).style("stroke-width",X);var Re=he?Math.max(je-10,0):0;k.selectAll("."+C.cboutline).attr("x",(z?Wt:pe+nt)+Re).attr("y",(z?pe+Z-Tt:Wt)+(vr?pt:0)).attr(z?"width":"height",Math.max(wt,2)).attr(z?"height":"width",Math.max(Tt-(z?2*Z+pt:2*nt+Re),2)).call(l.stroke,I.outlinecolor).style({fill:"none","stroke-width":G});var ze=z?jt*ir:0,ke=z?0:(1-ie)*ir-Ye;if(ze=it?H.l-ze:-ze,ke=J?H.t-ke:-ke,k.attr("transform",r(ze,ke)),!z&&(X||P($).getAlpha()&&!P.equals(K.paper_bgcolor,$))){var _e=At.selectAll("text"),Ke=_e[0].length,hr=k.select("."+C.cbbg).node(),cr=n.bBox(hr),dr=n.getTranslate(k),fr=2;_e.each(function(rr,Je){var He=0,yr=Ke-1;if(Je===He||Je===yr){var Ir=n.bBox(this),Tr=n.getTranslate(this),vn;if(Je===yr){var Or=Ir.right+Tr.x,En=cr.right+dr.x+pe-X-fr+Q;vn=En-Or,vn>0&&(vn=0)}else if(Je===He){var nn=Ir.left+Tr.x,gr=cr.left+dr.x+pe+X+fr;vn=gr-nn,vn<0&&(vn=0)}vn&&(Ke<3?this.setAttribute("transform","translate("+vn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Lr={},xr=x[et],Yt=w[et],Jt=x[ot],qe=w[ot],tr=ir-wt;z?(F==="pixels"?(Lr.y=W,Lr.t=Tt*Jt,Lr.b=Tt*qe):(Lr.t=Lr.b=0,Lr.yt=W+B*Jt,Lr.yb=W-B*qe),N==="pixels"?(Lr.x=Q,Lr.l=ir*xr,Lr.r=ir*Yt):(Lr.l=tr*xr,Lr.r=tr*Yt,Lr.xl=Q-_*xr,Lr.xr=Q+_*Yt)):(F==="pixels"?(Lr.x=Q,Lr.l=Tt*xr,Lr.r=Tt*Yt):(Lr.l=Lr.r=0,Lr.xl=Q+B*xr,Lr.xr=Q-B*Yt),N==="pixels"?(Lr.y=1-W,Lr.t=ir*Jt,Lr.b=ir*qe):(Lr.t=tr*Jt,Lr.b=tr*qe,Lr.yt=W-_*Jt,Lr.yb=W+_*qe));var Ge=I.y<.5?"b":"t",Ee=I.x<.5?"l":"r";O._fullLayout._reservedMargin[I._id]={};var Xe={r:K.width-ge-ze,l:ge+Lr.r,b:K.height-Ae-ke,t:Ae+Lr.b};it&&J?o.autoMargin(O,I._id,Lr):it?O._fullLayout._reservedMargin[I._id][Ge]=Xe[Ge]:J||z?O._fullLayout._reservedMargin[I._id][Ee]=Xe[Ee]:O._fullLayout._reservedMargin[I._id][Ge]=Xe[Ge]}return p.syncOrAsync([o.previousPromises,$t,Be,re,o.previousPromises,We],O)}function a(k,I,O){var z=I.orientation==="v",B=O._fullLayout,F=B._size,_,N,G;v.init({element:k.node(),gd:O,prepFn:function(){_=k.attr("transform"),s(k)},moveFn:function(X,$){k.attr("transform",_+r(X,$)),N=v.align((z?I._uFrac:I._vFrac)+X/F.w,z?I._thickFrac:I._lenFrac,0,1,I.xanchor),G=v.align((z?I._vFrac:1-I._uFrac)-$/F.h,z?I._lenFrac:I._thickFrac,0,1,I.yanchor);var et=v.getCursor(N,G,I.xanchor,I.yanchor);s(k,et)},doneFn:function(){if(s(k),N!==void 0&&G!==void 0){var X={};X[I._propPrefix+"x"]=N,X[I._propPrefix+"y"]=G,I._traceIndex!==void 0?L.call("_guiRestyle",O,X,I._traceIndex):L.call("_guiRelayout",O,X)}}})}function E(k,I,O){var z=I._levels,B=[],F=[],_,N,G=z.end+z.size/100,X=z.size,$=1.001*O[0]-.001*O[1],et=1.001*O[1]-.001*O[0];for(N=0;N<1e5&&(_=z.start+N*X,!(X>0?_>=G:_<=G));N++)_>$&&_<et&&B.push(_);if(I._fillgradient)F=[0];else if(typeof I._fillcolor=="function"){var ot=I._filllevels;if(ot)for(G=ot.end+ot.size/100,X=ot.size,N=0;N<1e5&&(_=ot.start+N*X,!(X>0?_>=G:_<=G));N++)_>O[0]&&_<O[1]&&F.push(_);else F=B.map(function(nt){return nt-z.size/2}),F.push(F[F.length-1]+z.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(F=[0]);return z.size<0&&(B.reverse(),F.reverse()),{line:B,fill:F}}function m(k,I,O){var z=k._fullLayout,B=I.orientation==="v",F={type:"linear",range:O,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,labelalias:I.labelalias,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:B?"right":"bottom",position:1},_=B?"y":"x",N={type:"linear",_id:_+I._id},G={letter:_,font:z.font,noAutotickangles:_==="y",noHover:!0,noTickson:!0,noTicklabelmode:!0,noInsideRange:!0,calendar:z.calendar};function X($,et){return p.coerce(F,N,c,$,et)}return h(F,N,X,G,z),T(F,N,X,G),N}j.exports={draw:y}},90553:function(j,V,t){var b=t(3400);j.exports=function(o){return b.isPlainObject(o.colorbar)}},55080:function(j,V,t){j.exports={moduleType:"component",name:"colorbar",attributes:t(42996),supplyDefaults:t(64013),draw:t(37848).draw,hasColorbar:t(90553)}},49084:function(j,V,t){var b=t(42996),P=t(53756).counter,o=t(95376),L=t(88304).scales;o(L),j.exports=function(v,p){v=v||"",p=p||{};var r=p.cLetter||"c";"onlyIfNumerical"in p&&p.onlyIfNumerical;var e="noScale"in p?p.noScale:v==="marker.line",s="showScaleDflt"in p?p.showScaleDflt:r==="z",n=typeof p.colorscaleDflt=="string"?L[p.colorscaleDflt]:null,l=p.editTypeOverride||"",f;"colorAttr"in p?(f=p.colorAttr,p.colorAttr):f={z:"z",c:"color"}[r];var u=r+"auto",g=r+"min",h=r+"max",T=r+"mid",c={};c[g]=c[h]=void 0;var i={};i[u]=!1;var d={};return f==="color"&&(d.color={valType:"color",arrayOk:!0,editType:l||"style"},p.anim&&(d.color.anim=!0)),d[u]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:c},d[g]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:i},d[h]={valType:"number",dflt:null,editType:l||"plot",impliedEdits:i},d[T]={valType:"number",dflt:null,editType:"calc",impliedEdits:c},d.colorscale={valType:"colorscale",editType:"calc",dflt:n,impliedEdits:{autocolorscale:!1}},d.autocolorscale={valType:"boolean",dflt:p.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},d.reversescale={valType:"boolean",dflt:!1,editType:"plot"},e||(d.showscale={valType:"boolean",dflt:s,editType:"calc"},d.colorbar=b),p.noColorAxis||(d.coloraxis={valType:"subplotid",regex:P("coloraxis"),dflt:null,editType:"calc"}),d}},47128:function(j,V,t){var b=t(38248),P=t(3400),o=t(94288).extractOpts;j.exports=function(A,v,p){var r=A._fullLayout,e=p.vals,s=p.containerStr,n=s?P.nestedProperty(v,s).get():v,l=o(n),f=l.auto!==!1,u=l.min,g=l.max,h=l.mid,T=function(){return P.aggNums(Math.min,null,e)},c=function(){return P.aggNums(Math.max,null,e)};if(u===void 0?u=T():f&&(n._colorAx&&b(u)?u=Math.min(u,T()):u=T()),g===void 0?g=c():f&&(n._colorAx&&b(g)?g=Math.max(g,c()):g=c()),f&&h!==void 0&&(g-h>h-u?u=h-(g-h):g-h<h-u&&(g=h+(h-u))),u===g&&(u-=.5,g+=.5),l._sync("min",u),l._sync("max",g),l.autocolorscale){var i;u*g<0?i=r.colorscale.diverging:u>=0?i=r.colorscale.sequential:i=r.colorscale.sequentialminus,l._sync("colorscale",i)}}},95504:function(j,V,t){var b=t(3400),P=t(94288).hasColorscale,o=t(94288).extractOpts;j.exports=function(A,v){function p(u,g){var h=u["_"+g];h!==void 0&&(u[g]=h)}function r(u,g){var h=g.container?b.nestedProperty(u,g.container).get():u;if(h)if(h.coloraxis)h._colorAx=v[h.coloraxis];else{var T=o(h),c=T.auto;(c||T.min===void 0)&&p(h,g.min),(c||T.max===void 0)&&p(h,g.max),T.autocolorscale&&p(h,"colorscale")}}for(var e=0;e<A.length;e++){var s=A[e],n=s._module.colorbar;if(n)if(Array.isArray(n))for(var l=0;l<n.length;l++)r(s,n[l]);else r(s,n);P(s,"marker.line")&&r(s,{container:"marker.line",min:"cmin",max:"cmax"})}for(var f in v._colorAxes)r(v[f],{min:"cmin",max:"cmax"})}},27260:function(j,V,t){var b=t(38248),P=t(3400),o=t(90553),L=t(64013),A=t(88304).isValid,v=t(24040).traceIs;function p(r,e){var s=e.slice(0,e.length-1);return e?P.nestedProperty(r,s).get()||{}:r}j.exports=function r(e,s,n,l,f){var u=f.prefix,g=f.cLetter,h="_module"in s,T=p(e,u),c=p(s,u),i=p(s._template||{},u)||{},d=function(){return delete e.coloraxis,delete s.coloraxis,r(e,s,n,l,f)};if(h){var x=n._colorAxes||{},w=l(u+"coloraxis");if(w){var C=v(s,"contour")&&P.nestedProperty(s,"contours.coloring").get()||"heatmap",y=x[w];y?(y[2].push(d),y[0]!==C&&(y[0]=!1,P.warn(["Ignoring coloraxis:",w,"setting","as it is linked to incompatible colorscales."].join(" ")))):x[w]=[C,s,[d]];return}}var S=T[g+"min"],M=T[g+"max"],a=b(S)&&b(M)&&S<M,E=l(u+g+"auto",!a);E?l(u+g+"mid"):(l(u+g+"min"),l(u+g+"max"));var m=T.colorscale,k=i.colorscale,I;if(m!==void 0&&(I=!A(m)),k!==void 0&&(I=!A(k)),l(u+"autocolorscale",I),l(u+"colorscale"),l(u+"reversescale"),u!=="marker.line."){var O;u&&h&&(O=o(T));var z=l(u+"showscale",O);z&&(u&&i&&(c._template=i),L(T,c,n))}}},94288:function(j,V,t){var b=t(33428),P=t(49760),o=t(38248),L=t(3400),A=t(76308),v=t(88304).isValid;function p(h,T,c){var i=T?L.nestedProperty(h,T).get()||{}:h,d=i[c||"color"];d&&d._inputArray&&(d=d._inputArray);var x=!1;if(L.isArrayOrTypedArray(d)){for(var w=0;w<d.length;w++)if(o(d[w])){x=!0;break}}return L.isPlainObject(i)&&(x||i.showscale===!0||o(i.cmin)&&o(i.cmax)||v(i.colorscale)||L.isPlainObject(i.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],e=["min","max","mid","auto"];function s(h){var T=h._colorAx,c=T||h,i={},d,x,w;for(x=0;x<r.length;x++)w=r[x],i[w]=c[w];if(T)for(d="c",x=0;x<e.length;x++)w=e[x],i[w]=c["c"+w];else{var C;for(x=0;x<e.length;x++){if(w=e[x],C="c"+w,C in c){i[w]=c[C];continue}C="z"+w,C in c&&(i[w]=c[C])}d=C.charAt(0)}return i._sync=function(y,S){var M=e.indexOf(y)!==-1?d+y:y;c[M]=c["_"+M]=S},i}function n(h){for(var T=s(h),c=T.min,i=T.max,d=T.reversescale?l(T.colorscale):T.colorscale,x=d.length,w=new Array(x),C=new Array(x),y=0;y<x;y++){var S=d[y];w[y]=c+S[0]*(i-c),C[y]=S[1]}return{domain:w,range:C}}function l(h){for(var T=h.length,c=new Array(T),i=T-1,d=0;i>=0;i--,d++){var x=h[i];c[d]=[1-x[0],x[1]]}return c}function f(h,T){T=T||{};for(var c=h.domain,i=h.range,d=i.length,x=new Array(d),w=0;w<d;w++){var C=P(i[w]).toRgb();x[w]=[C.r,C.g,C.b,C.a]}var y=b.scale.linear().domain(c).range(x).clamp(!0),S=T.noNumericCheck,M=T.returnArray,a;return S&&M?a=y:S?a=function(E){return g(y(E))}:M?a=function(E){return o(E)?y(E):P(E).isValid()?E:A.defaultLine}:a=function(E){return o(E)?g(y(E)):P(E).isValid()?E:A.defaultLine},a.domain=y.domain,a.range=function(){return i},a}function u(h,T){return f(n(h),T)}function g(h){var T={r:h[0],g:h[1],b:h[2],a:h[3]};return P(T).toRgbString()}j.exports={hasColorscale:p,extractOpts:s,extractScale:n,flipScale:l,makeColorScaleFunc:f,makeColorScaleFuncFromTrace:u}},8932:function(j,V,t){var b=t(88304),P=t(94288);j.exports={moduleType:"component",name:"colorscale",attributes:t(49084),layoutAttributes:t(92332),supplyLayoutDefaults:t(51608),handleDefaults:t(27260),crossTraceDefaults:t(95504),calc:t(47128),scales:b.scales,defaultScale:b.defaultScale,getScale:b.get,isValidScale:b.isValid,hasColorscale:P.hasColorscale,extractOpts:P.extractOpts,extractScale:P.extractScale,flipScale:P.flipScale,makeColorScaleFunc:P.makeColorScaleFunc,makeColorScaleFuncFromTrace:P.makeColorScaleFuncFromTrace}},92332:function(j,V,t){var b=t(92880).extendFlat,P=t(49084),o=t(88304).scales;j.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:b({_isSubplotObj:!0,editType:"calc"},P("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},51608:function(j,V,t){var b=t(3400),P=t(31780),o=t(92332),L=t(27260);j.exports=function(v,p){function r(h,T){return b.coerce(v,p,o,h,T)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var e=p._colorAxes,s,n;function l(h,T){return b.coerce(s,n,o.coloraxis,h,T)}for(var f in e){var u=e[f];if(u[0])s=v[f]||{},n=P.newContainer(p,f,"coloraxis"),n._name=f,L(s,n,p,l,{prefix:"",cLetter:"c"});else{for(var g=0;g<u[2].length;g++)u[2][g]();delete p._colorAxes[f]}}}},88304:function(j,V,t){var b=t(49760),P={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=P.RdBu;function L(p,r){if(r||(r=o),!p)return r;function e(){try{p=P[p]||JSON.parse(p)}catch{p=r}}return typeof p=="string"&&(e(),typeof p=="string"&&e()),A(p)?p:r}function A(p){var r=0;if(!Array.isArray(p)||p.length<2||!p[0]||!p[p.length-1]||+p[0][0]!=0||+p[p.length-1][0]!=1)return!1;for(var e=0;e<p.length;e++){var s=p[e];if(s.length!==2||+s[0]<r||!b(s[1]).isValid())return!1;r=+s[0]}return!0}function v(p){return P[p]!==void 0?!0:A(p)}j.exports={scales:P,defaultScale:o,get:L,isValid:v}},78316:function(j){j.exports=function(t,b,P,o,L){var A=(t-P)/(o-P),v=A+b/(o-P),p=(A+v)/2;return L==="left"||L==="bottom"?A:L==="center"||L==="middle"?p:L==="right"||L==="top"?v:A<.6666666666666666-p?A:v>1.3333333333333333-p?v:p}},67416:function(j,V,t){var b=t(3400),P=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];j.exports=function(L,A,v,p){return v==="left"?L=0:v==="center"?L=1:v==="right"?L=2:L=b.constrain(Math.floor(L*3),0,2),p==="bottom"?A=0:p==="middle"?A=1:p==="top"?A=2:A=b.constrain(Math.floor(A*3),0,2),P[A][L]}},72760:function(j,V){V.selectMode=function(t){return t==="lasso"||t==="select"},V.drawMode=function(t){return t==="drawclosedpath"||t==="drawopenpath"||t==="drawline"||t==="drawrect"||t==="drawcircle"},V.openMode=function(t){return t==="drawline"||t==="drawopenpath"},V.rectMode=function(t){return t==="select"||t==="drawline"||t==="drawrect"||t==="drawcircle"},V.freeMode=function(t){return t==="lasso"||t==="drawclosedpath"||t==="drawopenpath"},V.selectingOrDrawing=function(t){return V.freeMode(t)||V.rectMode(t)}},86476:function(j,V,t){var b=t(29128),P=t(52264),o=t(89184),L=t(3400).removeElement,A=t(33816),v=j.exports={};v.align=t(78316),v.getCursor=t(67416);var p=t(2616);v.unhover=p.wrapped,v.unhoverRaw=p.raw,v.init=function(n){var l=n.gd,f=1,u=l._context.doubleClickDelay,g=n.element,h,T,c,i,d,x,w,C;l._mouseDownTime||(l._mouseDownTime=0),g.style.pointerEvents="all",g.onmousedown=M,o?(g._ontouchstart&&g.removeEventListener("touchstart",g._ontouchstart),g._ontouchstart=M,g.addEventListener("touchstart",M,{passive:!1})):g.ontouchstart=M;function y(m,k,I){return Math.abs(m)<I&&(m=0),Math.abs(k)<I&&(k=0),[m,k]}var S=n.clampFn||y;function M(m){l._dragged=!1,l._dragging=!0;var k=e(m);h=k[0],T=k[1],w=m.target,x=m,C=m.buttons===2||m.ctrlKey,typeof m.clientX>"u"&&typeof m.clientY>"u"&&(m.clientX=h,m.clientY=T),c=new Date().getTime(),c-l._mouseDownTime<u?f+=1:(f=1,l._mouseDownTime=c),n.prepFn&&n.prepFn(m,h,T),P&&!C?(d=r(),d.style.cursor=window.getComputedStyle(g).cursor):P||(d=document,i=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(g).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),n.dragmode!==!1&&(m.preventDefault(),document.addEventListener("mousemove",a),document.addEventListener("touchmove",a,{passive:!1}))}function a(m){m.preventDefault();var k=e(m),I=n.minDrag||A.MINDRAG,O=S(k[0]-h,k[1]-T,I),z=O[0],B=O[1];(z||B)&&(l._dragged=!0,v.unhover(l,m)),l._dragged&&n.moveFn&&!C&&(l._dragdata={element:g,dx:z,dy:B},n.moveFn(z,B))}function E(m){if(delete l._dragdata,n.dragmode!==!1&&(m.preventDefault(),document.removeEventListener("mousemove",a),document.removeEventListener("touchmove",a)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),P?L(d):i&&(d.documentElement.style.cursor=i,i=null),!l._dragging){l._dragged=!1;return}if(l._dragging=!1,new Date().getTime()-l._mouseDownTime>u&&(f=Math.max(f-1,1)),l._dragged)n.doneFn&&n.doneFn();else if(n.clickFn&&n.clickFn(f,x),!C){var k;try{k=new MouseEvent("click",m)}catch{var I=e(m);k=document.createEvent("MouseEvents"),k.initMouseEvent("click",m.bubbles,m.cancelable,m.view,m.detail,m.screenX,m.screenY,I[0],I[1],m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget)}w.dispatchEvent(k)}l._dragging=!1,l._dragged=!1}};function r(){var s=document.createElement("div");s.className="dragcover";var n=s.style;return n.position="fixed",n.left=0,n.right=0,n.top=0,n.bottom=0,n.zIndex=999999999,n.background="none",document.body.appendChild(s),s}v.coverSlip=r;function e(s){return b(s.changedTouches?s.changedTouches[0]:s,document.body)}},2616:function(j,V,t){var b=t(95924),P=t(91200),o=t(52200).getGraphDiv,L=t(92456),A=j.exports={};A.wrapped=function(v,p,r){v=o(v),v._fullLayout&&P.clear(v._fullLayout._uid+L.HOVERID),A.raw(v,p,r)},A.raw=function(p,r){var e=p._fullLayout,s=p._hoverdata;r||(r={}),!(r.target&&!p._dragged&&b.triggerHandler(p,"plotly_beforehover",r)===!1)&&(e._hoverlayer.selectAll("g").remove(),e._hoverlayer.selectAll("line").remove(),e._hoverlayer.selectAll("circle").remove(),p._hoverdata=void 0,r.target&&s&&p.emit("plotly_unhover",{event:r,points:s}))}},98192:function(j,V){V.u={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.c={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},43616:function(j,V,t){var b=t(33428),P=t(3400),o=P.numberFormat,L=t(38248),A=t(49760),v=t(24040),p=t(76308),r=t(8932),e=P.strTranslate,s=t(72736),n=t(9616),l=t(84284),f=l.LINE_SPACING,u=t(13448).DESELECTDIM,g=t(43028),h=t(7152),T=t(10624).appendArrayPointValue,c=j.exports={};c.font=function(wt,Rt){var Tt=Rt.variant,Bt=Rt.style,Gt=Rt.weight,te=Rt.color,Wt=Rt.size,jt=Rt.family,ie=Rt.shadow,ue=Rt.lineposition,fe=Rt.textcase;jt&&wt.style("font-family",jt),Wt+1&&wt.style("font-size",Wt+"px"),te&&wt.call(p.fill,te),Gt&&wt.style("font-weight",Gt),Bt&&wt.style("font-style",Bt),Tt&&wt.style("font-variant",Tt),fe&&wt.style("text-transform",i(x(fe))),ie&&wt.style("text-shadow",ie==="auto"?s.makeTextShadow(p.contrast(te)):i(ie)),ue&&wt.style("text-decoration-line",i(w(ue)))};function i(wt){return wt==="none"?void 0:wt}var d={normal:"none",lower:"lowercase",upper:"uppercase","word caps":"capitalize"};function x(wt){return d[wt]}function w(wt){return wt.replace("under","underline").replace("over","overline").replace("through","line-through").split("+").join(" ")}c.setPosition=function(wt,Rt,Tt){wt.attr("x",Rt).attr("y",Tt)},c.setSize=function(wt,Rt,Tt){wt.attr("width",Rt).attr("height",Tt)},c.setRect=function(wt,Rt,Tt,Bt,Gt){wt.call(c.setPosition,Rt,Tt).call(c.setSize,Bt,Gt)},c.translatePoint=function(wt,Rt,Tt,Bt){var Gt=Tt.c2p(wt.x),te=Bt.c2p(wt.y);if(L(Gt)&&L(te)&&Rt.node())Rt.node().nodeName==="text"?Rt.attr("x",Gt).attr("y",te):Rt.attr("transform",e(Gt,te));else return!1;return!0},c.translatePoints=function(wt,Rt,Tt){wt.each(function(Bt){var Gt=b.select(this);c.translatePoint(Bt,Gt,Rt,Tt)})},c.hideOutsideRangePoint=function(wt,Rt,Tt,Bt,Gt,te){Rt.attr("display",Tt.isPtWithinRange(wt,Gt)&&Bt.isPtWithinRange(wt,te)?null:"none")},c.hideOutsideRangePoints=function(wt,Rt){if(Rt._hasClipOnAxisFalse){var Tt=Rt.xaxis,Bt=Rt.yaxis;wt.each(function(Gt){var te=Gt[0].trace,Wt=te.xcalendar,jt=te.ycalendar,ie=v.traceIs(te,"bar-like")?".bartext":".point,.textpoint";wt.selectAll(ie).each(function(ue){c.hideOutsideRangePoint(ue,b.select(this),Tt,Bt,Wt,jt)})})}},c.crispRound=function(wt,Rt,Tt){return!Rt||!L(Rt)?Tt||0:wt._context.staticPlot?Rt:Rt<1?1:Math.round(Rt)},c.singleLineStyle=function(wt,Rt,Tt,Bt,Gt){Rt.style("fill","none");var te=(((wt||[])[0]||{}).trace||{}).line||{},Wt=Tt||te.width||0,jt=Gt||te.dash||"";p.stroke(Rt,Bt||te.color),c.dashLine(Rt,jt,Wt)},c.lineGroupStyle=function(wt,Rt,Tt,Bt){wt.style("fill","none").each(function(Gt){var te=(((Gt||[])[0]||{}).trace||{}).line||{},Wt=Rt||te.width||0,jt=Bt||te.dash||"";b.select(this).call(p.stroke,Tt||te.color).call(c.dashLine,jt,Wt)})},c.dashLine=function(wt,Rt,Tt){Tt=+Tt||0,Rt=c.dashStyle(Rt,Tt),wt.style({"stroke-dasharray":Rt,"stroke-width":Tt+"px"})},c.dashStyle=function(wt,Rt){Rt=+Rt||1;var Tt=Math.max(Rt,3);return wt==="solid"?wt="":wt==="dot"?wt=Tt+"px,"+Tt+"px":wt==="dash"?wt=3*Tt+"px,"+3*Tt+"px":wt==="longdash"?wt=5*Tt+"px,"+5*Tt+"px":wt==="dashdot"?wt=3*Tt+"px,"+Tt+"px,"+Tt+"px,"+Tt+"px":wt==="longdashdot"&&(wt=5*Tt+"px,"+2*Tt+"px,"+Tt+"px,"+2*Tt+"px"),wt};function C(wt,Rt,Tt,Bt){var Gt=Rt.fillpattern,te=Rt.fillgradient,Wt=Gt&&c.getPatternAttr(Gt.shape,0,"");if(Wt){var jt=c.getPatternAttr(Gt.bgcolor,0,null),ie=c.getPatternAttr(Gt.fgcolor,0,null),ue=Gt.fgopacity,fe=c.getPatternAttr(Gt.size,0,8),pe=c.getPatternAttr(Gt.solidity,0,.3),Te=Rt.uid;c.pattern(wt,"point",Tt,Te,Wt,fe,pe,void 0,Gt.fillmode,jt,ie,ue)}else if(te&&te.type!=="none"){var Qt=te.type,Pt="scatterfill-"+Rt.uid;if(Bt&&(Pt="legendfill-"+Rt.uid),!Bt&&(te.start!==void 0||te.stop!==void 0)){var Ot,Nt;Qt==="horizontal"?(Ot={x:te.start,y:0},Nt={x:te.stop,y:0}):Qt==="vertical"&&(Ot={x:0,y:te.start},Nt={x:0,y:te.stop}),Ot.x=Rt._xA.c2p(Ot.x===void 0?Rt._extremes.x.min[0].val:Ot.x,!0),Ot.y=Rt._yA.c2p(Ot.y===void 0?Rt._extremes.y.min[0].val:Ot.y,!0),Nt.x=Rt._xA.c2p(Nt.x===void 0?Rt._extremes.x.max[0].val:Nt.x,!0),Nt.y=Rt._yA.c2p(Nt.y===void 0?Rt._extremes.y.max[0].val:Nt.y,!0),wt.call(k,Tt,Pt,"linear",te.colorscale,"fill",Ot,Nt,!0,!1)}else Qt==="horizontal"&&(Qt=Qt+"reversed"),wt.call(c.gradient,Tt,Pt,Qt,te.colorscale,"fill")}else Rt.fillcolor&&wt.call(p.fill,Rt.fillcolor)}c.singleFillStyle=function(wt,Rt){var Tt=b.select(wt.node()),Bt=Tt.data(),Gt=((Bt[0]||[])[0]||{}).trace||{};C(wt,Gt,Rt,!1)},c.fillGroupStyle=function(wt,Rt,Tt){wt.style("stroke-width",0).each(function(Bt){var Gt=b.select(this);Bt[0].trace&&C(Gt,Bt[0].trace,Rt,Tt)})};var y=t(71984);c.symbolNames=[],c.symbolFuncs=[],c.symbolBackOffs=[],c.symbolNeedLines={},c.symbolNoDot={},c.symbolNoFill={},c.symbolList=[],Object.keys(y).forEach(function(wt){var Rt=y[wt],Tt=Rt.n;c.symbolList.push(Tt,String(Tt),wt,Tt+100,String(Tt+100),wt+"-open"),c.symbolNames[Tt]=wt,c.symbolFuncs[Tt]=Rt.f,c.symbolBackOffs[Tt]=Rt.backoff||0,Rt.needLine&&(c.symbolNeedLines[Tt]=!0),Rt.noDot?c.symbolNoDot[Tt]=!0:c.symbolList.push(Tt+200,String(Tt+200),wt+"-dot",Tt+300,String(Tt+300),wt+"-open-dot"),Rt.noFill&&(c.symbolNoFill[Tt]=!0)});var S=c.symbolNames.length,M="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";c.symbolNumber=function(wt){if(L(wt))wt=+wt;else if(typeof wt=="string"){var Rt=0;wt.indexOf("-open")>0&&(Rt=100,wt=wt.replace("-open","")),wt.indexOf("-dot")>0&&(Rt+=200,wt=wt.replace("-dot","")),wt=c.symbolNames.indexOf(wt),wt>=0&&(wt+=Rt)}return wt%100>=S||wt>=400?0:Math.floor(Math.max(wt,0))};function a(wt,Rt,Tt,Bt){var Gt=wt%100;return c.symbolFuncs[Gt](Rt,Tt,Bt)+(wt>=200?M:"")}var E=o("~f"),m={radial:{type:"radial"},radialreversed:{type:"radial",reversed:!0},horizontal:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0}},horizontalreversed:{type:"linear",start:{x:1,y:0},stop:{x:0,y:0},reversed:!0},vertical:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0}},verticalreversed:{type:"linear",start:{x:0,y:1},stop:{x:0,y:0},reversed:!0}};c.gradient=function(wt,Rt,Tt,Bt,Gt,te){var Wt=m[Bt];return k(wt,Rt,Tt,Wt.type,Gt,te,Wt.start,Wt.stop,!1,Wt.reversed)};function k(wt,Rt,Tt,Bt,Gt,te,Wt,jt,ie,ue){var fe=Gt.length,pe;Bt==="linear"?pe={node:"linearGradient",attrs:{x1:Wt.x,y1:Wt.y,x2:jt.x,y2:jt.y,gradientUnits:ie?"userSpaceOnUse":"objectBoundingBox"},reversed:ue}:Bt==="radial"&&(pe={node:"radialGradient",reversed:ue});for(var Te=new Array(fe),Qt=0;Qt<fe;Qt++)pe.reversed?Te[fe-1-Qt]=[E((1-Gt[Qt][0])*100),Gt[Qt][1]]:Te[Qt]=[E(Gt[Qt][0]*100),Gt[Qt][1]];var Pt=Rt._fullLayout,Ot="g"+Pt._uid+"-"+Tt,Nt=Pt._defs.select(".gradients").selectAll("#"+Ot).data([Bt+Te.join(";")],P.identity);Nt.exit().remove(),Nt.enter().append(pe.node).each(function(){var Ht=b.select(this);pe.attrs&&Ht.attr(pe.attrs),Ht.attr("id",Ot);var St=Ht.selectAll("stop").data(Te);St.exit().remove(),St.enter().append("stop"),St.each(function(kt){var Ft=A(kt[1]);b.select(this).attr({offset:kt[0]+"%","stop-color":p.tinyRGB(Ft),"stop-opacity":Ft.getAlpha()})})}),wt.style(te,J(Ot,Rt)).style(te+"-opacity",null),wt.classed("gradient_filled",!0)}c.pattern=function(wt,Rt,Tt,Bt,Gt,te,Wt,jt,ie,ue,fe,pe){var Te=Rt==="legend";jt&&(ie==="overlay"?(ue=jt,fe=p.contrast(ue)):(ue=void 0,fe=jt));var Qt=Tt._fullLayout,Pt="p"+Qt._uid+"-"+Bt,Ot,Nt,Ht=function(We,me,Se,je,vr){return je+(vr-je)*(We-me)/(Se-me)},St,kt,Ft,At,ft={},pt=A(fe),Dt=p.tinyRGB(pt),Ut=pt.getAlpha(),$t=pe*Ut;switch(Gt){case"/":Ot=te*Math.sqrt(2),Nt=te*Math.sqrt(2),St="M-"+Ot/4+","+Nt/4+"l"+Ot/2+",-"+Nt/2+"M0,"+Nt+"L"+Ot+",0M"+Ot/4*3+","+Nt/4*5+"l"+Ot/2+",-"+Nt/2,kt=Wt*te,At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case"\\":Ot=te*Math.sqrt(2),Nt=te*Math.sqrt(2),St="M"+Ot/4*3+",-"+Nt/4+"l"+Ot/2+","+Nt/2+"M0,0L"+Ot+","+Nt+"M-"+Ot/4+","+Nt/4*3+"l"+Ot/2+","+Nt/2,kt=Wt*te,At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case"x":Ot=te*Math.sqrt(2),Nt=te*Math.sqrt(2),St="M-"+Ot/4+","+Nt/4+"l"+Ot/2+",-"+Nt/2+"M0,"+Nt+"L"+Ot+",0M"+Ot/4*3+","+Nt/4*5+"l"+Ot/2+",-"+Nt/2+"M"+Ot/4*3+",-"+Nt/4+"l"+Ot/2+","+Nt/2+"M0,0L"+Ot+","+Nt+"M-"+Ot/4+","+Nt/4*3+"l"+Ot/2+","+Nt/2,kt=te-te*Math.sqrt(1-Wt),At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case"|":Ot=te,Nt=te,At="path",St="M"+Ot/2+",0L"+Ot/2+","+Nt,kt=Wt*te,At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case"-":Ot=te,Nt=te,At="path",St="M0,"+Nt/2+"L"+Ot+","+Nt/2,kt=Wt*te,At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case"+":Ot=te,Nt=te,At="path",St="M"+Ot/2+",0L"+Ot/2+","+Nt+"M0,"+Nt/2+"L"+Ot+","+Nt/2,kt=te-te*Math.sqrt(1-Wt),At="path",ft={d:St,opacity:$t,stroke:Dt,"stroke-width":kt+"px"};break;case".":Ot=te,Nt=te,Wt<Math.PI/4?Ft=Math.sqrt(Wt*te*te/Math.PI):Ft=Ht(Wt,Math.PI/4,1,te/2,te/Math.sqrt(2)),At="circle",ft={cx:Ot/2,cy:Nt/2,r:Ft,opacity:$t,fill:Dt};break}var re=[Gt||"noSh",ue||"noBg",fe||"noFg",te,Wt].join(";"),Be=Qt._defs.select(".patterns").selectAll("#"+Pt).data([re],P.identity);Be.exit().remove(),Be.enter().append("pattern").each(function(){var We=b.select(this);if(We.attr({id:Pt,width:Ot+"px",height:Nt+"px",patternUnits:"userSpaceOnUse",patternTransform:Te?"scale(0.8)":""}),ue){var me=A(ue),Se=p.tinyRGB(me),je=me.getAlpha(),vr=We.selectAll("rect").data([0]);vr.exit().remove(),vr.enter().append("rect").attr({width:Ot+"px",height:Nt+"px",fill:Se,"fill-opacity":je})}var he=We.selectAll(At).data([0]);he.exit().remove(),he.enter().append(At).attr(ft)}),wt.style("fill",J(Pt,Tt)).style("fill-opacity",null),wt.classed("pattern_filled",!0)},c.initGradients=function(wt){var Rt=wt._fullLayout,Tt=P.ensureSingle(Rt._defs,"g","gradients");Tt.selectAll("linearGradient,radialGradient").remove(),b.select(wt).selectAll(".gradient_filled").classed("gradient_filled",!1)},c.initPatterns=function(wt){var Rt=wt._fullLayout,Tt=P.ensureSingle(Rt._defs,"g","patterns");Tt.selectAll("pattern").remove(),b.select(wt).selectAll(".pattern_filled").classed("pattern_filled",!1)},c.getPatternAttr=function(wt,Rt,Tt){return wt&&P.isArrayOrTypedArray(wt)?Rt<wt.length?wt[Rt]:Tt:wt},c.pointStyle=function(wt,Rt,Tt,Bt){if(wt.size()){var Gt=c.makePointStyleFns(Rt);wt.each(function(te){c.singlePointStyle(te,b.select(this),Rt,Gt,Tt,Bt)})}},c.singlePointStyle=function(wt,Rt,Tt,Bt,Gt,te){var Wt=Tt.marker,jt=Wt.line;if(te&&te.i>=0&&wt.i===void 0&&(wt.i=te.i),Rt.style("opacity",Bt.selectedOpacityFn?Bt.selectedOpacityFn(wt):wt.mo===void 0?Wt.opacity:wt.mo),Bt.ms2mrc){var ie;wt.ms==="various"||Wt.size==="various"?ie=3:ie=Bt.ms2mrc(wt.ms),wt.mrc=ie,Bt.selectedSizeFn&&(ie=wt.mrc=Bt.selectedSizeFn(wt));var ue=c.symbolNumber(wt.mx||Wt.symbol)||0;wt.om=ue%200>=100;var fe=Ct(wt,Tt),pe=H(wt,Tt);Rt.attr("d",a(ue,ie,fe,pe))}var Te=!1,Qt,Pt,Ot;if(wt.so)Ot=jt.outlierwidth,Pt=jt.outliercolor,Qt=Wt.outliercolor;else{var Nt=(jt||{}).width;Ot=(wt.mlw+1||Nt+1||(wt.trace?(wt.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in wt?Pt=wt.mlcc=Bt.lineScale(wt.mlc):P.isArrayOrTypedArray(jt.color)?Pt=p.defaultLine:Pt=jt.color,P.isArrayOrTypedArray(Wt.color)&&(Qt=p.defaultLine,Te=!0),"mc"in wt?Qt=wt.mcc=Bt.markerScale(wt.mc):Qt=Wt.color||Wt.colors||"rgba(0,0,0,0)",Bt.selectedColorFn&&(Qt=Bt.selectedColorFn(wt))}if(wt.om)Rt.call(p.stroke,Qt).style({"stroke-width":(Ot||1)+"px",fill:"none"});else{Rt.style("stroke-width",(wt.isBlank?0:Ot)+"px");var Ht=Wt.gradient,St=wt.mgt;St?Te=!0:St=Ht&&Ht.type,P.isArrayOrTypedArray(St)&&(St=St[0],m[St]||(St=0));var kt=Wt.pattern,Ft=kt&&c.getPatternAttr(kt.shape,wt.i,"");if(St&&St!=="none"){var At=wt.mgc;At?Te=!0:At=Ht.color;var ft=Tt.uid;Te&&(ft+="-"+wt.i),c.gradient(Rt,Gt,ft,St,[[0,At],[1,Qt]],"fill")}else if(Ft){var pt=!1,Dt=kt.fgcolor;!Dt&&te&&te.color&&(Dt=te.color,pt=!0);var Ut=c.getPatternAttr(Dt,wt.i,te&&te.color||null),$t=c.getPatternAttr(kt.bgcolor,wt.i,null),re=kt.fgopacity,Be=c.getPatternAttr(kt.size,wt.i,8),We=c.getPatternAttr(kt.solidity,wt.i,.3);pt=pt||wt.mcc||P.isArrayOrTypedArray(kt.shape)||P.isArrayOrTypedArray(kt.bgcolor)||P.isArrayOrTypedArray(kt.fgcolor)||P.isArrayOrTypedArray(kt.size)||P.isArrayOrTypedArray(kt.solidity);var me=Tt.uid;pt&&(me+="-"+wt.i),c.pattern(Rt,"point",Gt,me,Ft,Be,We,wt.mcc,kt.fillmode,$t,Ut,re)}else P.isArrayOrTypedArray(Qt)?p.fill(Rt,Qt[wt.i]):p.fill(Rt,Qt);Ot&&p.stroke(Rt,Pt)}},c.makePointStyleFns=function(wt){var Rt={},Tt=wt.marker;return Rt.markerScale=c.tryColorscale(Tt,""),Rt.lineScale=c.tryColorscale(Tt,"line"),v.traceIs(wt,"symbols")&&(Rt.ms2mrc=g.isBubble(wt)?h(wt):function(){return(Tt.size||6)/2}),wt.selectedpoints&&P.extendFlat(Rt,c.makeSelectedPointStyleFns(wt)),Rt},c.makeSelectedPointStyleFns=function(wt){var Rt={},Tt=wt.selected||{},Bt=wt.unselected||{},Gt=wt.marker||{},te=Tt.marker||{},Wt=Bt.marker||{},jt=Gt.opacity,ie=te.opacity,ue=Wt.opacity,fe=ie!==void 0,pe=ue!==void 0;(P.isArrayOrTypedArray(jt)||fe||pe)&&(Rt.selectedOpacityFn=function(Ft){var At=Ft.mo===void 0?Gt.opacity:Ft.mo;return Ft.selected?fe?ie:At:pe?ue:u*At});var Te=Gt.color,Qt=te.color,Pt=Wt.color;(Qt||Pt)&&(Rt.selectedColorFn=function(Ft){var At=Ft.mcc||Te;return Ft.selected?Qt||At:Pt||At});var Ot=Gt.size,Nt=te.size,Ht=Wt.size,St=Nt!==void 0,kt=Ht!==void 0;return v.traceIs(wt,"symbols")&&(St||kt)&&(Rt.selectedSizeFn=function(Ft){var At=Ft.mrc||Ot/2;return Ft.selected?St?Nt/2:At:kt?Ht/2:At}),Rt},c.makeSelectedTextStyleFns=function(wt){var Rt={},Tt=wt.selected||{},Bt=wt.unselected||{},Gt=wt.textfont||{},te=Tt.textfont||{},Wt=Bt.textfont||{},jt=Gt.color,ie=te.color,ue=Wt.color;return Rt.selectedTextColorFn=function(fe){var pe=fe.tc||jt;return fe.selected?ie||pe:ue||(ie?pe:p.addOpacity(pe,u))},Rt},c.selectedPointStyle=function(wt,Rt){if(!(!wt.size()||!Rt.selectedpoints)){var Tt=c.makeSelectedPointStyleFns(Rt),Bt=Rt.marker||{},Gt=[];Tt.selectedOpacityFn&&Gt.push(function(te,Wt){te.style("opacity",Tt.selectedOpacityFn(Wt))}),Tt.selectedColorFn&&Gt.push(function(te,Wt){p.fill(te,Tt.selectedColorFn(Wt))}),Tt.selectedSizeFn&&Gt.push(function(te,Wt){var jt=Wt.mx||Bt.symbol||0,ie=Tt.selectedSizeFn(Wt);te.attr("d",a(c.symbolNumber(jt),ie,Ct(Wt,Rt),H(Wt,Rt))),Wt.mrc2=ie}),Gt.length&&wt.each(function(te){for(var Wt=b.select(this),jt=0;jt<Gt.length;jt++)Gt[jt](Wt,te)})}},c.tryColorscale=function(wt,Rt){var Tt=Rt?P.nestedProperty(wt,Rt).get():wt;if(Tt){var Bt=Tt.color;if((Tt.colorscale||Tt._colorAx)&&P.isArrayOrTypedArray(Bt))return r.makeColorScaleFuncFromTrace(Tt)}return P.identity};var I={start:1,end:-1,middle:0,bottom:1,top:-1};function O(wt,Rt,Tt,Bt,Gt){var te=b.select(wt.node().parentNode),Wt=Rt.indexOf("top")!==-1?"top":Rt.indexOf("bottom")!==-1?"bottom":"middle",jt=Rt.indexOf("left")!==-1?"end":Rt.indexOf("right")!==-1?"start":"middle",ie=Bt?Bt/.8+1:0,ue=(s.lineCount(wt)-1)*f+1,fe=I[jt]*ie,pe=Tt*.75+I[Wt]*ie+(I[Wt]-1)*ue*Tt/2;wt.attr("text-anchor",jt),Gt||te.attr("transform",e(fe,pe))}function z(wt,Rt){var Tt=wt.ts||Rt.textfont.size;return L(Tt)&&Tt>0?Tt:0}c.textPointStyle=function(wt,Rt,Tt){if(wt.size()){var Bt;if(Rt.selectedpoints){var Gt=c.makeSelectedTextStyleFns(Rt);Bt=Gt.selectedTextColorFn}var te=Rt.texttemplate,Wt=Tt._fullLayout;wt.each(function(jt){var ie=b.select(this),ue=te?P.extractOption(jt,Rt,"txt","texttemplate"):P.extractOption(jt,Rt,"tx","text");if(!ue&&ue!==0){ie.remove();return}if(te){var fe=Rt._module.formatLabels,pe=fe?fe(jt,Rt,Wt):{},Te={};T(Te,Rt,jt.i);var Qt=Rt._meta||{};ue=P.texttemplateString(ue,pe,Wt._d3locale,Te,jt,Qt)}var Pt=jt.tp||Rt.textposition,Ot=z(jt,Rt),Nt=Bt?Bt(jt):jt.tc||Rt.textfont.color;ie.call(c.font,{family:jt.tf||Rt.textfont.family,weight:jt.tw||Rt.textfont.weight,style:jt.ty||Rt.textfont.style,variant:jt.tv||Rt.textfont.variant,textcase:jt.tC||Rt.textfont.textcase,lineposition:jt.tE||Rt.textfont.lineposition,shadow:jt.tS||Rt.textfont.shadow,size:Ot,color:Nt}).text(ue).call(s.convertToTspans,Tt).call(O,Pt,Ot,jt.mrc)})}},c.selectedTextStyle=function(wt,Rt){if(!(!wt.size()||!Rt.selectedpoints)){var Tt=c.makeSelectedTextStyleFns(Rt);wt.each(function(Bt){var Gt=b.select(this),te=Tt.selectedTextColorFn(Bt),Wt=Bt.tp||Rt.textposition,jt=z(Bt,Rt);p.fill(Gt,te);var ie=v.traceIs(Rt,"bar-like");O(Gt,Wt,jt,Bt.mrc2||Bt.mrc,ie)})}};var B=.5;c.smoothopen=function(wt,Rt){if(wt.length<3)return"M"+wt.join("L");var Tt="M"+wt[0],Bt=[],Gt;for(Gt=1;Gt<wt.length-1;Gt++)Bt.push($(wt[Gt-1],wt[Gt],wt[Gt+1],Rt));for(Tt+="Q"+Bt[0][0]+" "+wt[1],Gt=2;Gt<wt.length-1;Gt++)Tt+="C"+Bt[Gt-2][1]+" "+Bt[Gt-1][0]+" "+wt[Gt];return Tt+="Q"+Bt[wt.length-3][1]+" "+wt[wt.length-1],Tt},c.smoothclosed=function(wt,Rt){if(wt.length<3)return"M"+wt.join("L")+"Z";var Tt="M"+wt[0],Bt=wt.length-1,Gt=[$(wt[Bt],wt[0],wt[1],Rt)],te;for(te=1;te<Bt;te++)Gt.push($(wt[te-1],wt[te],wt[te+1],Rt));for(Gt.push($(wt[Bt-1],wt[Bt],wt[0],Rt)),te=1;te<=Bt;te++)Tt+="C"+Gt[te-1][1]+" "+Gt[te][0]+" "+wt[te];return Tt+="C"+Gt[Bt][1]+" "+Gt[0][0]+" "+wt[0]+"Z",Tt};var F,_;function N(wt,Rt,Tt){return Tt&&(wt=nt(wt)),Rt?X(wt[1]):G(wt[0])}function G(wt){var Rt=b.round(wt,2);return F=Rt,Rt}function X(wt){var Rt=b.round(wt,2);return _=Rt,Rt}function $(wt,Rt,Tt,Bt){var Gt=wt[0]-Rt[0],te=wt[1]-Rt[1],Wt=Tt[0]-Rt[0],jt=Tt[1]-Rt[1],ie=Math.pow(Gt*Gt+te*te,B/2),ue=Math.pow(Wt*Wt+jt*jt,B/2),fe=(ue*ue*Gt-ie*ie*Wt)*Bt,pe=(ue*ue*te-ie*ie*jt)*Bt,Te=3*ue*(ie+ue),Qt=3*ie*(ie+ue);return[[G(Rt[0]+(Te&&fe/Te)),X(Rt[1]+(Te&&pe/Te))],[G(Rt[0]-(Qt&&fe/Qt)),X(Rt[1]-(Qt&&pe/Qt))]]}var et={hv:function(wt,Rt,Tt){return"H"+G(Rt[0])+"V"+N(Rt,1,Tt)},vh:function(wt,Rt,Tt){return"V"+X(Rt[1])+"H"+N(Rt,0,Tt)},hvh:function(wt,Rt,Tt){return"H"+G((wt[0]+Rt[0])/2)+"V"+X(Rt[1])+"H"+N(Rt,0,Tt)},vhv:function(wt,Rt,Tt){return"V"+X((wt[1]+Rt[1])/2)+"H"+G(Rt[0])+"V"+N(Rt,1,Tt)}},ot=function(wt,Rt,Tt){return"L"+N(Rt,0,Tt)+","+N(Rt,1,Tt)};c.steps=function(wt){var Rt=et[wt]||ot;return function(Tt){for(var Bt="M"+G(Tt[0][0])+","+X(Tt[0][1]),Gt=Tt.length,te=1;te<Gt;te++)Bt+=Rt(Tt[te-1],Tt[te],te===Gt-1);return Bt}};function nt(wt,Rt){var Tt=wt.backoff,Bt=wt.trace,Gt=wt.d,te=wt.i;if(Tt&&Bt&&Bt.marker&&Bt.marker.angle%360===0&&Bt.line&&Bt.line.shape!=="spline"){var Wt=P.isArrayOrTypedArray(Tt),jt=wt,ie=Rt?Rt[0]:F||0,ue=Rt?Rt[1]:_||0,fe=jt[0],pe=jt[1],Te=fe-ie,Qt=pe-ue,Pt=Math.atan2(Qt,Te),Ot=Wt?Tt[te]:Tt;if(Ot==="auto"){var Nt=jt.i;Bt.type==="scatter"&&Nt--;var Ht=jt.marker,St=Ht.symbol;P.isArrayOrTypedArray(St)&&(St=St[Nt]);var kt=Ht.size;P.isArrayOrTypedArray(kt)&&(kt=kt[Nt]),Ot=Ht?c.symbolBackOffs[c.symbolNumber(St)]*kt:0,Ot+=c.getMarkerStandoff(Gt[Nt],Bt)||0}var Ft=fe-Ot*Math.cos(Pt),At=pe-Ot*Math.sin(Pt);(Ft<=fe&&Ft>=ie||Ft>=fe&&Ft<=ie)&&(At<=pe&&At>=ue||At>=pe&&At<=ue)&&(wt=[Ft,At])}return wt}c.applyBackoff=nt,c.makeTester=function(){var wt=P.ensureSingleById(b.select("body"),"svg","js-plotly-tester",function(Tt){Tt.attr(n.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),Rt=P.ensureSingle(wt,"path","js-reference-point",function(Tt){Tt.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});c.tester=wt,c.testref=Rt},c.savedBBoxes={};var Z=0,Q=1e4;c.bBox=function(wt,Rt,Tt){Tt||(Tt=W(wt));var Bt;if(Tt){if(Bt=c.savedBBoxes[Tt],Bt)return P.extendFlat({},Bt)}else if(wt.childNodes.length===1){var Gt=wt.childNodes[0];if(Tt=W(Gt),Tt){var te=+Gt.getAttribute("x")||0,Wt=+Gt.getAttribute("y")||0,jt=Gt.getAttribute("transform");if(!jt){var ie=c.bBox(Gt,!1,Tt);return te&&(ie.left+=te,ie.right+=te),Wt&&(ie.top+=Wt,ie.bottom+=Wt),ie}if(Tt+="~"+te+"~"+Wt+"~"+jt,Bt=c.savedBBoxes[Tt],Bt)return P.extendFlat({},Bt)}}var ue,fe;Rt?ue=wt:(fe=c.tester.node(),ue=wt.cloneNode(!0),fe.appendChild(ue)),b.select(ue).attr("transform",null).call(s.positionText,0,0);var pe=ue.getBoundingClientRect(),Te=c.testref.node().getBoundingClientRect();Rt||fe.removeChild(ue);var Qt={height:pe.height,width:pe.width,left:pe.left-Te.left,top:pe.top-Te.top,right:pe.right-Te.left,bottom:pe.bottom-Te.top};return Z>=Q&&(c.savedBBoxes={},Z=0),Tt&&(c.savedBBoxes[Tt]=Qt),Z++,P.extendFlat({},Qt)};function W(wt){var Rt=wt.getAttribute("data-unformatted");if(Rt!==null)return Rt+wt.getAttribute("data-math")+wt.getAttribute("text-anchor")+wt.getAttribute("style")}c.setClipUrl=function(wt,Rt,Tt){wt.attr("clip-path",J(Rt,Tt))};function J(wt,Rt){if(!wt)return null;var Tt=Rt._context,Bt=Tt._exportedPlot?"":Tt._baseUrl||"";return Bt?"url('"+Bt+"#"+wt+"')":"url(#"+wt+")"}c.getTranslate=function(wt){var Rt=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Tt=wt.attr?"attr":"getAttribute",Bt=wt[Tt]("transform")||"",Gt=Bt.replace(Rt,function(te,Wt,jt){return[Wt,jt].join(" ")}).split(" ");return{x:+Gt[0]||0,y:+Gt[1]||0}},c.setTranslate=function(wt,Rt,Tt){var Bt=/(\btranslate\(.*?\);?)/,Gt=wt.attr?"attr":"getAttribute",te=wt.attr?"attr":"setAttribute",Wt=wt[Gt]("transform")||"";return Rt=Rt||0,Tt=Tt||0,Wt=Wt.replace(Bt,"").trim(),Wt+=e(Rt,Tt),Wt=Wt.trim(),wt[te]("transform",Wt),Wt},c.getScale=function(wt){var Rt=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Tt=wt.attr?"attr":"getAttribute",Bt=wt[Tt]("transform")||"",Gt=Bt.replace(Rt,function(te,Wt,jt){return[Wt,jt].join(" ")}).split(" ");return{x:+Gt[0]||1,y:+Gt[1]||1}},c.setScale=function(wt,Rt,Tt){var Bt=/(\bscale\(.*?\);?)/,Gt=wt.attr?"attr":"getAttribute",te=wt.attr?"attr":"setAttribute",Wt=wt[Gt]("transform")||"";return Rt=Rt||1,Tt=Tt||1,Wt=Wt.replace(Bt,"").trim(),Wt+="scale("+Rt+","+Tt+")",Wt=Wt.trim(),wt[te]("transform",Wt),Wt};var it=/\s*sc.*/;c.setPointGroupScale=function(wt,Rt,Tt){if(Rt=Rt||1,Tt=Tt||1,!!wt){var Bt=Rt===1&&Tt===1?"":"scale("+Rt+","+Tt+")";wt.each(function(){var Gt=(this.getAttribute("transform")||"").replace(it,"");Gt+=Bt,Gt=Gt.trim(),this.setAttribute("transform",Gt)})}};var K=/translate\([^)]*\)\s*$/;c.setTextPointsScale=function(wt,Rt,Tt){wt&&wt.each(function(){var Bt,Gt=b.select(this),te=Gt.select("text");if(te.node()){var Wt=parseFloat(te.attr("x")||0),jt=parseFloat(te.attr("y")||0),ie=(Gt.attr("transform")||"").match(K);Rt===1&&Tt===1?Bt=[]:Bt=[e(Wt,jt),"scale("+Rt+","+Tt+")",e(-Wt,-jt)],ie&&Bt.push(ie),Gt.attr("transform",Bt.join(""))}})};function H(wt,Rt){var Tt;return wt&&(Tt=wt.mf),Tt===void 0&&(Tt=Rt.marker&&Rt.marker.standoff||0),!Rt._geo&&!Rt._xA?-Tt:Tt}c.getMarkerStandoff=H;var at=Math.atan2,tt=Math.cos,lt=Math.sin;function dt(wt,Rt){var Tt=Rt[0],Bt=Rt[1];return[Tt*tt(wt)-Bt*lt(wt),Tt*lt(wt)+Bt*tt(wt)]}var mt,gt,Mt,Lt,zt,xt;function Ct(wt,Rt){var Tt=wt.ma;Tt===void 0&&(Tt=Rt.marker.angle,(!Tt||P.isArrayOrTypedArray(Tt))&&(Tt=0));var Bt,Gt,te=Rt.marker.angleref;if(te==="previous"||te==="north"){if(Rt._geo){var Wt=Rt._geo.project(wt.lonlat);Bt=Wt[0],Gt=Wt[1]}else{var jt=Rt._xA,ie=Rt._yA;if(jt&&ie)Bt=jt.c2p(wt.x),Gt=ie.c2p(wt.y);else return 90}if(Rt._geo){var ue=wt.lonlat[0],fe=wt.lonlat[1],pe=Rt._geo.project([ue,fe+1e-5]),Te=Rt._geo.project([ue+1e-5,fe]),Qt=at(Te[1]-Gt,Te[0]-Bt),Pt=at(pe[1]-Gt,pe[0]-Bt),Ot;if(te==="north")Ot=Tt/180*Math.PI;else if(te==="previous"){var Nt=ue/180*Math.PI,Ht=fe/180*Math.PI,St=mt/180*Math.PI,kt=gt/180*Math.PI,Ft=St-Nt,At=tt(kt)*lt(Ft),ft=lt(kt)*tt(Ht)-tt(kt)*lt(Ht)*tt(Ft);Ot=-at(At,ft)-Math.PI,mt=ue,gt=fe}var pt=dt(Qt,[tt(Ot),0]),Dt=dt(Pt,[lt(Ot),0]);Tt=at(pt[1]+Dt[1],pt[0]+Dt[0])/Math.PI*180,te==="previous"&&!(xt===Rt.uid&&wt.i===zt+1)&&(Tt=null)}if(te==="previous"&&!Rt._geo)if(xt===Rt.uid&&wt.i===zt+1&&L(Bt)&&L(Gt)){var Ut=Bt-Mt,$t=Gt-Lt,re=Rt.line&&Rt.line.shape||"",Be=re.slice(re.length-1);Be==="h"&&($t=0),Be==="v"&&(Ut=0),Tt+=at($t,Ut)/Math.PI*180+90}else Tt=null}return Mt=Bt,Lt=Gt,zt=wt.i,xt=Rt.uid,Tt}c.getMarkerAngle=Ct},71984:function(j,V,t){var b=t(21984),P=t(33428).round,o="M0,0Z",L=Math.sqrt(2),A=Math.sqrt(3),v=Math.PI,p=Math.cos,r=Math.sin;j.exports={circle:{n:0,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i="M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z";return T?u(h,T,i):i}},square:{n:1,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")}},diamond:{n:2,f:function(g,h,T){if(e(h))return o;var c=P(g*1.3,2);return u(h,T,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"Z")}},cross:{n:3,f:function(g,h,T){if(e(h))return o;var c=P(g*.4,2),i=P(g*1.2,2);return u(h,T,"M"+i+","+c+"H"+c+"V"+i+"H-"+c+"V"+c+"H-"+i+"V-"+c+"H-"+c+"V-"+i+"H"+c+"V-"+c+"H"+i+"Z")}},x:{n:4,f:function(g,h,T){if(e(h))return o;var c=P(g*.8/L,2),i="l"+c+","+c,d="l"+c+",-"+c,x="l-"+c+",-"+c,w="l-"+c+","+c;return u(h,T,"M0,"+c+i+d+x+d+x+w+x+w+i+w+i+"Z")}},"triangle-up":{n:5,f:function(g,h,T){if(e(h))return o;var c=P(g*2/A,2),i=P(g/2,2),d=P(g,2);return u(h,T,"M-"+c+","+i+"H"+c+"L0,-"+d+"Z")}},"triangle-down":{n:6,f:function(g,h,T){if(e(h))return o;var c=P(g*2/A,2),i=P(g/2,2),d=P(g,2);return u(h,T,"M-"+c+",-"+i+"H"+c+"L0,"+d+"Z")}},"triangle-left":{n:7,f:function(g,h,T){if(e(h))return o;var c=P(g*2/A,2),i=P(g/2,2),d=P(g,2);return u(h,T,"M"+i+",-"+c+"V"+c+"L-"+d+",0Z")}},"triangle-right":{n:8,f:function(g,h,T){if(e(h))return o;var c=P(g*2/A,2),i=P(g/2,2),d=P(g,2);return u(h,T,"M-"+i+",-"+c+"V"+c+"L"+d+",0Z")}},"triangle-ne":{n:9,f:function(g,h,T){if(e(h))return o;var c=P(g*.6,2),i=P(g*1.2,2);return u(h,T,"M-"+i+",-"+c+"H"+c+"V"+i+"Z")}},"triangle-se":{n:10,f:function(g,h,T){if(e(h))return o;var c=P(g*.6,2),i=P(g*1.2,2);return u(h,T,"M"+c+",-"+i+"V"+c+"H-"+i+"Z")}},"triangle-sw":{n:11,f:function(g,h,T){if(e(h))return o;var c=P(g*.6,2),i=P(g*1.2,2);return u(h,T,"M"+i+","+c+"H-"+c+"V-"+i+"Z")}},"triangle-nw":{n:12,f:function(g,h,T){if(e(h))return o;var c=P(g*.6,2),i=P(g*1.2,2);return u(h,T,"M-"+c+","+i+"V-"+c+"H"+i+"Z")}},pentagon:{n:13,f:function(g,h,T){if(e(h))return o;var c=P(g*.951,2),i=P(g*.588,2),d=P(-g,2),x=P(g*-.309,2),w=P(g*.809,2);return u(h,T,"M"+c+","+x+"L"+i+","+w+"H-"+i+"L-"+c+","+x+"L0,"+d+"Z")}},hexagon:{n:14,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g/2,2),d=P(g*A/2,2);return u(h,T,"M"+d+",-"+i+"V"+i+"L0,"+c+"L-"+d+","+i+"V-"+i+"L0,-"+c+"Z")}},hexagon2:{n:15,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g/2,2),d=P(g*A/2,2);return u(h,T,"M-"+i+","+d+"H"+i+"L"+c+",0L"+i+",-"+d+"H-"+i+"L-"+c+",0Z")}},octagon:{n:16,f:function(g,h,T){if(e(h))return o;var c=P(g*.924,2),i=P(g*.383,2);return u(h,T,"M-"+i+",-"+c+"H"+i+"L"+c+",-"+i+"V"+i+"L"+i+","+c+"H-"+i+"L-"+c+","+i+"V-"+i+"Z")}},star:{n:17,f:function(g,h,T){if(e(h))return o;var c=g*1.4,i=P(c*.225,2),d=P(c*.951,2),x=P(c*.363,2),w=P(c*.588,2),C=P(-c,2),y=P(c*-.309,2),S=P(c*.118,2),M=P(c*.809,2),a=P(c*.382,2);return u(h,T,"M"+i+","+y+"H"+d+"L"+x+","+S+"L"+w+","+M+"L0,"+a+"L-"+w+","+M+"L-"+x+","+S+"L-"+d+","+y+"H-"+i+"L0,"+C+"Z")}},hexagram:{n:18,f:function(g,h,T){if(e(h))return o;var c=P(g*.66,2),i=P(g*.38,2),d=P(g*.76,2);return u(h,T,"M-"+d+",0l-"+i+",-"+c+"h"+d+"l"+i+",-"+c+"l"+i+","+c+"h"+d+"l-"+i+","+c+"l"+i+","+c+"h-"+d+"l-"+i+","+c+"l-"+i+",-"+c+"h-"+d+"Z")}},"star-triangle-up":{n:19,f:function(g,h,T){if(e(h))return o;var c=P(g*A*.8,2),i=P(g*.8,2),d=P(g*1.6,2),x=P(g*4,2),w="A "+x+","+x+" 0 0 1 ";return u(h,T,"M-"+c+","+i+w+c+","+i+w+"0,-"+d+w+"-"+c+","+i+"Z")}},"star-triangle-down":{n:20,f:function(g,h,T){if(e(h))return o;var c=P(g*A*.8,2),i=P(g*.8,2),d=P(g*1.6,2),x=P(g*4,2),w="A "+x+","+x+" 0 0 1 ";return u(h,T,"M"+c+",-"+i+w+"-"+c+",-"+i+w+"0,"+d+w+c+",-"+i+"Z")}},"star-square":{n:21,f:function(g,h,T){if(e(h))return o;var c=P(g*1.1,2),i=P(g*2,2),d="A "+i+","+i+" 0 0 1 ";return u(h,T,"M-"+c+",-"+c+d+"-"+c+","+c+d+c+","+c+d+c+",-"+c+d+"-"+c+",-"+c+"Z")}},"star-diamond":{n:22,f:function(g,h,T){if(e(h))return o;var c=P(g*1.4,2),i=P(g*1.9,2),d="A "+i+","+i+" 0 0 1 ";return u(h,T,"M-"+c+",0"+d+"0,"+c+d+c+",0"+d+"0,-"+c+d+"-"+c+",0Z")}},"diamond-tall":{n:23,f:function(g,h,T){if(e(h))return o;var c=P(g*.7,2),i=P(g*1.4,2);return u(h,T,"M0,"+i+"L"+c+",0L0,-"+i+"L-"+c+",0Z")}},"diamond-wide":{n:24,f:function(g,h,T){if(e(h))return o;var c=P(g*1.4,2),i=P(g*.7,2);return u(h,T,"M0,"+i+"L"+c+",0L0,-"+i+"L-"+c+",0Z")}},hourglass:{n:25,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"H-"+c+"L"+c+",-"+c+"H-"+c+"Z")},noDot:!0},bowtie:{n:26,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"V-"+c+"L-"+c+","+c+"V-"+c+"Z")},noDot:!0},"circle-cross":{n:27,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g/L,2);return u(h,T,"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i+"M"+c+",0A"+c+","+c+" 0 1,1 0,-"+c+"A"+c+","+c+" 0 0,1 "+c+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c+"M"+c+","+c+"H-"+c+"V-"+c+"H"+c+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(g,h,T){if(e(h))return o;var c=P(g*1.3,2);return u(h,T,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM0,-"+c+"V"+c+"M-"+c+",0H"+c)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(g,h,T){if(e(h))return o;var c=P(g*1.3,2),i=P(g*.65,2);return u(h,T,"M"+c+",0L0,"+c+"L-"+c+",0L0,-"+c+"ZM-"+i+",-"+i+"L"+i+","+i+"M-"+i+","+i+"L"+i+",-"+i)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(g,h,T){if(e(h))return o;var c=P(g*1.4,2);return u(h,T,"M0,"+c+"V-"+c+"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"L-"+c+",-"+c+"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(g,h,T){if(e(h))return o;var c=P(g*1.2,2),i=P(g*.85,2);return u(h,T,"M0,"+c+"V-"+c+"M"+c+",0H-"+c+"M"+i+","+i+"L-"+i+",-"+i+"M"+i+",-"+i+"L-"+i+","+i)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(g,h,T){if(e(h))return o;var c=P(g/2,2),i=P(g,2);return u(h,T,"M"+c+","+i+"V-"+i+"M"+(c-i)+",-"+i+"V"+i+"M"+i+","+c+"H-"+i+"M-"+i+","+(c-i)+"H"+i)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(g,h,T){if(e(h))return o;var c=P(g*1.2,2),i=P(g*1.6,2),d=P(g*.8,2);return u(h,T,"M-"+c+","+d+"L0,0M"+c+","+d+"L0,0M0,-"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(g,h,T){if(e(h))return o;var c=P(g*1.2,2),i=P(g*1.6,2),d=P(g*.8,2);return u(h,T,"M-"+c+",-"+d+"L0,0M"+c+",-"+d+"L0,0M0,"+i+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(g,h,T){if(e(h))return o;var c=P(g*1.2,2),i=P(g*1.6,2),d=P(g*.8,2);return u(h,T,"M"+d+","+c+"L0,0M"+d+",-"+c+"L0,0M-"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(g,h,T){if(e(h))return o;var c=P(g*1.2,2),i=P(g*1.6,2),d=P(g*.8,2);return u(h,T,"M-"+d+","+c+"L0,0M-"+d+",-"+c+"L0,0M"+i+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(g,h,T){if(e(h))return o;var c=P(g*1.4,2);return u(h,T,"M"+c+",0H-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(g,h,T){if(e(h))return o;var c=P(g*1.4,2);return u(h,T,"M0,"+c+"V-"+c)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+",-"+c+"L-"+c+","+c)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(g,h,T){if(e(h))return o;var c=P(g,2);return u(h,T,"M"+c+","+c+"L-"+c+",-"+c)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g*2,2);return u(h,T,"M0,0L-"+c+","+i+"H"+c+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g*2,2);return u(h,T,"M0,0L-"+c+",-"+i+"H"+c+"Z")},noDot:!0},"arrow-left":{n:47,f:function(g,h,T){if(e(h))return o;var c=P(g*2,2),i=P(g,2);return u(h,T,"M0,0L"+c+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-right":{n:48,f:function(g,h,T){if(e(h))return o;var c=P(g*2,2),i=P(g,2);return u(h,T,"M0,0L-"+c+",-"+i+"V"+i+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g*2,2);return u(h,T,"M-"+c+",0H"+c+"M0,0L-"+c+","+i+"H"+c+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(g,h,T){if(e(h))return o;var c=P(g,2),i=P(g*2,2);return u(h,T,"M-"+c+",0H"+c+"M0,0L-"+c+",-"+i+"H"+c+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(g,h,T){if(e(h))return o;var c=P(g*2,2),i=P(g,2);return u(h,T,"M0,-"+i+"V"+i+"M0,0L"+c+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(g,h,T){if(e(h))return o;var c=P(g*2,2),i=P(g,2);return u(h,T,"M0,-"+i+"V"+i+"M0,0L-"+c+",-"+i+"V"+i+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(g,h,T){if(e(h))return o;var c=v/2.5,i=2*g*p(c),d=2*g*r(c);return u(h,T,"M0,0L"+-i+","+d+"L"+i+","+d+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(g,h,T){if(e(h))return o;var c=v/4,i=2*g*p(c),d=2*g*r(c);return u(h,T,"M0,0L"+-i+","+d+"A "+2*g+","+2*g+" 0 0 1 "+i+","+d+"Z")},backoff:.4,noDot:!0}};function e(g){return g===null}var s,n,l,f;function u(g,h,T){if((!g||g%360===0)&&!h)return T;if(l===g&&f===h&&s===T)return n;l=g,f=h,s=T;function c(I,O){var z=p(I),B=r(I),F=O[0],_=O[1]+(h||0);return[F*z-_*B,F*B+_*z]}for(var i=g/180*v,d=0,x=0,w=b(T),C="",y=0;y<w.length;y++){var S=w[y],M=S[0],a=d,E=x;if(M==="M"||M==="L")d=+S[1],x=+S[2];else if(M==="m"||M==="l")d+=+S[1],x+=+S[2];else if(M==="H")d=+S[1];else if(M==="h")d+=+S[1];else if(M==="V")x=+S[1];else if(M==="v")x+=+S[1];else if(M==="A"){d=+S[1],x=+S[2];var m=c(i,[+S[6],+S[7]]);S[6]=m[0],S[7]=m[1],S[3]=+S[3]+g}(M==="H"||M==="V")&&(M="L"),(M==="h"||M==="v")&&(M="l"),(M==="m"||M==="l")&&(d-=a,x-=E);var k=c(i,[d,x]);(M==="H"||M==="V")&&(M="L"),(M==="M"||M==="L"||M==="m"||M==="l")&&(S[1]=k[0],S[2]=k[1]),S[0]=M,C+=S[0]+S.slice(1).join(",")}return n=C,C}},97644:function(j){j.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},14880:function(j,V,t){var b=t(38248),P=t(24040),o=t(54460),L=t(3400),A=t(93792);j.exports=function(r){for(var e=r.calcdata,s=0;s<e.length;s++){var n=e[s],l=n[0].trace;if(l.visible===!0&&P.traceIs(l,"errorBarsOK")){var f=o.getFromId(r,l.xaxis),u=o.getFromId(r,l.yaxis);v(n,l,f,"x"),v(n,l,u,"y")}}};function v(p,r,e,s){var n=r["error_"+s]||{},l=n.visible&&["linear","log"].indexOf(e.type)!==-1,f=[];if(l){for(var u=A(n),g=0;g<p.length;g++){var h=p[g],T=h.i;if(T===void 0)T=g;else if(T===null)continue;var c=h[s];if(b(e.c2l(c))){var i=u(c,T);if(b(i[0])&&b(i[1])){var d=h[s+"s"]=c-i[0],x=h[s+"h"]=c+i[1];f.push(d,x)}}}var w=e._id,C=r._extremes[w],y=o.findExtremes(e,f,L.extendFlat({tozero:C.opts.tozero},{padded:!0}));C.min=C.min.concat(y.min),C.max=C.max.concat(y.max)}}},93792:function(j){j.exports=function(b){var P=b.type,o=b.symmetric;if(P==="data"){var L=b.array||[];if(o)return function(e,s){var n=+L[s];return[n,n]};var A=b.arrayminus||[];return function(e,s){var n=+L[s],l=+A[s];return!isNaN(n)||!isNaN(l)?[l||0,n||0]:[NaN,NaN]}}else{var v=V(P,b.value),p=V(P,b.valueminus);return o||b.valueminus===void 0?function(e){var s=v(e);return[s,s]}:function(e){return[p(e),v(e)]}}};function V(t,b){if(t==="percent")return function(P){return Math.abs(P*b/100)};if(t==="constant")return function(){return Math.abs(b)};if(t==="sqrt")return function(P){return Math.sqrt(Math.abs(P))}}},65200:function(j,V,t){var b=t(38248),P=t(24040),o=t(3400),L=t(31780),A=t(97644);j.exports=function(v,p,r,e){var s="error_"+e.axis,n=L.newContainer(p,s),l=v[s]||{};function f(d,x){return o.coerce(l,n,A,d,x)}var u=l.array!==void 0||l.value!==void 0||l.type==="sqrt",g=f("visible",u);if(g!==!1){var h=f("type","array"in l?"data":"percent"),T=!0;h!=="sqrt"&&(T=f("symmetric",!((h==="data"?"arrayminus":"valueminus")in l))),h==="data"?(f("array"),f("traceref"),T||(f("arrayminus"),f("tracerefminus"))):(h==="percent"||h==="constant")&&(f("value"),T||f("valueminus"));var c="copy_"+e.inherit+"style";if(e.inherit){var i=p["error_"+e.inherit];(i||{}).visible&&f(c,!(l.color||b(l.thickness)||b(l.width)))}(!e.inherit||!n[c])&&(f("color",r),f("thickness"),f("width",P.traceIs(p,"gl3d")?0:4))}}},64968:function(j,V,t){var b=t(3400),P=t(67824).overrideAll,o=t(97644),L={error_x:b.extendFlat({},o),error_y:b.extendFlat({},o)};delete L.error_x.copy_zstyle,delete L.error_y.copy_zstyle,delete L.error_y.copy_ystyle;var A={error_x:b.extendFlat({},o),error_y:b.extendFlat({},o),error_z:b.extendFlat({},o)};delete A.error_x.copy_ystyle,delete A.error_y.copy_ystyle,delete A.error_z.copy_ystyle,delete A.error_z.copy_zstyle,j.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:L,bar:L,histogram:L,scatter3d:P(A,"calc","nested"),scattergl:P(L,"calc","nested")}},supplyDefaults:t(65200),calc:t(14880),makeComputeError:t(93792),plot:t(78512),style:t(92036),hoverInfo:v};function v(p,r,e){(r.error_y||{}).visible&&(e.yerr=p.yh-p.y,r.error_y.symmetric||(e.yerrneg=p.y-p.ys)),(r.error_x||{}).visible&&(e.xerr=p.xh-p.x,r.error_x.symmetric||(e.xerrneg=p.x-p.xs))}},78512:function(j,V,t){var b=t(33428),P=t(38248),o=t(43616),L=t(43028);j.exports=function(p,r,e,s){var n,l=e.xaxis,f=e.yaxis,u=s&&s.duration>0,g=p._context.staticPlot;r.each(function(h){var T=h[0].trace,c=T.error_x||{},i=T.error_y||{},d;T.ids&&(d=function(y){return y.id});var x=L.hasMarkers(T)&&T.marker.maxdisplayed>0;!i.visible&&!c.visible&&(h=[]);var w=b.select(this).selectAll("g.errorbar").data(h,d);if(w.exit().remove(),!!h.length){c.visible||w.selectAll("path.xerror").remove(),i.visible||w.selectAll("path.yerror").remove(),w.style("opacity",1);var C=w.enter().append("g").classed("errorbar",!0);u&&C.style("opacity",0).transition().duration(s.duration).style("opacity",1),o.setClipUrl(w,e.layerClipId,p),w.each(function(y){var S=b.select(this),M=A(y,l,f);if(!(x&&!y.vis)){var a,E=S.select("path.yerror");if(i.visible&&P(M.x)&&P(M.yh)&&P(M.ys)){var m=i.width;a="M"+(M.x-m)+","+M.yh+"h"+2*m+"m-"+m+",0V"+M.ys,M.noYS||(a+="m-"+m+",0h"+2*m),n=!E.size(),n?E=S.append("path").style("vector-effect",g?"none":"non-scaling-stroke").classed("yerror",!0):u&&(E=E.transition().duration(s.duration).ease(s.easing)),E.attr("d",a)}else E.remove();var k=S.select("path.xerror");if(c.visible&&P(M.y)&&P(M.xh)&&P(M.xs)){var I=(c.copy_ystyle?i:c).width;a="M"+M.xh+","+(M.y-I)+"v"+2*I+"m0,-"+I+"H"+M.xs,M.noXS||(a+="m0,-"+I+"v"+2*I),n=!k.size(),n?k=S.append("path").style("vector-effect",g?"none":"non-scaling-stroke").classed("xerror",!0):u&&(k=k.transition().duration(s.duration).ease(s.easing)),k.attr("d",a)}else k.remove()}})}})};function A(v,p,r){var e={x:p.c2p(v.x),y:r.c2p(v.y)};return v.yh!==void 0&&(e.yh=r.c2p(v.yh),e.ys=r.c2p(v.ys),P(e.ys)||(e.noYS=!0,e.ys=r.c2p(v.ys,!0))),v.xh!==void 0&&(e.xh=p.c2p(v.xh),e.xs=p.c2p(v.xs),P(e.xs)||(e.noXS=!0,e.xs=p.c2p(v.xs,!0))),e}},92036:function(j,V,t){var b=t(33428),P=t(76308);j.exports=function(L){L.each(function(A){var v=A[0].trace,p=v.error_y||{},r=v.error_x||{},e=b.select(this);e.selectAll("path.yerror").style("stroke-width",p.thickness+"px").call(P.stroke,p.color),r.copy_ystyle&&(r=p),e.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(P.stroke,r.color)})}},55756:function(j,V,t){var b=t(25376),P=t(65460).hoverlabel,o=t(92880).extendFlat;j.exports={hoverlabel:{bgcolor:o({},P.bgcolor,{arrayOk:!0}),bordercolor:o({},P.bordercolor,{arrayOk:!0}),font:b({arrayOk:!0,editType:"none"}),align:o({},P.align,{arrayOk:!0}),namelength:o({},P.namelength,{arrayOk:!0}),editType:"none"}}},55056:function(j,V,t){var b=t(3400),P=t(24040);j.exports=function(A){var v=A.calcdata,p=A._fullLayout;function r(f){return function(u){return b.coerceHoverinfo({hoverinfo:u},{_module:f._module},p)}}for(var e=0;e<v.length;e++){var s=v[e],n=s[0].trace;if(!P.traceIs(n,"pie-like")){var l=P.traceIs(n,"2dMap")?o:b.fillArray;l(n.hoverinfo,s,"hi",r(n)),n.hovertemplate&&l(n.hovertemplate,s,"ht"),n.hoverlabel&&(l(n.hoverlabel.bgcolor,s,"hbg"),l(n.hoverlabel.bordercolor,s,"hbc"),l(n.hoverlabel.font.size,s,"hts"),l(n.hoverlabel.font.color,s,"htc"),l(n.hoverlabel.font.family,s,"htf"),l(n.hoverlabel.font.weight,s,"htw"),l(n.hoverlabel.font.style,s,"hty"),l(n.hoverlabel.font.variant,s,"htv"),l(n.hoverlabel.namelength,s,"hnl"),l(n.hoverlabel.align,s,"hta"))}}};function o(L,A,v,p){p=p||b.identity,Array.isArray(L)&&(A[0][v]=p(L))}},62376:function(j,V,t){var b=t(24040),P=t(83292).hover;j.exports=function(L,A,v){var p=b.getComponentMethod("annotations","onClick")(L,L._hoverdata);v!==void 0&&P(L,A,v,!0);function r(){L.emit("plotly_click",{points:L._hoverdata,event:A})}L._hoverdata&&A&&A.target&&(p&&p.then?p.then(r):r(),A.stopImmediatePropagation&&A.stopImmediatePropagation())}},92456:function(j){j.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},95448:function(j,V,t){var b=t(3400),P=t(55756),o=t(16132);j.exports=function(A,v,p,r){function e(n,l){return b.coerce(A,v,P,n,l)}var s=b.extendFlat({},r.hoverlabel);v.hovertemplate&&(s.namelength=-1),o(A,v,e,s)}},10624:function(j,V,t){var b=t(3400);V.getSubplot=function(p){return p.subplot||p.xaxis+p.yaxis||p.geo},V.isTraceInSubplots=function(p,r){if(p.type==="splom"){for(var e=p.xaxes||[],s=p.yaxes||[],n=0;n<e.length;n++)for(var l=0;l<s.length;l++)if(r.indexOf(e[n]+s[l])!==-1)return!0;return!1}return r.indexOf(V.getSubplot(p))!==-1},V.flat=function(p,r){for(var e=new Array(p.length),s=0;s<p.length;s++)e[s]=r;return e},V.p2c=function(p,r){for(var e=new Array(p.length),s=0;s<p.length;s++)e[s]=p[s].p2c(r);return e},V.getDistanceFunction=function(p,r,e,s){return p==="closest"?s||V.quadrature(r,e):p.charAt(0)==="x"?r:e},V.getClosest=function(p,r,e){if(e.index!==!1)e.index>=0&&e.index<p.length?e.distance=0:e.index=!1;else for(var s=0;s<p.length;s++){var n=r(p[s]);n<=e.distance&&(e.index=s,e.distance=n)}return e},V.inbox=function(p,r,e){return p*r<0||p===0?e:1/0},V.quadrature=function(p,r){return function(e){var s=p(e),n=r(e);return Math.sqrt(s*s+n*n)}},V.makeEventData=function(p,r,e){var s="index"in p?p.index:p.pointNumber,n={data:r._input,fullData:r,curveNumber:r.index,pointNumber:s};if(r._indexToPoints){var l=r._indexToPoints[s];l.length===1?n.pointIndex=l[0]:n.pointIndices=l}else n.pointIndex=s;return r._module.eventData?n=r._module.eventData(n,p,r,e,s):("xVal"in p?n.x=p.xVal:"x"in p&&(n.x=p.x),"yVal"in p?n.y=p.yVal:"y"in p&&(n.y=p.y),p.xa&&(n.xaxis=p.xa),p.ya&&(n.yaxis=p.ya),p.zLabelVal!==void 0&&(n.z=p.zLabelVal)),V.appendArrayPointValue(n,r,s),n},V.appendArrayPointValue=function(p,r,e){var s=r._arrayAttrs;if(s)for(var n=0;n<s.length;n++){var l=s[n],f=o(l);if(p[f]===void 0){var u=b.nestedProperty(r,l).get(),g=L(u,e);g!==void 0&&(p[f]=g)}}},V.appendArrayMultiPointValues=function(p,r,e){var s=r._arrayAttrs;if(s)for(var n=0;n<s.length;n++){var l=s[n],f=o(l);if(p[f]===void 0){for(var u=b.nestedProperty(r,l).get(),g=new Array(e.length),h=0;h<e.length;h++)g[h]=L(u,e[h]);p[f]=g}}};var P={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(p){return P[p]||p}function L(p,r){if(Array.isArray(r)){if(Array.isArray(p)&&Array.isArray(p[r[0]]))return p[r[0]][r[1]]}else return p[r]}var A={x:!0,y:!0},v={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(p){return typeof p!="string"?!1:!!v[p]},V.isXYhover=function(p){return typeof p!="string"?!1:!!A[p]}},83292:function(j,V,t){var b=t(33428),P=t(38248),o=t(49760),L=t(3400),A=L.pushUnique,v=L.strTranslate,p=L.strRotate,r=t(95924),e=t(72736),s=t(72213),n=t(43616),l=t(76308),f=t(86476),u=t(54460),g=t(33816).zindexSeparator,h=t(24040),T=t(10624),c=t(92456),i=t(77864),d=t(31140),x=c.YANGLE,w=Math.PI*x/180,C=1/Math.sin(w),y=Math.cos(w),S=Math.sin(w),M=c.HOVERARROWSIZE,a=c.HOVERTEXTPAD,E={box:!0,ohlc:!0,violin:!0,candlestick:!0},m={scatter:!0,scattergl:!0,splom:!0};function k(H,at){return H.distance-at.distance}V.hover=function(at,tt,lt,dt){at=L.getGraphDiv(at);var mt=tt.target;L.throttle(at._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){I(at,tt,lt,dt,mt)})},V.loneHover=function(at,tt){var lt=!0;Array.isArray(at)||(lt=!1,at=[at]);var dt=tt.gd,mt=J(dt),gt=it(dt),Mt=at.map(function(Gt){var te=Gt._x0||Gt.x0||Gt.x||0,Wt=Gt._x1||Gt.x1||Gt.x||0,jt=Gt._y0||Gt.y0||Gt.y||0,ie=Gt._y1||Gt.y1||Gt.y||0,ue=Gt.eventData;if(ue){var fe=Math.min(te,Wt),pe=Math.max(te,Wt),Te=Math.min(jt,ie),Qt=Math.max(jt,ie),Pt=Gt.trace;if(h.traceIs(Pt,"gl3d")){var Ot=dt._fullLayout[Pt.scene]._scene.container,Nt=Ot.offsetLeft,Ht=Ot.offsetTop;fe+=Nt,pe+=Nt,Te+=Ht,Qt+=Ht}ue.bbox={x0:fe+gt,x1:pe+gt,y0:Te+mt,y1:Qt+mt},tt.inOut_bbox&&tt.inOut_bbox.push(ue.bbox)}else ue=!1;return{color:Gt.color||l.defaultLine,x0:Gt.x0||Gt.x||0,x1:Gt.x1||Gt.x||0,y0:Gt.y0||Gt.y||0,y1:Gt.y1||Gt.y||0,xLabel:Gt.xLabel,yLabel:Gt.yLabel,zLabel:Gt.zLabel,text:Gt.text,name:Gt.name,idealAlign:Gt.idealAlign,borderColor:Gt.borderColor,fontFamily:Gt.fontFamily,fontSize:Gt.fontSize,fontColor:Gt.fontColor,fontWeight:Gt.fontWeight,fontStyle:Gt.fontStyle,fontVariant:Gt.fontVariant,nameLength:Gt.nameLength,textAlign:Gt.textAlign,trace:Gt.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Gt.hovertemplate||!1,hovertemplateLabels:Gt.hovertemplateLabels||!1,eventData:ue}}),Lt=!1,zt=B(Mt,{gd:dt,hovermode:"closest",rotateLabels:Lt,bgColor:tt.bgColor||l.background,container:b.select(tt.container),outerContainer:tt.outerContainer||tt.container}),xt=zt.hoverLabels,Ct=5,wt=0,Rt=0;xt.sort(function(Gt,te){return Gt.y0-te.y0}).each(function(Gt,te){var Wt=Gt.y0-Gt.by/2;Wt-Ct<wt?Gt.offset=wt-Wt+Ct:Gt.offset=0,wt=Wt+Gt.by+Gt.offset,te===tt.anchorIndex&&(Rt=Gt.offset)}).each(function(Gt){Gt.offset-=Rt});var Tt=dt._fullLayout._invScaleX,Bt=dt._fullLayout._invScaleY;return X(xt,Lt,Tt,Bt),lt?xt:xt.node()};function I(H,at,tt,lt,dt){tt||(tt="xy"),typeof tt=="string"&&(tt=tt.split(g)[0]);var mt=Array.isArray(tt)?tt:[tt],gt,Mt=H._fullLayout,Lt=Mt.hoversubplots,zt=Mt._plots||[],xt=zt[tt],Ct=Mt._has("cartesian"),wt=at.hovermode||Mt.hovermode,Rt=(wt||"").charAt(0)==="x",Tt=(wt||"").charAt(0)==="y",Bt,Gt;if(Ct&&(Rt||Tt)&&Lt==="axis"){for(var te=mt.length,Wt=0;Wt<te;Wt++)if(gt=mt[Wt],zt[gt]){Bt=u.getFromId(H,gt,"x"),Gt=u.getFromId(H,gt,"y");var jt=(Rt?Bt:Gt)._subplotsWith;if(jt&&jt.length)for(var ie=0;ie<jt.length;ie++)A(mt,jt[ie])}}if(xt&&Lt!=="single"){var ue=xt.overlays.map(function(Rn){return Rn.id});mt=mt.concat(ue)}for(var fe=mt.length,pe=new Array(fe),Te=new Array(fe),Qt=!1,Pt=0;Pt<fe;Pt++)if(gt=mt[Pt],zt[gt])Qt=!0,pe[Pt]=zt[gt].xaxis,Te[Pt]=zt[gt].yaxis;else if(Mt[gt]&&Mt[gt]._subplot){var Ot=Mt[gt]._subplot;pe[Pt]=Ot.xaxis,Te[Pt]=Ot.yaxis}else{L.warn("Unrecognized subplot: "+gt);return}if(wt&&!Qt&&(wt="closest"),["x","y","closest","x unified","y unified"].indexOf(wt)===-1||!H.calcdata||H.querySelector(".zoombox")||H._dragging)return f.unhoverRaw(H,at);var Nt=Mt.hoverdistance;Nt===-1&&(Nt=1/0);var Ht=Mt.spikedistance;Ht===-1&&(Ht=1/0);var St=[],kt=[],Ft,At,ft,pt,Dt,Ut,$t,re,Be,We,me,Se,je,vr={hLinePoint:null,vLinePoint:null},he=!1;if(Array.isArray(at))for(wt="array",ft=0;ft<at.length;ft++)Dt=H.calcdata[at[ft].curveNumber||0],Dt&&(Ut=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(kt.push(Dt),Ut.orientation==="h"&&(he=!0)));else{var Ye=H.calcdata.slice();for(Ye.sort(function(Rn,Cr){var an=Rn[0].trace.zorder||0,on=Cr[0].trace.zorder||0;return an-on}),pt=0;pt<Ye.length;pt++)Dt=Ye[pt],Ut=Dt[0].trace,Ut.hoverinfo!=="skip"&&T.isTraceInSubplots(Ut,mt)&&(kt.push(Dt),Ut.orientation==="h"&&(he=!0));var Qe=!dt,mr,ir;if(Qe)"xpx"in at?mr=at.xpx:mr=pe[0]._length/2,"ypx"in at?ir=at.ypx:ir=Te[0]._length/2;else{if(r.triggerHandler(H,"plotly_beforehover",at)===!1)return;var ve=dt.getBoundingClientRect();mr=at.clientX-ve.left,ir=at.clientY-ve.top,Mt._calcInverseTransform(H);var ne=L.apply3DTransform(Mt._invTransform)(mr,ir);if(mr=ne[0],ir=ne[1],mr<0||mr>pe[0]._length||ir<0||ir>Te[0]._length)return f.unhoverRaw(H,at)}if(at.pointerX=mr+pe[0]._offset,at.pointerY=ir+Te[0]._offset,"xval"in at?Ft=T.flat(mt,at.xval):Ft=T.p2c(pe,mr),"yval"in at?At=T.flat(mt,at.yval):At=T.p2c(Te,ir),!P(Ft[0])||!P(At[0]))return L.warn("Fx.hover failed",at,H),f.unhoverRaw(H,at)}var ge=1/0;function Ae(Rn,Cr){for(pt=0;pt<kt.length;pt++)if(Dt=kt[pt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Ut=Dt[0].trace,!(Ut.visible!==!0||Ut._length===0)&&["carpet","contourcarpet"].indexOf(Ut._module.name)===-1)){if(Be=wt,T.isUnifiedHover(Be)&&(Be=Be.charAt(0)),Ut.type==="splom"?(re=0,$t=mt[re]):($t=T.getSubplot(Ut),re=mt.indexOf($t)),Se={cd:Dt,trace:Ut,xa:pe[re],ya:Te[re],maxHoverDistance:Nt,maxSpikeDistance:Ht,index:!1,distance:Math.min(ge,Nt),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:l.defaultLine,name:Ut.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},Mt[$t]&&(Se.subplot=Mt[$t]._subplot),Mt._splomScenes&&Mt._splomScenes[Ut.uid]&&(Se.scene=Mt._splomScenes[Ut.uid]),Be==="array"){var an=at[pt];"pointNumber"in an?(Se.index=an.pointNumber,Be="closest"):(Be="","xval"in an&&(We=an.xval,Be="x"),"yval"in an&&(me=an.yval,Be=Be?"closest":"y"))}else Rn!==void 0&&Cr!==void 0?(We=Rn,me=Cr):(We=Ft[re],me=At[re]);if(je=St.length,Nt!==0)if(Ut._module&&Ut._module.hoverPoints){var on=Ut._module.hoverPoints(Se,We,me,Be,{finiteRange:!0,hoverLayer:Mt._hoverlayer,hoversubplots:Lt,gd:H});if(on)for(var ln,Nn=0;Nn<on.length;Nn++)ln=on[Nn],P(ln.x0)&&P(ln.y0)&&St.push($(ln,wt))}else L.log("Unrecognized trace type in hover:",Ut);if(wt==="closest"&&St.length>je&&(St.splice(0,je),ge=St[0].distance),Ct&&Ht!==0&&St.length===0){Se.distance=Ht,Se.index=!1;var gn=Ut._module.hoverPoints(Se,We,me,"closest",{hoverLayer:Mt._hoverlayer});if(gn&&(gn=gn.filter(function(Ar){return Ar.spikeDistance<=Ht})),gn&&gn.length){var Cn,Un=gn.filter(function(Ar){return Ar.xa.showspikes&&Ar.xa.spikesnap!=="hovered data"});if(Un.length){var ta=Un[0];P(ta.x0)&&P(ta.y0)&&(Cn=ze(ta),(!vr.vLinePoint||vr.vLinePoint.spikeDistance>Cn.spikeDistance)&&(vr.vLinePoint=Cn))}var pa=gn.filter(function(Ar){return Ar.ya.showspikes&&Ar.ya.spikesnap!=="hovered data"});if(pa.length){var ka=pa[0];P(ka.x0)&&P(ka.y0)&&(Cn=ze(ka),(!vr.hLinePoint||vr.hLinePoint.spikeDistance>Cn.spikeDistance)&&(vr.hLinePoint=Cn))}}}}}Ae();function Re(Rn,Cr,an){for(var on=null,ln=1/0,Nn,gn=0;gn<Rn.length;gn++)Bt&&Bt._id!==Rn[gn].xa._id||Gt&&Gt._id!==Rn[gn].ya._id||(Nn=Rn[gn].spikeDistance,an&&gn===0&&(Nn=-1/0),Nn<=ln&&Nn<=Cr&&(on=Rn[gn],ln=Nn));return on}function ze(Rn){return Rn?{xa:Rn.xa,ya:Rn.ya,x:Rn.xSpike!==void 0?Rn.xSpike:(Rn.x0+Rn.x1)/2,y:Rn.ySpike!==void 0?Rn.ySpike:(Rn.y0+Rn.y1)/2,distance:Rn.distance,spikeDistance:Rn.spikeDistance,curveNumber:Rn.trace.index,color:Rn.color,pointNumber:Rn.index}:null}var ke={fullLayout:Mt,container:Mt._hoverlayer,event:at};H._spikepoints;var _e={vLinePoint:vr.vLinePoint,hLinePoint:vr.hLinePoint};H._spikepoints=_e;var Ke=function(){var Rn=St.filter(function(an){return Bt&&Bt._id===an.xa._id&&Gt&&Gt._id===an.ya._id}),Cr=St.filter(function(an){return!(Bt&&Bt._id===an.xa._id&&Gt&&Gt._id===an.ya._id)});Rn.sort(k),Cr.sort(k),St=Rn.concat(Cr),St=Q(St,wt)};Ke();var hr=wt.charAt(0),cr=(hr==="x"||hr==="y")&&St[0]&&m[St[0].trace.type];if(Ct&&Ht!==0&&St.length!==0){var dr=St.filter(function(Rn){return Rn.ya.showspikes}),fr=Re(dr,Ht,cr);vr.hLinePoint=ze(fr);var Lr=St.filter(function(Rn){return Rn.xa.showspikes}),xr=Re(Lr,Ht,cr);vr.vLinePoint=ze(xr)}if(St.length===0){var Yt=f.unhoverRaw(H,at);return Ct&&(vr.hLinePoint!==null||vr.vLinePoint!==null)&&nt()&&et(H,vr,ke),Yt}if(Ct&&nt()&&et(H,vr,ke),T.isXYhover(Be)&&St[0].length!==0&&St[0].trace.type!=="splom"){var Jt=St[0];E[Jt.trace.type]?St=St.filter(function(Rn){return Rn.trace.index===Jt.trace.index}):St=[Jt];var qe=St.length,tr=W("x",Jt,Mt),Ge=W("y",Jt,Mt);Ae(tr,Ge);var Ee=[],Xe={},rr=0,Je=function(Rn){var Cr=E[Rn.trace.type]?O(Rn):Rn.trace.index;if(!Xe[Cr])rr++,Xe[Cr]=rr,Ee.push(Rn);else{var an=Xe[Cr]-1,on=Ee[an];an>0&&Math.abs(Rn.distance)<Math.abs(on.distance)&&(Ee[an]=Rn)}},He;for(He=0;He<qe;He++)Je(St[He]);for(He=St.length-1;He>qe-1;He--)Je(St[He]);St=Ee,Ke()}var yr=H._hoverdata,Ir=[],Tr=J(H),vn=it(H);for(ft=0;ft<St.length;ft++){var Or=St[ft],En=T.makeEventData(Or,Or.trace,Or.cd);if(Or.hovertemplate!==!1){var nn=!1;Or.cd[Or.index]&&Or.cd[Or.index].ht&&(nn=Or.cd[Or.index].ht),Or.hovertemplate=nn||Or.trace.hovertemplate||!1}if(Or.xa&&Or.ya){var gr=Or.x0+Or.xa._offset,Pr=Or.x1+Or.xa._offset,Xr=Or.y0+Or.ya._offset,kr=Or.y1+Or.ya._offset,pn=Math.min(gr,Pr),en=Math.max(gr,Pr),Tn=Math.min(Xr,kr),Ln=Math.max(Xr,kr);En.bbox={x0:pn+vn,x1:en+vn,y0:Tn+Tr,y1:Ln+Tr}}Or.eventData=[En],Ir.push(En)}H._hoverdata=Ir;var Yn=wt==="y"&&(kt.length>1||St.length>1)||wt==="closest"&&he&&St.length>1,ma=l.combine(Mt.plot_bgcolor||l.background,Mt.paper_bgcolor),wa=B(St,{gd:H,hovermode:wt,rotateLabels:Yn,bgColor:ma,container:Mt._hoverlayer,outerContainer:Mt._paper.node(),commonLabelOpts:Mt.hoverlabel,hoverdistance:Mt.hoverdistance}),la=wa.hoverLabels;if(T.isUnifiedHover(wt)||(_(la,Yn,Mt,wa.commonLabelBoundingBox),X(la,Yn,Mt._invScaleX,Mt._invScaleY)),dt&&dt.tagName){var ia=h.getComponentMethod("annotations","hasClickToShow")(H,Ir);s(b.select(dt),ia?"pointer":"")}!dt||lt||!ot(H,at,yr)||(yr&&H.emit("plotly_unhover",{event:at,points:yr}),H.emit("plotly_hover",{event:at,points:H._hoverdata,xaxes:pe,yaxes:Te,xvals:Ft,yvals:At}))}function O(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function B(H,at){var tt=at.gd,lt=tt._fullLayout,dt=at.hovermode,mt=at.rotateLabels,gt=at.bgColor,Mt=at.container,Lt=at.outerContainer,zt=at.commonLabelOpts||{};if(H.length===0)return[[]];var xt=at.fontFamily||c.HOVERFONT,Ct=at.fontSize||c.HOVERFONTSIZE,wt=at.fontWeight||lt.font.weight,Rt=at.fontStyle||lt.font.style,Tt=at.fontVariant||lt.font.variant,Bt=at.fontTextcase||lt.font.textcase,Gt=at.fontLineposition||lt.font.lineposition,te=at.fontShadow||lt.font.shadow,Wt=H[0],jt=Wt.xa,ie=Wt.ya,ue=dt.charAt(0),fe=ue+"Label",pe=Wt[fe];if(pe===void 0&&jt.type==="multicategory")for(var Te=0;Te<H.length&&(pe=H[Te][fe],pe===void 0);Te++);var Qt=K(tt,Lt),Pt=Qt.top,Ot=Qt.width,Nt=Qt.height,Ht=pe!==void 0&&Wt.distance<=at.hoverdistance&&(dt==="x"||dt==="y");if(Ht){var St=!0,kt,Ft;for(kt=0;kt<H.length;kt++)if(St&&H[kt].zLabel===void 0&&(St=!1),Ft=H[kt].hoverinfo||H[kt].trace.hoverinfo,Ft){var At=Array.isArray(Ft)?Ft:Ft.split("+");if(At.indexOf("all")===-1&&At.indexOf(dt)===-1){Ht=!1;break}}St&&(Ht=!1)}var ft=Mt.selectAll("g.axistext").data(Ht?[0]:[]);ft.enter().append("g").classed("axistext",!0),ft.exit().remove();var pt={minX:0,maxX:0,minY:0,maxY:0};if(ft.each(function(){var xr=b.select(this),Yt=L.ensureSingle(xr,"path","",function(en){en.style({"stroke-width":"1px"})}),Jt=L.ensureSingle(xr,"text","",function(en){en.attr("data-notex",1)}),qe=zt.bgcolor||l.defaultLine,tr=zt.bordercolor||l.contrast(qe),Ge=l.contrast(qe),Ee=zt.font,Xe={weight:Ee.weight||wt,style:Ee.style||Rt,variant:Ee.variant||Tt,textcase:Ee.textcase||Bt,lineposition:Ee.lineposition||Gt,shadow:Ee.shadow||te,family:Ee.family||xt,size:Ee.size||Ct,color:Ee.color||Ge};Yt.style({fill:qe,stroke:tr}),Jt.text(pe).call(n.font,Xe).call(e.positionText,0,0).call(e.convertToTspans,tt),xr.attr("transform","");var rr=K(tt,Jt.node()),Je,He;if(dt==="x"){var yr=jt.side==="top"?"-":"";Jt.attr("text-anchor","middle").call(e.positionText,0,jt.side==="top"?Pt-rr.bottom-M-a:Pt-rr.top+M+a),Je=jt._offset+(Wt.x0+Wt.x1)/2,He=ie._offset+(jt.side==="top"?0:ie._length);var Ir=rr.width/2+a,Tr=Je;Je<Ir?Tr=Ir:Je>lt.width-Ir&&(Tr=lt.width-Ir),Yt.attr("d","M"+(Je-Tr)+",0L"+(Je-Tr+M)+","+yr+M+"H"+Ir+"v"+yr+(a*2+rr.height)+"H"+-Ir+"V"+yr+M+"H"+(Je-Tr-M)+"Z"),Je=Tr,pt.minX=Je-Ir,pt.maxX=Je+Ir,jt.side==="top"?(pt.minY=He-(a*2+rr.height),pt.maxY=He-a):(pt.minY=He+a,pt.maxY=He+(a*2+rr.height))}else{var vn,Or,En;ie.side==="right"?(vn="start",Or=1,En="",Je=jt._offset+jt._length):(vn="end",Or=-1,En="-",Je=jt._offset),He=ie._offset+(Wt.y0+Wt.y1)/2,Jt.attr("text-anchor",vn),Yt.attr("d","M0,0L"+En+M+","+M+"V"+(a+rr.height/2)+"h"+En+(a*2+rr.width)+"V-"+(a+rr.height/2)+"H"+En+M+"V-"+M+"Z"),pt.minY=He-(a+rr.height/2),pt.maxY=He+(a+rr.height/2),ie.side==="right"?(pt.minX=Je+M,pt.maxX=Je+M+(a*2+rr.width)):(pt.minX=Je-M-(a*2+rr.width),pt.maxX=Je-M);var nn=rr.height/2,gr=Pt-rr.top-nn,Pr="clip"+lt._uid+"commonlabel"+ie._id,Xr;if(Je<rr.width+2*a+M){Xr="M-"+(M+a)+"-"+nn+"h-"+(rr.width-a)+"V"+nn+"h"+(rr.width-a)+"Z";var kr=rr.width-Je+a;e.positionText(Jt,kr,gr),vn==="end"&&Jt.selectAll("tspan").each(function(){var en=b.select(this),Tn=n.tester.append("text").text(en.text()).call(n.font,Xe),Ln=K(tt,Tn.node());Math.round(Ln.width)<Math.round(rr.width)&&en.attr("x",kr-Ln.width),Tn.remove()})}else e.positionText(Jt,Or*(a+M),gr),Xr=null;var pn=lt._topclips.selectAll("#"+Pr).data(Xr?[0]:[]);pn.enter().append("clipPath").attr("id",Pr).append("path"),pn.exit().remove(),pn.select("path").attr("d",Xr),n.setClipUrl(Jt,Xr?Pr:null,tt)}xr.attr("transform",v(Je,He))}),T.isUnifiedHover(dt)){Mt.selectAll("g.hovertext").remove();var Dt=H.filter(function(xr){return xr.hoverinfo!=="none"});if(Dt.length===0)return[];var Ut=lt.hoverlabel,$t=Ut.font,re={showlegend:!0,legend:{title:{text:pe,font:$t},font:$t,bgcolor:Ut.bgcolor,bordercolor:Ut.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:lt.legend?lt.legend.traceorder:void 0,orientation:"v"}},Be={font:$t};i(re,Be,tt._fullData);var We=Be.legend;We.entries=[];for(var me=0;me<Dt.length;me++){var Se=Dt[me];if(Se.hoverinfo!=="none"){var je=F(Se,!0,dt,lt,pe),vr=je[0],he=je[1];Se.name=he,he!==""?Se.text=he+" : "+vr:Se.text=vr;var Ye=Se.cd[Se.index];Ye&&(Ye.mc&&(Se.mc=Ye.mc),Ye.mcc&&(Se.mc=Ye.mcc),Ye.mlc&&(Se.mlc=Ye.mlc),Ye.mlcc&&(Se.mlc=Ye.mlcc),Ye.mlw&&(Se.mlw=Ye.mlw),Ye.mrc&&(Se.mrc=Ye.mrc),Ye.dir&&(Se.dir=Ye.dir)),Se._distinct=!0,We.entries.push([Se])}}We.entries.sort(function(xr,Yt){return xr[0].trace.index-Yt[0].trace.index}),We.layer=Mt,We._inHover=!0,We._groupTitleFont=Ut.grouptitlefont,d(tt,We);var Qe=Mt.select("g.legend"),mr=K(tt,Qe.node()),ir=mr.width+2*a,ve=mr.height+2*a,ne=Dt[0],ge=(ne.x0+ne.x1)/2,Ae=(ne.y0+ne.y1)/2,Re=!(h.traceIs(ne.trace,"bar-like")||h.traceIs(ne.trace,"box-violin")),ze,ke;ue==="y"?Re?(ke=Ae-a,ze=Ae+a):(ke=Math.min.apply(null,Dt.map(function(xr){return Math.min(xr.y0,xr.y1)})),ze=Math.max.apply(null,Dt.map(function(xr){return Math.max(xr.y0,xr.y1)}))):ke=ze=L.mean(Dt.map(function(xr){return(xr.y0+xr.y1)/2}))-ve/2;var _e,Ke;ue==="x"?Re?(_e=ge+a,Ke=ge-a):(_e=Math.max.apply(null,Dt.map(function(xr){return Math.max(xr.x0,xr.x1)})),Ke=Math.min.apply(null,Dt.map(function(xr){return Math.min(xr.x0,xr.x1)}))):_e=Ke=L.mean(Dt.map(function(xr){return(xr.x0+xr.x1)/2}))-ir/2;var hr=jt._offset,cr=ie._offset;ze+=cr,_e+=hr,Ke+=hr-ir,ke+=cr-ve;var dr,fr;return _e+ir<Ot&&_e>=0?dr=_e:Ke+ir<Ot&&Ke>=0?dr=Ke:hr+ir<Ot?dr=hr:_e-ge<ge-Ke+ir?dr=Ot-ir:dr=0,dr+=a,ze+ve<Nt&&ze>=0?fr=ze:ke+ve<Nt&&ke>=0?fr=ke:cr+ve<Nt?fr=cr:ze-Ae<Ae-ke+ve?fr=Nt-ve:fr=0,fr+=a,Qe.attr("transform",v(dr-1,fr-1)),Qe}var Lr=Mt.selectAll("g.hovertext").data(H,function(xr){return O(xr)});return Lr.enter().append("g").classed("hovertext",!0).each(function(){var xr=b.select(this);xr.append("rect").call(l.fill,l.addOpacity(gt,.8)),xr.append("text").classed("name",!0),xr.append("path").style("stroke-width","1px"),xr.append("text").classed("nums",!0).call(n.font,{weight:wt,style:Rt,variant:Tt,textcase:Bt,lineposition:Gt,shadow:te,family:xt,size:Ct})}),Lr.exit().remove(),Lr.each(function(xr){var Yt=b.select(this).attr("transform",""),Jt=xr.color;Array.isArray(Jt)&&(Jt=Jt[xr.eventData[0].pointNumber]);var qe=xr.bgcolor||Jt,tr=l.combine(l.opacity(qe)?qe:l.defaultLine,gt),Ge=l.combine(l.opacity(Jt)?Jt:l.defaultLine,gt),Ee=xr.borderColor||l.contrast(tr),Xe=F(xr,Ht,dt,lt,pe,Yt),rr=Xe[0],Je=Xe[1],He=Yt.select("text.nums").call(n.font,{family:xr.fontFamily||xt,size:xr.fontSize||Ct,color:xr.fontColor||Ee,weight:xr.fontWeight||wt,style:xr.fontStyle||Rt,variant:xr.fontVariant||Tt,textcase:xr.fontTextcase||Bt,lineposition:xr.fontLineposition||Gt,shadow:xr.fontShadow||te}).text(rr).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,tt),yr=Yt.select("text.name"),Ir=0,Tr=0;if(Je&&Je!==rr){yr.call(n.font,{family:xr.fontFamily||xt,size:xr.fontSize||Ct,color:Ge,weight:xr.fontWeight||wt,style:xr.fontStyle||Rt,variant:xr.fontVariant||Tt,textcase:xr.fontTextcase||Bt,lineposition:xr.fontLineposition||Gt,shadow:xr.fontShadow||te}).text(Je).attr("data-notex",1).call(e.positionText,0,0).call(e.convertToTspans,tt);var vn=K(tt,yr.node());Ir=vn.width+2*a,Tr=vn.height+2*a}else yr.remove(),Yt.select("rect").remove();Yt.select("path").style({fill:tr,stroke:Ee});var Or=xr.xa._offset+(xr.x0+xr.x1)/2,En=xr.ya._offset+(xr.y0+xr.y1)/2,nn=Math.abs(xr.x1-xr.x0),gr=Math.abs(xr.y1-xr.y0),Pr=K(tt,He.node()),Xr=Pr.width/lt._invScaleX,kr=Pr.height/lt._invScaleY;xr.ty0=(Pt-Pr.top)/lt._invScaleY,xr.bx=Xr+2*a,xr.by=Math.max(kr+2*a,Tr),xr.anchor="start",xr.txwidth=Xr,xr.tx2width=Ir,xr.offset=0;var pn=(Xr+M+a+Ir)*lt._invScaleX,en,Tn;if(mt)xr.pos=Or,en=En+gr/2+pn<=Nt,Tn=En-gr/2-pn>=0,(xr.idealAlign==="top"||!en)&&Tn?(En-=gr/2,xr.anchor="end"):en?(En+=gr/2,xr.anchor="start"):xr.anchor="middle",xr.crossPos=En;else{if(xr.pos=En,en=Or+nn/2+pn<=Ot,Tn=Or-nn/2-pn>=0,(xr.idealAlign==="left"||!en)&&Tn)Or-=nn/2,xr.anchor="end";else if(en)Or+=nn/2,xr.anchor="start";else{xr.anchor="middle";var Ln=pn/2,Yn=Or+Ln-Ot,ma=Or-Ln;Yn>0&&(Or-=Yn),ma<0&&(Or+=-ma)}xr.crossPos=Or}He.attr("text-anchor",xr.anchor),Ir&&yr.attr("text-anchor",xr.anchor),Yt.attr("transform",v(Or,En)+(mt?p(x):""))}),{hoverLabels:Lr,commonLabelBoundingBox:pt}}function F(H,at,tt,lt,dt,mt){var gt="",Mt="";H.nameOverride!==void 0&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=L.templateString(H.name,H.trace._meta)),gt=Z(H.name,H.nameLength));var Lt=tt.charAt(0),zt=Lt==="x"?"y":"x";H.zLabel!==void 0?(H.xLabel!==void 0&&(Mt+="x: "+H.xLabel+"<br>"),H.yLabel!==void 0&&(Mt+="y: "+H.yLabel+"<br>"),H.trace.type!=="choropleth"&&H.trace.type!=="choroplethmapbox"&&(Mt+=(Mt?"z: ":"")+H.zLabel)):at&&H[Lt+"Label"]===dt?Mt=H[zt+"Label"]||"":H.xLabel===void 0?H.yLabel!==void 0&&H.trace.type!=="scattercarpet"&&(Mt=H.yLabel):H.yLabel===void 0?Mt=H.xLabel:Mt="("+H.xLabel+", "+H.yLabel+")",(H.text||H.text===0)&&!Array.isArray(H.text)&&(Mt+=(Mt?"<br>":"")+H.text),H.extraText!==void 0&&(Mt+=(Mt?"<br>":"")+H.extraText),mt&&Mt===""&&!H.hovertemplate&&(gt===""&&mt.remove(),Mt=gt);var xt=H.hovertemplate||!1;if(xt){var Ct=H.hovertemplateLabels||H;H[Lt+"Label"]!==dt&&(Ct[Lt+"other"]=Ct[Lt+"Val"],Ct[Lt+"otherLabel"]=Ct[Lt+"Label"]),Mt=L.hovertemplateString(xt,Ct,lt._d3locale,H.eventData[0]||{},H.trace._meta),Mt=Mt.replace(z,function(wt,Rt){return gt=Z(Rt,H.nameLength),""})}return[Mt,gt]}function _(H,at,tt,lt){var dt=at?"xa":"ya",mt=at?"ya":"xa",gt=0,Mt=1,Lt=H.size(),zt=new Array(Lt),xt=0,Ct=lt.minX,wt=lt.maxX,Rt=lt.minY,Tt=lt.maxY,Bt=function(Ft){return Ft*tt._invScaleX},Gt=function(Ft){return Ft*tt._invScaleY};H.each(function(Ft){var At=Ft[dt],ft=Ft[mt],pt=At._id.charAt(0)==="x",Dt=At.range;xt===0&&Dt&&Dt[0]>Dt[1]!==pt&&(Mt=-1);var Ut=0,$t=pt?tt.width:tt.height;if(tt.hovermode==="x"||tt.hovermode==="y"){var re=N(Ft,at),Be=Ft.anchor,We=Be==="end"?-1:1,me,Se;if(Be==="middle")me=Ft.crossPos+(pt?Gt(re.y-Ft.by/2):Bt(Ft.bx/2+Ft.tx2width/2)),Se=me+(pt?Gt(Ft.by):Bt(Ft.bx));else if(pt)me=Ft.crossPos+Gt(M+re.y)-Gt(Ft.by/2-M),Se=me+Gt(Ft.by);else{var je=Bt(We*M+re.x),vr=je+Bt(We*Ft.bx);me=Ft.crossPos+Math.min(je,vr),Se=Ft.crossPos+Math.max(je,vr)}pt?Rt!==void 0&&Tt!==void 0&&Math.min(Se,Tt)-Math.max(me,Rt)>1&&(ft.side==="left"?(Ut=ft._mainLinePosition,$t=tt.width):$t=ft._mainLinePosition):Ct!==void 0&&wt!==void 0&&Math.min(Se,wt)-Math.max(me,Ct)>1&&(ft.side==="top"?(Ut=ft._mainLinePosition,$t=tt.height):$t=ft._mainLinePosition)}zt[xt++]=[{datum:Ft,traceIndex:Ft.trace.index,dp:0,pos:Ft.pos,posref:Ft.posref,size:Ft.by*(pt?C:1)/2,pmin:Ut,pmax:$t}]}),zt.sort(function(Ft,At){return Ft[0].posref-At[0].posref||Mt*(At[0].traceIndex-Ft[0].traceIndex)});var te,Wt,jt,ie,ue,fe,pe;function Te(Ft){var At=Ft[0],ft=Ft[Ft.length-1];if(Wt=At.pmin-At.pos-At.dp+At.size,jt=ft.pos+ft.dp+ft.size-At.pmax,Wt>.01){for(ue=Ft.length-1;ue>=0;ue--)Ft[ue].dp+=Wt;te=!1}if(!(jt<.01)){if(Wt<-.01){for(ue=Ft.length-1;ue>=0;ue--)Ft[ue].dp-=jt;te=!1}if(te){var pt=0;for(ie=0;ie<Ft.length;ie++)fe=Ft[ie],fe.pos+fe.dp+fe.size>At.pmax&&pt++;for(ie=Ft.length-1;ie>=0&&!(pt<=0);ie--)fe=Ft[ie],fe.pos>At.pmax-1&&(fe.del=!0,pt--);for(ie=0;ie<Ft.length&&!(pt<=0);ie++)if(fe=Ft[ie],fe.pos<At.pmin+1)for(fe.del=!0,pt--,jt=fe.size*2,ue=Ft.length-1;ue>=0;ue--)Ft[ue].dp-=jt;for(ie=Ft.length-1;ie>=0&&!(pt<=0);ie--)fe=Ft[ie],fe.pos+fe.dp+fe.size>At.pmax&&(fe.del=!0,pt--)}}}for(;!te&&gt<=Lt;){for(gt++,te=!0,ie=0;ie<zt.length-1;){var Qt=zt[ie],Pt=zt[ie+1],Ot=Qt[Qt.length-1],Nt=Pt[0];if(Wt=Ot.pos+Ot.dp+Ot.size-Nt.pos-Nt.dp+Nt.size,Wt>.01){for(ue=Pt.length-1;ue>=0;ue--)Pt[ue].dp+=Wt;for(Qt.push.apply(Qt,Pt),zt.splice(ie+1,1),pe=0,ue=Qt.length-1;ue>=0;ue--)pe+=Qt[ue].dp;for(jt=pe/Qt.length,ue=Qt.length-1;ue>=0;ue--)Qt[ue].dp-=jt;te=!1}else ie++}zt.forEach(Te)}for(ie=zt.length-1;ie>=0;ie--){var Ht=zt[ie];for(ue=Ht.length-1;ue>=0;ue--){var St=Ht[ue],kt=St.datum;kt.offset=St.dp,kt.del=St.del}}}function N(H,at){var tt=0,lt=H.offset;return at&&(lt*=-S,tt=H.offset*y),{x:tt,y:lt}}function G(H){var at={start:1,end:-1,middle:0}[H.anchor],tt=at*(M+a),lt=tt+at*(H.txwidth+a),dt=H.anchor==="middle";return dt&&(tt-=H.tx2width/2,lt+=H.txwidth/2+a),{alignShift:at,textShiftX:tt,text2ShiftX:lt}}function X(H,at,tt,lt){var dt=function(gt){return gt*tt},mt=function(gt){return gt*lt};H.each(function(gt){var Mt=b.select(this);if(gt.del)return Mt.remove();var Lt=Mt.select("text.nums"),zt=gt.anchor,xt=zt==="end"?-1:1,Ct=G(gt),wt=N(gt,at),Rt=wt.x,Tt=wt.y,Bt=zt==="middle";Mt.select("path").attr("d",Bt?"M-"+dt(gt.bx/2+gt.tx2width/2)+","+mt(Tt-gt.by/2)+"h"+dt(gt.bx)+"v"+mt(gt.by)+"h-"+dt(gt.bx)+"Z":"M0,0L"+dt(xt*M+Rt)+","+mt(M+Tt)+"v"+mt(gt.by/2-M)+"h"+dt(xt*gt.bx)+"v-"+mt(gt.by)+"H"+dt(xt*M+Rt)+"V"+mt(Tt-M)+"Z");var Gt=Rt+Ct.textShiftX,te=Tt+gt.ty0-gt.by/2+a,Wt=gt.textAlign||"auto";Wt!=="auto"&&(Wt==="left"&&zt!=="start"?(Lt.attr("text-anchor","start"),Gt=Bt?-gt.bx/2-gt.tx2width/2+a:-gt.bx-a):Wt==="right"&&zt!=="end"&&(Lt.attr("text-anchor","end"),Gt=Bt?gt.bx/2-gt.tx2width/2-a:gt.bx+a)),Lt.call(e.positionText,dt(Gt),mt(te)),gt.tx2width&&(Mt.select("text.name").call(e.positionText,dt(Ct.text2ShiftX+Ct.alignShift*a+Rt),mt(Tt+gt.ty0-gt.by/2+a)),Mt.select("rect").call(n.setRect,dt(Ct.text2ShiftX+(Ct.alignShift-1)*gt.tx2width/2+Rt),mt(Tt-gt.by/2-1),dt(gt.tx2width),mt(gt.by+2)))})}function $(H,at){var tt=H.index,lt=H.trace||{},dt=H.cd[0],mt=H.cd[tt]||{};function gt(wt){return wt||P(wt)&&wt===0}var Mt=Array.isArray(tt)?function(wt,Rt){var Tt=L.castOption(dt,tt,wt);return gt(Tt)?Tt:L.extractOption({},lt,"",Rt)}:function(wt,Rt){return L.extractOption(mt,lt,wt,Rt)};function Lt(wt,Rt,Tt){var Bt=Mt(Rt,Tt);gt(Bt)&&(H[wt]=Bt)}if(Lt("hoverinfo","hi","hoverinfo"),Lt("bgcolor","hbg","hoverlabel.bgcolor"),Lt("borderColor","hbc","hoverlabel.bordercolor"),Lt("fontFamily","htf","hoverlabel.font.family"),Lt("fontSize","hts","hoverlabel.font.size"),Lt("fontColor","htc","hoverlabel.font.color"),Lt("fontWeight","htw","hoverlabel.font.weight"),Lt("fontStyle","hty","hoverlabel.font.style"),Lt("fontVariant","htv","hoverlabel.font.variant"),Lt("nameLength","hnl","hoverlabel.namelength"),Lt("textAlign","hta","hoverlabel.align"),H.posref=at==="y"||at==="closest"&&lt.orientation==="h"?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=L.constrain(H.x0,0,H.xa._length),H.x1=L.constrain(H.x1,0,H.xa._length),H.y0=L.constrain(H.y0,0,H.ya._length),H.y1=L.constrain(H.y1,0,H.ya._length),H.xLabelVal!==void 0&&(H.xLabel="xLabel"in H?H.xLabel:u.hoverLabelText(H.xa,H.xLabelVal,lt.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),H.yLabelVal!==void 0&&(H.yLabel="yLabel"in H?H.yLabel:u.hoverLabelText(H.ya,H.yLabelVal,lt.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),H.zLabelVal!==void 0&&H.zLabel===void 0&&(H.zLabel=String(H.zLabelVal)),!isNaN(H.xerr)&&!(H.xa.type==="log"&&H.xerr<=0)){var zt=u.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xerrneg!==void 0?H.xLabel+=" +"+zt+" / -"+u.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:H.xLabel+=" ± "+zt,at==="x"&&(H.distance+=1)}if(!isNaN(H.yerr)&&!(H.ya.type==="log"&&H.yerr<=0)){var xt=u.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yerrneg!==void 0?H.yLabel+=" +"+xt+" / -"+u.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:H.yLabel+=" ± "+xt,at==="y"&&(H.distance+=1)}var Ct=H.hoverinfo||H.trace.hoverinfo;return Ct&&Ct!=="all"&&(Ct=Array.isArray(Ct)?Ct:Ct.split("+"),Ct.indexOf("x")===-1&&(H.xLabel=void 0),Ct.indexOf("y")===-1&&(H.yLabel=void 0),Ct.indexOf("z")===-1&&(H.zLabel=void 0),Ct.indexOf("text")===-1&&(H.text=void 0),Ct.indexOf("name")===-1&&(H.name=void 0)),H}function et(H,at,tt){var lt=tt.container,dt=tt.fullLayout,mt=dt._size,gt=tt.event,Mt=!!at.hLinePoint,Lt=!!at.vLinePoint,zt,xt;if(lt.selectAll(".spikeline").remove(),!!(Lt||Mt)){var Ct=l.combine(dt.plot_bgcolor,dt.paper_bgcolor);if(Mt){var wt=at.hLinePoint,Rt,Tt;zt=wt&&wt.xa,xt=wt&&wt.ya;var Bt=xt.spikesnap;Bt==="cursor"?(Rt=gt.pointerX,Tt=gt.pointerY):(Rt=zt._offset+wt.x,Tt=xt._offset+wt.y);var Gt=o.readability(wt.color,Ct)<1.5?l.contrast(Ct):wt.color,te=xt.spikemode,Wt=xt.spikethickness,jt=xt.spikecolor||Gt,ie=u.getPxPosition(H,xt),ue,fe;if(te.indexOf("toaxis")!==-1||te.indexOf("across")!==-1){if(te.indexOf("toaxis")!==-1&&(ue=ie,fe=Rt),te.indexOf("across")!==-1){var pe=xt._counterDomainMin,Te=xt._counterDomainMax;xt.anchor==="free"&&(pe=Math.min(pe,xt.position),Te=Math.max(Te,xt.position)),ue=mt.l+pe*mt.w,fe=mt.l+Te*mt.w}lt.insert("line",":first-child").attr({x1:ue,x2:fe,y1:Tt,y2:Tt,"stroke-width":Wt,stroke:jt,"stroke-dasharray":n.dashStyle(xt.spikedash,Wt)}).classed("spikeline",!0).classed("crisp",!0),lt.insert("line",":first-child").attr({x1:ue,x2:fe,y1:Tt,y2:Tt,"stroke-width":Wt+2,stroke:Ct}).classed("spikeline",!0).classed("crisp",!0)}te.indexOf("marker")!==-1&&lt.insert("circle",":first-child").attr({cx:ie+(xt.side!=="right"?Wt:-Wt),cy:Tt,r:Wt,fill:jt}).classed("spikeline",!0)}if(Lt){var Qt=at.vLinePoint,Pt,Ot;zt=Qt&&Qt.xa,xt=Qt&&Qt.ya;var Nt=zt.spikesnap;Nt==="cursor"?(Pt=gt.pointerX,Ot=gt.pointerY):(Pt=zt._offset+Qt.x,Ot=xt._offset+Qt.y);var Ht=o.readability(Qt.color,Ct)<1.5?l.contrast(Ct):Qt.color,St=zt.spikemode,kt=zt.spikethickness,Ft=zt.spikecolor||Ht,At=u.getPxPosition(H,zt),ft,pt;if(St.indexOf("toaxis")!==-1||St.indexOf("across")!==-1){if(St.indexOf("toaxis")!==-1&&(ft=At,pt=Ot),St.indexOf("across")!==-1){var Dt=zt._counterDomainMin,Ut=zt._counterDomainMax;zt.anchor==="free"&&(Dt=Math.min(Dt,zt.position),Ut=Math.max(Ut,zt.position)),ft=mt.t+(1-Ut)*mt.h,pt=mt.t+(1-Dt)*mt.h}lt.insert("line",":first-child").attr({x1:Pt,x2:Pt,y1:ft,y2:pt,"stroke-width":kt,stroke:Ft,"stroke-dasharray":n.dashStyle(zt.spikedash,kt)}).classed("spikeline",!0).classed("crisp",!0),lt.insert("line",":first-child").attr({x1:Pt,x2:Pt,y1:ft,y2:pt,"stroke-width":kt+2,stroke:Ct}).classed("spikeline",!0).classed("crisp",!0)}St.indexOf("marker")!==-1&&lt.insert("circle",":first-child").attr({cx:Pt,cy:At-(zt.side!=="top"?kt:-kt),r:kt,fill:Ft}).classed("spikeline",!0)}}}function ot(H,at,tt){if(!tt||tt.length!==H._hoverdata.length)return!0;for(var lt=tt.length-1;lt>=0;lt--){var dt=tt[lt],mt=H._hoverdata[lt];if(dt.curveNumber!==mt.curveNumber||String(dt.pointNumber)!==String(mt.pointNumber)||String(dt.pointNumbers)!==String(mt.pointNumbers))return!0}return!1}function nt(H,at){return!0}function Z(H,at){return e.plainText(H||"",{len:at,allowedTags:["br","sub","sup","b","i","em","s","u"]})}function Q(H,at){for(var tt=at.charAt(0),lt=[],dt=[],mt=[],gt=0;gt<H.length;gt++){var Mt=H[gt];h.traceIs(Mt.trace,"bar-like")||h.traceIs(Mt.trace,"box-violin")?mt.push(Mt):Mt.trace[tt+"period"]?dt.push(Mt):lt.push(Mt)}return lt.concat(dt).concat(mt)}function W(H,at,tt){var lt=at[H+"a"],dt=at[H+"Val"],mt=at.cd[0];if(lt.type==="category"||lt.type==="multicategory")dt=lt._categoriesMap[dt];else if(lt.type==="date"){var gt=at.trace[H+"periodalignment"];if(gt){var Mt=at.cd[at.index],Lt=Mt[H+"Start"];Lt===void 0&&(Lt=Mt[H]);var zt=Mt[H+"End"];zt===void 0&&(zt=Mt[H]);var xt=zt-Lt;gt==="end"?dt+=xt:gt==="middle"&&(dt+=xt/2)}dt=lt.d2c(dt)}return mt&&mt.t&&mt.t.posLetter===lt._id&&(tt.boxmode==="group"||tt.violinmode==="group")&&(dt+=mt.t.dPos),dt}function J(H){return H.offsetTop+H.clientTop}function it(H){return H.offsetLeft+H.clientLeft}function K(H,at){var tt=H._fullLayout,lt=at.getBoundingClientRect(),dt=lt.left,mt=lt.top,gt=dt+lt.width,Mt=mt+lt.height,Lt=L.apply3DTransform(tt._invTransform)(dt,mt),zt=L.apply3DTransform(tt._invTransform)(gt,Mt),xt=Lt[0],Ct=Lt[1],wt=zt[0],Rt=zt[1];return{x:xt,y:Ct,width:wt-xt,height:Rt-Ct,top:Math.min(Ct,Rt),left:Math.min(xt,wt),right:Math.max(xt,wt),bottom:Math.max(Ct,Rt)}}},16132:function(j,V,t){var b=t(3400),P=t(76308),o=t(10624).isUnifiedHover;j.exports=function(A,v,p,r){r=r||{};var e=v.legend;function s(n){r.font[n]||(r.font[n]=e?v.legend.font[n]:v.font[n])}v&&o(v.hovermode)&&(r.font||(r.font={}),s("size"),s("family"),s("color"),s("weight"),s("style"),s("variant"),e?(r.bgcolor||(r.bgcolor=P.combine(v.legend.bgcolor,v.paper_bgcolor)),r.bordercolor||(r.bordercolor=v.legend.bordercolor)):r.bgcolor||(r.bgcolor=v.paper_bgcolor)),p("hoverlabel.bgcolor",r.bgcolor),p("hoverlabel.bordercolor",r.bordercolor),p("hoverlabel.namelength",r.namelength),b.coerceFont(p,"hoverlabel.font",r.font),p("hoverlabel.align",r.align)}},41008:function(j,V,t){var b=t(3400),P=t(65460);j.exports=function(L,A){function v(p,r){return A[p]!==void 0?A[p]:b.coerce(L,A,P,p,r)}return v("clickmode"),v("hoversubplots"),v("hovermode")}},93024:function(j,V,t){var b=t(33428),P=t(3400),o=t(86476),L=t(10624),A=t(65460),v=t(83292);j.exports={moduleType:"component",name:"fx",constants:t(92456),schema:{layout:A},attributes:t(55756),layoutAttributes:A,supplyLayoutGlobalDefaults:t(81976),supplyDefaults:t(95448),supplyLayoutDefaults:t(88336),calc:t(55056),getDistanceFunction:L.getDistanceFunction,getClosest:L.getClosest,inbox:L.inbox,quadrature:L.quadrature,appendArrayPointValue:L.appendArrayPointValue,castHoverOption:r,castHoverinfo:e,hover:v.hover,unhover:o.unhover,loneHover:v.loneHover,loneUnhover:p,click:t(62376)};function p(s){var n=P.isD3Selection(s)?s:b.select(s);n.selectAll("g.hovertext").remove(),n.selectAll(".spikeline").remove()}function r(s,n,l){return P.castOption(s,n,"hoverlabel."+l)}function e(s,n,l){function f(u){return P.coerceHoverinfo({hoverinfo:u},{_module:s._module},n)}return P.castOption(s,l,"hoverinfo",f)}},65460:function(j,V,t){var b=t(92456),P=t(25376),o=P({editType:"none"});o.family.dflt=b.HOVERFONT,o.size.dflt=b.HOVERFONTSIZE,j.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoversubplots:{valType:"enumerated",values:["single","overlaying","axis"],dflt:"overlaying",editType:"none"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:o,grouptitlefont:P({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},88336:function(j,V,t){var b=t(3400),P=t(65460),o=t(41008),L=t(16132);j.exports=function(v,p){function r(u,g){return b.coerce(v,p,P,u,g)}var e=o(v,p);e&&(r("hoverdistance"),r("spikedistance"));var s=r("dragmode");s==="select"&&r("selectdirection");var n=p._has("mapbox"),l=p._has("geo"),f=p._basePlotModules.length;p.dragmode==="zoom"&&((n||l)&&f===1||n&&l&&f===2)&&(p.dragmode="pan"),L(v,p,r),b.coerceFont(r,"hoverlabel.grouptitlefont",p.hoverlabel.font)}},81976:function(j,V,t){var b=t(3400),P=t(16132),o=t(65460);j.exports=function(A,v){function p(r,e){return b.coerce(A,v,o,r,e)}P(A,v,p)}},12704:function(j,V,t){var b=t(3400),P=t(53756).counter,o=t(86968).u,L=t(33816).idRegex,A=t(31780),v={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[P("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[L.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[L.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function p(l,f,u){var g=f[u+"axes"],h=Object.keys((l._splomAxes||{})[u]||{});if(Array.isArray(g))return g;if(h.length)return h}function r(l,f){var u=l.grid||{},g=p(f,u,"x"),h=p(f,u,"y");if(!l.grid&&!g&&!h)return;var T=Array.isArray(u.subplots)&&Array.isArray(u.subplots[0]),c=Array.isArray(g),i=Array.isArray(h),d=c&&g!==u.xaxes&&i&&h!==u.yaxes,x,w;T?(x=u.subplots.length,w=u.subplots[0].length):(i&&(x=h.length),c&&(w=g.length));var C=A.newContainer(f,"grid");function y(B,F){return b.coerce(u,C,v,B,F)}var S=y("rows",x),M=y("columns",w);if(!(S*M>1)){delete f.grid;return}if(!T&&!c&&!i){var a=y("pattern")==="independent";a&&(T=!0)}C._hasSubplotGrid=T;var E=y("roworder"),m=E==="top to bottom",k=T?.2:.1,I=T?.3:.1,O,z;d&&f._splomGridDflt&&(O=f._splomGridDflt.xside,z=f._splomGridDflt.yside),C._domains={x:e("x",y,k,O,M),y:e("y",y,I,z,S,m)}}function e(l,f,u,g,h,T){var c=f(l+"gap",u),i=f("domain."+l);f(l+"side",g);for(var d=new Array(h),x=i[0],w=(i[1]-x)/(h-c),C=w*(1-c),y=0;y<h;y++){var S=x+w*y;d[T?h-1-y:y]=[S,S+C]}return d}function s(l,f){var u=f.grid;if(!(!u||!u._domains)){var g=l.grid||{},h=f._subplots,T=u._hasSubplotGrid,c=u.rows,i=u.columns,d=u.pattern==="independent",x,w,C,y,S,M,a,E=u._axisMap={};if(T){var m=g.subplots||[];M=u.subplots=new Array(c);var k=1;for(x=0;x<c;x++){var I=M[x]=new Array(i),O=m[x]||[];for(w=0;w<i;w++)if(d?(S=k===1?"xy":"x"+k+"y"+k,k++):S=O[w],I[w]="",h.cartesian.indexOf(S)!==-1){if(a=S.indexOf("y"),C=S.slice(0,a),y=S.slice(a),E[C]!==void 0&&E[C]!==w||E[y]!==void 0&&E[y]!==x)continue;I[w]=S,E[C]=w,E[y]=x}}}else{var z=p(f,g,"x"),B=p(f,g,"y");u.xaxes=n(z,h.xaxis,i,E,"x"),u.yaxes=n(B,h.yaxis,c,E,"y")}var F=u._anchors={},_=u.roworder==="top to bottom";for(var N in E){var G=N.charAt(0),X=u[G+"side"],$,et,ot;if(X.length<8)F[N]="free";else if(G==="x"){if(X.charAt(0)==="t"===_?($=0,et=1,ot=c):($=c-1,et=-1,ot=-1),T){var nt=E[N];for(x=$;x!==ot;x+=et)if(S=M[x][nt],!!S&&(a=S.indexOf("y"),S.slice(0,a)===N)){F[N]=S.slice(a);break}}else for(x=$;x!==ot;x+=et)if(y=u.yaxes[x],h.cartesian.indexOf(N+y)!==-1){F[N]=y;break}}else if(X.charAt(0)==="l"?($=0,et=1,ot=i):($=i-1,et=-1,ot=-1),T){var Z=E[N];for(x=$;x!==ot;x+=et)if(S=M[Z][x],!!S&&(a=S.indexOf("y"),S.slice(a)===N)){F[N]=S.slice(0,a);break}}else for(x=$;x!==ot;x+=et)if(C=u.xaxes[x],h.cartesian.indexOf(C+N)!==-1){F[N]=C;break}}}}function n(l,f,u,g,h){var T=new Array(u),c;function i(d,x){f.indexOf(x)!==-1&&g[x]===void 0?(T[d]=x,g[x]=d):T[d]=""}if(Array.isArray(l))for(c=0;c<u;c++)i(c,l[c]);else for(i(0,h),c=1;c<u;c++)i(c,h+(c+1));return T}j.exports={moduleType:"component",name:"grid",schema:{layout:{grid:v}},layoutAttributes:v,sizeDefaults:r,contentDefaults:s}},65760:function(j,V,t){var b=t(33816),P=t(31780).templatedArray;t(36208),j.exports=P("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",b.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",b.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},63556:function(j,V,t){var b=t(38248),P=t(36896);j.exports=function(L,A,v,p){A=A||{};var r=v==="log"&&A.type==="linear",e=v==="linear"&&A.type==="log";if(r||e){for(var s=L._fullLayout.images,n=A._id.charAt(0),l,f,u=0;u<s.length;u++)if(l=s[u],f="images["+u+"].",l[n+"ref"]===A._id){var g=l[n],h=l["size"+n],T=null,c=null;if(r){T=P(g,A.range);var i=h/Math.pow(10,T)/2;c=2*Math.log(i+Math.sqrt(1+i*i))/Math.LN10}else T=Math.pow(10,g),c=T*(Math.pow(10,h/2)-Math.pow(10,-h/2));b(T)?b(c)||(c=null):(T=null,c=null),p(f+n,T),p(f+"size"+n,c)}}}},25024:function(j,V,t){var b=t(3400),P=t(54460),o=t(51272),L=t(65760),A="images";j.exports=function(r,e){var s={name:A,handleItemDefaults:v};o(r,e,s)};function v(p,r,e){function s(i,d){return b.coerce(p,r,L,i,d)}var n=s("source"),l=s("visible",!!n);if(!l)return r;s("layer"),s("xanchor"),s("yanchor"),s("sizex"),s("sizey"),s("sizing"),s("opacity");for(var f={_fullLayout:e},u=["x","y"],g=0;g<2;g++){var h=u[g],T=P.coerceRef(p,r,f,h,"paper",void 0);if(T!=="paper"){var c=P.getFromId(f,T);c._imgIndices.push(r._index)}P.coercePosition(r,f,s,T,h,0)}return r}},60963:function(j,V,t){var b=t(33428),P=t(43616),o=t(54460),L=t(79811),A=t(9616);j.exports=function(p){var r=p._fullLayout,e=[],s={},n=[],l,f;for(f=0;f<r.images.length;f++){var u=r.images[f];if(u.visible)if(u.layer==="below"&&u.xref!=="paper"&&u.yref!=="paper"){l=L.ref2id(u.xref)+L.ref2id(u.yref);var g=r._plots[l];if(!g){n.push(u);continue}g.mainplot&&(l=g.mainplot.id),s[l]||(s[l]=[]),s[l].push(u)}else u.layer==="above"?e.push(u):n.push(u)}var h={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function T(y){var S=b.select(this);if(this._imgSrc!==y.source)if(S.attr("xmlns",A.svg),y.source&&y.source.slice(0,5)==="data:")S.attr("xlink:href",y.source),this._imgSrc=y.source;else{var M=new Promise(function(a){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=m,E.onload=function(){var k=document.createElement("canvas");k.width=this.width,k.height=this.height;var I=k.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var O=k.toDataURL("image/png");S.attr("xlink:href",O),a()},S.on("error",m),E.src=y.source,this._imgSrc=y.source;function m(){S.remove(),a()}}.bind(this));p._promises.push(M)}}function c(y){var S=b.select(this),M=o.getFromId(p,y.xref),a=o.getFromId(p,y.yref),E=o.getRefType(y.xref)==="domain",m=o.getRefType(y.yref)==="domain",k=r._size,I,O;M!==void 0?I=typeof y.xref=="string"&&E?M._length*y.sizex:Math.abs(M.l2p(y.sizex)-M.l2p(0)):I=y.sizex*k.w,a!==void 0?O=typeof y.yref=="string"&&m?a._length*y.sizey:Math.abs(a.l2p(y.sizey)-a.l2p(0)):O=y.sizey*k.h;var z=I*h.x[y.xanchor].offset,B=O*h.y[y.yanchor].offset,F=h.x[y.xanchor].sizing+h.y[y.yanchor].sizing,_,N;switch(M!==void 0?_=typeof y.xref=="string"&&E?M._length*y.x+M._offset:M.r2p(y.x)+M._offset:_=y.x*k.w+k.l,_+=z,a!==void 0?N=typeof y.yref=="string"&&m?a._length*(1-y.y)+a._offset:a.r2p(y.y)+a._offset:N=k.h-y.y*k.h+k.t,N+=B,y.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}S.attr({x:_,y:N,width:I,height:O,preserveAspectRatio:F,opacity:y.opacity});var G=M&&o.getRefType(y.xref)!=="domain"?M._id:"",X=a&&o.getRefType(y.yref)!=="domain"?a._id:"",$=G+X;P.setClipUrl(S,$?"clip"+r._uid+$:null,p)}var i=r._imageLowerLayer.selectAll("image").data(n),d=r._imageUpperLayer.selectAll("image").data(e);i.enter().append("image"),d.enter().append("image"),i.exit().remove(),d.exit().remove(),i.each(function(y){T.bind(this)(y),c.bind(this)(y)}),d.each(function(y){T.bind(this)(y),c.bind(this)(y)});var x=Object.keys(r._plots);for(f=0;f<x.length;f++){l=x[f];var w=r._plots[l];if(w.imagelayer){var C=w.imagelayer.selectAll("image").data(s[l]||[]);C.enter().append("image"),C.exit().remove(),C.each(function(y){T.bind(this)(y),c.bind(this)(y)})}}}},7402:function(j,V,t){j.exports={moduleType:"component",name:"images",layoutAttributes:t(65760),supplyLayoutDefaults:t(25024),includeBasePlot:t(36632)("images"),draw:t(60963),convertCoords:t(63556)}},3800:function(j,V,t){var b=t(25376),P=t(22548);j.exports={_isSubplotObj:!0,visible:{valType:"boolean",dflt:!0,editType:"legend"},bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:P.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:b({editType:"legend"}),grouptitlefont:b({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},indentation:{valType:"number",min:-15,dflt:0,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",editType:"legend"},xref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",editType:"legend"},yref:{valType:"enumerated",dflt:"paper",values:["container","paper"],editType:"layoutstyle"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:b({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left","top center","top right"],editType:"legend"},editType:"legend"},editType:"legend"}},65196:function(j){j.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},77864:function(j,V,t){var b=t(24040),P=t(3400),o=t(31780),L=t(45464),A=t(3800),v=t(64859),p=t(42451);function r(e,s,n,l){var f=s[e]||{},u=o.newContainer(n,e);function g(ot,nt){return P.coerce(f,u,A,ot,nt)}var h=P.coerceFont(g,"font",n.font);g("bgcolor",n.paper_bgcolor),g("bordercolor");var T=g("visible");if(T){for(var c,i=function(ot,nt){var Z=c._input,Q=c;return P.coerce(Z,Q,L,ot,nt)},d=n.font||{},x=P.coerceFont(g,"grouptitlefont",d,{overrideDflt:{size:Math.round(d.size*1.1)}}),w=0,C=!1,y="normal",S=(n.shapes||[]).filter(function(ot){return ot.showlegend}),M=l.concat(S).filter(function(ot){return e===(ot.legend||"legend")}),a=0;a<M.length;a++)if(c=M[a],!!c.visible){var E=c._isShape;(c.showlegend||c._dfltShowLegend&&!(c._module&&c._module.attributes&&c._module.attributes.showlegend&&c._module.attributes.showlegend.dflt===!1))&&(w++,c.showlegend&&(C=!0,(!E&&b.traceIs(c,"pie-like")||c._input.showlegend===!0)&&w++),P.coerceFont(i,"legendgrouptitle.font",x)),(!E&&b.traceIs(c,"bar")&&n.barmode==="stack"||["tonextx","tonexty"].indexOf(c.fill)!==-1)&&(y=p.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),c.legendgroup!==void 0&&c.legendgroup!==""&&(y=p.isReversed({traceorder:y})?"reversed+grouped":"grouped")}var m=P.coerce(s,n,v,"showlegend",C&&w>(e==="legend"?1:0));if(m===!1&&(n[e]=void 0),!(m===!1&&!f.uirevision)&&(g("uirevision",n.uirevision),m!==!1)){g("borderwidth");var k=g("orientation"),I=g("yref"),O=g("xref"),z=k==="h",B=I==="paper",F=O==="paper",_,N,G,X="left";z?(_=0,b.getComponentMethod("rangeslider","isVisible")(s.xaxis)?B?(N=1.1,G="bottom"):(N=1,G="top"):B?(N=-.1,G="top"):(N=0,G="bottom")):(N=1,G="auto",F?_=1.02:(_=1,X="right")),P.coerce(f,u,{x:{valType:"number",editType:"legend",min:F?-2:0,max:F?3:1,dflt:_}},"x"),P.coerce(f,u,{y:{valType:"number",editType:"legend",min:B?-2:0,max:B?3:1,dflt:N}},"y"),g("traceorder",y),p.isGrouped(n[e])&&g("tracegroupgap"),g("entrywidth"),g("entrywidthmode"),g("indentation"),g("itemsizing"),g("itemwidth"),g("itemclick"),g("itemdoubleclick"),g("groupclick"),g("xanchor",X),g("yanchor",G),g("valign"),P.noneOrAll(f,u,["x","y"]);var $=g("title.text");if($){g("title.side",z?"left":"top");var et=P.extendFlat({},h,{size:P.bigFont(h.size)});P.coerceFont(g,"title.font",et)}}}}j.exports=function(s,n,l){var f,u=l.slice(),g=n.shapes;if(g)for(f=0;f<g.length;f++){var h=g[f];if(h.showlegend){var T={_input:h._input,visible:h.visible,showlegend:h.showlegend,legend:h.legend};u.push(T)}}var c=["legend"];for(f=0;f<u.length;f++)P.pushUnique(c,u[f].legend);for(n._legends=[],f=0;f<c.length;f++){var i=c[f];r(i,s,n,u),n[i]&&n[i].visible&&(n[i]._id=i),n._legends.push(i)}}},31140:function(j,V,t){var b=t(33428),P=t(3400),o=t(7316),L=t(24040),A=t(95924),v=t(86476),p=t(43616),r=t(76308),e=t(72736),s=t(33048),n=t(65196),l=t(84284),f=l.LINE_SPACING,u=l.FROM_TL,g=l.FROM_BR,h=t(35456),T=t(2012),c=t(42451),i=1,d=/^legend[0-9]*$/;j.exports=function(N,G){if(G)w(N,G);else{var X=N._fullLayout,$=X._legends,et=X._infolayer.selectAll('[class^="legend"]');et.each(function(){var Q=b.select(this),W=Q.attr("class"),J=W.split(" ")[0];J.match(d)&&$.indexOf(J)===-1&&Q.remove()});for(var ot=0;ot<$.length;ot++){var nt=$[ot],Z=N._fullLayout[nt];w(N,Z)}}};function x(_,N,G){if(!(N.title.side!=="top center"&&N.title.side!=="top right")){var X=N.title.font,$=X.size*f,et=0,ot=_.node(),nt=p.bBox(ot).width;N.title.side==="top center"?et=.5*(N._width-2*G-2*n.titlePad-nt):N.title.side==="top right"&&(et=N._width-2*G-2*n.titlePad-nt),e.positionText(_,G+n.titlePad+et,G+$)}}function w(_,N){var G=N||{},X=_._fullLayout,$=F(G),et,ot,nt=G._inHover;if(nt?(ot=G.layer,et="hover"):(ot=X._infolayer,et=$),!!ot){et+=X._uid,_._legendMouseDownTime||(_._legendMouseDownTime=0);var Z;if(nt){if(!G.entries)return;Z=h(G.entries,G)}else{for(var Q=(_.calcdata||[]).slice(),W=X.shapes,J=0;J<W.length;J++){var it=W[J];if(it.showlegend){var K={_isShape:!0,_fullInput:it,index:it._index,name:it.name||it.label.text||"shape "+it._index,legend:it.legend,legendgroup:it.legendgroup,legendgrouptitle:it.legendgrouptitle,legendrank:it.legendrank,legendwidth:it.legendwidth,showlegend:it.showlegend,visible:it.visible,opacity:it.opacity,mode:it.type==="line"?"lines":"markers",line:it.line,marker:{line:it.line,color:it.fillcolor,size:12,symbol:it.type==="rect"?"square":it.type==="circle"?"circle":"hexagon2"}};Q.push([{trace:K}])}}Z=X.showlegend&&h(Q,G,X._legends.length>1)}var H=X.hiddenlabels||[];if(!nt&&(!X.showlegend||!Z.length))return ot.selectAll("."+$).remove(),X._topdefs.select("#"+et).remove(),o.autoMargin(_,$);var at=P.ensureSingle(ot,"g",$,function(xt){nt||xt.attr("pointer-events","all")}),tt=P.ensureSingleById(X._topdefs,"clipPath",et,function(xt){xt.append("rect")}),lt=P.ensureSingle(at,"rect","bg",function(xt){xt.attr("shape-rendering","crispEdges")});lt.call(r.stroke,G.bordercolor).call(r.fill,G.bgcolor).style("stroke-width",G.borderwidth+"px");var dt=P.ensureSingle(at,"g","scrollbox"),mt=G.title;G._titleWidth=0,G._titleHeight=0;var gt;mt.text?(gt=P.ensureSingle(dt,"text",$+"titletext"),gt.attr("text-anchor","start").call(p.font,mt.font).text(mt.text),E(gt,dt,_,G,i)):dt.selectAll("."+$+"titletext").remove();var Mt=P.ensureSingle(at,"rect","scrollbar",function(xt){xt.attr(n.scrollBarEnterAttrs).call(r.fill,n.scrollBarColor)}),Lt=dt.selectAll("g.groups").data(Z);Lt.enter().append("g").attr("class","groups"),Lt.exit().remove();var zt=Lt.selectAll("g.traces").data(P.identity);zt.enter().append("g").attr("class","traces"),zt.exit().remove(),zt.style("opacity",function(xt){var Ct=xt[0].trace;return L.traceIs(Ct,"pie-like")?H.indexOf(xt[0].label)!==-1?.5:1:Ct.visible==="legendonly"?.5:1}).each(function(){b.select(this).call(S,_,G)}).call(T,_,G).each(function(){nt||b.select(this).call(a,_,$)}),P.syncOrAsync([o.previousPromises,function(){return I(_,Lt,zt,G)},function(){var xt=X._size,Ct=G.borderwidth,wt=G.xref==="paper",Rt=G.yref==="paper";if(mt.text&&x(gt,G,Ct),!nt){var Tt,Bt;wt?Tt=xt.l+xt.w*G.x-u[z(G)]*G._width:Tt=X.width*G.x-u[z(G)]*G._width,Rt?Bt=xt.t+xt.h*(1-G.y)-u[B(G)]*G._effHeight:Bt=X.height*(1-G.y)-u[B(G)]*G._effHeight;var Gt=O(_,$,Tt,Bt);if(Gt)return;if(X.margin.autoexpand){var te=Tt,Wt=Bt;Tt=wt?P.constrain(Tt,0,X.width-G._width):te,Bt=Rt?P.constrain(Bt,0,X.height-G._effHeight):Wt,Tt!==te&&P.log("Constrain "+$+".x to make legend fit inside graph"),Bt!==Wt&&P.log("Constrain "+$+".y to make legend fit inside graph")}p.setTranslate(at,Tt,Bt)}if(Mt.on(".drag",null),at.on("wheel",null),nt||G._height<=G._maxHeight||_._context.staticPlot){var jt=G._effHeight;nt&&(jt=G._height),lt.attr({width:G._width-Ct,height:jt-Ct,x:Ct/2,y:Ct/2}),p.setTranslate(dt,0,0),tt.select("rect").attr({width:G._width-2*Ct,height:jt-2*Ct,x:Ct,y:Ct}),p.setClipUrl(dt,et,_),p.setRect(Mt,0,0,0,0),delete G._scrollY}else{var ie=Math.max(n.scrollBarMinHeight,G._effHeight*G._effHeight/G._height),ue=G._effHeight-ie-2*n.scrollBarMargin,fe=G._height-G._effHeight,pe=ue/fe,Te=Math.min(G._scrollY||0,fe);lt.attr({width:G._width-2*Ct+n.scrollBarWidth+n.scrollBarMargin,height:G._effHeight-Ct,x:Ct/2,y:Ct/2}),tt.select("rect").attr({width:G._width-2*Ct+n.scrollBarWidth+n.scrollBarMargin,height:G._effHeight-2*Ct,x:Ct,y:Ct+Te}),p.setClipUrl(dt,et,_),Ft(Te,ie,pe),at.on("wheel",function(){Te=P.constrain(G._scrollY+b.event.deltaY/ue*fe,0,fe),Ft(Te,ie,pe),Te!==0&&Te!==fe&&b.event.preventDefault()});var Qt,Pt,Ot,Nt=function(Ut,$t,re){var Be=(re-$t)/pe+Ut;return P.constrain(Be,0,fe)},Ht=function(Ut,$t,re){var Be=($t-re)/pe+Ut;return P.constrain(Be,0,fe)},St=b.behavior.drag().on("dragstart",function(){var Ut=b.event.sourceEvent;Ut.type==="touchstart"?Qt=Ut.changedTouches[0].clientY:Qt=Ut.clientY,Ot=Te}).on("drag",function(){var Ut=b.event.sourceEvent;Ut.buttons===2||Ut.ctrlKey||(Ut.type==="touchmove"?Pt=Ut.changedTouches[0].clientY:Pt=Ut.clientY,Te=Nt(Ot,Qt,Pt),Ft(Te,ie,pe))});Mt.call(St);var kt=b.behavior.drag().on("dragstart",function(){var Ut=b.event.sourceEvent;Ut.type==="touchstart"&&(Qt=Ut.changedTouches[0].clientY,Ot=Te)}).on("drag",function(){var Ut=b.event.sourceEvent;Ut.type==="touchmove"&&(Pt=Ut.changedTouches[0].clientY,Te=Ht(Ot,Qt,Pt),Ft(Te,ie,pe))});dt.call(kt)}function Ft(Ut,$t,re){G._scrollY=_._fullLayout[$]._scrollY=Ut,p.setTranslate(dt,0,-Ut),p.setRect(Mt,G._width,n.scrollBarMargin+Ut*re,n.scrollBarWidth,$t),tt.select("rect").attr("y",Ct+Ut)}if(_._context.edits.legendPosition){var At,ft,pt,Dt;at.classed("cursor-move",!0),v.init({element:at.node(),gd:_,prepFn:function(Ut){if(Ut.target!==Mt.node()){var $t=p.getTranslate(at);pt=$t.x,Dt=$t.y}},moveFn:function(Ut,$t){if(pt!==void 0&&Dt!==void 0){var re=pt+Ut,Be=Dt+$t;p.setTranslate(at,re,Be),At=v.align(re,G._width,xt.l,xt.l+xt.w,G.xanchor),ft=v.align(Be+G._height,-G._height,xt.t+xt.h,xt.t,G.yanchor)}},doneFn:function(){if(At!==void 0&&ft!==void 0){var Ut={};Ut[$+".x"]=At,Ut[$+".y"]=ft,L.call("_guiRelayout",_,Ut)}},clickFn:function(Ut,$t){var re=ot.selectAll("g.traces").filter(function(){var Be=this.getBoundingClientRect();return $t.clientX>=Be.left&&$t.clientX<=Be.right&&$t.clientY>=Be.top&&$t.clientY<=Be.bottom});re.size()>0&&y(_,at,re,Ut,$t)}})}}],_)}}function C(_,N,G){var X=_[0],$=X.width,et=N.entrywidthmode,ot=X.trace.legendwidth||N.entrywidth;return et==="fraction"?N._maxWidth*ot:G+(ot||$)}function y(_,N,G,X,$){var et=G.data()[0][0].trace,ot={event:$,node:G.node(),curveNumber:et.index,expandedIndex:et._expandedIndex,data:_.data,layout:_.layout,frames:_._transitionData._frames,config:_._context,fullData:_._fullData,fullLayout:_._fullLayout};et._group&&(ot.group=et._group),L.traceIs(et,"pie-like")&&(ot.label=G.datum()[0].label);var nt=A.triggerHandler(_,"plotly_legendclick",ot);if(X===1){if(nt===!1)return;N._clickTimeout=setTimeout(function(){_._fullLayout&&s(G,_,X)},_._context.doubleClickDelay)}else if(X===2){N._clickTimeout&&clearTimeout(N._clickTimeout),_._legendMouseDownTime=0;var Z=A.triggerHandler(_,"plotly_legenddoubleclick",ot);Z!==!1&&nt!==!1&&s(G,_,X)}}function S(_,N,G){var X=F(G),$=_.data()[0][0],et=$.trace,ot=L.traceIs(et,"pie-like"),nt=!G._inHover&&N._context.edits.legendText&&!ot,Z=G._maxNameLength,Q,W;$.groupTitle?(Q=$.groupTitle.text,W=$.groupTitle.font):(W=G.font,G.entries?Q=$.text:(Q=ot?$.label:et.name,et._meta&&(Q=P.templateString(Q,et._meta))));var J=P.ensureSingle(_,"text",X+"text");J.attr("text-anchor","start").call(p.font,W).text(nt?M(Q,Z):Q);var it=G.indentation+G.itemwidth+n.itemGap*2;e.positionText(J,it,0),nt?J.call(e.makeEditable,{gd:N,text:Q}).call(E,_,N,G).on("edit",function(K){this.text(M(K,Z)).call(E,_,N,G);var H=$.trace._fullInput||{},at={};if(L.hasTransform(H,"groupby")){var tt=L.getTransformIndices(H,"groupby"),lt=tt[tt.length-1],dt=P.keyedContainer(H,"transforms["+lt+"].styles","target","value.name");dt.set($.trace._group,K),at=dt.constructUpdate()}else at.name=K;return H._isShape?L.call("_guiRelayout",N,"shapes["+et.index+"].name",at.name):L.call("_guiRestyle",N,at,et.index)}):E(J,_,N,G)}function M(_,N){var G=Math.max(4,N);if(_&&_.trim().length>=G/2)return _;_=_||"";for(var X=G-_.length;X>0;X--)_+=" ";return _}function a(_,N,G){var X=N._context.doubleClickDelay,$,et=1,ot=P.ensureSingle(_,"rect",G+"toggle",function(nt){N._context.staticPlot||nt.style("cursor","pointer").attr("pointer-events","all"),nt.call(r.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(ot.on("mousedown",function(){$=new Date().getTime(),$-N._legendMouseDownTime<X?et+=1:(et=1,N._legendMouseDownTime=$)}),ot.on("mouseup",function(){if(!(N._dragged||N._editing)){var nt=N._fullLayout[G];new Date().getTime()-N._legendMouseDownTime>X&&(et=Math.max(et-1,1)),y(N,nt,_,et,b.event)}}))}function E(_,N,G,X,$){X._inHover&&_.attr("data-notex",!0),e.convertToTspans(_,G,function(){m(N,G,X,$)})}function m(_,N,G,X){var $=_.data()[0][0];if(!G._inHover&&$&&!$.trace.showlegend){_.remove();return}var et=_.select("g[class*=math-group]"),ot=et.node(),nt=F(G);G||(G=N._fullLayout[nt]);var Z=G.borderwidth,Q;X===i?Q=G.title.font:$.groupTitle?Q=$.groupTitle.font:Q=G.font;var W=Q.size*f,J,it;if(ot){var K=p.bBox(ot);J=K.height,it=K.width,X===i?p.setTranslate(et,Z,Z+J*.75):p.setTranslate(et,0,J*.25)}else{var H="."+nt+(X===i?"title":"")+"text",at=_.select(H),tt=e.lineCount(at),lt=at.node();if(J=W*tt,it=lt?p.bBox(lt).width:0,X===i)G.title.side==="left"&&(it+=n.itemGap*2),e.positionText(at,Z+n.titlePad,Z+W);else{var dt=n.itemGap*2+G.indentation+G.itemwidth;$.groupTitle&&(dt=n.itemGap,it-=G.indentation+G.itemwidth),e.positionText(at,dt,-W*((tt-1)/2-.3))}}X===i?(G._titleWidth=it,G._titleHeight=J):($.lineHeight=W,$.height=Math.max(J,16)+3,$.width=it)}function k(_){var N=0,G=0,X=_.title.side;return X&&(X.indexOf("left")!==-1&&(N=_._titleWidth),X.indexOf("top")!==-1&&(G=_._titleHeight)),[N,G]}function I(_,N,G,X){var $=_._fullLayout,et=F(X);X||(X=$[et]);var ot=$._size,nt=c.isVertical(X),Z=c.isGrouped(X),Q=X.entrywidthmode==="fraction",W=X.borderwidth,J=2*W,it=n.itemGap,K=X.indentation+X.itemwidth+it*2,H=2*(W+it),at=B(X),tt=X.y<0||X.y===0&&at==="top",lt=X.y>1||X.y===1&&at==="bottom",dt=X.tracegroupgap,mt={};X._maxHeight=Math.max(tt||lt?$.height/2:ot.h,30);var gt=0;X._width=0,X._height=0;var Mt=k(X);if(nt)G.each(function(Ot){var Nt=Ot[0].height;p.setTranslate(this,W+Mt[0],W+Mt[1]+X._height+Nt/2+it),X._height+=Nt,X._width=Math.max(X._width,Ot[0].width)}),gt=K+X._width,X._width+=it+K+J,X._height+=H,Z&&(N.each(function(Ot,Nt){p.setTranslate(this,0,Nt*X.tracegroupgap)}),X._height+=(X._lgroupsLength-1)*X.tracegroupgap);else{var Lt=z(X),zt=X.x<0||X.x===0&&Lt==="right",xt=X.x>1||X.x===1&&Lt==="left",Ct=lt||tt,wt=$.width/2;X._maxWidth=Math.max(zt?Ct&&Lt==="left"?ot.l+ot.w:wt:xt?Ct&&Lt==="right"?ot.r+ot.w:wt:ot.w,2*K);var Rt=0,Tt=0;G.each(function(Ot){var Nt=C(Ot,X,K);Rt=Math.max(Rt,Nt),Tt+=Nt}),gt=null;var Bt=0;if(Z){var Gt=0,te=0,Wt=0;N.each(function(){var Ot=0,Nt=0;b.select(this).selectAll("g.traces").each(function(St){var kt=C(St,X,K),Ft=St[0].height;p.setTranslate(this,Mt[0],Mt[1]+W+it+Ft/2+Nt),Nt+=Ft,Ot=Math.max(Ot,kt),mt[St[0].trace.legendgroup]=Ot});var Ht=Ot+it;te>0&&Ht+W+te>X._maxWidth?(Bt=Math.max(Bt,te),te=0,Wt+=Gt+dt,Gt=Nt):Gt=Math.max(Gt,Nt),p.setTranslate(this,te,Wt),te+=Ht}),X._width=Math.max(Bt,te)+W,X._height=Wt+Gt+H}else{var jt=G.size(),ie=Tt+J+(jt-1)*it<X._maxWidth,ue=0,fe=0,pe=0,Te=0;G.each(function(Ot){var Nt=Ot[0].height,Ht=C(Ot,X,K),St=ie?Ht:Rt;Q||(St+=it),St+W+fe-it>=X._maxWidth&&(Bt=Math.max(Bt,Te),fe=0,pe+=ue,X._height+=ue,ue=0),p.setTranslate(this,Mt[0]+W+fe,Mt[1]+W+pe+Nt/2+it),Te=fe+Ht+it,fe+=St,ue=Math.max(ue,Nt)}),ie?(X._width=fe+J,X._height=ue+H):(X._width=Math.max(Bt,Te)+J,X._height+=ue+H)}}X._width=Math.ceil(Math.max(X._width+Mt[0],X._titleWidth+2*(W+n.titlePad))),X._height=Math.ceil(Math.max(X._height+Mt[1],X._titleHeight+2*(W+n.itemGap))),X._effHeight=Math.min(X._height,X._maxHeight);var Qt=_._context.edits,Pt=Qt.legendText||Qt.legendPosition;G.each(function(Ot){var Nt=b.select(this).select("."+et+"toggle"),Ht=Ot[0].height,St=Ot[0].trace.legendgroup,kt=C(Ot,X,K);Z&&St!==""&&(kt=mt[St]);var Ft=Pt?K:gt||kt;!nt&&!Q&&(Ft+=it/2),p.setRect(Nt,0,-Ht/2,Ft,Ht)})}function O(_,N,G,X){var $=_._fullLayout,et=$[N],ot=z(et),nt=B(et),Z=et.xref==="paper",Q=et.yref==="paper";_._fullLayout._reservedMargin[N]={};var W=et.y<.5?"b":"t",J=et.x<.5?"l":"r",it={r:$.width-G,l:G+et._width,b:$.height-X,t:X+et._effHeight};if(Z&&Q)return o.autoMargin(_,N,{x:et.x,y:et.y,l:et._width*u[ot],r:et._width*g[ot],b:et._effHeight*g[nt],t:et._effHeight*u[nt]});Z?_._fullLayout._reservedMargin[N][W]=it[W]:Q||et.orientation==="v"?_._fullLayout._reservedMargin[N][J]=it[J]:_._fullLayout._reservedMargin[N][W]=it[W]}function z(_){return P.isRightAnchor(_)?"right":P.isCenterAnchor(_)?"center":"left"}function B(_){return P.isBottomAnchor(_)?"bottom":P.isMiddleAnchor(_)?"middle":"top"}function F(_){return _._id||"legend"}},35456:function(j,V,t){var b=t(24040),P=t(42451);j.exports=function(L,A,v){var p=A._inHover,r=P.isGrouped(A),e=P.isReversed(A),s={},n=[],l=!1,f={},u=0,g=0,h,T;function c(_,N,G){if(A.visible!==!1&&!(v&&_!==A._id))if(N===""||!P.isGrouped(A)){var X="~~i"+u;n.push(X),s[X]=[G],u++}else n.indexOf(N)===-1?(n.push(N),l=!0,s[N]=[G]):s[N].push(G)}for(h=0;h<L.length;h++){var i=L[h],d=i[0],x=d.trace,w=x.legend,C=x.legendgroup;if(!(!p&&(!x.visible||!x.showlegend)))if(b.traceIs(x,"pie-like"))for(f[C]||(f[C]={}),T=0;T<i.length;T++){var y=i[T].label;f[C][y]||(c(w,C,{label:y,color:i[T].color,i:i[T].i,trace:x,pts:i[T].pts}),f[C][y]=!0,g=Math.max(g,(y||"").length))}else c(w,C,d),g=Math.max(g,(x.name||"").length)}if(!n.length)return[];var S=!l||!r,M=[];for(h=0;h<n.length;h++){var a=s[n[h]];S?M.push(a[0]):M.push(a)}for(S&&(M=[M]),h=0;h<M.length;h++){var E=1/0;for(T=0;T<M[h].length;T++){var m=M[h][T].trace.legendrank;E>m&&(E=m)}M[h][0]._groupMinRank=E,M[h][0]._preGroupSort=h}var k=function(_,N){return _[0]._groupMinRank-N[0]._groupMinRank||_[0]._preGroupSort-N[0]._preGroupSort},I=function(_,N){return _.trace.legendrank-N.trace.legendrank||_._preSort-N._preSort};for(M.forEach(function(_,N){_[0]._preGroupSort=N}),M.sort(k),h=0;h<M.length;h++){M[h].forEach(function(_,N){_._preSort=N}),M[h].sort(I);var O=M[h][0].trace,z=null;for(T=0;T<M[h].length;T++){var B=M[h][T].trace.legendgrouptitle;if(B&&B.text){z=B,p&&(B.font=A._groupTitleFont);break}}if(e&&M[h].reverse(),z){var F=!1;for(T=0;T<M[h].length;T++)if(b.traceIs(M[h][T].trace,"pie-like")){F=!0;break}M[h].unshift({i:-1,groupTitle:z,noClick:F,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:A.groupclick==="toggleitem"?!0:O.visible}})}for(T=0;T<M[h].length;T++)M[h][T]=[M[h][T]]}return A._lgroupsLength=M.length,A._maxNameLength=g,M}},33048:function(j,V,t){var b=t(24040),P=t(3400),o=P.pushUnique,L=!0;j.exports=function(v,p,r){var e=p._fullLayout;if(p._dragged||p._editing)return;var s=e.legend.itemclick,n=e.legend.itemdoubleclick,l=e.legend.groupclick;r===1&&s==="toggle"&&n==="toggleothers"&&L&&p.data&&p._context.showTips&&P.notifier(P._(p,"Double-click on legend to isolate one trace"),"long"),L=!1;var f;if(r===1?f=s:r===2&&(f=n),!f)return;var u=l==="togglegroup",g=e.hiddenlabels?e.hiddenlabels.slice():[],h=v.data()[0][0];if(h.groupTitle&&h.noClick)return;var T=p._fullData,c=(e.shapes||[]).filter(function(wt){return wt.showlegend}),i=T.concat(c),d=h.trace;d._isShape&&(d=d._fullInput);var x=d.legendgroup,w,C,y,S,M,a,E={},m=[],k=[],I=[];function O(wt,Rt){var Tt=m.indexOf(wt),Bt=E.visible;return Bt||(Bt=E.visible=[]),m.indexOf(wt)===-1&&(m.push(wt),Tt=m.length-1),Bt[Tt]=Rt,Tt}var z=(e.shapes||[]).map(function(wt){return wt._input}),B=!1;function F(wt,Rt){z[wt].visible=Rt,B=!0}function _(wt,Rt){if(!(h.groupTitle&&!u)){var Tt=wt._fullInput||wt,Bt=Tt._isShape,Gt=Tt.index;if(Gt===void 0&&(Gt=Tt._index),b.hasTransform(Tt,"groupby")){var te=k[Gt];if(!te){var Wt=b.getTransformIndices(Tt,"groupby"),jt=Wt[Wt.length-1];te=P.keyedContainer(Tt,"transforms["+jt+"].styles","target","value.visible"),k[Gt]=te}var ie=te.get(wt._group);ie===void 0&&(ie=!0),ie!==!1&&te.set(wt._group,Rt),I[Gt]=O(Gt,Tt.visible!==!1)}else{var ue=Tt.visible===!1?!1:Rt;Bt?F(Gt,ue):O(Gt,ue)}}}var N=d.legend,G=d._fullInput,X=G&&G._isShape;if(!X&&b.traceIs(d,"pie-like")){var $=h.label,et=g.indexOf($);if(f==="toggle")et===-1?g.push($):g.splice(et,1);else if(f==="toggleothers"){var ot=et!==-1,nt=[];for(w=0;w<p.calcdata.length;w++){var Z=p.calcdata[w];for(C=0;C<Z.length;C++){var Q=Z[C],W=Q.label;N===Z[0].trace.legend&&$!==W&&(g.indexOf(W)===-1&&(ot=!0),o(g,W),nt.push(W))}}if(!ot)for(var J=0;J<nt.length;J++){var it=g.indexOf(nt[J]);it!==-1&&g.splice(it,1)}}b.call("_guiRelayout",p,"hiddenlabels",g)}else{var K=x&&x.length,H=[],at;if(K)for(w=0;w<i.length;w++)at=i[w],at.visible&&at.legendgroup===x&&H.push(w);if(f==="toggle"){var tt;switch(d.visible){case!0:tt="legendonly";break;case!1:tt=!1;break;case"legendonly":tt=!0;break}if(K)if(u)for(w=0;w<i.length;w++){var lt=i[w];lt.visible!==!1&&lt.legendgroup===x&&_(lt,tt)}else _(d,tt);else _(d,tt)}else if(f==="toggleothers"){var dt,mt,gt,Mt,Lt,zt=!0;for(w=0;w<i.length;w++)if(Lt=i[w],dt=Lt===d,gt=Lt.showlegend!==!0,!(dt||gt)&&(mt=K&&Lt.legendgroup===x,!mt&&Lt.legend===N&&Lt.visible===!0&&!b.traceIs(Lt,"notLegendIsolatable"))){zt=!1;break}for(w=0;w<i.length;w++)if(Lt=i[w],!(Lt.visible===!1||Lt.legend!==N)&&!b.traceIs(Lt,"notLegendIsolatable"))switch(d.visible){case"legendonly":_(Lt,!0);break;case!0:Mt=zt?!0:"legendonly",dt=Lt===d,gt=Lt.showlegend!==!0&&!Lt.legendgroup,mt=dt||K&&Lt.legendgroup===x,_(Lt,mt||gt?!0:Mt);break}}for(w=0;w<k.length;w++)if(y=k[w],!!y){var xt=y.constructUpdate(),Ct=Object.keys(xt);for(C=0;C<Ct.length;C++)S=Ct[C],a=E[S]=E[S]||[],a[I[w]]=xt[S]}for(M=Object.keys(E),w=0;w<M.length;w++)for(S=M[w],C=0;C<m.length;C++)E[S].hasOwnProperty(C)||(E[S][C]=void 0);B?b.call("_guiUpdate",p,E,{shapes:z},m):b.call("_guiRestyle",p,E,m)}}},42451:function(j,V){V.isGrouped=function(b){return(b.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(b){return b.orientation!=="h"},V.isReversed=function(b){return(b.traceorder||"").indexOf("reversed")!==-1}},2780:function(j,V,t){j.exports={moduleType:"component",name:"legend",layoutAttributes:t(3800),supplyLayoutDefaults:t(77864),draw:t(31140),style:t(2012)}},2012:function(j,V,t){var b=t(33428),P=t(24040),o=t(3400),L=o.strTranslate,A=t(43616),v=t(76308),p=t(94288).extractOpts,r=t(43028),e=t(10528),s=t(69656).castOption,n=t(65196),l=12,f=5,u=2,g=10,h=5;j.exports=function(x,w,C){var y=w._fullLayout;C||(C=y.legend);var S=C.itemsizing==="constant",M=C.itemwidth,a=(M+n.itemGap*2)/2,E=L(a,0),m=function(nt,Z,Q,W){var J;if(nt+1)J=nt;else if(Z&&Z.width>0)J=Z.width;else return 0;return S?W:Math.min(J,Q)};x.each(function(nt){var Z=b.select(this),Q=o.ensureSingle(Z,"g","layers");Q.style("opacity",nt[0].trace.opacity);var W=C.indentation,J=C.valign,it=nt[0].lineHeight,K=nt[0].height;if(J==="middle"&&W===0||!it||!K)Q.attr("transform",null);else{var H={top:1,bottom:-1}[J],at=H*(.5*(it-K+3))||0,tt=C.indentation;Q.attr("transform",L(tt,at))}var lt=Q.selectAll("g.legendfill").data([nt]);lt.enter().append("g").classed("legendfill",!0);var dt=Q.selectAll("g.legendlines").data([nt]);dt.enter().append("g").classed("legendlines",!0);var mt=Q.selectAll("g.legendsymbols").data([nt]);mt.enter().append("g").classed("legendsymbols",!0),mt.selectAll("g.legendpoints").data([nt]).enter().append("g").classed("legendpoints",!0)}).each(ot).each(O).each(B).each(z).each(_).each($).each(X).each(k).each(I).each(N).each(G);function k(nt){var Z=c(nt),Q=Z.showFill,W=Z.showLine,J=Z.showGradientLine,it=Z.showGradientFill,K=Z.anyFill,H=Z.anyLine,at=nt[0],tt=at.trace,lt,dt,mt=p(tt),gt=mt.colorscale,Mt=mt.reversescale,Lt=function(Bt){if(Bt.size())if(Q)A.fillGroupStyle(Bt,w,!0);else{var Gt="legendfill-"+tt.uid;A.gradient(Bt,w,Gt,T(Mt),gt,"fill")}},zt=function(Bt){if(Bt.size()){var Gt="legendline-"+tt.uid;A.lineGroupStyle(Bt),A.gradient(Bt,w,Gt,T(Mt),gt,"stroke")}},xt=r.hasMarkers(tt)||!K?"M5,0":H?"M5,-2":"M5,-3",Ct=b.select(this),wt=Ct.select(".legendfill").selectAll("path").data(Q||it?[nt]:[]);if(wt.enter().append("path").classed("js-fill",!0),wt.exit().remove(),wt.attr("d",xt+"h"+M+"v6h-"+M+"z").call(Lt),W||J){var Rt=m(void 0,tt.line,g,f);dt=o.minExtend(tt,{line:{width:Rt}}),lt=[o.minExtend(at,{trace:dt})]}var Tt=Ct.select(".legendlines").selectAll("path").data(W||J?[lt]:[]);Tt.enter().append("path").classed("js-line",!0),Tt.exit().remove(),Tt.attr("d",xt+(J?"l"+M+",0.0001":"h"+M)).call(W?A.lineGroupStyle:zt)}function I(nt){var Z=c(nt),Q=Z.anyFill,W=Z.anyLine,J=Z.showLine,it=Z.showMarker,K=nt[0],H=K.trace,at=!it&&!W&&!Q&&r.hasText(H),tt,lt;function dt(wt,Rt,Tt,Bt){var Gt=o.nestedProperty(H,wt).get(),te=o.isArrayOrTypedArray(Gt)&&Rt?Rt(Gt):Gt;if(S&&te&&Bt!==void 0&&(te=Bt),Tt){if(te<Tt[0])return Tt[0];if(te>Tt[1])return Tt[1]}return te}function mt(wt){return K._distinct&&K.index&&wt[K.index]?wt[K.index]:wt[0]}if(it||at||J){var gt={},Mt={};if(it){gt.mc=dt("marker.color",mt),gt.mx=dt("marker.symbol",mt),gt.mo=dt("marker.opacity",o.mean,[.2,1]),gt.mlc=dt("marker.line.color",mt),gt.mlw=dt("marker.line.width",o.mean,[0,5],u),Mt.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var Lt=dt("marker.size",o.mean,[2,16],l);gt.ms=Lt,Mt.marker.size=Lt}J&&(Mt.line={width:dt("line.width",mt,[0,10],f)}),at&&(gt.tx="Aa",gt.tp=dt("textposition",mt),gt.ts=10,gt.tc=dt("textfont.color",mt),gt.tf=dt("textfont.family",mt),gt.tw=dt("textfont.weight",mt),gt.ty=dt("textfont.style",mt),gt.tv=dt("textfont.variant",mt),gt.tC=dt("textfont.textcase",mt),gt.tE=dt("textfont.lineposition",mt),gt.tS=dt("textfont.shadow",mt)),tt=[o.minExtend(K,gt)],lt=o.minExtend(H,Mt),lt.selectedpoints=null,lt.texttemplate=null}var zt=b.select(this).select("g.legendpoints"),xt=zt.selectAll("path.scatterpts").data(it?tt:[]);xt.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),xt.exit().remove(),xt.call(A.pointStyle,lt,w),it&&(tt[0].mrc=3);var Ct=zt.selectAll("g.pointtext").data(at?tt:[]);Ct.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),Ct.exit().remove(),Ct.selectAll("text").call(A.textPointStyle,lt,w)}function O(nt){var Z=nt[0].trace,Q=Z.type==="waterfall";if(nt[0]._distinct&&Q){var W=nt[0].trace[nt[0].dir].marker;return nt[0].mc=W.color,nt[0].mlw=W.line.width,nt[0].mlc=W.line.color,F(nt,this,"waterfall")}var J=[];Z.visible&&Q&&(J=nt[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var it=b.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(J);it.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),it.exit().remove(),it.each(function(K){var H=b.select(this),at=Z[K[0]].marker,tt=m(void 0,at.line,h,u);H.attr("d",K[1]).style("stroke-width",tt+"px").call(v.fill,at.color),tt&&H.call(v.stroke,at.line.color)})}function z(nt){F(nt,this)}function B(nt){F(nt,this,"funnel")}function F(nt,Z,Q){var W=nt[0].trace,J=W.marker||{},it=J.line||{},K=J.cornerradius?"M6,3a3,3,0,0,1-3,3H-3a3,3,0,0,1-3-3V-3a3,3,0,0,1,3-3H3a3,3,0,0,1,3,3Z":"M6,6H-6V-6H6Z",H=Q?W.visible&&W.type===Q:P.traceIs(W,"bar"),at=b.select(Z).select("g.legendpoints").selectAll("path.legend"+Q).data(H?[nt]:[]);at.enter().append("path").classed("legend"+Q,!0).attr("d",K).attr("transform",E),at.exit().remove(),at.each(function(tt){var lt=b.select(this),dt=tt[0],mt=m(dt.mlw,J.line,h,u);lt.style("stroke-width",mt+"px");var gt=dt.mcc;if(!C._inHover&&"mc"in dt){var Mt=p(J),Lt=Mt.mid;Lt===void 0&&(Lt=(Mt.max+Mt.min)/2),gt=A.tryColorscale(J,"")(Lt)}var zt=gt||dt.mc||J.color,xt=J.pattern,Ct=xt&&A.getPatternAttr(xt.shape,0,"");if(Ct){var wt=A.getPatternAttr(xt.bgcolor,0,null),Rt=A.getPatternAttr(xt.fgcolor,0,null),Tt=xt.fgopacity,Bt=i(xt.size,8,10),Gt=i(xt.solidity,.5,1),te="legend-"+W.uid;lt.call(A.pattern,"legend",w,te,Ct,Bt,Gt,gt,xt.fillmode,wt,Rt,Tt)}else lt.call(v.fill,zt);mt&&v.stroke(lt,dt.mlc||it.color)})}function _(nt){var Z=nt[0].trace,Q=b.select(this).select("g.legendpoints").selectAll("path.legendbox").data(Z.visible&&P.traceIs(Z,"box-violin")?[nt]:[]);Q.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),Q.exit().remove(),Q.each(function(){var W=b.select(this);if((Z.boxpoints==="all"||Z.points==="all")&&v.opacity(Z.fillcolor)===0&&v.opacity((Z.line||{}).color)===0){var J=o.minExtend(Z,{marker:{size:S?l:o.constrain(Z.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Q.call(A.pointStyle,J,w)}else{var it=m(void 0,Z.line,h,u);W.style("stroke-width",it+"px").call(v.fill,Z.fillcolor),it&&v.stroke(W,Z.line.color)}})}function N(nt){var Z=nt[0].trace,Q=b.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(Z.visible&&Z.type==="candlestick"?[nt,nt]:[]);Q.enter().append("path").classed("legendcandle",!0).attr("d",function(W,J){return J?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),Q.exit().remove(),Q.each(function(W,J){var it=b.select(this),K=Z[J?"increasing":"decreasing"],H=m(void 0,K.line,h,u);it.style("stroke-width",H+"px").call(v.fill,K.fillcolor),H&&v.stroke(it,K.line.color)})}function G(nt){var Z=nt[0].trace,Q=b.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(Z.visible&&Z.type==="ohlc"?[nt,nt]:[]);Q.enter().append("path").classed("legendohlc",!0).attr("d",function(W,J){return J?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),Q.exit().remove(),Q.each(function(W,J){var it=b.select(this),K=Z[J?"increasing":"decreasing"],H=m(void 0,K.line,h,u);it.style("fill","none").call(A.dashLine,K.line.dash,H),H&&v.stroke(it,K.line.color)})}function X(nt){et(nt,this,"pie")}function $(nt){et(nt,this,"funnelarea")}function et(nt,Z,Q){var W=nt[0],J=W.trace,it=Q?J.visible&&J.type===Q:P.traceIs(J,Q),K=b.select(Z).select("g.legendpoints").selectAll("path.legend"+Q).data(it?[nt]:[]);if(K.enter().append("path").classed("legend"+Q,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),K.exit().remove(),K.size()){var H=J.marker||{},at=m(s(H.line.width,W.pts),H.line,h,u),tt="pieLike",lt=o.minExtend(J,{marker:{line:{width:at}}},tt),dt=o.minExtend(W,{trace:lt},tt);e(K,dt,lt,w)}}function ot(nt){var Z=nt[0].trace,Q,W=[];if(Z.visible)switch(Z.type){case"histogram2d":case"heatmap":W=[["M-15,-2V4H15V-2Z"]],Q=!0;break;case"choropleth":case"choroplethmapbox":W=[["M-6,-6V6H6V-6Z"]],Q=!0;break;case"densitymapbox":W=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Q="radial";break;case"cone":W=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Q=!1;break;case"streamtube":W=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Q=!1;break;case"surface":W=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Q=!0;break;case"mesh3d":W=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Q=!1;break;case"volume":W=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Q=!0;break;case"isosurface":W=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Q=!1;break}var J=b.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(W);J.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),J.exit().remove(),J.each(function(it,K){var H=b.select(this),at=p(Z),tt=at.colorscale,lt=at.reversescale,dt=function(Lt){if(Lt.size()){var zt="legendfill-"+Z.uid;A.gradient(Lt,w,zt,T(lt,Q==="radial"),tt,"fill")}},mt;if(tt){if(!Q){var Mt=tt.length;mt=K===0?tt[lt?Mt-1:0][1]:K===1?tt[lt?0:Mt-1][1]:tt[Math.floor((Mt-1)/2)][1]}}else{var gt=Z.vertexcolor||Z.facecolor||Z.color;mt=o.isArrayOrTypedArray(gt)?gt[K]||gt[0]:gt}H.attr("d",it[0]),mt?H.call(v.fill,mt):H.call(dt)})}};function T(d,x){var w=x?"radial":"horizontal";return w+(d?"":"reversed")}function c(d){var x=d[0].trace,w=x.contours,C=r.hasLines(x),y=r.hasMarkers(x),S=x.visible&&x.fill&&x.fill!=="none",M=!1,a=!1;if(w){var E=w.coloring;E==="lines"?M=!0:C=E==="none"||E==="heatmap"||w.showlines,w.type==="constraint"?S=w._operation!=="=":(E==="fill"||E==="heatmap")&&(a=!0)}return{showMarker:y,showLine:C,showFill:S,showGradientLine:M,showGradientFill:a,anyLine:C||M,anyFill:S||a}}function i(d,x,w){return d&&o.isArrayOrTypedArray(d)?x:d>w?w:d}},66540:function(j,V,t){t(76052),j.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},44248:function(j,V,t){var b=t(24040),P=t(7316),o=t(79811),L=t(9224),A=t(4016).eraseActiveShape,v=t(3400),p=v._,r=j.exports={};r.toImage={name:"toImage",title:function(d){var x=d._context.toImageButtonOptions||{},w=x.format||"png";return w==="png"?p(d,"Download plot as a png"):p(d,"Download plot")},icon:L.camera,click:function(d){var x=d._context.toImageButtonOptions,w={format:x.format||"png"};v.notifier(p(d,"Taking snapshot - this may take a few seconds"),"long"),w.format!=="svg"&&v.isIE()&&(v.notifier(p(d,"IE only supports svg.  Changing format to svg."),"long"),w.format="svg"),["filename","width","height","scale"].forEach(function(C){C in x&&(w[C]=x[C])}),b.call("downloadImage",d,w).then(function(C){v.notifier(p(d,"Snapshot succeeded")+" - "+C,"long")}).catch(function(){v.notifier(p(d,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(d){return p(d,"Edit in Chart Studio")},icon:L.disk,click:function(d){P.sendDataToCloud(d)}},r.editInChartStudio={name:"editInChartStudio",title:function(d){return p(d,"Edit in Chart Studio")},icon:L.pencil,click:function(d){P.sendDataToCloud(d)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(d){return p(d,"Zoom")},attr:"dragmode",val:"zoom",icon:L.zoombox,click:e},r.pan2d={name:"pan2d",_cat:"pan",title:function(d){return p(d,"Pan")},attr:"dragmode",val:"pan",icon:L.pan,click:e},r.select2d={name:"select2d",_cat:"select",title:function(d){return p(d,"Box Select")},attr:"dragmode",val:"select",icon:L.selectbox,click:e},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(d){return p(d,"Lasso Select")},attr:"dragmode",val:"lasso",icon:L.lasso,click:e},r.drawclosedpath={name:"drawclosedpath",title:function(d){return p(d,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:L.drawclosedpath,click:e},r.drawopenpath={name:"drawopenpath",title:function(d){return p(d,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:L.drawopenpath,click:e},r.drawline={name:"drawline",title:function(d){return p(d,"Draw line")},attr:"dragmode",val:"drawline",icon:L.drawline,click:e},r.drawrect={name:"drawrect",title:function(d){return p(d,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:L.drawrect,click:e},r.drawcircle={name:"drawcircle",title:function(d){return p(d,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:L.drawcircle,click:e},r.eraseshape={name:"eraseshape",title:function(d){return p(d,"Erase active shape")},icon:L.eraseshape,click:A},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(d){return p(d,"Zoom in")},attr:"zoom",val:"in",icon:L.zoom_plus,click:e},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(d){return p(d,"Zoom out")},attr:"zoom",val:"out",icon:L.zoom_minus,click:e},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(d){return p(d,"Autoscale")},attr:"zoom",val:"auto",icon:L.autoscale,click:e},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(d){return p(d,"Reset axes")},attr:"zoom",val:"reset",icon:L.home,click:e},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(d){return p(d,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:L.tooltip_basic,gravity:"ne",click:e},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(d){return p(d,"Compare data on hover")},attr:"hovermode",val:function(d){return d._fullLayout._isHoriz?"y":"x"},icon:L.tooltip_compare,gravity:"ne",click:e};function e(d,x){var w=x.currentTarget,C=w.getAttribute("data-attr"),y=w.getAttribute("data-val")||!0,S=d._fullLayout,M={},a=o.list(d,null,!0),E=S._cartesianSpikesEnabled,m,k;if(C==="zoom"){var I=y==="in"?.5:2,O=(1+I)/2,z=(1-I)/2,B;for(k=0;k<a.length;k++)if(m=a[k],!m.fixedrange)if(B=m._name,y==="auto")M[B+".autorange"]=!0;else if(y==="reset")m._rangeInitial0===void 0&&m._rangeInitial1===void 0?M[B+".autorange"]=!0:m._rangeInitial0===void 0?(M[B+".autorange"]=m._autorangeInitial,M[B+".range"]=[null,m._rangeInitial1]):m._rangeInitial1===void 0?(M[B+".range"]=[m._rangeInitial0,null],M[B+".autorange"]=m._autorangeInitial):M[B+".range"]=[m._rangeInitial0,m._rangeInitial1],m._showSpikeInitial!==void 0&&(M[B+".showspikes"]=m._showSpikeInitial,E==="on"&&!m._showSpikeInitial&&(E="off"));else{var F=[m.r2l(m.range[0]),m.r2l(m.range[1])],_=[O*F[0]+z*F[1],O*F[1]+z*F[0]];M[B+".range[0]"]=m.l2r(_[0]),M[B+".range[1]"]=m.l2r(_[1])}}else C==="hovermode"&&(y==="x"||y==="y")&&(y=S._isHoriz?"y":"x",w.setAttribute("data-val",y)),M[C]=y;S._cartesianSpikesEnabled=E,b.call("_guiRelayout",d,M)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(d){return p(d,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:L.zoombox,click:s},r.pan3d={name:"pan3d",_cat:"pan",title:function(d){return p(d,"Pan")},attr:"scene.dragmode",val:"pan",icon:L.pan,click:s},r.orbitRotation={name:"orbitRotation",title:function(d){return p(d,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:L["3d_rotate"],click:s},r.tableRotation={name:"tableRotation",title:function(d){return p(d,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:L["z-axis"],click:s};function s(d,x){for(var w=x.currentTarget,C=w.getAttribute("data-attr"),y=w.getAttribute("data-val")||!0,S=d._fullLayout._subplots.gl3d||[],M={},a=C.split("."),E=0;E<S.length;E++)M[S[E]+"."+a[1]]=y;var m=y==="pan"?y:"zoom";M.dragmode=m,b.call("_guiRelayout",d,M)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(d){return p(d,"Reset camera to default")},attr:"resetDefault",icon:L.home,click:n},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(d){return p(d,"Reset camera to last save")},attr:"resetLastSave",icon:L.movie,click:n};function n(d,x){for(var w=x.currentTarget,C=w.getAttribute("data-attr"),y=C==="resetLastSave",S=C==="resetDefault",M=d._fullLayout,a=M._subplots.gl3d||[],E={},m=0;m<a.length;m++){var k=a[m],I=k+".camera",O=k+".aspectratio",z=k+".aspectmode",B=M[k]._scene,F;y?(E[I+".up"]=B.viewInitial.up,E[I+".eye"]=B.viewInitial.eye,E[I+".center"]=B.viewInitial.center,F=!0):S&&(E[I+".up"]=null,E[I+".eye"]=null,E[I+".center"]=null,F=!0),F&&(E[O+".x"]=B.viewInitial.aspectratio.x,E[O+".y"]=B.viewInitial.aspectratio.y,E[O+".z"]=B.viewInitial.aspectratio.z,E[z]=B.viewInitial.aspectmode)}b.call("_guiRelayout",d,E)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(d){return p(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:L.tooltip_basic,gravity:"ne",click:f};function l(d,x){var w=x.currentTarget,C=w._previousVal,y=d._fullLayout,S=y._subplots.gl3d||[],M=["xaxis","yaxis","zaxis"],a={},E={};if(C)E=C,w._previousVal=null;else{for(var m=0;m<S.length;m++){var k=S[m],I=y[k],O=k+".hovermode";a[O]=I.hovermode,E[O]=!1;for(var z=0;z<3;z++){var B=M[z],F=k+"."+B+".showspikes";E[F]=!1,a[F]=I[B].showspikes}}w._previousVal=a}return E}function f(d,x){var w=l(d,x);b.call("_guiRelayout",d,w)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(d){return p(d,"Zoom in")},attr:"zoom",val:"in",icon:L.zoom_plus,click:u},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(d){return p(d,"Zoom out")},attr:"zoom",val:"out",icon:L.zoom_minus,click:u},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(d){return p(d,"Reset")},attr:"reset",val:null,icon:L.autoscale,click:u},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(d){return p(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:L.tooltip_basic,gravity:"ne",click:h};function u(d,x){for(var w=x.currentTarget,C=w.getAttribute("data-attr"),y=w.getAttribute("data-val")||!0,S=d._fullLayout,M=S._subplots.geo||[],a=0;a<M.length;a++){var E=M[a],m=S[E];if(C==="zoom"){var k=m.projection.scale,I=y==="in"?2*k:.5*k;b.call("_guiRelayout",d,E+".projection.scale",I)}}C==="reset"&&i(d,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(d){return p(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:L.tooltip_basic,gravity:"ne",click:h},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(d){return p(d,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:L.tooltip_basic,gravity:"ne",click:h};function g(d){var x=d._fullLayout;return x.hovermode?!1:x._has("cartesian")?x._isHoriz?"y":"x":"closest"}function h(d){var x=g(d);b.call("_guiRelayout",d,"hovermode",x)}r.resetViewSankey={name:"resetSankeyGroup",title:function(d){return p(d,"Reset view")},icon:L.home,click:function(d){for(var x={"node.groups":[],"node.x":[],"node.y":[]},w=0;w<d._fullData.length;w++){var C=d._fullData[w]._viewInitial;x["node.groups"].push(C.node.groups.slice()),x["node.x"].push(C.node.x.slice()),x["node.y"].push(C.node.y.slice())}b.call("restyle",d,x)}},r.toggleHover={name:"toggleHover",title:function(d){return p(d,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:L.tooltip_basic,gravity:"ne",click:function(d,x){var w=l(d,x);w.hovermode=g(d),b.call("_guiRelayout",d,w)}},r.resetViews={name:"resetViews",title:function(d){return p(d,"Reset views")},icon:L.home,click:function(d,x){var w=x.currentTarget;w.setAttribute("data-attr","zoom"),w.setAttribute("data-val","reset"),e(d,x),w.setAttribute("data-attr","resetLastSave"),n(d,x),i(d,"geo"),i(d,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(d){return p(d,"Toggle Spike Lines")},icon:L.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(d){var x=d._fullLayout,w=x._cartesianSpikesEnabled;x._cartesianSpikesEnabled=w==="on"?"off":"on",b.call("_guiRelayout",d,T(d))}};function T(d){for(var x=d._fullLayout,w=x._cartesianSpikesEnabled==="on",C=o.list(d,null,!0),y={},S=0;S<C.length;S++){var M=C[S];y[M._name+".showspikes"]=w?!0:M._showSpikeInitial}return y}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(d){return p(d,"Reset view")},attr:"reset",icon:L.home,click:function(d){i(d,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(d){return p(d,"Zoom in")},attr:"zoom",val:"in",icon:L.zoom_plus,click:c},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(d){return p(d,"Zoom out")},attr:"zoom",val:"out",icon:L.zoom_minus,click:c};function c(d,x){for(var w=x.currentTarget,C=w.getAttribute("data-val"),y=d._fullLayout,S=y._subplots.mapbox||[],M=1.05,a={},E=0;E<S.length;E++){var m=S[E],k=y[m].zoom,I=C==="in"?M*k:k/M;a[m+".zoom"]=I}b.call("_guiRelayout",d,a)}function i(d,x){for(var w=d._fullLayout,C=w._subplots[x]||[],y={},S=0;S<C.length;S++)for(var M=C[S],a=w[M]._subplot,E=a.viewInitial,m=Object.keys(E),k=0;k<m.length;k++){var I=m[k];y[M+"."+I]=E[I]}b.call("_guiRelayout",d,y)}},76052:function(j,V,t){var b=t(44248),P=Object.keys(b),o=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],L=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(o),A=[],v=function(p){if(L.indexOf(p._cat||p.name)===-1){var r=p.name,e=(p._cat||p.name).toLowerCase();A.indexOf(r)===-1&&A.push(r),A.indexOf(e)===-1&&A.push(e)}};P.forEach(function(p){v(b[p])}),A.sort(),j.exports={DRAW_MODES:o,backButtons:L,foreButtons:A}},90824:function(j,V,t){var b=t(3400),P=t(76308),o=t(31780),L=t(66540);j.exports=function(v,p){var r=v.modebar||{},e=o.newContainer(p,"modebar");function s(l,f){return b.coerce(r,e,L,l,f)}s("orientation"),s("bgcolor",P.addOpacity(p.paper_bgcolor,.5));var n=P.contrast(P.rgb(p.modebar.bgcolor));s("color",P.addOpacity(n,.3)),s("activecolor",P.addOpacity(n,.7)),s("uirevision",p.uirevision),s("add"),s("remove")}},45460:function(j,V,t){j.exports={moduleType:"component",name:"modebar",layoutAttributes:t(66540),supplyLayoutDefaults:t(90824),manage:t(18816)}},18816:function(j,V,t){var b=t(79811),P=t(43028),o=t(24040),L=t(10624).isUnifiedHover,A=t(66400),v=t(44248),p=t(76052).DRAW_MODES,r=t(3400).extendDeep;j.exports=function(h){var T=h._fullLayout,c=h._context,i=T._modeBar;if(!c.displayModeBar&&!c.watermark){i&&(i.destroy(),delete T._modeBar);return}if(!Array.isArray(c.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(c.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var d=c.modeBarButtons,x;Array.isArray(d)&&d.length?x=u(d):!c.displayModeBar&&c.watermark?x=[]:x=e(h),i?i.update(h,x):T._modeBar=A(h,x)};function e(g){var h=g._fullLayout,T=g._fullData,c=g._context;function i(K,H){if(typeof H=="string"){if(H.toLowerCase()===K.toLowerCase())return!0}else{var at=H.name,tt=H._cat||H.name;if(at===K||tt===K.toLowerCase())return!0}return!1}var d=h.modebar.add;typeof d=="string"&&(d=[d]);var x=h.modebar.remove;typeof x=="string"&&(x=[x]);var w=c.modeBarButtonsToAdd.concat(d.filter(function(K){for(var H=0;H<c.modeBarButtonsToRemove.length;H++)if(i(K,c.modeBarButtonsToRemove[H]))return!1;return!0})),C=c.modeBarButtonsToRemove.concat(x.filter(function(K){for(var H=0;H<c.modeBarButtonsToAdd.length;H++)if(i(K,c.modeBarButtonsToAdd[H]))return!1;return!0})),y=h._has("cartesian"),S=h._has("gl3d"),M=h._has("geo"),a=h._has("pie"),E=h._has("funnelarea"),m=h._has("gl2d"),k=h._has("ternary"),I=h._has("mapbox"),O=h._has("polar"),z=h._has("smith"),B=h._has("sankey"),F=s(h),_=L(h.hovermode),N=[];function G(K){if(K.length){for(var H=[],at=0;at<K.length;at++){for(var tt=K[at],lt=v[tt],dt=lt.name.toLowerCase(),mt=(lt._cat||lt.name).toLowerCase(),gt=!1,Mt=0;Mt<C.length;Mt++){var Lt=C[Mt].toLowerCase();if(Lt===dt||Lt===mt){gt=!0;break}}gt||H.push(v[tt])}N.push(H)}}var X=["toImage"];c.showEditInChartStudio?X.push("editInChartStudio"):c.showSendToCloud&&X.push("sendDataToCloud"),G(X);var $=[],et=[],ot=[],nt=[];(y||m||a||E||k)+M+S+I+O+z>1?(et=["toggleHover"],ot=["resetViews"]):M?($=["zoomInGeo","zoomOutGeo"],et=["hoverClosestGeo"],ot=["resetGeo"]):S?(et=["hoverClosest3d"],ot=["resetCameraDefault3d","resetCameraLastSave3d"]):I?($=["zoomInMapbox","zoomOutMapbox"],et=["toggleHover"],ot=["resetViewMapbox"]):m?et=["hoverClosestGl2d"]:a?et=["hoverClosestPie"]:B?(et=["hoverClosestCartesian","hoverCompareCartesian"],ot=["resetViewSankey"]):et=["toggleHover"],y&&et.push("toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"),(l(T)||_)&&(et=[]),(y||m)&&!F&&($=["zoomIn2d","zoomOut2d","autoScale2d"],ot[0]!=="resetViews"&&(ot=["resetScale2d"])),S?nt=["zoom3d","pan3d","orbitRotation","tableRotation"]:(y||m)&&!F||k?nt=["zoom2d","pan2d"]:I||M?nt=["pan2d"]:O&&(nt=["zoom2d"]),n(T)&&nt.push("select2d","lasso2d");var Z=[],Q=function(K){Z.indexOf(K)===-1&&et.indexOf(K)!==-1&&Z.push(K)};if(Array.isArray(w)){for(var W=[],J=0;J<w.length;J++){var it=w[J];typeof it=="string"?(it=it.toLowerCase(),p.indexOf(it)!==-1?(h._has("mapbox")||h._has("cartesian"))&&nt.push(it):it==="togglespikelines"?Q("toggleSpikelines"):it==="togglehover"?Q("toggleHover"):it==="hovercompare"?Q("hoverCompareCartesian"):it==="hoverclosest"?(Q("hoverClosestCartesian"),Q("hoverClosestGeo"),Q("hoverClosest3d"),Q("hoverClosestGl2d"),Q("hoverClosestPie")):it==="v1hovermode"&&(Q("hoverClosestCartesian"),Q("hoverCompareCartesian"),Q("hoverClosestGeo"),Q("hoverClosest3d"),Q("hoverClosestGl2d"),Q("hoverClosestPie"))):W.push(it)}w=W}return G(nt),G($.concat(ot)),G(Z),f(N,w)}function s(g){for(var h=b.list({_fullLayout:g},null,!0),T=0;T<h.length;T++)if(!h[T].fixedrange)return!1;return!0}function n(g){for(var h=!1,T=0;T<g.length&&!h;T++){var c=g[T];!c._module||!c._module.selectPoints||(o.traceIs(c,"scatter-like")?(P.hasMarkers(c)||P.hasText(c))&&(h=!0):o.traceIs(c,"box-violin")?(c.boxpoints==="all"||c.points==="all")&&(h=!0):h=!0)}return h}function l(g){for(var h=0;h<g.length;h++)if(!o.traceIs(g[h],"noHover"))return!1;return!0}function f(g,h){if(h.length)if(Array.isArray(h[0]))for(var T=0;T<h.length;T++)g.push(h[T]);else g.push(h);return g}function u(g){for(var h=r([],g),T=0;T<h.length;T++)for(var c=h[T],i=0;i<c.length;i++){var d=c[i];if(typeof d=="string")if(v[d]!==void 0)h[T][i]=v[d];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return h}},66400:function(j,V,t){var b=t(33428),P=t(38248),o=t(3400),L=t(9224),A=t(25788).version,v=new DOMParser;function p(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var r=p.prototype;r.update=function(n,l){this.graphInfo=n;var f=this.graphInfo._context,u=this.graphInfo._fullLayout,g="modebar-"+u._uid;this.element.setAttribute("id",g),this._uid=g,this.element.className="modebar",f.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),u.modebar.orientation==="v"&&(this.element.className+=" vertical",l=l.reverse());var h=u.modebar,T=f.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(g),o.addRelatedStyleRule(g,T+"#"+g+" .modebar-group","background-color: "+h.bgcolor),o.addRelatedStyleRule(g,"#"+g+" .modebar-btn .icon path","fill: "+h.color),o.addRelatedStyleRule(g,"#"+g+" .modebar-btn:hover .icon path","fill: "+h.activecolor),o.addRelatedStyleRule(g,"#"+g+" .modebar-btn.active .icon path","fill: "+h.activecolor);var c=!this.hasButtons(l),i=this.hasLogo!==f.displaylogo,d=this.locale!==f.locale;if(this.locale=f.locale,(c||i||d)&&(this.removeAllButtons(),this.updateButtons(l),f.watermark||f.displaylogo)){var x=this.getLogo();f.watermark&&(x.className=x.className+" watermark"),u.modebar.orientation==="v"?this.element.insertBefore(x,this.element.childNodes[0]):this.element.appendChild(x),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(n){var l=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(f){var u=l.createGroup();f.forEach(function(g){var h=g.name;if(!h)throw new Error("must provide button 'name' in button config");if(l.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");l.buttonsNames.push(h);var T=l.createButton(g);l.buttonElements.push(T),u.appendChild(T)}),l.element.appendChild(u)})},r.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},r.createButton=function(n){var l=this,f=document.createElement("a");f.setAttribute("rel","tooltip"),f.className="modebar-btn";var u=n.title;u===void 0?u=n.name:typeof u=="function"&&(u=u(this.graphInfo)),(u||u===0)&&f.setAttribute("data-title",u),n.attr!==void 0&&f.setAttribute("data-attr",n.attr);var g=n.val;g!==void 0&&(typeof g=="function"&&(g=g(this.graphInfo)),f.setAttribute("data-val",g));var h=n.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");f.addEventListener("click",function(c){n.click(l.graphInfo,c),l.updateActiveButton(c.currentTarget)}),f.setAttribute("data-toggle",n.toggle||!1),n.toggle&&b.select(f).classed("active",!0);var T=n.icon;return typeof T=="function"?f.appendChild(T()):f.appendChild(this.createIcon(T||L.question)),f.setAttribute("data-gravity",n.gravity||"n"),f},r.createIcon=function(n){var l=P(n.height)?Number(n.height):n.ascent-n.descent,f="http://www.w3.org/2000/svg",u;if(n.path){u=document.createElementNS(f,"svg"),u.setAttribute("viewBox",[0,0,n.width,l].join(" ")),u.setAttribute("class","icon");var g=document.createElementNS(f,"path");g.setAttribute("d",n.path),n.transform?g.setAttribute("transform",n.transform):n.ascent!==void 0&&g.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),u.appendChild(g)}if(n.svg){var h=v.parseFromString(n.svg,"application/xml");u=h.childNodes[0]}return u.setAttribute("height","1em"),u.setAttribute("width","1em"),u},r.updateActiveButton=function(n){var l=this.graphInfo._fullLayout,f=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(u){var g=u.getAttribute("data-val")||!0,h=u.getAttribute("data-attr"),T=u.getAttribute("data-toggle")==="true",c=b.select(u);if(T)h===f&&c.classed("active",!c.classed("active"));else{var i=h===null?h:o.nestedProperty(l,h).get();c.classed("active",i===g)}})},r.hasButtons=function(n){var l=this.buttons;if(!l||n.length!==l.length)return!1;for(var f=0;f<n.length;++f){if(n[f].length!==l[f].length)return!1;for(var u=0;u<n[f].length;u++)if(n[f][u].name!==l[f][u].name)return!1}return!0};function e(n){return n+" (v"+A+")"}r.getLogo=function(){var n=this.createGroup(),l=document.createElement("a");return l.href="https://plotly.com/",l.target="_blank",l.setAttribute("data-title",e(o._(this.graphInfo,"Produced with Plotly.js"))),l.className="modebar-btn plotlyjsicon modebar-btn--logo",l.appendChild(this.createIcon(L.newplotlylogo)),n.appendChild(l),n},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)};function s(n,l){var f=n._fullLayout,u=new p({graphInfo:n,container:f._modebardiv.node(),buttons:l});return f._privateplot&&b.select(u.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),u}j.exports=s},26680:function(j,V,t){var b=t(25376),P=t(22548),o=t(31780).templatedArray,L=o("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});j.exports={visible:{valType:"boolean",editType:"plot"},buttons:L,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:b({editType:"plot"}),bgcolor:{valType:"color",dflt:P.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:P.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},85984:function(j){j.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},22148:function(j,V,t){var b=t(3400),P=t(76308),o=t(31780),L=t(51272),A=t(26680),v=t(85984);j.exports=function(s,n,l,f,u){var g=s.rangeselector||{},h=o.newContainer(n,"rangeselector");function T(w,C){return b.coerce(g,h,A,w,C)}var c=L(g,h,{name:"buttons",handleItemDefaults:p,calendar:u}),i=T("visible",c.length>0);if(i){var d=r(n,l,f);T("x",d[0]),T("y",d[1]),b.noneOrAll(s,n,["x","y"]),T("xanchor"),T("yanchor"),b.coerceFont(T,"font",l.font);var x=T("bgcolor");T("activecolor",P.contrast(x,v.lightAmount,v.darkAmount)),T("bordercolor"),T("borderwidth")}};function p(e,s,n,l){var f=l.calendar;function u(T,c){return b.coerce(e,s,A.buttons,T,c)}var g=u("visible");if(g){var h=u("step");h!=="all"&&(f&&f!=="gregorian"&&(h==="month"||h==="year")?s.stepmode="backward":u("stepmode"),u("count")),u("label")}}function r(e,s,n){for(var l=n.filter(function(h){return s[h].anchor===e._id}),f=0,u=0;u<l.length;u++){var g=s[l[u]].domain;g&&(f=Math.max(g[1],f))}return[e.domain[0],f+v.yPad]}},50216:function(j,V,t){var b=t(33428),P=t(24040),o=t(7316),L=t(76308),A=t(43616),v=t(3400),p=v.strTranslate,r=t(72736),e=t(79811),s=t(84284),n=s.LINE_SPACING,l=s.FROM_TL,f=s.FROM_BR,u=t(85984),g=t(48040);j.exports=function(S){var M=S._fullLayout,a=M._infolayer.selectAll(".rangeselector").data(h(S),T);a.enter().append("g").classed("rangeselector",!0),a.exit().remove(),a.style({cursor:"pointer","pointer-events":"all"}),a.each(function(E){var m=b.select(this),k=E,I=k.rangeselector,O=m.selectAll("g.button").data(v.filterVisible(I.buttons));O.enter().append("g").classed("button",!0),O.exit().remove(),O.each(function(z){var B=b.select(this),F=g(k,z);z._isActive=c(k,z,F),B.call(i,I,z),B.call(x,I,z,S),B.on("click",function(){S._dragged||P.call("_guiRelayout",S,F)}),B.on("mouseover",function(){z._isHovered=!0,B.call(i,I,z)}),B.on("mouseout",function(){z._isHovered=!1,B.call(i,I,z)})}),C(S,O,I,k._name,m)})};function h(y){for(var S=e.list(y,"x",!0),M=[],a=0;a<S.length;a++){var E=S[a];E.rangeselector&&E.rangeselector.visible&&M.push(E)}return M}function T(y){return y._id}function c(y,S,M){if(S.step==="all")return y.autorange===!0;var a=Object.keys(M);return y.range[0]===M[a[0]]&&y.range[1]===M[a[1]]}function i(y,S,M){var a=v.ensureSingle(y,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});a.attr({rx:u.rx,ry:u.ry}),a.call(L.stroke,S.bordercolor).call(L.fill,d(S,M)).style("stroke-width",S.borderwidth+"px")}function d(y,S){return S._isActive||S._isHovered?y.activecolor:y.bgcolor}function x(y,S,M,a){function E(k){r.convertToTspans(k,a)}var m=v.ensureSingle(y,"text","selector-text",function(k){k.attr("text-anchor","middle")});m.call(A.font,S.font).text(w(M,a._fullLayout._meta)).call(E)}function w(y,S){return y.label?S?v.templateString(y.label,S):y.label:y.step==="all"?"all":y.count+y.step.charAt(0)}function C(y,S,M,a,E){var m=0,k=0,I=M.borderwidth;S.each(function(){var N=b.select(this),G=N.select(".selector-text"),X=M.font.size*n,$=Math.max(X*r.lineCount(G),16)+3;k=Math.max(k,$)}),S.each(function(){var N=b.select(this),G=N.select(".selector-rect"),X=N.select(".selector-text"),$=X.node()&&A.bBox(X.node()).width,et=M.font.size*n,ot=r.lineCount(X),nt=Math.max($+10,u.minButtonWidth);N.attr("transform",p(I+m,I)),G.attr({x:0,y:0,width:nt,height:k}),r.positionText(X,nt/2,k/2-(ot-1)*et/2+3),m+=nt+5});var O=y._fullLayout._size,z=O.l+O.w*M.x,B=O.t+O.h*(1-M.y),F="left";v.isRightAnchor(M)&&(z-=m,F="right"),v.isCenterAnchor(M)&&(z-=m/2,F="center");var _="top";v.isBottomAnchor(M)&&(B-=k,_="bottom"),v.isMiddleAnchor(M)&&(B-=k/2,_="middle"),m=Math.ceil(m),k=Math.ceil(k),z=Math.round(z),B=Math.round(B),o.autoMargin(y,a+"-range-selector",{x:M.x,y:M.y,l:m*l[F],r:m*f[F],b:k*f[_],t:k*l[_]}),E.attr("transform",p(z,B))}},48040:function(j,V,t){var b=t(73220),P=t(3400).titleCase;j.exports=function(A,v){var p=A._name,r={};if(v.step==="all")r[p+".autorange"]=!0;else{var e=o(A,v);r[p+".range[0]"]=e[0],r[p+".range[1]"]=e[1]}return r};function o(L,A){var v=L.range,p=new Date(L.r2l(v[1])),r=A.step,e=b["utc"+P(r)],s=A.count,n;switch(A.stepmode){case"backward":n=L.l2r(+e.offset(p,-s));break;case"todate":var l=e.offset(p,-s);n=L.l2r(+e.ceil(l));break}var f=v[1];return[n,f]}},41152:function(j,V,t){j.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t(26680)}}},layoutAttributes:t(26680),handleDefaults:t(22148),draw:t(50216)}},11200:function(j,V,t){var b=t(22548);j.exports={bgcolor:{valType:"color",dflt:b.background,editType:"plot"},bordercolor:{valType:"color",dflt:b.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},26652:function(j,V,t){var b=t(79811).list,P=t(19280).getAutoRange,o=t(74636);j.exports=function(A){for(var v=b(A,"x",!0),p=0;p<v.length;p++){var r=v[p],e=r[o.name];e&&e.visible&&e.autorange&&(e._input.autorange=!0,e._input.range=e.range=P(A,r))}}},74636:function(j){j.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},94040:function(j,V,t){var b=t(3400),P=t(31780),o=t(79811),L=t(11200),A=t(10936);j.exports=function(p,r,e){var s=p[e],n=r[e];if(!(s.rangeslider||r._requestRangeslider[n._id]))return;b.isPlainObject(s.rangeslider)||(s.rangeslider={});var l=s.rangeslider,f=P.newContainer(n,"rangeslider");function u(a,E){return b.coerce(l,f,L,a,E)}var g,h;function T(a,E){return b.coerce(g,h,A,a,E)}var c=u("visible");if(c){u("bgcolor",r.plot_bgcolor),u("bordercolor"),u("borderwidth"),u("thickness"),u("autorange",!n.isValidRange(l.range)),u("range");var i=r._subplots;if(i)for(var d=i.cartesian.filter(function(a){return a.substr(0,a.indexOf("y"))===o.name2id(e)}).map(function(a){return a.substr(a.indexOf("y"),a.length)}),x=b.simpleMap(d,o.id2name),w=0;w<x.length;w++){var C=x[w];g=l[C]||{},h=P.newContainer(f,C,"yaxis");var y=r[C],S;g.range&&y.isValidRange(g.range)&&(S="fixed");var M=T("rangemode",S);M!=="match"&&T("range",y.range.slice())}f._input=l}}},20060:function(j,V,t){var b=t(33428),P=t(24040),o=t(7316),L=t(3400),A=L.strTranslate,v=t(43616),p=t(76308),r=t(81668),e=t(57952),s=t(79811),n=t(86476),l=t(93972),f=t(74636);j.exports=function(S){for(var M=S._fullLayout,a=M._rangeSliderData,E=0;E<a.length;E++){var m=a[E][f.name];m._clipId=m._id+"-"+M._uid}function k(O){return O._name}var I=M._infolayer.selectAll("g."+f.containerClassName).data(a,k);I.exit().each(function(O){var z=O[f.name];M._topdefs.select("#"+z._clipId).remove()}).remove(),a.length!==0&&(I.enter().append("g").classed(f.containerClassName,!0).attr("pointer-events","all"),I.each(function(O){var z=b.select(this),B=O[f.name],F=M[s.id2name(O.anchor)],_=B[s.id2name(O.anchor)];if(B.range){var N=L.simpleMap(B.range,O.r2l),G=L.simpleMap(O.range,O.r2l),X;G[0]<G[1]?X=[Math.min(N[0],G[0]),Math.max(N[1],G[1])]:X=[Math.max(N[0],G[0]),Math.min(N[1],G[1])],B.range=B._input.range=L.simpleMap(X,O.l2r)}O.cleanRange("rangeslider.range");var $=M._size,et=O.domain;B._width=$.w*(et[1]-et[0]);var ot=Math.round($.l+$.w*et[0]),nt=Math.round($.t+$.h*(1-O._counterDomainMin)+(O.side==="bottom"?O._depth:0)+B._offsetShift+f.extraPad);z.attr("transform",A(ot,nt)),B._rl=L.simpleMap(B.range,O.r2l);var Z=B._rl[0],Q=B._rl[1],W=Q-Z;if(B.p2d=function(gt){return gt/B._width*W+Z},B.d2p=function(gt){return(gt-Z)/W*B._width},O.rangebreaks){var J=O.locateBreaks(Z,Q);if(J.length){var it,K,H=0;for(it=0;it<J.length;it++)K=J[it],H+=K.max-K.min;var at=B._width/(Q-Z-H),tt=[-at*Z];for(it=0;it<J.length;it++)K=J[it],tt.push(tt[tt.length-1]-at*(K.max-K.min));for(B.d2p=function(gt){for(var Mt=tt[0],Lt=0;Lt<J.length;Lt++){var zt=J[Lt];if(gt>=zt.max)Mt=tt[Lt+1];else if(gt<zt.min)break}return Mt+at*gt},it=0;it<J.length;it++)K=J[it],K.pmin=B.d2p(K.min),K.pmax=B.d2p(K.max);B.p2d=function(gt){for(var Mt=tt[0],Lt=0;Lt<J.length;Lt++){var zt=J[Lt];if(gt>=zt.pmax)Mt=tt[Lt+1];else if(gt<zt.pmin)break}return(gt-Mt)/at}}}if(_.rangemode!=="match"){var lt=F.r2l(_.range[0]),dt=F.r2l(_.range[1]),mt=dt-lt;B.d2pOppAxis=function(gt){return(gt-lt)/mt*B._height}}z.call(c,S,O,B).call(i,S,O,B).call(d,S,O,B).call(w,S,O,B,_).call(C,S,O,B).call(y,S,O,B),g(z,S,O,B),T(z,S,O,B,F,_),O.side==="bottom"&&r.draw(S,O._id+"title",{propContainer:O,propName:O._name+".title",placeholder:M._dfltTitle.x,attributes:{x:O._offset+O._length/2,y:nt+B._height+B._offsetShift+10+1.5*O.title.font.size,"text-anchor":"middle"}})}))};function u(S){return typeof S.clientX=="number"?S.clientX:S.touches&&S.touches.length>0?S.touches[0].clientX:0}function g(S,M,a,E){if(M._context.staticPlot)return;var m=S.select("rect."+f.slideBoxClassName).node(),k=S.select("rect."+f.grabAreaMinClassName).node(),I=S.select("rect."+f.grabAreaMaxClassName).node();function O(){var z=b.event,B=z.target,F=u(z),_=F-S.node().getBoundingClientRect().left,N=E.d2p(a._rl[0]),G=E.d2p(a._rl[1]),X=n.coverSlip();this.addEventListener("touchmove",$),this.addEventListener("touchend",et),X.addEventListener("mousemove",$),X.addEventListener("mouseup",et);function $(ot){var nt=u(ot),Z=+nt-F,Q,W,J;switch(B){case m:if(J="ew-resize",N+Z>a._length||G+Z<0)return;Q=N+Z,W=G+Z;break;case k:if(J="col-resize",N+Z>a._length)return;Q=N+Z,W=G;break;case I:if(J="col-resize",G+Z<0)return;Q=N,W=G+Z;break;default:J="ew-resize",Q=_,W=_+Z;break}if(W<Q){var it=W;W=Q,Q=it}E._pixelMin=Q,E._pixelMax=W,l(b.select(X),J),h(S,M,a,E)}function et(){X.removeEventListener("mousemove",$),X.removeEventListener("mouseup",et),this.removeEventListener("touchmove",$),this.removeEventListener("touchend",et),L.removeElement(X)}}S.on("mousedown",O),S.on("touchstart",O)}function h(S,M,a,E){function m(O){return a.l2r(L.constrain(O,E._rl[0],E._rl[1]))}var k=m(E.p2d(E._pixelMin)),I=m(E.p2d(E._pixelMax));window.requestAnimationFrame(function(){P.call("_guiRelayout",M,a._name+".range",[k,I])})}function T(S,M,a,E,m,k){var I=f.handleWidth/2;function O(ot){return L.constrain(ot,0,E._width)}function z(ot){return L.constrain(ot,0,E._height)}function B(ot){return L.constrain(ot,-I,E._width+I)}var F=O(E.d2p(a._rl[0])),_=O(E.d2p(a._rl[1]));if(S.select("rect."+f.slideBoxClassName).attr("x",F).attr("width",_-F),S.select("rect."+f.maskMinClassName).attr("width",F),S.select("rect."+f.maskMaxClassName).attr("x",_).attr("width",E._width-_),k.rangemode!=="match"){var N=E._height-z(E.d2pOppAxis(m._rl[1])),G=E._height-z(E.d2pOppAxis(m._rl[0]));S.select("rect."+f.maskMinOppAxisClassName).attr("x",F).attr("height",N).attr("width",_-F),S.select("rect."+f.maskMaxOppAxisClassName).attr("x",F).attr("y",G).attr("height",E._height-G).attr("width",_-F),S.select("rect."+f.slideBoxClassName).attr("y",N).attr("height",G-N)}var X=.5,$=Math.round(B(F-I))-X,et=Math.round(B(_-I))+X;S.select("g."+f.grabberMinClassName).attr("transform",A($,X)),S.select("g."+f.grabberMaxClassName).attr("transform",A(et,X))}function c(S,M,a,E){var m=L.ensureSingle(S,"rect",f.bgClassName,function(z){z.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),k=E.borderwidth%2===0?E.borderwidth:E.borderwidth-1,I=-E._offsetShift,O=v.crispRound(M,E.borderwidth);m.attr({width:E._width+k,height:E._height+k,transform:A(I,I),"stroke-width":O}).call(p.stroke,E.bordercolor).call(p.fill,E.bgcolor)}function i(S,M,a,E){var m=M._fullLayout,k=L.ensureSingleById(m._topdefs,"clipPath",E._clipId,function(I){I.append("rect").attr({x:0,y:0})});k.select("rect").attr({width:E._width,height:E._height})}function d(S,M,a,E){var m=M.calcdata,k=S.selectAll("g."+f.rangePlotClassName).data(a._subplotsWith,L.identity);k.enter().append("g").attr("class",function(O){return f.rangePlotClassName+" "+O}).call(v.setClipUrl,E._clipId,M),k.order(),k.exit().remove();var I;k.each(function(O,z){var B=b.select(this),F=z===0,_=s.getFromId(M,O,"y"),N=_._name,G=E[N],X={data:[],layout:{xaxis:{type:a.type,domain:[0,1],range:E.range.slice(),calendar:a.calendar},width:E._width,height:E._height,margin:{t:0,b:0,l:0,r:0}},_context:M._context};a.rangebreaks&&(X.layout.xaxis.rangebreaks=a.rangebreaks),X.layout[N]={type:_.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():_.range.slice(),calendar:_.calendar},_.rangebreaks&&(X.layout[N].rangebreaks=_.rangebreaks),o.supplyDefaults(X);var $=X._fullLayout.xaxis,et=X._fullLayout[N];$.clearCalc(),$.setScale(),et.clearCalc(),et.setScale();var ot={id:O,plotgroup:B,xaxis:$,yaxis:et,isRangePlot:!0};F?I=ot:(ot.mainplot="xy",ot.mainplotinfo=I),e.rangePlot(M,ot,x(m,O))})}function x(S,M){for(var a=[],E=0;E<S.length;E++){var m=S[E],k=m[0].trace;k.xaxis+k.yaxis===M&&a.push(m)}return a}function w(S,M,a,E,m){var k=L.ensureSingle(S,"rect",f.maskMinClassName,function(B){B.attr({x:0,y:0,"shape-rendering":"crispEdges"})});k.attr("height",E._height).call(p.fill,f.maskColor);var I=L.ensureSingle(S,"rect",f.maskMaxClassName,function(B){B.attr({y:0,"shape-rendering":"crispEdges"})});if(I.attr("height",E._height).call(p.fill,f.maskColor),m.rangemode!=="match"){var O=L.ensureSingle(S,"rect",f.maskMinOppAxisClassName,function(B){B.attr({y:0,"shape-rendering":"crispEdges"})});O.attr("width",E._width).call(p.fill,f.maskOppAxisColor);var z=L.ensureSingle(S,"rect",f.maskMaxOppAxisClassName,function(B){B.attr({y:0,"shape-rendering":"crispEdges"})});z.attr("width",E._width).style("border-top",f.maskOppBorder).call(p.fill,f.maskOppAxisColor)}}function C(S,M,a,E){if(!M._context.staticPlot){var m=L.ensureSingle(S,"rect",f.slideBoxClassName,function(k){k.attr({y:0,cursor:f.slideBoxCursor,"shape-rendering":"crispEdges"})});m.attr({height:E._height,fill:f.slideBoxFill})}}function y(S,M,a,E){var m=L.ensureSingle(S,"g",f.grabberMinClassName),k=L.ensureSingle(S,"g",f.grabberMaxClassName),I={x:0,width:f.handleWidth,rx:f.handleRadius,fill:p.background,stroke:p.defaultLine,"stroke-width":f.handleStrokeWidth,"shape-rendering":"crispEdges"},O={y:Math.round(E._height/4),height:Math.round(E._height/2)},z=L.ensureSingle(m,"rect",f.handleMinClassName,function(G){G.attr(I)});z.attr(O);var B=L.ensureSingle(k,"rect",f.handleMaxClassName,function(G){G.attr(I)});B.attr(O);var F={width:f.grabAreaWidth,x:0,y:0,fill:f.grabAreaFill,cursor:M._context.staticPlot?void 0:f.grabAreaCursor},_=L.ensureSingle(m,"rect",f.grabAreaMinClassName,function(G){G.attr(F)});_.attr("height",E._height);var N=L.ensureSingle(k,"rect",f.grabAreaMaxClassName,function(G){G.attr(F)});N.attr("height",E._height)}},97944:function(j,V,t){var b=t(79811),P=t(72736),o=t(74636),L=t(84284).LINE_SPACING,A=o.name;function v(p){var r=p&&p[A];return r&&r.visible}V.isVisible=v,V.makeData=function(p){var r=b.list({_fullLayout:p},"x",!0),e=p.margin,s=[];if(!p._has("gl2d"))for(var n=0;n<r.length;n++){var l=r[n];if(v(l)){s.push(l);var f=l[A];f._id=A+l._id,f._height=(p.height-e.b-e.t)*f.thickness,f._offsetShift=Math.floor(f.borderwidth/2)}}p._rangeSliderData=s},V.autoMarginOpts=function(p,r){var e=p._fullLayout,s=r[A],n=r._id.charAt(0),l=0,f=0;if(r.side==="bottom"&&(l=r._depth,r.title.text!==e._dfltTitle[n])){f=1.5*r.title.font.size+10+s._offsetShift;var u=(r.title.text.match(P.BR_TAG_ALL)||[]).length;f+=u*r.title.font.size*L}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:s._height+l+Math.max(e.margin.b,f),pad:o.extraPad+s._offsetShift*2}}},49692:function(j,V,t){var b=t(3400),P=t(11200),o=t(10936),L=t(97944);j.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:b.extendFlat({},P,{yaxis:o})}}},layoutAttributes:t(11200),handleDefaults:t(94040),calcAutorange:t(26652),draw:t(20060),isVisible:L.isVisible,makeData:L.makeData,autoMarginOpts:L.autoMarginOpts}},10936:function(j){j.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},93956:function(j,V,t){var b=t(13916),P=t(52904).line,o=t(98192).u,L=t(92880).extendFlat,A=t(67824).overrideAll,v=t(31780).templatedArray;t(36208),j.exports=A(v("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:L({},b.xref,{}),yref:L({},b.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:P.color,width:L({},P.width,{min:1,dflt:1}),dash:L({},o,{dflt:"dot"})}}),"arraydraw","from-root")},83280:function(j){j.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},74224:function(j,V,t){var b=t(3400),P=t(54460),o=t(51272),L=t(93956),A=t(65152);j.exports=function(r,e){o(r,e,{name:"selections",handleItemDefaults:v});for(var s=e.selections,n=0;n<s.length;n++){var l=s[n];l&&l.path===void 0&&(l.x0===void 0||l.x1===void 0||l.y0===void 0||l.y1===void 0)&&(e.selections[n]=null)}};function v(p,r,e){function s(m,k){return b.coerce(p,r,L,m,k)}var n=s("path"),l=n?"path":"rect",f=s("type",l),u=f!=="path";u&&delete r.path,s("opacity"),s("line.color"),s("line.width"),s("line.dash");for(var g=["x","y"],h=0;h<2;h++){var T=g[h],c={_fullLayout:e},i,d,x,w=P.coerceRef(p,r,c,T);if(i=P.getFromId(c,w),i._selectionIndices.push(r._index),x=A.rangeToShapePosition(i),d=A.shapePositionToRange(i),u){var C=T+"0",y=T+"1",S=p[C],M=p[y];p[C]=d(p[C],!0),p[y]=d(p[y],!0),P.coercePosition(r,c,s,w,C),P.coercePosition(r,c,s,w,y);var a=r[C],E=r[y];a!==void 0&&E!==void 0&&(r[C]=x(a),r[y]=x(E),p[C]=S,p[y]=M)}}u&&b.noneOrAll(p,r,["x0","x1","y0","y1"])}},23640:function(j,V,t){var b=t(9856).readPaths,P=t(55496),o=t(1936).clearOutlineControllers,L=t(76308),A=t(43616),v=t(31780).arrayEditor,p=t(65152),r=p.getPathString;j.exports={draw:e,drawOne:n,activateLastSelection:u};function e(h){var T=h._fullLayout;o(h),T._selectionLayer.selectAll("path").remove();for(var c in T._plots){var i=T._plots[c].selectionLayer;i&&i.selectAll("path").remove()}for(var d=0;d<T.selections.length;d++)n(h,d)}function s(h){return h._context.editSelection}function n(h,T){h._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+T+'"]').remove();var c=p.makeSelectionsOptionsAndPlotinfo(h,T),i=c.options,d=c.plotinfo;if(!i._input)return;x(h._fullLayout._selectionLayer);function x(w){var C=r(h,i),y={"data-index":T,"fill-rule":"evenodd",d:C},S=i.opacity,M="rgba(0,0,0,0)",a=i.line.color||L.contrast(h._fullLayout.plot_bgcolor),E=i.line.width,m=i.line.dash;E||(E=5,m="solid");var k=s(h)&&h._fullLayout._activeSelectionIndex===T;k&&(M=h._fullLayout.activeselection.fillcolor,S=h._fullLayout.activeselection.opacity);for(var I=[],O=1;O>=0;O--){var z=w.append("path").attr(y).style("opacity",O?.1:S).call(L.stroke,a).call(L.fill,M).call(A.dashLine,O?"solid":m,O?4+E:E);if(l(z,h,i),k){var B=v(h.layout,"selections",i);z.style({cursor:"move"});var F={element:z.node(),plotinfo:d,gd:h,editHelpers:B,isActiveSelection:!0},_=b(C,h);P(_,z,F)}else z.style("pointer-events",O?"all":"none");I[O]=z}var N=I[0],G=I[1];G.node().addEventListener("click",function(){return f(h,N)})}}function l(h,T,c){var i=c.xref+c.yref;A.setClipUrl(h,"clip"+T._fullLayout._uid+i,T)}function f(h,T){if(s(h)){var c=T.node(),i=+c.getAttribute("data-index");if(i>=0){if(i===h._fullLayout._activeSelectionIndex){g(h);return}h._fullLayout._activeSelectionIndex=i,h._fullLayout._deactivateSelection=g,e(h)}}}function u(h){if(s(h)){var T=h._fullLayout.selections.length-1;h._fullLayout._activeSelectionIndex=T,h._fullLayout._deactivateSelection=g,e(h)}}function g(h){if(s(h)){var T=h._fullLayout._activeSelectionIndex;T>=0&&(o(h),delete h._fullLayout._activeSelectionIndex,e(h))}}},34200:function(j,V,t){var b=t(98192).u,P=t(92880).extendFlat;j.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:P({},b,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},81004:function(j){j.exports=function(t,b,P){P("newselection.mode");var o=P("newselection.line.width");o&&(P("newselection.line.color"),P("newselection.line.dash")),P("activeselection.fillcolor"),P("activeselection.opacity")}},5968:function(j,V,t){var b=t(72760),P=b.selectMode,o=t(1936),L=o.clearOutline,A=t(9856),v=A.readPaths,p=A.writePaths,r=A.fixDatesForPaths;j.exports=function(s,n){if(s.length){var l=s[0][0];if(l){var f=l.getAttribute("d"),u=n.gd,g=u._fullLayout.newselection,h=n.plotinfo,T=h.xaxis,c=h.yaxis,i=n.isActiveSelection,d=n.dragmode,x=(u.layout||{}).selections||[];if(!P(d)&&i!==void 0){var w=u._fullLayout._activeSelectionIndex;if(w<x.length)switch(u._fullLayout.selections[w].type){case"rect":d="select";break;case"path":d="lasso";break}}var C=v(f,u,h,i),y={xref:T._id,yref:c._id,opacity:g.opacity,line:{color:g.line.color,width:g.line.width,dash:g.line.dash}},S;C.length===1&&(S=C[0]),S&&S.length===5&&d==="select"?(y.type="rect",y.x0=S[0][1],y.y0=S[0][2],y.x1=S[2][1],y.y1=S[2][2]):(y.type="path",T&&c&&r(C,T,c),y.path=p(C),S=null),L(u);for(var M=n.editHelpers,a=(M||{}).modifyItem,E=[],m=0;m<x.length;m++){var k=u._fullLayout.selections[m];if(!k){E[m]=k;continue}if(E[m]=k._input,i!==void 0&&m===u._fullLayout._activeSelectionIndex){var I=y;switch(k.type){case"rect":a("x0",I.x0),a("x1",I.x1),a("y0",I.y0),a("y1",I.y1);break;case"path":a("path",I.path);break}}}return i===void 0?(E.push(y),E):M?M.getUpdateObj():{}}}}},5840:function(j,V,t){var b=t(3400).strTranslate;function P(v,p){switch(v.type){case"log":return v.p2d(p);case"date":return v.p2r(p,0,v.calendar);default:return v.p2r(p)}}function o(v,p){switch(v.type){case"log":return v.d2p(p);case"date":return v.r2p(p,0,v.calendar);default:return v.r2p(p)}}function L(v){var p=v._id.charAt(0)==="y"?1:0;return function(r){return P(v,r[p])}}function A(v){return b(v.xaxis._offset,v.yaxis._offset)}j.exports={p2r:P,r2p:o,axValue:L,getTransform:A}},22676:function(j,V,t){var b=t(23640),P=t(43156);j.exports={moduleType:"component",name:"selections",layoutAttributes:t(93956),supplyLayoutDefaults:t(74224),supplyDrawNewSelectionDefaults:t(81004),includeBasePlot:t(36632)("selections"),draw:b.draw,drawOne:b.drawOne,reselect:P.reselect,prepSelect:P.prepSelect,clearOutline:P.clearOutline,clearSelectionsCache:P.clearSelectionsCache,selectOnClick:P.selectOnClick}},43156:function(j,V,t){var b=t(14756),P=t(61456),o=t(24040),L=t(43616).dashStyle,A=t(76308),v=t(93024),p=t(10624).makeEventData,r=t(72760),e=r.freeMode,s=r.rectMode,n=r.drawMode,l=r.openMode,f=r.selectMode,u=t(65152),g=t(85448),h=t(55496),T=t(1936).clearOutline,c=t(9856),i=c.handleEllipse,d=c.readPaths,x=t(93940).newShapes,w=t(5968),C=t(23640).activateLastSelection,y=t(3400),S=y.sorterAsc,M=t(92065),a=t(91200),E=t(79811).getFromId,m=t(73696),k=t(39172).redrawReglTraces,I=t(83280),O=I.MINSELECT,z=M.filter,B=M.tester,F=t(5840),_=F.p2r,N=F.axValue,G=F.getTransform;function X(Ht){return Ht.subplot!==void 0}function $(Ht,St,kt,Ft,At){var ft=!X(Ft),pt=e(At),Dt=s(At),Ut=l(At),$t=n(At),re=f(At),Be=At==="drawline",We=At==="drawcircle",me=Be||We,Se=Ft.gd,je=Se._fullLayout,vr=re&&je.newselection.mode==="immediate"&&ft,he=je._zoomlayer,Ye=Ft.element.getBoundingClientRect(),Qe=Ft.plotinfo,mr=G(Qe),ir=St-Ye.left,ve=kt-Ye.top;je._calcInverseTransform(Se);var ne=y.apply3DTransform(je._invTransform)(ir,ve);ir=ne[0],ve=ne[1];var ge=je._invScaleX,Ae=je._invScaleY,Re=ir,ze=ve,ke="M"+ir+","+ve,_e=Ft.xaxes[0],Ke=Ft.yaxes[0],hr=_e._length,cr=Ke._length,dr=Ht.altKey&&!(n(At)&&Ut),fr,Lr,xr,Yt,Jt,qe,tr;W(Ht,Se,Ft),pt&&(fr=z([[ir,ve]],I.BENDPX));var Ge=he.selectAll("path.select-outline-"+Qe.id).data([1]),Ee=$t?je.newshape:je.newselection;$t&&(Ft.hasText=Ee.label.text||Ee.label.texttemplate);var Xe=$t&&!Ut?Ee.fillcolor:"rgba(0,0,0,0)",rr=Ee.line.color||(ft?A.contrast(Se._fullLayout.plot_bgcolor):"#7f7f7f");Ge.enter().append("path").attr("class","select-outline select-outline-"+Qe.id).style({opacity:$t?Ee.opacity/2:1,"stroke-dasharray":L(Ee.line.dash,Ee.line.width),"stroke-width":Ee.line.width+"px","shape-rendering":"crispEdges"}).call(A.stroke,rr).call(A.fill,Xe).attr("fill-rule","evenodd").classed("cursor-move",!!$t).attr("transform",mr).attr("d",ke+"Z");var Je=he.append("path").attr("class","zoombox-corners").style({fill:A.background,stroke:A.defaultLine,"stroke-width":1}).attr("transform",mr).attr("d","M0,0Z");if($t&&Ft.hasText){var He=he.select(".label-temp");He.empty()&&(He=he.append("g").classed("label-temp",!0).classed("select-outline",!0).style({opacity:.8}))}var yr=je._uid+I.SELECTID,Ir=[],Tr=at(Se,Ft.xaxes,Ft.yaxes,Ft.subplot);vr&&!Ht.shiftKey&&(Ft._clearSubplotSelections=function(){if(ft){var Or=_e._id,En=Ke._id;te(Se,Or,En,Tr);for(var nn=(Se.layout||{}).selections||[],gr=[],Pr=!1,Xr=0;Xr<nn.length;Xr++){var kr=je.selections[Xr];kr.xref!==Or||kr.yref!==En?gr.push(nn[Xr]):Pr=!0}Pr&&(Se._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Se,{selections:gr}))}});var vn=Qt(Ft);Ft.moveFn=function(Or,En){Ft._clearSubplotSelections&&(Ft._clearSubplotSelections(),Ft._clearSubplotSelections=void 0),Re=Math.max(0,Math.min(hr,ge*Or+ir)),ze=Math.max(0,Math.min(cr,Ae*En+ve));var nn=Math.abs(Re-ir),gr=Math.abs(ze-ve);if(Dt){var Pr,Xr,kr;if(re){var pn=je.selectdirection;switch(pn==="any"?gr<Math.min(nn*.6,O)?Pr="h":nn<Math.min(gr*.6,O)?Pr="v":Pr="d":Pr=pn,Pr){case"h":Xr=We?cr/2:0,kr=cr;break;case"v":Xr=We?hr/2:0,kr=hr;break}}if($t)switch(je.newshape.drawdirection){case"vertical":Pr="h",Xr=We?cr/2:0,kr=cr;break;case"horizontal":Pr="v",Xr=We?hr/2:0,kr=hr;break;case"ortho":nn<gr?(Pr="h",Xr=ve,kr=ze):(Pr="v",Xr=ir,kr=Re);break;default:Pr="d"}Pr==="h"?(Yt=me?i(We,[Re,Xr],[Re,kr]):[[ir,Xr],[ir,kr],[Re,kr],[Re,Xr]],Yt.xmin=me?Re:Math.min(ir,Re),Yt.xmax=me?Re:Math.max(ir,Re),Yt.ymin=Math.min(Xr,kr),Yt.ymax=Math.max(Xr,kr),Je.attr("d","M"+Yt.xmin+","+(ve-O)+"h-4v"+2*O+"h4ZM"+(Yt.xmax-1)+","+(ve-O)+"h4v"+2*O+"h-4Z")):Pr==="v"?(Yt=me?i(We,[Xr,ze],[kr,ze]):[[Xr,ve],[Xr,ze],[kr,ze],[kr,ve]],Yt.xmin=Math.min(Xr,kr),Yt.xmax=Math.max(Xr,kr),Yt.ymin=me?ze:Math.min(ve,ze),Yt.ymax=me?ze:Math.max(ve,ze),Je.attr("d","M"+(ir-O)+","+Yt.ymin+"v-4h"+2*O+"v4ZM"+(ir-O)+","+(Yt.ymax-1)+"v4h"+2*O+"v-4Z")):Pr==="d"&&(Yt=me?i(We,[ir,ve],[Re,ze]):[[ir,ve],[ir,ze],[Re,ze],[Re,ve]],Yt.xmin=Math.min(ir,Re),Yt.xmax=Math.max(ir,Re),Yt.ymin=Math.min(ve,ze),Yt.ymax=Math.max(ve,ze),Je.attr("d","M0,0Z"))}else pt&&(fr.addPt([Re,ze]),Yt=fr.filtered);if(Ft.selectionDefs&&Ft.selectionDefs.length?(xr=xt(Ft.mergedPolygons,Yt,dr),Yt.subtract=dr,Lr=Q(Ft.selectionDefs.concat([Yt]))):(xr=[Yt],Lr=B(Yt)),h(wt(xr,Ut),Ge,Ft),re){var en=Tt(Se,!1),Tn=en.eventData?en.eventData.points.slice():[];en=Tt(Se,!1,Lr,Tr,Ft),Lr=en.selectionTesters,tr=en.eventData;var Ln;fr?Ln=fr.filtered:Ln=fe(xr),a.throttle(yr,I.SELECTDELAY,function(){Ir=Rt(Lr,Tr);for(var Yn=Ir.slice(),ma=0;ma<Tn.length;ma++){for(var wa=Tn[ma],la=!1,ia=0;ia<Yn.length;ia++)if(Yn[ia].curveNumber===wa.curveNumber&&Yn[ia].pointNumber===wa.pointNumber){la=!0;break}la||Yn.push(wa)}Yn.length&&(tr||(tr={}),tr.points=Yn),vn(tr,Ln),Pt(Se,tr)})}},Ft.clickFn=function(Or,En){if(Je.remove(),Se._fullLayout._activeShapeIndex>=0){Se._fullLayout._deactivateShape(Se);return}if(!$t){var nn=je.clickmode;a.done(yr).then(function(){if(a.clear(yr),Or===2){for(Ge.remove(),Jt=0;Jt<Tr.length;Jt++)qe=Tr[Jt],qe._module.selectPoints(qe,!1);if(Lt(Se,Tr),K(Ft),Nt(Se),Tr.length){var gr=Tr[0].xaxis,Pr=Tr[0].yaxis;if(gr&&Pr){for(var Xr=[],kr=Se._fullLayout.selections,pn=0;pn<kr.length;pn++){var en=kr[pn];en&&(en.xref!==gr._id||en.yref!==Pr._id)&&Xr.push(en)}Xr.length<kr.length&&(Se._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",Se,{selections:Xr}))}}}else nn.indexOf("select")>-1&&et(En,Se,Ft.xaxes,Ft.yaxes,Ft.subplot,Ft,Ge),nn==="event"&&Ot(Se,void 0);v.click(Se,En,Qe.id)}).catch(y.error)}},Ft.doneFn=function(){Je.remove(),a.done(yr).then(function(){a.clear(yr),!vr&&Yt&&Ft.selectionDefs&&(Yt.subtract=dr,Ft.selectionDefs.push(Yt),Ft.mergedPolygons.length=0,[].push.apply(Ft.mergedPolygons,xr)),(vr||$t)&&K(Ft,vr),Ft.doneFnCompleted&&Ft.doneFnCompleted(Ir),re&&Ot(Se,tr)}).catch(y.error)}}function et(Ht,St,kt,Ft,At,ft,pt){var Dt=St._hoverdata,Ut=St._fullLayout,$t=Ut.clickmode,re=$t.indexOf("event")>-1,Be=[],We,me,Se,je,vr,he,Ye,Qe,mr,ir;if(lt(Dt)){W(Ht,St,ft),We=at(St,kt,Ft,At);var ve=dt(Dt,We),ne=ve.pointNumbers.length>0;if(ne?gt(We,ve):Mt(We)&&(Ye=mt(ve))){for(pt&&pt.remove(),ir=0;ir<We.length;ir++)me=We[ir],me._module.selectPoints(me,!1);Lt(St,We),K(ft),re&&Nt(St)}else{Qe=Ht.shiftKey&&(Ye!==void 0?Ye:mt(ve)),Se=ot(ve.pointNumber,ve.searchInfo,Qe);var ge=ft.selectionDefs.concat([Se]);for(je=Q(ge),ir=0;ir<We.length;ir++)if(vr=We[ir]._module.selectPoints(We[ir],je),he=Ct(vr,We[ir]),Be.length)for(var Ae=0;Ae<he.length;Ae++)Be.push(he[Ae]);else Be=he;if(mr={points:Be},Lt(St,We,mr),Se&&ft&&ft.selectionDefs.push(Se),pt){var Re=ft.mergedPolygons,ze=l(ft.dragmode);h(wt(Re,ze),pt,ft)}re&&Ot(St,mr)}}}function ot(Ht,St,kt){return{pointNumber:Ht,searchInfo:St,subtract:!!kt}}function nt(Ht){return"pointNumber"in Ht&&"searchInfo"in Ht}function Z(Ht){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(St,kt,Ft,At){var ft=Ht.searchInfo.cd[0].trace._expandedIndex,pt=At.cd[0].trace._expandedIndex;return pt===ft&&Ft===Ht.pointNumber},isRect:!1,degenerate:!1,subtract:!!Ht.subtract}}function Q(Ht){if(!Ht.length)return;for(var St=[],kt=nt(Ht[0])?0:Ht[0][0][0],Ft=kt,At=nt(Ht[0])?0:Ht[0][0][1],ft=At,pt=0;pt<Ht.length;pt++)if(nt(Ht[pt]))St.push(Z(Ht[pt]));else{var Dt=B(Ht[pt]);Dt.subtract=!!Ht[pt].subtract,St.push(Dt),kt=Math.min(kt,Dt.xmin),Ft=Math.max(Ft,Dt.xmax),At=Math.min(At,Dt.ymin),ft=Math.max(ft,Dt.ymax)}function Ut($t,re,Be,We){for(var me=!1,Se=0;Se<St.length;Se++)St[Se].contains($t,re,Be,We)&&(me=!St[Se].subtract);return me}return{xmin:kt,xmax:Ft,ymin:At,ymax:ft,pts:[],contains:Ut,isRect:!1,degenerate:!1}}function W(Ht,St,kt){var Ft=St._fullLayout,At=kt.plotinfo,ft=kt.dragmode,pt=Ft._lastSelectedSubplot&&Ft._lastSelectedSubplot===At.id,Dt=(Ht.shiftKey||Ht.altKey)&&!(n(ft)&&l(ft));pt&&Dt&&At.selection&&At.selection.selectionDefs&&!kt.selectionDefs?(kt.selectionDefs=At.selection.selectionDefs,kt.mergedPolygons=At.selection.mergedPolygons):(!Dt||!At.selection)&&K(kt),pt||(T(St),Ft._lastSelectedSubplot=At.id)}function J(Ht){return Ht._fullLayout._activeShapeIndex>=0}function it(Ht){return Ht._fullLayout._activeSelectionIndex>=0}function K(Ht,St){var kt=Ht.dragmode,Ft=Ht.plotinfo,At=Ht.gd;J(At)&&At._fullLayout._deactivateShape(At),it(At)&&At._fullLayout._deactivateSelection(At);var ft=At._fullLayout,pt=ft._zoomlayer,Dt=n(kt),Ut=f(kt);if(Dt||Ut){var $t=pt.selectAll(".select-outline-"+Ft.id);if($t&&At._fullLayout._outlining){var re;Dt&&(re=x($t,Ht)),re&&o.call("_guiRelayout",At,{shapes:re});var Be;Ut&&!X(Ht)&&(Be=w($t,Ht)),Be&&(At._fullLayout._noEmitSelectedAtStart=!0,o.call("_guiRelayout",At,{selections:Be}).then(function(){St&&C(At)})),At._fullLayout._outlining=!1}}Ft.selection={},Ft.selection.selectionDefs=Ht.selectionDefs=[],Ft.selection.mergedPolygons=Ht.mergedPolygons=[]}function H(Ht){return Ht._id}function at(Ht,St,kt,Ft){if(!Ht.calcdata)return[];var At=[],ft=St.map(H),pt=kt.map(H),Dt,Ut,$t;for($t=0;$t<Ht.calcdata.length;$t++)if(Dt=Ht.calcdata[$t],Ut=Dt[0].trace,!(Ut.visible!==!0||!Ut._module||!Ut._module.selectPoints))if(X({subplot:Ft})&&(Ut.subplot===Ft||Ut.geo===Ft))At.push(tt(Ut._module,Dt,St[0],kt[0]));else if(Ut.type==="splom"){if(Ut._xaxes[ft[0]]&&Ut._yaxes[pt[0]]){var re=tt(Ut._module,Dt,St[0],kt[0]);re.scene=Ht._fullLayout._splomScenes[Ut.uid],At.push(re)}}else if(Ut.type==="sankey"){var Be=tt(Ut._module,Dt,St[0],kt[0]);At.push(Be)}else{if(ft.indexOf(Ut.xaxis)===-1&&(!Ut._xA||!Ut._xA.overlaying)||pt.indexOf(Ut.yaxis)===-1&&(!Ut._yA||!Ut._yA.overlaying))continue;At.push(tt(Ut._module,Dt,E(Ht,Ut.xaxis),E(Ht,Ut.yaxis)))}return At}function tt(Ht,St,kt,Ft){return{_module:Ht,cd:St,xaxis:kt,yaxis:Ft}}function lt(Ht){return Ht&&Array.isArray(Ht)&&Ht[0].hoverOnBox!==!0}function dt(Ht,St){var kt=Ht[0],Ft=-1,At=[],ft,pt;for(pt=0;pt<St.length;pt++)if(ft=St[pt],kt.fullData._expandedIndex===ft.cd[0].trace._expandedIndex){if(kt.hoverOnBox===!0)break;kt.pointNumber!==void 0?Ft=kt.pointNumber:kt.binNumber!==void 0&&(Ft=kt.binNumber,At=kt.pointNumbers);break}return{pointNumber:Ft,pointNumbers:At,searchInfo:ft}}function mt(Ht){var St=Ht.searchInfo.cd[0].trace,kt=Ht.pointNumber,Ft=Ht.pointNumbers,At=Ft.length>0,ft=At?Ft[0]:kt;return St.selectedpoints?St.selectedpoints.indexOf(ft)>-1:!1}function gt(Ht,St){var kt=[],Ft,At,ft,pt;for(pt=0;pt<Ht.length;pt++)Ft=Ht[pt],Ft.cd[0].trace.selectedpoints&&Ft.cd[0].trace.selectedpoints.length>0&&kt.push(Ft);if(kt.length===1&&(ft=kt[0]===St.searchInfo,ft&&(At=St.searchInfo.cd[0].trace,At.selectedpoints.length===St.pointNumbers.length))){for(pt=0;pt<St.pointNumbers.length;pt++)if(At.selectedpoints.indexOf(St.pointNumbers[pt])<0)return!1;return!0}return!1}function Mt(Ht){var St=0,kt,Ft,At;for(At=0;At<Ht.length;At++)if(kt=Ht[At],Ft=kt.cd[0].trace,Ft.selectedpoints&&(Ft.selectedpoints.length>1||(St+=Ft.selectedpoints.length,St>1)))return!1;return St===1}function Lt(Ht,St,kt){var Ft;for(Ft=0;Ft<St.length;Ft++){var At=St[Ft].cd[0].trace._fullInput,ft=Ht._fullLayout._tracePreGUI[At.uid]||{};ft.selectedpoints===void 0&&(ft.selectedpoints=At._input.selectedpoints||null)}var pt;if(kt){var Dt=kt.points||[];for(Ft=0;Ft<St.length;Ft++)pt=St[Ft].cd[0].trace,pt._input.selectedpoints=pt._fullInput.selectedpoints=[],pt._fullInput!==pt&&(pt.selectedpoints=[]);for(var Ut=0;Ut<Dt.length;Ut++){var $t=Dt[Ut],re=$t.data,Be=$t.fullData,We=$t.pointIndex,me=$t.pointIndices;me?([].push.apply(re.selectedpoints,me),pt._fullInput!==pt&&[].push.apply(Be.selectedpoints,me)):(re.selectedpoints.push(We),pt._fullInput!==pt&&Be.selectedpoints.push(We))}}else for(Ft=0;Ft<St.length;Ft++)pt=St[Ft].cd[0].trace,delete pt.selectedpoints,delete pt._input.selectedpoints,pt._fullInput!==pt&&delete pt._fullInput.selectedpoints;zt(Ht,St)}function zt(Ht,St){for(var kt=!1,Ft=0;Ft<St.length;Ft++){var At=St[Ft],ft=At.cd;o.traceIs(ft[0].trace,"regl")&&(kt=!0);var pt=At._module,Dt=pt.styleOnSelect||pt.style;Dt&&(Dt(Ht,ft,ft[0].node3),ft[0].nodeRangePlot3&&Dt(Ht,ft,ft[0].nodeRangePlot3))}kt&&(m(Ht),k(Ht))}function xt(Ht,St,kt){for(var Ft=kt?b.difference:b.union,At=Ft({regions:Ht},{regions:[St]}),ft=At.regions.reverse(),pt=0;pt<ft.length;pt++){var Dt=ft[pt];Dt.subtract=ie(Dt,ft.slice(0,pt))}return ft}function Ct(Ht,St){if(Array.isArray(Ht))for(var kt=St.cd,Ft=St.cd[0].trace,At=0;At<Ht.length;At++)Ht[At]=p(Ht[At],Ft,kt);return Ht}function wt(Ht,St){for(var kt=[],Ft=0;Ft<Ht.length;Ft++){kt[Ft]=[];for(var At=0;At<Ht[Ft].length;At++){kt[Ft][At]=[],kt[Ft][At][0]=At?"L":"M";for(var ft=0;ft<Ht[Ft][At].length;ft++)kt[Ft][At].push(Ht[Ft][At][ft])}St||kt[Ft].push(["Z",kt[Ft][0][1],kt[Ft][0][2]])}return kt}function Rt(Ht,St){for(var kt=[],Ft,At,ft=0;ft<St.length;ft++){var pt=St[ft];At=pt._module.selectPoints(pt,Ht),Ft=Ct(At,pt),kt=kt.concat(Ft)}return kt}function Tt(Ht,St,kt,Ft,At){var ft=!!Ft,pt,Dt,Ut;At&&(pt=At.plotinfo,Dt=At.xaxes[0]._id,Ut=At.yaxes[0]._id);var $t=[],re=[],Be=jt(Ht),We=Ht._fullLayout;if(pt){var me=We._zoomlayer,Se=We.dragmode,je=n(Se),vr=f(Se);if(je||vr){var he=E(Ht,Dt,"x"),Ye=E(Ht,Ut,"y");if(he&&Ye){var Qe=me.selectAll(".select-outline-"+pt.id);if(Qe&&Ht._fullLayout._outlining&&Qe.length){for(var mr=Qe[0][0],ir=mr.getAttribute("d"),ve=d(ir,Ht,pt),ne=[],ge=0;ge<ve.length;ge++){for(var Ae=ve[ge],Re=[],ze=0;ze<Ae.length;ze++)Re.push([ue(he,Ae[ze][1]),ue(Ye,Ae[ze][2])]);Re.xref=Dt,Re.yref=Ut,Re.subtract=ie(Re,ne),ne.push(Re)}Be=Be.concat(ne)}}}}var ke=Dt&&Ut?[Dt+Ut]:We._subplots.cartesian;Bt(Ht);for(var _e={},Ke=0;Ke<ke.length;Ke++){var hr=ke[Ke],cr=hr.indexOf("y"),dr=hr.slice(0,cr),fr=hr.slice(cr),Lr=Dt&&Ut?kt:void 0;if(Lr=Wt(Be,dr,fr,Lr),Lr){var xr=Ft;if(!ft){var Yt=E(Ht,dr,"x"),Jt=E(Ht,fr,"y");xr=at(Ht,[Yt],[Jt],hr);for(var qe=0;qe<xr.length;qe++){var tr=xr[qe],Ge=tr.cd[0],Ee=Ge.trace;if(tr._module.name==="scattergl"&&!Ge.t.xpx){var Xe=Ee.x,rr=Ee.y,Je=Ee._length;Ge.t.xpx=[],Ge.t.ypx=[];for(var He=0;He<Je;He++)Ge.t.xpx[He]=Yt.c2p(Xe[He]),Ge.t.ypx[He]=Jt.c2p(rr[He])}tr._module.name==="splom"&&(_e[Ee.uid]||(_e[Ee.uid]=!0))}}var yr=Rt(Lr,xr);$t=$t.concat(yr),re=re.concat(xr)}}var Ir={points:$t};Lt(Ht,re,Ir);var Tr=We.clickmode,vn=Tr.indexOf("event")>-1&&St;if(!pt&&St){var Or=jt(Ht,!0);if(Or.length){var En=Or[0].xref,nn=Or[0].yref;if(En&&nn){var gr=fe(Or),Pr=Te([E(Ht,En,"x"),E(Ht,nn,"y")]);Pr(Ir,gr)}}Ht._fullLayout._noEmitSelectedAtStart?Ht._fullLayout._noEmitSelectedAtStart=!1:vn&&Ot(Ht,Ir),We._reselect=!1}if(!pt&&We._deselect){var Xr=We._deselect;Dt=Xr.xref,Ut=Xr.yref,Gt(Dt,Ut,re)||te(Ht,Dt,Ut,Ft),vn&&(Ir.points.length?Ot(Ht,Ir):Nt(Ht)),We._deselect=!1}return{eventData:Ir,selectionTesters:kt}}function Bt(Ht){var St=Ht.calcdata;if(St)for(var kt=0;kt<St.length;kt++){var Ft=St[kt][0],At=Ft.trace,ft=Ht._fullLayout._splomScenes;if(ft){var pt=ft[At.uid];pt&&(pt.selectBatch=[])}}}function Gt(Ht,St,kt){for(var Ft=0;Ft<kt.length;Ft++){var At=kt[Ft];if(At.xaxis&&At.xaxis._id===Ht&&At.yaxis&&At.yaxis._id===St)return!0}return!1}function te(Ht,St,kt,Ft){Ft=at(Ht,[E(Ht,St,"x")],[E(Ht,kt,"y")],St+kt);for(var At=0;At<Ft.length;At++){var ft=Ft[At];ft._module.selectPoints(ft,!1)}Lt(Ht,Ft)}function Wt(Ht,St,kt,Ft){for(var At,ft=0;ft<Ht.length;ft++){var pt=Ht[ft];if(!(St!==pt.xref||kt!==pt.yref))if(At){var Dt=!!pt.subtract;At=xt(At,pt,Dt),Ft=Q(At)}else At=[pt],Ft=B(pt)}return Ft}function jt(Ht,St){for(var kt=[],Ft=Ht._fullLayout,At=Ft.selections,ft=At.length,pt=0;pt<ft;pt++)if(!(St&&pt!==Ft._activeSelectionIndex)){var Dt=At[pt];if(Dt){var Ut=Dt.xref,$t=Dt.yref,re=E(Ht,Ut,"x"),Be=E(Ht,$t,"y"),We,me,Se,je,vr;if(Dt.type==="rect"){vr=[];var he=ue(re,Dt.x0),Ye=ue(re,Dt.x1),Qe=ue(Be,Dt.y0),mr=ue(Be,Dt.y1);vr=[[he,Qe],[he,mr],[Ye,mr],[Ye,Qe]],We=Math.min(he,Ye),me=Math.max(he,Ye),Se=Math.min(Qe,mr),je=Math.max(Qe,mr),vr.xmin=We,vr.xmax=me,vr.ymin=Se,vr.ymax=je,vr.xref=Ut,vr.yref=$t,vr.subtract=!1,vr.isRect=!0,kt.push(vr)}else if(Dt.type==="path")for(var ir=Dt.path.split("Z"),ve=[],ne=0;ne<ir.length;ne++){var ge=ir[ne];if(ge){ge+="Z";var Ae=u.extractPathCoords(ge,g.paramIsX,"raw"),Re=u.extractPathCoords(ge,g.paramIsY,"raw");We=1/0,me=-1/0,Se=1/0,je=-1/0,vr=[];for(var ze=0;ze<Ae.length;ze++){var ke=ue(re,Ae[ze]),_e=ue(Be,Re[ze]);vr.push([ke,_e]),We=Math.min(ke,We),me=Math.max(ke,me),Se=Math.min(_e,Se),je=Math.max(_e,je)}vr.xmin=We,vr.xmax=me,vr.ymin=Se,vr.ymax=je,vr.xref=Ut,vr.yref=$t,vr.subtract=ie(vr,ve),ve.push(vr),kt.push(vr)}}}}return kt}function ie(Ht,St){for(var kt=!1,Ft=0;Ft<St.length;Ft++)for(var At=St[Ft],ft=0;ft<Ht.length;ft++)if(P(Ht[ft],At)){kt=!kt;break}return kt}function ue(Ht,St){return Ht.type==="date"&&(St=St.replace("_"," ")),Ht.type==="log"?Ht.c2p(St):Ht.r2p(St,null,Ht.calendar)}function fe(Ht){for(var St=Ht.length,kt=[],Ft=0;Ft<St;Ft++){var At=Ht[Ft];kt=kt.concat(At),kt=kt.concat([At[0]])}return pe(kt)}function pe(Ht){return Ht.isRect=Ht.length===5&&Ht[0][0]===Ht[4][0]&&Ht[0][1]===Ht[4][1]&&Ht[0][0]===Ht[1][0]&&Ht[2][0]===Ht[3][0]&&Ht[0][1]===Ht[3][1]&&Ht[1][1]===Ht[2][1]||Ht[0][1]===Ht[1][1]&&Ht[2][1]===Ht[3][1]&&Ht[0][0]===Ht[3][0]&&Ht[1][0]===Ht[2][0],Ht.isRect&&(Ht.xmin=Math.min(Ht[0][0],Ht[2][0]),Ht.xmax=Math.max(Ht[0][0],Ht[2][0]),Ht.ymin=Math.min(Ht[0][1],Ht[2][1]),Ht.ymax=Math.max(Ht[0][1],Ht[2][1])),Ht}function Te(Ht){return function(St,kt){for(var Ft,At,ft=0;ft<Ht.length;ft++){var pt=Ht[ft],Dt=pt._id,Ut=Dt.charAt(0);if(kt.isRect){Ft||(Ft={});var $t=kt[Ut+"min"],re=kt[Ut+"max"];$t!==void 0&&re!==void 0&&(Ft[Dt]=[_(pt,$t),_(pt,re)].sort(S))}else At||(At={}),At[Dt]=kt.map(N(pt))}Ft&&(St.range=Ft),At&&(St.lassoPoints=At)}}function Qt(Ht){var St=Ht.plotinfo;return St.fillRangeItems||Te(Ht.xaxes.concat(Ht.yaxes))}function Pt(Ht,St){Ht.emit("plotly_selecting",St)}function Ot(Ht,St){St&&(St.selections=(Ht.layout||{}).selections||[]),Ht.emit("plotly_selected",St)}function Nt(Ht){Ht.emit("plotly_deselect",null)}j.exports={reselect:Tt,prepSelect:$,clearOutline:T,clearSelectionsCache:K,selectOnClick:et}},46056:function(j,V,t){var b=t(13916),P=t(25376),o=t(52904).line,L=t(98192).u,A=t(92880).extendFlat,v=t(31780).templatedArray;t(36208);var p=t(45464),r=t(21776).ye,e=t(97728);j.exports=v("shape",{visible:A({},p.visible,{editType:"calc+arraydraw"}),showlegend:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},legend:A({},p.legend,{editType:"calc+arraydraw"}),legendgroup:A({},p.legendgroup,{editType:"calc+arraydraw"}),legendgrouptitle:{text:A({},p.legendgrouptitle.text,{editType:"calc+arraydraw"}),font:P({editType:"calc+arraydraw"}),editType:"calc+arraydraw"},legendrank:A({},p.legendrank,{editType:"calc+arraydraw"}),legendwidth:A({},p.legendwidth,{editType:"calc+arraydraw"}),type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above",editType:"arraydraw"},xref:A({},b.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},x0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},x1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},yref:A({},b.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},y0shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},y1shift:{valType:"number",dflt:0,min:-1,max:1,editType:"calc"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:A({},o.color,{editType:"arraydraw"}),width:A({},o.width,{editType:"calc+arraydraw"}),dash:A({},L,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},label:{text:{valType:"string",dflt:"",editType:"arraydraw"},texttemplate:r({},{keys:Object.keys(e)}),font:P({editType:"calc+arraydraw",colorEditType:"arraydraw"}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"],editType:"arraydraw"},textangle:{valType:"angle",dflt:"auto",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],editType:"calc+arraydraw"},padding:{valType:"number",dflt:3,min:0,editType:"arraydraw"},editType:"arraydraw"},editType:"arraydraw"})},96084:function(j,V,t){var b=t(3400),P=t(54460),o=t(85448),L=t(65152);j.exports=function(s){var n=s._fullLayout,l=b.filterVisible(n.shapes);if(!(!l.length||!s._fullData.length))for(var f=0;f<l.length;f++){var u=l[f];u._extremes={};var g,h,T=P.getRefType(u.xref),c=P.getRefType(u.yref);u.xref!=="paper"&&T!=="domain"&&(g=P.getFromId(s,u.xref),h=r(g,u,o.paramIsX),h&&(u._extremes[g._id]=P.findExtremes(g,h,A(u)))),u.yref!=="paper"&&c!=="domain"&&(g=P.getFromId(s,u.yref),h=r(g,u,o.paramIsY),h&&(u._extremes[g._id]=P.findExtremes(g,h,v(u))))}};function A(e){return p(e.line.width,e.xsizemode,e.x0,e.x1,e.path,!1)}function v(e){return p(e.line.width,e.ysizemode,e.y0,e.y1,e.path,!0)}function p(e,s,n,l,f,u){var g=e/2,h=u;if(s==="pixel"){var T=f?L.extractPathCoords(f,u?o.paramIsY:o.paramIsX):[n,l],c=b.aggNums(Math.max,null,T),i=b.aggNums(Math.min,null,T),d=i<0?Math.abs(i)+g:g,x=c>0?c+g:g;return{ppad:g,ppadplus:h?d:x,ppadminus:h?x:d}}else return{ppad:g}}function r(e,s,n){var l=e._id.charAt(0)==="x"?"x":"y",f=e.type==="category"||e.type==="multicategory",u,g,h=0,T=0,c=f?e.r2c:e.d2c,i=s[l+"sizemode"]==="scaled";if(i?(u=s[l+"0"],g=s[l+"1"],f&&(h=s[l+"0shift"],T=s[l+"1shift"])):(u=s[l+"anchor"],g=s[l+"anchor"]),u!==void 0)return[c(u)+h,c(g)+T];if(s.path){var d=1/0,x=-1/0,w=s.path.match(o.segmentRE),C,y,S,M,a;for(e.type==="date"&&(c=L.decodeDate(c)),C=0;C<w.length;C++)y=w[C],S=n[y.charAt(0)].drawn,S!==void 0&&(M=w[C].substr(1).match(o.paramRE),!(!M||M.length<S)&&(a=c(M[S]),a<d&&(d=a),a>x&&(x=a)));if(x>=d)return[d,x]}}},85448:function(j){j.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},43712:function(j,V,t){var b=t(3400),P=t(54460),o=t(51272),L=t(46056),A=t(65152);j.exports=function(e,s){o(e,s,{name:"shapes",handleItemDefaults:p})};function v(r,e){return r?"bottom":e.indexOf("top")!==-1?"top":e.indexOf("bottom")!==-1?"bottom":"middle"}function p(r,e,s){function n(nt,Z){return b.coerce(r,e,L,nt,Z)}e._isShape=!0;var l=n("visible");if(l){var f=n("showlegend");f&&(n("legend"),n("legendwidth"),n("legendgroup"),n("legendgrouptitle.text"),b.coerceFont(n,"legendgrouptitle.font"),n("legendrank"));var u=n("path"),g=u?"path":"rect",h=n("type",g),T=h!=="path";T&&delete e.path,n("editable"),n("layer"),n("opacity"),n("fillcolor"),n("fillrule");var c=n("line.width");c&&(n("line.color"),n("line.dash"));for(var i=n("xsizemode"),d=n("ysizemode"),x=["x","y"],w=0;w<2;w++){var C=x[w],y=C+"anchor",S=C==="x"?i:d,M={_fullLayout:s},a,E,m,k=P.coerceRef(r,e,M,C,void 0,"paper"),I=P.getRefType(k);if(I==="range"?(a=P.getFromId(M,k),a._shapeIndices.push(e._index),m=A.rangeToShapePosition(a),E=A.shapePositionToRange(a),(a.type==="category"||a.type==="multicategory")&&(n(C+"0shift"),n(C+"1shift"))):E=m=b.identity,T){var O=.25,z=.75,B=C+"0",F=C+"1",_=r[B],N=r[F];r[B]=E(r[B],!0),r[F]=E(r[F],!0),S==="pixel"?(n(B,0),n(F,10)):(P.coercePosition(e,M,n,k,B,O),P.coercePosition(e,M,n,k,F,z)),e[B]=m(e[B]),e[F]=m(e[F]),r[B]=_,r[F]=N}if(S==="pixel"){var G=r[y];r[y]=E(r[y],!0),P.coercePosition(e,M,n,k,y,.25),e[y]=m(e[y]),r[y]=G}}T&&b.noneOrAll(r,e,["x0","x1","y0","y1"]);var X=h==="line",$,et;if(T&&($=n("label.texttemplate")),$||(et=n("label.text")),et||$){n("label.textangle");var ot=n("label.textposition",X?"middle":"middle center");n("label.xanchor"),n("label.yanchor",v(X,ot)),n("label.padding"),b.coerceFont(n,"label.font",s.font)}}}},60728:function(j,V,t){var b=t(3400),P=t(54460),o=t(72736),L=t(43616),A=t(9856).readPaths,v=t(65152),p=v.getPathString,r=t(97728),e=t(84284).FROM_TL;j.exports=function(f,u,g,h){if(h.selectAll(".shape-label").remove(),!!(g.label.text||g.label.texttemplate)){var T;if(g.label.texttemplate){var c={};if(g.type!=="path"){var i=P.getFromId(f,g.xref),d=P.getFromId(f,g.yref);for(var x in r){var w=r[x](g,i,d);w!==void 0&&(c[x]=w)}}T=b.texttemplateStringForShapes(g.label.texttemplate,{},f._fullLayout._d3locale,c)}else T=g.label.text;var C={"data-index":u},y=g.label.font,S={"data-notex":1},M=h.append("g").attr(C).classed("shape-label",!0),a=M.append("text").attr(S).classed("shape-label-text",!0).text(T),E,m,k,I;if(g.path){var O=p(f,g),z=A(O,f);E=1/0,k=1/0,m=-1/0,I=-1/0;for(var B=0;B<z.length;B++)for(var F=0;F<z[B].length;F++)for(var _=z[B][F],N=1;N<_.length;N+=2){var G=_[N],X=_[N+1];E=Math.min(E,G),m=Math.max(m,G),k=Math.min(k,X),I=Math.max(I,X)}}else{var $=P.getFromId(f,g.xref),et=g.x0shift,ot=g.x1shift,nt=P.getRefType(g.xref),Z=P.getFromId(f,g.yref),Q=g.y0shift,W=g.y1shift,J=P.getRefType(g.yref),it=function(gt,Mt){var Lt=v.getDataToPixel(f,$,Mt,!1,nt);return Lt(gt)},K=function(gt,Mt){var Lt=v.getDataToPixel(f,Z,Mt,!0,J);return Lt(gt)};E=it(g.x0,et),m=it(g.x1,ot),k=K(g.y0,Q),I=K(g.y1,W)}var H=g.label.textangle;H==="auto"&&(g.type==="line"?H=s(E,k,m,I):H=0),a.call(function(gt){return gt.call(L.font,y).attr({}),o.convertToTspans(gt,f),gt});var at=L.bBox(a.node()),tt=n(E,k,m,I,g,H,at),lt=tt.textx,dt=tt.texty,mt=tt.xanchor;a.attr({"text-anchor":{left:"start",center:"middle",right:"end"}[mt],y:dt,x:lt,transform:"rotate("+H+","+lt+","+dt+")"}).call(o.positionText,lt,dt)}};function s(l,f,u,g){var h,T;return T=Math.abs(u-l),u>=l?h=f-g:h=g-f,-180/Math.PI*Math.atan2(h,T)}function n(l,f,u,g,h,T,c){var i=h.label.textposition,d=h.label.textangle,x=h.label.padding,w=h.type,C=Math.PI/180*T,y=Math.sin(C),S=Math.cos(C),M=h.label.xanchor,a=h.label.yanchor,E,m,k,I;if(w==="line"){i==="start"?(E=l,m=f):i==="end"?(E=u,m=g):(E=(l+u)/2,m=(f+g)/2),M==="auto"&&(i==="start"?d==="auto"?u>l?M="left":u<l?M="right":M="center":u>l?M="right":u<l?M="left":M="center":i==="end"?d==="auto"?u>l?M="right":u<l?M="left":M="center":u>l?M="left":u<l?M="right":M="center":M="center");var O={left:1,center:0,right:-1},z={bottom:-1,middle:0,top:1};if(d==="auto"){var B=z[a];k=-x*y*B,I=x*S*B}else{var F=O[M],_=z[a];k=x*F,I=x*_}E=E+k,m=m+I}else k=x+3,i.indexOf("right")!==-1?(E=Math.max(l,u)-k,M==="auto"&&(M="right")):i.indexOf("left")!==-1?(E=Math.min(l,u)+k,M==="auto"&&(M="left")):(E=(l+u)/2,M==="auto"&&(M="center")),i.indexOf("top")!==-1?m=Math.min(f,g):i.indexOf("bottom")!==-1?m=Math.max(f,g):m=(f+g)/2,I=x,a==="bottom"?m=m-I:a==="top"&&(m=m+I);var N=e[a],G=h.label.font.size,X=c.height,$=(X*N-G)*y,et=-(X*N-G)*S;return{textx:E+$,texty:m+et,xanchor:M}}},55496:function(j,V,t){var b=t(3400),P=b.strTranslate,o=t(86476),L=t(72760),A=L.drawMode,v=L.selectMode,p=t(24040),r=t(76308),e=t(7e3),s=e.i000,n=e.i090,l=e.i180,f=e.i270,u=t(1936),g=u.clearOutlineControllers,h=t(9856),T=h.pointsOnRectangle,c=h.pointsOnEllipse,i=h.writePaths,d=t(93940).newShapes,x=t(93940).createShapeObj,w=t(5968),C=t(60728);j.exports=function a(E,m,k,I){I||(I=0);var O=k.gd;function z(){a(E,m,k,I++),(c(E[0])||k.hasText)&&B({redrawing:!0})}function B(xt){var Ct={};k.isActiveShape!==void 0&&(k.isActiveShape=!1,Ct=d(m,k)),k.isActiveSelection!==void 0&&(k.isActiveSelection=!1,Ct=w(m,k),O._fullLayout._reselect=!0),Object.keys(Ct).length&&p.call((xt||{}).redrawing?"relayout":"_guiRelayout",O,Ct)}var F=O._fullLayout,_=F._zoomlayer,N=k.dragmode,G=A(N),X=v(N);(G||X)&&(O._fullLayout._outlining=!0),g(O),m.attr("d",i(E));var $,et,ot,nt,Z;if(!I&&(k.isActiveShape||k.isActiveSelection)){Z=y([],E);var Q=_.append("g").attr("class","outline-controllers");lt(Q),zt()}if(G&&k.hasText){var W=_.select(".label-temp"),J=x(m,k,k.dragmode);C(O,"label-temp",J,W)}function it(xt){ot=+xt.srcElement.getAttribute("data-i"),nt=+xt.srcElement.getAttribute("data-j"),$[ot][nt].moveFn=K}function K(xt,Ct){if(E.length){var wt=Z[ot][nt][1],Rt=Z[ot][nt][2],Tt=E[ot],Bt=Tt.length;if(T(Tt)){var Gt=xt,te=Ct;if(k.isActiveSelection){var Wt=S(Tt,nt);Wt[1]===Tt[nt][1]?te=0:Gt=0}for(var jt=0;jt<Bt;jt++)if(jt!==nt){var ie=Tt[jt];ie[1]===Tt[nt][1]&&(ie[1]=wt+Gt),ie[2]===Tt[nt][2]&&(ie[2]=Rt+te)}if(Tt[nt][1]=wt+Gt,Tt[nt][2]=Rt+te,!T(Tt))for(var ue=0;ue<Bt;ue++)for(var fe=0;fe<Tt[ue].length;fe++)Tt[ue][fe]=Z[ot][ue][fe]}else Tt[nt][1]=wt+xt,Tt[nt][2]=Rt+Ct;z()}}function H(){B()}function at(){if(E.length&&E[ot]&&E[ot].length){for(var xt=[],Ct=0;Ct<E[ot].length;Ct++)Ct!==nt&&xt.push(E[ot][Ct]);xt.length>1&&!(xt.length===2&&xt[1][0]==="Z")&&(nt===0&&(xt[0][0]="M"),E[ot]=xt,z(),B())}}function tt(xt,Ct){if(xt===2){ot=+Ct.srcElement.getAttribute("data-i"),nt=+Ct.srcElement.getAttribute("data-j");var wt=E[ot];!T(wt)&&!c(wt)&&at()}}function lt(xt){$=[];for(var Ct=0;Ct<E.length;Ct++){var wt=E[Ct],Rt=T(wt),Tt=!Rt&&c(wt);$[Ct]=[];for(var Bt=wt.length,Gt=0;Gt<Bt;Gt++)if(wt[Gt][0]!=="Z"&&!(Tt&&Gt!==s&&Gt!==n&&Gt!==l&&Gt!==f)){var te=Rt&&k.isActiveSelection,Wt;te&&(Wt=S(wt,Gt));var jt=wt[Gt][1],ie=wt[Gt][2],ue=xt.append(te?"rect":"circle").attr("data-i",Ct).attr("data-j",Gt).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(te){var fe=Wt[1]-jt,pe=Wt[2]-ie,Te=pe?5:Math.max(Math.min(25,Math.abs(fe)-5),5),Qt=fe?5:Math.max(Math.min(25,Math.abs(pe)-5),5);ue.classed(pe?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",Te).attr("height",Qt).attr("x",jt-Te/2).attr("y",ie-Qt/2).attr("transform",P(fe/2,pe/2))}else ue.classed("cursor-grab",!0).attr("r",5).attr("cx",jt).attr("cy",ie);$[Ct][Gt]={element:ue.node(),gd:O,prepFn:it,doneFn:H,clickFn:tt},o.init($[Ct][Gt])}}}function dt(xt,Ct){if(E.length)for(var wt=0;wt<E.length;wt++)for(var Rt=0;Rt<E[wt].length;Rt++)for(var Tt=0;Tt+2<E[wt][Rt].length;Tt+=2)E[wt][Rt][Tt+1]=Z[wt][Rt][Tt+1]+xt,E[wt][Rt][Tt+2]=Z[wt][Rt][Tt+2]+Ct}function mt(xt,Ct){dt(xt,Ct),z()}function gt(xt){ot=+xt.srcElement.getAttribute("data-i"),ot||(ot=0),et[ot].moveFn=mt}function Mt(){B()}function Lt(xt){xt===2&&M(O)}function zt(){if(et=[],!!E.length){var xt=0;et[xt]={element:m[0][0],gd:O,prepFn:gt,doneFn:Mt,clickFn:Lt},o.init(et[xt])}}};function y(a,E){for(var m=0;m<E.length;m++){var k=E[m];a[m]=[];for(var I=0;I<k.length;I++){a[m][I]=[];for(var O=0;O<k[I].length;O++)a[m][I][O]=k[I][O]}}return a}function S(a,E){var m=a[E][1],k=a[E][2],I=a.length,O,z,B;return O=(E+1)%I,z=a[O][1],B=a[O][2],z===m&&B===k&&(O=(E+2)%I,z=a[O][1],B=a[O][2]),[O,z,B]}function M(a){if(v(a._fullLayout.dragmode)){g(a);var E=a._fullLayout._activeSelectionIndex,m=(a.layout||{}).selections||[];if(E<m.length){for(var k=[],I=0;I<m.length;I++)I!==E&&k.push(m[I]);delete a._fullLayout._activeSelectionIndex;var O=a._fullLayout.selections[E];a._fullLayout._deselect={xref:O.xref,yref:O.yref},p.call("_guiRelayout",a,{selections:k})}}}},4016:function(j,V,t){var b=t(33428),P=t(24040),o=t(3400),L=t(54460),A=t(9856).readPaths,v=t(55496),p=t(60728),r=t(1936).clearOutlineControllers,e=t(76308),s=t(43616),n=t(31780).arrayEditor,l=t(86476),f=t(93972),u=t(85448),g=t(65152),h=g.getPathString;j.exports={draw:T,drawOne:d,eraseActiveShape:M,drawLabel:p};function T(a){var E=a._fullLayout;E._shapeUpperLayer.selectAll("path").remove(),E._shapeLowerLayer.selectAll("path").remove(),E._shapeUpperLayer.selectAll("text").remove(),E._shapeLowerLayer.selectAll("text").remove();for(var m in E._plots){var k=E._plots[m].shapelayer;k&&(k.selectAll("path").remove(),k.selectAll("text").remove())}for(var I=0;I<E.shapes.length;I++)E.shapes[I].visible===!0&&d(a,I)}function c(a){return!!a._fullLayout._outlining}function i(a){return!a._context.edits.shapePosition}function d(a,E){a._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+E+'"]').remove();var m=g.makeShapesOptionsAndPlotinfo(a,E),k=m.options,I=m.plotinfo;if(!k._input||k.visible!==!0)return;if(k.layer==="above")z(a._fullLayout._shapeUpperLayer);else if(k.xref==="paper"||k.yref==="paper")z(a._fullLayout._shapeLowerLayer);else if(k.layer==="between")z(I.shapelayerBetween);else if(I._hadPlotinfo){var O=I.mainplotinfo||I;z(O.shapelayer)}else z(a._fullLayout._shapeLowerLayer);function z(B){var F=h(a,k),_={"data-index":E,"fill-rule":k.fillrule,d:F},N=k.opacity,G=k.fillcolor,X=k.line.width?k.line.color:"rgba(0,0,0,0)",$=k.line.width,et=k.line.dash;!$&&k.editable===!0&&($=5,et="solid");var ot=F[F.length-1]!=="Z",nt=i(a)&&k.editable&&a._fullLayout._activeShapeIndex===E;nt&&(G=ot?"rgba(0,0,0,0)":a._fullLayout.activeshape.fillcolor,N=a._fullLayout.activeshape.opacity);var Z=B.append("g").classed("shape-group",!0).attr({"data-index":E}),Q=Z.append("path").attr(_).style("opacity",N).call(e.stroke,X).call(e.fill,G).call(s.dashLine,et,$);x(Z,a,k),p(a,E,k,Z);var W;if((nt||a._context.edits.shapePosition)&&(W=n(a.layout,"shapes",k)),nt){Q.style({cursor:"move"});var J={element:Q.node(),plotinfo:I,gd:a,editHelpers:W,hasText:k.label.text||k.label.texttemplate,isActiveShape:!0},it=A(F,a);v(it,Q,J)}else a._context.edits.shapePosition?w(a,Q,k,E,B,W):k.editable===!0&&Q.style("pointer-events",ot||e.opacity(G)*N<=.5?"stroke":"all");Q.node().addEventListener("click",function(){return y(a,Q)})}}function x(a,E,m){var k=(m.xref+m.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");s.setClipUrl(a,k?"clip"+E._fullLayout._uid+k:null,E)}function w(a,E,m,k,I,O){var z=10,B=10,F=m.xsizemode==="pixel",_=m.ysizemode==="pixel",N=m.type==="line",G=m.type==="path",X=O.modifyItem,$,et,ot,nt,Z,Q,W,J,it,K,H,at,tt,lt,dt,mt=b.select(E.node().parentNode),gt=L.getFromId(a,m.xref),Mt=L.getRefType(m.xref),Lt=L.getFromId(a,m.yref),zt=L.getRefType(m.yref),xt=m.x0shift,Ct=m.x1shift,wt=m.y0shift,Rt=m.y1shift,Tt=function(Ft,At){var ft=g.getDataToPixel(a,gt,At,!1,Mt);return ft(Ft)},Bt=function(Ft,At){var ft=g.getDataToPixel(a,Lt,At,!0,zt);return ft(Ft)},Gt=g.getPixelToData(a,gt,!1,Mt),te=g.getPixelToData(a,Lt,!0,zt),Wt=ue(),jt={element:Wt.node(),gd:a,prepFn:Te,doneFn:Qt,clickFn:Pt},ie;l.init(jt),Wt.node().onmousemove=pe;function ue(){return N?fe():E}function fe(){var Ft=10,At=Math.max(m.line.width,Ft),ft=I.append("g").attr("data-index",k).attr("drag-helper",!0);ft.append("path").attr("d",E.attr("d")).style({cursor:"move","stroke-width":At,"stroke-opacity":"0"});var pt={"fill-opacity":"0"},Dt=Math.max(At/2,Ft);return ft.append("circle").attr({"data-line-point":"start-point",cx:F?Tt(m.xanchor)+m.x0:Tt(m.x0,xt),cy:_?Bt(m.yanchor)-m.y0:Bt(m.y0,wt),r:Dt}).style(pt).classed("cursor-grab",!0),ft.append("circle").attr({"data-line-point":"end-point",cx:F?Tt(m.xanchor)+m.x1:Tt(m.x1,Ct),cy:_?Bt(m.yanchor)-m.y1:Bt(m.y1,Rt),r:Dt}).style(pt).classed("cursor-grab",!0),ft}function pe(Ft){if(c(a)){ie=null;return}if(N)Ft.target.tagName==="path"?ie="move":ie=Ft.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var At=jt.element.getBoundingClientRect(),ft=At.right-At.left,pt=At.bottom-At.top,Dt=Ft.clientX-At.left,Ut=Ft.clientY-At.top,$t=!G&&ft>z&&pt>B&&!Ft.shiftKey?l.getCursor(Dt/ft,1-Ut/pt):"move";f(E,$t),ie=$t.split("-")[0]}}function Te(Ft){c(a)||(F&&(Z=Tt(m.xanchor)),_&&(Q=Bt(m.yanchor)),m.type==="path"?dt=m.path:($=F?m.x0:Tt(m.x0),et=_?m.y0:Bt(m.y0),ot=F?m.x1:Tt(m.x1),nt=_?m.y1:Bt(m.y1)),$<ot?(it=$,tt="x0",K=ot,lt="x1"):(it=ot,tt="x1",K=$,lt="x0"),!_&&et<nt||_&&et>nt?(W=et,H="y0",J=nt,at="y1"):(W=nt,H="y1",J=et,at="y0"),pe(Ft),Ht(I,m),kt(E,m,a),jt.moveFn=ie==="move"?Ot:Nt,jt.altKey=Ft.altKey)}function Qt(){c(a)||(f(E),St(I),x(E,a,m),P.call("_guiRelayout",a,O.getUpdateObj()))}function Pt(){c(a)||St(I)}function Ot(Ft,At){if(m.type==="path"){var ft=function(Ut){return Ut},pt=ft,Dt=ft;F?X("xanchor",m.xanchor=Gt(Z+Ft)):(pt=function($t){return Gt(Tt($t)+Ft)},gt&&gt.type==="date"&&(pt=g.encodeDate(pt))),_?X("yanchor",m.yanchor=te(Q+At)):(Dt=function($t){return te(Bt($t)+At)},Lt&&Lt.type==="date"&&(Dt=g.encodeDate(Dt))),X("path",m.path=C(dt,pt,Dt))}else F?X("xanchor",m.xanchor=Gt(Z+Ft)):(X("x0",m.x0=Gt($+Ft)),X("x1",m.x1=Gt(ot+Ft))),_?X("yanchor",m.yanchor=te(Q+At)):(X("y0",m.y0=te(et+At)),X("y1",m.y1=te(nt+At)));E.attr("d",h(a,m)),Ht(I,m),p(a,k,m,mt)}function Nt(Ft,At){if(G){var ft=function(ir){return ir},pt=ft,Dt=ft;F?X("xanchor",m.xanchor=Gt(Z+Ft)):(pt=function(ve){return Gt(Tt(ve)+Ft)},gt&&gt.type==="date"&&(pt=g.encodeDate(pt))),_?X("yanchor",m.yanchor=te(Q+At)):(Dt=function(ve){return te(Bt(ve)+At)},Lt&&Lt.type==="date"&&(Dt=g.encodeDate(Dt))),X("path",m.path=C(dt,pt,Dt))}else if(N){if(ie==="resize-over-start-point"){var Ut=$+Ft,$t=_?et-At:et+At;X("x0",m.x0=F?Ut:Gt(Ut)),X("y0",m.y0=_?$t:te($t))}else if(ie==="resize-over-end-point"){var re=ot+Ft,Be=_?nt-At:nt+At;X("x1",m.x1=F?re:Gt(re)),X("y1",m.y1=_?Be:te(Be))}}else{var We=function(ir){return ie.indexOf(ir)!==-1},me=We("n"),Se=We("s"),je=We("w"),vr=We("e"),he=me?W+At:W,Ye=Se?J+At:J,Qe=je?it+Ft:it,mr=vr?K+Ft:K;_&&(me&&(he=W-At),Se&&(Ye=J-At)),(!_&&Ye-he>B||_&&he-Ye>B)&&(X(H,m[H]=_?he:te(he)),X(at,m[at]=_?Ye:te(Ye))),mr-Qe>z&&(X(tt,m[tt]=F?Qe:Gt(Qe)),X(lt,m[lt]=F?mr:Gt(mr)))}E.attr("d",h(a,m)),Ht(I,m),p(a,k,m,mt)}function Ht(Ft,At){(F||_)&&ft();function ft(){var pt=At.type!=="path",Dt=Ft.selectAll(".visual-cue").data([0]),Ut=1;Dt.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ut}).classed("visual-cue",!0);var $t=Tt(F?At.xanchor:o.midRange(pt?[At.x0,At.x1]:g.extractPathCoords(At.path,u.paramIsX))),re=Bt(_?At.yanchor:o.midRange(pt?[At.y0,At.y1]:g.extractPathCoords(At.path,u.paramIsY)));if($t=g.roundPositionForSharpStrokeRendering($t,Ut),re=g.roundPositionForSharpStrokeRendering(re,Ut),F&&_){var Be="M"+($t-1-Ut)+","+(re-1-Ut)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";Dt.attr("d",Be)}else if(F){var We="M"+($t-1-Ut)+","+(re-9-Ut)+"v18 h2 v-18 Z";Dt.attr("d",We)}else{var me="M"+($t-9-Ut)+","+(re-1-Ut)+"h18 v2 h-18 Z";Dt.attr("d",me)}}}function St(Ft){Ft.selectAll(".visual-cue").remove()}function kt(Ft,At,ft){var pt=At.xref,Dt=At.yref,Ut=L.getFromId(ft,pt),$t=L.getFromId(ft,Dt),re="";pt!=="paper"&&!Ut.autorange&&(re+=pt),Dt!=="paper"&&!$t.autorange&&(re+=Dt),s.setClipUrl(Ft,re?"clip"+ft._fullLayout._uid+re:null,ft)}}function C(a,E,m){return a.replace(u.segmentRE,function(k){var I=0,O=k.charAt(0),z=u.paramIsX[O],B=u.paramIsY[O],F=u.numParams[O],_=k.substr(1).replace(u.paramRE,function(N){return I>=F||(z[I]?N=E(N):B[I]&&(N=m(N)),I++),N});return O+_})}function y(a,E){if(i(a)){var m=E.node(),k=+m.getAttribute("data-index");if(k>=0){if(k===a._fullLayout._activeShapeIndex){S(a);return}a._fullLayout._activeShapeIndex=k,a._fullLayout._deactivateShape=S,T(a)}}}function S(a){if(i(a)){var E=a._fullLayout._activeShapeIndex;E>=0&&(r(a),delete a._fullLayout._activeShapeIndex,T(a))}}function M(a){if(i(a)){r(a);var E=a._fullLayout._activeShapeIndex,m=(a.layout||{}).shapes||[];if(E<m.length){for(var k=[],I=0;I<m.length;I++)I!==E&&k.push(m[I]);return delete a._fullLayout._activeShapeIndex,P.call("_guiRelayout",a,{shapes:k})}}}},92872:function(j,V,t){var b=t(67824).overrideAll,P=t(45464),o=t(25376),L=t(98192).u,A=t(92880).extendFlat,v=t(21776).ye,p=t(97728);j.exports=b({newshape:{visible:A({},P.visible,{}),showlegend:{valType:"boolean",dflt:!1},legend:A({},P.legend,{}),legendgroup:A({},P.legendgroup,{}),legendgrouptitle:{text:A({},P.legendgrouptitle.text,{}),font:o({})},legendrank:A({},P.legendrank,{}),legendwidth:A({},P.legendwidth,{}),line:{color:{valType:"color"},width:{valType:"number",min:0,dflt:4},dash:A({},L,{dflt:"solid"})},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd"},opacity:{valType:"number",min:0,max:1,dflt:1},layer:{valType:"enumerated",values:["below","above","between"],dflt:"above"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal"},name:A({},P.name,{}),label:{text:{valType:"string",dflt:""},texttemplate:v({newshape:!0},{keys:Object.keys(p)}),font:o({}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right","start","middle","end"]},textangle:{valType:"angle",dflt:"auto"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto"},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},padding:{valType:"number",dflt:3,min:0}}},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)"},opacity:{valType:"number",min:0,max:1,dflt:.5}}},"none","from-root")},7e3:function(j){var V=32;j.exports={CIRCLE_SIDES:V,i000:0,i090:V/4,i180:V/2,i270:V/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},65144:function(j,V,t){var b=t(76308),P=t(3400);function o(L,A){return L?"bottom":A.indexOf("top")!==-1?"top":A.indexOf("bottom")!==-1?"bottom":"middle"}j.exports=function(A,v,p){p("newshape.visible"),p("newshape.name"),p("newshape.showlegend"),p("newshape.legend"),p("newshape.legendwidth"),p("newshape.legendgroup"),p("newshape.legendgrouptitle.text"),P.coerceFont(p,"newshape.legendgrouptitle.font"),p("newshape.legendrank"),p("newshape.drawdirection"),p("newshape.layer"),p("newshape.fillcolor"),p("newshape.fillrule"),p("newshape.opacity");var r=p("newshape.line.width");if(r){var e=(A||{}).plot_bgcolor||"#FFF";p("newshape.line.color",b.contrast(e)),p("newshape.line.dash")}var s=A.dragmode==="drawline",n=p("newshape.label.text"),l=p("newshape.label.texttemplate");if(n||l){p("newshape.label.textangle");var f=p("newshape.label.textposition",s?"middle":"middle center");p("newshape.label.xanchor"),p("newshape.label.yanchor",o(s,f)),p("newshape.label.padding"),P.coerceFont(p,"newshape.label.font",v.font)}p("activeshape.fillcolor"),p("activeshape.opacity")}},9856:function(j,V,t){var b=t(21984),P=t(7e3),o=P.CIRCLE_SIDES,L=P.SQRT2,A=t(5840),v=A.p2r,p=A.r2p,r=[0,3,4,5,6,1,2],e=[0,3,4,1,2];V.writePaths=function(l){var f=l.length;if(!f)return"M0,0Z";for(var u="",g=0;g<f;g++)for(var h=l[g].length,T=0;T<h;T++){var c=l[g][T][0];if(c==="Z")u+="Z";else for(var i=l[g][T].length,d=0;d<i;d++){var x=d;c==="Q"||c==="S"?x=e[d]:c==="C"&&(x=r[d]),u+=l[g][T][x],d>0&&d<i-1&&(u+=",")}}return u},V.readPaths=function(l,f,u,g){var h=b(l),T=[],c=-1,i=function(){c++,T[c]=[]},d,x=0,w=0,C,y,S=function(){C=x,y=w};S();for(var M=0;M<h.length;M++){var a=[],E,m,k,I,O=h[M][0],z=O;switch(O){case"M":i(),x=+h[M][1],w=+h[M][2],a.push([z,x,w]),S();break;case"Q":case"S":E=+h[M][1],k=+h[M][2],x=+h[M][3],w=+h[M][4],a.push([z,x,w,E,k]);break;case"C":E=+h[M][1],k=+h[M][2],m=+h[M][3],I=+h[M][4],x=+h[M][5],w=+h[M][6],a.push([z,x,w,E,k,m,I]);break;case"T":case"L":x=+h[M][1],w=+h[M][2],a.push([z,x,w]);break;case"H":z="L",x=+h[M][1],a.push([z,x,w]);break;case"V":z="L",w=+h[M][1],a.push([z,x,w]);break;case"A":z="L";var B=+h[M][1],F=+h[M][2];+h[M][4]||(B=-B,F=-F);var _=x-B,N=w;for(d=1;d<=o/2;d++){var G=2*Math.PI*d/o;a.push([z,_+B*Math.cos(G),N+F*Math.sin(G)])}break;case"Z":(x!==C||w!==y)&&(x=C,w=y,a.push([z,x,w]));break}for(var X=(u||{}).domain,$=f._fullLayout._size,et=u&&u.xsizemode==="pixel",ot=u&&u.ysizemode==="pixel",nt=g===!1,Z=0;Z<a.length;Z++){for(d=0;d+2<7;d+=2){var Q=a[Z][d+1],W=a[Z][d+2];Q===void 0||W===void 0||(x=Q,w=W,u&&(u.xaxis&&u.xaxis.p2r?(nt&&(Q-=u.xaxis._offset),et?Q=p(u.xaxis,u.xanchor)+Q:Q=v(u.xaxis,Q)):(nt&&(Q-=$.l),X?Q=X.x[0]+Q/$.w:Q=Q/$.w),u.yaxis&&u.yaxis.p2r?(nt&&(W-=u.yaxis._offset),ot?W=p(u.yaxis,u.yanchor)-W:W=v(u.yaxis,W)):(nt&&(W-=$.t),X?W=X.y[1]-W/$.h:W=1-W/$.h)),a[Z][d+1]=Q,a[Z][d+2]=W)}T[c].push(a[Z].slice())}}return T};function s(l,f){return Math.abs(l-f)<=1e-6}function n(l,f){var u=f[1]-l[1],g=f[2]-l[2];return Math.sqrt(u*u+g*g)}V.pointsOnRectangle=function(l){var f=l.length;if(f!==5)return!1;for(var u=1;u<3;u++){var g=l[0][u]-l[1][u],h=l[3][u]-l[2][u];if(!s(g,h))return!1;var T=l[0][u]-l[3][u],c=l[1][u]-l[2][u];if(!s(T,c))return!1}return!s(l[0][1],l[1][1])&&!s(l[0][1],l[3][1])?!1:!!(n(l[0],l[1])*n(l[0],l[3]))},V.pointsOnEllipse=function(l){var f=l.length;if(f!==o+1)return!1;f=o;for(var u=0;u<f;u++){var g=(f*2-u)%f,h=(f/2+g)%f,T=(f/2+u)%f;if(!s(n(l[u],l[T]),n(l[g],l[h])))return!1}return!0},V.handleEllipse=function(l,f,u){if(!l)return[f,u];var g=V.ellipseOver({x0:f[0],y0:f[1],x1:u[0],y1:u[1]}),h=(g.x1+g.x0)/2,T=(g.y1+g.y0)/2,c=(g.x1-g.x0)/2,i=(g.y1-g.y0)/2;c||(c=i=i/L),i||(i=c=c/L);for(var d=[],x=0;x<o;x++){var w=x*2*Math.PI/o;d.push([h+c*Math.cos(w),T+i*Math.sin(w)])}return d},V.ellipseOver=function(l){var f=l.x0,u=l.y0,g=l.x1,h=l.y1,T=g-f,c=h-u;f-=T,u-=c;var i=(f+g)/2,d=(u+h)/2,x=L;return T*=x,c*=x,{x0:i-T,y0:d-c,x1:i+T,y1:d+c}},V.fixDatesForPaths=function(l,f,u){var g=f.type==="date",h=u.type==="date";if(!g&&!h)return l;for(var T=0;T<l.length;T++)for(var c=0;c<l[T].length;c++)for(var i=0;i+2<l[T][c].length;i+=2)g&&(l[T][c][i+1]=l[T][c][i+1].replace(" ","_")),h&&(l[T][c][i+2]=l[T][c][i+2].replace(" ","_"));return l}},93940:function(j,V,t){var b=t(72760),P=b.drawMode,o=b.openMode,L=t(7e3),A=L.i000,v=L.i090,p=L.i180,r=L.i270,e=L.cos45,s=L.sin45,n=t(5840),l=n.p2r,f=n.r2p,u=t(1936),g=u.clearOutline,h=t(9856),T=h.readPaths,c=h.writePaths,i=h.ellipseOver,d=h.fixDatesForPaths;function x(C,y){if(C.length){var S=C[0][0];if(S){var M=y.gd,a=y.isActiveShape,E=y.dragmode,m=(M.layout||{}).shapes||[];if(!P(E)&&a!==void 0){var k=M._fullLayout._activeShapeIndex;if(k<m.length)switch(M._fullLayout.shapes[k].type){case"rect":E="drawrect";break;case"circle":E="drawcircle";break;case"line":E="drawline";break;case"path":var I=m[k].path||"";I[I.length-1]==="Z"?E="drawclosedpath":E="drawopenpath";break}}var O=w(C,y,E);g(M);for(var z=y.editHelpers,B=(z||{}).modifyItem,F=[],_=0;_<m.length;_++){var N=M._fullLayout.shapes[_];if(F[_]=N._input,a!==void 0&&_===M._fullLayout._activeShapeIndex){var G=O;switch(N.type){case"line":case"rect":case"circle":B("x0",G.x0-(N.x0shift||0)),B("x1",G.x1-(N.x1shift||0)),B("y0",G.y0-(N.y0shift||0)),B("y1",G.y1-(N.y1shift||0));break;case"path":B("path",G.path);break}}}return a===void 0?(F.push(O),F):z?z.getUpdateObj():{}}}}function w(C,y,S){var M=C[0][0],a=y.gd,E=M.getAttribute("d"),m=a._fullLayout.newshape,k=y.plotinfo,I=y.isActiveShape,O=k.xaxis,z=k.yaxis,B=!!k.domain||!k.xaxis,F=!!k.domain||!k.yaxis,_=o(S),N=T(E,a,k,I),G={editable:!0,visible:m.visible,name:m.name,showlegend:m.showlegend,legend:m.legend,legendwidth:m.legendwidth,legendgroup:m.legendgroup,legendgrouptitle:{text:m.legendgrouptitle.text,font:m.legendgrouptitle.font},legendrank:m.legendrank,label:m.label,xref:B?"paper":O._id,yref:F?"paper":z._id,layer:m.layer,opacity:m.opacity,line:{color:m.line.color,width:m.line.width,dash:m.line.dash}};_||(G.fillcolor=m.fillcolor,G.fillrule=m.fillrule);var X;if(N.length===1&&(X=N[0]),X&&X.length===5&&S==="drawrect")G.type="rect",G.x0=X[0][1],G.y0=X[0][2],G.x1=X[2][1],G.y1=X[2][2];else if(X&&S==="drawline")G.type="line",G.x0=X[0][1],G.y0=X[0][2],G.x1=X[1][1],G.y1=X[1][2];else if(X&&S==="drawcircle"){G.type="circle";var $=X[A][1],et=X[v][1],ot=X[p][1],nt=X[r][1],Z=X[A][2],Q=X[v][2],W=X[p][2],J=X[r][2],it=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),K=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");it&&($=f(k.xaxis,$),et=f(k.xaxis,et),ot=f(k.xaxis,ot),nt=f(k.xaxis,nt)),K&&(Z=f(k.yaxis,Z),Q=f(k.yaxis,Q),W=f(k.yaxis,W),J=f(k.yaxis,J));var H=(et+nt)/2,at=(Z+W)/2,tt=(nt-et+ot-$)/2,lt=(J-Q+W-Z)/2,dt=i({x0:H,y0:at,x1:H+tt*e,y1:at+lt*s});it&&(dt.x0=l(k.xaxis,dt.x0),dt.x1=l(k.xaxis,dt.x1)),K&&(dt.y0=l(k.yaxis,dt.y0),dt.y1=l(k.yaxis,dt.y1)),G.x0=dt.x0,G.y0=dt.y0,G.x1=dt.x1,G.y1=dt.y1}else G.type="path",O&&z&&d(N,O,z),G.path=c(N),X=null;return G}j.exports={newShapes:x,createShapeObj:w}},1936:function(j){function V(b){var P=b._fullLayout._zoomlayer;P&&P.selectAll(".outline-controllers").remove()}function t(b){var P=b._fullLayout._zoomlayer;P&&P.selectAll(".select-outline").remove(),b._fullLayout._outlining=!1}j.exports={clearOutlineControllers:V,clearOutline:t}},65152:function(j,V,t){var b=t(85448),P=t(3400),o=t(54460);V.rangeToShapePosition=function(v){return v.type==="log"?v.r2d:function(p){return p}},V.shapePositionToRange=function(v){return v.type==="log"?v.d2r:function(p){return p}},V.decodeDate=function(v){return function(p){return p.replace&&(p=p.replace("_"," ")),v(p)}},V.encodeDate=function(v){return function(p){return v(p).replace(" ","_")}},V.extractPathCoords=function(v,p,r){var e=[],s=v.match(b.segmentRE);return s.forEach(function(n){var l=p[n.charAt(0)].drawn;if(l!==void 0){var f=n.substr(1).match(b.paramRE);if(!(!f||f.length<l)){var u=f[l],g=r?u:P.cleanNumber(u);e.push(g)}}}),e},V.getDataToPixel=function(v,p,r,e,s){var n=v._fullLayout._size,l;if(p)if(s==="domain")l=function(u){return p._length*(e?1-u:u)+p._offset};else{var f=V.shapePositionToRange(p);l=function(u){var g=A(p,r);return p._offset+p.r2p(f(u,!0))+g},p.type==="date"&&(l=V.decodeDate(l))}else e?l=function(u){return n.t+n.h*(1-u)}:l=function(u){return n.l+n.w*u};return l},V.getPixelToData=function(v,p,r,e){var s=v._fullLayout._size,n;if(p)if(e==="domain")n=function(f){var u=(f-p._offset)/p._length;return r?1-u:u};else{var l=V.rangeToShapePosition(p);n=function(f){return l(p.p2r(f-p._offset))}}else r?n=function(f){return 1-(f-s.t)/s.h}:n=function(f){return(f-s.l)/s.w};return n},V.roundPositionForSharpStrokeRendering=function(v,p){var r=Math.round(p%2)===1,e=Math.round(v);return r?e+.5:e},V.makeShapesOptionsAndPlotinfo=function(v,p){var r=v._fullLayout.shapes[p]||{},e=v._fullLayout._plots[r.xref+r.yref],s=!!e;return s?e._hadPlotinfo=!0:(e={},r.xref&&r.xref!=="paper"&&(e.xaxis=v._fullLayout[r.xref+"axis"]),r.yref&&r.yref!=="paper"&&(e.yaxis=v._fullLayout[r.yref+"axis"])),e.xsizemode=r.xsizemode,e.ysizemode=r.ysizemode,e.xanchor=r.xanchor,e.yanchor=r.yanchor,{options:r,plotinfo:e}},V.makeSelectionsOptionsAndPlotinfo=function(v,p){var r=v._fullLayout.selections[p]||{},e=v._fullLayout._plots[r.xref+r.yref],s=!!e;return s?e._hadPlotinfo=!0:(e={},r.xref&&(e.xaxis=v._fullLayout[r.xref+"axis"]),r.yref&&(e.yaxis=v._fullLayout[r.yref+"axis"])),{options:r,plotinfo:e}},V.getPathString=function(v,p){var r=p.type,e=o.getRefType(p.xref),s=o.getRefType(p.yref),n=o.getFromId(v,p.xref),l=o.getFromId(v,p.yref),f=v._fullLayout._size,u,g,h,T,c=A(n,p.x0shift),i=A(n,p.x1shift),d=A(l,p.y0shift),x=A(l,p.y1shift),w,C,y,S;if(n?e==="domain"?g=function(F){return n._offset+n._length*F}:(u=V.shapePositionToRange(n),g=function(F){return n._offset+n.r2p(u(F,!0))}):g=function(F){return f.l+f.w*F},l?s==="domain"?T=function(F){return l._offset+l._length*(1-F)}:(h=V.shapePositionToRange(l),T=function(F){return l._offset+l.r2p(h(F,!0))}):T=function(F){return f.t+f.h*(1-F)},r==="path")return n&&n.type==="date"&&(g=V.decodeDate(g)),l&&l.type==="date"&&(T=V.decodeDate(T)),L(p,g,T);if(p.xsizemode==="pixel"){var M=g(p.xanchor);w=M+p.x0+c,C=M+p.x1+i}else w=g(p.x0)+c,C=g(p.x1)+i;if(p.ysizemode==="pixel"){var a=T(p.yanchor);y=a-p.y0+d,S=a-p.y1+x}else y=T(p.y0)+d,S=T(p.y1)+x;if(r==="line")return"M"+w+","+y+"L"+C+","+S;if(r==="rect")return"M"+w+","+y+"H"+C+"V"+S+"H"+w+"Z";var E=(w+C)/2,m=(y+S)/2,k=Math.abs(E-w),I=Math.abs(m-y),O="A"+k+","+I,z=E+k+","+m,B=E+","+(m-I);return"M"+z+O+" 0 1,1 "+B+O+" 0 0,1 "+z+"Z"};function L(v,p,r){var e=v.path,s=v.xsizemode,n=v.ysizemode,l=v.xanchor,f=v.yanchor;return e.replace(b.segmentRE,function(u){var g=0,h=u.charAt(0),T=b.paramIsX[h],c=b.paramIsY[h],i=b.numParams[h],d=u.substr(1).replace(b.paramRE,function(x){return T[g]?s==="pixel"?x=p(l)+Number(x):x=p(x):c[g]&&(n==="pixel"?x=r(f)-Number(x):x=r(x)),g++,g>i&&(x="X"),x});return g>i&&(d=d.replace(/[\s,]*X.*/,""),P.log("Ignoring extra params in segment "+u)),h+d})}function A(v,p){p=p||0;var r=0;return p&&v&&(v.type==="category"||v.type==="multicategory")&&(r=(v.r2p(1)-v.r2p(0))*p),r}},41592:function(j,V,t){var b=t(4016);j.exports={moduleType:"component",name:"shapes",layoutAttributes:t(46056),supplyLayoutDefaults:t(43712),supplyDrawNewShapeDefaults:t(65144),includeBasePlot:t(36632)("shapes"),calcAutorange:t(96084),draw:b.draw,drawOne:b.drawOne}},97728:function(j){function V(T,c){return c?c.d2l(T):T}function t(T,c){return c?c.l2d(T):T}function b(T){return T.x0}function P(T){return T.x1}function o(T){return T.y0}function L(T){return T.y1}function A(T){return T.x0shift||0}function v(T){return T.x1shift||0}function p(T){return T.y0shift||0}function r(T){return T.y1shift||0}function e(T,c){return V(T.x1,c)+v(T)-V(T.x0,c)-A(T)}function s(T,c,i){return V(T.y1,i)+r(T)-V(T.y0,i)-p(T)}function n(T,c){return Math.abs(e(T,c))}function l(T,c,i){return Math.abs(s(T,c,i))}function f(T,c,i){return T.type!=="line"?void 0:Math.sqrt(Math.pow(e(T,c),2)+Math.pow(s(T,c,i),2))}function u(T,c){return t((V(T.x1,c)+v(T)+V(T.x0,c)+A(T))/2,c)}function g(T,c,i){return t((V(T.y1,i)+r(T)+V(T.y0,i)+p(T))/2,i)}function h(T,c,i){return T.type!=="line"?void 0:s(T,c,i)/e(T,c)}j.exports={x0:b,x1:P,y0:o,y1:L,slope:h,dx:e,dy:s,width:n,height:l,length:f,xcenter:u,ycenter:g}},89861:function(j,V,t){var b=t(25376),P=t(66741),o=t(92880).extendDeepAll,L=t(67824).overrideAll,A=t(85656),v=t(31780).templatedArray,p=t(60876),r=v("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});j.exports=L(v("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(P({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:A.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:b({})},font:b({}),activebgcolor:{valType:"color",dflt:p.gripBgActiveColor},bgcolor:{valType:"color",dflt:p.railBgColor},bordercolor:{valType:"color",dflt:p.railBorderColor},borderwidth:{valType:"number",min:0,dflt:p.railBorderWidth},ticklen:{valType:"number",min:0,dflt:p.tickLength},tickcolor:{valType:"color",dflt:p.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:p.minorTickLength}}),"arraydraw","from-root")},60876:function(j){j.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},8132:function(j,V,t){var b=t(3400),P=t(51272),o=t(89861),L=t(60876),A=L.name,v=o.steps;j.exports=function(s,n){P(s,n,{name:A,handleItemDefaults:p})};function p(e,s,n){function l(d,x){return b.coerce(e,s,o,d,x)}for(var f=P(e,s,{name:"steps",handleItemDefaults:r}),u=0,g=0;g<f.length;g++)f[g].visible&&u++;var h;if(u<2?h=s.visible=!1:h=l("visible"),!!h){s._stepCount=u;var T=s._visibleSteps=b.filterVisible(f),c=l("active");(f[c]||{}).visible||(s.active=T[0]._index),l("x"),l("y"),b.noneOrAll(e,s,["x","y"]),l("xanchor"),l("yanchor"),l("len"),l("lenmode"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),b.coerceFont(l,"font",n.font);var i=l("currentvalue.visible");i&&(l("currentvalue.xanchor"),l("currentvalue.prefix"),l("currentvalue.suffix"),l("currentvalue.offset"),b.coerceFont(l,"currentvalue.font",s.font)),l("transition.duration"),l("transition.easing"),l("bgcolor"),l("activebgcolor"),l("bordercolor"),l("borderwidth"),l("ticklen"),l("tickwidth"),l("tickcolor"),l("minorticklen")}}function r(e,s){function n(u,g){return b.coerce(e,s,v,u,g)}var l;if(e.method!=="skip"&&!Array.isArray(e.args)?l=s.visible=!1:l=n("visible"),l){n("method"),n("args");var f=n("label","step-"+s._index);n("value",f),n("execute")}}},79664:function(j,V,t){var b=t(33428),P=t(7316),o=t(76308),L=t(43616),A=t(3400),v=A.strTranslate,p=t(72736),r=t(31780).arrayEditor,e=t(60876),s=t(84284),n=s.LINE_SPACING,l=s.FROM_TL,f=s.FROM_BR;j.exports=function(B){var F=B._context.staticPlot,_=B._fullLayout,N=g(_,B),G=_._infolayer.selectAll("g."+e.containerClassName).data(N.length>0?[0]:[]);G.enter().append("g").classed(e.containerClassName,!0).style("cursor",F?null:"ew-resize");function X(nt){nt._commandObserver&&(nt._commandObserver.remove(),delete nt._commandObserver),P.autoMargin(B,u(nt))}if(G.exit().each(function(){b.select(this).selectAll("g."+e.groupClassName).each(X)}).remove(),N.length!==0){var $=G.selectAll("g."+e.groupClassName).data(N,h);$.enter().append("g").classed(e.groupClassName,!0),$.exit().each(X).remove();for(var et=0;et<N.length;et++){var ot=N[et];T(B,ot)}$.each(function(nt){var Z=b.select(this);a(nt),P.manageCommandObserver(B,nt,nt._visibleSteps,function(Q){var W=Z.data()[0];W.active!==Q.index&&(W._dragging||y(B,Z,W,Q.index,!1,!0))}),c(B,b.select(this),nt)})}};function u(z){return e.autoMarginIdRoot+z._index}function g(z,B){for(var F=z[e.name],_=[],N=0;N<F.length;N++){var G=F[N];G.visible&&(G._gd=B,_.push(G))}return _}function h(z){return z._index}function T(z,B){var F=L.tester.selectAll("g."+e.labelGroupClass).data(B._visibleSteps);F.enter().append("g").classed(e.labelGroupClass,!0);var _=0,N=0;F.each(function(J){var it=b.select(this),K=x(it,{step:J},B),H=K.node();if(H){var at=L.bBox(H);N=Math.max(N,at.height),_=Math.max(_,at.width)}}),F.remove();var G=B._dims={};G.inputAreaWidth=Math.max(e.railWidth,e.gripHeight);var X=z._fullLayout._size;G.lx=X.l+X.w*B.x,G.ly=X.t+X.h*(1-B.y),B.lenmode==="fraction"?G.outerLength=Math.round(X.w*B.len):G.outerLength=B.len,G.inputAreaStart=0,G.inputAreaLength=Math.round(G.outerLength-B.pad.l-B.pad.r);var $=G.inputAreaLength-2*e.stepInset,et=$/(B._stepCount-1),ot=_+e.labelPadding;if(G.labelStride=Math.max(1,Math.ceil(ot/et)),G.labelHeight=N,G.currentValueMaxWidth=0,G.currentValueHeight=0,G.currentValueTotalHeight=0,G.currentValueMaxLines=1,B.currentvalue.visible){var nt=L.tester.append("g");F.each(function(J){var it=i(nt,B,J.label),K=it.node()&&L.bBox(it.node())||{width:0,height:0},H=p.lineCount(it);G.currentValueMaxWidth=Math.max(G.currentValueMaxWidth,Math.ceil(K.width)),G.currentValueHeight=Math.max(G.currentValueHeight,Math.ceil(K.height)),G.currentValueMaxLines=Math.max(G.currentValueMaxLines,H)}),G.currentValueTotalHeight=G.currentValueHeight+B.currentvalue.offset,nt.remove()}G.height=G.currentValueTotalHeight+e.tickOffset+B.ticklen+e.labelOffset+G.labelHeight+B.pad.t+B.pad.b;var Z="left";A.isRightAnchor(B)&&(G.lx-=G.outerLength,Z="right"),A.isCenterAnchor(B)&&(G.lx-=G.outerLength/2,Z="center");var Q="top";A.isBottomAnchor(B)&&(G.ly-=G.height,Q="bottom"),A.isMiddleAnchor(B)&&(G.ly-=G.height/2,Q="middle"),G.outerLength=Math.ceil(G.outerLength),G.height=Math.ceil(G.height),G.lx=Math.round(G.lx),G.ly=Math.round(G.ly);var W={y:B.y,b:G.height*f[Q],t:G.height*l[Q]};B.lenmode==="fraction"?(W.l=0,W.xl=B.x-B.len*l[Z],W.r=0,W.xr=B.x+B.len*f[Z]):(W.x=B.x,W.l=G.outerLength*l[Z],W.r=G.outerLength*f[Z]),P.autoMargin(z,u(B),W)}function c(z,B,F){(F.steps[F.active]||{}).visible||(F.active=F._visibleSteps[0]._index),B.call(i,F).call(O,F).call(w,F).call(M,F).call(I,z,F).call(d,z,F);var _=F._dims;L.setTranslate(B,_.lx+F.pad.l,_.ly+F.pad.t),B.call(E,F,!1),B.call(i,F)}function i(z,B,F){if(B.currentvalue.visible){var _=B._dims,N,G;switch(B.currentvalue.xanchor){case"right":N=_.inputAreaLength-e.currentValueInset-_.currentValueMaxWidth,G="left";break;case"center":N=_.inputAreaLength*.5,G="middle";break;default:N=e.currentValueInset,G="left"}var X=A.ensureSingle(z,"text",e.labelClass,function(Q){Q.attr({"text-anchor":G,"data-notex":1})}),$=B.currentvalue.prefix?B.currentvalue.prefix:"";if(typeof F=="string")$+=F;else{var et=B.steps[B.active].label,ot=B._gd._fullLayout._meta;ot&&(et=A.templateString(et,ot)),$+=et}B.currentvalue.suffix&&($+=B.currentvalue.suffix),X.call(L.font,B.currentvalue.font).text($).call(p.convertToTspans,B._gd);var nt=p.lineCount(X),Z=(_.currentValueMaxLines+1-nt)*B.currentvalue.font.size*n;return p.positionText(X,N,Z),X}}function d(z,B,F){var _=A.ensureSingle(z,"rect",e.gripRectClass,function(N){N.call(S,B,z,F).style("pointer-events","all")});_.attr({width:e.gripWidth,height:e.gripHeight,rx:e.gripRadius,ry:e.gripRadius}).call(o.stroke,F.bordercolor).call(o.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function x(z,B,F){var _=A.ensureSingle(z,"text",e.labelClass,function(X){X.attr({"text-anchor":"middle","data-notex":1})}),N=B.step.label,G=F._gd._fullLayout._meta;return G&&(N=A.templateString(N,G)),_.call(L.font,F.font).text(N).call(p.convertToTspans,F._gd),_}function w(z,B){var F=A.ensureSingle(z,"g",e.labelsClass),_=B._dims,N=F.selectAll("g."+e.labelGroupClass).data(_.labelSteps);N.enter().append("g").classed(e.labelGroupClass,!0),N.exit().remove(),N.each(function(G){var X=b.select(this);X.call(x,G,B),L.setTranslate(X,m(B,G.fraction),e.tickOffset+B.ticklen+B.font.size*n+e.labelOffset+_.currentValueTotalHeight)})}function C(z,B,F,_,N){var G=Math.round(_*(F._stepCount-1)),X=F._visibleSteps[G]._index;X!==F.active&&y(z,B,F,X,!0,N)}function y(z,B,F,_,N,G){var X=F.active;F.active=_,r(z.layout,e.name,F).applyUpdate("active",_);var $=F.steps[F.active];B.call(E,F,G),B.call(i,F),z.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:N,previousActive:X}),$&&$.method&&N&&(B._nextMethod?(B._nextMethod.step=$,B._nextMethod.doCallback=N,B._nextMethod.doTransition=G):(B._nextMethod={step:$,doCallback:N,doTransition:G},B._nextMethodRaf=window.requestAnimationFrame(function(){var et=B._nextMethod.step;et.method&&(et.execute&&P.executeAPICommand(z,et.method,et.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function S(z,B,F){if(B._context.staticPlot)return;var _=F.node(),N=b.select(B);function G(){return F.data()[0]}function X(){var $=G();B.emit("plotly_sliderstart",{slider:$});var et=F.select("."+e.gripRectClass);b.event.stopPropagation(),b.event.preventDefault(),et.call(o.fill,$.activebgcolor);var ot=k($,b.mouse(_)[0]);C(B,F,$,ot,!0),$._dragging=!0;function nt(){var Q=G(),W=k(Q,b.mouse(_)[0]);C(B,F,Q,W,!1)}N.on("mousemove",nt),N.on("touchmove",nt);function Z(){var Q=G();Q._dragging=!1,et.call(o.fill,Q.bgcolor),N.on("mouseup",null),N.on("mousemove",null),N.on("touchend",null),N.on("touchmove",null),B.emit("plotly_sliderend",{slider:Q,step:Q.steps[Q.active]})}N.on("mouseup",Z),N.on("touchend",Z)}z.on("mousedown",X),z.on("touchstart",X)}function M(z,B){var F=z.selectAll("rect."+e.tickRectClass).data(B._visibleSteps),_=B._dims;F.enter().append("rect").classed(e.tickRectClass,!0),F.exit().remove(),F.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(N,G){var X=G%_.labelStride===0,$=b.select(this);$.attr({height:X?B.ticklen:B.minorticklen}).call(o.fill,B.tickcolor),L.setTranslate($,m(B,G/(B._stepCount-1))-.5*B.tickwidth,(X?e.tickOffset:e.minorTickOffset)+_.currentValueTotalHeight)})}function a(z){var B=z._dims;B.labelSteps=[];for(var F=z._stepCount,_=0;_<F;_+=B.labelStride)B.labelSteps.push({fraction:_/(F-1),step:z._visibleSteps[_]})}function E(z,B,F){for(var _=z.select("rect."+e.gripRectClass),N=0,G=0;G<B._stepCount;G++)if(B._visibleSteps[G]._index===B.active){N=G;break}var X=m(B,N/(B._stepCount-1));if(!B._invokingCommand){var $=_;F&&B.transition.duration>0&&($=$.transition().duration(B.transition.duration).ease(B.transition.easing)),$.attr("transform",v(X-e.gripWidth*.5,B._dims.currentValueTotalHeight))}}function m(z,B){var F=z._dims;return F.inputAreaStart+e.stepInset+(F.inputAreaLength-2*e.stepInset)*Math.min(1,Math.max(0,B))}function k(z,B){var F=z._dims;return Math.min(1,Math.max(0,(B-e.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*e.stepInset-2*F.inputAreaStart)))}function I(z,B,F){var _=F._dims,N=A.ensureSingle(z,"rect",e.railTouchRectClass,function(G){G.call(S,B,z,F).style("pointer-events","all")});N.attr({width:_.inputAreaLength,height:Math.max(_.inputAreaWidth,e.tickOffset+F.ticklen+_.labelHeight)}).call(o.fill,F.bgcolor).attr("opacity",0),L.setTranslate(N,0,_.currentValueTotalHeight)}function O(z,B){var F=B._dims,_=F.inputAreaLength-e.railInset*2,N=A.ensureSingle(z,"rect",e.railRectClass);N.attr({width:_,height:e.railWidth,rx:e.railRadius,ry:e.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,B.bordercolor).call(o.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),L.setTranslate(N,e.railInset,(F.inputAreaWidth-e.railWidth)*.5+F.currentValueTotalHeight)}},97544:function(j,V,t){var b=t(60876);j.exports={moduleType:"component",name:b.name,layoutAttributes:t(89861),supplyLayoutDefaults:t(8132),draw:t(79664)}},81668:function(j,V,t){var b=t(33428),P=t(38248),o=t(7316),L=t(24040),A=t(3400),v=A.strTranslate,p=t(43616),r=t(76308),e=t(72736),s=t(13448),n=t(84284).OPPOSITE_SIDE,l=/ [XY][0-9]* /,f=1.6,u=1.6;function g(h,T,c){var i=h._fullLayout,d=c.propContainer,x=c.propName,w=c.placeholder,C=c.traceIndex,y=c.avoid||{},S=c.attributes,M=c.transform,a=c.containerGroup,E=1,m=d.title,k=(m&&m.text?m.text:"").trim(),I=!1,O=m&&m.font?m.font:{},z=O.family,B=O.size,F=O.color,_=O.weight,N=O.style,G=O.variant,X=O.textcase,$=O.lineposition,et=O.shadow,ot=c.subtitlePropName,nt=!!ot,Z=c.subtitlePlaceholder,Q=(d.title||{}).subtitle||{text:"",font:{}},W=Q.text.trim(),J=!1,it=1,K=Q.font,H=K.family,at=K.size,tt=K.color,lt=K.weight,dt=K.style,mt=K.variant,gt=K.textcase,Mt=K.lineposition,Lt=K.shadow,zt;x==="title.text"?zt="titleText":x.indexOf("axis")!==-1?zt="axisTitleText":x.indexOf("colorbar"!==-1)&&(zt="colorbarTitleText");var xt=h._context.edits[zt];function Ct(Te,Qt){return Te===void 0||Qt===void 0?!1:Te.replace(l," % ")===Qt.replace(l," % ")}k===""?E=0:Ct(k,w)&&(xt||(k=""),E=.2,I=!0),nt&&(W===""?it=0:Ct(W,Z)&&(xt||(W=""),it=.2,J=!0)),c._meta?k=A.templateString(k,c._meta):i._meta&&(k=A.templateString(k,i._meta));var wt=k||W||xt,Rt;a||(a=A.ensureSingle(i._infolayer,"g","g-"+T),Rt=i._hColorbarMoveTitle);var Tt=a.selectAll("text."+T).data(wt?[0]:[]);Tt.enter().append("text"),Tt.text(k).attr("class",T),Tt.exit().remove();var Bt=null,Gt=T+"-subtitle",te=W||xt;if(nt&&te&&(Bt=a.selectAll("text."+Gt).data(te?[0]:[]),Bt.enter().append("text"),Bt.text(W).attr("class",Gt),Bt.exit().remove()),!wt)return a;function Wt(Te,Qt){A.syncOrAsync([jt,ie],{title:Te,subtitle:Qt})}function jt(Te){var Qt=Te.title,Pt=Te.subtitle,Ot;!M&&Rt&&(M={}),M?(Ot="",M.rotate&&(Ot+="rotate("+[M.rotate,S.x,S.y]+")"),(M.offset||Rt)&&(Ot+=v(0,(M.offset||0)-(Rt||0)))):Ot=null,Qt.attr("transform",Ot);function Nt(ft){if(ft){var pt=b.select(ft.node().parentNode).select("."+Gt);if(!pt.empty()){var Dt=ft.node().getBBox();if(Dt.height){var Ut=Dt.y+Dt.height+f*at;pt.attr("y",Ut)}}}}if(Qt.style("opacity",E*r.opacity(F)).call(p.font,{color:r.rgb(F),size:b.round(B,2),family:z,weight:_,style:N,variant:G,textcase:X,shadow:et,lineposition:$}).attr(S).call(e.convertToTspans,h,Nt),Pt){var Ht=a.select("."+T+"-math-group"),St=Qt.node().getBBox(),kt=Ht.node()?Ht.node().getBBox():void 0,Ft=kt?kt.y+kt.height+f*at:St.y+St.height+u*at,At=A.extendFlat({},S,{y:Ft});Pt.attr("transform",Ot),Pt.style("opacity",it*r.opacity(tt)).call(p.font,{color:r.rgb(tt),size:b.round(at,2),family:H,weight:lt,style:dt,variant:mt,textcase:gt,shadow:Lt,lineposition:Mt}).attr(At).call(e.convertToTspans,h)}return o.previousPromises(h)}function ie(Te){var Qt=Te.title,Pt=b.select(Qt.node().parentNode);if(y&&y.selection&&y.side&&k){Pt.attr("transform",null);var Ot=n[y.side],Nt=y.side==="left"||y.side==="top"?-1:1,Ht=P(y.pad)?y.pad:2,St=p.bBox(Pt.node()),kt={t:0,b:0,l:0,r:0},Ft=h._fullLayout._reservedMargin;for(var At in Ft)for(var ft in Ft[At]){var pt=Ft[At][ft];kt[ft]=Math.max(kt[ft],pt)}var Dt={left:kt.l,top:kt.t,right:i.width-kt.r,bottom:i.height-kt.b},Ut=y.maxShift||Nt*(Dt[y.side]-St[y.side]),$t=0;if(Ut<0)$t=Ut;else{var re=y.offsetLeft||0,Be=y.offsetTop||0;St.left-=re,St.right-=re,St.top-=Be,St.bottom-=Be,y.selection.each(function(){var me=p.bBox(this);A.bBoxIntersect(St,me,Ht)&&($t=Math.max($t,Nt*(me[y.side]-St[Ot])+Ht))}),$t=Math.min(Ut,$t),d._titleScoot=Math.abs($t)}if($t>0||Ut<0){var We={left:[-$t,0],right:[$t,0],top:[0,-$t],bottom:[0,$t]}[y.side];Pt.attr("transform",v(We[0],We[1]))}}}Tt.call(Wt,Bt);function ue(Te,Qt){Te.text(Qt).on("mouseover.opacity",function(){b.select(this).transition().duration(s.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){b.select(this).transition().duration(s.HIDE_PLACEHOLDER).style("opacity",0)})}if(xt&&(k?Tt.on(".opacity",null):(ue(Tt,w),I=!0),Tt.call(e.makeEditable,{gd:h}).on("edit",function(Te){C!==void 0?L.call("_guiRestyle",h,x,Te,C):L.call("_guiRelayout",h,x,Te)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Wt)}).on("input",function(Te){this.text(Te||" ").call(e.positionText,S.x,S.y)}),nt)){if(nt&&!k){var fe=Tt.node().getBBox(),pe=fe.y+fe.height+u*at;Bt.attr("y",pe)}W?Bt.on(".opacity",null):(ue(Bt,Z),J=!0),Bt.call(e.makeEditable,{gd:h}).on("edit",function(Te){L.call("_guiRelayout",h,"title.subtitle.text",Te)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Wt)}).on("input",function(Te){this.text(Te||" ").call(e.positionText,Bt.attr("x"),Bt.attr("y"))})}return Tt.classed("js-placeholder",I),Bt&&Bt.classed("js-placeholder",J),a}j.exports={draw:g,SUBTITLE_PADDING_EM:u,SUBTITLE_PADDING_MATHJAX_EM:f}},88444:function(j,V,t){var b=t(25376),P=t(22548),o=t(92880).extendFlat,L=t(67824).overrideAll,A=t(66741),v=t(31780).templatedArray,p=v("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});j.exports=L(v("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:p,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(A({editType:"arraydraw"}),{}),font:b({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:P.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},73712:function(j){j.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},91384:function(j,V,t){var b=t(3400),P=t(51272),o=t(88444),L=t(73712),A=L.name,v=o.buttons;j.exports=function(s,n){var l={name:A,handleItemDefaults:p};P(s,n,l)};function p(e,s,n){function l(g,h){return b.coerce(e,s,o,g,h)}var f=P(e,s,{name:"buttons",handleItemDefaults:r}),u=l("visible",f.length>0);u&&(l("active"),l("direction"),l("type"),l("showactive"),l("x"),l("y"),b.noneOrAll(e,s,["x","y"]),l("xanchor"),l("yanchor"),l("pad.t"),l("pad.r"),l("pad.b"),l("pad.l"),b.coerceFont(l,"font",n.font),l("bgcolor",n.paper_bgcolor),l("bordercolor"),l("borderwidth"))}function r(e,s){function n(f,u){return b.coerce(e,s,v,f,u)}var l=n("visible",e.method==="skip"||Array.isArray(e.args));l&&(n("method"),n("args"),n("args2"),n("label"),n("execute"))}},14420:function(j,V,t){var b=t(33428),P=t(7316),o=t(76308),L=t(43616),A=t(3400),v=t(72736),p=t(31780).arrayEditor,r=t(84284).LINE_SPACING,e=t(73712),s=t(37400);j.exports=function(k){var I=k._fullLayout,O=A.filterVisible(I[e.name]);function z(et){P.autoMargin(k,M(et))}var B=I._menulayer.selectAll("g."+e.containerClassName).data(O.length>0?[0]:[]);if(B.enter().append("g").classed(e.containerClassName,!0).style("cursor","pointer"),B.exit().each(function(){b.select(this).selectAll("g."+e.headerGroupClassName).each(z)}).remove(),O.length!==0){var F=B.selectAll("g."+e.headerGroupClassName).data(O,n);F.enter().append("g").classed(e.headerGroupClassName,!0);for(var _=A.ensureSingle(B,"g",e.dropdownButtonGroupClassName,function(et){et.style("pointer-events","all")}),N=0;N<O.length;N++){var G=O[N];S(k,G)}var X="updatemenus"+I._uid,$=new s(k,_,X);F.enter().size()&&(_.node().parentNode.appendChild(_.node()),_.call(E)),F.exit().each(function(et){_.call(E),z(et)}).remove(),F.each(function(et){var ot=b.select(this),nt=et.type==="dropdown"?_:null;P.manageCommandObserver(k,et,et.buttons,function(Z){u(k,et,et.buttons[Z.index],ot,nt,$,Z.index,!0)}),et.type==="dropdown"?(g(k,ot,_,$,et),f(_,et)&&h(k,ot,_,$,et)):h(k,ot,null,null,et)})}};function n(m){return m._index}function l(m){return+m.attr(e.menuIndexAttrName)==-1}function f(m,k){return+m.attr(e.menuIndexAttrName)===k._index}function u(m,k,I,O,z,B,F,_){k.active=F,p(m.layout,e.name,k).applyUpdate("active",F),k.type==="buttons"?h(m,O,null,null,k):k.type==="dropdown"&&(z.attr(e.menuIndexAttrName,"-1"),g(m,O,z,B,k),_||h(m,O,z,B,k))}function g(m,k,I,O,z){var B=A.ensureSingle(k,"g",e.headerClassName,function(et){et.style("pointer-events","all")}),F=z._dims,_=z.active,N=z.buttons[_]||e.blankHeaderOpts,G={y:z.pad.t,yPad:0,x:z.pad.l,xPad:0,index:0},X={width:F.headerWidth,height:F.headerHeight};B.call(i,z,N,m).call(a,z,G,X);var $=A.ensureSingle(k,"text",e.headerArrowClassName,function(et){et.attr("text-anchor","end").call(L.font,z.font).text(e.arrowSymbol[z.direction])});$.attr({x:F.headerWidth-e.arrowOffsetX+z.pad.l,y:F.headerHeight/2+e.textOffsetY+z.pad.t}),B.on("click",function(){I.call(E,String(f(I,z)?-1:z._index)),h(m,k,I,O,z)}),B.on("mouseover",function(){B.call(C)}),B.on("mouseout",function(){B.call(y,z)}),L.setTranslate(k,F.lx,F.ly)}function h(m,k,I,O,z){I||(I=k,I.attr("pointer-events","all"));var B=!l(I)||z.type==="buttons"?z.buttons:[],F=z.type==="dropdown"?e.dropdownButtonClassName:e.buttonClassName,_=I.selectAll("g."+F).data(A.filterVisible(B)),N=_.enter().append("g").classed(F,!0),G=_.exit();z.type==="dropdown"?(N.attr("opacity","0").transition().attr("opacity","1"),G.transition().attr("opacity","0").remove()):G.remove();var X=0,$=0,et=z._dims,ot=["up","down"].indexOf(z.direction)!==-1;z.type==="dropdown"&&(ot?$=et.headerHeight+e.gapButtonHeader:X=et.headerWidth+e.gapButtonHeader),z.type==="dropdown"&&z.direction==="up"&&($=-e.gapButtonHeader+e.gapButton-et.openHeight),z.type==="dropdown"&&z.direction==="left"&&(X=-e.gapButtonHeader+e.gapButton-et.openWidth);var nt={x:et.lx+X+z.pad.l,y:et.ly+$+z.pad.t,yPad:e.gapButton,xPad:e.gapButton,index:0},Z={l:nt.x+z.borderwidth,t:nt.y+z.borderwidth};_.each(function(Q,W){var J=b.select(this);J.call(i,z,Q,m).call(a,z,nt),J.on("click",function(){b.event.defaultPrevented||(Q.execute&&(Q.args2&&z.active===W?(u(m,z,Q,k,I,O,-1),P.executeAPICommand(m,Q.method,Q.args2)):(u(m,z,Q,k,I,O,W),P.executeAPICommand(m,Q.method,Q.args))),m.emit("plotly_buttonclicked",{menu:z,button:Q,active:z.active}))}),J.on("mouseover",function(){J.call(C)}),J.on("mouseout",function(){J.call(y,z),_.call(w,z)})}),_.call(w,z),ot?(Z.w=Math.max(et.openWidth,et.headerWidth),Z.h=nt.y-Z.t):(Z.w=nt.x-Z.l,Z.h=Math.max(et.openHeight,et.headerHeight)),Z.direction=z.direction,O&&(_.size()?T(m,k,I,O,z,Z):c(O))}function T(m,k,I,O,z,B){var F=z.direction,_=F==="up"||F==="down",N=z._dims,G=z.active,X,$,et;if(_)for($=0,et=0;et<G;et++)$+=N.heights[et]+e.gapButton;else for(X=0,et=0;et<G;et++)X+=N.widths[et]+e.gapButton;O.enable(B,X,$),O.hbar&&O.hbar.attr("opacity","0").transition().attr("opacity","1"),O.vbar&&O.vbar.attr("opacity","0").transition().attr("opacity","1")}function c(m){var k=!!m.hbar,I=!!m.vbar;k&&m.hbar.transition().attr("opacity","0").each("end",function(){k=!1,I||m.disable()}),I&&m.vbar.transition().attr("opacity","0").each("end",function(){I=!1,k||m.disable()})}function i(m,k,I,O){m.call(d,k).call(x,k,I,O)}function d(m,k){var I=A.ensureSingle(m,"rect",e.itemRectClassName,function(O){O.attr({rx:e.rx,ry:e.ry,"shape-rendering":"crispEdges"})});I.call(o.stroke,k.bordercolor).call(o.fill,k.bgcolor).style("stroke-width",k.borderwidth+"px")}function x(m,k,I,O){var z=A.ensureSingle(m,"text",e.itemTextClassName,function(_){_.attr({"text-anchor":"start","data-notex":1})}),B=I.label,F=O._fullLayout._meta;F&&(B=A.templateString(B,F)),z.call(L.font,k.font).text(B).call(v.convertToTspans,O)}function w(m,k){var I=k.active;m.each(function(O,z){var B=b.select(this);z===I&&k.showactive&&B.select("rect."+e.itemRectClassName).call(o.fill,e.activeColor)})}function C(m){m.select("rect."+e.itemRectClassName).call(o.fill,e.hoverColor)}function y(m,k){m.select("rect."+e.itemRectClassName).call(o.fill,k.bgcolor)}function S(m,k){var I=k._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},O=L.tester.selectAll("g."+e.dropdownButtonClassName).data(A.filterVisible(k.buttons));O.enter().append("g").classed(e.dropdownButtonClassName,!0);var z=["up","down"].indexOf(k.direction)!==-1;O.each(function(X,$){var et=b.select(this);et.call(i,k,X,m);var ot=et.select("."+e.itemTextClassName),nt=ot.node()&&L.bBox(ot.node()).width,Z=Math.max(nt+e.textPadX,e.minWidth),Q=k.font.size*r,W=v.lineCount(ot),J=Math.max(Q*W,e.minHeight)+e.textOffsetY;J=Math.ceil(J),Z=Math.ceil(Z),I.widths[$]=Z,I.heights[$]=J,I.height1=Math.max(I.height1,J),I.width1=Math.max(I.width1,Z),z?(I.totalWidth=Math.max(I.totalWidth,Z),I.openWidth=I.totalWidth,I.totalHeight+=J+e.gapButton,I.openHeight+=J+e.gapButton):(I.totalWidth+=Z+e.gapButton,I.openWidth+=Z+e.gapButton,I.totalHeight=Math.max(I.totalHeight,J),I.openHeight=I.totalHeight)}),z?I.totalHeight-=e.gapButton:I.totalWidth-=e.gapButton,I.headerWidth=I.width1+e.arrowPadX,I.headerHeight=I.height1,k.type==="dropdown"&&(z?(I.width1+=e.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=e.arrowPadX),O.remove();var B=I.totalWidth+k.pad.l+k.pad.r,F=I.totalHeight+k.pad.t+k.pad.b,_=m._fullLayout._size;I.lx=_.l+_.w*k.x,I.ly=_.t+_.h*(1-k.y);var N="left";A.isRightAnchor(k)&&(I.lx-=B,N="right"),A.isCenterAnchor(k)&&(I.lx-=B/2,N="center");var G="top";A.isBottomAnchor(k)&&(I.ly-=F,G="bottom"),A.isMiddleAnchor(k)&&(I.ly-=F/2,G="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),P.autoMargin(m,M(k),{x:k.x,y:k.y,l:B*({right:1,center:.5}[N]||0),r:B*({left:1,center:.5}[N]||0),b:F*({top:1,middle:.5}[G]||0),t:F*({bottom:1,middle:.5}[G]||0)})}function M(m){return e.autoMarginIdRoot+m._index}function a(m,k,I,O){O=O||{};var z=m.select("."+e.itemRectClassName),B=m.select("."+e.itemTextClassName),F=k.borderwidth,_=I.index,N=k._dims;L.setTranslate(m,F+I.x,F+I.y);var G=["up","down"].indexOf(k.direction)!==-1,X=O.height||(G?N.heights[_]:N.height1);z.attr({x:0,y:0,width:O.width||(G?N.width1:N.widths[_]),height:X});var $=k.font.size*r,et=v.lineCount(B),ot=(et-1)*$/2;v.positionText(B,e.textOffsetX,X/2-ot+e.textOffsetY),G?I.y+=N.heights[_]+I.yPad:I.x+=N.widths[_]+I.xPad,I.index++}function E(m,k){m.attr(e.menuIndexAttrName,k||"-1").selectAll("g."+e.dropdownButtonClassName).remove()}},76908:function(j,V,t){var b=t(73712);j.exports={moduleType:"component",name:b.name,layoutAttributes:t(88444),supplyLayoutDefaults:t(91384),draw:t(14420)}},37400:function(j,V,t){j.exports=A;var b=t(33428),P=t(76308),o=t(43616),L=t(3400);function A(v,p,r){this.gd=v,this.container=p,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}A.barWidth=2,A.barLength=20,A.barRadius=2,A.barPad=1,A.barColor="#808BA4",A.prototype.enable=function(p,r,e){var s=this.gd._fullLayout,n=s.width,l=s.height;this.position=p;var f=this.position.l,u=this.position.w,g=this.position.t,h=this.position.h,T=this.position.direction,c=T==="down",i=T==="left",d=T==="right",x=T==="up",w=u,C=h,y,S,M,a;!c&&!i&&!d&&!x&&(this.position.direction="down",c=!0);var E=c||x;E?(y=f,S=y+w,c?(M=g,a=Math.min(M+C,l),C=a-M):(a=g+C,M=Math.max(a-C,0),C=a-M)):(M=g,a=M+C,i?(S=f+w,y=Math.max(S-w,0),w=S-y):(y=f,S=Math.min(y+w,n),w=S-y)),this._box={l:y,t:M,w,h:C};var m=u>w,k=A.barLength+2*A.barPad,I=A.barWidth+2*A.barPad,O=f,z=g+h;z+I>l&&(z=l-I);var B=this.container.selectAll("rect.scrollbar-horizontal").data(m?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(P.fill,A.barColor),m?(this.hbar=B.attr({rx:A.barRadius,ry:A.barRadius,x:O,y:z,width:k,height:I}),this._hbarXMin=O+k/2,this._hbarTranslateMax=w-k):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=h>C,_=A.barWidth+2*A.barPad,N=A.barLength+2*A.barPad,G=f+u,X=g;G+_>n&&(G=n-_);var $=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);$.exit().on(".drag",null).remove(),$.enter().append("rect").classed("scrollbar-vertical",!0).call(P.fill,A.barColor),F?(this.vbar=$.attr({rx:A.barRadius,ry:A.barRadius,x:G,y:X,width:_,height:N}),this._vbarYMin=X+N/2,this._vbarTranslateMax=C-N):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var et=this.id,ot=y-.5,nt=F?S+_+.5:S+.5,Z=M-.5,Q=m?a+I+.5:a+.5,W=s._topdefs.selectAll("#"+et).data(m||F?[0]:[]);if(W.exit().remove(),W.enter().append("clipPath").attr("id",et).append("rect"),m||F?(this._clipRect=W.select("rect").attr({x:Math.floor(ot),y:Math.floor(Z),width:Math.ceil(nt)-Math.floor(ot),height:Math.ceil(Q)-Math.floor(Z)}),this.container.call(o.setClipUrl,et,this.gd),this.bg.attr({x:f,y:g,width:u,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),m||F){var J=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(J);var it=b.behavior.drag().on("dragstart",function(){b.event.sourceEvent.preventDefault(),b.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));m&&this.hbar.on(".drag",null).call(it),F&&this.vbar.on(".drag",null).call(it)}this.setTranslate(r,e)},A.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},A.prototype._onBoxDrag=function(){var p=this.translateX,r=this.translateY;this.hbar&&(p-=b.event.dx),this.vbar&&(r-=b.event.dy),this.setTranslate(p,r)},A.prototype._onBoxWheel=function(){var p=this.translateX,r=this.translateY;this.hbar&&(p+=b.event.deltaY),this.vbar&&(r+=b.event.deltaY),this.setTranslate(p,r)},A.prototype._onBarDrag=function(){var p=this.translateX,r=this.translateY;if(this.hbar){var e=p+this._hbarXMin,s=e+this._hbarTranslateMax,n=L.constrain(b.event.x,e,s),l=(n-e)/(s-e),f=this.position.w-this._box.w;p=l*f}if(this.vbar){var u=r+this._vbarYMin,g=u+this._vbarTranslateMax,h=L.constrain(b.event.y,u,g),T=(h-u)/(g-u),c=this.position.h-this._box.h;r=T*c}this.setTranslate(p,r)},A.prototype.setTranslate=function(p,r){var e=this.position.w-this._box.w,s=this.position.h-this._box.h;if(p=L.constrain(p||0,0,e),r=L.constrain(r||0,0,s),this.translateX=p,this.translateY=r,this.container.call(o.setTranslate,this._box.l-this.position.l-p,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+p-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var n=p/e;this.hbar.call(o.setTranslate,p+n*this._hbarTranslateMax,r)}if(this.vbar){var l=r/s;this.vbar.call(o.setTranslate,p,r+l*this._vbarTranslateMax)}}},84284:function(j){j.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},36208:function(j){j.exports={axisRefDescription:function(V,t,b){return["If set to a",V,"axis id (e.g. *"+V+"* or","*"+V+"2*), the `"+V+"` position refers to a",V,"coordinate. If set to *paper*, the `"+V+"`","position refers to the distance from the",t,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",t,"("+b+"). If set to a",V,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",t,"of the domain of that axis: e.g.,","*"+V+"2 domain* refers to the domain of the second",V," axis and a",V,"position of 0.5 refers to the","point between the",t,"and the",b,"of the domain of the","second",V,"axis."].join(" ")}}},48164:function(j){j.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},26880:function(j){j.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},69104:function(j){j.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},99168:function(j){j.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},87792:function(j){j.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},13448:function(j){j.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},39032:function(j){j.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,ONEMILLI:1,ONEMICROSEC:.001,EPOCHJD:24405875e-1,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"−"}},2264:function(j,V){V.CSS_DECLARATIONS=[["image-rendering","optimizeSpeed"],["image-rendering","-moz-crisp-edges"],["image-rendering","-o-crisp-edges"],["image-rendering","-webkit-optimize-contrast"],["image-rendering","optimize-contrast"],["image-rendering","crisp-edges"],["image-rendering","pixelated"]],V.STYLE=V.CSS_DECLARATIONS.map(function(t){return t.join(": ")+"; "}).join("")},9616:function(j,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},64884:function(j,V,t){V.version=t(25788).version,t(88324),t(79288);for(var b=t(24040),P=V.register=b.register,o=t(22448),L=Object.keys(o),A=0;A<L.length;A++){var v=L[A];v.charAt(0)!=="_"&&(V[v]=o[v]),P({moduleType:"apiMethod",name:v,fn:o[v]})}P(t(65875)),P([t(79180),t(56864),t(22676),t(41592),t(7402),t(76908),t(97544),t(49692),t(41152),t(12704),t(64968),t(8932),t(55080),t(2780),t(93024),t(45460)]),P([t(6580),t(11680)]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(P(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=t(9224);var p=t(93024),r=t(7316);V.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},V.Fx={hover:p.hover,unhover:p.unhover,loneHover:p.loneHover,loneUnhover:p.loneUnhover},V.Snapshot=t(78904),V.PlotSchema=t(73060)},9224:function(j){j.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},98308:function(j,V){V.isLeftAnchor=function(b){return b.xanchor==="left"||b.xanchor==="auto"&&b.x<=.3333333333333333},V.isCenterAnchor=function(b){return b.xanchor==="center"||b.xanchor==="auto"&&b.x>.3333333333333333&&b.x<.6666666666666666},V.isRightAnchor=function(b){return b.xanchor==="right"||b.xanchor==="auto"&&b.x>=.6666666666666666},V.isTopAnchor=function(b){return b.yanchor==="top"||b.yanchor==="auto"&&b.y>=.6666666666666666},V.isMiddleAnchor=function(b){return b.yanchor==="middle"||b.yanchor==="auto"&&b.y>.3333333333333333&&b.y<.6666666666666666},V.isBottomAnchor=function(b){return b.yanchor==="bottom"||b.yanchor==="auto"&&b.y<=.3333333333333333}},11864:function(j,V,t){var b=t(20435),P=b.mod,o=b.modHalf,L=Math.PI,A=2*L;function v(T){return T/180*L}function p(T){return T/L*180}function r(T){return Math.abs(T[1]-T[0])>A-1e-14}function e(T,c){return o(c-T,A)}function s(T,c){return Math.abs(e(T,c))}function n(T,c){if(r(c))return!0;var i,d;c[0]<c[1]?(i=c[0],d=c[1]):(i=c[1],d=c[0]),i=P(i,A),d=P(d,A),i>d&&(d+=A);var x=P(T,A),w=x+A;return x>=i&&x<=d||w>=i&&w<=d}function l(T,c,i,d){if(!n(c,d))return!1;var x,w;return i[0]<i[1]?(x=i[0],w=i[1]):(x=i[1],w=i[0]),T>=x&&T<=w}function f(T,c,i,d,x,w,C){x=x||0,w=w||0;var y=r([i,d]),S,M,a,E,m;y?(S=0,M=L,a=A):i<d?(S=i,a=d):(S=d,a=i),T<c?(E=T,m=c):(E=c,m=T);function k(B,F){return[B*Math.cos(F)+x,w-B*Math.sin(F)]}var I=Math.abs(a-S)<=L?0:1;function O(B,F,_){return"A"+[B,B]+" "+[0,I,_]+" "+k(B,F)}var z;return y?E===null?z="M"+k(m,S)+O(m,M,0)+O(m,a,0)+"Z":z="M"+k(E,S)+O(E,M,0)+O(E,a,0)+"ZM"+k(m,S)+O(m,M,1)+O(m,a,1)+"Z":E===null?(z="M"+k(m,S)+O(m,a,0),C&&(z+="L0,0Z")):z="M"+k(E,S)+"L"+k(m,S)+O(m,a,0)+"L"+k(E,a)+O(E,S,1)+"Z",z}function u(T,c,i,d,x){return f(null,T,c,i,d,x,0)}function g(T,c,i,d,x){return f(null,T,c,i,d,x,1)}function h(T,c,i,d,x,w){return f(T,c,i,d,x,w,1)}j.exports={deg2rad:v,rad2deg:p,angleDelta:e,angleDist:s,isFullCircle:r,isAngleInsideSector:n,isPtInsideSector:l,pathArc:u,pathSector:g,pathAnnulus:h}},38116:function(j,V,t){var b=t(83160).decode,P=t(63620),o=Array.isArray,L=ArrayBuffer,A=DataView;function v(f){return L.isView(f)&&!(f instanceof A)}V.isTypedArray=v;function p(f){return o(f)||v(f)}V.isArrayOrTypedArray=p;function r(f){return!p(f[0])}V.isArray1D=r,V.ensureArray=function(f,u){return o(f)||(f=[]),f.length=u,f};var e={u1c:typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,i1:typeof Int8Array>"u"?void 0:Int8Array,u1:typeof Uint8Array>"u"?void 0:Uint8Array,i2:typeof Int16Array>"u"?void 0:Int16Array,u2:typeof Uint16Array>"u"?void 0:Uint16Array,i4:typeof Int32Array>"u"?void 0:Int32Array,u4:typeof Uint32Array>"u"?void 0:Uint32Array,f4:typeof Float32Array>"u"?void 0:Float32Array,f8:typeof Float64Array>"u"?void 0:Float64Array};e.uint8c=e.u1c,e.uint8=e.u1,e.int8=e.i1,e.uint16=e.u2,e.int16=e.i2,e.uint32=e.u4,e.int32=e.i4,e.float32=e.f4,e.float64=e.f8;function s(f){return f.constructor===ArrayBuffer}V.isArrayBuffer=s,V.decodeTypedArraySpec=function(f){var u=[],g=n(f),h=g.dtype,T=e[h];if(!T)throw new Error('Error in dtype: "'+h+'"');var c=T.BYTES_PER_ELEMENT,i=g.bdata;s(i)||(i=b(i));var d=g.shape===void 0?[i.byteLength/c]:(""+g.shape).split(",");d.reverse();var x=d.length,w,C,y=+d[0],S=c*y,M=0;if(x===1)u=new T(i);else if(x===2)for(w=+d[1],C=0;C<w;C++)u[C]=new T(i,M,y),M+=S;else if(x===3){w=+d[1];for(var a=+d[2],E=0;E<a;E++)for(u[E]=[],C=0;C<w;C++)u[E][C]=new T(i,M,y),M+=S}else throw new Error("ndim: "+x+'is not supported with the shape:"'+g.shape+'"');return u.bdata=g.bdata,u.dtype=g.dtype,u.shape=d.reverse().join(","),f._inputArray=u,u},V.isTypedArraySpec=function(f){return P(f)&&f.hasOwnProperty("dtype")&&typeof f.dtype=="string"&&f.hasOwnProperty("bdata")&&(typeof f.bdata=="string"||s(f.bdata))&&(f.shape===void 0||f.hasOwnProperty("shape")&&(typeof f.shape=="string"||typeof f.shape=="number"))};function n(f){return{bdata:f.bdata,dtype:f.dtype,shape:f.shape}}V.concat=function(){var f=[],u=!0,g=0,h,T,c,i,d,x,w,C;for(c=0;c<arguments.length;c++)i=arguments[c],x=i.length,x&&(T?f.push(i):(T=i,d=x),o(i)?h=!1:(u=!1,g?h!==i.constructor&&(h=!1):h=i.constructor),g+=x);if(!g)return[];if(!f.length)return T;if(u)return T.concat.apply(T,f);if(h){for(w=new h(g),w.set(T),c=0;c<f.length;c++)i=f[c],w.set(i,d),d+=i.length;return w}for(w=new Array(g),C=0;C<T.length;C++)w[C]=T[C];for(c=0;c<f.length;c++){for(i=f[c],C=0;C<i.length;C++)w[d+C]=i[C];d+=C}return w},V.maxRowLength=function(f){return l(f,Math.max,0)},V.minRowLength=function(f){return l(f,Math.min,1/0)};function l(f,u,g){if(p(f))if(p(f[0])){for(var h=g,T=0;T<f.length;T++)h=u(h,f[T].length);return h}else return f.length;return 0}},54037:function(j,V,t){var b=t(38248),P=t(39032).BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;j.exports=function(A){return typeof A=="string"&&(A=A.replace(o,"")),b(A)?Number(A):P}},73696:function(j){j.exports=function(t){var b=t._fullLayout;b._glcanvas&&b._glcanvas.size()&&b._glcanvas.each(function(P){P.regl&&P.regl.clear({color:!0,depth:!0})})}},75352:function(j){j.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},63064:function(j,V,t){var b=t(38248),P=t(49760),o=t(92880).extendFlat,L=t(45464),A=t(88304),v=t(76308),p=t(13448).DESELECTDIM,r=t(22296),e=t(53756).counter,s=t(20435).modHalf,n=t(38116).isArrayOrTypedArray,l=t(38116).isTypedArraySpec,f=t(38116).decodeTypedArraySpec;V.valObjectMeta={data_array:{coerceFunction:function(g,h,T){h.set(n(g)?g:l(g)?f(g):T)}},enumerated:{coerceFunction:function(g,h,T,c){c.coerceNumber&&(g=+g),c.values.indexOf(g)===-1?h.set(T):h.set(g)},validateFunction:function(g,h){h.coerceNumber&&(g=+g);for(var T=h.values,c=0;c<T.length;c++){var i=String(T[c]);if(i.charAt(0)==="/"&&i.charAt(i.length-1)==="/"){var d=new RegExp(i.substr(1,i.length-2));if(d.test(g))return!0}else if(g===T[c])return!0}return!1}},boolean:{coerceFunction:function(g,h,T){g===!0||g===!1?h.set(g):h.set(T)}},number:{coerceFunction:function(g,h,T,c){l(g)&&(g=f(g)),!b(g)||c.min!==void 0&&g<c.min||c.max!==void 0&&g>c.max?h.set(T):h.set(+g)}},integer:{coerceFunction:function(g,h,T,c){if((c.extras||[]).indexOf(g)!==-1){h.set(g);return}l(g)&&(g=f(g)),g%1||!b(g)||c.min!==void 0&&g<c.min||c.max!==void 0&&g>c.max?h.set(T):h.set(+g)}},string:{coerceFunction:function(g,h,T,c){if(typeof g!="string"){var i=typeof g=="number";c.strict===!0||!i?h.set(T):h.set(String(g))}else c.noBlank&&!g?h.set(T):h.set(g)}},color:{coerceFunction:function(g,h,T){l(g)&&(g=f(g)),P(g).isValid()?h.set(g):h.set(T)}},colorlist:{coerceFunction:function(g,h,T){function c(i){return P(i).isValid()}!Array.isArray(g)||!g.length?h.set(T):g.every(c)?h.set(g):h.set(T)}},colorscale:{coerceFunction:function(g,h,T){h.set(A.get(g,T))}},angle:{coerceFunction:function(g,h,T){l(g)&&(g=f(g)),g==="auto"?h.set("auto"):b(g)?h.set(s(+g,360)):h.set(T)}},subplotid:{coerceFunction:function(g,h,T,c){var i=c.regex||e(T);if(typeof g=="string"&&i.test(g)){h.set(g);return}h.set(T)},validateFunction:function(g,h){var T=h.dflt;return g===T?!0:typeof g!="string"?!1:!!e(T).test(g)}},flaglist:{coerceFunction:function(g,h,T,c){if((c.extras||[]).indexOf(g)!==-1){h.set(g);return}if(typeof g!="string"){h.set(T);return}for(var i=g.split("+"),d=0;d<i.length;){var x=i[d];c.flags.indexOf(x)===-1||i.indexOf(x)<d?i.splice(d,1):d++}i.length?h.set(i.join("+")):h.set(T)}},any:{coerceFunction:function(g,h,T){g===void 0?h.set(T):h.set(l(g)?f(g):g)}},info_array:{coerceFunction:function(g,h,T,c){function i(z,B,F){var _,N={set:function(G){_=G}};return F===void 0&&(F=B.dflt),V.valObjectMeta[B.valType].coerceFunction(z,N,F,B),_}if(l(g)&&(g=f(g)),!n(g)){h.set(T);return}var d=c.dimensions===2||c.dimensions==="1-2"&&Array.isArray(g)&&n(g[0]),x=c.items,w=[],C=Array.isArray(x),y=C&&d&&n(x[0]),S=d&&C&&!y,M=C&&!S?x.length:g.length,a,E,m,k,I,O;if(T=Array.isArray(T)?T:[],d)for(a=0;a<M;a++)for(w[a]=[],m=n(g[a])?g[a]:[],S?I=x.length:C?I=x[a].length:I=m.length,E=0;E<I;E++)S?k=x[E]:C?k=x[a][E]:k=x,O=i(m[E],k,(T[a]||[])[E]),O!==void 0&&(w[a][E]=O);else for(a=0;a<M;a++)O=i(g[a],C?x[a]:x,T[a]),O!==void 0&&(w[a]=O);h.set(w)},validateFunction:function(g,h){if(!n(g))return!1;var T=h.items,c=Array.isArray(T),i=h.dimensions===2;if(!h.freeLength&&g.length!==T.length)return!1;for(var d=0;d<g.length;d++)if(i){if(!n(g[d])||!h.freeLength&&g[d].length!==T[d].length)return!1;for(var x=0;x<g[d].length;x++)if(!u(g[d][x],c?T[d][x]:T))return!1}else if(!u(g[d],c?T[d]:T))return!1;return!0}}},V.coerce=function(g,h,T,c,i){var d=r(T,c).get(),x=r(g,c),w=r(h,c),C=x.get(),y=h._template;if(C===void 0&&y&&(C=r(y,c).get(),y=0),i===void 0&&(i=d.dflt),d.arrayOk){if(n(C))return w.set(C),C;if(l(C))return C=f(C),w.set(C),C}var S=V.valObjectMeta[d.valType].coerceFunction;S(C,w,i,d);var M=w.get();return y&&M===i&&!u(C,d)&&(C=r(y,c).get(),S(C,w,i,d),M=w.get()),M},V.coerce2=function(g,h,T,c,i){var d=r(g,c),x=V.coerce(g,h,T,c,i),w=d.get();return w!=null?x:!1},V.coerceFont=function(g,h,T,c){c||(c={}),T=o({},T),T=o(T,c.overrideDflt||{});var i={family:g(h+".family",T.family),size:g(h+".size",T.size),color:g(h+".color",T.color),weight:g(h+".weight",T.weight),style:g(h+".style",T.style)};if(c.noFontVariant||(i.variant=g(h+".variant",T.variant)),c.noFontLineposition||(i.lineposition=g(h+".lineposition",T.lineposition)),c.noFontTextcase||(i.textcase=g(h+".textcase",T.textcase)),!c.noFontShadow){var d=T.shadow;d==="none"&&c.autoShadowDflt&&(d="auto"),i.shadow=g(h+".shadow",d)}return i},V.coercePattern=function(g,h,T,c){var i=g(h+".shape");if(i){g(h+".solidity"),g(h+".size");var d=g(h+".fillmode"),x=d==="overlay";if(!c){var w=g(h+".bgcolor",x?T:void 0);g(h+".fgcolor",x?v.contrast(w):T)}g(h+".fgopacity",x?.5:1)}},V.coerceHoverinfo=function(g,h,T){var c=h._module.attributes,i=c.hoverinfo?c:L,d=i.hoverinfo,x;if(T._dataLength===1){var w=d.dflt==="all"?d.flags.slice():d.dflt.split("+");w.splice(w.indexOf("name"),1),x=w.join("+")}return V.coerce(g,h,i,"hoverinfo",x)},V.coerceSelectionMarkerOpacity=function(g,h){if(g.marker){var T=g.marker.opacity;if(T!==void 0){var c,i;!n(T)&&!g.selected&&!g.unselected&&(c=T,i=p*T),h("selected.marker.opacity",c),h("unselected.marker.opacity",i)}}};function u(g,h){var T=V.valObjectMeta[h.valType];if(h.arrayOk&&n(g))return!0;if(T.validateFunction)return T.validateFunction(g,h);var c={},i=c,d={set:function(x){i=x}};return T.coerceFunction(g,d,c,h),i!==c}V.validate=u},67555:function(j,V,t){var b=t(94336).Yn,P=t(38248),o=t(24248),L=t(20435).mod,A=t(39032),v=A.BADNUM,p=A.ONEDAY,r=A.ONEHOUR,e=A.ONEMIN,s=A.ONESEC,n=A.EPOCHJD,l=t(24040),f=t(94336).E9,u=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,h=new Date().getFullYear()-70;function T(z){return z&&l.componentsRegistry.calendars&&typeof z=="string"&&z!=="gregorian"}V.dateTick0=function(z,B){var F=c(z,!!B);if(B<2)return F;var _=V.dateTime2ms(F,z);return _+=p*(B-1),V.ms2DateTime(_,0,z)};function c(z,B){return T(z)?B?l.getComponentMethod("calendars","CANONICAL_SUNDAY")[z]:l.getComponentMethod("calendars","CANONICAL_TICK")[z]:B?"2000-01-02":"2000-01-01"}V.dfltRange=function(z){return T(z)?l.getComponentMethod("calendars","DFLTRANGE")[z]:["2000-01-01","2001-01-01"]},V.isJSDate=function(z){return typeof z=="object"&&z!==null&&typeof z.getTime=="function"};var i,d;V.dateTime2ms=function(z,B){if(V.isJSDate(z)){var F=z.getTimezoneOffset()*e,_=(z.getUTCMinutes()-z.getMinutes())*e+(z.getUTCSeconds()-z.getSeconds())*s+(z.getUTCMilliseconds()-z.getMilliseconds());if(_){var N=3*e;F=F-N/2+L(_-F+N/2,N)}return z=Number(z)-F,z>=i&&z<=d?z:v}if(typeof z!="string"&&typeof z!="number")return v;z=String(z);var G=T(B),X=z.charAt(0);G&&(X==="G"||X==="g")&&(z=z.substr(1),B="");var $=G&&B.substr(0,7)==="chinese",et=z.match($?g:u);if(!et)return v;var ot=et[1],nt=et[3]||"1",Z=Number(et[5]||1),Q=Number(et[7]||0),W=Number(et[9]||0),J=Number(et[11]||0);if(G){if(ot.length===2)return v;ot=Number(ot);var it;try{var K=l.getComponentMethod("calendars","getCal")(B);if($){var H=nt.charAt(nt.length-1)==="i";nt=parseInt(nt,10),it=K.newDate(ot,K.toMonthIndex(ot,nt,H),Z)}else it=K.newDate(ot,Number(nt),Z)}catch{return v}return it?(it.toJD()-n)*p+Q*r+W*e+J*s:v}ot.length===2?ot=(Number(ot)+2e3-h)%100+h:ot=Number(ot),nt-=1;var at=new Date(Date.UTC(2e3,nt,Z,Q,W));return at.setUTCFullYear(ot),at.getUTCMonth()!==nt||at.getUTCDate()!==Z?v:at.getTime()+J*s},i=V.MIN_MS=V.dateTime2ms("-9999"),d=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(z,B){return V.dateTime2ms(z,B)!==v};function x(z,B){return String(z+Math.pow(10,B)).substr(1)}var w=90*p,C=3*r,y=5*e;V.ms2DateTime=function(z,B,F){if(typeof z!="number"||!(z>=i&&z<=d))return v;B||(B=0);var _=Math.floor(L(z+.05,1)*10),N=Math.round(z-_/10),G,X,$,et,ot,nt;if(T(F)){var Z=Math.floor(N/p)+n,Q=Math.floor(L(z,p));try{G=l.getComponentMethod("calendars","getCal")(F).fromJD(Z).formatDate("yyyy-mm-dd")}catch{G=f("G%Y-%m-%d")(new Date(N))}if(G.charAt(0)==="-")for(;G.length<11;)G="-0"+G.substr(1);else for(;G.length<10;)G="0"+G;X=B<w?Math.floor(Q/r):0,$=B<w?Math.floor(Q%r/e):0,et=B<C?Math.floor(Q%e/s):0,ot=B<y?Q%s*10+_:0}else nt=new Date(N),G=f("%Y-%m-%d")(nt),X=B<w?nt.getUTCHours():0,$=B<w?nt.getUTCMinutes():0,et=B<C?nt.getUTCSeconds():0,ot=B<y?nt.getUTCMilliseconds()*10+_:0;return S(G,X,$,et,ot)},V.ms2DateTimeLocal=function(z){if(!(z>=i+p&&z<=d-p))return v;var B=Math.floor(L(z+.05,1)*10),F=new Date(Math.round(z-B/10)),_=b("%Y-%m-%d")(F),N=F.getHours(),G=F.getMinutes(),X=F.getSeconds(),$=F.getUTCMilliseconds()*10+B;return S(_,N,G,X,$)};function S(z,B,F,_,N){if((B||F||_||N)&&(z+=" "+x(B,2)+":"+x(F,2),(_||N)&&(z+=":"+x(_,2),N))){for(var G=4;N%10===0;)G-=1,N/=10;z+="."+x(N,G)}return z}V.cleanDate=function(z,B,F){if(z===v)return B;if(V.isJSDate(z)||typeof z=="number"&&isFinite(z)){if(T(F))return o.error("JS Dates and milliseconds are incompatible with world calendars",z),B;if(z=V.ms2DateTimeLocal(+z),!z&&B!==void 0)return B}else if(!V.isDateTime(z,F))return o.error("unrecognized date",z),B;return z};var M=/%\d?f/g,a=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function m(z,B,F,_){z=z.replace(M,function(G){var X=Math.min(+G.charAt(1)||6,6),$=(B/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0";return $});var N=new Date(Math.floor(B+.05));if(z=z.replace(a,function(){return E[F("%q")(N)]}),T(_))try{z=l.getComponentMethod("calendars","worldCalFmt")(z,B,_)}catch{return"Invalid"}return F(z)(N)}var k=[59,59.9,59.99,59.999,59.9999];function I(z,B){var F=L(z+.05,p),_=x(Math.floor(F/r),2)+":"+x(L(Math.floor(F/e),60),2);if(B!=="M"){P(B)||(B=0);var N=Math.min(L(z/s,60),k[B]),G=(100+N).toFixed(B).substr(1);B>0&&(G=G.replace(/0+$/,"").replace(/[\.]$/,"")),_+=":"+G}return _}V.formatDate=function(z,B,F,_,N,G){if(N=T(N)&&N,!B)if(F==="y")B=G.year;else if(F==="m")B=G.month;else if(F==="d")B=G.dayMonth+`
`+G.year;else return I(z,F)+`
`+m(G.dayMonthYear,z,_,N);return m(B,z,_,N)};var O=3*p;V.incrementMonth=function(z,B,F){F=T(F)&&F;var _=L(z,p);if(z=Math.round(z-_),F)try{var N=Math.round(z/p)+n,G=l.getComponentMethod("calendars","getCal")(F),X=G.fromJD(N);return B%12?G.add(X,B,"m"):G.add(X,B/12,"y"),(X.toJD()-n)*p+_}catch{o.error("invalid ms "+z+" in calendar "+F)}var $=new Date(z+O);return $.setUTCMonth($.getUTCMonth()+B)+_-O},V.findExactDates=function(z,B){for(var F=0,_=0,N=0,G=0,X,$,et=T(B)&&l.getComponentMethod("calendars","getCal")(B),ot=0;ot<z.length;ot++){if($=z[ot],!P($)){G++;continue}if(!($%p))if(et)try{X=et.fromJD($/p+n),X.day()===1?X.month()===1?F++:_++:N++}catch{}else X=new Date($),X.getUTCDate()===1?X.getUTCMonth()===0?F++:_++:N++}_+=F,N+=_;var nt=z.length-G;return{exactYears:F/nt,exactMonths:_/nt,exactDays:N/nt}}},52200:function(j,V,t){var b=t(33428),P=t(24248),o=t(52248),L=t(36524);function A(h){var T;if(typeof h=="string"){if(T=document.getElementById(h),T===null)throw new Error("No DOM element with id '"+h+"' exists on the page.");return T}else if(h==null)throw new Error("DOM element provided is null or undefined");return h}function v(h){var T=b.select(h);return T.node()instanceof HTMLElement&&T.size()&&T.classed("js-plotly-plot")}function p(h){var T=h&&h.parentNode;T&&T.removeChild(h)}function r(h,T){e("global",h,T)}function e(h,T,c){var i="plotly.js-style-"+h,d=document.getElementById(i);d||(d=document.createElement("style"),d.setAttribute("id",i),d.appendChild(document.createTextNode("")),document.head.appendChild(d));var x=d.sheet;x.insertRule?x.insertRule(T+"{"+c+"}",0):x.addRule?x.addRule(T,c,0):P.warn("addStyleRule failed")}function s(h){var T="plotly.js-style-"+h,c=document.getElementById(T);c&&p(c)}function n(h){var T=f(h),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return T.forEach(function(i){var d=l(i);if(d){var x=o.convertCssMatrix(d);c=L.multiply(c,c,x)}}),c}function l(h){var T=window.getComputedStyle(h,null),c=T.getPropertyValue("-webkit-transform")||T.getPropertyValue("-moz-transform")||T.getPropertyValue("-ms-transform")||T.getPropertyValue("-o-transform")||T.getPropertyValue("transform");return c==="none"?null:c.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(i){return+i})}function f(h){for(var T=[];u(h);)T.push(h),h=h.parentNode,typeof ShadowRoot=="function"&&h instanceof ShadowRoot&&(h=h.host);return T}function u(h){return h&&(h instanceof Element||h instanceof HTMLElement)}function g(h,T){return h&&T&&h.top===T.top&&h.left===T.left&&h.right===T.right&&h.bottom===T.bottom}j.exports={getGraphDiv:A,isPlotDiv:v,removeElement:p,addStyleRule:r,addRelatedStyleRule:e,deleteRelatedStyleRule:s,getFullTransformMatrix:n,getElementTransformMatrix:l,getElementAndAncestors:f,equalDomRects:g}},95924:function(j,V,t){var b=t(61252).EventEmitter,P={init:function(o){if(o._ev instanceof b)return o;var L=new b,A=new b;return o._ev=L,o._internalEv=A,o.on=L.on.bind(L),o.once=L.once.bind(L),o.removeListener=L.removeListener.bind(L),o.removeAllListeners=L.removeAllListeners.bind(L),o._internalOn=A.on.bind(A),o._internalOnce=A.once.bind(A),o._removeInternalListener=A.removeListener.bind(A),o._removeAllInternalListeners=A.removeAllListeners.bind(A),o.emit=function(v,p){typeof jQuery<"u"&&jQuery(o).trigger(v,p),L.emit(v,p),A.emit(v,p)},o},triggerHandler:function(o,L,A){var v,p;typeof jQuery<"u"&&(v=jQuery(o).triggerHandler(L,A));var r=o._ev;if(!r)return v;var e=r._events[L];if(!e)return v;function s(l){if(l.listener){if(r.removeListener(L,l.listener),!l.fired)return l.fired=!0,l.listener.apply(r,[A])}else return l.apply(r,[A])}e=Array.isArray(e)?e:[e];var n;for(n=0;n<e.length-1;n++)s(e[n]);return p=s(e[n]),v!==void 0?v:p},purge:function(o){return delete o._ev,delete o.on,delete o.once,delete o.removeListener,delete o.removeAllListeners,delete o.emit,delete o._ev,delete o._internalEv,delete o._internalOn,delete o._internalOnce,delete o._removeInternalListener,delete o._removeAllInternalListeners,o}};j.exports=P},92880:function(j,V,t){var b=t(63620),P=Array.isArray;function o(A,v){var p,r;for(p=0;p<A.length;p++){if(r=A[p],r!==null&&typeof r=="object")return!1;r!==void 0&&(v[p]=r)}return!0}V.extendFlat=function(){return L(arguments,!1,!1,!1)},V.extendDeep=function(){return L(arguments,!0,!1,!1)},V.extendDeepAll=function(){return L(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return L(arguments,!0,!1,!0)};function L(A,v,p,r){var e=A[0],s=A.length,n,l,f,u,g,h,T;if(s===2&&P(e)&&P(A[1])&&e.length===0){if(T=o(A[1],e),T)return e;e.splice(0,e.length)}for(var c=1;c<s;c++){n=A[c];for(l in n)f=e[l],u=n[l],r&&P(u)?e[l]=u:v&&u&&(b(u)||(g=P(u)))?(g?(g=!1,h=f&&P(f)?f:[]):h=f&&b(f)?f:{},e[l]=L([h,u],v,p,r)):(typeof u<"u"||p)&&(e[l]=u)}return e}},68944:function(j){j.exports=function(t){for(var b={},P=[],o=0,L=0;L<t.length;L++){var A=t[L];b[A]!==1&&(b[A]=1,P[o++]=A)}return P}},43880:function(j){j.exports=function(o){for(var L=b(o)?t:V,A=[],v=0;v<o.length;v++){var p=o[v];L(p)&&A.push(p)}return A};function V(P){return P.visible===!0}function t(P){var o=P[0].trace;return o.visible===!0&&o._length!==0}function b(P){return Array.isArray(P)&&Array.isArray(P[0])&&P[0][0]&&P[0][0].trace}},27144:function(j,V,t){var b=t(33428),P=t(36116),o=t(40440),L=t(77844),A=t(42428),v=t(35536),p=t(24248),r=t(63620),e=t(22296),s=t(92065),n=Object.keys(P),l={"ISO-3":v,"USA-states":v,"country names":f};function f(x){for(var w=0;w<n.length;w++){var C=n[w],y=new RegExp(P[C]);if(y.test(x.trim().toLowerCase()))return C}return p.log("Unrecognized country name: "+x+"."),!1}function u(x,w,C){if(!w||typeof w!="string")return!1;var y=l[x](w),S,M,a;if(y){if(x==="USA-states")for(S=[],a=0;a<C.length;a++)M=C[a],M.properties&&M.properties.gu&&M.properties.gu==="USA"&&S.push(M);else S=C;for(a=0;a<S.length;a++)if(M=S[a],M.id===y)return M;p.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function g(x){var w=x.geometry,C=w.coordinates,y=x.id,S=[],M,a,E,m;function k(I){for(var O=0;O<I.length-1;O++)if(I[O][0]>0&&I[O+1][0]<0)return O;return null}switch(y==="RUS"||y==="FJI"?M=function(I){var O;if(k(I)===null)O=I;else for(O=new Array(I.length),m=0;m<I.length;m++)O[m]=[I[m][0]<0?I[m][0]+360:I[m][0],I[m][1]];S.push(s.tester(O))}:y==="ATA"?M=function(I){var O=k(I);if(O===null)return S.push(s.tester(I));var z=new Array(I.length+1),B=0;for(m=0;m<I.length;m++)m>O?z[B++]=[I[m][0]+360,I[m][1]]:m===O?(z[B++]=I[m],z[B++]=[I[m][0],-90]):z[B++]=I[m];var F=s.tester(z);F.pts.pop(),S.push(F)}:M=function(I){S.push(s.tester(I))},w.type){case"MultiPolygon":for(a=0;a<C.length;a++)for(E=0;E<C[a].length;E++)M(C[a][E]);break;case"Polygon":for(a=0;a<C.length;a++)M(C[a]);break}return S}function h(x){var w=x.geojson,C=window.PlotlyGeoAssets||{},y=typeof w=="string"?C[w]:w;return r(y)?y:(p.error("Oops ... something went wrong when fetching "+w),!1)}function T(x){var w=x[0].trace,C=h(w);if(!C)return!1;var y={},S=[],M;for(M=0;M<w._length;M++){var a=x[M];(a.loc||a.loc===0)&&(y[a.loc]=a)}function E(I){var O=e(I,w.featureidkey||"id").get(),z=y[O];if(z){var B=I.geometry;if(B.type==="Polygon"||B.type==="MultiPolygon"){var F={type:"Feature",id:O,geometry:B,properties:{}};F.properties.ct=c(F),z.fIn=I,z.fOut=F,S.push(F)}else p.log(["Location",z.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete y[O]}switch(C.type){case"FeatureCollection":var m=C.features;for(M=0;M<m.length;M++)E(m[M]);break;case"Feature":E(C);break;default:return p.warn(["Invalid GeoJSON type",(C.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in y)p.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+w.featureidkey+"*."].join(" "));return S}function c(x){var w=x.geometry,C;if(w.type==="MultiPolygon")for(var y=w.coordinates,S=0,M=0;M<y.length;M++){var a={type:"Polygon",coordinates:y[M]},E=o.default(a);E>S&&(S=E,C=a)}else C=w;return L.default(C).geometry.coordinates}function i(x){var w=window.PlotlyGeoAssets||{},C=[];function y(m){return new Promise(function(k,I){b.json(m,function(O,z){if(O){delete w[m];var B=O.status===404?'GeoJSON at URL "'+m+'" does not exist.':"Unexpected error while fetching from "+m;return I(new Error(B))}return w[m]=z,k(z)})})}function S(m){return new Promise(function(k,I){var O=0,z=setInterval(function(){if(w[m]&&w[m]!=="pending")return clearInterval(z),k(w[m]);if(O>100)return clearInterval(z),I("Unexpected error while fetching from "+m);O++},50)})}for(var M=0;M<x.length;M++){var a=x[M][0].trace,E=a.geojson;typeof E=="string"&&(w[E]?w[E]==="pending"&&C.push(S(E)):(w[E]="pending",C.push(y(E))))}return C}function d(x){return A.default(x)}j.exports={locationToFeature:u,feature2polygons:g,getTraceGeojson:h,extractTraceFeature:T,fetchTraceGeoData:i,computeBbox:d}},44808:function(j,V,t){var b=t(39032).BADNUM;V.calcTraceToLineCoords=function(P){for(var o=P[0].trace,L=o.connectgaps,A=[],v=[],p=0;p<P.length;p++){var r=P[p],e=r.lonlat;e[0]!==b?v.push(e):!L&&v.length>0&&(A.push(v),v=[])}return v.length>0&&A.push(v),A},V.makeLine=function(P){return P.length===1?{type:"LineString",coordinates:P[0]}:{type:"MultiLineString",coordinates:P}},V.makePolygon=function(P){if(P.length===1)return{type:"Polygon",coordinates:P};for(var o=new Array(P.length),L=0;L<P.length;L++)o[L]=[P[L]];return{type:"MultiPolygon",coordinates:o}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},92348:function(j,V,t){var b=t(20435).mod;V.segmentsIntersect=P;function P(p,r,e,s,n,l,f,u){var g=e-p,h=n-p,T=f-n,c=s-r,i=l-r,d=u-l,x=g*d-T*c;if(x===0)return null;var w=(h*d-T*i)/x,C=(h*c-g*i)/x;return C<0||C>1||w<0||w>1?null:{x:p+g*w,y:r+c*w}}V.segmentDistance=function(r,e,s,n,l,f,u,g){if(P(r,e,s,n,l,f,u,g))return 0;var h=s-r,T=n-e,c=u-l,i=g-f,d=h*h+T*T,x=c*c+i*i,w=Math.min(o(h,T,d,l-r,f-e),o(h,T,d,u-r,g-e),o(c,i,x,r-l,e-f),o(c,i,x,s-l,n-f));return Math.sqrt(w)};function o(p,r,e,s,n){var l=s*p+n*r;if(l<0)return s*s+n*n;if(l>e){var f=s-p,u=n-r;return f*f+u*u}else{var g=s*r-n*p;return g*g/e}}var L,A,v;V.getTextLocation=function(r,e,s,n){if((r!==A||n!==v)&&(L={},A=r,v=n),L[s])return L[s];var l=r.getPointAtLength(b(s-n/2,e)),f=r.getPointAtLength(b(s+n/2,e)),u=Math.atan((f.y-l.y)/(f.x-l.x)),g=r.getPointAtLength(b(s,e)),h=(g.x*4+l.x+f.x)/6,T=(g.y*4+l.y+f.y)/6,c={x:h,y:T,theta:u};return L[s]=c,c},V.clearLocationCache=function(){A=null},V.getVisibleSegment=function(r,e,s){var n=e.left,l=e.right,f=e.top,u=e.bottom,g=0,h=r.getTotalLength(),T=h,c,i;function d(w){var C=r.getPointAtLength(w);w===0?c=C:w===h&&(i=C);var y=C.x<n?n-C.x:C.x>l?C.x-l:0,S=C.y<f?f-C.y:C.y>u?C.y-u:0;return Math.sqrt(y*y+S*S)}for(var x=d(g);x;){if(g+=x+s,g>T)return;x=d(g)}for(x=d(T);x;){if(T-=x+s,g>T)return;x=d(T)}return{min:g,max:T,len:T-g,total:h,isClosed:g===0&&T===h&&Math.abs(c.x-i.x)<.1&&Math.abs(c.y-i.y)<.1}},V.findPointOnPath=function(r,e,s,n){n=n||{};for(var l=n.pathLength||r.getTotalLength(),f=n.tolerance||.001,u=n.iterationLimit||30,g=r.getPointAtLength(0)[s]>r.getPointAtLength(l)[s]?-1:1,h=0,T=0,c=l,i,d,x;h<u;){if(i=(T+c)/2,d=r.getPointAtLength(i),x=d[s]-e,Math.abs(x)<f)return d;g*x>0?c=i:T=i,h++}return d}},33040:function(j,V,t){var b=t(38248),P=t(49760),o=t(72160),L=t(8932),A=t(22548).defaultLine,v=t(38116).isArrayOrTypedArray,p=o(A),r=1;function e(u,g){var h=u;return h[3]*=g,h}function s(u){if(b(u))return p;var g=o(u);return g.length?g:p}function n(u){return b(u)?u:r}function l(u,g,h){var T=u.color;T&&T._inputArray&&(T=T._inputArray);var c=v(T),i=v(g),d=L.extractOpts(u),x=[],w,C,y,S,M;if(d.colorscale!==void 0?w=L.makeColorScaleFuncFromTrace(u):w=s,c?C=function(E,m){return E[m]===void 0?p:o(w(E[m]))}:C=s,i?y=function(E,m){return E[m]===void 0?r:n(E[m])}:y=n,c||i)for(var a=0;a<h;a++)S=C(T,a),M=y(g,a),x[a]=e(S,M);else x=e(o(T),g);return x}function f(u){var g=L.extractOpts(u),h=g.colorscale;return g.reversescale&&(h=L.flipScale(g.colorscale)),h.map(function(T){var c=T[0],i=P(T[1]),d=i.toRgb();return{index:c,rgb:[d.r,d.g,d.b,d.a]}})}j.exports={formatColor:l,parseColorScale:f}},71688:function(j,V,t){var b=t(35536);function P(o){return[o]}j.exports={keyFun:function(o){return o.key},repeat:P,descend:b,wrap:P,unwrap:function(o){return o[0]}}},35536:function(j){j.exports=function(t){return t}},1396:function(j){j.exports=function(t,b){if(!b)return t;var P=1/Math.abs(b),o=P>1?(P*t+P*b)/P:t+b,L=String(o).length;if(L>16){var A=String(b).length,v=String(t).length;if(L>=v+A){var p=parseFloat(o).toPrecision(12);p.indexOf("e+")===-1&&(o=+p)}}return o}},3400:function(j,V,t){var b=t(33428),P=t(94336).E9,o=t(57624).E9,L=t(38248),A=t(39032),v=A.FP_SAFE,p=-v,r=A.BADNUM,e=j.exports={};e.adjustFormat=function(it){return!it||/^\d[.]\df/.test(it)||/[.]\d%/.test(it)?it:it==="0.f"?"~f":/^\d%/.test(it)?"~%":/^\ds/.test(it)?"~s":!/^[~,.0$]/.test(it)&&/[&fps]/.test(it)?"~"+it:it};var s={};e.warnBadFormat=function(J){var it=String(J);s[it]||(s[it]=1,e.warn('encountered bad format: "'+it+'"'))},e.noFormat=function(J){return String(J)},e.numberFormat=function(J){var it;try{it=o(e.adjustFormat(J))}catch{return e.warnBadFormat(J),e.noFormat}return it},e.nestedProperty=t(22296),e.keyedContainer=t(37804),e.relativeAttr=t(23193),e.isPlainObject=t(63620),e.toLogRange=t(36896),e.relinkPrivateKeys=t(51528);var n=t(38116);e.isArrayBuffer=n.isArrayBuffer,e.isTypedArray=n.isTypedArray,e.isArrayOrTypedArray=n.isArrayOrTypedArray,e.isArray1D=n.isArray1D,e.ensureArray=n.ensureArray,e.concat=n.concat,e.maxRowLength=n.maxRowLength,e.minRowLength=n.minRowLength;var l=t(20435);e.mod=l.mod,e.modHalf=l.modHalf;var f=t(63064);e.valObjectMeta=f.valObjectMeta,e.coerce=f.coerce,e.coerce2=f.coerce2,e.coerceFont=f.coerceFont,e.coercePattern=f.coercePattern,e.coerceHoverinfo=f.coerceHoverinfo,e.coerceSelectionMarkerOpacity=f.coerceSelectionMarkerOpacity,e.validate=f.validate;var u=t(67555);e.dateTime2ms=u.dateTime2ms,e.isDateTime=u.isDateTime,e.ms2DateTime=u.ms2DateTime,e.ms2DateTimeLocal=u.ms2DateTimeLocal,e.cleanDate=u.cleanDate,e.isJSDate=u.isJSDate,e.formatDate=u.formatDate,e.incrementMonth=u.incrementMonth,e.dateTick0=u.dateTick0,e.dfltRange=u.dfltRange,e.findExactDates=u.findExactDates,e.MIN_MS=u.MIN_MS,e.MAX_MS=u.MAX_MS;var g=t(14952);e.findBin=g.findBin,e.sorterAsc=g.sorterAsc,e.sorterDes=g.sorterDes,e.distinctVals=g.distinctVals,e.roundUp=g.roundUp,e.sort=g.sort,e.findIndexOfMin=g.findIndexOfMin,e.sortObjectKeys=t(95376);var h=t(63084);e.aggNums=h.aggNums,e.len=h.len,e.mean=h.mean,e.geometricMean=h.geometricMean,e.median=h.median,e.midRange=h.midRange,e.variance=h.variance,e.stdev=h.stdev,e.interp=h.interp;var T=t(52248);e.init2dArray=T.init2dArray,e.transposeRagged=T.transposeRagged,e.dot=T.dot,e.translationMatrix=T.translationMatrix,e.rotationMatrix=T.rotationMatrix,e.rotationXYMatrix=T.rotationXYMatrix,e.apply3DTransform=T.apply3DTransform,e.apply2DTransform=T.apply2DTransform,e.apply2DTransform2=T.apply2DTransform2,e.convertCssMatrix=T.convertCssMatrix,e.inverseTransformMatrix=T.inverseTransformMatrix;var c=t(11864);e.deg2rad=c.deg2rad,e.rad2deg=c.rad2deg,e.angleDelta=c.angleDelta,e.angleDist=c.angleDist,e.isFullCircle=c.isFullCircle,e.isAngleInsideSector=c.isAngleInsideSector,e.isPtInsideSector=c.isPtInsideSector,e.pathArc=c.pathArc,e.pathSector=c.pathSector,e.pathAnnulus=c.pathAnnulus;var i=t(98308);e.isLeftAnchor=i.isLeftAnchor,e.isCenterAnchor=i.isCenterAnchor,e.isRightAnchor=i.isRightAnchor,e.isTopAnchor=i.isTopAnchor,e.isMiddleAnchor=i.isMiddleAnchor,e.isBottomAnchor=i.isBottomAnchor;var d=t(92348);e.segmentsIntersect=d.segmentsIntersect,e.segmentDistance=d.segmentDistance,e.getTextLocation=d.getTextLocation,e.clearLocationCache=d.clearLocationCache,e.getVisibleSegment=d.getVisibleSegment,e.findPointOnPath=d.findPointOnPath;var x=t(92880);e.extendFlat=x.extendFlat,e.extendDeep=x.extendDeep,e.extendDeepAll=x.extendDeepAll,e.extendDeepNoArrays=x.extendDeepNoArrays;var w=t(24248);e.log=w.log,e.warn=w.warn,e.error=w.error;var C=t(53756);e.counterRegex=C.counter;var y=t(91200);e.throttle=y.throttle,e.throttleDone=y.done,e.clearThrottle=y.clear;var S=t(52200);e.getGraphDiv=S.getGraphDiv,e.isPlotDiv=S.isPlotDiv,e.removeElement=S.removeElement,e.addStyleRule=S.addStyleRule,e.addRelatedStyleRule=S.addRelatedStyleRule,e.deleteRelatedStyleRule=S.deleteRelatedStyleRule,e.getFullTransformMatrix=S.getFullTransformMatrix,e.getElementTransformMatrix=S.getElementTransformMatrix,e.getElementAndAncestors=S.getElementAndAncestors,e.equalDomRects=S.equalDomRects,e.clearResponsive=t(75352),e.preserveDrawingBuffer=t(34296),e.makeTraceGroups=t(30988),e._=t(98356),e.notifier=t(41792),e.filterUnique=t(68944),e.filterVisible=t(43880),e.pushUnique=t(52416),e.increment=t(1396),e.cleanNumber=t(54037),e.ensureNumber=function(it){return L(it)?(it=Number(it),it>v||it<p?r:it):r},e.isIndex=function(J,it){return it!==void 0&&J>=it?!1:L(J)&&J>=0&&J%1===0},e.noop=t(16628),e.identity=t(35536),e.repeat=function(J,it){for(var K=new Array(it),H=0;H<it;H++)K[H]=J;return K},e.swapAttrs=function(J,it,K,H){K||(K="x"),H||(H="y");for(var at=0;at<it.length;at++){var tt=it[at],lt=e.nestedProperty(J,tt.replace("?",K)),dt=e.nestedProperty(J,tt.replace("?",H)),mt=lt.get();lt.set(dt.get()),dt.set(mt)}},e.raiseToTop=function(it){it.parentNode.appendChild(it)},e.cancelTransition=function(J){return J.transition().duration(0)},e.constrain=function(J,it,K){return it>K?Math.max(K,Math.min(it,J)):Math.max(it,Math.min(K,J))},e.bBoxIntersect=function(J,it,K){return K=K||0,J.left<=it.right+K&&it.left<=J.right+K&&J.top<=it.bottom+K&&it.top<=J.bottom+K},e.simpleMap=function(J,it,K,H,at){for(var tt=J.length,lt=new Array(tt),dt=0;dt<tt;dt++)lt[dt]=it(J[dt],K,H,at);return lt},e.randstr=function J(it,K,H,at){if(H||(H=16),K===void 0&&(K=24),K<=0)return"0";var tt=Math.log(Math.pow(2,K))/Math.log(H),lt="",dt,mt,gt;for(dt=2;tt===1/0;dt*=2)tt=Math.log(Math.pow(2,K/dt))/Math.log(H)*dt;var Mt=tt-Math.floor(tt);for(dt=0;dt<Math.floor(tt);dt++)gt=Math.floor(Math.random()*H).toString(H),lt=gt+lt;Mt&&(mt=Math.pow(H,Mt),gt=Math.floor(Math.random()*mt).toString(H),lt=gt+lt);var Lt=parseInt(lt,H);return it&&it[lt]||Lt!==1/0&&Lt>=Math.pow(2,K)?at>10?(e.warn("randstr failed uniqueness"),lt):J(it,K,H,(at||0)+1):lt},e.OptionControl=function(J,it){J||(J={}),it||(it="opt");var K={};return K.optionList=[],K._newoption=function(H){H[it]=J,K[H.name]=H,K.optionList.push(H)},K["_"+it]=J,K},e.smooth=function(J,it){if(it=Math.round(it)||0,it<2)return J;var K=J.length,H=2*K,at=2*it-1,tt=new Array(at),lt=new Array(K),dt,mt,gt,Mt;for(dt=0;dt<at;dt++)tt[dt]=(1-Math.cos(Math.PI*(dt+1)/it))/(2*it);for(dt=0;dt<K;dt++){for(Mt=0,mt=0;mt<at;mt++)gt=dt+mt+1-it,gt<-K?gt-=H*Math.round(gt/H):gt>=H&&(gt-=H*Math.floor(gt/H)),gt<0?gt=-1-gt:gt>=K&&(gt=H-1-gt),Mt+=J[gt]*tt[mt];lt[dt]=Mt}return lt},e.syncOrAsync=function(J,it,K){var H,at;function tt(){return e.syncOrAsync(J,it,K)}for(;J.length;)if(at=J.splice(0,1)[0],H=at(it),H&&H.then)return H.then(tt);return K&&K(it)},e.stripTrailingSlash=function(J){return J.substr(-1)==="/"?J.substr(0,J.length-1):J},e.noneOrAll=function(J,it,K){if(J){var H=!1,at=!0,tt,lt;for(tt=0;tt<K.length;tt++)lt=J[K[tt]],lt!=null?H=!0:at=!1;if(H&&!at)for(tt=0;tt<K.length;tt++)J[K[tt]]=it[K[tt]]}},e.mergeArray=function(J,it,K,H){var at=typeof H=="function";if(e.isArrayOrTypedArray(J))for(var tt=Math.min(J.length,it.length),lt=0;lt<tt;lt++){var dt=J[lt];it[lt][K]=at?H(dt):dt}},e.mergeArrayCastPositive=function(J,it,K){return e.mergeArray(J,it,K,function(H){var at=+H;return isFinite(at)&&at>0?at:0})},e.fillArray=function(J,it,K,H){if(H=H||e.identity,e.isArrayOrTypedArray(J))for(var at=0;at<it.length;at++)it[at][K]=H(J[at])},e.castOption=function(J,it,K,H){H=H||e.identity;var at=e.nestedProperty(J,K).get();return e.isArrayOrTypedArray(at)?Array.isArray(it)&&e.isArrayOrTypedArray(at[it[0]])?H(at[it[0]][it[1]]):H(at[it]):at},e.extractOption=function(J,it,K,H){if(K in J)return J[K];var at=e.nestedProperty(it,H).get();if(!Array.isArray(at))return at};function M(J){var it={};for(var K in J)for(var H=J[K],at=0;at<H.length;at++)it[H[at]]=+K;return it}e.tagSelected=function(J,it,K){var H=it.selectedpoints,at=it._indexToPoints,tt;at&&(tt=M(at));function lt(Lt){return Lt!==void 0&&Lt<J.length}for(var dt=0;dt<H.length;dt++){var mt=H[dt];if(e.isIndex(mt)||e.isArrayOrTypedArray(mt)&&e.isIndex(mt[0])&&e.isIndex(mt[1])){var gt=tt?tt[mt]:mt,Mt=K?K[gt]:gt;lt(Mt)&&(J[Mt].selected=1)}}},e.selIndices2selPoints=function(J){var it=J.selectedpoints,K=J._indexToPoints;if(K){for(var H=M(K),at=[],tt=0;tt<it.length;tt++){var lt=it[tt];if(e.isIndex(lt)){var dt=H[lt];e.isIndex(dt)&&at.push(dt)}}return at}else return it},e.getTargetArray=function(J,it){var K=it.target;if(typeof K=="string"&&K){var H=e.nestedProperty(J,K).get();return e.isArrayOrTypedArray(H)?H:!1}else if(e.isArrayOrTypedArray(K))return K;return!1};function a(J,it,K){var H={};typeof it!="object"&&(it={});var at=K==="pieLike"?-1:3,tt=Object.keys(J),lt,dt,mt;for(lt=0;lt<tt.length;lt++)dt=tt[lt],mt=J[dt],!(dt.charAt(0)==="_"||typeof mt=="function")&&(dt==="module"?H[dt]=mt:Array.isArray(mt)?dt==="colorscale"||at===-1?H[dt]=mt.slice():H[dt]=mt.slice(0,at):e.isTypedArray(mt)?at===-1?H[dt]=mt.subarray():H[dt]=mt.subarray(0,at):mt&&typeof mt=="object"?H[dt]=a(J[dt],it[dt],K):H[dt]=mt);for(tt=Object.keys(it),lt=0;lt<tt.length;lt++)dt=tt[lt],mt=it[dt],(typeof mt!="object"||!(dt in H)||typeof H[dt]!="object")&&(H[dt]=mt);return H}e.minExtend=a,e.titleCase=function(J){return J.charAt(0).toUpperCase()+J.substr(1)},e.containsAny=function(J,it){for(var K=0;K<it.length;K++)if(J.indexOf(it[K])!==-1)return!0;return!1},e.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var E=/Version\/[\d\.]+.*Safari/;e.isSafari=function(){return E.test(window.navigator.userAgent)};var m=/iPad|iPhone|iPod/;e.isIOS=function(){return m.test(window.navigator.userAgent)};var k=/Firefox\/(\d+)\.\d+/;e.getFirefoxVersion=function(){var J=k.exec(window.navigator.userAgent);if(J&&J.length===2){var it=parseInt(J[1]);if(!isNaN(it))return it}return null},e.isD3Selection=function(J){return J instanceof b.selection},e.ensureSingle=function(J,it,K,H){var at=J.select(it+(K?"."+K:""));if(at.size())return at;var tt=J.append(it);return K&&tt.classed(K,!0),H&&tt.call(H),tt},e.ensureSingleById=function(J,it,K,H){var at=J.select(it+"#"+K);if(at.size())return at;var tt=J.append(it).attr("id",K);return H&&tt.call(H),tt},e.objectFromPath=function(J,it){for(var K=J.split("."),H,at=H={},tt=0;tt<K.length;tt++){var lt=K[tt],dt=null,mt=K[tt].match(/(.*)\[([0-9]+)\]/);mt?(lt=mt[1],dt=mt[2],H=H[lt]=[],tt===K.length-1?H[dt]=it:H[dt]={},H=H[dt]):(tt===K.length-1?H[lt]=it:H[lt]={},H=H[lt])}return at};var I=/^([^\[\.]+)\.(.+)?/,O=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;function z(J){return J.slice(0,2)==="__"}e.expandObjectPaths=function(J){var it,K,H,at,tt,lt,dt;if(typeof J=="object"&&!Array.isArray(J)){for(K in J)if(J.hasOwnProperty(K))if(it=K.match(I)){if(at=J[K],H=it[1],z(H))continue;delete J[K],J[H]=e.extendDeepNoArrays(J[H]||{},e.objectFromPath(K,e.expandObjectPaths(at))[H])}else if(it=K.match(O)){if(at=J[K],H=it[1],z(H))continue;if(tt=parseInt(it[2]),delete J[K],J[H]=J[H]||[],it[3]===".")dt=it[4],lt=J[H][tt]=J[H][tt]||{},e.extendDeepNoArrays(lt,e.objectFromPath(dt,e.expandObjectPaths(at)));else{if(z(H))continue;J[H][tt]=e.expandObjectPaths(at)}}else{if(z(K))continue;J[K]=e.expandObjectPaths(J[K])}}return J},e.numSeparate=function(J,it,K){if(K||(K=!1),typeof it!="string"||it.length===0)throw new Error("Separator string required for formatting!");typeof J=="number"&&(J=String(J));var H=/(\d+)(\d{3})/,at=it.charAt(0),tt=it.charAt(1),lt=J.split("."),dt=lt[0],mt=lt.length>1?at+lt[1]:"";if(tt&&(lt.length>1||dt.length>4||K))for(;H.test(dt);)dt=dt.replace(H,"$1"+tt+"$2");return dt+mt},e.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var B=/^\w*$/;e.templateString=function(J,it){var K={};return J.replace(e.TEMPLATE_STRING_REGEX,function(H,at){var tt;return B.test(at)?tt=it[at]:(K[at]=K[at]||e.nestedProperty(it,at).get,tt=K[at]()),e.isValidTextValue(tt)?tt:""})};var F={max:10,count:0,name:"hovertemplate"};e.hovertemplateString=function(){return et.apply(F,arguments)};var _={max:10,count:0,name:"texttemplate"};e.texttemplateString=function(){return et.apply(_,arguments)};var N=/^(\S+)([\*\/])(-?\d+(\.\d+)?)$/;function G(J){var it=J.match(N);return it?{key:it[1],op:it[2],number:Number(it[3])}:{key:J,op:null,number:null}}var X={max:10,count:0,name:"texttemplate",parseMultDiv:!0};e.texttemplateStringForShapes=function(){return et.apply(X,arguments)};var $=/^[:|\|]/;function et(J,it,K){var H=this,at=arguments;it||(it={});var tt={};return J.replace(e.TEMPLATE_STRING_REGEX,function(lt,dt,mt){var gt=dt==="xother"||dt==="yother",Mt=dt==="_xother"||dt==="_yother",Lt=dt==="_xother_"||dt==="_yother_",zt=dt==="xother_"||dt==="yother_",xt=gt||Mt||zt||Lt,Ct=dt;(Mt||Lt)&&(Ct=Ct.substring(1)),(zt||Lt)&&(Ct=Ct.substring(0,Ct.length-1));var wt=null,Rt=null;if(H.parseMultDiv){var Tt=G(Ct);Ct=Tt.key,wt=Tt.op,Rt=Tt.number}var Bt;if(xt){if(Bt=it[Ct],Bt===void 0)return""}else{var Gt,te;for(te=3;te<at.length;te++)if(Gt=at[te],!!Gt){if(Gt.hasOwnProperty(Ct)){Bt=Gt[Ct];break}if(B.test(Ct)||(Bt=e.nestedProperty(Gt,Ct).get(),Bt=tt[Ct]||e.nestedProperty(Gt,Ct).get(),Bt&&(tt[Ct]=Bt)),Bt!==void 0)break}}if(Bt!==void 0&&(wt==="*"&&(Bt*=Rt),wt==="/"&&(Bt/=Rt)),Bt===void 0&&H)return H.count<H.max&&(e.warn("Variable '"+Ct+"' in "+H.name+" could not be found!"),Bt=lt),H.count===H.max&&e.warn("Too many "+H.name+" warnings - additional warnings will be suppressed"),H.count++,lt;if(mt){var Wt;if(mt[0]===":"&&(Wt=K?K.numberFormat:e.numberFormat,Bt!==""&&(Bt=Wt(mt.replace($,""))(Bt))),mt[0]==="|"){Wt=K?K.timeFormat:P;var jt=e.dateTime2ms(Bt);Bt=e.formatDate(jt,mt.replace($,""),!1,Wt)}}else{var ie=Ct+"Label";it.hasOwnProperty(ie)&&(Bt=it[ie])}return xt&&(Bt="("+Bt+")",(Mt||Lt)&&(Bt=" "+Bt),(zt||Lt)&&(Bt=Bt+" ")),Bt})}var ot=48,nt=57;e.subplotSort=function(J,it){for(var K=Math.min(J.length,it.length)+1,H=0,at=0,tt=0;tt<K;tt++){var lt=J.charCodeAt(tt)||0,dt=it.charCodeAt(tt)||0,mt=lt>=ot&&lt<=nt,gt=dt>=ot&&dt<=nt;if(mt&&(H=10*H+lt-ot),gt&&(at=10*at+dt-ot),!mt||!gt){if(H!==at)return H-at;if(lt!==dt)return lt-dt}}return at-H};var Z=2e9;e.seedPseudoRandom=function(){Z=2e9},e.pseudoRandom=function(){var J=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-J)<429496729?e.pseudoRandom():Z/4294967296},e.fillText=function(J,it,K){var H=Array.isArray(K)?function(lt){K.push(lt)}:function(lt){K.text=lt},at=e.extractOption(J,it,"htx","hovertext");if(e.isValidTextValue(at))return H(at);var tt=e.extractOption(J,it,"tx","text");if(e.isValidTextValue(tt))return H(tt)},e.isValidTextValue=function(J){return J||J===0},e.formatPercent=function(J,it){it=it||0;for(var K=(Math.round(100*J*Math.pow(10,it))*Math.pow(.1,it)).toFixed(it)+"%",H=0;H<it;H++)K.indexOf(".")!==-1&&(K=K.replace("0%","%"),K=K.replace(".%","%"));return K},e.isHidden=function(J){var it=window.getComputedStyle(J).display;return!it||it==="none"},e.strTranslate=function(J,it){return J||it?"translate("+J+","+it+")":""},e.strRotate=function(J){return J?"rotate("+J+")":""},e.strScale=function(J){return J!==1?"scale("+J+")":""},e.getTextTransform=function(J){var it=J.noCenter,K=J.textX,H=J.textY,at=J.targetX,tt=J.targetY,lt=J.anchorX||0,dt=J.anchorY||0,mt=J.rotate,gt=J.scale;return gt?gt>1&&(gt=1):gt=0,e.strTranslate(at-gt*(K+lt),tt-gt*(H+dt))+e.strScale(gt)+(mt?"rotate("+mt+(it?"":" "+K+" "+H)+")":"")},e.setTransormAndDisplay=function(J,it){J.attr("transform",e.getTextTransform(it)),J.style("display",it.scale?null:"none")},e.ensureUniformFontSize=function(J,it){var K=e.extendFlat({},it);return K.size=Math.max(it.size,J._fullLayout.uniformtext.minsize||0),K},e.join2=function(J,it,K){var H=J.length;return H>1?J.slice(0,-1).join(it)+K+J[H-1]:J.join(it)},e.bigFont=function(J){return Math.round(1.2*J)};var Q=e.getFirefoxVersion(),W=Q!==null&&Q<86;e.getPositionFromD3Event=function(){return W?[b.event.layerX,b.event.layerY]:[b.event.offsetX,b.event.offsetY]}},63620:function(j){j.exports=function(t){return window&&window.process&&window.process.versions?Object.prototype.toString.call(t)==="[object Object]":Object.prototype.toString.call(t)==="[object Object]"&&Object.getPrototypeOf(t).hasOwnProperty("hasOwnProperty")}},37804:function(j,V,t){var b=t(22296),P=/^\w*$/,o=0,L=1,A=2,v=3,p=4;j.exports=function(e,s,n,l){n=n||"name",l=l||"value";var f,u,g,h={};s&&s.length?(g=b(e,s),u=g.get()):u=e,s=s||"";var T={};if(u)for(f=0;f<u.length;f++)T[u[f][n]]=f;var c=P.test(l),i={set:function(d,x){var w=x===null?p:o;if(!u){if(!g||w===p)return;u=[],g.set(u)}var C=T[d];if(C===void 0){if(w===p)return;w=w|v,C=u.length,T[d]=C}else x!==(c?u[C][l]:b(u[C],l).get())&&(w=w|A);var y=u[C]=u[C]||{};return y[n]=d,c?y[l]=x:b(y,l).set(x),x!==null&&(w=w&~p),h[C]=h[C]|w,i},get:function(d){if(u){var x=T[d];if(x!==void 0)return c?u[x][l]:b(u[x],l).get()}},rename:function(d,x){var w=T[d];return w===void 0||(h[w]=h[w]|L,T[x]=w,delete T[d],u[w][n]=x),i},remove:function(d){var x=T[d];if(x===void 0)return i;var w=u[x];if(Object.keys(w).length>2)return h[x]=h[x]|A,i.set(d,null);if(c){for(f=x;f<u.length;f++)h[f]=h[f]|v;for(f=x;f<u.length;f++)T[u[f][n]]--;u.splice(x,1),delete T[d]}else b(w,l).set(null),h[x]=h[x]|A|p;return i},constructUpdate:function(){for(var d,x,w={},C=Object.keys(h),y=0;y<C.length;y++)x=C[y],d=s+"["+x+"]",u[x]?(h[x]&L&&(w[d+"."+n]=u[x][n]),h[x]&A&&(c?w[d+"."+l]=h[x]&p?null:u[x][l]:w[d+"."+l]=h[x]&p?null:b(u[x],l).get())):w[d]=null;return w}};return i}},98356:function(j,V,t){var b=t(24040);j.exports=function(o,L){for(var A=o._context.locale,v=0;v<2;v++){for(var p=o._context.locales,r=0;r<2;r++){var e=(p[A]||{}).dictionary;if(e){var s=e[L];if(s)return s}p=b.localeRegistry}var n=A.split("-")[0];if(n===A)break;A=n}return L}},24248:function(j,V,t){var b=t(20556).dfltConfig,P=t(41792),o=j.exports={};o.log=function(){var L;if(b.logging>1){var A=["LOG:"];for(L=0;L<arguments.length;L++)A.push(arguments[L]);console.trace.apply(console,A)}if(b.notifyOnLogging>1){var v=[];for(L=0;L<arguments.length;L++)v.push(arguments[L]);P(v.join("<br>"),"long")}},o.warn=function(){var L;if(b.logging>0){var A=["WARN:"];for(L=0;L<arguments.length;L++)A.push(arguments[L]);console.trace.apply(console,A)}if(b.notifyOnLogging>0){var v=[];for(L=0;L<arguments.length;L++)v.push(arguments[L]);P(v.join("<br>"),"stick")}},o.error=function(){var L;if(b.logging>0){var A=["ERROR:"];for(L=0;L<arguments.length;L++)A.push(arguments[L]);console.error.apply(console,A)}if(b.notifyOnLogging>0){var v=[];for(L=0;L<arguments.length;L++)v.push(arguments[L]);P(v.join("<br>"),"stick")}}},30988:function(j,V,t){var b=t(33428);j.exports=function(o,L,A){var v=o.selectAll("g."+A.replace(/\s/g,".")).data(L,function(r){return r[0].trace.uid});v.exit().remove(),v.enter().append("g").attr("class",A),v.order();var p=o.classed("rangeplot")?"nodeRangePlot3":"node3";return v.each(function(r){r[0][p]=b.select(this)}),v}},52248:function(j,V,t){var b=t(36524);V.init2dArray=function(P,o){for(var L=new Array(P),A=0;A<P;A++)L[A]=new Array(o);return L},V.transposeRagged=function(P){var o=0,L=P.length,A,v;for(A=0;A<L;A++)o=Math.max(o,P[A].length);var p=new Array(o);for(A=0;A<o;A++)for(p[A]=new Array(L),v=0;v<L;v++)p[A][v]=P[v][A];return p},V.dot=function(P,o){if(!(P.length&&o.length)||P.length!==o.length)return null;var L=P.length,A,v;if(P[0].length)for(A=new Array(L),v=0;v<L;v++)A[v]=V.dot(P[v],o);else if(o[0].length){var p=V.transposeRagged(o);for(A=new Array(p.length),v=0;v<p.length;v++)A[v]=V.dot(P,p[v])}else for(A=0,v=0;v<L;v++)A+=P[v]*o[v];return A},V.translationMatrix=function(P,o){return[[1,0,P],[0,1,o],[0,0,1]]},V.rotationMatrix=function(P){var o=P*Math.PI/180;return[[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]},V.rotationXYMatrix=function(P,o,L){return V.dot(V.dot(V.translationMatrix(o,L),V.rotationMatrix(P)),V.translationMatrix(-o,-L))},V.apply3DTransform=function(P){return function(){var o=arguments,L=arguments.length===1?o[0]:[o[0],o[1],o[2]||0];return V.dot(P,[L[0],L[1],L[2],1]).slice(0,3)}},V.apply2DTransform=function(P){return function(){var o=arguments;o.length===3&&(o=o[0]);var L=arguments.length===1?o[0]:[o[0],o[1]];return V.dot(P,[L[0],L[1],1]).slice(0,2)}},V.apply2DTransform2=function(P){var o=V.apply2DTransform(P);return function(L){return o(L.slice(0,2)).concat(o(L.slice(2,4)))}},V.convertCssMatrix=function(P){if(P){var o=P.length;if(o===16)return P;if(o===6)return[P[0],P[1],0,0,P[2],P[3],0,0,0,0,1,0,P[4],P[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(P){var o=[];return b.invert(o,P),[[o[0],o[1],o[2],o[3]],[o[4],o[5],o[6],o[7]],[o[8],o[9],o[10],o[11]],[o[12],o[13],o[14],o[15]]]}},20435:function(j){function V(b,P){var o=b%P;return o<0?o+P:o}function t(b,P){return Math.abs(b)>P/2?b-Math.round(b/P)*P:b}j.exports={mod:V,modHalf:t}},22296:function(j,V,t){var b=t(38248),P=t(38116).isArrayOrTypedArray;j.exports=function(l,f){if(b(f))f=String(f);else if(typeof f!="string"||f.substr(f.length-4)==="[-1]")throw"bad property string";var u=f.split("."),g,h,T,c;for(c=0;c<u.length;c++)if(String(u[c]).slice(0,2)==="__")throw"bad property string";for(c=0;c<u.length;){if(g=String(u[c]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),g){if(g[1])u[c]=g[1];else if(c===0)u.splice(0,1);else throw"bad property string";for(h=g[2].substr(1,g[2].length-2).split("]["),T=0;T<h.length;T++)c++,u.splice(c,0,Number(h[T]))}c++}return typeof l!="object"?s(l,f,u):{set:v(l,u,f),get:o(l,u),astr:f,parts:u,obj:l}};function o(n,l){return function(){var f=n,u,g,h,T,c;for(T=0;T<l.length-1;T++){if(u=l[T],u===-1){for(g=!0,h=[],c=0;c<f.length;c++)h[c]=o(f[c],l.slice(T+1))(),h[c]!==h[0]&&(g=!1);return g?h[0]:h}if(typeof u=="number"&&!P(f)||(f=f[u],typeof f!="object"||f===null))return}if(!(typeof f!="object"||f===null)&&(h=f[l[T]],h!==null))return h}}var L=/(^|\.)args\[/;function A(n,l){return n===void 0||n===null&&!l.match(L)}function v(n,l,f){return function(u){var g=n,h="",T=A(u,f),c,i;for(i=0;i<l.length-1;i++){if(c=l[i],typeof c=="number"&&!P(g))throw"array index but container is not an array";if(c===-1){if(T=!r(g,l.slice(i+1),u,f),T)break;return}if(!e(g,c,l[i+1],T))break;if(g=g[c],typeof g!="object"||g===null)throw"container is not an object";h=p(h,c)}if(T){if(i===l.length-1&&(delete g[l[i]],Array.isArray(g)&&+l[i]===g.length-1))for(;g.length&&g[g.length-1]===void 0;)g.pop()}else g[l[i]]=u}}function p(n,l){var f=l;return b(l)?f="["+l+"]":n&&(f="."+l),n+f}function r(n,l,f,u){var g=P(f),h=!0,T=f,c=u.replace("-1",0),i=g?!1:A(f,c),d=l[0],x;for(x=0;x<n.length;x++)c=u.replace("-1",x),g&&(T=f[x%f.length],i=A(T,c)),i&&(h=!1),e(n,x,d,i)&&v(n[x],l,u.replace("-1",x))(T);return h}function e(n,l,f,u){if(n[l]===void 0){if(u)return!1;typeof f=="number"?n[l]=[]:n[l]={}}return!0}function s(n,l,f){return{set:function(){throw"bad container"},get:function(){},astr:l,parts:f,obj:n}}},16628:function(j){j.exports=function(){}},41792:function(j,V,t){var b=t(33428),P=t(38248),o=[];j.exports=function(L,A){if(o.indexOf(L)!==-1)return;o.push(L);var v=1e3;P(A)?v=A:A==="long"&&(v=3e3);var p=b.select("body").selectAll(".plotly-notifier").data([0]);p.enter().append("div").classed("plotly-notifier",!0);var r=p.selectAll(".notifier-note").data(o);function e(s){s.duration(700).style("opacity",0).each("end",function(n){var l=o.indexOf(n);l!==-1&&o.splice(l,1),b.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(s){var n=b.select(this);n.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){n.transition().call(e)});for(var l=n.append("p"),f=s.split(/<br\s*\/?>/g),u=0;u<f.length;u++)u&&l.append("br"),l.append("span").text(f[u]);A==="stick"?n.transition().duration(350).style("opacity",1):n.transition().duration(700).style("opacity",1).transition().delay(v).call(e)})}},72213:function(j,V,t){var b=t(93972),P="data-savedcursor",o="!!";j.exports=function(A,v){var p=A.attr(P);if(v){if(!p){for(var r=(A.attr("class")||"").split(" "),e=0;e<r.length;e++){var s=r[e];s.indexOf("cursor-")===0&&A.attr(P,s.substr(7)).classed(s,!1)}A.attr(P)||A.attr(P,o)}b(A,v)}else p&&(A.attr(P,null),p===o?b(A):b(A,p))}},92065:function(j,V,t){var b=t(52248).dot,P=t(39032).BADNUM,o=j.exports={};o.tester=function(A){var v=A.slice(),p=v[0][0],r=p,e=v[0][1],s=e,n;for((v[v.length-1][0]!==v[0][0]||v[v.length-1][1]!==v[0][1])&&v.push(v[0]),n=1;n<v.length;n++)p=Math.min(p,v[n][0]),r=Math.max(r,v[n][0]),e=Math.min(e,v[n][1]),s=Math.max(s,v[n][1]);var l=!1,f;v.length===5&&(v[0][0]===v[1][0]?v[2][0]===v[3][0]&&v[0][1]===v[3][1]&&v[1][1]===v[2][1]&&(l=!0,f=function(c){return c[0]===v[0][0]}):v[0][1]===v[1][1]&&v[2][1]===v[3][1]&&v[0][0]===v[3][0]&&v[1][0]===v[2][0]&&(l=!0,f=function(c){return c[1]===v[0][1]}));function u(c,i){var d=c[0],x=c[1];return!(d===P||d<p||d>r||x===P||x<e||x>s||i&&f(c))}function g(c,i){var d=c[0],x=c[1];if(d===P||d<p||d>r||x===P||x<e||x>s)return!1;var w=v.length,C=v[0][0],y=v[0][1],S=0,M,a,E,m,k;for(M=1;M<w;M++)if(a=C,E=y,C=v[M][0],y=v[M][1],m=Math.min(a,C),!(d<m||d>Math.max(a,C)||x>Math.max(E,y)))if(x<Math.min(E,y))d!==m&&S++;else{if(C===a?k=x:k=E+(d-a)*(y-E)/(C-a),x===k)return!(M===1&&i);x<=k&&d!==m&&S++}return S%2===1}var h=!0,T=v[0];for(n=1;n<v.length;n++)if(T[0]!==v[n][0]||T[1]!==v[n][1]){h=!1;break}return{xmin:p,xmax:r,ymin:e,ymax:s,pts:v,contains:l?u:g,isRect:l,degenerate:h}},o.isSegmentBent=function(A,v,p,r){var e=A[v],s=[A[p][0]-e[0],A[p][1]-e[1]],n=b(s,s),l=Math.sqrt(n),f=[-s[1]/l,s[0]/l],u,g,h;for(u=v+1;u<p;u++)if(g=[A[u][0]-e[0],A[u][1]-e[1]],h=b(g,s),h<0||h>n||Math.abs(b(g,f))>r)return!0;return!1},o.filter=function(A,v){var p=[A[0]],r=0,e=0;function s(l){A.push(l);var f=p.length,u=r;p.splice(e+1);for(var g=u+1;g<A.length;g++)(g===A.length-1||o.isSegmentBent(A,u,g+1,v))&&(p.push(A[g]),p.length<f-2&&(r=g,e=p.length-1),u=g)}if(A.length>1){var n=A.pop();s(n)}return{addPt:s,raw:A,filtered:p}}},5048:function(j,V,t){var b=t(16576),P=t(28624);j.exports=function(L,A,v){var p=L._fullLayout,r=!0;return p._glcanvas.each(function(e){if(e.regl){e.regl.preloadCachedCode(v);return}if(!(e.pick&&!p._has("parcoords"))){try{e.regl=P({canvas:this,attributes:{antialias:!e.pick,preserveDrawingBuffer:!0},pixelRatio:L._context.plotGlPixelRatio||t.g.devicePixelRatio,extensions:A||[],cachedCode:v||{}})}catch{r=!1}e.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(s){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:s,layer:e.key})},!1)}}),r||b({container:p._glcontainer.node()}),r}},34296:function(j,V,t){var b=t(38248),P=t(25928);j.exports=function(A){var v;if(A&&A.hasOwnProperty("userAgent")?v=A.userAgent:v=o(),typeof v!="string")return!0;var p=P({ua:{headers:{"user-agent":v}},tablet:!0,featureDetect:!1});if(!p)for(var r=v.split(" "),e=1;e<r.length;e++){var s=r[e];if(s.indexOf("Safari")!==-1)for(var n=e-1;n>-1;n--){var l=r[n];if(l.substr(0,8)==="Version/"){var f=l.substr(8).split(".")[0];if(b(f)&&(f=+f),f>=13)return!0}}}return p};function o(){var L;return typeof navigator<"u"&&(L=navigator.userAgent),L&&L.headers&&typeof L.headers["user-agent"]=="string"&&(L=L.headers["user-agent"]),L}},52416:function(j){j.exports=function(t,b){if(b instanceof RegExp){for(var P=b.toString(),o=0;o<t.length;o++)if(t[o]instanceof RegExp&&t[o].toString()===P)return t;t.push(b)}else(b||b===0)&&t.indexOf(b)===-1&&t.push(b);return t}},94552:function(j,V,t){var b=t(3400),P=t(20556).dfltConfig;function o(A,v){for(var p=[],r,e=0;e<v.length;e++)r=v[e],r===A?p[e]=r:typeof r=="object"?p[e]=Array.isArray(r)?b.extendDeep([],r):b.extendDeepAll({},r):p[e]=r;return p}var L={};L.add=function(A,v,p,r,e){var s,n;if(A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},n=A.undoQueue.index,A.autoplay){A.undoQueue.inSequence||(A.autoplay=!1);return}!A.undoQueue.sequence||A.undoQueue.beginSequence?(s={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},A.undoQueue.queue.splice(n,A.undoQueue.queue.length-n,s),A.undoQueue.index+=1):s=A.undoQueue.queue[n-1],A.undoQueue.beginSequence=!1,s&&(s.undo.calls.unshift(v),s.undo.args.unshift(p),s.redo.calls.push(r),s.redo.args.push(e)),A.undoQueue.queue.length>P.queueLength&&(A.undoQueue.queue.shift(),A.undoQueue.index--)},L.startSequence=function(A){A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},A.undoQueue.sequence=!0,A.undoQueue.beginSequence=!0},L.stopSequence=function(A){A.undoQueue=A.undoQueue||{index:0,queue:[],sequence:!1},A.undoQueue.sequence=!1,A.undoQueue.beginSequence=!1},L.undo=function(v){var p,r;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index<=0)){for(v.undoQueue.index--,p=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,r=0;r<p.undo.calls.length;r++)L.plotDo(v,p.undo.calls[r],p.undo.args[r]);v.undoQueue.inSequence=!1,v.autoplay=!1}},L.redo=function(v){var p,r;if(!(v.undoQueue===void 0||isNaN(v.undoQueue.index)||v.undoQueue.index>=v.undoQueue.queue.length)){for(p=v.undoQueue.queue[v.undoQueue.index],v.undoQueue.inSequence=!0,r=0;r<p.redo.calls.length;r++)L.plotDo(v,p.redo.calls[r],p.redo.args[r]);v.undoQueue.inSequence=!1,v.autoplay=!1,v.undoQueue.index++}},L.plotDo=function(A,v,p){A.autoplay=!0,p=o(A,p),v.apply(null,p)},j.exports=L},53756:function(j,V){V.counter=function(t,b,P,o){var L=(b||"")+(P?"":"$"),A=o===!1?"":"^";return t==="xy"?new RegExp(A+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+L):new RegExp(A+t+"([2-9]|[1-9][0-9]+)?"+L)}},23193:function(j){var V=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,t=/^[^\.\[\]]+$/;j.exports=function(b,P){for(;P;){var o=b.match(V);if(o)b=o[1];else if(b.match(t))b="";else throw new Error("bad relativeAttr call:"+[b,P]);if(P.charAt(0)==="^")P=P.slice(1);else break}return b&&P.charAt(0)!=="["?b+"."+P:b+P}},51528:function(j,V,t){var b=t(38116).isArrayOrTypedArray,P=t(63620);j.exports=function o(L,A){for(var v in A){var p=A[v],r=L[v];if(r!==p)if(v.charAt(0)==="_"||typeof p=="function"){if(v in L)continue;L[v]=p}else if(b(p)&&b(r)&&P(p[0])){if(v==="customdata"||v==="ids")continue;for(var e=Math.min(p.length,r.length),s=0;s<e;s++)r[s]!==p[s]&&P(p[s])&&P(r[s])&&o(r[s],p[s])}else P(p)&&P(r)&&(o(r,p),Object.keys(r).length||delete L[v])}}},14952:function(j,V,t){var b=t(38248),P=t(24248),o=t(35536),L=t(39032).BADNUM,A=1e-9;V.findBin=function(s,n,l){if(b(n.start))return l?Math.ceil((s-n.start)/n.size-A)-1:Math.floor((s-n.start)/n.size+A);var f=0,u=n.length,g=0,h=u>1?(n[u-1]-n[0])/(u-1):1,T,c;for(h>=0?c=l?v:p:c=l?e:r,s+=h*A*(l?-1:1)*(h>=0?1:-1);f<u&&g++<100;)T=Math.floor((f+u)/2),c(n[T],s)?f=T+1:u=T;return g>90&&P.log("Long binary search..."),f-1};function v(s,n){return s<n}function p(s,n){return s<=n}function r(s,n){return s>n}function e(s,n){return s>=n}V.sorterAsc=function(s,n){return s-n},V.sorterDes=function(s,n){return n-s},V.distinctVals=function(s){var n=s.slice();n.sort(V.sorterAsc);var l;for(l=n.length-1;l>-1&&n[l]===L;l--);for(var f=n[l]-n[0]||1,u=f/(l||1)/1e4,g=[],h,T=0;T<=l;T++){var c=n[T],i=c-h;h===void 0?(g.push(c),h=c):i>u&&(f=Math.min(f,i),g.push(c),h=c)}return{vals:g,minDiff:f}},V.roundUp=function(s,n,l){for(var f=0,u=n.length-1,g,h=0,T=l?0:1,c=l?1:0,i=l?Math.ceil:Math.floor;f<u&&h++<100;)g=i((f+u)/2),n[g]<=s?f=g+T:u=g-c;return n[f]},V.sort=function(s,n){for(var l=0,f=0,u=1;u<s.length;u++){var g=n(s[u],s[u-1]);if(g<0?l=1:g>0&&(f=1),l&&f)return s.sort(n)}return f?s:s.reverse()},V.findIndexOfMin=function(s,n){n=n||o;for(var l=1/0,f,u=0;u<s.length;u++){var g=n(s[u]);g<l&&(l=g,f=u)}return f}},93972:function(j){j.exports=function(t,b){(t.attr("class")||"").split(" ").forEach(function(P){P.indexOf("cursor-")===0&&t.classed(P,!1)}),b&&t.classed("cursor-"+b,!0)}},16576:function(j,V,t){var b=t(76308),P=function(){};j.exports=function(L){for(var A in L)typeof L[A]=="function"&&(L[A]=P);L.destroy=function(){L.container.parentNode.removeChild(L.container)};var v=document.createElement("div");v.className="no-webgl",v.style.cursor="pointer",v.style.fontSize="24px",v.style.color=b.defaults[0],v.style.position="absolute",v.style.left=v.style.top="0px",v.style.width=v.style.height="100%",v.style["background-color"]=b.lightLine,v.style["z-index"]=30;var p=document.createElement("p");return p.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",p.style.position="relative",p.style.top="50%",p.style.left="50%",p.style.height="30%",p.style.width="50%",p.style.margin="-15% 0 0 -25%",v.appendChild(p),L.container.appendChild(v),L.container.style.background="#FFFFFF",L.container.onclick=function(){window.open("https://get.webgl.org")},!1}},95376:function(j){j.exports=function(t){return Object.keys(t).sort()}},63084:function(j,V,t){var b=t(38248),P=t(38116).isArrayOrTypedArray;V.aggNums=function(o,L,A,v){var p,r;if((!v||v>A.length)&&(v=A.length),b(L)||(L=!1),P(A[0])){for(r=new Array(v),p=0;p<v;p++)r[p]=V.aggNums(o,L,A[p]);A=r}for(p=0;p<v;p++)b(L)?b(A[p])&&(L=o(+L,+A[p])):L=A[p];return L},V.len=function(o){return V.aggNums(function(L){return L+1},0,o)},V.mean=function(o,L){return L||(L=V.len(o)),V.aggNums(function(A,v){return A+v},0,o)/L},V.geometricMean=function(o,L){return L||(L=V.len(o)),Math.pow(V.aggNums(function(A,v){return A*v},1,o),1/L)},V.midRange=function(o){if(!(o===void 0||o.length===0))return(V.aggNums(Math.max,null,o)+V.aggNums(Math.min,null,o))/2},V.variance=function(o,L,A){return L||(L=V.len(o)),b(A)||(A=V.mean(o,L)),V.aggNums(function(v,p){return v+Math.pow(p-A,2)},0,o)/L},V.stdev=function(o,L,A){return Math.sqrt(V.variance(o,L,A))},V.median=function(o){var L=o.slice().sort();return V.interp(L,.5)},V.interp=function(o,L){if(!b(L))throw"n should be a finite number";if(L=L*o.length-.5,L<0)return o[0];if(L>o.length-1)return o[o.length-1];var A=L%1;return A*o[Math.ceil(L)]+(1-A)*o[Math.floor(L)]}},43080:function(j,V,t){var b=t(72160);function P(o){return o?b(o):[0,0,0,1]}j.exports=P},9188:function(j,V,t){var b=t(2264),P=t(43616),o=t(3400),L=null;function A(){if(L!==null)return L;L=!1;var v=o.isIE()||o.isSafari()||o.isIOS();if(window.navigator.userAgent&&!v){var p=Array.from(b.CSS_DECLARATIONS).reverse(),r=window.CSS&&window.CSS.supports||window.supportsCSS;if(typeof r=="function")L=p.some(function(l){return r.apply(null,l)});else{var e=P.tester.append("image").attr("style",b.STYLE),s=window.getComputedStyle(e.node()),n=s.imageRendering;L=p.some(function(l){var f=l[1];return n===f||n===f.toLowerCase()}),e.remove()}}return L}j.exports=A},72736:function(j,V,t){var b=t(33428),P=t(3400),o=P.strTranslate,L=t(9616),A=t(84284).LINE_SPACING,v=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(F,_,N){var G=F.text(),X=!F.attr("data-notex")&&_&&_._context.typesetMath&&typeof MathJax<"u"&&G.match(v),$=b.select(F.node().parentNode);if($.empty())return;var et=F.attr("class")?F.attr("class").split(" ")[0]:"text";et+="-math",$.selectAll("svg."+et).remove(),$.selectAll("g."+et+"-group").remove(),F.style("display",null).attr({"data-unformatted":G,"data-math":"N"});function ot(){$.empty()||(et=F.attr("class")+"-math",$.select("svg."+et).remove()),F.text("").style("white-space","pre");var nt=I(F.node(),G);nt&&F.style("pointer-events","all"),V.positionText(F),N&&N.call(F)}return X?(_&&_._promises||[]).push(new Promise(function(nt){F.style("display","none");var Z=parseInt(F.node().style.fontSize,10),Q={fontSize:Z};n(X[2],Q,function(W,J,it){$.selectAll("svg."+et).remove(),$.selectAll("g."+et+"-group").remove();var K=W&&W.select("svg");if(!K||!K.node()){ot(),nt();return}var H=$.append("g").classed(et+"-group",!0).attr({"pointer-events":"none","data-unformatted":G,"data-math":"Y"});H.node().appendChild(K.node()),J&&J.node()&&K.node().insertBefore(J.node().cloneNode(!0),K.node().firstChild);var at=it.width,tt=it.height;K.attr({class:et,height:tt,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var lt=F.node().style.fill||"black",dt=K.select("g");dt.attr({fill:lt,stroke:lt});var mt=dt.node().getBoundingClientRect(),gt=mt.width,Mt=mt.height;(gt>at||Mt>tt)&&(K.style("overflow","hidden"),mt=K.node().getBoundingClientRect(),gt=mt.width,Mt=mt.height);var Lt=+F.attr("x"),zt=+F.attr("y"),xt=Z||F.node().getBoundingClientRect().height,Ct=-xt/4;if(et[0]==="y")H.attr({transform:"rotate("+[-90,Lt,zt]+")"+o(-gt/2,Ct-Mt/2)});else if(et[0]==="l")zt=Ct-Mt/2;else if(et[0]==="a"&&et.indexOf("atitle")!==0)Lt=0,zt=Ct;else{var wt=F.attr("text-anchor");Lt=Lt-gt*(wt==="middle"?.5:wt==="end"?1:0),zt=zt+Ct-Mt/2}K.attr({x:Lt,y:zt}),N&&N.call(F,H),nt(H)})})):ot(),F};var p=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function e(F){return F.replace(p,"\\lt ").replace(r,"\\gt ")}var s=[["$","$"],["\\(","\\)"]];function n(F,_,N){var G=parseInt((MathJax.version||"").split(".")[0]);if(G!==2&&G!==3){P.warn("No MathJax version:",MathJax.version);return}var X,$,et,ot,nt=function(){return $=P.extendDeepAll({},MathJax.Hub.config),et=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:s},displayAlign:"left"})},Z=function(){$=P.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=s},Q=function(){if(X=MathJax.Hub.config.menuSettings.renderer,X!=="SVG")return MathJax.Hub.setRenderer("SVG")},W=function(){X=MathJax.config.startup.output,X!=="svg"&&(MathJax.config.startup.output="svg")},J=function(){var lt="math-output-"+P.randstr({},64);ot=b.select("body").append("div").attr({id:lt}).style({visibility:"hidden",position:"absolute","font-size":_.fontSize+"px"}).text(e(F));var dt=ot.node();return G===2?MathJax.Hub.Typeset(dt):MathJax.typeset([dt])},it=function(){var lt=ot.select(G===2?".MathJax_SVG":".MathJax"),dt=!lt.empty()&&ot.select("svg").node();if(!dt)P.log("There was an error in the tex syntax.",F),N();else{var mt=dt.getBoundingClientRect(),gt;G===2?gt=b.select("body").select("#MathJax_SVG_glyphs"):gt=lt.select("defs"),N(lt,gt,mt)}ot.remove()},K=function(){if(X!=="SVG")return MathJax.Hub.setRenderer(X)},H=function(){X!=="svg"&&(MathJax.config.startup.output=X)},at=function(){return et!==void 0&&(MathJax.Hub.processSectionDelay=et),MathJax.Hub.Config($)},tt=function(){MathJax.config=$};G===2?MathJax.Hub.Queue(nt,Q,J,it,K,at):G===3&&(Z(),W(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){J(),it(),H(),tt()}))}var l={sup:"font-size:70%",sub:"font-size:70%",s:"text-decoration:line-through",u:"text-decoration:underline",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},f={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},g="​",h=["http:","https:","mailto:","",void 0,":"],T=V.NEWLINES=/(\r\n?|\n)/g,c=/(<[^<>]*>)/,i=/<(\/?)([^ >]*)(\s+(.*))?>/i,d=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var x=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,C=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function S(F,_){if(!F)return null;var N=F.match(_),G=N&&(N[3]||N[4]);return G&&m(G)}var M=/(^|;)\s*color:/;V.plainText=function(F,_){_=_||{};for(var N=_.len!==void 0&&_.len!==-1?_.len:1/0,G=_.allowedTags!==void 0?_.allowedTags:["br"],X="...",$=X.length,et=F.split(c),ot=[],nt="",Z=0,Q=0;Q<et.length;Q++){var W=et[Q],J=W.match(i),it=J&&J[2].toLowerCase();if(it)G.indexOf(it)!==-1&&(ot.push(W),nt=it);else{var K=W.length;if(Z+K<N)ot.push(W),Z+=K;else if(Z<N){var H=N-Z;nt&&(nt!=="br"||H<=$||K<=$)&&ot.pop(),N>$?ot.push(W.substr(0,H-$)+X):ot.push(W.substr(0,H));break}nt=""}}return ot.join("")};var a={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function m(F){return F.replace(E,function(_,N){var G;return N.charAt(0)==="#"?G=k(N.charAt(1)==="x"?parseInt(N.substr(2),16):parseInt(N.substr(1),10)):G=a[N],G||_})}V.convertEntities=m;function k(F){if(!(F>1114111)){var _=String.fromCodePoint;if(_)return _(F);var N=String.fromCharCode;return F<=65535?N(F):N((F>>10)+55232,F%1024+56320)}}function I(F,_){_=_.replace(T," ");var N=!1,G=[],X,$=-1;function et(){$++;var Mt=document.createElementNS(L.svg,"tspan");b.select(Mt).attr({class:"line",dy:$*A+"em"}),F.appendChild(Mt),X=Mt;var Lt=G;if(G=[{node:Mt}],Lt.length>1)for(var zt=1;zt<Lt.length;zt++)ot(Lt[zt])}function ot(Mt){var Lt=Mt.type,zt={},xt;if(Lt==="a"){xt="a";var Ct=Mt.target,wt=Mt.href,Rt=Mt.popup;wt&&(zt={"xlink:xlink:show":Ct==="_blank"||Ct.charAt(0)!=="_"?"new":"replace",target:Ct,"xlink:xlink:href":wt},Rt&&(zt.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Rt+'");return false;'))}else xt="tspan";Mt.style&&(zt.style=Mt.style);var Tt=document.createElementNS(L.svg,xt);if(Lt==="sup"||Lt==="sub"){nt(X,g),X.appendChild(Tt);var Bt=document.createElementNS(L.svg,"tspan");nt(Bt,g),b.select(Bt).attr("dy",u[Lt]),zt.dy=f[Lt],X.appendChild(Tt),X.appendChild(Bt)}else X.appendChild(Tt);b.select(Tt).attr(zt),X=Mt.node=Tt,G.push(Mt)}function nt(Mt,Lt){Mt.appendChild(document.createTextNode(Lt))}function Z(Mt){if(G.length===1){P.log("Ignoring unexpected end tag </"+Mt+">.",_);return}var Lt=G.pop();Mt!==Lt.type&&P.log("Start tag <"+Lt.type+"> doesnt match end tag <"+Mt+">. Pretending it did match.",_),X=G[G.length-1].node}var Q=d.test(_);Q?et():(X=F,G=[{node:F}]);for(var W=_.split(c),J=0;J<W.length;J++){var it=W[J],K=it.match(i),H=K&&K[2].toLowerCase(),at=l[H];if(H==="br")et();else if(at===void 0)nt(X,m(it));else if(K[1])Z(H);else{var tt=K[4],lt={type:H},dt=S(tt,x);if(dt?(dt=dt.replace(M,"$1 fill:"),at&&(dt+=";"+at)):at&&(dt=at),dt&&(lt.style=dt),H==="a"){N=!0;var mt=S(tt,w);if(mt){var gt=O(mt);gt&&(lt.href=gt,lt.target=S(tt,C)||"_blank",lt.popup=S(tt,y))}}ot(lt)}}return N}function O(F){var _=encodeURI(decodeURI(F)),N=document.createElement("a"),G=document.createElement("a");N.href=F,G.href=_;var X=N.protocol,$=G.protocol;return h.indexOf(X)!==-1&&h.indexOf($)!==-1?_:""}V.sanitizeHTML=function(_){_=_.replace(T," ");for(var N=document.createElement("p"),G=N,X=[],$=_.split(c),et=0;et<$.length;et++){var ot=$[et],nt=ot.match(i),Z=nt&&nt[2].toLowerCase();if(Z in l)if(nt[1])X.length&&(G=X.pop());else{var Q=nt[4],W=S(Q,x),J=W?{style:W}:{};if(Z==="a"){var it=S(Q,w);if(it){var K=O(it);if(K){J.href=K;var H=S(Q,C);H&&(J.target=H)}}}var at=document.createElement(Z);G.appendChild(at),b.select(at).attr(J),G=at,X.push(at)}else G.appendChild(document.createTextNode(m(ot)))}var tt="innerHTML";return N[tt]},V.lineCount=function(_){return _.selectAll("tspan.line").size()||1},V.positionText=function(_,N,G){return _.each(function(){var X=b.select(this);function $(nt,Z){return Z===void 0?(Z=X.attr(nt),Z===null&&(X.attr(nt,0),Z=0)):X.attr(nt,Z),Z}var et=$("x",N),ot=$("y",G);this.nodeName==="text"&&X.selectAll("tspan.line").attr({x:et,y:ot})})};function z(F,_,N){var G=N.horizontalAlign,X=N.verticalAlign||"top",$=F.node().getBoundingClientRect(),et=_.node().getBoundingClientRect(),ot,nt,Z;return X==="bottom"?nt=function(){return $.bottom-ot.height}:X==="middle"?nt=function(){return $.top+($.height-ot.height)/2}:nt=function(){return $.top},G==="right"?Z=function(){return $.right-ot.width}:G==="center"?Z=function(){return $.left+($.width-ot.width)/2}:Z=function(){return $.left},function(){ot=this.node().getBoundingClientRect();var Q=Z()-et.left,W=nt()-et.top,J=N.gd||{};if(N.gd){J._fullLayout._calcInverseTransform(J);var it=P.apply3DTransform(J._fullLayout._invTransform)(Q,W);Q=it[0],W=it[1]}return this.style({top:W+"px",left:Q+"px","z-index":1e3}),this}}var B="1px ";V.makeTextShadow=function(F){var _=B,N=B,G=B;return _+N+G+F+", -"+_+"-"+N+G+F+", "+_+"-"+N+G+F+", -"+_+N+G+F},V.makeEditable=function(F,_){var N=_.gd,G=_.delegate,X=b.dispatch("edit","input","cancel"),$=G||F;if(F.style({"pointer-events":G?"none":"all"}),F.size()!==1)throw new Error("boo");function et(){nt(),F.style({opacity:0});var Z=$.attr("class"),Q;Z?Q="."+Z.split(" ")[0]+"-math-group":Q="[class*=-math-group]",Q&&b.select(F.node().parentNode).select(Q).style({opacity:0})}function ot(Z){var Q=Z.node(),W=document.createRange();W.selectNodeContents(Q);var J=window.getSelection();J.removeAllRanges(),J.addRange(W),Q.focus()}function nt(){var Z=b.select(N),Q=Z.select(".svg-container"),W=Q.append("div"),J=F.node().style,it=parseFloat(J.fontSize||12),K=_.text;K===void 0&&(K=F.attr("data-unformatted")),W.classed("plugin-editable editable",!0).style({position:"absolute","font-family":J.fontFamily||"Arial","font-size":it,color:_.fill||J.fill||"black",opacity:1,"background-color":_.background||"transparent",outline:"#ffffff33 1px solid",margin:[-it/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(K).call(z(F,Q,_)).on("blur",function(){N._editing=!1,F.text(this.textContent).style({opacity:1});var H=b.select(this).attr("class"),at;H?at="."+H.split(" ")[0]+"-math-group":at="[class*=-math-group]",at&&b.select(F.node().parentNode).select(at).style({opacity:0});var tt=this.textContent;b.select(this).transition().duration(0).remove(),b.select(document).on("mouseup",null),X.edit.call(F,tt)}).on("focus",function(){var H=this;N._editing=!0,b.select(document).on("mouseup",function(){if(b.event.target===H)return!1;document.activeElement===W.node()&&W.node().blur()})}).on("keyup",function(){b.event.which===27?(N._editing=!1,F.style({opacity:1}),b.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(F,this.textContent)):(X.input.call(F,this.textContent),b.select(this).call(z(F,Q,_)))}).on("keydown",function(){b.event.which===13&&this.blur()}).call(ot)}return _.immediate?et():$.on("click",et),b.rebind(F,X,"on")}},91200:function(j,V){var t={};V.throttle=function(o,L,A){var v=t[o],p=Date.now();if(!v){for(var r in t)t[r].ts<p-6e4&&delete t[r];v=t[o]={ts:0,timer:null}}b(v);function e(){A(),v.ts=Date.now(),v.onDone&&(v.onDone(),v.onDone=null)}if(p>v.ts+L){e();return}v.timer=setTimeout(function(){e(),v.timer=null},L)},V.done=function(P){var o=t[P];return!o||!o.timer?Promise.resolve():new Promise(function(L){var A=o.onDone;o.onDone=function(){A&&A(),L(),o.onDone=null}})},V.clear=function(P){if(P)b(t[P]),delete t[P];else for(var o in t)V.clear(o)};function b(P){P&&P.timer!==null&&(clearTimeout(P.timer),P.timer=null)}},36896:function(j,V,t){var b=t(38248);j.exports=function(o,L){if(o>0)return Math.log(o)/Math.LN10;var A=Math.log(Math.min(L[0],L[1]))/Math.LN10;return b(A)||(A=Math.log(Math.max(L[0],L[1]))/Math.LN10-6),A}},59972:function(j,V,t){var b=j.exports={},P=t(79552).locationmodeToLayer,o=t(55712).NO;b.getTopojsonName=function(L){return[L.scope.replace(/ /g,"-"),"_",L.resolution.toString(),"m"].join("")},b.getTopojsonPath=function(L,A){return L+A+".json"},b.getTopojsonFeatures=function(L,A){var v=P[L.locationmode],p=A.objects[v];return o(A,p).features}},11680:function(j){j.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},6580:function(j){j.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},69820:function(j,V,t){var b=t(24040);j.exports=function(o){for(var L=b.layoutArrayContainers,A=b.layoutArrayRegexes,v=o.split("[")[0],p,r,e=0;e<A.length;e++)if(r=o.match(A[e]),r&&r.index===0){p=r[0];break}if(p||(p=L[L.indexOf(v)]),!p)return!1;var s=o.substr(p.length);return s?(r=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:p,index:Number(r[1]),property:r[3]||""}:!1):{array:p,index:"",property:""}}},67824:function(j,V,t){var b=t(92880).extendFlat,P=t(63620),o={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},L={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},A=o.flags.slice().concat(["fullReplot"]),v=L.flags.slice().concat("layoutReplot");j.exports={traces:o,layout:L,traceFlags:function(){return p(A)},layoutFlags:function(){return p(v)},update:function(s,n){var l=n.editType;if(l&&l!=="none")for(var f=l.split("+"),u=0;u<f.length;u++)s[f[u]]=!0},overrideAll:r};function p(s){for(var n={},l=0;l<s.length;l++)n[s[l]]=!1;return n}function r(s,n,l){var f=b({},s);for(var u in f){var g=f[u];P(g)&&(f[u]=e(g,n,l,u))}return l==="from-root"&&(f.editType=n),f}function e(s,n,l,f){if(s.valType){var u=b({},s);if(u.editType=n,Array.isArray(s.items)){u.items=new Array(s.items.length);for(var g=0;g<s.items.length;g++)u.items[g]=e(s.items[g],n)}return u}else return r(s,n,f.charAt(0)==="_"?"nested":"from-root")}},93404:function(j,V,t){var b=t(38248),P=t(61784),o=t(24040),L=t(3400),A=t(7316),v=t(79811),p=t(76308),r=v.cleanId,e=v.getFromTrace,s=o.traceIs;V.clearPromiseQueue=function(d){Array.isArray(d._promises)&&d._promises.length>0&&L.log("Clearing previous rejected promises from queue."),d._promises=[]},V.cleanLayout=function(d){var x,w;d||(d={}),d.xaxis1&&(d.xaxis||(d.xaxis=d.xaxis1),delete d.xaxis1),d.yaxis1&&(d.yaxis||(d.yaxis=d.yaxis1),delete d.yaxis1),d.scene1&&(d.scene||(d.scene=d.scene1),delete d.scene1);var C=(A.subplotsRegistry.cartesian||{}).attrRegex,y=(A.subplotsRegistry.polar||{}).attrRegex,S=(A.subplotsRegistry.ternary||{}).attrRegex,M=(A.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(d);for(x=0;x<a.length;x++){var E=a[x];if(C&&C.test(E)){var m=d[E];m.anchor&&m.anchor!=="free"&&(m.anchor=r(m.anchor)),m.overlaying&&(m.overlaying=r(m.overlaying)),m.type||(m.isdate?m.type="date":m.islog?m.type="log":m.isdate===!1&&m.islog===!1&&(m.type="linear")),(m.autorange==="withzero"||m.autorange==="tozero")&&(m.autorange=!0,m.rangemode="tozero"),m.insiderange&&delete m.range,delete m.islog,delete m.isdate,delete m.categories,h(m,"domain")&&delete m.domain,m.autotick!==void 0&&(m.tickmode===void 0&&(m.tickmode=m.autotick?"auto":"linear"),delete m.autotick),l(m)}else if(y&&y.test(E)){var k=d[E];l(k.radialaxis)}else if(S&&S.test(E)){var I=d[E];l(I.aaxis),l(I.baxis),l(I.caxis)}else if(M&&M.test(E)){var O=d[E],z=O.cameraposition;if(Array.isArray(z)&&z[0].length===4){var B=z[0],F=z[1],_=z[2],N=P([],B),G=[];for(w=0;w<3;++w)G[w]=F[w]+_*N[2+4*w];O.camera={eye:{x:G[0],y:G[1],z:G[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete O.cameraposition}l(O.xaxis),l(O.yaxis),l(O.zaxis)}}var X=Array.isArray(d.annotations)?d.annotations.length:0;for(x=0;x<X;x++){var $=d.annotations[x];L.isPlainObject($)&&($.ref&&($.ref==="paper"?($.xref="paper",$.yref="paper"):$.ref==="data"&&($.xref="x",$.yref="y"),delete $.ref),n($,"xref"),n($,"yref"))}var et=Array.isArray(d.shapes)?d.shapes.length:0;for(x=0;x<et;x++){var ot=d.shapes[x];L.isPlainObject(ot)&&(n(ot,"xref"),n(ot,"yref"))}var nt=Array.isArray(d.images)?d.images.length:0;for(x=0;x<nt;x++){var Z=d.images[x];L.isPlainObject(Z)&&(n(Z,"xref"),n(Z,"yref"))}var Q=d.legend;return Q&&(Q.x>3?(Q.x=1.02,Q.xanchor="left"):Q.x<-2&&(Q.x=-.02,Q.xanchor="right"),Q.y>3?(Q.y=1.02,Q.yanchor="bottom"):Q.y<-2&&(Q.y=-.02,Q.yanchor="top")),l(d),d.dragmode==="rotate"&&(d.dragmode="orbit"),p.clean(d),d.template&&d.template.layout&&V.cleanLayout(d.template.layout),d};function n(d,x){var w=d[x],C=x.charAt(0);w&&w!=="paper"&&(d[x]=r(w,C,!0))}function l(d){d&&((typeof d.title=="string"||typeof d.title=="number")&&(d.title={text:d.title}),x("titlefont","font"),x("titleposition","position"),x("titleside","side"),x("titleoffset","offset"));function x(w,C){var y=d[w],S=d.title&&d.title[C];y&&!S&&(d.title||(d.title={}),d.title[C]=d[w],delete d[w])}}V.cleanData=function(d){for(var x=0;x<d.length;x++){var w=d[x],C;if(w.type==="histogramy"&&"xbins"in w&&!("ybins"in w)&&(w.ybins=w.xbins,delete w.xbins),w.error_y&&"opacity"in w.error_y){var y=p.defaults,S=w.error_y.color||(s(w,"bar")?p.defaultLine:y[x%y.length]);w.error_y.color=p.addOpacity(p.rgb(S),p.opacity(S)*w.error_y.opacity),delete w.error_y.opacity}if("bardir"in w&&(w.bardir==="h"&&(s(w,"bar")||w.type.substr(0,9)==="histogram")&&(w.orientation="h",V.swapXYData(w)),delete w.bardir),w.type==="histogramy"&&V.swapXYData(w),(w.type==="histogramx"||w.type==="histogramy")&&(w.type="histogram"),"scl"in w&&!("colorscale"in w)&&(w.colorscale=w.scl,delete w.scl),"reversescl"in w&&!("reversescale"in w)&&(w.reversescale=w.reversescl,delete w.reversescl),w.xaxis&&(w.xaxis=r(w.xaxis,"x")),w.yaxis&&(w.yaxis=r(w.yaxis,"y")),s(w,"gl3d")&&w.scene&&(w.scene=A.subplotsRegistry.gl3d.cleanId(w.scene)),!s(w,"pie-like")&&!s(w,"bar-like"))if(Array.isArray(w.textposition))for(C=0;C<w.textposition.length;C++)w.textposition[C]=g(w.textposition[C]);else w.textposition&&(w.textposition=g(w.textposition));var M=o.getModule(w);if(M&&M.colorbar){var a=M.colorbar.container,E=a?w[a]:w;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(w.type==="surface"&&L.isPlainObject(w.contours)){var m=["x","y","z"];for(C=0;C<m.length;C++){var k=w.contours[m[C]];L.isPlainObject(k)&&(k.highlightColor&&(k.highlightcolor=k.highlightColor,delete k.highlightColor),k.highlightWidth&&(k.highlightwidth=k.highlightWidth,delete k.highlightWidth))}}if(w.type==="candlestick"||w.type==="ohlc"){var I=(w.increasing||{}).showlegend!==!1,O=(w.decreasing||{}).showlegend!==!1,z=f(w.increasing),B=f(w.decreasing);if(z!==!1&&B!==!1){var F=u(z,B,I,O);F&&(w.name=F)}else(z||B)&&!w.name&&(w.name=z||B)}if(Array.isArray(w.transforms)){var _=w.transforms;for(C=0;C<_.length;C++){var N=_[C];if(L.isPlainObject(N))switch(N.type){case"filter":N.filtersrc&&(N.target=N.filtersrc,delete N.filtersrc),N.calendar&&(N.valuecalendar||(N.valuecalendar=N.calendar),delete N.calendar);break;case"groupby":if(N.styles=N.styles||N.style,N.styles&&!Array.isArray(N.styles)){var G=N.styles,X=Object.keys(G);N.styles=[];for(var $=0;$<X.length;$++)N.styles.push({target:X[$],value:G[X[$]]})}break}}}h(w,"line")&&delete w.line,"marker"in w&&(h(w.marker,"line")&&delete w.marker.line,h(w,"marker")&&delete w.marker),p.clean(w),w.autobinx&&(delete w.autobinx,delete w.xbins),w.autobiny&&(delete w.autobiny,delete w.ybins),l(w),w.colorbar&&l(w.colorbar),w.marker&&w.marker.colorbar&&l(w.marker.colorbar),w.line&&w.line.colorbar&&l(w.line.colorbar),w.aaxis&&l(w.aaxis),w.baxis&&l(w.baxis)}};function f(d){if(!L.isPlainObject(d))return!1;var x=d.name;return delete d.name,delete d.showlegend,(typeof x=="string"||typeof x=="number")&&String(x)}function u(d,x,w,C){if(w&&!C)return d;if(C&&!w||!d.trim())return x;if(!x.trim())return d;var y=Math.min(d.length,x.length),S;for(S=0;S<y&&d.charAt(S)===x.charAt(S);S++);var M=d.substr(0,S);return M.trim()}function g(d){var x="middle",w="center";return typeof d=="string"&&(d.indexOf("top")!==-1?x="top":d.indexOf("bottom")!==-1&&(x="bottom"),d.indexOf("left")!==-1?w="left":d.indexOf("right")!==-1&&(w="right")),x+" "+w}function h(d,x){return x in d&&typeof d[x]=="object"&&Object.keys(d[x]).length===0}V.swapXYData=function(d){var x;if(L.swapAttrs(d,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(d.z)&&Array.isArray(d.z[0])&&(d.transpose?delete d.transpose:d.transpose=!0),d.error_x&&d.error_y){var w=d.error_y,C="copy_ystyle"in w?w.copy_ystyle:!(w.color||w.thickness||w.width);L.swapAttrs(d,["error_?.copy_ystyle"]),C&&L.swapAttrs(d,["error_?.color","error_?.thickness","error_?.width"])}if(typeof d.hoverinfo=="string"){var y=d.hoverinfo.split("+");for(x=0;x<y.length;x++)y[x]==="x"?y[x]="y":y[x]==="y"&&(y[x]="x");d.hoverinfo=y.join("+")}},V.coerceTraceIndices=function(d,x){if(b(x))return[x];if(!Array.isArray(x)||!x.length)return d.data.map(function(y,S){return S});if(Array.isArray(x)){for(var w=[],C=0;C<x.length;C++)L.isIndex(x[C],d.data.length)?w.push(x[C]):L.warn("trace index (",x[C],") is not a number or is out of bounds");return w}return x},V.manageArrayContainers=function(d,x,w){var C=d.obj,y=d.parts,S=y.length,M=y[S-1],a=b(M);if(a&&x===null){var E=y.slice(0,S-1).join("."),m=L.nestedProperty(C,E).get();m.splice(M,1)}else a&&d.get()===void 0&&d.get()===void 0&&(w[d.astr]=null),d.set(x)};var T=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function c(d){var x=d.search(T);if(x>0)return d.substr(0,x)}V.hasParent=function(d,x){for(var w=c(x);w;){if(w in d)return!0;w=c(w)}return!1};var i=["x","y","z"];V.clearAxisTypes=function(d,x,w){for(var C=0;C<x.length;C++)for(var y=d._fullData[C],S=0;S<3;S++){var M=e(d,y,i[S]);if(M&&M.type!=="log"){var a=M._name,E=M._id.substr(1);if(E.substr(0,5)==="scene"){if(w[E]!==void 0)continue;a=E+"."+a}var m=a+".type";w[a]===void 0&&w[m]===void 0&&L.nestedProperty(d.layout,m).set(null)}}}},22448:function(j,V,t){var b=t(36424);V._doPlot=b._doPlot,V.newPlot=b.newPlot,V.restyle=b.restyle,V.relayout=b.relayout,V.redraw=b.redraw,V.update=b.update,V._guiRestyle=b._guiRestyle,V._guiRelayout=b._guiRelayout,V._guiUpdate=b._guiUpdate,V._storeDirectGUIEdit=b._storeDirectGUIEdit,V.react=b.react,V.extendTraces=b.extendTraces,V.prependTraces=b.prependTraces,V.addTraces=b.addTraces,V.deleteTraces=b.deleteTraces,V.moveTraces=b.moveTraces,V.purge=b.purge,V.addFrames=b.addFrames,V.deleteFrames=b.deleteFrames,V.animate=b.animate,V.setPlotConfig=b.setPlotConfig;var P=t(52200).getGraphDiv,o=t(4016).eraseActiveShape;V.deleteActiveShape=function(A){return o(P(A))},V.toImage=t(67024),V.validate=t(21480),V.downloadImage=t(39792);var L=t(94828);V.makeTemplate=L.makeTemplate,V.validateTemplate=L.validateTemplate},17680:function(j,V,t){var b=t(63620),P=t(16628),o=t(24248),L=t(14952).sorterAsc,A=t(24040);V.containerArrayMatch=t(69820);var v=V.isAddVal=function(e){return e==="add"||b(e)},p=V.isRemoveVal=function(e){return e===null||e==="remove"};V.applyContainerArrayChanges=function(e,s,n,l,f){var u=s.astr,g=A.getComponentMethod(u,"supplyLayoutDefaults"),h=A.getComponentMethod(u,"draw"),T=A.getComponentMethod(u,"drawOne"),c=l.replot||l.recalc||g===P||h===P,i=e.layout,d=e._fullLayout;if(n[""]){Object.keys(n).length>1&&o.warn("Full array edits are incompatible with other edits",u);var x=n[""][""];if(p(x))s.set(null);else if(Array.isArray(x))s.set(x);else return o.warn("Unrecognized full array edit value",u,x),!0;return c?!1:(g(i,d),h(e),!0)}var w=Object.keys(n).map(Number).sort(L),C=s.get(),y=C||[],S=f(d,u).get(),M=[],a=-1,E=y.length,m,k,I,O,z,B,F,_;for(m=0;m<w.length;m++){if(I=w[m],O=n[I],z=Object.keys(O),B=O[""],F=v(B),I<0||I>y.length-(F?0:1)){o.warn("index out of range",u,I);continue}if(B!==void 0)z.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",u,I),p(B)?M.push(I):F?(B==="add"&&(B={}),y.splice(I,0,B),S&&S.splice(I,0,{})):o.warn("Unrecognized full object edit value",u,I,B),a===-1&&(a=I);else for(k=0;k<z.length;k++)_=u+"["+I+"].",f(y[I],z[k],_).set(O[z[k]])}for(m=M.length-1;m>=0;m--)y.splice(M[m],1),S&&S.splice(M[m],1);if(y.length?C||s.set(y):s.set(null),c)return!1;if(g(i,d),T!==P){var N;if(a===-1)N=w;else{for(E=Math.max(y.length,E),N=[],m=0;m<w.length&&(I=w[m],!(I>=a));m++)N.push(I);for(m=a;m<E;m++)N.push(m)}for(m=0;m<N.length;m++)T(e,N[m])}else h(e);return!0}},36424:function(j,V,t){var b=t(33428),P=t(38248),o=t(52264),L=t(3400),A=L.nestedProperty,v=t(95924),p=t(94552),r=t(24040),e=t(73060),s=t(7316),n=t(54460),l=t(96312),f=t(94724),u=t(43616),g=t(76308),h=t(42464).initInteractions,T=t(9616),c=t(22676).clearOutline,i=t(20556).dfltConfig,d=t(17680),x=t(93404),w=t(39172),C=t(67824),y=t(33816).AX_NAME_PATTERN,S=0,M=5;function a(ft,pt,Dt,Ut){var $t;if(ft=L.getGraphDiv(ft),v.init(ft),L.isPlainObject(pt)){var re=pt;pt=re.data,Dt=re.layout,Ut=re.config,$t=re.frames}var Be=v.triggerHandler(ft,"plotly_beforeplot",[pt,Dt,Ut]);if(Be===!1)return Promise.reject();!pt&&!Dt&&!L.isPlotDiv(ft)&&L.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ft);function We(){if($t)return V.addFrames(ft,$t)}O(ft,Ut),Dt||(Dt={}),b.select(ft).classed("js-plotly-plot",!0),u.makeTester(),Array.isArray(ft._promises)||(ft._promises=[]);var me=(ft.data||[]).length===0&&Array.isArray(pt);Array.isArray(pt)&&(x.cleanData(pt),me?ft.data=pt:ft.data.push.apply(ft.data,pt),ft.empty=!1),(!ft.layout||me)&&(ft.layout=x.cleanLayout(Dt)),s.supplyDefaults(ft);var Se=ft._fullLayout,je=Se._has("cartesian");Se._replotting=!0,(me||Se._shouldCreateBgLayer)&&(At(ft),Se._shouldCreateBgLayer&&delete Se._shouldCreateBgLayer),u.initGradients(ft),u.initPatterns(ft),me&&n.saveShowSpikeInitial(ft);var vr=!ft.calcdata||ft.calcdata.length!==(ft._fullData||[]).length;vr&&s.doCalcdata(ft);for(var he=0;he<ft.calcdata.length;he++)ft.calcdata[he][0].trace=ft._fullData[he];ft._context.responsive?ft._responsiveChartHandler||(ft._responsiveChartHandler=function(){L.isHidden(ft)||s.resize(ft)},window.addEventListener("resize",ft._responsiveChartHandler)):L.clearResponsive(ft);var Ye=L.extendFlat({},Se._size),Qe=0;function mr(){for(var ke=Se._basePlotModules,_e=0;_e<ke.length;_e++)ke[_e].drawFramework&&ke[_e].drawFramework(ft);!Se._glcanvas&&Se._has("gl")&&(Se._glcanvas=Se._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(dr){return dr.key}),Se._glcanvas.enter().append("canvas").attr("class",function(dr){return"gl-canvas gl-canvas-"+dr.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ke=ft._context.plotGlPixelRatio;if(Se._glcanvas){Se._glcanvas.attr("width",Se.width*Ke).attr("height",Se.height*Ke).style("width",Se.width+"px").style("height",Se.height+"px");var hr=Se._glcanvas.data()[0].regl;if(hr&&(Math.floor(Se.width*Ke)!==hr._gl.drawingBufferWidth||Math.floor(Se.height*Ke)!==hr._gl.drawingBufferHeight)){var cr="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(Qe)L.error(cr);else return L.log(cr+" Clearing graph and plotting again."),s.cleanPlot([],{},ft._fullData,Se),s.supplyDefaults(ft),Se=ft._fullLayout,s.doCalcdata(ft),Qe++,mr()}}return Se.modebar.orientation==="h"?Se._modebardiv.style("height",null).style("width","100%"):Se._modebardiv.style("width",null).style("height",Se.height+"px"),s.previousPromises(ft)}function ir(){if(s.clearAutoMarginIds(ft),w.drawMarginPushers(ft),n.allowAutoMargin(ft),ft._fullLayout.title.text&&ft._fullLayout.title.automargin&&s.allowAutoMargin(ft,"title.automargin"),Se._has("pie"))for(var ke=ft._fullData,_e=0;_e<ke.length;_e++){var Ke=ke[_e];Ke.type==="pie"&&Ke.automargin&&s.allowAutoMargin(ft,"pie."+Ke.uid+".automargin")}return s.doAutoMargin(ft),s.previousPromises(ft)}function ve(){if(s.didMarginChange(Ye,Se._size))return L.syncOrAsync([ir,w.layoutStyles],ft)}function ne(){if(!vr){ge();return}return L.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),ge],ft)}function ge(){ft._transitioning||(w.doAutoRangeAndConstraints(ft),me&&n.saveRangeInitial(ft),r.getComponentMethod("rangeslider","calcAutorange")(ft))}function Ae(){return n.draw(ft,me?"":"redraw")}var Re=[s.previousPromises,We,mr,ir,ve];je&&Re.push(ne),Re.push(w.layoutStyles),je&&Re.push(Ae,function(_e){var Ke=_e._fullLayout._insideTickLabelsUpdaterange;if(Ke)return _e._fullLayout._insideTickLabelsUpdaterange=void 0,mt(_e,Ke).then(function(){n.saveRangeInitial(_e,!0)})}),Re.push(w.drawData,w.finalDraw,h,s.addLinks,s.rehover,s.redrag,s.reselect,s.doAutoMargin,s.previousPromises);var ze=L.syncOrAsync(Re,ft);return(!ze||!ze.then)&&(ze=Promise.resolve()),ze.then(function(){return E(ft),ft})}function E(ft){var pt=ft._fullLayout;pt._redrawFromAutoMarginCount?pt._redrawFromAutoMarginCount--:ft.emit("plotly_afterplot")}function m(ft){return L.extendFlat(i,ft)}function k(ft,pt){try{ft._fullLayout._paper.style("background",pt)}catch(Dt){L.error(Dt)}}function I(ft,pt){var Dt=g.combine(pt,"white");k(ft,Dt)}function O(ft,pt){if(!ft._context){ft._context=L.extendDeep({},i);var Dt=b.select("base");ft._context._baseUrl=Dt.size()&&Dt.attr("href")?window.location.href.split("#")[0]:""}var Ut=ft._context,$t,re,Be;if(pt){for(re=Object.keys(pt),$t=0;$t<re.length;$t++)Be=re[$t],!(Be==="editable"||Be==="edits")&&Be in Ut&&(Be==="setBackground"&&pt[Be]==="opaque"?Ut[Be]=I:Ut[Be]=pt[Be]);pt.plot3dPixelRatio&&!Ut.plotGlPixelRatio&&(Ut.plotGlPixelRatio=Ut.plot3dPixelRatio);var We=pt.editable;if(We!==void 0)for(Ut.editable=We,re=Object.keys(Ut.edits),$t=0;$t<re.length;$t++)Ut.edits[re[$t]]=We;if(pt.edits)for(re=Object.keys(pt.edits),$t=0;$t<re.length;$t++)Be=re[$t],Be in Ut.edits&&(Ut.edits[Be]=pt.edits[Be]);Ut._exportedPlot=pt._exportedPlot}Ut.staticPlot&&(Ut.editable=!1,Ut.edits={},Ut.autosizable=!1,Ut.scrollZoom=!1,Ut.doubleClick=!1,Ut.showTips=!1,Ut.showLink=!1,Ut.displayModeBar=!1),Ut.displayModeBar==="hover"&&!o&&(Ut.displayModeBar=!0),(Ut.setBackground==="transparent"||typeof Ut.setBackground!="function")&&(Ut.setBackground=k),Ut._hasZeroHeight=Ut._hasZeroHeight||ft.clientHeight===0,Ut._hasZeroWidth=Ut._hasZeroWidth||ft.clientWidth===0;var me=Ut.scrollZoom,Se=Ut._scrollZoom={};if(me===!0)Se.cartesian=1,Se.gl3d=1,Se.geo=1,Se.mapbox=1;else if(typeof me=="string"){var je=me.split("+");for($t=0;$t<je.length;$t++)Se[je[$t]]=1}else me!==!1&&(Se.gl3d=1,Se.geo=1,Se.mapbox=1)}function z(ft){if(ft=L.getGraphDiv(ft),!L.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft);return x.cleanData(ft.data),x.cleanLayout(ft.layout),ft.calcdata=void 0,V._doPlot(ft).then(function(){return ft.emit("plotly_redraw"),ft})}function B(ft,pt,Dt,Ut){return ft=L.getGraphDiv(ft),s.cleanPlot([],{},ft._fullData||[],ft._fullLayout||{}),s.purge(ft),V._doPlot(ft,pt,Dt,Ut)}function F(ft,pt){var Dt=pt+1,Ut=[],$t,re;for($t=0;$t<ft.length;$t++)re=ft[$t],re<0?Ut.push(Dt+re):Ut.push(re);return Ut}function _(ft,pt,Dt){var Ut,$t;for(Ut=0;Ut<pt.length;Ut++){if($t=pt[Ut],$t!==parseInt($t,10))throw new Error("all values in "+Dt+" must be integers");if($t>=ft.data.length||$t<-ft.data.length)throw new Error(Dt+" must be valid indices for gd.data.");if(pt.indexOf($t,Ut+1)>-1||$t>=0&&pt.indexOf(-ft.data.length+$t)>-1||$t<0&&pt.indexOf(ft.data.length+$t)>-1)throw new Error("each index in "+Dt+" must be unique.")}}function N(ft,pt,Dt){if(!Array.isArray(ft.data))throw new Error("gd.data must be an array.");if(typeof pt>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(pt)||(pt=[pt]),_(ft,pt,"currentIndices"),typeof Dt<"u"&&!Array.isArray(Dt)&&(Dt=[Dt]),typeof Dt<"u"&&_(ft,Dt,"newIndices"),typeof Dt<"u"&&pt.length!==Dt.length)throw new Error("current and new indices must be of equal length.")}function G(ft,pt,Dt){var Ut,$t;if(!Array.isArray(ft.data))throw new Error("gd.data must be an array.");if(typeof pt>"u")throw new Error("traces must be defined.");for(Array.isArray(pt)||(pt=[pt]),Ut=0;Ut<pt.length;Ut++)if($t=pt[Ut],typeof $t!="object"||Array.isArray($t)||$t===null)throw new Error("all values in traces array must be non-array objects");if(typeof Dt<"u"&&!Array.isArray(Dt)&&(Dt=[Dt]),typeof Dt<"u"&&Dt.length!==pt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function X(ft,pt,Dt,Ut){var $t=L.isPlainObject(Ut);if(!Array.isArray(ft.data))throw new Error("gd.data must be an array");if(!L.isPlainObject(pt))throw new Error("update must be a key:value object");if(typeof Dt>"u")throw new Error("indices must be an integer or array of integers");_(ft,Dt,"indices");for(var re in pt){if(!Array.isArray(pt[re])||pt[re].length!==Dt.length)throw new Error("attribute "+re+" must be an array of length equal to indices array length");if($t&&(!(re in Ut)||!Array.isArray(Ut[re])||Ut[re].length!==pt[re].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function $(ft,pt,Dt,Ut){var $t=L.isPlainObject(Ut),re=[],Be,We,me,Se,je;Array.isArray(Dt)||(Dt=[Dt]),Dt=F(Dt,ft.data.length-1);for(var vr in pt)for(var he=0;he<Dt.length;he++){if(Be=ft.data[Dt[he]],me=A(Be,vr),We=me.get(),Se=pt[vr][he],!L.isArrayOrTypedArray(Se))throw new Error("attribute: "+vr+" index: "+he+" must be an array");if(!L.isArrayOrTypedArray(We))throw new Error("cannot extend missing or non-array attribute: "+vr);if(We.constructor!==Se.constructor)throw new Error("cannot extend array with an array of a different type: "+vr);je=$t?Ut[vr][he]:Ut,P(je)||(je=-1),re.push({prop:me,target:We,insert:Se,maxp:Math.floor(je)})}return re}function et(ft,pt,Dt,Ut,$t){X(ft,pt,Dt,Ut);for(var re=$(ft,pt,Dt,Ut),Be={},We={},me=0;me<re.length;me++){var Se=re[me].prop,je=re[me].maxp,vr=$t(re[me].target,re[me].insert,je);Se.set(vr[0]),Array.isArray(Be[Se.astr])||(Be[Se.astr]=[]),Be[Se.astr].push(vr[1]),Array.isArray(We[Se.astr])||(We[Se.astr]=[]),We[Se.astr].push(re[me].target.length)}return{update:Be,maxPoints:We}}function ot(ft,pt){var Dt=new ft.constructor(ft.length+pt.length);return Dt.set(ft),Dt.set(pt,ft.length),Dt}function nt(ft,pt,Dt,Ut){ft=L.getGraphDiv(ft);function $t(me,Se,je){var vr,he;if(L.isTypedArray(me))if(je<0){var Ye=new me.constructor(0),Qe=ot(me,Se);je<0?(vr=Qe,he=Ye):(vr=Ye,he=Qe)}else if(vr=new me.constructor(je),he=new me.constructor(me.length+Se.length-je),je===Se.length)vr.set(Se),he.set(me);else if(je<Se.length){var mr=Se.length-je;vr.set(Se.subarray(mr)),he.set(me),he.set(Se.subarray(0,mr),me.length)}else{var ir=je-Se.length,ve=me.length-ir;vr.set(me.subarray(ve)),vr.set(Se,ir),he.set(me.subarray(0,ve))}else vr=me.concat(Se),he=je>=0&&je<vr.length?vr.splice(0,vr.length-je):[];return[vr,he]}var re=et(ft,pt,Dt,Ut,$t),Be=V.redraw(ft),We=[ft,re.update,Dt,re.maxPoints];return p.add(ft,V.prependTraces,We,nt,arguments),Be}function Z(ft,pt,Dt,Ut){ft=L.getGraphDiv(ft);function $t(me,Se,je){var vr,he;if(L.isTypedArray(me))if(je<=0){var Ye=new me.constructor(0),Qe=ot(Se,me);je<0?(vr=Qe,he=Ye):(vr=Ye,he=Qe)}else if(vr=new me.constructor(je),he=new me.constructor(me.length+Se.length-je),je===Se.length)vr.set(Se),he.set(me);else if(je<Se.length){var mr=Se.length-je;vr.set(Se.subarray(0,mr)),he.set(Se.subarray(mr)),he.set(me,mr)}else{var ir=je-Se.length;vr.set(Se),vr.set(me.subarray(0,ir),Se.length),he.set(me.subarray(ir))}else vr=Se.concat(me),he=je>=0&&je<vr.length?vr.splice(je,vr.length):[];return[vr,he]}var re=et(ft,pt,Dt,Ut,$t),Be=V.redraw(ft),We=[ft,re.update,Dt,re.maxPoints];return p.add(ft,V.extendTraces,We,Z,arguments),Be}function Q(ft,pt,Dt){ft=L.getGraphDiv(ft);var Ut=[],$t=V.deleteTraces,re=Q,Be=[ft,Ut],We=[ft,pt],me,Se;for(G(ft,pt,Dt),Array.isArray(pt)||(pt=[pt]),pt=pt.map(function(je){return L.extendFlat({},je)}),x.cleanData(pt),me=0;me<pt.length;me++)ft.data.push(pt[me]);for(me=0;me<pt.length;me++)Ut.push(-pt.length+me);if(typeof Dt>"u")return Se=V.redraw(ft),p.add(ft,$t,Be,re,We),Se;Array.isArray(Dt)||(Dt=[Dt]);try{N(ft,Ut,Dt)}catch(je){throw ft.data.splice(ft.data.length-pt.length,pt.length),je}return p.startSequence(ft),p.add(ft,$t,Be,re,We),Se=V.moveTraces(ft,Ut,Dt),p.stopSequence(ft),Se}function W(ft,pt){ft=L.getGraphDiv(ft);var Dt=[],Ut=V.addTraces,$t=W,re=[ft,Dt,pt],Be=[ft,pt],We,me;if(typeof pt>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(pt)||(pt=[pt]),_(ft,pt,"indices"),pt=F(pt,ft.data.length-1),pt.sort(L.sorterDes),We=0;We<pt.length;We+=1)me=ft.data.splice(pt[We],1)[0],Dt.push(me);var Se=V.redraw(ft);return p.add(ft,Ut,re,$t,Be),Se}function J(ft,pt,Dt){ft=L.getGraphDiv(ft);var Ut=[],$t=[],re=J,Be=J,We=[ft,Dt,pt],me=[ft,pt,Dt],Se;if(N(ft,pt,Dt),pt=Array.isArray(pt)?pt:[pt],typeof Dt>"u")for(Dt=[],Se=0;Se<pt.length;Se++)Dt.push(-pt.length+Se);for(Dt=Array.isArray(Dt)?Dt:[Dt],pt=F(pt,ft.data.length-1),Dt=F(Dt,ft.data.length-1),Se=0;Se<ft.data.length;Se++)pt.indexOf(Se)===-1&&Ut.push(ft.data[Se]);for(Se=0;Se<pt.length;Se++)$t.push({newIndex:Dt[Se],trace:ft.data[pt[Se]]});for($t.sort(function(vr,he){return vr.newIndex-he.newIndex}),Se=0;Se<$t.length;Se+=1)Ut.splice($t[Se].newIndex,0,$t[Se].trace);ft.data=Ut;var je=V.redraw(ft);return p.add(ft,re,We,Be,me),je}function it(ft,pt,Dt,Ut){ft=L.getGraphDiv(ft),x.clearPromiseQueue(ft);var $t={};if(typeof pt=="string")$t[pt]=Dt;else if(L.isPlainObject(pt))$t=L.extendFlat({},pt),Ut===void 0&&(Ut=Dt);else return L.warn("Restyle fail.",pt,Dt,Ut),Promise.reject();Object.keys($t).length&&(ft.changed=!0);var re=x.coerceTraceIndices(ft,Ut),Be=lt(ft,$t,re),We=Be.flags;We.calc&&(ft.calcdata=void 0),We.clearAxisTypes&&x.clearAxisTypes(ft,re,{});var me=[];We.fullReplot?me.push(V._doPlot):(me.push(s.previousPromises),s.supplyDefaults(ft),We.markerSize&&(s.doCalcdata(ft),Mt(me)),We.style&&me.push(w.doTraceStyle),We.colorbars&&me.push(w.doColorBars),me.push(E)),me.push(s.rehover,s.redrag,s.reselect),p.add(ft,it,[ft,Be.undoit,Be.traces],it,[ft,Be.redoit,Be.traces]);var Se=L.syncOrAsync(me,ft);return(!Se||!Se.then)&&(Se=Promise.resolve()),Se.then(function(){return ft.emit("plotly_restyle",Be.eventData),ft})}function K(ft){return ft===void 0?null:ft}function H(ft,pt){return pt?function(Dt,Ut,$t){var re=A(Dt,Ut),Be=re.set;return re.set=function(We){var me=($t||"")+Ut;at(me,re.get(),We,ft),Be(We)},re}:A}function at(ft,pt,Dt,Ut){if(Array.isArray(pt)||Array.isArray(Dt))for(var $t=Array.isArray(pt)?pt:[],re=Array.isArray(Dt)?Dt:[],Be=Math.max($t.length,re.length),We=0;We<Be;We++)at(ft+"["+We+"]",$t[We],re[We],Ut);else if(L.isPlainObject(pt)||L.isPlainObject(Dt)){var me=L.isPlainObject(pt)?pt:{},Se=L.isPlainObject(Dt)?Dt:{},je=L.extendFlat({},me,Se);for(var vr in je)at(ft+"."+vr,me[vr],Se[vr],Ut)}else Ut[ft]===void 0&&(Ut[ft]=K(pt))}function tt(ft,pt,Dt){for(var Ut in Dt){var $t=A(ft,Ut);at(Ut,$t.get(),Dt[Ut],pt)}}function lt(ft,pt,Dt){var Ut=ft._fullLayout,$t=ft._fullData,re=ft.data,Be=Ut._guiEditing,We=H(Ut._preGUI,Be),me=L.extendDeepAll({},pt),Se;dt(pt);var je=C.traceFlags(),vr={},he={},Ye;function Qe(){return Dt.map(function(){})}function mr(nn){var gr=n.id2name(nn);Ye.indexOf(gr)===-1&&Ye.push(gr)}function ir(nn){return"LAYOUT"+nn+".autorange"}function ve(nn){return"LAYOUT"+nn+".range"}function ne(nn){for(var gr=nn;gr<$t.length;gr++)if($t[gr]._input===re[nn])return $t[gr]}function ge(nn,gr,Pr){if(Array.isArray(nn)){nn.forEach(function(en){ge(en,gr,Pr)});return}if(!(nn in pt||x.hasParent(pt,nn))){var Xr;if(nn.substr(0,6)==="LAYOUT")Xr=We(ft.layout,nn.replace("LAYOUT",""));else{var kr=Dt[Pr],pn=Ut._tracePreGUI[ne(kr)._fullInput.uid];Xr=H(pn,Be)(re[kr],nn)}nn in he||(he[nn]=Qe()),he[nn][Pr]===void 0&&(he[nn][Pr]=K(Xr.get())),gr!==void 0&&Xr.set(gr)}}function Ae(nn){return function(gr){return $t[gr][nn]}}function Re(nn){return function(gr,Pr){return gr===!1?$t[Dt[Pr]][nn]:null}}for(var ze in pt){if(x.hasParent(pt,ze))throw new Error("cannot set "+ze+" and a parent attribute simultaneously");var ke=pt[ze],_e,Ke,hr,cr,dr,fr;if((ze==="autobinx"||ze==="autobiny")&&(ze=ze.charAt(ze.length-1)+"bins",Array.isArray(ke)?ke=ke.map(Re(ze)):ke===!1?ke=Dt.map(Ae(ze)):ke=null),vr[ze]=ke,ze.substr(0,6)==="LAYOUT"){hr=We(ft.layout,ze.replace("LAYOUT","")),he[ze]=[K(hr.get())],hr.set(Array.isArray(ke)?ke[0]:ke),je.calc=!0;continue}for(he[ze]=Qe(),Se=0;Se<Dt.length;Se++){_e=re[Dt[Se]],Ke=ne(Dt[Se]);var Lr=Ut._tracePreGUI[Ke._fullInput.uid];if(hr=H(Lr,Be)(_e,ze),cr=hr.get(),dr=Array.isArray(ke)?ke[Se%ke.length]:ke,dr!==void 0){var xr=hr.parts[hr.parts.length-1],Yt=ze.substr(0,ze.length-xr.length-1),Jt=Yt?Yt+".":"",qe=Yt?A(Ke,Yt).get():Ke;if(fr=e.getTraceValObject(Ke,hr.parts),fr&&fr.impliedEdits&&dr!==null)for(var tr in fr.impliedEdits)ge(L.relativeAttr(ze,tr),fr.impliedEdits[tr],Se);else if((xr==="thicknessmode"||xr==="lenmode")&&cr!==dr&&(dr==="fraction"||dr==="pixels")&&qe){var Ge=Ut._size,Ee=qe.orient,Xe=Ee==="top"||Ee==="bottom";if(xr==="thicknessmode"){var rr=Xe?Ge.h:Ge.w;ge(Jt+"thickness",qe.thickness*(dr==="fraction"?1/rr:rr),Se)}else{var Je=Xe?Ge.w:Ge.h;ge(Jt+"len",qe.len*(dr==="fraction"?1/Je:Je),Se)}}else if(ze==="type"&&(dr==="pie"!=(cr==="pie")||dr==="funnelarea"!=(cr==="funnelarea"))){var He="x",yr="y";(dr==="bar"||cr==="bar")&&_e.orientation==="h"&&(He="y",yr="x"),L.swapAttrs(_e,["?","?src"],"labels",He),L.swapAttrs(_e,["d?","?0"],"label",He),L.swapAttrs(_e,["?","?src"],"values",yr),cr==="pie"||cr==="funnelarea"?(A(_e,"marker.color").set(A(_e,"marker.colors").get()),Ut._pielayer.selectAll("g.trace").remove()):r.traceIs(_e,"cartesian")&&A(_e,"marker.colors").set(A(_e,"marker.color").get())}he[ze][Se]=K(cr);var Ir=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ir.indexOf(ze)!==-1){if(ze==="orientation"){hr.set(dr);var Tr=_e.x&&!_e.y?"h":"v";if((hr.get()||Tr)===Ke.orientation)continue}else ze==="orientationaxes"&&(_e.orientation={v:"h",h:"v"}[Ke.orientation]);x.swapXYData(_e),je.calc=je.clearAxisTypes=!0}else s.dataArrayContainers.indexOf(hr.parts[0])!==-1?(x.manageArrayContainers(hr,dr,he),je.calc=!0):(fr?fr.arrayOk&&!r.traceIs(Ke,"regl")&&(L.isArrayOrTypedArray(dr)||L.isArrayOrTypedArray(cr))?je.calc=!0:C.update(je,fr):je.calc=!0,hr.set(dr))}}if(["swapxyaxes","orientationaxes"].indexOf(ze)!==-1&&n.swap(ft,Dt),ze==="orientationaxes"){var vn=A(ft.layout,"hovermode"),Or=vn.get();Or==="x"?vn.set("y"):Or==="y"?vn.set("x"):Or==="x unified"?vn.set("y unified"):Or==="y unified"&&vn.set("x unified")}if(["orientation","type"].indexOf(ze)!==-1){for(Ye=[],Se=0;Se<Dt.length;Se++){var En=re[Dt[Se]];r.traceIs(En,"cartesian")&&(mr(En.xaxis||"x"),mr(En.yaxis||"y"))}ge(Ye.map(ir),!0,0),ge(Ye.map(ve),[0,1],0)}}return(je.calc||je.plot)&&(je.fullReplot=!0),{flags:je,undoit:he,redoit:vr,traces:Dt,eventData:L.extendDeepNoArrays([],[me,Dt])}}function dt(ft){var pt=L.counterRegex("axis",".title",!1,!1),Dt=/colorbar\.title$/,Ut=Object.keys(ft),$t,re,Be;for($t=0;$t<Ut.length;$t++)re=Ut[$t],Be=ft[re],(re==="title"||pt.test(re)||Dt.test(re))&&(typeof Be=="string"||typeof Be=="number")?We(re,re.replace("title","title.text")):re.indexOf("titlefont")>-1&&re.indexOf("grouptitlefont")===-1?We(re,re.replace("titlefont","title.font")):re.indexOf("titleposition")>-1?We(re,re.replace("titleposition","title.position")):re.indexOf("titleside")>-1?We(re,re.replace("titleside","title.side")):re.indexOf("titleoffset")>-1&&We(re,re.replace("titleoffset","title.offset"));function We(me,Se){ft[Se]=ft[me],delete ft[me]}}function mt(ft,pt,Dt){ft=L.getGraphDiv(ft),x.clearPromiseQueue(ft);var Ut={};if(typeof pt=="string")Ut[pt]=Dt;else if(L.isPlainObject(pt))Ut=L.extendFlat({},pt);else return L.warn("Relayout fail.",pt,Dt),Promise.reject();Object.keys(Ut).length&&(ft.changed=!0);var $t=Ct(ft,Ut),re=$t.flags;re.calc&&(ft.calcdata=void 0);var Be=[s.previousPromises];re.layoutReplot?Be.push(w.layoutReplot):Object.keys(Ut).length&&(gt(ft,re,$t)||s.supplyDefaults(ft),re.legend&&Be.push(w.doLegend),re.layoutstyle&&Be.push(w.layoutStyles),re.axrange&&Mt(Be,$t.rangesAltered),re.ticks&&Be.push(w.doTicksRelayout),re.modebar&&Be.push(w.doModeBar),re.camera&&Be.push(w.doCamera),re.colorbars&&Be.push(w.doColorBars),Be.push(E)),Be.push(s.rehover,s.redrag,s.reselect),p.add(ft,mt,[ft,$t.undoit],mt,[ft,$t.redoit]);var We=L.syncOrAsync(Be,ft);return(!We||!We.then)&&(We=Promise.resolve(ft)),We.then(function(){return ft.emit("plotly_relayout",$t.eventData),ft})}function gt(ft,pt,Dt){var Ut=ft._fullLayout;if(!pt.axrange)return!1;for(var $t in pt)if($t!=="axrange"&&pt[$t])return!1;var re,Be,We=function(Ye,Qe){return L.coerce(re,Be,f,Ye,Qe)},me={};for(var Se in Dt.rangesAltered){var je=n.id2name(Se);if(re=ft.layout[je],Be=Ut[je],l(re,Be,We,me),Be._matchGroup){for(var vr in Be._matchGroup)if(vr!==Se){var he=Ut[n.id2name(vr)];he.autorange=Be.autorange,he.range=Be.range.slice(),he._input.range=Be.range.slice()}}}return!0}function Mt(ft,pt){var Dt=pt?function(Ut){var $t=[],re=!0;for(var Be in pt){var We=n.getFromId(Ut,Be);if($t.push(Be),(We.ticklabelposition||"").indexOf("inside")!==-1&&We._anchorAxis&&$t.push(We._anchorAxis._id),We._matchGroup)for(var me in We._matchGroup)pt[me]||$t.push(me)}return n.draw(Ut,$t,{skipTitle:re})}:function(Ut){return n.draw(Ut,"redraw")};ft.push(c,w.doAutoRangeAndConstraints,Dt,w.drawData,w.finalDraw)}var Lt=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,zt=/^[xyz]axis[0-9]*\.autorange$/,xt=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Ct(ft,pt){var Dt=ft.layout,Ut=ft._fullLayout,$t=Ut._guiEditing,re=H(Ut._preGUI,$t),Be=Object.keys(pt),We=n.list(ft),me=L.extendDeepAll({},pt),Se={},je,vr,he;for(dt(pt),Be=Object.keys(pt),vr=0;vr<Be.length;vr++)if(Be[vr].indexOf("allaxes")===0){for(he=0;he<We.length;he++){var Ye=We[he]._id.substr(1),Qe=Ye.indexOf("scene")!==-1?Ye+".":"",mr=Be[vr].replace("allaxes",Qe+We[he]._name);pt[mr]||(pt[mr]=pt[Be[vr]])}delete pt[Be[vr]]}var ir=C.layoutFlags(),ve={},ne={};function ge(pn,en){if(Array.isArray(pn)){pn.forEach(function(Ln){ge(Ln,en)});return}if(!(pn in pt||x.hasParent(pt,pn))){var Tn=re(Dt,pn);pn in ne||(ne[pn]=K(Tn.get())),en!==void 0&&Tn.set(en)}}var Ae={},Re;function ze(pn){var en=n.name2id(pn.split(".")[0]);return Ae[en]=1,en}for(var ke in pt){if(x.hasParent(pt,ke))throw new Error("cannot set "+ke+" and a parent attribute simultaneously");for(var _e=re(Dt,ke),Ke=pt[ke],hr=_e.parts.length,cr=hr-1;cr>0&&typeof _e.parts[cr]!="string";)cr--;var dr=_e.parts[cr],fr=_e.parts[cr-1]+"."+dr,Lr=_e.parts.slice(0,cr).join("."),xr=A(ft.layout,Lr).get(),Yt=A(Ut,Lr).get(),Jt=_e.get();if(Ke!==void 0){ve[ke]=Ke,ne[ke]=dr==="reverse"?Ke:K(Jt);var qe=e.getLayoutValObject(Ut,_e.parts);if(qe&&qe.impliedEdits&&Ke!==null)for(var tr in qe.impliedEdits)ge(L.relativeAttr(ke,tr),qe.impliedEdits[tr]);if(["width","height"].indexOf(ke)!==-1)if(Ke){ge("autosize",null);var Ge=ke==="height"?"width":"height";ge(Ge,Ut[Ge])}else Ut[ke]=ft._initialAutoSize[ke];else if(ke==="autosize")ge("width",Ke?null:Ut.width),ge("height",Ke?null:Ut.height);else if(fr.match(Lt))ze(fr),A(Ut,Lr+"._inputRange").set(null);else if(fr.match(zt)){ze(fr),A(Ut,Lr+"._inputRange").set(null);var Ee=A(Ut,Lr).get();Ee._inputDomain&&(Ee._input.domain=Ee._inputDomain.slice())}else fr.match(xt)&&A(Ut,Lr+"._inputDomain").set(null);if(dr==="type"){Re=xr;var Xe=Yt.type==="linear"&&Ke==="log",rr=Yt.type==="log"&&Ke==="linear";if(Xe||rr){if(!Re||!Re.range)ge(Lr+".autorange",!0);else if(Yt.autorange)Xe&&(Re.range=Re.range[1]>Re.range[0]?[1,2]:[2,1]);else{var Je=Re.range[0],He=Re.range[1];Xe?(Je<=0&&He<=0&&ge(Lr+".autorange",!0),Je<=0?Je=He/1e6:He<=0&&(He=Je/1e6),ge(Lr+".range[0]",Math.log(Je)/Math.LN10),ge(Lr+".range[1]",Math.log(He)/Math.LN10)):(ge(Lr+".range[0]",Math.pow(10,Je)),ge(Lr+".range[1]",Math.pow(10,He)))}Array.isArray(Ut._subplots.polar)&&Ut._subplots.polar.length&&Ut[_e.parts[0]]&&_e.parts[1]==="radialaxis"&&delete Ut[_e.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(ft,Yt,Ke,ge),r.getComponentMethod("images","convertCoords")(ft,Yt,Ke,ge)}else ge(Lr+".autorange",!0),ge(Lr+".range",null);A(Ut,Lr+"._inputRange").set(null)}else if(dr.match(y)){var yr=A(Ut,ke).get(),Ir=(Ke||{}).type;(!Ir||Ir==="-")&&(Ir="linear"),r.getComponentMethod("annotations","convertCoords")(ft,yr,Ir,ge),r.getComponentMethod("images","convertCoords")(ft,yr,Ir,ge)}var Tr=d.containerArrayMatch(ke);if(Tr){je=Tr.array,vr=Tr.index;var vn=Tr.property,Or=qe||{editType:"calc"};vr!==""&&vn===""&&(d.isAddVal(Ke)?ne[ke]=null:d.isRemoveVal(Ke)?ne[ke]=(A(Dt,je).get()||[])[vr]:L.warn("unrecognized full object value",pt)),C.update(ir,Or),Se[je]||(Se[je]={});var En=Se[je][vr];En||(En=Se[je][vr]={}),En[vn]=Ke,delete pt[ke]}else dr==="reverse"?(xr.range?xr.range.reverse():(ge(Lr+".autorange",!0),xr.range=[1,0]),Yt.autorange?ir.calc=!0:ir.plot=!0):(ke==="dragmode"&&(Ke===!1&&Jt!==!1||Ke!==!1&&Jt===!1)||Ut._has("scatter-like")&&Ut._has("regl")&&ke==="dragmode"&&(Ke==="lasso"||Ke==="select")&&!(Jt==="lasso"||Jt==="select")||Ut._has("gl2d")?ir.plot=!0:qe?C.update(ir,qe):ir.calc=!0,_e.set(Ke))}}for(je in Se){var nn=d.applyContainerArrayChanges(ft,re(Dt,je),Se[je],ir,re);nn||(ir.plot=!0)}for(var gr in Ae){Re=n.getFromId(ft,gr);var Pr=Re&&Re._constraintGroup;if(Pr){ir.calc=!0;for(var Xr in Pr)Ae[Xr]||(n.getFromId(ft,Xr)._constraintShrinkable=!0)}}(wt(ft)||pt.height||pt.width)&&(ir.plot=!0);var kr=Ut.shapes;for(vr=0;vr<kr.length;vr++)if(kr[vr].showlegend){ir.calc=!0;break}return(ir.plot||ir.calc)&&(ir.layoutReplot=!0),{flags:ir,rangesAltered:Ae,undoit:ne,redoit:ve,eventData:me}}function wt(ft){var pt=ft._fullLayout,Dt=pt.width,Ut=pt.height;return ft.layout.autosize&&s.plotAutoSize(ft,ft.layout,pt),pt.width!==Dt||pt.height!==Ut}function Rt(ft,pt,Dt,Ut){ft=L.getGraphDiv(ft),x.clearPromiseQueue(ft),L.isPlainObject(pt)||(pt={}),L.isPlainObject(Dt)||(Dt={}),Object.keys(pt).length&&(ft.changed=!0),Object.keys(Dt).length&&(ft.changed=!0);var $t=x.coerceTraceIndices(ft,Ut),re=lt(ft,L.extendFlat({},pt),$t),Be=re.flags,We=Ct(ft,L.extendFlat({},Dt)),me=We.flags;(Be.calc||me.calc)&&(ft.calcdata=void 0),Be.clearAxisTypes&&x.clearAxisTypes(ft,$t,Dt);var Se=[];me.layoutReplot?Se.push(w.layoutReplot):Be.fullReplot?Se.push(V._doPlot):(Se.push(s.previousPromises),gt(ft,me,We)||s.supplyDefaults(ft),Be.style&&Se.push(w.doTraceStyle),(Be.colorbars||me.colorbars)&&Se.push(w.doColorBars),me.legend&&Se.push(w.doLegend),me.layoutstyle&&Se.push(w.layoutStyles),me.axrange&&Mt(Se,We.rangesAltered),me.ticks&&Se.push(w.doTicksRelayout),me.modebar&&Se.push(w.doModeBar),me.camera&&Se.push(w.doCamera),Se.push(E)),Se.push(s.rehover,s.redrag,s.reselect),p.add(ft,Rt,[ft,re.undoit,We.undoit,re.traces],Rt,[ft,re.redoit,We.redoit,re.traces]);var je=L.syncOrAsync(Se,ft);return(!je||!je.then)&&(je=Promise.resolve(ft)),je.then(function(){return ft.emit("plotly_update",{data:re.eventData,layout:We.eventData}),ft})}function Tt(ft){return function(Dt){Dt._fullLayout._guiEditing=!0;var Ut=ft.apply(null,arguments);return Dt._fullLayout._guiEditing=!1,Ut}}var Bt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],Gt=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function te(ft,pt){for(var Dt=0;Dt<pt.length;Dt++){var Ut=pt[Dt],$t=ft.match(Ut.pattern);if($t){var re=$t[1]||"";return{head:re,tail:ft.substr(re.length+1),attr:Ut.attr}}}}function Wt(ft,pt){var Dt=A(pt,ft).get();if(Dt!==void 0)return Dt;var Ut=ft.split(".");for(Ut.pop();Ut.length>1;)if(Ut.pop(),Dt=A(pt,Ut.join(".")+".uirevision").get(),Dt!==void 0)return Dt;return pt.uirevision}function jt(ft,pt){for(var Dt=0;Dt<pt.length;Dt++)if(pt[Dt]._fullInput.uid===ft)return Dt;return-1}function ie(ft,pt,Dt){for(var Ut=0;Ut<pt.length;Ut++)if(pt[Ut].uid===ft)return Ut;return!pt[Dt]||pt[Dt].uid?-1:Dt}function ue(ft,pt){var Dt=L.isPlainObject(ft),Ut=Array.isArray(ft);return Dt||Ut?(Dt&&L.isPlainObject(pt)||Ut&&Array.isArray(pt))&&JSON.stringify(ft)===JSON.stringify(pt):ft===pt}function fe(ft,pt,Dt,Ut){var $t=Ut._preGUI,re,Be,We,me,Se,je,vr,he,Ye,Qe,mr=[],ir={},ve={};for(re in $t){if(Se=te(re,Bt),Se){if(Ye=Se.head,Qe=Se.tail,Be=Se.attr||Ye+".uirevision",We=A(Ut,Be).get(),me=We&&Wt(Be,pt),me&&me===We){if(je=$t[re],je===null&&(je=void 0),vr=A(pt,re),he=vr.get(),ue(he,je)){he===void 0&&Qe==="autorange"&&mr.push(Ye),vr.set(K(A(Ut,re).get()));continue}else if(Qe==="autorange"||Qe.substr(0,6)==="range["){var ne=$t[Ye+".range[0]"],ge=$t[Ye+".range[1]"],Ae=$t[Ye+".autorange"];if(Ae||Ae===null&&ne===null&&ge===null){if(!(Ye in ir)){var Re=A(pt,Ye).get();ir[Ye]=Re&&(Re.autorange||Re.autorange!==!1&&(!Re.range||Re.range.length!==2))}if(ir[Ye]){vr.set(K(A(Ut,re).get()));continue}}}}}else L.warn("unrecognized GUI edit: "+re);delete $t[re],Se&&Se.tail.substr(0,6)==="range["&&(ve[Se.head]=1)}for(var ze=0;ze<mr.length;ze++){var ke=mr[ze];if(ve[ke]){var _e=A(pt,ke).get();_e&&delete _e.autorange}}var Ke=Ut._tracePreGUI;for(var hr in Ke){var cr=Ke[hr],dr=null,fr;for(re in cr){if(!dr){var Lr=jt(hr,Dt);if(Lr<0){delete Ke[hr];break}var xr=Dt[Lr];fr=xr._fullInput;var Yt=ie(hr,ft,fr.index);if(Yt<0){delete Ke[hr];break}dr=ft[Yt]}if(Se=te(re,Gt),Se){if(Se.attr?(We=A(Ut,Se.attr).get(),me=We&&Wt(Se.attr,pt)):(We=fr.uirevision,me=dr.uirevision,me===void 0&&(me=pt.uirevision)),me&&me===We&&(je=cr[re],je===null&&(je=void 0),vr=A(dr,re),he=vr.get(),ue(he,je))){vr.set(K(A(fr,re).get()));continue}}else L.warn("unrecognized GUI edit: "+re+" in trace uid "+hr);delete cr[re]}}}function pe(ft,pt,Dt,Ut){var $t,re;function Be(){return V.addFrames(ft,$t)}ft=L.getGraphDiv(ft),x.clearPromiseQueue(ft);var We=ft._fullData,me=ft._fullLayout;if(!L.isPlotDiv(ft)||!We||!me)re=V.newPlot(ft,pt,Dt,Ut);else{if(L.isPlainObject(pt)){var Se=pt;pt=Se.data,Dt=Se.layout,Ut=Se.config,$t=Se.frames}var je=!1;if(Ut){var vr=L.extendDeep({},ft._context);ft._context=void 0,O(ft,Ut),je=Ot(vr,ft._context)}ft.data=pt||[],x.cleanData(ft.data),ft.layout=Dt||{},x.cleanLayout(ft.layout),fe(ft.data,ft.layout,We,me),s.supplyDefaults(ft,{skipUpdateCalc:!0});var he=ft._fullData,Ye=ft._fullLayout,Qe=Ye.datarevision===void 0,mr=Ye.transition,ir=Qt(ft,me,Ye,Qe,mr),ve=ir.newDataRevision,ne=Te(ft,We,he,Qe,mr,ve);if(wt(ft)&&(ir.layoutReplot=!0),ne.calc||ir.calc){ft.calcdata=void 0;for(var ge=Object.getOwnPropertyNames(Ye),Ae=0;Ae<ge.length;Ae++){var Re=ge[Ae],ze=Re.substring(0,5);if(ze==="xaxis"||ze==="yaxis"){var ke=Ye[Re]._emptyCategories;ke&&ke()}}}else s.supplyDefaultsUpdateCalc(ft.calcdata,he);var _e=[];if($t&&(ft._transitionData={},s.createTransitionData(ft),_e.push(Be)),Ye.transition&&!je&&(ne.anim||ir.anim))ir.ticks&&_e.push(w.doTicksRelayout),s.doCalcdata(ft),w.doAutoRangeAndConstraints(ft),_e.push(function(){return s.transitionFromReact(ft,ne,ir,me)});else if(ne.fullReplot||ir.layoutReplot||je)ft._fullLayout._skipDefaults=!0,_e.push(V._doPlot);else{for(var Ke in ir.arrays){var hr=ir.arrays[Ke];if(hr.length){var cr=r.getComponentMethod(Ke,"drawOne");if(cr!==L.noop)for(var dr=0;dr<hr.length;dr++)cr(ft,hr[dr]);else{var fr=r.getComponentMethod(Ke,"draw");if(fr===L.noop)throw new Error("cannot draw components: "+Ke);fr(ft)}}}_e.push(s.previousPromises),ne.style&&_e.push(w.doTraceStyle),(ne.colorbars||ir.colorbars)&&_e.push(w.doColorBars),ir.legend&&_e.push(w.doLegend),ir.layoutstyle&&_e.push(w.layoutStyles),ir.axrange&&Mt(_e),ir.ticks&&_e.push(w.doTicksRelayout),ir.modebar&&_e.push(w.doModeBar),ir.camera&&_e.push(w.doCamera),_e.push(E)}_e.push(s.rehover,s.redrag,s.reselect),re=L.syncOrAsync(_e,ft),(!re||!re.then)&&(re=Promise.resolve(ft))}return re.then(function(){return ft.emit("plotly_react",{data:pt,layout:Dt}),ft})}function Te(ft,pt,Dt,Ut,$t,re){var Be=pt.length===Dt.length;if(!$t&&!Be)return{fullReplot:!0,calc:!0};var We=C.traceFlags();We.arrays={},We.nChanges=0,We.nChangesAnim=0;var me,Se;function je(Ye){var Qe=e.getTraceValObject(Se,Ye);return!Se._module.animatable&&Qe.anim&&(Qe.anim=!1),Qe}var vr={getValObject:je,flags:We,immutable:Ut,transition:$t,newDataRevision:re,gd:ft},he={};for(me=0;me<pt.length;me++)if(Dt[me]){if(Se=Dt[me]._fullInput,s.hasMakesDataTransform(Se)&&(Se=Dt[me]),he[Se.uid])continue;he[Se.uid]=1,Pt(pt[me]._fullInput,Se,[],vr)}return(We.calc||We.plot)&&(We.fullReplot=!0),$t&&We.nChanges&&We.nChangesAnim&&(We.anim=We.nChanges===We.nChangesAnim&&Be?"all":"some"),We}function Qt(ft,pt,Dt,Ut,$t){var re=C.layoutFlags();re.arrays={},re.rangesAltered={},re.nChanges=0,re.nChangesAnim=0;function Be(me){return e.getLayoutValObject(Dt,me)}var We={getValObject:Be,flags:re,immutable:Ut,transition:$t,gd:ft};return Pt(pt,Dt,[],We),(re.plot||re.calc)&&(re.layoutReplot=!0),$t&&re.nChanges&&re.nChangesAnim&&(re.anim=re.nChanges===re.nChangesAnim?"all":"some"),re}function Pt(ft,pt,Dt,Ut){var $t,re,Be,We=Ut.getValObject,me=Ut.flags,Se=Ut.immutable,je=Ut.inArray,vr=Ut.arrayIndex;function he(){var Lr=$t.editType;if(je&&Lr.indexOf("arraydraw")!==-1){L.pushUnique(me.arrays[je],vr);return}C.update(me,$t),Lr!=="none"&&me.nChanges++,Ut.transition&&$t.anim&&me.nChangesAnim++,(Lt.test(Be)||zt.test(Be))&&(me.rangesAltered[Dt[0]]=1),xt.test(Be)&&A(pt,"_inputDomain").set(null),re==="datarevision"&&(me.newDataRevision=1)}function Ye(Lr){return Lr.valType==="data_array"||Lr.arrayOk}for(re in ft){if(me.calc&&!Ut.transition)return;var Qe=ft[re],mr=pt[re],ir=Dt.concat(re);if(Be=ir.join("."),!(re.charAt(0)==="_"||typeof Qe=="function"||Qe===mr)){if((re==="tick0"||re==="dtick")&&Dt[0]!=="geo"){var ve=pt.tickmode;if(ve==="auto"||ve==="array"||!ve)continue}if(!(re==="range"&&pt.autorange)&&!((re==="zmin"||re==="zmax")&&pt.type==="contourcarpet")&&($t=We(ir),!!$t&&!($t._compareAsJSON&&JSON.stringify(Qe)===JSON.stringify(mr)))){var ne=$t.valType,ge,Ae=Ye($t),Re=Array.isArray(Qe),ze=Array.isArray(mr);if(Re&&ze){var ke="_input_"+re,_e=ft[ke],Ke=pt[ke];if(Array.isArray(_e)&&_e===Ke)continue}if(mr===void 0)Ae&&Re?me.calc=!0:he();else if($t._isLinkedToArray){var hr=[],cr=!1;je||(me.arrays[re]=hr);var dr=Math.min(Qe.length,mr.length),fr=Math.max(Qe.length,mr.length);if(dr!==fr)if($t.editType==="arraydraw")cr=!0;else{he();continue}for(ge=0;ge<dr;ge++)Pt(Qe[ge],mr[ge],ir.concat(ge),L.extendFlat({inArray:re,arrayIndex:ge},Ut));if(cr)for(ge=dr;ge<fr;ge++)hr.push(ge)}else!ne&&L.isPlainObject(Qe)?Pt(Qe,mr,ir,Ut):Ae?Re&&ze?(Se&&(me.calc=!0),(Se||Ut.newDataRevision)&&he()):Re!==ze?me.calc=!0:he():Re&&ze?(Qe.length!==mr.length||String(Qe)!==String(mr))&&he():he()}}}for(re in pt)if(!(re in ft||re.charAt(0)==="_"||typeof pt[re]=="function"))if($t=We(Dt.concat(re)),Ye($t)&&Array.isArray(pt[re])){me.calc=!0;return}else he()}function Ot(ft,pt){var Dt;for(Dt in ft)if(Dt.charAt(0)!=="_"){var Ut=ft[Dt],$t=pt[Dt];if(Ut!==$t)if(L.isPlainObject(Ut)&&L.isPlainObject($t)){if(Ot(Ut,$t))return!0}else if(Array.isArray(Ut)&&Array.isArray($t)){if(Ut.length!==$t.length)return!0;for(var re=0;re<Ut.length;re++)if(Ut[re]!==$t[re])if(L.isPlainObject(Ut[re])&&L.isPlainObject($t[re])){if(Ot(Ut[re],$t[re]))return!0}else return!0}else return!0}}function Nt(ft,pt,Dt){if(ft=L.getGraphDiv(ft),!L.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ut=ft._transitionData;Ut._frameQueue||(Ut._frameQueue=[]),Dt=s.supplyAnimationDefaults(Dt);var $t=Dt.transition,re=Dt.frame;Ut._frameWaitingCnt===void 0&&(Ut._frameWaitingCnt=0);function Be(Se){return Array.isArray($t)?Se>=$t.length?$t[0]:$t[Se]:$t}function We(Se){return Array.isArray(re)?Se>=re.length?re[0]:re[Se]:re}function me(Se,je){var vr=0;return function(){if(Se&&++vr===je)return Se()}}return new Promise(function(Se,je){function vr(){if(Ut._frameQueue.length!==0){for(;Ut._frameQueue.length;){var dr=Ut._frameQueue.pop();dr.onInterrupt&&dr.onInterrupt()}ft.emit("plotly_animationinterrupted",[])}}function he(dr){if(dr.length!==0){for(var fr=0;fr<dr.length;fr++){var Lr;dr[fr].type==="byname"?Lr=s.computeFrame(ft,dr[fr].name):Lr=dr[fr].data;var xr=We(fr),Yt=Be(fr);Yt.duration=Math.min(Yt.duration,xr.duration);var Jt={frame:Lr,name:dr[fr].name,frameOpts:xr,transitionOpts:Yt};fr===dr.length-1&&(Jt.onComplete=me(Se,2),Jt.onInterrupt=je),Ut._frameQueue.push(Jt)}Dt.mode==="immediate"&&(Ut._lastFrameAt=-1/0),Ut._animationRaf||mr()}}function Ye(){ft.emit("plotly_animated"),window.cancelAnimationFrame(Ut._animationRaf),Ut._animationRaf=null}function Qe(){Ut._currentFrame&&Ut._currentFrame.onComplete&&Ut._currentFrame.onComplete();var dr=Ut._currentFrame=Ut._frameQueue.shift();if(dr){var fr=dr.name?dr.name.toString():null;ft._fullLayout._currentFrame=fr,Ut._lastFrameAt=Date.now(),Ut._timeToNext=dr.frameOpts.duration,s.transition(ft,dr.frame.data,dr.frame.layout,x.coerceTraceIndices(ft,dr.frame.traces),dr.frameOpts,dr.transitionOpts).then(function(){dr.onComplete&&dr.onComplete()}),ft.emit("plotly_animatingframe",{name:fr,frame:dr.frame,animation:{frame:dr.frameOpts,transition:dr.transitionOpts}})}else Ye()}function mr(){ft.emit("plotly_animating"),Ut._lastFrameAt=-1/0,Ut._timeToNext=0,Ut._runningTransitions=0,Ut._currentFrame=null;var dr=function(){Ut._animationRaf=window.requestAnimationFrame(dr),Date.now()-Ut._lastFrameAt>Ut._timeToNext&&Qe()};dr()}var ir=0;function ve(dr){return Array.isArray($t)?ir>=$t.length?dr.transitionOpts=$t[ir]:dr.transitionOpts=$t[0]:dr.transitionOpts=$t,ir++,dr}var ne,ge,Ae=[],Re=pt==null,ze=Array.isArray(pt),ke=!Re&&!ze&&L.isPlainObject(pt);if(ke)Ae.push({type:"object",data:ve(L.extendFlat({},pt))});else if(Re||["string","number"].indexOf(typeof pt)!==-1)for(ne=0;ne<Ut._frames.length;ne++)ge=Ut._frames[ne],ge&&(Re||String(ge.group)===String(pt))&&Ae.push({type:"byname",name:String(ge.name),data:ve({name:ge.name})});else if(ze)for(ne=0;ne<pt.length;ne++){var _e=pt[ne];["number","string"].indexOf(typeof _e)!==-1?(_e=String(_e),Ae.push({type:"byname",name:_e,data:ve({name:_e})})):L.isPlainObject(_e)&&Ae.push({type:"object",data:ve(L.extendFlat({},_e))})}for(ne=0;ne<Ae.length;ne++)if(ge=Ae[ne],ge.type==="byname"&&!Ut._frameHash[ge.data.name]){L.warn('animate failure: frame not found: "'+ge.data.name+'"'),je();return}["next","immediate"].indexOf(Dt.mode)!==-1&&vr(),Dt.direction==="reverse"&&Ae.reverse();var Ke=ft._fullLayout._currentFrame;if(Ke&&Dt.fromcurrent){var hr=-1;for(ne=0;ne<Ae.length;ne++)if(ge=Ae[ne],ge.type==="byname"&&ge.name===Ke){hr=ne;break}if(hr>0&&hr<Ae.length-1){var cr=[];for(ne=0;ne<Ae.length;ne++)ge=Ae[ne],(Ae[ne].type!=="byname"||ne>hr)&&cr.push(ge);Ae=cr}}Ae.length>0?he(Ae):(ft.emit("plotly_animated"),Se())})}function Ht(ft,pt,Dt){if(ft=L.getGraphDiv(ft),pt==null)return Promise.resolve();if(!L.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ut,$t,re,Be,We=ft._transitionData._frames,me=ft._transitionData._frameHash;if(!Array.isArray(pt))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+pt);var Se=We.length+pt.length*2,je=[],vr={};for(Ut=pt.length-1;Ut>=0;Ut--)if(L.isPlainObject(pt[Ut])){var he=pt[Ut].name,Ye=(me[he]||vr[he]||{}).name,Qe=pt[Ut].name,mr=me[Ye]||vr[Ye];Ye&&Qe&&typeof Qe=="number"&&mr&&S<M&&(S++,L.warn('addFrames: overwriting frame "'+(me[Ye]||vr[Ye]).name+'" with a frame whose name of type "number" also equates to "'+Ye+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),S===M&&L.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),vr[he]={name:he},je.push({frame:s.supplyFrameDefaults(pt[Ut]),index:Dt&&Dt[Ut]!==void 0&&Dt[Ut]!==null?Dt[Ut]:Se+Ut})}je.sort(function(ke,_e){return ke.index>_e.index?-1:ke.index<_e.index?1:0});var ir=[],ve=[],ne=We.length;for(Ut=je.length-1;Ut>=0;Ut--){if($t=je[Ut].frame,typeof $t.name=="number"&&L.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!$t.name)for(;me[$t.name="frame "+ft._transitionData._counter++];);if(me[$t.name]){for(re=0;re<We.length&&(We[re]||{}).name!==$t.name;re++);ir.push({type:"replace",index:re,value:$t}),ve.unshift({type:"replace",index:re,value:We[re]})}else Be=Math.max(0,Math.min(je[Ut].index,ne)),ir.push({type:"insert",index:Be,value:$t}),ve.unshift({type:"delete",index:Be}),ne++}var ge=s.modifyFrames,Ae=s.modifyFrames,Re=[ft,ve],ze=[ft,ir];return p&&p.add(ft,ge,Re,Ae,ze),s.modifyFrames(ft,ir)}function St(ft,pt){if(ft=L.getGraphDiv(ft),!L.isPlotDiv(ft))throw new Error("This element is not a Plotly plot: "+ft);var Dt,Ut,$t=ft._transitionData._frames,re=[],Be=[];if(!pt)for(pt=[],Dt=0;Dt<$t.length;Dt++)pt.push(Dt);for(pt=pt.slice(),pt.sort(),Dt=pt.length-1;Dt>=0;Dt--)Ut=pt[Dt],re.push({type:"delete",index:Ut}),Be.unshift({type:"insert",index:Ut,value:$t[Ut]});var We=s.modifyFrames,me=s.modifyFrames,Se=[ft,Be],je=[ft,re];return p&&p.add(ft,We,Se,me,je),s.modifyFrames(ft,re)}function kt(ft){ft=L.getGraphDiv(ft);var pt=ft._fullLayout||{},Dt=ft._fullData||[];return s.cleanPlot([],{},Dt,pt),s.purge(ft),v.purge(ft),pt._container&&pt._container.remove(),delete ft._context,ft}function Ft(ft){var pt=ft._fullLayout,Dt=ft.getBoundingClientRect();if(!L.equalDomRects(Dt,pt._lastBBox)){var Ut=pt._invTransform=L.inverseTransformMatrix(L.getFullTransformMatrix(ft));pt._invScaleX=Math.sqrt(Ut[0][0]*Ut[0][0]+Ut[0][1]*Ut[0][1]+Ut[0][2]*Ut[0][2]),pt._invScaleY=Math.sqrt(Ut[1][0]*Ut[1][0]+Ut[1][1]*Ut[1][1]+Ut[1][2]*Ut[1][2]),pt._lastBBox=Dt}}function At(ft){var pt=b.select(ft),Dt=ft._fullLayout;if(Dt._calcInverseTransform=Ft,Dt._calcInverseTransform(ft),Dt._container=pt.selectAll(".plot-container").data([0]),Dt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Dt._paperdiv=Dt._container.selectAll(".svg-container").data([0]),Dt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Dt._glcontainer=Dt._paperdiv.selectAll(".gl-container").data([{}]),Dt._glcontainer.enter().append("div").classed("gl-container",!0),Dt._paperdiv.selectAll(".main-svg").remove(),Dt._paperdiv.select(".modebar-container").remove(),Dt._paper=Dt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Dt._toppaper=Dt._paperdiv.append("svg").classed("main-svg",!0),Dt._modebardiv=Dt._paperdiv.append("div"),delete Dt._modeBar,Dt._hoverpaper=Dt._paperdiv.append("svg").classed("main-svg",!0),!Dt._uid){var Ut={};b.selectAll("defs").each(function(){this.id&&(Ut[this.id.split("-")[1]]=1)}),Dt._uid=L.randstr(Ut)}Dt._paperdiv.selectAll(".main-svg").attr(T.svgAttrs),Dt._defs=Dt._paper.append("defs").attr("id","defs-"+Dt._uid),Dt._clips=Dt._defs.append("g").classed("clips",!0),Dt._topdefs=Dt._toppaper.append("defs").attr("id","topdefs-"+Dt._uid),Dt._topclips=Dt._topdefs.append("g").classed("clips",!0),Dt._bgLayer=Dt._paper.append("g").classed("bglayer",!0),Dt._draggers=Dt._paper.append("g").classed("draglayer",!0);var $t=Dt._paper.append("g").classed("layer-below",!0);Dt._imageLowerLayer=$t.append("g").classed("imagelayer",!0),Dt._shapeLowerLayer=$t.append("g").classed("shapelayer",!0),Dt._cartesianlayer=Dt._paper.append("g").classed("cartesianlayer",!0),Dt._polarlayer=Dt._paper.append("g").classed("polarlayer",!0),Dt._smithlayer=Dt._paper.append("g").classed("smithlayer",!0),Dt._ternarylayer=Dt._paper.append("g").classed("ternarylayer",!0),Dt._geolayer=Dt._paper.append("g").classed("geolayer",!0),Dt._funnelarealayer=Dt._paper.append("g").classed("funnelarealayer",!0),Dt._pielayer=Dt._paper.append("g").classed("pielayer",!0),Dt._iciclelayer=Dt._paper.append("g").classed("iciclelayer",!0),Dt._treemaplayer=Dt._paper.append("g").classed("treemaplayer",!0),Dt._sunburstlayer=Dt._paper.append("g").classed("sunburstlayer",!0),Dt._indicatorlayer=Dt._toppaper.append("g").classed("indicatorlayer",!0),Dt._glimages=Dt._paper.append("g").classed("glimages",!0);var re=Dt._toppaper.append("g").classed("layer-above",!0);Dt._imageUpperLayer=re.append("g").classed("imagelayer",!0),Dt._shapeUpperLayer=re.append("g").classed("shapelayer",!0),Dt._selectionLayer=Dt._toppaper.append("g").classed("selectionlayer",!0),Dt._infolayer=Dt._toppaper.append("g").classed("infolayer",!0),Dt._menulayer=Dt._toppaper.append("g").classed("menulayer",!0),Dt._zoomlayer=Dt._toppaper.append("g").classed("zoomlayer",!0),Dt._hoverlayer=Dt._hoverpaper.append("g").classed("hoverlayer",!0),Dt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ft.emit("plotly_framework")}V.animate=Nt,V.addFrames=Ht,V.deleteFrames=St,V.addTraces=Q,V.deleteTraces=W,V.extendTraces=nt,V.moveTraces=J,V.prependTraces=Z,V.newPlot=B,V._doPlot=a,V.purge=kt,V.react=pe,V.redraw=z,V.relayout=mt,V.restyle=it,V.setPlotConfig=m,V.update=Rt,V._guiRelayout=Tt(mt),V._guiRestyle=Tt(it),V._guiUpdate=Tt(Rt),V._storeDirectGUIEdit=tt},20556:function(j){var V={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},t={};function b(P,o){for(var L in P){var A=P[L];A.valType?o[L]=A.dflt:(o[L]||(o[L]={}),b(A,o[L]))}}b(V,t),j.exports={configAttributes:V,dfltConfig:t}},73060:function(j,V,t){var b=t(24040),P=t(3400),o=t(45464),L=t(64859),A=t(16672),v=t(85656),p=t(20556).configAttributes,r=t(67824),e=P.extendDeepAll,s=P.isPlainObject,n=P.isArrayOrTypedArray,l=P.nestedProperty,f=P.valObjectMeta,u="_isSubplotObj",g="_isLinkedToArray",h="_arrayAttrRegexps",T="_deprecated",c=[u,g,h,T];V.IS_SUBPLOT_OBJ=u,V.IS_LINKED_TO_ARRAY=g,V.DEPRECATED=T,V.UNDERSCORE_ATTRS=c,V.get=function(){var O={};b.allTypes.forEach(function(B){O[B]=w(B)});var z={};return Object.keys(b.transformsRegistry).forEach(function(B){z[B]=y(B)}),{defs:{valObjects:f,metaKeys:c.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:O,layout:C(),transforms:z,frames:S(),animation:M(v),config:M(p)}},V.crawl=function(O,z,B,F){var _=B||0;F=F||"",Object.keys(O).forEach(function(N){var G=O[N];if(c.indexOf(N)===-1){var X=(F?F+".":"")+N;z(G,N,O,_,X),!V.isValObject(G)&&s(G)&&N!=="impliedEdits"&&V.crawl(G,z,_+1,X)}})},V.isValObject=function(O){return O&&O.valType!==void 0},V.findArrayAttributes=function(O){var z=[],B=[],F=[],_,N;function G(Z,Q,W,J){B=B.slice(0,J).concat([Q]),F=F.slice(0,J).concat([Z&&Z._isLinkedToArray]);var it=Z&&(Z.valType==="data_array"||Z.arrayOk===!0)&&!(B[J-1]==="colorbar"&&(Q==="ticktext"||Q==="tickvals"));it&&X(_,0,"")}function X(Z,Q,W){var J=Z[B[Q]],it=W+B[Q];if(Q===B.length-1)n(J)&&z.push(N+it);else if(F[Q]){if(Array.isArray(J))for(var K=0;K<J.length;K++)s(J[K])&&X(J[K],Q+1,it+"["+K+"].")}else s(J)&&X(J,Q+1,it+".")}_=O,N="",V.crawl(o,G),O._module&&O._module.attributes&&V.crawl(O._module.attributes,G);var $=O.transforms;if($)for(var et=0;et<$.length;et++){var ot=$[et],nt=ot._module;nt&&(N="transforms["+et+"].",_=ot,V.crawl(nt.attributes,G))}return z},V.getTraceValObject=function(O,z){var B=z[0],F=1,_,N;if(B==="transforms"){if(z.length===1)return o.transforms;var G=O.transforms;if(!Array.isArray(G)||!G.length)return!1;var X=z[1];if(!x(X)||X>=G.length)return!1;_=(b.transformsRegistry[G[X].type]||{}).attributes,N=_&&_[z[2]],F=3}else{var $=O._module;if($||($=(b.modules[O.type||o.type.dflt]||{})._module),!$)return!1;if(_=$.attributes,N=_&&_[B],!N){var et=$.basePlotModule;et&&et.attributes&&(N=et.attributes[B])}N||(N=o[B])}return d(N,z,F)},V.getLayoutValObject=function(O,z){var B=i(O,z[0]);return d(B,z,1)};function i(O,z){var B,F,_,N,G=O._basePlotModules;if(G){var X;for(B=0;B<G.length;B++){if(_=G[B],_.attrRegex&&_.attrRegex.test(z)){if(_.layoutAttrOverrides)return _.layoutAttrOverrides;!X&&_.layoutAttributes&&(X=_.layoutAttributes)}var $=_.baseLayoutAttrOverrides;if($&&z in $)return $[z]}if(X)return X}var et=O._modules;if(et){for(B=0;B<et.length;B++)if(N=et[B].layoutAttributes,N&&z in N)return N[z]}for(F in b.componentsRegistry){if(_=b.componentsRegistry[F],_.name==="colorscale"&&z.indexOf("coloraxis")===0)return _.layoutAttributes[z];if(!_.schema&&z===_.name)return _.layoutAttributes}return z in L?L[z]:!1}function d(O,z,B){if(!O)return!1;if(O._isLinkedToArray){if(x(z[B]))B++;else if(B<z.length)return!1}for(;B<z.length;B++){var F=O[z[B]];if(s(F))O=F;else break;if(B===z.length-1)break;if(O._isLinkedToArray){if(B++,!x(z[B]))return!1}else if(O.valType==="info_array"){B++;var _=z[B];if(!x(_))return!1;var N=O.items;if(Array.isArray(N)){if(_>=N.length)return!1;if(O.dimensions===2){if(B++,z.length===B)return O;var G=z[B];if(!x(G))return!1;O=N[_][G]}else O=N[_]}else O=N}}return O}function x(O){return O===Math.round(O)&&O>=0}function w(O){var z,B;z=b.modules[O]._module,B=z.basePlotModule;var F={};F.type=null;var _=e({},o),N=e({},z.attributes);V.crawl(N,function($,et,ot,nt,Z){l(_,Z).set(void 0),$===void 0&&l(N,Z).set(void 0)}),e(F,_),b.traceIs(O,"noOpacity")&&delete F.opacity,b.traceIs(O,"showLegend")||(delete F.showlegend,delete F.legendgroup),b.traceIs(O,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),z.selectPoints||delete F.selectedpoints,e(F,N),B.attributes&&e(F,B.attributes),F.type=O;var G={meta:z.meta||{},categories:z.categories||{},animatable:!!z.animatable,type:O,attributes:M(F)};if(z.layoutAttributes){var X={};e(X,z.layoutAttributes),G.layoutAttributes=M(X)}return z.animatable||V.crawl(G,function($){V.isValObject($)&&"anim"in $&&delete $.anim}),G}function C(){var O={},z,B;e(O,L);for(z in b.subplotsRegistry)if(B=b.subplotsRegistry[z],!!B.layoutAttributes)if(Array.isArray(B.attr))for(var F=0;F<B.attr.length;F++)k(O,B,B.attr[F]);else{var _=B.attr==="subplot"?B.name:B.attr;k(O,B,_)}for(z in b.componentsRegistry){B=b.componentsRegistry[z];var N=B.schema;if(N&&(N.subplots||N.layout)){var G=N.subplots;if(G&&G.xaxis&&!G.yaxis)for(var X in G.xaxis)delete O.yaxis[X];delete O.xaxis.shift,delete O.xaxis.autoshift}else B.name==="colorscale"?e(O,B.layoutAttributes):B.layoutAttributes&&I(O,B.layoutAttributes,B.name)}return{layoutAttributes:M(O)}}function y(O){var z=b.transformsRegistry[O],B=e({},z.attributes);return Object.keys(b.componentsRegistry).forEach(function(F){var _=b.componentsRegistry[F];_.schema&&_.schema.transforms&&_.schema.transforms[O]&&Object.keys(_.schema.transforms[O]).forEach(function(N){I(B,_.schema.transforms[O][N],N)})}),{attributes:M(B)}}function S(){var O={frames:e({},A)};return M(O),O.frames}function M(O){return a(O),E(O),m(O),O}function a(O){function z(F){return{valType:"string",editType:"none"}}function B(F,_,N){V.isValObject(F)?(F.arrayOk===!0||F.valType==="data_array")&&(N[_+"src"]=z()):s(F)&&(F.role="object")}V.crawl(O,B)}function E(O){function z(B,F,_){if(B){var N=B[g];N&&(delete B[g],_[F]={items:{}},_[F].items[N]=B,_[F].role="object")}}V.crawl(O,z)}function m(O){function z(B){for(var F in B)if(s(B[F]))z(B[F]);else if(Array.isArray(B[F]))for(var _=0;_<B[F].length;_++)z(B[F][_]);else B[F]instanceof RegExp&&(B[F]=B[F].toString())}z(O)}function k(O,z,B){var F=l(O,B),_=e({},z.layoutAttributes);_[u]=!0,F.set(_)}function I(O,z,B){var F=l(O,B);F.set(e(F.get()||{},z))}},31780:function(j,V,t){var b=t(3400),P=t(45464),o="templateitemname",L={name:{valType:"string",editType:"none"}};L[o]={valType:"string",editType:"calc"},V.templatedArray=function(p,r){return r._isLinkedToArray=p,r.name=L.name,r[o]=L[o],r},V.traceTemplater=function(p){var r={},e,s;for(e in p)s=p[e],Array.isArray(s)&&s.length&&(r[e]=0);function n(l){e=b.coerce(l,{},P,"type");var f={type:e,_template:null};if(e in r){s=p[e];var u=r[e]%s.length;r[e]++,f._template=s[u]}return f}return{newTrace:n}},V.newContainer=function(p,r,e){var s=p._template,n=s&&(s[r]||e&&s[e]);b.isPlainObject(n)||(n=null);var l=p[r]={_template:n};return l},V.arrayTemplater=function(p,r,e){var s=p._template,n=s&&s[v(r)],l=s&&s[r];(!Array.isArray(l)||!l.length)&&(l=[]);var f={};function u(h){var T={name:h.name,_input:h},c=T[o]=h[o];if(!A(c))return T._template=n,T;for(var i=0;i<l.length;i++){var d=l[i];if(d.name===c)return f[c]=1,T._template=d,T}return T[e]=h[e]||!1,T._template=!1,T}function g(){for(var h=[],T=0;T<l.length;T++){var c=l[T],i=c.name;if(A(i)&&!f[i]){var d={_template:c,name:i,_input:{_templateitemname:i}};d[o]=c[o],h.push(d),f[i]=1}}return h}return{newItem:u,defaultItems:g}};function A(p){return p&&typeof p=="string"}function v(p){var r=p.length-1;return p.charAt(r)!=="s"&&b.warn("bad argument to arrayDefaultKey: "+p),p.substr(0,p.length-1)+"defaults"}V.arrayDefaultKey=v,V.arrayEditor=function(p,r,e){var s=(b.nestedProperty(p,r).get()||[]).length,n=e._index,l=n>=s&&(e._input||{})._templateitemname;l&&(n=s);var f=r+"["+n+"]",u;function g(){u={},l&&(u[f]={},u[f][o]=l)}g();function h(d,x){u[d]=x}function T(d,x){l?b.nestedProperty(u[f],d).set(x):u[f+"."+d]=x}function c(){var d=u;return g(),d}function i(d,x){d&&T(d,x);var w=c();for(var C in w)b.nestedProperty(p,C).set(w[C])}return{modifyBase:h,modifyItem:T,getUpdateObj:c,applyUpdate:i}}},39172:function(j,V,t){var b=t(33428),P=t(24040),o=t(7316),L=t(3400),A=t(72736),v=t(73696),p=t(76308),r=t(43616),e=t(81668),s=t(45460),n=t(54460),l=t(84284),f=t(71888),u=f.enforce,g=f.clean,h=t(19280).doAutoRange,T="start",c="middle",i="end",d=t(33816).zindexSeparator;V.layoutStyles=function(F){return L.syncOrAsync([o.doAutoMargin,w],F)};function x(F,_,N){for(var G=0;G<N.length;G++){var X=N[G][0],$=N[G][1];if(!(X[0]>=F[1]||X[1]<=F[0])&&$[0]<_[1]&&$[1]>_[0])return!0}return!1}function w(F){var _=F._fullLayout,N=_._size,G=N.p,X=n.list(F,"",!0),$,et,ot,nt,Z,Q;if(_._paperdiv.style({width:F._context.responsive&&_.autosize&&!F._context._hasZeroWidth&&!F.layout.width?"100%":_.width+"px",height:F._context.responsive&&_.autosize&&!F._context._hasZeroHeight&&!F.layout.height?"100%":_.height+"px"}).selectAll(".main-svg").call(r.setSize,_.width,_.height),F._context.setBackground(F,_.paper_bgcolor),V.drawMainTitle(F),s.manage(F),!_._has("cartesian"))return o.previousPromises(F);function W(Ft,At,ft){var pt=Ft._lw/2;if(Ft._id.charAt(0)==="x"){if(At){if(ft==="top")return At._offset-G-pt}else return N.t+N.h*(1-(Ft.position||0))+pt%1;return At._offset+At._length+G+pt}if(At){if(ft==="right")return At._offset+At._length+G+pt}else return N.l+N.w*(Ft.position||0)+pt%1;return At._offset-G-pt}for($=0;$<X.length;$++){nt=X[$];var J=nt._anchorAxis;nt._linepositions={},nt._lw=r.crispRound(F,nt.linewidth,1),nt._mainLinePosition=W(nt,J,nt.side),nt._mainMirrorPosition=nt.mirror&&J?W(nt,J,l.OPPOSITE_SIDE[nt.side]):null}var it=[],K=[],H=[],at=p.opacity(_.paper_bgcolor)===1&&p.opacity(_.plot_bgcolor)===1&&_.paper_bgcolor===_.plot_bgcolor;for(et in _._plots)if(ot=_._plots[et],ot.mainplot)ot.bg&&ot.bg.remove(),ot.bg=void 0;else{var tt=ot.xaxis.domain,lt=ot.yaxis.domain,dt=ot.plotgroup;if(x(tt,lt,H)&&et.indexOf(d)===-1){var mt=dt.node(),gt=ot.bg=L.ensureSingle(dt,"rect","bg");mt.insertBefore(gt.node(),mt.childNodes[0]),K.push(et)}else dt.select("rect.bg").remove(),H.push([tt,lt]),at||(it.push(et),K.push(et))}var Mt=_._bgLayer.selectAll(".bg").data(it);for(Mt.enter().append("rect").classed("bg",!0),Mt.exit().remove(),Mt.each(function(Ft){_._plots[Ft].bg=b.select(this)}),$=0;$<K.length;$++)ot=_._plots[K[$]],Z=ot.xaxis,Q=ot.yaxis,ot.bg&&Z._offset!==void 0&&Q._offset!==void 0&&ot.bg.call(r.setRect,Z._offset-G,Q._offset-G,Z._length+2*G,Q._length+2*G).call(p.fill,_.plot_bgcolor).style("stroke-width",0);if(!_._hasOnlyLargeSploms)for(et in _._plots){ot=_._plots[et],Z=ot.xaxis,Q=ot.yaxis;var Lt=ot.clipId="clip"+_._uid+et+"plot",zt=L.ensureSingleById(_._clips,"clipPath",Lt,function(Ft){Ft.classed("plotclip",!0).append("rect")});ot.clipRect=zt.select("rect").attr({width:Z._length,height:Q._length}),r.setTranslate(ot.plot,Z._offset,Q._offset);var xt,Ct;ot._hasClipOnAxisFalse?(xt=null,Ct=Lt):(xt=Lt,Ct=null),r.setClipUrl(ot.plot,xt,F),ot.layerClipId=Ct}var wt,Rt,Tt,Bt,Gt,te,Wt,jt,ie,ue,fe,pe,Te;function Qt(Ft){return"M"+wt+","+Ft+"H"+Rt}function Pt(Ft){return"M"+Z._offset+","+Ft+"h"+Z._length}function Ot(Ft){return"M"+Ft+","+jt+"V"+Wt}function Nt(Ft){return Q._shift!==void 0&&(Ft+=Q._shift),"M"+Ft+","+Q._offset+"v"+Q._length}function Ht(Ft,At,ft){if(!Ft.showline||et!==Ft._mainSubplot)return"";if(!Ft._anchorAxis)return ft(Ft._mainLinePosition);var pt=At(Ft._mainLinePosition);return Ft.mirror&&(pt+=At(Ft._mainMirrorPosition)),pt}for(et in _._plots){ot=_._plots[et],Z=ot.xaxis,Q=ot.yaxis;var St="M0,0";C(Z,et)&&(Gt=S(Z,"left",Q,X),wt=Z._offset-(Gt?G+Gt:0),te=S(Z,"right",Q,X),Rt=Z._offset+Z._length+(te?G+te:0),Tt=W(Z,Q,"bottom"),Bt=W(Z,Q,"top"),Te=!Z._anchorAxis||et!==Z._mainSubplot,Te&&(Z.mirror==="allticks"||Z.mirror==="all")&&(Z._linepositions[et]=[Tt,Bt]),St=Ht(Z,Qt,Pt),Te&&Z.showline&&(Z.mirror==="all"||Z.mirror==="allticks")&&(St+=Qt(Tt)+Qt(Bt)),ot.xlines.style("stroke-width",Z._lw+"px").call(p.stroke,Z.showline?Z.linecolor:"rgba(0,0,0,0)")),ot.xlines.attr("d",St);var kt="M0,0";C(Q,et)&&(fe=S(Q,"bottom",Z,X),Wt=Q._offset+Q._length+(fe?G:0),pe=S(Q,"top",Z,X),jt=Q._offset-(pe?G:0),ie=W(Q,Z,"left"),ue=W(Q,Z,"right"),Te=!Q._anchorAxis||et!==Q._mainSubplot,Te&&(Q.mirror==="allticks"||Q.mirror==="all")&&(Q._linepositions[et]=[ie,ue]),kt=Ht(Q,Ot,Nt),Te&&Q.showline&&(Q.mirror==="all"||Q.mirror==="allticks")&&(kt+=Ot(ie)+Ot(ue)),ot.ylines.style("stroke-width",Q._lw+"px").call(p.stroke,Q.showline?Q.linecolor:"rgba(0,0,0,0)")),ot.ylines.attr("d",kt)}return n.makeClipPaths(F),o.previousPromises(F)}function C(F,_){return(F.ticks||F.showline)&&(_===F._mainSubplot||F.mirror==="all"||F.mirror==="allticks")}function y(F,_,N){if(!N.showline||!N._lw)return!1;if(N.mirror==="all"||N.mirror==="allticks")return!0;var G=N._anchorAxis;if(!G)return!1;var X=l.FROM_BL[_];return N.side===_?G.domain[X]===F.domain[X]:N.mirror&&G.domain[1-X]===F.domain[1-X]}function S(F,_,N,G){if(y(F,_,N))return N._lw;for(var X=0;X<G.length;X++){var $=G[X];if($._mainAxis===N._mainAxis&&y(F,_,$))return $._lw}return 0}V.drawMainTitle=function(F){var _=F._fullLayout.title,N=F._fullLayout,G=z(N),X=B(N),$=I(N,X),et=k(N,G);if(e.draw(F,"gtitle",{propContainer:N,propName:"title.text",subtitlePropName:"title.subtitle.text",placeholder:N._dfltTitle.plot,subtitlePlaceholder:N._dfltTitle.subtitle,attributes:{x:et,y:$,"text-anchor":G,dy:X}}),_.text&&_.automargin){var ot=b.selectAll(".gtitle"),nt=r.bBox(b.selectAll(".g-gtitle").node()).height,Z=E(F,_,nt);if(Z>0){m(F,$,Z,nt),ot.attr({x:et,y:$,"text-anchor":G,dy:O(_.yanchor)}).call(A.positionText,et,$);var Q=(_.text.match(A.BR_TAG_ALL)||[]).length;if(Q){var W=l.LINE_SPACING*Q+l.MID_SHIFT;_.y===0&&(W=-W),ot.selectAll(".line").each(function(){var at=+this.getAttribute("dy").slice(0,-2)-W+"em";this.setAttribute("dy",at)})}var J=b.selectAll(".gtitle-subtitle");if(J.node()){var it=ot.node().getBBox(),K=it.y+it.height,H=K+e.SUBTITLE_PADDING_EM*_.subtitle.font.size;J.attr({x:et,y:H,"text-anchor":G,dy:O(_.yanchor)}).call(A.positionText,et,H)}}}};function M(F,_,N,G,X){var $=_.yref==="paper"?F._fullLayout._size.h:F._fullLayout.height,et=L.isTopAnchor(_)?G:G-X,ot=N==="b"?$-et:et;return L.isTopAnchor(_)&&N==="t"||L.isBottomAnchor(_)&&N==="b"?!1:ot<X}function a(F,_,N,G,X){var $=0;return N==="middle"&&($+=X/2),F==="t"?(N==="top"&&($+=X),$+=G-_*G):(N==="bottom"&&($+=X),$+=_*G),$}function E(F,_,N){var G=_.y,X=_.yanchor,$=G>.5?"t":"b",et=F._fullLayout.margin[$],ot=0;return _.yref==="paper"?ot=N+_.pad.t+_.pad.b:_.yref==="container"&&(ot=a($,G,X,F._fullLayout.height,N)+_.pad.t+_.pad.b),ot>et?ot:0}function m(F,_,N,G){var X="title.automargin",$=F._fullLayout.title,et=$.y>.5?"t":"b",ot={x:$.x,y:$.y,t:0,b:0},nt={};$.yref==="paper"&&M(F,$,et,_,G)?ot[et]=N:$.yref==="container"&&(nt[et]=N,F._fullLayout._reservedMargin[X]=nt),o.allowAutoMargin(F,X),o.autoMargin(F,X,ot)}function k(F,_){var N=F.title,G=F._size,X=0;switch(_===T?X=N.pad.l:_===i&&(X=-N.pad.r),N.xref){case"paper":return G.l+G.w*N.x+X;case"container":default:return F.width*N.x+X}}function I(F,_){var N=F.title,G=F._size,X=0;if(_==="0em"||!_?X=-N.pad.b:_===l.CAP_SHIFT+"em"&&(X=N.pad.t),N.y==="auto")return G.t/2;switch(N.yref){case"paper":return G.t+G.h-G.h*N.y+X;case"container":default:return F.height-F.height*N.y+X}}function O(F){return F==="top"?l.CAP_SHIFT+.3+"em":F==="bottom"?"-0.3em":l.MID_SHIFT+"em"}function z(F){var _=F.title,N=c;return L.isRightAnchor(_)?N=i:L.isLeftAnchor(_)&&(N=T),N}function B(F){var _=F.title,N="0em";return L.isTopAnchor(_)?N=l.CAP_SHIFT+"em":L.isMiddleAnchor(_)&&(N=l.MID_SHIFT+"em"),N}V.doTraceStyle=function(F){var _=F.calcdata,N=[],G;for(G=0;G<_.length;G++){var X=_[G],$=X[0]||{},et=$.trace||{},ot=et._module||{},nt=ot.arraysToCalcdata;nt&&nt(X,et);var Z=ot.editStyle;Z&&N.push({fn:Z,cd0:$})}if(N.length){for(G=0;G<N.length;G++){var Q=N[G];Q.fn(F,Q.cd0)}v(F),V.redrawReglTraces(F)}return o.style(F),P.getComponentMethod("legend","draw")(F),o.previousPromises(F)},V.doColorBars=function(F){return P.getComponentMethod("colorbar","draw")(F),o.previousPromises(F)},V.layoutReplot=function(F){var _=F.layout;return F.layout=void 0,P.call("_doPlot",F,"",_)},V.doLegend=function(F){return P.getComponentMethod("legend","draw")(F),o.previousPromises(F)},V.doTicksRelayout=function(F){return n.draw(F,"redraw"),F._fullLayout._hasOnlyLargeSploms&&(P.subplotsRegistry.splom.updateGrid(F),v(F),V.redrawReglTraces(F)),V.drawMainTitle(F),o.previousPromises(F)},V.doModeBar=function(F){var _=F._fullLayout;s.manage(F);for(var N=0;N<_._basePlotModules.length;N++){var G=_._basePlotModules[N].updateFx;G&&G(F)}return o.previousPromises(F)},V.doCamera=function(F){for(var _=F._fullLayout,N=_._subplots.gl3d,G=0;G<N.length;G++){var X=_[N[G]],$=X._scene;$.setViewport(X)}},V.drawData=function(F){var _=F._fullLayout;v(F);for(var N=_._basePlotModules,G=0;G<N.length;G++)N[G].plot(F);return V.redrawReglTraces(F),o.style(F),P.getComponentMethod("selections","draw")(F),P.getComponentMethod("shapes","draw")(F),P.getComponentMethod("annotations","draw")(F),P.getComponentMethod("images","draw")(F),_._replotting=!1,o.previousPromises(F)},V.redrawReglTraces=function(F){var _=F._fullLayout;if(_._has("regl")){var N=F._fullData,G=[],X=[],$,et;for(_._hasOnlyLargeSploms&&_._splomGrid.draw(),$=0;$<N.length;$++){var ot=N[$];ot.visible===!0&&ot._length!==0&&(ot.type==="splom"?_._splomScenes[ot.uid].draw():ot.type==="scattergl"?L.pushUnique(G,ot.xaxis+ot.yaxis):ot.type==="scatterpolargl"&&L.pushUnique(X,ot.subplot))}for($=0;$<G.length;$++)et=_._plots[G[$]],et._scene&&et._scene.draw();for($=0;$<X.length;$++)et=_[X[$]]._subplot,et._scene&&et._scene.draw()}},V.doAutoRangeAndConstraints=function(F){for(var _=n.list(F,"",!0),N,G={},X=0;X<_.length;X++)if(N=_[X],!G[N._id]){G[N._id]=1,g(F,N),h(F,N);var $=N._matchGroup;if($)for(var et in $){var ot=n.getFromId(F,et);h(F,ot,N.range),G[et]=1}}u(F)},V.finalDraw=function(F){P.getComponentMethod("rangeslider","draw")(F),P.getComponentMethod("rangeselector","draw")(F)},V.drawMarginPushers=function(F){P.getComponentMethod("legend","draw")(F),P.getComponentMethod("rangeselector","draw")(F),P.getComponentMethod("sliders","draw")(F),P.getComponentMethod("updatemenus","draw")(F),P.getComponentMethod("colorbar","draw")(F)}},94828:function(j,V,t){var b=t(3400),P=b.isPlainObject,o=t(73060),L=t(7316),A=t(45464),v=t(31780),p=t(20556).dfltConfig;V.makeTemplate=function(h){h=b.isPlainObject(h)?h:b.getGraphDiv(h),h=b.extendDeep({_context:p},{data:h.data,layout:h.layout}),L.supplyDefaults(h);var T=h.data||[],c=h.layout||{};c._basePlotModules=h._fullLayout._basePlotModules,c._modules=h._fullLayout._modules;var i={data:{},layout:{}};T.forEach(function(m){var k={};s(m,k,l.bind(null,m));var I=b.coerce(m,{},A,"type"),O=i.data[I];O||(O=i.data[I]=[]),O.push(k)}),s(c,i.layout,n.bind(null,c)),delete i.layout.template;var d=c.template;if(P(d)){var x=d.layout,w,C,y,S,M,a;P(x)&&r(x,i.layout);var E=d.data;if(P(E)){for(C in i.data)if(y=E[C],Array.isArray(y)){for(M=i.data[C],a=M.length,S=y.length,w=0;w<a;w++)r(y[w%S],M[w]);for(w=a;w<S;w++)M.push(b.extendDeep({},y[w]))}for(C in E)C in i.data||(i.data[C]=b.extendDeep([],E[C]))}}return i};function r(h,T){h=b.extendDeep({},h);var c=Object.keys(h).sort(),i,d;function x(M,a,E){if(P(a)&&P(M))r(M,a);else if(Array.isArray(a)&&Array.isArray(M)){var m=v.arrayTemplater({_template:h},E);for(d=0;d<a.length;d++){var k=a[d],I=m.newItem(k)._template;I&&r(I,k)}var O=m.defaultItems();for(d=0;d<O.length;d++)a.push(O[d]._template);for(d=0;d<a.length;d++)delete a[d].templateitemname}}for(i=0;i<c.length;i++){var w=c[i],C=h[w];if(w in T?x(C,T[w],w):T[w]=C,e(w)===w)for(var y in T){var S=e(y);y!==S&&S===w&&!(y in h)&&x(C,T[y],w)}}}function e(h){return h.replace(/[0-9]+$/,"")}function s(h,T,c,i,d){var x=d&&c(d);for(var w in h){var C=h[w],y=f(h,w,i),S=f(h,w,d),M=c(S);if(!M){var a=e(w);a!==w&&(S=f(h,a,d),M=c(S))}if(!(x&&x===M)&&!(!M||M._noTemplating||M.valType==="data_array"||M.arrayOk&&Array.isArray(C)))if(!M.valType&&P(C))s(C,T,c,y,S);else if(M._isLinkedToArray&&Array.isArray(C))for(var E=!1,m=0,k={},I=0;I<C.length;I++){var O=C[I];if(P(O)){var z=O.name;if(z)k[z]||(s(O,T,c,f(C,m,y),f(C,m,S)),m++,k[z]=1);else if(!E){var B=v.arrayDefaultKey(w),F=f(h,B,i),_=f(C,m,y);s(O,T,c,_,f(C,m,S));var N=b.nestedProperty(T,_),G=b.nestedProperty(T,F);G.set(N.get()),N.set(null),E=!0}}}else{var X=b.nestedProperty(T,y);X.set(C)}}}function n(h,T){return o.getLayoutValObject(h,b.nestedProperty({},T).parts)}function l(h,T){return o.getTraceValObject(h,b.nestedProperty({},T).parts)}function f(h,T,c){var i;return c?Array.isArray(h)?i=c+"["+T+"]":i=c+"."+T:i=T,i}V.validateTemplate=function(h,T){var c=b.extendDeep({},{_context:p,data:h.data,layout:h.layout}),i=c.layout||{};P(T)||(T=i.template||{});var d=T.layout,x=T.data,w=[];c.layout=i,c.layout.template=T,L.supplyDefaults(c);var C=c._fullLayout,y=c._fullData,S={};function M(F,_){for(var N in F)if(N.charAt(0)!=="_"&&P(F[N])){var G=e(N),X=[],$;for($=0;$<_.length;$++)X.push(f(F,N,_[$])),G!==N&&X.push(f(F,G,_[$]));for($=0;$<X.length;$++)S[X[$]]=1;M(F[N],X)}}function a(F,_){for(var N in F)if(N.indexOf("defaults")===-1&&P(F[N])){var G=f(F,N,_);S[G]?a(F[N],G):w.push({code:"unused",path:G})}}if(P(d)?(M(C,["layout"]),a(d,"layout")):w.push({code:"layout"}),!P(x))w.push({code:"data"});else{for(var E={},m,k=0;k<y.length;k++){var I=y[k];m=I.type,E[m]=(E[m]||0)+1,I._fullInput._template||w.push({code:"missing",index:I._fullInput.index,traceType:m})}for(m in x){var O=x[m].length,z=E[m]||0;O>z?w.push({code:"unused",traceType:m,templateCount:O,dataCount:z}):z>O&&w.push({code:"reused",traceType:m,templateCount:O,dataCount:z})}}function B(F,_){for(var N in F)if(N.charAt(0)!=="_"){var G=F[N],X=f(F,N,_);P(G)?(Array.isArray(F)&&G._template===!1&&G.templateitemname&&w.push({code:"missing",path:X,templateitemname:G.templateitemname}),B(G,X)):Array.isArray(G)&&u(G)&&B(G,X)}}if(B({data:y,layout:C},""),w.length)return w.map(g)};function u(h){for(var T=0;T<h.length;T++)if(P(h[T]))return!0}function g(h){var T;switch(h.code){case"data":T="The template has no key data.";break;case"layout":T="The template has no key layout.";break;case"missing":h.path?T="There are no templates for item "+h.path+" with name "+h.templateitemname:T="There are no templates for trace "+h.index+", of type "+h.traceType+".";break;case"unused":h.path?T="The template item at "+h.path+" was not used in constructing the plot.":h.dataCount?T="Some of the templates of type "+h.traceType+" were not used. The template has "+h.templateCount+" traces, the data only has "+h.dataCount+" of this type.":T="The template has "+h.templateCount+" traces of type "+h.traceType+" but there are none in the data.";break;case"reused":T="Some of the templates of type "+h.traceType+" were used more than once. The template has "+h.templateCount+" traces, the data has "+h.dataCount+" of this type.";break}return h.msg=T,h}},67024:function(j,V,t){var b=t(38248),P=t(36424),o=t(7316),L=t(3400),A=t(81792),v=t(37164),p=t(63268),r=t(25788).version,e={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function s(n,l){l=l||{};var f,u,g,h;L.isPlainObject(n)?(f=n.data||[],u=n.layout||{},g=n.config||{},h={}):(n=L.getGraphDiv(n),f=L.extendDeep([],n.data),u=L.extendDeep({},n.layout),g=n._context,h=n._fullLayout||{});function T(z){return!(z in l)||L.validate(l[z],e[z])}if(!T("width")&&l.width!==null||!T("height")&&l.height!==null)throw new Error("Height and width should be pixel values.");if(!T("format"))throw new Error("Export format is not "+L.join2(e.format.values,", "," or ")+".");var c={};function i(z,B){return L.coerce(l,c,e,z,B)}var d=i("format"),x=i("width"),w=i("height"),C=i("scale"),y=i("setBackground"),S=i("imageDataOnly"),M=document.createElement("div");M.style.position="absolute",M.style.left="-5000px",document.body.appendChild(M);var a=L.extendFlat({},u);x?a.width=x:l.width===null&&b(h.width)&&(a.width=h.width),w?a.height=w:l.height===null&&b(h.height)&&(a.height=h.height);var E=L.extendFlat({},g,{_exportedPlot:!0,staticPlot:!0,setBackground:y}),m=A.getRedrawFunc(M);function k(){return new Promise(function(z){setTimeout(z,A.getDelay(M._fullLayout))})}function I(){return new Promise(function(z,B){var F=v(M,d,C),_=M._fullLayout.width,N=M._fullLayout.height;function G(){P.purge(M),document.body.removeChild(M)}if(d==="full-json"){var X=o.graphJson(M,!1,"keepdata","object",!0,!0);return X.version=r,X=JSON.stringify(X),G(),z(S?X:A.encodeJSON(X))}if(G(),d==="svg")return z(S?F:A.encodeSVG(F));var $=document.createElement("canvas");$.id=L.randstr(),p({format:d,width:_,height:N,scale:C,canvas:$,svg:F,promise:!0}).then(z).catch(B)})}function O(z){return S?z.replace(A.IMAGE_URL_PREFIX,""):z}return new Promise(function(z,B){P.newPlot(M,f,a,E).then(m).then(k).then(I).then(function(F){z(O(F))}).catch(function(F){B(F)})})}j.exports=s},21480:function(j,V,t){var b=t(3400),P=t(7316),o=t(73060),L=t(20556).dfltConfig,A=b.isPlainObject,v=Array.isArray,p=b.isArrayOrTypedArray;j.exports=function(i,d){i===void 0&&(i=[]),d===void 0&&(d={});var x=o.get(),w=[],C={_context:b.extendFlat({},L)},y,S;v(i)?(C.data=b.extendDeep([],i),y=i):(C.data=[],y=[],w.push(l("array","data"))),A(d)?(C.layout=b.extendDeep({},d),S=d):(C.layout={},S={},arguments.length>1&&w.push(l("object","layout"))),P.supplyDefaults(C);for(var M=C._fullData,a=y.length,E=0;E<a;E++){var m=y[E],k=["data",E];if(!A(m)){w.push(l("object",k));continue}var I=M[E],O=I.type,z=x.traces[O].attributes;z.type={valType:"enumerated",values:[O]},I.visible===!1&&m.visible!==!1&&w.push(l("invisible",k)),r(m,I,z,w,k);var B=m.transforms,F=I.transforms;if(B){v(B)||w.push(l("array",k,["transforms"])),k.push("transforms");for(var _=0;_<B.length;_++){var N=["transforms",_],G=B[_].type;if(!A(B[_])){w.push(l("object",k,N));continue}var X=x.transforms[G]?x.transforms[G].attributes:{};X.type={valType:"enumerated",values:Object.keys(x.transforms)},r(B[_],F[_],X,w,k,N)}}}var $=C._fullLayout,et=e(x,M);return r(S,$,et,w,"layout"),w.length===0?void 0:w};function r(c,i,d,x,w,C){C=C||[];for(var y=Object.keys(c),S=0;S<y.length;S++){var M=y[S];if(M!=="transforms"){var a=C.slice();a.push(M);var E=c[M],m=i[M],k=u(d,M),I=(k||{}).valType,O=I==="info_array",z=I==="colorscale",B=(k||{}).items;if(!f(d,M))x.push(l("schema",w,a));else if(A(E)&&A(m)&&I!=="any")r(E,m,k,x,w,a);else if(O&&v(E)){E.length>m.length&&x.push(l("unused",w,a.concat(m.length)));var F=m.length,_=Array.isArray(B);_&&(F=Math.min(F,B.length));var N,G,X,$,et;if(k.dimensions===2)for(G=0;G<F;G++)if(v(E[G])){E[G].length>m[G].length&&x.push(l("unused",w,a.concat(G,m[G].length)));var ot=m[G].length;for(N=0;N<(_?Math.min(ot,B[G].length):ot);N++)X=_?B[G][N]:B,$=E[G][N],et=m[G][N],b.validate($,X)?et!==$&&et!==+$&&x.push(l("dynamic",w,a.concat(G,N),$,et)):x.push(l("value",w,a.concat(G,N),$))}else x.push(l("array",w,a.concat(G),E[G]));else for(G=0;G<F;G++)X=_?B[G]:B,$=E[G],et=m[G],b.validate($,X)?et!==$&&et!==+$&&x.push(l("dynamic",w,a.concat(G),$,et)):x.push(l("value",w,a.concat(G),$))}else if(k.items&&!O&&v(E)){var nt=B[Object.keys(B)[0]],Z=[],Q,W;for(Q=0;Q<m.length;Q++){var J=m[Q]._index||Q;if(W=a.slice(),W.push(J),A(E[J])&&A(m[Q])){Z.push(J);var it=E[J],K=m[Q];A(it)&&it.visible!==!1&&K.visible===!1?x.push(l("invisible",w,W)):r(it,K,nt,x,w,W)}}for(Q=0;Q<E.length;Q++)W=a.slice(),W.push(Q),A(E[Q])?Z.indexOf(Q)===-1&&x.push(l("unused",w,W)):x.push(l("object",w,W,E[Q]))}else!A(E)&&A(m)?x.push(l("object",w,a,E)):!p(E)&&p(m)&&!O&&!z?x.push(l("array",w,a,E)):M in i?b.validate(E,k)?k.valType==="enumerated"&&(k.coerceNumber&&E!==+m||E!==m)&&x.push(l("dynamic",w,a,E,m)):x.push(l("value",w,a,E)):x.push(l("unused",w,a,E))}}return x}function e(c,i){for(var d=c.layout.layoutAttributes,x=0;x<i.length;x++){var w=i[x],C=c.traces[w.type],y=C.layoutAttributes;y&&(w.subplot?b.extendFlat(d[C.attributes.subplot.dflt],y):b.extendFlat(d,y))}return d}var s={object:function(c,i){var d;return c==="layout"&&i===""?d="The layout argument":c[0]==="data"&&i===""?d="Trace "+c[1]+" in the data argument":d=n(c)+"key "+i,d+" must be linked to an object container"},array:function(c,i){var d;return c==="data"?d="The data argument":d=n(c)+"key "+i,d+" must be linked to an array container"},schema:function(c,i){return n(c)+"key "+i+" is not part of the schema"},unused:function(c,i,d){var x=A(d)?"container":"key";return n(c)+x+" "+i+" did not get coerced"},dynamic:function(c,i,d,x){return[n(c)+"key",i,"(set to '"+d+"')","got reset to","'"+x+"'","during defaults."].join(" ")},invisible:function(c,i){return(i?n(c)+"item "+i:"Trace "+c[1])+" got defaulted to be not visible"},value:function(c,i,d){return[n(c)+"key "+i,"is set to an invalid value ("+d+")"].join(" ")}};function n(c){return v(c)?"In data trace "+c[1]+", ":"In "+c+", "}function l(c,i,d,x,w){d=d||"";var C,y;v(i)?(C=i[0],y=i[1]):(C=i,y=null);var S=T(d),M=s[c](i,S,x,w);return b.log(M),{code:c,container:C,trace:y,path:d,astr:S,msg:M}}function f(c,i){var d=h(i),x=d.keyMinusId,w=d.id;return x in c&&c[x]._isSubplotObj&&w?!0:i in c}function u(c,i){if(i in c)return c[i];var d=h(i);return c[d.keyMinusId]}var g=b.counterRegex("([a-z]+)");function h(c){var i=c.match(g);return{keyMinusId:i&&i[1],id:i&&i[2]}}function T(c){if(!v(c))return String(c);for(var i="",d=0;d<c.length;d++){var x=c[d];typeof x=="number"?i=i.substr(0,i.length-1)+"["+x+"]":i+=x,d<c.length-1&&(i+=".")}return i}},85656:function(j){j.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},51272:function(j,V,t){var b=t(3400),P=t(31780);j.exports=function(L,A,v){var p=v.name,r=v.inclusionAttr||"visible",e=A[p],s=b.isArrayOrTypedArray(L[p])?L[p]:[],n=A[p]=[],l=P.arrayTemplater(A,p,r),f,u;for(f=0;f<s.length;f++){var g=s[f];b.isPlainObject(g)?u=l.newItem(g):(u=l.newItem({}),u[r]=!1),u._index=f,u[r]!==!1&&v.handleItemDefaults(g,u,A,v),n.push(u)}var h=l.defaultItems();for(f=0;f<h.length;f++)u=h[f],u._index=n.length,v.handleItemDefaults({},u,A,v,{}),n.push(u);if(b.isArrayOrTypedArray(e)){var T=Math.min(e.length,n.length);for(f=0;f<T;f++)b.relinkPrivateKeys(n[f],e[f])}return n}},45464:function(j,V,t){var b=t(25376),P=t(55756);j.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legend:{valType:"subplotid",dflt:"legend",editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:b({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:P.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},1220:function(j,V,t){var b=t(38248),P=t(3400),o=P.dateTime2ms,L=P.incrementMonth,A=t(39032),v=A.ONEAVGMONTH;j.exports=function(r,e,s,n){if(e.type!=="date")return{vals:n};var l=r[s+"periodalignment"];if(!l)return{vals:n};var f=r[s+"period"],u;if(b(f)){if(f=+f,f<=0)return{vals:n}}else if(typeof f=="string"&&f.charAt(0)==="M"){var g=+f.substring(1);if(g>0&&Math.round(g)===g)u=g;else return{vals:n}}for(var h=e.calendar,T=l==="start",c=l==="end",i=r[s+"period0"],d=o(i,h)||0,x=[],w=[],C=[],y=n.length,S=0;S<y;S++){var M=n[S],a,E,m;if(u){for(a=Math.round((M-d)/(u*v)),m=L(d,u*a,h);m>M;)m=L(m,-u,h);for(;m<=M;)m=L(m,u,h);E=L(m,-u,h)}else{for(a=Math.round((M-d)/f),m=d+a*f;m>M;)m-=f;for(;m<=M;)m+=f;E=m-f}x[S]=T?E:c?m:(E+m)/2,w[S]=E,C[S]=m}return{vals:x,starts:w,ends:C}}},26720:function(j){j.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},19280:function(j,V,t){var b=t(33428),P=t(38248),o=t(3400),L=t(39032).FP_SAFE,A=t(24040),v=t(43616),p=t(79811),r=p.getFromId,e=p.isLinked;j.exports={applyAutorangeOptions:a,getAutoRange:s,makePadFn:l,doAutoRange:h,findExtremes:T,concatExtremes:g};function s(E,m){var k,I,O=[],z=E._fullLayout,B=l(z,m,0),F=l(z,m,1),_=g(E,m),N=_.min,G=_.max;if(N.length===0||G.length===0)return o.simpleMap(m.range,m.r2l);var X=N[0].val,$=G[0].val;for(k=1;k<N.length&&X===$;k++)X=Math.min(X,N[k].val);for(k=1;k<G.length&&X===$;k++)$=Math.max($,G[k].val);var et=m.autorange,ot=et==="reversed"||et==="min reversed"||et==="max reversed";if(!ot&&m.range){var nt=o.simpleMap(m.range,m.r2l);ot=nt[1]<nt[0]}m.autorange==="reversed"&&(m.autorange=!0);var Z=m.rangemode,Q=Z==="tozero",W=Z==="nonnegative",J=m._length,it=J/10,K=0,H,at,tt,lt,dt,mt;for(k=0;k<N.length;k++)for(H=N[k],I=0;I<G.length;I++)at=G[I],mt=at.val-H.val-n(m,H.val,at.val),mt>0&&(dt=J-B(H)-F(at),dt>it?mt/dt>K&&(tt=H,lt=at,K=mt/dt):mt/J>K&&(tt={val:H.val,nopad:1},lt={val:at.val,nopad:1},K=mt/J));function gt(Ct,wt){return Math.max(Ct,F(wt))}if(X===$){var Mt=X-1,Lt=X+1;if(Q)if(X===0)O=[0,1];else{var zt=(X>0?G:N).reduce(gt,0),xt=X/(1-Math.min(.5,zt/J));O=X>0?[0,xt]:[xt,0]}else W?O=[Math.max(0,Mt),Math.max(1,Lt)]:O=[Mt,Lt]}else Q?(tt.val>=0&&(tt={val:0,nopad:1}),lt.val<=0&&(lt={val:0,nopad:1})):W&&(tt.val-K*B(tt)<0&&(tt={val:0,nopad:1}),lt.val<=0&&(lt={val:1,nopad:1})),K=(lt.val-tt.val-n(m,H.val,at.val))/(J-B(tt)-F(lt)),O=[tt.val-K*B(tt),lt.val+K*F(lt)];return O=a(O,m),m.limitRange&&m.limitRange(),ot&&O.reverse(),o.simpleMap(O,m.l2r||Number)}function n(E,m,k){var I=0;if(E.rangebreaks)for(var O=E.locateBreaks(m,k),z=0;z<O.length;z++){var B=O[z];I+=B.max-B.min}return I}function l(E,m,k){var I=.05*m._length,O=m._anchorAxis||{};if((m.ticklabelposition||"").indexOf("inside")!==-1||(O.ticklabelposition||"").indexOf("inside")!==-1){var z=m.isReversed();if(!z){var B=o.simpleMap(m.range,m.r2l);z=B[1]<B[0]}z&&(k=!k)}var F=0;return e(E,m._id)||(F=u(E,m,k)),I=Math.max(F,I),m.constrain==="domain"&&m._inputDomain&&(I*=(m._inputDomain[1]-m._inputDomain[0])/(m.domain[1]-m.domain[0])),function(N){return N.nopad?0:N.pad+(N.extrapad?I:F)}}var f=3;function u(E,m,k){var I=0,O=m._id.charAt(0)==="x";for(var z in E._plots){var B=E._plots[z];if(!(m._id!==B.xaxis._id&&m._id!==B.yaxis._id)){var F=(O?B.yaxis:B.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!k&&(F.side==="left"||F.side==="bottom")||k&&(F.side==="top"||F.side==="right"))){if(F._vals){var _=o.deg2rad(F._tickAngles[F._id+"tick"]||0),N=Math.abs(Math.cos(_)),G=Math.abs(Math.sin(_));if(!F._vals[0].bb){var X=F._id+"tick",$=F._selections[X];$.each(function(W){var J=b.select(this),it=J.select(".text-math-group");it.empty()&&(W.bb=v.bBox(J.node()))})}for(var et=0;et<F._vals.length;et++){var ot=F._vals[et],nt=ot.bb;if(nt){var Z=2*f+nt.width,Q=2*f+nt.height;I=Math.max(I,O?Math.max(Z*N,Q*G):Math.max(Q*N,Z*G))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(I+=F.ticklen||0)}}}return I}function g(E,m,k){var I=m._id,O=E._fullData,z=E._fullLayout,B=[],F=[],_,N,G;function X(Z,Q){for(_=0;_<Q.length;_++){var W=Z[Q[_]],J=(W._extremes||{})[I];if(W.visible===!0&&J){for(N=0;N<J.min.length;N++)G=J.min[N],c(B,G.val,G.pad,{extrapad:G.extrapad});for(N=0;N<J.max.length;N++)G=J.max[N],i(F,G.val,G.pad,{extrapad:G.extrapad})}}}if(X(O,m._traceIndices),X(z.annotations||[],m._annIndices||[]),X(z.shapes||[],m._shapeIndices||[]),m._matchGroup&&!k){for(var $ in m._matchGroup)if($!==m._id){var et=r(E,$),ot=g(E,et,!0),nt=m._length/et._length;for(N=0;N<ot.min.length;N++)G=ot.min[N],c(B,G.val,G.pad*nt,{extrapad:G.extrapad});for(N=0;N<ot.max.length;N++)G=ot.max[N],i(F,G.val,G.pad*nt,{extrapad:G.extrapad})}}return{min:B,max:F}}function h(E,m,k){if(m.setScale(),m.autorange){m.range=k?k.slice():s(E,m),m._r=m.range.slice(),m._rl=o.simpleMap(m._r,m.r2l);var I=m._input,O={};O[m._attr+".range"]=m.range,O[m._attr+".autorange"]=m.autorange,A.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,O),I.range=m.range.slice(),I.autorange=m.autorange}var z=m._anchorAxis;if(z&&z.rangeslider){var B=z.rangeslider[m._name];B&&B.rangemode==="auto"&&(B.range=s(E,m)),z._input.rangeslider[m._name]=o.extendFlat({},B)}}function T(E,m,k){k||(k={}),E._m||E.setScale();var I=[],O=[],z=m.length,B=k.padded||!1,F=k.tozero&&(E.type==="linear"||E.type==="-"),_=E.type==="log",N=!1,G=k.vpadLinearized||!1,X,$,et,ot,nt,Z,Q,W,J;function it(gt){if(Array.isArray(gt))return N=!0,function(Lt){return Math.max(Number(gt[Lt]||0),0)};var Mt=Math.max(Number(gt||0),0);return function(){return Mt}}var K=it((E._m>0?k.ppadplus:k.ppadminus)||k.ppad||0),H=it((E._m>0?k.ppadminus:k.ppadplus)||k.ppad||0),at=it(k.vpadplus||k.vpad),tt=it(k.vpadminus||k.vpad);if(!N){if(W=1/0,J=-1/0,_)for(X=0;X<z;X++)$=m[X],$<W&&$>0&&(W=$),$>J&&$<L&&(J=$);else for(X=0;X<z;X++)$=m[X],$<W&&$>-L&&(W=$),$>J&&$<L&&(J=$);m=[W,J],z=2}var lt={tozero:F,extrapad:B};function dt(gt){et=m[gt],P(et)&&(Z=K(gt),Q=H(gt),G?(ot=E.c2l(et)-tt(gt),nt=E.c2l(et)+at(gt)):(W=et-tt(gt),J=et+at(gt),_&&W<J/10&&(W=J/10),ot=E.c2l(W),nt=E.c2l(J)),F&&(ot=Math.min(0,ot),nt=Math.max(0,nt)),x(ot)&&c(I,ot,Q,lt),x(nt)&&i(O,nt,Z,lt))}var mt=Math.min(6,z);for(X=0;X<mt;X++)dt(X);for(X=z-1;X>=mt;X--)dt(X);return{min:I,max:O,opts:k}}function c(E,m,k,I){d(E,m,k,I,w)}function i(E,m,k,I){d(E,m,k,I,C)}function d(E,m,k,I,O){for(var z=I.tozero,B=I.extrapad,F=!0,_=0;_<E.length&&F;_++){var N=E[_];if(O(N.val,m)&&N.pad>=k&&(N.extrapad||!B)){F=!1;break}else O(m,N.val)&&N.pad<=k&&(B||!N.extrapad)&&(E.splice(_,1),_--)}if(F){var G=z&&m===0;E.push({val:m,pad:G?0:k,extrapad:G?!1:B})}}function x(E){return P(E)&&Math.abs(E)<L}function w(E,m){return E<=m}function C(E,m){return E>=m}function y(E,m){var k=m.autorangeoptions;return k&&k.minallowed!==void 0&&M(m,k.minallowed,k.maxallowed)?k.minallowed:k&&k.clipmin!==void 0&&M(m,k.clipmin,k.clipmax)?Math.max(E,m.d2l(k.clipmin)):E}function S(E,m){var k=m.autorangeoptions;return k&&k.maxallowed!==void 0&&M(m,k.minallowed,k.maxallowed)?k.maxallowed:k&&k.clipmax!==void 0&&M(m,k.clipmin,k.clipmax)?Math.min(E,m.d2l(k.clipmax)):E}function M(E,m,k){return m!==void 0&&k!==void 0?(m=E.d2l(m),k=E.d2l(k),m<k):!0}function a(E,m){if(!m||!m.autorangeoptions)return E;var k=E[0],I=E[1],O=m.autorangeoptions.include;if(O!==void 0){var z=m.d2l(k),B=m.d2l(I);o.isArrayOrTypedArray(O)||(O=[O]);for(var F=0;F<O.length;F++){var _=m.d2l(O[F]);z>=_&&(z=_,k=_),B<=_&&(B=_,I=_)}}return k=y(k,m),I=S(I,m),[k,I]}},76808:function(j){j.exports=function(t,b,P){var o,L;if(P){var A=b==="reversed"||b==="min reversed"||b==="max reversed";o=P[A?1:0],L=P[A?0:1]}var v=t("autorangeoptions.minallowed",L===null?o:void 0),p=t("autorangeoptions.maxallowed",o===null?L:void 0);v===void 0&&t("autorangeoptions.clipmin"),p===void 0&&t("autorangeoptions.clipmax"),t("autorangeoptions.include")}},54460:function(j,V,t){var b=t(33428),P=t(38248),o=t(7316),L=t(24040),A=t(3400),v=A.strTranslate,p=t(72736),r=t(81668),e=t(76308),s=t(43616),n=t(94724),l=t(98728),f=t(39032),u=f.ONEMAXYEAR,g=f.ONEAVGYEAR,h=f.ONEMINYEAR,T=f.ONEMAXQUARTER,c=f.ONEAVGQUARTER,i=f.ONEMINQUARTER,d=f.ONEMAXMONTH,x=f.ONEAVGMONTH,w=f.ONEMINMONTH,C=f.ONEWEEK,y=f.ONEDAY,S=y/2,M=f.ONEHOUR,a=f.ONEMIN,E=f.ONESEC,m=f.ONEMILLI,k=f.ONEMICROSEC,I=f.MINUS_SIGN,O=f.BADNUM,z={K:"zeroline"},B={K:"gridline",L:"path"},F={K:"minor-gridline",L:"path"},_={K:"tick",L:"path"},N={K:"tick",L:"text"},G={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},X=t(84284),$=X.MID_SHIFT,et=X.CAP_SHIFT,ot=X.LINE_SPACING,nt=X.OPPOSITE_SIDE,Z=3,Q=j.exports={};Q.setConvert=t(78344);var W=t(52976),J=t(79811),it=J.idSort,K=J.isLinked;Q.id2name=J.id2name,Q.name2id=J.name2id,Q.cleanId=J.cleanId,Q.list=J.list,Q.listIds=J.listIds,Q.getFromId=J.getFromId,Q.getFromTrace=J.getFromTrace;var H=t(19280);Q.getAutoRange=H.getAutoRange,Q.findExtremes=H.findExtremes;var at=1e-4;function tt(Yt){var Jt=(Yt[1]-Yt[0])*at;return[Yt[0]-Jt,Yt[1]+Jt]}Q.coerceRef=function(Yt,Jt,qe,tr,Ge,Ee){var Xe=tr.charAt(tr.length-1),rr=qe._fullLayout._subplots[Xe+"axis"],Je=tr+"ref",He={};return Ge||(Ge=rr[0]||(typeof Ee=="string"?Ee:Ee[0])),Ee||(Ee=Ge),rr=rr.concat(rr.map(function(yr){return yr+" domain"})),He[Je]={valType:"enumerated",values:rr.concat(Ee?typeof Ee=="string"?[Ee]:Ee:[]),dflt:Ge},A.coerce(Yt,Jt,He,Je)},Q.getRefType=function(Yt){return Yt===void 0?Yt:Yt==="paper"?"paper":Yt==="pixel"?"pixel":/( domain)$/.test(Yt)?"domain":"range"},Q.coercePosition=function(Yt,Jt,qe,tr,Ge,Ee){var Xe,rr,Je=Q.getRefType(tr);if(Je!=="range")Xe=A.ensureNumber,rr=qe(Ge,Ee);else{var He=Q.getFromId(Jt,tr);Ee=He.fraction2r(Ee),rr=qe(Ge,Ee),Xe=He.cleanPos}Yt[Ge]=Xe(rr)},Q.cleanPosition=function(Yt,Jt,qe){var tr=qe==="paper"||qe==="pixel"?A.ensureNumber:Q.getFromId(Jt,qe).cleanPos;return tr(Yt)},Q.redrawComponents=function(Yt,Jt){Jt=Jt||Q.listIds(Yt);var qe=Yt._fullLayout;function tr(Ge,Ee,Xe,rr){for(var Je=L.getComponentMethod(Ge,Ee),He={},yr=0;yr<Jt.length;yr++)for(var Ir=qe[Q.id2name(Jt[yr])],Tr=Ir[Xe],vn=0;vn<Tr.length;vn++){var Or=Tr[vn];if(!He[Or]&&(Je(Yt,Or),He[Or]=1,rr))return}}tr("annotations","drawOne","_annIndices"),tr("shapes","drawOne","_shapeIndices"),tr("images","draw","_imgIndices",!0),tr("selections","drawOne","_selectionIndices")};var lt=Q.getDataConversions=function(Yt,Jt,qe,tr){var Ge,Ee=qe==="x"||qe==="y"||qe==="z"?qe:tr;if(A.isArrayOrTypedArray(Ee)){if(Ge={type:W(tr,void 0,{autotypenumbers:Yt._fullLayout.autotypenumbers}),_categories:[]},Q.setConvert(Ge),Ge.type==="category")for(var Xe=0;Xe<tr.length;Xe++)Ge.d2c(tr[Xe])}else Ge=Q.getFromTrace(Yt,Jt,Ee);return Ge?{d2c:Ge.d2c,c2d:Ge.c2d}:Ee==="ids"?{d2c:mt,c2d:mt}:{d2c:dt,c2d:dt}};function dt(Yt){return+Yt}function mt(Yt){return String(Yt)}Q.getDataToCoordFunc=function(Yt,Jt,qe,tr){return lt(Yt,Jt,qe,tr).d2c},Q.counterLetter=function(Yt){var Jt=Yt.charAt(0);if(Jt==="x")return"y";if(Jt==="y")return"x"},Q.minDtick=function(Yt,Jt,qe,tr){["log","category","multicategory"].indexOf(Yt.type)!==-1||!tr?Yt._minDtick=0:Yt._minDtick===void 0?(Yt._minDtick=Jt,Yt._forceTick0=qe):Yt._minDtick&&((Yt._minDtick/Jt+1e-6)%1<2e-6&&((qe-Yt._forceTick0)/Jt%1+1.000001)%1<2e-6?(Yt._minDtick=Jt,Yt._forceTick0=qe):((Jt/Yt._minDtick+1e-6)%1>2e-6||((qe-Yt._forceTick0)/Yt._minDtick%1+1.000001)%1>2e-6)&&(Yt._minDtick=0))},Q.saveRangeInitial=function(Yt,Jt){for(var qe=Q.list(Yt,"",!0),tr=!1,Ge=0;Ge<qe.length;Ge++){var Ee=qe[Ge],Xe=Ee._rangeInitial0===void 0&&Ee._rangeInitial1===void 0,rr=Xe||Ee.range[0]!==Ee._rangeInitial0||Ee.range[1]!==Ee._rangeInitial1,Je=Ee.autorange;(Xe&&Je!==!0||Jt&&rr)&&(Ee._rangeInitial0=Je==="min"||Je==="max reversed"?void 0:Ee.range[0],Ee._rangeInitial1=Je==="max"||Je==="min reversed"?void 0:Ee.range[1],Ee._autorangeInitial=Je,tr=!0)}return tr},Q.saveShowSpikeInitial=function(Yt,Jt){for(var qe=Q.list(Yt,"",!0),tr=!1,Ge="on",Ee=0;Ee<qe.length;Ee++){var Xe=qe[Ee],rr=Xe._showSpikeInitial===void 0,Je=rr||Xe.showspikes!==Xe._showspikes;(rr||Jt&&Je)&&(Xe._showSpikeInitial=Xe.showspikes,tr=!0),Ge==="on"&&!Xe.showspikes&&(Ge="off")}return Yt._fullLayout._cartesianSpikesEnabled=Ge,tr},Q.autoBin=function(Yt,Jt,qe,tr,Ge,Ee){var Xe=A.aggNums(Math.min,null,Yt),rr=A.aggNums(Math.max,null,Yt);if(Jt.type==="category"||Jt.type==="multicategory")return{start:Xe-.5,end:rr+.5,size:Math.max(1,Math.round(Ee)||1),_dataSpan:rr-Xe};Ge||(Ge=Jt.calendar);var Je;if(Jt.type==="log"?Je={type:"linear",range:[Xe,rr]}:Je={type:Jt.type,range:A.simpleMap([Xe,rr],Jt.c2r,0,Ge),calendar:Ge},Q.setConvert(Je),Ee=Ee&&l.dtick(Ee,Je.type),Ee)Je.dtick=Ee,Je.tick0=l.tick0(void 0,Je.type,Ge);else{var He;if(qe)He=(rr-Xe)/qe;else{var yr=A.distinctVals(Yt),Ir=Math.pow(10,Math.floor(Math.log(yr.minDiff)/Math.LN10)),Tr=Ir*A.roundUp(yr.minDiff/Ir,[.9,1.9,4.9,9.9],!0);He=Math.max(Tr,2*A.stdev(Yt)/Math.pow(Yt.length,tr?.25:.4)),P(He)||(He=1)}Q.autoTicks(Je,He)}var vn=Je.dtick,Or=Q.tickIncrement(Q.tickFirst(Je),vn,"reverse",Ge),En,nn;if(typeof vn=="number")Or=gt(Or,Yt,Je,Xe,rr),nn=1+Math.floor((rr-Or)/vn),En=Or+nn*vn;else for(Je.dtick.charAt(0)==="M"&&(Or=Mt(Or,Yt,vn,Xe,Ge)),En=Or,nn=0;En<=rr;)En=Q.tickIncrement(En,vn,!1,Ge),nn++;return{start:Jt.c2r(Or,0,Ge),end:Jt.c2r(En,0,Ge),size:vn,_dataSpan:rr-Xe}};function gt(Yt,Jt,qe,tr,Ge){var Ee=0,Xe=0,rr=0,Je=0;function He(vn){return(1+(vn-Yt)*100/qe.dtick)%100<2}for(var yr=0;yr<Jt.length;yr++)Jt[yr]%1===0?rr++:P(Jt[yr])||Je++,He(Jt[yr])&&Ee++,He(Jt[yr]+qe.dtick/2)&&Xe++;var Ir=Jt.length-Je;if(rr===Ir&&qe.type!=="date")qe.dtick<1?Yt=tr-.5*qe.dtick:(Yt-=.5,Yt+qe.dtick<tr&&(Yt+=qe.dtick));else if(Xe<Ir*.1&&(Ee>Ir*.3||He(tr)||He(Ge))){var Tr=qe.dtick/2;Yt+=Yt+Tr<tr?Tr:-Tr}return Yt}function Mt(Yt,Jt,qe,tr,Ge){var Ee=A.findExactDates(Jt,Ge),Xe=.8;if(Ee.exactDays>Xe){var rr=Number(qe.substr(1));Ee.exactYears>Xe&&rr%12===0?Yt=Q.tickIncrement(Yt,"M6","reverse")+y*1.5:Ee.exactMonths>Xe?Yt=Q.tickIncrement(Yt,"M1","reverse")+y*15.5:Yt-=S;var Je=Q.tickIncrement(Yt,qe);if(Je<=tr)return Je}return Yt}Q.prepMinorTicks=function(Yt,Jt,qe){if(!Jt.minor.dtick){delete Yt.dtick;var tr=Jt.dtick&&P(Jt._tmin),Ge;if(tr){var Ee=Q.tickIncrement(Jt._tmin,Jt.dtick,!0);Ge=[Jt._tmin,Ee*.99+Jt._tmin*.01]}else{var Xe=A.simpleMap(Jt.range,Jt.r2l);Ge=[Xe[0],.8*Xe[0]+.2*Xe[1]]}if(Yt.range=A.simpleMap(Ge,Jt.l2r),Yt._isMinor=!0,Q.prepTicks(Yt,qe),tr){var rr=P(Jt.dtick),Je=P(Yt.dtick),He=rr?Jt.dtick:+Jt.dtick.substring(1),yr=Je?Yt.dtick:+Yt.dtick.substring(1);rr&&Je?Lt(He,yr)?He===2*C&&yr===2*y&&(Yt.dtick=C):He===2*C&&yr===3*y?Yt.dtick=C:He===C&&!(Jt._input.minor||{}).nticks?Yt.dtick=y:zt(He/yr,2.5)?Yt.dtick=He/2:Yt.dtick=He:String(Jt.dtick).charAt(0)==="M"?Je?Yt.dtick="M1":Lt(He,yr)?He>=12&&yr===2&&(Yt.dtick="M3"):Yt.dtick=Jt.dtick:String(Yt.dtick).charAt(0)==="L"?String(Jt.dtick).charAt(0)==="L"?Lt(He,yr)||(Yt.dtick=zt(He/yr,2.5)?Jt.dtick/2:Jt.dtick):Yt.dtick="D1":Yt.dtick==="D2"&&+Jt.dtick>1&&(Yt.dtick=1)}Yt.range=Jt.range}Jt.minor._tick0Init===void 0&&(Yt.tick0=Jt.tick0)};function Lt(Yt,Jt){return Math.abs((Yt/Jt+.5)%1-.5)<.001}function zt(Yt,Jt){return Math.abs(Yt/Jt-1)<.001}Q.prepTicks=function(Yt,Jt){var qe=A.simpleMap(Yt.range,Yt.r2l,void 0,void 0,Jt);if(Yt.tickmode==="auto"||!Yt.dtick){var tr=Yt.nticks,Ge;tr||(Yt.type==="category"||Yt.type==="multicategory"?(Ge=Yt.tickfont?A.bigFont(Yt.tickfont.size||12):15,tr=Yt._length/Ge):(Ge=Yt._id.charAt(0)==="y"?40:80,tr=A.constrain(Yt._length/Ge,4,9)+1),Yt._name==="radialaxis"&&(tr*=2)),Yt.minor&&Yt.minor.tickmode!=="array"||Yt.tickmode==="array"&&(tr*=100),Yt._roughDTick=Math.abs(qe[1]-qe[0])/tr,Q.autoTicks(Yt,Yt._roughDTick),Yt._minDtick>0&&Yt.dtick<Yt._minDtick*2&&(Yt.dtick=Yt._minDtick,Yt.tick0=Yt.l2r(Yt._forceTick0))}Yt.ticklabelmode==="period"&&Ct(Yt),Yt.tick0||(Yt.tick0=Yt.type==="date"?"2000-01-01":0),Yt.type==="date"&&Yt.dtick<.1&&(Yt.dtick=.1),Te(Yt)};function xt(Yt){return+Yt.substring(1)}function Ct(Yt){var Jt;function qe(){return!(P(Yt.dtick)||Yt.dtick.charAt(0)!=="M")}var tr=qe(),Ge=Q.getTickFormat(Yt);if(Ge){var Ee=Yt._dtickInit!==Yt.dtick;/%[fLQsSMX]/.test(Ge)||(/%[HI]/.test(Ge)?(Jt=M,Ee&&!tr&&Yt.dtick<M&&(Yt.dtick=M)):/%p/.test(Ge)?(Jt=S,Ee&&!tr&&Yt.dtick<S&&(Yt.dtick=S)):/%[Aadejuwx]/.test(Ge)?(Jt=y,Ee&&!tr&&Yt.dtick<y&&(Yt.dtick=y)):/%[UVW]/.test(Ge)?(Jt=C,Ee&&!tr&&Yt.dtick<C&&(Yt.dtick=C)):/%[Bbm]/.test(Ge)?(Jt=x,Ee&&(tr?xt(Yt.dtick)<1:Yt.dtick<w)&&(Yt.dtick="M1")):/%[q]/.test(Ge)?(Jt=c,Ee&&(tr?xt(Yt.dtick)<3:Yt.dtick<i)&&(Yt.dtick="M3")):/%[Yy]/.test(Ge)&&(Jt=g,Ee&&(tr?xt(Yt.dtick)<12:Yt.dtick<h)&&(Yt.dtick="M12")))}tr=qe(),tr&&Yt.tick0===Yt._dowTick0&&(Yt.tick0=Yt._rawTick0),Yt._definedDelta=Jt}function wt(Yt,Jt,qe){for(var tr=0;tr<Yt.length;tr++){var Ge=Yt[tr].value,Ee=tr,Xe=tr+1;tr<Yt.length-1?(Ee=tr,Xe=tr+1):tr>0?(Ee=tr-1,Xe=tr):(Ee=tr,Xe=tr);var rr=Yt[Ee].value,Je=Yt[Xe].value,He=Math.abs(Je-rr),yr=qe||He,Ir=0;yr>=h?He>=h&&He<=u?Ir=He:Ir=g:qe===c&&yr>=i?He>=i&&He<=T?Ir=He:Ir=c:yr>=w?He>=w&&He<=d?Ir=He:Ir=x:qe===C&&yr>=C?Ir=C:yr>=y?Ir=y:qe===S&&yr>=S?Ir=S:qe===M&&yr>=M&&(Ir=M);var Tr;Ir>=He&&(Ir=He,Tr=!0);var vn=Ge+Ir;if(Jt.rangebreaks&&Ir>0){for(var Or=84,En=0,nn=0;nn<Or;nn++){var gr=(nn+.5)/Or;Jt.maskBreaks(Ge*(1-gr)+gr*vn)!==O&&En++}Ir*=En/Or,Ir||(Yt[tr].drop=!0),Tr&&He>C&&(Ir=He)}(Ir>0||tr===0)&&(Yt[tr].periodX=Ge+Ir/2)}}Q.calcTicks=function(Jt,qe){for(var tr=Jt.type,Ge=Jt.calendar,Ee=Jt.ticklabelstep,Xe=Jt.ticklabelmode==="period",rr=Jt.range[0]>Jt.range[1],Je=!Jt.ticklabelindex||A.isArrayOrTypedArray(Jt.ticklabelindex)?Jt.ticklabelindex:[Jt.ticklabelindex],He=A.simpleMap(Jt.range,Jt.r2l,void 0,void 0,qe),yr=He[1]<He[0],Ir=Math.min(He[0],He[1]),Tr=Math.max(He[0],He[1]),vn=Math.max(1e3,Jt._length||0),Or=[],En=[],nn=[],gr=[],Pr=[],Xr=Jt.minor&&(Jt.minor.ticks||Jt.minor.showgrid),kr=1;kr>=(Xr?0:1);kr--){var pn=!kr;kr?(Jt._dtickInit=Jt.dtick,Jt._tick0Init=Jt.tick0):(Jt.minor._dtickInit=Jt.minor.dtick,Jt.minor._tick0Init=Jt.minor.tick0);var en=kr?Jt:A.extendFlat({},Jt,Jt.minor);if(pn?Q.prepMinorTicks(en,Jt,qe):Q.prepTicks(en,qe),en.tickmode==="array"){kr?(nn=[],Or=Bt(Jt,!pn)):(gr=[],En=Bt(Jt,!pn));continue}if(en.tickmode==="sync"){nn=[],Or=Tt(Jt);continue}var Tn=tt(He),Ln=Tn[0],Yn=Tn[1],ma=P(en.dtick),wa=tr==="log"&&!(ma||en.dtick.charAt(0)==="L"),la=Q.tickFirst(en,qe);if(kr){if(Jt._tmin=la,la<Ln!==yr)break;(tr==="category"||tr==="multicategory")&&(Yn=yr?Math.max(-.5,Yn):Math.min(Jt._categories.length-.5,Yn))}var ia=null,Rn=la,Cr;if(kr){var an;ma?an=Jt.dtick:tr==="date"?typeof Jt.dtick=="string"&&Jt.dtick.charAt(0)==="M"&&(an=x*Jt.dtick.substring(1)):an=Jt._roughDTick,Cr=Math.round((Jt.r2l(Rn)-Jt.r2l(Jt.tick0))/an)-1}var on=en.dtick;for(en.rangebreaks&&en._tick0Init!==en.tick0&&(Rn=hr(Rn,Jt),yr||(Rn=Q.tickIncrement(Rn,on,!yr,Ge))),kr&&Xe&&(Rn=Q.tickIncrement(Rn,on,!yr,Ge),Cr--);yr?Rn>=Yn:Rn<=Yn;Rn=Q.tickIncrement(Rn,on,yr,Ge)){if(kr&&Cr++,en.rangebreaks&&!yr){if(Rn<Ln)continue;if(en.maskBreaks(Rn)===O&&hr(Rn,en)>=Tr)break}if(nn.length>vn||Rn===ia)break;ia=Rn;var ln={value:Rn};kr?(wa&&Rn!==(Rn|0)&&(ln.simpleLabel=!0),Ee>1&&Cr%Ee&&(ln.skipLabel=!0),nn.push(ln)):(ln.minor=!0,gr.push(ln))}}if(!gr||gr.length<2)Je=!1;else{var Nn=(gr[1].value-gr[0].value)*(rr?-1:1);xr(Nn,Jt.tickformat)||(Je=!1)}if(!Je)Pr=nn;else{var gn=nn.concat(gr);Xe&&nn.length&&(gn=gn.slice(1)),gn=gn.sort(function(Vn,zn){return Vn.value-zn.value}).filter(function(Vn,zn,Zn){return zn===0||Vn.value!==Zn[zn-1].value});var Cn=gn.map(function(Vn,zn){return Vn.minor===void 0&&!Vn.skipLabel?zn:null}).filter(function(Vn){return Vn!==null});Cn.forEach(function(Vn){Je.map(function(zn){var Zn=Vn+zn;Zn>=0&&Zn<gn.length&&A.pushUnique(Pr,gn[Zn])})})}if(Xr){var Un=Jt.minor.ticks==="inside"&&Jt.ticks==="outside"||Jt.minor.ticks==="outside"&&Jt.ticks==="inside";if(!Un){for(var ta=nn.map(function(Vn){return Vn.value}),pa=[],ka=0;ka<gr.length;ka++){var Ar=gr[ka],Br=Ar.value;if(ta.indexOf(Br)===-1){for(var Mr=!1,Nr=0;!Mr&&Nr<nn.length;Nr++)1e7+nn[Nr].value===1e7+Br&&(Mr=!0);Mr||pa.push(Ar)}}gr=pa}}Xe&&wt(Pr,Jt,Jt._definedDelta);var un;if(Jt.rangebreaks){var Dn=Jt._id.charAt(0)==="y",mn=1;Jt.tickmode==="auto"&&(mn=Jt.tickfont?Jt.tickfont.size:12);var cn=NaN;for(un=nn.length-1;un>-1;un--){if(nn[un].drop){nn.splice(un,1);continue}nn[un].value=hr(nn[un].value,Jt);var Er=Jt.c2p(nn[un].value);(Dn?cn>Er-mn:cn<Er+mn)?nn.splice(yr?un+1:un,1):cn=Er}}Ke(Jt)&&Math.abs(He[1]-He[0])===360&&nn.pop(),Jt._tmax=(nn[nn.length-1]||{}).value,Jt._prevDateHead="",Jt._inCalcTicks=!0;var Yr,Gr=function(Vn){Vn.text="",Jt._prevDateHead=Yr};nn=nn.concat(gr);function $r(Vn,zn){var Zn=Q.tickText(Vn,zn.value,!1,zn.simpleLabel),Jn=zn.periodX;return Jn!==void 0&&(Zn.periodX=Jn,(Jn>Tr||Jn<Ir)&&(Jn>Tr&&(Zn.periodX=Tr),Jn<Ir&&(Zn.periodX=Ir),Gr(Zn))),Zn}var wn;for(un=0;un<nn.length;un++){var An=nn[un].minor,On=nn[un].value;An?(Je&&Pr.indexOf(nn[un])!==-1?wn=$r(Jt,nn[un]):wn={x:On},wn.minor=!0,En.push(wn)):(Yr=Jt._prevDateHead,wn=$r(Jt,nn[un]),(nn[un].skipLabel||Je&&Pr.indexOf(nn[un])===-1)&&Gr(wn),Or.push(wn))}return Or=Or.concat(En),Jt._inCalcTicks=!1,Xe&&Or.length&&(Or[0].noTick=!0),Or};function Rt(Yt,Jt){return Yt.rangebreaks&&(Jt=Jt.filter(function(qe){return Yt.maskBreaks(qe.x)!==O})),Jt}function Tt(Yt){var Jt=Yt._mainAxis,qe=[];if(Jt._vals){for(var tr=0;tr<Jt._vals.length;tr++)if(!Jt._vals[tr].noTick){var Ge=Jt.l2p(Jt._vals[tr].x),Ee=Yt.p2l(Ge),Xe=Q.tickText(Yt,Ee);Jt._vals[tr].minor&&(Xe.minor=!0,Xe.text=""),qe.push(Xe)}}return qe=Rt(Yt,qe),qe}function Bt(Yt,Jt){var qe=A.simpleMap(Yt.range,Yt.r2l),tr=tt(qe),Ge=Math.min(tr[0],tr[1]),Ee=Math.max(tr[0],tr[1]),Xe=Yt.type==="category"?Yt.d2l_noadd:Yt.d2l;Yt.type==="log"&&String(Yt.dtick).charAt(0)!=="L"&&(Yt.dtick="L"+Math.pow(10,Math.floor(Math.min(Yt.range[0],Yt.range[1]))-1));for(var rr=[],Je=0;Je<=1;Je++)if(!(Jt!==void 0&&(Jt&&Je||Jt===!1&&!Je))&&!(Je&&!Yt.minor)){var He=Je?Yt.minor.tickvals:Yt.tickvals,yr=Je?[]:Yt.ticktext;if(He){A.isArrayOrTypedArray(yr)||(yr=[]);for(var Ir=0;Ir<He.length;Ir++){var Tr=Xe(He[Ir]);if(Tr>Ge&&Tr<Ee){var vn=Q.tickText(Yt,Tr,!1,String(yr[Ir]));Je&&(vn.minor=!0,vn.text=""),rr.push(vn)}}}}return rr=Rt(Yt,rr),rr}var Gt=[2,5,10],te=[1,2,3,6,12],Wt=[1,2,5,10,15,30],jt=[1,2,3,7,14],ie=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ue=[-.301,0,.301,.699,1],fe=[15,30,45,90,180];function pe(Yt,Jt,qe){return Jt*A.roundUp(Yt/Jt,qe)}Q.autoTicks=function(Yt,Jt,qe){var tr;function Ge(Ir){return Math.pow(Ir,Math.floor(Math.log(Jt)/Math.LN10))}if(Yt.type==="date"){Yt.tick0=A.dateTick0(Yt.calendar,0);var Ee=2*Jt;if(Ee>g)Jt/=g,tr=Ge(10),Yt.dtick="M"+12*pe(Jt,tr,Gt);else if(Ee>x)Jt/=x,Yt.dtick="M"+pe(Jt,1,te);else if(Ee>y){if(Yt.dtick=pe(Jt,y,Yt._hasDayOfWeekBreaks?[1,2,7,14]:jt),!qe){var Xe=Q.getTickFormat(Yt),rr=Yt.ticklabelmode==="period";rr&&(Yt._rawTick0=Yt.tick0),/%[uVW]/.test(Xe)?Yt.tick0=A.dateTick0(Yt.calendar,2):Yt.tick0=A.dateTick0(Yt.calendar,1),rr&&(Yt._dowTick0=Yt.tick0)}}else Ee>M?Yt.dtick=pe(Jt,M,te):Ee>a?Yt.dtick=pe(Jt,a,Wt):Ee>E?Yt.dtick=pe(Jt,E,Wt):(tr=Ge(10),Yt.dtick=pe(Jt,tr,Gt))}else if(Yt.type==="log"){Yt.tick0=0;var Je=A.simpleMap(Yt.range,Yt.r2l);if(Yt._isMinor&&(Jt*=1.5),Jt>.7)Yt.dtick=Math.ceil(Jt);else if(Math.abs(Je[1]-Je[0])<1){var He=1.5*Math.abs((Je[1]-Je[0])/Jt);Jt=Math.abs(Math.pow(10,Je[1])-Math.pow(10,Je[0]))/He,tr=Ge(10),Yt.dtick="L"+pe(Jt,tr,Gt)}else Yt.dtick=Jt>.3?"D2":"D1"}else Yt.type==="category"||Yt.type==="multicategory"?(Yt.tick0=0,Yt.dtick=Math.ceil(Math.max(Jt,1))):Ke(Yt)?(Yt.tick0=0,tr=1,Yt.dtick=pe(Jt,tr,fe)):(Yt.tick0=0,tr=Ge(10),Yt.dtick=pe(Jt,tr,Gt));if(Yt.dtick===0&&(Yt.dtick=1),!P(Yt.dtick)&&typeof Yt.dtick!="string"){var yr=Yt.dtick;throw Yt.dtick=1,"ax.dtick error: "+String(yr)}};function Te(Yt){var Jt=Yt.dtick;if(Yt._tickexponent=0,!P(Jt)&&typeof Jt!="string"&&(Jt=1),(Yt.type==="category"||Yt.type==="multicategory")&&(Yt._tickround=null),Yt.type==="date"){var qe=Yt.r2l(Yt.tick0),tr=Yt.l2r(qe).replace(/(^-|i)/g,""),Ge=tr.length;if(String(Jt).charAt(0)==="M")Ge>10||tr.substr(5)!=="01-01"?Yt._tickround="d":Yt._tickround=+Jt.substr(1)%12===0?"y":"m";else if(Jt>=y&&Ge<=10||Jt>=y*15)Yt._tickround="d";else if(Jt>=a&&Ge<=16||Jt>=M)Yt._tickround="M";else if(Jt>=E&&Ge<=19||Jt>=a)Yt._tickround="S";else{var Ee=Yt.l2r(qe+Jt).replace(/^-/,"").length;Yt._tickround=Math.max(Ge,Ee)-20,Yt._tickround<0&&(Yt._tickround=4)}}else if(P(Jt)||Jt.charAt(0)==="L"){var Xe=Yt.range.map(Yt.r2d||Number);P(Jt)||(Jt=Number(Jt.substr(1))),Yt._tickround=2-Math.floor(Math.log(Jt)/Math.LN10+.01);var rr=Math.max(Math.abs(Xe[0]),Math.abs(Xe[1])),Je=Math.floor(Math.log(rr)/Math.LN10+.01),He=Yt.minexponent===void 0?3:Yt.minexponent;Math.abs(Je)>He&&(ft(Yt.exponentformat)&&!pt(Je)?Yt._tickexponent=3*Math.round((Je-1)/3):Yt._tickexponent=Je)}else Yt._tickround=null}Q.tickIncrement=function(Yt,Jt,qe,tr){var Ge=qe?-1:1;if(P(Jt))return A.increment(Yt,Ge*Jt);var Ee=Jt.charAt(0),Xe=Ge*Number(Jt.substr(1));if(Ee==="M")return A.incrementMonth(Yt,Xe,tr);if(Ee==="L")return Math.log(Math.pow(10,Yt)+Xe)/Math.LN10;if(Ee==="D"){var rr=Jt==="D2"?ue:ie,Je=Yt+Ge*.01,He=A.roundUp(A.mod(Je,1),rr,qe);return Math.floor(Je)+Math.log(b.round(Math.pow(10,He),1))/Math.LN10}throw"unrecognized dtick "+String(Jt)},Q.tickFirst=function(Yt,Jt){var qe=Yt.r2l||Number,tr=A.simpleMap(Yt.range,qe,void 0,void 0,Jt),Ge=tr[1]<tr[0],Ee=Ge?Math.floor:Math.ceil,Xe=tt(tr)[0],rr=Yt.dtick,Je=qe(Yt.tick0);if(P(rr)){var He=Ee((Xe-Je)/rr)*rr+Je;return(Yt.type==="category"||Yt.type==="multicategory")&&(He=A.constrain(He,0,Yt._categories.length-1)),He}var yr=rr.charAt(0),Ir=Number(rr.substr(1));if(yr==="M"){for(var Tr=0,vn=Je,Or,En,nn;Tr<10;){if(Or=Q.tickIncrement(vn,rr,Ge,Yt.calendar),(Or-Xe)*(vn-Xe)<=0)return Ge?Math.min(vn,Or):Math.max(vn,Or);En=(Xe-(vn+Or)/2)/(Or-vn),nn=yr+(Math.abs(Math.round(En))||1)*Ir,vn=Q.tickIncrement(vn,nn,En<0?!Ge:Ge,Yt.calendar),Tr++}return A.error("tickFirst did not converge",Yt),vn}else{if(yr==="L")return Math.log(Ee((Math.pow(10,Xe)-Je)/Ir)*Ir+Je)/Math.LN10;if(yr==="D"){var gr=rr==="D2"?ue:ie,Pr=A.roundUp(A.mod(Xe,1),gr,Ge);return Math.floor(Xe)+Math.log(b.round(Math.pow(10,Pr),1))/Math.LN10}else throw"unrecognized dtick "+String(rr)}},Q.tickText=function(Yt,Jt,qe,tr){var Ge=Qt(Yt,Jt),Ee=Yt.tickmode==="array",Xe=qe||Ee,rr=Yt.type,Je=rr==="category"?Yt.d2l_noadd:Yt.d2l,He,yr=function(nn){var gr=Yt.l2p(nn);return gr>=0&&gr<=Yt._length?nn:null};if(Ee&&A.isArrayOrTypedArray(Yt.ticktext)){var Ir=A.simpleMap(Yt.range,Yt.r2l),Tr=(Math.abs(Ir[1]-Ir[0])-(Yt._lBreaks||0))/1e4;for(He=0;He<Yt.ticktext.length&&!(Math.abs(Jt-Je(Yt.tickvals[He]))<Tr);He++);if(He<Yt.ticktext.length)return Ge.text=String(Yt.ticktext[He]),Ge.xbnd=[yr(Ge.x-.5),yr(Ge.x+Yt.dtick-.5)],Ge}function vn(nn){if(nn===void 0)return!0;if(qe)return nn==="none";var gr={first:Yt._tmin,last:Yt._tmax}[nn];return nn!=="all"&&Jt!==gr}var Or=qe?"never":Yt.exponentformat!=="none"&&vn(Yt.showexponent)?"hide":"";if(rr==="date"?Pt(Yt,Ge,qe,Xe):rr==="log"?Ot(Yt,Ge,qe,Xe,Or):rr==="category"?Nt(Yt,Ge):rr==="multicategory"?Ht(Yt,Ge,qe):Ke(Yt)?kt(Yt,Ge,qe,Xe,Or):St(Yt,Ge,qe,Xe,Or),tr||(Yt.tickprefix&&!vn(Yt.showtickprefix)&&(Ge.text=Yt.tickprefix+Ge.text),Yt.ticksuffix&&!vn(Yt.showticksuffix)&&(Ge.text+=Yt.ticksuffix)),Yt.labelalias&&Yt.labelalias.hasOwnProperty(Ge.text)){var En=Yt.labelalias[Ge.text];typeof En=="string"&&(Ge.text=En)}return(Yt.tickson==="boundaries"||Yt.showdividers)&&(Ge.xbnd=[yr(Ge.x-.5),yr(Ge.x+Yt.dtick-.5)]),Ge},Q.hoverLabelText=function(Yt,Jt,qe){qe&&(Yt=A.extendFlat({},Yt,{hoverformat:qe}));var tr=A.isArrayOrTypedArray(Jt)?Jt[0]:Jt,Ge=A.isArrayOrTypedArray(Jt)?Jt[1]:void 0;if(Ge!==void 0&&Ge!==tr)return Q.hoverLabelText(Yt,tr,qe)+" - "+Q.hoverLabelText(Yt,Ge,qe);var Ee=Yt.type==="log"&&tr<=0,Xe=Q.tickText(Yt,Yt.c2l(Ee?-tr:tr),"hover").text;return Ee?tr===0?"0":I+Xe:Xe};function Qt(Yt,Jt,qe){var tr=Yt.tickfont||{};return{x:Jt,dx:0,dy:0,text:qe||"",fontSize:tr.size,font:tr.family,fontWeight:tr.weight,fontStyle:tr.style,fontVariant:tr.variant,fontTextcase:tr.textcase,fontLineposition:tr.lineposition,fontShadow:tr.shadow,fontColor:tr.color}}function Pt(Yt,Jt,qe,tr){var Ge=Yt._tickround,Ee=qe&&Yt.hoverformat||Q.getTickFormat(Yt);tr=!Ee&&tr,tr&&(P(Ge)?Ge=4:Ge={y:"m",m:"d",d:"M",M:"S",S:4}[Ge]);var Xe=A.formatDate(Jt.x,Ee,Ge,Yt._dateFormat,Yt.calendar,Yt._extraFormat),rr,Je=Xe.indexOf(`
`);if(Je!==-1&&(rr=Xe.substr(Je+1),Xe=Xe.substr(0,Je)),tr&&(rr!==void 0&&(Xe==="00:00:00"||Xe==="00:00")?(Xe=rr,rr=""):Xe.length===8&&(Xe=Xe.replace(/:00$/,""))),rr)if(qe)Ge==="d"?Xe+=", "+rr:Xe=rr+(Xe?", "+Xe:"");else if(!Yt._inCalcTicks||Yt._prevDateHead!==rr)Yt._prevDateHead=rr,Xe+="<br>"+rr;else{var He=cr(Yt),yr=Yt._trueSide||Yt.side;(!He&&yr==="top"||He&&yr==="bottom")&&(Xe+="<br> ")}Jt.text=Xe}function Ot(Yt,Jt,qe,tr,Ge){var Ee=Yt.dtick,Xe=Jt.x,rr=Yt.tickformat,Je=typeof Ee=="string"&&Ee.charAt(0);if(Ge==="never"&&(Ge=""),tr&&Je!=="L"&&(Ee="L3",Je="L"),rr||Je==="L")Jt.text=Dt(Math.pow(10,Xe),Yt,Ge,tr);else if(P(Ee)||Je==="D"&&A.mod(Xe+.01,1)<.1){var He=Math.round(Xe),yr=Math.abs(He),Ir=Yt.exponentformat;Ir==="power"||ft(Ir)&&pt(He)?(He===0?Jt.text=1:He===1?Jt.text="10":Jt.text="10<sup>"+(He>1?"":I)+yr+"</sup>",Jt.fontSize*=1.25):(Ir==="e"||Ir==="E")&&yr>2?Jt.text="1"+Ir+(He>0?"+":I)+yr:(Jt.text=Dt(Math.pow(10,Xe),Yt,"","fakehover"),Ee==="D1"&&Yt._id.charAt(0)==="y"&&(Jt.dy-=Jt.fontSize/6))}else if(Je==="D")Jt.text=String(Math.round(Math.pow(10,A.mod(Xe,1)))),Jt.fontSize*=.75;else throw"unrecognized dtick "+String(Ee);if(Yt.dtick==="D1"){var Tr=String(Jt.text).charAt(0);(Tr==="0"||Tr==="1")&&(Yt._id.charAt(0)==="y"?Jt.dx-=Jt.fontSize/4:(Jt.dy+=Jt.fontSize/2,Jt.dx+=(Yt.range[1]>Yt.range[0]?1:-1)*Jt.fontSize*(Xe<0?.5:.25)))}}function Nt(Yt,Jt){var qe=Yt._categories[Math.round(Jt.x)];qe===void 0&&(qe=""),Jt.text=String(qe)}function Ht(Yt,Jt,qe){var tr=Math.round(Jt.x),Ge=Yt._categories[tr]||[],Ee=Ge[1]===void 0?"":String(Ge[1]),Xe=Ge[0]===void 0?"":String(Ge[0]);qe?Jt.text=Xe+" - "+Ee:(Jt.text=Ee,Jt.text2=Xe)}function St(Yt,Jt,qe,tr,Ge){Ge==="never"?Ge="":Yt.showexponent==="all"&&Math.abs(Jt.x/Yt.dtick)<1e-6&&(Ge="hide"),Jt.text=Dt(Jt.x,Yt,Ge,tr)}function kt(Yt,Jt,qe,tr,Ge){if(Yt.thetaunit==="radians"&&!qe){var Ee=Jt.x/180;if(Ee===0)Jt.text="0";else{var Xe=Ft(Ee);if(Xe[1]>=100)Jt.text=Dt(A.deg2rad(Jt.x),Yt,Ge,tr);else{var rr=Jt.x<0;Xe[1]===1?Xe[0]===1?Jt.text="π":Jt.text=Xe[0]+"π":Jt.text=["<sup>",Xe[0],"</sup>","⁄","<sub>",Xe[1],"</sub>","π"].join(""),rr&&(Jt.text=I+Jt.text)}}}else Jt.text=Dt(Jt.x,Yt,Ge,tr)}function Ft(Yt){function Jt(rr,Je){return Math.abs(rr-Je)<=1e-6}function qe(rr,Je){return Jt(Je,0)?rr:qe(Je,rr%Je)}function tr(rr){for(var Je=1;!Jt(Math.round(rr*Je)/Je,rr);)Je*=10;return Je}var Ge=tr(Yt),Ee=Yt*Ge,Xe=Math.abs(qe(Ee,Ge));return[Math.round(Ee/Xe),Math.round(Ge/Xe)]}var At=["f","p","n","μ","m","","k","M","G","T"];function ft(Yt){return Yt==="SI"||Yt==="B"}function pt(Yt){return Yt>14||Yt<-15}function Dt(Yt,Jt,qe,tr){var Ge=Yt<0,Ee=Jt._tickround,Xe=qe||Jt.exponentformat||"B",rr=Jt._tickexponent,Je=Q.getTickFormat(Jt),He=Jt.separatethousands;if(tr){var yr={exponentformat:Xe,minexponent:Jt.minexponent,dtick:Jt.showexponent==="none"?Jt.dtick:P(Yt)&&Math.abs(Yt)||1,range:Jt.showexponent==="none"?Jt.range.map(Jt.r2d):[0,Yt||1]};Te(yr),Ee=(Number(yr._tickround)||0)+4,rr=yr._tickexponent,Jt.hoverformat&&(Je=Jt.hoverformat)}if(Je)return Jt._numFormat(Je)(Yt).replace(/-/g,I);var Ir=Math.pow(10,-Ee)/2;if(Xe==="none"&&(rr=0),Yt=Math.abs(Yt),Yt<Ir)Yt="0",Ge=!1;else{if(Yt+=Ir,rr&&(Yt*=Math.pow(10,-rr),Ee+=rr),Ee===0)Yt=String(Math.floor(Yt));else if(Ee<0){Yt=String(Math.round(Yt)),Yt=Yt.substr(0,Yt.length+Ee);for(var Tr=Ee;Tr<0;Tr++)Yt+="0"}else{Yt=String(Yt);var vn=Yt.indexOf(".")+1;vn&&(Yt=Yt.substr(0,vn+Ee).replace(/\.?0+$/,""))}Yt=A.numSeparate(Yt,Jt._separators,He)}if(rr&&Xe!=="hide"){ft(Xe)&&pt(rr)&&(Xe="power");var Or;rr<0?Or=I+-rr:Xe!=="power"?Or="+"+rr:Or=String(rr),Xe==="e"||Xe==="E"?Yt+=Xe+Or:Xe==="power"?Yt+="×10<sup>"+Or+"</sup>":Xe==="B"&&rr===9?Yt+="B":ft(Xe)&&(Yt+=At[rr/3+5])}return Ge?I+Yt:Yt}Q.getTickFormat=function(Yt){var Jt;function qe(Je){return typeof Je!="string"?Je:Number(Je.replace("M",""))*x}function tr(Je,He){var yr=["L","D"];if(typeof Je==typeof He){if(typeof Je=="number")return Je-He;var Ir=yr.indexOf(Je.charAt(0)),Tr=yr.indexOf(He.charAt(0));return Ir===Tr?Number(Je.replace(/(L|D)/g,""))-Number(He.replace(/(L|D)/g,"")):Ir-Tr}else return typeof Je=="number"?1:-1}function Ge(Je,He,yr){var Ir=yr||function(Or){return Or},Tr=He[0],vn=He[1];return(!Tr&&typeof Tr!="number"||Ir(Tr)<=Ir(Je))&&(!vn&&typeof vn!="number"||Ir(vn)>=Ir(Je))}function Ee(Je,He){var yr=He[0]===null,Ir=He[1]===null,Tr=tr(Je,He[0])>=0,vn=tr(Je,He[1])<=0;return(yr||Tr)&&(Ir||vn)}var Xe,rr;if(Yt.tickformatstops&&Yt.tickformatstops.length>0)switch(Yt.type){case"date":case"linear":{for(Jt=0;Jt<Yt.tickformatstops.length;Jt++)if(rr=Yt.tickformatstops[Jt],rr.enabled&&Ge(Yt.dtick,rr.dtickrange,qe)){Xe=rr;break}break}case"log":{for(Jt=0;Jt<Yt.tickformatstops.length;Jt++)if(rr=Yt.tickformatstops[Jt],rr.enabled&&Ee(Yt.dtick,rr.dtickrange)){Xe=rr;break}break}}return Xe?Xe.value:Yt.tickformat},Q.getSubplots=function(Yt,Jt){var qe=Yt._fullLayout._subplots,tr=qe.cartesian.concat(qe.gl2d||[]),Ge=Jt?Q.findSubplotsWithAxis(tr,Jt):tr;return Ge.sort(function(Ee,Xe){var rr=Ee.substr(1).split("y"),Je=Xe.substr(1).split("y");return rr[0]===Je[0]?+rr[1]-+Je[1]:+rr[0]-+Je[0]}),Ge},Q.findSubplotsWithAxis=function(Yt,Jt){for(var qe=new RegExp(Jt._id.charAt(0)==="x"?"^"+Jt._id+"y":Jt._id+"$"),tr=[],Ge=0;Ge<Yt.length;Ge++){var Ee=Yt[Ge];qe.test(Ee)&&tr.push(Ee)}return tr},Q.makeClipPaths=function(Yt){var Jt=Yt._fullLayout;if(!Jt._hasOnlyLargeSploms){var qe={_offset:0,_length:Jt.width,_id:""},tr={_offset:0,_length:Jt.height,_id:""},Ge=Q.list(Yt,"x",!0),Ee=Q.list(Yt,"y",!0),Xe=[],rr,Je;for(rr=0;rr<Ge.length;rr++)for(Xe.push({x:Ge[rr],y:tr}),Je=0;Je<Ee.length;Je++)rr===0&&Xe.push({x:qe,y:Ee[Je]}),Xe.push({x:Ge[rr],y:Ee[Je]});var He=Jt._clips.selectAll(".axesclip").data(Xe,function(yr){return yr.x._id+yr.y._id});He.enter().append("clipPath").classed("axesclip",!0).attr("id",function(yr){return"clip"+Jt._uid+yr.x._id+yr.y._id}).append("rect"),He.exit().remove(),He.each(function(yr){b.select(this).select("rect").attr({x:yr.x._offset||0,y:yr.y._offset||0,width:yr.x._length||1,height:yr.y._length||1})})}},Q.draw=function(Yt,Jt,qe){var tr=Yt._fullLayout;Jt==="redraw"&&tr._paper.selectAll("g.subplot").each(function(Je){var He=Je[0],yr=tr._plots[He];if(yr){var Ir=yr.xaxis,Tr=yr.yaxis;yr.xaxislayer.selectAll("."+Ir._id+"tick").remove(),yr.yaxislayer.selectAll("."+Tr._id+"tick").remove(),yr.xaxislayer.selectAll("."+Ir._id+"tick2").remove(),yr.yaxislayer.selectAll("."+Tr._id+"tick2").remove(),yr.xaxislayer.selectAll("."+Ir._id+"divider").remove(),yr.yaxislayer.selectAll("."+Tr._id+"divider").remove(),yr.minorGridlayer&&yr.minorGridlayer.selectAll("path").remove(),yr.gridlayer&&yr.gridlayer.selectAll("path").remove(),yr.zerolinelayer&&yr.zerolinelayer.selectAll("path").remove(),tr._infolayer.select(".g-"+Ir._id+"title").remove(),tr._infolayer.select(".g-"+Tr._id+"title").remove()}});var Ge=!Jt||Jt==="redraw"?Q.listIds(Yt):Jt,Ee=Q.list(Yt),Xe=Ee.filter(function(Je){return Je.autoshift}).map(function(Je){return Je.overlaying});Ge.map(function(Je){var He=Q.getFromId(Yt,Je);if(He.tickmode==="sync"&&He.overlaying){var yr=Ge.findIndex(function(Ir){return Ir===He.overlaying});yr>=0&&Ge.unshift(Ge.splice(yr,1).shift())}});var rr={false:{left:0,right:0}};return A.syncOrAsync(Ge.map(function(Je){return function(){if(Je){var He=Q.getFromId(Yt,Je);qe||(qe={}),qe.axShifts=rr,qe.overlayingShiftedAx=Xe;var yr=Q.drawOne(Yt,He,qe);return He._shiftPusher&&fr(He,He._fullDepth||0,rr,!0),He._r=He.range.slice(),He._rl=A.simpleMap(He._r,He.r2l),yr}}}))},Q.drawOne=function(Yt,Jt,qe){qe=qe||{};var tr=qe.axShifts||{},Ge=qe.overlayingShiftedAx||[],Ee,Xe,rr;Jt.setScale();var Je=Yt._fullLayout,He=Jt._id,yr=He.charAt(0),Ir=Q.counterLetter(He),Tr=Je._plots[Jt._mainSubplot];if(!Tr)return;if(Jt._shiftPusher=Jt.autoshift||Ge.indexOf(Jt._id)!==-1||Ge.indexOf(Jt.overlaying)!==-1,Jt._shiftPusher&Jt.anchor==="free"){var vn=Jt.linewidth/2||0;Jt.ticks==="inside"&&(vn+=Jt.ticklen),fr(Jt,vn,tr,!0),fr(Jt,Jt.shift||0,tr,!1)}(qe.skipTitle!==!0||Jt._shift===void 0)&&(Jt._shift=Lr(Jt,tr));var Or=Tr[yr+"axislayer"],En=Jt._mainLinePosition,nn=En+=Jt._shift,gr=Jt._mainMirrorPosition,Pr=Jt._vals=Q.calcTicks(Jt),Xr=[Jt.mirror,nn,gr].join("_");for(Ee=0;Ee<Pr.length;Ee++)Pr[Ee].axInfo=Xr;Jt._selections={},Jt._tickAngles&&(Jt._prevTickAngles=Jt._tickAngles),Jt._tickAngles={},Jt._depth=null;var kr={};function pn(An){var On=He+(An||"tick");return kr[On]||(kr[On]=We(Jt,On,nn)),kr[On]}if(Jt.visible){var en=Q.makeTransTickFn(Jt),Tn=Q.makeTransTickLabelFn(Jt),Ln,Yn,ma=Jt.ticks==="inside",wa=Jt.ticks==="outside";if(Jt.tickson==="boundaries"){var la=$t(Jt,Pr);Yn=Q.clipEnds(Jt,la),Ln=ma?Yn:la}else Yn=Q.clipEnds(Jt,Pr),Ln=ma&&Jt.ticklabelmode!=="period"?Yn:Pr;var ia=Jt._gridVals=Yn,Rn=Be(Jt,Pr);if(!Je._hasOnlyLargeSploms){var Cr=Jt._subplotsWith,an={};for(Ee=0;Ee<Cr.length;Ee++){Xe=Cr[Ee],rr=Je._plots[Xe];var on=rr[Ir+"axis"],ln=on._mainAxis._id;if(!an[ln]){an[ln]=1;var Nn=yr==="x"?"M0,"+on._offset+"v"+on._length:"M"+on._offset+",0h"+on._length;Q.drawGrid(Yt,Jt,{vals:ia,counterAxis:on,layer:rr.gridlayer.select("."+He),minorLayer:rr.minorGridlayer.select("."+He),path:Nn,transFn:en}),Q.drawZeroLine(Yt,Jt,{counterAxis:on,layer:rr.zerolinelayer,path:Nn,transFn:en})}}}var gn,Cn=Q.getTickSigns(Jt),Un=Q.getTickSigns(Jt,"minor");if(Jt.ticks||Jt.minor&&Jt.minor.ticks){var ta=Q.makeTickPath(Jt,nn,Cn[2]),pa=Q.makeTickPath(Jt,nn,Un[2],{minor:!0}),ka,Ar,Br,Mr;if(Jt._anchorAxis&&Jt.mirror&&Jt.mirror!==!0?(ka=Q.makeTickPath(Jt,gr,Cn[3]),Ar=Q.makeTickPath(Jt,gr,Un[3],{minor:!0}),Br=ta+ka,Mr=pa+Ar):(ka="",Ar="",Br=ta,Mr=pa),Jt.showdividers&&wa&&Jt.tickson==="boundaries"){var Nr={};for(Ee=0;Ee<Rn.length;Ee++)Nr[Rn[Ee].x]=1;gn=function(An){return Nr[An.x]?ka:Br}}else gn=function(An){return An.minor?Mr:Br}}if(Q.drawTicks(Yt,Jt,{vals:Ln,layer:Or,path:gn,transFn:en}),Jt.mirror==="allticks"){var un=Object.keys(Jt._linepositions||{});for(Ee=0;Ee<un.length;Ee++){Xe=un[Ee],rr=Je._plots[Xe];var Dn=Jt._linepositions[Xe]||[],mn=Dn[0],cn=Dn[1],Er=Dn[2],Yr=Q.makeTickPath(Jt,mn,Er?Cn[0]:Un[0],{minor:Er})+Q.makeTickPath(Jt,cn,Er?Cn[1]:Un[1],{minor:Er});Q.drawTicks(Yt,Jt,{vals:Ln,layer:rr[yr+"axislayer"],path:Yr,transFn:en})}}var Gr=[];if(Gr.push(function(){return Q.drawLabels(Yt,Jt,{vals:Pr,layer:Or,plotinfo:rr,transFn:Tn,labelFns:Q.makeLabelFns(Jt,nn)})}),Jt.type==="multicategory"){var $r={x:2,y:10}[yr];Gr.push(function(){var An={x:"height",y:"width"}[yr],On=pn()[An]+$r+(Jt._tickAngles[He+"tick"]?Jt.tickfont.size*ot:0);return Q.drawLabels(Yt,Jt,{vals:re(Jt,Pr),layer:Or,cls:He+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:en,labelFns:Q.makeLabelFns(Jt,nn+On*Cn[4])})}),Gr.push(function(){return Jt._depth=Cn[4]*(pn("tick2")[Jt.side]-nn),vr(Yt,Jt,{vals:Rn,layer:Or,path:Q.makeTickPath(Jt,nn,Cn[4],{len:Jt._depth}),transFn:en})})}else Jt.title.hasOwnProperty("standoff")&&Gr.push(function(){Jt._depth=Cn[4]*(pn()[Jt.side]-nn)});var wn=L.getComponentMethod("rangeslider","isVisible")(Jt);return!qe.skipTitle&&!(wn&&Jt.side==="bottom")&&Gr.push(function(){return Ye(Yt,Jt)}),Gr.push(function(){var An=Jt.side.charAt(0),On=nt[Jt.side].charAt(0),Vn=Q.getPxPosition(Yt,Jt),zn=wa?Jt.ticklen:0,Zn,Jn,ua,Ra;(Jt.automargin||wn||Jt._shiftPusher)&&(Jt.type==="multicategory"?Zn=pn("tick2"):(Zn=pn(),yr==="x"&&An==="b"&&(Jt._depth=Math.max(Zn.width>0?Zn.bottom-Vn:0,zn))));var mi=0,ri=0;if(Jt._shiftPusher&&(mi=Math.max(zn,Zn.height>0?An==="l"?Vn-Zn.left:Zn.right-Vn:0),Jt.title.text!==Je._dfltTitle[yr]&&(ri=(Jt._titleStandoff||0)+(Jt._titleScoot||0),An==="l"&&(ri+=he(Jt))),Jt._fullDepth=Math.max(mi,ri)),Jt.automargin){Jn={x:0,y:0,r:0,l:0,t:0,b:0};var ho=[0,1],So=typeof Jt._shift=="number"?Jt._shift:0;if(yr==="x"){if(An==="b"?Jn[An]=Jt._depth:(Jn[An]=Jt._depth=Math.max(Zn.width>0?Vn-Zn.top:0,zn),ho.reverse()),Zn.width>0){var ro=Zn.right-(Jt._offset+Jt._length);ro>0&&(Jn.xr=1,Jn.r=ro);var ys=Jt._offset-Zn.left;ys>0&&(Jn.xl=0,Jn.l=ys)}}else if(An==="l"?(Jt._depth=Math.max(Zn.height>0?Vn-Zn.left:0,zn),Jn[An]=Jt._depth-So):(Jt._depth=Math.max(Zn.height>0?Zn.right-Vn:0,zn),Jn[An]=Jt._depth+So,ho.reverse()),Zn.height>0){var il=Zn.bottom-(Jt._offset+Jt._length);il>0&&(Jn.yb=0,Jn.b=il);var zl=Jt._offset-Zn.top;zl>0&&(Jn.yt=1,Jn.t=zl)}Jn[Ir]=Jt.anchor==="free"?Jt.position:Jt._anchorAxis.domain[ho[0]],Jt.title.text!==Je._dfltTitle[yr]&&(Jn[An]+=he(Jt)+(Jt.title.standoff||0)),Jt.mirror&&Jt.anchor!=="free"&&(ua={x:0,y:0,r:0,l:0,t:0,b:0},ua[On]=Jt.linewidth,Jt.mirror&&Jt.mirror!==!0&&(ua[On]+=zn),Jt.mirror===!0||Jt.mirror==="ticks"?ua[Ir]=Jt._anchorAxis.domain[ho[1]]:(Jt.mirror==="all"||Jt.mirror==="allticks")&&(ua[Ir]=[Jt._counterDomainMin,Jt._counterDomainMax][ho[1]]))}wn&&(Ra=L.getComponentMethod("rangeslider","autoMarginOpts")(Yt,Jt)),typeof Jt.automargin=="string"&&(Ut(Jn,Jt.automargin),Ut(ua,Jt.automargin)),o.autoMargin(Yt,ne(Jt),Jn),o.autoMargin(Yt,ge(Jt),ua),o.autoMargin(Yt,Ae(Jt),Ra)}),A.syncOrAsync(Gr)}};function Ut(Yt,Jt){if(Yt){var qe=Object.keys(G).reduce(function(tr,Ge){return Jt.indexOf(Ge)!==-1&&G[Ge].forEach(function(Ee){tr[Ee]=1}),tr},{});Object.keys(Yt).forEach(function(tr){qe[tr]||(tr.length===1?Yt[tr]=0:delete Yt[tr])})}}function $t(Yt,Jt){var qe=[],tr,Ge=function(Ee,Xe){var rr=Ee.xbnd[Xe];rr!==null&&qe.push(A.extendFlat({},Ee,{x:rr}))};if(Jt.length){for(tr=0;tr<Jt.length;tr++)Ge(Jt[tr],0);Ge(Jt[tr-1],1)}return qe}function re(Yt,Jt){for(var qe=[],tr={},Ge=0;Ge<Jt.length;Ge++){var Ee=Jt[Ge];tr[Ee.text2]?tr[Ee.text2].push(Ee.x):tr[Ee.text2]=[Ee.x]}for(var Xe in tr)qe.push(Qt(Yt,A.interp(tr[Xe],.5),Xe));return qe}function Be(Yt,Jt){var qe=[],tr,Ge,Ee=Jt.length&&Jt[Jt.length-1].x<Jt[0].x,Xe=function(Je,He){var yr=Je.xbnd[He];yr!==null&&qe.push(A.extendFlat({},Je,{x:yr}))};if(Yt.showdividers&&Jt.length){for(tr=0;tr<Jt.length;tr++){var rr=Jt[tr];rr.text2!==Ge&&Xe(rr,Ee?1:0),Ge=rr.text2}Xe(Jt[tr-1],Ee?0:1)}return qe}function We(Yt,Jt,qe){var tr,Ge,Ee,Xe;if(Yt._selections[Jt].size())tr=1/0,Ge=-1/0,Ee=1/0,Xe=-1/0,Yt._selections[Jt].each(function(){var Je=ve(this),He=s.bBox(Je.node().parentNode);tr=Math.min(tr,He.top),Ge=Math.max(Ge,He.bottom),Ee=Math.min(Ee,He.left),Xe=Math.max(Xe,He.right)});else{var rr=Q.makeLabelFns(Yt,qe);tr=Ge=rr.yFn({dx:0,dy:0,fontSize:0}),Ee=Xe=rr.xFn({dx:0,dy:0,fontSize:0})}return{top:tr,bottom:Ge,left:Ee,right:Xe,height:Ge-tr,width:Xe-Ee}}Q.getTickSigns=function(Yt,Jt){var qe=Yt._id.charAt(0),tr={x:"top",y:"right"}[qe],Ge=Yt.side===tr?1:-1,Ee=[-1,1,Ge,-Ge],Xe=Jt?(Yt.minor||{}).ticks:Yt.ticks;return Xe!=="inside"==(qe==="x")&&(Ee=Ee.map(function(rr){return-rr})),Yt.side&&Ee.push({l:-1,t:-1,r:1,b:1}[Yt.side.charAt(0)]),Ee},Q.makeTransTickFn=function(Yt){return Yt._id.charAt(0)==="x"?function(Jt){return v(Yt._offset+Yt.l2p(Jt.x),0)}:function(Jt){return v(0,Yt._offset+Yt.l2p(Jt.x))}},Q.makeTransTickLabelFn=function(Yt){var Jt=Se(Yt),qe=Yt.ticklabelshift||0,tr=Yt.ticklabelstandoff||0,Ge=Jt[0],Ee=Jt[1],Xe=Yt.range[0]>Yt.range[1],rr=Yt.ticklabelposition&&Yt.ticklabelposition.indexOf("inside")!==-1,Je=!rr;if(qe){var He=Xe?-1:1;qe=qe*He}if(tr){var yr=Yt.side,Ir=rr&&(yr==="top"||yr==="left")||Je&&(yr==="bottom"||yr==="right")?1:-1;tr=tr*Ir}return Yt._id.charAt(0)==="x"?function(Tr){return v(Ge+Yt._offset+Yt.l2p(me(Tr))+qe,Ee+tr)}:function(Tr){return v(Ee+tr,Ge+Yt._offset+Yt.l2p(me(Tr))+qe)}};function me(Yt){return Yt.periodX!==void 0?Yt.periodX:Yt.x}function Se(Yt){var Jt=Yt.ticklabelposition||"",qe=function(vn){return Jt.indexOf(vn)!==-1},tr=qe("top"),Ge=qe("left"),Ee=qe("right"),Xe=qe("bottom"),rr=qe("inside"),Je=Xe||Ge||tr||Ee;if(!Je&&!rr)return[0,0];var He=Yt.side,yr=Je?(Yt.tickwidth||0)/2:0,Ir=Z,Tr=Yt.tickfont?Yt.tickfont.size:12;return(Xe||tr)&&(yr+=Tr*et,Ir+=(Yt.linewidth||0)/2),(Ge||Ee)&&(yr+=(Yt.linewidth||0)/2,Ir+=Z),rr&&He==="top"&&(Ir-=Tr*(1-et)),(Ge||tr)&&(yr=-yr),(He==="bottom"||He==="right")&&(Ir=-Ir),[Je?yr:0,rr?Ir:0]}Q.makeTickPath=function(Yt,Jt,qe,tr){tr||(tr={});var Ge=tr.minor;if(Ge&&!Yt.minor)return"";var Ee=tr.len!==void 0?tr.len:Ge?Yt.minor.ticklen:Yt.ticklen,Xe=Yt._id.charAt(0),rr=(Yt.linewidth||1)/2;return Xe==="x"?"M0,"+(Jt+rr*qe)+"v"+Ee*qe:"M"+(Jt+rr*qe)+",0h"+Ee*qe},Q.makeLabelFns=function(Yt,Jt,qe){var tr=Yt.ticklabelposition||"",Ge=function(la){return tr.indexOf(la)!==-1},Ee=Ge("top"),Xe=Ge("left"),rr=Ge("right"),Je=Ge("bottom"),He=Je||Xe||Ee||rr,yr=Ge("inside"),Ir=tr==="inside"&&Yt.ticks==="inside"||!yr&&Yt.ticks==="outside"&&Yt.tickson!=="boundaries",Tr=0,vn=0,Or=Ir?Yt.ticklen:0;if(yr?Or*=-1:He&&(Or=0),Ir&&(Tr+=Or,qe)){var En=A.deg2rad(qe);Tr=Or*Math.cos(En)+1,vn=Or*Math.sin(En)}Yt.showticklabels&&(Ir||Yt.showline)&&(Tr+=.2*Yt.tickfont.size),Tr+=(Yt.linewidth||1)/2*(yr?-1:1);var nn={labelStandoff:Tr,labelShift:vn},gr,Pr,Xr,kr,pn=0,en=Yt.side,Tn=Yt._id.charAt(0),Ln=Yt.tickangle,Yn;if(Tn==="x")Yn=!yr&&en==="bottom"||yr&&en==="top",kr=Yn?1:-1,yr&&(kr*=-1),gr=vn*kr,Pr=Jt+Tr*kr,Xr=Yn?1:-.2,Math.abs(Ln)===90&&(yr?Xr+=$:Ln===-90&&en==="bottom"?Xr=et:Ln===90&&en==="top"?Xr=$:Xr=.5,pn=$/2*(Ln/90)),nn.xFn=function(la){return la.dx+gr+pn*la.fontSize},nn.yFn=function(la){return la.dy+Pr+la.fontSize*Xr},nn.anchorFn=function(la,ia){if(He){if(Xe)return"end";if(rr)return"start"}return!P(ia)||ia===0||ia===180?"middle":ia*kr<0!==yr?"end":"start"},nn.heightFn=function(la,ia,Rn){return ia<-60||ia>60?-.5*Rn:Yt.side==="top"!==yr?-Rn:0};else if(Tn==="y"){if(Yn=!yr&&en==="left"||yr&&en==="right",kr=Yn?1:-1,yr&&(kr*=-1),gr=Tr,Pr=vn*kr,Xr=0,!yr&&Math.abs(Ln)===90&&(Ln===-90&&en==="left"||Ln===90&&en==="right"?Xr=et:Xr=.5),yr){var ma=P(Ln)?+Ln:0;if(ma!==0){var wa=A.deg2rad(ma);pn=Math.abs(Math.sin(wa))*et*kr,Xr=0}}nn.xFn=function(la){return la.dx+Jt-(gr+la.fontSize*Xr)*kr+pn*la.fontSize},nn.yFn=function(la){return la.dy+Pr+la.fontSize*$},nn.anchorFn=function(la,ia){return P(ia)&&Math.abs(ia)===90?"middle":Yn?"end":"start"},nn.heightFn=function(la,ia,Rn){return Yt.side==="right"&&(ia*=-1),ia<-30?-Rn:ia<30?-.5*Rn:0}}return nn};function je(Yt){return[Yt.text,Yt.x,Yt.axInfo,Yt.font,Yt.fontSize,Yt.fontColor].join("_")}Q.drawTicks=function(Yt,Jt,qe){qe=qe||{};var tr=Jt._id+"tick",Ge=[].concat(Jt.minor&&Jt.minor.ticks?qe.vals.filter(function(Xe){return Xe.minor&&!Xe.noTick}):[]).concat(Jt.ticks?qe.vals.filter(function(Xe){return!Xe.minor&&!Xe.noTick}):[]),Ee=qe.layer.selectAll("path."+tr).data(Ge,je);Ee.exit().remove(),Ee.enter().append("path").classed(tr,1).classed("ticks",1).classed("crisp",qe.crisp!==!1).each(function(Xe){return e.stroke(b.select(this),Xe.minor?Jt.minor.tickcolor:Jt.tickcolor)}).style("stroke-width",function(Xe){return s.crispRound(Yt,Xe.minor?Jt.minor.tickwidth:Jt.tickwidth,1)+"px"}).attr("d",qe.path).style("display",null),dr(Jt,[_]),Ee.attr("transform",qe.transFn)},Q.drawGrid=function(Yt,Jt,qe){if(qe=qe||{},Jt.tickmode!=="sync"){var tr=Jt._id+"grid",Ge=Jt.minor&&Jt.minor.showgrid,Ee=Ge?qe.vals.filter(function(gr){return gr.minor}):[],Xe=Jt.showgrid?qe.vals.filter(function(gr){return!gr.minor}):[],rr=qe.counterAxis;if(rr&&Q.shouldShowZeroLine(Yt,Jt,rr))for(var Je=Jt.tickmode==="array",He=0;He<Xe.length;He++){var yr=Xe[He].x;if(Je?!yr:Math.abs(yr)<Jt.dtick/100)if(Xe=Xe.slice(0,He).concat(Xe.slice(He+1)),Je)He--;else break}Jt._gw=s.crispRound(Yt,Jt.gridwidth,1);for(var Ir=Ge?s.crispRound(Yt,Jt.minor.gridwidth,1):0,Tr=qe.layer,vn=qe.minorLayer,Or=1;Or>=0;Or--){var En=Or?Tr:vn;if(En){var nn=En.selectAll("path."+tr).data(Or?Xe:Ee,je);nn.exit().remove(),nn.enter().append("path").classed(tr,1).classed("crisp",qe.crisp!==!1),nn.attr("transform",qe.transFn).attr("d",qe.path).each(function(gr){return e.stroke(b.select(this),gr.minor?Jt.minor.gridcolor:Jt.gridcolor||"#ddd")}).style("stroke-dasharray",function(gr){return s.dashStyle(gr.minor?Jt.minor.griddash:Jt.griddash,gr.minor?Jt.minor.gridwidth:Jt.gridwidth)}).style("stroke-width",function(gr){return(gr.minor?Ir:Jt._gw)+"px"}).style("display",null),typeof qe.path=="function"&&nn.attr("d",qe.path)}}dr(Jt,[B,F])}},Q.drawZeroLine=function(Yt,Jt,qe){qe=qe||qe;var tr=Jt._id+"zl",Ge=Q.shouldShowZeroLine(Yt,Jt,qe.counterAxis),Ee=qe.layer.selectAll("path."+tr).data(Ge?[{x:0,id:Jt._id}]:[]);Ee.exit().remove(),Ee.enter().append("path").classed(tr,1).classed("zl",1).classed("crisp",qe.crisp!==!1).each(function(){qe.layer.selectAll("path").sort(function(Xe,rr){return it(Xe.id,rr.id)})}),Ee.attr("transform",qe.transFn).attr("d",qe.path).call(e.stroke,Jt.zerolinecolor||e.defaultLine).style("stroke-width",s.crispRound(Yt,Jt.zerolinewidth,Jt._gw||1)+"px").style("display",null),dr(Jt,[z])},Q.drawLabels=function(Yt,Jt,qe){qe=qe||{};var tr=Yt._fullLayout,Ge=Jt._id,Ee=qe.cls||Ge+"tick",Xe=qe.vals.filter(function(ln){return ln.text}),rr=qe.labelFns,Je=qe.secondary?0:Jt.tickangle,He=(Jt._prevTickAngles||{})[Ee],yr=qe.layer.selectAll("g."+Ee).data(Jt.showticklabels?Xe:[],je),Ir=[];yr.enter().append("g").classed(Ee,1).append("text").attr("text-anchor","middle").each(function(ln){var Nn=b.select(this),gn=Yt._promises.length;Nn.call(p.positionText,rr.xFn(ln),rr.yFn(ln)).call(s.font,{family:ln.font,size:ln.fontSize,color:ln.fontColor,weight:ln.fontWeight,style:ln.fontStyle,variant:ln.fontVariant,textcase:ln.fontTextcase,lineposition:ln.fontLineposition,shadow:ln.fontShadow}).text(ln.text).call(p.convertToTspans,Yt),Yt._promises[gn]?Ir.push(Yt._promises.pop().then(function(){Tr(Nn,Je)})):Tr(Nn,Je)}),dr(Jt,[N]),yr.exit().remove(),qe.repositionOnUpdate&&yr.each(function(ln){b.select(this).select("text").call(p.positionText,rr.xFn(ln),rr.yFn(ln))});function Tr(ln,Nn){ln.each(function(gn){var Cn=b.select(this),Un=Cn.select(".text-math-group"),ta=rr.anchorFn(gn,Nn),pa=qe.transFn.call(Cn.node(),gn)+(P(Nn)&&+Nn!=0?" rotate("+Nn+","+rr.xFn(gn)+","+(rr.yFn(gn)-gn.fontSize/2)+")":""),ka=p.lineCount(Cn),Ar=ot*gn.fontSize,Br=rr.heightFn(gn,P(Nn)?+Nn:0,(ka-1)*Ar);if(Br&&(pa+=v(0,Br)),Un.empty()){var Mr=Cn.select("text");Mr.attr({transform:pa,"text-anchor":ta}),Mr.style("opacity",1),Jt._adjustTickLabelsOverflow&&Jt._adjustTickLabelsOverflow()}else{var Nr=s.bBox(Un.node()).width,un=Nr*{end:-.5,start:.5}[ta];Un.attr("transform",pa+v(un,0))}})}Jt._adjustTickLabelsOverflow=function(){var ln=Jt.ticklabeloverflow;if(!(!ln||ln==="allow")){var Nn=ln.indexOf("hide")!==-1,gn=Jt._id.charAt(0)==="x",Cn=0,Un=gn?Yt._fullLayout.width:Yt._fullLayout.height;if(ln.indexOf("domain")!==-1){var ta=A.simpleMap(Jt.range,Jt.r2l);Cn=Jt.l2p(ta[0])+Jt._offset,Un=Jt.l2p(ta[1])+Jt._offset}var pa=Math.min(Cn,Un),ka=Math.max(Cn,Un),Ar=Jt.side,Br=1/0,Mr=-1/0;yr.each(function(mn){var cn=b.select(this),Er=cn.select(".text-math-group");if(Er.empty()){var Yr=s.bBox(cn.node()),Gr=0;gn?(Yr.right>ka||Yr.left<pa)&&(Gr=1):(Yr.bottom>ka||Yr.top+(Jt.tickangle?0:mn.fontSize/4)<pa)&&(Gr=1);var $r=cn.select("text");Gr?Nn&&$r.style("opacity",0):($r.style("opacity",1),Ar==="bottom"||Ar==="right"?Br=Math.min(Br,gn?Yr.top:Yr.left):Br=-1/0,Ar==="top"||Ar==="left"?Mr=Math.max(Mr,gn?Yr.bottom:Yr.right):Mr=1/0)}});for(var Nr in tr._plots){var un=tr._plots[Nr];if(!(Jt._id!==un.xaxis._id&&Jt._id!==un.yaxis._id)){var Dn=gn?un.yaxis:un.xaxis;Dn&&(Dn["_visibleLabelMin_"+Jt._id]=Br,Dn["_visibleLabelMax_"+Jt._id]=Mr)}}}},Jt._hideCounterAxisInsideTickLabels=function(ln){var Nn=Jt._id.charAt(0)==="x",gn=[];for(var Cn in tr._plots){var Un=tr._plots[Cn];Jt._id!==Un.xaxis._id&&Jt._id!==Un.yaxis._id||gn.push(Nn?Un.yaxis:Un.xaxis)}gn.forEach(function(ta,pa){ta&&cr(ta)&&(ln||[z,F,B,_,N]).forEach(function(ka){var Ar=ka.K==="tick"&&ka.L==="text"&&Jt.ticklabelmode==="period",Br=tr._plots[Jt._mainSubplot],Mr;ka.K===z.K?Mr=Br.zerolinelayer.selectAll("."+Jt._id+"zl"):ka.K===F.K?Mr=Br.minorGridlayer.selectAll("."+Jt._id):ka.K===B.K?Mr=Br.gridlayer.selectAll("."+Jt._id):Mr=Br[Jt._id.charAt(0)+"axislayer"],Mr.each(function(){var Nr=b.select(this);ka.L&&(Nr=Nr.selectAll(ka.L)),Nr.each(function(un){var Dn=Jt.l2p(Ar?me(un):un.x)+Jt._offset,mn=b.select(this);Dn<Jt["_visibleLabelMax_"+ta._id]&&Dn>Jt["_visibleLabelMin_"+ta._id]?mn.style("display","none"):ka.K==="tick"&&!pa&&mn.style("display",null)})})})})},Tr(yr,He+1?He:Je);function vn(){return Ir.length&&Promise.all(Ir)}var Or=null;function En(){if(Tr(yr,Je),Xe.length&&Jt.autotickangles&&(Jt.type!=="log"||String(Jt.dtick).charAt(0)!=="D")){Or=Jt.autotickangles[0];var ln=0,Nn=[],gn,Cn=1;yr.each(function(Zn){ln=Math.max(ln,Zn.fontSize);var Jn=Jt.l2p(Zn.x),ua=ve(this),Ra=s.bBox(ua.node());Cn=Math.max(Cn,p.lineCount(ua)),Nn.push({top:0,bottom:10,height:10,left:Jn-Ra.width/2,right:Jn+Ra.width/2+2,width:Ra.width+2})});var Un=(Jt.tickson==="boundaries"||Jt.showdividers)&&!qe.secondary,ta=Xe.length,pa=Math.abs((Xe[ta-1].x-Xe[0].x)*Jt._m)/(ta-1),ka=Un?pa/2:pa,Ar=Un?Jt.ticklen:ln*1.25*Cn,Br=Math.sqrt(Math.pow(ka,2)+Math.pow(Ar,2)),Mr=ka/Br,Nr=Jt.autotickangles.map(function(Zn){return Zn*Math.PI/180}),un=Nr.find(function(Zn){return Math.abs(Math.cos(Zn))<=Mr});un===void 0&&(un=Nr.reduce(function(Zn,Jn){return Math.abs(Math.cos(Zn))<Math.abs(Math.cos(Jn))?Zn:Jn},Nr[0]));var Dn=un*(180/Math.PI);if(Un){var mn=2;for(Jt.ticks&&(mn+=Jt.tickwidth/2),gn=0;gn<Nn.length;gn++){var cn=Xe[gn].xbnd,Er=Nn[gn];if(cn[0]!==null&&Er.left-Jt.l2p(cn[0])<mn||cn[1]!==null&&Jt.l2p(cn[1])-Er.right<mn){Or=Dn;break}}}else{var Yr=Jt.ticklabelposition||"",Gr=function(Zn){return Yr.indexOf(Zn)!==-1},$r=Gr("top"),wn=Gr("left"),An=Gr("right"),On=Gr("bottom"),Vn=On||wn||$r||An,zn=Vn?(Jt.tickwidth||0)+2*Z:0;for(gn=0;gn<Nn.length-1;gn++)if(A.bBoxIntersect(Nn[gn],Nn[gn+1],zn)){Or=Dn;break}}Or&&Tr(yr,Or)}}Jt._selections&&(Jt._selections[Ee]=yr);var nn=[vn];Jt.automargin&&tr._redrawFromAutoMarginCount&&He===90?(Or=He,nn.push(function(){Tr(yr,He)})):nn.push(En),Jt._tickAngles&&nn.push(function(){Jt._tickAngles[Ee]=Or===null?P(Je)?Je:0:Or});var gr=function(){var ln=0,Nn=0;return yr.each(function(gn,Cn){var Un=ve(this),ta=Un.select(".text-math-group");if(ta.empty()){var pa;Jt._vals[Cn]&&(pa=Jt._vals[Cn].bb||s.bBox(Un.node()),Jt._vals[Cn].bb=pa),ln=Math.max(ln,pa.width),Nn=Math.max(Nn,pa.height)}}),{labelsMaxW:ln,labelsMaxH:Nn}},Pr=Jt._anchorAxis;if(Pr&&(Pr.autorange||Pr.insiderange)&&cr(Jt)&&!K(tr,Jt._id)&&(tr._insideTickLabelsUpdaterange||(tr._insideTickLabelsUpdaterange={}),Pr.autorange&&(tr._insideTickLabelsUpdaterange[Pr._name+".autorange"]=Pr.autorange,nn.push(gr)),Pr.insiderange)){var Xr=gr(),kr=Jt._id.charAt(0)==="y"?Xr.labelsMaxW:Xr.labelsMaxH;kr+=2*Z,Jt.ticklabelposition==="inside"&&(kr+=Jt.ticklen||0);var pn=Jt.side==="right"||Jt.side==="top"?1:-1,en=pn===1?1:0,Tn=pn===1?0:1,Ln=[];Ln[Tn]=Pr.range[Tn];var Yn=Pr.range,ma=Pr.r2p(Yn[en]),wa=Pr.r2p(Yn[Tn]),la=tr._insideTickLabelsUpdaterange[Pr._name+".range"];if(la){var ia=Pr.r2p(la[en]),Rn=Pr.r2p(la[Tn]),Cr=pn*(Jt._id.charAt(0)==="y"?1:-1);Cr*ma<Cr*ia&&(ma=ia,Ln[en]=Yn[en]=la[en]),Cr*wa>Cr*Rn&&(wa=Rn,Ln[Tn]=Yn[Tn]=la[Tn])}var an=Math.abs(wa-ma);an-kr>0?(an-=kr,kr*=1+kr/an):kr=0,Jt._id.charAt(0)!=="y"&&(kr=-kr),Ln[en]=Pr.p2r(Pr.r2p(Yn[en])+pn*kr),Pr.autorange==="min"||Pr.autorange==="max reversed"?(Ln[0]=null,Pr._rangeInitial0=void 0,Pr._rangeInitial1=void 0):(Pr.autorange==="max"||Pr.autorange==="min reversed")&&(Ln[1]=null,Pr._rangeInitial0=void 0,Pr._rangeInitial1=void 0),tr._insideTickLabelsUpdaterange[Pr._name+".range"]=Ln}var on=A.syncOrAsync(nn);return on&&on.then&&Yt._promises.push(on),on};function vr(Yt,Jt,qe){var tr=Jt._id+"divider",Ge=qe.vals,Ee=qe.layer.selectAll("path."+tr).data(Ge,je);Ee.exit().remove(),Ee.enter().insert("path",":first-child").classed(tr,1).classed("crisp",1).call(e.stroke,Jt.dividercolor).style("stroke-width",s.crispRound(Yt,Jt.dividerwidth,1)+"px"),Ee.attr("transform",qe.transFn).attr("d",qe.path)}Q.getPxPosition=function(Yt,Jt){var qe=Yt._fullLayout._size,tr=Jt._id.charAt(0),Ge=Jt.side,Ee;if(Jt.anchor!=="free"?Ee=Jt._anchorAxis:tr==="x"?Ee={_offset:qe.t+(1-(Jt.position||0))*qe.h,_length:0}:tr==="y"&&(Ee={_offset:qe.l+(Jt.position||0)*qe.w+Jt._shift,_length:0}),Ge==="top"||Ge==="left")return Ee._offset;if(Ge==="bottom"||Ge==="right")return Ee._offset+Ee._length};function he(Yt){var Jt=Yt.title.font.size,qe=(Yt.title.text.match(p.BR_TAG_ALL)||[]).length;return Yt.title.hasOwnProperty("standoff")?Jt*(et+qe*ot):qe?Jt*(qe+1)*ot:Jt}function Ye(Yt,Jt){var qe=Yt._fullLayout,tr=Jt._id,Ge=tr.charAt(0),Ee=Jt.title.font.size,Xe,rr=(Jt.title.text.match(p.BR_TAG_ALL)||[]).length;if(Jt.title.hasOwnProperty("standoff"))Jt.side==="bottom"||Jt.side==="right"?Xe=Jt._depth+Jt.title.standoff+Ee*et:(Jt.side==="top"||Jt.side==="left")&&(Xe=Jt._depth+Jt.title.standoff+Ee*($+rr*ot));else{var Je=cr(Jt);if(Jt.type==="multicategory")Xe=Jt._depth;else{var He=1.5*Ee;Je&&(He=.5*Ee,Jt.ticks==="outside"&&(He+=Jt.ticklen)),Xe=10+He+(Jt.linewidth?Jt.linewidth-1:0)}Je||(Ge==="x"?Xe+=Jt.side==="top"?Ee*(Jt.showticklabels?1:0):Ee*(Jt.showticklabels?1.5:.5):Xe+=Jt.side==="right"?Ee*(Jt.showticklabels?1:.5):Ee*(Jt.showticklabels?.5:0))}var yr=Q.getPxPosition(Yt,Jt),Ir,Tr,vn;Ge==="x"?(Tr=Jt._offset+Jt._length/2,vn=Jt.side==="top"?yr-Xe:yr+Xe):(vn=Jt._offset+Jt._length/2,Tr=Jt.side==="right"?yr+Xe:yr-Xe,Ir={rotate:"-90",offset:0});var Or;if(Jt.type!=="multicategory"){var En=Jt._selections[Jt._id+"tick"];if(Or={selection:En,side:Jt.side},En&&En.node()&&En.node().parentNode){var nn=s.getTranslate(En.node().parentNode);Or.offsetLeft=nn.x,Or.offsetTop=nn.y}Jt.title.hasOwnProperty("standoff")&&(Or.pad=0)}return Jt._titleStandoff=Xe,r.draw(Yt,tr+"title",{propContainer:Jt,propName:Jt._name+".title.text",placeholder:qe._dfltTitle[Ge],avoid:Or,transform:Ir,attributes:{x:Tr,y:vn,"text-anchor":"middle"}})}Q.shouldShowZeroLine=function(Yt,Jt,qe){var tr=A.simpleMap(Jt.range,Jt.r2l);return tr[0]*tr[1]<=0&&Jt.zeroline&&(Jt.type==="linear"||Jt.type==="-")&&!(Jt.rangebreaks&&Jt.maskBreaks(0)===O)&&(Qe(Jt,0)||!mr(Yt,Jt,qe,tr)||ir(Yt,Jt))},Q.clipEnds=function(Yt,Jt){return Jt.filter(function(qe){return Qe(Yt,qe.x)})};function Qe(Yt,Jt){var qe=Yt.l2p(Jt);return qe>1&&qe<Yt._length-1}function mr(Yt,Jt,qe,tr){var Ge=qe._mainAxis;if(!Ge)return;var Ee=Yt._fullLayout,Xe=Jt._id.charAt(0),rr=Q.counterLetter(Jt._id),Je=Jt._offset+(Math.abs(tr[0])<Math.abs(tr[1])==(Xe==="x")?0:Jt._length);function He(Or){if(!Or.showline||!Or.linewidth)return!1;var En=Math.max((Or.linewidth+Jt.zerolinewidth)/2,1);function nn(Xr){return typeof Xr=="number"&&Math.abs(Xr-Je)<En}if(nn(Or._mainLinePosition)||nn(Or._mainMirrorPosition))return!0;var gr=Or._linepositions||{};for(var Pr in gr)if(nn(gr[Pr][0])||nn(gr[Pr][1]))return!0}var yr=Ee._plots[qe._mainSubplot];if(!(yr.mainplotinfo||yr).overlays.length)return He(qe);for(var Ir=Q.list(Yt,rr),Tr=0;Tr<Ir.length;Tr++){var vn=Ir[Tr];if(vn._mainAxis===Ge&&He(vn))return!0}}function ir(Yt,Jt){for(var qe=Yt._fullData,tr=Jt._mainSubplot,Ge=Jt._id.charAt(0),Ee=0;Ee<qe.length;Ee++){var Xe=qe[Ee];if(Xe.visible===!0&&Xe.xaxis+Xe.yaxis===tr&&(L.traceIs(Xe,"bar-like")&&Xe.orientation==={x:"h",y:"v"}[Ge]||Xe.fill&&Xe.fill.charAt(Xe.fill.length-1)===Ge))return!0}return!1}function ve(Yt){var Jt=b.select(Yt),qe=Jt.select(".text-math-group");return qe.empty()?Jt.select("text"):qe}Q.allowAutoMargin=function(Yt){for(var Jt=Q.list(Yt,"",!0),qe=0;qe<Jt.length;qe++){var tr=Jt[qe];tr.automargin&&(o.allowAutoMargin(Yt,ne(tr)),tr.mirror&&o.allowAutoMargin(Yt,ge(tr))),L.getComponentMethod("rangeslider","isVisible")(tr)&&o.allowAutoMargin(Yt,Ae(tr))}};function ne(Yt){return Yt._id+".automargin"}function ge(Yt){return ne(Yt)+".mirror"}function Ae(Yt){return Yt._id+".rangeslider"}Q.swap=function(Yt,Jt){for(var qe=Re(Yt,Jt),tr=0;tr<qe.length;tr++)ke(Yt,qe[tr].x,qe[tr].y)};function Re(Yt,Jt){var qe=[],tr,Ge;for(tr=0;tr<Jt.length;tr++){var Ee=[],Xe=Yt._fullData[Jt[tr]].xaxis,rr=Yt._fullData[Jt[tr]].yaxis;if(!(!Xe||!rr)){for(Ge=0;Ge<qe.length;Ge++)(qe[Ge].x.indexOf(Xe)!==-1||qe[Ge].y.indexOf(rr)!==-1)&&Ee.push(Ge);if(!Ee.length){qe.push({x:[Xe],y:[rr]});continue}var Je=qe[Ee[0]],He;if(Ee.length>1)for(Ge=1;Ge<Ee.length;Ge++)He=qe[Ee[Ge]],ze(Je.x,He.x),ze(Je.y,He.y);ze(Je.x,[Xe]),ze(Je.y,[rr])}}return qe}function ze(Yt,Jt){for(var qe=0;qe<Jt.length;qe++)Yt.indexOf(Jt[qe])===-1&&Yt.push(Jt[qe])}function ke(Yt,Jt,qe){var tr=[],Ge=[],Ee=Yt.layout,Xe,rr;for(Xe=0;Xe<Jt.length;Xe++)tr.push(Q.getFromId(Yt,Jt[Xe]));for(Xe=0;Xe<qe.length;Xe++)Ge.push(Q.getFromId(Yt,qe[Xe]));var Je=Object.keys(n),He=["anchor","domain","overlaying","position","side","tickangle","editType"],yr=["linear","log"];for(Xe=0;Xe<Je.length;Xe++){var Ir=Je[Xe],Tr=tr[0][Ir],vn=Ge[0][Ir],Or=!0,En=!1,nn=!1;if(!(Ir.charAt(0)==="_"||typeof Tr=="function"||He.indexOf(Ir)!==-1)){for(rr=1;rr<tr.length&&Or;rr++){var gr=tr[rr][Ir];Ir==="type"&&yr.indexOf(Tr)!==-1&&yr.indexOf(gr)!==-1&&Tr!==gr?En=!0:gr!==Tr&&(Or=!1)}for(rr=1;rr<Ge.length&&Or;rr++){var Pr=Ge[rr][Ir];Ir==="type"&&yr.indexOf(vn)!==-1&&yr.indexOf(Pr)!==-1&&vn!==Pr?nn=!0:Ge[rr][Ir]!==vn&&(Or=!1)}Or&&(En&&(Ee[tr[0]._name].type="linear"),nn&&(Ee[Ge[0]._name].type="linear"),_e(Ee,Ir,tr,Ge,Yt._fullLayout._dfltTitle))}}for(Xe=0;Xe<Yt._fullLayout.annotations.length;Xe++){var Xr=Yt._fullLayout.annotations[Xe];Jt.indexOf(Xr.xref)!==-1&&qe.indexOf(Xr.yref)!==-1&&A.swapAttrs(Ee.annotations[Xe],["?"])}}function _e(Yt,Jt,qe,tr,Ge){var Ee=A.nestedProperty,Xe=Ee(Yt[qe[0]._name],Jt).get(),rr=Ee(Yt[tr[0]._name],Jt).get(),Je;for(Jt==="title"&&(Xe&&Xe.text===Ge.x&&(Xe.text=Ge.y),rr&&rr.text===Ge.y&&(rr.text=Ge.x)),Je=0;Je<qe.length;Je++)Ee(Yt,qe[Je]._name+"."+Jt).set(rr);for(Je=0;Je<tr.length;Je++)Ee(Yt,tr[Je]._name+"."+Jt).set(Xe)}function Ke(Yt){return Yt._id==="angularaxis"}function hr(Yt,Jt){for(var qe=Jt._rangebreaks.length,tr=0;tr<qe;tr++){var Ge=Jt._rangebreaks[tr];if(Yt>=Ge.min&&Yt<Ge.max)return Ge.max}return Yt}function cr(Yt){return(Yt.ticklabelposition||"").indexOf("inside")!==-1}function dr(Yt,Jt){cr(Yt._anchorAxis||{})&&Yt._hideCounterAxisInsideTickLabels&&Yt._hideCounterAxisInsideTickLabels(Jt)}function fr(Yt,Jt,qe,tr){var Ge=Yt.anchor!=="free"&&(Yt.overlaying===void 0||Yt.overlaying===!1)?Yt._id:Yt.overlaying,Ee;tr?Ee=Yt.side==="right"?Jt:-Jt:Ee=Jt,Ge in qe||(qe[Ge]={}),Yt.side in qe[Ge]||(qe[Ge][Yt.side]=0),qe[Ge][Yt.side]+=Ee}function Lr(Yt,Jt){return Yt.autoshift?Jt[Yt.overlaying][Yt.side]:Yt.shift||0}function xr(Yt,Jt){return/%f/.test(Jt)?Yt>=k:/%L/.test(Jt)?Yt>=m:/%[SX]/.test(Jt)?Yt>=E:/%M/.test(Jt)?Yt>=a:/%[HI]/.test(Jt)?Yt>=M:/%p/.test(Jt)?Yt>=S:/%[Aadejuwx]/.test(Jt)?Yt>=y:/%[UVW]/.test(Jt)?Yt>=C:/%[Bbm]/.test(Jt)?Yt>=w:/%[q]/.test(Jt)?Yt>=i:/%[Yy]/.test(Jt)?Yt>=h:!0}},52976:function(j,V,t){var b=t(38248),P=t(3400),o=t(39032).BADNUM,L=P.isArrayOrTypedArray,A=P.isDateTime,v=P.cleanNumber,p=Math.round;j.exports=function(g,h,T){var c=g,i=T.noMultiCategory;if(L(c)&&!c.length)return"-";if(!i&&f(c))return"multicategory";if(i&&Array.isArray(c[0])){for(var d=[],x=0;x<c.length;x++)if(L(c[x]))for(var w=0;w<c[x].length;w++)d.push(c[x][w]);c=d}if(s(c,h))return"date";var C=T.autotypenumbers!=="strict";return l(c,C)?"category":e(c,C)?"linear":"-"};function r(u,g){return g?b(u):typeof u=="number"}function e(u,g){for(var h=u.length,T=0;T<h;T++)if(r(u[T],g))return!0;return!1}function s(u,g){for(var h=u.length,T=n(h),c=0,i=0,d={},x=0;x<h;x+=T){var w=p(x),C=u[w],y=String(C);d[y]||(d[y]=1,A(C,g)&&c++,b(C)&&i++)}return c>i*2}function n(u){return Math.max(1,(u-1)/1e3)}function l(u,g){for(var h=u.length,T=n(h),c=0,i=0,d={},x=0;x<h;x+=T){var w=p(x),C=u[w],y=String(C);if(!d[y]){d[y]=1;var S=typeof C;S==="boolean"?i++:(g?v(C)!==o:S==="number")?c++:S==="string"&&i++}}return i>c*2}function f(u){return L(u[0])&&L(u[1])}},28336:function(j,V,t){var b=t(38248),P=t(24040),o=t(3400),L=t(31780),A=t(51272),v=t(94724),p=t(26332),r=t(25404),e=t(95936),s=t(42568),n=t(22416),l=t(42136),f=t(96312),u=t(78344),g=t(33816).WEEKDAY_PATTERN,h=t(33816).HOUR_PATTERN;j.exports=function(x,w,C,y,S){var M=y.letter,a=y.font||{},E=y.splomStash||{},m=C("visible",!y.visibleDflt),k=w._template||{},I=w.type||k.type||"-",O;if(I==="date"){var z=P.getComponentMethod("calendars","handleDefaults");z(x,w,"calendar",y.calendar),y.noTicklabelmode||(O=C("ticklabelmode"))}!y.noTicklabelindex&&(I==="date"||I==="linear")&&C("ticklabelindex");var B="";(!y.noTicklabelposition||I==="multicategory")&&(B=o.coerce(x,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:O==="period"?["outside","inside"]:M==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),y.noTicklabeloverflow||C("ticklabeloverflow",B.indexOf("inside")!==-1?"hide past domain":I==="category"||I==="multicategory"?"allow":"hide past div"),u(w,S),f(x,w,C,y),n(x,w,C,y),I!=="category"&&!y.noHover&&C("hoverformat");var F=C("color"),_=F!==v.color.dflt?F:a.color,N=E.label||S._dfltTitle[M];if(s(x,w,C,I,y),!m)return w;C("title.text",N),o.coerceFont(C,"title.font",a,{overrideDflt:{size:o.bigFont(a.size),color:_}}),p(x,w,C,I);var G=y.hasMinor;if(G&&(L.newContainer(w,"minor"),p(x,w,C,I,{isMinor:!0})),e(x,w,C,I,y),r(x,w,C,y),G){var X=y.isMinor;y.isMinor=!0,r(x,w,C,y),y.isMinor=X}l(x,w,C,{dfltColor:F,bgColor:y.bgColor,showGrid:y.showGrid,hasMinor:G,attributes:v}),G&&!w.minor.ticks&&!w.minor.showgrid&&delete w.minor,(w.showline||w.ticks)&&C("mirror");var $=I==="multicategory";if(!y.noTickson&&(I==="category"||$)&&(w.ticks||w.showgrid)){var et;$&&(et="boundaries");var ot=C("tickson",et);ot==="boundaries"&&delete w.ticklabelposition}if($){var nt=C("showdividers");nt&&(C("dividercolor"),C("dividerwidth"))}if(I==="date")if(A(x,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:T}),!w.rangebreaks.length)delete w.rangebreaks;else{for(var Z=0;Z<w.rangebreaks.length;Z++)if(w.rangebreaks[Z].pattern===g){w._hasDayOfWeekBreaks=!0;break}if(u(w,S),S._has("scattergl")||S._has("splom"))for(var Q=0;Q<y.data.length;Q++){var W=y.data[Q];(W.type==="scattergl"||W.type==="splom")&&(W.visible=!1,o.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}return w};function T(d,x,w){function C(O,z){return o.coerce(d,x,v.rangebreaks,O,z)}var y=C("enabled");if(y){var S=C("bounds");if(S&&S.length>=2){var M="",a,E;if(S.length===2){for(a=0;a<2;a++)if(E=i(S[a]),E){M=g;break}}var m=C("pattern",M);if(m===g)for(a=0;a<2;a++)E=i(S[a]),E&&(x.bounds[a]=S[a]=E-1);if(m)for(a=0;a<2;a++)switch(E=S[a],m){case g:if(!b(E)){x.enabled=!1;return}if(E=+E,E!==Math.floor(E)||E<0||E>=7){x.enabled=!1;return}x.bounds[a]=S[a]=E;break;case h:if(!b(E)){x.enabled=!1;return}if(E=+E,E<0||E>24){x.enabled=!1;return}x.bounds[a]=S[a]=E;break}if(w.autorange===!1){var k=w.range;if(k[0]<k[1]){if(S[0]<k[0]&&S[1]>k[1]){x.enabled=!1;return}}else if(S[0]>k[0]&&S[1]<k[1]){x.enabled=!1;return}}}else{var I=C("values");if(I&&I.length)C("dvalue");else{x.enabled=!1;return}}}}var c={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function i(d){if(typeof d=="string")return c[d.substr(0,3).toLowerCase()]}},29736:function(j,V,t){var b=t(26880),P=b.FORMAT_LINK,o=b.DATE_FORMAT_LINK;function L(p,r){return{valType:"string",dflt:"",editType:"none",description:(r?A:v)("hover text",p)+["By default the values are formatted using "+(r?"generic number format":"`"+p+"axis.hoverformat`")+"."].join(" ")}}function A(p,r){return["Sets the "+p+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+P+"."].join(" ")}function v(p,r){return A(p,r)+[" And for dates see: "+o+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}j.exports={axisHoverFormat:L,descriptionOnlyNumbers:A,descriptionWithDates:v}},79811:function(j,V,t){var b=t(24040),P=t(33816);V.id2name=function(A){if(!(typeof A!="string"||!A.match(P.AX_ID_PATTERN))){var v=A.split(" ")[0].substr(1);return v==="1"&&(v=""),A.charAt(0)+"axis"+v}},V.name2id=function(A){if(A.match(P.AX_NAME_PATTERN)){var v=A.substr(5);return v==="1"&&(v=""),A.charAt(0)+v}},V.cleanId=function(A,v,p){var r=/( domain)$/.test(A);if(!(typeof A!="string"||!A.match(P.AX_ID_PATTERN))&&!(v&&A.charAt(0)!==v)&&!(r&&!p)){var e=A.split(" ")[0].substr(1).replace(/^0+/,"");return e==="1"&&(e=""),A.charAt(0)+e+(r&&p?" domain":"")}},V.list=function(L,A,v){var p=L._fullLayout;if(!p)return[];var r=V.listIds(L,A),e=new Array(r.length),s;for(s=0;s<r.length;s++){var n=r[s];e[s]=p[n.charAt(0)+"axis"+n.substr(1)]}if(!v){var l=p._subplots.gl3d||[];for(s=0;s<l.length;s++){var f=p[l[s]];A?e.push(f[A+"axis"]):e.push(f.xaxis,f.yaxis,f.zaxis)}}return e},V.listIds=function(L,A){var v=L._fullLayout;if(!v)return[];var p=v._subplots;return A?p[A+"axis"]:p.xaxis.concat(p.yaxis)},V.getFromId=function(L,A,v){var p=L._fullLayout;return A=A===void 0||typeof A!="string"?A:A.replace(" domain",""),v==="x"?A=A.replace(/y[0-9]*/,""):v==="y"&&(A=A.replace(/x[0-9]*/,"")),p[V.id2name(A)]},V.getFromTrace=function(L,A,v){var p=L._fullLayout,r=null;if(b.traceIs(A,"gl3d")){var e=A.scene;e.substr(0,5)==="scene"&&(r=p[e][v+"axis"])}else r=V.getFromId(L,A[v+"axis"]||v);return r},V.idSort=function(L,A){var v=L.charAt(0),p=A.charAt(0);return v!==p?v>p?1:-1:+(L.substr(1)||1)-+(A.substr(1)||1)},V.ref2id=function(L){return/^[xyz]/.test(L)?L.split(" ")[0]:!1};function o(L,A){if(A&&A.length){for(var v=0;v<A.length;v++)if(A[v][L])return!0}return!1}V.isLinked=function(L,A){return o(A,L._axisMatchGroups)||o(A,L._axisConstraintGroups)}},22416:function(j,V,t){var b=t(38116).isTypedArraySpec;function P(o,L){var A=L.dataAttr||o._id.charAt(0),v={},p,r,e;if(L.axData)p=L.axData;else for(p=[],r=0;r<L.data.length;r++){var s=L.data[r];s[A+"axis"]===o._id&&p.push(s)}for(r=0;r<p.length;r++){var n=p[r][A];for(e=0;e<n.length;e++){var l=n[e];l!=null&&(v[l]=1)}}return Object.keys(v)}j.exports=function(L,A,v,p){if(A.type==="category"){var r=L.categoryarray,e=Array.isArray(r)&&r.length>0||b(r),s;e&&(s="array");var n=v("categoryorder",s),l;n==="array"&&(l=v("categoryarray")),!e&&n==="array"&&(n=A.categoryorder="trace"),n==="trace"?A._initialCategories=[]:n==="array"?A._initialCategories=l.slice():(l=P(A,p).sort(),n==="category ascending"?A._initialCategories=l:n==="category descending"&&(A._initialCategories=l.reverse()))}}},98728:function(j,V,t){var b=t(38248),P=t(3400),o=t(39032),L=o.ONEDAY,A=o.ONEWEEK;V.dtick=function(v,p){var r=p==="log",e=p==="date",s=p==="category",n=e?L:1;if(!v)return n;if(b(v))return v=Number(v),v<=0?n:s?Math.max(1,Math.round(v)):e?Math.max(.1,v):v;if(typeof v!="string"||!(e||r))return n;var l=v.charAt(0),f=v.substr(1);return f=b(f)?Number(f):0,f<=0||!(e&&l==="M"&&f===Math.round(f)||r&&l==="L"||r&&l==="D"&&(f===1||f===2))?n:v},V.tick0=function(v,p,r,e){if(p==="date")return P.cleanDate(v,P.dateTick0(r,e%A===0?1:0));if(!(e==="D1"||e==="D2"))return b(v)?Number(v):0}},33816:function(j,V,t){var b=t(53756).counter;j.exports={idRegex:{x:b("x","( domain)?"),y:b("y","( domain)?")},attrRegex:b("[xy]axis"),xAxisMatch:b("xaxis"),yAxisMatch:b("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"},zindexSeparator:"z"}},71888:function(j,V,t){var b=t(3400),P=t(19280),o=t(79811).id2name,L=t(94724),A=t(21160),v=t(78344),p=t(39032).ALMOST_EQUAL,r=t(84284).FROM_BL;V.handleDefaults=function(h,T,c){var i=c.axIds,d=c.axHasImage,x=T._axisConstraintGroups=[],w=T._axisMatchGroups=[],C,y,S,M,a,E,m,k;for(C=0;C<i.length;C++)M=o(i[C]),a=h[M],E=T[M],e(a,E,{axIds:i,layoutOut:T,hasImage:d[M]});function I($,et){for(C=0;C<$.length;C++){y=$[C];for(S in y)T[o(S)][et]=y}}for(I(w,"_matchGroup"),C=0;C<x.length;C++){y=x[C];for(S in y)if(E=T[o(S)],E.fixedrange){for(var O in y){var z=o(O);(h[z]||{}).fixedrange===!1&&b.warn("fixedrange was specified as false for axis "+z+" but was overridden because another axis in its constraint group has fixedrange true"),T[z].fixedrange=!0}break}}for(C=0;C<x.length;){y=x[C];for(S in y){E=T[o(S)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(y).length&&(x.splice(C,1),C--);break}C++}I(x,"_constraintGroup");var B=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,_=!1;function N(){k=E[m],m==="rangebreaks"&&(_=E._hasDayOfWeekBreaks)}for(C=0;C<w.length;C++){y=w[C];for(var G=0;G<B.length;G++){m=B[G],k=null;var X;for(S in y)if(M=o(S),a=h[M],E=T[M],m in E){if(!E.matches&&(X=E,m in a)){N();break}k===null&&m in a&&N()}if(m==="range"&&k&&a.range&&a.range.length===2&&a.range[0]!==null&&a.range[1]!==null&&(F=!0),m==="autorange"&&k===null&&F&&(k=!1),k===null&&m in X&&(k=X[m]),k!==null)for(S in y)E=T[o(S)],E[m]=m==="range"?k.slice():k,m==="rangebreaks"&&(E._hasDayOfWeekBreaks=_,v(E,T))}}};function e(h,T,c){var i=c.axIds,d=c.layoutOut,x=c.hasImage,w=d._axisConstraintGroups,C=d._axisMatchGroups,y=T._id,S=y.charAt(0),M=((d._splomAxes||{})[S]||{})[y]||{},a=T._id,E=a.charAt(0)==="x";T._matchGroup=null,T._constraintGroup=null;function m(Z,Q){return b.coerce(h,T,L,Z,Q)}m("constrain",x?"domain":"range"),b.coerce(h,T,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var k=T.type,I,O,z=[];for(I=0;I<i.length;I++)if(O=i[I],O!==a){var B=d[o(O)];B.type===k&&z.push(O)}var F=n(w,a);if(F){var _=[];for(I=0;I<z.length;I++)O=z[I],F[O]||_.push(O);z=_}var N=z.length,G,X;N&&(h.matches||M.matches)&&(G=b.coerce(h,T,{matches:{valType:"enumerated",values:z,dflt:z.indexOf(M.matches)!==-1?M.matches:void 0}},"matches"));var $=x&&!E?T.anchor:void 0;if(N&&!G&&(h.scaleanchor||$)&&(X=b.coerce(h,T,{scaleanchor:{valType:"enumerated",values:z.concat([!1])}},"scaleanchor",$)),G){T._matchGroup=l(C,a,G,1);var et=d[o(G)],ot=s(d,T)/s(d,et);E!==(G.charAt(0)==="x")&&(ot=(E?"x":"y")+ot),l(w,a,G,ot)}else h.matches&&i.indexOf(h.matches)!==-1&&b.warn("ignored "+T._name+'.matches: "'+h.matches+'" to avoid an infinite loop');if(X){var nt=m("scaleratio");nt||(nt=T.scaleratio=1),l(w,a,X,nt)}else h.scaleanchor&&i.indexOf(h.scaleanchor)!==-1&&b.warn("ignored "+T._name+'.scaleanchor: "'+h.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function s(h,T){var c=T.domain;return c||(c=h[o(T.overlaying)].domain),c[1]-c[0]}function n(h,T){for(var c=0;c<h.length;c++)if(h[c][T])return h[c];return null}function l(h,T,c,i){var d,x,w,C,y,S=n(h,T);S===null?(S={},S[T]=1,y=h.length,h.push(S)):y=h.indexOf(S);var M=Object.keys(S);for(d=0;d<h.length;d++)if(w=h[d],d!==y&&w[c]){var a=w[c];for(x=0;x<M.length;x++)C=M[x],w[C]=f(a,f(i,S[C]));h.splice(y,1);return}if(i!==1)for(x=0;x<M.length;x++){var E=M[x];S[E]=f(i,S[E])}S[c]=1}function f(h,T){var c="",i="",d,x;typeof h=="string"&&(c=h.match(/^[xy]*/)[0],d=c.length,h=+h.substr(d)),typeof T=="string"&&(i=T.match(/^[xy]*/)[0],x=i.length,T=+T.substr(x));var w=h*T;return!d&&!x?w:!d||!x||c.charAt(0)===i.charAt(0)?c+i+h*T:d===x?w:(d>x?c.substr(x):i.substr(d))+w}function u(h,T){for(var c=T._size,i=c.h/c.w,d={},x=Object.keys(h),w=0;w<x.length;w++){var C=x[w],y=h[C];if(typeof y=="string"){var S=y.match(/^[xy]*/)[0],M=S.length;y=+y.substr(M);for(var a=S.charAt(0)==="y"?i:1/i,E=0;E<M;E++)y*=a}d[C]=y}return d}V.enforce=function(T){var c=T._fullLayout,i=c._axisConstraintGroups||[],d,x,w,C,y,S,M,a;for(d=0;d<i.length;d++){w=u(i[d],c);var E=Object.keys(w),m=1/0,k=0,I=1/0,O={},z={},B=!1;for(x=0;x<E.length;x++)C=E[x],z[C]=y=c[o(C)],y._inputDomain?y.domain=y._inputDomain.slice():y._inputDomain=y.domain.slice(),y._inputRange||(y._inputRange=y.range.slice()),y.setScale(),O[C]=S=Math.abs(y._m)/w[C],m=Math.min(m,S),(y.constrain==="domain"||!y._constraintShrinkable)&&(I=Math.min(I,S)),delete y._constraintShrinkable,k=Math.max(k,S),y.constrain==="domain"&&(B=!0);if(!(m>p*k&&!B)){for(x=0;x<E.length;x++)if(C=E[x],S=O[C],y=z[C],M=y.constrain,S!==I||M==="domain")if(a=S/I,M==="range")A(y,a);else{var F=y._inputDomain,_=(y.domain[1]-y.domain[0])/(F[1]-F[0]),N=(y.r2l(y.range[1])-y.r2l(y.range[0]))/(y.r2l(y._inputRange[1])-y.r2l(y._inputRange[0]));if(a/=_,a*N<1){y.domain=y._input.domain=F.slice(),A(y,a);continue}if(N<1&&(y.range=y._input.range=y._inputRange.slice(),a*=N),y.autorange){var G=y.r2l(y.range[0]),X=y.r2l(y.range[1]),$=(G+X)/2,et=$,ot=$,nt=Math.abs(X-$),Z=$-nt*a*1.0001,Q=$+nt*a*1.0001,W=P.makePadFn(c,y,0),J=P.makePadFn(c,y,1);g(y,a);var it=Math.abs(y._m),K=P.concatExtremes(T,y),H=K.min,at=K.max,tt,lt;for(lt=0;lt<H.length;lt++)tt=H[lt].val-W(H[lt])/it,tt>Z&&tt<et&&(et=tt);for(lt=0;lt<at.length;lt++)tt=at[lt].val+J(at[lt])/it,tt<Q&&tt>ot&&(ot=tt);var dt=(ot-et)/(2*nt);a/=dt,et=y.l2r(et),ot=y.l2r(ot),y.range=y._input.range=G<X?[et,ot]:[ot,et]}g(y,a)}}}},V.getAxisGroup=function(T,c){for(var i=T._axisMatchGroups,d=0;d<i.length;d++){var x=i[d];if(x[c])return"g"+d}return c},V.clean=function(T,c){if(c._inputDomain){for(var i=!1,d=c._id,x=T._fullLayout._axisConstraintGroups,w=0;w<x.length;w++)if(x[w][d]){i=!0;break}(!i||c.constrain!=="domain")&&(c._input.domain=c.domain=c._inputDomain,delete c._inputDomain)}};function g(h,T){var c=h._inputDomain,i=r[h.constraintoward],d=c[0]+(c[1]-c[0])*i;h.domain=h._input.domain=[d+(c[0]-d)/T,d+(c[1]-d)/T],h.setScale()}},51184:function(j,V,t){var b=t(33428),P=t(3400),o=P.numberFormat,L=t(49760),A=t(89184),v=t(24040),p=P.strTranslate,r=t(72736),e=t(76308),s=t(43616),n=t(93024),l=t(54460),f=t(93972),u=t(86476),g=t(72760),h=g.selectingOrDrawing,T=g.freeMode,c=t(84284).FROM_TL,i=t(73696),d=t(39172).redrawReglTraces,x=t(7316),w=t(79811).getFromId,C=t(22676).prepSelect,y=t(22676).clearOutline,S=t(22676).selectOnClick,M=t(21160),a=t(33816),E=a.MINDRAG,m=a.MINZOOM,k=!0;function I(tt,lt,dt,mt,gt,Mt,Lt,zt){var xt=tt._fullLayout._zoomlayer,Ct=Lt+zt==="nsew",wt=(Lt+zt).length===1,Rt,Tt,Bt,Gt,te,Wt,jt,ie,ue,fe,pe,Te,Qt,Pt,Ot,Nt,Ht,St,kt,Ft,At,ft,pt;dt+=lt.yaxis._shift;function Dt(){if(Rt=lt.xaxis,Tt=lt.yaxis,ue=Rt._length,fe=Tt._length,jt=Rt._offset,ie=Tt._offset,Bt={},Bt[Rt._id]=Rt,Gt={},Gt[Tt._id]=Tt,Lt&&zt)for(var Ge=lt.overlays,Ee=0;Ee<Ge.length;Ee++){var Xe=Ge[Ee].xaxis;Bt[Xe._id]=Xe;var rr=Ge[Ee].yaxis;Gt[rr._id]=rr}te=at(Bt),Wt=at(Gt),Qt=B(te,zt),Pt=B(Wt,Lt),Ot=!Pt&&!Qt,Te=K(tt,tt._fullLayout._axisMatchGroups,Bt,Gt),pe=K(tt,tt._fullLayout._axisConstraintGroups,Bt,Gt,Te);var Je=pe.isSubplotConstrained||Te.isSubplotConstrained;Nt=zt||Je,Ht=Lt||Je;var He=tt._fullLayout;St=He._has("scattergl"),kt=He._has("splom"),Ft=He._has("svg")}Dt();var Ut=X(Pt+Qt,tt._fullLayout.dragmode,Ct),$t=z(lt,Lt+zt+"drag",Ut,dt,mt,gt,Mt);if(Ot&&!Ct)return $t.onmousedown=null,$t.style.pointerEvents="none",$t;var re={element:$t,gd:tt,plotinfo:lt};re.prepFn=function(Ge,Ee,Xe){var rr=re.dragmode,Je=tt._fullLayout.dragmode;Je!==rr&&(re.dragmode=Je),Dt(),ft=tt._fullLayout._invScaleX,pt=tt._fullLayout._invScaleY,Ot||(Ct?Ge.shiftKey?Je==="pan"?Je="zoom":h(Je)||(Je="pan"):Ge.ctrlKey&&(Je="pan"):Je="pan"),T(Je)?re.minDrag=1:re.minDrag=void 0,h(Je)?(re.xaxes=te,re.yaxes=Wt,C(Ge,Ee,Xe,re,Je)):(re.clickFn=We,h(rr)&&Be(),Ot||(Je==="zoom"?(re.moveFn=ge,re.doneFn=Re,re.minDrag=1,ne(Ge,Ee,Xe)):Je==="pan"&&(re.moveFn=cr,re.doneFn=xr))),tt._fullLayout._redrag=function(){var He=tt._dragdata;if(He&&He.element===$t){var yr=tt._fullLayout.dragmode;h(yr)||(Dt(),Yt([0,0,ue,fe]),re.moveFn(He.dx,He.dy))}}};function Be(){re.plotinfo.selection=!1,y(tt)}function We(Ge,Ee){var Xe=re.gd;if(Xe._fullLayout._activeShapeIndex>=0){Xe._fullLayout._deactivateShape(Xe);return}var rr=Xe._fullLayout.clickmode;if(Z(Xe),Ge===2&&!wt&&Lr(),Ct)rr.indexOf("select")>-1&&S(Ee,Xe,te,Wt,lt.id,re),rr.indexOf("event")>-1&&n.click(Xe,Ee,lt.id);else if(Ge===1&&wt){var Je=Lt?Tt:Rt,He=Lt==="s"||zt==="w"?0:1,yr=Je._name+".range["+He+"]",Ir=F(Je,He),Tr="left",vn="middle";if(Je.fixedrange)return;Lt?(vn=Lt==="n"?"top":"bottom",Je.side==="right"&&(Tr="right")):zt==="e"&&(Tr="right"),Xe._context.showAxisRangeEntryBoxes&&b.select($t).call(r.makeEditable,{gd:Xe,immediate:!0,background:Xe._fullLayout.paper_bgcolor,text:String(Ir),fill:Je.tickfont?Je.tickfont.color:"#444",horizontalAlign:Tr,verticalAlign:vn}).on("edit",function(Or){var En=Je.d2r(Or);En!==void 0&&v.call("_guiRelayout",Xe,yr,En)})}}u.init(re);var me,Se,je,vr,he,Ye,Qe,mr,ir,ve;function ne(Ge,Ee,Xe){var rr=$t.getBoundingClientRect();me=Ee-rr.left,Se=Xe-rr.top,tt._fullLayout._calcInverseTransform(tt);var Je=P.apply3DTransform(tt._fullLayout._invTransform)(me,Se);me=Je[0],Se=Je[1],je={l:me,r:me,w:0,t:Se,b:Se,h:0},vr=tt._hmpixcount?tt._hmlumcount/tt._hmpixcount:L(tt._fullLayout.plot_bgcolor).getLuminance(),he="M0,0H"+ue+"V"+fe+"H0V0",Ye=!1,Qe="xy",ve=!1,mr=$(xt,vr,jt,ie,he),ir=et(xt,jt,ie)}function ge(Ge,Ee){if(tt._transitioningWithDuration)return!1;var Xe=Math.max(0,Math.min(ue,ft*Ge+me)),rr=Math.max(0,Math.min(fe,pt*Ee+Se)),Je=Math.abs(Xe-me),He=Math.abs(rr-Se);je.l=Math.min(me,Xe),je.r=Math.max(me,Xe),je.t=Math.min(Se,rr),je.b=Math.max(Se,rr);function yr(){Qe="",je.r=je.l,je.t=je.b,ir.attr("d","M0,0Z")}if(pe.isSubplotConstrained)Je>m||He>m?(Qe="xy",Je/ue>He/fe?(He=Je*fe/ue,Se>rr?je.t=Se-He:je.b=Se+He):(Je=He*ue/fe,me>Xe?je.l=me-Je:je.r=me+Je),ir.attr("d",it(je))):yr();else if(Te.isSubplotConstrained)if(Je>m||He>m){Qe="xy";var Ir=Math.min(je.l/ue,(fe-je.b)/fe),Tr=Math.max(je.r/ue,(fe-je.t)/fe);je.l=Ir*ue,je.r=Tr*ue,je.b=(1-Ir)*fe,je.t=(1-Tr)*fe,ir.attr("d",it(je))}else yr();else!Pt||He<Math.min(Math.max(Je*.6,E),m)?Je<E||!Qt?yr():(je.t=0,je.b=fe,Qe="x",ir.attr("d",W(je,Se))):!Qt||Je<Math.min(He*.6,m)?(je.l=0,je.r=ue,Qe="y",ir.attr("d",J(je,me))):(Qe="xy",ir.attr("d",it(je)));je.w=je.r-je.l,je.h=je.b-je.t,Qe&&(ve=!0),tt._dragged=ve,ot(mr,ir,je,he,Ye,vr),Ae(),tt.emit("plotly_relayouting",At),Ye=!0}function Ae(){At={},(Qe==="xy"||Qe==="x")&&(_(te,je.l/ue,je.r/ue,At,pe.xaxes),dr("x",At)),(Qe==="xy"||Qe==="y")&&(_(Wt,(fe-je.b)/fe,(fe-je.t)/fe,At,pe.yaxes),dr("y",At))}function Re(){Ae(),Z(tt),xr(),Q(tt)}var ze=[0,0,ue,fe],ke=null,_e=a.REDRAWDELAY,Ke=lt.mainplot?tt._fullLayout._plots[lt.mainplot]:lt;function hr(Ge){if(!tt._context._scrollZoom.cartesian&&!tt._fullLayout._enablescrollzoom)return;if(Be(),tt._transitioningWithDuration){Ge.preventDefault(),Ge.stopPropagation();return}Dt(),clearTimeout(ke);var Ee=-Ge.deltaY;if(isFinite(Ee)||(Ee=Ge.wheelDelta/10),!isFinite(Ee)){P.log("Did not find wheel motion attributes: ",Ge);return}var Xe=Math.exp(-Math.min(Math.max(Ee,-20),20)/200),rr=Ke.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Je=(Ge.clientX-rr.left)/rr.width,He=(rr.bottom-Ge.clientY)/rr.height,yr;function Ir(Tr,vn,Or){if(Tr.fixedrange)return;var En=P.simpleMap(Tr.range,Tr.r2l),nn=En[0]+(En[1]-En[0])*vn;function gr(Pr){return Tr.l2r(nn+(Pr-nn)*Or)}Tr.range=En.map(gr)}if(Nt){for(zt||(Je=.5),yr=0;yr<te.length;yr++)Ir(te[yr],Je,Xe);dr("x"),ze[2]*=Xe,ze[0]+=ze[2]*Je*(1/Xe-1)}if(Ht){for(Lt||(He=.5),yr=0;yr<Wt.length;yr++)Ir(Wt[yr],He,Xe);dr("y"),ze[3]*=Xe,ze[1]+=ze[3]*(1-He)*(1/Xe-1)}Yt(ze),fr(),tt.emit("plotly_relayouting",At),ke=setTimeout(function(){tt._fullLayout&&(ze=[0,0,ue,fe],xr())},_e),Ge.preventDefault()}Lt.length*zt.length!==1&&H($t,hr);function cr(Ge,Ee){if(Ge=Ge*ft,Ee=Ee*pt,tt._transitioningWithDuration)return;if(tt._fullLayout._replotting=!0,Qt==="ew"||Pt==="ns"){var Xe=Qt?-Ge:0,rr=Pt?-Ee:0;if(Te.isSubplotConstrained){if(Qt&&Pt){var Je=(Ge/ue-Ee/fe)/2;Ge=Je*ue,Ee=-Je*fe,Xe=-Ge,rr=-Ee}Pt?Xe=-rr*ue/fe:rr=-Xe*fe/ue}Qt&&(N(te,Ge),dr("x")),Pt&&(N(Wt,Ee),dr("y")),Yt([Xe,rr,ue,fe]),fr(),tt.emit("plotly_relayouting",At);return}function He(gr,Pr,Xr){for(var kr=1-Pr,pn,en,Tn=0;Tn<gr.length;Tn++){var Ln=gr[Tn];if(!Ln.fixedrange){pn=Ln,en=Ln._rl[kr]+(Ln._rl[Pr]-Ln._rl[kr])/G(Xr/Ln._length);var Yn=Ln.l2r(en);Yn!==!1&&Yn!==void 0&&(Ln.range[Pr]=Yn)}}return pn._length*(pn._rl[Pr]-en)/(pn._rl[Pr]-pn._rl[kr])}var yr=Qt==="w"==(Pt==="n")?1:-1;if(Qt&&Pt&&(pe.isSubplotConstrained||Te.isSubplotConstrained)){var Ir=(Ge/ue+yr*Ee/fe)/2;Ge=Ir*ue,Ee=yr*Ir*fe}var Tr,vn;if(Qt==="w"?Ge=He(te,0,Ge):Qt==="e"?Ge=He(te,1,-Ge):Qt||(Ge=0),Pt==="n"?Ee=He(Wt,1,Ee):Pt==="s"?Ee=He(Wt,0,-Ee):Pt||(Ee=0),Tr=Qt==="w"?Ge:0,vn=Pt==="n"?Ee:0,pe.isSubplotConstrained&&!Te.isSubplotConstrained||Te.isSubplotConstrained&&Qt&&Pt&&yr>0){var Or;if(Te.isSubplotConstrained||!Qt&&Pt.length===1){for(Or=0;Or<te.length;Or++)te[Or].range=te[Or]._r.slice(),M(te[Or],1-Ee/fe);Ge=Ee*ue/fe,Tr=Ge/2}if(Te.isSubplotConstrained||!Pt&&Qt.length===1){for(Or=0;Or<Wt.length;Or++)Wt[Or].range=Wt[Or]._r.slice(),M(Wt[Or],1-Ge/ue);Ee=Ge*fe/ue,vn=Ee/2}}(!Te.isSubplotConstrained||!Pt)&&dr("x"),(!Te.isSubplotConstrained||!Qt)&&dr("y");var En=ue-Ge,nn=fe-Ee;Te.isSubplotConstrained&&!(Qt&&Pt)&&(Qt?(vn=Tr?0:Ge*fe/ue,nn=En*fe/ue):(Tr=vn?0:Ee*ue/fe,En=nn*ue/fe)),Yt([Tr,vn,En,nn]),fr(),tt.emit("plotly_relayouting",At)}function dr(Ge,Ee){for(var Xe=Te.isSubplotConstrained?{x:Wt,y:te}[Ge]:Te[Ge+"axes"],rr=Te.isSubplotConstrained?{x:te,y:Wt}[Ge]:[],Je=0;Je<Xe.length;Je++){var He=Xe[Je],yr=He._id,Ir=Te.xLinks[yr]||Te.yLinks[yr],Tr=rr[0]||Bt[Ir]||Gt[Ir];Tr&&(Ee?(Ee[He._name+".range[0]"]=Ee[Tr._name+".range[0]"],Ee[He._name+".range[1]"]=Ee[Tr._name+".range[1]"]):He.range=Tr.range.slice())}}function fr(){var Ge=[],Ee;function Xe(yr){for(Ee=0;Ee<yr.length;Ee++)yr[Ee].fixedrange||Ge.push(yr[Ee]._id)}function rr(yr,Ir){for(Ee=0;Ee<yr.length;Ee++){var Tr=yr[Ee],vn=Tr[Ir];!Tr.fixedrange&&vn.tickmode==="sync"&&Ge.push(vn._id)}}for(Nt&&(Xe(te),Xe(pe.xaxes),Xe(Te.xaxes),rr(lt.overlays,"xaxis")),Ht&&(Xe(Wt),Xe(pe.yaxes),Xe(Te.yaxes),rr(lt.overlays,"yaxis")),At={},Ee=0;Ee<Ge.length;Ee++){var Je=Ge[Ee],He=w(tt,Je);l.drawOne(tt,He,{skipTitle:!0}),At[He._name+".range[0]"]=He.range[0],At[He._name+".range[1]"]=He.range[1]}l.redrawComponents(tt,Ge)}function Lr(){if(!tt._transitioningWithDuration){var Ge=tt._context.doubleClick,Ee=[];Qt&&(Ee=Ee.concat(te)),Pt&&(Ee=Ee.concat(Wt)),Te.xaxes&&(Ee=Ee.concat(Te.xaxes)),Te.yaxes&&(Ee=Ee.concat(Te.yaxes));var Xe={},rr,Je;if(Ge==="reset+autosize")for(Ge="autosize",Je=0;Je<Ee.length;Je++){rr=Ee[Je];var He=rr._rangeInitial0,yr=rr._rangeInitial1,Ir=He!==void 0||yr!==void 0;if(Ir&&(He!==void 0&&He!==rr.range[0]||yr!==void 0&&yr!==rr.range[1])||!Ir&&rr.autorange!==!0){Ge="reset";break}}if(Ge==="autosize")for(Je=0;Je<Ee.length;Je++)rr=Ee[Je],rr.fixedrange||(Xe[rr._name+".autorange"]=!0);else if(Ge==="reset"){for((Qt||pe.isSubplotConstrained)&&(Ee=Ee.concat(pe.xaxes)),Pt&&!pe.isSubplotConstrained&&(Ee=Ee.concat(pe.yaxes)),pe.isSubplotConstrained&&(Qt?Pt||(Ee=Ee.concat(Wt)):Ee=Ee.concat(te)),Je=0;Je<Ee.length;Je++)if(rr=Ee[Je],!rr.fixedrange){var Tr=rr._name,vn=rr._autorangeInitial;rr._rangeInitial0===void 0&&rr._rangeInitial1===void 0?Xe[Tr+".autorange"]=!0:rr._rangeInitial0===void 0?(Xe[Tr+".autorange"]=vn,Xe[Tr+".range"]=[null,rr._rangeInitial1]):rr._rangeInitial1===void 0?(Xe[Tr+".range"]=[rr._rangeInitial0,null],Xe[Tr+".autorange"]=vn):Xe[Tr+".range"]=[rr._rangeInitial0,rr._rangeInitial1]}}tt.emit("plotly_doubleclick",null),v.call("_guiRelayout",tt,Xe)}}function xr(){Yt([0,0,ue,fe]),P.syncOrAsync([x.previousPromises,function(){tt._fullLayout._replotting=!1,v.call("_guiRelayout",tt,At)}],tt)}function Yt(Ge){var Ee=tt._fullLayout,Xe=Ee._plots,rr=Ee._subplots.cartesian,Je,He,yr,Ir;if(kt&&v.subplotsRegistry.splom.drag(tt),St){for(Je=0;Je<rr.length;Je++)if(He=Xe[rr[Je]],yr=He.xaxis,Ir=He.yaxis,He._scene){yr.limitRange&&yr.limitRange(),Ir.limitRange&&Ir.limitRange();var Tr=P.simpleMap(yr.range,yr.r2l),vn=P.simpleMap(Ir.range,Ir.r2l);He._scene.update({range:[Tr[0],vn[0],Tr[1],vn[1]]})}}if((kt||St)&&(i(tt),d(tt)),Ft){var Or=Ge[2]/Rt._length,En=Ge[3]/Tt._length;for(Je=0;Je<rr.length;Je++){He=Xe[rr[Je]],yr=He.xaxis,Ir=He.yaxis;var nn=(Nt||Te.isSubplotConstrained)&&!yr.fixedrange&&Bt[yr._id],gr=(Ht||Te.isSubplotConstrained)&&!Ir.fixedrange&&Gt[Ir._id],Pr,Xr,kr,pn;if(nn?(Pr=Or,kr=zt||Te.isSubplotConstrained?Ge[0]:tr(yr,Pr)):Te.xaHash[yr._id]?(Pr=Or,kr=Ge[0]*yr._length/Rt._length):Te.yaHash[yr._id]?(Pr=En,kr=Pt==="ns"?-Ge[1]*yr._length/Tt._length:tr(yr,Pr,{n:"top",s:"bottom"}[Pt])):(Pr=Jt(yr,Or,En),kr=qe(yr,Pr)),Pr>1&&(yr.maxallowed!==void 0&&Nt===(yr.range[0]<yr.range[1]?"e":"w")||yr.minallowed!==void 0&&Nt===(yr.range[0]<yr.range[1]?"w":"e"))&&(Pr=1,kr=0),gr?(Xr=En,pn=Lt||Te.isSubplotConstrained?Ge[1]:tr(Ir,Xr)):Te.yaHash[Ir._id]?(Xr=En,pn=Ge[1]*Ir._length/Tt._length):Te.xaHash[Ir._id]?(Xr=Or,pn=Qt==="ew"?-Ge[0]*Ir._length/Rt._length:tr(Ir,Xr,{e:"right",w:"left"}[Qt])):(Xr=Jt(Ir,Or,En),pn=qe(Ir,Xr)),Xr>1&&(Ir.maxallowed!==void 0&&Ht===(Ir.range[0]<Ir.range[1]?"n":"s")||Ir.minallowed!==void 0&&Ht===(Ir.range[0]<Ir.range[1]?"s":"n"))&&(Xr=1,pn=0),!(!Pr&&!Xr)){Pr||(Pr=1),Xr||(Xr=1);var en=yr._offset-kr/Pr,Tn=Ir._offset-pn/Xr;He.clipRect.call(s.setTranslate,kr,pn).call(s.setScale,Pr,Xr),He.plot.call(s.setTranslate,en,Tn).call(s.setScale,1/Pr,1/Xr),(Pr!==He.xScaleFactor||Xr!==He.yScaleFactor)&&(s.setPointGroupScale(He.zoomScalePts,Pr,Xr),s.setTextPointsScale(He.zoomScaleTxt,Pr,Xr)),s.hideOutsideRangePoints(He.clipOnAxisFalseTraces,He),He.xScaleFactor=Pr,He.yScaleFactor=Xr}}}}function Jt(Ge,Ee,Xe){return Ge.fixedrange?0:Nt&&pe.xaHash[Ge._id]?Ee:Ht&&(pe.isSubplotConstrained?pe.xaHash:pe.yaHash)[Ge._id]?Xe:0}function qe(Ge,Ee){return Ee?(Ge.range=Ge._r.slice(),M(Ge,Ee),tr(Ge,Ee)):0}function tr(Ge,Ee,Xe){return Ge._length*(1-Ee)*c[Xe||Ge.constraintoward||"middle"]}return $t}function O(tt,lt,dt,mt){var gt=P.ensureSingle(tt.draglayer,lt,dt,function(Mt){Mt.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",tt.id)});return gt.call(f,mt),gt.node()}function z(tt,lt,dt,mt,gt,Mt,Lt){var zt=O(tt,"rect",lt,dt);return b.select(zt).call(s.setRect,mt,gt,Mt,Lt),zt}function B(tt,lt){for(var dt=0;dt<tt.length;dt++)if(!tt[dt].fixedrange)return lt;return""}function F(tt,lt){var dt=tt.range[lt],mt=Math.abs(dt-tt.range[1-lt]),gt;return tt.type==="date"?dt:tt.type==="log"?(gt=Math.ceil(Math.max(0,-Math.log(mt)/Math.LN10))+3,o("."+gt+"g")(Math.pow(10,dt))):(gt=Math.floor(Math.log(Math.abs(dt))/Math.LN10)-Math.floor(Math.log(mt)/Math.LN10)+4,o("."+String(gt)+"g")(dt))}function _(tt,lt,dt,mt,gt){for(var Mt=0;Mt<tt.length;Mt++){var Lt=tt[Mt];if(!Lt.fixedrange)if(Lt.rangebreaks){var zt=Lt._id.charAt(0)==="y",xt=zt?1-lt:lt,Ct=zt?1-dt:dt;mt[Lt._name+".range[0]"]=Lt.l2r(Lt.p2l(xt*Lt._length)),mt[Lt._name+".range[1]"]=Lt.l2r(Lt.p2l(Ct*Lt._length))}else{var wt=Lt._rl[0],Rt=Lt._rl[1]-wt;mt[Lt._name+".range[0]"]=Lt.l2r(wt+Rt*lt),mt[Lt._name+".range[1]"]=Lt.l2r(wt+Rt*dt)}}if(gt&&gt.length){var Tt=(lt+(1-dt))/2;_(gt,Tt,1-Tt,mt,[])}}function N(tt,lt){for(var dt=0;dt<tt.length;dt++){var mt=tt[dt];if(!mt.fixedrange){if(mt.rangebreaks){var gt=0,Mt=mt._length,Lt=mt.p2l(gt+lt)-mt.p2l(gt),zt=mt.p2l(Mt+lt)-mt.p2l(Mt),xt=(Lt+zt)/2;mt.range=[mt.l2r(mt._rl[0]-xt),mt.l2r(mt._rl[1]-xt)]}else mt.range=[mt.l2r(mt._rl[0]-lt/mt._m),mt.l2r(mt._rl[1]-lt/mt._m)];mt.limitRange&&mt.limitRange()}}}function G(tt){return 1-(tt>=0?Math.min(tt,.9):1/(1/Math.max(tt,-.3)+3.222))}function X(tt,lt,dt){return tt?tt==="nsew"?dt?"":lt==="pan"?"move":"crosshair":tt.toLowerCase()+"-resize":"pointer"}function $(tt,lt,dt,mt,gt){return tt.append("path").attr("class","zoombox").style({fill:lt>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",p(dt,mt)).attr("d",gt+"Z")}function et(tt,lt,dt){return tt.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1,opacity:0}).attr("transform",p(lt,dt)).attr("d","M0,0Z")}function ot(tt,lt,dt,mt,gt,Mt){tt.attr("d",mt+"M"+dt.l+","+dt.t+"v"+dt.h+"h"+dt.w+"v-"+dt.h+"h-"+dt.w+"Z"),nt(tt,lt,gt,Mt)}function nt(tt,lt,dt,mt){dt||(tt.transition().style("fill",mt>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),lt.transition().style("opacity",1).duration(200))}function Z(tt){b.select(tt).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Q(tt){k&&tt.data&&tt._context.showTips&&(P.notifier(P._(tt,"Double-click to zoom back out"),"long"),k=!1)}function W(tt,lt){return"M"+(tt.l-.5)+","+(lt-m-.5)+"h-3v"+(2*m+1)+"h3ZM"+(tt.r+.5)+","+(lt-m-.5)+"h3v"+(2*m+1)+"h-3Z"}function J(tt,lt){return"M"+(lt-m-.5)+","+(tt.t-.5)+"v-3h"+(2*m+1)+"v3ZM"+(lt-m-.5)+","+(tt.b+.5)+"v3h"+(2*m+1)+"v-3Z"}function it(tt){var lt=Math.floor(Math.min(tt.b-tt.t,tt.r-tt.l,m)/2);return"M"+(tt.l-3.5)+","+(tt.t-.5+lt)+"h3v"+-lt+"h"+lt+"v-3h-"+(lt+3)+"ZM"+(tt.r+3.5)+","+(tt.t-.5+lt)+"h-3v"+-lt+"h"+-lt+"v-3h"+(lt+3)+"ZM"+(tt.r+3.5)+","+(tt.b+.5-lt)+"h-3v"+lt+"h"+-lt+"v3h"+(lt+3)+"ZM"+(tt.l-3.5)+","+(tt.b+.5-lt)+"h3v"+lt+"h"+lt+"v3h-"+(lt+3)+"Z"}function K(tt,lt,dt,mt,gt){for(var Mt=!1,Lt={},zt={},xt,Ct,wt,Rt,Tt=(gt||{}).xaHash,Bt=(gt||{}).yaHash,Gt=0;Gt<lt.length;Gt++){var te=lt[Gt];for(xt in dt)if(te[xt]){for(wt in te)!(gt&&(Tt[wt]||Bt[wt]))&&!(wt.charAt(0)==="x"?dt:mt)[wt]&&(Lt[wt]=xt);for(Ct in mt)!(gt&&(Tt[Ct]||Bt[Ct]))&&te[Ct]&&(Mt=!0)}for(Ct in mt)if(te[Ct])for(Rt in te)!(gt&&(Tt[Rt]||Bt[Rt]))&&!(Rt.charAt(0)==="x"?dt:mt)[Rt]&&(zt[Rt]=Ct)}Mt&&(P.extendFlat(Lt,zt),zt={});var Wt={},jt=[];for(wt in Lt){var ie=w(tt,wt);jt.push(ie),Wt[ie._id]=ie}var ue={},fe=[];for(Rt in zt){var pe=w(tt,Rt);fe.push(pe),ue[pe._id]=pe}return{xaHash:Wt,yaHash:ue,xaxes:jt,yaxes:fe,xLinks:Lt,yLinks:zt,isSubplotConstrained:Mt}}function H(tt,lt){if(!A)tt.onwheel!==void 0?tt.onwheel=lt:tt.onmousewheel!==void 0?tt.onmousewheel=lt:tt.isAddedWheelEvent||(tt.isAddedWheelEvent=!0,tt.addEventListener("wheel",lt,{passive:!1}));else{var dt=tt.onwheel!==void 0?"wheel":"mousewheel";tt._onwheel&&tt.removeEventListener(dt,tt._onwheel),tt._onwheel=lt,tt.addEventListener(dt,lt,{passive:!1})}}function at(tt){var lt=[];for(var dt in tt)lt.push(tt[dt]);return lt}j.exports={makeDragBox:I,makeDragger:O,makeRectDragger:z,makeZoombox:$,makeCorners:et,updateZoombox:ot,xyCorners:it,transitionZoombox:nt,removeZoombox:Z,showDoubleClickNotifier:Q,attachWheelEventHandler:H}},42464:function(j,V,t){var b=t(33428),P=t(93024),o=t(86476),L=t(93972),A=t(51184).makeDragBox,v=t(33816).DRAGGERSIZE;V.initInteractions=function(r){var e=r._fullLayout;if(r._context.staticPlot){b.select(r).selectAll(".drag").remove();return}if(!(!e._has("cartesian")&&!e._has("splom"))){var s=Object.keys(e._plots||{}).sort(function(l,f){if((e._plots[l].mainplot&&!0)===(e._plots[f].mainplot&&!0)){var u=l.split("y"),g=f.split("y");return u[0]===g[0]?Number(u[1]||1)-Number(g[1]||1):Number(u[0]||1)-Number(g[0]||1)}return e._plots[l].mainplot?1:-1});s.forEach(function(l){var f=e._plots[l],u=f.xaxis,g=f.yaxis;if(!f.mainplot){var h=A(r,f,u._offset,g._offset,u._length,g._length,"ns","ew");h.onmousemove=function(i){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===l&&r._fullLayout._plots[l]&&P.hover(r,i,l)},P.hover(r,i,l),r._fullLayout._lasthover=h,r._fullLayout._hoversubplot=l},h.onmouseout=function(i){r._dragging||(r._fullLayout._hoversubplot=null,o.unhover(r,i))},r._context.showAxisDragHandles&&(A(r,f,u._offset-v,g._offset-v,v,v,"n","w"),A(r,f,u._offset+u._length,g._offset-v,v,v,"n","e"),A(r,f,u._offset-v,g._offset+g._length,v,v,"s","w"),A(r,f,u._offset+u._length,g._offset+g._length,v,v,"s","e"))}if(r._context.showAxisDragHandles){if(l===u._mainSubplot){var T=u._mainLinePosition;u.side==="top"&&(T-=v),A(r,f,u._offset+u._length*.1,T,u._length*.8,v,"","ew"),A(r,f,u._offset,T,u._length*.1,v,"","w"),A(r,f,u._offset+u._length*.9,T,u._length*.1,v,"","e")}if(l===g._mainSubplot){var c=g._mainLinePosition;g.side!=="right"&&(c-=v),A(r,f,c,g._offset+g._length*.1,v,g._length*.8,"ns",""),A(r,f,c,g._offset+g._length*.9,v,g._length*.1,"s",""),A(r,f,c,g._offset,v,g._length*.1,"n","")}}});var n=e._hoverlayer.node();n.onmousemove=function(l){l.target=r._fullLayout._lasthover,P.hover(r,l,e._hoversubplot)},n.onclick=function(l){l.target=r._fullLayout._lasthover,P.click(r,l)},n.onmousedown=function(l){r._fullLayout._lasthover.onmousedown(l)},V.updateFx(r)}},V.updateFx=function(p){var r=p._fullLayout,e=r.dragmode==="pan"?"move":"crosshair";L(r._draggers,e)}},36632:function(j,V,t){var b=t(24040),P=t(3400),o=t(79811);j.exports=function(A){return function(p,r){var e=p[A];if(Array.isArray(e))for(var s=b.subplotsRegistry.cartesian,n=s.idRegex,l=r._subplots,f=l.xaxis,u=l.yaxis,g=l.cartesian,h=r._has("cartesian")||r._has("gl2d"),T=0;T<e.length;T++){var c=e[T];if(P.isPlainObject(c)){var i=o.cleanId(c.xref,"x",!1),d=o.cleanId(c.yref,"y",!1),x=n.x.test(i),w=n.y.test(d);if(x||w){h||P.pushUnique(r._basePlotModules,s);var C=!1;x&&f.indexOf(i)===-1&&(f.push(i),C=!0),w&&u.indexOf(d)===-1&&(u.push(d),C=!0),C&&x&&w&&g.push(i+d)}}}}}},57952:function(j,V,t){var b=t(33428),P=t(24040),o=t(3400),L=t(7316),A=t(43616),v=t(84888)._M,p=t(79811),r=t(33816),e=t(9616),s=o.ensureSingle;function n(c,i,d){return o.ensureSingle(c,i,d,function(x){x.datum(d)})}var l=r.zindexSeparator;V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=r.idRegex,V.attrRegex=r.attrRegex,V.attributes=t(26720),V.layoutAttributes=t(94724),V.supplyLayoutDefaults=t(67352),V.transitionAxes=t(73736),V.finalizeSubplots=function(c,i){var d=i._subplots,x=d.xaxis,w=d.yaxis,C=d.cartesian,y=C.concat(d.gl2d||[]),S={},M={},a,E,m;for(a=0;a<y.length;a++){var k=y[a].split("y");S[k[0]]=1,M["y"+k[1]]=1}for(a=0;a<x.length;a++)E=x[a],S[E]||(m=(c[p.id2name(E)]||{}).anchor,r.idRegex.y.test(m)||(m="y"),C.push(E+m),y.push(E+m),M[m]||(M[m]=1,o.pushUnique(w,m)));for(a=0;a<w.length;a++)m=w[a],M[m]||(E=(c[p.id2name(m)]||{}).anchor,r.idRegex.x.test(E)||(E="x"),C.push(E+m),y.push(E+m),S[E]||(S[E]=1,o.pushUnique(x,E)));if(!y.length){E="",m="";for(var I in c)if(r.attrRegex.test(I)){var O=I.charAt(0);O==="x"?(!E||+I.substr(5)<+E.substr(5))&&(E=I):(!m||+I.substr(5)<+m.substr(5))&&(m=I)}E=E?p.name2id(E):"x",m=m?p.name2id(m):"y",x.push(E),w.push(m),C.push(E+m)}},V.plot=function(c,i,d,x){var w=c._fullLayout,C=w._subplots.cartesian,y=c.calcdata,S;if(!Array.isArray(i))for(i=[],S=0;S<y.length;S++)i.push(S);for(var M=w._zindices,a=0;a<M.length;a++){var E=M[a];for(S=0;S<C.length;S++){var m=C[S],k=w._plots[m];if(a>0){var I=k.id;if(I.indexOf(l)!==-1)continue;I+=l+(a+1),k=o.extendFlat({},k,{id:I,plot:w._cartesianlayer.selectAll(".subplot").select("."+I)})}for(var O=[],z,B=0;B<y.length;B++){var F=y[B],_=F[0].trace;E===(_.zorder||0)&&_.xaxis+_.yaxis===m&&((i.indexOf(_.index)!==-1||_.carpet)&&(z&&z[0].trace.xaxis+z[0].trace.yaxis===m&&["tonextx","tonexty","tonext"].indexOf(_.fill)!==-1&&O.indexOf(z)===-1&&O.push(z),O.push(F)),z=F)}f(c,k,O,d,x)}}};function f(c,i,d,x,w){for(var C=r.traceLayerClasses,y=c._fullLayout,S=y._zindices,M=y._modules,a,E,m,k=[],I=[],O=0;O<S.length;O++)for(var z=S[O],B=0;B<M.length;B++){a=M[B];var F=a.name,_=P.modules[F].categories;if(_.svg){var N=a.layerName||F+"layer",G=N+(O?Number(O)+1:""),X=a.plot;E=v(d,X,z),m=E[0],d=E[1],m.length&&k.push({i:C.indexOf(N),zorder:O,className:G,plotMethod:X,cdModule:m}),_.zoomScale&&I.push("."+G)}}k.sort(function(ot,nt){return(ot.zorder||0)-(nt.zorder||0)||ot.i-nt.i});var $=i.plot.selectAll("g.mlayer").data(k,function(ot){return ot.className});if($.enter().append("g").attr("class",function(ot){return ot.className}).classed("mlayer",!0).classed("rangeplot",i.isRangePlot),$.exit().remove(),$.order(),$.each(function(ot){var nt=b.select(this),Z=ot.className;ot.plotMethod(c,i,ot.cdModule,nt,x,w),r.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&A.setClipUrl(nt,i.layerClipId,c)}),y._has("scattergl")&&(a=P.getModule("scattergl"),m=v(d,a)[0],a.plot(c,i,m)),!c._context.staticPlot&&(i._hasClipOnAxisFalse&&(i.clipOnAxisFalseTraces=i.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),I.length)){var et=i.plot.selectAll(I.join(",")).selectAll(".trace");i.zoomScalePts=et.selectAll("path.point"),i.zoomScaleTxt=et.selectAll(".textpoint")}}V.clean=function(c,i,d,x){var w=x._plots||{},C=i._plots||{},y=x._subplots||{},S,M,a;if(x._hasOnlyLargeSploms&&!i._hasOnlyLargeSploms)for(a in w)S=w[a],S.plotgroup&&S.plotgroup.remove();var E=x._has&&x._has("gl"),m=i._has&&i._has("gl");if(E&&!m)for(a in w)S=w[a],S._scene&&S._scene.destroy();if(y.xaxis&&y.yaxis){var k=p.listIds({_fullLayout:x});for(M=0;M<k.length;M++){var I=k[M];i[p.id2name(I)]||x._infolayer.selectAll(".g-"+I+"title").remove()}}var O=x._has&&x._has("cartesian"),z=i._has&&i._has("cartesian");if(O&&!z)h(x._cartesianlayer.selectAll(".subplot"),x),x._defs.selectAll(".axesclip").remove(),delete x._axisConstraintGroups,delete x._axisMatchGroups;else if(y.cartesian)for(M=0;M<y.cartesian.length;M++){var B=y.cartesian[M];if(B.indexOf(l)===-1&&!C[B]){var F="."+B+",."+B+"-x,."+B+"-y";x._cartesianlayer.selectAll(F).remove(),T(B,x)}}},V.drawFramework=function(c){var i=c._fullLayout,d=c.calcdata,x,w={};for(x=0;x<d.length;x++){var C=d[x][0],y=C.trace,S=y.zorder||0;w[S]||(w[S]=[]),w[S].push(C)}var M=Object.keys(w).map(Number).sort(o.sorterAsc);M.length||(M=[0]),i._zindices=M;var a=u(c),E=a.length,m=[];for(x=0;x<E;x++)m[x]=a[x].slice();for(var k=1;k<M.length;k++){var I=[];for(x=0;x<E;x++)I[x]=a[x].slice(),I[x][0]+=l+(k+1);m=m.concat(I)}var O=i._cartesianlayer.selectAll(".subplot").data(m,String);O.enter().append("g").attr("class",function(z){return"subplot "+z[0]}),O.order(),O.exit().call(h,i),O.each(function(z){var B=z[0],F=B.indexOf(l),_=F!==-1,N=_?B.slice(0,F):B,G=i._plots[B];G||(G=o.extendFlat({},i._plots[N]),G&&(G.id=B,i._plots[B]=G,i._subplots.cartesian.push(B))),G&&(G.plotgroup=b.select(this),g(c,G),_||(G.draglayer=s(i._draggers,"g",B)))})},V.rangePlot=function(c,i,d){g(c,i),f(c,i,d),L.style(c)};function u(c){var i=c._fullLayout,d=i._zindices.length,x=i._subplots.cartesian,w=x.length,C,y,S,M,a,E,m=[],k=[];for(C=0;C<w;C++){S=x[C],M=i._plots[S],a=M.xaxis,E=M.yaxis;var I=a._mainAxis,O=E._mainAxis,z=I._id+O._id,B=i._plots[z];M.overlays=[],z!==S&&B?(M.mainplot=z,M.mainplotinfo=B,k.push(S)):(M.mainplot=void 0,M.mainplotinfo=void 0,m.push(S))}for(C=0;C<k.length;C++)S=k[C],M=i._plots[S],M.mainplotinfo.overlays.push(M);var F=m.concat(k),_=[];for(C=0;C<w;C++){S=F[C],M=i._plots[S],a=M.xaxis,E=M.yaxis;for(var N=[],G=1;G<=d;G++){var X="";for(G>1&&(X+=l+G),N.push(S+X),y=0;y<M.overlays.length;y++)N.push(M.overlays[y].id+X)}N=N.concat([a.layer,E.layer,a.overlaying||"",E.overlaying||""]),_.push(N)}return _}function g(c,i){var d=i.plotgroup,x=i.id,w=x.indexOf(l),C=w!==-1,y=r.layerValue2layerClass[i.xaxis.layer],S=r.layerValue2layerClass[i.yaxis.layer],M=c._fullLayout._hasOnlyLargeSploms;if(i.mainplot){var m=i.mainplotinfo,k=m.plotgroup,I=x+"-x",O=x+"-y";i.minorGridlayer=m.minorGridlayer,i.gridlayer=m.gridlayer,i.zerolinelayer=m.zerolinelayer,s(m.overlinesBelow,"path",I),s(m.overlinesBelow,"path",O),s(m.overaxesBelow,"g",I),s(m.overaxesBelow,"g",O),i.plot=s(m.overplot,"g",x),s(m.overlinesAbove,"path",I),s(m.overlinesAbove,"path",O),s(m.overaxesAbove,"g",I),s(m.overaxesAbove,"g",O),i.xlines=k.select(".overlines-"+y).select("."+I),i.ylines=k.select(".overlines-"+S).select("."+O),i.xaxislayer=k.select(".overaxes-"+y).select("."+I),i.yaxislayer=k.select(".overaxes-"+S).select("."+O)}else if(M)i.xlines=s(d,"path","xlines-above"),i.ylines=s(d,"path","ylines-above"),i.xaxislayer=s(d,"g","xaxislayer-above"),i.yaxislayer=s(d,"g","yaxislayer-above");else{if(!C){var a=s(d,"g","layer-subplot");i.shapelayer=s(a,"g","shapelayer"),i.imagelayer=s(a,"g","imagelayer"),i.minorGridlayer=s(d,"g","minor-gridlayer"),i.gridlayer=s(d,"g","gridlayer"),i.zerolinelayer=s(d,"g","zerolinelayer");var E=s(d,"g","layer-between");i.shapelayerBetween=s(E,"g","shapelayer"),i.imagelayerBetween=s(E,"g","imagelayer"),s(d,"path","xlines-below"),s(d,"path","ylines-below"),i.overlinesBelow=s(d,"g","overlines-below"),s(d,"g","xaxislayer-below"),s(d,"g","yaxislayer-below"),i.overaxesBelow=s(d,"g","overaxes-below")}i.overplot=s(d,"g","overplot"),i.plot=s(i.overplot,"g",x),C||(i.xlines=s(d,"path","xlines-above"),i.ylines=s(d,"path","ylines-above"),i.overlinesAbove=s(d,"g","overlines-above"),s(d,"g","xaxislayer-above"),s(d,"g","yaxislayer-above"),i.overaxesAbove=s(d,"g","overaxes-above"),i.xlines=d.select(".xlines-"+y),i.ylines=d.select(".ylines-"+S),i.xaxislayer=d.select(".xaxislayer-"+y),i.yaxislayer=d.select(".yaxislayer-"+S))}C||(M||(n(i.minorGridlayer,"g",i.xaxis._id),n(i.minorGridlayer,"g",i.yaxis._id),i.minorGridlayer.selectAll("g").map(function(z){return z[0]}).sort(p.idSort),n(i.gridlayer,"g",i.xaxis._id),n(i.gridlayer,"g",i.yaxis._id),i.gridlayer.selectAll("g").map(function(z){return z[0]}).sort(p.idSort)),i.xlines.style("fill","none").classed("crisp",!0),i.ylines.style("fill","none").classed("crisp",!0))}function h(c,i){if(c){var d={};c.each(function(M){var a=M[0],E=b.select(this);E.remove(),T(a,i),d[a]=!0});for(var x in i._plots)for(var w=i._plots[x],C=w.overlays||[],y=0;y<C.length;y++){var S=C[y];d[S.id]&&S.plot.selectAll(".trace").remove()}}}function T(c,i){i._draggers.selectAll("g."+c).remove(),i._defs.select("#clip"+i._uid+c+"plot").remove()}V.toSVG=function(c){var i=c._fullLayout._glimages,d=b.select(c).selectAll(".svg-container"),x=d.filter(function(C,y){return y===d.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function w(){var C=this,y=C.toDataURL("image/png"),S=i.append("svg:image");S.attr({xmlns:e.svg,"xlink:href":y,preserveAspectRatio:"none",x:0,y:0,width:C.style.width,height:C.style.height})}x.each(w)},V.updateFx=t(42464).updateFx},94724:function(j,V,t){var b=t(25376),P=t(22548),o=t(98192).u,L=t(92880).extendFlat,A=t(31780).templatedArray,v=t(29736).descriptionWithDates,p=t(39032).ONEDAY,r=t(33816),e=r.HOUR_PATTERN,s=r.WEEKDAY_PATTERN,n={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},l=L({},n,{values:n.values.slice().concat(["sync"])});function f(S){return{valType:"integer",min:0,dflt:S?5:0,editType:"ticks"}}var u={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},h={valType:"data_array",editType:"ticks"},T={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function c(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=5),M}function i(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=1),M}var d={valType:"color",dflt:P.defaultLine,editType:"ticks"},x={valType:"color",dflt:P.lightLine,editType:"ticks"};function w(S){var M={valType:"number",min:0,editType:"ticks"};return S||(M.dflt=1),M}var C=L({},o,{editType:"ticks"}),y={valType:"boolean",editType:"ticks"};j.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:P.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:b({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed","min reversed","max reversed","min","max"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},autorangeoptions:{minallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmin:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},clipmax:{valType:"any",editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},include:{valType:"any",arrayOk:!0,editType:"plot",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},editType:"plot"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},minallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},maxallowed:{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},insiderange:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString(),!1],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:A("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[s,e,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:p},editType:"calc"}),tickmode:l,nticks:f(),tick0:u,dtick:g,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:h,ticktext:{valType:"data_array",editType:"ticks"},ticks:T,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},ticklabelshift:{valType:"integer",dflt:0,editType:"ticks"},ticklabelstandoff:{valType:"integer",dflt:0,editType:"ticks"},ticklabelindex:{valType:"integer",arrayOk:!0,editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:c(),tickwidth:i(),tickcolor:d,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},labelalias:{valType:"any",dflt:!1,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:L({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:b({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},autotickangles:{valType:"info_array",freeLength:!0,items:{valType:"angle"},dflt:[0,30,90],editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:v("tick label")},tickformatstops:A("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:v("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:P.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:y,gridcolor:x,gridwidth:w(),griddash:C,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:P.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:P.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:n,nticks:f("minor"),tick0:u,dtick:g,tickvals:h,ticks:T,ticklen:c("minor"),tickwidth:i("minor"),tickcolor:d,gridcolor:x,gridwidth:w("minor"),griddash:C,showgrid:y,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},autoshift:{valType:"boolean",dflt:!1,editType:"plot"},shift:{valType:"number",editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","geometric mean ascending","geometric mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:b({editType:"ticks"})}}},67352:function(j,V,t){var b=t(3400),P=t(76308),o=t(10624).isUnifiedHover,L=t(41008),A=t(31780),v=t(64859),p=t(94724),r=t(14944),e=t(28336),s=t(71888),n=t(37668),l=t(79811),f=l.id2name,u=l.name2id,g=t(33816).AX_ID_PATTERN,h=t(24040),T=h.traceIs,c=h.getComponentMethod;function i(d,x,w){Array.isArray(d[x])?d[x].push(w):d[x]=[w]}j.exports=function(x,w,C){var y=w.autotypenumbers,S={},M={},a={},E={},m={},k={},I={},O={},z={},B={},F,_;for(F=0;F<C.length;F++){var N=C[F];if(!(!T(N,"cartesian")&&!T(N,"gl2d"))){var G;if(N.xaxis)G=f(N.xaxis),i(S,G,N);else if(N.xaxes)for(_=0;_<N.xaxes.length;_++)i(S,f(N.xaxes[_]),N);var X;if(N.yaxis)X=f(N.yaxis),i(S,X,N);else if(N.yaxes)for(_=0;_<N.yaxes.length;_++)i(S,f(N.yaxes[_]),N);if(N.type==="funnel"?N.orientation==="h"?(G&&(M[G]=!0),X&&(I[X]=!0)):X&&(a[X]=!0):N.type==="image"?(X&&(O[X]=!0),G&&(O[G]=!0)):(X&&(m[X]=!0,k[X]=!0),(!T(N,"carpet")||N.type==="carpet"&&!N._cheater)&&G&&(E[G]=!0)),N.type==="carpet"&&N._cheater&&G&&(M[G]=!0),T(N,"2dMap")&&(z[G]=!0,z[X]=!0),T(N,"oriented")){var $=N.orientation==="h"?X:G;B[$]=!0}}}var et=w._subplots,ot=et.xaxis,nt=et.yaxis,Z=b.simpleMap(ot,f),Q=b.simpleMap(nt,f),W=Z.concat(Q),J=P.background;ot.length&&nt.length&&(J=b.coerce(x,w,v,"plot_bgcolor"));var it=P.combine(J,w.paper_bgcolor),K,H,at,tt,lt;function dt(){var ft=S[K]||[];lt._traceIndices=ft.map(function(pt){return pt._expandedIndex}),lt._annIndices=[],lt._shapeIndices=[],lt._selectionIndices=[],lt._imgIndices=[],lt._subplotsWith=[],lt._counterAxes=[],lt._name=lt._attr=K,lt._id=H}function mt(ft,pt){return b.coerce(tt,lt,p,ft,pt)}function gt(ft,pt){return b.coerce2(tt,lt,p,ft,pt)}function Mt(ft){return ft==="x"?nt:ot}function Lt(ft,pt){for(var Dt=ft==="x"?Z:Q,Ut=[],$t=0;$t<Dt.length;$t++){var re=Dt[$t];re!==pt&&!(x[re]||{}).overlaying&&Ut.push(u(re))}return Ut}var zt={x:Mt("x"),y:Mt("y")},xt=zt.x.concat(zt.y),Ct={},wt=[];function Rt(){var ft=tt.matches;g.test(ft)&&xt.indexOf(ft)===-1&&(Ct[ft]=tt.type,wt=Object.keys(Ct))}var Tt=L(x,w),Bt=o(Tt);for(F=0;F<W.length;F++){K=W[F],H=u(K),at=K.charAt(0),b.isPlainObject(x[K])||(x[K]={}),tt=x[K],lt=A.newContainer(w,K,at+"axis"),dt();var Gt=at==="x"&&!E[K]&&M[K]||at==="y"&&!m[K]&&a[K],te=at==="y"&&(!k[K]&&I[K]||O[K]),Wt={hasMinor:!0,letter:at,font:w.font,outerTicks:z[K],showGrid:!B[K],data:S[K]||[],bgColor:it,calendar:w.calendar,automargin:!0,visibleDflt:Gt,reverseDflt:te,autotypenumbersDflt:y,splomStash:((w._splomAxes||{})[at]||{})[H],noAutotickangles:at==="y"};mt("uirevision",w.uirevision),r(tt,lt,mt,Wt),e(tt,lt,mt,Wt,w);var jt=Bt&&at===Tt.charAt(0),ie=gt("spikecolor",Bt?lt.color:void 0),ue=gt("spikethickness",Bt?1.5:void 0),fe=gt("spikedash",Bt?"dot":void 0),pe=gt("spikemode",Bt?"across":void 0),Te=gt("spikesnap"),Qt=mt("showspikes",!!jt||!!ie||!!ue||!!fe||!!pe||!!Te);Qt||(delete lt.spikecolor,delete lt.spikethickness,delete lt.spikedash,delete lt.spikemode,delete lt.spikesnap);var Pt=f(tt.overlaying),Ot=[0,1];if(w[Pt]!==void 0){var Nt=f(w[Pt].anchor);w[Nt]!==void 0&&(Ot=w[Nt].domain)}n(tt,lt,mt,{letter:at,counterAxes:zt[at],overlayableAxes:Lt(at,K),grid:w.grid,overlayingDomain:Ot}),mt("title.standoff"),Rt(),lt._input=tt}for(F=0;F<wt.length;){H=wt[F++],K=f(H),at=K.charAt(0),b.isPlainObject(x[K])||(x[K]={}),tt=x[K],lt=A.newContainer(w,K,at+"axis"),dt();var Ht={letter:at,font:w.font,outerTicks:z[K],showGrid:!B[K],data:[],bgColor:it,calendar:w.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:y,splomStash:((w._splomAxes||{})[at]||{})[H]};mt("uirevision",w.uirevision),lt.type=Ct[H]||"linear",e(tt,lt,mt,Ht,w),n(tt,lt,mt,{letter:at,counterAxes:zt[at],overlayableAxes:Lt(at,K),grid:w.grid}),mt("fixedrange"),Rt(),lt._input=tt}var St=c("rangeslider","handleDefaults"),kt=c("rangeselector","handleDefaults");for(F=0;F<Z.length;F++)K=Z[F],tt=x[K],lt=w[K],St(x,w,K),lt.type==="date"&&kt(tt,lt,w,Q,lt.calendar),mt("fixedrange");for(F=0;F<Q.length;F++){K=Q[F],tt=x[K],lt=w[K];var Ft=w[f(lt.anchor)],At=c("rangeslider","isVisible")(Ft);mt("fixedrange",At)}s.handleDefaults(x,w,{axIds:xt.concat(wt).sort(l.idSort),axHasImage:O})}},42136:function(j,V,t){var b=t(49760).mix,P=t(22548),o=t(3400);j.exports=function(A,v,p,r){r=r||{};var e=r.dfltColor;function s(a,E){return o.coerce2(A,v,r.attributes,a,E)}var n=s("linecolor",e),l=s("linewidth"),f=p("showline",r.showLine||!!n||!!l);f||(delete v.linecolor,delete v.linewidth);var u=b(e,r.bgColor,r.blend||P.lightFraction).toRgbString(),g=s("gridcolor",u),h=s("gridwidth"),T=s("griddash"),c=p("showgrid",r.showGrid||!!g||!!h||!!T);if(c||(delete v.gridcolor,delete v.gridwidth,delete v.griddash),r.hasMinor){var i=b(v.gridcolor,r.bgColor,67).toRgbString(),d=s("minor.gridcolor",i),x=s("minor.gridwidth",v.gridwidth||1),w=s("minor.griddash",v.griddash||"solid"),C=p("minor.showgrid",!!d||!!x||!!w);C||(delete v.minor.gridcolor,delete v.minor.gridwidth,delete v.minor.griddash)}if(!r.noZeroLine){var y=s("zerolinecolor",e),S=s("zerolinewidth"),M=p("zeroline",r.showGrid||!!y||!!S);M||(delete v.zerolinecolor,delete v.zerolinewidth)}}},37668:function(j,V,t){var b=t(38248),P=t(3400);j.exports=function(L,A,v,p){var r=p.counterAxes||[],e=p.overlayableAxes||[],s=p.letter,n=p.grid,l=p.overlayingDomain,f,u,g,h,T,c;n&&(u=n._domains[s][n._axisMap[A._id]],f=n._anchors[A._id],u&&(g=n[s+"side"].split(" ")[0],h=n.domain[s][g==="right"||g==="top"?1:0])),u=u||[0,1],f=f||(b(L.position)?"free":r[0]||"free"),g=g||(s==="x"?"bottom":"left"),h=h||0,T=0,c=!1;var i=P.coerce(L,A,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:f}},"anchor"),d=P.coerce(L,A,{side:{valType:"enumerated",values:s==="x"?["bottom","top"]:["left","right"],dflt:g}},"side");if(i==="free"){if(s==="y"){var x=v("autoshift");x&&(h=d==="left"?l[0]:l[1],c=A.automargin?A.automargin:!0,T=d==="left"?-3:3),v("shift",T)}v("position",h)}v("automargin",c);var w=!1;if(e.length&&(w=P.coerce(L,A,{overlaying:{valType:"enumerated",values:[!1].concat(e),dflt:!1}},"overlaying")),!w){var C=v("domain",u);C[0]>C[1]-.000244140625&&(A.domain=u),P.noneOrAll(L.domain,A.domain,u),A.tickmode==="sync"&&(A.tickmode="auto")}return v("layer"),A}},42568:function(j,V,t){var b=t(85024);j.exports=function(o,L,A,v,p){p||(p={});var r=p.tickSuffixDflt,e=b(o),s=A("tickprefix");s&&A("showtickprefix",e);var n=A("ticksuffix",r);n&&A("showticksuffix",e)}},96312:function(j,V,t){var b=t(76808);j.exports=function(o,L,A,v){var p=L._template||{},r=L.type||p.type||"-";A("minallowed"),A("maxallowed");var e=A("range");if(!e){var s;!v.noInsiderange&&r!=="log"&&(s=A("insiderange"),s&&(s[0]===null||s[1]===null)&&(L.insiderange=!1,s=void 0),s&&(e=A("range",s)))}var n=L.getAutorangeDflt(e,v),l=A("autorange",n),f;e&&(e[0]===null&&e[1]===null||(e[0]===null||e[1]===null)&&(l==="reversed"||l===!0)||e[0]!==null&&(l==="min"||l==="max reversed")||e[1]!==null&&(l==="max"||l==="min reversed"))&&(e=void 0,delete L.range,L.autorange=!0,f=!0),f||(n=L.getAutorangeDflt(e,v),l=A("autorange",n)),l&&(b(A,l,e),(r==="linear"||r==="-")&&A("rangemode")),L.cleanRange()}},21160:function(j,V,t){var b=t(84284).FROM_BL;j.exports=function(o,L,A){A===void 0&&(A=b[o.constraintoward||"center"]);var v=[o.r2l(o.range[0]),o.r2l(o.range[1])],p=v[0]+(v[1]-v[0])*A;o.range=o._input.range=[o.l2r(p+(v[0]-p)*L),o.l2r(p+(v[1]-p)*L)],o.setScale()}},78344:function(j,V,t){var b=t(33428),P=t(94336).E9,o=t(3400),L=o.numberFormat,A=t(38248),v=o.cleanNumber,p=o.ms2DateTime,r=o.dateTime2ms,e=o.ensureNumber,s=o.isArrayOrTypedArray,n=t(39032),l=n.FP_SAFE,f=n.BADNUM,u=n.LOG_CLIP,g=n.ONEWEEK,h=n.ONEDAY,T=n.ONEHOUR,c=n.ONEMIN,i=n.ONESEC,d=t(79811),x=t(33816),w=x.HOUR_PATTERN,C=x.WEEKDAY_PATTERN;function y(M){return Math.pow(10,M)}function S(M){return M!=null}j.exports=function(a,E){E=E||{};var m=a._id||"x",k=m.charAt(0);function I(W,J){if(W>0)return Math.log(W)/Math.LN10;if(W<=0&&J&&a.range&&a.range.length===2){var it=a.range[0],K=a.range[1];return .5*(it+K-2*u*Math.abs(it-K))}else return f}function O(W,J,it,K){if((K||{}).msUTC&&A(W))return+W;var H=r(W,it||a.calendar);if(H===f)if(A(W)){W=+W;var at=Math.floor(o.mod(W+.05,1)*10),tt=Math.round(W-at/10);H=r(new Date(tt))+at/10}else return f;return H}function z(W,J,it){return p(W,J,it||a.calendar)}function B(W){return a._categories[Math.round(W)]}function F(W){if(S(W)){if(a._categoriesMap===void 0&&(a._categoriesMap={}),a._categoriesMap[W]!==void 0)return a._categoriesMap[W];a._categories.push(typeof W=="number"?String(W):W);var J=a._categories.length-1;return a._categoriesMap[W]=J,J}return f}function _(W,J){for(var it=new Array(J),K=0;K<J;K++){var H=(W[0]||[])[K],at=(W[1]||[])[K];it[K]=N([H,at])}return it}function N(W){if(a._categoriesMap)return a._categoriesMap[W]}function G(W){var J=N(W);if(J!==void 0)return J;if(A(W))return+W}function X(W){return A(W)?+W:N(W)}function $(W,J,it){return b.round(it+J*W,2)}function et(W,J,it){return(W-it)/J}var ot=function(J){return A(J)?$(J,a._m,a._b):f},nt=function(W){return et(W,a._m,a._b)};if(a.rangebreaks){var Z=k==="y";ot=function(W){if(!A(W))return f;var J=a._rangebreaks.length;if(!J)return $(W,a._m,a._b);var it=Z;a.range[0]>a.range[1]&&(it=!it);for(var K=it?-1:1,H=K*W,at=0,tt=0;tt<J;tt++){var lt=K*a._rangebreaks[tt].min,dt=K*a._rangebreaks[tt].max;if(H<lt)break;if(H>dt)at=tt+1;else{at=H<(lt+dt)/2?tt:tt+1;break}}var mt=a._B[at]||0;return isFinite(mt)?$(W,a._m2,mt):0},nt=function(W){var J=a._rangebreaks.length;if(!J)return et(W,a._m,a._b);for(var it=0,K=0;K<J&&!(W<a._rangebreaks[K].pmin);K++)W>a._rangebreaks[K].pmax&&(it=K+1);return et(W,a._m2,a._B[it])}}a.c2l=a.type==="log"?I:e,a.l2c=a.type==="log"?y:e,a.l2p=ot,a.p2l=nt,a.c2p=a.type==="log"?function(W,J){return ot(I(W,J))}:ot,a.p2c=a.type==="log"?function(W){return y(nt(W))}:nt,["linear","-"].indexOf(a.type)!==-1?(a.d2r=a.r2d=a.d2c=a.r2c=a.d2l=a.r2l=v,a.c2d=a.c2r=a.l2d=a.l2r=e,a.d2p=a.r2p=function(W){return a.l2p(v(W))},a.p2d=a.p2r=nt,a.cleanPos=e):a.type==="log"?(a.d2r=a.d2l=function(W,J){return I(v(W),J)},a.r2d=a.r2c=function(W){return y(v(W))},a.d2c=a.r2l=v,a.c2d=a.l2r=e,a.c2r=I,a.l2d=y,a.d2p=function(W,J){return a.l2p(a.d2r(W,J))},a.p2d=function(W){return y(nt(W))},a.r2p=function(W){return a.l2p(v(W))},a.p2r=nt,a.cleanPos=e):a.type==="date"?(a.d2r=a.r2d=o.identity,a.d2c=a.r2c=a.d2l=a.r2l=O,a.c2d=a.c2r=a.l2d=a.l2r=z,a.d2p=a.r2p=function(W,J,it){return a.l2p(O(W,0,it))},a.p2d=a.p2r=function(W,J,it){return z(nt(W),J,it)},a.cleanPos=function(W){return o.cleanDate(W,f,a.calendar)}):a.type==="category"?(a.d2c=a.d2l=F,a.r2d=a.c2d=a.l2d=B,a.d2r=a.d2l_noadd=G,a.r2c=function(W){var J=X(W);return J!==void 0?J:a.fraction2r(.5)},a.l2r=a.c2r=e,a.r2l=X,a.d2p=function(W){return a.l2p(a.r2c(W))},a.p2d=function(W){return B(nt(W))},a.r2p=a.d2p,a.p2r=nt,a.cleanPos=function(W){return typeof W=="string"&&W!==""?W:e(W)}):a.type==="multicategory"&&(a.r2d=a.c2d=a.l2d=B,a.d2r=a.d2l_noadd=G,a.r2c=function(W){var J=G(W);return J!==void 0?J:a.fraction2r(.5)},a.r2c_just_indices=N,a.l2r=a.c2r=e,a.r2l=G,a.d2p=function(W){return a.l2p(a.r2c(W))},a.p2d=function(W){return B(nt(W))},a.r2p=a.d2p,a.p2r=nt,a.cleanPos=function(W){return Array.isArray(W)||typeof W=="string"&&W!==""?W:e(W)},a.setupMultiCategory=function(W){var J=a._traceIndices,it,K,H=a._matchGroup;if(H&&a._categories.length===0){for(var at in H)if(at!==m){var tt=E[d.id2name(at)];J=J.concat(tt._traceIndices)}}var lt=[[0,{}],[0,{}]],dt=[];for(it=0;it<J.length;it++){var mt=W[J[it]];if(k in mt){var gt=mt[k],Mt=mt._length||o.minRowLength(gt);if(s(gt[0])&&s(gt[1]))for(K=0;K<Mt;K++){var Lt=gt[0][K],zt=gt[1][K];S(Lt)&&S(zt)&&(dt.push([Lt,zt]),Lt in lt[0][1]||(lt[0][1][Lt]=lt[0][0]++),zt in lt[1][1]||(lt[1][1][zt]=lt[1][0]++))}}}for(dt.sort(function(xt,Ct){var wt=lt[0][1],Rt=wt[xt[0]]-wt[Ct[0]];if(Rt)return Rt;var Tt=lt[1][1];return Tt[xt[1]]-Tt[Ct[1]]}),it=0;it<dt.length;it++)F(dt[it])}),a.fraction2r=function(W){var J=a.r2l(a.range[0]),it=a.r2l(a.range[1]);return a.l2r(J+W*(it-J))},a.r2fraction=function(W){var J=a.r2l(a.range[0]),it=a.r2l(a.range[1]);return(a.r2l(W)-J)/(it-J)},a.limitRange=function(W){var J=a.minallowed,it=a.maxallowed;if(!(J===void 0&&it===void 0)){W||(W="range");var K=o.nestedProperty(a,W).get(),H=o.simpleMap(K,a.r2l),at=H[1]<H[0];at&&H.reverse();var tt=o.simpleMap([J,it],a.r2l);if(J!==void 0&&H[0]<tt[0]&&(K[at?1:0]=J),it!==void 0&&H[1]>tt[1]&&(K[at?0:1]=it),K[0]===K[1]){var lt=a.l2r(J),dt=a.l2r(it);if(J!==void 0){var mt=lt+1;it!==void 0&&(mt=Math.min(mt,dt)),K[at?1:0]=mt}if(it!==void 0){var gt=dt+1;J!==void 0&&(gt=Math.max(gt,lt)),K[at?0:1]=gt}}}},a.cleanRange=function(W,J){a._cleanRange(W,J),a.limitRange(W)},a._cleanRange=function(W,J){J||(J={}),W||(W="range");var it=o.nestedProperty(a,W).get(),K,H;if(a.type==="date"?H=o.dfltRange(a.calendar):k==="y"?H=x.DFLTRANGEY:a._name==="realaxis"?H=[0,1]:H=J.dfltRange||x.DFLTRANGEX,H=H.slice(),(a.rangemode==="tozero"||a.rangemode==="nonnegative")&&(H[0]=0),!it||it.length!==2){o.nestedProperty(a,W).set(H);return}var at=it[0]===null,tt=it[1]===null;for(a.type==="date"&&!a.autorange&&(it[0]=o.cleanDate(it[0],f,a.calendar),it[1]=o.cleanDate(it[1],f,a.calendar)),K=0;K<2;K++)if(a.type==="date"){if(!o.isDateTime(it[K],a.calendar)){a[W]=H;break}if(a.r2l(it[0])===a.r2l(it[1])){var lt=o.constrain(a.r2l(it[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);it[0]=a.l2r(lt-1e3),it[1]=a.l2r(lt+1e3);break}}else{if(!A(it[K]))if(!(at||tt)&&A(it[1-K]))it[K]=it[1-K]*(K?10:.1);else{a[W]=H;break}if(it[K]<-l?it[K]=-l:it[K]>l&&(it[K]=l),it[0]===it[1]){var dt=Math.max(1,Math.abs(it[0]*1e-6));it[0]-=dt,it[1]+=dt}}},a.setScale=function(W){var J=E._size;if(a.overlaying){var it=d.getFromId({_fullLayout:E},a.overlaying);a.domain=it.domain}var K=W&&a._r?"_r":"range",H=a.calendar;a.cleanRange(K);var at=a.r2l(a[K][0],H),tt=a.r2l(a[K][1],H),lt=k==="y";if(lt?(a._offset=J.t+(1-a.domain[1])*J.h,a._length=J.h*(a.domain[1]-a.domain[0]),a._m=a._length/(at-tt),a._b=-a._m*tt):(a._offset=J.l+a.domain[0]*J.w,a._length=J.w*(a.domain[1]-a.domain[0]),a._m=a._length/(tt-at),a._b=-a._m*at),a._rangebreaks=[],a._lBreaks=0,a._m2=0,a._B=[],a.rangebreaks){var dt,mt;if(a._rangebreaks=a.locateBreaks(Math.min(at,tt),Math.max(at,tt)),a._rangebreaks.length){for(dt=0;dt<a._rangebreaks.length;dt++)mt=a._rangebreaks[dt],a._lBreaks+=Math.abs(mt.max-mt.min);var gt=lt;at>tt&&(gt=!gt),gt&&a._rangebreaks.reverse();var Mt=gt?-1:1;for(a._m2=Mt*a._length/(Math.abs(tt-at)-a._lBreaks),a._B.push(-a._m2*(lt?tt:at)),dt=0;dt<a._rangebreaks.length;dt++)mt=a._rangebreaks[dt],a._B.push(a._B[a._B.length-1]-Mt*a._m2*(mt.max-mt.min));for(dt=0;dt<a._rangebreaks.length;dt++)mt=a._rangebreaks[dt],mt.pmin=ot(mt.min),mt.pmax=ot(mt.max)}}if(!isFinite(a._m)||!isFinite(a._b)||a._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},a.maskBreaks=function(W){var J=a.rangebreaks||[],it,K,H,at,tt;J._cachedPatterns||(J._cachedPatterns=J.map(function(wt){return wt.enabled&&wt.bounds?o.simpleMap(wt.bounds,wt.pattern?v:a.d2c):null})),J._cachedValues||(J._cachedValues=J.map(function(wt){return wt.enabled&&wt.values?o.simpleMap(wt.values,a.d2c).sort(o.sorterAsc):null}));for(var lt=0;lt<J.length;lt++){var dt=J[lt];if(dt.enabled){if(dt.bounds){var mt=dt.pattern;switch(it=J._cachedPatterns[lt],K=it[0],H=it[1],mt){case C:tt=new Date(W),at=tt.getUTCDay(),K>H&&(H+=7,at<K&&(at+=7));break;case w:tt=new Date(W);var gt=tt.getUTCHours(),Mt=tt.getUTCMinutes(),Lt=tt.getUTCSeconds(),zt=tt.getUTCMilliseconds();at=gt+(Mt/60+Lt/3600+zt/36e5),K>H&&(H+=24,at<K&&(at+=24));break;case"":at=W;break}if(at>=K&&at<H)return f}else for(var xt=J._cachedValues[lt],Ct=0;Ct<xt.length;Ct++)if(K=xt[Ct],H=K+dt.dvalue,W>=K&&W<H)return f}}return W},a.locateBreaks=function(W,J){var it,K,H,at,tt=[];if(!a.rangebreaks)return tt;var lt=a.rangebreaks.slice().sort(function(Tt,Bt){return Tt.pattern===C&&Bt.pattern===w?-1:Bt.pattern===C&&Tt.pattern===w?1:0}),dt=function(Tt,Bt){if(Tt=o.constrain(Tt,W,J),Bt=o.constrain(Bt,W,J),Tt!==Bt){for(var Gt=!0,te=0;te<tt.length;te++){var Wt=tt[te];Tt<Wt.max&&Bt>=Wt.min&&(Tt<Wt.min&&(Wt.min=Tt),Bt>Wt.max&&(Wt.max=Bt),Gt=!1)}Gt&&tt.push({min:Tt,max:Bt})}};for(it=0;it<lt.length;it++){var mt=lt[it];if(mt.enabled)if(mt.bounds){var gt=W,Mt=J;mt.pattern&&(gt=Math.floor(gt)),K=o.simpleMap(mt.bounds,mt.pattern?v:a.r2l),H=K[0],at=K[1];var Lt=new Date(gt),zt,xt;switch(mt.pattern){case C:xt=g,zt=((at<H?7:0)+(at-H))*h,gt+=H*h-(Lt.getUTCDay()*h+Lt.getUTCHours()*T+Lt.getUTCMinutes()*c+Lt.getUTCSeconds()*i+Lt.getUTCMilliseconds());break;case w:xt=h,zt=((at<H?24:0)+(at-H))*T,gt+=H*T-(Lt.getUTCHours()*T+Lt.getUTCMinutes()*c+Lt.getUTCSeconds()*i+Lt.getUTCMilliseconds());break;default:gt=Math.min(K[0],K[1]),Mt=Math.max(K[0],K[1]),xt=Mt-gt,zt=xt}for(var Ct=gt;Ct<Mt;Ct+=xt)dt(Ct,Ct+zt)}else for(var wt=o.simpleMap(mt.values,a.d2c),Rt=0;Rt<wt.length;Rt++)H=wt[Rt],at=H+mt.dvalue,dt(H,at)}return tt.sort(function(Tt,Bt){return Tt.min-Bt.min}),tt},a.makeCalcdata=function(W,J,it){var K,H,at,tt,lt=a.type,dt=lt==="date"&&W[J+"calendar"];if(J in W){if(K=W[J],tt=W._length||o.minRowLength(K),o.isTypedArray(K)&&(lt==="linear"||lt==="log")){if(tt===K.length)return K;if(K.subarray)return K.subarray(0,tt)}if(lt==="multicategory")return _(K,tt);for(H=new Array(tt),at=0;at<tt;at++)H[at]=a.d2c(K[at],0,dt,it)}else{var mt=J+"0"in W?a.d2c(W[J+"0"],0,dt):0,gt=W["d"+J]?Number(W["d"+J]):1;for(K=W[{x:"y",y:"x"}[J]],tt=W._length||K.length,H=new Array(tt),at=0;at<tt;at++)H[at]=mt+at*gt}if(a.rangebreaks)for(at=0;at<tt;at++)H[at]=a.maskBreaks(H[at]);return H},a.isValidRange=function(W,J){return Array.isArray(W)&&W.length===2&&(J&&W[0]===null||A(a.r2l(W[0])))&&(J&&W[1]===null||A(a.r2l(W[1])))},a.getAutorangeDflt=function(W,J){var it=!a.isValidRange(W,"nullOk");return it&&J&&J.reverseDflt?it="reversed":W&&(W[0]===null&&W[1]===null?it=!0:W[0]===null&&W[1]!==null?it="min":W[0]!==null&&W[1]===null&&(it="max")),it},a.isReversed=function(){var W=a.autorange;return W==="reversed"||W==="min reversed"||W==="max reversed"},a.isPtWithinRange=function(W,J){var it=a.c2l(W[k],null,J),K=a.r2l(a.range[0]),H=a.r2l(a.range[1]);return K<H?K<=it&&it<=H:H<=it&&it<=K},a._emptyCategories=function(){a._categories=[],a._categoriesMap={}},a.clearCalc=function(){var W=a._matchGroup;if(W){var J=null,it=null;for(var K in W){var H=E[d.id2name(K)];if(H._categories){J=H._categories,it=H._categoriesMap;break}}J&&it?(a._categories=J,a._categoriesMap=it):a._emptyCategories()}else a._emptyCategories();if(a._initialCategories)for(var at=0;at<a._initialCategories.length;at++)F(a._initialCategories[at])},a.sortByInitialCategories=function(){var W=[];if(a._emptyCategories(),a._initialCategories)for(var J=0;J<a._initialCategories.length;J++)F(a._initialCategories[J]);W=W.concat(a._traceIndices);var it=a._matchGroup;for(var K in it)if(m!==K){var H=E[d.id2name(K)];H._categories=a._categories,H._categoriesMap=a._categoriesMap,W=W.concat(H._traceIndices)}return W};var Q=E._d3locale;a.type==="date"&&(a._dateFormat=Q?Q.timeFormat:P,a._extraFormat=E._extraFormat),a._separators=E.separators,a._numFormat=Q?Q.numberFormat:L,delete a._minDtick,delete a._forceTick0}},85024:function(j){j.exports=function(t){var b=["showexponent","showtickprefix","showticksuffix"],P=b.filter(function(L){return t[L]!==void 0}),o=function(L){return t[L]===t[P[0]]};if(P.every(o)||P.length===1)return t[P[0]]}},95936:function(j,V,t){var b=t(3400),P=t(76308).contrast,o=t(94724),L=t(85024),A=t(51272);j.exports=function(r,e,s,n,l){l||(l={});var f=s("labelalias");b.isPlainObject(f)||delete e.labelalias;var u=L(r),g=s("showticklabels");if(g){l.noTicklabelshift||s("ticklabelshift"),l.noTicklabelstandoff||s("ticklabelstandoff");var h=l.font||{},T=e.color,c=e.ticklabelposition||"",i=c.indexOf("inside")!==-1?P(l.bgColor):T&&T!==o.color.dflt?T:h.color;if(b.coerceFont(s,"tickfont",h,{overrideDflt:{color:i}}),!l.noTicklabelstep&&n!=="multicategory"&&n!=="log"&&s("ticklabelstep"),!l.noAng){var d=s("tickangle");!l.noAutotickangles&&d==="auto"&&s("autotickangles")}if(n!=="category"){var x=s("tickformat");A(r,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:v}),e.tickformatstops.length||delete e.tickformatstops,!l.noExp&&!x&&n!=="date"&&(s("showexponent",u),s("exponentformat"),s("minexponent"),s("separatethousands"))}}};function v(p,r){function e(n,l){return b.coerce(p,r,o.tickformatstops,n,l)}var s=e("enabled");s&&(e("dtickrange"),e("value"))}},25404:function(j,V,t){var b=t(3400),P=t(94724);j.exports=function(L,A,v,p){var r=p.isMinor,e=r?L.minor||{}:L,s=r?A.minor:A,n=r?P.minor:P,l=r?"minor.":"",f=b.coerce2(e,s,n,"ticklen",r?(A.ticklen||5)*.6:void 0),u=b.coerce2(e,s,n,"tickwidth",r?A.tickwidth||1:void 0),g=b.coerce2(e,s,n,"tickcolor",(r?A.tickcolor:void 0)||s.color),h=v(l+"ticks",!r&&p.outerTicks||f||u||g?"outside":"");h||(delete s.ticklen,delete s.tickwidth,delete s.tickcolor)}},26332:function(j,V,t){var b=t(98728),P=t(3400).isArrayOrTypedArray,o=t(38116).isTypedArraySpec,L=t(38116).decodeTypedArraySpec;j.exports=function(v,p,r,e,s){s||(s={});var n=s.isMinor,l=n?v.minor||{}:v,f=n?p.minor:p,u=n?"minor.":"";function g(C){var y=l[C];return o(y)&&(y=L(y)),y!==void 0?y:(f._template||{})[C]}var h=g("tick0"),T=g("dtick"),c=g("tickvals"),i=P(c)?"array":T?"linear":"auto",d=r(u+"tickmode",i);if(d==="auto"||d==="sync")r(u+"nticks");else if(d==="linear"){var x=f.dtick=b.dtick(T,e);f.tick0=b.tick0(h,e,p.calendar,x)}else if(e!=="multicategory"){var w=r(u+"tickvals");w===void 0?f.tickmode="auto":n||r("ticktext")}}},73736:function(j,V,t){var b=t(33428),P=t(24040),o=t(3400),L=t(43616),A=t(54460);j.exports=function(p,r,e,s){var n=p._fullLayout;if(r.length===0){A.redrawComponents(p);return}function l(w){var C=w.xaxis,y=w.yaxis;n._defs.select("#"+w.clipId+"> rect").call(L.setTranslate,0,0).call(L.setScale,1,1),w.plot.call(L.setTranslate,C._offset,y._offset).call(L.setScale,1,1);var S=w.plot.selectAll(".scatterlayer .trace");S.selectAll(".point").call(L.setPointGroupScale,1,1),S.selectAll(".textpoint").call(L.setTextPointsScale,1,1),S.call(L.hideOutsideRangePoints,w)}function f(w,C){var y=w.plotinfo,S=y.xaxis,M=y.yaxis,a=S._length,E=M._length,m=!!w.xr1,k=!!w.yr1,I=[];if(m){var O=o.simpleMap(w.xr0,S.r2l),z=o.simpleMap(w.xr1,S.r2l),B=O[1]-O[0],F=z[1]-z[0];I[0]=(O[0]*(1-C)+C*z[0]-O[0])/(O[1]-O[0])*a,I[2]=a*(1-C+C*F/B),S.range[0]=S.l2r(O[0]*(1-C)+C*z[0]),S.range[1]=S.l2r(O[1]*(1-C)+C*z[1])}else I[0]=0,I[2]=a;if(k){var _=o.simpleMap(w.yr0,M.r2l),N=o.simpleMap(w.yr1,M.r2l),G=_[1]-_[0],X=N[1]-N[0];I[1]=(_[1]*(1-C)+C*N[1]-_[1])/(_[0]-_[1])*E,I[3]=E*(1-C+C*X/G),M.range[0]=S.l2r(_[0]*(1-C)+C*N[0]),M.range[1]=M.l2r(_[1]*(1-C)+C*N[1])}else I[1]=0,I[3]=E;A.drawOne(p,S,{skipTitle:!0}),A.drawOne(p,M,{skipTitle:!0}),A.redrawComponents(p,[S._id,M._id]);var $=m?a/I[2]:1,et=k?E/I[3]:1,ot=m?I[0]:0,nt=k?I[1]:0,Z=m?I[0]/I[2]*a:0,Q=k?I[1]/I[3]*E:0,W=S._offset-Z,J=M._offset-Q;y.clipRect.call(L.setTranslate,ot,nt).call(L.setScale,1/$,1/et),y.plot.call(L.setTranslate,W,J).call(L.setScale,$,et),L.setPointGroupScale(y.zoomScalePts,1/$,1/et),L.setTextPointsScale(y.zoomScaleTxt,1/$,1/et)}var u;s&&(u=s());function g(){for(var w={},C=0;C<r.length;C++){var y=r[C],S=y.plotinfo.xaxis,M=y.plotinfo.yaxis;y.xr1&&(w[S._name+".range"]=y.xr1.slice()),y.yr1&&(w[M._name+".range"]=y.yr1.slice())}return u&&u(),P.call("relayout",p,w).then(function(){for(var a=0;a<r.length;a++)l(r[a].plotinfo)})}function h(){for(var w={},C=0;C<r.length;C++){var y=r[C],S=y.plotinfo.xaxis,M=y.plotinfo.yaxis;y.xr0&&(w[S._name+".range"]=y.xr0.slice()),y.yr0&&(w[M._name+".range"]=y.yr0.slice())}return P.call("relayout",p,w).then(function(){for(var a=0;a<r.length;a++)l(r[a].plotinfo)})}var T,c,i,d=b.ease(e.easing);p._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(i),i=null,h()});function x(){c=Date.now();for(var w=Math.min(1,(c-T)/e.duration),C=d(w),y=0;y<r.length;y++)f(r[y],C);c-T>e.duration?(g(),i=window.cancelAnimationFrame(x)):i=window.requestAnimationFrame(x)}return T=Date.now(),i=window.requestAnimationFrame(x),Promise.resolve()}},14944:function(j,V,t){var b=t(24040).traceIs,P=t(52976);j.exports=function(r,e,s,n){s("autotypenumbers",n.autotypenumbersDflt);var l=s("type",(n.splomStash||{}).type);l==="-"&&(o(e,n.data),e.type==="-"?e.type="linear":r.type=e.type)};function o(p,r){if(p.type==="-"){var e=p._id,s=e.charAt(0),n;e.indexOf("scene")!==-1&&(e=s);var l=L(r,e,s);if(l){if(l.type==="histogram"&&s==={v:"y",h:"x"}[l.orientation||"v"]){p.type="linear";return}var f=s+"calendar",u=l[f],g={noMultiCategory:!b(l,"cartesian")||b(l,"noMultiCategory")};if(l.type==="box"&&l._hasPreCompStats&&s==={h:"x",v:"y"}[l.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=p.autotypenumbers,v(l,s)){var h=A(l),T=[];for(n=0;n<r.length;n++){var c=r[n];!b(c,"box-violin")||(c[s+"axis"]||s)!==e||(c[h]!==void 0?T.push(c[h][0]):c.name!==void 0?T.push(c.name):T.push("text"),c[f]!==u&&(u=void 0))}p.type=P(T,u,g)}else if(l.type==="splom"){var i=l.dimensions,d=i[l._axesDim[e]];d.visible&&(p.type=P(d.values,u,g))}else p.type=P(l[s]||[l[s+"0"]],u,g)}}}function L(p,r,e){for(var s=0;s<p.length;s++){var n=p[s];if(n.type==="splom"&&n._length>0&&(n["_"+e+"axes"]||{})[r])return n;if((n[e+"axis"]||e)===r){if(v(n,e))return n;if((n[e]||[]).length||n[e+"0"])return n}}}function A(p){return{v:"x",h:"y"}[p.orientation||"v"]}function v(p,r){var e=A(p),s=b(p,"box-violin"),n=b(p._fullInput||{},"candlestick");return s&&!n&&r===e&&p[e]===void 0&&p[e+"0"]===void 0}},62460:function(j,V,t){var b=t(24040),P=t(3400);V.manageCommandObserver=function(r,e,s,n){var l={},f=!0;e&&e._commandObserver&&(l=e._commandObserver),l.cache||(l.cache={}),l.lookupTable={};var u=V.hasSimpleAPICommandBindings(r,s,l.lookupTable);if(e&&e._commandObserver){if(u)return l;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,l}if(u){o(r,u,l.cache),l.check=function(){if(f){var c=o(r,u,l.cache);return c.changed&&n&&l.lookupTable[c.value]!==void 0&&(l.disable(),Promise.resolve(n({value:c.value,type:u.type,prop:u.prop,traces:u.traces,index:l.lookupTable[c.value]})).then(l.enable,l.enable)),c.changed}};for(var g=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],h=0;h<g.length;h++)r._internalOn(g[h],l.check);l.remove=function(){for(var T=0;T<g.length;T++)r._removeInternalListener(g[T],l.check)}}else P.log("Unable to automatically bind plot updates to API command"),l.lookupTable={},l.remove=function(){};return l.disable=function(){f=!1},l.enable=function(){f=!0},e&&(e._commandObserver=l),l},V.hasSimpleAPICommandBindings=function(r,e,s){var n,l=e.length,f;for(n=0;n<l;n++){var u,g=e[n],h=g.method,T=g.args;if(Array.isArray(T)||(T=[]),!h)return!1;var c=V.computeAPICommandBindings(r,h,T);if(c.length!==1)return!1;if(!f)f=c[0],Array.isArray(f.traces)&&f.traces.sort();else{if(u=c[0],u.type!==f.type||u.prop!==f.prop)return!1;if(Array.isArray(f.traces))if(Array.isArray(u.traces)){u.traces.sort();for(var i=0;i<f.traces.length;i++)if(f.traces[i]!==u.traces[i])return!1}else return!1;else if(u.prop!==f.prop)return!1}u=c[0];var d=u.value;if(Array.isArray(d))if(d.length===1)d=d[0];else return!1;s&&(s[d]=n)}return f};function o(r,e,s){var n,l,f,u=!1;if(e.type==="data")n=r._fullData[e.traces!==null?e.traces[0]:0];else if(e.type==="layout")n=r._fullLayout;else return!1;return l=P.nestedProperty(n,e.prop).get(),f=s[e.type]=s[e.type]||{},f.hasOwnProperty(e.prop)&&f[e.prop]!==l&&(u=!0),f[e.prop]=l,{changed:u,value:l}}V.executeAPICommand=function(r,e,s){if(e==="skip")return Promise.resolve();var n=b.apiMethodRegistry[e],l=[r];Array.isArray(s)||(s=[]);for(var f=0;f<s.length;f++)l.push(s[f]);return n.apply(null,l).catch(function(u){return P.warn("API call to Plotly."+e+" rejected.",u),Promise.reject(u)})},V.computeAPICommandBindings=function(r,e,s){var n;switch(Array.isArray(s)||(s=[]),e){case"restyle":n=v(r,s);break;case"relayout":n=A(r,s);break;case"update":n=v(r,[s[0],s[2]]).concat(A(r,[s[1]]));break;case"animate":n=L(r,s);break;default:n=[]}return n};function L(r,e){return Array.isArray(e[0])&&e[0].length===1&&["string","number"].indexOf(typeof e[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}function A(r,e){var s=[],n=e[0],l={};if(typeof n=="string")l[n]=e[1];else if(P.isPlainObject(n))l=n;else return s;return p(l,function(f,u,g){s.push({type:"layout",prop:f,value:g})},"",0),s}function v(r,e){var s,n,l,f,u=[];if(n=e[0],l=e[1],s=e[2],f={},typeof n=="string")f[n]=l;else if(P.isPlainObject(n))f=n,s===void 0&&(s=l);else return u;return s===void 0&&(s=null),p(f,function(g,h,T){var c,i;if(Array.isArray(T)){i=T.slice();var d=Math.min(i.length,r.data.length);s&&(d=Math.min(d,s.length)),c=[];for(var x=0;x<d;x++)c[x]=s?s[x]:x}else i=T,c=s?s.slice():null;if(c===null)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(c)){if(!Array.isArray(i)){var w=i;i=[];for(var C=0;C<c.length;C++)i[C]=w}i.length=Math.min(c.length,i.length)}u.push({type:"data",prop:g,traces:c,value:i})},"",0),u}function p(r,e,s,n){Object.keys(r).forEach(function(l){var f=r[l];if(l[0]!=="_"){var u=s+(n>0?".":"")+l;P.isPlainObject(f)?p(f,e,u,n+1):e(u,l,f)}})}},86968:function(j,V,t){var b=t(92880).extendFlat;V.u=function(P,o){P=P||{},o=o||{};var L={valType:"info_array",editType:P.editType,items:[{valType:"number",min:0,max:1,editType:P.editType},{valType:"number",min:0,max:1,editType:P.editType}],dflt:[0,1]};P.name&&P.name+"",P.trace,o.description&&""+o.description;var A={x:b({},L,{}),y:b({},L,{}),editType:P.editType};return P.noGridCell||(A.row={valType:"integer",min:0,dflt:0,editType:P.editType},A.column={valType:"integer",min:0,dflt:0,editType:P.editType}),A},V.Q=function(P,o,L,A){var v=A&&A.x||[0,1],p=A&&A.y||[0,1],r=o.grid;if(r){var e=L("domain.column");e!==void 0&&(e<r.columns?v=r._domains.x[e]:delete P.domain.column);var s=L("domain.row");s!==void 0&&(s<r.rows?p=r._domains.y[s]:delete P.domain.row)}var n=L("domain.x",v),l=L("domain.y",p);n[0]<n[1]||(P.domain.x=v.slice()),l[0]<l[1]||(P.domain.y=p.slice())}},25376:function(j){j.exports=function(V){var t=V.variantValues,b=V.editType,P=V.colorEditType;P===void 0&&(P=b);var o={editType:b,valType:"integer",min:1,max:1e3,extras:["normal","bold"],dflt:"normal"};V.noNumericWeightValues&&(o.valType="enumerated",o.values=o.extras,o.extras=void 0,o.min=void 0,o.max=void 0);var L={family:{valType:"string",noBlank:!0,strict:!0,editType:b},size:{valType:"number",min:1,editType:b},color:{valType:"color",editType:P},weight:o,style:{editType:b,valType:"enumerated",values:["normal","italic"],dflt:"normal"},variant:V.noFontVariant?void 0:{editType:b,valType:"enumerated",values:t||["normal","small-caps","all-small-caps","all-petite-caps","petite-caps","unicase"],dflt:"normal"},textcase:V.noFontTextcase?void 0:{editType:b,valType:"enumerated",values:["normal","word caps","upper","lower"],dflt:"normal"},lineposition:V.noFontLineposition?void 0:{editType:b,valType:"flaglist",flags:["under","over","through"],extras:["none"],dflt:"none"},shadow:V.noFontShadow?void 0:{editType:b,valType:"string",dflt:V.autoShadowDflt?"auto":"none"},editType:b};return V.autoSize&&(L.size.dflt="auto"),V.autoColor&&(L.color.dflt="auto"),V.arrayOk&&(L.family.arrayOk=!0,L.weight.arrayOk=!0,L.style.arrayOk=!0,V.noFontVariant||(L.variant.arrayOk=!0),V.noFontTextcase||(L.textcase.arrayOk=!0),V.noFontLineposition||(L.lineposition.arrayOk=!0),V.noFontShadow||(L.shadow.arrayOk=!0),L.size.arrayOk=!0,L.color.arrayOk=!0),L}},16672:function(j){j.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},79552:function(j,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr","equal earth":"equalEarth",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},43520:function(j,V,t){var b=t(33428),P=t(83356),o=P.geoPath,L=P.geoDistance,A=t(87108),v=t(24040),p=t(3400),r=p.strTranslate,e=t(76308),s=t(43616),n=t(93024),l=t(7316),f=t(54460),u=t(19280).getAutoRange,g=t(86476),h=t(22676).prepSelect,T=t(22676).clearOutline,c=t(22676).selectOnClick,i=t(79248),d=t(79552),x=t(27144),w=t(59972),C=t(55712).NO;function y(m){this.id=m.id,this.graphDiv=m.graphDiv,this.container=m.container,this.topojsonURL=m.topojsonURL,this.isStatic=m.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var S=y.prototype;j.exports=function(k){return new y(k)},S.plot=function(m,k,I,O){var z=this;if(O)return z.update(m,k,!0);z._geoCalcData=m,z._fullLayout=k;var B=k[this.id],F=[],_=!1;for(var N in d.layerNameToAdjective)if(N!=="frame"&&B["show"+N]){_=!0;break}for(var G=!1,X=0;X<m.length;X++){var $=m[0][0].trace;$._geo=z,$.locationmode&&(_=!0);var et=$.marker;if(et){var ot=et.angle,nt=et.angleref;(ot||nt==="north"||nt==="previous")&&(G=!0)}}if(this._hasMarkerAngles=G,_){var Z=w.getTopojsonName(B);(z.topojson===null||Z!==z.topojsonName)&&(z.topojsonName=Z,PlotlyGeoAssets.topojson[z.topojsonName]===void 0&&F.push(z.fetchTopojson()))}F=F.concat(x.fetchTraceGeoData(m)),I.push(new Promise(function(Q,W){Promise.all(F).then(function(){z.topojson=PlotlyGeoAssets.topojson[z.topojsonName],z.update(m,k),Q()}).catch(W)}))},S.fetchTopojson=function(){var m=this,k=w.getTopojsonPath(m.topojsonURL,m.topojsonName);return new Promise(function(I,O){b.json(k,function(z,B){if(z)return z.status===404?O(new Error(["plotly.js could not find topojson file at",k+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):O(new Error(["unexpected error while fetching topojson file at",k].join(" ")));PlotlyGeoAssets.topojson[m.topojsonName]=B,I()})})},S.update=function(m,k,I){var O=k[this.id];this.hasChoropleth=!1;for(var z=0;z<m.length;z++){var B=m[z],F=B[0].trace;F.type==="choropleth"&&(this.hasChoropleth=!0),F.visible===!0&&F._length>0&&F._module.calcGeoJSON(B,k)}if(!I){var _=this.updateProjection(m,k);if(_)return;(!this.viewInitial||this.scope!==O.scope)&&this.saveViewInitial(O)}this.scope=O.scope,this.updateBaseLayers(k,O),this.updateDims(k,O),this.updateFx(k,O),l.generalUpdatePerTraceModule(this.graphDiv,this,m,O);var N=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=N.selectAll(".point"),this.dataPoints.text=N.selectAll("text"),this.dataPaths.line=N.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this._render()},S.updateProjection=function(m,k){var I=this.graphDiv,O=k[this.id],z=k._size,B=O.domain,F=O.projection,_=O.lonaxis,N=O.lataxis,G=_._ax,X=N._ax,$=this.projection=M(O),et=[[z.l+z.w*B.x[0],z.t+z.h*(1-B.y[1])],[z.l+z.w*B.x[1],z.t+z.h*(1-B.y[0])]],ot=O.center||{},nt=F.rotation||{},Z=_.range||[],Q=N.range||[];if(O.fitbounds){G._length=et[1][0]-et[0][0],X._length=et[1][1]-et[0][1],G.range=u(I,G),X.range=u(I,X);var W=(G.range[0]+G.range[1])/2,J=(X.range[0]+X.range[1])/2;if(O._isScoped)ot={lon:W,lat:J};else if(O._isClipped){ot={lon:W,lat:J},nt={lon:W,lat:J,roll:nt.roll};var it=F.type,K=d.lonaxisSpan[it]/2||180,H=d.lataxisSpan[it]/2||90;Z=[W-K,W+K],Q=[J-H,J+H]}else ot={lon:W,lat:J},nt={lon:W,lat:nt.lat,roll:nt.roll}}$.center([ot.lon-nt.lon,ot.lat-nt.lat]).rotate([-nt.lon,-nt.lat,nt.roll]).parallels(F.parallels);var at=E(Z,Q);$.fitExtent(et,at);var tt=this.bounds=$.getBounds(at),lt=this.fitScale=$.scale(),dt=$.translate();if(O.fitbounds){var mt=$.getBounds(E(G.range,X.range)),gt=Math.min((tt[1][0]-tt[0][0])/(mt[1][0]-mt[0][0]),(tt[1][1]-tt[0][1])/(mt[1][1]-mt[0][1]));isFinite(gt)?$.scale(gt*lt):p.warn("Something went wrong during"+this.id+"fitbounds computations.")}else $.scale(F.scale*lt);var Mt=this.midPt=[(tt[0][0]+tt[1][0])/2,(tt[0][1]+tt[1][1])/2];if($.translate([dt[0]+(Mt[0]-dt[0]),dt[1]+(Mt[1]-dt[1])]).clipExtent(tt),O._isAlbersUsa){var Lt=$([ot.lon,ot.lat]),zt=$.translate();$.translate([zt[0]-(Lt[0]-zt[0]),zt[1]-(Lt[1]-zt[1])])}},S.updateBaseLayers=function(m,k){var I=this,O=I.topojson,z=I.layers,B=I.basePaths;function F(et){return et==="lonaxis"||et==="lataxis"}function _(et){return!!d.lineLayers[et]}function N(et){return!!d.fillLayers[et]}var G=this.hasChoropleth?d.layersForChoropleth:d.layers,X=G.filter(function(et){return _(et)||N(et)?k["show"+et]:F(et)?k[et].showgrid:!0}),$=I.framework.selectAll(".layer").data(X,String);$.exit().each(function(et){delete z[et],delete B[et],b.select(this).remove()}),$.enter().append("g").attr("class",function(et){return"layer "+et}).each(function(et){var ot=z[et]=b.select(this);et==="bg"?I.bgRect=ot.append("rect").style("pointer-events","all"):F(et)?B[et]=ot.append("path").style("fill","none"):et==="backplot"?ot.append("g").classed("choroplethlayer",!0):et==="frontplot"?ot.append("g").classed("scatterlayer",!0):_(et)?B[et]=ot.append("path").style("fill","none").style("stroke-miterlimit",2):N(et)&&(B[et]=ot.append("path").style("stroke","none"))}),$.order(),$.each(function(et){var ot=B[et],nt=d.layerNameToAdjective[et];et==="frame"?ot.datum(d.sphereSVG):_(et)||N(et)?ot.datum(C(O,O.objects[et])):F(et)&&ot.datum(a(et,k,m)).call(e.stroke,k[et].gridcolor).call(s.dashLine,k[et].griddash,k[et].gridwidth),_(et)?ot.call(e.stroke,k[nt+"color"]).call(s.dashLine,"",k[nt+"width"]):N(et)&&ot.call(e.fill,k[nt+"color"])})},S.updateDims=function(m,k){var I=this.bounds,O=(k.framewidth||0)/2,z=I[0][0]-O,B=I[0][1]-O,F=I[1][0]-z+O,_=I[1][1]-B+O;s.setRect(this.clipRect,z,B,F,_),this.bgRect.call(s.setRect,z,B,F,_).call(e.fill,k.bgcolor),this.xaxis._offset=z,this.xaxis._length=F,this.yaxis._offset=B,this.yaxis._length=_},S.updateFx=function(m,k){var I=this,O=I.graphDiv,z=I.bgRect,B=m.dragmode,F=m.clickmode;if(I.isStatic)return;function _(){var $=I.viewInitial,et={};for(var ot in $)et[I.id+"."+ot]=$[ot];v.call("_guiRelayout",O,et),O.emit("plotly_doubleclick",null)}function N($){return I.projection.invert([$[0]+I.xaxis._offset,$[1]+I.yaxis._offset])}var G=function($,et){if(et.isRect){var ot=$.range={};ot[I.id]=[N([et.xmin,et.ymin]),N([et.xmax,et.ymax])]}else{var nt=$.lassoPoints={};nt[I.id]=et.map(N)}},X={element:I.bgRect.node(),gd:O,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:G},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function($){$===2&&T(O)}};B==="pan"?(z.node().onmousedown=null,z.call(i(I,k)),z.on("dblclick.zoom",_),O._context._scrollZoom.geo||z.on("wheel.zoom",null)):(B==="select"||B==="lasso")&&(z.on(".zoom",null),X.prepFn=function($,et,ot){h($,et,ot,X,B)},g.init(X)),z.on("mousemove",function(){var $=I.projection.invert(p.getPositionFromD3Event());if(!$)return g.unhover(O,b.event);I.xaxis.p2c=function(){return $[0]},I.yaxis.p2c=function(){return $[1]},n.hover(O,b.event,I.id)}),z.on("mouseout",function(){O._dragging||g.unhover(O,b.event)}),z.on("click",function(){B!=="select"&&B!=="lasso"&&(F.indexOf("select")>-1&&c(b.event,O,[I.xaxis],[I.yaxis],I.id,X),F.indexOf("event")>-1&&n.click(O,b.event))})},S.makeFramework=function(){var m=this,k=m.graphDiv,I=k._fullLayout,O="clip"+I._uid+m.id;m.clipDef=I._clips.append("clipPath").attr("id",O),m.clipRect=m.clipDef.append("rect"),m.framework=b.select(m.container).append("g").attr("class","geo "+m.id).call(s.setClipUrl,O,k),m.project=function(z){var B=m.projection(z);return B?[B[0]-m.xaxis._offset,B[1]-m.yaxis._offset]:[null,null]},m.xaxis={_id:"x",c2p:function(z){return m.project(z)[0]}},m.yaxis={_id:"y",c2p:function(z){return m.project(z)[1]}},m.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},f.setConvert(m.mockAxis,I)},S.saveViewInitial=function(m){var k=m.center||{},I=m.projection,O=I.rotation||{};this.viewInitial={fitbounds:m.fitbounds,"projection.scale":I.scale};var z;m._isScoped?z={"center.lon":k.lon,"center.lat":k.lat}:m._isClipped?z={"projection.rotation.lon":O.lon,"projection.rotation.lat":O.lat}:z={"center.lon":k.lon,"center.lat":k.lat,"projection.rotation.lon":O.lon},p.extendFlat(this.viewInitial,z)},S.render=function(m){this._hasMarkerAngles&&m?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},S._render=function(){var m=this.projection,k=m.getPath(),I;function O(B){var F=m(B.lonlat);return F?r(F[0],F[1]):null}function z(B){return m.isLonLatOverEdges(B.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",k);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(B){return k(B.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",z).attr("transform",O)};function M(m){var k=m.projection,I=k.type,O=d.projNames[I];O="geo"+p.titleCase(O);for(var z=P[O]||A[O],B=z(),F=m._isSatellite?Math.acos(1/k.distance)*180/Math.PI:m._isClipped?d.lonaxisSpan[I]/2:null,_=["center","rotate","parallels","clipExtent"],N=function($){return $?B:[]},G=0;G<_.length;G++){var X=_[G];typeof B[X]!="function"&&(B[X]=N)}return B.isLonLatOverEdges=function($){if(B($)===null)return!0;if(F){var et=B.rotate(),ot=L($,[-et[0],-et[1]]),nt=F*Math.PI/180;return ot>nt}else return!1},B.getPath=function(){return o().projection(B)},B.getBounds=function($){return B.getPath().bounds($)},B.precision(d.precision),m._isSatellite&&B.tilt(k.tilt).distance(k.distance),F&&B.clipAngle(F-d.clipPad),B}function a(m,k,I){var O=1e-6,z=2.5,B=k[m],F=d.scopeDefaults[k.scope],_,N,G;m==="lonaxis"?(_=F.lonaxisRange,N=F.lataxisRange,G=function(J,it){return[J,it]}):m==="lataxis"&&(_=F.lataxisRange,N=F.lonaxisRange,G=function(J,it){return[it,J]});var X={type:"linear",range:[_[0],_[1]-O],tick0:B.tick0,dtick:B.dtick};f.setConvert(X,I);var $=f.calcTicks(X);!k.isScoped&&m==="lonaxis"&&$.pop();for(var et=$.length,ot=new Array(et),nt=0;nt<et;nt++)for(var Z=$[nt].x,Q=ot[nt]=[],W=N[0];W<N[1]+z;W+=z)Q.push(G(Z,W));return{type:"MultiLineString",coordinates:ot}}function E(m,k){var I=d.clipPad,O=m[0]+I,z=m[1]-I,B=k[0]+I,F=k[1]-I;O>0&&z<0&&(z+=360);var _=(z-O)/4;return{type:"Polygon",coordinates:[[[O,B],[O,F],[O+_,F],[O+2*_,F],[O+3*_,F],[z,F],[z,B],[z-_,B],[z-2*_,B],[z-3*_,B],[O,B]]]}}},10816:function(j,V,t){var b=t(84888).KY,P=t(3400).counterRegex,o=t(43520),L="geo",A=P(L),v={};v[L]={valType:"subplotid",dflt:L,editType:"calc"};function p(s){for(var n=s._fullLayout,l=s.calcdata,f=n._subplots[L],u=0;u<f.length;u++){var g=f[u],h=b(l,L,g),T=n[g],c=T._subplot;c||(c=o({id:g,graphDiv:s,container:n._geolayer.node(),topojsonURL:s._context.topojsonURL,staticPlot:s._context.staticPlot}),n[g]._subplot=c),c.plot(h,n,s._promises)}}function r(s,n,l,f){for(var u=f._subplots[L]||[],g=0;g<u.length;g++){var h=u[g],T=f[h]._subplot;!n[h]&&T&&(T.framework.remove(),T.clipDef.remove())}}function e(s){for(var n=s._fullLayout,l=n._subplots[L],f=0;f<l.length;f++){var u=n[l[f]],g=u._subplot;g.updateFx(n,u)}}j.exports={attr:L,name:L,idRoot:L,idRegex:A,attrRegex:A,attributes:v,layoutAttributes:t(40384),supplyLayoutDefaults:t(86920),plot:p,updateFx:e,clean:r}},40384:function(j,V,t){var b=t(22548),P=t(86968).u,o=t(98192).u,L=t(79552),A=t(67824).overrideAll,v=t(95376),p={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:b.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:o},r=j.exports=A({domain:P({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:v(L.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:v(L.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:b.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:L.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:L.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:L.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:L.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:b.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:b.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:b.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:b.background},lonaxis:p,lataxis:p},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},86920:function(j,V,t){var b=t(3400),P=t(168),o=t(84888).op,L=t(79552),A=t(40384),v=L.axesNames;j.exports=function(e,s,n){P(e,s,n,{type:"geo",attributes:A,handleDefaults:p,fullData:n,partition:"y"})};function p(r,e,s,n){var l=o(n.fullData,"geo",n.id),f=l.map(function(Q){return Q._expandedIndex}),u=s("resolution"),g=s("scope"),h=L.scopeDefaults[g],T=s("projection.type",h.projType),c=e._isAlbersUsa=T==="albers usa";c&&(g=e.scope="usa");var i=e._isScoped=g!=="world",d=e._isSatellite=T==="satellite",x=e._isConic=T.indexOf("conic")!==-1||T==="albers",w=e._isClipped=!!L.lonaxisSpan[T];if(r.visible===!1){var C=b.extendDeep({},e._template);C.showcoastlines=!1,C.showcountries=!1,C.showframe=!1,C.showlakes=!1,C.showland=!1,C.showocean=!1,C.showrivers=!1,C.showsubunits=!1,C.lonaxis&&(C.lonaxis.showgrid=!1),C.lataxis&&(C.lataxis.showgrid=!1),e._template=C}for(var y=s("visible"),S,M=0;M<v.length;M++){var a=v[M],E=[30,10][M],m;if(i)m=h[a+"Range"];else{var k=L[a+"Span"],I=(k[T]||k["*"])/2,O=s("projection.rotation."+a.substr(0,3),h.projRotate[M]);m=[O-I,O+I]}var z=s(a+".range",m);s(a+".tick0"),s(a+".dtick",E),S=s(a+".showgrid",y?void 0:!1),S&&(s(a+".gridcolor"),s(a+".gridwidth"),s(a+".griddash")),e[a]._ax={type:"linear",_id:a.slice(0,3),_traceIndices:f,setScale:b.identity,c2l:b.identity,r2l:b.identity,autorange:!0,range:z.slice(),_m:1,_input:{}}}var B=e.lonaxis.range,F=e.lataxis.range,_=B[0],N=B[1];_>0&&N<0&&(N+=360);var G=(_+N)/2,X;if(!c){var $=i?h.projRotate:[G,0,0];X=s("projection.rotation.lon",$[0]),s("projection.rotation.lat",$[1]),s("projection.rotation.roll",$[2]),S=s("showcoastlines",!i&&y),S&&(s("coastlinecolor"),s("coastlinewidth")),S=s("showocean",y?void 0:!1),S&&s("oceancolor")}var et,ot;if(c?(et=-96.6,ot=38.7):(et=i?G:X,ot=(F[0]+F[1])/2),s("center.lon",et),s("center.lat",ot),d&&(s("projection.tilt"),s("projection.distance")),x){var nt=h.projParallels||[0,60];s("projection.parallels",nt)}s("projection.scale"),S=s("showland",y?void 0:!1),S&&s("landcolor"),S=s("showlakes",y?void 0:!1),S&&s("lakecolor"),S=s("showrivers",y?void 0:!1),S&&(s("rivercolor"),s("riverwidth")),S=s("showcountries",i&&g!=="usa"&&y),S&&(s("countrycolor"),s("countrywidth")),(g==="usa"||g==="north america"&&u===50)&&(s("showsubunits",y),s("subunitcolor"),s("subunitwidth")),i||(S=s("showframe",y),S&&(s("framecolor"),s("framewidth"))),s("bgcolor");var Z=s("fitbounds");Z&&(delete e.projection.scale,i?(delete e.center.lon,delete e.center.lat):w?(delete e.center.lon,delete e.center.lat,delete e.projection.rotation.lon,delete e.projection.rotation.lat,delete e.lonaxis.range,delete e.lataxis.range):(delete e.center.lon,delete e.center.lat,delete e.projection.rotation.lon))}},79248:function(j,V,t){var b=t(33428),P=t(3400),o=t(24040),L=Math.PI/180,A=180/Math.PI,v={cursor:"pointer"},p={cursor:"auto"};function r(a,E){var m=a.projection,k;return E._isScoped?k=n:E._isClipped?k=f:k=l,k(a,m)}j.exports=r;function e(a,E){return b.behavior.zoom().translate(E.translate()).scale(E.scale())}function s(a,E,m){var k=a.id,I=a.graphDiv,O=I.layout,z=O[k],B=I._fullLayout,F=B[k],_={},N={};function G(X,$){_[k+"."+X]=P.nestedProperty(z,X).get(),o.call("_storeDirectGUIEdit",O,B._preGUI,_);var et=P.nestedProperty(F,X);et.get()!==$&&(et.set($),P.nestedProperty(z,X).set($),N[k+"."+X]=$)}m(G),G("projection.scale",E.scale()/a.fitScale),G("fitbounds",!1),I.emit("plotly_relayout",N)}function n(a,E){var m=e(a,E);function k(){b.select(this).style(v)}function I(){E.scale(b.event.scale).translate(b.event.translate),a.render(!0);var B=E.invert(a.midPt);a.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/a.fitScale,"geo.center.lon":B[0],"geo.center.lat":B[1]})}function O(B){var F=E.invert(a.midPt);B("center.lon",F[0]),B("center.lat",F[1])}function z(){b.select(this).style(p),s(a,E,O)}return m.on("zoomstart",k).on("zoom",I).on("zoomend",z),m}function l(a,E){var m=e(a,E),k=2,I,O,z,B,F,_,N,G,X;function $(W){return E.invert(W)}function et(W){var J=$(W);if(!J)return!0;var it=E(J);return Math.abs(it[0]-W[0])>k||Math.abs(it[1]-W[1])>k}function ot(){b.select(this).style(v),I=b.mouse(this),O=E.rotate(),z=E.translate(),B=O,F=$(I)}function nt(){if(_=b.mouse(this),et(I)){m.scale(E.scale()),m.translate(E.translate());return}E.scale(b.event.scale),E.translate([z[0],b.event.translate[1]]),F?$(_)&&(G=$(_),N=[B[0]+(G[0]-F[0]),O[1],O[2]],E.rotate(N),B=N):(I=_,F=$(I)),X=!0,a.render(!0);var W=E.rotate(),J=E.invert(a.midPt);a.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/a.fitScale,"geo.center.lon":J[0],"geo.center.lat":J[1],"geo.projection.rotation.lon":-W[0]})}function Z(){b.select(this).style(p),X&&s(a,E,Q)}function Q(W){var J=E.rotate(),it=E.invert(a.midPt);W("projection.rotation.lon",-J[0]),W("center.lon",it[0]),W("center.lat",it[1])}return m.on("zoomstart",ot).on("zoom",nt).on("zoomend",Z),m}function f(a,E){E.rotate(),E.scale();var m=e(a,E),k=M(m,"zoomstart","zoom","zoomend"),I=0,O=m.on,z;m.on("zoomstart",function(){b.select(this).style(v);var G=b.mouse(this),X=E.rotate(),$=X,et=E.translate(),ot=g(X);z=u(E,G),O.call(m,"zoom",function(){var nt=b.mouse(this);if(E.scale(b.event.scale),!z)G=nt,z=u(E,G);else if(u(E,nt)){E.rotate(X).translate(et);var Z=u(E,nt),Q=T(z,Z),W=w(h(ot,Q)),J=c(W,z,$);(!isFinite(J[0])||!isFinite(J[1])||!isFinite(J[2]))&&(J=$),E.rotate(J),$=J}F(k.of(this,arguments))}),B(k.of(this,arguments))}).on("zoomend",function(){b.select(this).style(p),O.call(m,"zoom",null),_(k.of(this,arguments)),s(a,E,N)}).on("zoom.redraw",function(){a.render(!0);var G=E.rotate();a.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/a.fitScale,"geo.projection.rotation.lon":-G[0],"geo.projection.rotation.lat":-G[1]})});function B(G){I++||G({type:"zoomstart"})}function F(G){G({type:"zoom"})}function _(G){--I||G({type:"zoomend"})}function N(G){var X=E.rotate();G("projection.rotation.lon",-X[0]),G("projection.rotation.lat",-X[1])}return b.rebind(m,k,"on")}function u(a,E){var m=a.invert(E);return m&&isFinite(m[0])&&isFinite(m[1])&&C(m)}function g(a){var E=.5*a[0]*L,m=.5*a[1]*L,k=.5*a[2]*L,I=Math.sin(E),O=Math.cos(E),z=Math.sin(m),B=Math.cos(m),F=Math.sin(k),_=Math.cos(k);return[O*B*_+I*z*F,I*B*_-O*z*F,O*z*_+I*B*F,O*B*F-I*z*_]}function h(a,E){var m=a[0],k=a[1],I=a[2],O=a[3],z=E[0],B=E[1],F=E[2],_=E[3];return[m*z-k*B-I*F-O*_,m*B+k*z+I*_-O*F,m*F-k*_+I*z+O*B,m*_+k*F-I*B+O*z]}function T(a,E){if(!(!a||!E)){var m=S(a,E),k=Math.sqrt(y(m,m)),I=.5*Math.acos(Math.max(-1,Math.min(1,y(a,E)))),O=Math.sin(I)/k;return k&&[Math.cos(I),m[2]*O,-m[1]*O,m[0]*O]}}function c(a,E,m){var k=x(E,2,a[0]);k=x(k,1,a[1]),k=x(k,0,a[2]-m[2]);var I=E[0],O=E[1],z=E[2],B=k[0],F=k[1],_=k[2],N=Math.atan2(O,I)*A,G=Math.sqrt(I*I+O*O),X,$;Math.abs(F)>G?($=(F>0?90:-90)-N,X=0):($=Math.asin(F/G)*A-N,X=Math.sqrt(G*G-F*F));var et=180-$-2*N,ot=(Math.atan2(_,B)-Math.atan2(z,X))*A,nt=(Math.atan2(_,B)-Math.atan2(z,-X))*A,Z=i(m[0],m[1],$,ot),Q=i(m[0],m[1],et,nt);return Z<=Q?[$,ot,m[2]]:[et,nt,m[2]]}function i(a,E,m,k){var I=d(m-a),O=d(k-E);return Math.sqrt(I*I+O*O)}function d(a){return(a%360+540)%360-180}function x(a,E,m){var k=m*L,I=a.slice(),O=E===0?1:0,z=E===2?1:2,B=Math.cos(k),F=Math.sin(k);return I[O]=a[O]*B-a[z]*F,I[z]=a[z]*B+a[O]*F,I}function w(a){return[Math.atan2(2*(a[0]*a[1]+a[2]*a[3]),1-2*(a[1]*a[1]+a[2]*a[2]))*A,Math.asin(Math.max(-1,Math.min(1,2*(a[0]*a[2]-a[3]*a[1]))))*A,Math.atan2(2*(a[0]*a[3]+a[1]*a[2]),1-2*(a[2]*a[2]+a[3]*a[3]))*A]}function C(a){var E=a[0]*L,m=a[1]*L,k=Math.cos(m);return[k*Math.cos(E),k*Math.sin(E),Math.sin(m)]}function y(a,E){for(var m=0,k=0,I=a.length;k<I;++k)m+=a[k]*E[k];return m}function S(a,E){return[a[1]*E[2]-a[2]*E[1],a[2]*E[0]-a[0]*E[2],a[0]*E[1]-a[1]*E[0]]}function M(a){for(var E=0,m=arguments.length,k=[];++E<m;)k.push(arguments[E]);var I=b.dispatch.apply(null,k);return I.of=function(O,z){return function(B){var F;try{F=B.sourceEvent=b.event,B.target=a,b.event=B,I[B.type].apply(O,z)}finally{b.event=F}}},I}},84888:function(j,V,t){var b=t(24040),P=t(33816).SUBPLOT_PATTERN;V.KY=function(o,L,A){var v=b.subplotsRegistry[L];if(!v)return[];for(var p=v.attr,r=[],e=0;e<o.length;e++){var s=o[e],n=s[0].trace;n[p]===A&&r.push(s)}return r},V._M=function(o,L,A){var v=[],p=[],r;if(typeof L=="string"?r=b.getModule(L).plot:typeof L=="function"?r=L:r=L.plot,!r)return[v,o];for(var e=A,s=0;s<o.length;s++){var n=o[s],l=n[0].trace,f=l.zorder!==void 0;l.visible!==!0||l._length===0||(l._module&&l._module.plot===r&&(!f||l.zorder===e)?v.push(n):p.push(n))}return[v,p]},V.op=function(L,A,v){if(!b.subplotsRegistry[A])return[];var p=b.subplotsRegistry[A].attr,r=[],e,s,n;if(A==="gl2d"){var l=v.match(P);s="x"+l[1],n="y"+l[2]}for(var f=0;f<L.length;f++)e=L[f],A==="gl2d"&&b.traceIs(e,"gl2d")?e[p[0]]===s&&e[p[1]]===n&&r.push(e):e[p]===v&&r.push(e);return r}},2428:function(j,V,t){var b=t(62644),P=t(97264),o=t(29128),L=t(33816),A=t(89184);j.exports=p;function v(r,e){this.element=r,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function p(r){var e=r.mouseContainer,s=r.glplot,n=new v(e,s);function l(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function f(){for(var g=r.graphDiv._fullLayout._axisConstraintGroups,h=r.xaxis._id,T=r.yaxis._id,c=0;c<g.length;c++)if(g[c][h]!==-1){if(g[c][T]!==-1)return!0;break}return!1}n.mouseListener=b(e,u),e.addEventListener("touchstart",function(g){var h=o(g.changedTouches[0],e);u(0,h[0],h[1]),u(1,h[0],h[1]),g.preventDefault()},A?{passive:!1}:!1),e.addEventListener("touchmove",function(g){g.preventDefault();var h=o(g.changedTouches[0],e);u(1,h[0],h[1]),g.preventDefault()},A?{passive:!1}:!1),e.addEventListener("touchend",function(g){u(0,n.lastPos[0],n.lastPos[1]),g.preventDefault()},A?{passive:!1}:!1);function u(g,h,T){var c=r.calcDataBox(),i=s.viewBox,d=n.lastPos[0],x=n.lastPos[1],w=L.MINDRAG*s.pixelRatio,C=L.MINZOOM*s.pixelRatio,y,S;h*=s.pixelRatio,T*=s.pixelRatio,T=i[3]-i[1]-T;function M(O,z,B){var F=Math.min(z,B),_=Math.max(z,B);F!==_?(c[O]=F,c[O+2]=_,n.dataBox=c,r.setRanges(c)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(g){var a=h/(i[2]-i[0])*(c[2]-c[0])+c[0],E=T/(i[3]-i[1])*(c[3]-c[1])+c[1];n.boxInited||(n.boxStart[0]=a,n.boxStart[1]=E,n.dragStart[0]=h,n.dragStart[1]=T),n.boxEnd[0]=a,n.boxEnd[1]=E,n.boxInited=!0,!n.boxEnabled&&(n.boxStart[0]!==n.boxEnd[0]||n.boxStart[1]!==n.boxEnd[1])&&(n.boxEnabled=!0);var m=Math.abs(n.dragStart[0]-h)<C,k=Math.abs(n.dragStart[1]-T)<C;if(f()&&!(m&&k)){y=n.boxEnd[0]-n.boxStart[0],S=n.boxEnd[1]-n.boxStart[1];var I=(c[3]-c[1])/(c[2]-c[0]);Math.abs(y*I)>Math.abs(S)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(y)*I*(S>=0?1:-1),n.boxEnd[1]<c[1]?(n.boxEnd[1]=c[1],n.boxEnd[0]=n.boxStart[0]+(c[1]-n.boxStart[1])/Math.abs(I)):n.boxEnd[1]>c[3]&&(n.boxEnd[1]=c[3],n.boxEnd[0]=n.boxStart[0]+(c[3]-n.boxStart[1])/Math.abs(I))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(S)/I*(y>=0?1:-1),n.boxEnd[0]<c[0]?(n.boxEnd[0]=c[0],n.boxEnd[1]=n.boxStart[1]+(c[0]-n.boxStart[0])*Math.abs(I)):n.boxEnd[0]>c[2]&&(n.boxEnd[0]=c[2],n.boxEnd[1]=n.boxStart[1]+(c[2]-n.boxStart[0])*Math.abs(I)))}else m&&(n.boxEnd[0]=n.boxStart[0]),k&&(n.boxEnd[1]=n.boxStart[1])}else n.boxEnabled?(y=n.boxStart[0]!==n.boxEnd[0],S=n.boxStart[1]!==n.boxEnd[1],y||S?(y&&(M(0,n.boxStart[0],n.boxEnd[0]),r.xaxis.autorange=!1),S&&(M(1,n.boxStart[1],n.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,g?(n.panning||(n.dragStart[0]=h,n.dragStart[1]=T),Math.abs(n.dragStart[0]-h)<w&&(h=n.dragStart[0]),Math.abs(n.dragStart[1]-T)<w&&(T=n.dragStart[1]),y=(d-h)*(c[2]-c[0])/(s.viewBox[2]-s.viewBox[0]),S=(x-T)*(c[3]-c[1])/(s.viewBox[3]-s.viewBox[1]),c[0]+=y,c[2]+=y,c[1]+=S,c[3]+=S,r.setRanges(c),n.panning=!0,n.lastInputTime=Date.now(),l(),r.cameraChanged(),r.handleAnnotations()):n.panning&&(n.panning=!1,r.relayoutCallback());break}n.lastPos[0]=h,n.lastPos[1]=T}return n.wheelListener=P(e,function(g,h){if(!r.scrollZoom)return!1;var T=r.calcDataBox(),c=s.viewBox,i=n.lastPos[0],d=n.lastPos[1],x=Math.exp(5*h/(c[3]-c[1])),w=i/(c[2]-c[0])*(T[2]-T[0])+T[0],C=d/(c[3]-c[1])*(T[3]-T[1])+T[1];return T[0]=(T[0]-w)*x+w,T[2]=(T[2]-w)*x+w,T[1]=(T[1]-C)*x+C,T[3]=(T[3]-C)*x+C,r.setRanges(T),n.lastInputTime=Date.now(),l(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),n}},92568:function(j,V,t){var b=t(54460),P=t(43080);function o(p){this.scene=p,this.gl=p.gl,this.pixelRatio=p.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var L=o.prototype,A=["xaxis","yaxis"];L.merge=function(p){this.titleEnable=!1,this.backgroundColor=P(p.plot_bgcolor);var r,e,s,n,l,f,u,g,h,T,c;for(T=0;T<2;++T){r=A[T];var i=r.charAt(0);for(e=p[this.scene[r]._name],s=e.title.text===this.scene.fullLayout._dfltTitle[i]?"":e.title.text,c=0;c<=2;c+=2)this.labelEnable[T+c]=!1,this.labels[T+c]=s,this.labelColor[T+c]=P(e.title.font.color),this.labelFont[T+c]=e.title.font.family,this.labelSize[T+c]=e.title.font.size,this.labelPad[T+c]=this.getLabelPad(r,e),this.tickEnable[T+c]=!1,this.tickColor[T+c]=P((e.tickfont||{}).color),this.tickAngle[T+c]=e.tickangle==="auto"?0:Math.PI*-e.tickangle/180,this.tickPad[T+c]=this.getTickPad(e),this.tickMarkLength[T+c]=0,this.tickMarkWidth[T+c]=e.tickwidth||0,this.tickMarkColor[T+c]=P(e.tickcolor),this.borderLineEnable[T+c]=!1,this.borderLineColor[T+c]=P(e.linecolor),this.borderLineWidth[T+c]=e.linewidth||0;u=this.hasSharedAxis(e),l=this.hasAxisInDfltPos(r,e)&&!u,f=this.hasAxisInAltrPos(r,e)&&!u,n=e.mirror||!1,g=u?String(n).indexOf("all")!==-1:!!n,h=u?n==="allticks":String(n).indexOf("ticks")!==-1,l?this.labelEnable[T]=!0:f&&(this.labelEnable[T+2]=!0),l?this.tickEnable[T]=e.showticklabels:f&&(this.tickEnable[T+2]=e.showticklabels),(l||g)&&(this.borderLineEnable[T]=e.showline),(f||g)&&(this.borderLineEnable[T+2]=e.showline),(l||h)&&(this.tickMarkLength[T]=this.getTickMarkLength(e)),(f||h)&&(this.tickMarkLength[T+2]=this.getTickMarkLength(e)),this.gridLineEnable[T]=e.showgrid,this.gridLineColor[T]=P(e.gridcolor),this.gridLineWidth[T]=e.gridwidth,this.zeroLineEnable[T]=e.zeroline,this.zeroLineColor[T]=P(e.zerolinecolor),this.zeroLineWidth[T]=e.zerolinewidth}},L.hasSharedAxis=function(p){var r=this.scene,e=r.fullLayout._subplots.gl2d,s=b.findSubplotsWithAxis(e,p);return s.indexOf(r.id)!==0},L.hasAxisInDfltPos=function(p,r){var e=r.side;if(p==="xaxis")return e==="bottom";if(p==="yaxis")return e==="left"},L.hasAxisInAltrPos=function(p,r){var e=r.side;if(p==="xaxis")return e==="top";if(p==="yaxis")return e==="right"},L.getLabelPad=function(p,r){var e=1.5,s=r.title.font.size,n=r.showticklabels;if(p==="xaxis")return r.side==="top"?-10+s*(e+(n?1:0)):-10+s*(e+(n?.5:0));if(p==="yaxis")return r.side==="right"?10+s*(e+(n?1:.5)):10+s*(e+(n?.5:0))},L.getTickPad=function(p){return p.ticks==="outside"?10+p.ticklen:15},L.getTickMarkLength=function(p){if(!p.ticks)return 0;var r=p.ticklen;return p.ticks==="inside"?-r:r};function v(p){return new o(p)}j.exports=v},39952:function(j,V,t){var b=t(67824).overrideAll,P=t(17188),o=t(64859),L=t(9616),A=t(33816),v=t(57952),p=t(65460),r=t(84888).op;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=A.idRegex,V.attrRegex=A.attrRegex,V.attributes=t(26720),V.supplyLayoutDefaults=function(e,s,n){s._has("cartesian")||v.supplyLayoutDefaults(e,s,n)},V.layoutAttrOverrides=b(v.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=b({plot_bgcolor:o.plot_bgcolor,hoverlabel:p.hoverlabel},"plot","nested"),V.plot=function(s){for(var n=s._fullLayout,l=s._fullData,f=n._subplots.gl2d,u=0;u<f.length;u++){var g=f[u],h=n._plots[g],T=r(l,"gl2d",g),c=h._scene2d;c===void 0&&(c=new P({id:g,graphDiv:s,container:s.querySelector(".gl-container"),staticPlot:s._context.staticPlot,plotGlPixelRatio:s._context.plotGlPixelRatio},n),h._scene2d=c),c.plot(T,s.calcdata,n,s.layout)}},V.clean=function(e,s,n,l){for(var f=l._subplots.gl2d||[],u=0;u<f.length;u++){var g=f[u],h=l._plots[g];if(h._scene2d){var T=r(e,"gl2d",g);T.length===0&&(h._scene2d.destroy(),delete l._plots[g])}}v.clean.apply(this,arguments)},V.drawFramework=function(e){e._context.staticPlot||v.drawFramework(e)},V.toSVG=function(e){for(var s=e._fullLayout,n=s._subplots.gl2d,l=0;l<n.length;l++){var f=s._plots[n[l]],u=f._scene2d,g=u.toImage("png"),h=s._glimages.append("svg:image");h.attr({xmlns:L.svg,"xlink:href":g,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),u.destroy()}},V.updateFx=function(e){for(var s=e._fullLayout,n=s._subplots.gl2d,l=0;l<n.length;l++){var f=s._plots[n[l]]._scene2d;f.updateFx(s.dragmode)}}},17188:function(j,V,t){var b=t(24040),P=t(54460),o=t(93024),L=t(67792).gl_plot2d,A=t(67792).gl_spikes2d,v=t(67792).gl_select_box,p=t(5408),r=t(92568),e=t(2428),s=t(16576),n=t(71888),l=n.enforce,f=n.clean,u=t(19280).doAutoRange,g=t(72760),h=g.drawMode,T=g.selectMode,c=["xaxis","yaxis"],i,d,x=t(33816).SUBPLOT_PATTERN;function w(S,M){this.container=S.container,this.graphDiv=S.graphDiv,this.pixelRatio=S.plotGlPixelRatio||window.devicePixelRatio,this.id=S.id,this.staticPlot=!!S.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(M),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(M),this.glplot=L(this.glplotOptions),this.camera=e(this),this.traces={},this.spikes=A(this.glplot),this.selectBox=v(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}j.exports=w;var C=w.prototype;C.makeFramework=function(){if(this.staticPlot){if(!d&&(i=document.createElement("canvas"),d=p({canvas:i,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!d))throw new Error("Error creating static canvas/context for image server");this.canvas=i,this.gl=d}else{var S=this.container.querySelector(".gl-canvas-focus"),M=p({canvas:S,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!M){s(this),this.stopped=!0;return}this.canvas=S,this.gl=M}var a=this.canvas;a.style.width="100%",a.style.height="100%",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style["pointer-events"]="none",this.updateSize(a);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var m=this.mouseContainer=document.createElement("div");m.style.position="absolute",m.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var k=this.container;k.appendChild(E),k.appendChild(m);var I=this;m.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),m.addEventListener("mouseover",function(){I.isMouseOver=!0})},C.toImage=function(S){S||(S="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(i),this.updateSize(this.canvas);var M=this.glplot.gl,a=M.drawingBufferWidth,E=M.drawingBufferHeight;M.clearColor(1,1,1,0),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),M.bindFramebuffer(M.FRAMEBUFFER,null);var m=new Uint8Array(a*E*4);M.readPixels(0,0,a,E,M.RGBA,M.UNSIGNED_BYTE,m);for(var k=0,I=E-1;k<I;++k,--I)for(var O=0;O<a;++O)for(var z=0;z<4;++z){var B=m[4*(a*k+O)+z];m[4*(a*k+O)+z]=m[4*(a*I+O)+z],m[4*(a*I+O)+z]=B}var F=document.createElement("canvas");F.width=a,F.height=E;var _=F.getContext("2d",{willReadFrequently:!0}),N=_.createImageData(a,E);N.data.set(m),_.putImageData(N,0,0);var G;switch(S){case"jpeg":G=F.toDataURL("image/jpeg");break;case"webp":G=F.toDataURL("image/webp");break;default:G=F.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(i),G},C.updateSize=function(S){S||(S=this.canvas);var M=this.pixelRatio,a=this.fullLayout,E=a.width,m=a.height,k=Math.ceil(M*E)|0,I=Math.ceil(M*m)|0;return(S.width!==k||S.height!==I)&&(S.width=k,S.height=I),S},C.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var S=[P.calcTicks(this.xaxis),P.calcTicks(this.yaxis)],M=0;M<2;++M)for(var a=0;a<S[M].length;++a)S[M][a].text=S[M][a].text+"";return S};function y(S,M){for(var a=0;a<2;++a){var E=S[a],m=M[a];if(E.length!==m.length)return!0;for(var k=0;k<E.length;++k)if(E[k].x!==m[k].x)return!0}return!1}C.updateRefs=function(S){this.fullLayout=S;var M=this.id.match(x),a="xaxis"+M[1],E="yaxis"+M[2];this.xaxis=this.fullLayout[a],this.yaxis=this.fullLayout[E]},C.relayoutCallback=function(){var S=this.graphDiv,M=this.xaxis,a=this.yaxis,E=S.layout,m={},k=m[M._name+".range"]=M.range.slice(),I=m[a._name+".range"]=a.range.slice();m[M._name+".autorange"]=M.autorange,m[a._name+".autorange"]=a.autorange,b.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,m);var O=E[M._name];O.range=k,O.autorange=M.autorange;var z=E[a._name];z.range=I,z.autorange=a.autorange,m.lastInputTime=this.camera.lastInputTime,S.emit("plotly_relayout",m)},C.cameraChanged=function(){var S=this.camera;this.glplot.setDataBox(this.calcDataBox());var M=this.computeTickMarks(),a=this.glplotOptions.ticks;y(M,a)&&(this.glplotOptions.ticks=M,this.glplotOptions.dataBox=S.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},C.handleAnnotations=function(){for(var S=this.graphDiv,M=this.fullLayout.annotations,a=0;a<M.length;a++){var E=M[a];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&b.getComponentMethod("annotations","drawOne")(S,a)}},C.destroy=function(){if(this.glplot){var S=this.traces;S&&Object.keys(S).map(function(M){S[M].dispose(),delete S[M]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},C.plot=function(S,M,a){var E=this.glplot;this.updateRefs(a),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(S,M),this.updateFx(a.dragmode);var m=a.width,k=a.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(a),I.screenBox=[0,0,m,k];var O={_fullLayout:{_axisConstraintGroups:a._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:a._size}};f(O,this.xaxis),f(O,this.yaxis);var z=a._size,B=this.xaxis.domain,F=this.yaxis.domain;I.viewBox=[z.l+B[0]*z.w,z.b+F[0]*z.h,m-z.r-(1-B[1])*z.w,k-z.t-(1-F[1])*z.h],this.mouseContainer.style.width=z.w*(B[1]-B[0])+"px",this.mouseContainer.style.height=z.h*(F[1]-F[0])+"px",this.mouseContainer.height=z.h*(F[1]-F[0]),this.mouseContainer.style.left=z.l+B[0]*z.w+"px",this.mouseContainer.style.top=z.t+(1-F[1])*z.h+"px";var _,N;for(N=0;N<2;++N)_=this[c[N]],_._length=I.viewBox[N+2]-I.viewBox[N],u(this.graphDiv,_),_.setScale();l(O),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(a),E.update(I),this.glplot.draw()},C.calcDataBox=function(){var S=this.xaxis,M=this.yaxis,a=S.range,E=M.range,m=S.r2l,k=M.r2l;return[m(a[0]),k(E[0]),m(a[1]),k(E[1])]},C.setRanges=function(S){var M=this.xaxis,a=this.yaxis,E=M.l2r,m=a.l2r;M.range=[E(S[0]),E(S[2])],a.range=[m(S[1]),m(S[3])]},C.updateTraces=function(S,M){var a=Object.keys(this.traces),E,m,k;this.fullData=S;t:for(E=0;E<a.length;E++){var I=a[E],O=this.traces[I];for(m=0;m<S.length;m++)if(k=S[m],k.uid===I&&k.type===O.type)continue t;O.dispose(),delete this.traces[I]}for(E=0;E<S.length;E++){k=S[E];var z=M[E],B=this.traces[k.uid];B?B.update(k,z):(B=k._module.plot(this,k,z),this.traces[k.uid]=B)}this.glplot.objects.sort(function(F,_){return F._trace.index-_._trace.index})},C.updateFx=function(S){T(S)||h(S)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),S==="pan"?this.mouseContainer.style.cursor="move":S==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},C.emitPointAction=function(S,M){for(var a=S.trace.uid,E=S.pointIndex,m,k=0;k<this.fullData.length;k++)this.fullData[k].uid===a&&(m=this.fullData[k]);var I={x:S.traceCoord[0],y:S.traceCoord[1],curveNumber:m.index,pointNumber:E,data:m._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};o.appendArrayPointValue(I,m,E),this.graphDiv.emit(M,{points:[I]})},C.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var S=this.glplot,M=this.camera,a=M.mouseListener,E=this.lastButtonState===1&&a.buttons===0,m=this.fullLayout;this.lastButtonState=a.buttons,this.cameraChanged();var k=a.x*S.pixelRatio,I=this.canvas.height-S.pixelRatio*a.y,O;if(M.boxEnabled&&m.dragmode==="zoom"){this.selectBox.enabled=!0;for(var z=this.selectBox.selectBox=[Math.min(M.boxStart[0],M.boxEnd[0]),Math.min(M.boxStart[1],M.boxEnd[1]),Math.max(M.boxStart[0],M.boxEnd[0]),Math.max(M.boxStart[1],M.boxEnd[1])],B=0;B<2;B++)M.boxStart[B]===M.boxEnd[B]&&(z[B]=S.dataBox[B],z[B+2]=S.dataBox[B+2]);S.setDirty()}else if(!M.panning&&this.isMouseOver){this.selectBox.enabled=!1;var F=m._size,_=this.xaxis.domain,N=this.yaxis.domain;O=S.pick(k/S.pixelRatio+F.l+_[0]*F.w,I/S.pixelRatio-(F.t+(1-N[1])*F.h));var G=O&&O.object._trace.handlePick(O);if(G&&E&&this.emitPointAction(G,"plotly_click"),O&&O.object._trace.hoverinfo!=="skip"&&m.hovermode&&G&&(!this.lastPickResult||this.lastPickResult.traceUid!==G.trace.uid||this.lastPickResult.dataCoord[0]!==G.dataCoord[0]||this.lastPickResult.dataCoord[1]!==G.dataCoord[1])){var X=G;this.lastPickResult={traceUid:G.trace?G.trace.uid:null,dataCoord:G.dataCoord.slice()},this.spikes.update({center:O.dataCoord}),X.screenCoord=[((S.viewBox[2]-S.viewBox[0])*(O.dataCoord[0]-S.dataBox[0])/(S.dataBox[2]-S.dataBox[0])+S.viewBox[0])/S.pixelRatio,(this.canvas.height-(S.viewBox[3]-S.viewBox[1])*(O.dataCoord[1]-S.dataBox[1])/(S.dataBox[3]-S.dataBox[1])-S.viewBox[1])/S.pixelRatio],this.emitPointAction(G,"plotly_hover");var $=this.fullData[X.trace.index]||{},et=X.pointIndex,ot=o.castHoverinfo($,m,et);if(ot&&ot!=="all"){var nt=ot.split("+");nt.indexOf("x")===-1&&(X.traceCoord[0]=void 0),nt.indexOf("y")===-1&&(X.traceCoord[1]=void 0),nt.indexOf("z")===-1&&(X.traceCoord[2]=void 0),nt.indexOf("text")===-1&&(X.textLabel=void 0),nt.indexOf("name")===-1&&(X.name=void 0)}o.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:o.castHoverOption($,et,"bgcolor")||X.color,borderColor:o.castHoverOption($,et,"bordercolor"),fontFamily:o.castHoverOption($,et,"font.family"),fontSize:o.castHoverOption($,et,"font.size"),fontColor:o.castHoverOption($,et,"font.color"),nameLength:o.castHoverOption($,et,"namelength"),textAlign:o.castHoverOption($,et,"align")},{container:this.svgContainer,gd:this.graphDiv})}}O||this.unhover(),S.draw()}},C.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),o.loneUnhover(this.svgContainer))},C.hoverFormatter=function(S,M){if(M!==void 0){var a=this[S];return P.tickText(a,a.c2l(M),"hover").text}}},12536:function(j,V,t){var b=t(67824).overrideAll,P=t(65460),o=t(98432),L=t(84888).op,A=t(3400),v=t(9616),p="gl3d",r="scene";V.name=p,V.attr=r,V.idRoot=r,V.idRegex=V.attrRegex=A.counterRegex("scene"),V.attributes=t(6636),V.layoutAttributes=t(346),V.baseLayoutAttrOverrides=b({hoverlabel:P.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=t(5208),V.plot=function(s){for(var n=s._fullLayout,l=s._fullData,f=n._subplots[p],u=0;u<f.length;u++){var g=f[u],h=L(l,p,g),T=n[g],c=T.camera,i=T._scene;i||(i=new o({id:g,graphDiv:s,container:s.querySelector(".gl-container"),staticPlot:s._context.staticPlot,plotGlPixelRatio:s._context.plotGlPixelRatio,camera:c},n),T._scene=i),i.viewInitial||(i.viewInitial={up:{x:c.up.x,y:c.up.y,z:c.up.z},eye:{x:c.eye.x,y:c.eye.y,z:c.eye.z},center:{x:c.center.x,y:c.center.y,z:c.center.z}}),i.plot(h,n,s.layout)}},V.clean=function(e,s,n,l){for(var f=l._subplots[p]||[],u=0;u<f.length;u++){var g=f[u];!s[g]&&l[g]._scene&&(l[g]._scene.destroy(),l._infolayer&&l._infolayer.selectAll(".annotation-"+g).remove())}},V.toSVG=function(e){for(var s=e._fullLayout,n=s._subplots[p],l=s._size,f=0;f<n.length;f++){var u=s[n[f]],g=u.domain,h=u._scene,T=h.toImage("png"),c=s._glimages.append("svg:image");c.attr({xmlns:v.svg,"xlink:href":T,x:l.l+l.w*g.x[0],y:l.t+l.h*(1-g.y[1]),width:l.w*(g.x[1]-g.x[0]),height:l.h*(g.y[1]-g.y[0]),preserveAspectRatio:"none"}),h.destroy()}},V.cleanId=function(s){if(s.match(/^scene[0-9]*$/)){var n=s.substr(5);return n==="1"&&(n=""),r+n}},V.updateFx=function(e){for(var s=e._fullLayout,n=s._subplots[p],l=0;l<n.length;l++){var f=s[n[l]]._scene;f.updateFx(s.dragmode,s.hovermode)}}},6636:function(j){j.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},86140:function(j,V,t){var b=t(76308),P=t(94724),o=t(92880).extendFlat,L=t(67824).overrideAll;j.exports=L({visible:P.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:b.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:P.color,categoryorder:P.categoryorder,categoryarray:P.categoryarray,title:{text:P.title.text,font:P.title.font},type:o({},P.type,{values:["-","linear","log","date","category"]}),autotypenumbers:P.autotypenumbers,autorange:P.autorange,autorangeoptions:{minallowed:P.autorangeoptions.minallowed,maxallowed:P.autorangeoptions.maxallowed,clipmin:P.autorangeoptions.clipmin,clipmax:P.autorangeoptions.clipmax,include:P.autorangeoptions.include,editType:"plot"},rangemode:P.rangemode,minallowed:P.minallowed,maxallowed:P.maxallowed,range:o({},P.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:P.minor.tickmode,nticks:P.nticks,tick0:P.tick0,dtick:P.dtick,tickvals:P.tickvals,ticktext:P.ticktext,ticks:P.ticks,mirror:P.mirror,ticklen:P.ticklen,tickwidth:P.tickwidth,tickcolor:P.tickcolor,showticklabels:P.showticklabels,labelalias:P.labelalias,tickfont:P.tickfont,tickangle:P.tickangle,tickprefix:P.tickprefix,showtickprefix:P.showtickprefix,ticksuffix:P.ticksuffix,showticksuffix:P.showticksuffix,showexponent:P.showexponent,exponentformat:P.exponentformat,minexponent:P.minexponent,separatethousands:P.separatethousands,tickformat:P.tickformat,tickformatstops:P.tickformatstops,hoverformat:P.hoverformat,showline:P.showline,linecolor:P.linecolor,linewidth:P.linewidth,showgrid:P.showgrid,gridcolor:o({},P.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:P.gridwidth,zeroline:P.zeroline,zerolinecolor:P.zerolinecolor,zerolinewidth:P.zerolinewidth,_deprecated:{title:P._deprecated.title,titlefont:P._deprecated.titlefont}},"plot","from-root")},64380:function(j,V,t){var b=t(49760).mix,P=t(3400),o=t(31780),L=t(86140),A=t(14944),v=t(28336),p=["xaxis","yaxis","zaxis"],r=100*136/187;j.exports=function(s,n,l){var f,u;function g(c,i){return P.coerce(f,u,L,c,i)}for(var h=0;h<p.length;h++){var T=p[h];f=s[T]||{},u=o.newContainer(n,T),u._id=T[0]+l.scene,u._name=T,A(f,u,g,l),v(f,u,g,{font:l.font,letter:T[0],data:l.data,showGrid:!0,noAutotickangles:!0,noTicklabelindex:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,noInsiderange:!0,bgColor:l.bgColor,calendar:l.calendar},l.fullLayout),g("gridcolor",b(u.color,l.bgColor,r).toRgbString()),g("title.text",T[0]),u.setScale=P.noop,g("showspikes")&&(g("spikesides"),g("spikethickness"),g("spikecolor",u.color)),g("showaxeslabels"),g("showbackground")&&g("backgroundcolor")}}},44728:function(j,V,t){var b=t(43080),P=t(3400),o=["xaxis","yaxis","zaxis"];function L(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickFontWeight=["normal","normal","normal","normal"],this.tickFontStyle=["normal","normal","normal","normal"],this.tickFontVariant=["normal","normal","normal","normal"],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelFontWeight=["normal","normal","normal","normal"],this.labelFontStyle=["normal","normal","normal","normal"],this.labelFontVariant=["normal","normal","normal","normal"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var A=L.prototype;A.merge=function(p,r){for(var e=this,s=0;s<3;++s){var n=r[o[s]];if(!n.visible){e.tickEnable[s]=!1,e.labelEnable[s]=!1,e.lineEnable[s]=!1,e.lineTickEnable[s]=!1,e.gridEnable[s]=!1,e.zeroEnable[s]=!1,e.backgroundEnable[s]=!1;continue}e.labels[s]=p._meta?P.templateString(n.title.text,p._meta):n.title.text,"font"in n.title&&(n.title.font.color&&(e.labelColor[s]=b(n.title.font.color)),n.title.font.family&&(e.labelFont[s]=n.title.font.family),n.title.font.size&&(e.labelSize[s]=n.title.font.size),n.title.font.weight&&(e.labelFontWeight[s]=n.title.font.weight),n.title.font.style&&(e.labelFontStyle[s]=n.title.font.style),n.title.font.variant&&(e.labelFontVariant[s]=n.title.font.variant)),"showline"in n&&(e.lineEnable[s]=n.showline),"linecolor"in n&&(e.lineColor[s]=b(n.linecolor)),"linewidth"in n&&(e.lineWidth[s]=n.linewidth),"showgrid"in n&&(e.gridEnable[s]=n.showgrid),"gridcolor"in n&&(e.gridColor[s]=b(n.gridcolor)),"gridwidth"in n&&(e.gridWidth[s]=n.gridwidth),n.type==="log"?e.zeroEnable[s]=!1:"zeroline"in n&&(e.zeroEnable[s]=n.zeroline),"zerolinecolor"in n&&(e.zeroLineColor[s]=b(n.zerolinecolor)),"zerolinewidth"in n&&(e.zeroLineWidth[s]=n.zerolinewidth),"ticks"in n&&n.ticks?e.lineTickEnable[s]=!0:e.lineTickEnable[s]=!1,"ticklen"in n&&(e.lineTickLength[s]=e._defaultLineTickLength[s]=n.ticklen),"tickcolor"in n&&(e.lineTickColor[s]=b(n.tickcolor)),"tickwidth"in n&&(e.lineTickWidth[s]=n.tickwidth),"tickangle"in n&&(e.tickAngle[s]=n.tickangle==="auto"?-3600:Math.PI*-n.tickangle/180),"showticklabels"in n&&(e.tickEnable[s]=n.showticklabels),"tickfont"in n&&(n.tickfont.color&&(e.tickColor[s]=b(n.tickfont.color)),n.tickfont.family&&(e.tickFont[s]=n.tickfont.family),n.tickfont.size&&(e.tickSize[s]=n.tickfont.size),n.tickfont.weight&&(e.tickFontWeight[s]=n.tickfont.weight),n.tickfont.style&&(e.tickFontStyle[s]=n.tickfont.style),n.tickfont.variant&&(e.tickFontVariant[s]=n.tickfont.variant)),"mirror"in n?["ticks","all","allticks"].indexOf(n.mirror)!==-1?(e.lineTickMirror[s]=!0,e.lineMirror[s]=!0):n.mirror===!0?(e.lineTickMirror[s]=!1,e.lineMirror[s]=!0):(e.lineTickMirror[s]=!1,e.lineMirror[s]=!1):e.lineMirror[s]=!1,"showbackground"in n&&n.showbackground!==!1?(e.backgroundEnable[s]=!0,e.backgroundColor[s]=b(n.backgroundcolor)):e.backgroundEnable[s]=!1}};function v(p,r){var e=new L;return e.merge(p,r),e}j.exports=v},5208:function(j,V,t){var b=t(3400),P=t(76308),o=t(24040),L=t(168),A=t(64380),v=t(346),p=t(84888).op,r="gl3d";j.exports=function(n,l,f){var u=l._basePlotModules.length>1;function g(h){if(!u){var T=b.validate(n[h],v[h]);if(T)return n[h]}}L(n,l,f,{type:r,attributes:v,handleDefaults:e,fullLayout:l,font:l.font,fullData:f,getDfltFromLayout:g,autotypenumbersDflt:l.autotypenumbers,paper_bgcolor:l.paper_bgcolor,calendar:l.calendar})};function e(s,n,l,f){for(var u=l("bgcolor"),g=P.combine(u,f.paper_bgcolor),h=["up","center","eye"],T=0;T<h.length;T++)l("camera."+h[T]+".x"),l("camera."+h[T]+".y"),l("camera."+h[T]+".z");l("camera.projection.type");var c=!!l("aspectratio.x")&&!!l("aspectratio.y")&&!!l("aspectratio.z"),i=c?"manual":"auto",d=l("aspectmode",i);c||(s.aspectratio=n.aspectratio={x:1,y:1,z:1},d==="manual"&&(n.aspectmode="auto"),s.aspectmode=n.aspectmode);var x=p(f.fullData,r,f.id);A(s,n,{font:f.font,scene:f.id,data:x,bgColor:g,calendar:f.calendar,autotypenumbersDflt:f.autotypenumbersDflt,fullLayout:f.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(s,n,f);var w=f.getDfltFromLayout("dragmode");if(w!==!1&&!w)if(w="orbit",s.camera&&s.camera.up){var C=s.camera.up.x,y=s.camera.up.y,S=s.camera.up.z;S!==0&&(!C||!y||!S||S/Math.sqrt(C*C+y*y+S*S)>.999)&&(w="turntable")}else w="turntable";l("dragmode",w),l("hovermode",f.getDfltFromLayout("hovermode"))}},346:function(j,V,t){var b=t(86140),P=t(86968).u,o=t(92880).extendFlat,L=t(3400).counterRegex;function A(v,p,r){return{x:{valType:"number",dflt:v,editType:"camera"},y:{valType:"number",dflt:p,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}j.exports={_arrayAttrRegexps:[L("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(A(0,0,1),{}),center:o(A(0,0,0),{}),eye:o(A(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:P({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:b,yaxis:b,zaxis:b,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},9020:function(j,V,t){var b=t(43080),P=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var L=o.prototype;L.merge=function(v){for(var p=0;p<3;++p){var r=v[P[p]];if(!r.visible){this.enabled[p]=!1,this.drawSides[p]=!1;continue}this.enabled[p]=r.showspikes,this.colors[p]=b(r.spikecolor),this.drawSides[p]=r.spikesides,this.lineWidth[p]=r.spikethickness}};function A(v){var p=new o;return p.merge(v),p}j.exports=A},87152:function(j,V,t){j.exports=A;var b=t(54460),P=t(3400),o=["xaxis","yaxis","zaxis"];function L(v){for(var p=new Array(3),r=0;r<3;++r){for(var e=v[r],s=new Array(e.length),n=0;n<e.length;++n)s[n]=e[n].x;p[r]=s}return p}function A(v){for(var p=v.axesOptions,r=v.glplot.axesPixels,e=v.fullSceneLayout,s=[[],[],[]],n=0;n<3;++n){var l=e[o[n]];if(l._length=(r[n].hi-r[n].lo)*r[n].pixelsPerDataUnit/v.dataScale[n],Math.abs(l._length)===1/0||isNaN(l._length))s[n]=[];else{l._input_range=l.range.slice(),l.range[0]=r[n].lo/v.dataScale[n],l.range[1]=r[n].hi/v.dataScale[n],l._m=1/(v.dataScale[n]*r[n].pixelsPerDataUnit),l.range[0]===l.range[1]&&(l.range[0]-=1,l.range[1]+=1);var f=l.tickmode;if(l.tickmode==="auto"){l.tickmode="linear";var u=l.nticks||P.constrain(l._length/40,4,9);b.autoTicks(l,Math.abs(l.range[1]-l.range[0])/u)}for(var g=b.calcTicks(l,{msUTC:!0}),h=0;h<g.length;++h)g[h].x=g[h].x*v.dataScale[n],l.type==="date"&&(g[h].text=g[h].text.replace(/\<br\>/g," "));s[n]=g,l.tickmode=f}}p.ticks=s;for(var n=0;n<3;++n){.5*(v.glplot.bounds[0][n]+v.glplot.bounds[1][n]);for(var h=0;h<2;++h)p.bounds[h][n]=v.glplot.bounds[h][n]}v.contourLevels=L(s)}},94424:function(j){function V(b,P){var o=[0,0,0,0],L,A;for(L=0;L<4;++L)for(A=0;A<4;++A)o[A]+=b[4*L+A]*P[L];return o}function t(b,P){var o=V(b.projection,V(b.view,V(b.model,[P[0],P[1],P[2],1])));return o}j.exports=t},98432:function(j,V,t){var b=t(67792).gl_plot3d,P=b.createCamera,o=b.createScene,L=t(5408),A=t(89184),v=t(24040),p=t(3400),r=p.preserveDrawingBuffer(),e=t(54460),s=t(93024),n=t(43080),l=t(16576),f=t(94424),u=t(44728),g=t(9020),h=t(87152),T=t(19280).applyAutorangeOptions,c,i,d=!1;function x(I,O){var z=document.createElement("div"),B=I.container;this.graphDiv=I.graphDiv;var F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none",z.appendChild(F),this.svgContainer=F,z.id=I.id,z.style.position="absolute",z.style.top=z.style.left="0px",z.style.width=z.style.height="100%",B.appendChild(z),this.fullLayout=O,this.id=I.id||"scene",this.fullSceneLayout=O[this.id],this.plotArgs=[[],{},{}],this.axesOptions=u(O,O[this.id]),this.spikeOptions=g(O[this.id]),this.container=z,this.staticMode=!!I.staticPlot,this.pixelRatio=this.pixelRatio||I.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=v.getComponentMethod("annotations3d","convert"),this.drawAnnotations=v.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var w=x.prototype;w.prepareOptions=function(){var I=this,O={canvas:I.canvas,gl:I.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:I.container,axes:I.axesOptions,spikes:I.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:I.camera,pixelRatio:I.pixelRatio};if(I.staticMode){if(!i&&(c=document.createElement("canvas"),i=L({canvas:c,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!i))throw new Error("error creating static canvas/context for image server");O.gl=i,O.canvas=c}return O};var C=!0;w.tryCreatePlot=function(){var I=this,O=I.prepareOptions(),z=!0;try{I.glplot=o(O)}catch{if(I.staticMode||!C||r)z=!1;else{p.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=O.glOptions.preserveDrawingBuffer=!0,I.glplot=o(O)}catch{r=O.glOptions.preserveDrawingBuffer=!1,z=!1}}}return C=!1,z},w.initializeGLCamera=function(){var I=this,O=I.fullSceneLayout.camera,z=O.projection.type==="orthographic";I.camera=P(I.container,{center:[O.center.x,O.center.y,O.center.z],eye:[O.eye.x,O.eye.y,O.eye.z],up:[O.up.x,O.up.y,O.up.z],_ortho:z,zoomMin:.01,zoomMax:100,mode:"orbit"})},w.initializeGLPlot=function(){var I=this;I.initializeGLCamera();var O=I.tryCreatePlot();if(!O)return l(I);I.traces={},I.make4thDimension();var z=I.graphDiv,B=z.layout,F=function(){var N={};return I.isCameraChanged(B)&&(N[I.id+".camera"]=I.getCamera()),I.isAspectChanged(B)&&(N[I.id+".aspectratio"]=I.glplot.getAspectratio(),B[I.id].aspectmode!=="manual"&&(I.fullSceneLayout.aspectmode=B[I.id].aspectmode=N[I.id+".aspectmode"]="manual")),N},_=function(N){if(N.fullSceneLayout.dragmode!==!1){var G=F();N.saveLayout(B),N.graphDiv.emit("plotly_relayout",G)}};return I.glplot.canvas&&(I.glplot.canvas.addEventListener("mouseup",function(){_(I)}),I.glplot.canvas.addEventListener("touchstart",function(){d=!0}),I.glplot.canvas.addEventListener("wheel",function(N){if(z._context._scrollZoom.gl3d){if(I.camera._ortho){var G=N.deltaX>N.deltaY?1.1:.9090909090909091,X=I.glplot.getAspectratio();I.glplot.setAspectratio({x:G*X.x,y:G*X.y,z:G*X.z})}_(I)}},A?{passive:!1}:!1),I.glplot.canvas.addEventListener("mousemove",function(){if(I.fullSceneLayout.dragmode!==!1&&I.camera.mouseListener.buttons!==0){var N=F();I.graphDiv.emit("plotly_relayouting",N)}}),I.staticMode||I.glplot.canvas.addEventListener("webglcontextlost",function(N){z&&z.emit&&z.emit("plotly_webglcontextlost",{event:N,layer:I.id})},!1)),I.glplot.oncontextloss=function(){I.recoverContext()},I.glplot.onrender=function(){I.render()},!0},w.render=function(){var I=this,O=I.graphDiv,z,B=I.svgContainer,F=I.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var _=O._fullLayout._invScaleX,N=O._fullLayout._invScaleY,G=F.width*_,X=F.height*N;B.setAttributeNS(null,"viewBox","0 0 "+G+" "+X),B.setAttributeNS(null,"width",G),B.setAttributeNS(null,"height",X),h(I),I.glplot.axes.update(I.axesOptions);for(var $=Object.keys(I.traces),et=null,ot=I.glplot.selection,nt=0;nt<$.length;++nt)z=I.traces[$[nt]],z.data.hoverinfo!=="skip"&&z.handlePick(ot)&&(et=z),z.setContourLevels&&z.setContourLevels();function Z(Mt,Lt,zt){var xt=I.fullSceneLayout[Mt+"axis"];return xt.type!=="log"&&(Lt=xt.d2l(Lt)),e.hoverLabelText(xt,Lt,zt)}if(et!==null){var Q=f(I.glplot.cameraParams,ot.dataCoordinate);z=et.data;var W=O._fullData[z.index],J=ot.index,it={xLabel:Z("x",ot.traceCoordinate[0],z.xhoverformat),yLabel:Z("y",ot.traceCoordinate[1],z.yhoverformat),zLabel:Z("z",ot.traceCoordinate[2],z.zhoverformat)},K=s.castHoverinfo(W,I.fullLayout,J),H=(K||"").split("+"),at=K&&K==="all";!W.hovertemplate&&!at&&(H.indexOf("x")===-1&&(it.xLabel=void 0),H.indexOf("y")===-1&&(it.yLabel=void 0),H.indexOf("z")===-1&&(it.zLabel=void 0),H.indexOf("text")===-1&&(ot.textLabel=void 0),H.indexOf("name")===-1&&(et.name=void 0));var tt,lt=[];z.type==="cone"||z.type==="streamtube"?(it.uLabel=Z("x",ot.traceCoordinate[3],z.uhoverformat),(at||H.indexOf("u")!==-1)&&lt.push("u: "+it.uLabel),it.vLabel=Z("y",ot.traceCoordinate[4],z.vhoverformat),(at||H.indexOf("v")!==-1)&&lt.push("v: "+it.vLabel),it.wLabel=Z("z",ot.traceCoordinate[5],z.whoverformat),(at||H.indexOf("w")!==-1)&&lt.push("w: "+it.wLabel),it.normLabel=ot.traceCoordinate[6].toPrecision(3),(at||H.indexOf("norm")!==-1)&&lt.push("norm: "+it.normLabel),z.type==="streamtube"&&(it.divergenceLabel=ot.traceCoordinate[7].toPrecision(3),(at||H.indexOf("divergence")!==-1)&&lt.push("divergence: "+it.divergenceLabel)),ot.textLabel&&lt.push(ot.textLabel),tt=lt.join("<br>")):z.type==="isosurface"||z.type==="volume"?(it.valueLabel=e.hoverLabelText(I._mockAxis,I._mockAxis.d2l(ot.traceCoordinate[3]),z.valuehoverformat),lt.push("value: "+it.valueLabel),ot.textLabel&&lt.push(ot.textLabel),tt=lt.join("<br>")):tt=ot.textLabel;var dt={x:ot.traceCoordinate[0],y:ot.traceCoordinate[1],z:ot.traceCoordinate[2],data:W._input,fullData:W,curveNumber:W.index,pointNumber:J};s.appendArrayPointValue(dt,W,J),z._module.eventData&&(dt=W._module.eventData(dt,ot,W,{},J));var mt={points:[dt]};if(I.fullSceneLayout.hovermode){var gt=[];s.loneHover({trace:W,x:(.5+.5*Q[0]/Q[3])*G,y:(.5-.5*Q[1]/Q[3])*X,xLabel:it.xLabel,yLabel:it.yLabel,zLabel:it.zLabel,text:tt,name:et.name,color:s.castHoverOption(W,J,"bgcolor")||et.color,borderColor:s.castHoverOption(W,J,"bordercolor"),fontFamily:s.castHoverOption(W,J,"font.family"),fontSize:s.castHoverOption(W,J,"font.size"),fontColor:s.castHoverOption(W,J,"font.color"),nameLength:s.castHoverOption(W,J,"namelength"),textAlign:s.castHoverOption(W,J,"align"),hovertemplate:p.castOption(W,J,"hovertemplate"),hovertemplateLabels:p.extendFlat({},dt,it),eventData:[dt]},{container:B,gd:O,inOut_bbox:gt}),dt.bbox=gt[0]}ot.distance<5&&(ot.buttons||d)?O.emit("plotly_click",mt):O.emit("plotly_hover",mt),this.oldEventData=mt}else s.loneUnhover(B),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;I.drawAnnotations(I)},w.recoverContext=function(){var I=this;I.glplot.dispose();var O=function(){if(I.glplot.gl.isContextLost()){requestAnimationFrame(O);return}if(!I.initializeGLPlot()){p.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}I.plot.apply(I,I.plotArgs)};requestAnimationFrame(O)};var y=["xaxis","yaxis","zaxis"];function S(I,O,z){for(var B=I.fullSceneLayout,F=0;F<3;F++){var _=y[F],N=_.charAt(0),G=B[_],X=O[N],$=O[N+"calendar"],et=O["_"+N+"length"];if(!p.isArrayOrTypedArray(X))z[0][F]=Math.min(z[0][F],0),z[1][F]=Math.max(z[1][F],et-1);else for(var ot,nt=0;nt<(et||X.length);nt++)if(p.isArrayOrTypedArray(X[nt]))for(var Z=0;Z<X[nt].length;++Z)ot=G.d2l(X[nt][Z],0,$),!isNaN(ot)&&isFinite(ot)&&(z[0][F]=Math.min(z[0][F],ot),z[1][F]=Math.max(z[1][F],ot));else ot=G.d2l(X[nt],0,$),!isNaN(ot)&&isFinite(ot)&&(z[0][F]=Math.min(z[0][F],ot),z[1][F]=Math.max(z[1][F],ot))}}function M(I,O){for(var z=I.fullSceneLayout,B=z.annotations||[],F=0;F<3;F++)for(var _=y[F],N=_.charAt(0),G=z[_],X=0;X<B.length;X++){var $=B[X];if($.visible){var et=G.r2l($[N]);!isNaN(et)&&isFinite(et)&&(O[0][F]=Math.min(O[0][F],et),O[1][F]=Math.max(O[1][F],et))}}}w.plot=function(I,O,z){var B=this;if(B.plotArgs=[I,O,z],!B.glplot.contextLost){var F,_,N,G,X,$,et=O[B.id],ot=z[B.id];B.fullLayout=O,B.fullSceneLayout=et,B.axesOptions.merge(O,et),B.spikeOptions.merge(et),B.setViewport(et),B.updateFx(et.dragmode,et.hovermode),B.camera.enableWheel=B.graphDiv._context._scrollZoom.gl3d,B.glplot.setClearColor(n(et.bgcolor)),B.setConvert(X),I?Array.isArray(I)||(I=[I]):I=[];var nt=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<I.length;++N)F=I[N],!(F.visible!==!0||F._length===0)&&S(this,F,nt);M(this,nt);var Z=[1,1,1];for(G=0;G<3;++G)nt[1][G]===nt[0][G]?Z[G]=1:Z[G]=1/(nt[1][G]-nt[0][G]);for(B.dataScale=Z,B.convertAnnotations(this),N=0;N<I.length;++N)F=I[N],!(F.visible!==!0||F._length===0)&&(_=B.traces[F.uid],_?_.data.type===F.type?_.update(F):(_.dispose(),_=F._module.plot(this,F),B.traces[F.uid]=_):(_=F._module.plot(this,F),B.traces[F.uid]=_),_.name=F.name);var Q=Object.keys(B.traces);t:for(N=0;N<Q.length;++N){for(G=0;G<I.length;++G)if(I[G].uid===Q[N]&&I[G].visible===!0&&I[G]._length!==0)continue t;_=B.traces[Q[N]],_.dispose(),delete B.traces[Q[N]]}B.glplot.objects.sort(function(te,Wt){return te._trace.data.index-Wt._trace.data.index});var W=[[0,0,0],[0,0,0]],J={};for(N=0;N<3;++N){X=et[y[N]],$=X.type,$ in J?(J[$].acc*=Z[N],J[$].count+=1):J[$]={acc:Z[N],count:1};var it;if(X.autorange){W[0][N]=1/0,W[1][N]=-1/0;var K=B.glplot.objects,H=B.fullSceneLayout.annotations||[],at=X._name.charAt(0);for(G=0;G<K.length;G++){var tt=K[G],lt=tt.bounds,dt=tt._trace.data._pad||0;tt.constructor.name==="ErrorBars"&&X._lowerLogErrorBound?W[0][N]=Math.min(W[0][N],X._lowerLogErrorBound):W[0][N]=Math.min(W[0][N],lt[0][N]/Z[N]-dt),W[1][N]=Math.max(W[1][N],lt[1][N]/Z[N]+dt)}for(G=0;G<H.length;G++){var mt=H[G];if(mt.visible){var gt=X.r2l(mt[at]);W[0][N]=Math.min(W[0][N],gt),W[1][N]=Math.max(W[1][N],gt)}}if("rangemode"in X&&X.rangemode==="tozero"&&(W[0][N]=Math.min(W[0][N],0),W[1][N]=Math.max(W[1][N],0)),W[0][N]>W[1][N])W[0][N]=-1,W[1][N]=1;else{var Mt=W[1][N]-W[0][N];W[0][N]-=Mt/32,W[1][N]+=Mt/32}if(it=[W[0][N],W[1][N]],it=T(it,X),W[0][N]=it[0],W[1][N]=it[1],X.isReversed()){var Lt=W[0][N];W[0][N]=W[1][N],W[1][N]=Lt}}else it=X.range,W[0][N]=X.r2l(it[0]),W[1][N]=X.r2l(it[1]);W[0][N]===W[1][N]&&(W[0][N]-=1,W[1][N]+=1),X.range=[W[0][N],W[1][N]],X.limitRange(),B.glplot.setBounds(N,{min:X.range[0]*Z[N],max:X.range[1]*Z[N]})}var zt,xt=et.aspectmode;if(xt==="cube")zt=[1,1,1];else if(xt==="manual"){var Ct=et.aspectratio;zt=[Ct.x,Ct.y,Ct.z]}else if(xt==="auto"||xt==="data"){var wt=[1,1,1];for(N=0;N<3;++N){X=et[y[N]],$=X.type;var Rt=J[$];wt[N]=Math.pow(Rt.acc,1/Rt.count)/Z[N]}xt==="data"||Math.max.apply(null,wt)/Math.min.apply(null,wt)<=4?zt=wt:zt=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");et.aspectratio.x=ot.aspectratio.x=zt[0],et.aspectratio.y=ot.aspectratio.y=zt[1],et.aspectratio.z=ot.aspectratio.z=zt[2],B.glplot.setAspectratio(et.aspectratio),B.viewInitial.aspectratio||(B.viewInitial.aspectratio={x:et.aspectratio.x,y:et.aspectratio.y,z:et.aspectratio.z}),B.viewInitial.aspectmode||(B.viewInitial.aspectmode=et.aspectmode);var Tt=et.domain||null,Bt=O._size||null;if(Tt&&Bt){var Gt=B.container.style;Gt.position="absolute",Gt.left=Bt.l+Tt.x[0]*Bt.w+"px",Gt.top=Bt.t+(1-Tt.y[1])*Bt.h+"px",Gt.width=Bt.w*(Tt.x[1]-Tt.x[0])+"px",Gt.height=Bt.h*(Tt.y[1]-Tt.y[0])+"px"}B.glplot.redraw()}},w.destroy=function(){var I=this;I.glplot&&(I.camera.mouseListener.enabled=!1,I.container.removeEventListener("wheel",I.camera.wheelListener),I.camera=null,I.glplot.dispose(),I.container.parentNode.removeChild(I.container),I.glplot=null)};function a(I){return[[I.eye.x,I.eye.y,I.eye.z],[I.center.x,I.center.y,I.center.z],[I.up.x,I.up.y,I.up.z]]}function E(I){return{up:{x:I.up[0],y:I.up[1],z:I.up[2]},center:{x:I.center[0],y:I.center[1],z:I.center[2]},eye:{x:I.eye[0],y:I.eye[1],z:I.eye[2]},projection:{type:I._ortho===!0?"orthographic":"perspective"}}}w.getCamera=function(){var I=this;return I.camera.view.recalcMatrix(I.camera.view.lastT()),E(I.camera)},w.setViewport=function(I){var O=this,z=I.camera;O.camera.lookAt.apply(this,a(z)),O.glplot.setAspectratio(I.aspectratio);var B=z.projection.type==="orthographic",F=O.camera._ortho;B!==F&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},w.isCameraChanged=function(I){var O=this,z=O.getCamera(),B=p.nestedProperty(I,O.id+".camera"),F=B.get();function _($,et,ot,nt){var Z=["up","center","eye"],Q=["x","y","z"];return et[Z[ot]]&&$[Z[ot]][Q[nt]]===et[Z[ot]][Q[nt]]}var N=!1;if(F===void 0)N=!0;else{for(var G=0;G<3;G++)for(var X=0;X<3;X++)if(!_(z,F,G,X)){N=!0;break}(!F.projection||z.projection&&z.projection.type!==F.projection.type)&&(N=!0)}return N},w.isAspectChanged=function(I){var O=this,z=O.glplot.getAspectratio(),B=p.nestedProperty(I,O.id+".aspectratio"),F=B.get();return F===void 0||F.x!==z.x||F.y!==z.y||F.z!==z.z},w.saveLayout=function(I){var O=this,z=O.fullLayout,B,F,_,N,G,X,$=O.isCameraChanged(I),et=O.isAspectChanged(I),ot=$||et;if(ot){var nt={};if($&&(B=O.getCamera(),F=p.nestedProperty(I,O.id+".camera"),_=F.get(),nt[O.id+".camera"]=_),et&&(N=O.glplot.getAspectratio(),G=p.nestedProperty(I,O.id+".aspectratio"),X=G.get(),nt[O.id+".aspectratio"]=X),v.call("_storeDirectGUIEdit",I,z._preGUI,nt),$){F.set(B);var Z=p.nestedProperty(z,O.id+".camera");Z.set(B)}if(et){G.set(N);var Q=p.nestedProperty(z,O.id+".aspectratio");Q.set(N),O.glplot.redraw()}}return ot},w.updateFx=function(I,O){var z=this,B=z.camera;if(B)if(I==="orbit")B.mode="orbit",B.keyBindingMode="rotate";else if(I==="turntable"){B.up=[0,0,1],B.mode="turntable",B.keyBindingMode="rotate";var F=z.graphDiv,_=F._fullLayout,N=z.fullSceneLayout.camera,G=N.up.x,X=N.up.y,$=N.up.z;if($/Math.sqrt(G*G+X*X+$*$)<.999){var et=z.id+".camera.up",ot={x:0,y:0,z:1},nt={};nt[et]=ot;var Z=F.layout;v.call("_storeDirectGUIEdit",Z,_._preGUI,nt),N.up=ot,p.nestedProperty(Z,et).set(ot)}}else B.keyBindingMode=I;z.fullSceneLayout.hovermode=O};function m(I,O,z){for(var B=0,F=z-1;B<F;++B,--F)for(var _=0;_<O;++_)for(var N=0;N<4;++N){var G=4*(O*B+_)+N,X=4*(O*F+_)+N,$=I[G];I[G]=I[X],I[X]=$}}function k(I,O,z){for(var B=0;B<z;++B)for(var F=0;F<O;++F){var _=4*(O*B+F),N=I[_+3];if(N>0)for(var G=255/N,X=0;X<3;++X)I[_+X]=Math.min(G*I[_+X],255)}}w.toImage=function(I){var O=this;I||(I="png"),O.staticMode&&O.container.appendChild(c),O.glplot.redraw();var z=O.glplot.gl,B=z.drawingBufferWidth,F=z.drawingBufferHeight;z.bindFramebuffer(z.FRAMEBUFFER,null);var _=new Uint8Array(B*F*4);z.readPixels(0,0,B,F,z.RGBA,z.UNSIGNED_BYTE,_),m(_,B,F),k(_,B,F);var N=document.createElement("canvas");N.width=B,N.height=F;var G=N.getContext("2d",{willReadFrequently:!0}),X=G.createImageData(B,F);X.data.set(_),G.putImageData(X,0,0);var $;switch(I){case"jpeg":$=N.toDataURL("image/jpeg");break;case"webp":$=N.toDataURL("image/webp");break;default:$=N.toDataURL("image/png")}return O.staticMode&&O.container.removeChild(c),$},w.setConvert=function(){for(var I=this,O=0;O<3;O++){var z=I.fullSceneLayout[y[O]];e.setConvert(z,I.fullLayout),z.setScale=p.noop}},w.make4thDimension=function(){var I=this,O=I.graphDiv,z=O._fullLayout;I._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(I._mockAxis,z)},j.exports=x},52094:function(j){j.exports=function(t,b,P,o){o=o||t.length;for(var L=new Array(o),A=0;A<o;A++)L[A]=[t[A],b[A],P[A]];return L}},64859:function(j,V,t){var b=t(25376),P=t(85656),o=t(22548),L=t(92872),A=t(34200),v=t(66741),p=t(92880).extendFlat,r=b({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=o.defaultLine,j.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:b({editType:"layoutstyle"}),subtitle:{text:{valType:"string",editType:"layoutstyle"},font:b({editType:"layoutstyle"}),editType:"layoutstyle"},xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:p(v({editType:"layoutstyle"}),{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:L.newshape,activeshape:L.activeshape,newselection:A.newselection,activeselection:A.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:p({},P.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:b({editType:"layoutstyle"})}}},47552:function(j,V,t){var b=t(95376),P="1.13.4",o='© <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',L=['© <a target="_blank" href="https://carto.com/">Carto</a>',o].join(" "),A=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),v=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),p={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:o,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:L,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:L,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:A,tiles:["https://tiles.stadiamaps.com/tiles/stamen_terrain/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:A,tiles:["https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}.png?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:v,tiles:["https://tiles.stadiamaps.com/tiles/stamen_watercolor/{z}/{x}/{y}.jpg?api_key="],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}],glyphs:"https://fonts.openmaptiles.org/{fontstack}/{range}.pbf"}},r=b(p);j.exports={requiredVersion:P,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:p,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install @plotly/mapbox-gl@"+P+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},89032:function(j,V,t){var b=t(3400);j.exports=function(o,L){var A=o.split(" "),v=A[0],p=A[1],r=b.isArrayOrTypedArray(L)?b.mean(L):L,e=.5+r/100,s=1.5+r/100,n=["",""],l=[0,0];switch(v){case"top":n[0]="top",l[1]=-s;break;case"bottom":n[0]="bottom",l[1]=s;break}switch(p){case"left":n[1]="right",l[0]=-e;break;case"right":n[1]="left",l[0]=e;break}var f;return n[0]&&n[1]?f=n.join("-"):n[0]?f=n[0]:n[1]?f=n[1]:f="center",{anchor:f,offset:l}}},33688:function(j,V,t){var b=t(3480),P=t(3400),o=P.strTranslate,L=P.strScale,A=t(84888).KY,v=t(9616),p=t(33428),r=t(43616),e=t(72736),s=t(14440),n="mapbox",l=V.constants=t(47552);V.name=n,V.attr="subplot",V.idRoot=n,V.idRegex=V.attrRegex=P.counterRegex(n),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=t(5232),V.supplyLayoutDefaults=t(5976),V.plot=function(h){var T=h._fullLayout,c=h.calcdata,i=T._subplots[n];if(b.version!==l.requiredVersion)throw new Error(l.wrongVersionErrorMsg);var d=f(h,i);b.accessToken=d;for(var x=0;x<i.length;x++){var w=i[x],C=A(c,n,w),y=T[w],S=y._subplot;S||(S=new s(h,w),T[w]._subplot=S),S.viewInitial||(S.viewInitial={center:P.extendFlat({},y.center),zoom:y.zoom,bearing:y.bearing,pitch:y.pitch}),S.plot(C,T,h._promises)}},V.clean=function(g,h,T,c){for(var i=c._subplots[n]||[],d=0;d<i.length;d++){var x=i[d];!h[x]&&c[x]._subplot&&c[x]._subplot.destroy()}},V.toSVG=function(g){for(var h=g._fullLayout,T=h._subplots[n],c=h._size,i=0;i<T.length;i++){var d=h[T[i]],x=d.domain,w=d._subplot,C=w.toImage("png"),y=h._glimages.append("svg:image");y.attr({xmlns:v.svg,"xlink:href":C,x:c.l+c.w*x.x[0],y:c.t+c.h*(1-x.y[1]),width:c.w*(x.x[1]-x.x[0]),height:c.h*(x.y[1]-x.y[0]),preserveAspectRatio:"none"});var S=p.select(d._subplot.div),M=S.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!M){var a=h._glimages.append("g");a.attr("transform",o(c.l+c.w*x.x[0]+10,c.t+c.h*(1-x.y[0])-31)),a.append("path").attr("d",l.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),a.append("path").attr("d",l.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),a.append("path").attr("d",l.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),a.append("polygon").attr("points",l.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=S.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),m=h._glimages.append("g"),k=m.append("text");k.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var I=r.bBox(k.node()),O=c.w*(x.x[1]-x.x[0]);if(I.width>O/2){var z=E.split("|").join("<br>");k.text(z).attr("data-unformatted",z).call(e.convertToTspans,g),I=r.bBox(k.node())}k.attr("transform",o(-3,-I.height+8)),m.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var B=1;I.width+6>O&&(B=O/(I.width+6));var F=[c.l+c.w*x.x[1],c.t+c.h*(1-x.y[0])];m.attr("transform",o(F[0],F[1])+L(B))}};function f(g,h){var T=g._fullLayout,c=g._context;if(c.mapboxAccessToken==="")return"";for(var i=[],d=[],x=!1,w=!1,C=0;C<h.length;C++){var y=T[h[C]],S=y.accesstoken;u(y.style)&&(S?P.pushUnique(i,S):(u(y._input.style)&&(P.error("Uses Mapbox map style, but did not set an access token."),x=!0),w=!0)),S&&P.pushUnique(d,S)}if(w){var M=x?l.noAccessTokenErrorMsg:l.missingStyleErrorMsg;throw P.error(M),new Error(M)}return i.length?(i.length>1&&P.warn(l.multipleTokensErrorMsg),i[0]):(d.length&&P.log(["Listed mapbox access token(s)",d.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function u(g){return typeof g=="string"&&(l.styleValuesMapbox.indexOf(g)!==-1||g.indexOf("mapbox://")===0||g.indexOf("stamen")===0)}V.updateFx=function(g){for(var h=g._fullLayout,T=h._subplots[n],c=0;c<T.length;c++){var i=h[T[c]]._subplot;i.updateFx(h)}}},22360:function(j,V,t){var b=t(3400),P=t(72736).sanitizeHTML,o=t(89032),L=t(47552);function A(s,n){this.subplot=s,this.uid=s.uid+"-"+n,this.index=n,this.idSource="source-"+this.uid,this.idLayer=L.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var v=A.prototype;v.update=function(n){this.visible?this.needsNewImage(n)?this.updateImage(n):this.needsNewSource(n)?(this.removeLayer(),this.updateSource(n),this.updateLayer(n)):this.needsNewLayer(n)?this.updateLayer(n):this.updateStyle(n):(this.updateSource(n),this.updateLayer(n)),this.visible=p(n)},v.needsNewImage=function(s){var n=this.subplot.map;return n.getSource(this.idSource)&&this.sourceType==="image"&&s.sourcetype==="image"&&(this.source!==s.source||JSON.stringify(this.coordinates)!==JSON.stringify(s.coordinates))},v.needsNewSource=function(s){return this.sourceType!==s.sourcetype||JSON.stringify(this.source)!==JSON.stringify(s.source)||this.layerType!==s.type},v.needsNewLayer=function(s){return this.layerType!==s.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},v.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},v.updateImage=function(s){var n=this.subplot.map;n.getSource(this.idSource).updateImage({url:s.source,coordinates:s.coordinates});var l=this.findFollowingMapboxLayerId(this.lookupBelow());l!==null&&this.subplot.map.moveLayer(this.idLayer,l)},v.updateSource=function(s){var n=this.subplot.map;if(n.getSource(this.idSource)&&n.removeSource(this.idSource),this.sourceType=s.sourcetype,this.source=s.source,!!p(s)){var l=e(s);n.addSource(this.idSource,l)}},v.findFollowingMapboxLayerId=function(s){if(s==="traces")for(var n=this.subplot.getMapLayers(),l=0;l<n.length;l++){var f=n[l].id;if(typeof f=="string"&&f.indexOf(L.traceLayerPrefix)===0){s=f;break}}return s},v.updateLayer=function(s){var n=this.subplot,l=r(s),f=this.lookupBelow(),u=this.findFollowingMapboxLayerId(f);this.removeLayer(),p(s)&&n.addLayer({id:this.idLayer,source:this.idSource,"source-layer":s.sourcelayer||"",type:s.type,minzoom:s.minzoom,maxzoom:s.maxzoom,layout:l.layout,paint:l.paint},u),this.layerType=s.type,this.below=f},v.updateStyle=function(s){if(p(s)){var n=r(s);this.subplot.setOptions(this.idLayer,"setLayoutProperty",n.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",n.paint)}},v.removeLayer=function(){var s=this.subplot.map;s.getLayer(this.idLayer)&&s.removeLayer(this.idLayer)},v.dispose=function(){var s=this.subplot.map;s.getLayer(this.idLayer)&&s.removeLayer(this.idLayer),s.getSource(this.idSource)&&s.removeSource(this.idSource)};function p(s){if(!s.visible)return!1;var n=s.source;if(Array.isArray(n)&&n.length>0){for(var l=0;l<n.length;l++)if(typeof n[l]!="string"||n[l].length===0)return!1;return!0}return b.isPlainObject(n)||typeof n=="string"&&n.length>0}function r(s){var n={},l={};switch(s.type){case"circle":b.extendFlat(l,{"circle-radius":s.circle.radius,"circle-color":s.color,"circle-opacity":s.opacity});break;case"line":b.extendFlat(l,{"line-width":s.line.width,"line-color":s.color,"line-opacity":s.opacity,"line-dasharray":s.line.dash});break;case"fill":b.extendFlat(l,{"fill-color":s.color,"fill-outline-color":s.fill.outlinecolor,"fill-opacity":s.opacity});break;case"symbol":var f=s.symbol,u=o(f.textposition,f.iconsize);b.extendFlat(n,{"icon-image":f.icon+"-15","icon-size":f.iconsize/10,"text-field":f.text,"text-size":f.textfont.size,"text-anchor":u.anchor,"text-offset":u.offset,"symbol-placement":f.placement}),b.extendFlat(l,{"icon-color":s.color,"text-color":f.textfont.color,"text-opacity":s.opacity});break;case"raster":b.extendFlat(l,{"raster-fade-duration":0,"raster-opacity":s.opacity});break}return{layout:n,paint:l}}function e(s){var n=s.sourcetype,l=s.source,f={type:n},u;return n==="geojson"?u="data":n==="vector"?u=typeof l=="string"?"url":"tiles":n==="raster"?(u="tiles",f.tileSize=256):n==="image"&&(u="url",f.coordinates=s.coordinates),f[u]=l,s.sourceattribution&&(f.attribution=P(s.sourceattribution)),f}j.exports=function(n,l,f){var u=new A(n,l);return u.update(f),u}},5232:function(j,V,t){var b=t(3400),P=t(76308).defaultLine,o=t(86968).u,L=t(25376),A=t(52904).textposition,v=t(67824).overrideAll,p=t(31780).templatedArray,r=t(47552),e=L({noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0});e.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var s=j.exports=v({_arrayAttrRegexps:[b.counterRegex("mapbox",".layers",!0)],domain:o({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:p("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:P},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:P}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:e,textposition:b.extendFlat({},A,{arrayOk:!1})}})},"plot","from-root");s.uirevision={valType:"any",editType:"none"}},5976:function(j,V,t){var b=t(3400),P=t(168),o=t(51272),L=t(5232);j.exports=function(r,e,s){P(r,e,s,{type:"mapbox",attributes:L,handleDefaults:A,partition:"y",accessToken:e._mapboxAccessToken})};function A(p,r,e,s){e("accesstoken",s.accessToken),e("style"),e("center.lon"),e("center.lat"),e("zoom"),e("bearing"),e("pitch");var n=e("bounds.west"),l=e("bounds.east"),f=e("bounds.south"),u=e("bounds.north");(n===void 0||l===void 0||f===void 0||u===void 0)&&delete r.bounds,o(p,r,{name:"layers",handleItemDefaults:v}),r._input=p}function v(p,r){function e(g,h){return b.coerce(p,r,L.layers,g,h)}var s=e("visible");if(s){var n=e("sourcetype"),l=n==="raster"||n==="image";e("source"),e("sourceattribution"),n==="vector"&&e("sourcelayer"),n==="image"&&e("coordinates");var f;l&&(f="raster");var u=e("type",f);l&&u!=="raster"&&(u=r.type="raster",b.log("Source types *raster* and *image* must drawn *raster* layer type.")),e("below"),e("color"),e("opacity"),e("minzoom"),e("maxzoom"),u==="circle"&&e("circle.radius"),u==="line"&&(e("line.width"),e("line.dash")),u==="fill"&&e("fill.outlinecolor"),u==="symbol"&&(e("symbol.icon"),e("symbol.iconsize"),e("symbol.text"),b.coerceFont(e,"symbol.textfont",void 0,{noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}),e("symbol.textposition"),e("symbol.placement"))}}},14440:function(j,V,t){var b=t(3480),P=t(3400),o=t(27144),L=t(24040),A=t(54460),v=t(86476),p=t(93024),r=t(72760),e=r.drawMode,s=r.selectMode,n=t(22676).prepSelect,l=t(22676).clearOutline,f=t(22676).clearSelectionsCache,u=t(22676).selectOnClick,g=t(47552),h=t(22360);function T(C,y){this.id=y,this.gd=C;var S=C._fullLayout,M=C._context;this.container=S._glcontainer.node(),this.isStatic=M.staticPlot,this.uid=S._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(S),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var c=T.prototype;c.plot=function(C,y,S){var M=this,a=y[M.id];M.map&&a.accesstoken!==M.accessToken&&(M.map.remove(),M.map=null,M.styleObj=null,M.traceHash={},M.layerList=[]);var E;M.map?E=new Promise(function(m,k){M.updateMap(C,y,m,k)}):E=new Promise(function(m,k){M.createMap(C,y,m,k)}),S.push(E)},c.createMap=function(C,y,S,M){var a=this,E=y[a.id],m=a.styleObj=d(E.style,y);a.accessToken=E.accesstoken;var k=E.bounds,I=k?[[k.west,k.south],[k.east,k.north]]:null,O=a.map=new b.Map({container:a.div,style:m.style,center:w(E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,maxBounds:I,interactive:!a.isStatic,preserveDrawingBuffer:a.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new b.AttributionControl({compact:!0}));O._canvas.style.left="0px",O._canvas.style.top="0px",a.rejectOnError(M),a.isStatic||a.initFx(C,y);var z=[];z.push(new Promise(function(B){O.once("load",B)})),z=z.concat(o.fetchTraceGeoData(C)),Promise.all(z).then(function(){a.fillBelowLookup(C,y),a.updateData(C),a.updateLayout(y),a.resolveOnRender(S)}).catch(M)},c.updateMap=function(C,y,S,M){var a=this,E=a.map,m=y[this.id];a.rejectOnError(M);var k=[],I=d(m.style,y);JSON.stringify(a.styleObj)!==JSON.stringify(I)&&(a.styleObj=I,E.setStyle(I.style),a.traceHash={},k.push(new Promise(function(O){E.once("styledata",O)}))),k=k.concat(o.fetchTraceGeoData(C)),Promise.all(k).then(function(){a.fillBelowLookup(C,y),a.updateData(C),a.updateLayout(y),a.resolveOnRender(S)}).catch(M)},c.fillBelowLookup=function(C,y){var S=y[this.id],M=S.layers,a,E,m=this.belowLookup={},k=!1;for(a=0;a<C.length;a++){var I=C[a][0].trace,O=I._module;typeof I.below=="string"?E=I.below:O.getBelow&&(E=O.getBelow(I,this)),E===""&&(k=!0),m["trace-"+I.uid]=E||""}for(a=0;a<M.length;a++){var z=M[a];typeof z.below=="string"?E=z.below:k?E="traces":E="",m["layout-"+a]=E}var B={},F,_;for(F in m)E=m[F],B[E]?B[E].push(F):B[E]=[F];for(E in B){var N=B[E];if(N.length>1)for(a=0;a<N.length;a++)F=N[a],F.indexOf("trace-")===0?(_=F.split("trace-")[1],this.traceHash[_]&&(this.traceHash[_].below=null)):F.indexOf("layout-")===0&&(_=F.split("layout-")[1],this.layerList[_]&&(this.layerList[_].below=null))}};var i={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};c.updateData=function(C){var y=this.traceHash,S,M,a,E,m=C.slice().sort(function(B,F){return i[B[0].trace.type]-i[F[0].trace.type]});for(a=0;a<m.length;a++){var k=m[a];M=k[0].trace,S=y[M.uid];var I=!1;S&&(S.type===M.type?(S.update(k),I=!0):S.dispose()),!I&&M._module&&(y[M.uid]=M._module.plot(this,k))}var O=Object.keys(y);t:for(a=0;a<O.length;a++){var z=O[a];for(E=0;E<C.length;E++)if(M=C[E][0].trace,z===M.uid)continue t;S=y[z],S.dispose(),delete y[z]}},c.updateLayout=function(C){var y=this.map,S=C[this.id];!this.dragging&&!this.wheeling&&(y.setCenter(w(S.center)),y.setZoom(S.zoom),y.setBearing(S.bearing),y.setPitch(S.pitch)),this.updateLayers(C),this.updateFramework(C),this.updateFx(C),this.map.resize(),this.gd._context._scrollZoom.mapbox?y.scrollZoom.enable():y.scrollZoom.disable()},c.resolveOnRender=function(C){var y=this.map;y.on("render",function S(){y.loaded()&&(y.off("render",S),setTimeout(C,10))})},c.rejectOnError=function(C){var y=this.map;function S(){C(new Error(g.mapOnErrorMsg))}y.once("error",S),y.once("style.error",S),y.once("source.error",S),y.once("tile.error",S),y.once("layer.error",S)},c.createFramework=function(C){var y=this,S=y.div=document.createElement("div");S.id=y.uid,S.style.position="absolute",y.container.appendChild(S),y.xaxis={_id:"x",c2p:function(M){return y.project(M).x}},y.yaxis={_id:"y",c2p:function(M){return y.project(M).y}},y.updateFramework(C),y.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},A.setConvert(y.mockAxis,C)},c.initFx=function(C,y){var S=this,M=S.gd,a=S.map;a.on("moveend",function(k){if(S.map){var I=M._fullLayout;if(k.originalEvent||S.wheeling){var O=I[S.id];L.call("_storeDirectGUIEdit",M.layout,I._preGUI,S.getViewEdits(O));var z=S.getView();O._input.center=O.center=z.center,O._input.zoom=O.zoom=z.zoom,O._input.bearing=O.bearing=z.bearing,O._input.pitch=O.pitch=z.pitch,M.emit("plotly_relayout",S.getViewEditsWithDerived(z))}k.originalEvent&&k.originalEvent.type==="mouseup"?S.dragging=!1:S.wheeling&&(S.wheeling=!1),I._rehover&&I._rehover()}}),a.on("wheel",function(){S.wheeling=!0}),a.on("mousemove",function(k){var I=S.div.getBoundingClientRect(),O=[k.originalEvent.offsetX,k.originalEvent.offsetY];k.target.getBoundingClientRect=function(){return I},S.xaxis.p2c=function(){return a.unproject(O).lng},S.yaxis.p2c=function(){return a.unproject(O).lat},M._fullLayout._rehover=function(){M._fullLayout._hoversubplot===S.id&&M._fullLayout[S.id]&&p.hover(M,k,S.id)},p.hover(M,k,S.id),M._fullLayout._hoversubplot=S.id});function E(){p.loneUnhover(y._hoverlayer)}a.on("dragstart",function(){S.dragging=!0,E()}),a.on("zoomstart",E),a.on("mouseout",function(){M._fullLayout._hoversubplot=null});function m(){var k=S.getView();M.emit("plotly_relayouting",S.getViewEditsWithDerived(k))}a.on("drag",m),a.on("zoom",m),a.on("dblclick",function(){var k=M._fullLayout[S.id];L.call("_storeDirectGUIEdit",M.layout,M._fullLayout._preGUI,S.getViewEdits(k));var I=S.viewInitial;a.setCenter(w(I.center)),a.setZoom(I.zoom),a.setBearing(I.bearing),a.setPitch(I.pitch);var O=S.getView();k._input.center=k.center=O.center,k._input.zoom=k.zoom=O.zoom,k._input.bearing=k.bearing=O.bearing,k._input.pitch=k.pitch=O.pitch,M.emit("plotly_doubleclick",null),M.emit("plotly_relayout",S.getViewEditsWithDerived(O))}),S.clearOutline=function(){f(S.dragOptions),l(S.dragOptions.gd)},S.onClickInPanFn=function(k){return function(I){var O=M._fullLayout.clickmode;O.indexOf("select")>-1&&u(I.originalEvent,M,[S.xaxis],[S.yaxis],S.id,k),O.indexOf("event")>-1&&p.click(M,I.originalEvent)}}},c.updateFx=function(C){var y=this,S=y.map,M=y.gd;if(y.isStatic)return;function a(I){var O=y.map.unproject(I);return[O.lng,O.lat]}var E=C.dragmode,m;m=function(I,O){if(O.isRect){var z=I.range={};z[y.id]=[a([O.xmin,O.ymin]),a([O.xmax,O.ymax])]}else{var B=I.lassoPoints={};B[y.id]=O.map(a)}};var k=y.dragOptions;y.dragOptions=P.extendDeep(k||{},{dragmode:C.dragmode,element:y.div,gd:M,plotinfo:{id:y.id,domain:C[y.id].domain,xaxis:y.xaxis,yaxis:y.yaxis,fillRangeItems:m},xaxes:[y.xaxis],yaxes:[y.yaxis],subplot:y.id}),S.off("click",y.onClickInPanHandler),s(E)||e(E)?(S.dragPan.disable(),S.on("zoomstart",y.clearOutline),y.dragOptions.prepFn=function(I,O,z){n(I,O,z,y.dragOptions,E)},v.init(y.dragOptions)):(S.dragPan.enable(),S.off("zoomstart",y.clearOutline),y.div.onmousedown=null,y.div.ontouchstart=null,y.div.removeEventListener("touchstart",y.div._ontouchstart),y.onClickInPanHandler=y.onClickInPanFn(y.dragOptions),S.on("click",y.onClickInPanHandler))},c.updateFramework=function(C){var y=C[this.id].domain,S=C._size,M=this.div.style;M.width=S.w*(y.x[1]-y.x[0])+"px",M.height=S.h*(y.y[1]-y.y[0])+"px",M.left=S.l+y.x[0]*S.w+"px",M.top=S.t+(1-y.y[1])*S.h+"px",this.xaxis._offset=S.l+y.x[0]*S.w,this.xaxis._length=S.w*(y.x[1]-y.x[0]),this.yaxis._offset=S.t+(1-y.y[1])*S.h,this.yaxis._length=S.h*(y.y[1]-y.y[0])},c.updateLayers=function(C){var y=C[this.id],S=y.layers,M=this.layerList,a;if(S.length!==M.length){for(a=0;a<M.length;a++)M[a].dispose();for(M=this.layerList=[],a=0;a<S.length;a++)M.push(h(this,a,S[a]))}else for(a=0;a<S.length;a++)M[a].update(S[a])},c.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},c.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},c.setOptions=function(C,y,S){for(var M in S)this.map[y](C,M,S[M])},c.getMapLayers=function(){return this.map.getStyle().layers},c.addLayer=function(C,y){var S=this.map;if(typeof y=="string"){if(y===""){S.addLayer(C,y);return}for(var M=this.getMapLayers(),a=0;a<M.length;a++)if(y===M[a].id){S.addLayer(C,y);return}P.warn(["Trying to add layer with *below* value",y,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}S.addLayer(C)},c.project=function(C){return this.map.project(new b.LngLat(C[0],C[1]))},c.getView=function(){var C=this.map,y=C.getCenter(),S=y.lng,M=y.lat,a={lon:S,lat:M},E=C.getCanvas(),m=parseInt(E.style.width),k=parseInt(E.style.height);return{center:a,zoom:C.getZoom(),bearing:C.getBearing(),pitch:C.getPitch(),_derived:{coordinates:[C.unproject([0,0]).toArray(),C.unproject([m,0]).toArray(),C.unproject([m,k]).toArray(),C.unproject([0,k]).toArray()]}}},c.getViewEdits=function(C){for(var y=this.id,S=["center","zoom","bearing","pitch"],M={},a=0;a<S.length;a++){var E=S[a];M[y+"."+E]=C[E]}return M},c.getViewEditsWithDerived=function(C){var y=this.id,S=this.getViewEdits(C);return S[y+"._derived"]=C._derived,S};function d(C,y){var S={};if(P.isPlainObject(C))S.id=C.id,S.style=C;else if(typeof C=="string")if(S.id=C,g.styleValuesMapbox.indexOf(C)!==-1)S.style=x(C);else if(g.stylesNonMapbox[C]){S.style=g.stylesNonMapbox[C];var M=S.style.sources["plotly-"+C],a=M?M.tiles:void 0;a&&a[0]&&a[0].slice(-9)==="?api_key="&&(a[0]+=y._mapboxAccessToken)}else S.style=C;else S.id=g.styleValueDflt,S.style=x(g.styleValueDflt);return S.transition={duration:0,delay:0},S}function x(C){return g.styleUrlPrefix+C+"-"+g.styleUrlSuffix}function w(C){return[C.lon,C.lat]}j.exports=T},66741:function(j){j.exports=function(V){var t=V.editType;return{t:{valType:"number",dflt:0,editType:t},r:{valType:"number",dflt:0,editType:t},b:{valType:"number",dflt:0,editType:t},l:{valType:"number",dflt:0,editType:t},editType:t}}},7316:function(j,V,t){var b=t(33428),P=t(94336).m_,o=t(57624).SO,L=t(38248),A=t(83160),v=t(24040),p=t(73060),r=t(31780),e=t(3400),s=t(76308),n=t(39032).BADNUM,l=t(79811),f=t(1936).clearOutline,u=t(55308),g=t(85656),h=t(16672),T=t(84888)._M,c=e.relinkPrivateKeys,i=e._,d=j.exports={};e.extendFlat(d,v),d.attributes=t(45464),d.attributes.type.values=d.allTypes,d.fontAttrs=t(25376),d.layoutAttributes=t(64859);var x=d.transformsRegistry,w=t(62460);d.executeAPICommand=w.executeAPICommand,d.computeAPICommandBindings=w.computeAPICommandBindings,d.manageCommandObserver=w.manageCommandObserver,d.hasSimpleAPICommandBindings=w.hasSimpleAPICommandBindings,d.redrawText=function(W){return W=e.getGraphDiv(W),new Promise(function(J){setTimeout(function(){W._fullLayout&&(v.getComponentMethod("annotations","draw")(W),v.getComponentMethod("legend","draw")(W),v.getComponentMethod("colorbar","draw")(W),J(d.previousPromises(W)))},300)})},d.resize=function(W){W=e.getGraphDiv(W);var J,it=new Promise(function(K,H){(!W||e.isHidden(W))&&H(new Error("Resize must be passed a displayed plot div element.")),W._redrawTimer&&clearTimeout(W._redrawTimer),W._resolveResize&&(J=W._resolveResize),W._resolveResize=K,W._redrawTimer=setTimeout(function(){if(!W.layout||W.layout.width&&W.layout.height||e.isHidden(W)){K(W);return}delete W.layout.width,delete W.layout.height;var at=W.changed;W.autoplay=!0,v.call("relayout",W,{autosize:!0}).then(function(){W.changed=at,W._resolveResize===K&&(delete W._resolveResize,K(W))})},100)});return J&&J(it),it},d.previousPromises=function(W){if((W._promises||[]).length)return Promise.all(W._promises).then(function(){W._promises=[]})},d.addLinks=function(W){if(!(!W._context.showLink&&!W._context.showSources)){var J=W._fullLayout,it=e.ensureSingle(J._paper,"text","js-plot-link-container",function(dt){dt.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:s.defaultLine,"pointer-events":"all"}).each(function(){var mt=b.select(this);mt.append("tspan").classed("js-link-to-tool",!0),mt.append("tspan").classed("js-link-spacer",!0),mt.append("tspan").classed("js-sourcelinks",!0)})}),K=it.node(),H={y:J._paper.attr("height")-9};document.body.contains(K)&&K.getComputedTextLength()>=J.width-20?(H["text-anchor"]="start",H.x=5):(H["text-anchor"]="end",H.x=J._paper.attr("width")-7),it.attr(H);var at=it.select(".js-link-to-tool"),tt=it.select(".js-link-spacer"),lt=it.select(".js-sourcelinks");W._context.showSources&&W._context.showSources(W),W._context.showLink&&C(W,at),tt.text(at.text()&&lt.text()?" - ":"")}};function C(W,J){J.text("");var it=J.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" »");if(W._context.sendData)it.on("click",function(){d.sendDataToCloud(W)});else{var K=window.location.pathname.split("/"),H=window.location.search;it.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+K[2].split(".")[0]+"/"+K[1]+H})}}d.sendDataToCloud=function(W){var J=(window.PLOTLYENV||{}).BASE_URL||W._context.plotlyServerURL;if(J){W.emit("plotly_beforeexport");var it=b.select(W).append("div").attr("id","hiddenform").style("display","none"),K=it.append("form").attr({action:J+"/external",method:"post",target:"_blank"}),H=K.append("input").attr({type:"text",name:"data"});return H.node().value=d.graphJson(W,!1,"keepdata"),K.node().submit(),it.remove(),W.emit("plotly_afterexport"),!1}};var y=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],S=["year","month","dayMonth","dayMonthYear"];d.supplyDefaults=function(W,J){var it=J&&J.skipUpdateCalc,K=W._fullLayout||{};if(K._skipDefaults){delete K._skipDefaults;return}var H=W._fullLayout={},at=W.layout||{},tt=W._fullData||[],lt=W._fullData=[],dt=W.data||[],mt=W.calcdata||[],gt=W._context||{},Mt;W._transitionData||d.createTransitionData(W),H._dfltTitle={plot:i(W,"Click to enter Plot title"),subtitle:i(W,"Click to enter Plot subtitle"),x:i(W,"Click to enter X axis title"),y:i(W,"Click to enter Y axis title"),colorbar:i(W,"Click to enter Colorscale title"),annotation:i(W,"new text")},H._traceWord=i(W,"trace");var Lt=E(W,y);if(H._mapboxAccessToken=gt.mapboxAccessToken,K._initialAutoSizeIsDone){var zt=K.width,xt=K.height;d.supplyLayoutGlobalDefaults(at,H,Lt),at.width||(H.width=zt),at.height||(H.height=xt),d.sanitizeMargins(H)}else{d.supplyLayoutGlobalDefaults(at,H,Lt);var Ct=!at.width||!at.height,wt=H.autosize,Rt=gt.autosizable,Tt=Ct&&(wt||Rt);Tt?d.plotAutoSize(W,at,H):Ct&&d.sanitizeMargins(H),!wt&&Ct&&(at.width=H.width,at.height=H.height)}H._d3locale=m(Lt,H.separators),H._extraFormat=E(W,S),H._initialAutoSizeIsDone=!0,H._dataLength=dt.length,H._modules=[],H._visibleModules=[],H._basePlotModules=[];var Bt=H._subplots=a(),Gt=H._splomAxes={x:{},y:{}},te=H._splomSubplots={};H._splomGridDflt={},H._scatterStackOpts={},H._firstScatter={},H._alignmentOpts={},H._colorAxes={},H._requestRangeslider={},H._traceUids=M(tt,dt),H._globalTransforms=(W._context||{}).globalTransforms,d.supplyDataDefaults(dt,lt,at,H);var Wt=Object.keys(Gt.x),jt=Object.keys(Gt.y);if(Wt.length>1&&jt.length>1){for(v.getComponentMethod("grid","sizeDefaults")(at,H),Mt=0;Mt<Wt.length;Mt++)e.pushUnique(Bt.xaxis,Wt[Mt]);for(Mt=0;Mt<jt.length;Mt++)e.pushUnique(Bt.yaxis,jt[Mt]);for(var ie in te)e.pushUnique(Bt.cartesian,ie)}if(H._has=d._hasPlotType.bind(H),tt.length===lt.length)for(Mt=0;Mt<lt.length;Mt++)c(lt[Mt],tt[Mt]);d.supplyLayoutModuleDefaults(at,H,lt,W._transitionData);var ue=H._visibleModules,fe=[];for(Mt=0;Mt<ue.length;Mt++){var pe=ue[Mt].crossTraceDefaults;pe&&e.pushUnique(fe,pe)}for(Mt=0;Mt<fe.length;Mt++)fe[Mt](lt,H);H._hasOnlyLargeSploms=H._basePlotModules.length===1&&H._basePlotModules[0].name==="splom"&&Wt.length>15&&jt.length>15&&H.shapes.length===0&&H.images.length===0,d.linkSubplots(lt,H,tt,K),d.cleanPlot(lt,H,tt,K);var Te=!!(K._has&&K._has("gl2d")),Qt=!!(H._has&&H._has("gl2d")),Pt=!!(K._has&&K._has("cartesian")),Ot=!!(H._has&&H._has("cartesian")),Nt=Pt||Te,Ht=Ot||Qt;Nt&&!Ht?K._bgLayer.remove():Ht&&!Nt&&(H._shouldCreateBgLayer=!0),K._zoomlayer&&!W._dragging&&f({_fullLayout:K}),k(lt,H),c(H,K),v.getComponentMethod("colorscale","crossTraceDefaults")(lt,H),H._preGUI||(H._preGUI={}),H._tracePreGUI||(H._tracePreGUI={});var St=H._tracePreGUI,kt={},Ft;for(Ft in St)kt[Ft]="old";for(Mt=0;Mt<lt.length;Mt++)Ft=lt[Mt]._fullInput.uid,kt[Ft]||(St[Ft]={}),kt[Ft]="new";for(Ft in kt)kt[Ft]==="old"&&delete St[Ft];F(H),v.getComponentMethod("rangeslider","makeData")(H),!it&&mt.length===lt.length&&d.supplyDefaultsUpdateCalc(mt,lt)},d.supplyDefaultsUpdateCalc=function(W,J){for(var it=0;it<J.length;it++){var K=J[it],H=(W[it]||[])[0];if(H&&H.trace){var at=H.trace;if(at._hasCalcTransform){var tt=at._arrayAttrs,lt,dt,mt;for(lt=0;lt<tt.length;lt++)dt=tt[lt],mt=e.nestedProperty(at,dt).get().slice(),e.nestedProperty(K,dt).set(mt)}H.trace=K}}};function M(W,J){var it=J.length,K=[],H,at;for(H=0;H<W.length;H++){var tt=W[H]._fullInput;tt!==at&&K.push(tt),at=tt}var lt=K.length,dt=new Array(it),mt={};function gt(zt,xt){dt[xt]=zt,mt[zt]=1}function Mt(zt,xt){if(zt&&typeof zt=="string"&&!mt[zt])return gt(zt,xt),!0}for(H=0;H<it;H++){var Lt=J[H].uid;typeof Lt=="number"&&(Lt=String(Lt)),!Mt(Lt,H)&&(H<lt&&Mt(K[H].uid,H)||gt(e.randstr(mt),H))}return dt}function a(){var W=v.collectableSubplotTypes,J={},it,K;if(!W){W=[];var H=v.subplotsRegistry;for(var at in H){var tt=H[at],lt=tt.attr;if(lt&&(W.push(at),Array.isArray(lt)))for(K=0;K<lt.length;K++)e.pushUnique(W,lt[K])}}for(it=0;it<W.length;it++)J[W[it]]=[];return J}function E(W,J){var it=W._context.locale;it||(it="en-US");var K=!1,H={};function at(Mt){for(var Lt=!0,zt=0;zt<J.length;zt++){var xt=J[zt];H[xt]||(Mt[xt]?H[xt]=Mt[xt]:Lt=!1)}Lt&&(K=!0)}for(var tt=0;tt<2;tt++){for(var lt=W._context.locales,dt=0;dt<2;dt++){var mt=(lt[it]||{}).format;if(mt&&(at(mt),K))break;lt=v.localeRegistry}var gt=it.split("-")[0];if(K||gt===it)break;it=gt}return K||at(v.localeRegistry.en.format),H}function m(W,J){return W.decimal=J.charAt(0),W.thousands=J.charAt(1),{numberFormat:function(it){try{it=o(W).format(e.adjustFormat(it))}catch{return e.warnBadFormat(it),e.noFormat}return it},timeFormat:P(W).utcFormat}}function k(W,J){var it,K=[];J.meta&&(it=J._meta={meta:J.meta,layout:{meta:J.meta}});for(var H=0;H<W.length;H++){var at=W[H];at.meta?K[at.index]=at._meta={meta:at.meta}:J.meta&&(at._meta={meta:J.meta}),J.meta&&(at._meta.layout={meta:J.meta})}K.length&&(it||(it=J._meta={}),it.data=K)}d.createTransitionData=function(W){W._transitionData||(W._transitionData={}),W._transitionData._frames||(W._transitionData._frames=[]),W._transitionData._frameHash||(W._transitionData._frameHash={}),W._transitionData._counter||(W._transitionData._counter=0),W._transitionData._interruptCallbacks||(W._transitionData._interruptCallbacks=[])},d._hasPlotType=function(W){var J,it=this._basePlotModules||[];for(J=0;J<it.length;J++)if(it[J].name===W)return!0;var K=this._modules||[];for(J=0;J<K.length;J++){var H=K[J].name;if(H===W)return!0;var at=v.modules[H];if(at&&at.categories[W])return!0}return!1},d.cleanPlot=function(W,J,it,K){var H,at,tt=K._basePlotModules||[];for(H=0;H<tt.length;H++){var lt=tt[H];lt.clean&&lt.clean(W,J,it,K)}var dt=K._has&&K._has("gl"),mt=J._has&&J._has("gl");dt&&!mt&&K._glcontainer!==void 0&&(K._glcontainer.selectAll(".gl-canvas").remove(),K._glcontainer.selectAll(".no-webgl").remove(),K._glcanvas=null);var gt=!!K._infolayer;t:for(H=0;H<it.length;H++){var Mt=it[H],Lt=Mt.uid;for(at=0;at<W.length;at++){var zt=W[at];if(Lt===zt.uid)continue t}gt&&K._infolayer.select(".cb"+Lt).remove()}},d.linkSubplots=function(W,J,it,K){var H,at,tt=K._plots||{},lt=J._plots={},dt=J._subplots,mt={_fullData:W,_fullLayout:J},gt=dt.cartesian.concat(dt.gl2d||[]);for(H=0;H<gt.length;H++){var Mt=gt[H],Lt=tt[Mt],zt=l.getFromId(mt,Mt,"x"),xt=l.getFromId(mt,Mt,"y"),Ct;for(Lt?Ct=lt[Mt]=Lt:(Ct=lt[Mt]={},Ct.id=Mt),zt._counterAxes.push(xt._id),xt._counterAxes.push(zt._id),zt._subplotsWith.push(Mt),xt._subplotsWith.push(Mt),Ct.xaxis=zt,Ct.yaxis=xt,Ct._hasClipOnAxisFalse=!1,at=0;at<W.length;at++){var wt=W[at];if(wt.xaxis===Ct.xaxis._id&&wt.yaxis===Ct.yaxis._id&&wt.cliponaxis===!1){Ct._hasClipOnAxisFalse=!0;break}}}var Rt=l.list(mt,null,!0),Tt;for(H=0;H<Rt.length;H++){Tt=Rt[H];var Bt=null;Tt.overlaying&&(Bt=l.getFromId(mt,Tt.overlaying),Bt&&Bt.overlaying&&(Tt.overlaying=!1,Bt=null)),Tt._mainAxis=Bt||Tt,Bt&&(Tt.domain=Bt.domain.slice()),Tt._anchorAxis=Tt.anchor==="free"?null:l.getFromId(mt,Tt.anchor)}for(H=0;H<Rt.length;H++)if(Tt=Rt[H],Tt._counterAxes.sort(l.idSort),Tt._subplotsWith.sort(e.subplotSort),Tt._mainSubplot=I(Tt,J),Tt._counterAxes.length&&(Tt.spikemode&&Tt.spikemode.indexOf("across")!==-1||Tt.automargin&&Tt.mirror&&Tt.anchor!=="free"||v.getComponentMethod("rangeslider","isVisible")(Tt))){var Gt=1,te=0;for(at=0;at<Tt._counterAxes.length;at++){var Wt=l.getFromId(mt,Tt._counterAxes[at]);Gt=Math.min(Gt,Wt.domain[0]),te=Math.max(te,Wt.domain[1])}Gt<te&&(Tt._counterDomainMin=Gt,Tt._counterDomainMax=te)}};function I(W,J){var it={_fullLayout:J},K=W._id.charAt(0)==="x",H=W._mainAxis._anchorAxis,at="",tt="",lt="";if(H&&(lt=H._mainAxis._id,at=K?W._id+lt:lt+W._id),!at||!J._plots[at]){at="";for(var dt=W._counterAxes,mt=0;mt<dt.length;mt++){var gt=dt[mt],Mt=K?W._id+gt:gt+W._id;tt||(tt=Mt);var Lt=l.getFromId(it,gt);if(lt&&Lt.overlaying===lt){at=Mt;break}}}return at||tt}d.clearExpandedTraceDefaultColors=function(W){var J,it,K;function H(tt,lt,dt,mt){it[mt]=lt,it.length=mt+1,tt.valType==="color"&&tt.dflt===void 0&&J.push(it.join("."))}for(it=[],J=W._module._colorAttrs,J||(W._module._colorAttrs=J=[],p.crawl(W._module.attributes,H)),K=0;K<J.length;K++){var at=e.nestedProperty(W,"_input."+J[K]);at.get()||e.nestedProperty(W,J[K]).set(null)}},d.supplyDataDefaults=function(W,J,it,K){var H=K._modules,at=K._visibleModules,tt=K._basePlotModules,lt=0,dt=0,mt,gt,Mt;K._transformModules=[];function Lt(jt){J.push(jt);var ie=jt._module;ie&&(e.pushUnique(H,ie),jt.visible===!0&&e.pushUnique(at,ie),e.pushUnique(tt,jt._module.basePlotModule),lt++,jt._input.visible!==!1&&dt++)}var zt={},xt=[],Ct=(it.template||{}).data||{},wt=r.traceTemplater(Ct);for(mt=0;mt<W.length;mt++){if(Mt=W[mt],gt=wt.newTrace(Mt),gt.uid=K._traceUids[mt],d.supplyTraceDefaults(Mt,gt,dt,K,mt),gt.index=mt,gt._input=Mt,gt._expandedIndex=lt,gt.transforms&&gt.transforms.length)for(var Rt=Mt.visible!==!1&&gt.visible===!1,Tt=z(gt,J,it,K),Bt=0;Bt<Tt.length;Bt++){var Gt=Tt[Bt],te={_template:gt._template,type:gt.type,uid:gt.uid+Bt};Rt&&Gt.visible===!1&&delete Gt.visible,d.supplyTraceDefaults(Gt,te,lt,K,mt),c(te,Gt),te.index=mt,te._input=Mt,te._fullInput=gt,te._expandedIndex=lt,te._expandedInput=Gt,Lt(te)}else gt._fullInput=gt,gt._expandedInput=gt,Lt(gt);v.traceIs(gt,"carpetAxis")&&(zt[gt.carpet]=gt),v.traceIs(gt,"carpetDependent")&&xt.push(mt)}for(mt=0;mt<xt.length;mt++)if(gt=J[xt[mt]],!!gt.visible){var Wt=zt[gt.carpet];if(gt._carpet=Wt,!Wt||!Wt.visible){gt.visible=!1;continue}gt.xaxis=Wt.xaxis,gt.yaxis=Wt.yaxis}},d.supplyAnimationDefaults=function(W){W=W||{};var J,it={};function K(H,at){return e.coerce(W||{},it,g,H,at)}if(K("mode"),K("direction"),K("fromcurrent"),Array.isArray(W.frame))for(it.frame=[],J=0;J<W.frame.length;J++)it.frame[J]=d.supplyAnimationFrameDefaults(W.frame[J]||{});else it.frame=d.supplyAnimationFrameDefaults(W.frame||{});if(Array.isArray(W.transition))for(it.transition=[],J=0;J<W.transition.length;J++)it.transition[J]=d.supplyAnimationTransitionDefaults(W.transition[J]||{});else it.transition=d.supplyAnimationTransitionDefaults(W.transition||{});return it},d.supplyAnimationFrameDefaults=function(W){var J={};function it(K,H){return e.coerce(W||{},J,g.frame,K,H)}return it("duration"),it("redraw"),J},d.supplyAnimationTransitionDefaults=function(W){var J={};function it(K,H){return e.coerce(W||{},J,g.transition,K,H)}return it("duration"),it("easing"),J},d.supplyFrameDefaults=function(W){var J={};function it(K,H){return e.coerce(W,J,h,K,H)}return it("group"),it("name"),it("traces"),it("baseframe"),it("data"),it("layout"),J},d.supplyTraceDefaults=function(W,J,it,K,H){var at=K.colorway||s.defaults,tt=at[it%at.length],lt;function dt(Bt,Gt){return e.coerce(W,J,d.attributes,Bt,Gt)}var mt=dt("visible");dt("type"),dt("name",K._traceWord+" "+H),dt("uirevision",K.uirevision);var gt=d.getModule(J);if(J._module=gt,gt){var Mt=gt.basePlotModule,Lt=Mt.attr,zt=Mt.attributes;if(Lt&&zt){var xt=K._subplots,Ct="";if(mt||Mt.name!=="gl2d"){if(Array.isArray(Lt))for(lt=0;lt<Lt.length;lt++){var wt=Lt[lt],Rt=e.coerce(W,J,zt,wt);xt[wt]&&e.pushUnique(xt[wt],Rt),Ct+=Rt}else Ct=e.coerce(W,J,zt,Lt);xt[Mt.name]&&e.pushUnique(xt[Mt.name],Ct)}}}if(mt){if(dt("customdata"),dt("ids"),dt("meta"),v.traceIs(J,"showLegend")?(e.coerce(W,J,gt.attributes.showlegend?gt.attributes:d.attributes,"showlegend"),dt("legend"),dt("legendwidth"),dt("legendgroup"),dt("legendgrouptitle.text"),dt("legendrank"),J._dfltShowLegend=!0):J._dfltShowLegend=!1,gt&&gt.supplyDefaults(W,J,tt,K),v.traceIs(J,"noOpacity")||dt("opacity"),v.traceIs(J,"notLegendIsolatable")&&(J.visible=!!J.visible),v.traceIs(J,"noHover")||(J.hovertemplate||e.coerceHoverinfo(W,J,K),J.type!=="parcats"&&v.getComponentMethod("fx","supplyDefaults")(W,J,tt,K)),gt&&gt.selectPoints){var Tt=dt("selectedpoints");e.isTypedArray(Tt)&&(J.selectedpoints=Array.from(Tt))}d.supplyTransformDefaults(W,J,K)}return J};function O(W){var J=W.transforms;if(Array.isArray(J)&&J.length)for(var it=0;it<J.length;it++){var K=J[it],H=K._module||x[K.type];if(H&&H.makesData)return!0}return!1}d.hasMakesDataTransform=O,d.supplyTransformDefaults=function(W,J,it){if(J._length||O(W)){var K=it._globalTransforms||[],H=it._transformModules||[];if(!(!Array.isArray(W.transforms)&&K.length===0))for(var at=W.transforms||[],tt=K.concat(at),lt=J.transforms=[],dt=0;dt<tt.length;dt++){var mt=tt[dt],gt=mt.type,Mt=x[gt],Lt,zt=!(mt._module&&mt._module===Mt),xt=Mt&&typeof Mt.transform=="function";Mt||e.warn("Unrecognized transform type "+gt+"."),Mt&&Mt.supplyDefaults&&(zt||xt)?(Lt=Mt.supplyDefaults(mt,J,it,W),Lt.type=gt,Lt._module=Mt,e.pushUnique(H,Mt)):Lt=e.extendFlat({},mt),lt.push(Lt)}}};function z(W,J,it,K){for(var H=W.transforms,at=[W],tt=0;tt<H.length;tt++){var lt=H[tt],dt=x[lt.type];dt&&dt.transform&&(at=dt.transform(at,{transform:lt,fullTrace:W,fullData:J,layout:it,fullLayout:K,transformIndex:tt}))}return at}d.supplyLayoutGlobalDefaults=function(W,J,it){function K(Mt,Lt){return e.coerce(W,J,d.layoutAttributes,Mt,Lt)}var H=W.template;e.isPlainObject(H)&&(J.template=H,J._template=H.layout,J._dataTemplate=H.data),K("autotypenumbers");var at=e.coerceFont(K,"font"),tt=at.size;e.coerceFont(K,"title.font",at,{overrideDflt:{size:Math.round(tt*1.4)}}),K("title.text",J._dfltTitle.plot),K("title.xref");var lt=K("title.yref");K("title.pad.t"),K("title.pad.r"),K("title.pad.b"),K("title.pad.l");var dt=K("title.automargin");K("title.x"),K("title.xanchor"),K("title.y"),K("title.yanchor"),K("title.subtitle.text",J._dfltTitle.subtitle),e.coerceFont(K,"title.subtitle.font",at,{overrideDflt:{size:Math.round(J.title.font.size*.7)}}),dt&&(lt==="paper"&&(J.title.y!==0&&(J.title.y=1),J.title.yanchor==="auto"&&(J.title.yanchor=J.title.y===0?"top":"bottom")),lt==="container"&&(J.title.y==="auto"&&(J.title.y=1),J.title.yanchor==="auto"&&(J.title.yanchor=J.title.y<.5?"bottom":"top")));var mt=K("uniformtext.mode");mt&&K("uniformtext.minsize"),K("autosize",!(W.width&&W.height)),K("width"),K("height"),K("minreducedwidth"),K("minreducedheight"),K("margin.l"),K("margin.r"),K("margin.t"),K("margin.b"),K("margin.pad"),K("margin.autoexpand"),W.width&&W.height&&d.sanitizeMargins(J),v.getComponentMethod("grid","sizeDefaults")(W,J),K("paper_bgcolor"),K("separators",it.decimal+it.thousands),K("hidesources"),K("colorway"),K("datarevision");var gt=K("uirevision");K("editrevision",gt),K("selectionrevision",gt),v.getComponentMethod("modebar","supplyLayoutDefaults")(W,J),v.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(W,J,K),v.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(W,J,K),K("meta"),e.isPlainObject(W.transition)&&(K("transition.duration"),K("transition.easing"),K("transition.ordering")),v.getComponentMethod("calendars","handleDefaults")(W,J,"calendar"),v.getComponentMethod("fx","supplyLayoutGlobalDefaults")(W,J,K),e.coerce(W,J,u,"scattermode")};function B(W){return typeof W=="string"&&W.substr(W.length-2)==="px"&&parseFloat(W)}d.plotAutoSize=function(J,it,K){var H=J._context||{},at=H.frameMargins,tt,lt,dt=e.isPlotDiv(J);if(dt&&J.emit("plotly_autosize"),H.fillFrame)tt=window.innerWidth,lt=window.innerHeight,document.body.style.overflow="hidden";else{var mt=dt?window.getComputedStyle(J):{};if(tt=B(mt.width)||B(mt.maxWidth)||K.width,lt=B(mt.height)||B(mt.maxHeight)||K.height,L(at)&&at>0){var gt=1-2*at;tt=Math.round(gt*tt),lt=Math.round(gt*lt)}}var Mt=d.layoutAttributes.width.min,Lt=d.layoutAttributes.height.min;tt<Mt&&(tt=Mt),lt<Lt&&(lt=Lt);var zt=!it.width&&Math.abs(K.width-tt)>1,xt=!it.height&&Math.abs(K.height-lt)>1;(xt||zt)&&(zt&&(K.width=tt),xt&&(K.height=lt)),J._initialAutoSize||(J._initialAutoSize={width:tt,height:lt}),d.sanitizeMargins(K)},d.supplyLayoutModuleDefaults=function(W,J,it,K){var H=v.componentsRegistry,at=J._basePlotModules,tt,lt,dt,mt=v.subplotsRegistry.cartesian;for(tt in H)dt=H[tt],dt.includeBasePlot&&dt.includeBasePlot(W,J);at.length||at.push(mt),J._has("cartesian")&&(v.getComponentMethod("grid","contentDefaults")(W,J),mt.finalizeSubplots(W,J));for(var gt in J._subplots)J._subplots[gt].sort(e.subplotSort);for(lt=0;lt<at.length;lt++)dt=at[lt],dt.supplyLayoutDefaults&&dt.supplyLayoutDefaults(W,J,it);var Mt=J._modules;for(lt=0;lt<Mt.length;lt++)dt=Mt[lt],dt.supplyLayoutDefaults&&dt.supplyLayoutDefaults(W,J,it);var Lt=J._transformModules;for(lt=0;lt<Lt.length;lt++)dt=Lt[lt],dt.supplyLayoutDefaults&&dt.supplyLayoutDefaults(W,J,it,K);for(tt in H)dt=H[tt],dt.supplyLayoutDefaults&&dt.supplyLayoutDefaults(W,J,it)},d.purge=function(W){var J=W._fullLayout||{};J._glcontainer!==void 0&&(J._glcontainer.selectAll(".gl-canvas").remove(),J._glcontainer.remove(),J._glcanvas=null),J._modeBar&&J._modeBar.destroy(),W._transitionData&&(W._transitionData._interruptCallbacks&&(W._transitionData._interruptCallbacks.length=0),W._transitionData._animationRaf&&window.cancelAnimationFrame(W._transitionData._animationRaf)),e.clearThrottle(),e.clearResponsive(W),delete W.data,delete W.layout,delete W._fullData,delete W._fullLayout,delete W.calcdata,delete W.empty,delete W.fid,delete W.undoqueue,delete W.undonum,delete W.autoplay,delete W.changed,delete W._promises,delete W._redrawTimer,delete W._hmlumcount,delete W._hmpixcount,delete W._transitionData,delete W._transitioning,delete W._initialAutoSize,delete W._transitioningWithDuration,delete W._dragging,delete W._dragged,delete W._dragdata,delete W._hoverdata,delete W._snapshotInProgress,delete W._editing,delete W._mouseDownTime,delete W._legendMouseDownTime,W.removeAllListeners&&W.removeAllListeners()},d.style=function(W){var J=W._fullLayout._visibleModules,it=[],K;for(K=0;K<J.length;K++){var H=J[K];H.style&&e.pushUnique(it,H.style)}for(K=0;K<it.length;K++)it[K](W)},d.sanitizeMargins=function(W){if(!(!W||!W.margin)){var J=W.width,it=W.height,K=W.margin,H=J-(K.l+K.r),at=it-(K.t+K.b),tt;H<0&&(tt=(J-1)/(K.l+K.r),K.l=Math.floor(tt*K.l),K.r=Math.floor(tt*K.r)),at<0&&(tt=(it-1)/(K.t+K.b),K.t=Math.floor(tt*K.t),K.b=Math.floor(tt*K.b))}},d.clearAutoMarginIds=function(W){W._fullLayout._pushmarginIds={}},d.allowAutoMargin=function(W,J){W._fullLayout._pushmarginIds[J]=1};function F(W){var J=W.margin;if(!W._size){var it=W._size={l:Math.round(J.l),r:Math.round(J.r),t:Math.round(J.t),b:Math.round(J.b),p:Math.round(J.pad)};it.w=Math.round(W.width)-it.l-it.r,it.h=Math.round(W.height)-it.t-it.b}W._pushmargin||(W._pushmargin={}),W._pushmarginIds||(W._pushmarginIds={}),W._reservedMargin||(W._reservedMargin={})}var _=2,N=2;d.autoMargin=function(W,J,it){var K=W._fullLayout,H=K.width,at=K.height,tt=K.margin,lt=K.minreducedwidth,dt=K.minreducedheight,mt=e.constrain(H-tt.l-tt.r,_,lt),gt=e.constrain(at-tt.t-tt.b,N,dt),Mt=Math.max(0,H-mt),Lt=Math.max(0,at-gt),zt=K._pushmargin,xt=K._pushmarginIds;if(tt.autoexpand!==!1){if(!it)delete zt[J],delete xt[J];else{var Ct=it.pad;if(Ct===void 0&&(Ct=Math.min(12,tt.l,tt.r,tt.t,tt.b)),Mt){var wt=(it.l+it.r)/Mt;wt>1&&(it.l/=wt,it.r/=wt)}if(Lt){var Rt=(it.t+it.b)/Lt;Rt>1&&(it.t/=Rt,it.b/=Rt)}var Tt=it.xl!==void 0?it.xl:it.x,Bt=it.xr!==void 0?it.xr:it.x,Gt=it.yt!==void 0?it.yt:it.y,te=it.yb!==void 0?it.yb:it.y;zt[J]={l:{val:Tt,size:it.l+Ct},r:{val:Bt,size:it.r+Ct},b:{val:te,size:it.b+Ct},t:{val:Gt,size:it.t+Ct}},xt[J]=1}if(!K._replotting)return d.doAutoMargin(W)}};function G(W){if("_redrawFromAutoMarginCount"in W._fullLayout)return!1;var J=l.list(W,"",!0);for(var it in J)if(J[it].autoshift||J[it].shift)return!0;return!1}d.doAutoMargin=function(W){var J=W._fullLayout,it=J.width,K=J.height;J._size||(J._size={}),F(J);var H=J._size,at=J.margin,tt={t:0,b:0,l:0,r:0},lt=e.extendFlat({},H),dt=at.l,mt=at.r,gt=at.t,Mt=at.b,Lt=J._pushmargin,zt=J._pushmarginIds,xt=J.minreducedwidth,Ct=J.minreducedheight;if(at.autoexpand!==!1){for(var wt in Lt)zt[wt]||delete Lt[wt];var Rt=W._fullLayout._reservedMargin;for(var Tt in Rt)for(var Bt in Rt[Tt]){var Gt=Rt[Tt][Bt];tt[Bt]=Math.max(tt[Bt],Gt)}Lt.base={l:{val:0,size:dt},r:{val:1,size:mt},t:{val:1,size:gt},b:{val:0,size:Mt}};for(var te in tt){var Wt=0;for(var jt in Lt)jt!=="base"&&L(Lt[jt][te].size)&&(Wt=Lt[jt][te].size>Wt?Lt[jt][te].size:Wt);var ie=Math.max(0,at[te]-Wt);tt[te]=Math.max(0,tt[te]-ie)}for(var ue in Lt){var fe=Lt[ue].l||{},pe=Lt[ue].b||{},Te=fe.val,Qt=fe.size,Pt=pe.val,Ot=pe.size,Nt=it-tt.r-tt.l,Ht=K-tt.t-tt.b;for(var St in Lt){if(L(Qt)&&Lt[St].r){var kt=Lt[St].r.val,Ft=Lt[St].r.size;if(kt>Te){var At=(Qt*kt+(Ft-Nt)*Te)/(kt-Te),ft=(Ft*(1-Te)+(Qt-Nt)*(1-kt))/(kt-Te);At+ft>dt+mt&&(dt=At,mt=ft)}}if(L(Ot)&&Lt[St].t){var pt=Lt[St].t.val,Dt=Lt[St].t.size;if(pt>Pt){var Ut=(Ot*pt+(Dt-Ht)*Pt)/(pt-Pt),$t=(Dt*(1-Pt)+(Ot-Ht)*(1-pt))/(pt-Pt);Ut+$t>Mt+gt&&(Mt=Ut,gt=$t)}}}}}var re=e.constrain(it-at.l-at.r,_,xt),Be=e.constrain(K-at.t-at.b,N,Ct),We=Math.max(0,it-re),me=Math.max(0,K-Be);if(We){var Se=(dt+mt)/We;Se>1&&(dt/=Se,mt/=Se)}if(me){var je=(Mt+gt)/me;je>1&&(Mt/=je,gt/=je)}if(H.l=Math.round(dt)+tt.l,H.r=Math.round(mt)+tt.r,H.t=Math.round(gt)+tt.t,H.b=Math.round(Mt)+tt.b,H.p=Math.round(at.pad),H.w=Math.round(it)-H.l-H.r,H.h=Math.round(K)-H.t-H.b,!J._replotting&&(d.didMarginChange(lt,H)||G(W))){"_redrawFromAutoMarginCount"in J?J._redrawFromAutoMarginCount++:J._redrawFromAutoMarginCount=1;var vr=3*(1+Object.keys(zt).length);if(J._redrawFromAutoMarginCount<vr)return v.call("_doPlot",W);J._size=lt,e.warn("Too many auto-margin redraws.")}X(W)};function X(W){var J=l.list(W,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(it){for(var K=0;K<J.length;K++){var H=J[K][it];H&&H()}})}var $=["l","r","t","b","p","w","h"];d.didMarginChange=function(W,J){for(var it=0;it<$.length;it++){var K=$[it],H=W[K],at=J[K];if(!L(H)||Math.abs(at-H)>1)return!0}return!1},d.graphJson=function(W,J,it,K,H,at){(H&&J&&!W._fullData||H&&!J&&!W._fullLayout)&&d.supplyDefaults(W);var tt=H?W._fullData:W.data,lt=H?W._fullLayout:W.layout,dt=(W._transitionData||{})._frames;function mt(Lt,zt){if(typeof Lt=="function")return zt?"_function_":null;if(e.isPlainObject(Lt)){var xt={},Ct;return Object.keys(Lt).sort().forEach(function(Bt){if(["_","["].indexOf(Bt.charAt(0))===-1){if(typeof Lt[Bt]=="function"){zt&&(xt[Bt]="_function");return}if(it==="keepdata"){if(Bt.substr(Bt.length-3)==="src")return}else if(it==="keepstream"){if(Ct=Lt[Bt+"src"],typeof Ct=="string"&&Ct.indexOf(":")>0&&!e.isPlainObject(Lt.stream))return}else if(it!=="keepall"&&(Ct=Lt[Bt+"src"],typeof Ct=="string"&&Ct.indexOf(":")>0))return;xt[Bt]=mt(Lt[Bt],zt)}}),xt}var wt=Array.isArray(Lt),Rt=e.isTypedArray(Lt);if((wt||Rt)&&Lt.dtype&&Lt.shape){var Tt=Lt.bdata;return mt({dtype:Lt.dtype,shape:Lt.shape,bdata:e.isArrayBuffer(Tt)?A.encode(Tt):Tt},zt)}return wt?Lt.map(function(Bt){return mt(Bt,zt)}):Rt?e.simpleMap(Lt,e.identity):e.isJSDate(Lt)?e.ms2DateTimeLocal(+Lt):Lt}var gt={data:(tt||[]).map(function(Lt){var zt=mt(Lt);return J&&delete zt.fit,zt})};if(!J&&(gt.layout=mt(lt),H)){var Mt=lt._size;gt.layout.computed={margin:{b:Mt.b,l:Mt.l,r:Mt.r,t:Mt.t}}}return dt&&(gt.frames=mt(dt)),at&&(gt.config=mt(W._context,!0)),K==="object"?gt:JSON.stringify(gt)},d.modifyFrames=function(W,J){var it,K,H,at=W._transitionData._frames,tt=W._transitionData._frameHash;for(it=0;it<J.length;it++)switch(K=J[it],K.type){case"replace":H=K.value;var lt=(at[K.index]||{}).name,dt=H.name;at[K.index]=tt[dt]=H,dt!==lt&&(delete tt[lt],tt[dt]=H);break;case"insert":H=K.value,tt[H.name]=H,at.splice(K.index,0,H);break;case"delete":H=at[K.index],delete tt[H.name],at.splice(K.index,1);break}return Promise.resolve()},d.computeFrame=function(W,J){var it=W._transitionData._frameHash,K,H,at,tt;if(!J)throw new Error("computeFrame must be given a string frame name");var lt=it[J.toString()];if(!lt)return!1;for(var dt=[lt],mt=[lt.name];lt.baseframe&&(lt=it[lt.baseframe.toString()])&&mt.indexOf(lt.name)===-1;)dt.push(lt),mt.push(lt.name);for(var gt={};lt=dt.pop();)if(lt.layout&&(gt.layout=d.extendLayout(gt.layout,lt.layout)),lt.data){if(gt.data||(gt.data=[]),H=lt.traces,!H)for(H=[],K=0;K<lt.data.length;K++)H[K]=K;for(gt.traces||(gt.traces=[]),K=0;K<lt.data.length;K++)at=H[K],at!=null&&(tt=gt.traces.indexOf(at),tt===-1&&(tt=gt.data.length,gt.traces[tt]=at),gt.data[tt]=d.extendTrace(gt.data[tt],lt.data[K]))}return gt},d.recomputeFrameHash=function(W){for(var J=W._transitionData._frameHash={},it=W._transitionData._frames,K=0;K<it.length;K++){var H=it[K];H&&H.name&&(J[H.name]=H)}},d.extendObjectWithContainers=function(W,J,it){var K,H,at,tt,lt,dt,mt,gt,Mt=e.extendDeepNoArrays({},J||{}),Lt=e.expandObjectPaths(Mt),zt={};if(it&&it.length)for(at=0;at<it.length;at++)K=e.nestedProperty(Lt,it[at]),H=K.get(),H===void 0?e.nestedProperty(zt,it[at]).set(null):(K.set(null),e.nestedProperty(zt,it[at]).set(H));if(W=e.extendDeepNoArrays(W||{},Lt),it&&it.length){for(at=0;at<it.length;at++)if(lt=e.nestedProperty(zt,it[at]),mt=lt.get(),!!mt){for(dt=e.nestedProperty(W,it[at]),gt=dt.get(),Array.isArray(gt)||(gt=[],dt.set(gt)),tt=0;tt<mt.length;tt++){var xt=mt[tt];xt===null?gt[tt]=null:gt[tt]=d.extendObjectWithContainers(gt[tt],xt)}dt.set(gt)}}return W},d.dataArrayContainers=["transforms","dimensions"],d.layoutArrayContainers=v.layoutArrayContainers,d.extendTrace=function(W,J){return d.extendObjectWithContainers(W,J,d.dataArrayContainers)},d.extendLayout=function(W,J){return d.extendObjectWithContainers(W,J,d.layoutArrayContainers)},d.transition=function(W,J,it,K,H,at){var tt={redraw:H.redraw},lt={},dt=[];return tt.prepareFn=function(){for(var mt=Array.isArray(J)?J.length:0,gt=K.slice(0,mt),Mt=0;Mt<gt.length;Mt++){var Lt=gt[Mt],zt=W._fullData[Lt],xt=zt._module;if(xt){if(xt.animatable){var Ct=xt.basePlotModule.name;lt[Ct]||(lt[Ct]=[]),lt[Ct].push(Lt)}W.data[gt[Mt]]=d.extendTrace(W.data[gt[Mt]],J[Mt])}}var wt=e.expandObjectPaths(e.extendDeepNoArrays({},it)),Rt=/^[xy]axis[0-9]*$/;for(var Tt in wt)Rt.test(Tt)&&delete wt[Tt].range;d.extendLayout(W.layout,wt),delete W.calcdata,d.supplyDefaults(W),d.doCalcdata(W);var Bt=e.expandObjectPaths(it);if(Bt){var Gt=W._fullLayout._plots;for(var te in Gt){var Wt=Gt[te],jt=Wt.xaxis,ie=Wt.yaxis,ue=jt.range.slice(),fe=ie.range.slice(),pe=null,Te=null,Qt=null,Pt=null;Array.isArray(Bt[jt._name+".range"])?pe=Bt[jt._name+".range"].slice():Array.isArray((Bt[jt._name]||{}).range)&&(pe=Bt[jt._name].range.slice()),Array.isArray(Bt[ie._name+".range"])?Te=Bt[ie._name+".range"].slice():Array.isArray((Bt[ie._name]||{}).range)&&(Te=Bt[ie._name].range.slice()),ue&&pe&&(jt.r2l(ue[0])!==jt.r2l(pe[0])||jt.r2l(ue[1])!==jt.r2l(pe[1]))&&(Qt={xr0:ue,xr1:pe}),fe&&Te&&(ie.r2l(fe[0])!==ie.r2l(Te[0])||ie.r2l(fe[1])!==ie.r2l(Te[1]))&&(Pt={yr0:fe,yr1:Te}),(Qt||Pt)&&dt.push(e.extendFlat({plotinfo:Wt},Qt,Pt))}}return Promise.resolve()},tt.runFn=function(mt){var gt,Mt=W._fullLayout._basePlotModules,Lt=dt.length,zt;if(it)for(zt=0;zt<Mt.length;zt++)Mt[zt].transitionAxes&&Mt[zt].transitionAxes(W,dt,at,mt);Lt?(gt=e.extendFlat({},at),gt.duration=0,delete lt.cartesian):gt=at;for(var xt in lt){var Ct=lt[xt],wt=W._fullData[Ct[0]]._module;wt.basePlotModule.plot(W,Ct,gt,mt)}},et(W,at,tt)},d.transitionFromReact=function(W,J,it,K){var H=W._fullLayout,at=H.transition,tt={},lt=[];return tt.prepareFn=function(){var dt=H._plots;tt.redraw=!1,J.anim==="some"&&(tt.redraw=!0),it.anim==="some"&&(tt.redraw=!0);for(var mt in dt){var gt=dt[mt],Mt=gt.xaxis,Lt=gt.yaxis,zt=K[Mt._name].range.slice(),xt=K[Lt._name].range.slice(),Ct=Mt.range.slice(),wt=Lt.range.slice();Mt.setScale(),Lt.setScale();var Rt=null,Tt=null;(Mt.r2l(zt[0])!==Mt.r2l(Ct[0])||Mt.r2l(zt[1])!==Mt.r2l(Ct[1]))&&(Rt={xr0:zt,xr1:Ct}),(Lt.r2l(xt[0])!==Lt.r2l(wt[0])||Lt.r2l(xt[1])!==Lt.r2l(wt[1]))&&(Tt={yr0:xt,yr1:wt}),(Rt||Tt)&&lt.push(e.extendFlat({plotinfo:gt},Rt,Tt))}return Promise.resolve()},tt.runFn=function(dt){for(var mt=W._fullData,gt=W._fullLayout,Mt=gt._basePlotModules,Lt,zt,xt,Ct=[],wt=0;wt<mt.length;wt++)Ct.push(wt);function Rt(){if(W._fullLayout)for(var Bt=0;Bt<Mt.length;Bt++)Mt[Bt].transitionAxes&&Mt[Bt].transitionAxes(W,lt,Lt,dt)}function Tt(){if(W._fullLayout)for(var Bt=0;Bt<Mt.length;Bt++)Mt[Bt].plot(W,xt,zt,dt)}lt.length&&J.anim?at.ordering==="traces first"?(Lt=e.extendFlat({},at,{duration:0}),xt=Ct,zt=at,setTimeout(Rt,at.duration),Tt()):(Lt=at,xt=null,zt=e.extendFlat({},at,{duration:0}),setTimeout(Tt,Lt.duration),Rt()):lt.length?(Lt=at,Rt()):J.anim&&(xt=Ct,zt=at,Tt())},et(W,at,tt)};function et(W,J,it){var K=!1;function H(Mt){var Lt=Promise.resolve();if(!Mt)return Lt;for(;Mt.length;)Lt=Lt.then(Mt.shift());return Lt}function at(Mt){if(Mt)for(;Mt.length;)Mt.shift()}function tt(){return W.emit("plotly_transitioning",[]),new Promise(function(Mt){W._transitioning=!0,J.duration>0&&(W._transitioningWithDuration=!0),W._transitionData._interruptCallbacks.push(function(){K=!0}),it.redraw&&W._transitionData._interruptCallbacks.push(function(){return v.call("redraw",W)}),W._transitionData._interruptCallbacks.push(function(){W.emit("plotly_transitioninterrupted",[])});var Lt=0,zt=0;function xt(){return Lt++,function(){zt++,!K&&zt===Lt&&lt(Mt)}}it.runFn(xt),setTimeout(xt())})}function lt(Mt){if(W._transitionData)return at(W._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(it.redraw)return v.call("redraw",W)}).then(function(){W._transitioning=!1,W._transitioningWithDuration=!1,W.emit("plotly_transitioned",[])}).then(Mt)}function dt(){if(W._transitionData)return W._transitioning=!1,H(W._transitionData._interruptCallbacks)}var mt=[d.previousPromises,dt,it.prepareFn,d.rehover,d.reselect,tt],gt=e.syncOrAsync(mt,W);return(!gt||!gt.then)&&(gt=Promise.resolve()),gt.then(function(){return W})}d.doCalcdata=function(W,J){var it=l.list(W),K=W._fullData,H=W._fullLayout,at,tt,lt,dt,mt=new Array(K.length),gt=(W.calcdata||[]).slice();for(W.calcdata=mt,H._numBoxes=0,H._numViolins=0,H._violinScaleGroupStats={},W._hmpixcount=0,W._hmlumcount=0,H._piecolormap={},H._sunburstcolormap={},H._treemapcolormap={},H._iciclecolormap={},H._funnelareacolormap={},lt=0;lt<K.length;lt++)if(Array.isArray(J)&&J.indexOf(lt)===-1){mt[lt]=gt[lt];continue}for(lt=0;lt<K.length;lt++)at=K[lt],at._arrayAttrs=p.findArrayAttributes(at),at._extremes={};var Mt=H._subplots.polar||[];for(lt=0;lt<Mt.length;lt++)it.push(H[Mt[lt]].radialaxis,H[Mt[lt]].angularaxis);for(var Lt in H._colorAxes){var zt=H[Lt];zt.cauto!==!1&&(delete zt.cmin,delete zt.cmax)}var xt=!1;function Ct(Tt){if(at=K[Tt],tt=at._module,at.visible===!0&&at.transforms){if(tt&&tt.calc){var Bt=tt.calc(W,at);Bt[0]&&Bt[0].t&&Bt[0].t._scene&&delete Bt[0].t._scene.dirty}for(dt=0;dt<at.transforms.length;dt++){var Gt=at.transforms[dt];tt=x[Gt.type],tt&&tt.calcTransform&&(at._hasCalcTransform=!0,xt=!0,tt.calcTransform(W,at,Gt))}}}function wt(Tt,Bt){if(at=K[Tt],tt=at._module,!!tt.isContainer===Bt){var Gt=[];if(at.visible===!0&&at._length!==0){delete at._indexToPoints;var te=at.transforms||[];for(dt=te.length-1;dt>=0;dt--)if(te[dt].enabled){at._indexToPoints=te[dt]._indexToPoints;break}tt&&tt.calc&&(Gt=tt.calc(W,at))}(!Array.isArray(Gt)||!Gt[0])&&(Gt=[{x:n,y:n}]),Gt[0].t||(Gt[0].t={}),Gt[0].trace=at,mt[Tt]=Gt}}for(Z(it,K,H),lt=0;lt<K.length;lt++)wt(lt,!0);for(lt=0;lt<K.length;lt++)Ct(lt);for(xt&&Z(it,K,H),lt=0;lt<K.length;lt++)wt(lt,!0);for(lt=0;lt<K.length;lt++)wt(lt,!1);Q(W);var Rt=nt(it,W);if(Rt.length){for(H._numBoxes=0,H._numViolins=0,lt=0;lt<Rt.length;lt++)wt(Rt[lt],!0);for(lt=0;lt<Rt.length;lt++)wt(Rt[lt],!1);Q(W)}v.getComponentMethod("fx","calc")(W),v.getComponentMethod("errorbars","calc")(W)};var ot=/(total|sum|min|max|mean|geometric mean|median) (ascending|descending)/;function nt(W,J){var it=[],K,H,at,tt,lt;function dt(St,kt,Ft){var At=kt._id.charAt(0);if(St==="histogram2dcontour"){var ft=kt._counterAxes[0],pt=l.getFromId(J,ft),Dt=At==="x"||ft==="x"&&pt.type==="category",Ut=At==="y"||ft==="y"&&pt.type==="category";return function($t,re){return $t===0||re===0||Dt&&$t===Ft[re].length-1||Ut&&re===Ft.length-1?-1:(At==="y"?re:$t)-1}}else return function($t,re){return At==="y"?re:$t}}var mt={min:function(St){return e.aggNums(Math.min,null,St)},max:function(St){return e.aggNums(Math.max,null,St)},sum:function(St){return e.aggNums(function(kt,Ft){return kt+Ft},null,St)},total:function(St){return e.aggNums(function(kt,Ft){return kt+Ft},null,St)},mean:function(St){return e.mean(St)},"geometric mean":function(St){return e.geometricMean(St)},median:function(St){return e.median(St)}};function gt(St,kt){return St[1]-kt[1]}function Mt(St,kt){return kt[1]-St[1]}for(K=0;K<W.length;K++){var Lt=W[K];if(Lt.type==="category"){var zt=Lt.categoryorder.match(ot);if(zt){var xt=zt[1],Ct=zt[2],wt=Lt._id.charAt(0),Rt=wt==="x",Tt=[];for(H=0;H<Lt._categories.length;H++)Tt.push([Lt._categories[H],[]]);for(H=0;H<Lt._traceIndices.length;H++){var Bt=Lt._traceIndices[H],Gt=J._fullData[Bt];if(Gt.visible===!0){var te=Gt.type;v.traceIs(Gt,"histogram")&&(delete Gt._xautoBinFinished,delete Gt._yautoBinFinished);var Wt=te==="splom",jt=te==="scattergl",ie=J.calcdata[Bt];for(at=0;at<ie.length;at++){var ue=ie[at],fe,pe;if(Wt){var Te=Gt._axesDim[Lt._id];if(!Rt){var Qt=Gt._diag[Te][0];Qt&&(Lt=J._fullLayout[l.id2name(Qt)])}var Pt=ue.trace.dimensions[Te].values;for(tt=0;tt<Pt.length;tt++)for(fe=Lt._categoriesMap[Pt[tt]],lt=0;lt<ue.trace.dimensions.length;lt++)if(lt!==Te){var Ot=ue.trace.dimensions[lt];Tt[fe][1].push(Ot.values[tt])}}else if(jt){for(tt=0;tt<ue.t.x.length;tt++)Rt?(fe=ue.t.x[tt],pe=ue.t.y[tt]):(fe=ue.t.y[tt],pe=ue.t.x[tt]),Tt[fe][1].push(pe);ue.t&&ue.t._scene&&delete ue.t._scene.dirty}else if(ue.hasOwnProperty("z")){pe=ue.z;var Nt=dt(Gt.type,Lt,pe);for(tt=0;tt<pe.length;tt++)for(lt=0;lt<pe[tt].length;lt++)fe=Nt(lt,tt),fe+1&&Tt[fe][1].push(pe[tt][lt])}else for(fe=ue.p,fe===void 0&&(fe=ue[wt]),pe=ue.s,pe===void 0&&(pe=ue.v),pe===void 0&&(pe=Rt?ue.y:ue.x),Array.isArray(pe)||(pe===void 0?pe=[]:pe=[pe]),tt=0;tt<pe.length;tt++)Tt[fe][1].push(pe[tt])}}}Lt._categoriesValue=Tt;var Ht=[];for(H=0;H<Tt.length;H++)Ht.push([Tt[H][0],mt[xt](Tt[H][1])]);Ht.sort(Ct==="descending"?Mt:gt),Lt._categoriesAggregatedValue=Ht,Lt._initialCategories=Ht.map(function(St){return St[0]}),it=it.concat(Lt.sortByInitialCategories())}}}return it}function Z(W,J,it){var K={};function H(dt){dt.clearCalc(),dt.type==="multicategory"&&dt.setupMultiCategory(J),K[dt._id]=1}e.simpleMap(W,H);for(var at=it._axisMatchGroups||[],tt=0;tt<at.length;tt++)for(var lt in at[tt])K[lt]||H(it[l.id2name(lt)])}function Q(W){var J=W._fullLayout,it=J._visibleModules,K={},H,at,tt;for(at=0;at<it.length;at++){var lt=it[at],dt=lt.crossTraceCalc;if(dt){var mt=lt.basePlotModule.name;K[mt]?e.pushUnique(K[mt],dt):K[mt]=[dt]}}for(tt in K){var gt=K[tt],Mt=J._subplots[tt];if(Array.isArray(Mt))for(H=0;H<Mt.length;H++){var Lt=Mt[H],zt=tt==="cartesian"?J._plots[Lt]:J[Lt];for(at=0;at<gt.length;at++)gt[at](W,zt,Lt)}else for(at=0;at<gt.length;at++)gt[at](W)}}d.rehover=function(W){W._fullLayout._rehover&&W._fullLayout._rehover()},d.redrag=function(W){W._fullLayout._redrag&&W._fullLayout._redrag()},d.reselect=function(W){var J=W._fullLayout,it=(W.layout||{}).selections,K=J._previousSelections;J._previousSelections=it;var H=J._reselect||JSON.stringify(it)!==JSON.stringify(K);v.getComponentMethod("selections","reselect")(W,H)},d.generalUpdatePerTraceModule=function(W,J,it,K){var H=J.traceHash,at={},tt;for(tt=0;tt<it.length;tt++){var lt=it[tt],dt=lt[0].trace;dt.visible&&(at[dt.type]=at[dt.type]||[],at[dt.type].push(lt))}for(var mt in H)if(!at[mt]){var gt=H[mt][0],Mt=gt[0].trace;Mt.visible=!1,at[mt]=[gt]}for(var Lt in at){var zt=at[Lt],xt=zt[0][0].trace._module;xt.plot(W,J,e.filterVisible(zt),K)}J.traceHash=at},d.plotBasePlot=function(W,J,it,K,H){var at=v.getModule(W),tt=T(J.calcdata,at)[0];at.plot(J,tt,K,H)},d.cleanBasePlot=function(W,J,it,K,H){var at=H._has&&H._has(W),tt=it._has&&it._has(W);at&&!tt&&H["_"+W+"layer"].selectAll("g.trace").remove()}},39360:function(j){j.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},57384:function(j,V,t){var b=t(3400),P=t(92065).tester,o=b.findIndexOfMin,L=b.isAngleInsideSector,A=b.angleDelta,v=b.angleDist;function p(i,d,x,w,C){if(!L(d,w))return!1;var y,S;x[0]<x[1]?(y=x[0],S=x[1]):(y=x[1],S=x[0]);var M=P(l(y,w[0],w[1],C)),a=P(l(S,w[0],w[1],C)),E=[i*Math.cos(d),i*Math.sin(d)];return a.contains(E)&&!M.contains(E)}function r(i,d,x,w){var C,y,S=w[0],M=w[1],a=g(Math.sin(d)-Math.sin(i)),E=g(Math.cos(d)-Math.cos(i)),m=Math.tan(x),k=g(1/m),I=a/E,O=M-I*S;return k?a&&E?(C=O/(m-I),y=m*C):E?(C=M*k,y=M):(C=S,y=S*m):a&&E?(C=0,y=O):E?(C=0,y=M):C=y=NaN,[C,y]}function e(i,d,x,w){var C=-d*x,y=d*d+1,S=2*(d*C-x),M=C*C+x*x-i*i,a=Math.sqrt(S*S-4*y*M),E=(-S+a)/(2*y),m=(-S-a)/(2*y);return[[E,d*E+C+w],[m,d*m+C+w]]}function s(i,d){var x=d.length,w=new Array(x+1),C;for(C=0;C<x;C++){var y=d[C];w[C]=[i*Math.cos(y),i*Math.sin(y)]}return w[C]=w[0].slice(),w}function n(i,d,x,w){var C=w.length,y=[],S,M;function a(_){return[i*Math.cos(_),i*Math.sin(_)]}function E(_,N,G){return r(_,N,G,a(_))}function m(_){return b.mod(_,C)}function k(_){return L(_,[d,x])}var I=o(w,function(_){return k(_)?v(_,d):1/0}),O=E(w[I],w[m(I-1)],d);for(y.push(O),S=I,M=0;M<C;S++,M++){var z=w[m(S)];if(!k(z))break;y.push(a(z))}var B=o(w,function(_){return k(_)?v(_,x):1/0}),F=E(w[B],w[m(B+1)],x);return y.push(F),y.push([0,0]),y.push(y[0].slice()),y}function l(i,d,x,w){return b.isFullCircle([d,x])?s(i,w):n(i,d,x,w)}function f(i,d,x,w){for(var C=1/0,y=1/0,S=l(i,d,x,w),M=0;M<S.length;M++){var a=S[M];C=Math.min(C,a[0]),y=Math.min(y,-a[1])}return[C,y]}function u(i,d){var x=function(y){var S=A(y,i);return S>0?S:1/0},w=o(d,x),C=b.mod(w+1,d.length);return[d[w],d[C]]}function g(i){return Math.abs(i)>1e-10?i:0}function h(i,d,x){d=d||0,x=x||0;for(var w=i.length,C=new Array(w),y=0;y<w;y++){var S=i[y];C[y]=[d+S[0],x-S[1]]}return C}function T(i,d,x,w,C,y){var S=l(i,d,x,w);return"M"+h(S,C,y).join("L")}function c(i,d,x,w,C,y,S){var M,a;i<d?(M=i,a=d):(M=d,a=i);var E=h(l(M,x,w,C),y,S),m=h(l(a,x,w,C),y,S);return"M"+m.reverse().join("L")+"M"+E.join("L")}j.exports={isPtInsidePolygon:p,findPolygonOffset:f,findEnclosingVertexAngles:u,findIntersectionXY:r,findXYatLength:e,clampTiny:g,pathPolygon:T,pathPolygonAnnulus:c}},40872:function(j,V,t){var b=t(84888).KY,P=t(3400).counterRegex,o=t(62400),L=t(39360),A=L.attr,v=L.name,p=P(v),r={};r[A]={valType:"subplotid",dflt:v,editType:"calc"};function e(n){for(var l=n._fullLayout,f=n.calcdata,u=l._subplots[v],g=0;g<u.length;g++){var h=u[g],T=b(f,v,h),c=l[h]._subplot;c||(c=o(n,h),l[h]._subplot=c),c.plot(T,l,n._promises)}}function s(n,l,f,u){for(var g=u._subplots[v]||[],h=u._has&&u._has("gl"),T=l._has&&l._has("gl"),c=h&&!T,i=0;i<g.length;i++){var d=g[i],x=u[d]._subplot;if(!l[d]&&x){x.framework.remove(),x.layers["radial-axis-title"].remove();for(var w in x.clipPaths)x.clipPaths[w].remove()}c&&x._scene&&(x._scene.destroy(),x._scene=null)}}j.exports={attr:A,name:v,idRoot:v,idRegex:p,attrRegex:p,attributes:r,layoutAttributes:t(95300),supplyLayoutDefaults:t(84380),plot:e,clean:s,toSVG:t(57952).toSVG}},95300:function(j,V,t){var b=t(22548),P=t(94724),o=t(86968).u,L=t(3400).extendFlat,A=t(67824).overrideAll,v=A({color:P.color,showline:L({},P.showline,{dflt:!0}),linecolor:P.linecolor,linewidth:P.linewidth,showgrid:L({},P.showgrid,{dflt:!0}),gridcolor:P.gridcolor,gridwidth:P.gridwidth,griddash:P.griddash},"plot","from-root"),p=A({tickmode:P.minor.tickmode,nticks:P.nticks,tick0:P.tick0,dtick:P.dtick,tickvals:P.tickvals,ticktext:P.ticktext,ticks:P.ticks,ticklen:P.ticklen,tickwidth:P.tickwidth,tickcolor:P.tickcolor,ticklabelstep:P.ticklabelstep,showticklabels:P.showticklabels,labelalias:P.labelalias,showtickprefix:P.showtickprefix,tickprefix:P.tickprefix,showticksuffix:P.showticksuffix,ticksuffix:P.ticksuffix,showexponent:P.showexponent,exponentformat:P.exponentformat,minexponent:P.minexponent,separatethousands:P.separatethousands,tickfont:P.tickfont,tickangle:P.tickangle,tickformat:P.tickformat,tickformatstops:P.tickformatstops,layer:P.layer},"plot","from-root"),r={visible:L({},P.visible,{dflt:!0}),type:L({},P.type,{values:["-","linear","log","date","category"]}),autotypenumbers:P.autotypenumbers,autorangeoptions:{minallowed:P.autorangeoptions.minallowed,maxallowed:P.autorangeoptions.maxallowed,clipmin:P.autorangeoptions.clipmin,clipmax:P.autorangeoptions.clipmax,include:P.autorangeoptions.include,editType:"plot"},autorange:L({},P.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},minallowed:L({},P.minallowed,{editType:"plot"}),maxallowed:L({},P.maxallowed,{editType:"plot"}),range:L({},P.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:P.categoryorder,categoryarray:P.categoryarray,angle:{valType:"angle",editType:"plot"},autotickangles:P.autotickangles,side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:L({},P.title.text,{editType:"plot",dflt:""}),font:L({},P.title.font,{editType:"plot"}),editType:"plot"},hoverformat:P.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:P._deprecated.title,titlefont:P._deprecated.titlefont}};L(r,v,p);var e={visible:L({},P.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:P.autotypenumbers,categoryorder:P.categoryorder,categoryarray:P.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:P.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};L(e,v,p),j.exports={domain:o({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:b.background},radialaxis:r,angularaxis:e,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},84380:function(j,V,t){var b=t(3400),P=t(76308),o=t(31780),L=t(168),A=t(84888).op,v=t(26332),p=t(25404),r=t(95936),e=t(42568),s=t(22416),n=t(42136),l=t(76808),f=t(52976),u=t(95300),g=t(57696),h=t(39360),T=h.axisNames;function c(d,x,w,C){var y=w("bgcolor");C.bgColor=P.combine(y,C.paper_bgcolor);var S=w("sector");w("hole");var M=A(C.fullData,h.name,C.id),a=C.layoutOut,E;function m(lt,dt){return w(E+"."+lt,dt)}for(var k=0;k<T.length;k++){E=T[k],b.isPlainObject(d[E])||(d[E]={});var I=d[E],O=o.newContainer(x,E);O._id=O._name=E,O._attr=C.id+"."+E,O._traceIndices=M.map(function(lt){return lt._expandedIndex});var z=h.axisName2dataArray[E],B=i(I,O,m,M,z,C);s(I,O,m,{axData:M,dataAttr:z});var F=m("visible");switch(g(O,x,a),m("uirevision",x.uirevision),O._m=1,E){case"radialaxis":m("minallowed"),m("maxallowed");var _=m("range"),N=O.getAutorangeDflt(_),G=m("autorange",N),X;_&&(_[0]===null&&_[1]===null||(_[0]===null||_[1]===null)&&(G==="reversed"||G===!0)||_[0]!==null&&(G==="min"||G==="max reversed")||_[1]!==null&&(G==="max"||G==="min reversed"))&&(_=void 0,delete O.range,O.autorange=!0,X=!0),X||(N=O.getAutorangeDflt(_),G=m("autorange",N)),I.autorange=G,G&&(l(m,G,_),(B==="linear"||B==="-")&&m("rangemode"),O.isReversed()&&(O._m=-1)),O.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(B==="date"){b.log("Polar plots do not support date angular axes yet.");for(var $=0;$<M.length;$++)M[$].visible=!1;B=I.type=O.type="linear"}m(B==="linear"?"thetaunit":"period");var et=m("direction");m("rotation",{counterclockwise:0,clockwise:90}[et]);break}if(e(I,O,m,O.type,{tickSuffixDflt:O.thetaunit==="degrees"?"°":void 0}),F){var ot,nt,Z,Q,W,J,it,K,H,at,tt=C.font||{};ot=m("color"),nt=ot===I.color?ot:tt.color,Z=tt.size,Q=tt.family,W=tt.weight,J=tt.style,it=tt.variant,K=tt.textcase,H=tt.lineposition,at=tt.shadow,v(I,O,m,O.type),r(I,O,m,O.type,{font:{weight:W,style:J,variant:it,textcase:K,lineposition:H,shadow:at,color:nt,size:Z,family:Q},noAutotickangles:E==="angularaxis",noTicklabelshift:!0,noTicklabelstandoff:!0}),p(I,O,m,{outerTicks:!0}),n(I,O,m,{dfltColor:ot,bgColor:C.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u[E]}),m("layer"),E==="radialaxis"&&(m("side"),m("angle",S[0]),m("title.text"),b.coerceFont(m,"title.font",{weight:W,style:J,variant:it,textcase:K,lineposition:H,shadow:at,color:nt,size:b.bigFont(Z),family:Q}))}B!=="category"&&m("hoverformat"),O._input=I}x.angularaxis.type==="category"&&w("gridshape")}function i(d,x,w,C,y,S){var M=w("autotypenumbers",S.autotypenumbersDflt),a=w("type");if(a==="-"){for(var E,m=0;m<C.length;m++)if(C[m].visible){E=C[m];break}E&&E[y]&&(x.type=f(E[y],"gregorian",{noMultiCategory:!0,autotypenumbers:M})),x.type==="-"?x.type="linear":d.type=x.type}return x.type}j.exports=function(x,w,C){L(x,w,C,{type:h.name,attributes:u,handleDefaults:c,font:w.font,autotypenumbersDflt:w.autotypenumbers,paper_bgcolor:w.paper_bgcolor,fullData:C,layoutOut:w})}},62400:function(j,V,t){var b=t(33428),P=t(49760),o=t(24040),L=t(3400),A=L.strRotate,v=L.strTranslate,p=t(76308),r=t(43616),e=t(7316),s=t(54460),n=t(78344),l=t(57696),f=t(19280).doAutoRange,u=t(51184),g=t(86476),h=t(93024),T=t(81668),c=t(22676).prepSelect,i=t(22676).selectOnClick,d=t(22676).clearOutline,x=t(93972),w=t(73696),C=t(39172).redrawReglTraces,y=t(84284).MID_SHIFT,S=t(39360),M=t(57384),a=t(36416),E=a.smith,m=a.reactanceArc,k=a.resistanceArc,I=a.smithTransform,O=L._,z=L.mod,B=L.deg2rad,F=L.rad2deg;function _(ot,nt,Z){this.isSmith=Z||!1,this.id=nt,this.gd=ot,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Q=ot._fullLayout,W="clip"+Q._uid+nt;this.clipIds.forTraces=W+"-for-traces",this.clipPaths.forTraces=Q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Q["_"+(Z?"smith":"polar")+"layer"].append("g").attr("class",nt),this.getHole=function(J){return this.isSmith?0:J.hole},this.getSector=function(J){return this.isSmith?[0,360]:J.sector},this.getRadial=function(J){return this.isSmith?J.realaxis:J.radialaxis},this.getAngular=function(J){return this.isSmith?J.imaginaryaxis:J.angularaxis},Z||(this.radialTickLayout=null,this.angularTickLayout=null)}var N=_.prototype;j.exports=function(nt,Z,Q){return new _(nt,Z,Q)},N.plot=function(ot,nt){for(var Z=this,Q=nt[Z.id],W=!1,J=0;J<ot.length;J++){var it=ot[J][0].trace;if(it.cliponaxis===!1){W=!0;break}}Z._hasClipOnAxisFalse=W,Z.updateLayers(nt,Q),Z.updateLayout(nt,Q),e.generalUpdatePerTraceModule(Z.gd,Z,ot,Q),Z.updateFx(nt,Q),Z.isSmith&&(delete Q.realaxis.range,delete Q.imaginaryaxis.range)},N.updateLayers=function(ot,nt){var Z=this,Q=Z.isSmith,W=Z.layers,J=Z.getRadial(nt),it=Z.getAngular(nt),K=S.layerNames,H=K.indexOf("frontplot"),at=K.slice(0,H),tt=it.layer==="below traces",lt=J.layer==="below traces";tt&&at.push("angular-line"),lt&&at.push("radial-line"),tt&&at.push("angular-axis"),lt&&at.push("radial-axis"),at.push("frontplot"),tt||at.push("angular-line"),lt||at.push("radial-line"),tt||at.push("angular-axis"),lt||at.push("radial-axis");var dt=(Q?"smith":"polar")+"sublayer",mt=Z.framework.selectAll("."+dt).data(at,String);mt.enter().append("g").attr("class",function(gt){return dt+" "+gt}).each(function(gt){var Mt=W[gt]=b.select(this);switch(gt){case"frontplot":Q||Mt.append("g").classed("barlayer",!0),Mt.append("g").classed("scatterlayer",!0);break;case"backplot":Mt.append("g").classed("maplayer",!0);break;case"plotbg":W.bg=Mt.append("path");break;case"radial-grid":Mt.style("fill","none");break;case"angular-grid":Mt.style("fill","none");break;case"radial-line":Mt.append("line").style("fill","none");break;case"angular-line":Mt.append("path").style("fill","none");break}}),mt.order()},N.updateLayout=function(ot,nt){var Z=this,Q=Z.layers,W=ot._size,J=Z.getRadial(nt),it=Z.getAngular(nt),K=nt.domain.x,H=nt.domain.y;Z.xOffset=W.l+W.w*K[0],Z.yOffset=W.t+W.h*(1-H[1]);var at=Z.xLength=W.w*(K[1]-K[0]),tt=Z.yLength=W.h*(H[1]-H[0]),lt=Z.getSector(nt);Z.sectorInRad=lt.map(B);var dt=Z.sectorBBox=X(lt),mt=dt[2]-dt[0],gt=dt[3]-dt[1],Mt=tt/at,Lt=Math.abs(gt/mt),zt,xt,Ct,wt,Rt;Mt>Lt?(zt=at,xt=at*Lt,Rt=(tt-xt)/W.h/2,Ct=[K[0],K[1]],wt=[H[0]+Rt,H[1]-Rt]):(zt=tt/Lt,xt=tt,Rt=(at-zt)/W.w/2,Ct=[K[0]+Rt,K[1]-Rt],wt=[H[0],H[1]]),Z.xLength2=zt,Z.yLength2=xt,Z.xDomain2=Ct,Z.yDomain2=wt;var Tt=Z.xOffset2=W.l+W.w*Ct[0],Bt=Z.yOffset2=W.t+W.h*(1-wt[1]),Gt=Z.radius=zt/mt,te=Z.innerRadius=Z.getHole(nt)*Gt,Wt=Z.cx=Tt-Gt*dt[0],jt=Z.cy=Bt+Gt*dt[3],ie=Z.cxx=Wt-Tt,ue=Z.cyy=jt-Bt,fe=J.side,pe;fe==="counterclockwise"?(pe=fe,fe="top"):fe==="clockwise"&&(pe=fe,fe="bottom"),Z.radialAxis=Z.mockAxis(ot,nt,J,{_id:"x",side:fe,_trueSide:pe,domain:[te/W.w,Gt/W.w]}),Z.angularAxis=Z.mockAxis(ot,nt,it,{side:"right",domain:[0,Math.PI],autorange:!1}),Z.doAutoRange(ot,nt),Z.updateAngularAxis(ot,nt),Z.updateRadialAxis(ot,nt),Z.updateRadialAxisTitle(ot,nt),Z.xaxis=Z.mockCartesianAxis(ot,nt,{_id:"x",domain:Ct}),Z.yaxis=Z.mockCartesianAxis(ot,nt,{_id:"y",domain:wt});var Te=Z.pathSubplot();Z.clipPaths.forTraces.select("path").attr("d",Te).attr("transform",v(ie,ue)),Q.frontplot.attr("transform",v(Tt,Bt)).call(r.setClipUrl,Z._hasClipOnAxisFalse?null:Z.clipIds.forTraces,Z.gd),Q.bg.attr("d",Te).attr("transform",v(Wt,jt)).call(p.fill,nt.bgcolor)},N.mockAxis=function(ot,nt,Z,Q){var W=L.extendFlat({},Z,Q);return l(W,nt,ot),W},N.mockCartesianAxis=function(ot,nt,Z){var Q=this,W=Q.isSmith,J=Z._id,it=L.extendFlat({type:"linear"},Z);n(it,ot);var K={x:[0,2],y:[1,3]};return it.setRange=function(){var H=Q.sectorBBox,at=K[J],tt=Q.radialAxis._rl,lt=(tt[1]-tt[0])/(1-Q.getHole(nt));it.range=[H[at[0]]*lt,H[at[1]]*lt]},it.isPtWithinRange=J==="x"&&!W?function(H){return Q.isPtInside(H)}:function(){return!0},it.setRange(),it.setScale(),it},N.doAutoRange=function(ot,nt){var Z=this,Q=Z.gd,W=Z.radialAxis,J=Z.getRadial(nt);f(Q,W);var it=W.range;if(J.range=it.slice(),J._input.range=it.slice(),W._rl=[W.r2l(it[0],null,"gregorian"),W.r2l(it[1],null,"gregorian")],W.minallowed!==void 0){var K=W.r2l(W.minallowed);W._rl[0]>W._rl[1]?W._rl[1]=Math.max(W._rl[1],K):W._rl[0]=Math.max(W._rl[0],K)}if(W.maxallowed!==void 0){var H=W.r2l(W.maxallowed);W._rl[0]<W._rl[1]?W._rl[1]=Math.min(W._rl[1],H):W._rl[0]=Math.min(W._rl[0],H)}},N.updateRadialAxis=function(ot,nt){var Z=this,Q=Z.gd,W=Z.layers,J=Z.radius,it=Z.innerRadius,K=Z.cx,H=Z.cy,at=Z.getRadial(nt),tt=z(Z.getSector(nt)[0],360),lt=Z.radialAxis,dt=it<J,mt=Z.isSmith;mt||(Z.fillViewInitialKey("radialaxis.angle",at.angle),Z.fillViewInitialKey("radialaxis.range",lt.range.slice()),lt.setGeometry()),lt.tickangle==="auto"&&tt>90&&tt<=270&&(lt.tickangle=180);var gt=mt?function(Gt){var te=I(Z,E([Gt.x,0]));return v(te[0]-K,te[1]-H)}:function(Gt){return v(lt.l2p(Gt.x)+it,0)},Mt=mt?function(Gt){return k(Z,Gt.x,-1/0,1/0)}:function(Gt){return Z.pathArc(lt.r2p(Gt.x)+it)},Lt=G(at);if(Z.radialTickLayout!==Lt&&(W["radial-axis"].selectAll(".xtick").remove(),Z.radialTickLayout=Lt),dt){lt.setScale();var zt=0,xt=mt?(lt.tickvals||[]).filter(function(Gt){return Gt>=0}).map(function(Gt){return s.tickText(lt,Gt,!0,!1)}):s.calcTicks(lt),Ct=mt?xt:s.clipEnds(lt,xt),wt=s.getTickSigns(lt)[2];mt&&((lt.ticks==="top"&&lt.side==="bottom"||lt.ticks==="bottom"&&lt.side==="top")&&(wt=-wt),lt.ticks==="top"&&lt.side==="top"&&(zt=-lt.ticklen),lt.ticks==="bottom"&&lt.side==="bottom"&&(zt=lt.ticklen)),s.drawTicks(Q,lt,{vals:xt,layer:W["radial-axis"],path:s.makeTickPath(lt,0,wt),transFn:gt,crisp:!1}),s.drawGrid(Q,lt,{vals:Ct,layer:W["radial-grid"],path:Mt,transFn:L.noop,crisp:!1}),s.drawLabels(Q,lt,{vals:xt,layer:W["radial-axis"],transFn:gt,labelFns:s.makeLabelFns(lt,zt)})}var Rt=Z.radialAxisAngle=Z.vangles?F($(B(at.angle),Z.vangles)):at.angle,Tt=v(K,H),Bt=Tt+A(-Rt);et(W["radial-axis"],dt&&(at.showticklabels||at.ticks),{transform:Bt}),et(W["radial-grid"],dt&&at.showgrid,{transform:mt?"":Tt}),et(W["radial-line"].select("line"),dt&&at.showline,{x1:mt?-J:it,y1:0,x2:J,y2:0,transform:Bt}).attr("stroke-width",at.linewidth).call(p.stroke,at.linecolor)},N.updateRadialAxisTitle=function(ot,nt,Z){if(!this.isSmith){var Q=this,W=Q.gd,J=Q.radius,it=Q.cx,K=Q.cy,H=Q.getRadial(nt),at=Q.id+"title",tt=0;if(H.title){var lt=r.bBox(Q.layers["radial-axis"].node()).height,dt=H.title.font.size,mt=H.side;tt=mt==="top"?dt:mt==="counterclockwise"?-(lt+dt*.4):lt+dt*.8}var gt=Z!==void 0?Z:Q.radialAxisAngle,Mt=B(gt),Lt=Math.cos(Mt),zt=Math.sin(Mt),xt=it+J/2*Lt+tt*zt,Ct=K-J/2*zt+tt*Lt;Q.layers["radial-axis-title"]=T.draw(W,at,{propContainer:H,propName:Q.id+".radialaxis.title",placeholder:O(W,"Click to enter radial axis title"),attributes:{x:xt,y:Ct,"text-anchor":"middle"},transform:{rotate:-gt}})}},N.updateAngularAxis=function(ot,nt){var Z=this,Q=Z.gd,W=Z.layers,J=Z.radius,it=Z.innerRadius,K=Z.cx,H=Z.cy,at=Z.getAngular(nt),tt=Z.angularAxis,lt=Z.isSmith;lt||(Z.fillViewInitialKey("angularaxis.rotation",at.rotation),tt.setGeometry(),tt.setScale());var dt=lt?function(te){var Wt=I(Z,E([0,te.x]));return Math.atan2(Wt[0]-K,Wt[1]-H)-Math.PI/2}:function(te){return tt.t2g(te.x)};tt.type==="linear"&&tt.thetaunit==="radians"&&(tt.tick0=F(tt.tick0),tt.dtick=F(tt.dtick));var mt=function(te){return v(K+J*Math.cos(te),H-J*Math.sin(te))},gt=lt?function(te){var Wt=I(Z,E([0,te.x]));return v(Wt[0],Wt[1])}:function(te){return mt(dt(te))},Mt=lt?function(te){var Wt=I(Z,E([0,te.x])),jt=Math.atan2(Wt[0]-K,Wt[1]-H)-Math.PI/2;return v(Wt[0],Wt[1])+A(-F(jt))}:function(te){var Wt=dt(te);return mt(Wt)+A(-F(Wt))},Lt=lt?function(te){return m(Z,te.x,0,1/0)}:function(te){var Wt=dt(te),jt=Math.cos(Wt),ie=Math.sin(Wt);return"M"+[K+it*jt,H-it*ie]+"L"+[K+J*jt,H-J*ie]},zt=s.makeLabelFns(tt,0),xt=zt.labelStandoff,Ct={};Ct.xFn=function(te){var Wt=dt(te);return Math.cos(Wt)*xt},Ct.yFn=function(te){var Wt=dt(te),jt=Math.sin(Wt)>0?.2:1;return-Math.sin(Wt)*(xt+te.fontSize*jt)+Math.abs(Math.cos(Wt))*(te.fontSize*y)},Ct.anchorFn=function(te){var Wt=dt(te),jt=Math.cos(Wt);return Math.abs(jt)<.1?"middle":jt>0?"start":"end"},Ct.heightFn=function(te,Wt,jt){var ie=dt(te);return-.5*(1+Math.sin(ie))*jt};var wt=G(at);Z.angularTickLayout!==wt&&(W["angular-axis"].selectAll("."+tt._id+"tick").remove(),Z.angularTickLayout=wt);var Rt=lt?[1/0].concat(tt.tickvals||[]).map(function(te){return s.tickText(tt,te,!0,!1)}):s.calcTicks(tt);lt&&(Rt[0].text="∞",Rt[0].fontSize*=1.75);var Tt;if(nt.gridshape==="linear"?(Tt=Rt.map(dt),L.angleDelta(Tt[0],Tt[1])<0&&(Tt=Tt.slice().reverse())):Tt=null,Z.vangles=Tt,tt.type==="category"&&(Rt=Rt.filter(function(te){return L.isAngleInsideSector(dt(te),Z.sectorInRad)})),tt.visible){var Bt=tt.ticks==="inside"?-1:1,Gt=(tt.linewidth||1)/2;s.drawTicks(Q,tt,{vals:Rt,layer:W["angular-axis"],path:"M"+Bt*Gt+",0h"+Bt*tt.ticklen,transFn:Mt,crisp:!1}),s.drawGrid(Q,tt,{vals:Rt,layer:W["angular-grid"],path:Lt,transFn:L.noop,crisp:!1}),s.drawLabels(Q,tt,{vals:Rt,layer:W["angular-axis"],repositionOnUpdate:!0,transFn:gt,labelFns:Ct})}et(W["angular-line"].select("path"),at.showline,{d:Z.pathSubplot(),transform:v(K,H)}).attr("stroke-width",at.linewidth).call(p.stroke,at.linecolor)},N.updateFx=function(ot,nt){if(!this.gd._context.staticPlot){var Z=!this.isSmith;Z&&(this.updateAngularDrag(ot),this.updateRadialDrag(ot,nt,0),this.updateRadialDrag(ot,nt,1)),this.updateHoverAndMainDrag(ot)}},N.updateHoverAndMainDrag=function(ot){var nt=this,Z=nt.isSmith,Q=nt.gd,W=nt.layers,J=ot._zoomlayer,it=S.MINZOOM,K=S.OFFEDGE,H=nt.radius,at=nt.innerRadius,tt=nt.cx,lt=nt.cy,dt=nt.cxx,mt=nt.cyy,gt=nt.sectorInRad,Mt=nt.vangles,Lt=nt.radialAxis,zt=M.clampTiny,xt=M.findXYatLength,Ct=M.findEnclosingVertexAngles,wt=S.cornerHalfWidth,Rt=S.cornerLen/2,Tt,Bt,Gt=u.makeDragger(W,"path","maindrag",ot.dragmode===!1?"none":"crosshair");b.select(Gt).attr("d",nt.pathSubplot()).attr("transform",v(tt,lt)),Gt.onmousemove=function(me){h.hover(Q,me,nt.id),Q._fullLayout._lasthover=Gt,Q._fullLayout._hoversubplot=nt.id},Gt.onmouseout=function(me){Q._dragging||g.unhover(Q,me)};var te={element:Gt,gd:Q,subplot:nt.id,plotinfo:{id:nt.id,xaxis:nt.xaxis,yaxis:nt.yaxis},xaxes:[nt.xaxis],yaxes:[nt.yaxis]},Wt,jt,ie,ue,fe,pe,Te,Qt,Pt;function Ot(me,Se){return Math.sqrt(me*me+Se*Se)}function Nt(me,Se){return Ot(me-dt,Se-mt)}function Ht(me,Se){return Math.atan2(mt-Se,me-dt)}function St(me,Se){return[me*Math.cos(Se),me*Math.sin(-Se)]}function kt(me,Se){if(me===0)return nt.pathSector(2*wt);var je=Rt/me,vr=Se-je,he=Se+je,Ye=Math.max(0,Math.min(me,H)),Qe=Ye-wt,mr=Ye+wt;return"M"+St(Qe,vr)+"A"+[Qe,Qe]+" 0,0,0 "+St(Qe,he)+"L"+St(mr,he)+"A"+[mr,mr]+" 0,0,1 "+St(mr,vr)+"Z"}function Ft(me,Se,je){if(me===0)return nt.pathSector(2*wt);var vr=St(me,Se),he=St(me,je),Ye=zt((vr[0]+he[0])/2),Qe=zt((vr[1]+he[1])/2),mr,ir;if(Ye&&Qe){var ve=Qe/Ye,ne=-1/ve,ge=xt(wt,ve,Ye,Qe);mr=xt(Rt,ne,ge[0][0],ge[0][1]),ir=xt(Rt,ne,ge[1][0],ge[1][1])}else{var Ae,Re;Qe?(Ae=Rt,Re=wt):(Ae=wt,Re=Rt),mr=[[Ye-Ae,Qe-Re],[Ye+Ae,Qe-Re]],ir=[[Ye-Ae,Qe+Re],[Ye+Ae,Qe+Re]]}return"M"+mr.join("L")+"L"+ir.reverse().join("L")+"Z"}function At(){ie=null,ue=null,fe=nt.pathSubplot(),pe=!1;var me=Q._fullLayout[nt.id];Te=P(me.bgcolor).getLuminance(),Qt=u.makeZoombox(J,Te,tt,lt,fe),Qt.attr("fill-rule","evenodd"),Pt=u.makeCorners(J,tt,lt),d(Q)}function ft(me,Se){return Se=Math.max(Math.min(Se,H),at),me<K?me=0:H-me<K?me=H:Se<K?Se=0:H-Se<K&&(Se=H),Math.abs(Se-me)>it?(me<Se?(ie=me,ue=Se):(ie=Se,ue=me),!0):(ie=null,ue=null,!1)}function pt(me,Se){me=me||fe,Se=Se||"M0,0Z",Qt.attr("d",me),Pt.attr("d",Se),u.transitionZoombox(Qt,Pt,pe,Te),pe=!0;var je={};Be(je),Q.emit("plotly_relayouting",je)}function Dt(me,Se){me=me*Tt,Se=Se*Bt;var je=Wt+me,vr=jt+Se,he=Nt(Wt,jt),Ye=Math.min(Nt(je,vr),H),Qe=Ht(Wt,jt),mr,ir;ft(he,Ye)&&(mr=fe+nt.pathSector(ue),ie&&(mr+=nt.pathSector(ie)),ir=kt(ie,Qe)+kt(ue,Qe)),pt(mr,ir)}function Ut(me,Se,je,vr){var he=M.findIntersectionXY(je,vr,je,[me-dt,mt-Se]);return Ot(he[0],he[1])}function $t(me,Se){var je=Wt+me,vr=jt+Se,he=Ht(Wt,jt),Ye=Ht(je,vr),Qe=Ct(he,Mt),mr=Ct(Ye,Mt),ir=Ut(Wt,jt,Qe[0],Qe[1]),ve=Math.min(Ut(je,vr,mr[0],mr[1]),H),ne,ge;ft(ir,ve)&&(ne=fe+nt.pathSector(ue),ie&&(ne+=nt.pathSector(ie)),ge=[Ft(ie,Qe[0],Qe[1]),Ft(ue,Qe[0],Qe[1])].join(" ")),pt(ne,ge)}function re(){if(u.removeZoombox(Q),!(ie===null||ue===null)){var me={};Be(me),u.showDoubleClickNotifier(Q),o.call("_guiRelayout",Q,me)}}function Be(me){var Se=Lt._rl,je=(Se[1]-Se[0])/(1-at/H)/H,vr=[Se[0]+(ie-at)*je,Se[0]+(ue-at)*je];me[nt.id+".radialaxis.range"]=vr}function We(me,Se){var je=Q._fullLayout.clickmode;if(u.removeZoombox(Q),me===2){var vr={};for(var he in nt.viewInitial)vr[nt.id+"."+he]=nt.viewInitial[he];Q.emit("plotly_doubleclick",null),o.call("_guiRelayout",Q,vr)}je.indexOf("select")>-1&&me===1&&i(Se,Q,[nt.xaxis],[nt.yaxis],nt.id,te),je.indexOf("event")>-1&&h.click(Q,Se,nt.id)}te.prepFn=function(me,Se,je){var vr=Q._fullLayout.dragmode,he=Gt.getBoundingClientRect();Q._fullLayout._calcInverseTransform(Q);var Ye=Q._fullLayout._invTransform;Tt=Q._fullLayout._invScaleX,Bt=Q._fullLayout._invScaleY;var Qe=L.apply3DTransform(Ye)(Se-he.left,je-he.top);if(Wt=Qe[0],jt=Qe[1],Mt){var mr=M.findPolygonOffset(H,gt[0],gt[1],Mt);Wt+=dt+mr[0],jt+=mt+mr[1]}switch(vr){case"zoom":te.clickFn=We,Z||(Mt?te.moveFn=$t:te.moveFn=Dt,te.doneFn=re,At());break;case"select":case"lasso":c(me,Se,je,te,vr);break}},g.init(te)},N.updateRadialDrag=function(ot,nt,Z){var Q=this,W=Q.gd,J=Q.layers,it=Q.radius,K=Q.innerRadius,H=Q.cx,at=Q.cy,tt=Q.radialAxis,lt=S.radialDragBoxSize,dt=lt/2;if(!tt.visible)return;var mt=B(Q.radialAxisAngle),gt=tt._rl,Mt=gt[0],Lt=gt[1],zt=gt[Z],xt=.75*(gt[1]-gt[0])/(1-Q.getHole(nt))/it,Ct,wt,Rt;Z?(Ct=H+(it+dt)*Math.cos(mt),wt=at-(it+dt)*Math.sin(mt),Rt="radialdrag"):(Ct=H+(K-dt)*Math.cos(mt),wt=at-(K-dt)*Math.sin(mt),Rt="radialdrag-inner");var Tt=u.makeRectDragger(J,Rt,"crosshair",-dt,-dt,lt,lt),Bt={element:Tt,gd:W};ot.dragmode===!1&&(Bt.dragmode=!1),et(b.select(Tt),tt.visible&&K<it,{transform:v(Ct,wt)});var Gt,te,Wt;function jt(Te,Qt){if(Gt)Gt(Te,Qt);else{var Pt=[Te,-Qt],Ot=[Math.cos(mt),Math.sin(mt)],Nt=Math.abs(L.dot(Pt,Ot)/Math.sqrt(L.dot(Pt,Pt)));isNaN(Nt)||(Gt=Nt<.5?fe:pe)}var Ht={};ie(Ht),W.emit("plotly_relayouting",Ht)}function ie(Te){te!==null?Te[Q.id+".radialaxis.angle"]=te:Wt!==null&&(Te[Q.id+".radialaxis.range["+Z+"]"]=Wt)}function ue(){te!==null?o.call("_guiRelayout",W,Q.id+".radialaxis.angle",te):Wt!==null&&o.call("_guiRelayout",W,Q.id+".radialaxis.range["+Z+"]",Wt)}function fe(Te,Qt){if(Z!==0){var Pt=Ct+Te,Ot=wt+Qt;te=Math.atan2(at-Ot,Pt-H),Q.vangles&&(te=$(te,Q.vangles)),te=F(te);var Nt=v(H,at)+A(-te);J["radial-axis"].attr("transform",Nt),J["radial-line"].select("line").attr("transform",Nt);var Ht=Q.gd._fullLayout,St=Ht[Q.id];Q.updateRadialAxisTitle(Ht,St,te)}}function pe(Te,Qt){var Pt=L.dot([Te,-Qt],[Math.cos(mt),Math.sin(mt)]);if(Wt=zt-xt*Pt,xt>0!=(Z?Wt>Mt:Wt<Lt)){Wt=null;return}var Ot=W._fullLayout,Nt=Ot[Q.id];tt.range[Z]=Wt,tt._rl[Z]=Wt,Q.updateRadialAxis(Ot,Nt),Q.xaxis.setRange(),Q.xaxis.setScale(),Q.yaxis.setRange(),Q.yaxis.setScale();var Ht=!1;for(var St in Q.traceHash){var kt=Q.traceHash[St],Ft=L.filterVisible(kt),At=kt[0][0].trace._module;At.plot(W,Q,Ft,Nt),o.traceIs(St,"gl")&&Ft.length&&(Ht=!0)}Ht&&(w(W),C(W))}Bt.prepFn=function(){Gt=null,te=null,Wt=null,Bt.moveFn=jt,Bt.doneFn=ue,d(W)},Bt.clampFn=function(Te,Qt){return Math.sqrt(Te*Te+Qt*Qt)<S.MINDRAG&&(Te=0,Qt=0),[Te,Qt]},g.init(Bt)},N.updateAngularDrag=function(ot){var nt=this,Z=nt.gd,Q=nt.layers,W=nt.radius,J=nt.angularAxis,it=nt.cx,K=nt.cy,H=nt.cxx,at=nt.cyy,tt=S.angularDragBoxSize,lt=u.makeDragger(Q,"path","angulardrag",ot.dragmode===!1?"none":"move"),dt={element:lt,gd:Z};ot.dragmode===!1?dt.dragmode=!1:b.select(lt).attr("d",nt.pathAnnulus(W,W+tt)).attr("transform",v(it,K)).call(x,"move");function mt(Wt,jt){return Math.atan2(at+tt-jt,Wt-H-tt)}var gt=Q.frontplot.select(".scatterlayer").selectAll(".trace"),Mt=gt.selectAll(".point"),Lt=gt.selectAll(".textpoint"),zt,xt,Ct,wt,Rt,Tt;function Bt(Wt,jt){var ie=nt.gd._fullLayout,ue=ie[nt.id],fe=zt+Wt*ot._invScaleX,pe=xt+jt*ot._invScaleY,Te=mt(fe,pe),Qt=F(Te-Tt);if(wt=Ct+Qt,Q.frontplot.attr("transform",v(nt.xOffset2,nt.yOffset2)+A([-Qt,H,at])),nt.vangles){Rt=nt.radialAxisAngle+Qt;var Pt=v(it,K)+A(-Qt),Ot=v(it,K)+A(-Rt);Q.bg.attr("transform",Pt),Q["radial-grid"].attr("transform",Pt),Q["radial-axis"].attr("transform",Ot),Q["radial-line"].select("line").attr("transform",Ot),nt.updateRadialAxisTitle(ie,ue,Rt)}else nt.clipPaths.forTraces.select("path").attr("transform",v(H,at)+A(Qt));Mt.each(function(){var ft=b.select(this),pt=r.getTranslate(ft);ft.attr("transform",v(pt.x,pt.y)+A([Qt]))}),Lt.each(function(){var ft=b.select(this),pt=ft.select("text"),Dt=r.getTranslate(ft);ft.attr("transform",A([Qt,pt.attr("x"),pt.attr("y")])+v(Dt.x,Dt.y))}),J.rotation=L.modHalf(wt,360),nt.updateAngularAxis(ie,ue),nt._hasClipOnAxisFalse&&!L.isFullCircle(nt.sectorInRad)&&gt.call(r.hideOutsideRangePoints,nt);var Nt=!1;for(var Ht in nt.traceHash)if(o.traceIs(Ht,"gl")){var St=nt.traceHash[Ht],kt=L.filterVisible(St),Ft=St[0][0].trace._module;Ft.plot(Z,nt,kt,ue),kt.length&&(Nt=!0)}Nt&&(w(Z),C(Z));var At={};Gt(At),Z.emit("plotly_relayouting",At)}function Gt(Wt){Wt[nt.id+".angularaxis.rotation"]=wt,nt.vangles&&(Wt[nt.id+".radialaxis.angle"]=Rt)}function te(){Lt.select("text").attr("transform",null);var Wt={};Gt(Wt),o.call("_guiRelayout",Z,Wt)}dt.prepFn=function(Wt,jt,ie){var ue=ot[nt.id];Ct=ue.angularaxis.rotation;var fe=lt.getBoundingClientRect();zt=jt-fe.left,xt=ie-fe.top,Z._fullLayout._calcInverseTransform(Z);var pe=L.apply3DTransform(ot._invTransform)(zt,xt);zt=pe[0],xt=pe[1],Tt=mt(zt,xt),dt.moveFn=Bt,dt.doneFn=te,d(Z)},nt.vangles&&!L.isFullCircle(nt.sectorInRad)&&(dt.prepFn=L.noop,x(b.select(lt),null)),g.init(dt)},N.isPtInside=function(ot){if(this.isSmith)return!0;var nt=this.sectorInRad,Z=this.vangles,Q=this.angularAxis.c2g(ot.theta),W=this.radialAxis,J=W.c2l(ot.r),it=W._rl,K=Z?M.isPtInsidePolygon:L.isPtInsideSector;return K(J,Q,it,nt,Z)},N.pathArc=function(ot){var nt=this.sectorInRad,Z=this.vangles,Q=Z?M.pathPolygon:L.pathArc;return Q(ot,nt[0],nt[1],Z)},N.pathSector=function(ot){var nt=this.sectorInRad,Z=this.vangles,Q=Z?M.pathPolygon:L.pathSector;return Q(ot,nt[0],nt[1],Z)},N.pathAnnulus=function(ot,nt){var Z=this.sectorInRad,Q=this.vangles,W=Q?M.pathPolygonAnnulus:L.pathAnnulus;return W(ot,nt,Z[0],Z[1],Q)},N.pathSubplot=function(){var ot=this.innerRadius,nt=this.radius;return ot?this.pathAnnulus(ot,nt):this.pathSector(nt)},N.fillViewInitialKey=function(ot,nt){ot in this.viewInitial||(this.viewInitial[ot]=nt)};function G(ot){var nt=ot.ticks+String(ot.ticklen)+String(ot.showticklabels);return"side"in ot&&(nt+=ot.side),nt}function X(ot){var nt=ot[0],Z=ot[1],Q=Z-nt,W=z(nt,360),J=W+Q,it=Math.cos(B(W)),K=Math.sin(B(W)),H=Math.cos(B(J)),at=Math.sin(B(J)),tt,lt,dt,mt;return W<=90&&J>=90||W>90&&J>=450?mt=1:K<=0&&at<=0?mt=0:mt=Math.max(K,at),W<=180&&J>=180||W>180&&J>=540?tt=-1:it>=0&&H>=0?tt=0:tt=Math.min(it,H),W<=270&&J>=270||W>270&&J>=630?lt=-1:K>=0&&at>=0?lt=0:lt=Math.min(K,at),J>=360?dt=1:it<=0&&H<=0?dt=0:dt=Math.max(it,H),[tt,lt,dt,mt]}function $(ot,nt){var Z=function(W){return L.angleDist(ot,W)},Q=L.findIndexOfMin(nt,Z);return nt[Q]}function et(ot,nt,Z){return nt?(ot.attr("display",null),ot.attr(Z)):ot&&ot.attr("display","none"),ot}},57696:function(j,V,t){var b=t(3400),P=t(78344),o=b.deg2rad,L=b.rad2deg;j.exports=function(s,n,l){switch(P(s,l),s._id){case"x":case"radialaxis":A(s,n);break;case"angularaxis":r(s,n);break}};function A(e,s){var n=s._subplot;e.setGeometry=function(){var l=e._rl[0],f=e._rl[1],u=n.innerRadius,g=(n.radius-u)/(f-l),h=u/g,T=l>f?function(c){return c<=0}:function(c){return c>=0};e.c2g=function(c){var i=e.c2l(c)-l;return(T(i)?i:0)+h},e.g2c=function(c){return e.l2c(c+l-h)},e.g2p=function(c){return c*g},e.c2p=function(c){return e.g2p(e.c2g(c))}}}function v(e,s){return s==="degrees"?o(e):e}function p(e,s){return s==="degrees"?L(e):e}function r(e,s){var n=e.type;if(n==="linear"){var l=e.d2c,f=e.c2d;e.d2c=function(u,g){return v(l(u),g)},e.c2d=function(u,g){return f(p(u,g))}}e.makeCalcdata=function(u,g){var h=u[g],T=u._length,c,i,d=function(S){return e.d2c(S,u.thetaunit)};if(h)for(c=new Array(T),i=0;i<T;i++)c[i]=d(h[i]);else{var x=g+"0",w="d"+g,C=x in u?d(u[x]):0,y=u[w]?d(u[w]):(e.period||2*Math.PI)/T;for(c=new Array(T),i=0;i<T;i++)c[i]=C+i*y}return c},e.setGeometry=function(){var u=s.sector,g=u.map(o),h={clockwise:-1,counterclockwise:1}[e.direction],T=o(e.rotation),c=function(M){return h*M+T},i=function(M){return(M-T)/h},d,x,w,C;switch(n){case"linear":x=d=b.identity,C=o,w=L,e.range=b.isFullCircle(g)?[u[0],u[0]+360]:g.map(i).map(L);break;case"category":var y=e._categories.length,S=e.period?Math.max(e.period,y):y;S===0&&(S=1),x=C=function(M){return M*2*Math.PI/S},d=w=function(M){return M*S/Math.PI/2},e.range=[0,S];break}e.c2g=function(M){return c(x(M))},e.g2c=function(M){return d(i(M))},e.t2g=function(M){return c(C(M))},e.g2t=function(M){return w(i(M))}}}},55012:function(j){j.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},36416:function(j){function V(A){return A<0?-1:A>0?1:0}function t(A){var v=A[0],p=A[1];if(!isFinite(v)||!isFinite(p))return[1,0];var r=(v+1)*(v+1)+p*p;return[(v*v+p*p-1)/r,2*p/r]}function b(A,v){var p=v[0],r=v[1];return[p*A.radius+A.cx,-r*A.radius+A.cy]}function P(A,v){return v*A.radius}function o(A,v,p,r){var e=b(A,t([p,v])),s=e[0],n=e[1],l=b(A,t([r,v])),f=l[0],u=l[1];if(v===0)return["M"+s+","+n,"L"+f+","+u].join(" ");var g=P(A,1/Math.abs(v));return["M"+s+","+n,"A"+g+","+g+" 0 0,"+(v<0?1:0)+" "+f+","+u].join(" ")}function L(A,v,p,r){var e=P(A,1/(v+1)),s=b(A,t([v,p])),n=s[0],l=s[1],f=b(A,t([v,r])),u=f[0],g=f[1];if(V(p)!==V(r)){var h=b(A,t([v,0])),T=h[0],c=h[1];return["M"+n+","+l,"A"+e+","+e+" 0 0,"+(0<p?0:1)+" "+T+","+c,"A"+e+","+e+" 0 0,"+(r<0?0:1)+u+","+g].join(" ")}return["M"+n+","+l,"A"+e+","+e+" 0 0,"+(r<p?0:1)+" "+u+","+g].join(" ")}j.exports={smith:t,reactanceArc:o,resistanceArc:L,smithTransform:b}},47788:function(j,V,t){var b=t(84888).KY,P=t(3400).counterRegex,o=t(62400),L=t(55012),A=L.attr,v=L.name,p=P(v),r={};r[A]={valType:"subplotid",dflt:v,editType:"calc"};function e(n){for(var l=n._fullLayout,f=n.calcdata,u=l._subplots[v],g=0;g<u.length;g++){var h=u[g],T=b(f,v,h),c=l[h]._subplot;c||(c=o(n,h,!0),l[h]._subplot=c),c.plot(T,l,n._promises)}}function s(n,l,f,u){for(var g=u._subplots[v]||[],h=0;h<g.length;h++){var T=g[h],c=u[T]._subplot;if(!l[T]&&c){c.framework.remove();for(var i in c.clipPaths)c.clipPaths[i].remove()}}}j.exports={attr:A,name:v,idRoot:v,idRegex:p,attrRegex:p,attributes:r,layoutAttributes:t(6183),supplyLayoutDefaults:t(22836),plot:e,clean:s,toSVG:t(57952).toSVG}},6183:function(j,V,t){var b=t(22548),P=t(94724),o=t(86968).u,L=t(3400).extendFlat,A=t(67824).overrideAll,v=A({color:P.color,showline:L({},P.showline,{dflt:!0}),linecolor:P.linecolor,linewidth:P.linewidth,showgrid:L({},P.showgrid,{dflt:!0}),gridcolor:P.gridcolor,gridwidth:P.gridwidth,griddash:P.griddash},"plot","from-root"),p=A({ticklen:P.ticklen,tickwidth:L({},P.tickwidth,{dflt:2}),tickcolor:P.tickcolor,showticklabels:P.showticklabels,labelalias:P.labelalias,showtickprefix:P.showtickprefix,tickprefix:P.tickprefix,showticksuffix:P.showticksuffix,ticksuffix:P.ticksuffix,tickfont:P.tickfont,tickformat:P.tickformat,hoverformat:P.hoverformat,layer:P.layer},"plot","from-root"),r=L({visible:L({},P.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:L({},P.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},v,p),e=L({visible:L({},P.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:P.ticks,editType:"calc"},v,p);j.exports={domain:o({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:b.background},realaxis:r,imaginaryaxis:e,editType:"calc"}},22836:function(j,V,t){var b=t(3400),P=t(76308),o=t(31780),L=t(168),A=t(84888).op,v=t(42568),p=t(95936),r=t(42136),e=t(78344),s=t(6183),n=t(55012),l=n.axisNames,f=g(function(h){return b.isTypedArray(h)&&(h=Array.from(h)),h.slice().reverse().map(function(T){return-T}).concat([0]).concat(h)},String);function u(h,T,c,i){var d=c("bgcolor");i.bgColor=P.combine(d,i.paper_bgcolor);var x=A(i.fullData,n.name,i.id),w=i.layoutOut,C;function y(N,G){return c(C+"."+N,G)}for(var S=0;S<l.length;S++){C=l[S],b.isPlainObject(h[C])||(h[C]={});var M=h[C],a=o.newContainer(T,C);a._id=a._name=C,a._attr=i.id+"."+C,a._traceIndices=x.map(function(N){return N._expandedIndex});var E=y("visible");if(a.type="linear",e(a,w),v(M,a,y,a.type),E){var m=C==="realaxis";if(m&&y("side"),m)y("tickvals");else{var k=f(T.realaxis.tickvals||s.realaxis.tickvals.dflt);y("tickvals",k)}b.isTypedArray(a.tickvals)&&(a.tickvals=Array.from(a.tickvals));var I,O,z,B,F=i.font||{};E&&(I=y("color"),O=I===M.color?I:F.color,z=F.size,B=F.family),p(M,a,y,a.type,{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,noAng:!m,noExp:!0,font:{color:O,size:z,family:B}}),b.coerce2(h,T,s,C+".ticklen"),b.coerce2(h,T,s,C+".tickwidth"),b.coerce2(h,T,s,C+".tickcolor",T.color);var _=y("ticks");_||(delete T[C].ticklen,delete T[C].tickwidth,delete T[C].tickcolor),r(M,a,y,{dfltColor:I,bgColor:i.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:s[C]}),y("layer")}y("hoverformat"),delete a.type,a._input=M}}j.exports=function(T,c,i){L(T,c,i,{noUirevision:!0,type:n.name,attributes:s,handleDefaults:u,font:c.font,paper_bgcolor:c.paper_bgcolor,fullData:i,layoutOut:c})};function g(h,T){var c={};return function(i){var d=T?T(i):i;if(d in c)return c[d];var x=h(i);return c[d]=x,x}}},168:function(j,V,t){var b=t(3400),P=t(31780),o=t(86968).Q;j.exports=function(A,v,p,r){var e=r.type,s=r.attributes,n=r.handleDefaults,l=r.partition||"x",f=v._subplots[e],u=f.length,g=u&&f[0].replace(/\d+$/,""),h,T;function c(w,C){return b.coerce(h,T,s,w,C)}for(var i=0;i<u;i++){var d=f[i];A[d]?h=A[d]:h=A[d]={},T=P.newContainer(v,d,g),r.noUirevision||c("uirevision",v.uirevision);var x={};x[l]=[i/u,(i+1)/u],o(T,v,c,x),r.id=d,n(h,T,c,r)}}},21776:function(j,V,t){var b=t(26880);b.FORMAT_LINK,b.DATE_FORMAT_LINK;function P(o){var L=o.description?" "+o.description:"",A=o.keys||[];if(A.length>0){for(var v=[],p=0;p<A.length;p++)v[p]="`"+A[p]+"`";L=L+"Finally, the template string has access to ",A.length===1?L=L+"variable "+v[0]:L=L+"variables "+v.slice(0,-1).join(", ")+" and "+v.slice(-1)+"."}return L}V.Ks=function(o,L){o=o||{},L=L||{},P(L);var A={valType:"string",dflt:"",editType:o.editType||"none"};return o.arrayOk!==!1&&(A.arrayOk=!0),A},V.Gw=function(o,L){o=o||{},L=L||{},P(L);var A={valType:"string",dflt:"",editType:o.editType||"calc"};return o.arrayOk!==!1&&(A.arrayOk=!0),A},V.ye=function(o,L){o=o||{},L=L||{},o.newshape,P(L);var A={valType:"string",dflt:"",editType:o.editType||"arraydraw"};return A}},19352:function(j,V,t){var b=t(24696),P=t(84888).KY,o=t(3400).counterRegex,L="ternary";V.name=L;var A=V.attr="subplot";V.idRoot=L,V.idRegex=V.attrRegex=o(L);var v=V.attributes={};v[A]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=t(86379),V.supplyLayoutDefaults=t(38536),V.plot=function(r){for(var e=r._fullLayout,s=r.calcdata,n=e._subplots[L],l=0;l<n.length;l++){var f=n[l],u=P(s,L,f),g=e[f]._subplot;g||(g=new b({id:f,graphDiv:r,container:e._ternarylayer.node()},e),e[f]._subplot=g),g.plot(u,e,r._promises)}},V.clean=function(p,r,e,s){for(var n=s._subplots[L]||[],l=0;l<n.length;l++){var f=n[l],u=s[f]._subplot;!r[f]&&u&&(u.plotContainer.remove(),u.clipDef.remove(),u.clipDefRelative.remove(),u.layers["a-title"].remove(),u.layers["b-title"].remove(),u.layers["c-title"].remove())}}},86379:function(j,V,t){var b=t(22548),P=t(86968).u,o=t(94724),L=t(67824).overrideAll,A=t(92880).extendFlat,v={title:{text:o.title.text,font:o.title.font},color:o.color,tickmode:o.minor.tickmode,nticks:A({},o.nticks,{dflt:6,min:1}),tick0:o.tick0,dtick:o.dtick,tickvals:o.tickvals,ticktext:o.ticktext,ticks:o.ticks,ticklen:o.ticklen,tickwidth:o.tickwidth,tickcolor:o.tickcolor,ticklabelstep:o.ticklabelstep,showticklabels:o.showticklabels,labelalias:o.labelalias,showtickprefix:o.showtickprefix,tickprefix:o.tickprefix,showticksuffix:o.showticksuffix,ticksuffix:o.ticksuffix,showexponent:o.showexponent,exponentformat:o.exponentformat,minexponent:o.minexponent,separatethousands:o.separatethousands,tickfont:o.tickfont,tickangle:o.tickangle,tickformat:o.tickformat,tickformatstops:o.tickformatstops,hoverformat:o.hoverformat,showline:A({},o.showline,{dflt:!0}),linecolor:o.linecolor,linewidth:o.linewidth,showgrid:A({},o.showgrid,{dflt:!0}),gridcolor:o.gridcolor,gridwidth:o.gridwidth,griddash:o.griddash,layer:o.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:o._deprecated.title,titlefont:o._deprecated.titlefont}},p=j.exports=L({domain:P({name:"ternary"}),bgcolor:{valType:"color",dflt:b.background},sum:{valType:"number",dflt:1,min:0},aaxis:v,baxis:v,caxis:v},"plot","from-root");p.uirevision={valType:"any",editType:"none"},p.aaxis.uirevision=p.baxis.uirevision=p.caxis.uirevision={valType:"any",editType:"none"}},38536:function(j,V,t){var b=t(76308),P=t(31780),o=t(3400),L=t(168),A=t(95936),v=t(42568),p=t(25404),r=t(26332),e=t(42136),s=t(86379),n=["aaxis","baxis","caxis"];j.exports=function(g,h,T){L(g,h,T,{type:"ternary",attributes:s,handleDefaults:l,font:h.font,paper_bgcolor:h.paper_bgcolor})};function l(u,g,h,T){var c=h("bgcolor"),i=h("sum");T.bgColor=b.combine(c,T.paper_bgcolor);for(var d,x,w,C=0;C<n.length;C++)d=n[C],x=u[d]||{},w=P.newContainer(g,d),w._name=d,f(x,w,T,g);var y=g.aaxis,S=g.baxis,M=g.caxis;y.min+S.min+M.min>=i&&(y.min=0,S.min=0,M.min=0,u.aaxis&&delete u.aaxis.min,u.baxis&&delete u.baxis.min,u.caxis&&delete u.caxis.min)}function f(u,g,h,T){var c=s[g._name];function i(a,E){return o.coerce(u,g,c,a,E)}i("uirevision",T.uirevision),g.type="linear";var d=i("color"),x=d!==c.color.dflt?d:h.font.color,w=g._name,C=w.charAt(0).toUpperCase(),y="Component "+C,S=i("title.text",y);g._hovertitle=S===y?S:C,o.coerceFont(i,"title.font",h.font,{overrideDflt:{size:o.bigFont(h.font.size),color:x}}),i("min"),r(u,g,i,"linear"),v(u,g,i,"linear"),A(u,g,i,"linear",{noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0}),p(u,g,i,{outerTicks:!0});var M=i("showticklabels");M&&(o.coerceFont(i,"tickfont",h.font,{overrideDflt:{color:x}}),i("tickangle"),i("tickformat")),e(u,g,i,{dfltColor:d,bgColor:h.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c}),i("hoverformat"),i("layer")}},24696:function(j,V,t){var b=t(33428),P=t(49760),o=t(24040),L=t(3400),A=L.strTranslate,v=L._,p=t(76308),r=t(43616),e=t(78344),s=t(92880).extendFlat,n=t(7316),l=t(54460),f=t(86476),u=t(93024),g=t(72760),h=g.freeMode,T=g.rectMode,c=t(81668),i=t(22676).prepSelect,d=t(22676).selectOnClick,x=t(22676).clearOutline,w=t(22676).clearSelectionsCache,C=t(33816);function y(F,_){this.id=F.id,this.graphDiv=F.graphDiv,this.init(_),this.makeFramework(_),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}j.exports=y;var S=y.prototype;S.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},S.plot=function(F,_){var N=this,G=_[N.id],X=_._size;N._hasClipOnAxisFalse=!1;for(var $=0;$<F.length;$++){var et=F[$][0].trace;if(et.cliponaxis===!1){N._hasClipOnAxisFalse=!0;break}}N.updateLayers(G),N.adjustLayout(G,X),n.generalUpdatePerTraceModule(N.graphDiv,N,F,G),N.layers.plotbg.select("path").call(p.fill,G.bgcolor)},S.makeFramework=function(F){var _=this,N=_.graphDiv,G=F[_.id],X=_.clipId="clip"+_.layoutId+_.id,$=_.clipIdRelative="clip-relative"+_.layoutId+_.id;_.clipDef=L.ensureSingleById(F._clips,"clipPath",X,function(et){et.append("path").attr("d","M0,0Z")}),_.clipDefRelative=L.ensureSingleById(F._clips,"clipPath",$,function(et){et.append("path").attr("d","M0,0Z")}),_.plotContainer=L.ensureSingle(_.container,"g",_.id),_.updateLayers(G),r.setClipUrl(_.layers.backplot,X,N),r.setClipUrl(_.layers.grids,X,N)},S.updateLayers=function(F){var _=this,N=_.layers,G=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&G.push("aaxis","aline"),F.baxis.layer==="below traces"&&G.push("baxis","bline"),F.caxis.layer==="below traces"&&G.push("caxis","cline"),G.push("frontplot"),F.aaxis.layer==="above traces"&&G.push("aaxis","aline"),F.baxis.layer==="above traces"&&G.push("baxis","bline"),F.caxis.layer==="above traces"&&G.push("caxis","cline");var X=_.plotContainer.selectAll("g.toplevel").data(G,String),$=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function(et){return"toplevel "+et}).each(function(et){var ot=b.select(this);N[et]=ot,et==="frontplot"?ot.append("g").classed("scatterlayer",!0):et==="backplot"?ot.append("g").classed("maplayer",!0):et==="plotbg"?ot.append("path").attr("d","M0,0Z"):et==="aline"||et==="bline"||et==="cline"?ot.append("path"):et==="grids"&&$.forEach(function(nt){N[nt]=ot.append("g").classed("grid "+nt,!0)})}),X.order()};var M=Math.sqrt(4/3);S.adjustLayout=function(F,_){var N=this,G=F.domain,X=(G.x[0]+G.x[1])/2,$=(G.y[0]+G.y[1])/2,et=G.x[1]-G.x[0],ot=G.y[1]-G.y[0],nt=et*_.w,Z=ot*_.h,Q=F.sum,W=F.aaxis.min,J=F.baxis.min,it=F.caxis.min,K,H,at,tt,lt,dt;nt>M*Z?(tt=Z,at=tt*M):(at=nt,tt=at/M),lt=et*at/nt,dt=ot*tt/Z,K=_.l+_.w*X-at/2,H=_.t+_.h*(1-$)-tt/2,N.x0=K,N.y0=H,N.w=at,N.h=tt,N.sum=Q,N.xaxis={type:"linear",range:[W+2*it-Q,Q-W-2*J],domain:[X-lt/2,X+lt/2],_id:"x"},e(N.xaxis,N.graphDiv._fullLayout),N.xaxis.setScale(),N.xaxis.isPtWithinRange=function(Bt){return Bt.a>=N.aaxis.range[0]&&Bt.a<=N.aaxis.range[1]&&Bt.b>=N.baxis.range[1]&&Bt.b<=N.baxis.range[0]&&Bt.c>=N.caxis.range[1]&&Bt.c<=N.caxis.range[0]},N.yaxis={type:"linear",range:[W,Q-J-it],domain:[$-dt/2,$+dt/2],_id:"y"},e(N.yaxis,N.graphDiv._fullLayout),N.yaxis.setScale(),N.yaxis.isPtWithinRange=function(){return!0};var mt=N.yaxis.domain[0],gt=N.aaxis=s({},F.aaxis,{range:[W,Q-J-it],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[mt,mt+dt*M],anchor:"free",position:0,_id:"y",_length:at});e(gt,N.graphDiv._fullLayout),gt.setScale();var Mt=N.baxis=s({},F.baxis,{range:[Q-W-it,J],side:"bottom",domain:N.xaxis.domain,anchor:"free",position:0,_id:"x",_length:at});e(Mt,N.graphDiv._fullLayout),Mt.setScale();var Lt=N.caxis=s({},F.caxis,{range:[Q-W-J,it],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[mt,mt+dt*M],anchor:"free",position:0,_id:"y",_length:at});e(Lt,N.graphDiv._fullLayout),Lt.setScale();var zt="M"+K+","+(H+tt)+"h"+at+"l-"+at/2+",-"+tt+"Z";N.clipDef.select("path").attr("d",zt),N.layers.plotbg.select("path").attr("d",zt);var xt="M0,"+tt+"h"+at+"l-"+at/2+",-"+tt+"Z";N.clipDefRelative.select("path").attr("d",xt);var Ct=A(K,H);N.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ct),N.clipDefRelative.select("path").attr("transform",null);var wt=A(K-Mt._offset,H+tt);N.layers.baxis.attr("transform",wt),N.layers.bgrid.attr("transform",wt);var Rt=A(K+at/2,H)+"rotate(30)"+A(0,-gt._offset);N.layers.aaxis.attr("transform",Rt),N.layers.agrid.attr("transform",Rt);var Tt=A(K+at/2,H)+"rotate(-30)"+A(0,-Lt._offset);N.layers.caxis.attr("transform",Tt),N.layers.cgrid.attr("transform",Tt),N.drawAxes(!0),N.layers.aline.select("path").attr("d",gt.showline?"M"+K+","+(H+tt)+"l"+at/2+",-"+tt:"M0,0").call(p.stroke,gt.linecolor||"#000").style("stroke-width",(gt.linewidth||0)+"px"),N.layers.bline.select("path").attr("d",Mt.showline?"M"+K+","+(H+tt)+"h"+at:"M0,0").call(p.stroke,Mt.linecolor||"#000").style("stroke-width",(Mt.linewidth||0)+"px"),N.layers.cline.select("path").attr("d",Lt.showline?"M"+(K+at/2)+","+H+"l"+at/2+","+tt:"M0,0").call(p.stroke,Lt.linecolor||"#000").style("stroke-width",(Lt.linewidth||0)+"px"),N.graphDiv._context.staticPlot||N.initInteractions(),r.setClipUrl(N.layers.frontplot,N._hasClipOnAxisFalse?null:N.clipId,N.graphDiv)},S.drawAxes=function(F){var _=this,N=_.graphDiv,G=_.id.substr(7)+"title",X=_.layers,$=_.aaxis,et=_.baxis,ot=_.caxis;if(_.drawAx($),_.drawAx(et),_.drawAx(ot),F){var nt=Math.max($.showticklabels?$.tickfont.size/2:0,(ot.showticklabels?ot.tickfont.size*.75:0)+(ot.ticks==="outside"?ot.ticklen*.87:0)),Z=(et.showticklabels?et.tickfont.size:0)+(et.ticks==="outside"?et.ticklen:0)+3;X["a-title"]=c.draw(N,"a"+G,{propContainer:$,propName:_.id+".aaxis.title",placeholder:v(N,"Click to enter Component A title"),attributes:{x:_.x0+_.w/2,y:_.y0-$.title.font.size/3-nt,"text-anchor":"middle"}}),X["b-title"]=c.draw(N,"b"+G,{propContainer:et,propName:_.id+".baxis.title",placeholder:v(N,"Click to enter Component B title"),attributes:{x:_.x0-Z,y:_.y0+_.h+et.title.font.size*.83+Z,"text-anchor":"middle"}}),X["c-title"]=c.draw(N,"c"+G,{propContainer:ot,propName:_.id+".caxis.title",placeholder:v(N,"Click to enter Component C title"),attributes:{x:_.x0+_.w+Z,y:_.y0+_.h+ot.title.font.size*.83+Z,"text-anchor":"middle"}})}},S.drawAx=function(F){var _=this,N=_.graphDiv,G=F._name,X=G.charAt(0),$=F._id,et=_.layers[G],ot=30,nt=X+"tickLayout",Z=a(F);_[nt]!==Z&&(et.selectAll("."+$+"tick").remove(),_[nt]=Z),F.setScale();var Q=l.calcTicks(F),W=l.clipEnds(F,Q),J=l.makeTransTickFn(F),it=l.getTickSigns(F)[2],K=L.deg2rad(ot),H=it*(F.linewidth||1)/2,at=it*F.ticklen,tt=_.w,lt=_.h,dt=X==="b"?"M0,"+H+"l"+Math.sin(K)*at+","+Math.cos(K)*at:"M"+H+",0l"+Math.cos(K)*at+","+-Math.sin(K)*at,mt={a:"M0,0l"+lt+",-"+tt/2,b:"M0,0l-"+tt/2+",-"+lt,c:"M0,0l-"+lt+","+tt/2}[X];l.drawTicks(N,F,{vals:F.ticks==="inside"?W:Q,layer:et,path:dt,transFn:J,crisp:!1}),l.drawGrid(N,F,{vals:W,layer:_.layers[X+"grid"],path:mt,transFn:J,crisp:!1}),l.drawLabels(N,F,{vals:Q,layer:et,transFn:J,labelFns:l.makeLabelFns(F,0,ot)})};function a(F){return F.ticks+String(F.ticklen)+String(F.showticklabels)}var E=C.MINZOOM/2+.87,m="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",k="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",I="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",O="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",z=!0;S.clearOutline=function(){w(this.dragOptions),x(this.dragOptions.gd)},S.initInteractions=function(){var F=this,_=F.layers.plotbg.select("path").node(),N=F.graphDiv,G=N._fullLayout._zoomlayer,X,$;this.dragOptions={element:_,gd:N,plotinfo:{id:F.id,domain:N._fullLayout[F.id].domain,xaxis:F.xaxis,yaxis:F.yaxis},subplot:F.id,prepFn:function(wt,Rt,Tt){F.dragOptions.xaxes=[F.xaxis],F.dragOptions.yaxes=[F.yaxis],X=N._fullLayout._invScaleX,$=N._fullLayout._invScaleY;var Bt=F.dragOptions.dragmode=N._fullLayout.dragmode;h(Bt)?F.dragOptions.minDrag=1:F.dragOptions.minDrag=void 0,Bt==="zoom"?(F.dragOptions.moveFn=Mt,F.dragOptions.clickFn=tt,F.dragOptions.doneFn=Lt,lt(wt,Rt,Tt)):Bt==="pan"?(F.dragOptions.moveFn=xt,F.dragOptions.clickFn=tt,F.dragOptions.doneFn=Ct,zt(),F.clearOutline(N)):(T(Bt)||h(Bt))&&i(wt,Rt,Tt,F.dragOptions,Bt)}};var et,ot,nt,Z,Q,W,J,it,K,H;function at(wt){var Rt={};return Rt[F.id+".aaxis.min"]=wt.a,Rt[F.id+".baxis.min"]=wt.b,Rt[F.id+".caxis.min"]=wt.c,Rt}function tt(wt,Rt){var Tt=N._fullLayout.clickmode;B(N),wt===2&&(N.emit("plotly_doubleclick",null),o.call("_guiRelayout",N,at({a:0,b:0,c:0}))),Tt.indexOf("select")>-1&&wt===1&&d(Rt,N,[F.xaxis],[F.yaxis],F.id,F.dragOptions),Tt.indexOf("event")>-1&&u.click(N,Rt,F.id)}function lt(wt,Rt,Tt){var Bt=_.getBoundingClientRect();et=Rt-Bt.left,ot=Tt-Bt.top,N._fullLayout._calcInverseTransform(N);var Gt=N._fullLayout._invTransform,te=L.apply3DTransform(Gt)(et,ot);et=te[0],ot=te[1],nt={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},Q=nt,Z=F.aaxis.range[1]-nt.a,W=P(F.graphDiv._fullLayout[F.id].bgcolor).getLuminance(),J="M0,"+F.h+"L"+F.w/2+", 0L"+F.w+","+F.h+"Z",it=!1,K=G.append("path").attr("class","zoombox").attr("transform",A(F.x0,F.y0)).style({fill:W>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",J),H=G.append("path").attr("class","zoombox-corners").attr("transform",A(F.x0,F.y0)).style({fill:p.background,stroke:p.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),F.clearOutline(N)}function dt(wt,Rt){return 1-Rt/F.h}function mt(wt,Rt){return 1-(wt+(F.h-Rt)/Math.sqrt(3))/F.w}function gt(wt,Rt){return(wt-(F.h-Rt)/Math.sqrt(3))/F.w}function Mt(wt,Rt){var Tt=et+wt*X,Bt=ot+Rt*$,Gt=Math.max(0,Math.min(1,dt(et,ot),dt(Tt,Bt))),te=Math.max(0,Math.min(1,mt(et,ot),mt(Tt,Bt))),Wt=Math.max(0,Math.min(1,gt(et,ot),gt(Tt,Bt))),jt=(Gt/2+Wt)*F.w,ie=(1-Gt/2-te)*F.w,ue=(jt+ie)/2,fe=ie-jt,pe=(1-Gt)*F.h,Te=pe-fe/M;fe<C.MINZOOM?(Q=nt,K.attr("d",J),H.attr("d","M0,0Z")):(Q={a:nt.a+Gt*Z,b:nt.b+te*Z,c:nt.c+Wt*Z},K.attr("d",J+"M"+jt+","+pe+"H"+ie+"L"+ue+","+Te+"L"+jt+","+pe+"Z"),H.attr("d","M"+et+","+ot+O+"M"+jt+","+pe+m+"M"+ie+","+pe+k+"M"+ue+","+Te+I)),it||(K.transition().style("fill",W>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),H.transition().style("opacity",1).duration(200),it=!0),N.emit("plotly_relayouting",at(Q))}function Lt(){B(N),Q!==nt&&(o.call("_guiRelayout",N,at(Q)),z&&N.data&&N._context.showTips&&(L.notifier(v(N,"Double-click to zoom back out"),"long"),z=!1))}function zt(){nt={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},Q=nt}function xt(wt,Rt){var Tt=wt/F.xaxis._m,Bt=Rt/F.yaxis._m;Q={a:nt.a-Bt,b:nt.b+(Tt+Bt)/2,c:nt.c-(Tt-Bt)/2};var Gt=[Q.a,Q.b,Q.c].sort(L.sorterAsc),te={a:Gt.indexOf(Q.a),b:Gt.indexOf(Q.b),c:Gt.indexOf(Q.c)};Gt[0]<0&&(Gt[1]+Gt[0]/2<0?(Gt[2]+=Gt[0]+Gt[1],Gt[0]=Gt[1]=0):(Gt[2]+=Gt[0]/2,Gt[1]+=Gt[0]/2,Gt[0]=0),Q={a:Gt[te.a],b:Gt[te.b],c:Gt[te.c]},Rt=(nt.a-Q.a)*F.yaxis._m,wt=(nt.c-Q.c-nt.b+Q.b)*F.xaxis._m);var Wt=A(F.x0+wt,F.y0+Rt);F.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Wt);var jt=A(-wt,-Rt);F.clipDefRelative.select("path").attr("transform",jt),F.aaxis.range=[Q.a,F.sum-Q.b-Q.c],F.baxis.range=[F.sum-Q.a-Q.c,Q.b],F.caxis.range=[F.sum-Q.a-Q.b,Q.c],F.drawAxes(!1),F._hasClipOnAxisFalse&&F.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,F),N.emit("plotly_relayouting",at(Q))}function Ct(){o.call("_guiRelayout",N,at(Q))}_.onmousemove=function(wt){u.hover(N,wt,F.id),N._fullLayout._lasthover=_,N._fullLayout._hoversubplot=F.id},_.onmouseout=function(wt){N._dragging||f.unhover(N,wt)},f.init(this.dragOptions)};function B(F){b.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},24040:function(j,V,t){var b=t(24248),P=t(16628),o=t(52416),L=t(63620),A=t(52200).addStyleRule,v=t(92880),p=t(45464),r=t(64859),e=v.extendFlat,s=v.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(w){if(V.collectableSubplotTypes=null,w)w&&!Array.isArray(w)&&(w=[w]);else throw new Error("No argument passed to Plotly.register.");for(var C=0;C<w.length;C++){var y=w[C];if(!y)throw new Error("Invalid module was attempted to be registered!");switch(y.moduleType){case"trace":n(y);break;case"transform":u(y);break;case"component":f(y);break;case"locale":g(y);break;case"apiMethod":var S=y.name;V.apiMethodRegistry[S]=y.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(x){var w=V.modules[d(x)];return w?w._module:!1},V.traceIs=function(x,w){if(x=d(x),x==="various")return!1;var C=V.modules[x];return C||(x&&b.log("Unrecognized trace type "+x+"."),C=V.modules[p.type.dflt]),!!C.categories[w]},V.getTransformIndices=function(x,w){for(var C=[],y=x.transforms||[],S=0;S<y.length;S++)y[S].type===w&&C.push(S);return C},V.hasTransform=function(x,w){for(var C=x.transforms||[],y=0;y<C.length;y++)if(C[y].type===w)return!0;return!1},V.getComponentMethod=function(x,w){var C=V.componentsRegistry[x];return C&&C[w]||P},V.call=function(){var x=arguments[0],w=[].slice.call(arguments,1);return V.apiMethodRegistry[x].apply(null,w)};function n(x){var w=x.name,C=x.categories,y=x.meta;if(V.modules[w]){b.log("Type "+w+" already registered");return}V.subplotsRegistry[x.basePlotModule.name]||l(x.basePlotModule);for(var S={},M=0;M<C.length;M++)S[C[M]]=!0,V.allCategories[C[M]]=!0;V.modules[w]={_module:x,categories:S},y&&Object.keys(y).length&&(V.modules[w].meta=y),V.allTypes.push(w);for(var a in V.componentsRegistry)T(a,w);x.layoutAttributes&&e(V.traceLayoutAttributes,x.layoutAttributes);var E=x.basePlotModule,m=E.name;if(m==="mapbox"){var k=E.constants.styleRules;for(var I in k)A(".js-plotly-plot .plotly .mapboxgl-"+I,k[I])}(m==="geo"||m==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function l(x){var w=x.name;if(V.subplotsRegistry[w]){b.log("Plot type "+w+" already registered.");return}h(x),V.subplotsRegistry[w]=x;for(var C in V.componentsRegistry)i(C,x.name)}function f(x){if(typeof x.name!="string")throw new Error("Component module *name* must be a string.");var w=x.name;V.componentsRegistry[w]=x,x.layoutAttributes&&(x.layoutAttributes._isLinkedToArray&&o(V.layoutArrayContainers,w),h(x));for(var C in V.modules)T(w,C);for(var y in V.subplotsRegistry)i(w,y);for(var S in V.transformsRegistry)c(w,S);x.schema&&x.schema.layout&&s(r,x.schema.layout)}function u(x){if(typeof x.name!="string")throw new Error("Transform module *name* must be a string.");var w="Transform module "+x.name,C=typeof x.transform=="function",y=typeof x.calcTransform=="function";if(!C&&!y)throw new Error(w+" is missing a *transform* or *calcTransform* method.");C&&y&&b.log([w+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),L(x.attributes)||b.log(w+" registered without an *attributes* object."),typeof x.supplyDefaults!="function"&&b.log(w+" registered without a *supplyDefaults* method."),V.transformsRegistry[x.name]=x;for(var S in V.componentsRegistry)c(S,x.name)}function g(x){var w=x.name,C=w.split("-")[0],y=x.dictionary,S=x.format,M=y&&Object.keys(y).length,a=S&&Object.keys(S).length,E=V.localeRegistry,m=E[w];if(m||(E[w]=m={}),C!==w){var k=E[C];k||(E[C]=k={}),M&&k.dictionary===m.dictionary&&(k.dictionary=y),a&&k.format===m.format&&(k.format=S)}M&&(m.dictionary=y),a&&(m.format=S)}function h(x){if(x.layoutAttributes){var w=x.layoutAttributes._arrayAttrRegexps;if(w)for(var C=0;C<w.length;C++)o(V.layoutArrayRegexes,w[C])}}function T(x,w){var C=V.componentsRegistry[x].schema;if(!(!C||!C.traces)){var y=C.traces[w];y&&s(V.modules[w]._module.attributes,y)}}function c(x,w){var C=V.componentsRegistry[x].schema;if(!(!C||!C.transforms)){var y=C.transforms[w];y&&s(V.transformsRegistry[w].attributes,y)}}function i(x,w){var C=V.componentsRegistry[x].schema;if(!(!C||!C.subplots)){var y=V.subplotsRegistry[w],S=y.layoutAttributes,M=y.attr==="subplot"?y.name:y.attr;Array.isArray(M)&&(M=M[0]);var a=C.subplots[M];S&&a&&s(S,a)}}function d(x){return typeof x=="object"&&(x=x.type),x}},91536:function(j,V,t){var b=t(24040),P=t(3400),o=P.extendFlat,L=P.extendDeep;function A(p){var r;switch(p){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function v(p){var r=["xaxis","yaxis","zaxis"];return r.indexOf(p.slice(0,5))>-1}j.exports=function(r,e){var s,n=r.data,l=r.layout,f=L([],n),u=L({},l,A(e.tileClass)),g=r._context||{};if(e.width&&(u.width=e.width),e.height&&(u.height=e.height),e.tileClass==="thumbnail"||e.tileClass==="themes__thumb"){u.annotations=[];var h=Object.keys(u);for(s=0;s<h.length;s++)v(h[s])&&(u[h[s]].title={text:""});for(s=0;s<f.length;s++){var T=f[s];T.showscale=!1,T.marker&&(T.marker.showscale=!1),b.traceIs(T,"pie-like")&&(T.textposition="none")}}if(Array.isArray(e.annotations))for(s=0;s<e.annotations.length;s++)u.annotations.push(e.annotations[s]);var c=Object.keys(u).filter(function(C){return C.match(/^scene\d*$/)});if(c.length){var i={};for(e.tileClass==="thumbnail"&&(i={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),s=0;s<c.length;s++){var d=u[c[s]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),o(d.xaxis,i),o(d.yaxis,i),o(d.zaxis,i),d._scene=null}}var x=document.createElement("div");e.tileClass&&(x.className=e.tileClass);var w={gd:x,td:x,layout:u,data:f,config:{staticPlot:e.staticPlot===void 0?!0:e.staticPlot,plotGlPixelRatio:e.plotGlPixelRatio===void 0?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:g.mapboxAccessToken}};return e.setBackground!=="transparent"&&(w.config.setBackground=e.setBackground||"opaque"),w.gd.defaultLayout=A(e.tileClass),w}},39792:function(j,V,t){var b=t(3400),P=t(67024),o=t(48616),L=t(81792);function A(v,p){var r;return b.isPlainObject(v)||(r=b.getGraphDiv(v)),p=p||{},p.format=p.format||"png",p.width=p.width||null,p.height=p.height||null,p.imageDataOnly=!0,new Promise(function(e,s){r&&r._snapshotInProgress&&s(new Error("Snapshotting already in progress.")),b.isIE()&&p.format!=="svg"&&s(new Error(L.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var n=P(v,p),l=p.filename||v.fn||"newplot";l+="."+p.format.replace("-","."),n.then(function(f){return r&&(r._snapshotInProgress=!1),o(f,l,p.format)}).then(function(f){e(f)}).catch(function(f){r&&(r._snapshotInProgress=!1),s(f)})})}j.exports=A},48616:function(j,V,t){var b=t(3400),P=t(81792);function o(L,A,v){var p=document.createElement("a"),r="download"in p,e=new Promise(function(s,n){var l,f;if(b.isIE())return l=P.createBlob(L,"svg"),window.navigator.msSaveBlob(l,A),l=null,s(A);if(r)return l=P.createBlob(L,v),f=P.createObjectURL(l),p.href=f,p.download=A,document.body.appendChild(p),p.click(),document.body.removeChild(p),P.revokeObjectURL(f),l=null,s(A);if(b.isSafari()){var u=v==="svg"?",":";base64,";return P.octetStream(u+encodeURIComponent(L)),s(A)}n(new Error("download error"))});return e}j.exports=o},81792:function(j,V,t){var b=t(24040);V.getDelay=function(L){return L._has&&(L._has("gl3d")||L._has("gl2d")||L._has("mapbox"))?500:0},V.getRedrawFunc=function(L){return function(){b.getComponentMethod("colorbar","draw")(L)}},V.encodeSVG=function(L){return"data:image/svg+xml,"+encodeURIComponent(L)},V.encodeJSON=function(L){return"data:application/json,"+encodeURIComponent(L)};var P=window.URL||window.webkitURL;V.createObjectURL=function(L){return P.createObjectURL(L)},V.revokeObjectURL=function(L){return P.revokeObjectURL(L)},V.createBlob=function(L,A){if(A==="svg")return new window.Blob([L],{type:"image/svg+xml;charset=utf-8"});if(A==="full-json")return new window.Blob([L],{type:"application/json;charset=utf-8"});var v=o(window.atob(L));return new window.Blob([v],{type:"image/"+A})},V.octetStream=function(L){document.location.href="data:application/octet-stream"+L};function o(L){for(var A=L.length,v=new ArrayBuffer(A),p=new Uint8Array(v),r=0;r<A;r++)p[r]=L.charCodeAt(r);return v}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},78904:function(j,V,t){var b=t(81792),P={getDelay:b.getDelay,getRedrawFunc:b.getRedrawFunc,clone:t(91536),toSVG:t(37164),svgToImg:t(63268),toImage:t(61808),downloadImage:t(39792)};j.exports=P},63268:function(j,V,t){var b=t(3400),P=t(61252).EventEmitter,o=t(81792);function L(A){var v=A.emitter||new P,p=new Promise(function(r,e){var s=window.Image,n=A.svg,l=A.format||"png";if(b.isIE()&&l!=="svg"){var f=new Error(o.MSG_IE_BAD_FORMAT);return e(f),A.promise?p:v.emit("error",f)}var u=A.canvas,g=A.scale||1,h=A.width||300,T=A.height||150,c=g*h,i=g*T,d=u.getContext("2d",{willReadFrequently:!0}),x=new s,w,C;l==="svg"||b.isSafari()?C=o.encodeSVG(n):(w=o.createBlob(n,"svg"),C=o.createObjectURL(w)),u.width=c,u.height=i,x.onload=function(){var y;switch(w=null,o.revokeObjectURL(C),l!=="svg"&&d.drawImage(x,0,0,c,i),l){case"jpeg":y=u.toDataURL("image/jpeg");break;case"png":y=u.toDataURL("image/png");break;case"webp":y=u.toDataURL("image/webp");break;case"svg":y=C;break;default:var S="Image format is not jpeg, png, svg or webp.";if(e(new Error(S)),!A.promise)return v.emit("error",S)}r(y),A.promise||v.emit("success",y)},x.onerror=function(y){if(w=null,o.revokeObjectURL(C),e(y),!A.promise)return v.emit("error",y)},x.src=C});return A.promise?p:v}j.exports=L},61808:function(j,V,t){var b=t(61252).EventEmitter,P=t(24040),o=t(3400),L=t(81792),A=t(91536),v=t(37164),p=t(63268);function r(e,s){var n=new b,l=A(e,{format:"png"}),f=l.gd;f.style.position="absolute",f.style.left="-5000px",document.body.appendChild(f);function u(){var h=L.getDelay(f._fullLayout);setTimeout(function(){var T=v(f),c=document.createElement("canvas");c.id=o.randstr(),n=p({format:s.format,width:f._fullLayout.width,height:f._fullLayout.height,canvas:c,emitter:n,svg:T}),n.clean=function(){f&&document.body.removeChild(f)}},h)}var g=L.getRedrawFunc(f);return P.call("_doPlot",f,l.data,l.layout,l.config).then(g).then(u).catch(function(h){n.emit("error",h)}),n}j.exports=r},37164:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(76308),A=t(9616),v=/"/g,p="TOBESTRIPPED",r=new RegExp('("'+p+")|("+p+'")',"g");function e(n){var l=b.select("body").append("div").style({display:"none"}).html(""),f=n.replace(/(&[^;]*;)/gi,function(u){return u==="&lt;"?"&#60;":u==="&rt;"?"&#62;":u.indexOf("<")!==-1||u.indexOf(">")!==-1?"":l.html(u).text()});return l.remove(),f}function s(n){return n.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}j.exports=function(l,f,u){var g=l._fullLayout,h=g._paper,T=g._toppaper,c=g.width,i=g.height,d;h.insert("rect",":first-child").call(o.setRect,0,0,c,i).call(L.fill,g.paper_bgcolor);var x=g._basePlotModules||[];for(d=0;d<x.length;d++){var w=x[d];w.toSVG&&w.toSVG(l)}if(T){var C=T.node().childNodes,y=Array.prototype.slice.call(C);for(d=0;d<y.length;d++){var S=y[d];S.childNodes.length&&h.node().appendChild(S)}}g._draggers&&g._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var a=b.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){a.remove();return}else a.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&a.style("font-family",E.replace(v,p));var m=this.style.fontWeight;m&&(m==="normal"||m==="400")&&a.style("font-weight",void 0);var k=this.style.fontStyle;k&&k==="normal"&&a.style("font-style",void 0);var I=this.style.fontVariant;I&&I==="normal"&&a.style("font-variant",void 0)}),h.selectAll(".gradient_filled,.pattern_filled").each(function(){var a=b.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&a.style("fill",E.replace(v,p));var m=this.style.stroke;m&&m.indexOf("url(")!==-1&&a.style("stroke",m.replace(v,p))}),(f==="pdf"||f==="eps")&&h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(A.xmlns,"xmlns",A.svg),h.node().setAttributeNS(A.xmlns,"xmlns:xlink",A.xlink),f==="svg"&&u&&(h.attr("width",u*c),h.attr("height",u*i),h.attr("viewBox","0 0 "+c+" "+i));var M=new window.XMLSerializer().serializeToString(h.node());return M=e(M),M=s(M),M=M.replace(r,"'"),P.isIE()&&(M=M.replace(/"/gi,"'"),M=M.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),M=M.replace(/(\\')/gi,'"')),M}},84664:function(j,V,t){var b=t(3400);j.exports=function(o,L){for(var A=0;A<o.length;A++)o[A].i=A;b.mergeArray(L.text,o,"tx"),b.mergeArray(L.hovertext,o,"htx");var v=L.marker;if(v){b.mergeArray(v.opacity,o,"mo",!0),b.mergeArray(v.color,o,"mc");var p=v.line;p&&(b.mergeArray(p.color,o,"mlc"),b.mergeArrayCastPositive(p.width,o,"mlw"))}}},20832:function(j,V,t){var b=t(52904),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(21776).Gw,A=t(49084),v=t(25376),p=t(78048),r=t(98192).c,e=t(92880).extendFlat,s=v({editType:"calc",arrayOk:!0,colorEditType:"style"}),n=b.marker,l=n.line,f=e({},l.width,{dflt:0}),u=e({width:f,editType:"calc"},A("marker.line")),g=e({line:u,editType:"calc"},A("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r,cornerradius:{valType:"any",editType:"calc"}});j.exports={x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:P("x"),yhoverformat:P("y"),text:b.text,texttemplate:L({editType:"plot"},{keys:p.eventDataKeys}),hovertext:b.hovertext,hovertemplate:o({},{keys:p.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:e({},s,{}),insidetextfont:e({},s,{}),outsidetextfont:e({},s,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:e({},b.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:g,offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,selected:{marker:{opacity:b.selected.marker.opacity,color:b.selected.marker.color,editType:"style"},textfont:b.selected.textfont,editType:"style"},unselected:{marker:{opacity:b.unselected.marker.opacity,color:b.unselected.marker.color,editType:"style"},textfont:b.unselected.textfont,editType:"style"},zorder:b.zorder,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},71820:function(j,V,t){var b=t(54460),P=t(1220),o=t(94288).hasColorscale,L=t(47128),A=t(84664),v=t(4500);j.exports=function(r,e){var s=b.getFromId(r,e.xaxis||"x"),n=b.getFromId(r,e.yaxis||"y"),l,f,u,g,h,T,c={msUTC:!!(e.base||e.base===0)};e.orientation==="h"?(l=s.makeCalcdata(e,"x",c),u=n.makeCalcdata(e,"y"),g=P(e,n,"y",u),h=!!e.yperiodalignment,T="y"):(l=n.makeCalcdata(e,"y",c),u=s.makeCalcdata(e,"x"),g=P(e,s,"x",u),h=!!e.xperiodalignment,T="x"),f=g.vals;for(var i=Math.min(f.length,l.length),d=new Array(i),x=0;x<i;x++)d[x]={p:f[x],s:l[x]},h&&(d[x].orig_p=u[x],d[x][T+"End"]=g.ends[x],d[x][T+"Start"]=g.starts[x]),e.ids&&(d[x].id=String(e.ids[x]));return o(e,"marker")&&L(r,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),o(e,"marker.line")&&L(r,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),A(d,e),v(d,e),d}},78048:function(j){j.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},96376:function(j,V,t){var b=t(38248),P=t(3400).isArrayOrTypedArray,o=t(39032).BADNUM,L=t(24040),A=t(54460),v=t(71888).getAxisGroup,p=t(72592);function r(m,k){for(var I=k.xaxis,O=k.yaxis,z=m._fullLayout,B=m._fullData,F=m.calcdata,_=[],N=[],G=0;G<B.length;G++){var X=B[G];if(X.visible===!0&&L.traceIs(X,"bar")&&X.xaxis===I._id&&X.yaxis===O._id&&(X.orientation==="h"?_.push(F[G]):N.push(F[G]),X._computePh))for(var $=m.calcdata[G],et=0;et<$.length;et++)typeof $[et].ph0=="function"&&($[et].ph0=$[et].ph0()),typeof $[et].ph1=="function"&&($[et].ph1=$[et].ph1())}var ot={xCat:I.type==="category"||I.type==="multicategory",yCat:O.type==="category"||O.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};e(m,I,O,N,ot),e(m,O,I,_,ot)}function e(m,k,I,O,z){if(O.length){var B,F,_,N,G;switch(l(I,O),z.mode){case"overlay":f(k,I,O,z);break;case"group":for(B=[],F=[],_=0;_<O.length;_++)N=O[_],G=N[0].trace,G.offset===void 0?F.push(N):B.push(N);F.length&&u(m,k,I,F,z),B.length&&f(k,I,B,z);break;case"stack":case"relative":for(B=[],F=[],_=0;_<O.length;_++)N=O[_],G=N[0].trace,G.base===void 0?F.push(N):B.push(N);n(F),F.length&&g(m,k,I,F,z),B.length&&f(k,I,B,z);break}s(O),a(O,k)}}function s(m){var k,I,O,z,B,F,_;for(k=0;k<m.length;k++)I=m[k],O=I[0].trace,z=I[0].t,z.cornerradiusvalue===void 0&&(B=O.marker?O.marker.cornerradius:void 0,B!==void 0&&(F=b(B)?+B:+B.slice(0,-1),_=b(B)?"px":"%",z.cornerradiusvalue=F,z.cornerradiusform=_))}function n(m){if(!(m.length<2)){var k,I,O,z,B,F,_;for(k=0;k<m.length&&(I=m[k],O=I[0].trace,B=O.marker?O.marker.cornerradius:void 0,B===void 0);k++);if(B!==void 0)for(F=b(B)?+B:+B.slice(0,-1),_=b(B)?"px":"%",k=0;k<m.length;k++)I=m[k],z=I[0].t,z.cornerradiusvalue=F,z.cornerradiusform=_}}function l(m,k){var I,O;for(I=0;I<k.length;I++){var z=k[I],B=z[0].trace,F=B.type==="funnel"?B._base:B.base,_,N=B.orientation==="h"?B.xcalendar:B.ycalendar,G=m.type==="category"||m.type==="multicategory"?function(){return null}:m.d2c;if(P(F)){for(O=0;O<Math.min(F.length,z.length);O++)_=G(F[O],0,N),b(_)?(z[O].b=+_,z[O].hasB=1):z[O].b=0;for(;O<z.length;O++)z[O].b=0}else{_=G(F,0,N);var X=b(_);for(_=X?_:0,O=0;O<z.length;O++)z[O].b=_,X&&(z[O].hasB=1)}}}function f(m,k,I,O){for(var z=0;z<I.length;z++){var B=I[z],F=new p([B],{posAxis:m,sepNegVal:!1,overlapNoMerge:!O.norm});h(m,F,O),O.norm?(C(F),S(k,F,O)):x(k,F)}}function u(m,k,I,O,z){var B=new p(O,{posAxis:k,sepNegVal:!1,overlapNoMerge:!z.norm});T(m,k,B,z),y(B,k),z.norm?(C(B),S(I,B,z)):x(I,B)}function g(m,k,I,O,z){var B=new p(O,{posAxis:k,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});h(k,B,z),w(I,B,z);for(var F=0;F<O.length;F++)for(var _=O[F],N=0;N<_.length;N++){var G=_[N];if(G.s!==o){var X=G.b+G.s===B.get(G.p,G.s);X&&(G._outmost=!0)}}z.norm&&S(I,B,z)}function h(m,k,I){for(var O=k.minDiff,z=k.traces,B=O*(1-I.gap),F=B,_=F*(1-(I.groupgap||0)),N=-_/2,G=0;G<z.length;G++){var X=z[G],$=X[0].t;$.barwidth=_,$.poffset=N,$.bargroupwidth=B,$.bardelta=O}k.binWidth=z[0][0].t.barwidth/100,c(k),i(m,k),d(m,k)}function T(m,k,I,O){for(var z=m._fullLayout,B=I.positions,F=I.distinctPositions,_=I.minDiff,N=I.traces,G=N.length,X=B.length!==F.length,$=_*(1-O.gap),et=v(z,k._id)+N[0][0].trace.orientation,ot=z._alignmentOpts[et]||{},nt=0;nt<G;nt++){var Z=N[nt],Q=Z[0].trace,W=ot[Q.alignmentgroup]||{},J=Object.keys(W.offsetGroups||{}).length,it;J?it=$/J:it=X?$/G:$;var K=it*(1-(O.groupgap||0)),H;J?H=((2*Q._offsetIndex+1-J)*it-K)/2:H=X?((2*nt+1-G)*it-K)/2:-K/2;var at=Z[0].t;at.barwidth=K,at.poffset=H,at.bargroupwidth=$,at.bardelta=_}I.binWidth=N[0][0].t.barwidth/100,c(I),i(k,I),d(k,I,X)}function c(m){var k=m.traces,I,O;for(I=0;I<k.length;I++){var z=k[I],B=z[0],F=B.trace,_=B.t,N=F._offset||F.offset,G=_.poffset,X;if(P(N)){for(X=Array.prototype.slice.call(N,0,z.length),O=0;O<X.length;O++)b(X[O])||(X[O]=G);for(O=X.length;O<z.length;O++)X.push(G);_.poffset=X}else N!==void 0&&(_.poffset=N);var $=F._width||F.width,et=_.barwidth;if(P($)){var ot=Array.prototype.slice.call($,0,z.length);for(O=0;O<ot.length;O++)b(ot[O])||(ot[O]=et);for(O=ot.length;O<z.length;O++)ot.push(et);if(_.barwidth=ot,N===void 0){for(X=[],O=0;O<z.length;O++)X.push(G+(et-ot[O])/2);_.poffset=X}}else $!==void 0&&(_.barwidth=$,N===void 0&&(_.poffset=G+(et-$)/2))}}function i(m,k){for(var I=k.traces,O=E(m),z=0;z<I.length;z++)for(var B=I[z],F=B[0].t,_=F.poffset,N=P(_),G=F.barwidth,X=P(G),$=0;$<B.length;$++){var et=B[$],ot=et.w=X?G[$]:G;et.p===void 0&&(et.p=et[O],et["orig_"+O]=et[O]);var nt=(N?_[$]:_)+ot/2;et[O]=et.p+nt}}function d(m,k,I){var O=k.traces,z=k.minDiff,B=z/2;A.minDtick(m,k.minDiff,k.distinctPositions[0],I);for(var F=0;F<O.length;F++){var _=O[F],N=_[0],G=N.trace,X=[],$,et,ot,nt;for(nt=0;nt<_.length;nt++)$=_[nt],et=$.p-B,ot=$.p+B,X.push(et,ot);if(G.width||G.offset){var Z=N.t,Q=Z.poffset,W=Z.barwidth,J=P(Q),it=P(W);for(nt=0;nt<_.length;nt++){$=_[nt];var K=J?Q[nt]:Q,H=it?W[nt]:W;et=$.p+K,ot=et+H,X.push(et,ot)}}G._extremes[m._id]=A.findExtremes(m,X,{padded:!1})}}function x(m,k){for(var I=k.traces,O=E(m),z=0;z<I.length;z++){for(var B=I[z],F=B[0].trace,_=F.type==="scatter",N=F.orientation==="v",G=[],X=!1,$=0;$<B.length;$++){var et=B[$],ot=_?0:et.b,nt=_?N?et.y:et.x:ot+et.s;et[O]=nt,G.push(nt),et.hasB&&G.push(ot),(!et.hasB||!et.b)&&(X=!0)}F._extremes[m._id]=A.findExtremes(m,G,{tozero:X,padded:!0})}}function w(m,k,I){var O=E(m),z=k.traces,B,F,_,N,G,X;for(N=0;N<z.length;N++)if(B=z[N],F=B[0].trace,F.type==="funnel")for(G=0;G<B.length;G++)X=B[G],X.s!==o&&k.put(X.p,-.5*X.s);for(N=0;N<z.length;N++){B=z[N],F=B[0].trace,_=F.type==="funnel";var $=[];for(G=0;G<B.length;G++)if(X=B[G],X.s!==o){var et;_?et=X.s:et=X.s+X.b;var ot=k.put(X.p,et),nt=ot+et;X.b=ot,X[O]=nt,I.norm||($.push(nt),X.hasB&&$.push(ot))}I.norm||(F._extremes[m._id]=A.findExtremes(m,$,{tozero:!0,padded:!0}))}}function C(m){for(var k=m.traces,I=0;I<k.length;I++)for(var O=k[I],z=0;z<O.length;z++){var B=O[z];B.s!==o&&m.put(B.p,B.b+B.s)}}function y(m,k){for(var I=m.traces,O=0;O<I.length;O++){var z=I[O],B=z[0].trace;if(B.base===void 0)for(var F=new p([z],{posAxis:k,sepNegVal:!0,overlapNoMerge:!0}),_=0;_<z.length;_++){var N=z[_];if(N.p!==o){var G=F.put(N.p,N.b+N.s);G&&(N.b=G)}}}}function S(m,k,I){var O=k.traces,z=E(m),B=I.norm==="fraction"?1:100,F=B/1e9,_=m.l2c(m.c2l(0)),N=I.mode==="stack"?B:_;function G(H){return b(m.c2l(H))&&(H<_-F||H>N+F||!b(_))}for(var X=0;X<O.length;X++){for(var $=O[X],et=$[0].trace,ot=[],nt=!1,Z=!1,Q=0;Q<$.length;Q++){var W=$[Q];if(W.s!==o){var J=Math.abs(B/k.get(W.p,W.s));W.b*=J,W.s*=J;var it=W.b,K=it+W.s;W[z]=K,ot.push(K),Z=Z||G(K),W.hasB&&(ot.push(it),Z=Z||G(it)),(!W.hasB||!W.b)&&(nt=!0)}}et._extremes[m._id]=A.findExtremes(m,ot,{tozero:nt,padded:Z})}}function M(m,k,I,O){for(var z=E(O),B=0;B<m.length;B++)for(var F=m[B],_=0;_<F.length;_++){var N=F[_],G=N[z];N._sMin=k[G],N._sMax=I[G]}}function a(m,k){var I=E(k),O={},z,B,F,_=1/0,N=-1/0;for(z=0;z<m.length;z++)for(F=m[z],B=0;B<F.length;B++){var G=F[B].p;b(G)&&(_=Math.min(_,G),N=Math.max(N,G))}var X=1e4/(N-_),$=O.round=function(lt){return String(Math.round(X*(lt-_)))},et={},ot={},nt=m.some(function(lt){var dt=lt[0].trace;return"marker"in dt&&dt.marker.cornerradius});for(z=0;z<m.length;z++){F=m[z],F[0].t.extents=O;var Z=F[0].t.poffset,Q=P(Z);for(B=0;B<F.length;B++){var W=F[B],J=W[I]-W.w/2;if(b(J)){var it=W[I]+W.w/2,K=$(W.p);O[K]?O[K]=[Math.min(J,O[K][0]),Math.max(it,O[K][1])]:O[K]=[J,it]}if(W.p0=W.p+(Q?Z[B]:Z),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s,nt){var H=Math.min(W.s0,W.s1)||0,at=Math.max(W.s0,W.s1)||0,tt=W[I];et[tt]=tt in et?Math.min(et[tt],H):H,ot[tt]=tt in ot?Math.max(ot[tt],at):at}}}nt&&M(m,et,ot,k)}function E(m){return m._id.charAt(0)}j.exports={crossTraceCalc:r,setGroupPositions:e}},31508:function(j,V,t){var b=t(38248),P=t(3400),o=t(76308),L=t(24040),A=t(43980),v=t(31147),p=t(55592),r=t(20011),e=t(20832),s=P.coerceFont;function n(g,h,T,c){function i(y,S){return P.coerce(g,h,e,y,S)}var d=A(g,h,c,i);if(!d){h.visible=!1;return}v(g,h,c,i),i("xhoverformat"),i("yhoverformat"),i("zorder"),i("orientation",h.x&&!h.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate");var x=i("textposition");u(g,h,c,i,x,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p(g,h,i,T,c);var w=(h.marker.line||{}).color,C=L.getComponentMethod("errorbars","supplyDefaults");C(g,h,w||o.defaultLine,{axis:"y"}),C(g,h,w||o.defaultLine,{axis:"x",inherit:"y"}),P.coerceSelectionMarkerOpacity(h,i)}function l(g,h){var T,c;function i(w,C){return P.coerce(c._input,c,e,w,C)}for(var d=0;d<g.length;d++)if(c=g[d],c.type==="bar"){T=c._input;var x=i("marker.cornerradius",h.barcornerradius);c.marker&&(c.marker.cornerradius=f(x)),h.barmode==="group"&&r(T,c,h,i)}}function f(g){if(b(g)){if(g=+g,g>=0)return g}else if(typeof g=="string"&&(g=g.trim(),g.slice(-1)==="%"&&b(g.slice(0,-1))&&(g=+g.slice(0,-1),g>=0)))return g+"%"}function u(g,h,T,c,i,d){d=d||{};var x=d.moduleHasSelected!==!1,w=d.moduleHasUnselected!==!1,C=d.moduleHasConstrain!==!1,y=d.moduleHasCliponaxis!==!1,S=d.moduleHasTextangle!==!1,M=d.moduleHasInsideanchor!==!1,a=!!d.hasPathbar,E=Array.isArray(i)||i==="auto",m=E||i==="inside",k=E||i==="outside";if(m||k){var I=s(c,"textfont",T.font),O=P.extendFlat({},I),z=g.textfont&&g.textfont.color,B=!z;if(B&&delete O.color,s(c,"insidetextfont",O),a){var F=P.extendFlat({},I);B&&delete F.color,s(c,"pathbar.textfont",F)}k&&s(c,"outsidetextfont",I),x&&c("selected.textfont.color"),w&&c("unselected.textfont.color"),C&&c("constraintext"),y&&c("cliponaxis"),S&&c("textangle"),c("texttemplate")}m&&M&&c("insidetextanchor")}j.exports={supplyDefaults:n,crossTraceDefaults:l,handleText:u,validateCornerradius:f}},52160:function(j){j.exports=function(t,b,P){return t.x="xVal"in b?b.xVal:b.x,t.y="yVal"in b?b.yVal:b.y,b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),P.orientation==="h"?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}},60444:function(j,V,t){var b=t(38248),P=t(49760),o=t(3400).isArrayOrTypedArray;V.coerceString=function(L,A,v){if(typeof A=="string"){if(A||!L.noBlank)return A}else if((typeof A=="number"||A===!0)&&!L.strict)return String(A);return v!==void 0?v:L.dflt},V.coerceNumber=function(L,A,v){if(b(A)){A=+A;var p=L.min,r=L.max,e=p!==void 0&&A<p||r!==void 0&&A>r;if(!e)return A}return v!==void 0?v:L.dflt},V.coerceColor=function(L,A,v){return P(A).isValid()?A:v!==void 0?v:L.dflt},V.coerceEnumerated=function(L,A,v){return L.coerceNumber&&(A=+A),L.values.indexOf(A)!==-1?A:v!==void 0?v:L.dflt},V.getValue=function(L,A){var v;return o(L)?A<L.length&&(v=L[A]):v=L,v},V.getLineWidth=function(L,A){var v=0<A.mlw?A.mlw:o(L.marker.line.width)?0:L.marker.line.width;return v}},63400:function(j,V,t){var b=t(93024),P=t(24040),o=t(76308),L=t(3400).fillText,A=t(60444).getLineWidth,v=t(54460).hoverLabelText,p=t(39032).BADNUM;function r(n,l,f,u,g){var h=e(n,l,f,u,g);if(h){var T=h.cd,c=T[0].trace,i=T[h.index];return h.color=s(c,i),P.getComponentMethod("errorbars","hoverInfo")(i,c,h),[h]}}function e(n,l,f,u,g){var h=n.cd,T=h[0].trace,c=h[0].t,i=u==="closest",d=T.type==="waterfall",x=n.maxHoverDistance,w=n.maxSpikeDistance,C,y,S,M,a,E,m;T.orientation==="h"?(C=f,y=l,S="y",M="x",a=ot,E=X):(C=l,y=f,S="x",M="y",E=ot,a=X);var k=T[S+"period"],I=i||k;function O(lt){return B(lt,-1)}function z(lt){return B(lt,1)}function B(lt,dt){var mt=lt.w;return lt[S]+dt*mt/2}function F(lt){return lt[S+"End"]-lt[S+"Start"]}var _=i?O:k?function(lt){return lt.p-F(lt)/2}:function(lt){return Math.min(O(lt),lt.p-c.bardelta/2)},N=i?z:k?function(lt){return lt.p+F(lt)/2}:function(lt){return Math.max(z(lt),lt.p+c.bardelta/2)};function G(lt,dt,mt){return g.finiteRange&&(mt=0),b.inbox(lt-C,dt-C,mt+Math.min(1,Math.abs(dt-lt)/m)-1)}function X(lt){return G(_(lt),N(lt),x)}function $(lt){return G(O(lt),z(lt),w)}function et(lt){var dt=lt[M];if(d){var mt=Math.abs(lt.rawS)||0;y>0?dt+=mt:y<0&&(dt-=mt)}return dt}function ot(lt){var dt=y,mt=lt.b,gt=et(lt);return b.inbox(mt-dt,gt-dt,x+(gt-dt)/(gt-mt)-1)}function nt(lt){var dt=y,mt=lt.b,gt=et(lt);return b.inbox(mt-dt,gt-dt,w+(gt-dt)/(gt-mt)-1)}var Z=n[S+"a"],Q=n[M+"a"];m=Math.abs(Z.r2c(Z.range[1])-Z.r2c(Z.range[0]));function W(lt){return(a(lt)+E(lt))/2}var J=b.getDistanceFunction(u,a,E,W);if(b.getClosest(h,J,n),n.index!==!1&&h[n.index].p!==p){I||(_=function(lt){return Math.min(O(lt),lt.p-c.bargroupwidth/2)},N=function(lt){return Math.max(z(lt),lt.p+c.bargroupwidth/2)});var it=n.index,K=h[it],H=T.base?K.b+K.s:K.s;n[M+"0"]=n[M+"1"]=Q.c2p(K[M],!0),n[M+"LabelVal"]=H;var at=c.extents[c.extents.round(K.p)];n[S+"0"]=Z.c2p(i?_(K):at[0],!0),n[S+"1"]=Z.c2p(i?N(K):at[1],!0);var tt=K.orig_p!==void 0;return n[S+"LabelVal"]=tt?K.orig_p:K.p,n.labelLabel=v(Z,n[S+"LabelVal"],T[S+"hoverformat"]),n.valueLabel=v(Q,n[M+"LabelVal"],T[M+"hoverformat"]),n.baseLabel=v(Q,K.b,T[M+"hoverformat"]),n.spikeDistance=(nt(K)+$(K))/2,n[S+"Spike"]=Z.c2p(K.p,!0),L(K,T,n),n.hovertemplate=T.hovertemplate,n}}function s(n,l){var f=l.mcc||n.marker.color,u=l.mlcc||n.marker.line.color,g=A(n,l);if(o.opacity(f))return f;if(o.opacity(u)&&g)return u}j.exports={hoverPoints:r,hoverOnBars:e,getTraceColor:s}},51132:function(j,V,t){j.exports={attributes:t(20832),layoutAttributes:t(39324),supplyDefaults:t(31508).supplyDefaults,crossTraceDefaults:t(31508).crossTraceDefaults,supplyLayoutDefaults:t(37156),calc:t(71820),crossTraceCalc:t(96376).crossTraceCalc,colorbar:t(5528),arraysToCalcdata:t(84664),plot:t(98184).plot,style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,hoverPoints:t(63400).hoverPoints,eventData:t(52160),selectPoints:t(45784),moduleType:"trace",name:"bar",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},39324:function(j){j.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},barcornerradius:{valType:"any",editType:"calc"}}},37156:function(j,V,t){var b=t(24040),P=t(54460),o=t(3400),L=t(39324),A=t(31508).validateCornerradius;j.exports=function(v,p,r){function e(d,x){return o.coerce(v,p,L,d,x)}for(var s=!1,n=!1,l=!1,f={},u=e("barmode"),g=0;g<r.length;g++){var h=r[g];if(b.traceIs(h,"bar")&&h.visible)s=!0;else continue;if(u==="group"){var T=h.xaxis+h.yaxis;f[T]&&(l=!0),f[T]=!0}if(h.visible&&h.type==="histogram"){var c=P.getFromId({_fullLayout:p},h[h.orientation==="v"?"xaxis":"yaxis"]);c.type!=="category"&&(n=!0)}}if(!s){delete p.barmode;return}u!=="overlay"&&e("barnorm"),e("bargap",n&&!l?0:.2),e("bargroupgap");var i=e("barcornerradius");p.barcornerradius=A(i)}},98184:function(j,V,t){var b=t(33428),P=t(38248),o=t(3400),L=t(72736),A=t(76308),v=t(43616),p=t(24040),r=t(54460).tickText,e=t(82744),s=e.recordMinTextSize,n=e.clearMinTextSize,l=t(60100),f=t(60444),u=t(78048),g=t(20832),h=g.text,T=g.textposition,c=t(10624).appendArrayPointValue,i=u.TEXTPAD;function d(X){return X.id}function x(X){if(X.ids)return d}function w(X){return(X>0)-(X<0)}function C(X,$){return X<$?1:-1}function y(X,$,et,ot){var nt=[],Z=[],Q=ot?$:et,W=ot?et:$;return nt[0]=Q.c2p(X.s0,!0),Z[0]=W.c2p(X.p0,!0),nt[1]=Q.c2p(X.s1,!0),Z[1]=W.c2p(X.p1,!0),ot?[nt,Z]:[Z,nt]}function S(X,$,et,ot){if(!$.uniformtext.mode&&M(et)){var nt;return ot&&(nt=ot()),X.transition().duration(et.duration).ease(et.easing).each("end",function(){nt&&nt()}).each("interrupt",function(){nt&&nt()})}else return X}function M(X){return X&&X.duration>0}function a(X,$,et,ot,nt,Z){var Q=$.xaxis,W=$.yaxis,J=X._fullLayout,it=X._context.staticPlot;nt||(nt={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},n("bar",J));var K=o.makeTraceGroups(ot,et,"trace bars").each(function(H){var at=b.select(this),tt=H[0].trace,lt=H[0].t,dt=tt.type==="waterfall",mt=tt.type==="funnel",gt=tt.type==="histogram",Mt=tt.type==="bar",Lt=Mt||mt,zt=0;dt&&tt.connector.visible&&tt.connector.mode==="between"&&(zt=tt.connector.line.width/2);var xt=tt.orientation==="h",Ct=M(nt),wt=o.ensureSingle(at,"g","points"),Rt=x(tt),Tt=wt.selectAll("g.point").data(o.identity,Rt);Tt.enter().append("g").classed("point",!0),Tt.exit().remove(),Tt.each(function(Gt,te){var Wt=b.select(this),jt=y(Gt,Q,W,xt),ie=jt[0][0],ue=jt[0][1],fe=jt[1][0],pe=jt[1][1],Te=(xt?ue-ie:pe-fe)===0;Te&&Lt&&f.getLineWidth(tt,Gt)&&(Te=!1),Te||(Te=!P(ie)||!P(ue)||!P(fe)||!P(pe)),Gt.isBlank=Te,Te&&(xt?ue=ie:pe=fe),zt&&!Te&&(xt?(ie-=C(ie,ue)*zt,ue+=C(ie,ue)*zt):(fe-=C(fe,pe)*zt,pe+=C(fe,pe)*zt));var Qt,Pt;if(tt.type==="waterfall"){if(!Te){var Ot=tt[Gt.dir].marker;Qt=Ot.line.width,Pt=Ot.color}}else Qt=f.getLineWidth(tt,Gt),Pt=Gt.mc||tt.marker.color;function Nt(ne){var ge=b.round(Qt/2%1,2);return nt.gap===0&&nt.groupgap===0?b.round(Math.round(ne)-ge,2):ne}function Ht(ne,ge,Ae){return Ae&&ne===ge?ne:Math.abs(ne-ge)>=2?Nt(ne):ne>ge?Math.ceil(ne):Math.floor(ne)}var St=A.opacity(Pt),kt=St<1||Qt>.01?Nt:Ht;X._context.staticPlot||(ie=kt(ie,ue,xt),ue=kt(ue,ie,xt),fe=kt(fe,pe,!xt),pe=kt(pe,fe,!xt));var Ft=xt?Q.c2p:W.c2p,At;Gt.s0>0?At=Gt._sMax:Gt.s0<0?At=Gt._sMin:At=Gt.s1>0?Gt._sMax:Gt._sMin;function ft(ne,ge){if(!ne)return 0;var Ae=Math.abs(xt?pe-fe:ue-ie),Re=Math.abs(xt?ue-ie:pe-fe),ze=kt(Math.abs(Ft(At,!0)-Ft(0,!0))),ke=Gt.hasB?Math.min(Ae/2,Re/2):Math.min(Ae/2,ze),_e;if(ge==="%"){var Ke=Math.min(50,ne);_e=Ae*(Ke/100)}else _e=ne;return kt(Math.max(Math.min(_e,ke),0))}var pt=Mt||gt?ft(lt.cornerradiusvalue,lt.cornerradiusform):0,Dt,Ut,$t="M"+ie+","+fe+"V"+pe+"H"+ue+"V"+fe+"Z",re=0;if(pt&&Gt.s){var Be=w(Gt.s0)===0||w(Gt.s)===w(Gt.s0)?Gt.s1:Gt.s0;if(re=kt(Gt.hasB?0:Math.abs(Ft(At,!0)-Ft(Be,!0))),re<pt){var We=C(ie,ue),me=C(fe,pe),Se=We===-me?1:0;if(xt)if(Gt.hasB)Dt="M"+(ie+pt*We)+","+fe+"A "+pt+","+pt+" 0 0 "+Se+" "+ie+","+(fe+pt*me)+"V"+(pe-pt*me)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ie+pt*We)+","+pe+"H"+(ue-pt*We)+"A "+pt+","+pt+" 0 0 "+Se+" "+ue+","+(pe-pt*me)+"V"+(fe+pt*me)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ue-pt*We)+","+fe+"Z";else{Ut=Math.abs(ue-ie)+re;var je=Ut<pt?pt-Math.sqrt(Ut*(2*pt-Ut)):0,vr=re>0?Math.sqrt(re*(2*pt-re)):0,he=We>0?Math.max:Math.min;Dt="M"+ie+","+fe+"V"+(pe-je*me)+"H"+he(ue-(pt-re)*We,ie)+"A "+pt+","+pt+" 0 0 "+Se+" "+ue+","+(pe-pt*me-vr)+"V"+(fe+pt*me+vr)+"A "+pt+","+pt+" 0 0 "+Se+" "+he(ue-(pt-re)*We,ie)+","+(fe+je*me)+"Z"}else if(Gt.hasB)Dt="M"+(ie+pt*We)+","+fe+"A "+pt+","+pt+" 0 0 "+Se+" "+ie+","+(fe+pt*me)+"V"+(pe-pt*me)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ie+pt*We)+","+pe+"H"+(ue-pt*We)+"A "+pt+","+pt+" 0 0 "+Se+" "+ue+","+(pe-pt*me)+"V"+(fe+pt*me)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ue-pt*We)+","+fe+"Z";else{Ut=Math.abs(pe-fe)+re;var Ye=Ut<pt?pt-Math.sqrt(Ut*(2*pt-Ut)):0,Qe=re>0?Math.sqrt(re*(2*pt-re)):0,mr=me>0?Math.max:Math.min;Dt="M"+(ie+Ye*We)+","+fe+"V"+mr(pe-(pt-re)*me,fe)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ie+pt*We-Qe)+","+pe+"H"+(ue-pt*We+Qe)+"A "+pt+","+pt+" 0 0 "+Se+" "+(ue-Ye*We)+","+mr(pe-(pt-re)*me,fe)+"V"+fe+"Z"}}else Dt=$t}else Dt=$t;var ir=S(o.ensureSingle(Wt,"path"),J,nt,Z);if(ir.style("vector-effect",it?"none":"non-scaling-stroke").attr("d",isNaN((ue-ie)*(pe-fe))||Te&&X._context.staticPlot?"M0,0Z":Dt).call(v.setClipUrl,$.layerClipId,X),!J.uniformtext.mode&&Ct){var ve=v.makePointStyleFns(tt);v.singlePointStyle(Gt,ir,tt,ve,X)}E(X,$,Wt,H,te,ie,ue,fe,pe,pt,re,nt,Z),$.layerClipId&&v.hideOutsideRangePoint(Gt,Wt.select("text"),Q,W,tt.xcalendar,tt.ycalendar)});var Bt=tt.cliponaxis===!1;v.setClipUrl(at,Bt?null:$.layerClipId,X)});p.getComponentMethod("errorbars","plot")(X,K,$,nt)}function E(X,$,et,ot,nt,Z,Q,W,J,it,K,H,at){var tt=$.xaxis,lt=$.yaxis,dt=X._fullLayout,mt;function gt(Ut,$t,re){var Be=o.ensureSingle(Ut,"text").text($t).attr({class:"bartext bartext-"+mt,"text-anchor":"middle","data-notex":1}).call(v.font,re).call(L.convertToTspans,X);return Be}var Mt=ot[0].trace,Lt=Mt.orientation==="h",zt=F(dt,ot,nt,tt,lt);mt=_(Mt,nt);var xt=H.mode==="stack"||H.mode==="relative",Ct=ot[nt],wt=!xt||Ct._outmost,Rt=Ct.hasB,Tt=it&&it-K>i;if(!zt||mt==="none"||(Ct.isBlank||Z===Q||W===J)&&(mt==="auto"||mt==="inside")){et.select("text").remove();return}var Bt=dt.font,Gt=l.getBarColor(ot[nt],Mt),te=l.getInsideTextFont(Mt,nt,Bt,Gt),Wt=l.getOutsideTextFont(Mt,nt,Bt),jt=Mt.insidetextanchor||"end",ie=et.datum();Lt?tt.type==="log"&&ie.s0<=0&&(tt.range[0]<tt.range[1]?Z=0:Z=tt._length):lt.type==="log"&&ie.s0<=0&&(lt.range[0]<lt.range[1]?W=lt._length:W=0);var ue=Math.abs(Q-Z),fe=Math.abs(J-W),pe=ue-2*i,Te=fe-2*i,Qt,Pt,Ot,Nt,Ht;if(mt==="outside"&&!wt&&!Ct.hasB&&(mt="inside"),mt==="auto")if(wt){mt="inside",Ht=o.ensureUniformFontSize(X,te),Qt=gt(et,zt,Ht),Pt=v.bBox(Qt.node()),Ot=Pt.width,Nt=Pt.height;var St=Ot>0&&Nt>0,kt;Tt?Rt?kt=m(pe-2*it,Te,Ot,Nt,Lt)||m(pe,Te-2*it,Ot,Nt,Lt):Lt?kt=m(pe-(it-K),Te,Ot,Nt,Lt)||m(pe,Te-2*(it-K),Ot,Nt,Lt):kt=m(pe,Te-(it-K),Ot,Nt,Lt)||m(pe-2*(it-K),Te,Ot,Nt,Lt):kt=m(pe,Te,Ot,Nt,Lt),St&&kt?mt="inside":(mt="outside",Qt.remove(),Qt=null)}else mt="inside";if(!Qt){Ht=o.ensureUniformFontSize(X,mt==="outside"?Wt:te),Qt=gt(et,zt,Ht);var Ft=Qt.attr("transform");if(Qt.attr("transform",""),Pt=v.bBox(Qt.node()),Ot=Pt.width,Nt=Pt.height,Qt.attr("transform",Ft),Ot<=0||Nt<=0){Qt.remove();return}}var At=Mt.textangle,ft,pt;mt==="outside"?(pt=Mt.constraintext==="both"||Mt.constraintext==="outside",ft=B(Z,Q,W,J,Pt,{isHorizontal:Lt,constrained:pt,angle:At})):(pt=Mt.constraintext==="both"||Mt.constraintext==="inside",ft=O(Z,Q,W,J,Pt,{isHorizontal:Lt,constrained:pt,angle:At,anchor:jt,hasB:Rt,r:it,overhead:K})),ft.fontSize=Ht.size,s(Mt.type==="histogram"?"bar":Mt.type,ft,dt),Ct.transform=ft;var Dt=S(Qt,dt,H,at);o.setTransormAndDisplay(Dt,ft)}function m(X,$,et,ot,nt){if(X<0||$<0)return!1;var Z=et<=X&&ot<=$,Q=et<=$&&ot<=X,W=nt?X>=et*($/ot):$>=ot*(X/et);return Z||Q||W}function k(X){return X==="auto"?0:X}function I(X,$){var et=Math.PI/180*$,ot=Math.abs(Math.sin(et)),nt=Math.abs(Math.cos(et));return{x:X.width*nt+X.height*ot,y:X.width*ot+X.height*nt}}function O(X,$,et,ot,nt,Z){var Q=!!Z.isHorizontal,W=!!Z.constrained,J=Z.angle||0,it=Z.anchor,K=it==="end",H=it==="start",at=Z.leftToRight||0,tt=(at+1)/2,lt=1-tt,dt=Z.hasB,mt=Z.r,gt=Z.overhead,Mt=nt.width,Lt=nt.height,zt=Math.abs($-X),xt=Math.abs(ot-et),Ct=zt>2*i&&xt>2*i?i:0;zt-=2*Ct,xt-=2*Ct;var wt=k(J);J==="auto"&&!(Mt<=zt&&Lt<=xt)&&(Mt>zt||Lt>xt)&&(!(Mt>xt||Lt>zt)||Mt<Lt!=zt<xt)&&(wt+=90);var Rt=I(nt,wt),Tt,Bt;if(mt&&mt-gt>i){var Gt=z(X,$,et,ot,Rt,mt,gt,Q,dt);Tt=Gt.scale,Bt=Gt.pad}else Tt=1,W&&(Tt=Math.min(1,zt/Rt.x,xt/Rt.y)),Bt=0;var te=nt.left*lt+nt.right*tt,Wt=(nt.top+nt.bottom)/2,jt=(X+i)*lt+($-i)*tt,ie=(et+ot)/2,ue=0,fe=0;if(H||K){var pe=(Q?Rt.x:Rt.y)/2;mt&&(K||dt)&&(Ct+=Bt);var Te=Q?C(X,$):C(et,ot);Q?H?(jt=X+Te*Ct,ue=-Te*pe):(jt=$-Te*Ct,ue=Te*pe):H?(ie=et+Te*Ct,fe=-Te*pe):(ie=ot-Te*Ct,fe=Te*pe)}return{textX:te,textY:Wt,targetX:jt,targetY:ie,anchorX:ue,anchorY:fe,scale:Tt,rotate:wt}}function z(X,$,et,ot,nt,Z,Q,W,J){var it=Math.max(0,Math.abs($-X)-2*i),K=Math.max(0,Math.abs(ot-et)-2*i),H=Z-i,at=Q?H-Math.sqrt(H*H-(H-Q)*(H-Q)):H,tt=J?H*2:W?H-Q:2*at,lt=J?H*2:W?2*at:H-Q,dt,mt,gt,Mt,Lt;return nt.y/nt.x>=K/(it-tt)?Mt=K/nt.y:nt.y/nt.x<=(K-lt)/it?Mt=it/nt.x:!J&&W?(dt=nt.x*nt.x+nt.y*nt.y/4,mt=-2*nt.x*(it-H)-nt.y*(K/2-H),gt=(it-H)*(it-H)+(K/2-H)*(K/2-H)-H*H,Mt=(-mt+Math.sqrt(mt*mt-4*dt*gt))/(2*dt)):J?(dt=(nt.x*nt.x+nt.y*nt.y)/4,mt=-nt.x*(it/2-H)-nt.y*(K/2-H),gt=(it/2-H)*(it/2-H)+(K/2-H)*(K/2-H)-H*H,Mt=(-mt+Math.sqrt(mt*mt-4*dt*gt))/(2*dt)):(dt=nt.x*nt.x/4+nt.y*nt.y,mt=-nt.x*(it/2-H)-2*nt.y*(K-H),gt=(it/2-H)*(it/2-H)+(K-H)*(K-H)-H*H,Mt=(-mt+Math.sqrt(mt*mt-4*dt*gt))/(2*dt)),Mt=Math.min(1,Mt),W?Lt=Math.max(0,H-Math.sqrt(Math.max(0,H*H-(H-(K-nt.y*Mt)/2)*(H-(K-nt.y*Mt)/2)))-Q):Lt=Math.max(0,H-Math.sqrt(Math.max(0,H*H-(H-(it-nt.x*Mt)/2)*(H-(it-nt.x*Mt)/2)))-Q),{scale:Mt,pad:Lt}}function B(X,$,et,ot,nt,Z){var Q=!!Z.isHorizontal,W=!!Z.constrained,J=Z.angle||0,it=nt.width,K=nt.height,H=Math.abs($-X),at=Math.abs(ot-et),tt;Q?tt=at>2*i?i:0:tt=H>2*i?i:0;var lt=1;W&&(lt=Q?Math.min(1,at/K):Math.min(1,H/it));var dt=k(J),mt=I(nt,dt),gt=(Q?mt.x:mt.y)/2,Mt=(nt.left+nt.right)/2,Lt=(nt.top+nt.bottom)/2,zt=(X+$)/2,xt=(et+ot)/2,Ct=0,wt=0,Rt=Q?C($,X):C(et,ot);return Q?(zt=$-Rt*tt,Ct=Rt*gt):(xt=ot+Rt*tt,wt=-Rt*gt),{textX:Mt,textY:Lt,targetX:zt,targetY:xt,anchorX:Ct,anchorY:wt,scale:lt,rotate:dt}}function F(X,$,et,ot,nt){var Z=$[0].trace,Q=Z.texttemplate,W;return Q?W=N(X,$,et,ot,nt):Z.textinfo?W=G($,et,ot,nt):W=f.getValue(Z.text,et),f.coerceString(h,W)}function _(X,$){var et=f.getValue(X.textposition,$);return f.coerceEnumerated(T,et)}function N(X,$,et,ot,nt){var Z=$[0].trace,Q=o.castOption(Z,et,"texttemplate");if(!Q)return"";var W=Z.type==="histogram",J=Z.type==="waterfall",it=Z.type==="funnel",K=Z.orientation==="h",H,at,tt,lt;K?(H="y",at=nt,tt="x",lt=ot):(H="x",at=ot,tt="y",lt=nt);function dt(Ct){return r(at,at.c2l(Ct),!0).text}function mt(Ct){return r(lt,lt.c2l(Ct),!0).text}var gt=$[et],Mt={};Mt.label=gt.p,Mt.labelLabel=Mt[H+"Label"]=dt(gt.p);var Lt=o.castOption(Z,gt.i,"text");(Lt===0||Lt)&&(Mt.text=Lt),Mt.value=gt.s,Mt.valueLabel=Mt[tt+"Label"]=mt(gt.s);var zt={};c(zt,Z,gt.i),(W||zt.x===void 0)&&(zt.x=K?Mt.value:Mt.label),(W||zt.y===void 0)&&(zt.y=K?Mt.label:Mt.value),(W||zt.xLabel===void 0)&&(zt.xLabel=K?Mt.valueLabel:Mt.labelLabel),(W||zt.yLabel===void 0)&&(zt.yLabel=K?Mt.labelLabel:Mt.valueLabel),J&&(Mt.delta=+gt.rawS||gt.s,Mt.deltaLabel=mt(Mt.delta),Mt.final=gt.v,Mt.finalLabel=mt(Mt.final),Mt.initial=Mt.final-Mt.delta,Mt.initialLabel=mt(Mt.initial)),it&&(Mt.value=gt.s,Mt.valueLabel=mt(Mt.value),Mt.percentInitial=gt.begR,Mt.percentInitialLabel=o.formatPercent(gt.begR),Mt.percentPrevious=gt.difR,Mt.percentPreviousLabel=o.formatPercent(gt.difR),Mt.percentTotal=gt.sumR,Mt.percenTotalLabel=o.formatPercent(gt.sumR));var xt=o.castOption(Z,gt.i,"customdata");return xt&&(Mt.customdata=xt),o.texttemplateString(Q,Mt,X._d3locale,zt,Mt,Z._meta||{})}function G(X,$,et,ot){var nt=X[0].trace,Z=nt.orientation==="h",Q=nt.type==="waterfall",W=nt.type==="funnel";function J(xt){var Ct=Z?ot:et;return r(Ct,xt,!0).text}function it(xt){var Ct=Z?et:ot;return r(Ct,+xt,!0).text}var K=nt.textinfo,H=X[$],at=K.split("+"),tt=[],lt,dt=function(xt){return at.indexOf(xt)!==-1};if(dt("label")&&tt.push(J(X[$].p)),dt("text")&&(lt=o.castOption(nt,H.i,"text"),(lt===0||lt)&&tt.push(lt)),Q){var mt=+H.rawS||H.s,gt=H.v,Mt=gt-mt;dt("initial")&&tt.push(it(Mt)),dt("delta")&&tt.push(it(mt)),dt("final")&&tt.push(it(gt))}if(W){dt("value")&&tt.push(it(H.s));var Lt=0;dt("percent initial")&&Lt++,dt("percent previous")&&Lt++,dt("percent total")&&Lt++;var zt=Lt>1;dt("percent initial")&&(lt=o.formatPercent(H.begR),zt&&(lt+=" of initial"),tt.push(lt)),dt("percent previous")&&(lt=o.formatPercent(H.difR),zt&&(lt+=" of previous"),tt.push(lt)),dt("percent total")&&(lt=o.formatPercent(H.sumR),zt&&(lt+=" of total"),tt.push(lt))}return tt.join("<br>")}j.exports={plot:a,toMoveInsideBar:O}},45784:function(j){j.exports=function(b,P){var o=b.cd,L=b.xaxis,A=b.yaxis,v=o[0].trace,p=v.type==="funnel",r=v.orientation==="h",e=[],s;if(P===!1)for(s=0;s<o.length;s++)o[s].selected=0;else for(s=0;s<o.length;s++){var n=o[s],l="ct"in n?n.ct:V(n,L,A,r,p);P.contains(l,!1,s,b)?(e.push({pointNumber:s,x:L.c2d(n.x),y:A.c2d(n.y)}),n.selected=1):n.selected=0}return e};function V(t,b,P,o,L){var A=b.c2p(o?t.s0:t.p0,!0),v=b.c2p(o?t.s1:t.p1,!0),p=P.c2p(o?t.p0:t.s0,!0),r=P.c2p(o?t.p1:t.s1,!0);return L?[(A+v)/2,(p+r)/2]:o?[v,(p+r)/2]:[(A+v)/2,r]}},72592:function(j,V,t){j.exports=P;var b=t(3400).distinctVals;function P(o,L){this.traces=o,this.sepNegVal=L.sepNegVal,this.overlapNoMerge=L.overlapNoMerge;for(var A=1/0,v=L.posAxis._id.charAt(0),p=[],r=0;r<o.length;r++){for(var e=o[r],s=0;s<e.length;s++){var n=e[s],l=n.p;l===void 0&&(l=n[v]),l!==void 0&&p.push(l)}e[0]&&e[0].width1&&(A=Math.min(e[0].width1,A))}this.positions=p;var f=b(p);this.distinctPositions=f.vals,f.vals.length===1&&A!==1/0?this.minDiff=A:this.minDiff=Math.min(f.minDiff,A);var u=(L.posAxis||{}).type;(u==="category"||u==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}P.prototype.put=function(L,A){var v=this.getLabel(L,A),p=this.bins[v]||0;return this.bins[v]=p+A,p},P.prototype.get=function(L,A){var v=this.getLabel(L,A);return this.bins[v]||0},P.prototype.getLabel=function(L,A){var v=A<0&&this.sepNegVal?"v":"^",p=this.overlapNoMerge?L:Math.round(L/this.binWidth);return v+p}},60100:function(j,V,t){var b=t(33428),P=t(76308),o=t(43616),L=t(3400),A=t(24040),v=t(82744).resizeText,p=t(20832),r=p.textfont,e=p.insidetextfont,s=p.outsidetextfont,n=t(60444);function l(y){var S=b.select(y).selectAll('g[class^="barlayer"]').selectAll("g.trace");v(y,S,"bar");var M=S.size(),a=y._fullLayout;S.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(a.barmode==="stack"&&M>1||a.bargap===0&&a.bargroupgap===0&&!E[0].trace.marker.line.width)&&b.select(this).attr("shape-rendering","crispEdges")}),S.selectAll("g.points").each(function(E){var m=b.select(this),k=E[0].trace;f(m,k,y)}),A.getComponentMethod("errorbars","style")(S)}function f(y,S,M){o.pointStyle(y.selectAll("path"),S,M),u(y,S,M)}function u(y,S,M){y.selectAll("text").each(function(a){var E=b.select(this),m=L.ensureUniformFontSize(M,c(E,a,S,M));o.font(E,m)})}function g(y,S,M){var a=S[0].trace;a.selectedpoints?h(M,a,y):(f(M,a,y),A.getComponentMethod("errorbars","style")(M))}function h(y,S,M){o.selectedPointStyle(y.selectAll("path"),S),T(y.selectAll("text"),S,M)}function T(y,S,M){y.each(function(a){var E=b.select(this),m;if(a.selected){m=L.ensureUniformFontSize(M,c(E,a,S,M));var k=S.selected.textfont&&S.selected.textfont.color;k&&(m.color=k),o.font(E,m)}else o.selectedTextStyle(E,S)})}function c(y,S,M,a){var E=a._fullLayout.font,m=M.textfont;if(y.classed("bartext-inside")){var k=C(S,M);m=d(M,S.i,E,k)}else y.classed("bartext-outside")&&(m=x(M,S.i,E));return m}function i(y,S,M){return w(r,y.textfont,S,M)}function d(y,S,M,a){var E=i(y,S,M),m=y._input.textfont===void 0||y._input.textfont.color===void 0||Array.isArray(y.textfont.color)&&y.textfont.color[S]===void 0;return m&&(E={color:P.contrast(a),family:E.family,size:E.size,weight:E.weight,style:E.style,variant:E.variant,textcase:E.textcase,lineposition:E.lineposition,shadow:E.shadow}),w(e,y.insidetextfont,S,E)}function x(y,S,M){var a=i(y,S,M);return w(s,y.outsidetextfont,S,a)}function w(y,S,M,a){S=S||{};var E=n.getValue(S.family,M),m=n.getValue(S.size,M),k=n.getValue(S.color,M),I=n.getValue(S.weight,M),O=n.getValue(S.style,M),z=n.getValue(S.variant,M),B=n.getValue(S.textcase,M),F=n.getValue(S.lineposition,M),_=n.getValue(S.shadow,M);return{family:n.coerceString(y.family,E,a.family),size:n.coerceNumber(y.size,m,a.size),color:n.coerceColor(y.color,k,a.color),weight:n.coerceString(y.weight,I,a.weight),style:n.coerceString(y.style,O,a.style),variant:n.coerceString(y.variant,z,a.variant),textcase:n.coerceString(y.variant,B,a.textcase),lineposition:n.coerceString(y.variant,F,a.lineposition),shadow:n.coerceString(y.variant,_,a.shadow)}}function C(y,S){return S.type==="waterfall"?S[y.dir].marker.color:y.mcc||y.mc||S.marker.color}j.exports={style:l,styleTextPoints:u,styleOnSelect:g,getInsideTextFont:d,getOutsideTextFont:x,getBarColor:C,resizeText:v}},55592:function(j,V,t){var b=t(76308),P=t(94288).hasColorscale,o=t(27260),L=t(3400).coercePattern;j.exports=function(v,p,r,e,s){var n=r("marker.color",e),l=P(v,"marker");l&&o(v,p,s,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",b.defaultLine),P(v,"marker.line")&&o(v,p,s,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),L(r,"marker.pattern",n,l),r("selected.marker.color"),r("unselected.marker.color")}},82744:function(j,V,t){var b=t(33428),P=t(3400);function o(p,r,e){var s=p._fullLayout,n=s["_"+e+"Text_minsize"];if(n){var l=s.uniformtext.mode==="hide",f;switch(e){case"funnelarea":case"pie":case"sunburst":f="g.slice";break;case"treemap":case"icicle":f="g.slice, g.pathbar";break;default:f="g.points > g.point"}r.selectAll(f).each(function(u){var g=u.transform;if(g){g.scale=l&&g.hide?0:n/g.fontSize;var h=b.select(this).select("text");P.setTransormAndDisplay(h,g)}})}}function L(p,r,e){if(e.uniformtext.mode){var s=v(p),n=e.uniformtext.minsize,l=r.scale*r.fontSize;r.hide=l<n,e[s]=e[s]||1/0,r.hide||(e[s]=Math.min(e[s],Math.max(l,n)))}}function A(p,r){var e=v(p);r[e]=void 0}function v(p){return"_"+p+"Text_minsize"}j.exports={recordMinTextSize:L,clearMinTextSize:A,resizeText:o}},78100:function(j,V,t){var b=t(21776).Ks,P=t(92880).extendFlat,o=t(8319),L=t(20832);j.exports={r:o.r,theta:o.theta,r0:o.r0,dr:o.dr,theta0:o.theta0,dtheta:o.dtheta,thetaunit:o.thetaunit,base:P({},L.base,{}),offset:P({},L.offset,{}),width:P({},L.width,{}),text:P({},L.text,{}),hovertext:P({},L.hovertext,{}),marker:A(),hoverinfo:o.hoverinfo,hovertemplate:b(),selected:L.selected,unselected:L.unselected};function A(){var v=P({},L.marker);return delete v.cornerradius,v}},47056:function(j,V,t){var b=t(94288).hasColorscale,P=t(47128),o=t(3400).isArrayOrTypedArray,L=t(84664),A=t(96376).setGroupPositions,v=t(4500),p=t(24040).traceIs,r=t(3400).extendFlat;function e(n,l){for(var f=n._fullLayout,u=l.subplot,g=f[u].radialaxis,h=f[u].angularaxis,T=g.makeCalcdata(l,"r"),c=h.makeCalcdata(l,"theta"),i=l._length,d=new Array(i),x=T,w=c,C=0;C<i;C++)d[C]={p:w[C],s:x[C]};function y(S){var M=l[S];M!==void 0&&(l["_"+S]=o(M)?h.makeCalcdata(l,S):h.d2c(M,l.thetaunit))}return h.type==="linear"&&(y("width"),y("offset")),b(l,"marker")&&P(n,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),b(l,"marker.line")&&P(n,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),L(d,l),v(d,l),d}function s(n,l,f){for(var u=n.calcdata,g=[],h=0;h<u.length;h++){var T=u[h],c=T[0].trace;c.visible===!0&&p(c,"bar")&&c.subplot===f&&g.push(T)}var i=r({},l.radialaxis,{_id:"x"}),d=l.angularaxis;A(n,d,i,g,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}j.exports={calc:e,crossTraceCalc:s}},70384:function(j,V,t){var b=t(3400),P=t(85968).handleRThetaDefaults,o=t(55592),L=t(78100);j.exports=function(v,p,r,e){function s(l,f){return b.coerce(v,p,L,l,f)}var n=P(v,p,e,s);if(!n){p.visible=!1;return}s("thetaunit"),s("base"),s("offset"),s("width"),s("text"),s("hovertext"),s("hovertemplate"),o(v,p,s,r,e),b.coerceSelectionMarkerOpacity(p,s)}},68896:function(j,V,t){var b=t(93024),P=t(3400),o=t(63400).getTraceColor,L=P.fillText,A=t(8504).makeHoverPointText,v=t(57384).isPtInsidePolygon;j.exports=function(r,e,s){var n=r.cd,l=n[0].trace,f=r.subplot,u=f.radialAxis,g=f.angularAxis,h=f.vangles,T=h?v:P.isPtInsideSector,c=r.maxHoverDistance,i=g._period||2*Math.PI,d=Math.abs(u.g2p(Math.sqrt(e*e+s*s))),x=Math.atan2(s,e);u.range[0]>u.range[1]&&(x+=Math.PI);var w=function(M){return T(d,x,[M.rp0,M.rp1],[M.thetag0,M.thetag1],h)?c+Math.min(1,Math.abs(M.thetag1-M.thetag0)/i)-1+(M.rp1-d)/(M.rp1-M.rp0)-1:1/0};if(b.getClosest(n,w,r),r.index!==!1){var C=r.index,y=n[C];r.x0=r.x1=y.ct[0],r.y0=r.y1=y.ct[1];var S=P.extendFlat({},y,{r:y.s,theta:y.p});return L(y,l,r),A(S,l,f,r),r.hovertemplate=l.hovertemplate,r.color=o(l,y),r.xLabelVal=r.yLabelVal=void 0,y.s<0&&(r.idealAlign="left"),[r]}}},94456:function(j,V,t){j.exports={moduleType:"trace",name:"barpolar",basePlotModule:t(40872),categories:["polar","bar","showLegend"],attributes:t(78100),layoutAttributes:t(9320),supplyDefaults:t(70384),supplyLayoutDefaults:t(89580),calc:t(47056).calc,crossTraceCalc:t(47056).crossTraceCalc,plot:t(42040),colorbar:t(5528),formatLabels:t(22852),style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,hoverPoints:t(68896),selectPoints:t(45784),meta:{}}},9320:function(j){j.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},89580:function(j,V,t){var b=t(3400),P=t(9320);j.exports=function(o,L,A){var v={},p;function r(n,l){return b.coerce(o[p]||{},L[p],P,n,l)}for(var e=0;e<A.length;e++){var s=A[e];s.type==="barpolar"&&s.visible===!0&&(p=s.subplot,v[p]||(r("barmode"),r("bargap"),v[p]=1))}}},42040:function(j,V,t){var b=t(33428),P=t(38248),o=t(3400),L=t(43616),A=t(57384);j.exports=function(r,e,s){var n=r._context.staticPlot,l=e.xaxis,f=e.yaxis,u=e.radialAxis,g=e.angularAxis,h=v(e),T=e.layers.frontplot.select("g.barlayer");o.makeTraceGroups(T,s,"trace bars").each(function(){var c=b.select(this),i=o.ensureSingle(c,"g","points"),d=i.selectAll("g.point").data(o.identity);d.enter().append("g").style("vector-effect",n?"none":"non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),d.exit().remove(),d.each(function(x){var w=b.select(this),C=x.rp0=u.c2p(x.s0),y=x.rp1=u.c2p(x.s1),S=x.thetag0=g.c2g(x.p0),M=x.thetag1=g.c2g(x.p1),a;if(!P(C)||!P(y)||!P(S)||!P(M)||C===y||S===M)a="M0,0Z";else{var E=u.c2g(x.s1),m=(S+M)/2;x.ct=[l.c2p(E*Math.cos(m)),f.c2p(E*Math.sin(m))],a=h(C,y,S,M)}o.ensureSingle(w,"path").attr("d",a)}),L.setClipUrl(c,e._hasClipOnAxisFalse?e.clipIds.forTraces:null,r)})};function v(p){var r=p.cxx,e=p.cyy;return p.vangles?function(s,n,l,f){var u,g;o.angleDelta(l,f)>0?(u=l,g=f):(u=f,g=l);var h=A.findEnclosingVertexAngles(u,p.vangles)[0],T=A.findEnclosingVertexAngles(g,p.vangles)[1],c=[h,(u+g)/2,T];return A.pathPolygonAnnulus(s,n,u,g,c,r,e)}:function(s,n,l,f){return o.pathAnnulus(s,n,l,f,r,e)}}},63188:function(j,V,t){var b=t(98304),P=t(52904),o=t(20832),L=t(22548),A=t(29736).axisHoverFormat,v=t(21776).Ks,p=t(92880).extendFlat,r=P.marker,e=r.line;j.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:P.xperiod,yperiod:P.yperiod,xperiod0:P.xperiod0,yperiod0:P.yperiod0,xperiodalignment:P.xperiodalignment,yperiodalignment:P.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},sdmultiple:{valType:"number",min:0,editType:"calc",dflt:1},sizemode:{valType:"enumerated",values:["quartiles","sd"],editType:"calc",dflt:"quartiles"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:p({},r.symbol,{arrayOk:!1,editType:"plot"}),opacity:p({},r.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:p({},r.angle,{arrayOk:!1,editType:"calc"}),size:p({},r.size,{arrayOk:!1,editType:"calc"}),color:p({},r.color,{arrayOk:!1,editType:"style"}),line:{color:p({},e.color,{arrayOk:!1,dflt:L.defaultLine,editType:"style"}),width:p({},e.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:b(),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},showwhiskers:{valType:"boolean",editType:"calc"},offsetgroup:o.offsetgroup,alignmentgroup:o.alignmentgroup,selected:{marker:P.selected.marker,editType:"style"},unselected:{marker:P.unselected.marker,editType:"style"},text:p({},P.text,{}),hovertext:p({},P.hovertext,{}),hovertemplate:v({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"},zorder:P.zorder}},62555:function(j,V,t){var b=t(38248),P=t(54460),o=t(1220),L=t(3400),A=t(39032).BADNUM,v=L._;j.exports=function(x,w){var C=x._fullLayout,y=P.getFromId(x,w.xaxis||"x"),S=P.getFromId(x,w.yaxis||"y"),M=[],a=w.type==="violin"?"_numViolins":"_numBoxes",E,m,k,I,O,z,B;w.orientation==="h"?(k=y,I="x",O=S,z="y",B=!!w.yperiodalignment):(k=S,I="y",O=y,z="x",B=!!w.xperiodalignment);var F=p(w,z,O,C[a]),_=F[0],N=F[1],G=L.distinctVals(_,O),X=G.vals,$=G.minDiff/2,et,ot,nt,Z,Q,W,J=(w.boxpoints||w.points)==="all"?L.identity:function(Te){return Te.v<et.lf||Te.v>et.uf};if(w._hasPreCompStats){var it=w[I],K=function(Te){return k.d2c((w[Te]||[])[E])},H=1/0,at=-1/0;for(E=0;E<w._length;E++){var tt=_[E];if(b(tt)){if(et={},et.pos=et[z]=tt,B&&N&&(et.orig_p=N[E]),et.q1=K("q1"),et.med=K("median"),et.q3=K("q3"),ot=[],it&&L.isArrayOrTypedArray(it[E]))for(m=0;m<it[E].length;m++)W=k.d2c(it[E][m]),W!==A&&(Q={v:W,i:[E,m]},n(Q,w,[E,m]),ot.push(Q));if(et.pts=ot.sort(f),nt=et[I]=ot.map(u),Z=nt.length,et.med!==A&&et.q1!==A&&et.q3!==A&&et.med>=et.q1&&et.q3>=et.med){var lt=K("lowerfence");et.lf=lt!==A&&lt<=et.q1?lt:g(et,nt,Z);var dt=K("upperfence");et.uf=dt!==A&&dt>=et.q3?dt:h(et,nt,Z);var mt=K("mean");et.mean=mt!==A?mt:Z?L.mean(nt,Z):(et.q1+et.q3)/2;var gt=K("sd");et.sd=mt!==A&&gt>=0?gt:Z?L.stdev(nt,Z,et.mean):et.q3-et.q1,et.lo=T(et),et.uo=c(et);var Mt=K("notchspan");Mt=Mt!==A&&Mt>0?Mt:i(et,Z),et.ln=et.med-Mt,et.un=et.med+Mt;var Lt=et.lf,zt=et.uf;w.boxpoints&&nt.length&&(Lt=Math.min(Lt,nt[0]),zt=Math.max(zt,nt[Z-1])),w.notched&&(Lt=Math.min(Lt,et.ln),zt=Math.max(zt,et.un)),et.min=Lt,et.max=zt}else{L.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+et.q1,"median = "+et.med,"q3 = "+et.q3].join(`
`));var xt;et.med!==A?xt=et.med:et.q1!==A?et.q3!==A?xt=(et.q1+et.q3)/2:xt=et.q1:et.q3!==A?xt=et.q3:xt=0,et.med=xt,et.q1=et.q3=xt,et.lf=et.uf=xt,et.mean=et.sd=xt,et.ln=et.un=xt,et.min=et.max=xt}H=Math.min(H,et.min),at=Math.max(at,et.max),et.pts2=ot.filter(J),M.push(et)}}w._extremes[k._id]=P.findExtremes(k,[H,at],{padded:!0})}else{var Ct=k.makeCalcdata(w,I),wt=r(X,$),Rt=X.length,Tt=e(Rt);for(E=0;E<w._length;E++)if(W=Ct[E],!!b(W)){var Bt=L.findBin(_[E],wt);Bt>=0&&Bt<Rt&&(Q={v:W,i:E},n(Q,w,E),Tt[Bt].push(Q))}var Gt=1/0,te=-1/0,Wt=w.quartilemethod,jt=Wt==="exclusive",ie=Wt==="inclusive";for(E=0;E<Rt;E++)if(Tt[E].length>0){if(et={},et.pos=et[z]=X[E],ot=et.pts=Tt[E].sort(f),nt=et[I]=ot.map(u),Z=nt.length,et.min=nt[0],et.max=nt[Z-1],et.mean=L.mean(nt,Z),et.sd=L.stdev(nt,Z,et.mean)*w.sdmultiple,et.med=L.interp(nt,.5),Z%2&&(jt||ie)){var ue,fe;jt?(ue=nt.slice(0,Z/2),fe=nt.slice(Z/2+1)):ie&&(ue=nt.slice(0,Z/2+1),fe=nt.slice(Z/2)),et.q1=L.interp(ue,.5),et.q3=L.interp(fe,.5)}else et.q1=L.interp(nt,.25),et.q3=L.interp(nt,.75);et.lf=g(et,nt,Z),et.uf=h(et,nt,Z),et.lo=T(et),et.uo=c(et);var pe=i(et,Z);et.ln=et.med-pe,et.un=et.med+pe,Gt=Math.min(Gt,et.ln),te=Math.max(te,et.un),et.pts2=ot.filter(J),M.push(et)}w.notched&&L.isTypedArray(Ct)&&(Ct=Array.from(Ct)),w._extremes[k._id]=P.findExtremes(k,w.notched?Ct.concat([Gt,te]):Ct,{padded:!0})}return l(M,w),M.length>0?(M[0].t={num:C[a],dPos:$,posLetter:z,valLetter:I,labels:{med:v(x,"median:"),min:v(x,"min:"),q1:v(x,"q1:"),q3:v(x,"q3:"),max:v(x,"max:"),mean:w.boxmean==="sd"||w.sizemode==="sd"?v(x,"mean ± σ:").replace("σ",w.sdmultiple===1?"σ":w.sdmultiple+"σ"):v(x,"mean:"),lf:v(x,"lower fence:"),uf:v(x,"upper fence:")}},C[a]++,M):[{t:{empty:!0}}]};function p(d,x,w,C){var y=x in d,S=x+"0"in d,M="d"+x in d;if(y||S&&M){var a=w.makeCalcdata(d,x),E=o(d,w,x,a).vals;return[E,a]}var m;S?m=d[x+"0"]:"name"in d&&(w.type==="category"||b(d.name)&&["linear","log"].indexOf(w.type)!==-1||L.isDateTime(d.name)&&w.type==="date")?m=d.name:m=C;for(var k=w.type==="multicategory"?w.r2c_just_indices(m):w.d2c(m,0,d[x+"calendar"]),I=d._length,O=new Array(I),z=0;z<I;z++)O[z]=k;return[O]}function r(d,x){for(var w=d.length,C=new Array(w+1),y=0;y<w;y++)C[y]=d[y]-x;return C[w]=d[w-1]+x,C}function e(d){for(var x=new Array(d),w=0;w<d;w++)x[w]=[];return x}var s={text:"tx",hovertext:"htx"};function n(d,x,w){for(var C in s)L.isArrayOrTypedArray(x[C])&&(Array.isArray(w)?L.isArrayOrTypedArray(x[C][w[0]])&&(d[s[C]]=x[C][w[0]][w[1]]):d[s[C]]=x[C][w])}function l(d,x){if(L.isArrayOrTypedArray(x.selectedpoints))for(var w=0;w<d.length;w++){for(var C=d[w].pts||[],y={},S=0;S<C.length;S++)y[C[S].i]=S;L.tagSelected(C,x,y)}}function f(d,x){return d.v-x.v}function u(d){return d.v}function g(d,x,w){return w===0?d.q1:Math.min(d.q1,x[Math.min(L.findBin(2.5*d.q1-1.5*d.q3,x,!0)+1,w-1)])}function h(d,x,w){return w===0?d.q3:Math.max(d.q3,x[Math.max(L.findBin(2.5*d.q3-1.5*d.q1,x),0)])}function T(d){return 4*d.q1-3*d.q3}function c(d){return 4*d.q3-3*d.q1}function i(d,x){return x===0?0:1.57*(d.q3-d.q1)/Math.sqrt(x)}},96404:function(j,V,t){var b=t(54460),P=t(3400),o=t(71888).getAxisGroup,L=["v","h"];function A(p,r){for(var e=p.calcdata,s=r.xaxis,n=r.yaxis,l=0;l<L.length;l++){for(var f=L[l],u=f==="h"?n:s,g=[],h=0;h<e.length;h++){var T=e[h],c=T[0].t,i=T[0].trace;i.visible===!0&&(i.type==="box"||i.type==="candlestick")&&!c.empty&&(i.orientation||"v")===f&&i.xaxis===s._id&&i.yaxis===n._id&&g.push(h)}v("box",p,g,u)}}function v(p,r,e,s){var n=r.calcdata,l=r._fullLayout,f=s._id,u=f.charAt(0),g,h,T,c=[],i=0;for(g=0;g<e.length;g++)for(T=n[e[g]],h=0;h<T.length;h++)c.push(s.c2l(T[h].pos,!0)),i+=(T[h].pts2||[]).length;if(c.length){var d=P.distinctVals(c);(s.type==="category"||s.type==="multicategory")&&(d.minDiff=1);var x=d.minDiff/2;b.minDtick(s,d.minDiff,d.vals[0],!0);var w=p==="violin"?"_numViolins":"_numBoxes",C=l[w],y=l[p+"mode"]==="group"&&C>1,S=1-l[p+"gap"],M=1-l[p+"groupgap"];for(g=0;g<e.length;g++){T=n[e[g]];var a=T[0].trace,E=T[0].t,m=a.width,k=a.side,I,O,z,B;if(m)I=O=B=m/2,z=0;else if(I=x,y){var F=o(l,s._id)+a.orientation,_=l._alignmentOpts[F]||{},N=_[a.alignmentgroup]||{},G=Object.keys(N.offsetGroups||{}).length,X=G||C,$=G?a._offsetIndex:E.num;O=I*S*M/X,z=2*I*(-.5+($+.5)/X)*S,B=I*S/X}else O=I*S*M,z=0,B=I;E.dPos=I,E.bPos=z,E.bdPos=O,E.wHover=B;var et,ot,nt=z+O,Z,Q,W,J,it,K,H=!!m,at=(a.boxpoints||a.points)&&i>0;if(k==="positive"?(et=I*(m?1:.5),Z=nt,ot=Z=z):k==="negative"?(et=Z=z,ot=I*(m?1:.5),Q=nt):(et=ot=I,Z=Q=nt),at){var tt=a.pointpos,lt=a.jitter,dt=a.marker.size/2,mt=0;tt+lt>=0&&(mt=nt*(tt+lt),mt>et?(H=!0,it=dt,W=mt):mt>Z&&(it=dt,W=et)),mt<=et&&(W=et);var gt=0;tt-lt<=0&&(gt=-nt*(tt-lt),gt>ot?(H=!0,K=dt,J=gt):gt>Q&&(K=dt,J=ot)),gt<=ot&&(J=ot)}else W=et,J=ot;var Mt=new Array(T.length);for(h=0;h<T.length;h++)Mt[h]=T[h].pos;a._extremes[f]=b.findExtremes(s,Mt,{padded:H,vpadminus:J,vpadplus:W,vpadLinearized:!0,ppadminus:{x:K,y:it}[u],ppadplus:{x:it,y:K}[u]})}}}j.exports={crossTraceCalc:A,setPositionOffset:v}},90624:function(j,V,t){var b=t(3400),P=t(24040),o=t(76308),L=t(31147),A=t(20011),v=t(52976),p=t(63188);function r(l,f,u,g){function h(M,a){return b.coerce(l,f,p,M,a)}if(e(l,f,h,g),f.visible!==!1){L(l,f,g,h),h("xhoverformat"),h("yhoverformat");var T=f._hasPreCompStats;T&&(h("lowerfence"),h("upperfence")),h("line.color",(l.marker||{}).color||u),h("line.width"),h("fillcolor",o.addOpacity(f.line.color,.5));var c=!1;if(T){var i=h("mean"),d=h("sd");i&&i.length&&(c=!0,d&&d.length&&(c="sd"))}h("whiskerwidth");var x=h("sizemode"),w;x==="quartiles"&&(w=h("boxmean",c)),h("showwhiskers",x==="quartiles"),(x==="sd"||w==="sd")&&h("sdmultiple"),h("width"),h("quartilemethod");var C=!1;if(T){var y=h("notchspan");y&&y.length&&(C=!0)}else b.validate(l.notchwidth,p.notchwidth)&&(C=!0);var S=h("notched",C);S&&h("notchwidth"),s(l,f,h,{prefix:"box"}),h("zorder")}}function e(l,f,u,g){function h(G){var X=0;return G&&G.length&&(X+=1,b.isArrayOrTypedArray(G[0])&&G[0].length&&(X+=1)),X}function T(G){return b.validate(l[G],p[G])}var c=u("y"),i=u("x"),d;if(f.type==="box"){var x=u("q1"),w=u("median"),C=u("q3");f._hasPreCompStats=x&&x.length&&w&&w.length&&C&&C.length,d=Math.min(b.minRowLength(x),b.minRowLength(w),b.minRowLength(C))}var y=h(c),S=h(i),M=y&&b.minRowLength(c),a=S&&b.minRowLength(i),E=g.calendar,m={autotypenumbers:g.autotypenumbers},k,I;if(f._hasPreCompStats)switch(String(S)+String(y)){case"00":var O=T("x0")||T("dx"),z=T("y0")||T("dy");z&&!O?k="h":k="v",I=d;break;case"10":k="v",I=Math.min(d,a);break;case"20":k="h",I=Math.min(d,i.length);break;case"01":k="h",I=Math.min(d,M);break;case"02":k="v",I=Math.min(d,c.length);break;case"12":k="v",I=Math.min(d,a,c.length);break;case"21":k="h",I=Math.min(d,i.length,M);break;case"11":I=0;break;case"22":var B=!1,F;for(F=0;F<i.length;F++)if(v(i[F],E,m)==="category"){B=!0;break}if(B)k="v",I=Math.min(d,a,c.length);else{for(F=0;F<c.length;F++)if(v(c[F],E,m)==="category"){B=!0;break}B?(k="h",I=Math.min(d,i.length,M)):(k="v",I=Math.min(d,a,c.length))}break}else y>0?(k="v",S>0?I=Math.min(a,M):I=Math.min(M)):S>0?(k="h",I=Math.min(a)):I=0;if(!I){f.visible=!1;return}f._length=I;var _=u("orientation",k);f._hasPreCompStats?_==="v"&&S===0?(u("x0",0),u("dx",1)):_==="h"&&y===0&&(u("y0",0),u("dy",1)):_==="v"&&S===0?u("x0"):_==="h"&&y===0&&u("y0");var N=P.getComponentMethod("calendars","handleTraceDefaults");N(l,f,["x","y"],g)}function s(l,f,u,g){var h=g.prefix,T=b.coerce2(l,f,p,"marker.outliercolor"),c=u("marker.line.outliercolor"),i="outliers";f._hasPreCompStats?i="all":(T||c)&&(i="suspectedoutliers");var d=u(h+"points",i);d?(u("jitter",d==="all"?.3:0),u("pointpos",d==="all"?-1.5:0),u("marker.symbol"),u("marker.opacity"),u("marker.size"),u("marker.angle"),u("marker.color",f.line.color),u("marker.line.color"),u("marker.line.width"),d==="suspectedoutliers"&&(u("marker.line.outliercolor",f.marker.color),u("marker.line.outlierwidth")),u("selected.marker.color"),u("unselected.marker.color"),u("selected.marker.size"),u("unselected.marker.size"),u("text"),u("hovertext")):delete f.marker;var x=u("hoveron");(x==="all"||x.indexOf("points")!==-1)&&u("hovertemplate"),b.coerceSelectionMarkerOpacity(f,u)}function n(l,f){var u,g;function h(i){return b.coerce(g._input,g,p,i)}for(var T=0;T<l.length;T++){g=l[T];var c=g.type;(c==="box"||c==="violin")&&(u=g._input,f[c+"mode"]==="group"&&A(u,g,f,h))}}j.exports={supplyDefaults:r,crossTraceDefaults:n,handleSampleDefaults:e,handlePointsDefaults:s}},10392:function(j){j.exports=function(t,b){return b.hoverOnBox&&(t.hoverOnBox=b.hoverOnBox),"xVal"in b&&(t.x=b.xVal),"yVal"in b&&(t.y=b.yVal),b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),t}},27576:function(j,V,t){var b=t(54460),P=t(3400),o=t(93024),L=t(76308),A=P.fillText;function v(e,s,n,l){var f=e.cd,u=f[0].trace,g=u.hoveron,h=[],T;return g.indexOf("boxes")!==-1&&(h=h.concat(p(e,s,n,l))),g.indexOf("points")!==-1&&(T=r(e,s,n)),l==="closest"?T?[T]:h:(T&&h.push(T),h)}function p(e,s,n,l){var f=e.cd,u=e.xa,g=e.ya,h=f[0].trace,T=f[0].t,c=h.type==="violin",i,d,x,w,C,y,S,M,a,E,m,k=T.bdPos,I,O,z=T.wHover,B=function(gt){return x.c2l(gt.pos)+T.bPos-x.c2l(y)};c&&h.side!=="both"?(h.side==="positive"&&(a=function(gt){var Mt=B(gt);return o.inbox(Mt,Mt+z,E)},I=k,O=0),h.side==="negative"&&(a=function(gt){var Mt=B(gt);return o.inbox(Mt-z,Mt,E)},I=0,O=k)):(a=function(gt){var Mt=B(gt);return o.inbox(Mt-z,Mt+z,E)},I=O=k);var F;c?F=function(gt){return o.inbox(gt.span[0]-C,gt.span[1]-C,E)}:F=function(gt){return o.inbox(gt.min-C,gt.max-C,E)},h.orientation==="h"?(C=s,y=n,S=F,M=a,i="y",x=g,d="x",w=u):(C=n,y=s,S=a,M=F,i="x",x=u,d="y",w=g);var _=Math.min(1,k/Math.abs(x.r2c(x.range[1])-x.r2c(x.range[0])));E=e.maxHoverDistance-_,m=e.maxSpikeDistance-_;function N(gt){return(S(gt)+M(gt))/2}var G=o.getDistanceFunction(l,S,M,N);if(o.getClosest(f,G,e),e.index===!1)return[];var X=f[e.index],$=h.line.color,et=(h.marker||{}).color;L.opacity($)&&h.line.width?e.color=$:L.opacity(et)&&h.boxpoints?e.color=et:e.color=h.fillcolor,e[i+"0"]=x.c2p(X.pos+T.bPos-O,!0),e[i+"1"]=x.c2p(X.pos+T.bPos+I,!0),e[i+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var ot=i+"Spike";e.spikeDistance=N(X)*m/E,e[ot]=x.c2p(X.pos,!0);var nt=h.boxmean||h.sizemode==="sd"||(h.meanline||{}).visible,Z=h.boxpoints||h.points,Q=Z&&nt?["max","uf","q3","med","mean","q1","lf","min"]:Z&&!nt?["max","uf","q3","med","q1","lf","min"]:!Z&&nt?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],W=w.range[1]<w.range[0];h.orientation===(W?"v":"h")&&Q.reverse();for(var J=e.spikeDistance,it=e[ot],K=[],H=0;H<Q.length;H++){var at=Q[H];if(at in X){var tt=X[at],lt=w.c2p(tt,!0),dt=P.extendFlat({},e);dt.attr=at,dt[d+"0"]=dt[d+"1"]=lt,dt[d+"LabelVal"]=tt,dt[d+"Label"]=(T.labels?T.labels[at]+" ":"")+b.hoverLabelText(w,tt,h[d+"hoverformat"]),dt.hoverOnBox=!0,at==="mean"&&"sd"in X&&(h.boxmean==="sd"||h.sizemode==="sd")&&(dt[d+"err"]=X.sd),dt.hovertemplate=!1,K.push(dt)}}e.name="",e.spikeDistance=void 0,e[ot]=void 0;for(var mt=0;mt<K.length;mt++)K[mt].attr!=="med"?(K[mt].name="",K[mt].spikeDistance=void 0,K[mt][ot]=void 0):(K[mt].spikeDistance=J,K[mt][ot]=it);return K}function r(e,s,n){for(var l=e.cd,f=e.xa,u=e.ya,g=l[0].trace,h=f.c2p(s),T=u.c2p(n),c,i=function(F){var _=Math.max(3,F.mrc||0);return Math.max(Math.abs(f.c2p(F.x)-h)-_,1-3/_)},d=function(F){var _=Math.max(3,F.mrc||0);return Math.max(Math.abs(u.c2p(F.y)-T)-_,1-3/_)},x=o.quadrature(i,d),w=!1,C,y,S=0;S<l.length;S++){C=l[S];for(var M=0;M<(C.pts||[]).length;M++){y=C.pts[M];var a=x(y);a<=e.distance&&(e.distance=a,w=[S,M])}}if(!w)return!1;C=l[w[0]],y=C.pts[w[1]];var E=f.c2p(y.x,!0),m=u.c2p(y.y,!0),k=y.mrc||1;c=P.extendFlat({},e,{index:y.i,color:(g.marker||{}).color,name:g.name,x0:E-k,x1:E+k,y0:m-k,y1:m+k,spikeDistance:e.distance,hovertemplate:g.hovertemplate});var I=C.orig_p,O=I!==void 0?I:C.pos,z;g.orientation==="h"?(z=u,c.xLabelVal=y.x,c.yLabelVal=O):(z=f,c.xLabelVal=O,c.yLabelVal=y.y);var B=z._id.charAt(0);return c[B+"Spike"]=z.c2p(C.pos,!0),A(y,g,c),c}j.exports={hoverPoints:v,hoverOnBoxes:p,hoverOnPoints:r}},67244:function(j,V,t){j.exports={attributes:t(63188),layoutAttributes:t(16560),supplyDefaults:t(90624).supplyDefaults,crossTraceDefaults:t(90624).crossTraceDefaults,supplyLayoutDefaults:t(68832).supplyLayoutDefaults,calc:t(62555),crossTraceCalc:t(96404).crossTraceCalc,plot:t(18728).plot,style:t(25776).style,styleOnSelect:t(25776).styleOnSelect,hoverPoints:t(27576).hoverPoints,eventData:t(10392),selectPoints:t(8264),moduleType:"trace",name:"box",basePlotModule:t(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},16560:function(j){j.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},68832:function(j,V,t){var b=t(24040),P=t(3400),o=t(16560);function L(v,p,r,e,s){for(var n=s+"Layout",l=!1,f=0;f<r.length;f++){var u=r[f];if(b.traceIs(u,n)){l=!0;break}}l&&(e(s+"mode"),e(s+"gap"),e(s+"groupgap"))}function A(v,p,r){function e(s,n){return P.coerce(v,p,o,s,n)}L(v,p,r,e,"box")}j.exports={supplyLayoutDefaults:A,_supply:L}},18728:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=5,A=.01;function v(s,n,l,f){var u=s._context.staticPlot,g=n.xaxis,h=n.yaxis;P.makeTraceGroups(f,l,"trace boxes").each(function(T){var c=b.select(this),i=T[0],d=i.t,x=i.trace;if(d.wdPos=d.bdPos*x.whiskerwidth,x.visible!==!0||d.empty){c.remove();return}var w,C;x.orientation==="h"?(w=h,C=g):(w=g,C=h),p(c,{pos:w,val:C},x,d,u),r(c,{x:g,y:h},x,d),e(c,{pos:w,val:C},x,d)})}function p(s,n,l,f,u){var g=l.orientation==="h",h=n.val,T=n.pos,c=!!T.rangebreaks,i=f.bPos,d=f.wdPos||0,x=f.bPosPxOffset||0,w=l.whiskerwidth||0,C=l.showwhiskers!==!1,y=l.notched||!1,S=y?1-2*l.notchwidth:1,M,a;Array.isArray(f.bdPos)?(M=f.bdPos[0],a=f.bdPos[1]):(M=f.bdPos,a=f.bdPos);var E=s.selectAll("path.box").data(l.type!=="violin"||l.box.visible?P.identity:[]);E.enter().append("path").style("vector-effect",u?"none":"non-scaling-stroke").attr("class","box"),E.exit().remove(),E.each(function(m){if(m.empty)return b.select(this).attr("d","M0,0Z");var k=T.c2l(m.pos+i,!0),I=T.l2p(k-M)+x,O=T.l2p(k+a)+x,z=c?(I+O)/2:T.l2p(k)+x,B=l.whiskerwidth,F=c?I*B+(1-B)*z:T.l2p(k-d)+x,_=c?O*B+(1-B)*z:T.l2p(k+d)+x,N=T.l2p(k-M*S)+x,G=T.l2p(k+a*S)+x,X=l.sizemode==="sd",$=h.c2p(X?m.mean-m.sd:m.q1,!0),et=X?h.c2p(m.mean+m.sd,!0):h.c2p(m.q3,!0),ot=P.constrain(X?h.c2p(m.mean,!0):h.c2p(m.med,!0),Math.min($,et)+1,Math.max($,et)-1),nt=m.lf===void 0||l.boxpoints===!1||X,Z=h.c2p(nt?m.min:m.lf,!0),Q=h.c2p(nt?m.max:m.uf,!0),W=h.c2p(m.ln,!0),J=h.c2p(m.un,!0);g?b.select(this).attr("d","M"+ot+","+N+"V"+G+"M"+$+","+I+"V"+O+(y?"H"+W+"L"+ot+","+G+"L"+J+","+O:"")+"H"+et+"V"+I+(y?"H"+J+"L"+ot+","+N+"L"+W+","+I:"")+"Z"+(C?"M"+$+","+z+"H"+Z+"M"+et+","+z+"H"+Q+(w===0?"":"M"+Z+","+F+"V"+_+"M"+Q+","+F+"V"+_):"")):b.select(this).attr("d","M"+N+","+ot+"H"+G+"M"+I+","+$+"H"+O+(y?"V"+W+"L"+G+","+ot+"L"+O+","+J:"")+"V"+et+"H"+I+(y?"V"+J+"L"+N+","+ot+"L"+I+","+W:"")+"Z"+(C?"M"+z+","+$+"V"+Z+"M"+z+","+et+"V"+Q+(w===0?"":"M"+F+","+Z+"H"+_+"M"+F+","+Q+"H"+_):""))})}function r(s,n,l,f){var u=n.x,g=n.y,h=f.bdPos,T=f.bPos,c=l.boxpoints||l.points;P.seedPseudoRandom();var i=function(w){return w.forEach(function(C){C.t=f,C.trace=l}),w},d=s.selectAll("g.points").data(c?i:[]);d.enter().append("g").attr("class","points"),d.exit().remove();var x=d.selectAll("path").data(function(w){var C,y=w.pts2,S=Math.max((w.max-w.min)/10,w.q3-w.q1),M=S*1e-9,a=S*A,E=[],m=0,k;if(l.jitter){if(S===0)for(m=1,E=new Array(y.length),C=0;C<y.length;C++)E[C]=1;else for(C=0;C<y.length;C++){var I=Math.max(0,C-L),O=y[I].v,z=Math.min(y.length-1,C+L),B=y[z].v;c!=="all"&&(y[C].v<w.lf?B=Math.min(B,w.lf):O=Math.max(O,w.uf));var F=Math.sqrt(a*(z-I)/(B-O+M))||0;F=P.constrain(Math.abs(F),0,1),E.push(F),m=Math.max(F,m)}k=l.jitter*2/(m||1)}for(C=0;C<y.length;C++){var _=y[C],N=_.v,G=l.jitter?k*E[C]*(P.pseudoRandom()-.5):0,X=w.pos+T+h*(l.pointpos+G);l.orientation==="h"?(_.y=X,_.x=N):(_.x=X,_.y=N),c==="suspectedoutliers"&&N<w.uo&&N>w.lo&&(_.so=!0)}return y});x.enter().append("path").classed("point",!0),x.exit().remove(),x.call(o.translatePoints,u,g)}function e(s,n,l,f){var u=n.val,g=n.pos,h=!!g.rangebreaks,T=f.bPos,c=f.bPosPxOffset||0,i=l.boxmean||(l.meanline||{}).visible,d,x;Array.isArray(f.bdPos)?(d=f.bdPos[0],x=f.bdPos[1]):(d=f.bdPos,x=f.bdPos);var w=s.selectAll("path.mean").data(l.type==="box"&&l.boxmean||l.type==="violin"&&l.box.visible&&l.meanline.visible?P.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(C){var y=g.c2l(C.pos+T,!0),S=g.l2p(y-d)+c,M=g.l2p(y+x)+c,a=h?(S+M)/2:g.l2p(y)+c,E=u.c2p(C.mean,!0),m=u.c2p(C.mean-C.sd,!0),k=u.c2p(C.mean+C.sd,!0);l.orientation==="h"?b.select(this).attr("d","M"+E+","+S+"V"+M+(i==="sd"?"m0,0L"+m+","+a+"L"+E+","+S+"L"+k+","+a+"Z":"")):b.select(this).attr("d","M"+S+","+E+"H"+M+(i==="sd"?"m0,0L"+a+","+m+"L"+S+","+E+"L"+a+","+k+"Z":""))})}j.exports={plot:v,plotBoxAndWhiskers:p,plotPoints:r,plotBoxMean:e}},8264:function(j){j.exports=function(t,b){var P=t.cd,o=t.xaxis,L=t.yaxis,A=[],v,p;if(b===!1)for(v=0;v<P.length;v++)for(p=0;p<(P[v].pts||[]).length;p++)P[v].pts[p].selected=0;else for(v=0;v<P.length;v++)for(p=0;p<(P[v].pts||[]).length;p++){var r=P[v].pts[p],e=o.c2p(r.x),s=L.c2p(r.y);b.contains([e,s],null,r.i,t)?(A.push({pointNumber:r.i,x:o.c2d(r.x),y:L.c2d(r.y)}),r.selected=1):r.selected=0}return A}},25776:function(j,V,t){var b=t(33428),P=t(76308),o=t(43616);function L(v,p,r){var e=r||b.select(v).selectAll("g.trace.boxes");e.style("opacity",function(s){return s[0].trace.opacity}),e.each(function(s){var n=b.select(this),l=s[0].trace,f=l.line.width;function u(T,c,i,d){T.style("stroke-width",c+"px").call(P.stroke,i).call(P.fill,d)}var g=n.selectAll("path.box");if(l.type==="candlestick")g.each(function(T){if(!T.empty){var c=b.select(this),i=l[T.dir];u(c,i.line.width,i.line.color,i.fillcolor),c.style("opacity",l.selectedpoints&&!T.selected?.3:1)}});else{u(g,f,l.line.color,l.fillcolor),n.selectAll("path.mean").style({"stroke-width":f,"stroke-dasharray":2*f+"px,"+f+"px"}).call(P.stroke,l.line.color);var h=n.selectAll("path.point");o.pointStyle(h,l,v)}})}function A(v,p,r){var e=p[0].trace,s=r.selectAll("path.point");e.selectedpoints?o.selectedPointStyle(s,e):o.pointStyle(s,e,v)}j.exports={style:L,styleOnSelect:A}},64216:function(j,V,t){var b=t(3400).extendFlat,P=t(29736).axisHoverFormat,o=t(20279),L=t(63188);function A(v){return{line:{color:b({},L.line.color,{dflt:v}),width:L.line.width,editType:"style"},fillcolor:L.fillcolor,editType:"style"}}j.exports={xperiod:o.xperiod,xperiod0:o.xperiod0,xperiodalignment:o.xperiodalignment,xhoverformat:P("x"),yhoverformat:P("y"),x:o.x,open:o.open,high:o.high,low:o.low,close:o.close,line:{width:b({},L.line.width,{}),editType:"style"},increasing:A(o.increasing.line.color.dflt),decreasing:A(o.decreasing.line.color.dflt),text:o.text,hovertext:o.hovertext,whiskerwidth:b({},L.whiskerwidth,{dflt:0}),hoverlabel:o.hoverlabel,zorder:L.zorder}},46283:function(j,V,t){var b=t(3400),P=t(54460),o=t(1220),L=t(42812).calcCommon;j.exports=function(v,p){var r=v._fullLayout,e=P.getFromId(v,p.xaxis),s=P.getFromId(v,p.yaxis),n=e.makeCalcdata(p,"x"),l=o(p,e,"x",n).vals,f=L(v,p,n,l,s,A);return f.length?(b.extendFlat(f[0].t,{num:r._numBoxes,dPos:b.distinctVals(l).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,f):[{t:{empty:!0}}]};function A(v,p,r,e){return{min:r,q1:Math.min(v,e),med:e,q3:Math.max(v,e),max:p}}},64588:function(j,V,t){var b=t(3400),P=t(76308),o=t(52744),L=t(31147),A=t(64216);j.exports=function(r,e,s,n){function l(u,g){return b.coerce(r,e,A,u,g)}var f=o(r,e,l,n);if(!f){e.visible=!1;return}L(r,e,n,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),v(r,e,l,"increasing"),v(r,e,l,"decreasing"),l("text"),l("hovertext"),l("whiskerwidth"),n._requestRangeslider[e.xaxis]=!0,l("zorder")};function v(p,r,e,s){var n=e(s+".line.color");e(s+".line.width",r.line.width),e(s+".fillcolor",P.addOpacity(n,.5))}},61712:function(j,V,t){j.exports={moduleType:"trace",name:"candlestick",basePlotModule:t(57952),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:t(64216),layoutAttributes:t(16560),supplyLayoutDefaults:t(68832).supplyLayoutDefaults,crossTraceCalc:t(96404).crossTraceCalc,supplyDefaults:t(64588),calc:t(46283),plot:t(18728).plot,layerName:"boxlayer",style:t(25776).style,hoverPoints:t(18720).hoverPoints,selectPoints:t(97384)}},93504:function(j,V,t){var b=t(63856),P=t(31780);j.exports=function(A,v,p,r,e){var s=r("a");s||(r("da"),r("a0"));var n=r("b");n||(r("db"),r("b0")),o(A,v,p,e)};function o(L,A,v,p){var r=["aaxis","baxis"];r.forEach(function(e){var s=e.charAt(0),n=L[e]||{},l=P.newContainer(A,e),f={noAutotickangles:!0,noTicklabelshift:!0,noTicklabelstandoff:!0,noTicklabelstep:!0,tickfont:"x",id:s+"axis",letter:s,font:A.font,name:e,data:L[s],calendar:A.calendar,dfltColor:p,bgColor:v.paper_bgcolor,autotypenumbersDflt:v.autotypenumbers,fullLayout:v};b(n,l,f),l._categories=l._categories||[],!L[e]&&n.type!=="-"&&(L[e]={type:n.type})})}},51676:function(j,V,t){var b=t(3400).isArrayOrTypedArray;j.exports=function(o){return P(o,0)};function P(o,L){if(!b(o)||L>=10)return null;for(var A=1/0,v=-1/0,p=o.length,r=0;r<p;r++){var e=o[r];if(b(e)){var s=P(e,L+1);s&&(A=Math.min(s[0],A),v=Math.max(s[1],v))}else A=Math.min(e,A),v=Math.max(e,v)}return[A,v]}},85720:function(j,V,t){var b=t(25376),P=t(98692),o=t(22548),L=b({editType:"calc"}),A=t(52904).zorder;L.family.dflt='"Open Sans", verdana, arial, sans-serif',L.size.dflt=12,L.color.dflt=o.defaultLine,j.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:P,baxis:P,font:L,color:{valType:"color",dflt:o.defaultLine,editType:"plot"},transforms:void 0,zorder:A}},77712:function(j,V,t){var b=t(3400).isArrayOrTypedArray;j.exports=function(P,o,L,A){var v,p,r,e,s,n,l,f,u,g,h,T,c,i=b(L)?"a":"b",d=i==="a"?P.aaxis:P.baxis,x=d.smoothing,w=i==="a"?P.a2i:P.b2j,C=i==="a"?L:A,y=i==="a"?A:L,S=i==="a"?o.a.length:o.b.length,M=i==="a"?o.b.length:o.a.length,a=Math.floor(i==="a"?P.b2j(y):P.a2i(y)),E=i==="a"?function($){return P.evalxy([],$,a)}:function($){return P.evalxy([],a,$)};x&&(r=Math.max(0,Math.min(M-2,a)),e=a-r,p=i==="a"?function($,et){return P.dxydi([],$,r,et,e)}:function($,et){return P.dxydj([],r,$,e,et)});var m=w(C[0]),k=w(C[1]),I=m<k?1:-1,O=(k-m)*1e-8,z=I>0?Math.floor:Math.ceil,B=I>0?Math.ceil:Math.floor,F=I>0?Math.min:Math.max,_=I>0?Math.max:Math.min,N=z(m+O),G=B(k-O);l=E(m);var X=[[l]];for(v=N;v*I<G*I;v+=I)s=[],h=_(m,v),T=F(k,v+I),c=T-h,n=Math.max(0,Math.min(S-2,Math.floor(.5*(h+T)))),f=E(T),x&&(u=p(n,h-n),g=p(n,T-n),s.push([l[0]+u[0]/3*c,l[1]+u[1]/3*c]),s.push([f[0]-g[0]/3*c,f[1]-g[1]/3*c])),s.push(f),X.push(s),l=f;return X}},98692:function(j,V,t){var b=t(25376),P=t(22548),o=t(94724),L=t(29736).descriptionWithDates,A=t(67824).overrideAll,v=t(98192).u,p=t(92880).extendFlat;j.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:b({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:o.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},labelalias:p({},o.labelalias,{editType:"calc"}),tickfont:b({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:L("tick label")},tickformatstops:A(o.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:P.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:p({},v,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:p({},v,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:P.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:b({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},63856:function(j,V,t){var b=t(85720),P=t(76308).addOpacity,o=t(24040),L=t(3400),A=t(26332),v=t(95936),p=t(42568),r=t(22416),e=t(78344),s=t(52976);j.exports=function(f,u,g){var h=g.letter,T=g.font||{},c=b[h+"axis"];function i(N,G){return L.coerce(f,u,c,N,G)}function d(N,G){return L.coerce2(f,u,c,N,G)}g.name&&(u._name=g.name,u._id=g.name),i("autotypenumbers",g.autotypenumbersDflt);var x=i("type");if(x==="-"&&(g.data&&n(u,g.data),u.type==="-"?u.type="linear":x=f.type=u.type),i("smoothing"),i("cheatertype"),i("showticklabels"),i("labelprefix",h+" = "),i("labelsuffix"),i("showtickprefix"),i("showticksuffix"),i("separatethousands"),i("tickformat"),i("exponentformat"),i("minexponent"),i("showexponent"),i("categoryorder"),i("tickmode"),i("tickvals"),i("ticktext"),i("tick0"),i("dtick"),u.tickmode==="array"&&(i("arraytick0"),i("arraydtick")),i("labelpadding"),u._hovertitle=h,x==="date"){var w=o.getComponentMethod("calendars","handleDefaults");w(f,u,"calendar",g.calendar)}e(u,g.fullLayout),u.c2p=L.identity;var C=i("color",g.dfltColor),y=C===f.color?C:T.color,S=i("title.text");S&&(L.coerceFont(i,"title.font",T,{overrideDflt:{size:L.bigFont(T.size),color:y}}),i("title.offset")),i("tickangle");var M=i("autorange",!u.isValidRange(f.range));M&&i("rangemode"),i("range"),u.cleanRange(),i("fixedrange"),A(f,u,i,x),p(f,u,i,x,g),v(f,u,i,x,g),r(f,u,i,{data:g.data,dataAttr:h});var a=d("gridcolor",P(C,.3)),E=d("gridwidth"),m=d("griddash"),k=i("showgrid");k||(delete u.gridcolor,delete u.gridwidth,delete u.griddash);var I=d("startlinecolor",C),O=d("startlinewidth",E),z=i("startline",u.showgrid||!!I||!!O);z||(delete u.startlinecolor,delete u.startlinewidth);var B=d("endlinecolor",C),F=d("endlinewidth",E),_=i("endline",u.showgrid||!!B||!!F);return _||(delete u.endlinecolor,delete u.endlinewidth),k?(i("minorgridcount"),i("minorgridwidth",E),i("minorgriddash",m),i("minorgridcolor",P(a,.06)),u.minorgridcount||(delete u.minorgridwidth,delete u.minorgriddash,delete u.minorgridcolor)):(delete u.gridcolor,delete u.gridwidth,delete u.griddash),u.showticklabels==="none"&&(delete u.tickfont,delete u.tickangle,delete u.showexponent,delete u.exponentformat,delete u.minexponent,delete u.tickformat,delete u.showticksuffix,delete u.showtickprefix),u.showticksuffix||delete u.ticksuffix,u.showtickprefix||delete u.tickprefix,i("tickmode"),u};function n(l,f){if(l.type==="-"){var u=l._id,g=u.charAt(0),h=g+"calendar",T=l[h];l.type=s(f,T,{autotypenumbers:l.autotypenumbers})}}},58744:function(j,V,t){var b=t(54460),P=t(3400).isArray1D,o=t(60776),L=t(51676),A=t(19216),v=t(14724),p=t(24944),r=t(26136),e=t(51512),s=t(2872),n=t(81e3);j.exports=function(f,u){var g=b.getFromId(f,u.xaxis),h=b.getFromId(f,u.yaxis),T=u.aaxis,c=u.baxis,i=u.x,d=u.y,x=[];i&&P(i)&&x.push("x"),d&&P(d)&&x.push("y"),x.length&&s(u,T,c,"a","b",x);var w=u._a=u._a||u.a,C=u._b=u._b||u.b;i=u._x||u.x,d=u._y||u.y;var y={};if(u._cheater){var S=T.cheatertype==="index"?w.length:w,M=c.cheatertype==="index"?C.length:C;i=o(S,M,u.cheaterslope)}u._x=i=r(i),u._y=d=r(d),e(i,w,C),e(d,w,C),n(u),u.setScale();var a=L(i),E=L(d),m=.5*(a[1]-a[0]),k=.5*(a[1]+a[0]),I=.5*(E[1]-E[0]),O=.5*(E[1]+E[0]),z=1.3;return a=[k-m*z,k+m*z],E=[O-I*z,O+I*z],u._extremes[g._id]=b.findExtremes(g,a,{padded:!0}),u._extremes[h._id]=b.findExtremes(h,E,{padded:!0}),A(u,"a","b"),A(u,"b","a"),v(u,T),v(u,c),y.clipsegments=p(u._xctrl,u._yctrl,T,c),y.x=i,y.y=d,y.a=w,y.b=C,[y]}},24944:function(j){j.exports=function(t,b,P,o){var L,A,v,p=[],r=!!P.smoothing,e=!!o.smoothing,s=t[0].length-1,n=t.length-1;for(L=0,A=[],v=[];L<=s;L++)A[L]=t[0][L],v[L]=b[0][L];for(p.push({x:A,y:v,bicubic:r}),L=0,A=[],v=[];L<=n;L++)A[L]=t[L][s],v[L]=b[L][s];for(p.push({x:A,y:v,bicubic:e}),L=s,A=[],v=[];L>=0;L--)A[s-L]=t[n][L],v[s-L]=b[n][L];for(p.push({x:A,y:v,bicubic:r}),L=n,A=[],v=[];L>=0;L--)A[n-L]=t[L][0],v[n-L]=b[L][0];return p.push({x:A,y:v,bicubic:e}),p}},19216:function(j,V,t){var b=t(54460),P=t(92880).extendFlat;j.exports=function(L,A,v){var p,r,e,s,n,l,f,u,g,h,T,c,i,d,x=L["_"+A],w=L[A+"axis"],C=w._gridlines=[],y=w._minorgridlines=[],S=w._boundarylines=[],M=L["_"+v],a=L[v+"axis"];w.tickmode==="array"&&(w.tickvals=x.slice());var E=L._xctrl,m=L._yctrl,k=E[0].length,I=E.length,O=L._a.length,z=L._b.length;b.prepTicks(w),w.tickmode==="array"&&delete w.tickvals;var B=w.smoothing?3:1;function F(N){var G,X,$,et,ot,nt,Z,Q,W,J,it,K,H=[],at=[],tt={};if(A==="b")for(X=L.b2j(N),$=Math.floor(Math.max(0,Math.min(z-2,X))),et=X-$,tt.length=z,tt.crossLength=O,tt.xy=function(lt){return L.evalxy([],lt,X)},tt.dxy=function(lt,dt){return L.dxydi([],lt,$,dt,et)},G=0;G<O;G++)nt=Math.min(O-2,G),Z=G-nt,Q=L.evalxy([],G,X),a.smoothing&&G>0&&(W=L.dxydi([],G-1,$,0,et),H.push(ot[0]+W[0]/3),at.push(ot[1]+W[1]/3),J=L.dxydi([],G-1,$,1,et),H.push(Q[0]-J[0]/3),at.push(Q[1]-J[1]/3)),H.push(Q[0]),at.push(Q[1]),ot=Q;else for(G=L.a2i(N),nt=Math.floor(Math.max(0,Math.min(O-2,G))),Z=G-nt,tt.length=O,tt.crossLength=z,tt.xy=function(lt){return L.evalxy([],G,lt)},tt.dxy=function(lt,dt){return L.dxydj([],nt,lt,Z,dt)},X=0;X<z;X++)$=Math.min(z-2,X),et=X-$,Q=L.evalxy([],G,X),a.smoothing&&X>0&&(it=L.dxydj([],nt,X-1,Z,0),H.push(ot[0]+it[0]/3),at.push(ot[1]+it[1]/3),K=L.dxydj([],nt,X-1,Z,1),H.push(Q[0]-K[0]/3),at.push(Q[1]-K[1]/3)),H.push(Q[0]),at.push(Q[1]),ot=Q;return tt.axisLetter=A,tt.axis=w,tt.crossAxis=a,tt.value=N,tt.constvar=v,tt.index=u,tt.x=H,tt.y=at,tt.smoothing=a.smoothing,tt}function _(N){var G,X,$,et,ot,nt=[],Z=[],Q={};if(Q.length=x.length,Q.crossLength=M.length,A==="b")for($=Math.max(0,Math.min(z-2,N)),ot=Math.min(1,Math.max(0,N-$)),Q.xy=function(W){return L.evalxy([],W,N)},Q.dxy=function(W,J){return L.dxydi([],W,$,J,ot)},G=0;G<k;G++)nt[G]=E[N*B][G],Z[G]=m[N*B][G];else for(X=Math.max(0,Math.min(O-2,N)),et=Math.min(1,Math.max(0,N-X)),Q.xy=function(W){return L.evalxy([],N,W)},Q.dxy=function(W,J){return L.dxydj([],X,W,et,J)},G=0;G<I;G++)nt[G]=E[G][N*B],Z[G]=m[G][N*B];return Q.axisLetter=A,Q.axis=w,Q.crossAxis=a,Q.value=x[N],Q.constvar=v,Q.index=N,Q.x=nt,Q.y=Z,Q.smoothing=a.smoothing,Q}if(w.tickmode==="array"){for(s=5e-15,n=[Math.floor((x.length-1-w.arraytick0)/w.arraydtick*(1+s)),Math.ceil(-w.arraytick0/w.arraydtick/(1+s))].sort(function(N,G){return N-G}),l=n[0]-1,f=n[1]+1,u=l;u<f;u++)r=w.arraytick0+w.arraydtick*u,!(r<0||r>x.length-1)&&C.push(P(_(r),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(u=l;u<f;u++)if(e=w.arraytick0+w.arraydtick*u,T=Math.min(e+w.arraydtick,x.length-1),!(e<0||e>x.length-1)&&!(T<0||T>x.length-1))for(c=x[e],i=x[T],p=0;p<w.minorgridcount;p++)d=T-e,!(d<=0)&&(h=c+(i-c)*(p+1)/(w.minorgridcount+1)*(w.arraydtick/d),!(h<x[0]||h>x[x.length-1])&&y.push(P(F(h),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash})));w.startline&&S.push(P(_(0),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&S.push(P(_(x.length-1),{color:w.endlinecolor,width:w.endlinewidth}))}else{for(s=5e-15,n=[Math.floor((x[x.length-1]-w.tick0)/w.dtick*(1+s)),Math.ceil((x[0]-w.tick0)/w.dtick/(1+s))].sort(function(N,G){return N-G}),l=n[0],f=n[1],u=l;u<=f;u++)g=w.tick0+w.dtick*u,C.push(P(F(g),{color:w.gridcolor,width:w.gridwidth,dash:w.griddash}));for(u=l-1;u<f+1;u++)for(g=w.tick0+w.dtick*u,p=0;p<w.minorgridcount;p++)h=g+w.dtick*(p+1)/(w.minorgridcount+1),!(h<x[0]||h>x[x.length-1])&&y.push(P(F(h),{color:w.minorgridcolor,width:w.minorgridwidth,dash:w.minorgriddash}));w.startline&&S.push(P(F(x[0]),{color:w.startlinecolor,width:w.startlinewidth})),w.endline&&S.push(P(F(x[x.length-1]),{color:w.endlinecolor,width:w.endlinewidth}))}}},14724:function(j,V,t){var b=t(54460),P=t(92880).extendFlat;j.exports=function(L,A){var v,p,r,e,s,n=A._labels=[],l=A._gridlines;for(v=0;v<l.length;v++)s=l[v],["start","both"].indexOf(A.showticklabels)!==-1&&(p=b.tickText(A,s.value),P(p,{prefix:r,suffix:e,endAnchor:!0,xy:s.xy(0),dxy:s.dxy(0,0),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:v===0,isLast:v===l.length-1}),n.push(p)),["end","both"].indexOf(A.showticklabels)!==-1&&(p=b.tickText(A,s.value),P(p,{endAnchor:!1,xy:s.xy(s.crossLength-1),dxy:s.dxy(s.crossLength-2,1),axis:s.axis,length:s.crossAxis.length,font:s.axis.tickfont,isFirst:v===0,isLast:v===l.length-1}),n.push(p))}},62284:function(j){var V=.5;j.exports=function(b,P,o,L){var A=b[0]-P[0],v=b[1]-P[1],p=o[0]-P[0],r=o[1]-P[1],e=Math.pow(A*A+v*v,V/2),s=Math.pow(p*p+r*r,V/2),n=(s*s*A-e*e*p)*L,l=(s*s*v-e*e*r)*L,f=s*(e+s)*3,u=e*(e+s)*3;return[[P[0]+(f&&n/f),P[1]+(f&&l/f)],[P[0]-(u&&n/u),P[1]-(u&&l/u)]]}},60776:function(j,V,t){var b=t(3400).isArrayOrTypedArray;j.exports=function(P,o,L){var A,v,p,r,e,s,n=[],l=b(P)?P.length:P,f=b(o)?o.length:o,u=b(P)?P:null,g=b(o)?o:null;u&&(p=(u.length-1)/(u[u.length-1]-u[0])/(l-1)),g&&(r=(g.length-1)/(g[g.length-1]-g[0])/(f-1));var h,T=1/0,c=-1/0;for(v=0;v<f;v++)for(n[v]=[],s=g?(g[v]-g[0])*r:v/(f-1),A=0;A<l;A++)e=u?(u[A]-u[0])*p:A/(l-1),h=e-s*L,T=Math.min(h,T),c=Math.max(h,c),n[v][A]=h;var i=1/(c-T),d=-T*i;for(v=0;v<f;v++)for(A=0;A<l;A++)n[v][A]=i*n[v][A]+d;return n}},30180:function(j,V,t){var b=t(62284),P=t(3400).ensureArray;function o(L,A,v){var p=-.5*v[0]+1.5*A[0],r=-.5*v[1]+1.5*A[1];return[(2*p+L[0])/3,(2*r+L[1])/3]}j.exports=function(A,v,p,r,e,s){var n,l,f,u,g,h,T,c,i,d,x=p[0].length,w=p.length,C=e?3*x-2:x,y=s?3*w-2:w;for(A=P(A,y),v=P(v,y),f=0;f<y;f++)A[f]=P(A[f],C),v[f]=P(v[f],C);for(l=0,u=0;l<w;l++,u+=s?3:1)for(g=A[u],h=v[u],T=p[l],c=r[l],n=0,f=0;n<x;n++,f+=e?3:1)g[f]=T[n],h[f]=c[n];if(e)for(l=0,u=0;l<w;l++,u+=s?3:1){for(n=1,f=3;n<x-1;n++,f+=3)i=b([p[l][n-1],r[l][n-1]],[p[l][n],r[l][n]],[p[l][n+1],r[l][n+1]],e),A[u][f-1]=i[0][0],v[u][f-1]=i[0][1],A[u][f+1]=i[1][0],v[u][f+1]=i[1][1];d=o([A[u][0],v[u][0]],[A[u][2],v[u][2]],[A[u][3],v[u][3]]),A[u][1]=d[0],v[u][1]=d[1],d=o([A[u][C-1],v[u][C-1]],[A[u][C-3],v[u][C-3]],[A[u][C-4],v[u][C-4]]),A[u][C-2]=d[0],v[u][C-2]=d[1]}if(s)for(f=0;f<C;f++){for(u=3;u<y-3;u+=3)i=b([A[u-3][f],v[u-3][f]],[A[u][f],v[u][f]],[A[u+3][f],v[u+3][f]],s),A[u-1][f]=i[0][0],v[u-1][f]=i[0][1],A[u+1][f]=i[1][0],v[u+1][f]=i[1][1];d=o([A[0][f],v[0][f]],[A[2][f],v[2][f]],[A[3][f],v[3][f]]),A[1][f]=d[0],v[1][f]=d[1],d=o([A[y-1][f],v[y-1][f]],[A[y-3][f],v[y-3][f]],[A[y-4][f],v[y-4][f]]),A[y-2][f]=d[0],v[y-2][f]=d[1]}if(e&&s)for(u=1;u<y;u+=(u+1)%3===0?2:1){for(f=3;f<C-3;f+=3)i=b([A[u][f-3],v[u][f-3]],[A[u][f],v[u][f]],[A[u][f+3],v[u][f+3]],e),A[u][f-1]=.5*(A[u][f-1]+i[0][0]),v[u][f-1]=.5*(v[u][f-1]+i[0][1]),A[u][f+1]=.5*(A[u][f+1]+i[1][0]),v[u][f+1]=.5*(v[u][f+1]+i[1][1]);d=o([A[u][0],v[u][0]],[A[u][2],v[u][2]],[A[u][3],v[u][3]]),A[u][1]=.5*(A[u][1]+d[0]),v[u][1]=.5*(v[u][1]+d[1]),d=o([A[u][C-1],v[u][C-1]],[A[u][C-3],v[u][C-3]],[A[u][C-4],v[u][C-4]]),A[u][C-2]=.5*(A[u][C-2]+d[0]),v[u][C-2]=.5*(v[u][C-2]+d[1])}return[A,v]}},24588:function(j){j.exports={RELATIVE_CULL_TOLERANCE:1e-6}},26435:function(j){j.exports=function(V,t,b){return t&&b?function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n,l;o*=3,L*=3;var f=A*A,u=1-A,g=u*u,h=u*A*2,T=-3*g,c=3*(g-h),i=3*(h-f),d=3*f,x=v*v,w=x*v,C=1-v,y=C*C,S=y*C;for(l=0;l<V.length;l++)n=V[l],p=T*n[L][o]+c*n[L][o+1]+i*n[L][o+2]+d*n[L][o+3],r=T*n[L+1][o]+c*n[L+1][o+1]+i*n[L+1][o+2]+d*n[L+1][o+3],e=T*n[L+2][o]+c*n[L+2][o+1]+i*n[L+2][o+2]+d*n[L+2][o+3],s=T*n[L+3][o]+c*n[L+3][o+1]+i*n[L+3][o+2]+d*n[L+3][o+3],P[l]=S*p+3*(y*v*r+C*x*e)+w*s;return P}:t?function(P,o,L,A,v){P||(P=[]);var p,r,e,s;o*=3;var n=A*A,l=1-A,f=l*l,u=l*A*2,g=-3*f,h=3*(f-u),T=3*(u-n),c=3*n,i=1-v;for(e=0;e<V.length;e++)s=V[e],p=g*s[L][o]+h*s[L][o+1]+T*s[L][o+2]+c*s[L][o+3],r=g*s[L+1][o]+h*s[L+1][o+1]+T*s[L+1][o+2]+c*s[L+1][o+3],P[e]=i*p+v*r;return P}:b?function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n,l;L*=3;var f=v*v,u=f*v,g=1-v,h=g*g,T=h*g;for(n=0;n<V.length;n++)l=V[n],p=l[L][o+1]-l[L][o],r=l[L+1][o+1]-l[L+1][o],e=l[L+2][o+1]-l[L+2][o],s=l[L+3][o+1]-l[L+3][o],P[n]=T*p+3*(h*v*r+g*f*e)+u*s;return P}:function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n=1-v;for(e=0;e<V.length;e++)s=V[e],p=s[L][o+1]-s[L][o],r=s[L+1][o+1]-s[L+1][o],P[e]=n*p+v*r;return P}}},24464:function(j){j.exports=function(V,t,b){return t&&b?function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n,l;o*=3,L*=3;var f=A*A,u=f*A,g=1-A,h=g*g,T=h*g,c=v*v,i=1-v,d=i*i,x=i*v*2,w=-3*d,C=3*(d-x),y=3*(x-c),S=3*c;for(l=0;l<V.length;l++)n=V[l],p=w*n[L][o]+C*n[L+1][o]+y*n[L+2][o]+S*n[L+3][o],r=w*n[L][o+1]+C*n[L+1][o+1]+y*n[L+2][o+1]+S*n[L+3][o+1],e=w*n[L][o+2]+C*n[L+1][o+2]+y*n[L+2][o+2]+S*n[L+3][o+2],s=w*n[L][o+3]+C*n[L+1][o+3]+y*n[L+2][o+3]+S*n[L+3][o+3],P[l]=T*p+3*(h*A*r+g*f*e)+u*s;return P}:t?function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n,l;o*=3;var f=v*v,u=f*v,g=1-v,h=g*g,T=h*g;for(n=0;n<V.length;n++)l=V[n],p=l[L+1][o]-l[L][o],r=l[L+1][o+1]-l[L][o+1],e=l[L+1][o+2]-l[L][o+2],s=l[L+1][o+3]-l[L][o+3],P[n]=T*p+3*(h*v*r+g*f*e)+u*s;return P}:b?function(P,o,L,A,v){P||(P=[]);var p,r,e,s;L*=3;var n=1-A,l=v*v,f=1-v,u=f*f,g=f*v*2,h=-3*u,T=3*(u-g),c=3*(g-l),i=3*l;for(e=0;e<V.length;e++)s=V[e],p=h*s[L][o]+T*s[L+1][o]+c*s[L+2][o]+i*s[L+3][o],r=h*s[L][o+1]+T*s[L+1][o+1]+c*s[L+2][o+1]+i*s[L+3][o+1],P[e]=n*p+A*r;return P}:function(P,o,L,A,v){P||(P=[]);var p,r,e,s,n=1-A;for(e=0;e<V.length;e++)s=V[e],p=s[L+1][o]-s[L][o],r=s[L+1][o+1]-s[L][o+1],P[e]=n*p+A*r;return P}}},29056:function(j){j.exports=function(V,t,b,P,o){var L=t-2,A=b-2;return P&&o?function(v,p,r){v||(v=[]);var e,s,n,l,f,u,g=Math.max(0,Math.min(Math.floor(p),L)),h=Math.max(0,Math.min(Math.floor(r),A)),T=Math.max(0,Math.min(1,p-g)),c=Math.max(0,Math.min(1,r-h));g*=3,h*=3;var i=T*T,d=i*T,x=1-T,w=x*x,C=w*x,y=c*c,S=y*c,M=1-c,a=M*M,E=a*M;for(u=0;u<V.length;u++)f=V[u],e=C*f[h][g]+3*(w*T*f[h][g+1]+x*i*f[h][g+2])+d*f[h][g+3],s=C*f[h+1][g]+3*(w*T*f[h+1][g+1]+x*i*f[h+1][g+2])+d*f[h+1][g+3],n=C*f[h+2][g]+3*(w*T*f[h+2][g+1]+x*i*f[h+2][g+2])+d*f[h+2][g+3],l=C*f[h+3][g]+3*(w*T*f[h+3][g+1]+x*i*f[h+3][g+2])+d*f[h+3][g+3],v[u]=E*e+3*(a*c*s+M*y*n)+S*l;return v}:P?function(v,p,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(p),L)),s=Math.max(0,Math.min(Math.floor(r),A)),n=Math.max(0,Math.min(1,p-e)),l=Math.max(0,Math.min(1,r-s)),f,u,g,h,T,c;e*=3;var i=n*n,d=i*n,x=1-n,w=x*x,C=w*x,y=1-l;for(T=0;T<V.length;T++)c=V[T],f=y*c[s][e]+l*c[s+1][e],u=y*c[s][e+1]+l*c[s+1][e+1],g=y*c[s][e+2]+l*c[s+1][e+1],h=y*c[s][e+3]+l*c[s+1][e+1],v[T]=C*f+3*(w*n*u+x*i*g)+d*h;return v}:o?function(v,p,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(p),L)),s=Math.max(0,Math.min(Math.floor(r),A)),n=Math.max(0,Math.min(1,p-e)),l=Math.max(0,Math.min(1,r-s)),f,u,g,h,T,c;s*=3;var i=l*l,d=i*l,x=1-l,w=x*x,C=w*x,y=1-n;for(T=0;T<V.length;T++)c=V[T],f=y*c[s][e]+n*c[s][e+1],u=y*c[s+1][e]+n*c[s+1][e+1],g=y*c[s+2][e]+n*c[s+2][e+1],h=y*c[s+3][e]+n*c[s+3][e+1],v[T]=C*f+3*(w*l*u+x*i*g)+d*h;return v}:function(v,p,r){v||(v=[]);var e=Math.max(0,Math.min(Math.floor(p),L)),s=Math.max(0,Math.min(Math.floor(r),A)),n=Math.max(0,Math.min(1,p-e)),l=Math.max(0,Math.min(1,r-s)),f,u,g,h,T=1-l,c=1-n;for(g=0;g<V.length;g++)h=V[g],f=c*h[s][e]+n*h[s][e+1],u=c*h[s+1][e]+n*h[s+1][e+1],v[g]=T*f+l*u;return v}}},38356:function(j,V,t){var b=t(3400),P=t(86411),o=t(93504),L=t(85720),A=t(22548);j.exports=function(p,r,e,s){function n(u,g){return b.coerce(p,r,L,u,g)}r._clipPathId="clip"+r.uid+"carpet";var l=n("color",A.defaultLine);if(b.coerceFont(n,"font",s.font),n("carpet"),o(p,r,s,n,l),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var f=P(p,r,n);f||(r.visible=!1),r._cheater&&n("cheaterslope"),n("zorder")}},95856:function(j,V,t){j.exports={attributes:t(85720),supplyDefaults:t(38356),plot:t(164),calc:t(58744),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:t(57952),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},50948:function(j){j.exports=function(V,t){for(var b=V._fullData.length,P,o=0;o<b;o++){var L=V._fullData[o];if(L.index!==t.index&&L.type==="carpet"&&(P||(P=L),L.carpet===t.carpet))return L}return P}},53416:function(j){j.exports=function(t,b,P){if(t.length===0)return"";var o,L=[],A=P?3:1;for(o=0;o<t.length;o+=A)L.push(t[o]+","+b[o]),P&&o<t.length-A&&(L.push("C"),L.push([t[o+1]+","+b[o+1],t[o+2]+","+b[o+2]+" "].join(" ")));return L.join(P?"":"L")}},87072:function(j,V,t){var b=t(3400).isArrayOrTypedArray;j.exports=function(o,L,A){var v;for(b(o)?o.length>L.length&&(o=o.slice(0,L.length)):o=[],v=0;v<L.length;v++)o[v]=A(L[v]);return o}},15584:function(j){j.exports=function(t,b,P,o,L,A){var v=L[0]*t.dpdx(b),p=L[1]*t.dpdy(P),r=1,e=1;if(A){var s=Math.sqrt(L[0]*L[0]+L[1]*L[1]),n=Math.sqrt(A[0]*A[0]+A[1]*A[1]),l=(L[0]*A[0]+L[1]*A[1])/s/n;e=Math.max(0,l)}var f=Math.atan2(p,v)*180/Math.PI;return f<-90?(f+=180,r=-r):f>90&&(f-=180,r=-r),{angle:f,flip:r,p:t.c2p(o,b,P),offsetMultplier:e}}},164:function(j,V,t){var b=t(33428),P=t(43616),o=t(87072),L=t(53416),A=t(15584),v=t(72736),p=t(3400),r=p.strRotate,e=p.strTranslate,s=t(84284);j.exports=function(i,d,x,w){var C=i._context.staticPlot,y=d.xaxis,S=d.yaxis,M=i._fullLayout,a=M._clips;p.makeTraceGroups(w,x,"trace").each(function(E){var m=b.select(this),k=E[0],I=k.trace,O=I.aaxis,z=I.baxis,B=p.ensureSingle(m,"g","minorlayer"),F=p.ensureSingle(m,"g","majorlayer"),_=p.ensureSingle(m,"g","boundarylayer"),N=p.ensureSingle(m,"g","labellayer");m.style("opacity",I.opacity),l(y,S,F,O,"a",O._gridlines,!0),l(y,S,F,z,"b",z._gridlines,!0),l(y,S,B,O,"a",O._minorgridlines,!0),l(y,S,B,z,"b",z._minorgridlines,!0),l(y,S,_,O,"a-boundary",O._boundarylines,C),l(y,S,_,z,"b-boundary",z._boundarylines,C);var G=f(i,y,S,I,k,N,O._labels,"a-label"),X=f(i,y,S,I,k,N,z._labels,"b-label");u(i,N,I,k,y,S,G,X),n(I,k,a,y,S)})};function n(c,i,d,x,w){var C,y,S,M,a=d.select("#"+c._clipPathId);a.size()||(a=d.append("clipPath").classed("carpetclip",!0));var E=p.ensureSingle(a,"path","carpetboundary"),m=i.clipsegments,k=[];for(M=0;M<m.length;M++)C=m[M],y=o([],C.x,x.c2p),S=o([],C.y,w.c2p),k.push(L(y,S,C.bicubic));var I="M"+k.join("L")+"Z";a.attr("id",c._clipPathId),E.attr("d",I)}function l(c,i,d,x,w,C,y){var S="const-"+w+"-lines",M=d.selectAll("."+S).data(C);M.enter().append("path").classed(S,!0).style("vector-effect",y?"none":"non-scaling-stroke"),M.each(function(a){var E=a,m=E.x,k=E.y,I=o([],m,c.c2p),O=o([],k,i.c2p),z="M"+L(I,O,E.smoothing),B=b.select(this);B.attr("d",z).style("stroke-width",E.width).style("stroke",E.color).style("stroke-dasharray",P.dashStyle(E.dash,E.width)).style("fill","none")}),M.exit().remove()}function f(c,i,d,x,w,C,y,S){var M=C.selectAll("text."+S).data(y);M.enter().append("text").classed(S,!0);var a=0,E={};return M.each(function(m,k){var I;if(m.axis.tickangle==="auto")I=A(x,i,d,m.xy,m.dxy);else{var O=(m.axis.tickangle+180)*Math.PI/180;I=A(x,i,d,m.xy,[Math.cos(O),Math.sin(O)])}k||(E={angle:I.angle,flip:I.flip});var z=(m.endAnchor?-1:1)*I.flip,B=b.select(this).attr({"text-anchor":z>0?"start":"end","data-notex":1}).call(P.font,m.font).text(m.text).call(v.convertToTspans,c),F=P.bBox(this);B.attr("transform",e(I.p[0],I.p[1])+r(I.angle)+e(m.axis.labelpadding*z,F.height*.3)),a=Math.max(a,F.width+m.axis.labelpadding)}),M.exit().remove(),E.maxExtent=a,E}function u(c,i,d,x,w,C,y,S){var M,a,E,m,k=p.aggNums(Math.min,null,d.a),I=p.aggNums(Math.max,null,d.a),O=p.aggNums(Math.min,null,d.b),z=p.aggNums(Math.max,null,d.b);M=.5*(k+I),a=O,E=d.ab2xy(M,a,!0),m=d.dxyda_rough(M,a),y.angle===void 0&&p.extendFlat(y,A(d,w,C,E,d.dxydb_rough(M,a))),T(c,i,d,x,E,m,d.aaxis,w,C,y,"a-title"),M=k,a=.5*(O+z),E=d.ab2xy(M,a,!0),m=d.dxydb_rough(M,a),S.angle===void 0&&p.extendFlat(S,A(d,w,C,E,d.dxyda_rough(M,a))),T(c,i,d,x,E,m,d.baxis,w,C,S,"b-title")}var g=s.LINE_SPACING,h=(1-s.MID_SHIFT)/g+1;function T(c,i,d,x,w,C,y,S,M,a,E){var m=[];y.title.text&&m.push(y.title.text);var k=i.selectAll("text."+E).data(m),I=a.maxExtent;k.enter().append("text").classed(E,!0),k.each(function(){var O=A(d,S,M,w,C);["start","both"].indexOf(y.showticklabels)===-1&&(I=0);var z=y.title.font.size;I+=z+y.title.offset;var B=a.angle+(a.flip<0?180:0),F=(B-O.angle+450)%360,_=F>90&&F<270,N=b.select(this);N.text(y.title.text).call(v.convertToTspans,c),_&&(I=(-v.lineCount(N)+h)*g*z-I),N.attr("transform",e(O.p[0],O.p[1])+r(O.angle)+e(0,I)).attr("text-anchor","middle").call(P.font,y.title.font)}),k.exit().remove()}},81e3:function(j,V,t){var b=t(24588),P=t(14952).findBin,o=t(30180),L=t(29056),A=t(26435),v=t(24464);j.exports=function(r){var e=r._a,s=r._b,n=e.length,l=s.length,f=r.aaxis,u=r.baxis,g=e[0],h=e[n-1],T=s[0],c=s[l-1],i=e[e.length-1]-e[0],d=s[s.length-1]-s[0],x=i*b.RELATIVE_CULL_TOLERANCE,w=d*b.RELATIVE_CULL_TOLERANCE;g-=x,h+=x,T-=w,c+=w,r.isVisible=function(C,y){return C>g&&C<h&&y>T&&y<c},r.isOccluded=function(C,y){return C<g||C>h||y<T||y>c},r.setScale=function(){var C=r._x,y=r._y,S=o(r._xctrl,r._yctrl,C,y,f.smoothing,u.smoothing);r._xctrl=S[0],r._yctrl=S[1],r.evalxy=L([r._xctrl,r._yctrl],n,l,f.smoothing,u.smoothing),r.dxydi=A([r._xctrl,r._yctrl],f.smoothing,u.smoothing),r.dxydj=v([r._xctrl,r._yctrl],f.smoothing,u.smoothing)},r.i2a=function(C){var y=Math.max(0,Math.floor(C[0]),n-2),S=C[0]-y;return(1-S)*e[y]+S*e[y+1]},r.j2b=function(C){var y=Math.max(0,Math.floor(C[1]),n-2),S=C[1]-y;return(1-S)*s[y]+S*s[y+1]},r.ij2ab=function(C){return[r.i2a(C[0]),r.j2b(C[1])]},r.a2i=function(C){var y=Math.max(0,Math.min(P(C,e),n-2)),S=e[y],M=e[y+1];return Math.max(0,Math.min(n-1,y+(C-S)/(M-S)))},r.b2j=function(C){var y=Math.max(0,Math.min(P(C,s),l-2)),S=s[y],M=s[y+1];return Math.max(0,Math.min(l-1,y+(C-S)/(M-S)))},r.ab2ij=function(C){return[r.a2i(C[0]),r.b2j(C[1])]},r.i2c=function(C,y){return r.evalxy([],C,y)},r.ab2xy=function(C,y,S){if(!S&&(C<e[0]||C>e[n-1]|y<s[0]||y>s[l-1]))return[!1,!1];var M=r.a2i(C),a=r.b2j(y),E=r.evalxy([],M,a);if(S){var m=0,k=0,I=[],O,z,B,F;C<e[0]?(O=0,z=0,m=(C-e[0])/(e[1]-e[0])):C>e[n-1]?(O=n-2,z=1,m=(C-e[n-1])/(e[n-1]-e[n-2])):(O=Math.max(0,Math.min(n-2,Math.floor(M))),z=M-O),y<s[0]?(B=0,F=0,k=(y-s[0])/(s[1]-s[0])):y>s[l-1]?(B=l-2,F=1,k=(y-s[l-1])/(s[l-1]-s[l-2])):(B=Math.max(0,Math.min(l-2,Math.floor(a))),F=a-B),m&&(r.dxydi(I,O,B,z,F),E[0]+=I[0]*m,E[1]+=I[1]*m),k&&(r.dxydj(I,O,B,z,F),E[0]+=I[0]*k,E[1]+=I[1]*k)}return E},r.c2p=function(C,y,S){return[y.c2p(C[0]),S.c2p(C[1])]},r.p2x=function(C,y,S){return[y.p2c(C[0]),S.p2c(C[1])]},r.dadi=function(C){var y=Math.max(0,Math.min(e.length-2,C));return e[y+1]-e[y]},r.dbdj=function(C){var y=Math.max(0,Math.min(s.length-2,C));return s[y+1]-s[y]},r.dxyda=function(C,y,S,M){var a=r.dxydi(null,C,y,S,M),E=r.dadi(C,S);return[a[0]/E,a[1]/E]},r.dxydb=function(C,y,S,M){var a=r.dxydj(null,C,y,S,M),E=r.dbdj(y,M);return[a[0]/E,a[1]/E]},r.dxyda_rough=function(C,y,S){var M=i*(S||.1),a=r.ab2xy(C+M,y,!0),E=r.ab2xy(C-M,y,!0);return[(a[0]-E[0])*.5/M,(a[1]-E[1])*.5/M]},r.dxydb_rough=function(C,y,S){var M=d*(S||.1),a=r.ab2xy(C,y+M,!0),E=r.ab2xy(C,y-M,!0);return[(a[0]-E[0])*.5/M,(a[1]-E[1])*.5/M]},r.dpdx=function(C){return C._m},r.dpdy=function(C){return C._m}}},51512:function(j,V,t){var b=t(3400);j.exports=function(o,L,A){var v,p,r,e=[],s=[],n=o[0].length,l=o.length;function f(X,$){var et=0,ot,nt=0;return X>0&&(ot=o[$][X-1])!==void 0&&(nt++,et+=ot),X<n-1&&(ot=o[$][X+1])!==void 0&&(nt++,et+=ot),$>0&&(ot=o[$-1][X])!==void 0&&(nt++,et+=ot),$<l-1&&(ot=o[$+1][X])!==void 0&&(nt++,et+=ot),et/Math.max(1,nt)}var u=0;for(v=0;v<n;v++)for(p=0;p<l;p++)o[p][v]===void 0&&(e.push(v),s.push(p),o[p][v]=f(v,p)),u=Math.max(u,Math.abs(o[p][v]));if(!e.length)return o;var g,h,T,c,i,d,x,w,C,y,S,M=1e-5,a=0,E=100,m=0,k=e.length;do{for(a=0,r=0;r<k;r++){v=e[r],p=s[r];var I=0,O=0,z,B,F,_,N,G;v===0?(N=Math.min(n-1,2),F=L[N],_=L[1],z=o[p][N],B=o[p][1],O+=B+(B-z)*(L[0]-_)/(_-F),I++):v===n-1&&(N=Math.max(0,n-3),F=L[N],_=L[n-2],z=o[p][N],B=o[p][n-2],O+=B+(B-z)*(L[n-1]-_)/(_-F),I++),(v===0||v===n-1)&&p>0&&p<l-1&&(g=A[p+1]-A[p],h=A[p]-A[p-1],O+=(h*o[p+1][v]+g*o[p-1][v])/(h+g),I++),p===0?(G=Math.min(l-1,2),F=A[G],_=A[1],z=o[G][v],B=o[1][v],O+=B+(B-z)*(A[0]-_)/(_-F),I++):p===l-1&&(G=Math.max(0,l-3),F=A[G],_=A[l-2],z=o[G][v],B=o[l-2][v],O+=B+(B-z)*(A[l-1]-_)/(_-F),I++),(p===0||p===l-1)&&v>0&&v<n-1&&(g=L[v+1]-L[v],h=L[v]-L[v-1],O+=(h*o[p][v+1]+g*o[p][v-1])/(h+g),I++),I?O/=I:(T=L[v+1]-L[v],c=L[v]-L[v-1],i=A[p+1]-A[p],d=A[p]-A[p-1],x=T*c*(T+c),w=i*d*(i+d),O=(x*(d*o[p+1][v]+i*o[p-1][v])+w*(c*o[p][v+1]+T*o[p][v-1]))/(w*(c+T)+x*(d+i))),C=O-o[p][v],y=C/u,a+=y*y,S=I?0:.85,o[p][v]+=C*(1+S)}a=Math.sqrt(a)}while(m++<E&&a>M);return b.log("Smoother converged to",a,"after",m,"iterations"),o}},86411:function(j,V,t){var b=t(3400).isArray1D;j.exports=function(o,L,A){var v=A("x"),p=v&&v.length,r=A("y"),e=r&&r.length;if(!p&&!e)return!1;if(L._cheater=!v,(!p||b(v))&&(!e||b(r))){var s=p?v.length:1/0;e&&(s=Math.min(s,r.length)),L.a&&L.a.length&&(s=Math.min(s,L.a.length)),L.b&&L.b.length&&(s=Math.min(s,L.b.length)),L._length=s}else L._length=null;return!0}},83372:function(j,V,t){var b=t(21776).Ks,P=t(6096),o=t(49084),L=t(45464),A=t(22548).defaultLine,v=t(92880).extendFlat,p=P.marker.line;j.exports=v({locations:{valType:"data_array",editType:"calc"},locationmode:P.locationmode,z:{valType:"data_array",editType:"calc"},geojson:v({},P.geojson,{}),featureidkey:P.featureidkey,text:v({},P.text,{}),hovertext:v({},P.hovertext,{}),marker:{line:{color:v({},p.color,{dflt:A}),width:v({},p.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:P.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:P.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:v({},L.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:b(),showlegend:v({},L.showlegend,{dflt:!1})},o("",{cLetter:"z",editTypeOverride:"calc"}))},7924:function(j,V,t){var b=t(38248),P=t(39032).BADNUM,o=t(47128),L=t(20148),A=t(4500);function v(p){return p&&typeof p=="string"}j.exports=function(r,e){var s=e._length,n=new Array(s),l;e.geojson?l=function(T){return v(T)||b(T)}:l=v;for(var f=0;f<s;f++){var u=n[f]={},g=e.locations[f],h=e.z[f];l(g)&&b(h)?(u.loc=g,u.z=h):(u.loc=null,u.z=P),u.index=f}return L(n,e),o(r,e,{vals:e.z,containerStr:"",cLetter:"z"}),A(n,e),n}},30972:function(j,V,t){var b=t(3400),P=t(27260),o=t(83372);j.exports=function(A,v,p,r){function e(h,T){return b.coerce(A,v,o,h,T)}var s=e("locations"),n=e("z");if(!(s&&s.length&&b.isArrayOrTypedArray(n)&&n.length)){v.visible=!1;return}v._length=Math.min(s.length,n.length);var l=e("geojson"),f;(typeof l=="string"&&l!==""||b.isPlainObject(l))&&(f="geojson-id");var u=e("locationmode",f);u==="geojson-id"&&e("featureidkey"),e("text"),e("hovertext"),e("hovertemplate");var g=e("marker.line.width");g&&e("marker.line.color"),e("marker.opacity"),P(A,v,r,e,{prefix:"",cLetter:"z"}),b.coerceSelectionMarkerOpacity(v,e)}},52428:function(j){j.exports=function(t,b,P,o,L){t.location=b.location,t.z=b.z;var A=o[L];return A.fIn&&A.fIn.properties&&(t.properties=A.fIn.properties),t.ct=A.ct,t}},69224:function(j,V,t){var b=t(54460),P=t(83372),o=t(3400).fillText;j.exports=function(v,p,r){var e=v.cd,s=e[0].trace,n=v.subplot,l,f,u,g,h=[p,r],T=[p+360,r];for(f=0;f<e.length;f++)if(l=e[f],g=!1,l._polygons){for(u=0;u<l._polygons.length;u++)l._polygons[u].contains(h)&&(g=!g),l._polygons[u].contains(T)&&(g=!g);if(g)break}if(!(!g||!l))return v.x0=v.x1=v.xa.c2p(l.ct),v.y0=v.y1=v.ya.c2p(l.ct),v.index=l.index,v.location=l.loc,v.z=l.z,v.zLabel=b.tickText(n.mockAxis,n.mockAxis.c2l(l.z),"hover").text,v.hovertemplate=l.hovertemplate,L(v,s,l),[v]};function L(A,v,p){if(!v.hovertemplate){var r=p.hi||v.hoverinfo,e=String(p.loc),s=r==="all"?P.hoverinfo.flags:r.split("+"),n=s.indexOf("name")!==-1,l=s.indexOf("location")!==-1,f=s.indexOf("z")!==-1,u=s.indexOf("text")!==-1,g=!n&&l,h=[];g?A.nameOverride=e:(n&&(A.nameOverride=v.name),l&&h.push(e)),f&&h.push(A.zLabel),u&&o(p,v,h),A.extraText=h.join("<br>")}}},54272:function(j,V,t){j.exports={attributes:t(83372),supplyDefaults:t(30972),colorbar:t(96288),calc:t(7924),calcGeoJSON:t(88364).calcGeoJSON,plot:t(88364).plot,style:t(7947).style,styleOnSelect:t(7947).styleOnSelect,hoverPoints:t(69224),eventData:t(52428),selectPoints:t(17328),moduleType:"trace",name:"choropleth",basePlotModule:t(10816),categories:["geo","noOpacity","showLegend"],meta:{}}},88364:function(j,V,t){var b=t(33428),P=t(3400),o=t(27144),L=t(59972).getTopojsonFeatures,A=t(19280).findExtremes,v=t(7947).style;function p(e,s,n){var l=s.layers.backplot.select(".choroplethlayer");P.makeTraceGroups(l,n,"trace choropleth").each(function(f){var u=b.select(this),g=u.selectAll("path.choroplethlocation").data(P.identity);g.enter().append("path").classed("choroplethlocation",!0),g.exit().remove(),v(e,f)})}function r(e,s){for(var n=e[0].trace,l=s[n.geo],f=l._subplot,u=n.locationmode,g=n._length,h=u==="geojson-id"?o.extractTraceFeature(e):L(n,f.topojson),T=[],c=[],i=0;i<g;i++){var d=e[i],x=u==="geojson-id"?d.fOut:o.locationToFeature(u,d.loc,h);if(x){d.geojson=x,d.ct=x.properties.ct,d._polygons=o.feature2polygons(x);var w=o.computeBbox(x);T.push(w[0],w[2]),c.push(w[1],w[3])}else d.geojson=null}if(l.fitbounds==="geojson"&&u==="geojson-id"){var C=o.computeBbox(o.getTraceGeojson(n));T=[C[0],C[2]],c=[C[1],C[3]]}var y={padded:!0};n._extremes.lon=A(l.lonaxis._ax,T,y),n._extremes.lat=A(l.lataxis._ax,c,y)}j.exports={calcGeoJSON:r,plot:p}},17328:function(j){j.exports=function(t,b){var P=t.cd,o=t.xaxis,L=t.yaxis,A=[],v,p,r,e,s;if(b===!1)for(v=0;v<P.length;v++)P[v].selected=0;else for(v=0;v<P.length;v++)p=P[v],r=p.ct,r&&(e=o.c2p(r),s=L.c2p(r),b.contains([e,s],null,v,t)?(A.push({pointNumber:v,lon:r[0],lat:r[1]}),p.selected=1):p.selected=0);return A}},7947:function(j,V,t){var b=t(33428),P=t(76308),o=t(43616),L=t(8932);function A(r,e){e&&v(r,e)}function v(r,e){var s=e[0].trace,n=e[0].node3,l=n.selectAll(".choroplethlocation"),f=s.marker||{},u=f.line||{},g=L.makeColorScaleFuncFromTrace(s);l.each(function(h){b.select(this).attr("fill",g(h.z)).call(P.stroke,h.mlc||u.color).call(o.dashLine,"",h.mlw||u.width||0).style("opacity",f.opacity)}),o.selectedPointStyle(l,s)}function p(r,e){var s=e[0].node3,n=e[0].trace;n.selectedpoints?o.selectedPointStyle(s.selectAll(".choroplethlocation"),n):v(r,e)}j.exports={style:A,styleOnSelect:p}},45608:function(j,V,t){var b=t(83372),P=t(49084),o=t(21776).Ks,L=t(45464),A=t(92880).extendFlat;j.exports=A({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:A({},b.featureidkey,{}),below:{valType:"string",editType:"plot"},text:b.text,hovertext:b.hovertext,marker:{line:{color:A({},b.marker.line.color,{editType:"plot"}),width:A({},b.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:A({},b.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:A({},b.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:A({},b.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:b.hoverinfo,hovertemplate:o({},{keys:["properties"]}),showlegend:A({},L.showlegend,{dflt:!1})},P("",{cLetter:"z",editTypeOverride:"calc"}))},13504:function(j,V,t){var b=t(38248),P=t(3400),o=t(8932),L=t(43616),A=t(44808).makeBlank,v=t(27144);function p(e){var s=e[0].trace,n=s.visible===!0&&s._length!==0,l={layout:{visibility:"none"},paint:{}},f={layout:{visibility:"none"},paint:{}},u=s._opts={fill:l,line:f,geojson:A()};if(!n)return u;var g=v.extractTraceFeature(e);if(!g)return u;var h=o.makeColorScaleFuncFromTrace(s),T=s.marker,c=T.line||{},i;P.isArrayOrTypedArray(T.opacity)&&(i=function(a){var E=a.mo;return b(E)?+P.constrain(E,0,1):0});var d;P.isArrayOrTypedArray(c.color)&&(d=function(a){return a.mlc});var x;P.isArrayOrTypedArray(c.width)&&(x=function(a){return a.mlw});for(var w=0;w<e.length;w++){var C=e[w],y=C.fOut;if(y){var S=y.properties;S.fc=h(C.z),i&&(S.mo=i(C)),d&&(S.mlc=d(C)),x&&(S.mlw=x(C)),C.ct=S.ct,C._polygons=v.feature2polygons(y)}}var M=i?{type:"identity",property:"mo"}:T.opacity;return P.extendFlat(l.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":M}),P.extendFlat(f.paint,{"line-color":d?{type:"identity",property:"mlc"}:c.color,"line-width":x?{type:"identity",property:"mlw"}:c.width,"line-opacity":M}),l.layout.visibility="visible",f.layout.visibility="visible",u.geojson={type:"FeatureCollection",features:g},r(e),u}function r(e){var s=e[0].trace,n=s._opts,l;if(s.selectedpoints){for(var f=L.makeSelectedPointStyleFns(s),u=0;u<e.length;u++){var g=e[u];g.fOut&&(g.fOut.properties.mo2=f.selectedOpacityFn(g))}l={type:"identity",property:"mo2"}}else l=P.isArrayOrTypedArray(s.marker.opacity)?{type:"identity",property:"mo"}:s.marker.opacity;return P.extendFlat(n.fill.paint,{"fill-opacity":l}),P.extendFlat(n.line.paint,{"line-opacity":l}),n}j.exports={convert:p,convertOnSelect:r}},9352:function(j,V,t){var b=t(3400),P=t(27260),o=t(45608);j.exports=function(A,v,p,r){function e(u,g){return b.coerce(A,v,o,u,g)}var s=e("locations"),n=e("z"),l=e("geojson");if(!b.isArrayOrTypedArray(s)||!s.length||!b.isArrayOrTypedArray(n)||!n.length||!(typeof l=="string"&&l!==""||b.isPlainObject(l))){v.visible=!1;return}e("featureidkey"),v._length=Math.min(s.length,n.length),e("below"),e("text"),e("hovertext"),e("hovertemplate");var f=e("marker.line.width");f&&e("marker.line.color"),e("marker.opacity"),P(A,v,r,e,{prefix:"",cLetter:"z"}),b.coerceSelectionMarkerOpacity(v,e)}},85404:function(j,V,t){j.exports={attributes:t(45608),supplyDefaults:t(9352),colorbar:t(96288),calc:t(7924),plot:t(61288),hoverPoints:t(69224),eventData:t(52428),selectPoints:t(17328),styleOnSelect:function(b,P){if(P){var o=P[0].trace;o._glTrace.updateOnSelect(P)}},getBelow:function(b,P){for(var o=P.getMapLayers(),L=o.length-2;L>=0;L--){var A=o[L].id;if(typeof A=="string"&&A.indexOf("water")===0){for(var v=L+1;v<o.length;v++)if(A=o[v].id,typeof A=="string"&&A.indexOf("plotly-")===-1)return A}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:t(33688),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},61288:function(j,V,t){var b=t(13504).convert,P=t(13504).convertOnSelect,o=t(47552).traceLayerPrefix;function L(v,p){this.type="choroplethmapbox",this.subplot=v,this.uid=p,this.sourceId="source-"+p,this.layerList=[["fill",o+p+"-fill"],["line",o+p+"-line"]],this.below=null}var A=L.prototype;A.update=function(v){this._update(b(v)),v[0].trace._glTrace=this},A.updateOnSelect=function(v){this._update(P(v))},A._update=function(v){var p=this.subplot,r=this.layerList,e=p.belowLookup["trace-"+this.uid];p.map.getSource(this.sourceId).setData(v.geojson),e!==this.below&&(this._removeLayers(),this._addLayers(v,e),this.below=e);for(var s=0;s<r.length;s++){var n=r[s],l=n[0],f=n[1],u=v[l];p.setOptions(f,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&p.setOptions(f,"setPaintProperty",u.paint)}},A._addLayers=function(v,p){for(var r=this.subplot,e=this.layerList,s=this.sourceId,n=0;n<e.length;n++){var l=e[n],f=l[0],u=v[f];r.addLayer({type:f,id:l[1],source:s,layout:u.layout,paint:u.paint},p)}},A._removeLayers=function(){for(var v=this.subplot.map,p=this.layerList,r=p.length-1;r>=0;r--)v.removeLayer(p[r][1])},A.dispose=function(){var v=this.subplot.map;this._removeLayers(),v.removeSource(this.sourceId)},j.exports=function(p,r){var e=r[0].trace,s=new L(p,e.uid),n=s.sourceId,l=b(r),f=s.below=p.belowLookup["trace-"+e.uid];return p.map.addSource(n,{type:"geojson",data:l.geojson}),s._addLayers(l,f),r[0].trace._glTrace=s,s}},86040:function(j,V,t){var b=t(49084),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(52948),A=t(45464),v=t(92880).extendFlat,p={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute","raw"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["norm"]}),uhoverformat:P("u",1),vhoverformat:P("v",1),whoverformat:P("w",1),xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z"),showlegend:v({},A.showlegend,{dflt:!1})};v(p,b("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(e){p[e]=L[e]}),p.hoverinfo=v({},A.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),p.transforms=void 0,j.exports=p},83344:function(j,V,t){var b=t(47128);j.exports=function(o,L){for(var A=L.u,v=L.v,p=L.w,r=Math.min(L.x.length,L.y.length,L.z.length,A.length,v.length,p.length),e=-1/0,s=1/0,n=0;n<r;n++){var l=A[n],f=v[n],u=p[n],g=Math.sqrt(l*l+f*f+u*u);e=Math.max(e,g),s=Math.min(s,g)}L._len=r,L._normMax=e,b(o,L,{vals:[s,e],containerStr:"",cLetter:"c"})}},6648:function(j,V,t){var b=t(67792).gl_cone3d,P=t(67792).gl_cone3d.createConeMesh,o=t(3400).simpleMap,L=t(33040).parseColorScale,A=t(8932).extractOpts,v=t(3400).isArrayOrTypedArray,p=t(52094);function r(g,h){this.scene=g,this.uid=h,this.mesh=null,this.data=null}var e=r.prototype;e.handlePick=function(g){if(g.object===this.mesh){var h=g.index=g.data.index,T=this.data.x[h],c=this.data.y[h],i=this.data.z[h],d=this.data.u[h],x=this.data.v[h],w=this.data.w[h];g.traceCoordinate=[T,c,i,d,x,w,Math.sqrt(d*d+x*x+w*w)];var C=this.data.hovertext||this.data.text;return v(C)&&C[h]!==void 0?g.textLabel=C[h]:C&&(g.textLabel=C),!0}};var s={xaxis:0,yaxis:1,zaxis:2},n={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function f(g,h){var T=g.fullSceneLayout,c=g.dataScale,i={};function d(S,M){var a=T[M],E=c[s[M]];return o(S,function(m){return a.d2l(m)*E})}i.vectors=p(d(h.u,"xaxis"),d(h.v,"yaxis"),d(h.w,"zaxis"),h._len),i.positions=p(d(h.x,"xaxis"),d(h.y,"yaxis"),d(h.z,"zaxis"),h._len);var x=A(h);i.colormap=L(h),i.vertexIntensityBounds=[x.min/h._normMax,x.max/h._normMax],i.coneOffset=n[h.anchor];var w=h.sizemode;w==="scaled"?i.coneSize=h.sizeref||.5:w==="absolute"?i.coneSize=h.sizeref&&h._normMax?h.sizeref/h._normMax:.5:w==="raw"&&(i.coneSize=h.sizeref),i.coneSizemode=w;var C=b(i),y=h.lightposition;return C.lightPosition=[y.x,y.y,y.z],C.ambient=h.lighting.ambient,C.diffuse=h.lighting.diffuse,C.specular=h.lighting.specular,C.roughness=h.lighting.roughness,C.fresnel=h.lighting.fresnel,C.opacity=h.opacity,h._pad=l[h.anchor]*C.vectorScale*C.coneScale*h._normMax,C}e.update=function(g){this.data=g;var h=f(this.scene,g);this.mesh.update(h)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function u(g,h){var T=g.glplot.gl,c=f(g,h),i=P(T,c),d=new r(g,h.uid);return d.mesh=i,d.data=h,i._trace=d,g.glplot.add(i),d}j.exports=u},86096:function(j,V,t){var b=t(3400),P=t(27260),o=t(86040);j.exports=function(A,v,p,r){function e(T,c){return b.coerce(A,v,o,T,c)}var s=e("u"),n=e("v"),l=e("w"),f=e("x"),u=e("y"),g=e("z");if(!s||!s.length||!n||!n.length||!l||!l.length||!f||!f.length||!u||!u.length||!g||!g.length){v.visible=!1;return}var h=e("sizemode");e("sizeref",h==="raw"?1:.5),e("anchor"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),P(A,v,r,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),v._length=null}},26048:function(j,V,t){j.exports={moduleType:"trace",name:"cone",basePlotModule:t(12536),categories:["gl3d","showLegend"],attributes:t(86040),supplyDefaults:t(86096),colorbar:{min:"cmin",max:"cmax"},calc:t(83344),plot:t(6648),eventData:function(b,P){return b.norm=P.traceCoordinate[6],b},meta:{}}},67104:function(j,V,t){var b=t(83328),P=t(52904),o=t(29736),L=o.axisHoverFormat,A=o.descriptionOnlyNumbers,v=t(49084),p=t(98192).u,r=t(25376),e=t(92880).extendFlat,s=t(69104),n=s.COMPARISON_OPS2,l=s.INTERVAL_OPS,f=P.line;j.exports=e({z:b.z,x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:P.xperiod0,yperiod0:P.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,text:b.text,hovertext:b.hovertext,transpose:b.transpose,xtype:b.xtype,ytype:b.ytype,xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z",1),hovertemplate:b.hovertemplate,texttemplate:e({},b.texttemplate,{}),textfont:e({},b.textfont,{}),hoverongaps:b.hoverongaps,connectgaps:e({},b.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:A("contour label")},operation:{valType:"enumerated",values:[].concat(n).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:e({},f.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:p,smoothing:e({},f.smoothing,{}),editType:"plot"},zorder:P.zorder},v("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},20688:function(j,V,t){var b=t(8932),P=t(19512),o=t(54444),L=t(46960);j.exports=function(v,p){var r=P(v,p),e=r[0].z;o(p,e);var s=p.contours,n=b.extractOpts(p),l;if(s.coloring==="heatmap"&&n.auto&&p.autocontour===!1){var f=s.start,u=L(s),g=s.size||1,h=Math.floor((u-f)/g)+1;isFinite(g)||(g=1,h=1);var T=f-g/2,c=T+h*g;l=[T,c]}else l=e;return b.calc(v,p,{vals:l,cLetter:"z"}),r}},56008:function(j){j.exports=function(V,t){var b=V[0],P=b.z,o;switch(t.type){case"levels":var L=Math.min(P[0][0],P[0][1]);for(o=0;o<V.length;o++){var A=V[o];A.prefixBoundary=!A.edgepaths.length&&(L>A.level||A.starts.length&&L===A.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var v=b.x.length,p=b.y.length,r=-1/0,e=1/0;for(o=0;o<p;o++)e=Math.min(e,P[o][0]),e=Math.min(e,P[o][v-1]),r=Math.max(r,P[o][0]),r=Math.max(r,P[o][v-1]);for(o=1;o<v-1;o++)e=Math.min(e,P[0][o]),e=Math.min(e,P[p-1][o]),r=Math.max(r,P[0][o]),r=Math.max(r,P[p-1][o]);var s=t.value,n,l;switch(t._operation){case">":s>r&&(b.prefixBoundary=!0);break;case"<":(s<e||b.starts.length&&s===e)&&(b.prefixBoundary=!0);break;case"[]":n=Math.min(s[0],s[1]),l=Math.max(s[0],s[1]),(l<e||n>r||b.starts.length&&l===e)&&(b.prefixBoundary=!0);break;case"][":n=Math.min(s[0],s[1]),l=Math.max(s[0],s[1]),n<e&&l>r&&(b.prefixBoundary=!0);break}break}}},55296:function(j,V,t){var b=t(8932),P=t(41076),o=t(46960);function L(A,v,p){var r=v.contours,e=v.line,s=r.size||1,n=r.coloring,l=P(v,{isColorbar:!0});if(n==="heatmap"){var f=b.extractOpts(v);p._fillgradient=f.reversescale?b.flipScale(f.colorscale):f.colorscale,p._zrange=[f.min,f.max]}else n==="fill"&&(p._fillcolor=l);p._line={color:n==="lines"?l:e.color,width:r.showlines!==!1?e.width:0,dash:e.dash},p._levels={start:r.start,end:o(r),size:s}}j.exports={min:"zmin",max:"zmax",calc:L}},93252:function(j){j.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},95536:function(j,V,t){var b=t(38248),P=t(17428),o=t(76308),L=o.addOpacity,A=o.opacity,v=t(69104),p=t(3400).isArrayOrTypedArray,r=v.CONSTRAINT_REDUCTION,e=v.COMPARISON_OPS2;j.exports=function(l,f,u,g,h,T){var c=f.contours,i,d,x,w=u("contours.operation");if(c._operation=r[w],s(u,c),w==="="?i=c.showlines=!0:(i=u("contours.showlines"),x=u("fillcolor",L((l.line||{}).color||h,.5))),i){var C=x&&A(x)?L(f.fillcolor,1):h;d=u("line.color",C),u("line.width",2),u("line.dash")}u("line.smoothing"),P(u,g,d,T)};function s(n,l){var f;e.indexOf(l.operation)===-1?(n("contours.value",[0,1]),p(l.value)?l.value.length>2?l.value=l.value.slice(2):l.length===0?l.value=[0,1]:l.length<2?(f=parseFloat(l.value[0]),l.value=[f,f+1]):l.value=[parseFloat(l.value[0]),parseFloat(l.value[1])]:b(l.value)&&(f=parseFloat(l.value),l.value=[f,f+1])):(n("contours.value",0),b(l.value)||(p(l.value)?l.value=parseFloat(l.value[0]):l.value=0))}},3212:function(j,V,t){var b=t(69104),P=t(38248);j.exports={"[]":L("[]"),"][":L("]["),">":A(">"),"<":A("<"),"=":A("=")};function o(v,p){var r=Array.isArray(p),e;function s(n){return P(n)?+n:null}return b.COMPARISON_OPS2.indexOf(v)!==-1?e=s(r?p[0]:p):b.INTERVAL_OPS.indexOf(v)!==-1?e=r?[s(p[0]),s(p[1])]:[s(p),s(p)]:b.SET_OPS.indexOf(v)!==-1&&(e=r?p.map(s):[s(p)]),e}function L(v){return function(p){p=o(v,p);var r=Math.min(p[0],p[1]),e=Math.max(p[0],p[1]);return{start:r,end:e,size:e-r}}}function A(v){return function(p){return p=o(v,p),{start:p,end:1/0,size:1/0}}}},84952:function(j){j.exports=function(t,b,P,o){var L=o("contours.start"),A=o("contours.end"),v=L===!1||A===!1,p=P("contours.size"),r;v?r=b.autocontour=!0:r=P("autocontour",!1),(r||!p)&&P("ncontours")}},82172:function(j,V,t){var b=t(3400);j.exports=function(o,L){var A,v,p,r=function(n){return n.reverse()},e=function(n){return n};switch(L){case"=":case"<":return o;case">":for(o.length!==1&&b.warn("Contour data invalid for the specified inequality operation."),v=o[0],A=0;A<v.edgepaths.length;A++)v.edgepaths[A]=r(v.edgepaths[A]);for(A=0;A<v.paths.length;A++)v.paths[A]=r(v.paths[A]);for(A=0;A<v.starts.length;A++)v.starts[A]=r(v.starts[A]);return o;case"][":var s=r;r=e,e=s;case"[]":for(o.length!==2&&b.warn("Contour data invalid for the specified inequality range operation."),v=P(o[0]),p=P(o[1]),A=0;A<v.edgepaths.length;A++)v.edgepaths[A]=r(v.edgepaths[A]);for(A=0;A<v.paths.length;A++)v.paths[A]=r(v.paths[A]);for(A=0;A<v.starts.length;A++)v.starts[A]=r(v.starts[A]);for(;p.edgepaths.length;)v.edgepaths.push(e(p.edgepaths.shift()));for(;p.paths.length;)v.paths.push(e(p.paths.shift()));for(;p.starts.length;)v.starts.push(e(p.starts.shift()));return[v]}};function P(o){return b.extendFlat({},o,{edgepaths:b.extendDeep([],o.edgepaths),paths:b.extendDeep([],o.paths),starts:b.extendDeep([],o.starts)})}},57004:function(j,V,t){var b=t(3400),P=t(51264),o=t(31147),L=t(95536),A=t(84952),v=t(97680),p=t(39096),r=t(67104);j.exports=function(s,n,l,f){function u(c,i){return b.coerce(s,n,r,c,i)}function g(c){return b.coerce2(s,n,r,c)}var h=P(s,n,u,f);if(!h){n.visible=!1;return}o(s,n,f,u),u("xhoverformat"),u("yhoverformat"),u("text"),u("hovertext"),u("hoverongaps"),u("hovertemplate");var T=u("contours.type")==="constraint";u("connectgaps",b.isArray1D(n.z)),T?L(s,n,u,f,l):(A(s,n,u,g),v(s,n,u,f)),n.contours&&n.contours.coloring==="heatmap"&&p(u,f),u("zorder")}},61512:function(j,V,t){var b=t(3400),P=t(3212),o=t(46960);j.exports=function(A,v,p){for(var r=A.type==="constraint"?P[A._operation](A.value):A,e=r.size,s=[],n=o(r),l=p.trace._carpetTrace,f=l?{xaxis:l.aaxis,yaxis:l.baxis,x:p.a,y:p.b}:{xaxis:v.xaxis,yaxis:v.yaxis,x:p.x,y:p.y},u=r.start;u<n;u+=e)if(s.push(b.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:p.z,smoothing:p.trace.line.smoothing},f)),s.length>1e3){b.warn("Too many contours, clipping at 1000",A);break}return s}},46960:function(j){j.exports=function(t){return t.end+t.size/1e6}},88748:function(j,V,t){var b=t(3400),P=t(93252);j.exports=function(e,s,n){var l,f,u,g,h;for(s=s||.01,n=n||.01,u=0;u<e.length;u++){for(g=e[u],h=0;h<g.starts.length;h++)f=g.starts[h],A(g,f,"edge",s,n);for(l=0;Object.keys(g.crossings).length&&l<1e4;)l++,f=Object.keys(g.crossings)[0].split(",").map(Number),A(g,f,void 0,s,n);l===1e4&&b.log("Infinite loop in contour?")}};function o(r,e,s,n){return Math.abs(r[0]-e[0])<s&&Math.abs(r[1]-e[1])<n}function L(r,e){var s=r[2]-e[2],n=r[3]-e[3];return Math.sqrt(s*s+n*n)}function A(r,e,s,n,l){var f=e.join(","),u=r.crossings[f],g=v(u,s,e),h=[p(r,e,[-g[0],-g[1]])],T=r.z.length,c=r.z[0].length,i=e.slice(),d=g.slice(),x;for(x=0;x<1e4;x++){if(u>20?(u=P.CHOOSESADDLE[u][(g[0]||g[1])<0?0:1],r.crossings[f]=P.SADDLEREMAINDER[u]):delete r.crossings[f],g=P.NEWDELTA[u],!g){b.log("Found bad marching index:",u,e,r.level);break}h.push(p(r,e,g)),e[0]+=g[0],e[1]+=g[1],f=e.join(","),o(h[h.length-1],h[h.length-2],n,l)&&h.pop();var w=g[0]&&(e[0]<0||e[0]>c-2)||g[1]&&(e[1]<0||e[1]>T-2),C=e[0]===i[0]&&e[1]===i[1]&&g[0]===d[0]&&g[1]===d[1];if(C||s&&w)break;u=r.crossings[f]}x===1e4&&b.log("Infinite loop in contour?");var y=o(h[0],h[h.length-1],n,l),S=0,M=.2*r.smoothing,a=[],E=0,m,k,I,O,z,B,F,_,N,G,X;for(x=1;x<h.length;x++)F=L(h[x],h[x-1]),S+=F,a.push(F);var $=S/a.length*M;function et(Z){return h[Z%h.length]}for(x=h.length-2;x>=E;x--)if(m=a[x],m<$){for(I=0,k=x-1;k>=E&&m+a[k]<$;k--)m+=a[k];if(y&&x===h.length-2)for(I=0;I<k&&m+a[I]<$;I++)m+=a[I];z=x-k+I+1,B=Math.floor((x+k+I+2)/2),!y&&x===h.length-2?O=h[h.length-1]:!y&&k===-1?O=h[0]:z%2?O=et(B):O=[(et(B)[0]+et(B+1)[0])/2,(et(B)[1]+et(B+1)[1])/2],h.splice(k+1,x-k+1,O),x=k+1,I&&(E=I),y&&(x===h.length-2?h[I]=h[h.length-1]:x===0&&(h[h.length-1]=h[0]))}for(h.splice(0,E),x=0;x<h.length;x++)h[x].length=2;if(!(h.length<2))if(y)h.pop(),r.paths.push(h);else{s||b.log("Unclosed interior contour?",r.level,i.join(","),h.join("L"));var ot=!1;for(_=0;_<r.edgepaths.length;_++)if(G=r.edgepaths[_],!ot&&o(G[0],h[h.length-1],n,l)){h.pop(),ot=!0;var nt=!1;for(N=0;N<r.edgepaths.length;N++)if(X=r.edgepaths[N],o(X[X.length-1],h[0],n,l)){nt=!0,h.shift(),r.edgepaths.splice(_,1),N===_?r.paths.push(h.concat(X)):(N>_&&N--,r.edgepaths[N]=X.concat(h,G));break}nt||(r.edgepaths[_]=h.concat(G))}for(_=0;_<r.edgepaths.length&&!ot;_++)G=r.edgepaths[_],o(G[G.length-1],h[0],n,l)&&(h.shift(),r.edgepaths[_]=G.concat(h),ot=!0);ot||r.edgepaths.push(h)}}function v(r,e,s){var n=0,l=0;return r>20&&e?r===208||r===1114?n=s[0]===0?1:-1:l=s[1]===0?1:-1:P.BOTTOMSTART.indexOf(r)!==-1?l=1:P.LEFTSTART.indexOf(r)!==-1?n=1:P.TOPSTART.indexOf(r)!==-1?l=-1:n=-1,[n,l]}function p(r,e,s){var n=e[0]+Math.max(s[0],0),l=e[1]+Math.max(s[1],0),f=r.z[l][n],u=r.xaxis,g=r.yaxis;if(s[1]){var h=(r.level-f)/(r.z[l][n+1]-f),T=(h!==1?(1-h)*u.c2l(r.x[n]):0)+(h!==0?h*u.c2l(r.x[n+1]):0);return[u.c2p(u.l2c(T),!0),g.c2p(r.y[l],!0),n+h,l]}else{var c=(r.level-f)/(r.z[l+1][n]-f),i=(c!==1?(1-c)*g.c2l(r.y[l]):0)+(c!==0?c*g.c2l(r.y[l+1]):0);return[u.c2p(r.x[n],!0),g.c2p(g.l2c(i),!0),n,l+c]}}},38200:function(j,V,t){var b=t(76308),P=t(55512);j.exports=function(L,A,v,p,r){r||(r={}),r.isContour=!0;var e=P(L,A,v,p,r);return e&&e.forEach(function(s){var n=s.trace;n.contours.type==="constraint"&&(n.fillcolor&&b.opacity(n.fillcolor)?s.color=b.addOpacity(n.fillcolor,1):n.contours.showlines&&b.opacity(n.line.color)&&(s.color=b.addOpacity(n.line.color,1)))}),e}},66240:function(j,V,t){j.exports={attributes:t(67104),supplyDefaults:t(57004),calc:t(20688),plot:t(23676).plot,style:t(52440),colorbar:t(55296),hoverPoints:t(38200),moduleType:"trace",name:"contour",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},17428:function(j,V,t){var b=t(3400);j.exports=function(o,L,A,v){v||(v={});var p=o("contours.showlabels");if(p){var r=L.font;b.coerceFont(o,"contours.labelfont",r,{overrideDflt:{color:A}}),o("contours.labelformat")}v.hasHover!==!1&&o("zhoverformat")}},41076:function(j,V,t){var b=t(33428),P=t(8932),o=t(46960);j.exports=function(A){var v=A.contours,p=v.start,r=o(v),e=v.size||1,s=Math.floor((r-p)/e)+1,n=v.coloring==="lines"?0:1,l=P.extractOpts(A);isFinite(e)||(e=1,s=1);var f=l.reversescale?P.flipScale(l.colorscale):l.colorscale,u=f.length,g=new Array(u),h=new Array(u),T,c,i=l.min,d=l.max;if(v.coloring==="heatmap"){for(c=0;c<u;c++)T=f[c],g[c]=T[0]*(d-i)+i,h[c]=T[1];var x=b.extent([i,d,v.start,v.start+e*(s-1)]),w=x[i<d?0:1],C=x[i<d?1:0];w!==i&&(g.splice(0,0,w),h.splice(0,0,h[0])),C!==d&&(g.push(C),h.push(h[h.length-1]))}else{var y=A._input&&typeof A._input.zmin=="number"&&typeof A._input.zmax=="number";for(y&&(p<=i||r>=d)&&(p<=i&&(p=i),r>=d&&(r=d),s=Math.floor((r-p)/e)+1,n=0),c=0;c<u;c++)T=f[c],g[c]=(T[0]*(s+n-1)-n/2)*e+p,h[c]=T[1];(y||A.autocontour)&&(g[0]>i&&(g.unshift(i),h.unshift(h[0])),g[g.length-1]<d&&(g.push(d),h.push(h[h.length-1])))}return P.makeColorScaleFunc({domain:g,range:h},{noNumericCheck:!0})}},72424:function(j,V,t){var b=t(93252);j.exports=function(L){var A=L[0].z,v=A.length,p=A[0].length,r=v===2||p===2,e,s,n,l,f,u,g,h,T;for(s=0;s<v-1;s++)for(l=[],s===0&&(l=l.concat(b.BOTTOMSTART)),s===v-2&&(l=l.concat(b.TOPSTART)),e=0;e<p-1;e++)for(n=l.slice(),e===0&&(n=n.concat(b.LEFTSTART)),e===p-2&&(n=n.concat(b.RIGHTSTART)),f=e+","+s,u=[[A[s][e],A[s][e+1]],[A[s+1][e],A[s+1][e+1]]],T=0;T<L.length;T++)h=L[T],g=P(h.level,u),g&&(h.crossings[f]=g,n.indexOf(g)!==-1&&(h.starts.push([e,s]),r&&n.indexOf(g,n.indexOf(g)+1)!==-1&&h.starts.push([e,s])))};function P(o,L){var A=(L[0][0]>o?0:1)+(L[0][1]>o?0:2)+(L[1][1]>o?0:4)+(L[1][0]>o?0:8);if(A===5||A===10){var v=(L[0][0]+L[0][1]+L[1][0]+L[1][1])/4;return o>v?A===5?713:1114:A===5?104:208}return A===15?0:A}},23676:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(8932),A=t(72736),v=t(54460),p=t(78344),r=t(41420),e=t(72424),s=t(88748),n=t(61512),l=t(82172),f=t(56008),u=t(93252),g=u.LABELOPTIMIZER;V.plot=function(y,S,M,a){var E=S.xaxis,m=S.yaxis;P.makeTraceGroups(a,M,"contour").each(function(k){var I=b.select(this),O=k[0],z=O.trace,B=O.x,F=O.y,_=z.contours,N=n(_,S,O),G=P.ensureSingle(I,"g","heatmapcoloring"),X=[];_.coloring==="heatmap"&&(X=[k]),r(y,S,X,G),e(N),s(N);var $=E.c2p(B[0],!0),et=E.c2p(B[B.length-1],!0),ot=m.c2p(F[0],!0),nt=m.c2p(F[F.length-1],!0),Z=[[$,nt],[et,nt],[et,ot],[$,ot]],Q=N;_.type==="constraint"&&(Q=l(N,_._operation)),h(I,Z,_),T(I,Q,Z,_),i(I,N,y,O,_),x(I,S,y,O,Z)})};function h(C,y,S){var M=P.ensureSingle(C,"g","contourbg"),a=M.selectAll("path").data(S.coloring==="fill"?[0]:[]);a.enter().append("path"),a.exit().remove(),a.attr("d","M"+y.join("L")+"Z").style("stroke","none")}function T(C,y,S,M){var a=M.coloring==="fill"||M.type==="constraint"&&M._operation!=="=",E="M"+S.join("L")+"Z";a&&f(y,M);var m=P.ensureSingle(C,"g","contourfill"),k=m.selectAll("path").data(a?y:[]);k.enter().append("path"),k.exit().remove(),k.each(function(I){var O=(I.prefixBoundary?E:"")+c(I,S);O?b.select(this).attr("d",O).style("stroke","none"):b.select(this).remove()})}function c(C,y){var S="",M=0,a=C.edgepaths.map(function($,et){return et}),E=!0,m,k,I,O,z,B;function F($){return Math.abs($[1]-y[0][1])<.01}function _($){return Math.abs($[1]-y[2][1])<.01}function N($){return Math.abs($[0]-y[0][0])<.01}function G($){return Math.abs($[0]-y[2][0])<.01}for(;a.length;){for(B=o.smoothopen(C.edgepaths[M],C.smoothing),S+=E?B:B.replace(/^M/,"L"),a.splice(a.indexOf(M),1),m=C.edgepaths[M][C.edgepaths[M].length-1],O=-1,I=0;I<4;I++){if(!m){P.log("Missing end?",M,C);break}for(F(m)&&!G(m)?k=y[1]:N(m)?k=y[0]:_(m)?k=y[3]:G(m)&&(k=y[2]),z=0;z<C.edgepaths.length;z++){var X=C.edgepaths[z][0];Math.abs(m[0]-k[0])<.01?Math.abs(m[0]-X[0])<.01&&(X[1]-m[1])*(k[1]-X[1])>=0&&(k=X,O=z):Math.abs(m[1]-k[1])<.01?Math.abs(m[1]-X[1])<.01&&(X[0]-m[0])*(k[0]-X[0])>=0&&(k=X,O=z):P.log("endpt to newendpt is not vert. or horz.",m,k,X)}if(m=k,O>=0)break;S+="L"+k}if(O===C.edgepaths.length){P.log("unclosed perimeter path");break}M=O,E=a.indexOf(M)===-1,E&&(M=a[0],S+="Z")}for(M=0;M<C.paths.length;M++)S+=o.smoothclosed(C.paths[M],C.smoothing);return S}function i(C,y,S,M,a){var E=S._context.staticPlot,m=P.ensureSingle(C,"g","contourlines"),k=a.showlines!==!1,I=a.showlabels,O=k&&I,z=V.createLines(m,k||I,y,E),B=V.createLineClip(m,O,S,M.trace.uid),F=C.selectAll("g.contourlabels").data(I?[0]:[]);if(F.exit().remove(),F.enter().append("g").classed("contourlabels",!0),I){var _=[],N=[];P.clearLocationCache();var G=V.labelFormatter(S,M),X=o.tester.append("text").attr("data-notex",1).call(o.font,a.labelfont),$=y[0].xaxis,et=y[0].yaxis,ot=$._length,nt=et._length,Z=$.range,Q=et.range,W=P.aggNums(Math.min,null,M.x),J=P.aggNums(Math.max,null,M.x),it=P.aggNums(Math.min,null,M.y),K=P.aggNums(Math.max,null,M.y),H=Math.max($.c2p(W,!0),0),at=Math.min($.c2p(J,!0),ot),tt=Math.max(et.c2p(K,!0),0),lt=Math.min(et.c2p(it,!0),nt),dt={};Z[0]<Z[1]?(dt.left=H,dt.right=at):(dt.left=at,dt.right=H),Q[0]<Q[1]?(dt.top=tt,dt.bottom=lt):(dt.top=lt,dt.bottom=tt),dt.middle=(dt.top+dt.bottom)/2,dt.center=(dt.left+dt.right)/2,_.push([[dt.left,dt.top],[dt.right,dt.top],[dt.right,dt.bottom],[dt.left,dt.bottom]]);var mt=Math.sqrt(ot*ot+nt*nt),gt=u.LABELDISTANCE*mt/Math.max(1,y.length/u.LABELINCREASE);z.each(function(Mt){var Lt=V.calcTextOpts(Mt.level,G,X,S);b.select(this).selectAll("path").each(function(){var zt=this,xt=P.getVisibleSegment(zt,dt,Lt.height/2);if(xt&&!(xt.len<(Lt.width+Lt.height)*u.LABELMIN))for(var Ct=Math.min(Math.ceil(xt.len/gt),u.LABELMAX),wt=0;wt<Ct;wt++){var Rt=V.findBestTextLocation(zt,xt,Lt,N,dt);if(!Rt)break;V.addLabelData(Rt,Lt,N,_)}})}),X.remove(),V.drawLabels(F,N,S,B,O?_:null)}I&&!k&&z.remove()}V.createLines=function(C,y,S,M){var a=S[0].smoothing,E=C.selectAll("g.contourlevel").data(y?S:[]);if(E.exit().remove(),E.enter().append("g").classed("contourlevel",!0),y){var m=E.selectAll("path.openline").data(function(I){return I.pedgepaths||I.edgepaths});m.exit().remove(),m.enter().append("path").classed("openline",!0),m.attr("d",function(I){return o.smoothopen(I,a)}).style("stroke-miterlimit",1).style("vector-effect",M?"none":"non-scaling-stroke");var k=E.selectAll("path.closedline").data(function(I){return I.ppaths||I.paths});k.exit().remove(),k.enter().append("path").classed("closedline",!0),k.attr("d",function(I){return o.smoothclosed(I,a)}).style("stroke-miterlimit",1).style("vector-effect",M?"none":"non-scaling-stroke")}return E},V.createLineClip=function(C,y,S,M){var a=S._fullLayout._clips,E=y?"clipline"+M:null,m=a.selectAll("#"+E).data(y?[0]:[]);return m.exit().remove(),m.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),o.setClipUrl(C,E,S),m},V.labelFormatter=function(C,y){var S=C._fullLayout,M=y.trace,a=M.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(a.labelformat)E.tickformat=a.labelformat,p(E,S);else{var m=L.extractOpts(M);if(m&&m.colorbar&&m.colorbar._axis)E=m.colorbar._axis;else{if(a.type==="constraint"){var k=a.value;P.isArrayOrTypedArray(k)?E.range=[k[0],k[k.length-1]]:E.range=[k,k]}else E.range=[a.start,a.end],E.nticks=(a.end-a.start)/a.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),p(E,S),v.prepTicks(E),E._tmin=null,E._tmax=null}}return function(I){return v.tickText(E,I).text}},V.calcTextOpts=function(C,y,S,M){var a=y(C);S.text(a).call(A.convertToTspans,M);var E=S.node(),m=o.bBox(E,!0);return{text:a,width:m.width,height:m.height,fontSize:+E.style["font-size"].replace("px",""),level:C,dy:(m.top+m.bottom)/2}},V.findBestTextLocation=function(C,y,S,M,a){var E=S.width,m,k,I,O,z;y.isClosed?(k=y.len/g.INITIALSEARCHPOINTS,m=y.min+k/2,I=y.max):(k=(y.len-E)/(g.INITIALSEARCHPOINTS+1),m=y.min+k+E/2,I=y.max-(k+E)/2);for(var B=1/0,F=0;F<g.ITERATIONS;F++){for(var _=m;_<I;_+=k){var N=P.getTextLocation(C,y.total,_,E),G=d(N,S,M,a);G<B&&(B=G,z=N,O=_)}if(B>g.MAXCOST*2)break;F&&(k/=2),m=O-k/2,I=m+k*1.5}if(B<=g.MAXCOST)return z};function d(C,y,S,M){var a=y.width/2,E=y.height/2,m=C.x,k=C.y,I=C.theta,O=Math.cos(I)*a,z=Math.sin(I)*a,B=(m>M.center?M.right-m:m-M.left)/(O+Math.abs(Math.sin(I)*E)),F=(k>M.middle?M.bottom-k:k-M.top)/(Math.abs(z)+Math.cos(I)*E);if(B<1||F<1)return 1/0;var _=g.EDGECOST*(1/(B-1)+1/(F-1));_+=g.ANGLECOST*I*I;for(var N=m-O,G=k-z,X=m+O,$=k+z,et=0;et<S.length;et++){var ot=S[et],nt=Math.cos(ot.theta)*ot.width/2,Z=Math.sin(ot.theta)*ot.width/2,Q=P.segmentDistance(N,G,X,$,ot.x-nt,ot.y-Z,ot.x+nt,ot.y+Z)*2/(y.height+ot.height),W=ot.level===y.level,J=W?g.SAMELEVELDISTANCE:1;if(Q<=J)return 1/0;var it=g.NEIGHBORCOST*(W?g.SAMELEVELFACTOR:1);_+=it/(Q-J)}return _}V.addLabelData=function(C,y,S,M){var a=y.fontSize,E=y.width+a/3,m=Math.max(0,y.height-a/3),k=C.x,I=C.y,O=C.theta,z=Math.sin(O),B=Math.cos(O),F=function(N,G){return[k+N*B-G*z,I+N*z+G*B]},_=[F(-E/2,-m/2),F(-E/2,m/2),F(E/2,m/2),F(E/2,-m/2)];S.push({text:y.text,x:k,y:I,dy:y.dy,theta:O,level:y.level,width:E,height:m}),M.push(_)},V.drawLabels=function(C,y,S,M,a){var E=C.selectAll("text").data(y,function(O){return O.text+","+O.x+","+O.y+","+O.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(O){var z=O.x+Math.sin(O.theta)*O.dy,B=O.y-Math.cos(O.theta)*O.dy;b.select(this).text(O.text).attr({x:z,y:B,transform:"rotate("+180*O.theta/Math.PI+" "+z+" "+B+")"}).call(A.convertToTspans,S)}),a){for(var m="",k=0;k<a.length;k++)m+="M"+a[k].join("L")+"Z";var I=P.ensureSingle(M,"path","");I.attr("d",m)}};function x(C,y,S,M,a){var E=M.trace,m=S._fullLayout._clips,k="clip"+E.uid,I=m.selectAll("#"+k).data(E.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",k),I.exit().remove(),E.connectgaps===!1){var O={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:y.xaxis,yaxis:y.yaxis,x:M.x,y:M.y,z:w(M),smoothing:0};e([O]),s([O]),f([O],{type:"levels"});var z=P.ensureSingle(I,"path","");z.attr("d",(O.prefixBoundary?"M"+a.join("L")+"Z":"")+c(O,a))}else k=null;o.setClipUrl(C,k,S)}function w(C){var y=C.trace._emptypoints,S=[],M=C.z.length,a=C.z[0].length,E,m=[],k;for(E=0;E<a;E++)m.push(1);for(E=0;E<M;E++)S.push(m.slice());for(E=0;E<y.length;E++)k=y[E],S[k[0]][k[1]]=0;return C.zmask=S,S}},54444:function(j,V,t){var b=t(54460),P=t(3400);j.exports=function(A,v){var p=A.contours;if(A.autocontour){var r=A.zmin,e=A.zmax;(A.zauto||r===void 0)&&(r=P.aggNums(Math.min,null,v)),(A.zauto||e===void 0)&&(e=P.aggNums(Math.max,null,v));var s=o(r,e,A.ncontours);p.size=s.dtick,p.start=b.tickFirst(s),s.range.reverse(),p.end=b.tickFirst(s),p.start===r&&(p.start+=p.size),p.end===e&&(p.end-=p.size),p.start>p.end&&(p.start=p.end=(p.start+p.end)/2),A._input.contours||(A._input.contours={}),P.extendFlat(A._input.contours,{start:p.start,end:p.end,size:p.size}),A._input.autocontour=!0}else if(p.type!=="constraint"){var n=p.start,l=p.end,f=A._input.contours;if(n>l&&(p.start=f.start=l,l=p.end=f.end=n,n=p.start),!(p.size>0)){var u;n===l?u=1:u=o(n,l,A.ncontours).dtick,f.size=p.size=u}}};function o(L,A,v){var p={type:"linear",range:[L,A]};return b.autoTicks(p,(A-L)/(v||15)),p}},52440:function(j,V,t){var b=t(33428),P=t(43616),o=t(41648),L=t(41076);j.exports=function(v){var p=b.select(v).selectAll("g.contour");p.style("opacity",function(r){return r[0].trace.opacity}),p.each(function(r){var e=b.select(this),s=r[0].trace,n=s.contours,l=s.line,f=n.size||1,u=n.start,g=n.type==="constraint",h=!g&&n.coloring==="lines",T=!g&&n.coloring==="fill",c=h||T?L(s):null;e.selectAll("g.contourlevel").each(function(x){b.select(this).selectAll("path").call(P.lineGroupStyle,l.width,h?c(x.level):l.color,l.dash)});var i=n.labelfont;if(e.selectAll("g.contourlabels text").each(function(x){P.font(b.select(this),{weight:i.weight,style:i.style,variant:i.variant,textcase:i.textcase,lineposition:i.lineposition,shadow:i.shadow,family:i.family,size:i.size,color:i.color||(h?c(x.level):l.color)})}),g)e.selectAll("g.contourfill path").style("fill",s.fillcolor);else if(T){var d;e.selectAll("g.contourfill path").style("fill",function(x){return d===void 0&&(d=x.level),c(x.level+.5*f)}),d===void 0&&(d=u),e.selectAll("g.contourbg path").style("fill",c(d-.5*f))}}),o(v)}},97680:function(j,V,t){var b=t(27260),P=t(17428);j.exports=function(L,A,v,p,r){var e=v("contours.coloring"),s,n="";e==="fill"&&(s=v("contours.showlines")),s!==!1&&(e!=="lines"&&(n=v("line.color","#000")),v("line.width",.5),v("line.dash")),e!=="none"&&(L.showlegend!==!0&&(A.showlegend=!1),A._dfltShowLegend=!1,b(L,A,p,v,{prefix:"",cLetter:"z"})),v("line.smoothing"),P(v,p,n,r)}},37960:function(j,V,t){var b=t(83328),P=t(67104),o=t(49084),L=t(92880).extendFlat,A=P.contours;j.exports=L({carpet:{valType:"string",editType:"calc"},z:b.z,a:b.x,a0:b.x0,da:b.dx,b:b.y,b0:b.y0,db:b.dy,text:b.text,hovertext:b.hovertext,transpose:b.transpose,atype:b.xtype,btype:b.ytype,fillcolor:P.fillcolor,autocontour:P.autocontour,ncontours:P.ncontours,contours:{type:A.type,start:A.start,end:A.end,size:A.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:A.showlines,showlabels:A.showlabels,labelfont:A.labelfont,labelformat:A.labelformat,operation:A.operation,value:A.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:P.line.color,width:P.line.width,dash:P.line.dash,smoothing:P.line.smoothing,editType:"plot"},zorder:P.zorder,transforms:void 0},o("",{cLetter:"z",autoColorDflt:!1}))},30572:function(j,V,t){var b=t(47128),P=t(3400),o=t(2872),L=t(26136),A=t(70448),v=t(11240),p=t(35744),r=t(3252),e=t(50948),s=t(54444);j.exports=function(f,u){var g=u._carpetTrace=e(f,u);if(!(!g||!g.visible||g.visible==="legendonly")){if(!u.a||!u.b){var h=f.data[g.index],T=f.data[u.index];T.a||(T.a=h.a),T.b||(T.b=h.b),r(T,u,u._defaultColor,f._fullLayout)}var c=n(f,u);return s(u,u._z),c}};function n(l,f){var u=f._carpetTrace,g=u.aaxis,h=u.baxis,T,c,i,d,x,w,C;g._minDtick=0,h._minDtick=0,P.isArray1D(f.z)&&o(f,g,h,"a","b",["z"]),T=f._a=f._a||f.a,d=f._b=f._b||f.b,T=T?g.makeCalcdata(f,"_a"):[],d=d?h.makeCalcdata(f,"_b"):[],c=f.a0||0,i=f.da||1,x=f.b0||0,w=f.db||1,C=f._z=L(f._z||f.z,f.transpose),f._emptypoints=v(C),A(C,f._emptypoints);var y=P.maxRowLength(C),S=f.xtype==="scaled"?"":T,M=p(f,S,c,i,y,g),a=f.ytype==="scaled"?"":d,E=p(f,a,x,w,C.length,h),m={a:M,b:E,z:C};return f.contours.type==="levels"&&f.contours.coloring!=="none"&&b(l,f,{vals:C,containerStr:"",cLetter:"z"}),[m]}},3252:function(j,V,t){var b=t(3400),P=t(51264),o=t(37960),L=t(95536),A=t(84952),v=t(97680);j.exports=function(r,e,s,n){function l(h,T){return b.coerce(r,e,o,h,T)}function f(h){return b.coerce2(r,e,o,h)}if(l("carpet"),r.a&&r.b){var u=P(r,e,l,n,"a","b");if(!u){e.visible=!1;return}l("text");var g=l("contours.type")==="constraint";g?L(r,e,l,n,s,{hasHover:!1}):(A(r,e,l,f),v(r,e,l,n,{hasHover:!1}))}else e._defaultColor=s,e._length=null;l("zorder")}},40448:function(j,V,t){j.exports={attributes:t(37960),supplyDefaults:t(3252),colorbar:t(55296),calc:t(30572),plot:t(94440),style:t(52440),moduleType:"trace",name:"contourcarpet",basePlotModule:t(57952),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},94440:function(j,V,t){var b=t(33428),P=t(87072),o=t(53416),L=t(43616),A=t(3400),v=t(72424),p=t(88748),r=t(23676),e=t(93252),s=t(82172),n=t(61512),l=t(56008),f=t(50948),u=t(77712);j.exports=function(S,M,a,E){var m=M.xaxis,k=M.yaxis;A.makeTraceGroups(E,a,"contour").each(function(I){var O=b.select(this),z=I[0],B=z.trace,F=B._carpetTrace=f(S,B),_=S.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var N=z.a,G=z.b,X=B.contours,$=n(X,M,z),et=X.type==="constraint",ot=X._operation,nt=et?ot==="="?"lines":"fill":X.coloring;function Z(mt){var gt=F.ab2xy(mt[0],mt[1],!0);return[m.c2p(gt[0]),k.c2p(gt[1])]}var Q=[[N[0],G[G.length-1]],[N[N.length-1],G[G.length-1]],[N[N.length-1],G[0]],[N[0],G[0]]];v($);var W=(N[N.length-1]-N[0])*1e-8,J=(G[G.length-1]-G[0])*1e-8;p($,W,J);var it=$;X.type==="constraint"&&(it=s($,ot)),g($,Z);var K,H,at,tt,lt=[];for(tt=_.clipsegments.length-1;tt>=0;tt--)K=_.clipsegments[tt],H=P([],K.x,m.c2p),at=P([],K.y,k.c2p),H.reverse(),at.reverse(),lt.push(o(H,at,K.bicubic));var dt="M"+lt.join("L")+"Z";x(O,_.clipsegments,m,k,et,nt),w(B,O,m,k,it,Q,Z,F,_,nt,dt),h(O,$,S,z,X,M,F),L.setClipUrl(O,F._clipPathId,S)})};function g(y,S){var M,a,E,m,k,I,O,z,B;for(M=0;M<y.length;M++){for(m=y[M],k=m.pedgepaths=[],I=m.ppaths=[],a=0;a<m.edgepaths.length;a++){for(B=m.edgepaths[a],O=[],E=0;E<B.length;E++)O[E]=S(B[E]);k.push(O)}for(a=0;a<m.paths.length;a++){for(B=m.paths[a],z=[],E=0;E<B.length;E++)z[E]=S(B[E]);I.push(z)}}}function h(y,S,M,a,E,m,k){var I=M._context.staticPlot,O=A.ensureSingle(y,"g","contourlines"),z=E.showlines!==!1,B=E.showlabels,F=z&&B,_=r.createLines(O,z||B,S,I),N=r.createLineClip(O,F,M,a.trace.uid),G=y.selectAll("g.contourlabels").data(B?[0]:[]);if(G.exit().remove(),G.enter().append("g").classed("contourlabels",!0),B){var X=m.xaxis,$=m.yaxis,et=X._length,ot=$._length,nt=[[[0,0],[et,0],[et,ot],[0,ot]]],Z=[];A.clearLocationCache();var Q=r.labelFormatter(M,a),W=L.tester.append("text").attr("data-notex",1).call(L.font,E.labelfont),J={left:0,right:et,center:et/2,top:0,bottom:ot,middle:ot/2},it=Math.sqrt(et*et+ot*ot),K=e.LABELDISTANCE*it/Math.max(1,S.length/e.LABELINCREASE);_.each(function(H){var at=r.calcTextOpts(H.level,Q,W,M);b.select(this).selectAll("path").each(function(tt){var lt=this,dt=A.getVisibleSegment(lt,J,at.height/2);if(dt&&(T(lt,tt,H,dt,k,at.height),!(dt.len<(at.width+at.height)*e.LABELMIN)))for(var mt=Math.min(Math.ceil(dt.len/K),e.LABELMAX),gt=0;gt<mt;gt++){var Mt=r.findBestTextLocation(lt,dt,at,Z,J);if(!Mt)break;r.addLabelData(Mt,at,Z,nt)}})}),W.remove(),r.drawLabels(G,Z,M,N,F?nt:null)}B&&!z&&_.remove()}function T(y,S,M,a,E,m){for(var k,I=0;I<M.pedgepaths.length;I++)S===M.pedgepaths[I]&&(k=M.edgepaths[I]);if(!k)return;var O=E.a[0],z=E.a[E.a.length-1],B=E.b[0],F=E.b[E.b.length-1];function _(et,ot){var nt=0,Z,Q=.1;return(Math.abs(et[0]-O)<Q||Math.abs(et[0]-z)<Q)&&(Z=i(E.dxydb_rough(et[0],et[1],Q)),nt=Math.max(nt,m*d(ot,Z)/2)),(Math.abs(et[1]-B)<Q||Math.abs(et[1]-F)<Q)&&(Z=i(E.dxyda_rough(et[0],et[1],Q)),nt=Math.max(nt,m*d(ot,Z)/2)),nt}var N=c(y,0,1),G=c(y,a.total,a.total-1),X=_(k[0],N),$=a.total-_(k[k.length-1],G);a.min<X&&(a.min=X),a.max>$&&(a.max=$),a.len=a.max-a.min}function c(y,S,M){var a=y.getPointAtLength(S),E=y.getPointAtLength(M),m=E.x-a.x,k=E.y-a.y,I=Math.sqrt(m*m+k*k);return[m/I,k/I]}function i(y){var S=Math.sqrt(y[0]*y[0]+y[1]*y[1]);return[y[0]/S,y[1]/S]}function d(y,S){var M=Math.abs(y[0]*S[0]+y[1]*S[1]),a=Math.sqrt(1-M*M);return a/M}function x(y,S,M,a,E,m){var k,I,O,z,B=A.ensureSingle(y,"g","contourbg"),F=B.selectAll("path").data(m==="fill"&&!E?[0]:[]);F.enter().append("path"),F.exit().remove();var _=[];for(z=0;z<S.length;z++)k=S[z],I=P([],k.x,M.c2p),O=P([],k.y,a.c2p),_.push(o(I,O,k.bicubic));F.attr("d","M"+_.join("L")+"Z").style("stroke","none")}function w(y,S,M,a,E,m,k,I,O,z,B){var F=z==="fill";F&&l(E,y.contours);var _=A.ensureSingle(S,"g","contourfill"),N=_.selectAll("path").data(F?E:[]);N.enter().append("path"),N.exit().remove(),N.each(function(G){var X=(G.prefixBoundary?B:"")+C(y,G,m,k,I,O,M,a);X?b.select(this).attr("d",X).style("stroke","none"):b.select(this).remove()})}function C(y,S,M,a,E,m,k,I){var O,z="",B=S.edgepaths.map(function(at,tt){return tt}),F=!0,_,N,G,X,$,et,ot=Math.abs(M[0][0]-M[2][0])*1e-4,nt=Math.abs(M[0][1]-M[2][1])*1e-4;function Z(at){return Math.abs(at[1]-M[0][1])<nt}function Q(at){return Math.abs(at[1]-M[2][1])<nt}function W(at){return Math.abs(at[0]-M[0][0])<ot}function J(at){return Math.abs(at[0]-M[2][0])<ot}function it(at,tt){var lt,dt,mt,gt,Mt="";for(Z(at)&&!J(at)||Q(at)&&!W(at)?(gt=E.aaxis,mt=u(E,m,[at[0],tt[0]],.5*(at[1]+tt[1]))):(gt=E.baxis,mt=u(E,m,.5*(at[0]+tt[0]),[at[1],tt[1]])),lt=1;lt<mt.length;lt++)for(Mt+=gt.smoothing?"C":"L",dt=0;dt<mt[lt].length;dt++){var Lt=mt[lt][dt];Mt+=[k.c2p(Lt[0]),I.c2p(Lt[1])]+" "}return Mt}for(O=0,_=null;B.length;){var K=S.edgepaths[O][0];for(_&&(z+=it(_,K)),et=L.smoothopen(S.edgepaths[O].map(a),S.smoothing),z+=F?et:et.replace(/^M/,"L"),B.splice(B.indexOf(O),1),_=S.edgepaths[O][S.edgepaths[O].length-1],X=-1,G=0;G<4;G++){if(!_){A.log("Missing end?",O,S);break}for(Z(_)&&!J(_)?N=M[1]:W(_)?N=M[0]:Q(_)?N=M[3]:J(_)&&(N=M[2]),$=0;$<S.edgepaths.length;$++){var H=S.edgepaths[$][0];Math.abs(_[0]-N[0])<ot?Math.abs(_[0]-H[0])<ot&&(H[1]-_[1])*(N[1]-H[1])>=0&&(N=H,X=$):Math.abs(_[1]-N[1])<nt?Math.abs(_[1]-H[1])<nt&&(H[0]-_[0])*(N[0]-H[0])>=0&&(N=H,X=$):A.log("endpt to newendpt is not vert. or horz.",_,N,H)}if(X>=0)break;z+=it(_,N),_=N}if(X===S.edgepaths.length){A.log("unclosed perimeter path");break}O=X,F=B.indexOf(O)===-1,F&&(O=B[0],z+=it(_,N)+"Z",_=null)}for(O=0;O<S.paths.length;O++)z+=L.smoothclosed(S.paths[O].map(a),S.smoothing);return z}},33928:function(j,V,t){var b=t(49084),P=t(21776).Ks,o=t(45464),L=t(31512),A=t(92880).extendFlat;j.exports=A({lon:L.lon,lat:L.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:L.text,hovertext:L.hovertext,hoverinfo:A({},o.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:P(),showlegend:A({},o.showlegend,{dflt:!1})},b("",{cLetter:"z",editTypeOverride:"calc"}))},90876:function(j,V,t){var b=t(38248),P=t(3400).isArrayOrTypedArray,o=t(39032).BADNUM,L=t(47128),A=t(3400)._;j.exports=function(p,r){for(var e=r._length,s=new Array(e),n=r.z,l=P(n)&&n.length,f=0;f<e;f++){var u=s[f]={},g=r.lon[f],h=r.lat[f];if(u.lonlat=b(g)&&b(h)?[+g,+h]:[o,o],l){var T=n[f];u.z=b(T)?T:o}}return L(p,r,{vals:l?n:[0,1],containerStr:"",cLetter:"z"}),e&&(s[0].t={labels:{lat:A(p,"lat:")+" ",lon:A(p,"lon:")+" "}}),s}},4629:function(j,V,t){var b=t(38248),P=t(3400),o=t(76308),L=t(8932),A=t(39032).BADNUM,v=t(44808).makeBlank;j.exports=function(r){var e=r[0].trace,s=e.visible===!0&&e._length!==0,n={layout:{visibility:"none"},paint:{}},l=e._opts={heatmap:n,geojson:v()};if(!s)return l;var f=[],u,g=e.z,h=e.radius,T=P.isArrayOrTypedArray(g)&&g.length,c=P.isArrayOrTypedArray(h);for(u=0;u<r.length;u++){var i=r[u],d=i.lonlat;if(d[0]!==A){var x={};if(T){var w=i.z;x.z=w!==A?w:0}c&&(x.r=b(h[u])&&h[u]>0?+h[u]:0),f.push({type:"Feature",geometry:{type:"Point",coordinates:d},properties:x})}}var C=L.extractOpts(e),y=C.reversescale?L.flipScale(C.colorscale):C.colorscale,S=y[0][1],M=o.opacity(S)<1?S:o.addOpacity(S,0),a=["interpolate",["linear"],["heatmap-density"],0,M];for(u=1;u<y.length;u++)a.push(y[u][0],y[u][1]);var E=["interpolate",["linear"],["get","z"],C.min,0,C.max,1];return P.extendFlat(l.heatmap.paint,{"heatmap-weight":T?E:1/(C.max-C.min),"heatmap-color":a,"heatmap-radius":c?{type:"identity",property:"r"}:e.radius,"heatmap-opacity":e.opacity}),l.geojson={type:"FeatureCollection",features:f},l.heatmap.layout.visibility="visible",l}},97664:function(j,V,t){var b=t(3400),P=t(27260),o=t(33928);j.exports=function(A,v,p,r){function e(f,u){return b.coerce(A,v,o,f,u)}var s=e("lon")||[],n=e("lat")||[],l=Math.min(s.length,n.length);if(!l){v.visible=!1;return}v._length=l,e("z"),e("radius"),e("below"),e("text"),e("hovertext"),e("hovertemplate"),P(A,v,r,e,{prefix:"",cLetter:"z"})}},96176:function(j){j.exports=function(t,b){return t.lon=b.lon,t.lat=b.lat,t.z=b.z,t}},25336:function(j,V,t){var b=t(54460),P=t(63312).hoverPoints,o=t(63312).getExtraText;j.exports=function(A,v,p){var r=P(A,v,p);if(r){var e=r[0],s=e.cd,n=s[0].trace,l=s[e.index];if(delete e.color,"z"in l){var f=e.subplot.mockAxis;e.z=l.z,e.zLabel=b.tickText(f,f.c2l(l.z),"hover").text}return e.extraText=o(n,l,s[0].t.labels),[e]}}},15088:function(j,V,t){j.exports={attributes:t(33928),supplyDefaults:t(97664),colorbar:t(96288),formatLabels:t(11960),calc:t(90876),plot:t(35256),hoverPoints:t(25336),eventData:t(96176),getBelow:function(b,P){for(var o=P.getMapLayers(),L=0;L<o.length;L++){var A=o[L],v=A.id;if(A.type==="symbol"&&typeof v=="string"&&v.indexOf("plotly-")===-1)return v}},moduleType:"trace",name:"densitymapbox",basePlotModule:t(33688),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},35256:function(j,V,t){var b=t(4629),P=t(47552).traceLayerPrefix;function o(A,v){this.type="densitymapbox",this.subplot=A,this.uid=v,this.sourceId="source-"+v,this.layerList=[["heatmap",P+v+"-heatmap"]],this.below=null}var L=o.prototype;L.update=function(A){var v=this.subplot,p=this.layerList,r=b(A),e=v.belowLookup["trace-"+this.uid];v.map.getSource(this.sourceId).setData(r.geojson),e!==this.below&&(this._removeLayers(),this._addLayers(r,e),this.below=e);for(var s=0;s<p.length;s++){var n=p[s],l=n[0],f=n[1],u=r[l];v.setOptions(f,"setLayoutProperty",u.layout),u.layout.visibility==="visible"&&v.setOptions(f,"setPaintProperty",u.paint)}},L._addLayers=function(A,v){for(var p=this.subplot,r=this.layerList,e=this.sourceId,s=0;s<r.length;s++){var n=r[s],l=n[0],f=A[l];p.addLayer({type:l,id:n[1],source:e,layout:f.layout,paint:f.paint},v)}},L._removeLayers=function(){for(var A=this.subplot.map,v=this.layerList,p=v.length-1;p>=0;p--)A.removeLayer(v[p][1])},L.dispose=function(){var A=this.subplot.map;this._removeLayers(),A.removeSource(this.sourceId)},j.exports=function(v,p){var r=p[0].trace,e=new o(v,r.uid),s=e.sourceId,n=b(p),l=e.below=v.belowLookup["trace-"+r.uid];return v.map.addSource(s,{type:"geojson",data:n.geojson}),e._addLayers(n,l),e}},74248:function(j,V,t){var b=t(3400);j.exports=function(o,L){for(var A=0;A<o.length;A++)o[A].i=A;b.mergeArray(L.text,o,"tx"),b.mergeArray(L.hovertext,o,"htx");var v=L.marker;if(v){b.mergeArray(v.opacity,o,"mo"),b.mergeArray(v.color,o,"mc");var p=v.line;p&&(b.mergeArray(p.color,o,"mlc"),b.mergeArrayCastPositive(p.width,o,"mlw"))}}},20088:function(j,V,t){var b=t(20832),P=t(52904).line,o=t(45464),L=t(29736).axisHoverFormat,A=t(21776).Ks,v=t(21776).Gw,p=t(74732),r=t(92880).extendFlat,e=t(76308);j.exports={x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:L("x"),yhoverformat:L("y"),hovertext:b.hovertext,hovertemplate:A({},{keys:p.eventDataKeys}),hoverinfo:r({},o.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:p.eventDataKeys.concat(["label","value"])}),text:b.text,textposition:b.textposition,insidetextanchor:r({},b.insidetextanchor,{dflt:"middle"}),textangle:r({},b.textangle,{dflt:0}),textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:b.outsidetextfont,constraintext:b.constraintext,cliponaxis:b.cliponaxis,orientation:r({},b.orientation,{}),offset:r({},b.offset,{arrayOk:!1}),width:r({},b.width,{arrayOk:!1}),marker:s(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},P.color,{dflt:e.defaultLine}),width:r({},P.width,{dflt:0,editType:"plot"}),dash:P.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,zorder:b.zorder};function s(){var n=r({},b.marker);return delete n.pattern,delete n.cornerradius,n}},23096:function(j,V,t){var b=t(54460),P=t(1220),o=t(74248),L=t(4500),A=t(39032).BADNUM;j.exports=function(r,e){var s=b.getFromId(r,e.xaxis||"x"),n=b.getFromId(r,e.yaxis||"y"),l,f,u,g,h,T,c,i;e.orientation==="h"?(l=s.makeCalcdata(e,"x"),u=n.makeCalcdata(e,"y"),g=P(e,n,"y",u),h=!!e.yperiodalignment,T="y"):(l=n.makeCalcdata(e,"y"),u=s.makeCalcdata(e,"x"),g=P(e,s,"x",u),h=!!e.xperiodalignment,T="x"),f=g.vals;var d=Math.min(f.length,l.length),x=new Array(d);for(e._base=[],c=0;c<d;c++){l[c]<0&&(l[c]=A);var w=!1;l[c]!==A&&c+1<d&&l[c+1]!==A&&(w=!0),i=x[c]={p:f[c],s:l[c],cNext:w},e._base[c]=-.5*i.s,h&&(x[c].orig_p=u[c],x[c][T+"End"]=g.ends[c],x[c][T+"Start"]=g.starts[c]),e.ids&&(i.id=String(e.ids[c])),c===0&&(x[0].vTotal=0),x[0].vTotal+=v(i.s),i.begR=v(i.s)/v(x[0].s)}var C;for(c=0;c<d;c++)i=x[c],i.s!==A&&(i.sumR=i.s/x[0].vTotal,i.difR=C!==void 0?i.s/C:1,C=i.s);return o(x,e),L(x,e),x};function v(p){return p===A?0:p}},74732:function(j){j.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},4804:function(j,V,t){var b=t(96376).setGroupPositions;j.exports=function(o,L){var A=o._fullLayout,v=o._fullData,p=o.calcdata,r=L.xaxis,e=L.yaxis,s=[],n=[],l=[],f,u;for(u=0;u<v.length;u++){var g=v[u],h=g.orientation==="h";g.visible===!0&&g.xaxis===r._id&&g.yaxis===e._id&&g.type==="funnel"&&(f=p[u],h?l.push(f):n.push(f),s.push(f))}var T={mode:A.funnelmode,norm:A.funnelnorm,gap:A.funnelgap,groupgap:A.funnelgroupgap};for(b(o,r,e,n,T),b(o,e,r,l,T),u=0;u<s.length;u++){f=s[u];for(var c=0;c<f.length;c++)c+1<f.length&&(f[c].nextP0=f[c+1].p0,f[c].nextS0=f[c+1].s0,f[c].nextP1=f[c+1].p1,f[c].nextS1=f[c+1].s1)}}},45432:function(j,V,t){var b=t(3400),P=t(20011),o=t(31508).handleText,L=t(43980),A=t(31147),v=t(20088),p=t(76308);function r(n,l,f,u){function g(w,C){return b.coerce(n,l,v,w,C)}var h=L(n,l,u,g);if(!h){l.visible=!1;return}A(n,l,u,g),g("xhoverformat"),g("yhoverformat"),g("orientation",l.y&&!l.x?"v":"h"),g("offset"),g("width");var T=g("text");g("hovertext"),g("hovertemplate");var c=g("textposition");o(n,l,u,g,c,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l.textposition!=="none"&&!l.texttemplate&&g("textinfo",b.isArrayOrTypedArray(T)?"text+value":"value");var i=g("marker.color",f);g("marker.line.color",p.defaultLine),g("marker.line.width");var d=g("connector.visible");if(d){g("connector.fillcolor",e(i));var x=g("connector.line.width");x&&(g("connector.line.color"),g("connector.line.dash"))}g("zorder")}function e(n){var l=b.isArrayOrTypedArray(n)?"#000":n;return p.addOpacity(l,.5*p.opacity(l))}function s(n,l){var f,u;function g(T){return b.coerce(u._input,u,v,T)}if(l.funnelmode==="group")for(var h=0;h<n.length;h++)u=n[h],f=u._input,P(f,u,l,g)}j.exports={supplyDefaults:r,crossTraceDefaults:s}},34580:function(j){j.exports=function(t,b){return t.x="xVal"in b?b.xVal:b.x,t.y="yVal"in b?b.yVal:b.y,"percentInitial"in b&&(t.percentInitial=b.percentInitial),"percentPrevious"in b&&(t.percentPrevious=b.percentPrevious),"percentTotal"in b&&(t.percentTotal=b.percentTotal),b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),t}},31488:function(j,V,t){var b=t(76308).opacity,P=t(63400).hoverOnBars,o=t(3400).formatPercent;j.exports=function(v,p,r,e,s){var n=P(v,p,r,e,s);if(n){var l=n.cd,f=l[0].trace,u=f.orientation==="h",g=n.index,h=l[g],T=u?"x":"y";n[T+"LabelVal"]=h.s,n.percentInitial=h.begR,n.percentInitialLabel=o(h.begR,1),n.percentPrevious=h.difR,n.percentPreviousLabel=o(h.difR,1),n.percentTotal=h.sumR,n.percentTotalLabel=o(h.sumR,1);var c=h.hi||f.hoverinfo,i=[];if(c&&c!=="none"&&c!=="skip"){var d=c==="all",x=c.split("+"),w=function(C){return d||x.indexOf(C)!==-1};w("percent initial")&&i.push(n.percentInitialLabel+" of initial"),w("percent previous")&&i.push(n.percentPreviousLabel+" of previous"),w("percent total")&&i.push(n.percentTotalLabel+" of total")}return n.extraText=i.join("<br>"),n.color=L(f,h),[n]}};function L(A,v){var p=A.marker,r=v.mc||p.color,e=v.mlc||p.line.color,s=v.mlw||p.line.width;if(b(r))return r;if(b(e)&&s)return e}},94704:function(j,V,t){j.exports={attributes:t(20088),layoutAttributes:t(7076),supplyDefaults:t(45432).supplyDefaults,crossTraceDefaults:t(45432).crossTraceDefaults,supplyLayoutDefaults:t(11631),calc:t(23096),crossTraceCalc:t(4804),plot:t(42200),style:t(44544).style,hoverPoints:t(31488),eventData:t(34580),selectPoints:t(45784),moduleType:"trace",name:"funnel",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},7076:function(j){j.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},11631:function(j,V,t){var b=t(3400),P=t(7076);j.exports=function(o,L,A){var v=!1;function p(s,n){return b.coerce(o,L,P,s,n)}for(var r=0;r<A.length;r++){var e=A[r];if(e.visible&&e.type==="funnel"){v=!0;break}}v&&(p("funnelmode"),p("funnelgap",.2),p("funnelgroupgap"))}},42200:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(39032).BADNUM,A=t(98184),v=t(82744).clearMinTextSize;j.exports=function(n,l,f,u){var g=n._fullLayout;v("funnel",g),p(n,l,f,u),r(n,l,f,u),A.plot(n,l,f,u,{mode:g.funnelmode,norm:g.funnelmode,gap:g.funnelgap,groupgap:g.funnelgroupgap})};function p(s,n,l,f){var u=n.xaxis,g=n.yaxis;P.makeTraceGroups(f,l,"trace bars").each(function(h){var T=b.select(this),c=h[0].trace,i=P.ensureSingle(T,"g","regions");if(!c.connector||!c.connector.visible){i.remove();return}var d=c.orientation==="h",x=i.selectAll("g.region").data(P.identity);x.enter().append("g").classed("region",!0),x.exit().remove();var w=x.size();x.each(function(C,y){if(!(y!==w-1&&!C.cNext)){var S=e(C,u,g,d),M=S[0],a=S[1],E="";M[0]!==L&&a[0]!==L&&M[1]!==L&&a[1]!==L&&M[2]!==L&&a[2]!==L&&M[3]!==L&&a[3]!==L&&(d?E+="M"+M[0]+","+a[1]+"L"+M[2]+","+a[2]+"H"+M[3]+"L"+M[1]+","+a[1]+"Z":E+="M"+M[1]+","+a[1]+"L"+M[2]+","+a[3]+"V"+a[2]+"L"+M[1]+","+a[0]+"Z"),E===""&&(E="M0,0Z"),P.ensureSingle(b.select(this),"path").attr("d",E).call(o.setClipUrl,n.layerClipId,s)}})})}function r(s,n,l,f){var u=n.xaxis,g=n.yaxis;P.makeTraceGroups(f,l,"trace bars").each(function(h){var T=b.select(this),c=h[0].trace,i=P.ensureSingle(T,"g","lines");if(!c.connector||!c.connector.visible||!c.connector.line.width){i.remove();return}var d=c.orientation==="h",x=i.selectAll("g.line").data(P.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var w=x.size();x.each(function(C,y){if(!(y!==w-1&&!C.cNext)){var S=e(C,u,g,d),M=S[0],a=S[1],E="";M[3]!==void 0&&a[3]!==void 0&&(d?(E+="M"+M[0]+","+a[1]+"L"+M[2]+","+a[2],E+="M"+M[1]+","+a[1]+"L"+M[3]+","+a[2]):(E+="M"+M[1]+","+a[1]+"L"+M[2]+","+a[3],E+="M"+M[1]+","+a[0]+"L"+M[2]+","+a[2])),E===""&&(E="M0,0Z"),P.ensureSingle(b.select(this),"path").attr("d",E).call(o.setClipUrl,n.layerClipId,s)}})})}function e(s,n,l,f){var u=[],g=[],h=f?n:l,T=f?l:n;return u[0]=h.c2p(s.s0,!0),g[0]=T.c2p(s.p0,!0),u[1]=h.c2p(s.s1,!0),g[1]=T.c2p(s.p1,!0),u[2]=h.c2p(s.nextS0,!0),g[2]=T.c2p(s.nextP0,!0),u[3]=h.c2p(s.nextS1,!0),g[3]=T.c2p(s.nextP1,!0),f?[u,g]:[g,u]}},44544:function(j,V,t){var b=t(33428),P=t(43616),o=t(76308),L=t(13448).DESELECTDIM,A=t(60100),v=t(82744).resizeText,p=A.styleTextPoints;function r(e,s,n){var l=n||b.select(e).selectAll('g[class^="funnellayer"]').selectAll("g.trace");v(e,l,"funnel"),l.style("opacity",function(f){return f[0].trace.opacity}),l.each(function(f){var u=b.select(this),g=f[0].trace;u.selectAll(".point > path").each(function(h){if(!h.isBlank){var T=g.marker;b.select(this).call(o.fill,h.mc||T.color).call(o.stroke,h.mlc||T.line.color).call(P.dashLine,T.line.dash,h.mlw||T.line.width).style("opacity",g.selectedpoints&&!h.selected?L:1)}}),p(u,g,e),u.selectAll(".regions").each(function(){b.select(this).selectAll("path").style("stroke-width",0).call(o.fill,g.connector.fillcolor)}),u.selectAll(".lines").each(function(){var h=g.connector.line;P.lineGroupStyle(b.select(this).selectAll("path"),h.width,h.color,h.dash)})})}j.exports={style:r}},22332:function(j,V,t){var b=t(74996),P=t(45464),o=t(86968).u,L=t(21776).Ks,A=t(21776).Gw,v=t(92880).extendFlat;j.exports={labels:b.labels,label0:b.label0,dlabel:b.dlabel,values:b.values,marker:{colors:b.marker.colors,line:{color:v({},b.marker.line.color,{dflt:null}),width:v({},b.marker.line.width,{dflt:1}),editType:"calc"},pattern:b.marker.pattern,editType:"calc"},text:b.text,hovertext:b.hovertext,scalegroup:v({},b.scalegroup,{}),textinfo:v({},b.textinfo,{flags:["label","text","value","percent"]}),texttemplate:A({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:v({},P.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:L({},{keys:["label","color","value","text","percent"]}),textposition:v({},b.textposition,{values:["inside","none"],dflt:"inside"}),textfont:b.textfont,insidetextfont:b.insidetextfont,title:{text:b.title.text,font:b.title.font,position:v({},b.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:o({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},91248:function(j,V,t){var b=t(7316);V.name="funnelarea",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},54e3:function(j,V,t){var b=t(45768);function P(L,A){return b.calc(L,A)}function o(L){b.crossTraceCalc(L,{type:"funnelarea"})}j.exports={calc:P,crossTraceCalc:o}},92688:function(j,V,t){var b=t(3400),P=t(22332),o=t(86968).Q,L=t(31508).handleText,A=t(74174).handleLabelsAndValues,v=t(74174).handleMarkerDefaults;j.exports=function(r,e,s,n){function l(w,C){return b.coerce(r,e,P,w,C)}var f=l("labels"),u=l("values"),g=A(f,u),h=g.len;if(e._hasLabels=g.hasLabels,e._hasValues=g.hasValues,!e._hasLabels&&e._hasValues&&(l("label0"),l("dlabel")),!h){e.visible=!1;return}e._length=h,v(r,e,n,l),l("scalegroup");var T=l("text"),c=l("texttemplate"),i;if(c||(i=l("textinfo",Array.isArray(T)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),c||i&&i!=="none"){var d=l("textposition");L(r,e,n,l,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}else i==="none"&&l("textposition","none");o(e,n,l);var x=l("title.text");x&&(l("title.position"),b.coerceFont(l,"title.font",n.font)),l("aspectratio"),l("baseratio")}},62396:function(j,V,t){j.exports={moduleType:"trace",name:"funnelarea",basePlotModule:t(91248),categories:["pie-like","funnelarea","showLegend"],attributes:t(22332),layoutAttributes:t(61280),supplyDefaults:t(92688),supplyLayoutDefaults:t(35384),calc:t(54e3).calc,crossTraceCalc:t(54e3).crossTraceCalc,plot:t(39472),style:t(62096),styleOne:t(10528),meta:{}}},61280:function(j,V,t){var b=t(85204).hiddenlabels;j.exports={hiddenlabels:b,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},35384:function(j,V,t){var b=t(3400),P=t(61280);j.exports=function(L,A){function v(p,r){return b.coerce(L,A,P,p,r)}v("hiddenlabels"),v("funnelareacolorway",A.colorway),v("extendfunnelareacolors")}},39472:function(j,V,t){var b=t(33428),P=t(43616),o=t(3400),L=o.strScale,A=o.strTranslate,v=t(72736),p=t(98184),r=p.toMoveInsideBar,e=t(82744),s=e.recordMinTextSize,n=e.clearMinTextSize,l=t(69656),f=t(37820),u=f.attachFxHandlers,g=f.determineInsideTextFont,h=f.layoutAreas,T=f.prerenderTitles,c=f.positionTitleOutside,i=f.formatSliceLabel;j.exports=function(y,S){var M=y._context.staticPlot,a=y._fullLayout;n("funnelarea",a),T(S,y),h(S,a._size),o.makeTraceGroups(a._funnelarealayer,S,"trace").each(function(E){var m=b.select(this),k=E[0],I=k.trace;w(E),m.each(function(){var O=b.select(this).selectAll("g.slice").data(E);O.enter().append("g").classed("slice",!0),O.exit().remove(),O.each(function(B,F){if(B.hidden){b.select(this).selectAll("path,g").remove();return}B.pointNumber=B.i,B.curveNumber=I.index;var _=k.cx,N=k.cy,G=b.select(this),X=G.selectAll("path.surface").data([B]);X.enter().append("path").classed("surface",!0).style({"pointer-events":M?"none":"all"}),G.call(u,y,E);var $="M"+(_+B.TR[0])+","+(N+B.TR[1])+d(B.TR,B.BR)+d(B.BR,B.BL)+d(B.BL,B.TL)+"Z";X.attr("d",$),i(y,B,k);var et=l.castOption(I.textposition,B.pts),ot=G.selectAll("g.slicetext").data(B.text&&et!=="none"?[0]:[]);ot.enter().append("g").classed("slicetext",!0),ot.exit().remove(),ot.each(function(){var nt=o.ensureSingle(b.select(this),"text","",function(at){at.attr("data-notex",1)}),Z=o.ensureUniformFontSize(y,g(I,B,a.font));nt.text(B.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(P.font,Z).call(v.convertToTspans,y);var Q=P.bBox(nt.node()),W,J,it,K=Math.min(B.BL[1],B.BR[1])+N,H=Math.max(B.TL[1],B.TR[1])+N;J=Math.max(B.TL[0],B.BL[0])+_,it=Math.min(B.TR[0],B.BR[0])+_,W=r(J,it,K,H,Q,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),W.fontSize=Z.size,s(I.type,W,a),E[F].transform=W,o.setTransormAndDisplay(nt,W)})});var z=b.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);z.enter().append("g").classed("titletext",!0),z.exit().remove(),z.each(function(){var B=o.ensureSingle(b.select(this),"text","",function(N){N.attr("data-notex",1)}),F=I.title.text;I._meta&&(F=o.templateString(F,I._meta)),B.text(F).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(P.font,I.title.font).call(v.convertToTspans,y);var _=c(k,a._size);B.attr("transform",A(_.x,_.y)+L(Math.min(1,_.scale))+A(_.tx,_.ty))})})})};function d(C,y){var S=y[0]-C[0],M=y[1]-C[1];return"l"+S+","+M}function x(C,y){return[.5*(C[0]+y[0]),.5*(C[1]+y[1])]}function w(C){if(!C.length)return;var y=C[0],S=y.trace,M=S.aspectratio,a=S.baseratio;a>.999&&(a=.999);var E=Math.pow(a,2),m=y.vTotal,k=m*E/(1-E),I=m,O=k/m;function z(){var tt=Math.sqrt(O);return{x:tt,y:-tt}}function B(){var tt=z();return[tt.x,tt.y]}var F,_=[];_.push(B());var N,G;for(N=C.length-1;N>-1;N--)if(G=C[N],!G.hidden){var X=G.v/I;O+=X,_.push(B())}var $=1/0,et=-1/0;for(N=0;N<_.length;N++)F=_[N],$=Math.min($,F[1]),et=Math.max(et,F[1]);for(N=0;N<_.length;N++)_[N][1]-=(et+$)/2;var ot=_[_.length-1][0],nt=y.r,Z=(et-$)/2,Q=nt/ot,W=nt/Z*M;for(y.r=W*Z,N=0;N<_.length;N++)_[N][0]*=Q,_[N][1]*=W;F=_[0];var J=[-F[0],F[1]],it=[F[0],F[1]],K=0;for(N=C.length-1;N>-1;N--)if(G=C[N],!G.hidden){K+=1;var H=_[K][0],at=_[K][1];G.TL=[-H,at],G.TR=[H,at],G.BL=J,G.BR=it,G.pxmid=x(G.TR,G.BR),J=G.TL,it=G.TR}}},62096:function(j,V,t){var b=t(33428),P=t(10528),o=t(82744).resizeText;j.exports=function(A){var v=A._fullLayout._funnelarealayer.selectAll(".trace");o(A,v,"funnelarea"),v.each(function(p){var r=p[0],e=r.trace,s=b.select(this);s.style({opacity:e.opacity}),s.selectAll("path.surface").each(function(n){b.select(this).call(P,n,e,A)})})}},83328:function(j,V,t){var b=t(52904),P=t(45464),o=t(25376),L=t(29736).axisHoverFormat,A=t(21776).Ks,v=t(21776).Gw,p=t(49084),r=t(92880).extendFlat;j.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},b.x,{impliedEdits:{xtype:"array"}}),x0:r({},b.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},b.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},b.y,{impliedEdits:{ytype:"array"}}),y0:r({},b.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},b.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},b.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},b.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},b.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},b.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},b.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},b.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z",1),hovertemplate:A(),texttemplate:v({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:o({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},P.showlegend,{dflt:!1}),zorder:b.zorder},{transforms:void 0},p("",{cLetter:"z",autoColorDflt:!1}))},19512:function(j,V,t){var b=t(24040),P=t(3400),o=t(54460),L=t(1220),A=t(55480),v=t(47128),p=t(2872),r=t(26136),e=t(70448),s=t(11240),n=t(35744),l=t(39032).BADNUM;j.exports=function(h,T){var c=o.getFromId(h,T.xaxis||"x"),i=o.getFromId(h,T.yaxis||"y"),d=b.traceIs(T,"contour"),x=b.traceIs(T,"histogram"),w=b.traceIs(T,"gl2d"),C=d?"best":T.zsmooth,y,S,M,a,E,m,k,I,O,z,B;if(c._minDtick=0,i._minDtick=0,x)B=A(h,T),a=B.orig_x,y=B.x,S=B.x0,M=B.dx,I=B.orig_y,E=B.y,m=B.y0,k=B.dy,O=B.z;else{var F=T.z;P.isArray1D(F)?(p(T,c,i,"x","y",["z"]),y=T._x,E=T._y,F=T._z):(a=T.x?c.makeCalcdata(T,"x"):[],I=T.y?i.makeCalcdata(T,"y"):[],y=L(T,c,"x",a).vals,E=L(T,i,"y",I).vals,T._x=y,T._y=E),S=T.x0,M=T.dx,m=T.y0,k=T.dy,O=r(F,T,c,i)}(c.rangebreaks||i.rangebreaks)&&(O=u(y,E,O),x||(y=f(y),E=f(E),T._x=y,T._y=E)),!x&&(d||T.connectgaps)&&(T._emptypoints=s(O),e(O,T._emptypoints));function _(Q){C=T._input.zsmooth=T.zsmooth=!1,P.warn('cannot use zsmooth: "fast": '+Q)}function N(Q){if(Q.length>1){var W=(Q[Q.length-1]-Q[0])/(Q.length-1),J=Math.abs(W/100);for(z=0;z<Q.length-1;z++)if(Math.abs(Q[z+1]-Q[z]-W)>J)return!1}return!0}T._islinear=!1,c.type==="log"||i.type==="log"?C==="fast"&&_("log axis found"):N(y)?N(E)?T._islinear=!0:C==="fast"&&_("y scale is not linear"):C==="fast"&&_("x scale is not linear");var G=P.maxRowLength(O),X=T.xtype==="scaled"?"":y,$=n(T,X,S,M,G,c),et=T.ytype==="scaled"?"":E,ot=n(T,et,m,k,O.length,i);w||(T._extremes[c._id]=o.findExtremes(c,$),T._extremes[i._id]=o.findExtremes(i,ot));var nt={x:$,y:ot,z:O,text:T._text||T.text,hovertext:T._hovertext||T.hovertext};if(T.xperiodalignment&&a&&(nt.orig_x=a),T.yperiodalignment&&I&&(nt.orig_y=I),X&&X.length===$.length-1&&(nt.xCenter=X),et&&et.length===ot.length-1&&(nt.yCenter=et),x&&(nt.xRanges=B.xRanges,nt.yRanges=B.yRanges,nt.pts=B.pts),d||v(h,T,{vals:O,cLetter:"z"}),d&&T.contours&&T.contours.coloring==="heatmap"){var Z={type:T.type==="contour"?"heatmap":"histogram2d",xcalendar:T.xcalendar,ycalendar:T.ycalendar};nt.xfill=n(Z,X,S,M,G,c),nt.yfill=n(Z,et,m,k,O.length,i)}return[nt]};function f(g){for(var h=[],T=g.length,c=0;c<T;c++){var i=g[c];i!==l&&h.push(i)}return h}function u(g,h,T){for(var c=[],i=-1,d=0;d<T.length;d++)if(h[d]!==l){i++,c[i]=[];for(var x=0;x<T[d].length;x++)g[x]!==l&&c[i].push(T[d][x])}return c}},26136:function(j,V,t){var b=t(38248),P=t(3400),o=t(39032).BADNUM;j.exports=function(A,v,p,r){var e,s,n,l,f,u;function g(x){if(b(x))return+x}if(v&&v.transpose){for(e=0,f=0;f<A.length;f++)e=Math.max(e,A[f].length);if(e===0)return!1;n=function(x){return x.length},l=function(x,w,C){return(x[C]||[])[w]}}else e=A.length,n=function(x,w){return x[w].length},l=function(x,w,C){return(x[w]||[])[C]};var h=function(x,w,C){return w===o||C===o?o:l(x,w,C)};function T(x){if(v&&v.type!=="carpet"&&v.type!=="contourcarpet"&&x&&x.type==="category"&&v["_"+x._id.charAt(0)].length){var w=x._id.charAt(0),C={},y=v["_"+w+"CategoryMap"]||v[w];for(f=0;f<y.length;f++)C[y[f]]=f;return function(S){var M=C[x._categories[S]];return M+1?M:o}}else return P.identity}var c=T(p),i=T(r);r&&r.type==="category"&&(e=r._categories.length);var d=new Array(e);for(f=0;f<e;f++)for(p&&p.type==="category"?s=p._categories.length:s=n(A,f),d[f]=new Array(s),u=0;u<s;u++)d[f][u]=g(h(A,i(f),c(u)));return d}},96288:function(j){j.exports={min:"zmin",max:"zmax"}},2872:function(j,V,t){var b=t(3400),P=t(39032).BADNUM,o=t(1220);j.exports=function(A,v,p,r,e,s){var n=A._length,l=v.makeCalcdata(A,r),f=p.makeCalcdata(A,e);l=o(A,v,r,l).vals,f=o(A,p,e,f).vals;var u=A.text,g=u!==void 0&&b.isArray1D(u),h=A.hovertext,T=h!==void 0&&b.isArray1D(h),c,i,d=b.distinctVals(l),x=d.vals,w=b.distinctVals(f),C=w.vals,y=[],S,M,a=C.length,E=x.length;for(c=0;c<s.length;c++)y[c]=b.init2dArray(a,E);g&&(S=b.init2dArray(a,E)),T&&(M=b.init2dArray(a,E));var m=b.init2dArray(a,E);for(c=0;c<n;c++)if(l[c]!==P&&f[c]!==P){var k=b.findBin(l[c]+d.minDiff/2,x),I=b.findBin(f[c]+w.minDiff/2,C);for(i=0;i<s.length;i++){var O=s[i],z=A[O],B=y[i];B[I][k]=z[c],m[I][k]=c}g&&(S[I][k]=u[c]),T&&(M[I][k]=h[c])}for(A["_"+r]=x,A["_"+e]=C,i=0;i<s.length;i++)A["_"+s[i]]=y[i];g&&(A._text=S),T&&(A._hovertext=M),v&&v.type==="category"&&(A["_"+r+"CategoryMap"]=x.map(function(F){return v._categories[F]})),p&&p.type==="category"&&(A["_"+e+"CategoryMap"]=C.map(function(F){return p._categories[F]})),A._after2before=m}},24480:function(j,V,t){var b=t(3400),P=t(51264),o=t(39096),L=t(31147),A=t(82748),v=t(27260),p=t(83328);j.exports=function(e,s,n,l){function f(g,h){return b.coerce(e,s,p,g,h)}var u=P(e,s,f,l);if(!u){s.visible=!1;return}L(e,s,l,f),f("xhoverformat"),f("yhoverformat"),f("text"),f("hovertext"),f("hovertemplate"),o(f,l),A(e,s,f,l),f("hoverongaps"),f("connectgaps",b.isArray1D(s.z)&&s.zsmooth!==!1),v(e,s,l,f,{prefix:"",cLetter:"z"}),f("zorder")}},11240:function(j,V,t){var b=t(3400).maxRowLength;j.exports=function(o){var L=[],A={},v=[],p=o[0],r=[],e=[0,0,0],s=b(o),n,l,f,u,g,h,T,c;for(l=0;l<o.length;l++)for(n=r,r=p,p=o[l+1]||[],f=0;f<s;f++)r[f]===void 0&&(h=(r[f-1]!==void 0?1:0)+(r[f+1]!==void 0?1:0)+(n[f]!==void 0?1:0)+(p[f]!==void 0?1:0),h?(l===0&&h++,f===0&&h++,l===o.length-1&&h++,f===r.length-1&&h++,h<4&&(A[[l,f]]=[l,f,h]),L.push([l,f,h])):v.push([l,f]));for(;v.length;){for(T={},c=!1,g=v.length-1;g>=0;g--)u=v[g],l=u[0],f=u[1],h=((A[[l-1,f]]||e)[2]+(A[[l+1,f]]||e)[2]+(A[[l,f-1]]||e)[2]+(A[[l,f+1]]||e)[2])/20,h&&(T[u]=[l,f,h],v.splice(g,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(u in T)A[u]=T[u],L.push(T[u])}return L.sort(function(i,d){return d[2]-i[2]})}},55512:function(j,V,t){var b=t(93024),P=t(3400),o=P.isArrayOrTypedArray,L=t(54460),A=t(8932).extractOpts;j.exports=function(p,r,e,s,n){n||(n={});var l=n.isContour,f=p.cd[0],u=f.trace,g=p.xa,h=p.ya,T=f.x,c=f.y,i=f.z,d=f.xCenter,x=f.yCenter,w=f.zmask,C=u.zhoverformat,y=T,S=c,M,a,E,m;if(p.index!==!1){try{E=Math.round(p.index[1]),m=Math.round(p.index[0])}catch{P.error("Error hovering on heatmap, pointNumber must be [row,col], found:",p.index);return}if(E<0||E>=i[0].length||m<0||m>i.length)return}else{if(b.inbox(r-T[0],r-T[T.length-1],0)>0||b.inbox(e-c[0],e-c[c.length-1],0)>0)return;if(l){var k;for(y=[2*T[0]-T[1]],k=1;k<T.length;k++)y.push((T[k]+T[k-1])/2);for(y.push([2*T[T.length-1]-T[T.length-2]]),S=[2*c[0]-c[1]],k=1;k<c.length;k++)S.push((c[k]+c[k-1])/2);S.push([2*c[c.length-1]-c[c.length-2]])}E=Math.max(0,Math.min(y.length-2,P.findBin(r,y))),m=Math.max(0,Math.min(S.length-2,P.findBin(e,S)))}var I=g.c2p(T[E]),O=g.c2p(T[E+1]),z=h.c2p(c[m]),B=h.c2p(c[m+1]),F,_;l?(F=f.orig_x||T,_=f.orig_y||c,O=I,M=F[E],B=z,a=_[m]):(F=f.orig_x||d||T,_=f.orig_y||x||c,M=d?F[E]:(F[E]+F[E+1])/2,a=x?_[m]:(_[m]+_[m+1])/2,g&&g.type==="category"&&(M=T[E]),h&&h.type==="category"&&(a=c[m]),u.zsmooth&&(I=O=g.c2p(M),z=B=h.c2p(a)));var N=i[m][E];if(w&&!w[m][E]&&(N=void 0),!(N===void 0&&!u.hoverongaps)){var G;o(f.hovertext)&&o(f.hovertext[m])?G=f.hovertext[m][E]:o(f.text)&&o(f.text[m])&&(G=f.text[m][E]);var X=A(u),$={type:"linear",range:[X.min,X.max],hoverformat:C,_separators:g._separators,_numFormat:g._numFormat},et=L.tickText($,N,"hover").text;return[P.extendFlat(p,{index:u._after2before?u._after2before[m][E]:[m,E],distance:p.maxHoverDistance,spikeDistance:p.maxSpikeDistance,x0:I,x1:O,y0:z,y1:B,xLabelVal:M,yLabelVal:a,zLabelVal:N,zLabel:et,text:G})]}}},81932:function(j,V,t){j.exports={attributes:t(83328),supplyDefaults:t(24480),calc:t(19512),plot:t(41420),colorbar:t(96288),style:t(41648),hoverPoints:t(55512),moduleType:"trace",name:"heatmap",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},70448:function(j,V,t){var b=t(3400),P=.01,o=[[-1,0],[1,0],[0,-1],[0,1]];function L(v){return .5-.25*Math.min(1,v*.5)}j.exports=function(p,r){var e=1,s;for(A(p,r),s=0;s<r.length&&!(r[s][2]<4);s++);for(r=r.slice(s),s=0;s<100&&e>P;s++)e=A(p,r,L(e));return e>P&&b.log("interp2d didn't converge quickly",e),p};function A(v,p,r){var e=0,s,n,l,f,u,g,h,T,c,i,d,x,w;for(f=0;f<p.length;f++){for(s=p[f],n=s[0],l=s[1],d=v[n][l],i=0,c=0,u=0;u<4;u++)g=o[u],h=v[n+g[0]],h&&(T=h[l+g[1]],T!==void 0&&(i===0?x=w=T:(x=Math.min(x,T),w=Math.max(w,T)),c++,i+=T));if(c===0)throw"iterateInterp2d order is wrong: no defined neighbors";v[n][l]=i/c,d===void 0?c<4&&(e=1):(v[n][l]=(1+r)*v[n][l]-r*d,w>x&&(e=Math.max(e,Math.abs(v[n][l]-d)/(w-x))))}return e}},39096:function(j,V,t){var b=t(3400);j.exports=function(o,L){o("texttemplate");var A=b.extendFlat({},L.font,{color:"auto",size:"auto"});b.coerceFont(o,"textfont",A)}},35744:function(j,V,t){var b=t(24040),P=t(3400).isArrayOrTypedArray;j.exports=function(L,A,v,p,r,e){var s=[],n=b.traceIs(L,"contour"),l=b.traceIs(L,"histogram"),f=b.traceIs(L,"gl2d"),u,g,h,T=P(A)&&A.length>1;if(T&&!l&&e.type!=="category"){var c=A.length;if(c<=r){if(n||f)s=Array.from(A).slice(0,r);else if(r===1)e.type==="log"?s=[.5*A[0],2*A[0]]:s=[A[0]-.5,A[0]+.5];else if(e.type==="log"){for(s=[Math.pow(A[0],1.5)/Math.pow(A[1],.5)],h=1;h<c;h++)s.push(Math.sqrt(A[h-1]*A[h]));s.push(Math.pow(A[c-1],1.5)/Math.pow(A[c-2],.5))}else{for(s=[1.5*A[0]-.5*A[1]],h=1;h<c;h++)s.push((A[h-1]+A[h])*.5);s.push(1.5*A[c-1]-.5*A[c-2])}if(c<r){var i=s[s.length-1],d;if(e.type==="log")for(d=i/s[s.length-2],h=c;h<r;h++)i*=d,s.push(i);else for(d=i-s[s.length-2],h=c;h<r;h++)i+=d,s.push(i)}}else return n?A.slice(0,r):A.slice(0,r+1)}else{var x=L[e._id.charAt(0)+"calendar"];if(l)u=e.r2c(v,0,x);else if(P(A)&&A.length===1)u=A[0];else if(v===void 0)u=0;else{var w=e.type==="log"?e.d2c:e.r2c;u=w(v,0,x)}for(g=p||1,h=n||f?0:-.5;h<r;h++)s.push(u+g*h)}return s}},41420:function(j,V,t){var b=t(33428),P=t(49760),o=t(24040),L=t(43616),A=t(54460),v=t(3400),p=t(72736),r=t(76688),e=t(76308),s=t(8932).extractOpts,n=t(8932).makeColorScaleFuncFromTrace,l=t(9616),f=t(84284),u=f.LINE_SPACING,g=t(9188),h=t(2264).STYLE,T="heatmap-label";function c(C){return C.selectAll("g."+T)}function i(C){c(C).remove()}j.exports=function(C,y,S,M){var a=y.xaxis,E=y.yaxis;v.makeTraceGroups(M,S,"hm").each(function(m){var k=b.select(this),I=m[0],O=I.trace,z=O.xgap||0,B=O.ygap||0,F=I.z,_=I.x,N=I.y,G=I.xCenter,X=I.yCenter,$=o.traceIs(O,"contour"),et=$?"best":O.zsmooth,ot=F.length,nt=v.maxRowLength(F),Z=!1,Q=!1,W,J,it,K,H,at,tt,lt;for(at=0;W===void 0&&at<_.length-1;)W=a.c2p(_[at]),at++;for(at=_.length-1;J===void 0&&at>0;)J=a.c2p(_[at]),at--;for(J<W&&(it=J,J=W,W=it,Z=!0),at=0;K===void 0&&at<N.length-1;)K=E.c2p(N[at]),at++;for(at=N.length-1;H===void 0&&at>0;)H=E.c2p(N[at]),at--;H<K&&(it=K,K=H,H=it,Q=!0),$&&(G=_,X=N,_=I.xfill,N=I.yfill);var dt="default";if(et?dt=et==="best"?"smooth":"fast":O._islinear&&z===0&&B===0&&g()&&(dt="fast"),dt!=="fast"){var mt=et==="best"?0:.5;W=Math.max(-mt*a._length,W),J=Math.min((1+mt)*a._length,J),K=Math.max(-mt*E._length,K),H=Math.min((1+mt)*E._length,H)}var gt=Math.round(J-W),Mt=Math.round(H-K),Lt=W>=a._length||J<=0||K>=E._length||H<=0;if(Lt){var zt=k.selectAll("image").data([]);zt.exit().remove(),i(k);return}var xt,Ct;dt==="fast"?(xt=nt,Ct=ot):(xt=gt,Ct=Mt);var wt=document.createElement("canvas");wt.width=xt,wt.height=Ct;var Rt=wt.getContext("2d",{willReadFrequently:!0}),Tt=n(O,{noNumericCheck:!0,returnArray:!0}),Bt,Gt;dt==="fast"?(Bt=Z?function(kr){return nt-1-kr}:v.identity,Gt=Q?function(kr){return ot-1-kr}:v.identity):(Bt=function(kr){return v.constrain(Math.round(a.c2p(_[kr])-W),0,gt)},Gt=function(kr){return v.constrain(Math.round(E.c2p(N[kr])-K),0,Mt)});var te=Gt(0),Wt=[te,te],jt=Z?0:1,ie=Q?0:1,ue=0,fe=0,pe=0,Te=0,Qt,Pt,Ot,Nt,Ht;function St(kr,pn){if(kr!==void 0){var en=Tt(kr);return en[0]=Math.round(en[0]),en[1]=Math.round(en[1]),en[2]=Math.round(en[2]),ue+=pn,fe+=en[0]*pn,pe+=en[1]*pn,Te+=en[2]*pn,en}return[0,0,0,0]}function kt(kr,pn,en,Tn){var Ln=kr[en.bin0];if(Ln===void 0)return St(void 0,1);var Yn=kr[en.bin1],ma=pn[en.bin0],wa=pn[en.bin1],la=Yn-Ln||0,ia=ma-Ln||0,Rn;return Yn===void 0?wa===void 0?Rn=0:ma===void 0?Rn=2*(wa-Ln):Rn=(2*wa-ma-Ln)*2/3:wa===void 0?ma===void 0?Rn=0:Rn=(2*Ln-Yn-ma)*2/3:ma===void 0?Rn=(2*wa-Yn-Ln)*2/3:Rn=wa+Ln-Yn-ma,St(Ln+en.frac*la+Tn.frac*(ia+en.frac*Rn))}if(dt!=="default"){var Ft=0,At;try{At=new Uint8Array(xt*Ct*4)}catch{At=new Array(xt*Ct*4)}if(dt==="smooth"){var ft=G||_,pt=X||N,Dt=new Array(ft.length),Ut=new Array(pt.length),$t=new Array(gt),re=G?x:d,Be=X?x:d,We,me,Se;for(at=0;at<ft.length;at++)Dt[at]=Math.round(a.c2p(ft[at])-W);for(at=0;at<pt.length;at++)Ut[at]=Math.round(E.c2p(pt[at])-K);for(at=0;at<gt;at++)$t[at]=re(at,Dt);for(tt=0;tt<Mt;tt++)for(We=Be(tt,Ut),me=F[We.bin0],Se=F[We.bin1],at=0;at<gt;at++,Ft+=4)Ht=kt(me,Se,$t[at],We),w(At,Ft,Ht)}else for(tt=0;tt<ot;tt++)for(Nt=F[tt],Wt=Gt(tt),at=0;at<nt;at++)Ht=St(Nt[at],1),Ft=(Wt*nt+Bt(at))*4,w(At,Ft,Ht);var je=Rt.createImageData(xt,Ct);try{je.data.set(At)}catch{var vr=je.data,he=vr.length;for(tt=0;tt<he;tt++)vr[tt]=At[tt]}Rt.putImageData(je,0,0)}else{var Ye=Math.floor(z/2),Qe=Math.floor(B/2);for(tt=0;tt<ot;tt++)if(Nt=F[tt],Wt.reverse(),Wt[ie]=Gt(tt+1),!(Wt[0]===Wt[1]||Wt[0]===void 0||Wt[1]===void 0))for(Pt=Bt(0),Qt=[Pt,Pt],at=0;at<nt;at++)Qt.reverse(),Qt[jt]=Bt(at+1),!(Qt[0]===Qt[1]||Qt[0]===void 0||Qt[1]===void 0)&&(Ot=Nt[at],Ht=St(Ot,(Qt[1]-Qt[0])*(Wt[1]-Wt[0])),Rt.fillStyle="rgba("+Ht.join(",")+")",Rt.fillRect(Qt[0]+Ye,Wt[0]+Qe,Qt[1]-Qt[0]-z,Wt[1]-Wt[0]-B))}fe=Math.round(fe/ue),pe=Math.round(pe/ue),Te=Math.round(Te/ue);var mr=P("rgb("+fe+","+pe+","+Te+")");C._hmpixcount=(C._hmpixcount||0)+ue,C._hmlumcount=(C._hmlumcount||0)+ue*mr.getLuminance();var ir=k.selectAll("image").data(m);ir.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),ir.attr({height:Mt,width:gt,x:W,y:K,"xlink:href":wt.toDataURL("image/png")}),dt==="fast"&&!et&&ir.attr("style",h),i(k);var ve=O.texttemplate;if(ve){var ne=s(O),ge={type:"linear",range:[ne.min,ne.max],_separators:a._separators,_numFormat:a._numFormat},Ae=O.type==="histogram2dcontour",Re=O.type==="contour",ze=Re?1:0,ke=Re?ot-1:ot,_e=Re?1:0,Ke=Re?nt-1:nt,hr=[];for(at=ze;at<ke;at++){var cr;if(Re)cr=I.y[at];else if(Ae){if(at===0||at===ot-1)continue;cr=I.y[at]}else if(I.yCenter)cr=I.yCenter[at];else{if(at+1===ot&&I.y[at+1]===void 0)continue;cr=(I.y[at]+I.y[at+1])/2}var dr=Math.round(E.c2p(cr));if(!(0>dr||dr>E._length))for(tt=_e;tt<Ke;tt++){var fr;if(Re)fr=I.x[tt];else if(Ae){if(tt===0||tt===nt-1)continue;fr=I.x[tt]}else if(I.xCenter)fr=I.xCenter[tt];else{if(tt+1===nt&&I.x[tt+1]===void 0)continue;fr=(I.x[tt]+I.x[tt+1])/2}var Lr=Math.round(a.c2p(fr));if(!(0>Lr||Lr>a._length)){var xr=r({x:fr,y:cr},O,C._fullLayout);xr.x=fr,xr.y=cr;var Yt=I.z[at][tt];Yt===void 0?(xr.z="",xr.zLabel=""):(xr.z=Yt,xr.zLabel=A.tickText(ge,Yt,"hover").text);var Jt=I.text&&I.text[at]&&I.text[at][tt];(Jt===void 0||Jt===!1)&&(Jt=""),xr.text=Jt;var qe=v.texttemplateString(ve,xr,C._fullLayout._d3locale,xr,O._meta||{});if(qe){var tr=qe.split("<br>"),Ge=tr.length,Ee=0;for(lt=0;lt<Ge;lt++)Ee=Math.max(Ee,tr[lt].length);hr.push({l:Ge,c:Ee,t:qe,x:Lr,y:dr,z:Yt})}}}}var Xe=O.textfont,rr=Xe.size,Je=C._fullLayout.font.size;if(!rr||rr==="auto"){var He=1/0,yr=1/0,Ir=0,Tr=0;for(lt=0;lt<hr.length;lt++){var vn=hr[lt];if(Ir=Math.max(Ir,vn.l),Tr=Math.max(Tr,vn.c),lt<hr.length-1){var Or=hr[lt+1],En=Math.abs(Or.x-vn.x),nn=Math.abs(Or.y-vn.y);En&&(He=Math.min(He,En)),nn&&(yr=Math.min(yr,nn))}}!isFinite(He)||!isFinite(yr)?rr=Je:(He-=z,yr-=B,He/=Tr,yr/=Ir,He/=u/2,yr/=u,rr=Math.min(Math.floor(He),Math.floor(yr),Je))}if(rr<=0||!isFinite(rr))return;var gr=function(kr){return kr.x},Pr=function(kr){return kr.y-rr*(kr.l*u/2-1)},Xr=c(k).data(hr);Xr.enter().append("g").classed(T,1).append("text").attr("text-anchor","middle").each(function(kr){var pn=b.select(this),en=Xe.color;(!en||en==="auto")&&(en=e.contrast(kr.z===void 0?C._fullLayout.plot_bgcolor:"rgba("+Tt(kr.z).join()+")")),pn.attr("data-notex",1).call(p.positionText,gr(kr),Pr(kr)).call(L.font,{family:Xe.family,size:rr,color:en,weight:Xe.weight,style:Xe.style,variant:Xe.variant,textcase:Xe.textcase,lineposition:Xe.lineposition,shadow:Xe.shadow}).text(kr.t).call(p.convertToTspans,C)})}})};function d(C,y){var S=y.length-2,M=v.constrain(v.findBin(C,y),0,S),a=y[M],E=y[M+1],m=v.constrain(M+(C-a)/(E-a)-.5,0,S),k=Math.round(m),I=Math.abs(m-k);return!m||m===S||!I?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:I,bin1:Math.round(k+I/(m-k))}}function x(C,y){var S=y.length-1,M=v.constrain(v.findBin(C,y),0,S),a=y[M],E=y[M+1],m=(C-a)/(E-a)||0;return m<=0?{bin0:M,bin1:M,frac:0}:m<.5?{bin0:M,bin1:M+1,frac:m}:{bin0:M+1,bin1:M,frac:1-m}}function w(C,y,S){C[y]=S[0],C[y+1]=S[1],C[y+2]=S[2],C[y+3]=Math.round(S[3]*255)}},41648:function(j,V,t){var b=t(33428);j.exports=function(o){b.select(o).selectAll(".hm image").style("opacity",function(L){return L.trace.opacity})}},82748:function(j){j.exports=function(t,b,P){var o=P("zsmooth");o===!1&&(P("xgap"),P("ygap")),P("zhoverformat")}},51264:function(j,V,t){var b=t(38248),P=t(3400),o=t(24040);j.exports=function(p,r,e,s,n,l){var f=e("z");n=n||"x",l=l||"y";var u,g;if(f===void 0||!f.length)return 0;if(P.isArray1D(f)){u=e(n),g=e(l);var h=P.minRowLength(u),T=P.minRowLength(g);if(h===0||T===0)return 0;r._length=Math.min(h,T,f.length)}else{if(u=L(n,e),g=L(l,e),!A(f))return 0;e("transpose"),r._length=null}if(p.type==="heatmapgl")return!0;var c=o.getComponentMethod("calendars","handleTraceDefaults");return c(p,r,[n,l],s),!0};function L(v,p){var r=p(v),e=r?p(v+"type","array"):"scaled";return e==="scaled"&&(p(v+"0"),p("d"+v)),r}function A(v){for(var p=!0,r=!1,e=!1,s,n=0;n<v.length;n++){if(s=v[n],!P.isArrayOrTypedArray(s)){p=!1;break}s.length>0&&(r=!0);for(var l=0;l<s.length;l++)if(b(s[l])){e=!0;break}}return p&&r&&e}},74512:function(j,V,t){for(var b=t(83328),P=t(49084),o=t(92880).extendFlat,L=t(67824).overrideAll,A=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],v={},p=0;p<A.length;p++){var r=A[p];v[r]=b[r]}v.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},o(v,P("",{cLetter:"z",autoColorDflt:!1})),j.exports=L(v,"calc","nested")},84656:function(j,V,t){var b=t(67792).gl_heatmap2d,P=t(54460),o=t(43080);function L(r,e){this.scene=r,this.uid=e,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=b(r.glplot,this.options),this.heatmap._trace=this}var A=L.prototype;A.handlePick=function(r){var e=this.options,s=e.shape,n=r.pointId,l=n%s[0],f=Math.floor(n/s[0]),u=n;return{trace:this,dataCoord:r.dataCoord,traceCoord:[e.x[l],e.y[f],e.z[u]],textLabel:this.textLabels[n],name:this.name,pointIndex:[f,l],hoverinfo:this.hoverinfo}},A.update=function(r,e){var s=e[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var n=s.z;this.options.z=[].concat.apply([],n);var l=n[0].length,f=n.length;this.options.shape=[l,f],this.options.x=s.x,this.options.y=s.y,this.options.zsmooth=r.zsmooth;var u=v(r);this.options.colorLevels=u.colorLevels,this.options.colorValues=u.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var g=this.scene.xaxis,h=this.scene.yaxis,T,c;r.zsmooth===!1&&(T={ppad:s.x[1]-s.x[0]},c={ppad:s.y[1]-s.y[0]}),r._extremes[g._id]=P.findExtremes(g,s.x,T),r._extremes[h._id]=P.findExtremes(h,s.y,c)},A.dispose=function(){this.heatmap.dispose()};function v(r){for(var e=r.colorscale,s=r.zmin,n=r.zmax,l=e.length,f=new Array(l),u=new Array(4*l),g=0;g<l;g++){var h=e[g],T=o(h[1]);f[g]=s+h[0]*(n-s);for(var c=0;c<4;c++)u[4*g+c]=T[c]}return{colorLevels:f,colorValues:u}}function p(r,e,s){var n=new L(r,e.uid);return n.update(e,s),n}j.exports=p},86464:function(j,V,t){var b=t(3400),P=t(51264),o=t(27260),L=t(74512);j.exports=function(v,p,r,e){function s(l,f){return b.coerce(v,p,L,l,f)}var n=P(v,p,s,e);if(!n){p.visible=!1;return}s("text"),s("zsmooth"),o(v,p,e,s,{prefix:"",cLetter:"z"})}},45536:function(j,V,t){j.exports={attributes:t(74512),supplyDefaults:t(86464),colorbar:t(96288),calc:t(19512),plot:t(84656),moduleType:"trace",name:"heatmapgl",basePlotModule:t(39952),categories:["gl","gl2d","2dMap"],meta:{}}},40196:function(j,V,t){var b=t(20832),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(21776).Gw,A=t(25376),v=t(11120),p=t(73316),r=t(92880).extendFlat;j.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:P("x"),yhoverformat:P("y"),text:r({},b.text,{}),hovertext:r({},b.hovertext,{}),orientation:b.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:v("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:v("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({},{keys:p.eventDataKeys}),texttemplate:L({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},b.textposition,{arrayOk:!1}),textfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:A({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:b.insidetextanchor,textangle:b.textangle,cliponaxis:b.cliponaxis,constraintext:b.constraintext,marker:b.marker,offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,selected:b.selected,unselected:b.unselected,_deprecated:{bardir:b._deprecated.bardir},zorder:b.zorder}},2e3:function(j){j.exports=function(t,b){for(var P=t.length,o=0,L=0;L<P;L++)b[L]?(t[L]/=b[L],o+=t[L]):t[L]=null;return o}},11120:function(j){j.exports=function(t,b){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},16964:function(j,V,t){var b=t(38248);j.exports={count:function(P,o,L){return L[P]++,1},sum:function(P,o,L,A){var v=A[o];return b(v)?(v=Number(v),L[P]+=v,v):0},avg:function(P,o,L,A,v){var p=A[o];return b(p)&&(p=Number(p),L[P]+=p,v[P]++),0},min:function(P,o,L,A){var v=A[o];if(b(v))if(v=Number(v),b(L[P])){if(L[P]>v){var p=v-L[P];return L[P]=v,p}}else return L[P]=v,v;return 0},max:function(P,o,L,A){var v=A[o];if(b(v))if(v=Number(v),b(L[P])){if(L[P]<v){var p=v-L[P];return L[P]=v,p}}else return L[P]=v,v;return 0}}},67712:function(j,V,t){var b=t(39032),P=b.ONEAVGYEAR,o=b.ONEAVGMONTH,L=b.ONEDAY,A=b.ONEHOUR,v=b.ONEMIN,p=b.ONESEC,r=t(54460).tickIncrement;j.exports=function(u,g,h,T,c){var i=-1.1*g,d=-.1*g,x=u-d,w=h[0],C=h[1],y=Math.min(e(w+d,w+x,T,c),e(C+d,C+x,T,c)),S=Math.min(e(w+i,w+d,T,c),e(C+i,C+d,T,c)),M,a;if(y>S&&S<Math.abs(C-w)/4e3?(M=y,a=!1):(M=Math.min(y,S),a=!0),T.type==="date"&&M>L){var E=M===P?1:6,m=M===P?"M12":"M1";return function(k,I){var O=T.c2d(k,P,c),z=O.indexOf("-",E);z>0&&(O=O.substr(0,z));var B=T.d2c(O,0,c);if(B<k){var F=r(B,m,!1,c);(B+F)/2<k+u&&(B=F)}return I&&a?r(B,m,!0,c):B}}return function(k,I){var O=M*Math.round(k/M);return O+M/10<k&&O+M*.9<k+u&&(O+=M),I&&a&&(O-=M),O}};function e(f,u,g,h){if(f*u<=0)return 1/0;for(var T=Math.abs(u-f),c=g.type==="date",i=s(T,c),d=0;d<10;d++){var x=s(i*80,c);if(i===x)break;if(n(x,f,u,c,g,h))i=x;else break}return i}function s(f,u){return u&&f>p?f>L?f>P*1.1?P:f>o*1.1?o:L:f>A?A:f>v?v:p:Math.pow(10,Math.floor(Math.log(f)/Math.LN10))}function n(f,u,g,h,T,c){if(h&&f>L){var i=l(u,T,c),d=l(g,T,c),x=f===P?0:1;return i[x]!==d[x]}return Math.floor(g/f)-Math.floor(u/f)>.1}function l(f,u,g){var h=u.c2d(f,P,g).split("-");return h[0]===""&&(h.unshift(),h[0]="-"+h[0]),h}},35852:function(j,V,t){var b=t(38248),P=t(3400),o=t(24040),L=t(54460),A=t(84664),v=t(16964),p=t(10648),r=t(2e3),e=t(67712);function s(g,h){var T=[],c=[],i=h.orientation==="h",d=L.getFromId(g,i?h.yaxis:h.xaxis),x=i?"y":"x",w={x:"y",y:"x"}[x],C=h[x+"calendar"],y=h.cumulative,S,M=n(g,h,d,x),a=M[0],E=M[1],m=typeof a.size=="string",k=[],I=m?k:a,O=[],z=[],B=[],F=0,_=h.histnorm,N=h.histfunc,G=_.indexOf("density")!==-1,X,$,et;y.enabled&&G&&(_=_.replace(/ ?density$/,""),G=!1);var ot=N==="max"||N==="min",nt=ot?null:0,Z=v.count,Q=p[_],W=!1,J=function(Rt){return d.r2c(Rt,0,C)},it;for(P.isArrayOrTypedArray(h[w])&&N!=="count"&&(it=h[w],W=N==="avg",Z=v[N]),S=J(a.start),$=J(a.end)+(S-L.tickIncrement(S,a.size,!1,C))/1e6;S<$&&T.length<1e6&&(X=L.tickIncrement(S,a.size,!1,C),T.push((S+X)/2),c.push(nt),B.push([]),k.push(S),G&&O.push(1/(X-S)),W&&z.push(0),!(X<=S));)S=X;k.push(S),!m&&d.type==="date"&&(I={start:J(I.start),end:J(I.end),size:I.size}),g._fullLayout._roundFnOpts||(g._fullLayout._roundFnOpts={});var K=h["_"+x+"bingroup"],H={leftGap:1/0,rightGap:1/0};K&&(g._fullLayout._roundFnOpts[K]||(g._fullLayout._roundFnOpts[K]=H),H=g._fullLayout._roundFnOpts[K]);var at=c.length,tt=!0,lt=H.leftGap,dt=H.rightGap,mt={};for(S=0;S<E.length;S++){var gt=E[S];et=P.findBin(gt,I),et>=0&&et<at&&(F+=Z(et,S,c,it,z),tt&&B[et].length&&gt!==E[B[et][0]]&&(tt=!1),B[et].push(S),mt[S]=et,lt=Math.min(lt,gt-k[et]),dt=Math.min(dt,k[et+1]-gt))}H.leftGap=lt,H.rightGap=dt;var Mt;tt||(Mt=function(Rt,Tt){return function(){var Bt=g._fullLayout._roundFnOpts[K];return e(Bt.leftGap,Bt.rightGap,k,d,C)(Rt,Tt)}}),W&&(F=r(c,z)),Q&&Q(c,F,O),y.enabled&&u(c,y.direction,y.currentbin);var Lt=Math.min(T.length,c.length),zt=[],xt=0,Ct=Lt-1;for(S=0;S<Lt;S++)if(c[S]){xt=S;break}for(S=Lt-1;S>=xt;S--)if(c[S]){Ct=S;break}for(S=xt;S<=Ct;S++)if(b(T[S])&&b(c[S])){var wt={p:T[S],s:c[S],b:0};y.enabled||(wt.pts=B[S],tt?wt.ph0=wt.ph1=B[S].length?E[B[S][0]]:T[S]:(h._computePh=!0,wt.ph0=Mt(k[S]),wt.ph1=Mt(k[S+1],!0))),zt.push(wt)}return zt.length===1&&(zt[0].width1=L.tickIncrement(zt[0].p,a.size,!1,C)-zt[0].p),A(zt,h),P.isArrayOrTypedArray(h.selectedpoints)&&P.tagSelected(zt,h,mt),zt}function n(g,h,T,c,i){var d=c+"bins",x=g._fullLayout,w=h["_"+c+"bingroup"],C=x._histogramBinOpts[w],y=x.barmode==="overlay",S,M,a,E,m,k,I,O=function(gt){return T.r2c(gt,0,E)},z=function(gt){return T.c2r(gt,0,E)},B=T.type==="date"?function(gt){return gt||gt===0?P.cleanDate(gt,null,E):null}:function(gt){return b(gt)?Number(gt):null};function F(gt,Mt,Lt){Mt[gt+"Found"]?(Mt[gt]=B(Mt[gt]),Mt[gt]===null&&(Mt[gt]=Lt[gt])):(k[gt]=Mt[gt]=Lt[gt],P.nestedProperty(M[0],d+"."+gt).set(Lt[gt]))}if(h["_"+c+"autoBinFinished"])delete h["_"+c+"autoBinFinished"];else{M=C.traces;var _=[],N=!0,G=!1,X=!1;for(S=0;S<M.length;S++)if(a=M[S],a.visible){var $=C.dirs[S];m=a["_"+$+"pos0"]=T.makeCalcdata(a,$),_=P.concat(_,m),delete a["_"+c+"autoBinFinished"],h.visible===!0&&(N?N=!1:(delete a._autoBin,a["_"+c+"autoBinFinished"]=1),o.traceIs(a,"2dMap")&&(G=!0),a.type==="histogram2dcontour"&&(X=!0))}E=M[0][c+"calendar"];var et=L.autoBin(_,T,C.nbins,G,E,C.sizeFound&&C.size),ot=M[0]._autoBin={};if(k=ot[C.dirs[0]]={},X&&(C.size||(et.start=z(L.tickIncrement(O(et.start),et.size,!0,E))),C.end===void 0&&(et.end=z(L.tickIncrement(O(et.end),et.size,!1,E)))),y&&!o.traceIs(h,"2dMap")&&et._dataSpan===0&&T.type!=="category"&&T.type!=="multicategory"&&h.bingroup===""&&typeof h.xbins>"u"){if(i)return[et,m,!0];et=l(g,h,T,c,d)}I=a.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?et.start=z(L.tickIncrement(O(et.start),et.size,!0,E)):et.end=z(L.tickIncrement(O(et.end),et.size,!1,E))),C.size=et.size,C.sizeFound||(k.size=et.size,P.nestedProperty(M[0],d+".size").set(et.size)),F("start",C,et),F("end",C,et)}m=h["_"+c+"pos0"],delete h["_"+c+"pos0"];var nt=h._input[d]||{},Z=P.extendFlat({},C),Q=C.start,W=T.r2l(nt.start),J=W!==void 0;if((C.startFound||J)&&W!==T.r2l(Q)){var it=J?W:P.aggNums(Math.min,null,m),K={type:T.type==="category"||T.type==="multicategory"?"linear":T.type,r2l:T.r2l,dtick:C.size,tick0:Q,calendar:E,range:[it,L.tickIncrement(it,C.size,!1,E)].map(T.l2r)},H=L.tickFirst(K);H>T.r2l(it)&&(H=L.tickIncrement(H,C.size,!0,E)),Z.start=T.l2r(H),J||P.nestedProperty(h,d+".start").set(Z.start)}var at=C.end,tt=T.r2l(nt.end),lt=tt!==void 0;if((C.endFound||lt)&&tt!==T.r2l(at)){var dt=lt?tt:P.aggNums(Math.max,null,m);Z.end=T.l2r(dt),lt||P.nestedProperty(h,d+".start").set(Z.end)}var mt="autobin"+c;return h._input[mt]===!1&&(h._input[d]=P.extendFlat({},h[d]||{}),delete h._input[mt],delete h[mt]),[Z,m]}function l(g,h,T,c,i){var d=g._fullLayout,x=f(g,h),w=!1,C=1/0,y=[h],S,M,a;for(S=0;S<x.length;S++)if(M=x[S],M===h)w=!0;else if(!w)a=d._histogramBinOpts[M["_"+c+"bingroup"]],C=Math.min(C,a.size||M[i].size);else{var E=n(g,M,T,c,!0),m=E[0],k=E[2];M["_"+c+"autoBinFinished"]=1,M["_"+c+"pos0"]=E[1],k?y.push(M):C=Math.min(C,m.size)}var I=new Array(y.length);for(S=0;S<y.length;S++)for(var O=y[S]["_"+c+"pos0"],z=0;z<O.length;z++)if(O[z]!==void 0){I[S]=O[z];break}for(isFinite(C)||(C=P.distinctVals(I).minDiff),S=0;S<y.length;S++){M=y[S];var B=M[c+"calendar"],F={start:T.c2r(I[S]-C/2,0,B),end:T.c2r(I[S]+C/2,0,B),size:C};M._input[i]=M[i]=F,a=d._histogramBinOpts[M["_"+c+"bingroup"]],a&&P.extendFlat(a,F)}return h[i]}function f(g,h){for(var T=h.xaxis,c=h.yaxis,i=h.orientation,d=[],x=g._fullData,w=0;w<x.length;w++){var C=x[w];C.type==="histogram"&&C.visible===!0&&C.orientation===i&&C.xaxis===T&&C.yaxis===c&&d.push(C)}return d}function u(g,h,T){var c,i,d;function x(C){d=g[C],g[C]/=2}function w(C){i=g[C],g[C]=d+i/2,d+=i}if(T==="half")if(h==="increasing")for(x(0),c=1;c<g.length;c++)w(c);else for(x(g.length-1),c=g.length-2;c>=0;c--)w(c);else if(h==="increasing"){for(c=1;c<g.length;c++)g[c]+=g[c-1];T==="exclude"&&(g.unshift(0),g.pop())}else{for(c=g.length-2;c>=0;c--)g[c]+=g[c+1];T==="exclude"&&(g.push(0),g.shift())}}j.exports={calc:s,calcAllAutoBins:n}},73316:function(j){j.exports={eventDataKeys:["binNumber"]}},80536:function(j,V,t){var b=t(3400),P=t(79811),o=t(24040).traceIs,L=t(20011),A=t(31508).validateCornerradius,v=b.nestedProperty,p=t(71888).getAxisGroup,r=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],e=["x","y"];j.exports=function(n,l){var f=l._histogramBinOpts={},u=[],g={},h=[],T,c,i,d,x,w,C;function y(et,ot){return b.coerce(T._input,T,T._module.attributes,et,ot)}function S(et){return et.orientation==="v"?"x":"y"}function M(et,ot){var nt=P.getFromTrace({_fullLayout:l},et,ot);return nt.type}function a(et,ot,nt){var Z=et.uid+"__"+nt;ot||(ot=Z);var Q=M(et,nt),W=et[nt+"calendar"]||"",J=f[ot],it=!0;J&&(Q===J.axType&&W===J.calendar?(it=!1,J.traces.push(et),J.dirs.push(nt)):(ot=Z,Q!==J.axType&&b.warn(["Attempted to group the bins of trace",et.index,"set on a","type:"+Q,"axis","with bins on","type:"+J.axType,"axis."].join(" ")),W!==J.calendar&&b.warn(["Attempted to group the bins of trace",et.index,"set with a",W,"calendar","with bins",J.calendar?"on a "+J.calendar+" calendar":"w/o a set calendar"].join(" ")))),it&&(f[ot]={traces:[et],dirs:[nt],axType:Q,calendar:et[nt+"calendar"]||""}),et["_"+nt+"bingroup"]=ot}for(x=0;x<n.length;x++)if(T=n[x],o(T,"histogram")){if(u.push(T),delete T._xautoBinFinished,delete T._yautoBinFinished,T.type==="histogram"){var E=y("marker.cornerradius",l.barcornerradius);T.marker&&(T.marker.cornerradius=A(E))}o(T,"2dMap")||L(T._input,T,l,y)}var m=l._alignmentOpts||{};for(x=0;x<u.length;x++){if(T=u[x],i="",!o(T,"2dMap")){if(d=S(T),l.barmode==="group"&&T.alignmentgroup){var k=T[d+"axis"],I=p(l,k)+T.orientation;(m[I]||{})[T.alignmentgroup]&&(i=I)}!i&&l.barmode!=="overlay"&&(i=p(l,T.xaxis)+p(l,T.yaxis)+S(T))}i?(g[i]||(g[i]=[]),g[i].push(T)):h.push(T)}for(i in g){if(c=g[i],c.length===1){h.push(c[0]);continue}var O=!1;for(c.length&&(T=c[0],O=y("bingroup")),i=O||i,x=0;x<c.length;x++){T=c[x];var z=T._input.bingroup;z&&z!==i&&b.warn(["Trace",T.index,"must match","within bingroup",i+".","Ignoring its bingroup:",z,"setting."].join(" ")),T.bingroup=i,a(T,i,S(T))}}for(x=0;x<h.length;x++){T=h[x];var B=y("bingroup");if(o(T,"2dMap"))for(C=0;C<2;C++){d=e[C];var F=y(d+"bingroup",B?B+"__"+d:null);a(T,F,d)}else a(T,B,S(T))}for(i in f){var _=f[i];for(c=_.traces,w=0;w<r.length;w++){var N=r[w],G=N.name,X,$;if(!(G==="nbins"&&_.sizeFound)){for(x=0;x<c.length;x++){if(T=c[x],d=_.dirs[x],X=N.aStr[d],v(T._input,X).get()!==void 0){_[G]=y(X),_[G+"Found"]=!0;break}$=(T._autoBin||{})[d]||{},$[G]&&v(T,X).set($[G])}if(G==="start"||G==="end")for(;x<c.length;x++)T=c[x],T["_"+d+"bingroup"]&&($=(T._autoBin||{})[d]||{},y(X,$[G]));G==="nbins"&&!_.sizeFound&&!_.nbinsFound&&(T=c[0],_[G]=y(X))}}}}},6616:function(j,V,t){var b=t(24040),P=t(3400),o=t(76308),L=t(31508).handleText,A=t(55592),v=t(40196);j.exports=function(r,e,s,n){function l(S,M){return P.coerce(r,e,v,S,M)}var f=l("x"),u=l("y"),g=l("cumulative.enabled");g&&(l("cumulative.direction"),l("cumulative.currentbin")),l("text");var h=l("textposition");L(r,e,n,l,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),l("hovertext"),l("hovertemplate"),l("xhoverformat"),l("yhoverformat");var T=l("orientation",u&&!f?"h":"v"),c=T==="v"?"x":"y",i=T==="v"?"y":"x",d=f&&u?Math.min(P.minRowLength(f)&&P.minRowLength(u)):P.minRowLength(e[c]||[]);if(!d){e.visible=!1;return}e._length=d;var x=b.getComponentMethod("calendars","handleTraceDefaults");x(r,e,["x","y"],n);var w=e[i];w&&l("histfunc"),l("histnorm"),l("autobin"+c),A(r,e,l,s,n),P.coerceSelectionMarkerOpacity(e,l);var C=(e.marker.line||{}).color,y=b.getComponentMethod("errorbars","supplyDefaults");y(r,e,C||o.defaultLine,{axis:"y"}),y(r,e,C||o.defaultLine,{axis:"x",inherit:"y"}),l("zorder")}},84980:function(j){j.exports=function(t,b,P,o,L){if(t.x="xVal"in b?b.xVal:b.x,t.y="yVal"in b?b.yVal:b.y,"zLabelVal"in b&&(t.z=b.zLabelVal),b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),!(P.cumulative||{}).enabled){var A=Array.isArray(L)?o[0].pts[L[0]][L[1]]:o[L].pts;t.pointNumbers=A,t.binNumber=t.pointNumber,delete t.pointNumber,delete t.pointIndex;var v;if(P._indexToPoints){v=[];for(var p=0;p<A.length;p++)v=v.concat(P._indexToPoints[A[p]])}else v=A;t.pointIndices=v}return t}},43339:function(j,V,t){var b=t(63400).hoverPoints,P=t(54460).hoverLabelText;j.exports=function(L,A,v,p,r){var e=b(L,A,v,p,r);if(e){L=e[0];var s=L.cd[L.index],n=L.cd[0].trace;if(!n.cumulative.enabled){var l=n.orientation==="h"?"y":"x";L[l+"Label"]=P(L[l+"a"],[s.ph0,s.ph1],n[l+"hoverformat"])}return e}}},42600:function(j,V,t){j.exports={attributes:t(40196),layoutAttributes:t(39324),supplyDefaults:t(6616),crossTraceDefaults:t(80536),supplyLayoutDefaults:t(37156),calc:t(35852).calc,crossTraceCalc:t(96376).crossTraceCalc,plot:t(98184).plot,layerName:"barlayer",style:t(60100).style,styleOnSelect:t(60100).styleOnSelect,colorbar:t(5528),hoverPoints:t(43339),selectPoints:t(45784),eventData:t(84980),moduleType:"trace",name:"histogram",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},10648:function(j){j.exports={percent:function(V,t){for(var b=V.length,P=100/t,o=0;o<b;o++)V[o]*=P},probability:function(V,t){for(var b=V.length,P=0;P<b;P++)V[P]/=t},density:function(V,t,b,P){var o=V.length;P=P||1;for(var L=0;L<o;L++)V[L]*=b[L]*P},"probability density":function(V,t,b,P){var o=V.length;P&&(t/=P);for(var L=0;L<o;L++)V[L]*=b[L]/t}}},37008:function(j,V,t){var b=t(40196),P=t(11120),o=t(83328),L=t(45464),A=t(29736).axisHoverFormat,v=t(21776).Ks,p=t(21776).Gw,r=t(49084),e=t(92880).extendFlat;j.exports=e({x:b.x,y:b.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:b.histnorm,histfunc:b.histfunc,nbinsx:b.nbinsx,xbins:P("x"),nbinsy:b.nbinsy,ybins:P("y"),autobinx:b.autobinx,autobiny:b.autobiny,bingroup:e({},b.bingroup,{}),xbingroup:e({},b.bingroup,{}),ybingroup:e({},b.bingroup,{}),xgap:o.xgap,ygap:o.ygap,zsmooth:o.zsmooth,xhoverformat:A("x"),yhoverformat:A("y"),zhoverformat:A("z",1),hovertemplate:v({},{keys:"z"}),texttemplate:p({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:o.textfont,showlegend:e({},L.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},55480:function(j,V,t){var b=t(3400),P=t(54460),o=t(16964),L=t(10648),A=t(2e3),v=t(67712),p=t(35852).calcAllAutoBins;j.exports=function(l,f){var u=P.getFromId(l,f.xaxis),g=P.getFromId(l,f.yaxis),h=f.xcalendar,T=f.ycalendar,c=function(Ht){return u.r2c(Ht,0,h)},i=function(Ht){return g.r2c(Ht,0,T)},d=function(Ht){return u.c2r(Ht,0,h)},x=function(Ht){return g.c2r(Ht,0,T)},w,C,y,S,M=p(l,f,u,"x"),a=M[0],E=M[1],m=p(l,f,g,"y"),k=m[0],I=m[1],O=f._length;E.length>O&&E.splice(O,E.length-O),I.length>O&&I.splice(O,I.length-O);var z=[],B=[],F=[],_=typeof a.size=="string",N=typeof k.size=="string",G=[],X=[],$=_?G:a,et=N?X:k,ot=0,nt=[],Z=[],Q=f.histnorm,W=f.histfunc,J=Q.indexOf("density")!==-1,it=W==="max"||W==="min",K=it?null:0,H=o.count,at=L[Q],tt=!1,lt=[],dt=[],mt="z"in f?f.z:"marker"in f&&Array.isArray(f.marker.color)?f.marker.color:"";mt&&W!=="count"&&(tt=W==="avg",H=o[W]);var gt=a.size,Mt=c(a.start),Lt=c(a.end)+(Mt-P.tickIncrement(Mt,gt,!1,h))/1e6;for(w=Mt;w<Lt;w=P.tickIncrement(w,gt,!1,h))B.push(K),G.push(w),tt&&F.push(0);G.push(w);var zt=B.length,xt=(w-Mt)/zt,Ct=d(Mt+xt/2),wt=k.size,Rt=i(k.start),Tt=i(k.end)+(Rt-P.tickIncrement(Rt,wt,!1,T))/1e6;for(w=Rt;w<Tt;w=P.tickIncrement(w,wt,!1,T)){z.push(B.slice()),X.push(w);var Bt=new Array(zt);for(C=0;C<zt;C++)Bt[C]=[];Z.push(Bt),tt&&nt.push(F.slice())}X.push(w);var Gt=z.length,te=(w-Rt)/Gt,Wt=x(Rt+te/2);J&&(lt=r(B.length,$,xt,_),dt=r(z.length,et,te,N)),!_&&u.type==="date"&&($=e(c,$)),!N&&g.type==="date"&&(et=e(i,et));var jt=!0,ie=!0,ue=new Array(zt),fe=new Array(Gt),pe=1/0,Te=1/0,Qt=1/0,Pt=1/0;for(w=0;w<O;w++){var Ot=E[w],Nt=I[w];y=b.findBin(Ot,$),S=b.findBin(Nt,et),y>=0&&y<zt&&S>=0&&S<Gt&&(ot+=H(y,w,z[S],mt,nt[S]),Z[S][y].push(w),jt&&(ue[y]===void 0?ue[y]=Ot:ue[y]!==Ot&&(jt=!1)),ie&&(fe[S]===void 0?fe[S]=Nt:fe[S]!==Nt&&(ie=!1)),pe=Math.min(pe,Ot-G[y]),Te=Math.min(Te,G[y+1]-Ot),Qt=Math.min(Qt,Nt-X[S]),Pt=Math.min(Pt,X[S+1]-Nt))}if(tt)for(S=0;S<Gt;S++)ot+=A(z[S],nt[S]);if(at)for(S=0;S<Gt;S++)at(z[S],ot,lt,dt[S]);return{x:E,xRanges:s(G,jt&&ue,pe,Te,u,h),x0:Ct,dx:xt,y:I,yRanges:s(X,ie&&fe,Qt,Pt,g,T),y0:Wt,dy:te,z,pts:Z}};function r(n,l,f,u){var g=new Array(n),h;if(u)for(h=0;h<n;h++)g[h]=1/(l[h+1]-l[h]);else{var T=1/f;for(h=0;h<n;h++)g[h]=T}return g}function e(n,l){return{start:n(l.start),end:n(l.end),size:l.size}}function s(n,l,f,u,g,h){var T,c=n.length-1,i=new Array(c),d=v(f,u,n,g,h);for(T=0;T<c;T++){var x=(l||[])[T];i[T]=x===void 0?[d(n[T]),d(n[T+1],!0)]:[x,x]}return i}},99784:function(j,V,t){var b=t(3400),P=t(56408),o=t(82748),L=t(27260),A=t(39096),v=t(37008);j.exports=function(r,e,s,n){function l(f,u){return b.coerce(r,e,v,f,u)}P(r,e,l,n),e.visible!==!1&&(o(r,e,l,n),L(r,e,n,l,{prefix:"",cLetter:"z"}),l("hovertemplate"),A(l,n),l("xhoverformat"),l("yhoverformat"))}},59576:function(j,V,t){var b=t(55512),P=t(54460).hoverLabelText;j.exports=function(L,A,v,p,r){var e=b(L,A,v,p,r);if(e){L=e[0];var s=L.index,n=s[0],l=s[1],f=L.cd[0],u=f.trace,g=f.xRanges[l],h=f.yRanges[n];return L.xLabel=P(L.xa,[g[0],g[1]],u.xhoverformat),L.yLabel=P(L.ya,[h[0],h[1]],u.yhoverformat),e}}},21536:function(j,V,t){j.exports={attributes:t(37008),supplyDefaults:t(99784),crossTraceDefaults:t(80536),calc:t(19512),plot:t(41420),layerName:"heatmaplayer",colorbar:t(96288),style:t(41648),hoverPoints:t(59576),eventData:t(84980),moduleType:"trace",name:"histogram2d",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},56408:function(j,V,t){var b=t(24040),P=t(3400);j.exports=function(L,A,v,p){var r=v("x"),e=v("y"),s=P.minRowLength(r),n=P.minRowLength(e);if(!s||!n){A.visible=!1;return}A._length=Math.min(s,n);var l=b.getComponentMethod("calendars","handleTraceDefaults");l(L,A,["x","y"],p);var f=v("z")||v("marker.color");f&&v("histfunc"),v("histnorm"),v("autobinx"),v("autobiny")}},81220:function(j,V,t){var b=t(37008),P=t(67104),o=t(49084),L=t(29736).axisHoverFormat,A=t(92880).extendFlat;j.exports=A({x:b.x,y:b.y,z:b.z,marker:b.marker,histnorm:b.histnorm,histfunc:b.histfunc,nbinsx:b.nbinsx,xbins:b.xbins,nbinsy:b.nbinsy,ybins:b.ybins,autobinx:b.autobinx,autobiny:b.autobiny,bingroup:b.bingroup,xbingroup:b.xbingroup,ybingroup:b.ybingroup,autocontour:P.autocontour,ncontours:P.ncontours,contours:P.contours,line:{color:P.line.color,width:A({},P.line.width,{dflt:.5}),dash:P.line.dash,smoothing:P.line.smoothing,editType:"plot"},xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z",1),hovertemplate:b.hovertemplate,texttemplate:P.texttemplate,textfont:P.textfont},o("",{cLetter:"z",editTypeOverride:"calc"}))},3704:function(j,V,t){var b=t(3400),P=t(56408),o=t(84952),L=t(97680),A=t(39096),v=t(81220);j.exports=function(r,e,s,n){function l(u,g){return b.coerce(r,e,v,u,g)}function f(u){return b.coerce2(r,e,v,u)}P(r,e,l,n),e.visible!==!1&&(o(r,e,l,f),L(r,e,l,n),l("xhoverformat"),l("yhoverformat"),l("hovertemplate"),e.contours&&e.contours.coloring==="heatmap"&&A(l,n))}},65664:function(j,V,t){j.exports={attributes:t(81220),supplyDefaults:t(3704),crossTraceDefaults:t(80536),calc:t(20688),plot:t(23676).plot,layerName:"contourlayer",style:t(52440),colorbar:t(55296),hoverPoints:t(38200),moduleType:"trace",name:"histogram2dcontour",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},97376:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(49084),L=t(86968).u,A=t(74996),v=t(424),p=t(40516),r=t(32984),e=t(92880).extendFlat,s=t(98192).c;j.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:p.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:e({colors:v.marker.colors,line:v.marker.line,pattern:s,editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),leaf:v.leaf,pathbar:p.pathbar,text:A.text,textinfo:v.textinfo,texttemplate:P({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:A.hovertext,hoverinfo:v.hoverinfo,hovertemplate:b({},{keys:r.eventDataKeys}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:p.outsidetextfont,textposition:p.textposition,sort:A.sort,root:v.root,domain:L({name:"icicle",trace:!0,editType:"calc"})}},59564:function(j,V,t){var b=t(7316);V.name="icicle",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},73876:function(j,V,t){var b=t(3776);V.r=function(P,o){return b.calc(P,o)},V.q=function(P){return b._runCrossTraceCalc("icicle",P)}},7045:function(j,V,t){var b=t(3400),P=t(97376),o=t(76308),L=t(86968).Q,A=t(31508).handleText,v=t(78048).TEXTPAD,p=t(74174).handleMarkerDefaults,r=t(8932),e=r.hasColorscale,s=r.handleDefaults;j.exports=function(l,f,u,g){function h(y,S){return b.coerce(l,f,P,y,S)}var T=h("labels"),c=h("parents");if(!T||!T.length||!c||!c.length){f.visible=!1;return}var i=h("values");i&&i.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var d=h("text");h("texttemplate"),f.texttemplate||h("textinfo",b.isArrayOrTypedArray(d)?"text+label":"label"),h("hovertext"),h("hovertemplate");var x=h("pathbar.visible"),w="auto";A(l,f,g,h,w,{hasPathbar:x,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),p(l,f,g,h);var C=f._hasColorscale=e(l,"marker","colors")||(l.marker||{}).coloraxis;C&&s(l,f,g,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",C?1:.7),f._hovered={marker:{line:{width:2,color:o.contrast(g.paper_bgcolor)}}},x&&(h("pathbar.thickness",f.pathbar.textfont.size+2*v),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),L(f,g,h),f._length=null}},67880:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(72736),A=t(25132),v=t(47192).styleOne,p=t(32984),r=t(78176),e=t(45716),s=t(96488).formatSliceLabel,n=!1;j.exports=function(f,u,g,h,T){var c=T.width,i=T.height,d=T.viewX,x=T.viewY,w=T.pathSlice,C=T.toMoveInsideSlice,y=T.strTransform,S=T.hasTransition,M=T.handleSlicesExit,a=T.makeUpdateSliceInterpolator,E=T.makeUpdateTextInterpolator,m=T.prevEntry,k={},I=f._context.staticPlot,O=f._fullLayout,z=u[0],B=z.trace,F=B.textposition.indexOf("left")!==-1,_=B.textposition.indexOf("right")!==-1,N=B.textposition.indexOf("bottom")!==-1,G=A(g,[c,i],{flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1,orientation:B.tiling.orientation,pad:{inner:B.tiling.pad},maxDepth:B._maxDepth}),X=G.descendants(),$=1/0,et=-1/0;X.forEach(function(W){var J=W.depth;J>=B._maxDepth?(W.x0=W.x1=(W.x0+W.x1)/2,W.y0=W.y1=(W.y0+W.y1)/2):($=Math.min($,J),et=Math.max(et,J))}),h=h.data(X,r.getPtId),B._maxVisibleLayers=isFinite(et)?et-$+1:0,h.enter().append("g").classed("slice",!0),M(h,n,k,[c,i],w),h.order();var ot=null;if(S&&m){var nt=r.getPtId(m);h.each(function(W){ot===null&&r.getPtId(W)===nt&&(ot={x0:W.x0,x1:W.x1,y0:W.y0,y1:W.y1})})}var Z=function(){return ot||{x0:0,x1:c,y0:0,y1:i}},Q=h;return S&&(Q=Q.transition().each("end",function(){var W=b.select(this);r.setSliceCursor(W,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(W){W._x0=d(W.x0),W._x1=d(W.x1),W._y0=x(W.y0),W._y1=x(W.y1),W._hoverX=d(W.x1-B.tiling.pad),W._hoverY=x(N?W.y1-B.tiling.pad/2:W.y0+B.tiling.pad/2);var J=b.select(this),it=P.ensureSingle(J,"path","surface",function(tt){tt.style("pointer-events",I?"none":"all")});S?it.transition().attrTween("d",function(tt){var lt=a(tt,n,Z(),[c,i],{orientation:B.tiling.orientation,flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1});return function(dt){return w(lt(dt))}}):it.attr("d",w),J.call(e,g,f,u,{styleOne:v,eventDataKeys:p.eventDataKeys,transitionTime:p.CLICK_TRANSITION_TIME,transitionEasing:p.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,f,{isTransitioning:f._transitioning}),it.call(v,W,B,f,{hovered:!1}),W.x0===W.x1||W.y0===W.y1?W._text="":W._text=s(W,g,B,u,O)||"";var K=P.ensureSingle(J,"g","slicetext"),H=P.ensureSingle(K,"text","",function(tt){tt.attr("data-notex",1)}),at=P.ensureUniformFontSize(f,r.determineTextFont(B,W,O.font));H.text(W._text||" ").classed("slicetext",!0).attr("text-anchor",_?"end":F?"start":"middle").call(o.font,at).call(L.convertToTspans,f),W.textBB=o.bBox(H.node()),W.transform=C(W,{fontSize:at.size}),W.transform.fontSize=at.size,S?H.transition().attrTween("transform",function(tt){var lt=E(tt,n,Z(),[c,i]);return function(dt){return y(lt(dt))}}):H.attr("transform",y(W))}),ot}},29044:function(j,V,t){j.exports={moduleType:"trace",name:"icicle",basePlotModule:t(59564),categories:[],animatable:!0,attributes:t(97376),layoutAttributes:t(90676),supplyDefaults:t(7045),supplyLayoutDefaults:t(4304),calc:t(73876).r,crossTraceCalc:t(73876).q,plot:t(38364),style:t(47192).style,colorbar:t(5528),meta:{}}},90676:function(j){j.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},4304:function(j,V,t){var b=t(3400),P=t(90676);j.exports=function(L,A){function v(p,r){return b.coerce(L,A,P,p,r)}v("iciclecolorway",A.colorway),v("extendiciclecolors")}},25132:function(j,V,t){var b=t(74148),P=t(83024);j.exports=function(L,A,v){var p=v.flipX,r=v.flipY,e=v.orientation==="h",s=v.maxDepth,n=A[0],l=A[1];s&&(n=(L.height+1)*A[0]/Math.min(L.height+1,s),l=(L.height+1)*A[1]/Math.min(L.height+1,s));var f=b.partition().padding(v.pad.inner).size(e?[A[1],n]:[A[0],l])(L);return(e||p||r)&&P(f,A,{swapXY:e,flipX:p,flipY:r}),f}},38364:function(j,V,t){var b=t(95808),P=t(67880);j.exports=function(L,A,v,p){return b(L,A,v,p,{type:"icicle",drawDescendants:P})}},47192:function(j,V,t){var b=t(33428),P=t(76308),o=t(3400),L=t(82744).resizeText,A=t(60404);function v(r){var e=r._fullLayout._iciclelayer.selectAll(".trace");L(r,e,"icicle"),e.each(function(s){var n=b.select(this),l=s[0],f=l.trace;n.style("opacity",f.opacity),n.selectAll("path.surface").each(function(u){b.select(this).call(p,u,f,r)})})}function p(r,e,s,n){var l=e.data.data,f=!e.children,u=l.i,g=o.castOption(s,u,"marker.line.color")||P.defaultLine,h=o.castOption(s,u,"marker.line.width")||0;r.call(A,e,s,n).style("stroke-width",h).call(P.stroke,g).style("opacity",f?s.leaf.opacity:null)}j.exports={style:v,styleOne:p}},95188:function(j,V,t){for(var b=t(45464),P=t(52904).zorder,o=t(21776).Ks,L=t(92880).extendFlat,A=t(47797).colormodel,v=["rgb","rgba","rgba256","hsl","hsla"],p=[],r=[],e=0;e<v.length;e++){var s=A[v[e]];p.push("For the `"+v[e]+"` colormodel, it is ["+(s.zminDflt||s.min).join(", ")+"]."),r.push("For the `"+v[e]+"` colormodel, it is ["+(s.zmaxDflt||s.max).join(", ")+"].")}j.exports=L({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:v,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:L({},b.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:o({},{keys:["z","color","colormodel"]}),zorder:P,transforms:void 0})},93336:function(j,V,t){var b=t(3400),P=t(47797),o=t(38248),L=t(54460),A=t(3400).maxRowLength,v=t(18712).i;j.exports=function(n,l){var f,u;if(l._hasZ)f=l.z.length,u=A(l.z);else if(l._hasSource){var g=v(l.source);f=g.height,u=g.width}var h=L.getFromId(n,l.xaxis||"x"),T=L.getFromId(n,l.yaxis||"y"),c=h.d2c(l.x0)-l.dx/2,i=T.d2c(l.y0)-l.dy/2,d,x=[c,c+u*l.dx],w=[i,i+f*l.dy];if(h&&h.type==="log")for(d=0;d<u;d++)x.push(c+d*l.dx);if(T&&T.type==="log")for(d=0;d<f;d++)w.push(i+d*l.dy);l._extremes[h._id]=L.findExtremes(h,x),l._extremes[T._id]=L.findExtremes(T,w),l._scaler=e(l);var C={x0:c,y0:i,z:l.z,w:u,h:f};return[C]};function p(s,n,l,f){return function(u){return b.constrain((u-s)*n,l,f)}}function r(s,n){return function(l){return b.constrain(l,s,n)}}function e(s){var n=P.colormodel[s.colormodel],l=n.colormodel||s.colormodel,f=l.length;s._sArray=[];for(var u=0;u<f;u++)n.min[u]!==s.zmin[u]||n.max[u]!==s.zmax[u]?s._sArray.push(p(s.zmin[u],(n.max[u]-n.min[u])/(s.zmax[u]-s.zmin[u]),n.min[u],n.max[u])):s._sArray.push(r(n.min[u],n.max[u]));return function(g){for(var h=g.slice(0,f),T=0;T<f;T++){var c=h[T];if(!o(c))return!1;h[T]=s._sArray[T](c)}return h}}},47797:function(j){j.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(V){return V.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(V){return V.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(V){return V.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(V){var t=V.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["°","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(V){var t=V.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["°","%","%",""]}}}},13188:function(j,V,t){var b=t(3400),P=t(95188),o=t(47797),L=t(81792).IMAGE_URL_PREFIX;j.exports=function(v,p){function r(n,l){return b.coerce(v,p,P,n,l)}r("source"),p.source&&!p.source.match(L)&&delete p.source,p._hasSource=!!p.source;var e=r("z");if(p._hasZ=!(e===void 0||!e.length||!e[0]||!e[0].length),!p._hasZ&&!p._hasSource){p.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var s;p._hasZ?(r("colormodel","rgb"),s=o.colormodel[p.colormodel],r("zmin",s.zminDflt||s.min),r("zmax",s.zmaxDflt||s.max)):p._hasSource&&(p.colormodel="rgba256",s=o.colormodel[p.colormodel],p.zmin=s.zminDflt,p.zmax=s.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),p._length=null,r("zorder")}},79972:function(j){j.exports=function(t,b){return"xVal"in b&&(t.x=b.xVal),"yVal"in b&&(t.y=b.yVal),b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),t.color=b.color,t.colormodel=b.trace.colormodel,t.z||(t.z=b.color),t}},18712:function(j,V,t){var b=t(19480),P=t(81792).IMAGE_URL_PREFIX,o=t(33576).Buffer;V.i=function(L){var A=L.replace(P,""),v=new o(A,"base64");return b(v)}},24892:function(j,V,t){var b=t(93024),P=t(3400),o=P.isArrayOrTypedArray,L=t(47797);j.exports=function(v,p,r){var e=v.cd[0],s=e.trace,n=v.xa,l=v.ya;if(!(b.inbox(p-e.x0,p-(e.x0+e.w*s.dx),0)>0||b.inbox(r-e.y0,r-(e.y0+e.h*s.dy),0)>0)){var f=Math.floor((p-e.x0)/s.dx),u=Math.floor(Math.abs(r-e.y0)/s.dy),g;if(s._hasZ?g=e.z[u][f]:s._hasSource&&(g=s._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(f,u,1,1).data),!!g){var h=e.hi||s.hoverinfo,T;if(h){var c=h.split("+");c.indexOf("all")!==-1&&(c=["color"]),c.indexOf("color")!==-1&&(T=!0)}var i=L.colormodel[s.colormodel],d=i.colormodel||s.colormodel,x=d.length,w=s._scaler(g),C=i.suffix,y=[];(s.hovertemplate||T)&&(y.push("["+[w[0]+C[0],w[1]+C[1],w[2]+C[2]].join(", ")),x===4&&y.push(", "+w[3]+C[3]),y.push("]"),y=y.join(""),v.extraText=d.toUpperCase()+": "+y);var S;o(s.hovertext)&&o(s.hovertext[u])?S=s.hovertext[u][f]:o(s.text)&&o(s.text[u])&&(S=s.text[u][f]);var M=l.c2p(e.y0+(u+.5)*s.dy),a=e.x0+(f+.5)*s.dx,E=e.y0+(u+.5)*s.dy,m="["+g.slice(0,s.colormodel.length).join(", ")+"]";return[P.extendFlat(v,{index:[u,f],x0:n.c2p(e.x0+f*s.dx),x1:n.c2p(e.x0+(f+1)*s.dx),y0:M,y1:M,color:w,xVal:a,xLabelVal:a,yVal:E,yLabelVal:E,zLabelVal:m,text:S,hovertemplateLabels:{zLabel:m,colorLabel:y,"color[0]Label":w[0]+C[0],"color[1]Label":w[1]+C[1],"color[2]Label":w[2]+C[2],"color[3]Label":w[3]+C[3]}})]}}}},48928:function(j,V,t){j.exports={attributes:t(95188),supplyDefaults:t(13188),calc:t(93336),plot:t(63715),style:t(28576),hoverPoints:t(24892),eventData:t(79972),moduleType:"trace",name:"image",basePlotModule:t(57952),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},63715:function(j,V,t){var b=t(33428),P=t(3400),o=P.strTranslate,L=t(9616),A=t(47797),v=t(9188),p=t(2264).STYLE;j.exports=function(e,s,n,l){var f=s.xaxis,u=s.yaxis,g=!e._context._exportedPlot&&v();P.makeTraceGroups(l,n,"im").each(function(h){var T=b.select(this),c=h[0],i=c.trace,d=(i.zsmooth==="fast"||i.zsmooth===!1&&g)&&!i._hasZ&&i._hasSource&&f.type==="linear"&&u.type==="linear";i._realImage=d;var x=c.z,w=c.x0,C=c.y0,y=c.w,S=c.h,M=i.dx,a=i.dy,E,m,k,I,O,z;for(z=0;E===void 0&&z<y;)E=f.c2p(w+z*M),z++;for(z=y;m===void 0&&z>0;)m=f.c2p(w+z*M),z--;for(z=0;I===void 0&&z<S;)I=u.c2p(C+z*a),z++;for(z=S;O===void 0&&z>0;)O=u.c2p(C+z*a),z--;if(m<E&&(k=m,m=E,E=k),O<I&&(k=I,I=O,O=k),!d){var B=.5;E=Math.max(-B*f._length,E),m=Math.min((1+B)*f._length,m),I=Math.max(-B*u._length,I),O=Math.min((1+B)*u._length,O)}var F=Math.round(m-E),_=Math.round(O-I),N=F<=0||_<=0;if(N){var G=T.selectAll("image").data([]);G.exit().remove();return}function X(K){var H=document.createElement("canvas");H.width=F,H.height=_;var at=H.getContext("2d",{willReadFrequently:!0}),tt=function(Rt){return P.constrain(Math.round(f.c2p(w+Rt*M)-E),0,F)},lt=function(Rt){return P.constrain(Math.round(u.c2p(C+Rt*a)-I),0,_)},dt=A.colormodel[i.colormodel],mt=dt.colormodel||i.colormodel,gt=dt.fmt,Mt;for(z=0;z<c.w;z++){var Lt=tt(z),zt=tt(z+1);if(!(zt===Lt||isNaN(zt)||isNaN(Lt)))for(var xt=0;xt<c.h;xt++){var Ct=lt(xt),wt=lt(xt+1);wt===Ct||isNaN(wt)||isNaN(Ct)||!K(z,xt)||(Mt=i._scaler(K(z,xt)),Mt?at.fillStyle=mt+"("+gt(Mt).join(",")+")":at.fillStyle="rgba(0,0,0,0)",at.fillRect(Lt,Ct,zt-Lt,wt-Ct))}}return H}var $=T.selectAll("image").data([h]);$.enter().append("svg:image").attr({xmlns:L.svg,preserveAspectRatio:"none"}),$.exit().remove();var et=i.zsmooth===!1?p:"";if(d){var ot=P.simpleMap(f.range,f.r2l),nt=P.simpleMap(u.range,u.r2l),Z=ot[1]<ot[0],Q=nt[1]>nt[0];if(Z||Q){var W=E+F/2,J=I+_/2;et+="transform:"+o(W+"px",J+"px")+"scale("+(Z?-1:1)+","+(Q?-1:1)+")"+o(-W+"px",-J+"px")+";"}}$.attr("style",et);var it=new Promise(function(K){if(i._hasZ)K();else if(i._hasSource)if(i._canvas&&i._canvas.el.width===y&&i._canvas.el.height===S&&i._canvas.source===i.source)K();else{var H=document.createElement("canvas");H.width=y,H.height=S;var at=H.getContext("2d",{willReadFrequently:!0});i._image=i._image||new Image;var tt=i._image;tt.onload=function(){at.drawImage(tt,0,0),i._canvas={el:H,source:i.source},K()},tt.setAttribute("src",i.source)}}).then(function(){var K,H;if(i._hasZ)H=X(function(lt,dt){var mt=x[dt][lt];return P.isTypedArray(mt)&&(mt=Array.from(mt)),mt}),K=H.toDataURL("image/png");else if(i._hasSource)if(d)K=i.source;else{var at=i._canvas.el.getContext("2d",{willReadFrequently:!0}),tt=at.getImageData(0,0,y,S).data;H=X(function(lt,dt){var mt=4*(dt*y+lt);return[tt[mt],tt[mt+1],tt[mt+2],tt[mt+3]]}),K=H.toDataURL("image/png")}$.attr({"xlink:href":K,height:_,width:F,x:E,y:I})});e._promises.push(it)})}},28576:function(j,V,t){var b=t(33428);j.exports=function(o){b.select(o).selectAll(".im image").style("opacity",function(L){return L[0].trace.opacity})}},89864:function(j,V,t){var b=t(92880).extendFlat,P=t(92880).extendDeep,o=t(67824).overrideAll,L=t(25376),A=t(22548),v=t(86968).u,p=t(94724),r=t(31780).templatedArray,e=t(48164),s=t(29736).descriptionOnlyNumbers,n=L({editType:"plot",colorEditType:"plot"}),l={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:A.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},f={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},u=r("step",P({},l,{range:f}));j.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:v({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:b({},n,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:s("value")},font:b({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:s("value")},increasing:{symbol:{valType:"string",dflt:e.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:e.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:e.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:e.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:b({},n,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:P({},l,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:A.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:o({range:f,visible:b({},p.visible,{dflt:!0}),tickmode:p.minor.tickmode,nticks:p.nticks,tick0:p.tick0,dtick:p.dtick,tickvals:p.tickvals,ticktext:p.ticktext,ticks:b({},p.ticks,{dflt:"outside"}),ticklen:p.ticklen,tickwidth:p.tickwidth,tickcolor:p.tickcolor,ticklabelstep:p.ticklabelstep,showticklabels:p.showticklabels,labelalias:p.labelalias,tickfont:L({}),tickangle:p.tickangle,tickformat:p.tickformat,tickformatstops:p.tickformatstops,tickprefix:p.tickprefix,showtickprefix:p.showtickprefix,ticksuffix:p.ticksuffix,showticksuffix:p.showticksuffix,separatethousands:p.separatethousands,exponentformat:p.exponentformat,minexponent:p.minexponent,showexponent:p.showexponent,editType:"plot"},"plot"),steps:u,threshold:{line:{color:b({},l.line.color,{}),width:b({},l.line.width,{dflt:1}),editType:"plot"},thickness:b({},l.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},92728:function(j,V,t){var b=t(7316);V.name="indicator",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},79136:function(j){function V(t,b){var P=[],o=b.value;typeof b._lastValue!="number"&&(b._lastValue=b.value);var L=b._lastValue,A=L;return b._hasDelta&&typeof b.delta.reference=="number"&&(A=b.delta.reference),P[0]={y:o,lastY:L,delta:o-A,relativeDelta:(o-A)/A},P}j.exports={calc:V}},12096:function(j){j.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},20424:function(j,V,t){var b=t(3400),P=t(89864),o=t(86968).Q,L=t(31780),A=t(51272),v=t(12096),p=t(26332),r=t(25404),e=t(95936),s=t(42568);function n(f,u,g,h){function T(F,_){return b.coerce(f,u,P,F,_)}o(u,h,T),T("mode"),u._hasNumber=u.mode.indexOf("number")!==-1,u._hasDelta=u.mode.indexOf("delta")!==-1,u._hasGauge=u.mode.indexOf("gauge")!==-1;var c=T("value");u._range=[0,typeof c=="number"?1.5*c:1];var i=new Array(2),d;if(u._hasNumber){T("number.valueformat");var x=b.extendFlat({},h.font);x.size=void 0,b.coerceFont(T,"number.font",x),u.number.font.size===void 0&&(u.number.font.size=v.defaultNumberFontSize,i[0]=!0),T("number.prefix"),T("number.suffix"),d=u.number.font.size}var w;if(u._hasDelta){var C=b.extendFlat({},h.font);C.size=void 0,b.coerceFont(T,"delta.font",C),u.delta.font.size===void 0&&(u.delta.font.size=(u._hasNumber?.5:1)*(d||v.defaultNumberFontSize),i[1]=!0),T("delta.reference",u.value),T("delta.relative"),T("delta.valueformat",u.delta.relative?"2%":""),T("delta.increasing.symbol"),T("delta.increasing.color"),T("delta.decreasing.symbol"),T("delta.decreasing.color"),T("delta.position"),T("delta.prefix"),T("delta.suffix"),w=u.delta.font.size}u._scaleNumbers=(!u._hasNumber||i[0])&&(!u._hasDelta||i[1])||!1;var y=b.extendFlat({},h.font);y.size=.25*(d||w||v.defaultNumberFontSize),b.coerceFont(T,"title.font",y),T("title.text");var S,M,a,E;function m(F,_){return b.coerce(S,M,P.gauge,F,_)}function k(F,_){return b.coerce(a,E,P.gauge.axis,F,_)}if(u._hasGauge){S=f.gauge,S||(S={}),M=L.newContainer(u,"gauge"),m("shape");var I=u._isBullet=u.gauge.shape==="bullet";I||T("title.align","center");var O=u._isAngular=u.gauge.shape==="angular";O||T("align","center"),m("bgcolor",h.paper_bgcolor),m("borderwidth"),m("bordercolor"),m("bar.color"),m("bar.line.color"),m("bar.line.width");var z=v.valueThickness*(u.gauge.shape==="bullet"?.5:1);m("bar.thickness",z),A(S,M,{name:"steps",handleItemDefaults:l}),m("threshold.value"),m("threshold.thickness"),m("threshold.line.width"),m("threshold.line.color"),a={},S&&(a=S.axis||{}),E=L.newContainer(M,"axis"),k("visible"),u._range=k("range",u._range);var B={font:h.font,noAutotickangles:!0,outerTicks:!0,noTicklabelshift:!0,noTicklabelstandoff:!0};p(a,E,k,"linear"),s(a,E,k,"linear",B),e(a,E,k,"linear",B),r(a,E,k,B)}else T("title.align","center"),T("align","center"),u._isAngular=u._isBullet=!1;u._length=null}function l(f,u){function g(h,T){return b.coerce(f,u,P.gauge.steps,h,T)}g("color"),g("line.color"),g("line.width"),g("range"),g("thickness")}j.exports={supplyDefaults:n}},43480:function(j,V,t){j.exports={moduleType:"trace",name:"indicator",basePlotModule:t(92728),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:t(89864),supplyDefaults:t(20424).supplyDefaults,calc:t(79136).calc,plot:t(97864),meta:{}}},97864:function(j,V,t){var b=t(33428),P=t(67756).qy,o=t(67756).Gz,L=t(3400),A=L.strScale,v=L.strTranslate,p=L.rad2deg,r=t(84284).MID_SHIFT,e=t(43616),s=t(12096),n=t(72736),l=t(54460),f=t(28336),u=t(37668),g=t(94724),h=t(76308),T={left:"start",center:"middle",right:"end"},c={left:0,center:.5,right:1},i=/[yzafpnµmkMGTPEZY]/;function d(I){return I&&I.duration>0}j.exports=function(O,z,B,F){var _=O._fullLayout,N;d(B)&&F&&(N=F()),L.makeTraceGroups(_._indicatorlayer,z,"trace").each(function(G){var X=G[0],$=X.trace,et=b.select(this),ot=$._hasGauge,nt=$._isAngular,Z=$._isBullet,Q=$.domain,W={w:_._size.w*(Q.x[1]-Q.x[0]),h:_._size.h*(Q.y[1]-Q.y[0]),l:_._size.l+_._size.w*Q.x[0],r:_._size.r+_._size.w*(1-Q.x[1]),t:_._size.t+_._size.h*(1-Q.y[1]),b:_._size.b+_._size.h*Q.y[0]},J=W.l+W.w/2,it=W.t+W.h/2,K=Math.min(W.w/2,W.h),H=s.innerRadius*K,at,tt,lt,dt=$.align||"center";if(tt=it,!ot)at=W.l+c[dt]*W.w,lt=function(Tt){return a(Tt,W.w,W.h)};else if(nt&&(at=J,tt=it+K/2,lt=function(Tt){return E(Tt,.9*H)}),Z){var mt=s.bulletPadding,gt=1-s.bulletNumberDomainSize+mt;at=W.l+(gt+(1-gt)*c[dt])*W.w,lt=function(Tt){return a(Tt,(s.bulletNumberDomainSize-mt)*W.w,W.h)}}C(O,et,G,{numbersX:at,numbersY:tt,numbersScaler:lt,transitionOpts:B,onComplete:N});var Mt,Lt;ot&&(Mt={range:$.gauge.axis.range,color:$.gauge.bgcolor,line:{color:$.gauge.bordercolor,width:0},thickness:1},Lt={range:$.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:$.gauge.bordercolor,width:$.gauge.borderwidth},thickness:1});var zt=et.selectAll("g.angular").data(nt?G:[]);zt.exit().remove();var xt=et.selectAll("g.angularaxis").data(nt?G:[]);xt.exit().remove(),nt&&w(O,et,G,{radius:K,innerRadius:H,gauge:zt,layer:xt,size:W,gaugeBg:Mt,gaugeOutline:Lt,transitionOpts:B,onComplete:N});var Ct=et.selectAll("g.bullet").data(Z?G:[]);Ct.exit().remove();var wt=et.selectAll("g.bulletaxis").data(Z?G:[]);wt.exit().remove(),Z&&x(O,et,G,{gauge:Ct,layer:wt,size:W,gaugeBg:Mt,gaugeOutline:Lt,transitionOpts:B,onComplete:N});var Rt=et.selectAll("text.title").data(G);Rt.exit().remove(),Rt.enter().append("text").classed("title",!0),Rt.attr("text-anchor",function(){return Z?T.right:T[$.title.align]}).text($.title.text).call(e.font,$.title.font).call(n.convertToTspans,O),Rt.attr("transform",function(){var Tt=W.l+W.w*c[$.title.align],Bt,Gt=s.titlePadding,te=e.bBox(Rt.node());if(ot){if(nt)if($.gauge.axis.visible){var Wt=e.bBox(xt.node());Bt=Wt.top-Gt-te.bottom}else Bt=W.t+W.h/2-K/2-te.bottom-Gt;Z&&(Bt=tt-(te.top+te.bottom)/2,Tt=W.l-s.bulletPadding*W.w)}else Bt=$._numbersTop-Gt-te.bottom;return v(Tt,Bt)})})};function x(I,O,z,B){var F=z[0].trace,_=B.gauge,N=B.layer,G=B.gaugeBg,X=B.gaugeOutline,$=B.size,et=F.domain,ot=B.transitionOpts,nt=B.onComplete,Z,Q,W,J,it;_.enter().append("g").classed("bullet",!0),_.attr("transform",v($.l,$.t)),N.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),N.selectAll("g.xbulletaxistick,path,text").remove();var K=$.h,H=F.gauge.bar.thickness*K,at=et.x[0],tt=et.x[0]+(et.x[1]-et.x[0])*(F._hasNumber||F._hasDelta?1-s.bulletNumberDomainSize:1);Z=M(I,F.gauge.axis),Z._id="xbulletaxis",Z.domain=[at,tt],Z.setScale(),Q=l.calcTicks(Z),W=l.makeTransTickFn(Z),J=l.getTickSigns(Z)[2],it=$.t+$.h,Z.visible&&(l.drawTicks(I,Z,{vals:Z.ticks==="inside"?l.clipEnds(Z,Q):Q,layer:N,path:l.makeTickPath(Z,it,J),transFn:W}),l.drawLabels(I,Z,{vals:Q,layer:N,transFn:W,labelFns:l.makeLabelFns(Z,it)}));function lt(xt){xt.attr("width",function(Ct){return Math.max(0,Z.c2p(Ct.range[1])-Z.c2p(Ct.range[0]))}).attr("x",function(Ct){return Z.c2p(Ct.range[0])}).attr("y",function(Ct){return .5*(1-Ct.thickness)*K}).attr("height",function(Ct){return Ct.thickness*K})}var dt=[G].concat(F.gauge.steps),mt=_.selectAll("g.bg-bullet").data(dt);mt.enter().append("g").classed("bg-bullet",!0).append("rect"),mt.select("rect").call(lt).call(y),mt.exit().remove();var gt=_.selectAll("g.value-bullet").data([F.gauge.bar]);gt.enter().append("g").classed("value-bullet",!0).append("rect"),gt.select("rect").attr("height",H).attr("y",(K-H)/2).call(y),d(ot)?gt.select("rect").transition().duration(ot.duration).ease(ot.easing).each("end",function(){nt&&nt()}).each("interrupt",function(){nt&&nt()}).attr("width",Math.max(0,Z.c2p(Math.min(F.gauge.axis.range[1],z[0].y)))):gt.select("rect").attr("width",typeof z[0].y=="number"?Math.max(0,Z.c2p(Math.min(F.gauge.axis.range[1],z[0].y))):0),gt.exit().remove();var Mt=z.filter(function(){return F.gauge.threshold.value||F.gauge.threshold.value===0}),Lt=_.selectAll("g.threshold-bullet").data(Mt);Lt.enter().append("g").classed("threshold-bullet",!0).append("line"),Lt.select("line").attr("x1",Z.c2p(F.gauge.threshold.value)).attr("x2",Z.c2p(F.gauge.threshold.value)).attr("y1",(1-F.gauge.threshold.thickness)/2*K).attr("y2",(1-(1-F.gauge.threshold.thickness)/2)*K).call(h.stroke,F.gauge.threshold.line.color).style("stroke-width",F.gauge.threshold.line.width),Lt.exit().remove();var zt=_.selectAll("g.gauge-outline").data([X]);zt.enter().append("g").classed("gauge-outline",!0).append("rect"),zt.select("rect").call(lt).call(y),zt.exit().remove()}function w(I,O,z,B){var F=z[0].trace,_=B.size,N=B.radius,G=B.innerRadius,X=B.gaugeBg,$=B.gaugeOutline,et=[_.l+_.w/2,_.t+_.h/2+N/2],ot=B.gauge,nt=B.layer,Z=B.transitionOpts,Q=B.onComplete,W=Math.PI/2;function J(jt){var ie=F.gauge.axis.range[0],ue=F.gauge.axis.range[1],fe=(jt-ie)/(ue-ie)*Math.PI-W;return fe<-W?-W:fe>W?W:fe}function it(jt){return b.svg.arc().innerRadius((G+N)/2-jt/2*(N-G)).outerRadius((G+N)/2+jt/2*(N-G)).startAngle(-W)}function K(jt){jt.attr("d",function(ie){return it(ie.thickness).startAngle(J(ie.range[0])).endAngle(J(ie.range[1]))()})}var H,at,tt,lt;ot.enter().append("g").classed("angular",!0),ot.attr("transform",v(et[0],et[1])),nt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),nt.selectAll("g.xangularaxistick,path,text").remove(),H=M(I,F.gauge.axis),H.type="linear",H.range=F.gauge.axis.range,H._id="xangularaxis",H.ticklabeloverflow="allow",H.setScale();var dt=function(jt){return(H.range[0]-jt.x)/(H.range[1]-H.range[0])*Math.PI+Math.PI},mt={},gt=l.makeLabelFns(H,0),Mt=gt.labelStandoff;mt.xFn=function(jt){var ie=dt(jt);return Math.cos(ie)*Mt},mt.yFn=function(jt){var ie=dt(jt),ue=Math.sin(ie)>0?.2:1;return-Math.sin(ie)*(Mt+jt.fontSize*ue)+Math.abs(Math.cos(ie))*(jt.fontSize*r)},mt.anchorFn=function(jt){var ie=dt(jt),ue=Math.cos(ie);return Math.abs(ue)<.1?"middle":ue>0?"start":"end"},mt.heightFn=function(jt,ie,ue){var fe=dt(jt);return-.5*(1+Math.sin(fe))*ue};var Lt=function(jt){return v(et[0]+N*Math.cos(jt),et[1]-N*Math.sin(jt))};tt=function(jt){return Lt(dt(jt))};var zt=function(jt){var ie=dt(jt);return Lt(ie)+"rotate("+-p(ie)+")"};if(at=l.calcTicks(H),lt=l.getTickSigns(H)[2],H.visible){lt=H.ticks==="inside"?-1:1;var xt=(H.linewidth||1)/2;l.drawTicks(I,H,{vals:at,layer:nt,path:"M"+lt*xt+",0h"+lt*H.ticklen,transFn:zt}),l.drawLabels(I,H,{vals:at,layer:nt,transFn:tt,labelFns:mt})}var Ct=[X].concat(F.gauge.steps),wt=ot.selectAll("g.bg-arc").data(Ct);wt.enter().append("g").classed("bg-arc",!0).append("path"),wt.select("path").call(K).call(y),wt.exit().remove();var Rt=it(F.gauge.bar.thickness),Tt=ot.selectAll("g.value-arc").data([F.gauge.bar]);Tt.enter().append("g").classed("value-arc",!0).append("path");var Bt=Tt.select("path");d(Z)?(Bt.transition().duration(Z.duration).ease(Z.easing).each("end",function(){Q&&Q()}).each("interrupt",function(){Q&&Q()}).attrTween("d",S(Rt,J(z[0].lastY),J(z[0].y))),F._lastValue=z[0].y):Bt.attr("d",typeof z[0].y=="number"?Rt.endAngle(J(z[0].y)):"M0,0Z"),Bt.call(y),Tt.exit().remove(),Ct=[];var Gt=F.gauge.threshold.value;(Gt||Gt===0)&&Ct.push({range:[Gt,Gt],color:F.gauge.threshold.color,line:{color:F.gauge.threshold.line.color,width:F.gauge.threshold.line.width},thickness:F.gauge.threshold.thickness});var te=ot.selectAll("g.threshold-arc").data(Ct);te.enter().append("g").classed("threshold-arc",!0).append("path"),te.select("path").call(K).call(y),te.exit().remove();var Wt=ot.selectAll("g.gauge-outline").data([$]);Wt.enter().append("g").classed("gauge-outline",!0).append("path"),Wt.select("path").call(K).call(y),Wt.exit().remove()}function C(I,O,z,B){var F=z[0].trace,_=B.numbersX,N=B.numbersY,G=F.align||"center",X=T[G],$=B.transitionOpts,et=B.onComplete,ot=L.ensureSingle(O,"g","numbers"),nt,Z,Q,W=[];F._hasNumber&&W.push("number"),F._hasDelta&&(W.push("delta"),F.delta.position==="left"&&W.reverse());var J=ot.selectAll("text").data(W);J.enter().append("text"),J.attr("text-anchor",function(){return X}).attr("class",function(Lt){return Lt}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),J.exit().remove();function it(Lt,zt,xt,Ct){if(Lt.match("s")&&xt>=0!=Ct>=0&&!zt(xt).slice(-1).match(i)&&!zt(Ct).slice(-1).match(i)){var wt=Lt.slice().replace("s","f").replace(/\d+/,function(Tt){return parseInt(Tt)-1}),Rt=M(I,{tickformat:wt});return function(Tt){return Math.abs(Tt)<1?l.tickText(Rt,Tt).text:zt(Tt)}}else return zt}function K(){var Lt=M(I,{tickformat:F.number.valueformat},F._range);Lt.setScale(),l.prepTicks(Lt);var zt=function(Tt){return l.tickText(Lt,Tt).text},xt=F.number.suffix,Ct=F.number.prefix,wt=ot.select("text.number");function Rt(){var Tt=typeof z[0].y=="number"?Ct+zt(z[0].y)+xt:"-";wt.text(Tt).call(e.font,F.number.font).call(n.convertToTspans,I)}return d($)?wt.transition().duration($.duration).ease($.easing).each("end",function(){Rt(),et&&et()}).each("interrupt",function(){Rt(),et&&et()}).attrTween("text",function(){var Tt=b.select(this),Bt=o(z[0].lastY,z[0].y);F._lastValue=z[0].y;var Gt=it(F.number.valueformat,zt,z[0].lastY,z[0].y);return function(te){Tt.text(Ct+Gt(Bt(te))+xt)}}):Rt(),nt=m(Ct+zt(z[0].y)+xt,F.number.font,X,I),wt}function H(){var Lt=M(I,{tickformat:F.delta.valueformat},F._range);Lt.setScale(),l.prepTicks(Lt);var zt=function(te){return l.tickText(Lt,te).text},xt=F.delta.suffix,Ct=F.delta.prefix,wt=function(te){var Wt=F.delta.relative?te.relativeDelta:te.delta;return Wt},Rt=function(te,Wt){return te===0||typeof te!="number"||isNaN(te)?"-":(te>0?F.delta.increasing.symbol:F.delta.decreasing.symbol)+Ct+Wt(te)+xt},Tt=function(te){return te.delta>=0?F.delta.increasing.color:F.delta.decreasing.color};F._deltaLastValue===void 0&&(F._deltaLastValue=wt(z[0]));var Bt=ot.select("text.delta");Bt.call(e.font,F.delta.font).call(h.fill,Tt({delta:F._deltaLastValue}));function Gt(){Bt.text(Rt(wt(z[0]),zt)).call(h.fill,Tt(z[0])).call(n.convertToTspans,I)}return d($)?Bt.transition().duration($.duration).ease($.easing).tween("text",function(){var te=b.select(this),Wt=wt(z[0]),jt=F._deltaLastValue,ie=it(F.delta.valueformat,zt,jt,Wt),ue=o(jt,Wt);return F._deltaLastValue=Wt,function(fe){te.text(Rt(ue(fe),ie)),te.call(h.fill,Tt({delta:ue(fe)}))}}).each("end",function(){Gt(),et&&et()}).each("interrupt",function(){Gt(),et&&et()}):Gt(),Z=m(Rt(wt(z[0]),zt),F.delta.font,X,I),Bt}var at=F.mode+F.align,tt;if(F._hasDelta&&(tt=H(),at+=F.delta.position+F.delta.font.size+F.delta.font.family+F.delta.valueformat,at+=F.delta.increasing.symbol+F.delta.decreasing.symbol,Q=Z),F._hasNumber&&(K(),at+=F.number.font.size+F.number.font.family+F.number.valueformat+F.number.suffix+F.number.prefix,Q=nt),F._hasDelta&&F._hasNumber){var lt=[(nt.left+nt.right)/2,(nt.top+nt.bottom)/2],dt=[(Z.left+Z.right)/2,(Z.top+Z.bottom)/2],mt,gt,Mt=.75*F.delta.font.size;F.delta.position==="left"&&(mt=k(F,"deltaPos",0,-1*(nt.width*c[F.align]+Z.width*(1-c[F.align])+Mt),at,Math.min),gt=lt[1]-dt[1],Q={width:nt.width+Z.width+Mt,height:Math.max(nt.height,Z.height),left:Z.left+mt,right:nt.right,top:Math.min(nt.top,Z.top+gt),bottom:Math.max(nt.bottom,Z.bottom+gt)}),F.delta.position==="right"&&(mt=k(F,"deltaPos",0,nt.width*(1-c[F.align])+Z.width*c[F.align]+Mt,at,Math.max),gt=lt[1]-dt[1],Q={width:nt.width+Z.width+Mt,height:Math.max(nt.height,Z.height),left:nt.left,right:Z.right+mt,top:Math.min(nt.top,Z.top+gt),bottom:Math.max(nt.bottom,Z.bottom+gt)}),F.delta.position==="bottom"&&(mt=null,gt=Z.height,Q={width:Math.max(nt.width,Z.width),height:nt.height+Z.height,left:Math.min(nt.left,Z.left),right:Math.max(nt.right,Z.right),top:nt.bottom-nt.height,bottom:nt.bottom+Z.height}),F.delta.position==="top"&&(mt=null,gt=nt.top,Q={width:Math.max(nt.width,Z.width),height:nt.height+Z.height,left:Math.min(nt.left,Z.left),right:Math.max(nt.right,Z.right),top:nt.bottom-nt.height-Z.height,bottom:nt.bottom}),tt.attr({dx:mt,dy:gt})}(F._hasNumber||F._hasDelta)&&ot.attr("transform",function(){var Lt=B.numbersScaler(Q);at+=Lt[2];var zt=k(F,"numbersScale",1,Lt[0],at,Math.min),xt;F._scaleNumbers||(zt=1),F._isAngular?xt=N-zt*Q.bottom:xt=N-zt*(Q.top+Q.bottom)/2,F._numbersTop=zt*Q.top+xt;var Ct=Q[G];G==="center"&&(Ct=(Q.left+Q.right)/2);var wt=_-zt*Ct;return wt=k(F,"numbersTranslate",0,wt,at,Math.max),v(wt,xt)+A(zt)})}function y(I){I.each(function(O){h.stroke(b.select(this),O.line.color)}).each(function(O){h.fill(b.select(this),O.color)}).style("stroke-width",function(O){return O.line.width})}function S(I,O,z){return function(){var B=P(O,z);return function(F){return I.endAngle(B(F))()}}}function M(I,O,z){var B=I._fullLayout,F=L.extendFlat({type:"linear",ticks:"outside",range:z,showline:!0},O),_={type:"linear",_id:"x"+O._id},N={letter:"x",font:B.font,noAutotickangles:!0,noHover:!0,noTickson:!0};function G(X,$){return L.coerce(F,_,g,X,$)}return f(F,_,G,N,B),u(F,_,G,N),_}function a(I,O,z){var B=Math.min(O/I.width,z/I.height);return[B,I,O+"x"+z]}function E(I,O){var z=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),B=O/z;return[B,I,O]}function m(I,O,z,B){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),_=b.select(F);return _.text(I).attr("x",0).attr("y",0).attr("text-anchor",z).attr("data-unformatted",I).call(n.convertToTspans,B).call(e.font,O),e.bBox(_.node())}function k(I,O,z,B,F,_){var N="_cache"+O;I[N]&&I[N].key===F||(I[N]={key:F,value:z});var G=L.aggNums(_,null,[I[N].value,B],2);return I[N].value=G,G}},50048:function(j,V,t){var b=t(49084),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(52948),A=t(45464),v=t(92880).extendFlat,p=t(67824).overrideAll;function r(n){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function e(n){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var s=j.exports=p(v({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:e(),y:e(),z:e()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:o(),xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z"),valuehoverformat:P("value",1),showlegend:v({},A.showlegend,{dflt:!1})},b("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:L.opacity,lightposition:L.lightposition,lighting:L.lighting,flatshading:L.flatshading,contour:L.contour,hoverinfo:v({},A.hoverinfo)}),"calc","nested");s.flatshading.dflt=!0,s.lighting.facenormalsepsilon.dflt=0,s.x.editType=s.y.editType=s.z.editType=s.value.editType="calc+clearAxisTypes",s.transforms=void 0},62624:function(j,V,t){var b=t(47128),P=t(3832).processGrid,o=t(3832).filter;j.exports=function(A,v){v._len=Math.min(v.x.length,v.y.length,v.z.length,v.value.length),v._x=o(v.x,v._len),v._y=o(v.y,v._len),v._z=o(v.z,v._len),v._value=o(v.value,v._len);var p=P(v);v._gridFill=p.fill,v._Xs=p.Xs,v._Ys=p.Ys,v._Zs=p.Zs,v._len=p.len;for(var r=1/0,e=-1/0,s=0;s<v._len;s++){var n=v._value[s];r=Math.min(r,n),e=Math.max(e,n)}v._minValues=r,v._maxValues=e,v._vMin=v.isomin===void 0||v.isomin===null?r:v.isomin,v._vMax=v.isomax===void 0||v.isomax===null?e:v.isomax,b(A,v,{vals:[v._vMin,v._vMax],containerStr:"",cLetter:"c"})}},31460:function(j,V,t){var b=t(67792).gl_mesh3d,P=t(33040).parseColorScale,o=t(3400).isArrayOrTypedArray,L=t(43080),A=t(8932).extractOpts,v=t(52094),p=function(f,u){for(var g=u.length-1;g>0;g--){var h=Math.min(u[g],u[g-1]),T=Math.max(u[g],u[g-1]);if(T>h&&h<f&&f<=T)return{id:g,distRatio:(T-f)/(T-h)}}return{id:0,distRatio:0}};function r(f,u,g){this.scene=f,this.uid=g,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var e=r.prototype;e.handlePick=function(f){if(f.object===this.mesh){var u=f.data.index,g=this.data._meshX[u],h=this.data._meshY[u],T=this.data._meshZ[u],c=this.data._Ys.length,i=this.data._Zs.length,d=p(g,this.data._Xs).id,x=p(h,this.data._Ys).id,w=p(T,this.data._Zs).id,C=f.index=w+i*x+i*c*d;f.traceCoordinate=[this.data._meshX[C],this.data._meshY[C],this.data._meshZ[C],this.data._value[C]];var y=this.data.hovertext||this.data.text;return o(y)&&y[C]!==void 0?f.textLabel=y[C]:y&&(f.textLabel=y),!0}},e.update=function(f){var u=this.scene,g=u.fullSceneLayout;this.data=n(f);function h(x,w,C,y){return w.map(function(S){return x.d2l(S,0,y)*C})}var T=v(h(g.xaxis,f._meshX,u.dataScale[0],f.xcalendar),h(g.yaxis,f._meshY,u.dataScale[1],f.ycalendar),h(g.zaxis,f._meshZ,u.dataScale[2],f.zcalendar)),c=v(f._meshI,f._meshJ,f._meshK),i={positions:T,cells:c,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:L(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading},d=A(f);i.vertexIntensity=f._meshIntensity,i.vertexIntensityBounds=[d.min,d.max],i.colormap=P(f),this.mesh.update(i)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var s=["xyz","xzy","yxz","yzx","zxy","zyx"];function n(f){f._meshI=[],f._meshJ=[],f._meshK=[];var u=f.surface.show,g=f.spaceframe.show,h=f.surface.fill,T=f.spaceframe.fill,c=!1,i=!1,d=0,x,w,C=f._Xs,y=f._Ys,S=f._Zs,M=C.length,a=y.length,E=S.length,m=s.indexOf(f._gridFill.replace(/-/g,"").replace(/\+/g,"")),k=function(Nt,Ht,St){switch(m){case 5:return St+E*Ht+E*a*Nt;case 4:return St+E*Nt+E*M*Ht;case 3:return Ht+a*St+a*E*Nt;case 2:return Ht+a*Nt+a*M*St;case 1:return Nt+M*St+M*E*Ht;default:return Nt+M*Ht+M*a*St}},I=f._minValues,O=f._maxValues,z=f._vMin,B=f._vMax,F,_,N,G;function X(Nt,Ht,St){for(var kt=G.length,Ft=w;Ft<kt;Ft++)if(Nt===F[Ft]&&Ht===_[Ft]&&St===N[Ft])return Ft;return-1}function $(){w=x}function et(){F=[],_=[],N=[],G=[],x=0,$()}function ot(Nt,Ht,St,kt){return F.push(Nt),_.push(Ht),N.push(St),G.push(kt),x++,x-1}function nt(Nt,Ht,St){return f._meshI.push(Nt),f._meshJ.push(Ht),f._meshK.push(St),d++,d-1}function Z(Nt,Ht,St){for(var kt=[],Ft=0;Ft<Nt.length;Ft++)kt[Ft]=(Nt[Ft]+Ht[Ft]+St[Ft])/3;return kt}function Q(Nt,Ht,St){for(var kt=[],Ft=0;Ft<Nt.length;Ft++)kt[Ft]=Nt[Ft]*(1-St)+St*Ht[Ft];return kt}var W;function J(Nt){W=Nt}function it(Nt,Ht){var St=Nt[0],kt=Nt[1],Ft=Nt[2],At=Z(St,kt,Ft),ft=Math.sqrt(1-W),pt=Q(At,St,ft),Dt=Q(At,kt,ft),Ut=Q(At,Ft,ft),$t=Ht[0],re=Ht[1],Be=Ht[2];return{xyzv:[[St,kt,Dt],[Dt,pt,St],[kt,Ft,Ut],[Ut,Dt,kt],[Ft,St,pt],[pt,Ut,Ft]],abc:[[$t,re,-1],[-1,-1,$t],[re,Be,-1],[-1,-1,re],[Be,$t,-1],[-1,-1,Be]]}}function K(Nt,Ht){return Nt==="all"||Nt===null?!0:Nt.indexOf(Ht)>-1}function H(Nt,Ht){return Nt===null?Ht:Nt}function at(Nt,Ht,St){$();var kt=[Ht],Ft=[St];if(W>=1)kt=[Ht],Ft=[St];else if(W>0){var At=it(Ht,St);kt=At.xyzv,Ft=At.abc}for(var ft=0;ft<kt.length;ft++){Ht=kt[ft],St=Ft[ft];for(var pt=[],Dt=0;Dt<3;Dt++){var Ut=Ht[Dt][0],$t=Ht[Dt][1],re=Ht[Dt][2],Be=Ht[Dt][3],We=St[Dt]>-1?St[Dt]:X(Ut,$t,re);We>-1?pt[Dt]=We:pt[Dt]=ot(Ut,$t,re,H(Nt,Be))}nt(pt[0],pt[1],pt[2])}}function tt(Nt,Ht,St){var kt=function(Ft,At,ft){at(Nt,[Ht[Ft],Ht[At],Ht[ft]],[St[Ft],St[At],St[ft]])};kt(0,1,2),kt(2,3,0)}function lt(Nt,Ht,St){var kt=function(Ft,At,ft){at(Nt,[Ht[Ft],Ht[At],Ht[ft]],[St[Ft],St[At],St[ft]])};kt(0,1,2),kt(3,0,1),kt(2,3,0),kt(1,2,3)}function dt(Nt,Ht,St,kt){var Ft=Nt[3];Ft<St&&(Ft=St),Ft>kt&&(Ft=kt);for(var At=(Nt[3]-Ft)/(Nt[3]-Ht[3]+1e-9),ft=[],pt=0;pt<4;pt++)ft[pt]=(1-At)*Nt[pt]+At*Ht[pt];return ft}function mt(Nt,Ht,St){return Nt>=Ht&&Nt<=St}function gt(Nt){var Ht=.001*(B-z);return Nt>=z-Ht&&Nt<=B+Ht}function Mt(Nt){for(var Ht=[],St=0;St<4;St++){var kt=Nt[St];Ht.push([f._x[kt],f._y[kt],f._z[kt],f._value[kt]])}return Ht}var Lt=3;function zt(Nt,Ht,St,kt,Ft,At){At||(At=1),St=[-1,-1,-1];var ft=!1,pt=[mt(Ht[0][3],kt,Ft),mt(Ht[1][3],kt,Ft),mt(Ht[2][3],kt,Ft)];if(!pt[0]&&!pt[1]&&!pt[2])return!1;var Dt=function($t,re,Be){return gt(re[0][3])&&gt(re[1][3])&&gt(re[2][3])?(at($t,re,Be),!0):At<Lt?zt($t,re,Be,z,B,++At):!1};if(pt[0]&&pt[1]&&pt[2])return Dt(Nt,Ht,St)||ft;var Ut=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function($t){if(pt[$t[0]]&&pt[$t[1]]&&!pt[$t[2]]){var re=Ht[$t[0]],Be=Ht[$t[1]],We=Ht[$t[2]],me=dt(We,re,kt,Ft),Se=dt(We,Be,kt,Ft);ft=Dt(Nt,[Se,me,re],[-1,-1,St[$t[0]]])||ft,ft=Dt(Nt,[re,Be,Se],[St[$t[0]],St[$t[1]],-1])||ft,Ut=!0}}),Ut||[[0,1,2],[1,2,0],[2,0,1]].forEach(function($t){if(pt[$t[0]]&&!pt[$t[1]]&&!pt[$t[2]]){var re=Ht[$t[0]],Be=Ht[$t[1]],We=Ht[$t[2]],me=dt(Be,re,kt,Ft),Se=dt(We,re,kt,Ft);ft=Dt(Nt,[Se,me,re],[-1,-1,St[$t[0]]])||ft,Ut=!0}}),ft}function xt(Nt,Ht,St,kt){var Ft=!1,At=Mt(Ht),ft=[mt(At[0][3],St,kt),mt(At[1][3],St,kt),mt(At[2][3],St,kt),mt(At[3][3],St,kt)];if(!ft[0]&&!ft[1]&&!ft[2]&&!ft[3])return Ft;if(ft[0]&&ft[1]&&ft[2]&&ft[3])return i&&(Ft=lt(Nt,At,Ht)||Ft),Ft;var pt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Dt){if(ft[Dt[0]]&&ft[Dt[1]]&&ft[Dt[2]]&&!ft[Dt[3]]){var Ut=At[Dt[0]],$t=At[Dt[1]],re=At[Dt[2]],Be=At[Dt[3]];if(i)Ft=at(Nt,[Ut,$t,re],[Ht[Dt[0]],Ht[Dt[1]],Ht[Dt[2]]])||Ft;else{var We=dt(Be,Ut,St,kt),me=dt(Be,$t,St,kt),Se=dt(Be,re,St,kt);Ft=at(null,[We,me,Se],[-1,-1,-1])||Ft}pt=!0}}),pt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Dt){if(ft[Dt[0]]&&ft[Dt[1]]&&!ft[Dt[2]]&&!ft[Dt[3]]){var Ut=At[Dt[0]],$t=At[Dt[1]],re=At[Dt[2]],Be=At[Dt[3]],We=dt(re,Ut,St,kt),me=dt(re,$t,St,kt),Se=dt(Be,$t,St,kt),je=dt(Be,Ut,St,kt);i?(Ft=at(Nt,[Ut,je,We],[Ht[Dt[0]],-1,-1])||Ft,Ft=at(Nt,[$t,me,Se],[Ht[Dt[1]],-1,-1])||Ft):Ft=tt(null,[We,me,Se,je],[-1,-1,-1,-1])||Ft,pt=!0}}),pt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Dt){if(ft[Dt[0]]&&!ft[Dt[1]]&&!ft[Dt[2]]&&!ft[Dt[3]]){var Ut=At[Dt[0]],$t=At[Dt[1]],re=At[Dt[2]],Be=At[Dt[3]],We=dt($t,Ut,St,kt),me=dt(re,Ut,St,kt),Se=dt(Be,Ut,St,kt);i?(Ft=at(Nt,[Ut,We,me],[Ht[Dt[0]],-1,-1])||Ft,Ft=at(Nt,[Ut,me,Se],[Ht[Dt[0]],-1,-1])||Ft,Ft=at(Nt,[Ut,Se,We],[Ht[Dt[0]],-1,-1])||Ft):Ft=at(null,[We,me,Se],[-1,-1,-1])||Ft,pt=!0}}),Ft}function Ct(Nt,Ht,St,kt,Ft,At,ft,pt,Dt,Ut,$t){var re=!1;return c&&(K(Nt,"A")&&(re=xt(null,[Ht,St,kt,At],Ut,$t)||re),K(Nt,"B")&&(re=xt(null,[St,kt,Ft,Dt],Ut,$t)||re),K(Nt,"C")&&(re=xt(null,[St,At,ft,Dt],Ut,$t)||re),K(Nt,"D")&&(re=xt(null,[kt,At,pt,Dt],Ut,$t)||re),K(Nt,"E")&&(re=xt(null,[St,kt,At,Dt],Ut,$t)||re)),i&&(re=xt(Nt,[St,kt,At,Dt],Ut,$t)||re),re}function wt(Nt,Ht,St,kt,Ft,At,ft,pt){return[pt[0]===!0?!0:zt(Nt,Mt([Ht,St,kt]),[Ht,St,kt],At,ft),pt[1]===!0?!0:zt(Nt,Mt([kt,Ft,Ht]),[kt,Ft,Ht],At,ft)]}function Rt(Nt,Ht,St,kt,Ft,At,ft,pt,Dt){return pt?wt(Nt,Ht,St,Ft,kt,At,ft,Dt):wt(Nt,St,Ft,kt,Ht,At,ft,Dt)}function Tt(Nt,Ht,St,kt,Ft,At,ft){var pt=!1,Dt,Ut,$t,re,Be=function(){pt=zt(Nt,[Dt,Ut,$t],[-1,-1,-1],Ft,At)||pt,pt=zt(Nt,[$t,re,Dt],[-1,-1,-1],Ft,At)||pt},We=ft[0],me=ft[1],Se=ft[2];return We&&(Dt=Q(Mt([k(Ht,St-0,kt-0)])[0],Mt([k(Ht-1,St-0,kt-0)])[0],We),Ut=Q(Mt([k(Ht,St-0,kt-1)])[0],Mt([k(Ht-1,St-0,kt-1)])[0],We),$t=Q(Mt([k(Ht,St-1,kt-1)])[0],Mt([k(Ht-1,St-1,kt-1)])[0],We),re=Q(Mt([k(Ht,St-1,kt-0)])[0],Mt([k(Ht-1,St-1,kt-0)])[0],We),Be()),me&&(Dt=Q(Mt([k(Ht-0,St,kt-0)])[0],Mt([k(Ht-0,St-1,kt-0)])[0],me),Ut=Q(Mt([k(Ht-0,St,kt-1)])[0],Mt([k(Ht-0,St-1,kt-1)])[0],me),$t=Q(Mt([k(Ht-1,St,kt-1)])[0],Mt([k(Ht-1,St-1,kt-1)])[0],me),re=Q(Mt([k(Ht-1,St,kt-0)])[0],Mt([k(Ht-1,St-1,kt-0)])[0],me),Be()),Se&&(Dt=Q(Mt([k(Ht-0,St-0,kt)])[0],Mt([k(Ht-0,St-0,kt-1)])[0],Se),Ut=Q(Mt([k(Ht-0,St-1,kt)])[0],Mt([k(Ht-0,St-1,kt-1)])[0],Se),$t=Q(Mt([k(Ht-1,St-1,kt)])[0],Mt([k(Ht-1,St-1,kt-1)])[0],Se),re=Q(Mt([k(Ht-1,St-0,kt)])[0],Mt([k(Ht-1,St-0,kt-1)])[0],Se),Be()),pt}function Bt(Nt,Ht,St,kt,Ft,At,ft,pt,Dt,Ut,$t,re){var Be=Nt;return re?(c&&Nt==="even"&&(Be=null),Ct(Be,Ht,St,kt,Ft,At,ft,pt,Dt,Ut,$t)):(c&&Nt==="odd"&&(Be=null),Ct(Be,Dt,pt,ft,At,Ft,kt,St,Ht,Ut,$t))}function Gt(Nt,Ht,St,kt,Ft){for(var At=[],ft=0,pt=0;pt<Ht.length;pt++)for(var Dt=Ht[pt],Ut=1;Ut<E;Ut++)for(var $t=1;$t<a;$t++)At.push(Rt(Nt,k(Dt,$t-1,Ut-1),k(Dt,$t-1,Ut),k(Dt,$t,Ut-1),k(Dt,$t,Ut),St,kt,(Dt+$t+Ut)%2,Ft&&Ft[ft]?Ft[ft]:[])),ft++;return At}function te(Nt,Ht,St,kt,Ft){for(var At=[],ft=0,pt=0;pt<Ht.length;pt++)for(var Dt=Ht[pt],Ut=1;Ut<M;Ut++)for(var $t=1;$t<E;$t++)At.push(Rt(Nt,k(Ut-1,Dt,$t-1),k(Ut,Dt,$t-1),k(Ut-1,Dt,$t),k(Ut,Dt,$t),St,kt,(Ut+Dt+$t)%2,Ft&&Ft[ft]?Ft[ft]:[])),ft++;return At}function Wt(Nt,Ht,St,kt,Ft){for(var At=[],ft=0,pt=0;pt<Ht.length;pt++)for(var Dt=Ht[pt],Ut=1;Ut<a;Ut++)for(var $t=1;$t<M;$t++)At.push(Rt(Nt,k($t-1,Ut-1,Dt),k($t-1,Ut,Dt),k($t,Ut-1,Dt),k($t,Ut,Dt),St,kt,($t+Ut+Dt)%2,Ft&&Ft[ft]?Ft[ft]:[])),ft++;return At}function jt(Nt,Ht,St){for(var kt=1;kt<E;kt++)for(var Ft=1;Ft<a;Ft++)for(var At=1;At<M;At++)Bt(Nt,k(At-1,Ft-1,kt-1),k(At-1,Ft-1,kt),k(At-1,Ft,kt-1),k(At-1,Ft,kt),k(At,Ft-1,kt-1),k(At,Ft-1,kt),k(At,Ft,kt-1),k(At,Ft,kt),Ht,St,(At+Ft+kt)%2)}function ie(Nt,Ht,St){i=!0,jt(Nt,Ht,St),i=!1}function ue(Nt,Ht,St){c=!0,jt(Nt,Ht,St),c=!1}function fe(Nt,Ht,St,kt,Ft,At){for(var ft=[],pt=0,Dt=0;Dt<Ht.length;Dt++)for(var Ut=Ht[Dt],$t=1;$t<E;$t++)for(var re=1;re<a;re++)ft.push(Tt(Nt,Ut,re,$t,St,kt,Ft[Dt],At&&At[pt]?At[pt]:[])),pt++;return ft}function pe(Nt,Ht,St,kt,Ft,At){for(var ft=[],pt=0,Dt=0;Dt<Ht.length;Dt++)for(var Ut=Ht[Dt],$t=1;$t<M;$t++)for(var re=1;re<E;re++)ft.push(Tt(Nt,$t,Ut,re,St,kt,Ft[Dt],At&&At[pt]?At[pt]:[])),pt++;return ft}function Te(Nt,Ht,St,kt,Ft,At){for(var ft=[],pt=0,Dt=0;Dt<Ht.length;Dt++)for(var Ut=Ht[Dt],$t=1;$t<a;$t++)for(var re=1;re<M;re++)ft.push(Tt(Nt,re,$t,Ut,St,kt,Ft[Dt],At&&At[pt]?At[pt]:[])),pt++;return ft}function Qt(Nt,Ht){for(var St=[],kt=Nt;kt<Ht;kt++)St.push(kt);return St}function Pt(){for(var Nt=0;Nt<M;Nt++)for(var Ht=0;Ht<a;Ht++)for(var St=0;St<E;St++){var kt=k(Nt,Ht,St);ot(f._x[kt],f._y[kt],f._z[kt],f._value[kt])}}function Ot(){et(),Pt();var Nt=null;if(g&&T&&(J(T),ie(Nt,z,B)),u&&h){J(h);for(var Ht=f.surface.pattern,St=f.surface.count,kt=0;kt<St;kt++){var Ft=St===1?.5:kt/(St-1),At=(1-Ft)*z+Ft*B,ft=Math.abs(At-I),pt=Math.abs(At-O),Dt=ft>pt?[I,At]:[At,O];ue(Ht,Dt[0],Dt[1])}}var Ut=[[Math.min(z,O),Math.max(z,O)],[Math.min(I,B),Math.max(I,B)]];["x","y","z"].forEach(function($t){for(var re=[],Be=0;Be<Ut.length;Be++){var We=0,me=Ut[Be][0],Se=Ut[Be][1],je=f.slices[$t];if(je.show&&je.fill){J(je.fill);var vr=[],he=[],Ye=[];if(je.locations.length)for(var Qe=0;Qe<je.locations.length;Qe++){var mr=p(je.locations[Qe],$t==="x"?C:$t==="y"?y:S);mr.distRatio===0?vr.push(mr.id):mr.id>0&&(he.push(mr.id),$t==="x"?Ye.push([mr.distRatio,0,0]):$t==="y"?Ye.push([0,mr.distRatio,0]):Ye.push([0,0,mr.distRatio]))}else $t==="x"?vr=Qt(1,M-1):$t==="y"?vr=Qt(1,a-1):vr=Qt(1,E-1);he.length>0&&($t==="x"?re[We]=fe(Nt,he,me,Se,Ye,re[We]):$t==="y"?re[We]=pe(Nt,he,me,Se,Ye,re[We]):re[We]=Te(Nt,he,me,Se,Ye,re[We]),We++),vr.length>0&&($t==="x"?re[We]=Gt(Nt,vr,me,Se,re[We]):$t==="y"?re[We]=te(Nt,vr,me,Se,re[We]):re[We]=Wt(Nt,vr,me,Se,re[We]),We++)}var ir=f.caps[$t];ir.show&&ir.fill&&(J(ir.fill),$t==="x"?re[We]=Gt(Nt,[0,M-1],me,Se,re[We]):$t==="y"?re[We]=te(Nt,[0,a-1],me,Se,re[We]):re[We]=Wt(Nt,[0,E-1],me,Se,re[We]),We++)}}),d===0&&et(),f._meshX=F,f._meshY=_,f._meshZ=N,f._meshIntensity=G,f._Xs=C,f._Ys=y,f._Zs=S}return Ot(),f}function l(f,u){var g=f.glplot.gl,h=b({gl:g}),T=new r(f,h,u.uid);return h._trace=T,T.update(u),f.glplot.add(h),T}j.exports={findNearestOnAxis:p,generateIsoMeshes:n,createIsosurfaceTrace:l}},70548:function(j,V,t){var b=t(3400),P=t(24040),o=t(50048),L=t(27260);function A(p,r,e,s){function n(l,f){return b.coerce(p,r,o,l,f)}v(p,r,e,s,n)}function v(p,r,e,s,n){var l=n("isomin"),f=n("isomax");f!=null&&l!==void 0&&l!==null&&l>f&&(r.isomin=null,r.isomax=null);var u=n("x"),g=n("y"),h=n("z"),T=n("value");if(!u||!u.length||!g||!g.length||!h||!h.length||!T||!T.length){r.visible=!1;return}var c=P.getComponentMethod("calendars","handleTraceDefaults");c(p,r,["x","y","z"],s),n("valuehoverformat"),["x","y","z"].forEach(function(w){n(w+"hoverformat");var C="caps."+w,y=n(C+".show");y&&n(C+".fill");var S="slices."+w,M=n(S+".show");M&&(n(S+".fill"),n(S+".locations"))});var i=n("spaceframe.show");i&&n("spaceframe.fill");var d=n("surface.show");d&&(n("surface.count"),n("surface.fill"),n("surface.pattern"));var x=n("contour.show");x&&(n("contour.color"),n("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(w){n(w)}),L(p,r,s,n,{prefix:"",cLetter:"c"}),r._length=null}j.exports={supplyDefaults:A,supplyIsoDefaults:v}},6296:function(j,V,t){j.exports={attributes:t(50048),supplyDefaults:t(70548).supplyDefaults,calc:t(62624),colorbar:{min:"cmin",max:"cmax"},plot:t(31460).createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},52948:function(j,V,t){var b=t(49084),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(16716),A=t(45464),v=t(92880).extendFlat;j.exports=v({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:o({editType:"calc"}),xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},b("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:L.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:v({},L.contours.x.show,{}),color:L.contours.x.color,width:L.contours.x.width,editType:"calc"},lightposition:{x:v({},L.lightposition.x,{dflt:1e5}),y:v({},L.lightposition.y,{dflt:1e5}),z:v({},L.lightposition.z,{dflt:0}),editType:"calc"},lighting:v({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},L.lighting),hoverinfo:v({},A.hoverinfo,{editType:"calc"}),showlegend:v({},A.showlegend,{dflt:!1})})},1876:function(j,V,t){var b=t(47128);j.exports=function(o,L){L.intensity&&b(o,L,{vals:L.intensity,containerStr:"",cLetter:"c"})}},576:function(j,V,t){var b=t(67792).gl_mesh3d,P=t(67792).delaunay_triangulate,o=t(67792).alpha_shape,L=t(67792).convex_hull,A=t(33040).parseColorScale,v=t(3400).isArrayOrTypedArray,p=t(43080),r=t(8932).extractOpts,e=t(52094);function s(c,i,d){this.scene=c,this.uid=d,this.mesh=i,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var n=s.prototype;n.handlePick=function(c){if(c.object===this.mesh){var i=c.index=c.data.index;c.data._cellCenter?c.traceCoordinate=c.data.dataCoordinate:c.traceCoordinate=[this.data.x[i],this.data.y[i],this.data.z[i]];var d=this.data.hovertext||this.data.text;return v(d)&&d[i]!==void 0?c.textLabel=d[i]:d&&(c.textLabel=d),!0}};function l(c){for(var i=[],d=c.length,x=0;x<d;x++)i[x]=p(c[x]);return i}function f(c,i,d,x){for(var w=[],C=i.length,y=0;y<C;y++)w[y]=c.d2l(i[y],0,x)*d;return w}function u(c){for(var i=[],d=c.length,x=0;x<d;x++)i[x]=Math.round(c[x]);return i}function g(c,i){for(var d=["x","y","z"].indexOf(c),x=[],w=i.length,C=0;C<w;C++)x[C]=[i[C][(d+1)%3],i[C][(d+2)%3]];return P(x)}function h(c,i){for(var d=c.length,x=0;x<d;x++)if(c[x]<=-.5||c[x]>=i-.5)return!1;return!0}n.update=function(c){var i=this.scene,d=i.fullSceneLayout;this.data=c;var x=c.x.length,w=e(f(d.xaxis,c.x,i.dataScale[0],c.xcalendar),f(d.yaxis,c.y,i.dataScale[1],c.ycalendar),f(d.zaxis,c.z,i.dataScale[2],c.zcalendar)),C;if(c.i&&c.j&&c.k){if(c.i.length!==c.j.length||c.j.length!==c.k.length||!h(c.i,x)||!h(c.j,x)||!h(c.k,x))return;C=e(u(c.i),u(c.j),u(c.k))}else c.alphahull===0?C=L(w):c.alphahull>0?C=o(c.alphahull,w):C=g(c.delaunayaxis,w);var y={positions:w,cells:C,lightPosition:[c.lightposition.x,c.lightposition.y,c.lightposition.z],ambient:c.lighting.ambient,diffuse:c.lighting.diffuse,specular:c.lighting.specular,roughness:c.lighting.roughness,fresnel:c.lighting.fresnel,vertexNormalsEpsilon:c.lighting.vertexnormalsepsilon,faceNormalsEpsilon:c.lighting.facenormalsepsilon,opacity:c.opacity,contourEnable:c.contour.show,contourColor:p(c.contour.color).slice(0,3),contourWidth:c.contour.width,useFacetNormals:c.flatshading};if(c.intensity){var S=r(c);this.color="#fff";var M=c.intensitymode;y[M+"Intensity"]=c.intensity,y[M+"IntensityBounds"]=[S.min,S.max],y.colormap=A(c)}else c.vertexcolor?(this.color=c.vertexcolor[0],y.vertexColors=l(c.vertexcolor)):c.facecolor?(this.color=c.facecolor[0],y.cellColors=l(c.facecolor)):(this.color=c.color,y.meshColor=p(c.color));this.mesh.update(y)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function T(c,i){var d=c.glplot.gl,x=b({gl:d}),w=new s(c,x,i.uid);return x._trace=w,w.update(i),c.glplot.add(x),w}j.exports=T},74212:function(j,V,t){var b=t(24040),P=t(3400),o=t(27260),L=t(52948);j.exports=function(v,p,r,e){function s(g,h){return P.coerce(v,p,L,g,h)}function n(g){var h=g.map(function(T){var c=s(T);return c&&P.isArrayOrTypedArray(c)?c:null});return h.every(function(T){return T&&T.length===h[0].length})&&h}var l=n(["x","y","z"]);if(!l){p.visible=!1;return}if(n(["i","j","k"]),p.i&&(!p.j||!p.k)||p.j&&(!p.k||!p.i)||p.k&&(!p.i||!p.j)){p.visible=!1;return}var f=b.getComponentMethod("calendars","handleTraceDefaults");f(v,p,["x","y","z"],e),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(g){s(g)});var u=s("contour.show");u&&(s("contour.color"),s("contour.width")),"intensity"in v?(s("intensity"),s("intensitymode"),o(v,p,e,s,{prefix:"",cLetter:"c"})):(p.showscale=!1,"facecolor"in v?s("facecolor"):"vertexcolor"in v?s("vertexcolor"):s("color",r)),s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),p._length=null}},7404:function(j,V,t){j.exports={attributes:t(52948),supplyDefaults:t(74212),calc:t(1876),colorbar:{min:"cmin",max:"cmax"},plot:t(576),moduleType:"trace",name:"mesh3d",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},20279:function(j,V,t){var b=t(3400).extendFlat,P=t(52904),o=t(29736).axisHoverFormat,L=t(98192).u,A=t(55756),v=t(48164),p=v.INCREASING.COLOR,r=v.DECREASING.COLOR,e=P.line;function s(n){return{line:{color:b({},e.color,{dflt:n}),width:e.width,dash:L,editType:"style"},editType:"style"}}j.exports={xperiod:P.xperiod,xperiod0:P.xperiod0,xperiodalignment:P.xperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:b({},e.width,{}),dash:b({},L,{}),editType:"style"},increasing:s(p),decreasing:s(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:b({},A.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}}),zorder:P.zorder}},42812:function(j,V,t){var b=t(3400),P=b._,o=t(54460),L=t(1220),A=t(39032).BADNUM;function v(s,n){var l=o.getFromId(s,n.xaxis),f=o.getFromId(s,n.yaxis),u=e(s,l,n),g=n._minDiff;n._minDiff=null;var h=n._origX;n._origX=null;var T=n._xcalc;n._xcalc=null;var c=r(s,n,h,T,f,p);return n._extremes[l._id]=o.findExtremes(l,T,{vpad:g/2}),c.length?(b.extendFlat(c[0].t,{wHover:g/2,tickLen:u}),c):[{t:{empty:!0}}]}function p(s,n,l,f){return{o:s,h:n,l,c:f}}function r(s,n,l,f,u,g){for(var h=u.makeCalcdata(n,"open"),T=u.makeCalcdata(n,"high"),c=u.makeCalcdata(n,"low"),i=u.makeCalcdata(n,"close"),d=b.isArrayOrTypedArray(n.text),x=b.isArrayOrTypedArray(n.hovertext),w=!0,C=null,y=!!n.xperiodalignment,S=[],M=0;M<f.length;M++){var a=f[M],E=h[M],m=T[M],k=c[M],I=i[M];if(a!==A&&E!==A&&m!==A&&k!==A&&I!==A){I===E?C!==null&&I!==C&&(w=I>C):w=I>E,C=I;var O=g(E,m,k,I);O.pos=a,O.yc=(E+I)/2,O.i=M,O.dir=w?"increasing":"decreasing",O.x=O.pos,O.y=[k,m],y&&(O.orig_p=l[M]),d&&(O.tx=n.text[M]),x&&(O.htx=n.hovertext[M]),S.push(O)}else S.push({pos:a,empty:!0})}return n._extremes[u._id]=o.findExtremes(u,b.concat(c,T),{padded:!0}),S.length&&(S[0].t={labels:{open:P(s,"open:")+" ",high:P(s,"high:")+" ",low:P(s,"low:")+" ",close:P(s,"close:")+" "}}),S}function e(s,n,l){var f=l._minDiff;if(!f){var u=s._fullData,g=[];f=1/0;var h;for(h=0;h<u.length;h++){var T=u[h];if(T.type==="ohlc"&&T.visible===!0&&T.xaxis===n._id){g.push(T);var c=n.makeCalcdata(T,"x");T._origX=c;var i=L(l,n,"x",c).vals;T._xcalc=i;var d=b.distinctVals(i).minDiff;d&&isFinite(d)&&(f=Math.min(f,d))}}for(f===1/0&&(f=1),h=0;h<g.length;h++)g[h]._minDiff=f}return f*l.tickwidth}j.exports={calc:v,calcCommon:r}},23860:function(j,V,t){var b=t(3400),P=t(52744),o=t(31147),L=t(20279);j.exports=function(p,r,e,s){function n(f,u){return b.coerce(p,r,L,f,u)}var l=P(p,r,n,s);if(!l){r.visible=!1;return}o(p,r,s,n,{x:!0}),n("xhoverformat"),n("yhoverformat"),n("line.width"),n("line.dash"),A(p,r,n,"increasing"),A(p,r,n,"decreasing"),n("text"),n("hovertext"),n("tickwidth"),s._requestRangeslider[r.xaxis]=!0,n("zorder")};function A(v,p,r,e){r(e+".line.color"),r(e+".line.width",p.line.width),r(e+".line.dash",p.line.dash)}},18720:function(j,V,t){var b=t(54460),P=t(3400),o=t(93024),L=t(76308),A=t(3400).fillText,v=t(48164),p={increasing:v.INCREASING.SYMBOL,decreasing:v.DECREASING.SYMBOL};function r(l,f,u,g){var h=l.cd,T=h[0].trace;return T.hoverlabel.split?s(l,f,u,g):n(l,f,u,g)}function e(l,f,u,g){var h=l.cd,T=l.xa,c=h[0].trace,i=h[0].t,d=c.type,x=d==="ohlc"?"l":"min",w=d==="ohlc"?"h":"max",C,y,S=i.bPos||0,M=function(G){return G.pos+S-f},a=i.bdPos||i.tickLen,E=i.wHover,m=Math.min(1,a/Math.abs(T.r2c(T.range[1])-T.r2c(T.range[0])));C=l.maxHoverDistance-m,y=l.maxSpikeDistance-m;function k(G){var X=M(G);return o.inbox(X-E,X+E,C)}function I(G){var X=G[x],$=G[w];return X===$||o.inbox(X-u,$-u,C)}function O(G){return(k(G)+I(G))/2}var z=o.getDistanceFunction(g,k,I,O);if(o.getClosest(h,z,l),l.index===!1)return null;var B=h[l.index];if(B.empty)return null;var F=B.dir,_=c[F],N=_.line.color;return L.opacity(N)&&_.line.width?l.color=N:l.color=_.fillcolor,l.x0=T.c2p(B.pos+S-a,!0),l.x1=T.c2p(B.pos+S+a,!0),l.xLabelVal=B.orig_p!==void 0?B.orig_p:B.pos,l.spikeDistance=O(B)*y/C,l.xSpike=T.c2p(B.pos,!0),l}function s(l,f,u,g){var h=l.cd,T=l.ya,c=h[0].trace,i=h[0].t,d=[],x=e(l,f,u,g);if(!x)return[];var w=x.index,C=h[w],y=C.hi||c.hoverinfo,S=y.split("+"),M=y==="all",a=M||S.indexOf("y")!==-1;if(!a)return[];for(var E=["high","open","close","low"],m={},k=0;k<E.length;k++){var I=E[k],O=c[I][x.index],z=T.c2p(O,!0),B;O in m?(B=m[O],B.yLabel+="<br>"+i.labels[I]+b.hoverLabelText(T,O,c.yhoverformat)):(B=P.extendFlat({},x),B.y0=B.y1=z,B.yLabelVal=O,B.yLabel=i.labels[I]+b.hoverLabelText(T,O,c.yhoverformat),B.name="",d.push(B),m[O]=B)}return d}function n(l,f,u,g){var h=l.cd,T=l.ya,c=h[0].trace,i=h[0].t,d=e(l,f,u,g);if(!d)return[];var x=d.index,w=h[x],C=d.index=w.i,y=w.dir;function S(O){return i.labels[O]+b.hoverLabelText(T,c[O][C],c.yhoverformat)}var M=w.hi||c.hoverinfo,a=M.split("+"),E=M==="all",m=E||a.indexOf("y")!==-1,k=E||a.indexOf("text")!==-1,I=m?[S("open"),S("high"),S("low"),S("close")+"  "+p[y]]:[];return k&&A(w,c,I),d.extraText=I.join("<br>"),d.y0=d.y1=T.c2p(w.yc,!0),[d]}j.exports={hoverPoints:r,hoverSplit:s,hoverOnPoints:n}},65456:function(j,V,t){j.exports={moduleType:"trace",name:"ohlc",basePlotModule:t(57952),categories:["cartesian","svg","showLegend"],meta:{},attributes:t(20279),supplyDefaults:t(23860),calc:t(42812).calc,plot:t(36664),style:t(14008),hoverPoints:t(18720).hoverPoints,selectPoints:t(97384)}},52744:function(j,V,t){var b=t(24040),P=t(3400);j.exports=function(L,A,v,p){var r=v("x"),e=v("open"),s=v("high"),n=v("low"),l=v("close");v("hoverlabel.split");var f=b.getComponentMethod("calendars","handleTraceDefaults");if(f(L,A,["x"],p),!!(e&&s&&n&&l)){var u=Math.min(e.length,s.length,n.length,l.length);return r&&(u=Math.min(u,P.minRowLength(r))),A._length=u,u}}},36664:function(j,V,t){var b=t(33428),P=t(3400);j.exports=function(L,A,v,p){var r=A.yaxis,e=A.xaxis,s=!!e.rangebreaks;P.makeTraceGroups(p,v,"trace ohlc").each(function(n){var l=b.select(this),f=n[0],u=f.t,g=f.trace;if(g.visible!==!0||u.empty){l.remove();return}var h=u.tickLen,T=l.selectAll("path").data(P.identity);T.enter().append("path"),T.exit().remove(),T.attr("d",function(c){if(c.empty)return"M0,0Z";var i=e.c2p(c.pos-h,!0),d=e.c2p(c.pos+h,!0),x=s?(i+d)/2:e.c2p(c.pos,!0),w=r.c2p(c.o,!0),C=r.c2p(c.h,!0),y=r.c2p(c.l,!0),S=r.c2p(c.c,!0);return"M"+i+","+w+"H"+x+"M"+x+","+C+"V"+y+"M"+d+","+S+"H"+x})})}},97384:function(j){j.exports=function(t,b){var P=t.cd,o=t.xaxis,L=t.yaxis,A=[],v,p=P[0].t.bPos||0;if(b===!1)for(v=0;v<P.length;v++)P[v].selected=0;else for(v=0;v<P.length;v++){var r=P[v];b.contains([o.c2p(r.pos+p),L.c2p(r.yc)],null,r.i,t)?(A.push({pointNumber:r.i,x:o.c2d(r.pos),y:L.c2d(r.yc)}),r.selected=1):r.selected=0}return A}},14008:function(j,V,t){var b=t(33428),P=t(43616),o=t(76308);j.exports=function(A,v,p){var r=p||b.select(A).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(e){return e[0].trace.opacity}),r.each(function(e){var s=e[0].trace;b.select(this).selectAll("path").each(function(n){if(!n.empty){var l=s[n.dir].line;b.select(this).style("fill","none").call(o.stroke,l.color).call(P.dashLine,l.dash,l.width).style("opacity",s.selectedpoints&&!n.selected?.3:1)}})})}},72140:function(j,V,t){var b=t(92880).extendFlat,P=t(45464),o=t(25376),L=t(49084),A=t(21776).Ks,v=t(86968).u,p=b({editType:"calc"},L("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:A({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});j.exports={domain:v({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:b({},P.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:A({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:o({editType:"calc"}),tickfont:o({autoShadowDflt:!0,editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:p,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legend:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},91800:function(j,V,t){var b=t(84888)._M,P=t(60268),o="parcats";V.name=o,V.plot=function(L,A,v,p){var r=b(L.calcdata,o);if(r.length){var e=r[0];P(L,e,v,p)}},V.clean=function(L,A,v,p){var r=p._has&&p._has("parcats"),e=A._has&&A._has("parcats");r&&!e&&p._paperdiv.selectAll(".parcats").remove()}},69136:function(j,V,t){var b=t(71688).wrap,P=t(94288).hasColorscale,o=t(47128),L=t(68944),A=t(43616),v=t(3400),p=t(38248);j.exports=function(i,d){var x=v.filterVisible(d.dimensions);if(x.length===0)return[];var w=x.map(function(nt){var Z;if(nt.categoryorder==="trace")Z=null;else if(nt.categoryorder==="array")Z=nt.categoryarray;else{Z=L(nt.values);for(var Q=!0,W=0;W<Z.length;W++)if(!p(Z[W])){Q=!1;break}Z.sort(Q?v.sorterAsc:void 0),nt.categoryorder==="category descending"&&(Z=Z.reverse())}return u(nt.values,Z)}),C,y,S;v.isArrayOrTypedArray(d.counts)?C=d.counts:C=[d.counts],g(x),x.forEach(function(nt,Z){h(nt,w[Z])});var M=d.line,a;M?(P(d,"line")&&o(i,d,{vals:d.line.color,containerStr:"line",cLetter:"c"}),a=A.tryColorscale(M)):a=v.identity;function E(nt){var Z,Q;return v.isArrayOrTypedArray(M.color)?(Z=M.color[nt%M.color.length],Q=Z):Z=M.color,{color:a(Z),rawColor:Q}}var m=x[0].values.length,k={},I=w.map(function(nt){return nt.inds});S=0;var O,z;for(O=0;O<m;O++){var B=[];for(z=0;z<I.length;z++)B.push(I[z][O]);y=C[O%C.length],S+=y;var F=E(O),_=B+"-"+F.rawColor;k[_]===void 0&&(k[_]=l(B,F.color,F.rawColor)),f(k[_],O,y)}var N=x.map(function(nt,Z){return e(Z,nt._index,nt._displayindex,nt.label,S)});for(O=0;O<m;O++)for(y=C[O%C.length],z=0;z<N.length;z++){var G=N[z].containerInd,X=w[z].inds[O],$=N[z].categories;if($[X]===void 0){var et=d.dimensions[G]._categoryarray[X],ot=d.dimensions[G]._ticktext[X];$[X]=s(z,X,et,ot)}n($[X],O,y)}return b(r(N,k,S))};function r(c,i,d){var x=c.map(function(w){return w.categories.length}).reduce(function(w,C){return Math.max(w,C)});return{dimensions:c,paths:i,trace:void 0,maxCats:x,count:d}}function e(c,i,d,x,w){return{dimensionInd:c,containerInd:i,displayInd:d,dimensionLabel:x,count:w,categories:[],dragX:null}}function s(c,i,d,x){return{dimensionInd:c,categoryInd:i,categoryValue:d,displayInd:i,categoryLabel:x,valueInds:[],count:0,dragY:null}}function n(c,i,d){c.valueInds.push(i),c.count+=d}function l(c,i,d){return{categoryInds:c,color:i,rawColor:d,valueInds:[],count:0}}function f(c,i,d){c.valueInds.push(i),c.count+=d}function u(c,i){i==null?i=[]:i=i.map(function(a){return a});var d={},x={},w=[];i.forEach(function(a,E){d[a]=0,x[a]=E});for(var C=0;C<c.length;C++){var y=c[C],S;d[y]===void 0?(d[y]=1,S=i.push(y)-1,x[y]=S):(d[y]++,S=x[y]),w.push(S)}var M=i.map(function(a){return d[a]});return{uniqueValues:i,uniqueCounts:M,inds:w}}function g(c){var i=c.map(function(x){return x.displayindex}),d;if(T(i))for(d=0;d<c.length;d++)c[d]._displayindex=c[d].displayindex;else for(d=0;d<c.length;d++)c[d]._displayindex=d}function h(c,i){c._categoryarray=i.uniqueValues,c.ticktext===null||c.ticktext===void 0?c._ticktext=[]:c._ticktext=c.ticktext.slice();for(var d=c._ticktext.length;d<i.uniqueValues.length;d++)c._ticktext.push(i.uniqueValues[d])}function T(c){for(var i=new Array(c.length),d=0;d<c.length;d++){if(c[d]<0||c[d]>=c.length||i[c[d]]!==void 0)return!1;i[c[d]]=!0}return!0}},76671:function(j,V,t){var b=t(3400),P=t(94288).hasColorscale,o=t(27260),L=t(86968).Q,A=t(51272),v=t(72140),p=t(26284),r=t(38116).isTypedArraySpec;function e(n,l,f,u,g){g("line.shape"),g("line.hovertemplate");var h=g("line.color",u.colorway[0]);if(P(n,"line")&&b.isArrayOrTypedArray(h)){if(h.length)return g("line.colorscale"),o(n,l,u,g,{prefix:"line.",cLetter:"c"}),h.length;l.line.color=f}return 1/0}function s(n,l){function f(d,x){return b.coerce(n,l,v.dimensions,d,x)}var u=f("values"),g=f("visible");if(u&&u.length||(g=l.visible=!1),g){f("label"),f("displayindex",l._index);var h=n.categoryarray,T=b.isArrayOrTypedArray(h)&&h.length>0||r(h),c;T&&(c="array");var i=f("categoryorder",c);i==="array"?(f("categoryarray"),f("ticktext")):(delete n.categoryarray,delete n.ticktext),!T&&i==="array"&&(l.categoryorder="trace")}}j.exports=function(l,f,u,g){function h(d,x){return b.coerce(l,f,v,d,x)}var T=A(l,f,{name:"dimensions",handleItemDefaults:s}),c=e(l,f,u,g,h);L(f,g,h),(!Array.isArray(T)||!T.length)&&(f.visible=!1),p(f,T,"values",c),h("hoveron"),h("hovertemplate"),h("arrangement"),h("bundlecolors"),h("sortpaths"),h("counts");var i=g.font;b.coerceFont(h,"labelfont",i,{overrideDflt:{size:Math.round(i.size)}}),b.coerceFont(h,"tickfont",i,{autoShadowDflt:!0,overrideDflt:{size:Math.round(i.size/1.2)}})}},22020:function(j,V,t){j.exports={attributes:t(72140),supplyDefaults:t(76671),calc:t(69136),plot:t(60268),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:t(91800),categories:["noOpacity"],meta:{}}},51036:function(j,V,t){var b=t(33428),P=t(67756).Gz,o=t(36424),L=t(93024),A=t(3400),v=A.strTranslate,p=t(43616),r=t(49760),e=t(72736);function s(W,J,it,K){var H=J._context.staticPlot,at=W.map(et.bind(0,J,it)),tt=K.selectAll("g.parcatslayer").data([null]);tt.enter().append("g").attr("class","parcatslayer").style("pointer-events",H?"none":"all");var lt=tt.selectAll("g.trace.parcats").data(at,n),dt=lt.enter().append("g").attr("class","trace parcats");lt.attr("transform",function(Tt){return v(Tt.x,Tt.y)}),dt.append("g").attr("class","paths");var mt=lt.select("g.paths"),gt=mt.selectAll("path.path").data(function(Tt){return Tt.paths},n);gt.attr("fill",function(Tt){return Tt.model.color});var Mt=gt.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Tt){return Tt.model.color}).attr("fill-opacity",0);i(Mt),gt.attr("d",function(Tt){return Tt.svgD}),Mt.empty()||gt.sort(f),gt.exit().remove(),gt.on("mouseover",u).on("mouseout",g).on("click",c),dt.append("g").attr("class","dimensions");var Lt=lt.select("g.dimensions"),zt=Lt.selectAll("g.dimension").data(function(Tt){return Tt.dimensions},n);zt.enter().append("g").attr("class","dimension"),zt.attr("transform",function(Tt){return v(Tt.x,0)}),zt.exit().remove();var xt=zt.selectAll("g.category").data(function(Tt){return Tt.categories},n),Ct=xt.enter().append("g").attr("class","category");xt.attr("transform",function(Tt){return v(0,Tt.y)}),Ct.append("rect").attr("class","catrect").attr("pointer-events","none"),xt.select("rect.catrect").attr("fill","none").attr("width",function(Tt){return Tt.width}).attr("height",function(Tt){return Tt.height}),w(Ct);var wt=xt.selectAll("rect.bandrect").data(function(Tt){return Tt.bands},n);wt.each(function(){A.raiseToTop(this)}),wt.attr("fill",function(Tt){return Tt.color});var Rt=wt.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Tt){return Tt.color}).attr("fill-opacity",0);wt.attr("fill",function(Tt){return Tt.color}).attr("width",function(Tt){return Tt.width}).attr("height",function(Tt){return Tt.height}).attr("y",function(Tt){return Tt.y}).attr("cursor",function(Tt){return Tt.parcatsViewModel.arrangement==="fixed"?"default":Tt.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),y(Rt),wt.exit().remove(),Ct.append("text").attr("class","catlabel").attr("pointer-events","none"),xt.select("text.catlabel").attr("text-anchor",function(Tt){return l(Tt)?"start":"end"}).attr("alignment-baseline","middle").style("fill","rgb(0, 0, 0)").attr("x",function(Tt){return l(Tt)?Tt.width+5:-5}).attr("y",function(Tt){return Tt.height/2}).text(function(Tt){return Tt.model.categoryLabel}).each(function(Tt){p.font(b.select(this),Tt.parcatsViewModel.categorylabelfont),e.convertToTspans(b.select(this),J)}),Ct.append("text").attr("class","dimlabel"),xt.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Tt){return Tt.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Tt){return Tt.width/2}).attr("y",-5).text(function(Tt,Bt){return Bt===0?Tt.parcatsViewModel.model.dimensions[Tt.model.dimensionInd].dimensionLabel:null}).each(function(Tt){p.font(b.select(this),Tt.parcatsViewModel.labelfont)}),xt.selectAll("rect.bandrect").on("mouseover",z).on("mouseout",B),xt.exit().remove(),zt.call(b.behavior.drag().origin(function(Tt){return{x:Tt.x,y:0}}).on("dragstart",F).on("drag",_).on("dragend",N)),lt.each(function(Tt){Tt.traceSelection=b.select(this),Tt.pathSelection=b.select(this).selectAll("g.paths").selectAll("path.path"),Tt.dimensionSelection=b.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),lt.exit().remove()}j.exports=function(W,J,it,K){s(it,W,K,J)};function n(W){return W.key}function l(W){var J=W.parcatsViewModel.dimensions.length,it=W.parcatsViewModel.dimensions[J-1].model.dimensionInd;return W.model.dimensionInd===it}function f(W,J){return W.model.rawColor>J.model.rawColor?1:W.model.rawColor<J.model.rawColor?-1:0}function u(W){if(!W.parcatsViewModel.dragDimension&&W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){A.raiseToTop(this),d(b.select(this));var J=h(W),it=T(W);if(W.parcatsViewModel.graphDiv.emit("plotly_hover",{points:J,event:b.event,constraints:it}),W.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K=b.mouse(this)[0],H=W.parcatsViewModel.graphDiv,at=W.parcatsViewModel.trace,tt=H._fullLayout,lt=tt._paperdiv.node().getBoundingClientRect(),dt=W.parcatsViewModel.graphDiv.getBoundingClientRect(),mt,gt,Mt;for(Mt=0;Mt<W.leftXs.length-1;Mt++)if(W.leftXs[Mt]+W.dimWidths[Mt]-2<=K&&K<=W.leftXs[Mt+1]+2){var Lt=W.parcatsViewModel.dimensions[Mt],zt=W.parcatsViewModel.dimensions[Mt+1];mt=(Lt.x+Lt.width+zt.x)/2,gt=(W.topYs[Mt]+W.topYs[Mt+1]+W.height)/2;break}var xt=W.parcatsViewModel.x+mt,Ct=W.parcatsViewModel.y+gt,wt=r.mostReadable(W.model.color,["black","white"]),Rt=W.model.count,Tt=Rt/W.parcatsViewModel.model.count,Bt={countLabel:Rt,probabilityLabel:Tt.toFixed(3)},Gt=[];W.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Gt.push(["Count:",Bt.countLabel].join(" ")),W.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Gt.push(["P:",Bt.probabilityLabel].join(" "));var te=Gt.join("<br>"),Wt=b.mouse(H)[0];L.loneHover({trace:at,x:xt-lt.left+dt.left,y:Ct-lt.top+dt.top,text:te,color:W.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:wt,idealAlign:Wt<xt?"right":"left",hovertemplate:(at.line||{}).hovertemplate,hovertemplateLabels:Bt,eventData:[{data:at._input,fullData:at,count:Rt,probability:Tt}]},{container:tt._hoverlayer.node(),outerContainer:tt._paper.node(),gd:H})}}}function g(W){if(!W.parcatsViewModel.dragDimension&&(i(b.select(this)),L.loneUnhover(W.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),W.parcatsViewModel.pathSelection.sort(f),W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var J=h(W),it=T(W);W.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:J,event:b.event,constraints:it})}}function h(W){for(var J=[],it=G(W.parcatsViewModel),K=0;K<W.model.valueInds.length;K++){var H=W.model.valueInds[K];J.push({curveNumber:it,pointNumber:H})}return J}function T(W){for(var J={},it=W.parcatsViewModel.model.dimensions,K=0;K<it.length;K++){var H=it[K],at=H.categories[W.model.categoryInds[K]];J[H.containerInd]=at.categoryValue}return W.model.rawColor!==void 0&&(J.color=W.model.rawColor),J}function c(W){if(W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var J=h(W),it=T(W);W.parcatsViewModel.graphDiv.emit("plotly_click",{points:J,event:b.event,constraints:it})}}function i(W){W.attr("fill",function(J){return J.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function d(W){W.attr("fill-opacity",.8).attr("stroke",function(J){return r.mostReadable(J.model.color,["black","white"])}).attr("stroke-width",.3)}function x(W){W.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function w(W){W.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function C(W){W.attr("stroke","black").attr("stroke-width",1.5)}function y(W){W.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function S(W){var J=W.parcatsViewModel.pathSelection,it=W.categoryViewModel.model.dimensionInd,K=W.categoryViewModel.model.categoryInd;return J.filter(function(H){return H.model.categoryInds[it]===K&&H.model.color===W.color})}function M(W){var J=b.select(W.parentNode).selectAll("rect.bandrect");J.each(function(it){var K=S(it);d(K),K.each(function(){A.raiseToTop(this)})}),x(b.select(W.parentNode))}function a(W){var J=b.select(W).datum(),it=S(J);d(it),it.each(function(){A.raiseToTop(this)}),b.select(W.parentNode).selectAll("rect.bandrect").filter(function(K){return K.color===J.color}).each(function(){A.raiseToTop(this),C(b.select(this))})}function E(W,J,it){var K=b.select(W).datum(),H=K.categoryViewModel.model,at=K.parcatsViewModel.graphDiv,tt=b.select(W.parentNode).selectAll("rect.bandrect"),lt=[];tt.each(function(mt){var gt=S(mt);gt.each(function(Mt){Array.prototype.push.apply(lt,h(Mt))})});var dt={};dt[H.dimensionInd]=H.categoryValue,at.emit(J,{points:lt,event:it,constraints:dt})}function m(W,J,it){var K=b.select(W).datum(),H=K.categoryViewModel.model,at=K.parcatsViewModel.graphDiv,tt=S(K),lt=[];tt.each(function(mt){Array.prototype.push.apply(lt,h(mt))});var dt={};dt[H.dimensionInd]=H.categoryValue,K.rawColor!==void 0&&(dt.color=K.rawColor),at.emit(J,{points:lt,event:it,constraints:dt})}function k(W,J,it){W._fullLayout._calcInverseTransform(W);var K=W._fullLayout._invScaleX,H=W._fullLayout._invScaleY,at=b.select(it.parentNode).select("rect.catrect"),tt=at.node().getBoundingClientRect(),lt=at.datum(),dt=lt.parcatsViewModel,mt=dt.model.dimensions[lt.model.dimensionInd],gt=dt.trace,Mt=tt.top+tt.height/2,Lt,zt;dt.dimensions.length>1&&mt.displayInd===dt.dimensions.length-1?(Lt=tt.left,zt="left"):(Lt=tt.left+tt.width,zt="right");var xt=lt.model.count,Ct=lt.model.categoryLabel,wt=xt/lt.parcatsViewModel.model.count,Rt={countLabel:xt,categoryLabel:Ct,probabilityLabel:wt.toFixed(3)},Tt=[];lt.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Tt.push(["Count:",Rt.countLabel].join(" ")),lt.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Tt.push(["P("+Rt.categoryLabel+"):",Rt.probabilityLabel].join(" "));var Bt=Tt.join("<br>");return{trace:gt,x:K*(Lt-J.left),y:H*(Mt-J.top),text:Bt,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:zt,hovertemplate:gt.hovertemplate,hovertemplateLabels:Rt,eventData:[{data:gt._input,fullData:gt,count:xt,category:Ct,probability:wt}]}}function I(W,J,it){var K=[];return b.select(it.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var H=this;K.push(k(W,J,H))}),K}function O(W,J,it){W._fullLayout._calcInverseTransform(W);var K=W._fullLayout._invScaleX,H=W._fullLayout._invScaleY,at=it.getBoundingClientRect(),tt=b.select(it).datum(),lt=tt.categoryViewModel,dt=lt.parcatsViewModel,mt=dt.model.dimensions[lt.model.dimensionInd],gt=dt.trace,Mt=at.y+at.height/2,Lt,zt;dt.dimensions.length>1&&mt.displayInd===dt.dimensions.length-1?(Lt=at.left,zt="left"):(Lt=at.left+at.width,zt="right");var xt=lt.model.categoryLabel,Ct=tt.parcatsViewModel.model.count,wt=0;tt.categoryViewModel.bands.forEach(function(fe){fe.color===tt.color&&(wt+=fe.count)});var Rt=lt.model.count,Tt=0;dt.pathSelection.each(function(fe){fe.model.color===tt.color&&(Tt+=fe.model.count)});var Bt=wt/Ct,Gt=wt/Tt,te=wt/Rt,Wt={countLabel:wt,categoryLabel:xt,probabilityLabel:Bt.toFixed(3)},jt=[];lt.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&jt.push(["Count:",Wt.countLabel].join(" ")),lt.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(jt.push("P(color ∩ "+xt+"): "+Wt.probabilityLabel),jt.push("P("+xt+" | color): "+Gt.toFixed(3)),jt.push("P(color | "+xt+"): "+te.toFixed(3)));var ie=jt.join("<br>"),ue=r.mostReadable(tt.color,["black","white"]);return{trace:gt,x:K*(Lt-J.left),y:H*(Mt-J.top),text:ie,color:tt.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ue,fontSize:10,idealAlign:zt,hovertemplate:gt.hovertemplate,hovertemplateLabels:Wt,eventData:[{data:gt._input,fullData:gt,category:xt,count:Ct,probability:Bt,categorycount:Rt,colorcount:Tt,bandcolorcount:wt}]}}function z(W){if(!W.parcatsViewModel.dragDimension&&W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var J=b.mouse(this)[1];if(J<-1)return;var it=W.parcatsViewModel.graphDiv,K=it._fullLayout,H=K._paperdiv.node().getBoundingClientRect(),at=W.parcatsViewModel.hoveron,tt=this;if(at==="color"?(a(tt),m(tt,"plotly_hover",b.event)):(M(tt),E(tt,"plotly_hover",b.event)),W.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var lt;at==="category"?lt=k(it,H,tt):at==="color"?lt=O(it,H,tt):at==="dimension"&&(lt=I(it,H,tt)),lt&&L.loneHover(lt,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:it})}}}function B(W){var J=W.parcatsViewModel;if(!J.dragDimension&&(i(J.pathSelection),w(J.dimensionSelection.selectAll("g.category")),y(J.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),L.loneUnhover(J.graphDiv._fullLayout._hoverlayer.node()),J.pathSelection.sort(f),J.hoverinfoItems.indexOf("skip")===-1)){var it=W.parcatsViewModel.hoveron,K=this;it==="color"?m(K,"plotly_unhover",b.event):E(K,"plotly_unhover",b.event)}}function F(W){W.parcatsViewModel.arrangement!=="fixed"&&(W.dragDimensionDisplayInd=W.model.displayInd,W.initialDragDimensionDisplayInds=W.parcatsViewModel.model.dimensions.map(function(J){return J.displayInd}),W.dragHasMoved=!1,W.dragCategoryDisplayInd=null,b.select(this).selectAll("g.category").select("rect.catrect").each(function(J){var it=b.mouse(this)[0],K=b.mouse(this)[1];-2<=it&&it<=J.width+2&&-2<=K&&K<=J.height+2&&(W.dragCategoryDisplayInd=J.model.displayInd,W.initialDragCategoryDisplayInds=W.model.categories.map(function(H){return H.displayInd}),J.model.dragY=J.y,A.raiseToTop(this.parentNode),b.select(this.parentNode).selectAll("rect.bandrect").each(function(H){H.y<K&&K<=H.y+H.height&&(W.potentialClickBand=this)}))}),W.parcatsViewModel.dragDimension=W,L.loneUnhover(W.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function _(W){if(W.parcatsViewModel.arrangement!=="fixed"&&(W.dragHasMoved=!0,W.dragDimensionDisplayInd!==null)){var J=W.dragDimensionDisplayInd,it=J-1,K=J+1,H=W.parcatsViewModel.dimensions[J];if(W.dragCategoryDisplayInd!==null){var at=H.categories[W.dragCategoryDisplayInd];at.model.dragY+=b.event.dy;var tt=at.model.dragY,lt=at.model.displayInd,dt=H.categories,mt=dt[lt-1],gt=dt[lt+1];mt!==void 0&&tt<mt.y+mt.height/2&&(at.model.displayInd=mt.model.displayInd,mt.model.displayInd=lt),gt!==void 0&&tt+at.height>gt.y+gt.height/2&&(at.model.displayInd=gt.model.displayInd,gt.model.displayInd=lt),W.dragCategoryDisplayInd=at.model.displayInd}if(W.dragCategoryDisplayInd===null||W.parcatsViewModel.arrangement==="freeform"){H.model.dragX=b.event.x;var Mt=W.parcatsViewModel.dimensions[it],Lt=W.parcatsViewModel.dimensions[K];Mt!==void 0&&H.model.dragX<Mt.x+Mt.width&&(H.model.displayInd=Mt.model.displayInd,Mt.model.displayInd=J),Lt!==void 0&&H.model.dragX+H.width>Lt.x&&(H.model.displayInd=Lt.model.displayInd,Lt.model.displayInd=W.dragDimensionDisplayInd),W.dragDimensionDisplayInd=H.model.displayInd}Z(W.parcatsViewModel),nt(W.parcatsViewModel),$(W.parcatsViewModel),X(W.parcatsViewModel)}}function N(W){if(W.parcatsViewModel.arrangement!=="fixed"&&W.dragDimensionDisplayInd!==null){b.select(this).selectAll("text").attr("font-weight","normal");var J={},it=G(W.parcatsViewModel),K=W.parcatsViewModel.model.dimensions.map(function(Lt){return Lt.displayInd}),H=W.initialDragDimensionDisplayInds.some(function(Lt,zt){return Lt!==K[zt]});H&&K.forEach(function(Lt,zt){var xt=W.parcatsViewModel.model.dimensions[zt].containerInd;J["dimensions["+xt+"].displayindex"]=Lt});var at=!1;if(W.dragCategoryDisplayInd!==null){var tt=W.model.categories.map(function(Lt){return Lt.displayInd});if(at=W.initialDragCategoryDisplayInds.some(function(Lt,zt){return Lt!==tt[zt]}),at){var lt=W.model.categories.slice().sort(function(Lt,zt){return Lt.displayInd-zt.displayInd}),dt=lt.map(function(Lt){return Lt.categoryValue}),mt=lt.map(function(Lt){return Lt.categoryLabel});J["dimensions["+W.model.containerInd+"].categoryarray"]=[dt],J["dimensions["+W.model.containerInd+"].ticktext"]=[mt],J["dimensions["+W.model.containerInd+"].categoryorder"]="array"}}if(W.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!W.dragHasMoved&&W.potentialClickBand&&(W.parcatsViewModel.hoveron==="color"?m(W.potentialClickBand,"plotly_click",b.event.sourceEvent):E(W.potentialClickBand,"plotly_click",b.event.sourceEvent)),W.model.dragX=null,W.dragCategoryDisplayInd!==null){var gt=W.parcatsViewModel.dimensions[W.dragDimensionDisplayInd].categories[W.dragCategoryDisplayInd];gt.model.dragY=null,W.dragCategoryDisplayInd=null}W.dragDimensionDisplayInd=null,W.parcatsViewModel.dragDimension=null,W.dragHasMoved=null,W.potentialClickBand=null,Z(W.parcatsViewModel),nt(W.parcatsViewModel);var Mt=b.transition().duration(300).ease("cubic-in-out");Mt.each(function(){$(W.parcatsViewModel,!0),X(W.parcatsViewModel,!0)}).each("end",function(){(H||at)&&o.restyle(W.parcatsViewModel.graphDiv,J,[it])})}}function G(W){for(var J,it=W.graphDiv._fullData,K=0;K<it.length;K++)if(W.key===it[K].uid){J=K;break}return J}function X(W,J){J===void 0&&(J=!1);function it(K){return J?K.transition():K}W.pathSelection.data(function(K){return K.paths},n),it(W.pathSelection).attr("d",function(K){return K.svgD})}function $(W,J){J===void 0&&(J=!1);function it(dt){return J?dt.transition():dt}W.dimensionSelection.data(function(dt){return dt.dimensions},n);var K=W.dimensionSelection.selectAll("g.category").data(function(dt){return dt.categories},n);it(W.dimensionSelection).attr("transform",function(dt){return v(dt.x,0)}),it(K).attr("transform",function(dt){return v(0,dt.y)});var H=K.select(".dimlabel");H.text(function(dt,mt){return mt===0?dt.parcatsViewModel.model.dimensions[dt.model.dimensionInd].dimensionLabel:null});var at=K.select(".catlabel");at.attr("text-anchor",function(dt){return l(dt)?"start":"end"}).attr("x",function(dt){return l(dt)?dt.width+5:-5}).each(function(dt){var mt,gt;l(dt)?(mt=dt.width+5,gt="start"):(mt=-5,gt="end"),b.select(this).selectAll("tspan").attr("x",mt).attr("text-anchor",gt)});var tt=K.selectAll("rect.bandrect").data(function(dt){return dt.bands},n),lt=tt.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(dt){return dt.color}).attr("fill-opacity",0);tt.attr("fill",function(dt){return dt.color}).attr("width",function(dt){return dt.width}).attr("height",function(dt){return dt.height}).attr("y",function(dt){return dt.y}),y(lt),tt.each(function(){A.raiseToTop(this)}),tt.exit().remove()}function et(W,J,it){var K=it[0],H=J.margin||{l:80,r:80,t:100,b:80},at=K.trace,tt=at.domain,lt=J.width,dt=J.height,mt=Math.floor(lt*(tt.x[1]-tt.x[0])),gt=Math.floor(dt*(tt.y[1]-tt.y[0])),Mt=tt.x[0]*lt+H.l,Lt=J.height-tt.y[1]*J.height+H.t,zt=at.line.shape,xt;at.hoverinfo==="all"?xt=["count","probability"]:xt=(at.hoverinfo||"").split("+");var Ct={trace:at,key:at.uid,model:K,x:Mt,y:Lt,width:mt,height:gt,hoveron:at.hoveron,hoverinfoItems:xt,arrangement:at.arrangement,bundlecolors:at.bundlecolors,sortpaths:at.sortpaths,labelfont:at.labelfont,categorylabelfont:at.tickfont,pathShape:zt,dragDimension:null,margin:H,paths:[],dimensions:[],graphDiv:W,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(Z(Ct),nt(Ct)),Ct}function ot(W,J,it,K,H){var at=[],tt=[],lt,dt;for(dt=0;dt<it.length-1;dt++)lt=P(it[dt]+W[dt],W[dt+1]),at.push(lt(H)),tt.push(lt(1-H));var mt="M "+W[0]+","+J[0];for(mt+="l"+it[0]+",0 ",dt=1;dt<it.length;dt++)mt+="C"+at[dt-1]+","+J[dt-1]+" "+tt[dt-1]+","+J[dt]+" "+W[dt]+","+J[dt],mt+="l"+it[dt]+",0 ";for(mt+="l0,"+K+" ",mt+="l -"+it[it.length-1]+",0 ",dt=it.length-2;dt>=0;dt--)mt+="C"+tt[dt]+","+(J[dt+1]+K)+" "+at[dt]+","+(J[dt]+K)+" "+(W[dt]+it[dt])+","+(J[dt]+K),mt+="l-"+it[dt]+",0 ";return mt+="Z",mt}function nt(W){var J=W.dimensions,it=W.model,K=J.map(function(Qt){return Qt.categories.map(function(Pt){return Pt.y})}),H=W.model.dimensions.map(function(Qt){return Qt.categories.map(function(Pt){return Pt.displayInd})}),at=W.model.dimensions.map(function(Qt){return Qt.displayInd}),tt=W.dimensions.map(function(Qt){return Qt.model.dimensionInd}),lt=J.map(function(Qt){return Qt.x}),dt=J.map(function(Qt){return Qt.width}),mt=[];for(var gt in it.paths)it.paths.hasOwnProperty(gt)&&mt.push(it.paths[gt]);function Mt(Qt){var Pt=Qt.categoryInds.map(function(Nt,Ht){return H[Ht][Nt]}),Ot=tt.map(function(Nt){return Pt[Nt]});return Ot}mt.sort(function(Qt,Pt){var Ot=Mt(Qt),Nt=Mt(Pt);return W.sortpaths==="backward"&&(Ot.reverse(),Nt.reverse()),Ot.push(Qt.valueInds[0]),Nt.push(Pt.valueInds[0]),W.bundlecolors&&(Ot.unshift(Qt.rawColor),Nt.unshift(Pt.rawColor)),Ot<Nt?-1:Ot>Nt?1:0});for(var Lt=new Array(mt.length),zt=J[0].model.count,xt=J[0].categories.map(function(Qt){return Qt.height}).reduce(function(Qt,Pt){return Qt+Pt}),Ct=0;Ct<mt.length;Ct++){var wt=mt[Ct],Rt;zt>0?Rt=xt*(wt.count/zt):Rt=0;for(var Tt=new Array(K.length),Bt=0;Bt<wt.categoryInds.length;Bt++){var Gt=wt.categoryInds[Bt],te=H[Bt][Gt],Wt=at[Bt];Tt[Wt]=K[Wt][te],K[Wt][te]+=Rt;var jt=W.dimensions[Wt].categories[te],ie=jt.bands.length,ue=jt.bands[ie-1];if(ue===void 0||wt.rawColor!==ue.rawColor){var fe=ue===void 0?0:ue.y+ue.height;jt.bands.push({key:fe,color:wt.color,rawColor:wt.rawColor,height:Rt,width:jt.width,count:wt.count,y:fe,categoryViewModel:jt,parcatsViewModel:W})}else{var pe=jt.bands[ie-1];pe.height+=Rt,pe.count+=wt.count}}var Te;W.pathShape==="hspline"?Te=ot(lt,Tt,dt,Rt,.5):Te=ot(lt,Tt,dt,Rt,0),Lt[Ct]={key:wt.valueInds[0],model:wt,height:Rt,leftXs:lt,topYs:Tt,dimWidths:dt,svgD:Te,parcatsViewModel:W}}W.paths=Lt}function Z(W){var J=W.model.dimensions.map(function(tt){return{displayInd:tt.displayInd,dimensionInd:tt.dimensionInd}});J.sort(function(tt,lt){return tt.displayInd-lt.displayInd});var it=[];for(var K in J){var H=J[K].dimensionInd,at=W.model.dimensions[H];it.push(Q(W,at))}W.dimensions=it}function Q(W,J){var it=40,K=16,H=W.model.dimensions.length,at=J.displayInd,tt,lt,dt;H>1?tt=(W.width-2*it-K)/(H-1):tt=0,lt=it,dt=lt+tt*at;var mt=[],gt=W.model.maxCats,Mt=J.categories.length,Lt=8,zt=J.count,xt=W.height-Lt*(gt-1),Ct,wt,Rt,Tt,Bt,Gt=(gt-Mt)*Lt/2,te=J.categories.map(function(Wt){return{displayInd:Wt.displayInd,categoryInd:Wt.categoryInd}});for(te.sort(function(Wt,jt){return Wt.displayInd-jt.displayInd}),Bt=0;Bt<Mt;Bt++)Tt=te[Bt].categoryInd,wt=J.categories[Tt],zt>0?Ct=wt.count/zt*xt:Ct=0,Rt={key:wt.valueInds[0],model:wt,width:K,height:Ct,y:wt.dragY!==null?wt.dragY:Gt,bands:[],parcatsViewModel:W},Gt=Gt+Ct+Lt,mt.push(Rt);return{key:J.dimensionInd,x:J.dragX!==null?J.dragX:dt,y:0,width:K,model:J,categories:mt,parcatsViewModel:W,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},60268:function(j,V,t){var b=t(51036);j.exports=function(o,L,A,v){var p=o._fullLayout,r=p._paper,e=p._size;b(o,r,L,{width:e.w,height:e.h,margin:{t:e.t,r:e.r,b:e.b,l:e.l}},A,v)}},82296:function(j,V,t){var b=t(49084),P=t(94724),o=t(25376),L=t(86968).u,A=t(92880).extendFlat,v=t(31780).templatedArray;j.exports={domain:L({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({autoShadowDflt:!0,editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:v("dimension",{label:{valType:"string",editType:"plot"},tickvals:A({},P.tickvals,{editType:"plot"}),ticktext:A({},P.ticktext,{editType:"plot"}),tickformat:A({},P.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:A({editType:"calc"},b("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},71864:function(j,V,t){var b=t(30140),P=t(33428),o=t(71688).keyFun,L=t(71688).repeat,A=t(3400).sorterAsc,v=t(3400).strTranslate,p=b.bar.snapRatio;function r(N,G){return N*(1-p)+G*p}var e=b.bar.snapClose;function s(N,G){return N*(1-e)+G*e}function n(N,G,X,$){if(l(X,$))return X;var et=N?-1:1,ot=0,nt=G.length-1;if(et<0){var Z=ot;ot=nt,nt=Z}for(var Q=G[ot],W=Q,J=ot;et*J<et*nt;J+=et){var it=J+et,K=G[it];if(et*X<et*s(Q,K))return r(Q,W);if(et*X<et*K||it===nt)return r(K,Q);W=Q,Q=K}}function l(N,G){for(var X=0;X<G.length;X++)if(N>=G[X][0]&&N<=G[X][1])return!0;return!1}function f(N){N.attr("x",-b.bar.captureWidth/2).attr("width",b.bar.captureWidth)}function u(N){N.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function g(N){if(!N.brush.filterSpecified)return"0,"+N.height;for(var G=h(N.brush.filter.getConsolidated(),N.height),X=[0],$,et,ot,nt=G.length?G[0][0]:null,Z=0;Z<G.length;Z++)$=G[Z],et=$[1]-$[0],X.push(nt),X.push(et),ot=Z+1,ot<G.length&&(nt=G[ot][0]-$[1]);return X.push(N.height),X}function h(N,G){return N.map(function(X){return X.map(function($){return Math.max(0,$*G)}).sort(A)})}function T(N,G){var X=b.bar.handleHeight;if(!(G>N[1]+X||G<N[0]-X))return G>=.9*N[1]+.1*N[0]?"n":G<=.9*N[0]+.1*N[1]?"s":"ns"}function c(){P.select(document.body).style("cursor",null)}function i(N){N.attr("stroke-dasharray",g)}function d(N,G){var X=P.select(N).selectAll(".highlight, .highlight-shadow"),$=G?X.transition().duration(b.bar.snapDuration).each("end",G):X;i($)}function x(N,G){var X=N.brush,$=X.filterSpecified,et=NaN,ot={},nt;if($){var Z=N.height,Q=X.filter.getConsolidated(),W=h(Q,Z),J=NaN,it=NaN,K=NaN;for(nt=0;nt<=W.length;nt++){var H=W[nt];if(H&&H[0]<=G&&G<=H[1]){J=nt;break}else if(it=nt?nt-1:NaN,H&&H[0]>G){K=nt;break}}if(et=J,isNaN(et)&&(isNaN(it)||isNaN(K)?et=isNaN(it)?K:it:et=G-W[it][1]<W[K][0]-G?it:K),!isNaN(et)){var at=W[et],tt=T(at,G);tt&&(ot.interval=Q[et],ot.intervalPix=at,ot.region=tt)}}if(N.ordinal&&!ot.region){var lt=N.unitTickvals,dt=N.unitToPaddedPx.invert(G);for(nt=0;nt<lt.length;nt++){var mt=[lt[Math.max(nt-1,0)]*.25+lt[nt]*.75,lt[Math.min(nt+1,lt.length-1)]*.25+lt[nt]*.75];if(dt>=mt[0]&&dt<=mt[1]){ot.clickableOrdinalRange=mt;break}}}return ot}function w(N,G){P.event.sourceEvent.stopPropagation();var X=G.height-P.mouse(N)[1]-2*b.verticalPadding,$=G.unitToPaddedPx.invert(X),et=G.brush,ot=x(G,X),nt=ot.interval,Z=et.svgBrush;if(Z.wasDragged=!1,Z.grabbingBar=ot.region==="ns",Z.grabbingBar){var Q=nt.map(G.unitToPaddedPx);Z.grabPoint=X-Q[0]-b.verticalPadding,Z.barLength=Q[1]-Q[0]}Z.clickableOrdinalRange=ot.clickableOrdinalRange,Z.stayingIntervals=G.multiselect&&et.filterSpecified?et.filter.getConsolidated():[],nt&&(Z.stayingIntervals=Z.stayingIntervals.filter(function(W){return W[0]!==nt[0]&&W[1]!==nt[1]})),Z.startExtent=ot.region?nt[ot.region==="s"?1:0]:$,G.parent.inBrushDrag=!0,Z.brushStartCallback()}function C(N,G){P.event.sourceEvent.stopPropagation();var X=G.height-P.mouse(N)[1]-2*b.verticalPadding,$=G.brush.svgBrush;$.wasDragged=!0,$._dragging=!0,$.grabbingBar?$.newExtent=[X-$.grabPoint,X+$.barLength-$.grabPoint].map(G.unitToPaddedPx.invert):$.newExtent=[$.startExtent,G.unitToPaddedPx.invert(X)].sort(A),G.brush.filterSpecified=!0,$.extent=$.stayingIntervals.concat([$.newExtent]),$.brushCallback(G),d(N.parentNode)}function y(N,G){var X=G.brush,$=X.filter,et=X.svgBrush;et._dragging||(S(N,G),C(N,G),G.brush.svgBrush.wasDragged=!1),et._dragging=!1;var ot=P.event;ot.sourceEvent.stopPropagation();var nt=et.grabbingBar;if(et.grabbingBar=!1,et.grabLocation=void 0,G.parent.inBrushDrag=!1,c(),!et.wasDragged){et.wasDragged=void 0,et.clickableOrdinalRange?X.filterSpecified&&G.multiselect?et.extent.push(et.clickableOrdinalRange):(et.extent=[et.clickableOrdinalRange],X.filterSpecified=!0):nt?(et.extent=et.stayingIntervals,et.extent.length===0&&I(X)):I(X),et.brushCallback(G),d(N.parentNode),et.brushEndCallback(X.filterSpecified?$.getConsolidated():[]);return}var Z=function(){$.set($.getConsolidated())};if(G.ordinal){var Q=G.unitTickvals;Q[Q.length-1]<Q[0]&&Q.reverse(),et.newExtent=[n(0,Q,et.newExtent[0],et.stayingIntervals),n(1,Q,et.newExtent[1],et.stayingIntervals)];var W=et.newExtent[1]>et.newExtent[0];et.extent=et.stayingIntervals.concat(W?[et.newExtent]:[]),et.extent.length||I(X),et.brushCallback(G),W?d(N.parentNode,Z):(Z(),d(N.parentNode))}else Z();et.brushEndCallback(X.filterSpecified?$.getConsolidated():[])}function S(N,G){var X=G.height-P.mouse(N)[1]-2*b.verticalPadding,$=x(G,X),et="crosshair";$.clickableOrdinalRange?et="pointer":$.region&&(et=$.region+"-resize"),P.select(document.body).style("cursor",et)}function M(N){N.on("mousemove",function(G){P.event.preventDefault(),G.parent.inBrushDrag||S(this,G)}).on("mouseleave",function(G){G.parent.inBrushDrag||c()}).call(P.behavior.drag().on("dragstart",function(G){w(this,G)}).on("drag",function(G){C(this,G)}).on("dragend",function(G){y(this,G)}))}function a(N,G){return N[0]-G[0]}function E(N,G,X){var $=X._context.staticPlot,et=N.selectAll(".background").data(L);et.enter().append("rect").classed("background",!0).call(f).call(u).style("pointer-events",$?"none":"auto").attr("transform",v(0,b.verticalPadding)),et.call(M).attr("height",function(Z){return Z.height-b.verticalPadding});var ot=N.selectAll(".highlight-shadow").data(L);ot.enter().append("line").classed("highlight-shadow",!0).attr("x",-b.bar.width/2).attr("stroke-width",b.bar.width+b.bar.strokeWidth).attr("stroke",G).attr("opacity",b.bar.strokeOpacity).attr("stroke-linecap","butt"),ot.attr("y1",function(Z){return Z.height}).call(i);var nt=N.selectAll(".highlight").data(L);nt.enter().append("line").classed("highlight",!0).attr("x",-b.bar.width/2).attr("stroke-width",b.bar.width-b.bar.strokeWidth).attr("stroke",b.bar.fillColor).attr("opacity",b.bar.fillOpacity).attr("stroke-linecap","butt"),nt.attr("y1",function(Z){return Z.height}).call(i)}function m(N,G,X){var $=N.selectAll("."+b.cn.axisBrush).data(L,o);$.enter().append("g").classed(b.cn.axisBrush,!0),E($,G,X)}function k(N){return N.svgBrush.extent.map(function(G){return G.slice()})}function I(N){N.filterSpecified=!1,N.svgBrush.extent=[[-1/0,1/0]]}function O(N){return function(X){var $=X.brush,et=k($),ot=et.slice();$.filter.set(ot),N()}}function z(N){for(var G=N.slice(),X=[],$,et=G.shift();et;){for($=et.slice();(et=G.shift())&&et[0]<=$[1];)$[1]=Math.max($[1],et[1]);X.push($)}return X.length===1&&X[0][0]>X[0][1]&&(X=[]),X}function B(){var N=[],G,X;return{set:function($){N=$.map(function(et){return et.slice().sort(A)}).sort(a),N.length===1&&N[0][0]===-1/0&&N[0][1]===1/0&&(N=[[0,-1]]),G=z(N),X=N.reduce(function(et,ot){return[Math.min(et[0],ot[0]),Math.max(et[1],ot[1])]},[1/0,-1/0])},get:function(){return N.slice()},getConsolidated:function(){return G},getBounds:function(){return X}}}function F(N,G,X,$,et,ot){var nt=B();return nt.set(X),{filter:nt,filterSpecified:G,svgBrush:{extent:[],brushStartCallback:$,brushCallback:O(et),brushEndCallback:ot}}}function _(N,G){if(Array.isArray(N[0])?(N=N.map(function($){return $.sort(A)}),G.multiselect?N=z(N.sort(a)):N=[N[0]]):N=[N.sort(A)],G.tickvals){var X=G.tickvals.slice().sort(A);if(N=N.map(function($){var et=[n(0,X,$[0],[]),n(1,X,$[1],[])];if(et[1]>et[0])return et}).filter(function($){return $}),!N.length)return}return N.length>1?N:N[0]}j.exports={makeBrush:F,ensureAxisBrush:m,cleanRanges:_}},61664:function(j,V,t){j.exports={attributes:t(82296),supplyDefaults:t(60664),calc:t(95044),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t(19976),categories:["gl","regl","noOpacity","noHover"],meta:{}}},19976:function(j,V,t){var b=t(33428),P=t(84888)._M,o=t(24196),L=t(9616);V.name="parcoords",V.plot=function(A){var v=P(A.calcdata,"parcoords")[0];v.length&&o(A,v)},V.clean=function(A,v,p,r){var e=r._has&&r._has("parcoords"),s=v._has&&v._has("parcoords");e&&!s&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},V.toSVG=function(A){var v=A._fullLayout._glimages,p=b.select(A).selectAll(".svg-container"),r=p.filter(function(s,n){return n===p.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function e(){var s=this,n=s.toDataURL("image/png"),l=v.append("svg:image");l.attr({xmlns:L.svg,"xlink:href":n,preserveAspectRatio:"none",x:0,y:0,width:s.style.width,height:s.style.height})}r.each(e),window.setTimeout(function(){b.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},95044:function(j,V,t){var b=t(3400).isArrayOrTypedArray,P=t(8932),o=t(71688).wrap;j.exports=function(v,p){var r,e;return P.hasColorscale(p,"line")&&b(p.line.color)?(r=p.line.color,e=P.extractOpts(p.line).colorscale,P.calc(v,p,{vals:r,containerStr:"line",cLetter:"c"})):(r=L(p._length),e=[[0,p.line.color],[1,p.line.color]]),o({lineColor:r,cscale:e})};function L(A){for(var v=new Array(A),p=0;p<A;p++)v[p]=.5;return v}},30140:function(j){j.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},60664:function(j,V,t){var b=t(3400),P=t(94288).hasColorscale,o=t(27260),L=t(86968).Q,A=t(51272),v=t(54460),p=t(82296),r=t(71864),e=t(30140).maxDimensionCount,s=t(26284);function n(f,u,g,h,T){var c=T("line.color",g);if(P(f,"line")&&b.isArrayOrTypedArray(c)){if(c.length)return T("line.colorscale"),o(f,u,h,T,{prefix:"line.",cLetter:"c"}),c.length;u.line.color=g}return 1/0}function l(f,u,g,h){function T(w,C){return b.coerce(f,u,p.dimensions,w,C)}var c=T("values"),i=T("visible");if(c&&c.length||(i=u.visible=!1),i){T("label"),T("tickvals"),T("ticktext"),T("tickformat");var d=T("range");u._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:d},v.setConvert(u._ax,h.layout),T("multiselect");var x=T("constraintrange");x&&(u.constraintrange=r.cleanRanges(x,u))}}j.exports=function(u,g,h,T){function c(C,y){return b.coerce(u,g,p,C,y)}var i=u.dimensions;Array.isArray(i)&&i.length>e&&(b.log("parcoords traces support up to "+e+" dimensions at the moment"),i.splice(e));var d=A(u,g,{name:"dimensions",layout:T,handleItemDefaults:l}),x=n(u,g,h,T,c);L(g,T,c),(!Array.isArray(d)||!d.length)&&(g.visible=!1),s(g,d,"values",x);var w=b.extendFlat({},T.font,{size:Math.round(T.font.size/1.2)});b.coerceFont(c,"labelfont",w),b.coerceFont(c,"tickfont",w,{autoShadowDflt:!0}),b.coerceFont(c,"rangefont",w),c("labelangle"),c("labelside"),c("unselected.line.color"),c("unselected.line.opacity")}},95724:function(j,V,t){var b=t(3400).isTypedArray;V.convertTypedArray=function(P){return b(P)?Array.prototype.slice.call(P):P},V.isOrdinal=function(P){return!!P.tickvals},V.isVisible=function(P){return P.visible||!("visible"in P)}},29928:function(j,V,t){var b=t(61664);b.plot=t(24196),j.exports=b},51352:function(j,V,t){var b=["precision highp float;","","varying vec4 fragColor;","","attribute vec4 p01_04, p05_08, p09_12, p13_16,","               p17_20, p21_24, p25_28, p29_32,","               p33_36, p37_40, p41_44, p45_48,","               p49_52, p53_56, p57_60, colors;","","uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,","             loA, hiA, loB, hiB, loC, hiC, loD, hiD;","","uniform vec2 resolution, viewBoxPos, viewBoxSize;","uniform float maskHeight;","uniform float drwLayer; // 0: context, 1: focus, 2: pick","uniform vec4 contextColor;","uniform sampler2D maskTexture, palette;","","bool isPick    = (drwLayer > 1.5);","bool isContext = (drwLayer < 0.5);","","const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);","const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);","","float val(mat4 p, mat4 v) {","    return dot(matrixCompMult(p, v) * UNITS, UNITS);","}","","float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {","    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);","    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);","    return y1 * (1.0 - ratio) + y2 * ratio;","}","","int iMod(int a, int b) {","    return a - b * (a / b);","}","","bool fOutside(float p, float lo, float hi) {","    return (lo < hi) && (lo > p || p > hi);","}","","bool vOutside(vec4 p, vec4 lo, vec4 hi) {","    return (","        fOutside(p[0], lo[0], hi[0]) ||","        fOutside(p[1], lo[1], hi[1]) ||","        fOutside(p[2], lo[2], hi[2]) ||","        fOutside(p[3], lo[3], hi[3])","    );","}","","bool mOutside(mat4 p, mat4 lo, mat4 hi) {","    return (","        vOutside(p[0], lo[0], hi[0]) ||","        vOutside(p[1], lo[1], hi[1]) ||","        vOutside(p[2], lo[2], hi[2]) ||","        vOutside(p[3], lo[3], hi[3])","    );","}","","bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {","    return mOutside(A, loA, hiA) ||","           mOutside(B, loB, hiB) ||","           mOutside(C, loC, hiC) ||","           mOutside(D, loD, hiD);","}","","bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {","    mat4 pnts[4];","    pnts[0] = A;","    pnts[1] = B;","    pnts[2] = C;","    pnts[3] = D;","","    for(int i = 0; i < 4; ++i) {","        for(int j = 0; j < 4; ++j) {","            for(int k = 0; k < 4; ++k) {","                if(0 == iMod(","                    int(255.0 * texture2D(maskTexture,","                        vec2(","                            (float(i * 2 + j / 2) + 0.5) / 8.0,","                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight","                        ))[3]","                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),","                    2","                )) return true;","            }","        }","    }","    return false;","}","","vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {","    float x = 0.5 * sign(v) + 0.5;","    float y = axisY(x, A, B, C, D);","    float z = 1.0 - abs(v);","","    z += isContext ? 0.0 : 2.0 * float(","        outsideBoundingBox(A, B, C, D) ||","        outsideRasterMask(A, B, C, D)","    );","","    return vec4(","        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,","        z,","        1.0","    );","}","","void main() {","    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);","    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);","    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);","    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);","","    float v = colors[3];","","    gl_Position = position(isContext, v, A, B, C, D);","","    fragColor =","        isContext ? vec4(contextColor) :","        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));","}"].join(`
`),P=["precision highp float;","","varying vec4 fragColor;","","void main() {","    gl_FragColor = fragColor;","}"].join(`
`),o=t(30140).maxDimensionCount,L=t(3400),A=1e-6,v=2048,p=new Uint8Array(4),r=new Uint8Array(4),e={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(y){y.read({x:0,y:0,width:1,height:1,data:p})}function n(y,S,M,a,E){var m=y._gl;m.enable(m.SCISSOR_TEST),m.scissor(S,M,a,E),y.clear({color:[0,0,0,0],depth:1})}function l(y,S,M,a,E,m){var k=m.key;function I(O){var z=Math.min(a,E-O*a);O===0&&(window.cancelAnimationFrame(M.currentRafs[k]),delete M.currentRafs[k],n(y,m.scissorX,m.scissorY,m.scissorWidth,m.viewBoxSize[1])),!M.clearOnly&&(m.count=2*z,m.offset=2*O*a,S(m),O*a+z<E&&(M.currentRafs[k]=window.requestAnimationFrame(function(){I(O+1)})),M.drawCompleted=!1)}M.drawCompleted||(s(y),M.drawCompleted=!0),I(0)}function f(y){return Math.max(A,Math.min(1-A,y))}function u(y,S){for(var M=new Array(256),a=0;a<256;a++)M[a]=y(a/255).concat(S);return M}function g(y,S){return(y>>>8*S)%256/255}function h(y,S,M){for(var a=new Array(y*(o+4)),E=0,m=0;m<y;m++){for(var k=0;k<o;k++)a[E++]=k<S.length?S[k].paddedUnitValues[m]:.5;a[E++]=g(m,2),a[E++]=g(m,1),a[E++]=g(m,0),a[E++]=f(M[m])}return a}function T(y,S,M){for(var a=new Array(S*8),E=0,m=0;m<S;m++)for(var k=0;k<2;k++)for(var I=0;I<4;I++){var O=y*4+I,z=M[m*64+O];O===63&&k===0&&(z*=-1),a[E++]=z}return a}function c(y){var S="0"+y;return S.substr(S.length-2)}function i(y){return y<o?"p"+c(y+1)+"_"+c(y+4):"colors"}function d(y,S,M){for(var a=0;a<=o;a+=4)y[i(a)](T(a/4,S,M))}function x(y){for(var S={},M=0;M<=o;M+=4)S[i(M)]=y.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return S}function w(y,S,M,a,E,m,k,I,O,z,B,F,_,N){for(var G=[[],[]],X=0;X<64;X++)G[0][X]=X===E?1:0,G[1][X]=X===m?1:0;k*=N,I*=N,O*=N,z*=N;var $=y.lines.canvasOverdrag*N,et=y.domain,ot=y.canvasWidth*N,nt=y.canvasHeight*N,Z=y.pad.l*N,Q=y.pad.b*N,W=y.layoutHeight*N,J=y.layoutWidth*N,it=y.deselectedLines.color,K=y.deselectedLines.opacity,H=L.extendFlat({key:B,resolution:[ot,nt],viewBoxPos:[k+$,I],viewBoxSize:[O,z],i0:E,i1:m,dim0A:G[0].slice(0,16),dim0B:G[0].slice(16,32),dim0C:G[0].slice(32,48),dim0D:G[0].slice(48,64),dim1A:G[1].slice(0,16),dim1B:G[1].slice(16,32),dim1C:G[1].slice(32,48),dim1D:G[1].slice(48,64),drwLayer:F,contextColor:[it[0]/255,it[1]/255,it[2]/255,K!=="auto"?it[3]*K:Math.max(1/255,Math.pow(1/y.lines.color.length,1/3))],scissorX:(a===S?0:k+$)+(Z-$)+J*et.x[0],scissorWidth:(a===M?ot-k+$:O+.5)+(a===S?k+$:0),scissorY:I+Q+W*et.y[0],scissorHeight:z,viewportX:Z-$+J*et.x[0],viewportY:Q+W*et.y[0],viewportWidth:ot,viewportHeight:nt},_);return H}function C(y){var S=v-1,M=Math.max(0,Math.floor(y[0]*S),0),a=Math.min(S,Math.ceil(y[1]*S),S);return[Math.min(M,a),Math.max(M,a)]}j.exports=function(y,S){var M=S.context,a=S.pick,E=S.regl,m=E._gl,k=m.getParameter(m.ALIASED_LINE_WIDTH_RANGE),I=Math.max(k[0],Math.min(k[1],S.viewModel.plotGlPixelRatio)),O={currentRafs:{},drawCompleted:!0,clearOnly:!1},z,B,F,_,N=x(E),G,X=E.texture(e),$=[];ot(S);var et=E({profile:!1,blend:{enable:M,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!M,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:E.prop("scissorX"),y:E.prop("scissorY"),width:E.prop("scissorWidth"),height:E.prop("scissorHeight")}},viewport:{x:E.prop("viewportX"),y:E.prop("viewportY"),width:E.prop("viewportWidth"),height:E.prop("viewportHeight")},dither:!1,vert:b,frag:P,primitive:"lines",lineWidth:I,attributes:N,uniforms:{resolution:E.prop("resolution"),viewBoxPos:E.prop("viewBoxPos"),viewBoxSize:E.prop("viewBoxSize"),dim0A:E.prop("dim0A"),dim1A:E.prop("dim1A"),dim0B:E.prop("dim0B"),dim1B:E.prop("dim1B"),dim0C:E.prop("dim0C"),dim1C:E.prop("dim1C"),dim0D:E.prop("dim0D"),dim1D:E.prop("dim1D"),loA:E.prop("loA"),hiA:E.prop("hiA"),loB:E.prop("loB"),hiB:E.prop("hiB"),loC:E.prop("loC"),hiC:E.prop("hiC"),loD:E.prop("loD"),hiD:E.prop("hiD"),palette:X,contextColor:E.prop("contextColor"),maskTexture:E.prop("maskTexture"),drwLayer:E.prop("drwLayer"),maskHeight:E.prop("maskHeight")},offset:E.prop("offset"),count:E.prop("count")});function ot(it){z=it.model,B=it.viewModel,F=B.dimensions.slice(),_=F[0]?F[0].values.length:0;var K=z.lines,H=a?K.color.map(function(tt,lt){return lt/K.color.length}):K.color,at=h(_,F,H);d(N,_,at),!M&&!a&&(X=E.texture(L.extendFlat({data:u(z.unitToColor,255)},e)))}function nt(it){var K,H,at,tt=[[],[]];for(at=0;at<64;at++){var lt=!it&&at<F.length?F[at].brush.filter.getBounds():[-1/0,1/0];tt[0][at]=lt[0],tt[1][at]=lt[1]}var dt=v*8,mt=new Array(dt);for(K=0;K<dt;K++)mt[K]=255;if(!it)for(K=0;K<F.length;K++){var gt=K%8,Mt=(K-gt)/8,Lt=Math.pow(2,gt),zt=F[K],xt=zt.brush.filter.get();if(!(xt.length<2)){var Ct=C(xt[0])[1];for(H=1;H<xt.length;H++){var wt=C(xt[H]);for(at=Ct+1;at<wt[0];at++)mt[at*8+Mt]&=~Lt;Ct=Math.max(Ct,wt[1])}}}var Rt={shape:[8,v],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:mt};return G?G(Rt):G=E.texture(Rt),{maskTexture:G,maskHeight:v,loA:tt[0].slice(0,16),loB:tt[0].slice(16,32),loC:tt[0].slice(32,48),loD:tt[0].slice(48,64),hiA:tt[1].slice(0,16),hiB:tt[1].slice(16,32),hiC:tt[1].slice(32,48),hiD:tt[1].slice(48,64)}}function Z(it,K,H){var at=it.length,tt,lt,dt,mt=1/0,gt=-1/0;for(tt=0;tt<at;tt++)it[tt].dim0.canvasX<mt&&(mt=it[tt].dim0.canvasX,lt=tt),it[tt].dim1.canvasX>gt&&(gt=it[tt].dim1.canvasX,dt=tt);at===0&&n(E,0,0,z.canvasWidth,z.canvasHeight);var Mt=nt(M);for(tt=0;tt<at;tt++){var Lt=it[tt],zt=Lt.dim0.crossfilterDimensionIndex,xt=Lt.dim1.crossfilterDimensionIndex,Ct=Lt.canvasX,wt=Lt.canvasY,Rt=Ct+Lt.panelSizeX,Tt=Lt.plotGlPixelRatio;if(K||!$[zt]||$[zt][0]!==Ct||$[zt][1]!==Rt){$[zt]=[Ct,Rt];var Bt=w(z,lt,dt,tt,zt,xt,Ct,wt,Lt.panelSizeX,Lt.panelSizeY,Lt.dim0.crossfilterDimensionIndex,M?0:a?2:1,Mt,Tt);O.clearOnly=H;var Gt=K?z.lines.blockLineCount:_;l(E,et,O,Gt,_,Bt)}}}function Q(it,K){return E.read({x:it,y:K,width:1,height:1,data:r}),r}function W(it,K,H,at){var tt=new Uint8Array(4*H*at);return E.read({x:it,y:K,width:H,height:at,data:tt}),tt}function J(){y.style["pointer-events"]="none",X.destroy(),G&&G.destroy();for(var it in N)N[it].destroy()}return{render:Z,readPixel:Q,readPixels:W,destroy:J,update:ot}}},26284:function(j){j.exports=function(V,t,b,P){P||(P=1/0);var o,L;for(o=0;o<t.length;o++)L=t[o],L.visible&&(P=Math.min(P,L[b].length));for(P===1/0&&(P=0),V._length=P,o=0;o<t.length;o++)L=t[o],L.visible&&(L._length=P);return P}},36336:function(j,V,t){var b=t(33428),P=t(3400),o=P.isArrayOrTypedArray,L=P.numberFormat,A=t(96824),v=t(54460),p=P.strRotate,r=P.strTranslate,e=t(72736),s=t(43616),n=t(8932),l=t(71688),f=l.keyFun,u=l.repeat,g=l.unwrap,h=t(95724),T=t(30140),c=t(71864),i=t(51352);function d($,et,ot){return P.aggNums($,null,et,ot)}function x($,et){return C(d(Math.min,$,et),d(Math.max,$,et))}function w($){var et=$.range;return et?C(et[0],et[1]):x($.values,$._length)}function C($,et){return(isNaN($)||!isFinite($))&&($=0),(isNaN(et)||!isFinite(et))&&(et=0),$===et&&($===0?($-=1,et+=1):($*=.9,et*=1.1)),[$,et]}function y($,et){return et?function(ot,nt){var Z=et[nt];return Z??$(ot)}:$}function S($,et,ot,nt,Z){var Q=w(ot);return nt?b.scale.ordinal().domain(nt.map(y(L(ot.tickformat),Z))).range(nt.map(function(W){var J=(W-Q[0])/(Q[1]-Q[0]);return $-et+J*(2*et-$)})):b.scale.linear().domain(Q).range([$-et,et])}function M($,et){return b.scale.linear().range([et,$-et])}function a($,et){return b.scale.linear().domain(w($)).range([et,1-et])}function E($){if($.tickvals){var et=w($);return b.scale.ordinal().domain($.tickvals).range($.tickvals.map(function(ot){return(ot-et[0])/(et[1]-et[0])}))}}function m($){var et=$.map(function(Q){return Q[0]}),ot=$.map(function(Q){var W=A(Q[1]);return b.rgb("rgb("+W[0]+","+W[1]+","+W[2]+")")}),nt=function(Q){return function(W){return W[Q]}},Z="rgb".split("").map(function(Q){return b.scale.linear().clamp(!0).domain(et).range(ot.map(nt(Q)))});return function(Q){return Z.map(function(W){return W(Q)})}}function k($){return $.dimensions.some(function(et){return et.brush.filterSpecified})}function I($,et,ot){var nt=g(et),Z=nt.trace,Q=h.convertTypedArray(nt.lineColor),W=Z.line,J={color:A(Z.unselected.line.color),opacity:Z.unselected.line.opacity},it=n.extractOpts(W),K=it.reversescale?n.flipScale(nt.cscale):nt.cscale,H=Z.domain,at=Z.dimensions,tt=$.width,lt=Z.labelangle,dt=Z.labelside,mt=Z.labelfont,gt=Z.tickfont,Mt=Z.rangefont,Lt=P.extendDeepNoArrays({},W,{color:Q.map(b.scale.linear().domain(w({values:Q,range:[it.min,it.max],_length:Z._length}))),blockLineCount:T.blockLineCount,canvasOverdrag:T.overdrag*T.canvasPixelRatio}),zt=Math.floor(tt*(H.x[1]-H.x[0])),xt=Math.floor($.height*(H.y[1]-H.y[0])),Ct=$.margin||{l:80,r:80,t:100,b:80},wt=zt,Rt=xt;return{key:ot,colCount:at.filter(h.isVisible).length,dimensions:at,tickDistance:T.tickDistance,unitToColor:m(K),lines:Lt,deselectedLines:J,labelAngle:lt,labelSide:dt,labelFont:mt,tickFont:gt,rangeFont:Mt,layoutWidth:tt,layoutHeight:$.height,domain:H,translateX:H.x[0]*tt,translateY:$.height-H.y[1]*$.height,pad:Ct,canvasWidth:wt*T.canvasPixelRatio+2*Lt.canvasOverdrag,canvasHeight:Rt*T.canvasPixelRatio,width:wt,height:Rt,canvasPixelRatio:T.canvasPixelRatio}}function O($,et,ot){var nt=ot.width,Z=ot.height,Q=ot.dimensions,W=ot.canvasPixelRatio,J=function(tt){return nt*tt/Math.max(1,ot.colCount-1)},it=T.verticalPadding/Z,K=M(Z,T.verticalPadding),H={key:ot.key,xScale:J,model:ot,inBrushDrag:!1},at={};return H.dimensions=Q.filter(h.isVisible).map(function(tt,lt){var dt=a(tt,it),mt=at[tt.label];at[tt.label]=(mt||0)+1;var gt=tt.label+(mt?"__"+mt:""),Mt=tt.constraintrange,Lt=Mt&&Mt.length;Lt&&!o(Mt[0])&&(Mt=[Mt]);var zt=Lt?Mt.map(function(jt){return jt.map(dt)}):[[-1/0,1/0]],xt=function(){var jt=H;jt.focusLayer&&jt.focusLayer.render(jt.panels,!0);var ie=k(jt);!$.contextShown()&&ie?(jt.contextLayer&&jt.contextLayer.render(jt.panels,!0),$.contextShown(!0)):$.contextShown()&&!ie&&(jt.contextLayer&&jt.contextLayer.render(jt.panels,!0,!0),$.contextShown(!1))},Ct=tt.values;Ct.length>tt._length&&(Ct=Ct.slice(0,tt._length));var wt=tt.tickvals,Rt;function Tt(jt,ie){return{val:jt,text:Rt[ie]}}function Bt(jt,ie){return jt.val-ie.val}if(o(wt)&&wt.length){P.isTypedArray(wt)&&(wt=Array.from(wt)),Rt=tt.ticktext,!o(Rt)||!Rt.length?Rt=wt.map(L(tt.tickformat)):Rt.length>wt.length?Rt=Rt.slice(0,wt.length):wt.length>Rt.length&&(wt=wt.slice(0,Rt.length));for(var Gt=1;Gt<wt.length;Gt++)if(wt[Gt]<wt[Gt-1]){for(var te=wt.map(Tt).sort(Bt),Wt=0;Wt<wt.length;Wt++)wt[Wt]=te[Wt].val,Rt[Wt]=te[Wt].text;break}}else wt=void 0;return Ct=h.convertTypedArray(Ct),{key:gt,label:tt.label,tickFormat:tt.tickformat,tickvals:wt,ticktext:Rt,ordinal:h.isOrdinal(tt),multiselect:tt.multiselect,xIndex:lt,crossfilterDimensionIndex:lt,visibleIndex:tt._index,height:Z,values:Ct,paddedUnitValues:Ct.map(dt),unitTickvals:wt&&wt.map(dt),xScale:J,x:J(lt),canvasX:J(lt)*W,unitToPaddedPx:K,domainScale:S(Z,T.verticalPadding,tt,wt,Rt),ordinalScale:E(tt),parent:H,model:ot,brush:c.makeBrush($,Lt,zt,function(){$.linePickActive(!1)},xt,function(jt){if(H.focusLayer.render(H.panels,!0),H.pickLayer&&H.pickLayer.render(H.panels,!0),$.linePickActive(!0),et&&et.filterChanged){var ie=dt.invert,ue=jt.map(function(fe){return fe.map(ie).sort(P.sorterAsc)}).sort(function(fe,pe){return fe[0]-pe[0]});et.filterChanged(H.key,tt._index,ue)}})}}),H}function z($){$.classed(T.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function B(){var $=!0,et=!1;return{linePickActive:function(ot){return arguments.length?$=!!ot:$},contextShown:function(ot){return arguments.length?et=!!ot:et}}}function F($,et){var ot=et==="top"?1:-1,nt=$*Math.PI/180,Z=Math.sin(nt),Q=Math.cos(nt);return{dir:ot,dx:Z,dy:Q,degrees:$}}function _($,et,ot){for(var nt=et.panels||(et.panels=[]),Z=$.data(),Q=0;Q<Z.length-1;Q++){var W=nt[Q]||(nt[Q]={}),J=Z[Q],it=Z[Q+1];W.dim0=J,W.dim1=it,W.canvasX=J.canvasX,W.panelSizeX=it.canvasX-J.canvasX,W.panelSizeY=et.model.canvasHeight,W.y=0,W.canvasY=0,W.plotGlPixelRatio=ot}}function N($){for(var et=0;et<$.length;et++)for(var ot=0;ot<$[et].length;ot++)for(var nt=$[et][ot].trace,Z=nt.dimensions,Q=0;Q<Z.length;Q++){var W=Z[Q].values,J=Z[Q]._ax;J&&(J.range?J.range=C(J.range[0],J.range[1]):J.range=x(W,nt._length),J.dtick||(J.dtick=.01*(Math.abs(J.range[1]-J.range[0])||1)),J.tickformat=Z[Q].tickformat,v.calcTicks(J),J.cleanRange())}}function G($,et){return v.tickText($._ax,et,!1).text}function X($,et){if($.ordinal)return"";var ot=$.domainScale.domain(),nt=ot[et?ot.length-1:0];return G($.model.dimensions[$.visibleIndex],nt)}j.exports=function(et,ot,nt,Z){var Q=et._context.staticPlot,W=et._fullLayout,J=W._toppaper,it=W._glcontainer,K=et._context.plotGlPixelRatio,H=et._fullLayout.paper_bgcolor;N(ot);var at=B(),tt=ot.filter(function(Wt){return g(Wt).trace.visible}).map(I.bind(0,nt)).map(O.bind(0,at,Z));it.each(function(Wt,jt){return P.extendFlat(Wt,tt[jt])});var lt=it.selectAll(".gl-canvas").each(function(Wt){Wt.viewModel=tt[0],Wt.viewModel.plotGlPixelRatio=K,Wt.viewModel.paperColor=H,Wt.model=Wt.viewModel?Wt.viewModel.model:null}),dt=null,mt=lt.filter(function(Wt){return Wt.pick});mt.style("pointer-events",Q?"none":"auto").on("mousemove",function(Wt){if(at.linePickActive()&&Wt.lineLayer&&Z&&Z.hover){var jt=b.event,ie=this.width,ue=this.height,fe=b.mouse(this),pe=fe[0],Te=fe[1];if(pe<0||Te<0||pe>=ie||Te>=ue)return;var Qt=Wt.lineLayer.readPixel(pe,ue-1-Te),Pt=Qt[3]!==0,Ot=Pt?Qt[2]+256*(Qt[1]+256*Qt[0]):null,Nt={x:pe,y:Te,clientX:jt.clientX,clientY:jt.clientY,dataIndex:Wt.model.key,curveNumber:Ot};Ot!==dt&&(Pt?Z.hover(Nt):Z.unhover&&Z.unhover(Nt),dt=Ot)}}),lt.style("opacity",function(Wt){return Wt.pick?0:1}),J.style("background","rgba(255, 255, 255, 0)");var gt=J.selectAll("."+T.cn.parcoords).data(tt,f);gt.exit().remove(),gt.enter().append("g").classed(T.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),gt.attr("transform",function(Wt){return r(Wt.model.translateX,Wt.model.translateY)});var Mt=gt.selectAll("."+T.cn.parcoordsControlView).data(u,f);Mt.enter().append("g").classed(T.cn.parcoordsControlView,!0),Mt.attr("transform",function(Wt){return r(Wt.model.pad.l,Wt.model.pad.t)});var Lt=Mt.selectAll("."+T.cn.yAxis).data(function(Wt){return Wt.dimensions},f);Lt.enter().append("g").classed(T.cn.yAxis,!0),Mt.each(function(Wt){_(Lt,Wt,K)}),lt.each(function(Wt){if(Wt.viewModel){!Wt.lineLayer||Z?Wt.lineLayer=i(this,Wt):Wt.lineLayer.update(Wt),(Wt.key||Wt.key===0)&&(Wt.viewModel[Wt.key]=Wt.lineLayer);var jt=!Wt.context||Z;Wt.lineLayer.render(Wt.viewModel.panels,jt)}}),Lt.attr("transform",function(Wt){return r(Wt.xScale(Wt.xIndex),0)}),Lt.call(b.behavior.drag().origin(function(Wt){return Wt}).on("drag",function(Wt){var jt=Wt.parent;at.linePickActive(!1),Wt.x=Math.max(-T.overdrag,Math.min(Wt.model.width+T.overdrag,b.event.x)),Wt.canvasX=Wt.x*Wt.model.canvasPixelRatio,Lt.sort(function(ie,ue){return ie.x-ue.x}).each(function(ie,ue){ie.xIndex=ue,ie.x=Wt===ie?ie.x:ie.xScale(ie.xIndex),ie.canvasX=ie.x*ie.model.canvasPixelRatio}),_(Lt,jt,K),Lt.filter(function(ie){return Math.abs(Wt.xIndex-ie.xIndex)!==0}).attr("transform",function(ie){return r(ie.xScale(ie.xIndex),0)}),b.select(this).attr("transform",r(Wt.x,0)),Lt.each(function(ie,ue,fe){fe===Wt.parent.key&&(jt.dimensions[ue]=ie)}),jt.contextLayer&&jt.contextLayer.render(jt.panels,!1,!k(jt)),jt.focusLayer.render&&jt.focusLayer.render(jt.panels)}).on("dragend",function(Wt){var jt=Wt.parent;Wt.x=Wt.xScale(Wt.xIndex),Wt.canvasX=Wt.x*Wt.model.canvasPixelRatio,_(Lt,jt,K),b.select(this).attr("transform",function(ie){return r(ie.x,0)}),jt.contextLayer&&jt.contextLayer.render(jt.panels,!1,!k(jt)),jt.focusLayer&&jt.focusLayer.render(jt.panels),jt.pickLayer&&jt.pickLayer.render(jt.panels,!0),at.linePickActive(!0),Z&&Z.axesMoved&&Z.axesMoved(jt.key,jt.dimensions.map(function(ie){return ie.crossfilterDimensionIndex}))})),Lt.exit().remove();var zt=Lt.selectAll("."+T.cn.axisOverlays).data(u,f);zt.enter().append("g").classed(T.cn.axisOverlays,!0),zt.selectAll("."+T.cn.axis).remove();var xt=zt.selectAll("."+T.cn.axis).data(u,f);xt.enter().append("g").classed(T.cn.axis,!0),xt.each(function(Wt){var jt=Wt.model.height/Wt.model.tickDistance,ie=Wt.domainScale,ue=ie.domain();b.select(this).call(b.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(jt,Wt.tickFormat).tickValues(Wt.ordinal?ue:null).tickFormat(function(fe){return h.isOrdinal(Wt)?fe:G(Wt.model.dimensions[Wt.visibleIndex],fe)}).scale(ie)),s.font(xt.selectAll("text"),Wt.model.tickFont)}),xt.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xt.selectAll("text").style("cursor","default");var Ct=zt.selectAll("."+T.cn.axisHeading).data(u,f);Ct.enter().append("g").classed(T.cn.axisHeading,!0);var wt=Ct.selectAll("."+T.cn.axisTitle).data(u,f);wt.enter().append("text").classed(T.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",Q?"none":"auto"),wt.text(function(Wt){return Wt.label}).each(function(Wt){var jt=b.select(this);s.font(jt,Wt.model.labelFont),e.convertToTspans(jt,et)}).attr("transform",function(Wt){var jt=F(Wt.model.labelAngle,Wt.model.labelSide),ie=T.axisTitleOffset;return(jt.dir>0?"":r(0,2*ie+Wt.model.height))+p(jt.degrees)+r(-ie*jt.dx,-ie*jt.dy)}).attr("text-anchor",function(Wt){var jt=F(Wt.model.labelAngle,Wt.model.labelSide),ie=Math.abs(jt.dx),ue=Math.abs(jt.dy);return 2*ie>ue?jt.dir*jt.dx<0?"start":"end":"middle"});var Rt=zt.selectAll("."+T.cn.axisExtent).data(u,f);Rt.enter().append("g").classed(T.cn.axisExtent,!0);var Tt=Rt.selectAll("."+T.cn.axisExtentTop).data(u,f);Tt.enter().append("g").classed(T.cn.axisExtentTop,!0),Tt.attr("transform",r(0,-T.axisExtentOffset));var Bt=Tt.selectAll("."+T.cn.axisExtentTopText).data(u,f);Bt.enter().append("text").classed(T.cn.axisExtentTopText,!0).call(z),Bt.text(function(Wt){return X(Wt,!0)}).each(function(Wt){s.font(b.select(this),Wt.model.rangeFont)});var Gt=Rt.selectAll("."+T.cn.axisExtentBottom).data(u,f);Gt.enter().append("g").classed(T.cn.axisExtentBottom,!0),Gt.attr("transform",function(Wt){return r(0,Wt.model.height+T.axisExtentOffset)});var te=Gt.selectAll("."+T.cn.axisExtentBottomText).data(u,f);te.enter().append("text").classed(T.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(z),te.text(function(Wt){return X(Wt,!1)}).each(function(Wt){s.font(b.select(this),Wt.model.rangeFont)}),c.ensureAxisBrush(zt,H,et)}},24196:function(j,V,t){var b=t(36336),P=t(5048),o=t(95724).isVisible,L={};function A(r,e,s){var n=e.indexOf(s),l=r.indexOf(n);return l===-1&&(l+=e.length),l}function v(r,e){return function(n,l){return A(r,e,n)-A(r,e,l)}}var p=j.exports=function(e,s){var n=e._fullLayout,l=P(e,[],L);if(l){var f={},u={},g={},h={},T=n._size;s.forEach(function(w,C){var y=w[0].trace;g[C]=y.index;var S=h[C]=y._fullInput.index;f[C]=e.data[S].dimensions,u[C]=e.data[S].dimensions.slice()});var c=function(w,C,y){var S=u[w][C],M=y.map(function(O){return O.slice()}),a="dimensions["+C+"].constraintrange",E=n._tracePreGUI[e._fullData[g[w]]._fullInput.uid];if(E[a]===void 0){var m=S.constraintrange;E[a]=m||null}var k=e._fullData[g[w]].dimensions[C];M.length?(M.length===1&&(M=M[0]),S.constraintrange=M,k.constraintrange=M.slice(),M=[M]):(delete S.constraintrange,delete k.constraintrange,M=null);var I={};I[a]=M,e.emit("plotly_restyle",[I,[h[w]]])},i=function(w){e.emit("plotly_hover",w)},d=function(w){e.emit("plotly_unhover",w)},x=function(w,C){var y=v(C,u[w].filter(o));f[w].sort(y),u[w].filter(function(S){return!o(S)}).sort(function(S){return u[w].indexOf(S)}).forEach(function(S){f[w].splice(f[w].indexOf(S),1),f[w].splice(u[w].indexOf(S),0,S)}),e.emit("plotly_restyle",[{dimensions:[f[w]]},[h[w]]])};b(e,s,{width:T.w,height:T.h,margin:{t:T.t,r:T.r,b:T.b,l:T.l}},{filterChanged:c,hover:i,unhover:d,axesMoved:x})}};p.reglPrecompiled=L},74996:function(j,V,t){var b=t(45464),P=t(86968).u,o=t(25376),L=t(22548),A=t(21776).Ks,v=t(21776).Gw,p=t(92880).extendFlat,r=t(98192).c,e=o({editType:"plot",arrayOk:!0,colorEditType:"plot"});j.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:L.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},pattern:r,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:p({},b.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:A({},{keys:["label","color","value","percent","text"]}),texttemplate:v({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:p({},e,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:p({},e,{}),outsidetextfont:p({},e,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:p({},e,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:P({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:p({},e,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},80036:function(j,V,t){var b=t(7316);V.name="pie",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},45768:function(j,V,t){var b=t(38248),P=t(49760),o=t(76308),L={};function A(e,s){var n=[],l=e._fullLayout,f=l.hiddenlabels||[],u=s.labels,g=s.marker.colors||[],h=s.values,T=s._length,c=s._hasValues&&T,i,d;if(s.dlabel)for(u=new Array(T),i=0;i<T;i++)u[i]=String(s.label0+i*s.dlabel);var x={},w=v(l["_"+s.type+"colormap"]),C=0,y=!1;for(i=0;i<T;i++){var S,M,a;if(c){if(S=h[i],!b(S))continue;S=+S}else S=1;M=u[i],(M===void 0||M==="")&&(M=i),M=String(M);var E=x[M];E===void 0?(x[M]=n.length,a=f.indexOf(M)!==-1,a||(C+=S),n.push({v:S,label:M,color:w(g[i],M),i,pts:[i],hidden:a})):(y=!0,d=n[E],d.v+=S,d.pts.push(i),d.hidden||(C+=S),d.color===!1&&g[i]&&(d.color=w(g[i],M)))}n=n.filter(function(k){return k.v>=0});var m=s.type==="funnelarea"?y:s.sort;return m&&n.sort(function(k,I){return I.v-k.v}),n[0]&&(n[0].vTotal=C),n}function v(e){return function(n,l){return!n||(n=P(n),!n.isValid())?!1:(n=o.addOpacity(n,n.getAlpha()),e[l]||(e[l]=n),n)}}function p(e,s){var n=(s||{}).type;n||(n="pie");var l=e._fullLayout,f=e.calcdata,u=l[n+"colorway"],g=l["_"+n+"colormap"];l["extend"+n+"colors"]&&(u=r(u,L));for(var h=0,T=0;T<f.length;T++){var c=f[T],i=c[0].trace.type;if(i===n)for(var d=0;d<c.length;d++){var x=c[d];x.color===!1&&(g[x.label]?x.color=g[x.label]:(g[x.label]=x.color=u[h%u.length],h++))}}}function r(e,s){var n,l=JSON.stringify(e),f=s[l];if(!f){for(f=e.slice(),n=0;n<e.length;n++)f.push(P(e[n]).lighten(20).toHexString());for(n=0;n<e.length;n++)f.push(P(e[n]).darken(20).toHexString());s[l]=f}return f}j.exports={calc:A,crossTraceCalc:p,makePullColorFn:v,generateExtendedColors:r}},74174:function(j,V,t){var b=t(38248),P=t(3400),o=t(74996),L=t(86968).Q,A=t(31508).handleText,v=t(3400).coercePattern;function p(s,n){var l=P.isArrayOrTypedArray(s),f=P.isArrayOrTypedArray(n),u=Math.min(l?s.length:1/0,f?n.length:1/0);if(isFinite(u)||(u=0),u&&f){for(var g,h=0;h<u;h++){var T=n[h];if(b(T)&&T>0){g=!0;break}}g||(u=0)}return{hasLabels:l,hasValues:f,len:u}}function r(s,n,l,f,u){var g=f("marker.line.width");g&&f("marker.line.color",u?void 0:l.paper_bgcolor);var h=f("marker.colors");v(f,"marker.pattern",h),s.marker&&!n.marker.pattern.fgcolor&&(n.marker.pattern.fgcolor=s.marker.colors),n.marker.pattern.bgcolor||(n.marker.pattern.bgcolor=l.paper_bgcolor)}function e(s,n,l,f){function u(E,m){return P.coerce(s,n,o,E,m)}var g=u("labels"),h=u("values"),T=p(g,h),c=T.len;if(n._hasLabels=T.hasLabels,n._hasValues=T.hasValues,!n._hasLabels&&n._hasValues&&(u("label0"),u("dlabel")),!c){n.visible=!1;return}n._length=c,r(s,n,f,u,!0),u("scalegroup");var i=u("text"),d=u("texttemplate"),x;if(d||(x=u("textinfo",P.isArrayOrTypedArray(i)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),d||x&&x!=="none"){var w=u("textposition");A(s,n,f,u,w,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var C=Array.isArray(w)||w==="auto",y=C||w==="outside";y&&u("automargin"),(w==="inside"||w==="auto"||Array.isArray(w))&&u("insidetextorientation")}else x==="none"&&u("textposition","none");L(n,f,u);var S=u("hole"),M=u("title.text");if(M){var a=u("title.position",S?"middle center":"top center");!S&&a==="middle center"&&(n.title.position="top center"),P.coerceFont(u,"title.font",f.font)}u("sort"),u("direction"),u("rotation"),u("pull")}j.exports={handleLabelsAndValues:p,handleMarkerDefaults:r,supplyDefaults:e}},53644:function(j,V,t){var b=t(10624).appendArrayMultiPointValues;j.exports=function(o,L){var A={curveNumber:L.index,pointNumbers:o.pts,data:L._input,fullData:L,label:o.label,color:o.color,value:o.v,percent:o.percent,text:o.text,bbox:o.bbox,v:o.v};return o.pts.length===1&&(A.pointNumber=A.i=o.pts[0]),b(A,L,o.pts),L.type==="funnelarea"&&(delete A.v,delete A.i),A}},21552:function(j,V,t){var b=t(43616),P=t(76308);j.exports=function(L,A,v,p){var r=v.marker.pattern;r&&r.shape?b.pointStyle(L,v,p,A):P.fill(L,A.color)}},69656:function(j,V,t){var b=t(3400);function P(o){return o.indexOf("e")!==-1?o.replace(/[.]?0+e/,"e"):o.indexOf(".")!==-1?o.replace(/[.]?0+$/,""):o}V.formatPiePercent=function(L,A){var v=P((L*100).toPrecision(3));return b.numSeparate(v,A)+"%"},V.formatPieValue=function(L,A){var v=P(L.toPrecision(10));return b.numSeparate(v,A)},V.getFirstFilled=function(L,A){if(b.isArrayOrTypedArray(L))for(var v=0;v<A.length;v++){var p=L[A[v]];if(p||p===0||p==="")return p}},V.castOption=function(L,A){if(b.isArrayOrTypedArray(L))return V.getFirstFilled(L,A);if(L)return L},V.getRotationAngle=function(o){return(o==="auto"?0:o)*Math.PI/180}},75792:function(j,V,t){j.exports={attributes:t(74996),supplyDefaults:t(74174).supplyDefaults,supplyLayoutDefaults:t(90248),layoutAttributes:t(85204),calc:t(45768).calc,crossTraceCalc:t(45768).crossTraceCalc,plot:t(37820).plot,style:t(22152),styleOne:t(10528),moduleType:"trace",name:"pie",basePlotModule:t(80036),categories:["pie-like","pie","showLegend"],meta:{}}},85204:function(j){j.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},90248:function(j,V,t){var b=t(3400),P=t(85204);j.exports=function(L,A){function v(p,r){return b.coerce(L,A,P,p,r)}v("hiddenlabels"),v("piecolorway",A.colorway),v("extendpiecolors")}},37820:function(j,V,t){var b=t(33428),P=t(7316),o=t(93024),L=t(76308),A=t(43616),v=t(3400),p=v.strScale,r=v.strTranslate,e=t(72736),s=t(82744),n=s.recordMinTextSize,l=s.clearMinTextSize,f=t(78048).TEXTPAD,u=t(69656),g=t(53644),h=t(3400).isValidTextValue;function T(Z,Q){var W=Z._context.staticPlot,J=Z._fullLayout,it=J._size;l("pie",J),w(Q,Z),G(Q,it);var K=v.makeTraceGroups(J._pielayer,Q,"trace").each(function(H){var at=b.select(this),tt=H[0],lt=tt.trace;$(H),at.attr("stroke-linejoin","round"),at.each(function(){var dt=b.select(this).selectAll("g.slice").data(H);dt.enter().append("g").classed("slice",!0),dt.exit().remove();var mt=[[[],[]],[[],[]]],gt=!1;dt.each(function(Tt,Bt){if(Tt.hidden){b.select(this).selectAll("path,g").remove();return}Tt.pointNumber=Tt.i,Tt.curveNumber=lt.index,mt[Tt.pxmid[1]<0?0:1][Tt.pxmid[0]<0?0:1].push(Tt);var Gt=tt.cx,te=tt.cy,Wt=b.select(this),jt=Wt.selectAll("path.surface").data([Tt]);if(jt.enter().append("path").classed("surface",!0).style({"pointer-events":W?"none":"all"}),Wt.call(i,Z,H),lt.pull){var ie=+u.castOption(lt.pull,Tt.pts)||0;ie>0&&(Gt+=ie*Tt.pxmid[0],te+=ie*Tt.pxmid[1])}Tt.cxFinal=Gt,Tt.cyFinal=te;function ue(Nt,Ht,St,kt){var Ft=kt*(Ht[0]-Nt[0]),At=kt*(Ht[1]-Nt[1]);return"a"+kt*tt.r+","+kt*tt.r+" 0 "+Tt.largeArc+(St?" 1 ":" 0 ")+Ft+","+At}var fe=lt.hole;if(Tt.v===tt.vTotal){var pe="M"+(Gt+Tt.px0[0])+","+(te+Tt.px0[1])+ue(Tt.px0,Tt.pxmid,!0,1)+ue(Tt.pxmid,Tt.px0,!0,1)+"Z";fe?jt.attr("d","M"+(Gt+fe*Tt.px0[0])+","+(te+fe*Tt.px0[1])+ue(Tt.px0,Tt.pxmid,!1,fe)+ue(Tt.pxmid,Tt.px0,!1,fe)+"Z"+pe):jt.attr("d",pe)}else{var Te=ue(Tt.px0,Tt.px1,!0,1);if(fe){var Qt=1-fe;jt.attr("d","M"+(Gt+fe*Tt.px1[0])+","+(te+fe*Tt.px1[1])+ue(Tt.px1,Tt.px0,!1,fe)+"l"+Qt*Tt.px0[0]+","+Qt*Tt.px0[1]+Te+"Z")}else jt.attr("d","M"+Gt+","+te+"l"+Tt.px0[0]+","+Tt.px0[1]+Te+"Z")}ot(Z,Tt,tt);var Pt=u.castOption(lt.textposition,Tt.pts),Ot=Wt.selectAll("g.slicetext").data(Tt.text&&Pt!=="none"?[0]:[]);Ot.enter().append("g").classed("slicetext",!0),Ot.exit().remove(),Ot.each(function(){var Nt=v.ensureSingle(b.select(this),"text","",function(Dt){Dt.attr("data-notex",1)}),Ht=v.ensureUniformFontSize(Z,Pt==="outside"?d(lt,Tt,J.font):x(lt,Tt,J.font));Nt.text(Tt.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(A.font,Ht).call(e.convertToTspans,Z);var St=A.bBox(Nt.node()),kt;if(Pt==="outside")kt=I(St,Tt);else if(kt=C(St,Tt,tt),Pt==="auto"&&kt.scale<1){var Ft=v.ensureUniformFontSize(Z,lt.outsidetextfont);Nt.call(A.font,Ft),St=A.bBox(Nt.node()),kt=I(St,Tt)}var At=kt.textPosAngle,ft=At===void 0?Tt.pxmid:et(tt.r,At);if(kt.targetX=Gt+ft[0]*kt.rCenter+(kt.x||0),kt.targetY=te+ft[1]*kt.rCenter+(kt.y||0),nt(kt,St),kt.outside){var pt=kt.targetY;Tt.yLabelMin=pt-St.height/2,Tt.yLabelMid=pt,Tt.yLabelMax=pt+St.height/2,Tt.labelExtraX=0,Tt.labelExtraY=0,gt=!0}kt.fontSize=Ht.size,n(lt.type,kt,J),H[Bt].transform=kt,v.setTransormAndDisplay(Nt,kt)})});var Mt=b.select(this).selectAll("g.titletext").data(lt.title.text?[0]:[]);if(Mt.enter().append("g").classed("titletext",!0),Mt.exit().remove(),Mt.each(function(){var Tt=v.ensureSingle(b.select(this),"text","",function(te){te.attr("data-notex",1)}),Bt=lt.title.text;lt._meta&&(Bt=v.templateString(Bt,lt._meta)),Tt.text(Bt).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(A.font,lt.title.font).call(e.convertToTspans,Z);var Gt;lt.title.position==="middle center"?Gt=O(tt):Gt=z(tt,it),Tt.attr("transform",r(Gt.x,Gt.y)+p(Math.min(1,Gt.scale))+r(Gt.tx,Gt.ty))}),gt&&N(mt,lt),c(dt,lt),gt&&lt.automargin){var Lt=A.bBox(at.node()),zt=lt.domain,xt=it.w*(zt.x[1]-zt.x[0]),Ct=it.h*(zt.y[1]-zt.y[0]),wt=(.5*xt-tt.r)/it.w,Rt=(.5*Ct-tt.r)/it.h;P.autoMargin(Z,"pie."+lt.uid+".automargin",{xl:zt.x[0]-wt,xr:zt.x[1]+wt,yb:zt.y[0]-Rt,yt:zt.y[1]+Rt,l:Math.max(tt.cx-tt.r-Lt.left,0),r:Math.max(Lt.right-(tt.cx+tt.r),0),b:Math.max(Lt.bottom-(tt.cy+tt.r),0),t:Math.max(tt.cy-tt.r-Lt.top,0),pad:5})}})});setTimeout(function(){K.selectAll("tspan").each(function(){var H=b.select(this);H.attr("dy")&&H.attr("dy",H.attr("dy"))})},0)}function c(Z,Q){Z.each(function(W){var J=b.select(this);if(!W.labelExtraX&&!W.labelExtraY){J.select("path.textline").remove();return}var it=J.select("g.slicetext text");W.transform.targetX+=W.labelExtraX,W.transform.targetY+=W.labelExtraY,v.setTransormAndDisplay(it,W.transform);var K=W.cxFinal+W.pxmid[0],H=W.cyFinal+W.pxmid[1],at="M"+K+","+H,tt=(W.yLabelMax-W.yLabelMin)*(W.pxmid[0]<0?-1:1)/4;if(W.labelExtraX){var lt=W.labelExtraX*W.pxmid[1]/W.pxmid[0],dt=W.yLabelMid+W.labelExtraY-(W.cyFinal+W.pxmid[1]);Math.abs(lt)>Math.abs(dt)?at+="l"+dt*W.pxmid[0]/W.pxmid[1]+","+dt+"H"+(K+W.labelExtraX+tt):at+="l"+W.labelExtraX+","+lt+"v"+(dt-lt)+"h"+tt}else at+="V"+(W.yLabelMid+W.labelExtraY)+"h"+tt;v.ensureSingle(J,"path","textline").call(L.stroke,Q.outsidetextfont.color).attr({"stroke-width":Math.min(2,Q.outsidetextfont.size/8),d:at,fill:"none"})})}function i(Z,Q,W){var J=W[0],it=J.cx,K=J.cy,H=J.trace,at=H.type==="funnelarea";"_hasHoverLabel"in H||(H._hasHoverLabel=!1),"_hasHoverEvent"in H||(H._hasHoverEvent=!1),Z.on("mouseover",function(tt){var lt=Q._fullLayout,dt=Q._fullData[H.index];if(!(Q._dragging||lt.hovermode===!1)){var mt=dt.hoverinfo;if(Array.isArray(mt)&&(mt=o.castHoverinfo({hoverinfo:[u.castOption(mt,tt.pts)],_module:H._module},lt,0)),mt==="all"&&(mt="label+text+value+percent+name"),dt.hovertemplate||mt!=="none"&&mt!=="skip"&&mt){var gt=tt.rInscribed||0,Mt=it+tt.pxmid[0]*(1-gt),Lt=K+tt.pxmid[1]*(1-gt),zt=lt.separators,xt=[];if(mt&&mt.indexOf("label")!==-1&&xt.push(tt.label),tt.text=u.castOption(dt.hovertext||dt.text,tt.pts),mt&&mt.indexOf("text")!==-1){var Ct=tt.text;v.isValidTextValue(Ct)&&xt.push(Ct)}tt.value=tt.v,tt.valueLabel=u.formatPieValue(tt.v,zt),mt&&mt.indexOf("value")!==-1&&xt.push(tt.valueLabel),tt.percent=tt.v/J.vTotal,tt.percentLabel=u.formatPiePercent(tt.percent,zt),mt&&mt.indexOf("percent")!==-1&&xt.push(tt.percentLabel);var wt=dt.hoverlabel,Rt=wt.font,Tt=[];o.loneHover({trace:H,x0:Mt-gt*J.r,x1:Mt+gt*J.r,y:Lt,_x0:at?it+tt.TL[0]:Mt-gt*J.r,_x1:at?it+tt.TR[0]:Mt+gt*J.r,_y0:at?K+tt.TL[1]:Lt-gt*J.r,_y1:at?K+tt.BL[1]:Lt+gt*J.r,text:xt.join("<br>"),name:dt.hovertemplate||mt.indexOf("name")!==-1?dt.name:void 0,idealAlign:tt.pxmid[0]<0?"left":"right",color:u.castOption(wt.bgcolor,tt.pts)||tt.color,borderColor:u.castOption(wt.bordercolor,tt.pts),fontFamily:u.castOption(Rt.family,tt.pts),fontSize:u.castOption(Rt.size,tt.pts),fontColor:u.castOption(Rt.color,tt.pts),nameLength:u.castOption(wt.namelength,tt.pts),textAlign:u.castOption(wt.align,tt.pts),hovertemplate:u.castOption(dt.hovertemplate,tt.pts),hovertemplateLabels:tt,eventData:[g(tt,dt)]},{container:lt._hoverlayer.node(),outerContainer:lt._paper.node(),gd:Q,inOut_bbox:Tt}),tt.bbox=Tt[0],H._hasHoverLabel=!0}H._hasHoverEvent=!0,Q.emit("plotly_hover",{points:[g(tt,dt)],event:b.event})}}),Z.on("mouseout",function(tt){var lt=Q._fullLayout,dt=Q._fullData[H.index],mt=b.select(this).datum();H._hasHoverEvent&&(tt.originalEvent=b.event,Q.emit("plotly_unhover",{points:[g(mt,dt)],event:b.event}),H._hasHoverEvent=!1),H._hasHoverLabel&&(o.loneUnhover(lt._hoverlayer.node()),H._hasHoverLabel=!1)}),Z.on("click",function(tt){var lt=Q._fullLayout,dt=Q._fullData[H.index];Q._dragging||lt.hovermode===!1||(Q._hoverdata=[g(tt,dt)],o.click(Q,b.event))})}function d(Z,Q,W){var J=u.castOption(Z.outsidetextfont.color,Q.pts)||u.castOption(Z.textfont.color,Q.pts)||W.color,it=u.castOption(Z.outsidetextfont.family,Q.pts)||u.castOption(Z.textfont.family,Q.pts)||W.family,K=u.castOption(Z.outsidetextfont.size,Q.pts)||u.castOption(Z.textfont.size,Q.pts)||W.size,H=u.castOption(Z.outsidetextfont.weight,Q.pts)||u.castOption(Z.textfont.weight,Q.pts)||W.weight,at=u.castOption(Z.outsidetextfont.style,Q.pts)||u.castOption(Z.textfont.style,Q.pts)||W.style,tt=u.castOption(Z.outsidetextfont.variant,Q.pts)||u.castOption(Z.textfont.variant,Q.pts)||W.variant,lt=u.castOption(Z.outsidetextfont.textcase,Q.pts)||u.castOption(Z.textfont.textcase,Q.pts)||W.textcase,dt=u.castOption(Z.outsidetextfont.lineposition,Q.pts)||u.castOption(Z.textfont.lineposition,Q.pts)||W.lineposition,mt=u.castOption(Z.outsidetextfont.shadow,Q.pts)||u.castOption(Z.textfont.shadow,Q.pts)||W.shadow;return{color:J,family:it,size:K,weight:H,style:at,variant:tt,textcase:lt,lineposition:dt,shadow:mt}}function x(Z,Q,W){var J=u.castOption(Z.insidetextfont.color,Q.pts);!J&&Z._input.textfont&&(J=u.castOption(Z._input.textfont.color,Q.pts));var it=u.castOption(Z.insidetextfont.family,Q.pts)||u.castOption(Z.textfont.family,Q.pts)||W.family,K=u.castOption(Z.insidetextfont.size,Q.pts)||u.castOption(Z.textfont.size,Q.pts)||W.size,H=u.castOption(Z.insidetextfont.weight,Q.pts)||u.castOption(Z.textfont.weight,Q.pts)||W.weight,at=u.castOption(Z.insidetextfont.style,Q.pts)||u.castOption(Z.textfont.style,Q.pts)||W.style,tt=u.castOption(Z.insidetextfont.variant,Q.pts)||u.castOption(Z.textfont.variant,Q.pts)||W.variant,lt=u.castOption(Z.insidetextfont.textcase,Q.pts)||u.castOption(Z.textfont.textcase,Q.pts)||W.textcase,dt=u.castOption(Z.insidetextfont.lineposition,Q.pts)||u.castOption(Z.textfont.lineposition,Q.pts)||W.lineposition,mt=u.castOption(Z.insidetextfont.shadow,Q.pts)||u.castOption(Z.textfont.shadow,Q.pts)||W.shadow;return{color:J||L.contrast(Q.color),family:it,size:K,weight:H,style:at,variant:tt,textcase:lt,lineposition:dt,shadow:mt}}function w(Z,Q){for(var W,J,it=0;it<Z.length;it++)if(W=Z[it][0],J=W.trace,J.title.text){var K=J.title.text;J._meta&&(K=v.templateString(K,J._meta));var H=A.tester.append("text").attr("data-notex",1).text(K).call(A.font,J.title.font).call(e.convertToTspans,Q),at=A.bBox(H.node(),!0);W.titleBox={width:at.width,height:at.height},H.remove()}}function C(Z,Q,W){var J=W.r||Q.rpx1,it=Q.rInscribed,K=Q.startangle===Q.stopangle;if(K)return{rCenter:1-it,scale:0,rotate:0,textPosAngle:0};var H=Q.ring,at=H===1&&Math.abs(Q.startangle-Q.stopangle)===Math.PI*2,tt=Q.halfangle,lt=Q.midangle,dt=W.trace.insidetextorientation,mt=dt==="horizontal",gt=dt==="tangential",Mt=dt==="radial",Lt=dt==="auto",zt=[],xt;if(!Lt){var Ct=function(Wt,jt){if(y(Q,Wt)){var ie=Math.abs(Wt-Q.startangle),ue=Math.abs(Wt-Q.stopangle),fe=ie<ue?ie:ue;jt==="tan"?xt=M(Z,J,H,fe,0):xt=S(Z,J,H,fe,Math.PI/2),xt.textPosAngle=Wt,zt.push(xt)}},wt;if(mt||gt){for(wt=4;wt>=-4;wt-=2)Ct(Math.PI*wt,"tan");for(wt=4;wt>=-4;wt-=2)Ct(Math.PI*(wt+1),"tan")}if(mt||Mt){for(wt=4;wt>=-4;wt-=2)Ct(Math.PI*(wt+1.5),"rad");for(wt=4;wt>=-4;wt-=2)Ct(Math.PI*(wt+.5),"rad")}}if(at||Lt||mt){var Rt=Math.sqrt(Z.width*Z.width+Z.height*Z.height);if(xt={scale:it*J*2/Rt,rCenter:1-it,rotate:0},xt.textPosAngle=(Q.startangle+Q.stopangle)/2,xt.scale>=1)return xt;zt.push(xt)}(Lt||Mt)&&(xt=S(Z,J,H,tt,lt),xt.textPosAngle=(Q.startangle+Q.stopangle)/2,zt.push(xt)),(Lt||gt)&&(xt=M(Z,J,H,tt,lt),xt.textPosAngle=(Q.startangle+Q.stopangle)/2,zt.push(xt));for(var Tt=0,Bt=0,Gt=0;Gt<zt.length;Gt++){var te=zt[Gt].scale;if(Bt<te&&(Bt=te,Tt=Gt),!Lt&&Bt>=1)break}return zt[Tt]}function y(Z,Q){var W=Z.startangle,J=Z.stopangle;return W>Q&&Q>J||W<Q&&Q<J}function S(Z,Q,W,J,it){Q=Math.max(0,Q-2*f);var K=Z.width/Z.height,H=m(K,J,Q,W);return{scale:H*2/Z.height,rCenter:a(K,H/Q),rotate:E(it)}}function M(Z,Q,W,J,it){Q=Math.max(0,Q-2*f);var K=Z.height/Z.width,H=m(K,J,Q,W);return{scale:H*2/Z.width,rCenter:a(K,H/Q),rotate:E(it+Math.PI/2)}}function a(Z,Q){return Math.cos(Q)-Z*Q}function E(Z){return(180/Math.PI*Z+720)%180-90}function m(Z,Q,W,J){var it=Z+1/(2*Math.tan(Q));return W*Math.min(1/(Math.sqrt(it*it+.5)+it),J/(Math.sqrt(Z*Z+J/2)+Z))}function k(Z,Q){return Z.v===Q.vTotal&&!Q.trace.hole?1:Math.min(1/(1+1/Math.sin(Z.halfangle)),Z.ring/2)}function I(Z,Q){var W=Q.pxmid[0],J=Q.pxmid[1],it=Z.width/2,K=Z.height/2;return W<0&&(it*=-1),J<0&&(K*=-1),{scale:1,rCenter:1,rotate:0,x:it+Math.abs(K)*(it>0?1:-1)/2,y:K/(1+W*W/(J*J)),outside:!0}}function O(Z){var Q=Math.sqrt(Z.titleBox.width*Z.titleBox.width+Z.titleBox.height*Z.titleBox.height);return{x:Z.cx,y:Z.cy,scale:Z.trace.hole*Z.r*2/Q,tx:0,ty:-Z.titleBox.height/2+Z.trace.title.font.size}}function z(Z,Q){var W=1,J=1,it,K=Z.trace,H={x:Z.cx,y:Z.cy},at={tx:0,ty:0};at.ty+=K.title.font.size,it=_(K),K.title.position.indexOf("top")!==-1?(H.y-=(1+it)*Z.r,at.ty-=Z.titleBox.height):K.title.position.indexOf("bottom")!==-1&&(H.y+=(1+it)*Z.r);var tt=B(Z.r,Z.trace.aspectratio),lt=Q.w*(K.domain.x[1]-K.domain.x[0])/2;return K.title.position.indexOf("left")!==-1?(lt=lt+tt,H.x-=(1+it)*tt,at.tx+=Z.titleBox.width/2):K.title.position.indexOf("center")!==-1?lt*=2:K.title.position.indexOf("right")!==-1&&(lt=lt+tt,H.x+=(1+it)*tt,at.tx-=Z.titleBox.width/2),W=lt/Z.titleBox.width,J=F(Z,Q)/Z.titleBox.height,{x:H.x,y:H.y,scale:Math.min(W,J),tx:at.tx,ty:at.ty}}function B(Z,Q){return Z/(Q===void 0?1:Q)}function F(Z,Q){var W=Z.trace,J=Q.h*(W.domain.y[1]-W.domain.y[0]);return Math.min(Z.titleBox.height,J/2)}function _(Z){var Q=Z.pull;if(!Q)return 0;var W;if(v.isArrayOrTypedArray(Q))for(Q=0,W=0;W<Z.pull.length;W++)Z.pull[W]>Q&&(Q=Z.pull[W]);return Q}function N(Z,Q){var W,J,it,K,H,at,tt,lt,dt,mt,gt,Mt,Lt;function zt(Rt,Tt){return Rt.pxmid[1]-Tt.pxmid[1]}function xt(Rt,Tt){return Tt.pxmid[1]-Rt.pxmid[1]}function Ct(Rt,Tt){Tt||(Tt={});var Bt=Tt.labelExtraY+(J?Tt.yLabelMax:Tt.yLabelMin),Gt=J?Rt.yLabelMin:Rt.yLabelMax,te=J?Rt.yLabelMax:Rt.yLabelMin,Wt=Rt.cyFinal+H(Rt.px0[1],Rt.px1[1]),jt=Bt-Gt,ie,ue,fe,pe,Te,Qt;if(jt*tt>0&&(Rt.labelExtraY=jt),!!v.isArrayOrTypedArray(Q.pull))for(ue=0;ue<mt.length;ue++)fe=mt[ue],!(fe===Rt||(u.castOption(Q.pull,Rt.pts)||0)>=(u.castOption(Q.pull,fe.pts)||0))&&((Rt.pxmid[1]-fe.pxmid[1])*tt>0?(pe=fe.cyFinal+H(fe.px0[1],fe.px1[1]),jt=pe-Gt-Rt.labelExtraY,jt*tt>0&&(Rt.labelExtraY+=jt)):(te+Rt.labelExtraY-Wt)*tt>0&&(ie=3*at*Math.abs(ue-mt.indexOf(Rt)),Te=fe.cxFinal+K(fe.px0[0],fe.px1[0]),Qt=Te+ie-(Rt.cxFinal+Rt.pxmid[0])-Rt.labelExtraX,Qt*at>0&&(Rt.labelExtraX+=Qt)))}for(J=0;J<2;J++)for(it=J?zt:xt,H=J?Math.max:Math.min,tt=J?1:-1,W=0;W<2;W++){for(K=W?Math.max:Math.min,at=W?1:-1,lt=Z[J][W],lt.sort(it),dt=Z[1-J][W],mt=dt.concat(lt),Mt=[],gt=0;gt<lt.length;gt++)lt[gt].yLabelMid!==void 0&&Mt.push(lt[gt]);for(Lt=!1,gt=0;J&&gt<dt.length;gt++)if(dt[gt].yLabelMid!==void 0){Lt=dt[gt];break}for(gt=0;gt<Mt.length;gt++){var wt=gt&&Mt[gt-1];Lt&&!gt&&(wt=Lt),Ct(Mt[gt],wt)}}}function G(Z,Q){for(var W=[],J=0;J<Z.length;J++){var it=Z[J][0],K=it.trace,H=K.domain,at=Q.w*(H.x[1]-H.x[0]),tt=Q.h*(H.y[1]-H.y[0]);K.title.text&&K.title.position!=="middle center"&&(tt-=F(it,Q));var lt=at/2,dt=tt/2;K.type==="funnelarea"&&!K.scalegroup&&(dt/=K.aspectratio),it.r=Math.min(lt,dt)/(1+_(K)),it.cx=Q.l+Q.w*(K.domain.x[1]+K.domain.x[0])/2,it.cy=Q.t+Q.h*(1-K.domain.y[0])-tt/2,K.title.text&&K.title.position.indexOf("bottom")!==-1&&(it.cy-=F(it,Q)),K.scalegroup&&W.indexOf(K.scalegroup)===-1&&W.push(K.scalegroup)}X(Z,W)}function X(Z,Q){for(var W,J,it,K=0;K<Q.length;K++){var H=1/0,at=Q[K];for(J=0;J<Z.length;J++)if(W=Z[J][0],it=W.trace,it.scalegroup===at){var tt;if(it.type==="pie")tt=W.r*W.r;else if(it.type==="funnelarea"){var lt,dt;it.aspectratio>1?(lt=W.r,dt=lt/it.aspectratio):(dt=W.r,lt=dt*it.aspectratio),lt*=(1+it.baseratio)/2,tt=lt*dt}H=Math.min(H,tt/W.vTotal)}for(J=0;J<Z.length;J++)if(W=Z[J][0],it=W.trace,it.scalegroup===at){var mt=H*W.vTotal;it.type==="funnelarea"&&(mt/=(1+it.baseratio)/2,mt/=it.aspectratio),W.r=Math.sqrt(mt)}}}function $(Z){var Q=Z[0],W=Q.r,J=Q.trace,it=u.getRotationAngle(J.rotation),K=2*Math.PI/Q.vTotal,H="px0",at="px1",tt,lt,dt;if(J.direction==="counterclockwise"){for(tt=0;tt<Z.length&&Z[tt].hidden;tt++);if(tt===Z.length)return;it+=K*Z[tt].v,K*=-1,H="px1",at="px0"}for(dt=et(W,it),tt=0;tt<Z.length;tt++)lt=Z[tt],!lt.hidden&&(lt[H]=dt,lt.startangle=it,it+=K*lt.v/2,lt.pxmid=et(W,it),lt.midangle=it,it+=K*lt.v/2,dt=et(W,it),lt.stopangle=it,lt[at]=dt,lt.largeArc=lt.v>Q.vTotal/2?1:0,lt.halfangle=Math.PI*Math.min(lt.v/Q.vTotal,.5),lt.ring=1-J.hole,lt.rInscribed=k(lt,Q))}function et(Z,Q){return[Z*Math.sin(Q),-Z*Math.cos(Q)]}function ot(Z,Q,W){var J=Z._fullLayout,it=W.trace,K=it.texttemplate,H=it.textinfo;if(!K&&H&&H!=="none"){var at=H.split("+"),tt=function(Tt){return at.indexOf(Tt)!==-1},lt=tt("label"),dt=tt("text"),mt=tt("value"),gt=tt("percent"),Mt=J.separators,Lt;if(Lt=lt?[Q.label]:[],dt){var zt=u.getFirstFilled(it.text,Q.pts);h(zt)&&Lt.push(zt)}mt&&Lt.push(u.formatPieValue(Q.v,Mt)),gt&&Lt.push(u.formatPiePercent(Q.v/W.vTotal,Mt)),Q.text=Lt.join("<br>")}function xt(Tt){return{label:Tt.label,value:Tt.v,valueLabel:u.formatPieValue(Tt.v,J.separators),percent:Tt.v/W.vTotal,percentLabel:u.formatPiePercent(Tt.v/W.vTotal,J.separators),color:Tt.color,text:Tt.text,customdata:v.castOption(it,Tt.i,"customdata")}}if(K){var Ct=v.castOption(it,Q.i,"texttemplate");if(!Ct)Q.text="";else{var wt=xt(Q),Rt=u.getFirstFilled(it.text,Q.pts);(h(Rt)||Rt==="")&&(wt.text=Rt),Q.text=v.texttemplateString(Ct,wt,Z._fullLayout._d3locale,wt,it._meta||{})}}}function nt(Z,Q){var W=Z.rotate*Math.PI/180,J=Math.cos(W),it=Math.sin(W),K=(Q.left+Q.right)/2,H=(Q.top+Q.bottom)/2;Z.textX=K*J-H*it,Z.textY=K*it+H*J,Z.noCenter=!0}j.exports={plot:T,formatSliceLabel:ot,transformInsideText:C,determineInsideTextFont:x,positionTitleOutside:z,prerenderTitles:w,layoutAreas:G,attachFxHandlers:i,computeTransform:nt}},22152:function(j,V,t){var b=t(33428),P=t(10528),o=t(82744).resizeText;j.exports=function(A){var v=A._fullLayout._pielayer.selectAll(".trace");o(A,v,"pie"),v.each(function(p){var r=p[0],e=r.trace,s=b.select(this);s.style({opacity:e.opacity}),s.selectAll("path.surface").each(function(n){b.select(this).call(P,n,e,A)})})}},10528:function(j,V,t){var b=t(76308),P=t(69656).castOption,o=t(21552);j.exports=function(A,v,p,r){var e=p.marker.line,s=P(e.color,v.pts)||b.defaultLine,n=P(e.width,v.pts)||0;A.call(o,v,p,r).style("stroke-width",n).call(b.stroke,s)}},35484:function(j,V,t){var b=t(52904);j.exports={x:b.x,y:b.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:b.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},11072:function(j,V,t){var b=t(67792).gl_pointcloud2d,P=t(3400).isArrayOrTypedArray,o=t(43080),L=t(19280).findExtremes,A=t(44928);function v(e,s){this.scene=e,this.uid=s,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=b(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var p=v.prototype;p.handlePick=function(e){var s=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[s*2],this.pickXYData[s*2+1]]:[this.pickXData[s],this.pickYData[s]],textLabel:P(this.textLabels)?this.textLabels[s]:this.textLabels,color:this.color,name:this.name,pointIndex:s,hoverinfo:this.hoverinfo}},p.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=A(e,{})},p.updateFast=function(e){var s=this.xData=this.pickXData=e.x,n=this.yData=this.pickYData=e.y,l=this.pickXYData=e.xy,f=e.xbounds&&e.ybounds,u=e.indices,g,h,T,c=this.bounds,i,d,x;if(l){if(T=l,g=l.length>>>1,f)c[0]=e.xbounds[0],c[2]=e.xbounds[1],c[1]=e.ybounds[0],c[3]=e.ybounds[1];else for(x=0;x<g;x++)i=T[x*2],d=T[x*2+1],i<c[0]&&(c[0]=i),i>c[2]&&(c[2]=i),d<c[1]&&(c[1]=d),d>c[3]&&(c[3]=d);if(u)h=u;else for(h=new Int32Array(g),x=0;x<g;x++)h[x]=x}else for(g=s.length,T=new Float32Array(2*g),h=new Int32Array(g),x=0;x<g;x++)i=s[x],d=n[x],h[x]=x,T[x*2]=i,T[x*2+1]=d,i<c[0]&&(c[0]=i),i>c[2]&&(c[2]=i),d<c[1]&&(c[1]=d),d>c[3]&&(c[3]=d);this.idToIndex=h,this.pointcloudOptions.idToIndex=h,this.pointcloudOptions.positions=T;var w=o(e.marker.color),C=o(e.marker.border.color),y=e.opacity*e.marker.opacity;w[3]*=y,this.pointcloudOptions.color=w;var S=e.marker.blend;if(S===null){var M=100;S=s.length<M||n.length<M}this.pointcloudOptions.blend=S,C[3]*=y,this.pointcloudOptions.borderColor=C;var a=e.marker.sizemin,E=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=a,this.pointcloudOptions.sizeMax=E,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var m=this.scene.xaxis,k=this.scene.yaxis,I=E/2||.5;e._extremes[m._id]=L(m,[c[0],c[2]],{ppad:I}),e._extremes[k._id]=L(k,[c[1],c[3]],{ppad:I})},p.dispose=function(){this.pointcloud.dispose()};function r(e,s){var n=new v(e,s.uid);return n.update(s),n}j.exports=r},41904:function(j,V,t){var b=t(3400),P=t(35484);j.exports=function(L,A,v){function p(r,e){return b.coerce(L,A,P,r,e)}p("x"),p("y"),p("xbounds"),p("ybounds"),L.xy&&L.xy instanceof Float32Array&&(A.xy=L.xy),L.indices&&L.indices instanceof Int32Array&&(A.indices=L.indices),p("text"),p("marker.color",v),p("marker.opacity"),p("marker.blend"),p("marker.sizemin"),p("marker.sizemax"),p("marker.border.color",v),p("marker.border.arearatio"),A._length=null}},156:function(j,V,t){j.exports={attributes:t(35484),supplyDefaults:t(41904),calc:t(41484),plot:t(11072),moduleType:"trace",name:"pointcloud",basePlotModule:t(39952),categories:["gl","gl2d","showLegend"],meta:{}}},41440:function(j,V,t){var b=t(25376),P=t(45464),o=t(22548),L=t(55756),A=t(86968).u,v=t(21776).Ks,p=t(49084),r=t(31780).templatedArray,e=t(29736).descriptionOnlyNumbers,s=t(92880).extendFlat,n=t(67824).overrideAll,l=j.exports=n({hoverinfo:s({},P.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:L.hoverlabel,domain:A({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:e("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:b({autoShadowDflt:!0}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:L.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),align:{valType:"enumerated",values:["justify","left","right","center"],dflt:"justify"}},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},hovercolor:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:o.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:L.hoverlabel,hovertemplate:v({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:s(p().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");l.transforms=void 0},10760:function(j,V,t){var b=t(67824).overrideAll,P=t(84888)._M,o=t(59596),L=t(65460),A=t(93972),v=t(86476),p=t(22676).prepSelect,r=t(3400),e=t(24040),s="sankey";V.name=s,V.baseLayoutAttrOverrides=b({hoverlabel:L.hoverlabel},"plot","nested"),V.plot=function(l){var f=P(l.calcdata,s)[0];o(l,f),V.updateFx(l)},V.clean=function(l,f,u,g){var h=g._has&&g._has(s),T=f._has&&f._has(s);h&&!T&&(g._paperdiv.selectAll(".sankey").remove(),g._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(l){for(var f=0;f<l._fullData.length;f++)n(l,f)};function n(l,f){var u=l._fullData[f],g=l._fullLayout,h=g.dragmode,T=g.dragmode==="pan"?"move":"crosshair",c=u._bgRect;if(c&&!(h==="pan"||h==="zoom")){A(c,T);var i={_id:"x",c2p:r.identity,_offset:u._sankey.translateX,_length:u._sankey.width},d={_id:"y",c2p:r.identity,_offset:u._sankey.translateY,_length:u._sankey.height},x={gd:l,element:c.node(),plotinfo:{id:f,xaxis:i,yaxis:d,fillRangeItems:r.noop},subplot:f,xaxes:[i],yaxes:[d],doneFnCompleted:function(w){var C=l._fullData[f],y,S=C.node.groups.slice(),M=[];function a(I){for(var O=C._sankey.graph.nodes,z=0;z<O.length;z++)if(O[z].pointNumber===I)return O[z]}for(var E=0;E<w.length;E++){var m=a(w[E].pointNumber);if(m)if(m.group){for(var k=0;k<m.childrenNodes.length;k++)M.push(m.childrenNodes[k].pointNumber);S[m.pointNumber-C.node._count]=!1}else M.push(m.pointNumber)}y=S.filter(Boolean).concat([M]),e.call("_guiRestyle",l,{"node.groups":[y]},f)}};x.prepFn=function(w,C,y){p(w,C,y,x,h)},v.init(x)}}},48068:function(j,V,t){var b=t(78484),P=t(3400),o=t(71688).wrap,L=P.isArrayOrTypedArray,A=P.isIndex,v=t(8932);function p(e){var s=e.node,n=e.link,l=[],f=L(n.color),u=L(n.hovercolor),g=L(n.customdata),h={},T={},c=n.colorscales.length,i;for(i=0;i<c;i++){var d=n.colorscales[i],x=v.extractScale(d,{cLetter:"c"}),w=v.makeColorScaleFunc(x);T[d.label]=w}var C=0;for(i=0;i<n.value.length;i++)n.source[i]>C&&(C=n.source[i]),n.target[i]>C&&(C=n.target[i]);var y=C+1;e.node._count=y;var S,M=e.node.groups,a={};for(i=0;i<M.length;i++){var E=M[i];for(S=0;S<E.length;S++){var m=E[S],k=y+i;a.hasOwnProperty(m)?P.warn("Node "+m+" is already part of a group."):a[m]=k}}var I={source:[],target:[]};for(i=0;i<n.value.length;i++){var O=n.value[i],z=n.source[i],B=n.target[i];if(O>0&&A(z,y)&&A(B,y)&&!(a.hasOwnProperty(z)&&a.hasOwnProperty(B)&&a[z]===a[B])){a.hasOwnProperty(B)&&(B=a[B]),a.hasOwnProperty(z)&&(z=a[z]),z=+z,B=+B,h[z]=h[B]=!0;var F="";n.label&&n.label[i]&&(F=n.label[i]);var _=null;F&&T.hasOwnProperty(F)&&(_=T[F]),l.push({pointNumber:i,label:F,color:f?n.color[i]:n.color,hovercolor:u?n.hovercolor[i]:n.hovercolor,customdata:g?n.customdata[i]:n.customdata,concentrationscale:_,source:z,target:B,value:+O}),I.source.push(z),I.target.push(B)}}var N=y+M.length,G=L(s.color),X=L(s.customdata),$=[];for(i=0;i<N;i++)if(h[i]){var et=s.label[i];$.push({group:i>y-1,childrenNodes:[],pointNumber:i,label:et,color:G?s.color[i]:s.color,customdata:X?s.customdata[i]:s.customdata})}var ot=!1;return r(N,I.source,I.target)&&(ot=!0),{circular:ot,links:l,nodes:$,groups:M,groupLookup:a}}function r(e,s,n){for(var l=P.init2dArray(e,0),f=0;f<Math.min(s.length,n.length);f++)if(P.isIndex(s[f],e)&&P.isIndex(n[f],e)){if(s[f]===n[f])return!0;l[s[f]].push(n[f])}var u=b(l);return u.components.some(function(g){return g.length>1})}j.exports=function(s,n){var l=p(n);return o({circular:l.circular,_nodes:l.nodes,_links:l.links,_groups:l.groups,_groupLookup:l.groupLookup})}},11820:function(j){j.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},47140:function(j,V,t){var b=t(3400),P=t(41440),o=t(76308),L=t(49760),A=t(86968).Q,v=t(16132),p=t(31780),r=t(51272);j.exports=function(n,l,f,u){function g(k,I){return b.coerce(n,l,P,k,I)}var h=b.extendDeep(u.hoverlabel,n.hoverlabel),T=n.node,c=p.newContainer(l,"node");function i(k,I){return b.coerce(T,c,P.node,k,I)}i("label"),i("groups"),i("x"),i("y"),i("pad"),i("thickness"),i("line.color"),i("line.width"),i("hoverinfo",n.hoverinfo),v(T,c,i,h),i("hovertemplate"),i("align");var d=u.colorway,x=function(k){return d[k%d.length]};i("color",c.label.map(function(k,I){return o.addOpacity(x(I),.8)})),i("customdata");var w=n.link||{},C=p.newContainer(l,"link");function y(k,I){return b.coerce(w,C,P.link,k,I)}y("label"),y("arrowlen"),y("source"),y("target"),y("value"),y("line.color"),y("line.width"),y("hoverinfo",n.hoverinfo),v(w,C,y,h),y("hovertemplate");var S=L(u.paper_bgcolor).getLuminance()<.333,M=S?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)",a=y("color",M);function E(k){var I=L(k);if(!I.isValid())return k;var O=I.getAlpha();return O<=.8?I.setAlpha(O+.2):I=S?I.brighten():I.darken(),I.toRgbString()}y("hovercolor",Array.isArray(a)?a.map(E):E(a)),y("customdata"),r(w,C,{name:"colorscales",handleItemDefaults:e}),A(l,u,g),g("orientation"),g("valueformat"),g("valuesuffix");var m;c.x.length&&c.y.length&&(m="freeform"),g("arrangement",m),b.coerceFont(g,"textfont",u.font,{autoShadowDflt:!0}),l._length=null};function e(s,n){function l(f,u){return b.coerce(s,n,P.link.colorscales,f,u)}l("label"),l("cmin"),l("cmax"),l("colorscale")}},45499:function(j,V,t){j.exports={attributes:t(41440),supplyDefaults:t(47140),calc:t(48068),plot:t(59596),moduleType:"trace",name:"sankey",basePlotModule:t(10760),selectPoints:t(81128),categories:["noOpacity"],meta:{}}},59596:function(j,V,t){var b=t(33428),P=t(3400),o=P.numberFormat,L=t(83248),A=t(93024),v=t(76308),p=t(11820).cn,r=P._;function e(d){return d!==""}function s(d,x){return d.filter(function(w){return w.key===x.traceId})}function n(d,x){b.select(d).select("path").style("fill-opacity",x),b.select(d).select("rect").style("fill-opacity",x)}function l(d){b.select(d).select("text.name").style("fill","black")}function f(d){return function(x){return d.node.sourceLinks.indexOf(x.link)!==-1||d.node.targetLinks.indexOf(x.link)!==-1}}function u(d){return function(x){return x.node.sourceLinks.indexOf(d.link)!==-1||x.node.targetLinks.indexOf(d.link)!==-1}}function g(d,x,w){x&&w&&s(w,x).selectAll("."+p.sankeyLink).filter(f(x)).call(T.bind(0,x,w,!1))}function h(d,x,w){x&&w&&s(w,x).selectAll("."+p.sankeyLink).filter(f(x)).call(c.bind(0,x,w,!1))}function T(d,x,w,C){C.style("fill",function(y){if(!y.link.concentrationscale)return y.tinyColorHoverHue}).style("fill-opacity",function(y){if(!y.link.concentrationscale)return y.tinyColorHoverAlpha}),C.each(function(y){var S=y.link.label;S!==""&&s(x,d).selectAll("."+p.sankeyLink).filter(function(M){return M.link.label===S}).style("fill",function(M){if(!M.link.concentrationscale)return M.tinyColorHoverHue}).style("fill-opacity",function(M){if(!M.link.concentrationscale)return M.tinyColorHoverAlpha})}),w&&s(x,d).selectAll("."+p.sankeyNode).filter(u(d)).call(g)}function c(d,x,w,C){C.style("fill",function(y){return y.tinyColorHue}).style("fill-opacity",function(y){return y.tinyColorAlpha}),C.each(function(y){var S=y.link.label;S!==""&&s(x,d).selectAll("."+p.sankeyLink).filter(function(M){return M.link.label===S}).style("fill",function(M){return M.tinyColorHue}).style("fill-opacity",function(M){return M.tinyColorAlpha})}),w&&s(x,d).selectAll(p.sankeyNode).filter(u(d)).call(h)}function i(d,x){var w=d.hoverlabel||{},C=P.nestedProperty(w,x).get();return Array.isArray(C)?!1:C}j.exports=function(x,w){for(var C=x._fullLayout,y=C._paper,S=C._size,M=0;M<x._fullData.length;M++)if(x._fullData[M].visible&&x._fullData[M].type===p.sankey&&!x._fullData[M]._viewInitial){var a=x._fullData[M].node;x._fullData[M]._viewInitial={node:{groups:a.groups.slice(),x:a.x.slice(),y:a.y.slice()}}}var E=function(et,ot){var nt=ot.link;nt.originalEvent=b.event,x._hoverdata=[nt],A.click(x,{target:!0})},m=function(et,ot,nt){x._fullLayout.hovermode!==!1&&(b.select(et).call(T.bind(0,ot,nt,!0)),ot.link.trace.link.hoverinfo!=="skip"&&(ot.link.fullData=ot.link.trace,x.emit("plotly_hover",{event:b.event,points:[ot.link]})))},k=r(x,"source:")+" ",I=r(x,"target:")+" ",O=r(x,"concentration:")+" ",z=r(x,"incoming flow count:")+" ",B=r(x,"outgoing flow count:")+" ",F=function(et,ot){if(x._fullLayout.hovermode===!1)return;var nt=ot.link.trace.link;if(nt.hoverinfo==="none"||nt.hoverinfo==="skip")return;var Z=[];function Q(tt){var lt,dt;tt.circular?(lt=(tt.circularPathData.leftInnerExtent+tt.circularPathData.rightInnerExtent)/2,dt=tt.circularPathData.verticalFullExtent):(lt=(tt.source.x1+tt.target.x0)/2,dt=(tt.y0+tt.y1)/2);var mt=[lt,dt];return tt.trace.orientation==="v"&&mt.reverse(),mt[0]+=ot.parent.translateX,mt[1]+=ot.parent.translateY,mt}for(var W=0,J=0;J<ot.flow.links.length;J++){var it=ot.flow.links[J];if(!(x._fullLayout.hovermode==="closest"&&ot.link.pointNumber!==it.pointNumber)){ot.link.pointNumber===it.pointNumber&&(W=J),it.fullData=it.trace,nt=ot.link.trace.link;var K=Q(it),H={valueLabel:o(ot.valueFormat)(it.value)+ot.valueSuffix};Z.push({x:K[0],y:K[1],name:H.valueLabel,text:[it.label||"",k+it.source.label,I+it.target.label,it.concentrationscale?O+o("%0.2f")(it.flow.labelConcentration):""].filter(e).join("<br>"),color:i(nt,"bgcolor")||v.addOpacity(it.color,1),borderColor:i(nt,"bordercolor"),fontFamily:i(nt,"font.family"),fontSize:i(nt,"font.size"),fontColor:i(nt,"font.color"),fontWeight:i(nt,"font.weight"),fontStyle:i(nt,"font.style"),fontVariant:i(nt,"font.variant"),fontTextcase:i(nt,"font.textcase"),fontLineposition:i(nt,"font.lineposition"),fontShadow:i(nt,"font.shadow"),nameLength:i(nt,"namelength"),textAlign:i(nt,"align"),idealAlign:b.event.x<K[0]?"right":"left",hovertemplate:nt.hovertemplate,hovertemplateLabels:H,eventData:[it]})}}var at=A.loneHover(Z,{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:x,anchorIndex:W});at.each(function(){var tt=this;ot.link.concentrationscale||n(tt,.65),l(tt)})},_=function(et,ot,nt){x._fullLayout.hovermode!==!1&&(b.select(et).call(c.bind(0,ot,nt,!0)),ot.link.trace.link.hoverinfo!=="skip"&&(ot.link.fullData=ot.link.trace,x.emit("plotly_unhover",{event:b.event,points:[ot.link]})),A.loneUnhover(C._hoverlayer.node()))},N=function(et,ot,nt){var Z=ot.node;Z.originalEvent=b.event,x._hoverdata=[Z],b.select(et).call(h,ot,nt),A.click(x,{target:!0})},G=function(et,ot,nt){x._fullLayout.hovermode!==!1&&(b.select(et).call(g,ot,nt),ot.node.trace.node.hoverinfo!=="skip"&&(ot.node.fullData=ot.node.trace,x.emit("plotly_hover",{event:b.event,points:[ot.node]})))},X=function(et,ot){if(x._fullLayout.hovermode!==!1){var nt=ot.node.trace.node;if(!(nt.hoverinfo==="none"||nt.hoverinfo==="skip")){var Z=b.select(et).select("."+p.nodeRect),Q=x._fullLayout._paperdiv.node().getBoundingClientRect(),W=Z.node().getBoundingClientRect(),J=W.left-2-Q.left,it=W.right+2-Q.left,K=W.top+W.height/4-Q.top,H={valueLabel:o(ot.valueFormat)(ot.node.value)+ot.valueSuffix};ot.node.fullData=ot.node.trace,x._fullLayout._calcInverseTransform(x);var at=x._fullLayout._invScaleX,tt=x._fullLayout._invScaleY,lt=A.loneHover({x0:at*J,x1:at*it,y:tt*K,name:o(ot.valueFormat)(ot.node.value)+ot.valueSuffix,text:[ot.node.label,z+ot.node.targetLinks.length,B+ot.node.sourceLinks.length].filter(e).join("<br>"),color:i(nt,"bgcolor")||ot.tinyColorHue,borderColor:i(nt,"bordercolor"),fontFamily:i(nt,"font.family"),fontSize:i(nt,"font.size"),fontColor:i(nt,"font.color"),fontWeight:i(nt,"font.weight"),fontStyle:i(nt,"font.style"),fontVariant:i(nt,"font.variant"),fontTextcase:i(nt,"font.textcase"),fontLineposition:i(nt,"font.lineposition"),fontShadow:i(nt,"font.shadow"),nameLength:i(nt,"namelength"),textAlign:i(nt,"align"),idealAlign:"left",hovertemplate:nt.hovertemplate,hovertemplateLabels:H,eventData:[ot.node]},{container:C._hoverlayer.node(),outerContainer:C._paper.node(),gd:x});n(lt,.85),l(lt)}}},$=function(et,ot,nt){x._fullLayout.hovermode!==!1&&(b.select(et).call(h,ot,nt),ot.node.trace.node.hoverinfo!=="skip"&&(ot.node.fullData=ot.node.trace,x.emit("plotly_unhover",{event:b.event,points:[ot.node]})),A.loneUnhover(C._hoverlayer.node()))};L(x,y,w,{width:S.w,height:S.h,margin:{t:S.t,r:S.r,b:S.b,l:S.l}},{linkEvents:{hover:m,follow:F,unhover:_,select:E},nodeEvents:{hover:G,follow:X,unhover:$,select:N}})}},83248:function(j,V,t){var b=t(49812),P=t(67756).Gz,o=t(33428),L=t(26800),A=t(48932),v=t(11820),p=t(49760),r=t(76308),e=t(43616),s=t(3400),n=s.strTranslate,l=s.strRotate,f=t(71688),u=f.keyFun,g=f.repeat,h=f.unwrap,T=t(72736),c=t(24040),i=t(84284),d=i.CAP_SHIFT,x=i.LINE_SPACING,w=3;function C(Q,W,J){var it=h(W),K=it.trace,H=K.domain,at=K.orientation==="h",tt=K.node.pad,lt=K.node.thickness,dt={justify:L.sankeyJustify,left:L.sankeyLeft,right:L.sankeyRight,center:L.sankeyCenter}[K.node.align],mt=Q.width*(H.x[1]-H.x[0]),gt=Q.height*(H.y[1]-H.y[0]),Mt=it._nodes,Lt=it._links,zt=it.circular,xt;zt?xt=A.sankeyCircular().circularLinkGap(0):xt=L.sankey(),xt.iterations(v.sankeyIterations).size(at?[mt,gt]:[gt,mt]).nodeWidth(lt).nodePadding(tt).nodeId(function(Qt){return Qt.pointNumber}).nodeAlign(dt).nodes(Mt).links(Lt);var Ct=xt();xt.nodePadding()<tt&&s.warn("node.pad was reduced to ",xt.nodePadding()," to fit within the figure.");var wt,Rt,Tt;for(var Bt in it._groupLookup){var Gt=parseInt(it._groupLookup[Bt]),te;for(wt=0;wt<Ct.nodes.length;wt++)if(Ct.nodes[wt].pointNumber===Gt){te=Ct.nodes[wt];break}if(te){var Wt={pointNumber:parseInt(Bt),x0:te.x0,x1:te.x1,y0:te.y0,y1:te.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ct.nodes.unshift(Wt),te.childrenNodes.unshift(Wt)}}function jt(){for(wt=0;wt<Ct.nodes.length;wt++){var Qt=Ct.nodes[wt],Pt={},Ot,Nt;for(Rt=0;Rt<Qt.targetLinks.length;Rt++)Nt=Qt.targetLinks[Rt],Ot=Nt.source.pointNumber+":"+Nt.target.pointNumber,Pt.hasOwnProperty(Ot)||(Pt[Ot]=[]),Pt[Ot].push(Nt);var Ht=Object.keys(Pt);for(Rt=0;Rt<Ht.length;Rt++){Ot=Ht[Rt];var St=Pt[Ot],kt=0,Ft={};for(Tt=0;Tt<St.length;Tt++)Nt=St[Tt],Ft[Nt.label]||(Ft[Nt.label]=0),Ft[Nt.label]+=Nt.value,kt+=Nt.value;for(Tt=0;Tt<St.length;Tt++)Nt=St[Tt],Nt.flow={value:kt,labelConcentration:Ft[Nt.label]/kt,concentration:Nt.value/kt,links:St},Nt.concentrationscale&&(Nt.color=p(Nt.concentrationscale(Nt.flow.labelConcentration)))}var At=0;for(Rt=0;Rt<Qt.sourceLinks.length;Rt++)At+=Qt.sourceLinks[Rt].value;for(Rt=0;Rt<Qt.sourceLinks.length;Rt++)Nt=Qt.sourceLinks[Rt],Nt.concentrationOut=Nt.value/At;var ft=0;for(Rt=0;Rt<Qt.targetLinks.length;Rt++)ft+=Qt.targetLinks[Rt].value;for(Rt=0;Rt<Qt.targetLinks.length;Rt++)Nt=Qt.targetLinks[Rt],Nt.concenrationIn=Nt.value/ft}}jt();function ie(Qt){Qt.forEach(function(Pt){var Ot,Nt,Ht=0,St=Pt.length,kt;for(Pt.sort(function(Ft,At){return Ft.y0-At.y0}),kt=0;kt<St;++kt)Ot=Pt[kt],Ot.y0>=Ht||(Nt=Ht-Ot.y0,Nt>1e-6&&(Ot.y0+=Nt,Ot.y1+=Nt)),Ht=Ot.y1+tt})}function ue(Qt){var Pt=Qt.map(function(At,ft){return{x0:At.x0,index:ft}}).sort(function(At,ft){return At.x0-ft.x0}),Ot=[],Nt=-1,Ht,St=-1/0,kt;for(wt=0;wt<Pt.length;wt++){var Ft=Qt[Pt[wt].index];Ft.x0>St+lt&&(Nt+=1,Ht=Ft.x0),St=Ft.x0,Ot[Nt]||(Ot[Nt]=[]),Ot[Nt].push(Ft),kt=Ht-Ft.x0,Ft.x0+=kt,Ft.x1+=kt}return Ot}if(K.node.x.length&&K.node.y.length){for(wt=0;wt<Math.min(K.node.x.length,K.node.y.length,Ct.nodes.length);wt++)if(K.node.x[wt]&&K.node.y[wt]){var fe=[K.node.x[wt]*mt,K.node.y[wt]*gt];Ct.nodes[wt].x0=fe[0]-lt/2,Ct.nodes[wt].x1=fe[0]+lt/2;var pe=Ct.nodes[wt].y1-Ct.nodes[wt].y0;Ct.nodes[wt].y0=fe[1]-pe/2,Ct.nodes[wt].y1=fe[1]+pe/2}if(K.arrangement==="snap"){Mt=Ct.nodes;var Te=ue(Mt);ie(Te)}xt.update(Ct)}return{circular:zt,key:J,trace:K,guid:s.randstr(),horizontal:at,width:mt,height:gt,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,linkArrowLength:K.link.arrowlen,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:H.x[0]*Q.width+Q.margin.l,translateY:Q.height-H.y[1]*Q.height+Q.margin.t,dragParallel:at?gt:mt,dragPerpendicular:at?mt:gt,arrangement:K.arrangement,sankey:xt,graph:Ct,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function y(Q,W,J){var it=p(W.color),K=p(W.hovercolor),H=W.source.label+"|"+W.target.label,at=H+"__"+J;return W.trace=Q.trace,W.curveNumber=Q.trace.index,{circular:Q.circular,key:at,traceId:Q.key,pointNumber:W.pointNumber,link:W,tinyColorHue:r.tinyRGB(it),tinyColorAlpha:it.getAlpha(),tinyColorHoverHue:r.tinyRGB(K),tinyColorHoverAlpha:K.getAlpha(),linkPath:M,linkLineColor:Q.linkLineColor,linkLineWidth:Q.linkLineWidth,linkArrowLength:Q.linkArrowLength,valueFormat:Q.valueFormat,valueSuffix:Q.valueSuffix,sankey:Q.sankey,parent:Q,interactionState:Q.interactionState,flow:W.flow}}function S(Q,W){var J="",it=Q.width/2,K=Q.circularPathData;return Q.circularLinkType==="top"?J="M "+(K.targetX-W)+" "+(K.targetY+it)+" L"+(K.rightInnerExtent-W)+" "+(K.targetY+it)+"A"+(K.rightLargeArcRadius+it)+" "+(K.rightSmallArcRadius+it)+" 0 0 1 "+(K.rightFullExtent-it-W)+" "+(K.targetY-K.rightSmallArcRadius)+"L"+(K.rightFullExtent-it-W)+" "+K.verticalRightInnerExtent+"A"+(K.rightLargeArcRadius+it)+" "+(K.rightLargeArcRadius+it)+" 0 0 1 "+(K.rightInnerExtent-W)+" "+(K.verticalFullExtent-it)+"L"+K.leftInnerExtent+" "+(K.verticalFullExtent-it)+"A"+(K.leftLargeArcRadius+it)+" "+(K.leftLargeArcRadius+it)+" 0 0 1 "+(K.leftFullExtent+it)+" "+K.verticalLeftInnerExtent+"L"+(K.leftFullExtent+it)+" "+(K.sourceY-K.leftSmallArcRadius)+"A"+(K.leftLargeArcRadius+it)+" "+(K.leftSmallArcRadius+it)+" 0 0 1 "+K.leftInnerExtent+" "+(K.sourceY+it)+"L"+K.sourceX+" "+(K.sourceY+it)+"L"+K.sourceX+" "+(K.sourceY-it)+"L"+K.leftInnerExtent+" "+(K.sourceY-it)+"A"+(K.leftLargeArcRadius-it)+" "+(K.leftSmallArcRadius-it)+" 0 0 0 "+(K.leftFullExtent-it)+" "+(K.sourceY-K.leftSmallArcRadius)+"L"+(K.leftFullExtent-it)+" "+K.verticalLeftInnerExtent+"A"+(K.leftLargeArcRadius-it)+" "+(K.leftLargeArcRadius-it)+" 0 0 0 "+K.leftInnerExtent+" "+(K.verticalFullExtent+it)+"L"+(K.rightInnerExtent-W)+" "+(K.verticalFullExtent+it)+"A"+(K.rightLargeArcRadius-it)+" "+(K.rightLargeArcRadius-it)+" 0 0 0 "+(K.rightFullExtent+it-W)+" "+K.verticalRightInnerExtent+"L"+(K.rightFullExtent+it-W)+" "+(K.targetY-K.rightSmallArcRadius)+"A"+(K.rightLargeArcRadius-it)+" "+(K.rightSmallArcRadius-it)+" 0 0 0 "+(K.rightInnerExtent-W)+" "+(K.targetY-it)+"L"+(K.targetX-W)+" "+(K.targetY-it)+(W>0?"L"+K.targetX+" "+K.targetY:"")+"Z":J="M "+(K.targetX-W)+" "+(K.targetY-it)+" L"+(K.rightInnerExtent-W)+" "+(K.targetY-it)+"A"+(K.rightLargeArcRadius+it)+" "+(K.rightSmallArcRadius+it)+" 0 0 0 "+(K.rightFullExtent-it-W)+" "+(K.targetY+K.rightSmallArcRadius)+"L"+(K.rightFullExtent-it-W)+" "+K.verticalRightInnerExtent+"A"+(K.rightLargeArcRadius+it)+" "+(K.rightLargeArcRadius+it)+" 0 0 0 "+(K.rightInnerExtent-W)+" "+(K.verticalFullExtent+it)+"L"+K.leftInnerExtent+" "+(K.verticalFullExtent+it)+"A"+(K.leftLargeArcRadius+it)+" "+(K.leftLargeArcRadius+it)+" 0 0 0 "+(K.leftFullExtent+it)+" "+K.verticalLeftInnerExtent+"L"+(K.leftFullExtent+it)+" "+(K.sourceY+K.leftSmallArcRadius)+"A"+(K.leftLargeArcRadius+it)+" "+(K.leftSmallArcRadius+it)+" 0 0 0 "+K.leftInnerExtent+" "+(K.sourceY-it)+"L"+K.sourceX+" "+(K.sourceY-it)+"L"+K.sourceX+" "+(K.sourceY+it)+"L"+K.leftInnerExtent+" "+(K.sourceY+it)+"A"+(K.leftLargeArcRadius-it)+" "+(K.leftSmallArcRadius-it)+" 0 0 1 "+(K.leftFullExtent-it)+" "+(K.sourceY+K.leftSmallArcRadius)+"L"+(K.leftFullExtent-it)+" "+K.verticalLeftInnerExtent+"A"+(K.leftLargeArcRadius-it)+" "+(K.leftLargeArcRadius-it)+" 0 0 1 "+K.leftInnerExtent+" "+(K.verticalFullExtent-it)+"L"+(K.rightInnerExtent-W)+" "+(K.verticalFullExtent-it)+"A"+(K.rightLargeArcRadius-it)+" "+(K.rightLargeArcRadius-it)+" 0 0 1 "+(K.rightFullExtent+it-W)+" "+K.verticalRightInnerExtent+"L"+(K.rightFullExtent+it-W)+" "+(K.targetY+K.rightSmallArcRadius)+"A"+(K.rightLargeArcRadius-it)+" "+(K.rightSmallArcRadius-it)+" 0 0 1 "+(K.rightInnerExtent-W)+" "+(K.targetY+it)+"L"+(K.targetX-W)+" "+(K.targetY+it)+(W>0?"L"+K.targetX+" "+K.targetY:"")+"Z",J}function M(){var Q=.5;function W(J){var it=J.linkArrowLength;if(J.link.circular)return S(J.link,it);var K=Math.abs((J.link.target.x0-J.link.source.x1)/2);it>K&&(it=K);var H=J.link.source.x1,at=J.link.target.x0-it,tt=P(H,at),lt=tt(Q),dt=tt(1-Q),mt=J.link.y0-J.link.width/2,gt=J.link.y0+J.link.width/2,Mt=J.link.y1-J.link.width/2,Lt=J.link.y1+J.link.width/2,zt="M"+H+","+mt,xt="C"+lt+","+mt+" "+dt+","+Mt+" "+at+","+Mt,Ct="C"+dt+","+Lt+" "+lt+","+gt+" "+H+","+gt,wt=it>0?"L"+(at+it)+","+(Mt+J.link.width/2):"";return wt+="L"+at+","+Lt,zt+xt+wt+Ct+"Z"}return W}function a(Q,W){var J=p(W.color),it=v.nodePadAcross,K=Q.nodePad/2;W.dx=W.x1-W.x0,W.dy=W.y1-W.y0;var H=W.dx,at=Math.max(.5,W.dy),tt="node_"+W.pointNumber;return W.group&&(tt=s.randstr()),W.trace=Q.trace,W.curveNumber=Q.trace.index,{index:W.pointNumber,key:tt,partOfGroup:W.partOfGroup||!1,group:W.group,traceId:Q.key,trace:Q.trace,node:W,nodePad:Q.nodePad,nodeLineColor:Q.nodeLineColor,nodeLineWidth:Q.nodeLineWidth,textFont:Q.textFont,size:Q.horizontal?Q.height:Q.width,visibleWidth:Math.ceil(H),visibleHeight:at,zoneX:-it,zoneY:-K,zoneWidth:H+2*it,zoneHeight:at+2*K,labelY:Q.horizontal?W.dy/2+1:W.dx/2+1,left:W.originalLayer===1,sizeAcross:Q.width,forceLayouts:Q.forceLayouts,horizontal:Q.horizontal,darkBackground:J.getBrightness()<=128,tinyColorHue:r.tinyRGB(J),tinyColorAlpha:J.getAlpha(),valueFormat:Q.valueFormat,valueSuffix:Q.valueSuffix,sankey:Q.sankey,graph:Q.graph,arrangement:Q.arrangement,uniqueNodeLabelPathId:[Q.guid,Q.key,tt].join("_"),interactionState:Q.interactionState,figure:Q}}function E(Q){Q.attr("transform",function(W){return n(W.node.x0.toFixed(3),W.node.y0.toFixed(3))})}function m(Q){Q.call(E)}function k(Q,W){Q.call(m),W.attr("d",M())}function I(Q){Q.attr("width",function(W){return W.node.x1-W.node.x0}).attr("height",function(W){return W.visibleHeight})}function O(Q){return Q.link.width>1||Q.linkLineWidth>0}function z(Q){var W=n(Q.translateX,Q.translateY);return W+(Q.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function B(Q,W,J){Q.on(".basic",null).on("mouseover.basic",function(it){!it.interactionState.dragInProgress&&!it.partOfGroup&&(J.hover(this,it,W),it.interactionState.hovered=[this,it])}).on("mousemove.basic",function(it){!it.interactionState.dragInProgress&&!it.partOfGroup&&(J.follow(this,it),it.interactionState.hovered=[this,it])}).on("mouseout.basic",function(it){!it.interactionState.dragInProgress&&!it.partOfGroup&&(J.unhover(this,it,W),it.interactionState.hovered=!1)}).on("click.basic",function(it){it.interactionState.hovered&&(J.unhover(this,it,W),it.interactionState.hovered=!1),!it.interactionState.dragInProgress&&!it.partOfGroup&&J.select(this,it,W)})}function F(Q,W,J,it){var K=o.behavior.drag().origin(function(H){return{x:H.node.x0+H.visibleWidth/2,y:H.node.y0+H.visibleHeight/2}}).on("dragstart",function(H){if(H.arrangement!=="fixed"&&(s.ensureSingle(it._fullLayout._infolayer,"g","dragcover",function(tt){it._fullLayout._dragCover=tt}),s.raiseToTop(this),H.interactionState.dragInProgress=H.node,et(H.node),H.interactionState.hovered&&(J.nodeEvents.unhover.apply(0,H.interactionState.hovered),H.interactionState.hovered=!1),H.arrangement==="snap")){var at=H.traceId+"|"+H.key;H.forceLayouts[at]?H.forceLayouts[at].alpha(1):_(Q,at,H),N(Q,W,H,at,it)}}).on("drag",function(H){if(H.arrangement!=="fixed"){var at=o.event.x,tt=o.event.y;H.arrangement==="snap"?(H.node.x0=at-H.visibleWidth/2,H.node.x1=at+H.visibleWidth/2,H.node.y0=tt-H.visibleHeight/2,H.node.y1=tt+H.visibleHeight/2):(H.arrangement==="freeform"&&(H.node.x0=at-H.visibleWidth/2,H.node.x1=at+H.visibleWidth/2),tt=Math.max(0,Math.min(H.size-H.visibleHeight/2,tt)),H.node.y0=tt-H.visibleHeight/2,H.node.y1=tt+H.visibleHeight/2),et(H.node),H.arrangement!=="snap"&&(H.sankey.update(H.graph),k(Q.filter(ot(H)),W))}}).on("dragend",function(H){if(H.arrangement!=="fixed"){H.interactionState.dragInProgress=!1;for(var at=0;at<H.node.childrenNodes.length;at++)H.node.childrenNodes[at].x=H.node.x,H.node.childrenNodes[at].y=H.node.y;H.arrangement!=="snap"&&X(H,it)}});Q.on(".drag",null).call(K)}function _(Q,W,J,it){nt(J.graph.nodes);var K=J.graph.nodes.filter(function(H){return H.originalX===J.node.originalX}).filter(function(H){return!H.partOfGroup});J.forceLayouts[W]=b.forceSimulation(K).alphaDecay(0).force("collide",b.forceCollide().radius(function(H){return H.dy/2+J.nodePad/2}).strength(1).iterations(v.forceIterations)).force("constrain",G(Q,W,K,J)).stop()}function N(Q,W,J,it,K){window.requestAnimationFrame(function H(){var at;for(at=0;at<v.forceTicksPerFrame;at++)J.forceLayouts[it].tick();var tt=J.graph.nodes;if(Z(tt),J.sankey.update(J.graph),k(Q.filter(ot(J)),W),J.forceLayouts[it].alpha()>0)window.requestAnimationFrame(H);else{var lt=J.node.originalX;J.node.x0=lt-J.visibleWidth/2,J.node.x1=lt+J.visibleWidth/2,X(J,K)}})}function G(Q,W,J,it){return function(){for(var H=0,at=0;at<J.length;at++){var tt=J[at];tt===it.interactionState.dragInProgress?(tt.x=tt.lastDraggedX,tt.y=tt.lastDraggedY):(tt.vx=(tt.originalX-tt.x)/v.forceTicksPerFrame,tt.y=Math.min(it.size-tt.dy/2,Math.max(tt.dy/2,tt.y))),H=Math.max(H,Math.abs(tt.vx),Math.abs(tt.vy))}!it.interactionState.dragInProgress&&H<.1&&it.forceLayouts[W].alpha()>0&&it.forceLayouts[W].alpha(0)}}function X(Q,W){for(var J=[],it=[],K=0;K<Q.graph.nodes.length;K++){var H=(Q.graph.nodes[K].x0+Q.graph.nodes[K].x1)/2,at=(Q.graph.nodes[K].y0+Q.graph.nodes[K].y1)/2;J.push(H/Q.figure.width),it.push(at/Q.figure.height)}c.call("_guiRestyle",W,{"node.x":[J],"node.y":[it]},Q.trace.index).then(function(){W._fullLayout._dragCover&&W._fullLayout._dragCover.remove()})}function $(Q){var W=[],J;for(J=0;J<Q.length;J++)Q[J].originalX=(Q[J].x0+Q[J].x1)/2,Q[J].originalY=(Q[J].y0+Q[J].y1)/2,W.indexOf(Q[J].originalX)===-1&&W.push(Q[J].originalX);for(W.sort(function(it,K){return it-K}),J=0;J<Q.length;J++)Q[J].originalLayerIndex=W.indexOf(Q[J].originalX),Q[J].originalLayer=Q[J].originalLayerIndex/(W.length-1)}function et(Q){Q.lastDraggedX=Q.x0+Q.dx/2,Q.lastDraggedY=Q.y0+Q.dy/2}function ot(Q){return function(W){return W.node.originalX===Q.node.originalX}}function nt(Q){for(var W=0;W<Q.length;W++)Q[W].y=(Q[W].y0+Q[W].y1)/2,Q[W].x=(Q[W].x0+Q[W].x1)/2}function Z(Q){for(var W=0;W<Q.length;W++)Q[W].y0=Q[W].y-Q[W].dy/2,Q[W].y1=Q[W].y0+Q[W].dy,Q[W].x0=Q[W].x-Q[W].dx/2,Q[W].x1=Q[W].x0+Q[W].dx}j.exports=function(Q,W,J,it,K){var H=Q._context.staticPlot,at=!1;s.ensureSingle(Q._fullLayout._infolayer,"g","first-render",function(){at=!0});var tt=Q._fullLayout._dragCover,lt=J.filter(function(Ct){return h(Ct).trace.visible}).map(C.bind(null,it)),dt=W.selectAll("."+v.cn.sankey).data(lt,u);dt.exit().remove(),dt.enter().append("g").classed(v.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",H?"none":"auto").attr("transform",z),dt.each(function(Ct,wt){Q._fullData[wt]._sankey=Ct;var Rt="bgsankey-"+Ct.trace.uid+"-"+wt;s.ensureSingle(Q._fullLayout._draggers,"rect",Rt),Q._fullData[wt]._bgRect=o.select("."+Rt),Q._fullData[wt]._bgRect.style("pointer-events",H?"none":"all").attr("width",Ct.width).attr("height",Ct.height).attr("x",Ct.translateX).attr("y",Ct.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),dt.transition().ease(v.ease).duration(v.duration).attr("transform",z);var mt=dt.selectAll("."+v.cn.sankeyLinks).data(g,u);mt.enter().append("g").classed(v.cn.sankeyLinks,!0).style("fill","none");var gt=mt.selectAll("."+v.cn.sankeyLink).data(function(Ct){var wt=Ct.graph.links;return wt.filter(function(Rt){return Rt.value}).map(y.bind(null,Ct))},u);gt.enter().append("path").classed(v.cn.sankeyLink,!0).call(B,dt,K.linkEvents),gt.style("stroke",function(Ct){return O(Ct)?r.tinyRGB(p(Ct.linkLineColor)):Ct.tinyColorHue}).style("stroke-opacity",function(Ct){return O(Ct)?r.opacity(Ct.linkLineColor):Ct.tinyColorAlpha}).style("fill",function(Ct){return Ct.tinyColorHue}).style("fill-opacity",function(Ct){return Ct.tinyColorAlpha}).style("stroke-width",function(Ct){return O(Ct)?Ct.linkLineWidth:1}).attr("d",M()),gt.style("opacity",function(){return Q._context.staticPlot||at||tt?1:0}).transition().ease(v.ease).duration(v.duration).style("opacity",1),gt.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var Mt=dt.selectAll("."+v.cn.sankeyNodeSet).data(g,u);Mt.enter().append("g").classed(v.cn.sankeyNodeSet,!0),Mt.style("cursor",function(Ct){switch(Ct.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var Lt=Mt.selectAll("."+v.cn.sankeyNode).data(function(Ct){var wt=Ct.graph.nodes;return $(wt),wt.map(a.bind(null,Ct))},u);Lt.enter().append("g").classed(v.cn.sankeyNode,!0).call(E).style("opacity",function(Ct){return(Q._context.staticPlot||at)&&!Ct.partOfGroup?1:0}),Lt.call(B,dt,K.nodeEvents).call(F,gt,K,Q),Lt.transition().ease(v.ease).duration(v.duration).call(E).style("opacity",function(Ct){return Ct.partOfGroup?0:1}),Lt.exit().transition().ease(v.ease).duration(v.duration).style("opacity",0).remove();var zt=Lt.selectAll("."+v.cn.nodeRect).data(g);zt.enter().append("rect").classed(v.cn.nodeRect,!0).call(I),zt.style("stroke-width",function(Ct){return Ct.nodeLineWidth}).style("stroke",function(Ct){return r.tinyRGB(p(Ct.nodeLineColor))}).style("stroke-opacity",function(Ct){return r.opacity(Ct.nodeLineColor)}).style("fill",function(Ct){return Ct.tinyColorHue}).style("fill-opacity",function(Ct){return Ct.tinyColorAlpha}),zt.transition().ease(v.ease).duration(v.duration).call(I);var xt=Lt.selectAll("."+v.cn.nodeLabel).data(g);xt.enter().append("text").classed(v.cn.nodeLabel,!0).style("cursor","default"),xt.attr("data-notex",1).text(function(Ct){return Ct.node.label}).each(function(Ct){var wt=o.select(this);e.font(wt,Ct.textFont),T.convertToTspans(wt,Q)}).attr("text-anchor",function(Ct){return Ct.horizontal&&Ct.left?"end":"start"}).attr("transform",function(Ct){var wt=o.select(this),Rt=T.lineCount(wt),Tt=Ct.textFont.size*((Rt-1)*x-d),Bt=Ct.nodeLineWidth/2+w,Gt=((Ct.horizontal?Ct.visibleHeight:Ct.visibleWidth)-Tt)/2;Ct.horizontal&&(Ct.left?Bt=-Bt:Bt+=Ct.visibleWidth);var te=Ct.horizontal?"":"scale(-1,1)"+l(90);return n(Ct.horizontal?Bt:Gt,Ct.horizontal?Gt:Bt)+te}),xt.transition().ease(v.ease).duration(v.duration)}},81128:function(j){j.exports=function(t,b){for(var P=t.cd,o=[],L=P[0].trace,A=L._sankey.graph.nodes,v=0;v<A.length;v++){var p=A[v];if(!p.partOfGroup){var r=[(p.x0+p.x1)/2,(p.y0+p.y1)/2];L.orientation==="v"&&r.reverse(),b&&b.contains(r,!1,v,t)&&o.push({pointNumber:p.pointNumber})}}return o}},20148:function(j,V,t){var b=t(3400);j.exports=function(o,L){for(var A=0;A<o.length;A++)o[A].i=A;b.mergeArray(L.text,o,"tx"),b.mergeArray(L.texttemplate,o,"txt"),b.mergeArray(L.hovertext,o,"htx"),b.mergeArray(L.customdata,o,"data"),b.mergeArray(L.textposition,o,"tp"),L.textfont&&(b.mergeArrayCastPositive(L.textfont.size,o,"ts"),b.mergeArray(L.textfont.color,o,"tc"),b.mergeArray(L.textfont.family,o,"tf"),b.mergeArray(L.textfont.weight,o,"tw"),b.mergeArray(L.textfont.style,o,"ty"),b.mergeArray(L.textfont.variant,o,"tv"),b.mergeArray(L.textfont.textcase,o,"tC"),b.mergeArray(L.textfont.lineposition,o,"tE"),b.mergeArray(L.textfont.shadow,o,"tS"));var v=L.marker;if(v){b.mergeArrayCastPositive(v.size,o,"ms"),b.mergeArrayCastPositive(v.opacity,o,"mo"),b.mergeArray(v.symbol,o,"mx"),b.mergeArray(v.angle,o,"ma"),b.mergeArray(v.standoff,o,"mf"),b.mergeArray(v.color,o,"mc");var p=v.line;v.line&&(b.mergeArray(p.color,o,"mlc"),b.mergeArrayCastPositive(p.width,o,"mlw"));var r=v.gradient;r&&r.type!=="none"&&(b.mergeArray(r.type,o,"mgt"),b.mergeArray(r.color,o,"mgc"))}}},52904:function(j,V,t){var b=t(29736).axisHoverFormat,P=t(21776).Gw,o=t(21776).Ks,L=t(49084),A=t(25376),v=t(98192).u,p=t(98192).c,r=t(43616),e=t(88200),s=t(92880).extendFlat,n=t(98304);function l(g){return{valType:"any",dflt:0,editType:"calc"}}function f(g){return{valType:"any",editType:"calc"}}function u(g){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}j.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:l(),yperiod:l(),xperiod0:f(),yperiod0:f(),xperiodalignment:u(),yperiodalignment:u(),xhoverformat:b("x"),yhoverformat:b("y"),offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:P({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:o({},{keys:e.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:s({},v,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:n(!0),fillgradient:s({type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],dflt:"none",editType:"calc"},start:{valType:"number",editType:"calc"},stop:{valType:"number",editType:"calc"},colorscale:{valType:"colorscale",editType:"style"},editType:"calc"}),fillpattern:p,marker:s({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:s({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},L("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},L("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:A({editType:"calc",colorEditType:"style",arrayOk:!0}),zorder:{valType:"integer",dflt:0,editType:"plot"}}},16356:function(j,V,t){var b=t(38248),P=t(3400),o=t(54460),L=t(1220),A=t(39032).BADNUM,v=t(43028),p=t(90136),r=t(20148),e=t(4500);function s(h,T){var c=h._fullLayout,i=T._xA=o.getFromId(h,T.xaxis||"x","x"),d=T._yA=o.getFromId(h,T.yaxis||"y","y"),x=i.makeCalcdata(T,"x"),w=d.makeCalcdata(T,"y"),C=L(T,i,"x",x),y=L(T,d,"y",w),S=C.vals,M=y.vals,a=T._length,E=new Array(a),m=T.ids,k=g(T,c,i,d),I=!1,O,z,B,F,_,N;f(c,T);var G="x",X="y",$;if(k)P.pushUnique(k.traceIndices,T._expandedIndex),O=k.orientation==="v",O?(X="s",$="x"):(G="s",$="y"),_=k.stackgaps==="interpolate";else{var et=l(T,a);n(h,T,i,d,S,M,et)}var ot=!!T.xperiodalignment,nt=!!T.yperiodalignment;for(z=0;z<a;z++){var Z=E[z]={},Q=b(S[z]),W=b(M[z]);Q&&W?(Z[G]=S[z],Z[X]=M[z],ot&&(Z.orig_x=x[z],Z.xEnd=C.ends[z],Z.xStart=C.starts[z]),nt&&(Z.orig_y=w[z],Z.yEnd=y.ends[z],Z.yStart=y.starts[z])):k&&(O?Q:W)?(Z[$]=O?S[z]:M[z],Z.gap=!0,_?(Z.s=A,I=!0):Z.s=0):Z[G]=Z[X]=A,m&&(Z.id=String(m[z]))}if(r(E,T),p(h,T),e(E,T),k){for(z=0;z<E.length;)E[z][$]===A?E.splice(z,1):z++;if(P.sort(E,function(H,at){return H[$]-at[$]||H.i-at.i}),I){for(z=0;z<E.length-1&&E[z].gap;)z++;for(N=E[z].s,N||(N=E[z].s=0),B=0;B<z;B++)E[B].s=N;for(F=E.length-1;F>z&&E[F].gap;)F--;for(N=E[F].s,B=E.length-1;B>F;B--)E[B].s=N;for(;z<F;)if(z++,E[z].gap){for(B=z+1;E[B].gap;)B++;for(var J=E[z-1][$],it=E[z-1].s,K=(E[B].s-it)/(E[B][$]-J);z<B;)E[z].s=it+(E[z][$]-J)*K,z++}}}return E}function n(h,T,c,i,d,x,w){var C=T._length,y=h._fullLayout,S=c._id,M=i._id,a=y._firstScatter[u(T)]===T.uid,E=(g(T,y,c,i)||{}).orientation,m=T.fill;c._minDtick=0,i._minDtick=0;var k={padded:!0},I={padded:!0};w&&(k.ppad=I.ppad=w);var O=C<2||d[0]!==d[C-1]||x[0]!==x[C-1];O&&(m==="tozerox"||m==="tonextx"&&(a||E==="h"))?k.tozero=!0:!(T.error_y||{}).visible&&(m==="tonexty"||m==="tozeroy"||!v.hasMarkers(T)&&!v.hasText(T))&&(k.padded=!1,k.ppad=0),O&&(m==="tozeroy"||m==="tonexty"&&(a||E==="v"))?I.tozero=!0:(m==="tonextx"||m==="tozerox")&&(I.padded=!1),S&&(T._extremes[S]=o.findExtremes(c,d,k)),M&&(T._extremes[M]=o.findExtremes(i,x,I))}function l(h,T){if(v.hasMarkers(h)){var c=h.marker,i=1.6*(h.marker.sizeref||1),d;if(h.marker.sizemode==="area"?d=function(S){return Math.max(Math.sqrt((S||0)/i),3)}:d=function(S){return Math.max((S||0)/i,3)},P.isArrayOrTypedArray(c.size)){var x={type:"linear"};o.setConvert(x);for(var w=x.makeCalcdata(h.marker,"size"),C=new Array(T),y=0;y<T;y++)C[y]=d(w[y]);return C}else return d(c.size)}}function f(h,T){var c=u(T),i=h._firstScatter;i[c]||(i[c]=T.uid)}function u(h){var T=h.stackgroup;return h.xaxis+h.yaxis+h.type+(T?"-"+T:"")}function g(h,T,c,i){var d=h.stackgroup;if(d){var x=T._scatterStackOpts[c._id+i._id][d],w=x.orientation==="v"?i:c;if(w.type==="linear"||w.type==="log")return x}}j.exports={calc:s,calcMarkerSize:l,calcAxisExpansion:n,setFirstScatter:f,getStackOpts:g}},4500:function(j,V,t){var b=t(3400);j.exports=function(o,L){b.isArrayOrTypedArray(L.selectedpoints)&&b.tagSelected(o,L)}},90136:function(j,V,t){var b=t(94288).hasColorscale,P=t(47128),o=t(43028);j.exports=function(A,v){o.hasLines(v)&&b(v,"line")&&P(A,v,{vals:v.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(v)&&(b(v,"marker")&&P(A,v,{vals:v.marker.color,containerStr:"marker",cLetter:"c"}),b(v,"marker.line")&&P(A,v,{vals:v.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},88200:function(j){j.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},96664:function(j,V,t){var b=t(16356),P=t(96376).setGroupPositions;function o(v,p){for(var r=p.xaxis,e=p.yaxis,s=v._fullLayout,n=v._fullData,l=v.calcdata,f=[],u=[],g=0;g<n.length;g++){var h=n[g];h.visible===!0&&h.type==="scatter"&&h.xaxis===r._id&&h.yaxis===e._id&&(h.orientation==="h"?f.push(l[g]):h.orientation==="v"&&u.push(l[g]))}var T={mode:s.scattermode,gap:s.scattergap};P(v,r,e,u,T),P(v,e,r,f,T)}j.exports=function(p,r){p._fullLayout.scattermode==="group"&&o(p,r);var e=r.xaxis,s=r.yaxis,n=e._id+s._id,l=p._fullLayout._scatterStackOpts[n];if(l){var f=p.calcdata,u,g,h,T,c,i,d,x,w,C,y,S,M,a,E;for(var m in l){C=l[m];var k=C.traceIndices;if(k.length){for(y=C.stackgaps==="interpolate",S=C.groupnorm,C.orientation==="v"?(M="x",a="y"):(M="y",a="x"),E=new Array(k.length),u=0;u<E.length;u++)E[u]=!1;i=f[k[0]];var I=new Array(i.length);for(u=0;u<i.length;u++)I[u]=i[u][M];for(u=1;u<k.length;u++){for(c=f[k[u]],g=h=0;g<c.length;g++){for(d=c[g][M];d>I[h]&&h<I.length;h++)L(c,g,I[h],u,E,y,M),g++;if(d!==I[h]){for(T=0;T<u;T++)L(f[k[T]],h,d,T,E,y,M);I.splice(h,0,d)}h++}for(;h<I.length;h++)L(c,g,I[h],u,E,y,M),g++}var O=I.length;for(g=0;g<i.length;g++){for(x=i[g][a]=i[g].s,u=1;u<k.length;u++)c=f[k[u]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=O,x+=c[g].s,c[g][a]=x;if(S)for(w=(S==="fraction"?x:x/100)||1,u=0;u<k.length;u++){var z=f[k[u]][g];z[a]/=w,z.sNorm=z.s/w}}for(u=0;u<k.length;u++){c=f[k[u]];var B=c[0].trace,F=b.calcMarkerSize(B,B._rawLength),_=Array.isArray(F);if(F&&E[u]||_){var N=F;for(F=new Array(O),g=0;g<O;g++)F[g]=c[g].gap?0:_?N[c[g].i]:N}var G=new Array(O),X=new Array(O);for(g=0;g<O;g++)G[g]=c[g].x,X[g]=c[g].y;b.calcAxisExpansion(p,B,e,s,G,X,F),c[0].t.orientation=C.orientation}}}}};function L(v,p,r,e,s,n,l){s[e]=!0;var f={i:null,gap:!0,s:0};if(f[l]=r,v.splice(p,0,f),p&&r===v[p-1][l]){var u=v[p-1];f.s=u.s,f.i=u.i,f.gap=u.gap}else n&&(f.s=A(v,p,r,l));p||(v[0].t=v[1].t,v[0].trace=v[1].trace,delete v[1].t,delete v[1].trace)}function A(v,p,r,e){var s=v[p-1],n=v[p+1];return n?s?s.s+(n.s-s.s)*(r-s[e])/(n[e]-s[e]):n.s:s.s}},35036:function(j,V,t){var b=t(3400),P=t(20011),o=t(52904);j.exports=function(A,v){var p,r,e;function s(g){return b.coerce(r._input,r,o,g)}if(v.scattermode==="group")for(e=0;e<A.length;e++)r=A[e],r.type==="scatter"&&(p=r._input,P(p,r,v,s));for(e=0;e<A.length;e++){var n=A[e];if(n.type==="scatter"){var l=n.fill;if(!(l==="none"||l==="toself")&&(n.opacity=void 0,l==="tonexty"||l==="tonextx"))for(var f=e-1;f>=0;f--){var u=A[f];if(u.type==="scatter"&&u.xaxis===n.xaxis&&u.yaxis===n.yaxis){u.opacity=void 0;break}}}}}},18800:function(j,V,t){var b=t(3400),P=t(24040),o=t(52904),L=t(88200),A=t(43028),v=t(43980),p=t(31147),r=t(43912),e=t(74428),s=t(66828),n=t(11731),l=t(124),f=t(70840),u=t(3400).coercePattern;j.exports=function(h,T,c,i){function d(E,m){return b.coerce(h,T,o,E,m)}var x=v(h,T,i,d);if(x||(T.visible=!1),!!T.visible){p(h,T,i,d),d("xhoverformat"),d("yhoverformat"),d("zorder");var w=r(h,T,i,d);i.scattermode==="group"&&T.orientation===void 0&&d("orientation","v");var C=!w&&x<L.PTS_LINESONLY?"lines+markers":"lines";d("text"),d("hovertext"),d("mode",C),A.hasMarkers(T)&&e(h,T,c,i,d,{gradient:!0}),A.hasLines(T)&&(s(h,T,c,i,d,{backoff:!0}),n(h,T,d),d("connectgaps"),d("line.simplify")),A.hasText(T)&&(d("texttemplate"),l(h,T,i,d));var y=[];(A.hasMarkers(T)||A.hasText(T))&&(d("cliponaxis"),d("marker.maxdisplayed"),y.push("points")),d("fill",w?w.fillDflt:"none"),T.fill!=="none"&&(f(h,T,c,d,{moduleHasFillgradient:!0}),A.hasLines(T)||n(h,T,d),u(d,"fillpattern",T.fillcolor,!1));var S=(T.line||{}).color,M=(T.marker||{}).color;(T.fill==="tonext"||T.fill==="toself")&&y.push("fills"),d("hoveron",y.join("+")||"points"),T.hoveron!=="fills"&&d("hovertemplate");var a=P.getComponentMethod("errorbars","supplyDefaults");a(h,T,S||M||c,{axis:"y"}),a(h,T,S||M||c,{axis:"x",inherit:"y"}),b.coerceSelectionMarkerOpacity(T,d)}}},98304:function(j){j.exports=function(t){return{valType:"color",editType:"style",anim:!0}}},70840:function(j,V,t){var b=t(76308),P=t(3400).isArrayOrTypedArray;function o(L){for(var A=b.interpolate(L[0][1],L[1][1],.5),v=2;v<L.length;v++){var p=b.interpolate(L[v-1][1],L[v][1],.5);A=b.interpolate(A,p,L[v-1][0]/L[v][0])}return A}j.exports=function(A,v,p,r,e){e||(e={});var s=!1;if(v.marker){var n=v.marker.color,l=(v.marker.line||{}).color;n&&!P(n)?s=n:l&&!P(l)&&(s=l)}var f;if(e.moduleHasFillgradient){var u=r("fillgradient.type");if(u!=="none"){r("fillgradient.start"),r("fillgradient.stop");var g=r("fillgradient.colorscale");g&&(f=o(g))}}r("fillcolor",b.addOpacity((v.line||{}).color||s||f||p,.5))}},76688:function(j,V,t){var b=t(54460);j.exports=function(o,L,A){var v={},p={_fullLayout:A},r=b.getFromTrace(p,L,"x"),e=b.getFromTrace(p,L,"y"),s=o.orig_x;s===void 0&&(s=o.x);var n=o.orig_y;return n===void 0&&(n=o.y),v.xLabel=b.tickText(r,r.c2l(s),!0).text,v.yLabel=b.tickText(e,e.c2l(n),!0).text,v}},44928:function(j,V,t){var b=t(76308),P=t(43028);j.exports=function(L,A){var v,p;if(L.mode==="lines")return v=L.line.color,v&&b.opacity(v)?v:L.fillcolor;if(L.mode==="none")return L.fill?L.fillcolor:"";var r=A.mcc||(L.marker||{}).color,e=A.mlcc||((L.marker||{}).line||{}).color;return p=r&&b.opacity(r)?r:e&&b.opacity(e)&&(A.mlw||((L.marker||{}).line||{}).width)?e:"",p?b.opacity(p)<.3?b.addOpacity(p,.3):p:(v=(L.line||{}).color,v&&b.opacity(v)&&P.hasLines(L)&&L.line.width?v:L.fillcolor)}},20011:function(j,V,t){var b=t(71888).getAxisGroup;j.exports=function(o,L,A,v){var p=L.orientation,r=L[{v:"x",h:"y"}[p]+"axis"],e=b(A,r)+p,s=A._alignmentOpts||{},n=v("alignmentgroup"),l=s[e];l||(l=s[e]={});var f=l[n];f?f.traces.push(L):f=l[n]={traces:[L],alignmentIndex:Object.keys(l).length,offsetGroups:{}};var u=v("offsetgroup"),g=f.offsetGroups,h=g[u];u&&(h||(h=g[u]={offsetIndex:Object.keys(g).length}),L._offsetIndex=h.offsetIndex)}},98723:function(j,V,t){var b=t(3400),P=t(93024),o=t(24040),L=t(44928),A=t(76308),v=b.fillText;j.exports=function(r,e,s,n){var l=r.cd,f=l[0].trace,u=r.xa,g=r.ya,h=u.c2p(e),T=g.c2p(s),c=[h,T],i=f.hoveron||"",d=f.mode.indexOf("markers")!==-1?3:.5,x=!!f.xperiodalignment,w=!!f.yperiodalignment;if(i.indexOf("points")!==-1){var C=function($){if(x){var et=u.c2p($.xStart),ot=u.c2p($.xEnd);return h>=Math.min(et,ot)&&h<=Math.max(et,ot)?0:1/0}var nt=Math.max(3,$.mrc||0),Z=1-1/nt,Q=Math.abs(u.c2p($.x)-h);return Q<nt?Z*Q/nt:Q-nt+Z},y=function($){if(w){var et=g.c2p($.yStart),ot=g.c2p($.yEnd);return T>=Math.min(et,ot)&&T<=Math.max(et,ot)?0:1/0}var nt=Math.max(3,$.mrc||0),Z=1-1/nt,Q=Math.abs(g.c2p($.y)-T);return Q<nt?Z*Q/nt:Q-nt+Z},S=function($){var et=Math.max(d,$.mrc||0),ot=u.c2p($.x)-h,nt=g.c2p($.y)-T;return Math.max(Math.sqrt(ot*ot+nt*nt)-et,1-d/et)},M=P.getDistanceFunction(n,C,y,S);if(P.getClosest(l,M,r),r.index!==!1){var a=l[r.index],E=u.c2p(a.x,!0),m=g.c2p(a.y,!0),k=a.mrc||1;r.index=a.i;var I=l[0].t.orientation,O=I&&(a.sNorm||a.s),z=I==="h"?O:a.orig_x!==void 0?a.orig_x:a.x,B=I==="v"?O:a.orig_y!==void 0?a.orig_y:a.y;return b.extendFlat(r,{color:L(f,a),x0:E-k,x1:E+k,xLabelVal:z,y0:m-k,y1:m+k,yLabelVal:B,spikeDistance:S(a),hovertemplate:f.hovertemplate}),v(a,f,r),o.getComponentMethod("errorbars","hoverInfo")(a,f,r),[r]}}function F($){if(!$)return!1;var et=$.node();try{var ot=new DOMPoint(c[0],c[1]);return et.isPointInFill(ot)}catch{var nt=et.ownerSVGElement.createSVGPoint();return nt.x=c[0],nt.y=c[1],et.isPointInFill(nt)}}function _($){var et,ot=[],nt=1/0,Z=-1/0,Q=1/0,W=-1/0,J;for(et=0;et<$.length;et++){var it=$[et];it.contains(c)&&(ot.push(it),Q=Math.min(Q,it.ymin),W=Math.max(W,it.ymax))}if(ot.length===0)return null;Q=Math.max(Q,0),W=Math.min(W,g._length),J=(Q+W)/2;var K,H,at,tt,lt,dt,mt;for(et=0;et<ot.length;et++)for(H=ot[et].pts,K=1;K<H.length;K++)dt=H[K-1][1],mt=H[K][1],dt>J!=mt>=J&&(tt=H[K-1][0],lt=H[K][0],mt-dt&&(at=tt+(lt-tt)*(J-dt)/(mt-dt),nt=Math.min(nt,at),Z=Math.max(Z,at)));return nt=Math.max(nt,0),Z=Math.min(Z,u._length),{x0:nt,x1:Z,y0:J,y1:J}}if(i.indexOf("fills")!==-1&&f._fillElement){var N=F(f._fillElement)&&!F(f._fillExclusionElement);if(N){var G=_(f._polygons);G===null&&(G={x0:c[0],x1:c[0],y0:c[1],y1:c[1]});var X=A.defaultLine;return A.opacity(f.fillcolor)?X=f.fillcolor:A.opacity((f.line||{}).color)&&(X=f.line.color),b.extendFlat(r,{distance:r.maxHoverDistance,x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1,color:X,hovertemplate:!1}),delete r.index,f.text&&!b.isArrayOrTypedArray(f.text)?r.text=String(f.text):r.text=f.name,[r]}}}},65875:function(j,V,t){var b=t(43028);j.exports={hasLines:b.hasLines,hasMarkers:b.hasMarkers,hasText:b.hasText,isBubble:b.isBubble,attributes:t(52904),layoutAttributes:t(55308),supplyDefaults:t(18800),crossTraceDefaults:t(35036),supplyLayoutDefaults:t(59748),calc:t(16356).calc,crossTraceCalc:t(96664),arraysToCalcdata:t(20148),plot:t(96504),colorbar:t(5528),formatLabels:t(76688),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(98723),selectPoints:t(91560),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t(57952),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},55308:function(j){j.exports={scattermode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},scattergap:{valType:"number",min:0,max:1,editType:"calc"}}},59748:function(j,V,t){var b=t(3400),P=t(55308);j.exports=function(o,L){function A(p,r){return b.coerce(o,L,P,p,r)}var v=L.barmode==="group";L.scattermode==="group"&&A("scattergap",v?L.bargap:.2)}},66828:function(j,V,t){var b=t(3400).isArrayOrTypedArray,P=t(94288).hasColorscale,o=t(27260);j.exports=function(A,v,p,r,e,s){s||(s={});var n=(A.marker||{}).color;if(n&&n._inputArray&&(n=n._inputArray),e("line.color",p),P(A,"line"))o(A,v,r,e,{prefix:"line.",cLetter:"c"});else{var l=(b(n)?!1:n)||p;e("line.color",l)}e("line.width"),s.noDash||e("line.dash"),s.backoff&&e("line.backoff")}},52340:function(j,V,t){var b=t(43616),P=t(39032),o=P.BADNUM,L=P.LOG_CLIP,A=L+.5,v=L-.5,p=t(3400),r=p.segmentsIntersect,e=p.constrain,s=t(88200);j.exports=function(l,f){var u=f.trace||{},g=f.xaxis,h=f.yaxis,T=g.type==="log",c=h.type==="log",i=g._length,d=h._length,x=f.backoff,w=u.marker,C=f.connectGaps,y=f.baseTolerance,S=f.shape,M=S==="linear",a=u.fill&&u.fill!=="none",E=[],m=s.minTolerance,k=l.length,I=new Array(k),O=0,z,B,F,_,N,G,X,$,et,ot,nt,Z,Q,W,J,it;function K($t){var re=l[$t];if(!re)return!1;var Be=f.linearized?g.l2p(re.x):g.c2p(re.x),We=f.linearized?h.l2p(re.y):h.c2p(re.y);if(Be===o){if(T&&(Be=g.c2p(re.x,!0)),Be===o)return!1;c&&We===o&&(Be*=Math.abs(g._m*d*(g._m>0?A:v)/(h._m*i*(h._m>0?A:v)))),Be*=1e3}if(We===o){if(c&&(We=h.c2p(re.y,!0)),We===o)return!1;We*=1e3}return[Be,We]}function H($t,re,Be,We){var me=Be-$t,Se=We-re,je=.5-$t,vr=.5-re,he=me*me+Se*Se,Ye=me*je+Se*vr;if(Ye>0&&Ye<he){var Qe=je*Se-vr*me;if(Qe*Qe<he)return!0}}var at,tt;function lt($t,re){var Be=$t[0]/i,We=$t[1]/d,me=Math.max(0,-Be,Be-1,-We,We-1);return me&&at!==void 0&&H(Be,We,at,tt)&&(me=0),me&&re&&H(Be,We,re[0]/i,re[1]/d)&&(me=0),(1+s.toleranceGrowth*me)*y}function dt($t,re){var Be=$t[0]-re[0],We=$t[1]-re[1];return Math.sqrt(Be*Be+We*We)}var mt=s.maxScreensAway,gt=-i*mt,Mt=i*(1+mt),Lt=-d*mt,zt=d*(1+mt),xt=[[gt,Lt,Mt,Lt],[Mt,Lt,Mt,zt],[Mt,zt,gt,zt],[gt,zt,gt,Lt]],Ct,wt,Rt,Tt,Bt,Gt;function te($t,re){for(var Be=[],We=0,me=0;me<4;me++){var Se=xt[me],je=r($t[0],$t[1],re[0],re[1],Se[0],Se[1],Se[2],Se[3]);je&&(!We||Math.abs(je.x-Be[0][0])>1||Math.abs(je.y-Be[0][1])>1)&&(je=[je.x,je.y],We&&dt(je,$t)<dt(Be[0],$t)?Be.unshift(je):Be.push(je),We++)}return Be}function Wt($t){if($t[0]<gt||$t[0]>Mt||$t[1]<Lt||$t[1]>zt)return[e($t[0],gt,Mt),e($t[1],Lt,zt)]}function jt($t,re){if($t[0]===re[0]&&($t[0]===gt||$t[0]===Mt)||$t[1]===re[1]&&($t[1]===Lt||$t[1]===zt))return!0}function ie($t,re){var Be=[],We=Wt($t),me=Wt(re);return We&&me&&jt(We,me)||(We&&Be.push(We),me&&Be.push(me)),Be}function ue($t,re,Be){return function(We,me){var Se=Wt(We),je=Wt(me),vr=[];if(Se&&je&&jt(Se,je))return vr;Se&&vr.push(Se),je&&vr.push(je);var he=2*p.constrain((We[$t]+me[$t])/2,re,Be)-((Se||We)[$t]+(je||me)[$t]);if(he){var Ye;Se&&je?Ye=he>0==Se[$t]>je[$t]?Se:je:Ye=Se||je,Ye[$t]+=he}return vr}}var fe;S==="linear"||S==="spline"?fe=te:S==="hv"||S==="vh"?fe=ie:S==="hvh"?fe=ue(0,gt,Mt):S==="vhv"&&(fe=ue(1,Lt,zt));function pe($t,re){var Be=re[0]-$t[0],We=(re[1]-$t[1])/Be,me=($t[1]*re[0]-re[1]*$t[0])/Be;return me>0?[We>0?gt:Mt,zt]:[We>0?Mt:gt,Lt]}function Te($t){var re=$t[0],Be=$t[1],We=re===I[O-1][0],me=Be===I[O-1][1];if(!(We&&me))if(O>1){var Se=re===I[O-2][0],je=Be===I[O-2][1];We&&(re===gt||re===Mt)&&Se?je?O--:I[O-1]=$t:me&&(Be===Lt||Be===zt)&&je?Se?O--:I[O-1]=$t:I[O++]=$t}else I[O++]=$t}function Qt($t){I[O-1][0]!==$t[0]&&I[O-1][1]!==$t[1]&&Te([Rt,Tt]),Te($t),Bt=null,Rt=Tt=0}var Pt=p.isArrayOrTypedArray(w);function Ot($t){if($t&&x&&($t.i=z,$t.d=l,$t.trace=u,$t.marker=Pt?w[$t.i]:w,$t.backoff=x),at=$t[0]/i,tt=$t[1]/d,Ct=$t[0]<gt?gt:$t[0]>Mt?Mt:0,wt=$t[1]<Lt?Lt:$t[1]>zt?zt:0,Ct||wt){if(!O)I[O++]=[Ct||$t[0],wt||$t[1]];else if(Bt){var re=fe(Bt,$t);re.length>1&&(Qt(re[0]),I[O++]=re[1])}else Gt=fe(I[O-1],$t)[0],I[O++]=Gt;var Be=I[O-1];Ct&&wt&&(Be[0]!==Ct||Be[1]!==wt)?(Bt&&(Rt!==Ct&&Tt!==wt?Te(Rt&&Tt?pe(Bt,$t):[Rt||Ct,Tt||wt]):Rt&&Tt&&Te([Rt,Tt])),Te([Ct,wt])):Rt-Ct&&Tt-wt&&Te([Ct||Rt,wt||Tt]),Bt=$t,Rt=Ct,Tt=wt}else Bt&&Qt(fe(Bt,$t)[0]),I[O++]=$t}for(z=0;z<k;z++)if(B=K(z),!!B){for(O=0,Bt=null,Ot(B),z++;z<k;z++){if(_=K(z),!_){if(C)continue;break}if(!M||!f.simplify){Ot(_);continue}var Nt=K(z+1);if(ot=dt(_,B),!(!(a&&(O===0||O===k-1))&&ot<lt(_,Nt)*m)){for($=[(_[0]-B[0])/ot,(_[1]-B[1])/ot],N=B,nt=ot,Z=W=J=0,X=!1,F=_,z++;z<l.length;z++){if(G=Nt,Nt=K(z+1),!G){if(C)continue;break}if(et=[G[0]-B[0],G[1]-B[1]],it=et[0]*$[1]-et[1]*$[0],W=Math.min(W,it),J=Math.max(J,it),J-W>lt(G,Nt))break;F=G,Q=et[0]*$[0]+et[1]*$[1],Q>nt?(nt=Q,_=G,X=!1):Q<Z&&(Z=Q,N=G,X=!0)}if(X?(Ot(_),F!==N&&Ot(N)):(N!==B&&Ot(N),F!==_&&Ot(_)),Ot(F),z>=l.length||!G)break;Ot(G),B=G}}Bt&&Te([Rt||Bt[0],Tt||Bt[1]]),E.push(I.slice(0,O))}var Ht=S.slice(S.length-1);if(x&&Ht!=="h"&&Ht!=="v"){for(var St=!1,kt=-1,Ft=[],At=0;At<E.length;At++)for(var ft=0;ft<E[At].length-1;ft++){var pt=E[At][ft],Dt=E[At][ft+1],Ut=b.applyBackoff(Dt,pt);(Ut[0]!==Dt[0]||Ut[1]!==Dt[1])&&(St=!0),Ft[kt+1]||(kt++,Ft[kt]=[pt,[Ut[0],Ut[1]]])}return St?Ft:E}return E}},11731:function(j){j.exports=function(t,b,P){var o=P("line.shape");o==="spline"&&P("line.smoothing")}},14328:function(j){var V={tonextx:1,tonexty:1,tonext:1};j.exports=function(b,P,o){var L,A,v,p,r,e={},s=!1,n=-1,l=0,f=-1;for(A=0;A<o.length;A++)L=o[A][0].trace,v=L.stackgroup||"",v?v in e?r=e[v]:(r=e[v]=l,l++):L.fill in V&&f>=0?r=f:(r=f=l,l++),r<n&&(s=!0),L._groupIndex=n=r;var u=o.slice();s&&u.sort(function(h,T){var c=h[0].trace,i=T[0].trace;return c._groupIndex-i._groupIndex||c.index-i.index});var g={};for(A=0;A<u.length;A++)L=u[A][0].trace,v=L.stackgroup||"",L.visible===!0?(L._nexttrace=null,L.fill in V&&(p=g[v],L._prevtrace=p||null,p&&(p._nexttrace=L)),L._ownfill=L.fill&&(L.fill.substr(0,6)==="tozero"||L.fill==="toself"||L.fill.substr(0,2)==="to"&&!L._prevtrace),g[v]=L):L._prevtrace=L._nexttrace=L._ownfill=null;return u}},7152:function(j,V,t){var b=t(38248);j.exports=function(o,L){L||(L=2);var A=o.marker,v=A.sizeref||1,p=A.sizemin||0,r=A.sizemode==="area"?function(e){return Math.sqrt(e/v)}:function(e){return e/v};return function(e){var s=r(e/L);return b(s)&&s>0?Math.max(s,p):0}}},5528:function(j){j.exports={container:"marker",min:"cmin",max:"cmax"}},74428:function(j,V,t){var b=t(76308),P=t(94288).hasColorscale,o=t(27260),L=t(43028);j.exports=function(v,p,r,e,s,n){var l=L.isBubble(v),f=(v.line||{}).color,u;if(n=n||{},f&&(r=f),s("marker.symbol"),s("marker.opacity",l?.7:1),s("marker.size"),n.noAngle||(s("marker.angle"),n.noAngleRef||s("marker.angleref"),n.noStandOff||s("marker.standoff")),s("marker.color",r),P(v,"marker")&&o(v,p,e,s,{prefix:"marker.",cLetter:"c"}),n.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),n.noLine||(f&&!Array.isArray(f)&&p.marker.color!==f?u=f:l?u=b.background:u=b.defaultLine,s("marker.line.color",u),P(v,"marker.line")&&o(v,p,e,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",l?1:0)),l&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),n.gradient){var g=s("marker.gradient.type");g!=="none"&&s("marker.gradient.color")}}},31147:function(j,V,t){var b=t(3400).dateTick0,P=t(39032),o=P.ONEWEEK;function L(A,v){return A%o===0?b(v,1):b(v,0)}j.exports=function(v,p,r,e,s){if(s||(s={x:!0,y:!0}),s.x){var n=e("xperiod");n&&(e("xperiod0",L(n,p.xcalendar)),e("xperiodalignment"))}if(s.y){var l=e("yperiod");l&&(e("yperiod0",L(l,p.ycalendar)),e("yperiodalignment"))}}},96504:function(j,V,t){var b=t(33428),P=t(24040),o=t(3400),L=o.ensureSingle,A=o.identity,v=t(43616),p=t(43028),r=t(52340),e=t(14328),s=t(92065).tester;j.exports=function(g,h,T,c,i,d){var x,w,C=!i,y=!!i&&i.duration>0,S=e(g,h,T);if(x=c.selectAll("g.trace").data(S,function(a){return a[0].trace.uid}),x.enter().append("g").attr("class",function(a){return"trace scatter trace"+a[0].trace.uid}).style("stroke-miterlimit",2),x.order(),n(g,x,h),y){d&&(w=d());var M=b.transition().duration(i.duration).ease(i.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()});M.each(function(){c.selectAll("g.trace").each(function(a,E){l(g,E,h,a,S,this,i)})})}else x.each(function(a,E){l(g,E,h,a,S,this,i)});C&&x.exit().remove(),c.selectAll("path:not([d])").remove()};function n(u,g,h){g.each(function(T){var c=L(b.select(this),"g","fills");v.setClipUrl(c,h.layerClipId,u);var i=T[0].trace,d=[];i._ownfill&&d.push("_ownFill"),i._nexttrace&&d.push("_nextFill");var x=c.selectAll("g").data(d,A);x.enter().append("g"),x.exit().each(function(w){i[w]=null}).remove(),x.order().each(function(w){i[w]=L(b.select(this),"path","js-fill")})})}function l(u,g,h,T,c,i,d){var x=u._context.staticPlot,w;f(u,g,h,T,c);var C=!!d&&d.duration>0;function y(Te){return C?Te.transition():Te}var S=h.xaxis,M=h.yaxis,a=T[0].trace,E=a.line,m=b.select(i),k=L(m,"g","errorbars"),I=L(m,"g","lines"),O=L(m,"g","points"),z=L(m,"g","text");if(P.getComponentMethod("errorbars","plot")(u,k,h,d),a.visible!==!0)return;y(m).style("opacity",a.opacity);var B,F,_=a.fill.charAt(a.fill.length-1);_!=="x"&&_!=="y"&&(_="");var N,G;_==="y"?(N=1,G=M.c2p(0,!0)):_==="x"&&(N=0,G=S.c2p(0,!0)),T[0][h.isRangePlot?"nodeRangePlot3":"node3"]=m;var X="",$=[],et=a._prevtrace,ot=null,nt=null;et&&(X=et._prevRevpath||"",F=et._nextFill,$=et._ownPolygons,ot=et._fillsegments,nt=et._fillElement);var Z,Q,W="",J="",it,K,H,at,tt,lt,dt=[];a._polygons=[];var mt=[],gt=[],Mt=o.noop;if(B=a._ownFill,p.hasLines(a)||a.fill!=="none"){F&&F.datum(T),["hv","vh","hvh","vhv"].indexOf(E.shape)!==-1?(it=v.steps(E.shape),K=v.steps(E.shape.split("").reverse().join(""))):E.shape==="spline"?it=K=function(Te){var Qt=Te[Te.length-1];return Te.length>1&&Te[0][0]===Qt[0]&&Te[0][1]===Qt[1]?v.smoothclosed(Te.slice(1),E.smoothing):v.smoothopen(Te,E.smoothing)}:it=K=function(Te){return"M"+Te.join("L")},H=function(Te){return K(Te.reverse())},gt=r(T,{xaxis:S,yaxis:M,trace:a,connectGaps:a.connectgaps,baseTolerance:Math.max(E.width||1,3)/4,shape:E.shape,backoff:E.backoff,simplify:E.simplify,fill:a.fill}),mt=new Array(gt.length);var Lt=0;for(w=0;w<gt.length;w++){var zt,xt=gt[w];!zt||!_?(zt=xt.slice(),mt[Lt]=zt,Lt++):zt.push.apply(zt,xt)}a._fillElement=null,a._fillExclusionElement=nt,a._fillsegments=mt.slice(0,Lt),mt=a._fillsegments,gt.length&&(at=gt[0][0].slice(),tt=gt[gt.length-1],lt=tt[tt.length-1].slice()),Mt=function(Te){return function(Qt){if(Z=it(Qt),Q=H(Qt),W?_?(W+="L"+Z.substr(1),J=Q+("L"+J.substr(1))):(W+="Z"+Z,J=Q+"Z"+J):(W=Z,J=Q),p.hasLines(a)){var Pt=b.select(this);if(Pt.datum(T),Te)y(Pt.style("opacity",0).attr("d",Z).call(v.lineGroupStyle)).style("opacity",1);else{var Ot=y(Pt);Ot.attr("d",Z),v.singleLineStyle(T,Ot)}}}}}var Ct=I.selectAll(".js-line").data(gt);y(Ct.exit()).style("opacity",0).remove(),Ct.each(Mt(!1)),Ct.enter().append("path").classed("js-line",!0).style("vector-effect",x?"none":"non-scaling-stroke").call(v.lineGroupStyle).each(Mt(!0)),v.setClipUrl(Ct,h.layerClipId,u);function wt(Te){y(Te).attr("d","M0,0Z")}var Rt=function(){var Te=new Array(mt.length);for(w=0;w<mt.length;w++)Te[w]=s(mt[w]);return Te},Tt=function(Te){var Qt,Pt;if(!Te||Te.length===0)for(Qt=new Array(mt.length),Pt=0;Pt<mt.length;Pt++){var Ot=mt[Pt][0].slice(),Nt=mt[Pt][mt[Pt].length-1].slice();Ot[N]=Nt[N]=G;var Ht=[Nt,Ot],St=Ht.concat(mt[Pt]);Qt[Pt]=s(St)}else{for(Qt=new Array(Te.length-1+mt.length),Pt=0;Pt<Te.length-1;Pt++)Qt[Pt]=s(Te[Pt]);var kt=Te[Te.length-1].slice();for(kt.reverse(),Pt=0;Pt<mt.length;Pt++)Qt[Te.length-1+Pt]=s(mt[Pt].concat(kt))}return Qt};gt.length?(B?(B.datum(T),at&&lt&&(_?(at[N]=lt[N]=G,y(B).attr("d","M"+lt+"L"+at+"L"+W.substr(1)).call(v.singleFillStyle,u),dt=Tt(null)):(y(B).attr("d",W+"Z").call(v.singleFillStyle,u),dt=Rt())),a._polygons=dt,a._fillElement=B):F&&(a.fill.substr(0,6)==="tonext"&&W&&X?(a.fill==="tonext"?(y(F).attr("d",W+"Z"+X+"Z").call(v.singleFillStyle,u),dt=Rt(),a._polygons=dt.concat($)):(y(F).attr("d",W+"L"+X.substr(1)+"Z").call(v.singleFillStyle,u),dt=Tt(ot),a._polygons=dt),a._fillElement=F):wt(F)),a._prevRevpath=J):(B?wt(B):F&&wt(F),a._prevRevpath=null),a._ownPolygons=dt;function Bt(Te){return Te.filter(function(Qt){return!Qt.gap&&Qt.vis})}function Gt(Te){return Te.filter(function(Qt){return Qt.vis})}function te(Te){return Te.filter(function(Qt){return!Qt.gap})}function Wt(Te){return Te.id}function jt(Te){if(Te.ids)return Wt}function ie(){return!1}function ue(Te,Qt,Pt){var Ot,Nt,Ht,St=Pt[0].trace,kt=p.hasMarkers(St),Ft=p.hasText(St),At=jt(St),ft=ie,pt=ie;if(kt||Ft){var Dt=A,Ut=St.stackgroup,$t=Ut&&u._fullLayout._scatterStackOpts[S._id+M._id][Ut].stackgaps==="infer zero";St.marker.maxdisplayed||St._needsCull?Dt=$t?Gt:Bt:Ut&&!$t&&(Dt=te),kt&&(ft=Dt),Ft&&(pt=Dt)}Nt=Te.selectAll("path.point"),Ot=Nt.data(ft,At);var re=Ot.enter().append("path").classed("point",!0);C&&re.call(v.pointStyle,St,u).call(v.translatePoints,S,M).style("opacity",0).transition().style("opacity",1),Ot.order();var Be;kt&&(Be=v.makePointStyleFns(St)),Ot.each(function(We){var me=b.select(this),Se=y(me);Ht=v.translatePoint(We,Se,S,M),Ht?(v.singlePointStyle(We,Se,St,Be,u),h.layerClipId&&v.hideOutsideRangePoint(We,Se,S,M,St.xcalendar,St.ycalendar),St.customdata&&me.classed("plotly-customdata",We.data!==null&&We.data!==void 0)):Se.remove()}),C?Ot.exit().transition().style("opacity",0).remove():Ot.exit().remove(),Nt=Qt.selectAll("g"),Ot=Nt.data(pt,At),Ot.enter().append("g").classed("textpoint",!0).append("text"),Ot.order(),Ot.each(function(We){var me=b.select(this),Se=y(me.select("text"));Ht=v.translatePoint(We,Se,S,M),Ht?h.layerClipId&&v.hideOutsideRangePoint(We,me,S,M,St.xcalendar,St.ycalendar):me.remove()}),Ot.selectAll("text").call(v.textPointStyle,St,u).each(function(We){var me=S.c2p(We.x),Se=M.c2p(We.y);b.select(this).selectAll("tspan.line").each(function(){y(b.select(this)).attr({x:me,y:Se})})}),Ot.exit().remove()}O.datum(T),z.datum(T),ue(O,z,T);var fe=a.cliponaxis===!1,pe=fe?null:h.layerClipId;v.setClipUrl(O,pe,u),v.setClipUrl(z,pe,u)}function f(u,g,h,T,c){var i=h.xaxis,d=h.yaxis,x=b.extent(o.simpleMap(i.range,i.r2c)),w=b.extent(o.simpleMap(d.range,d.r2c)),C=T[0].trace;if(p.hasMarkers(C)){var y=C.marker.maxdisplayed;if(y!==0){var S=T.filter(function(m){return m.x>=x[0]&&m.x<=x[1]&&m.y>=w[0]&&m.y<=w[1]}),M=Math.ceil(S.length/y),a=0;c.forEach(function(m,k){var I=m[0].trace;p.hasMarkers(I)&&I.marker.maxdisplayed>0&&k<g&&a++});var E=Math.round(a*M/3+Math.floor(a/3)*M/7.1);T.forEach(function(m){delete m.vis}),S.forEach(function(m,k){Math.round((k+E)%M)===0&&(m.vis=!0)})}}}},91560:function(j,V,t){var b=t(43028);j.exports=function(o,L){var A=o.cd,v=o.xaxis,p=o.yaxis,r=[],e=A[0].trace,s,n,l,f,u=!b.hasMarkers(e)&&!b.hasText(e);if(u)return[];if(L===!1)for(s=0;s<A.length;s++)A[s].selected=0;else for(s=0;s<A.length;s++)n=A[s],l=v.c2p(n.x),f=p.c2p(n.y),n.i!==null&&L.contains([l,f],!1,s,o)?(r.push({pointNumber:n.i,x:v.c2d(n.x),y:p.c2d(n.y)}),n.selected=1):n.selected=0;return r}},43912:function(j){var V=["orientation","groupnorm","stackgaps"];j.exports=function(b,P,o,L){var A=o._scatterStackOpts,v=L("stackgroup");if(v){var p=P.xaxis+P.yaxis,r=A[p];r||(r=A[p]={});var e=r[v],s=!1;e?e.traces.push(P):(e=r[v]={traceIndices:[],traces:[P]},s=!0);for(var n={orientation:P.x&&!P.y?"h":"v"},l=0;l<V.length;l++){var f=V[l],u=f+"Found";if(!e[u]){var g=b[f]!==void 0,h=f==="orientation";if((g||s)&&(e[f]=L(f,n[f]),h&&(e.fillDflt=e[f]==="h"?"tonextx":"tonexty"),g&&(e[u]=!0,!s&&(delete e.traces[0][f],h))))for(var T=0;T<e.traces.length-1;T++){var c=e.traces[T];c._input.fill!==c.fill&&(c.fill=e.fillDflt)}}}return e}}},49224:function(j,V,t){var b=t(33428),P=t(43616),o=t(24040);function L(r){var e=b.select(r).selectAll("g.trace.scatter");e.style("opacity",function(s){return s[0].trace.opacity}),e.selectAll("g.points").each(function(s){var n=b.select(this),l=s.trace||s[0].trace;A(n,l,r)}),e.selectAll("g.text").each(function(s){var n=b.select(this),l=s.trace||s[0].trace;v(n,l,r)}),e.selectAll("g.trace path.js-line").call(P.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(P.fillGroupStyle,r,!1),o.getComponentMethod("errorbars","style")(e)}function A(r,e,s){P.pointStyle(r.selectAll("path.point"),e,s)}function v(r,e,s){P.textPointStyle(r.selectAll("text"),e,s)}function p(r,e,s){var n=e[0].trace;n.selectedpoints?(P.selectedPointStyle(s.selectAll("path.point"),n),P.selectedTextStyle(s.selectAll("text"),n)):(A(s,n,r),v(s,n,r))}j.exports={style:L,stylePoints:A,styleText:v,styleOnSelect:p}},43028:function(j,V,t){var b=t(3400),P=t(38116).isTypedArraySpec;j.exports={hasLines:function(o){return o.visible&&o.mode&&o.mode.indexOf("lines")!==-1},hasMarkers:function(o){return o.visible&&(o.mode&&o.mode.indexOf("markers")!==-1||o.type==="splom")},hasText:function(o){return o.visible&&o.mode&&o.mode.indexOf("text")!==-1},isBubble:function(o){var L=o.marker;return b.isPlainObject(L)&&(b.isArrayOrTypedArray(L.size)||P(L.size))}}},124:function(j,V,t){var b=t(3400);j.exports=function(P,o,L,A,v){v=v||{},A("textposition"),b.coerceFont(A,"textfont",v.font||L.font,v),v.noSelect||(A("selected.textfont.color"),A("unselected.textfont.color"))}},43980:function(j,V,t){var b=t(3400),P=t(24040);j.exports=function(L,A,v,p){var r=p("x"),e=p("y"),s,n=P.getComponentMethod("calendars","handleTraceDefaults");if(n(L,A,["x","y"],v),r){var l=b.minRowLength(r);e?s=Math.min(l,b.minRowLength(e)):(s=l,p("y0"),p("dy"))}else{if(!e)return 0;s=b.minRowLength(e),p("x0"),p("dx")}return A._length=s,s}},91592:function(j,V,t){var b=t(52904),P=t(25376),o=t(49084),L=t(29736).axisHoverFormat,A=t(21776).Ks,v=t(21776).Gw,p=t(45464),r=t(99168),e=t(87792),s=t(92880).extendFlat,n=t(67824).overrideAll,l=t(95376),f=b.line,u=b.marker,g=u.line,h=s({width:f.width,dash:{valType:"enumerated",values:l(r),dflt:"solid"}},o("line"));function T(i){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:.6666666666666666}}}var c=j.exports=n({x:b.x,y:b.y,z:{valType:"data_array"},text:s({},b.text,{}),texttemplate:v({},{}),hovertext:s({},b.hovertext,{}),hovertemplate:A(),xhoverformat:L("x"),yhoverformat:L("y"),zhoverformat:L("z"),mode:s({},b.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:T(),y:T(),z:T()},connectgaps:b.connectgaps,line:h,marker:s({symbol:{valType:"enumerated",values:l(e),dflt:"circle",arrayOk:!0},size:s({},u.size,{dflt:8}),sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode,opacity:s({},u.opacity,{arrayOk:!1}),colorbar:u.colorbar,line:s({width:s({},g.width,{arrayOk:!1})},o("marker.line"))},o("marker")),textposition:s({},b.textposition,{dflt:"top center"}),textfont:P({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,variantValues:["normal","small-caps"]}),opacity:p.opacity,hoverinfo:s({},p.hoverinfo)},"calc","nested");c.x.editType=c.y.editType=c.z.editType="calc+clearAxisTypes"},41484:function(j,V,t){var b=t(20148),P=t(90136);j.exports=function(L,A){var v=[{x:!1,y:!1,trace:A,t:{}}];return b(v,A),P(L,A),v}},45156:function(j,V,t){var b=t(24040);function P(A,v,p,r){if(!v||!v.visible)return null;for(var e=b.getComponentMethod("errorbars","makeComputeError")(v),s=new Array(A.length),n=0;n<A.length;n++){var l=e(+A[n],n);if(r.type==="log"){var f=r.c2l(A[n]),u=A[n]-l[0],g=A[n]+l[1];if(s[n]=[(r.c2l(u,!0)-f)*p,(r.c2l(g,!0)-f)*p],u>0){var h=r.c2l(u);r._lowerLogErrorBound||(r._lowerLogErrorBound=h),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,h)}}else s[n]=[-l[0]*p,l[1]*p]}return s}function o(A){for(var v=0;v<A.length;v++)if(A[v])return A[v].length;return 0}function L(A,v,p){var r=[P(A.x,A.error_x,v[0],p.xaxis),P(A.y,A.error_y,v[1],p.yaxis),P(A.z,A.error_z,v[2],p.zaxis)],e=o(r);if(e===0)return null;for(var s=new Array(e),n=0;n<e;n++){for(var l=[[0,0,0],[0,0,0]],f=0;f<3;f++)if(r[f])for(var u=0;u<2;u++)l[u][f]=r[f][n][u];s[n]=l}return s}j.exports=L},41064:function(j,V,t){var b=t(67792).gl_line3d,P=t(67792).gl_scatter3d,o=t(67792).gl_error3d,L=t(67792).gl_mesh3d,A=t(67792).delaunay_triangulate,v=t(3400),p=t(43080),r=t(33040).formatColor,e=t(7152),s=t(99168),n=t(87792),l=t(54460),f=t(10624).appendArrayPointValue,u=t(45156);function g(m,k){this.scene=m,this.uid=k,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var h=g.prototype;h.handlePick=function(m){if(m.object&&(m.object===this.linePlot||m.object===this.delaunayMesh||m.object===this.textMarkers||m.object===this.scatterPlot)){var k=m.index=m.data.index;return m.object.highlight&&m.object.highlight(null),this.scatterPlot&&(m.object=this.scatterPlot,this.scatterPlot.highlight(m.data)),m.textLabel="",this.textLabels&&(v.isArrayOrTypedArray(this.textLabels)?(this.textLabels[k]||this.textLabels[k]===0)&&(m.textLabel=this.textLabels[k]):m.textLabel=this.textLabels),m.traceCoordinate=[this.data.x[k],this.data.y[k],this.data.z[k]],!0}};function T(m,k,I){var O=(I+1)%3,z=(I+2)%3,B=[],F=[],_;for(_=0;_<m.length;++_){var N=m[_];isNaN(N[O])||!isFinite(N[O])||isNaN(N[z])||!isFinite(N[z])||(B.push([N[O],N[z]]),F.push(_))}var G=A(B);for(_=0;_<G.length;++_)for(var X=G[_],$=0;$<X.length;++$)X[$]=F[X[$]];return{positions:m,cells:G,meshColor:k}}function c(m){for(var k=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],O=[1,1,1],z=0;z<3;z++){var B=m[z];B&&B.copy_zstyle!==!1&&m[2].visible!==!1&&(B=m[2]),!(!B||!B.visible)&&(k[z]=B.width/2,I[z]=p(B.color),O[z]=B.thickness)}return{capSize:k,color:I,lineWidth:O}}function i(m){return m==null?0:m.indexOf("left")>-1?-1:m.indexOf("right")>-1?1:0}function d(m){return m==null?0:m.indexOf("top")>-1?-1:m.indexOf("bottom")>-1?1:0}function x(m){var k=0,I=0,O=[k,I];if(Array.isArray(m))for(var z=0;z<m.length;z++)O[z]=[k,I],m[z]&&(O[z][0]=i(m[z]),O[z][1]=d(m[z]));else O[0]=i(m),O[1]=d(m);return O}function w(m,k){return k(m*4)}function C(m){return n[m]}function y(m,k,I,O,z){var B=null;if(v.isArrayOrTypedArray(m)){B=[];for(var F=0;F<k;F++)m[F]===void 0?B[F]=O:B[F]=I(m[F],z)}else B=I(m,v.identity);return B}function S(m,k){var I=[],O=m.fullSceneLayout,z=m.dataScale,B=O.xaxis,F=O.yaxis,_=O.zaxis,N=k.marker,G=k.line,X=k.x||[],$=k.y||[],et=k.z||[],ot=X.length,nt=k.xcalendar,Z=k.ycalendar,Q=k.zcalendar,W,J,it,K,H,at;for(H=0;H<ot;H++)W=B.d2l(X[H],0,nt)*z[0],J=F.d2l($[H],0,Z)*z[1],it=_.d2l(et[H],0,Q)*z[2],I[H]=[W,J,it];if(Array.isArray(k.text))at=k.text;else if(v.isTypedArray(k.text))at=Array.from(k.text);else if(k.text!==void 0)for(at=new Array(ot),H=0;H<ot;H++)at[H]=k.text;function tt(te,Wt){var jt=O[te];return l.tickText(jt,jt.d2l(Wt),!0).text}var lt=k.texttemplate;if(lt){var dt=m.fullLayout,mt=dt._d3locale,gt=Array.isArray(lt),Mt=gt?Math.min(lt.length,ot):ot,Lt=gt?function(te){return lt[te]}:function(){return lt};for(at=new Array(Mt),H=0;H<Mt;H++){var zt={x:X[H],y:$[H],z:et[H]},xt={xLabel:tt("xaxis",X[H]),yLabel:tt("yaxis",$[H]),zLabel:tt("zaxis",et[H])},Ct={};f(Ct,k,H);var wt=k._meta||{};at[H]=v.texttemplateString(Lt(H),xt,mt,Ct,zt,wt)}}if(K={position:I,mode:k.mode,text:at},"line"in k&&(K.lineColor=r(G,1,ot),K.lineWidth=G.width,K.lineDashes=G.dash),"marker"in k){var Rt=e(k);K.scatterColor=r(N,1,ot),K.scatterSize=y(N.size,ot,w,20,Rt),K.scatterMarker=y(N.symbol,ot,C,"●"),K.scatterLineWidth=N.line.width,K.scatterLineColor=r(N.line,1,ot),K.scatterAngle=0}"textposition"in k&&(K.textOffset=x(k.textposition),K.textColor=r(k.textfont,1,ot),K.textSize=y(k.textfont.size,ot,v.identity,12),K.textFontFamily=k.textfont.family,K.textFontWeight=k.textfont.weight,K.textFontStyle=k.textfont.style,K.textFontVariant=k.textfont.variant,K.textAngle=0);var Tt=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],H=0;H<3;++H){var Bt=k.projection[Tt[H]];(K.project[H]=Bt.show)&&(K.projectOpacity[H]=Bt.opacity,K.projectScale[H]=Bt.scale)}K.errorBounds=u(k,z,O);var Gt=c([k.error_x,k.error_y,k.error_z]);return K.errorColor=Gt.color,K.errorLineWidth=Gt.lineWidth,K.errorCapSize=Gt.capSize,K.delaunayAxis=k.surfaceaxis,K.delaunayColor=p(k.surfacecolor),K}function M(m){if(v.isArrayOrTypedArray(m)){var k=m[0];return v.isArrayOrTypedArray(k)&&(m=k),"rgb("+m.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function a(m){return v.isArrayOrTypedArray(m)?m.length===4&&typeof m[0]=="number"?M(m):m.map(M):null}h.update=function(m){var k=this.scene.glplot.gl,I,O,z,B,F=s.solid;this.data=m;var _=S(this.scene,m);"mode"in _&&(this.mode=_.mode),"lineDashes"in _&&_.lineDashes in s&&(F=s[_.lineDashes]),this.color=a(_.scatterColor)||a(_.lineColor),this.dataPoints=_.position,I={gl:this.scene.glplot.gl,position:_.position,color:_.lineColor,lineWidth:_.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:m.opacity,connectGaps:m.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=b(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var N=m.opacity;if(m.marker&&m.marker.opacity!==void 0&&(N*=m.marker.opacity),O={gl:this.scene.glplot.gl,position:_.position,color:_.scatterColor,size:_.scatterSize,glyph:_.scatterMarker,opacity:N,orthographic:!0,lineWidth:_.scatterLineWidth,lineColor:_.scatterLineColor,project:_.project,projectScale:_.projectScale,projectOpacity:_.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(O):(this.scatterPlot=P(O),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),B={gl:this.scene.glplot.gl,position:_.position,glyph:_.text,color:_.textColor,size:_.textSize,angle:_.textAngle,alignment:_.textOffset,font:_.textFontFamily,fontWeight:_.textFontWeight,fontStyle:_.textFontStyle,fontVariant:_.textFontVariant,orthographic:!0,lineWidth:0,project:!1,opacity:m.opacity},this.textLabels=m.hovertext||m.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(B):(this.textMarkers=P(B),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),z={gl:this.scene.glplot.gl,position:_.position,color:_.errorColor,error:_.errorBounds,lineWidth:_.errorLineWidth,capSize:_.errorCapSize,opacity:m.opacity},this.errorBars?_.errorBounds?this.errorBars.update(z):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):_.errorBounds&&(this.errorBars=o(z),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),_.delaunayAxis>=0){var G=T(_.position,_.delaunayColor,_.delaunayAxis);G.opacity=m.opacity,this.delaunayMesh?this.delaunayMesh.update(G):(G.gl=k,this.delaunayMesh=L(G),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},h.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(m,k){var I=new g(m,k.uid);return I.update(k),I}j.exports=E},83484:function(j,V,t){var b=t(24040),P=t(3400),o=t(43028),L=t(74428),A=t(66828),v=t(124),p=t(91592);j.exports=function(s,n,l,f){function u(w,C){return P.coerce(s,n,p,w,C)}var g=r(s,n,u,f);if(!g){n.visible=!1;return}u("text"),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat"),u("zhoverformat"),u("mode"),o.hasMarkers(n)&&L(s,n,l,f,u,{noSelect:!0,noAngle:!0}),o.hasLines(n)&&(u("connectgaps"),A(s,n,l,f,u)),o.hasText(n)&&(u("texttemplate"),v(s,n,f,u,{noSelect:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var h=(n.line||{}).color,T=(n.marker||{}).color;u("surfaceaxis")>=0&&u("surfacecolor",h||T);for(var c=["x","y","z"],i=0;i<3;++i){var d="projection."+c[i];u(d+".show")&&(u(d+".opacity"),u(d+".scale"))}var x=b.getComponentMethod("errorbars","supplyDefaults");x(s,n,h||T||l,{axis:"z"}),x(s,n,h||T||l,{axis:"y",inherit:"z"}),x(s,n,h||T||l,{axis:"x",inherit:"z"})};function r(e,s,n,l){var f=0,u=n("x"),g=n("y"),h=n("z"),T=b.getComponentMethod("calendars","handleTraceDefaults");return T(e,s,["x","y","z"],l),u&&g&&h&&(f=Math.min(u.length,g.length,h.length),s._length=s._xlength=s._ylength=s._zlength=f),f}},3296:function(j,V,t){j.exports={plot:t(41064),attributes:t(91592),markerSymbols:t(87792),supplyDefaults:t(83484),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t(41484),moduleType:"trace",name:"scatter3d",basePlotModule:t(12536),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},90372:function(j,V,t){var b=t(98304),P=t(52904),o=t(45464),L=t(21776).Ks,A=t(21776).Gw,v=t(49084),p=t(92880).extendFlat,r=P.marker,e=P.line,s=r.line;j.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:p({},P.mode,{dflt:"markers"}),text:p({},P.text,{}),texttemplate:A({editType:"plot"},{keys:["a","b","text"]}),hovertext:p({},P.hovertext,{}),line:{color:e.color,width:e.width,dash:e.dash,backoff:e.backoff,shape:p({},e.shape,{values:["linear","spline"]}),smoothing:e.smoothing,editType:"calc"},connectgaps:P.connectgaps,fill:p({},P.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b(),marker:p({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,angle:r.angle,angleref:r.angleref,standoff:r.standoff,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:p({width:s.width,editType:"calc"},v("marker.line")),gradient:r.gradient,editType:"calc"},v("marker")),textfont:P.textfont,textposition:P.textposition,selected:P.selected,unselected:P.unselected,hoverinfo:p({},o.hoverinfo,{flags:["a","b","text","name"]}),hoveron:P.hoveron,hovertemplate:L(),zorder:P.zorder}},48228:function(j,V,t){var b=t(38248),P=t(90136),o=t(20148),L=t(4500),A=t(16356).calcMarkerSize,v=t(50948);j.exports=function(r,e){var s=e._carpetTrace=v(r,e);if(!(!s||!s.visible||s.visible==="legendonly")){var n;e.xaxis=s.xaxis,e.yaxis=s.yaxis;var l=e._length,f=new Array(l),u,g,h=!1;for(n=0;n<l;n++)if(u=e.a[n],g=e.b[n],b(u)&&b(g)){var T=s.ab2xy(+u,+g,!0),c=s.isVisible(+u,+g);c||(h=!0),f[n]={x:T[0],y:T[1],a:u,b:g,vis:c}}else f[n]={x:!1,y:!1};return e._needsCull=h,f[0].carpet=s,f[0].trace=e,A(e,l),P(r,e),o(f,e),L(f,e),f}}},6176:function(j,V,t){var b=t(3400),P=t(88200),o=t(43028),L=t(74428),A=t(66828),v=t(11731),p=t(124),r=t(70840),e=t(90372);j.exports=function(n,l,f,u){function g(w,C){return b.coerce(n,l,e,w,C)}g("carpet"),l.xaxis="x",l.yaxis="y";var h=g("a"),T=g("b"),c=Math.min(h.length,T.length);if(!c){l.visible=!1;return}l._length=c,g("text"),g("texttemplate"),g("hovertext");var i=c<P.PTS_LINESONLY?"lines+markers":"lines";g("mode",i),o.hasMarkers(l)&&L(n,l,f,u,g,{gradient:!0}),o.hasLines(l)&&(A(n,l,f,u,g,{backoff:!0}),v(n,l,g),g("connectgaps")),o.hasText(l)&&p(n,l,u,g);var d=[];(o.hasMarkers(l)||o.hasText(l))&&(g("marker.maxdisplayed"),d.push("points")),g("fill"),l.fill!=="none"&&(r(n,l,f,g),o.hasLines(l)||v(n,l,g)),(l.fill==="tonext"||l.fill==="toself")&&d.push("fills");var x=g("hoveron",d.join("+")||"points");x!=="fills"&&g("hovertemplate"),g("zorder"),b.coerceSelectionMarkerOpacity(l,g)}},89307:function(j){j.exports=function(t,b,P,o,L){var A=o[L];return t.a=A.a,t.b=A.b,t.y=A.y,t}},52364:function(j){j.exports=function(t,b){var P={},o=b._carpet,L=o.ab2ij([t.a,t.b]),A=Math.floor(L[0]),v=L[0]-A,p=Math.floor(L[1]),r=L[1]-p,e=o.evalxy([],A,p,v,r);return P.yLabel=e[1].toFixed(3),P}},58960:function(j,V,t){var b=t(98723),P=t(3400).fillText;j.exports=function(L,A,v,p){var r=b(L,A,v,p);if(!r||r[0].index===!1)return;var e=r[0];if(e.index===void 0){var s=1-e.y0/L.ya._length,n=L.xa._length,l=n*s/2,f=n-l;return e.x0=Math.max(Math.min(e.x0,f),l),e.x1=Math.max(Math.min(e.x1,f),l),r}var u=e.cd[e.index];e.a=u.a,e.b=u.b,e.xLabelVal=void 0,e.yLabelVal=void 0;var g=e.trace,h=g._carpet,T=g._module.formatLabels(u,g);e.yLabel=T.yLabel,delete e.text;var c=[];function i(w,C){var y;w.labelprefix&&w.labelprefix.length>0?y=w.labelprefix.replace(/ = $/,""):y=w._hovertitle,c.push(y+": "+C.toFixed(3)+w.labelsuffix)}if(!g.hovertemplate){var d=u.hi||g.hoverinfo,x=d.split("+");x.indexOf("all")!==-1&&(x=["a","b","text"]),x.indexOf("a")!==-1&&i(h.aaxis,u.a),x.indexOf("b")!==-1&&i(h.baxis,u.b),c.push("y: "+e.yLabel),x.indexOf("text")!==-1&&P(u,g,c),e.extraText=c.join("<br>")}return r}},4184:function(j,V,t){j.exports={attributes:t(90372),supplyDefaults:t(6176),colorbar:t(5528),formatLabels:t(52364),calc:t(48228),plot:t(20036),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(58960),selectPoints:t(91560),eventData:t(89307),moduleType:"trace",name:"scattercarpet",basePlotModule:t(57952),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},20036:function(j,V,t){var b=t(96504),P=t(54460),o=t(43616);j.exports=function(A,v,p,r){var e,s,n,l=p[0][0].carpet,f=P.getFromId(A,l.xaxis||"x"),u=P.getFromId(A,l.yaxis||"y"),g={xaxis:f,yaxis:u,plot:v.plot};for(e=0;e<p.length;e++)s=p[e][0].trace,s._xA=f,s._yA=u;for(b(A,g,p,r),e=0;e<p.length;e++)s=p[e][0].trace,n=r.selectAll("g.trace"+s.uid+" .js-line"),o.setClipUrl(n,p[e][0].carpet._clipPathId,A)}},6096:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(98304),L=t(52904),A=t(45464),v=t(49084),p=t(98192).u,r=t(92880).extendFlat,e=t(67824).overrideAll,s=L.marker,n=L.line,l=s.line;j.exports=e({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:r({},L.mode,{dflt:"markers"}),text:r({},L.text,{}),texttemplate:P({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:r({},L.hovertext,{}),textfont:L.textfont,textposition:L.textposition,line:{color:n.color,width:n.width,dash:p},connectgaps:L.connectgaps,marker:r({symbol:s.symbol,opacity:s.opacity,angle:s.angle,angleref:r({},s.angleref,{values:["previous","up","north"]}),standoff:s.standoff,size:s.size,sizeref:s.sizeref,sizemin:s.sizemin,sizemode:s.sizemode,colorbar:s.colorbar,line:r({width:l.width},v("marker.line")),gradient:s.gradient},v("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:o(),selected:L.selected,unselected:L.unselected,hoverinfo:r({},A.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:b()},"calc","nested")},25212:function(j,V,t){var b=t(38248),P=t(39032).BADNUM,o=t(90136),L=t(20148),A=t(4500),v=t(3400).isArrayOrTypedArray,p=t(3400)._;function r(e){return e&&typeof e=="string"}j.exports=function(s,n){var l=v(n.locations),f=l?n.locations.length:n._length,u=new Array(f),g;n.geojson?g=function(x){return r(x)||b(x)}:g=r;for(var h=0;h<f;h++){var T=u[h]={};if(l){var c=n.locations[h];T.loc=g(c)?c:null}else{var i=n.lon[h],d=n.lat[h];b(i)&&b(d)?T.lonlat=[+i,+d]:T.lonlat=[P,P]}}return L(u,n),o(s,n),A(u,n),f&&(u[0].t={labels:{lat:p(s,"lat:")+" ",lon:p(s,"lon:")+" "}}),u}},86188:function(j,V,t){var b=t(3400),P=t(43028),o=t(74428),L=t(66828),A=t(124),v=t(70840),p=t(6096);j.exports=function(e,s,n,l){function f(x,w){return b.coerce(e,s,p,x,w)}var u=f("locations"),g;if(u&&u.length){var h=f("geojson"),T;(typeof h=="string"&&h!==""||b.isPlainObject(h))&&(T="geojson-id");var c=f("locationmode",T);c==="geojson-id"&&f("featureidkey"),g=u.length}else{var i=f("lon")||[],d=f("lat")||[];g=Math.min(i.length,d.length)}if(!g){s.visible=!1;return}s._length=g,f("text"),f("hovertext"),f("hovertemplate"),f("mode"),P.hasMarkers(s)&&o(e,s,n,l,f,{gradient:!0}),P.hasLines(s)&&(L(e,s,n,l,f),f("connectgaps")),P.hasText(s)&&(f("texttemplate"),A(e,s,l,f)),f("fill"),s.fill!=="none"&&v(e,s,n,f),b.coerceSelectionMarkerOpacity(s,f)}},58544:function(j){j.exports=function(t,b,P,o,L){t.lon=b.lon,t.lat=b.lat,t.location=b.loc?b.loc:null;var A=o[L];return A.fIn&&A.fIn.properties&&(t.properties=A.fIn.properties),t}},56696:function(j,V,t){var b=t(54460);j.exports=function(o,L,A){var v={},p=A[L.geo]._subplot,r=p.mockAxis,e=o.lonlat;return v.lonLabel=b.tickText(r,r.c2l(e[0]),!0).text,v.latLabel=b.tickText(r,r.c2l(e[1]),!0).text,v}},64292:function(j,V,t){var b=t(93024),P=t(39032).BADNUM,o=t(44928),L=t(3400).fillText,A=t(6096);j.exports=function(r,e,s){var n=r.cd,l=n[0].trace,f=r.xa,u=r.ya,g=r.subplot,h=g.projection.isLonLatOverEdges,T=g.project;function c(S){var M=S.lonlat;if(M[0]===P||h(M))return 1/0;var a=T(M),E=T([e,s]),m=Math.abs(a[0]-E[0]),k=Math.abs(a[1]-E[1]),I=Math.max(3,S.mrc||0);return Math.max(Math.sqrt(m*m+k*k)-I,1-3/I)}if(b.getClosest(n,c,r),r.index!==!1){var i=n[r.index],d=i.lonlat,x=[f.c2p(d),u.c2p(d)],w=i.mrc||1;r.x0=x[0]-w,r.x1=x[0]+w,r.y0=x[1]-w,r.y1=x[1]+w,r.loc=i.loc,r.lon=d[0],r.lat=d[1];var C={};C[l.geo]={_subplot:g};var y=l._module.formatLabels(i,l,C);return r.lonLabel=y.lonLabel,r.latLabel=y.latLabel,r.color=o(l,i),r.extraText=v(l,i,r,n[0].t.labels),r.hovertemplate=l.hovertemplate,[r]}};function v(p,r,e,s){if(p.hovertemplate)return;var n=r.hi||p.hoverinfo,l=n==="all"?A.hoverinfo.flags:n.split("+"),f=l.indexOf("location")!==-1&&Array.isArray(p.locations),u=l.indexOf("lon")!==-1,g=l.indexOf("lat")!==-1,h=l.indexOf("text")!==-1,T=[];function c(i){return i+"°"}return f?T.push(r.loc):u&&g?T.push("("+c(e.latLabel)+", "+c(e.lonLabel)+")"):u?T.push(s.lon+c(e.lonLabel)):g&&T.push(s.lat+c(e.latLabel)),h&&L(r,p,T),T.join("<br>")}},36952:function(j,V,t){j.exports={attributes:t(6096),supplyDefaults:t(86188),colorbar:t(5528),formatLabels:t(56696),calc:t(25212),calcGeoJSON:t(48691).calcGeoJSON,plot:t(48691).plot,style:t(25064),styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(64292),eventData:t(58544),selectPoints:t(8796),moduleType:"trace",name:"scattergeo",basePlotModule:t(10816),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},48691:function(j,V,t){var b=t(33428),P=t(3400),o=t(59972).getTopojsonFeatures,L=t(44808),A=t(27144),v=t(19280).findExtremes,p=t(39032).BADNUM,r=t(16356).calcMarkerSize,e=t(43028),s=t(25064);function n(f,u,g){var h=u.layers.frontplot.select(".scatterlayer"),T=P.makeTraceGroups(h,g,"trace scattergeo");function c(i,d){i.lonlat[0]===p&&b.select(d).remove()}T.selectAll("*").remove(),T.each(function(i){var d=b.select(this),x=i[0].trace;if(e.hasLines(x)||x.fill!=="none"){var w=L.calcTraceToLineCoords(i),C=x.fill!=="none"?L.makePolygon(w):L.makeLine(w);d.selectAll("path.js-line").data([{geojson:C,trace:x}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}e.hasMarkers(x)&&d.selectAll("path.point").data(P.identity).enter().append("path").classed("point",!0).each(function(y){c(y,this)}),e.hasText(x)&&d.selectAll("g").data(P.identity).enter().append("g").append("text").each(function(y){c(y,this)}),s(f,i)})}function l(f,u){var g=f[0].trace,h=u[g.geo],T=h._subplot,c=g._length,i,d;if(P.isArrayOrTypedArray(g.locations)){var x=g.locationmode,w=x==="geojson-id"?A.extractTraceFeature(f):o(g,T.topojson);for(i=0;i<c;i++){d=f[i];var C=x==="geojson-id"?d.fOut:A.locationToFeature(x,d.loc,w);d.lonlat=C?C.properties.ct:[p,p]}}var y={padded:!0},S,M;if(h.fitbounds==="geojson"&&g.locationmode==="geojson-id"){var a=A.computeBbox(A.getTraceGeojson(g));S=[a[0],a[2]],M=[a[1],a[3]]}else{for(S=new Array(c),M=new Array(c),i=0;i<c;i++)d=f[i],S[i]=d.lonlat[0],M[i]=d.lonlat[1];y.ppad=r(g,c)}g._extremes.lon=v(h.lonaxis._ax,S,y),g._extremes.lat=v(h.lataxis._ax,M,y)}j.exports={calcGeoJSON:l,plot:n}},8796:function(j,V,t){var b=t(43028),P=t(39032).BADNUM;j.exports=function(L,A){var v=L.cd,p=L.xaxis,r=L.yaxis,e=[],s=v[0].trace,n,l,f,u,g,h=!b.hasMarkers(s)&&!b.hasText(s);if(h)return[];if(A===!1)for(g=0;g<v.length;g++)v[g].selected=0;else for(g=0;g<v.length;g++)n=v[g],l=n.lonlat,l[0]!==P&&(f=p.c2p(l),u=r.c2p(l),A.contains([f,u],null,g,L)?(e.push({pointNumber:g,lon:l[0],lat:l[1]}),n.selected=1):n.selected=0);return e}},25064:function(j,V,t){var b=t(33428),P=t(43616),o=t(76308),L=t(49224),A=L.stylePoints,v=L.styleText;j.exports=function(e,s){s&&p(e,s)};function p(r,e){var s=e[0].trace,n=e[0].node3;n.style("opacity",e[0].trace.opacity),A(n,s,r),v(n,s,r),n.selectAll("path.js-line").style("fill","none").each(function(l){var f=b.select(this),u=l.trace,g=u.line||{};f.call(o.stroke,g.color).call(P.dashLine,g.dash||"",g.width||0),u.fill!=="none"&&f.call(o.fill,u.fillcolor)})}},2876:function(j,V,t){var b=t(45464),P=t(25376),o=t(98304),L=t(52904),A=t(29736).axisHoverFormat,v=t(49084),p=t(95376),r=t(92880).extendFlat,e=t(67824).overrideAll,s=t(67072).DASHES,n=L.line,l=L.marker,f=l.line,u=j.exports=e({x:L.x,x0:L.x0,dx:L.dx,y:L.y,y0:L.y0,dy:L.dy,xperiod:L.xperiod,yperiod:L.yperiod,xperiod0:L.xperiod0,yperiod0:L.yperiod0,xperiodalignment:L.xperiodalignment,yperiodalignment:L.yperiodalignment,xhoverformat:A("x"),yhoverformat:A("y"),text:L.text,hovertext:L.hovertext,textposition:L.textposition,textfont:P({noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,editType:"calc",colorEditType:"style",arrayOk:!0,noNumericWeightValues:!0,variantValues:["normal","small-caps"]}),mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:p(s),dflt:"solid"}},marker:r({},v("marker"),{symbol:l.symbol,angle:l.angle,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,opacity:l.opacity,colorbar:l.colorbar,line:r({},v("marker.line"),{width:f.width})}),connectgaps:L.connectgaps,fill:r({},L.fill,{dflt:"none"}),fillcolor:o(),selected:{marker:L.selected.marker,textfont:L.selected.textfont},unselected:{marker:L.unselected.marker,textfont:L.unselected.textfont},opacity:b.opacity},"calc","nested");u.x.editType=u.y.editType=u.x0.editType=u.y0.editType="calc+clearAxisTypes",u.hovertemplate=L.hovertemplate,u.texttemplate=L.texttemplate},64628:function(j,V,t){var b=t(41272);j.exports={moduleType:"trace",name:"scattergl",basePlotModule:t(57952),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:t(2876),supplyDefaults:t(80220),crossTraceDefaults:t(35036),colorbar:t(5528),formatLabels:t(99396),calc:t(24856),hoverPoints:b.hoverPoints,selectPoints:t(73224),meta:{}}},24856:function(j,V,t){var b=t(3108),P=t(3400),o=t(79811),L=t(19280).findExtremes,A=t(1220),v=t(16356),p=v.calcMarkerSize,r=v.calcAxisExpansion,e=v.setFirstScatter,s=t(90136),n=t(84236),l=t(74588),f=t(39032).BADNUM,u=t(67072).TOO_MANY_POINTS;j.exports=function(c,i){var d=c._fullLayout,x=i._xA=o.getFromId(c,i.xaxis,"x"),w=i._yA=o.getFromId(c,i.yaxis,"y"),C=d._plots[i.xaxis+i.yaxis],y=i._length,S=y>=u,M=y*2,a={},E,m=x.makeCalcdata(i,"x"),k=w.makeCalcdata(i,"y"),I=A(i,x,"x",m),O=A(i,w,"y",k),z=I.vals,B=O.vals;i._x=z,i._y=B,i.xperiodalignment&&(i._origX=m,i._xStarts=I.starts,i._xEnds=I.ends),i.yperiodalignment&&(i._origY=k,i._yStarts=O.starts,i._yEnds=O.ends);var F=new Array(M),_=new Array(y);for(E=0;E<y;E++)F[E*2]=z[E]===f?NaN:z[E],F[E*2+1]=B[E]===f?NaN:B[E],_[E]=E;if(x.type==="log")for(E=0;E<M;E+=2)F[E]=x.c2l(F[E]);if(w.type==="log")for(E=1;E<M;E+=2)F[E]=w.c2l(F[E]);S&&x.type!=="log"&&w.type!=="log"?a.tree=b(F):a.ids=_,s(c,i);var N=h(c,C,i,F,z,B),G=l(c,C);e(d,i);var X;return S?N.marker&&(X=N.marker.sizeAvg||Math.max(N.marker.size,3)):X=p(i,y),r(c,i,x,w,z,B,X),N.errorX&&g(i,x,N.errorX),N.errorY&&g(i,w,N.errorY),N.fill&&!G.fill2d&&(G.fill2d=!0),N.marker&&!G.scatter2d&&(G.scatter2d=!0),N.line&&!G.line2d&&(G.line2d=!0),(N.errorX||N.errorY)&&!G.error2d&&(G.error2d=!0),N.text&&!G.glText&&(G.glText=!0),N.marker&&(N.marker.snap=y),G.lineOptions.push(N.line),G.errorXOptions.push(N.errorX),G.errorYOptions.push(N.errorY),G.fillOptions.push(N.fill),G.markerOptions.push(N.marker),G.markerSelectedOptions.push(N.markerSel),G.markerUnselectedOptions.push(N.markerUnsel),G.textOptions.push(N.text),G.textSelectedOptions.push(N.textSel),G.textUnselectedOptions.push(N.textUnsel),G.selectBatch.push([]),G.unselectBatch.push([]),a._scene=G,a.index=G.count,a.x=z,a.y=B,a.positions=F,G.count++,[{x:!1,y:!1,t:a,trace:i}]};function g(T,c,i){var d=T._extremes[c._id],x=L(c,i._bnds,{padded:!0});d.min=d.min.concat(x.min),d.max=d.max.concat(x.max)}function h(T,c,i,d,x,w){var C=n.style(T,i);if(C.marker&&(C.marker.positions=d),C.line&&d.length>1&&P.extendFlat(C.line,n.linePositions(T,i,d)),C.errorX||C.errorY){var y=n.errorBarPositions(T,i,d,x,w);C.errorX&&P.extendFlat(C.errorX,y.x),C.errorY&&P.extendFlat(C.errorY,y.y)}return C.text&&(P.extendFlat(C.text,{positions:d},n.textPosition(T,i,C.text,C.marker)),P.extendFlat(C.textSel,{positions:d},n.textPosition(T,i,C.text,C.markerSel)),P.extendFlat(C.textUnsel,{positions:d},n.textPosition(T,i,C.text,C.markerUnsel))),C}},67072:function(j){var V=20;j.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:V,SYMBOL_STROKE:V/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},84236:function(j,V,t){var b=t(38248),P=t(20472),o=t(72160),L=t(24040),A=t(3400),v=A.isArrayOrTypedArray,p=t(43616),r=t(79811),e=t(33040).formatColor,s=t(43028),n=t(7152),l=t(80088),f=t(67072),u=t(13448).DESELECTDIM,g={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},h=t(10624).appendArrayPointValue;function T(z,B){var F,_={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},N=z._context.plotGlPixelRatio;if(B.visible!==!0)return _;if(s.hasText(B)&&(_.text=c(z,B),_.textSel=w(z,B,B.selected),_.textUnsel=w(z,B,B.unselected)),s.hasMarkers(B)&&(_.marker=d(z,B),_.markerSel=x(z,B,B.selected),_.markerUnsel=x(z,B,B.unselected),!B.unselected&&v(B.marker.opacity))){var G=B.marker.opacity;for(_.markerUnsel.opacity=new Array(G.length),F=0;F<G.length;F++)_.markerUnsel.opacity[F]=u*G[F]}if(s.hasLines(B)){_.line={overlay:!0,thickness:B.line.width*N,color:B.line.color,opacity:B.opacity};var X=(f.DASHES[B.line.dash]||[1]).slice();for(F=0;F<X.length;++F)X[F]*=B.line.width*N;_.line.dashes=X}return B.error_x&&B.error_x.visible&&(_.errorX=C(B,B.error_x,N)),B.error_y&&B.error_y.visible&&(_.errorY=C(B,B.error_y,N)),B.fill&&B.fill!=="none"&&(_.fill={closed:!0,fill:B.fillcolor,thickness:0}),_}function c(z,B){var F=z._fullLayout,_=B._length,N=B.textfont,G=B.textposition,X=v(G)?G:[G],$=N.color,et=N.size,ot=N.family,nt=N.weight,Z=N.style,Q=N.variant,W={},J,it=z._context.plotGlPixelRatio,K=B.texttemplate;if(K){W.text=[];var H=F._d3locale,at=Array.isArray(K),tt=at?Math.min(K.length,_):_,lt=at?function(xt){return K[xt]}:function(){return K};for(J=0;J<tt;J++){var dt={i:J},mt=B._module.formatLabels(dt,B,F),gt={};h(gt,B,J);var Mt=B._meta||{};W.text.push(A.texttemplateString(lt(J),mt,H,gt,dt,Mt))}}else v(B.text)&&B.text.length<_?W.text=B.text.slice():W.text=B.text;if(v(W.text))for(J=W.text.length;J<_;J++)W.text[J]="";for(W.opacity=B.opacity,W.font={},W.align=[],W.baseline=[],J=0;J<X.length;J++){var Lt=X[J].split(/\s+/);switch(Lt[1]){case"left":W.align.push("right");break;case"right":W.align.push("left");break;default:W.align.push(Lt[1])}switch(Lt[0]){case"top":W.baseline.push("bottom");break;case"bottom":W.baseline.push("top");break;default:W.baseline.push(Lt[0])}}if(v($))for(W.color=new Array(_),J=0;J<_;J++)W.color[J]=$[J];else W.color=$;if(v(et)||Array.isArray(ot)||v(nt)||Array.isArray(Z)||Array.isArray(Q))for(W.font=new Array(_),J=0;J<_;J++){var zt=W.font[J]={};zt.size=(A.isTypedArray(et)?et[J]:v(et)?b(et[J])?et[J]:0:et)*it,zt.family=Array.isArray(ot)?ot[J]:ot,zt.weight=i(v(nt)?nt[J]:nt),zt.style=Array.isArray(Z)?Z[J]:Z,zt.variant=Array.isArray(Q)?Q[J]:Q}else W.font={size:et*it,family:ot,weight:i(nt),style:Z,variant:Q};return W}function i(z){return z<=1e3?z>500?"bold":"normal":z}function d(z,B){var F=B._length,_=B.marker,N={},G,X=v(_.symbol),$=v(_.angle),et=v(_.color),ot=v(_.line.color),nt=v(_.opacity),Z=v(_.size),Q=v(_.line.width),W;if(X||(W=l.isOpenSymbol(_.symbol)),X||et||ot||nt||$){N.symbols=new Array(F),N.angles=new Array(F),N.colors=new Array(F),N.borderColors=new Array(F);var J=_.symbol,it=_.angle,K=e(_,_.opacity,F),H=e(_.line,_.opacity,F);if(!v(H[0])){var at=H;for(H=Array(F),G=0;G<F;G++)H[G]=at}if(!v(K[0])){var tt=K;for(K=Array(F),G=0;G<F;G++)K[G]=tt}if(!v(J)){var lt=J;for(J=Array(F),G=0;G<F;G++)J[G]=lt}if(!v(it)){var dt=it;for(it=Array(F),G=0;G<F;G++)it[G]=dt}for(N.symbols=J,N.angles=it,N.colors=K,N.borderColors=H,G=0;G<F;G++)X&&(W=l.isOpenSymbol(_.symbol[G])),W&&(H[G]=K[G].slice(),K[G]=K[G].slice(),K[G][3]=0);for(N.opacity=B.opacity,N.markers=new Array(F),G=0;G<F;G++)N.markers[G]=m({mx:N.symbols[G],ma:N.angles[G]},B)}else W?(N.color=o(_.color,"uint8"),N.color[3]=0,N.borderColor=o(_.color,"uint8")):(N.color=o(_.color,"uint8"),N.borderColor=o(_.line.color,"uint8")),N.opacity=B.opacity*_.opacity,N.marker=m({mx:_.symbol,ma:_.angle},B);var mt=1,gt=n(B,mt),Mt;if(Z||Q){var Lt=N.sizes=new Array(F),zt=N.borderSizes=new Array(F),xt=0,Ct;if(Z){for(G=0;G<F;G++)Lt[G]=gt(_.size[G]),xt+=Lt[G];Ct=xt/F}else for(Mt=gt(_.size),G=0;G<F;G++)Lt[G]=Mt;if(Q)for(G=0;G<F;G++)zt[G]=_.line.width[G];else for(Mt=_.line.width,G=0;G<F;G++)zt[G]=Mt;N.sizeAvg=Ct}else N.size=gt(_&&_.size||10),N.borderSizes=gt(_.line.width);return N}function x(z,B,F){var _=B.marker,N={};return F&&(F.marker&&F.marker.symbol?N=d(z,A.extendFlat({},_,F.marker)):F.marker&&(F.marker.size&&(N.size=F.marker.size),F.marker.color&&(N.colors=F.marker.color),F.marker.opacity!==void 0&&(N.opacity=F.marker.opacity))),N}function w(z,B,F){var _={};if(!F)return _;if(F.textfont){var N={opacity:1,text:B.text,texttemplate:B.texttemplate,textposition:B.textposition,textfont:A.extendFlat({},B.textfont)};F.textfont&&A.extendFlat(N.textfont,F.textfont),_=c(z,N)}return _}function C(z,B,F){var _={capSize:B.width*2*F,lineWidth:B.thickness*F,color:B.color};return B.copy_ystyle&&(_=z.error_y),_}var y=f.SYMBOL_SDF_SIZE,S=f.SYMBOL_SIZE,M=f.SYMBOL_STROKE,a={},E=p.symbolFuncs[0](S*.05);function m(z,B){var F=z.mx;if(F==="circle")return null;var _,N,G=p.symbolNumber(F),X=p.symbolFuncs[G%100],$=!!p.symbolNoDot[G%100],et=!!p.symbolNoFill[G%100],ot=l.isDotSymbol(F);if(z.ma&&(F+="_"+z.ma),a[F])return a[F];var nt=p.getMarkerAngle(z,B);return ot&&!$?_=X(S*1.1,nt)+E:_=X(S,nt),N=P(_,{w:y,h:y,viewBox:[-S,-S,S,S],stroke:et?M:-M}),a[F]=N,N||null}function k(z,B,F){var _=F.length,N=_/2,G,X;if(s.hasLines(B)&&N)if(B.line.shape==="hv"){for(G=[],X=0;X<N-1;X++)isNaN(F[X*2])||isNaN(F[X*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(F[X*2],F[X*2+1]),!isNaN(F[X*2+2])&&!isNaN(F[X*2+3])?G.push(F[X*2+2],F[X*2+1]):G.push(NaN,NaN));G.push(F[_-2],F[_-1])}else if(B.line.shape==="hvh"){for(G=[],X=0;X<N-1;X++)if(isNaN(F[X*2])||isNaN(F[X*2+1])||isNaN(F[X*2+2])||isNaN(F[X*2+3]))!isNaN(F[X*2])&&!isNaN(F[X*2+1])?G.push(F[X*2],F[X*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var $=(F[X*2]+F[X*2+2])/2;G.push(F[X*2],F[X*2+1],$,F[X*2+1],$,F[X*2+3])}G.push(F[_-2],F[_-1])}else if(B.line.shape==="vhv"){for(G=[],X=0;X<N-1;X++)if(isNaN(F[X*2])||isNaN(F[X*2+1])||isNaN(F[X*2+2])||isNaN(F[X*2+3]))!isNaN(F[X*2])&&!isNaN(F[X*2+1])?G.push(F[X*2],F[X*2+1]):G.push(NaN,NaN),G.push(NaN,NaN);else{var et=(F[X*2+1]+F[X*2+3])/2;G.push(F[X*2],F[X*2+1],F[X*2],et,F[X*2+2],et)}G.push(F[_-2],F[_-1])}else if(B.line.shape==="vh"){for(G=[],X=0;X<N-1;X++)isNaN(F[X*2])||isNaN(F[X*2+1])?G.push(NaN,NaN,NaN,NaN):(G.push(F[X*2],F[X*2+1]),!isNaN(F[X*2+2])&&!isNaN(F[X*2+3])?G.push(F[X*2],F[X*2+3]):G.push(NaN,NaN));G.push(F[_-2],F[_-1])}else G=F;var ot=!1;for(X=0;X<G.length;X++)if(isNaN(G[X])){ot=!0;break}var nt=ot||G.length>f.TOO_MANY_POINTS||s.hasMarkers(B)?"rect":"round";if(ot&&B.connectgaps){var Z=G[0],Q=G[1];for(X=0;X<G.length;X+=2)isNaN(G[X])||isNaN(G[X+1])?(G[X]=Z,G[X+1]=Q):(Z=G[X],Q=G[X+1])}return{join:nt,positions:G}}function I(z,B,F,_,N){var G=L.getComponentMethod("errorbars","makeComputeError"),X=r.getFromId(z,B.xaxis,"x"),$=r.getFromId(z,B.yaxis,"y"),et=F.length/2,ot={};function nt(Z,Q){var W=Q._id.charAt(0),J=B["error_"+W];if(J&&J.visible&&(Q.type==="linear"||Q.type==="log")){for(var it=G(J),K={x:0,y:1}[W],H={x:[0,1,2,3],y:[2,3,0,1]}[W],at=new Float64Array(4*et),tt=1/0,lt=-1/0,dt=0,mt=0;dt<et;dt++,mt+=4){var gt=Z[dt];if(b(gt)){var Mt=F[dt*2+K],Lt=it(gt,dt),zt=Lt[0],xt=Lt[1];if(b(zt)&&b(xt)){var Ct=gt-zt,wt=gt+xt;at[mt+H[0]]=Mt-Q.c2l(Ct),at[mt+H[1]]=Q.c2l(wt)-Mt,at[mt+H[2]]=0,at[mt+H[3]]=0,tt=Math.min(tt,gt-zt),lt=Math.max(lt,gt+xt)}}}ot[W]={positions:F,errors:at,_bnds:[tt,lt]}}}return nt(_,X),nt(N,$),ot}function O(z,B,F,_){var N=B._length,G={},X;if(s.hasMarkers(B)){var $=F.font,et=F.align,ot=F.baseline;for(G.offset=new Array(N),X=0;X<N;X++){var nt=_.sizes?_.sizes[X]:_.size,Z=v($)?$[X].size:$.size,Q=v(et)?et.length>1?et[X]:et[0]:et,W=v(ot)?ot.length>1?ot[X]:ot[0]:ot,J=g[Q],it=g[W],K=nt?nt/.8+1:0,H=-it*K-it*.5;G.offset[X]=[J*K/Z,H/Z]}}return G}j.exports={style:T,markerStyle:d,markerSelection:x,linePositions:k,errorBarPositions:I,textPosition:O}},80220:function(j,V,t){var b=t(3400),P=t(24040),o=t(80088),L=t(2876),A=t(88200),v=t(43028),p=t(43980),r=t(31147),e=t(74428),s=t(66828),n=t(70840),l=t(124);j.exports=function(u,g,h,T){function c(M,a){return b.coerce(u,g,L,M,a)}var i=u.marker?o.isOpenSymbol(u.marker.symbol):!1,d=v.isBubble(u),x=p(u,g,T,c);if(!x){g.visible=!1;return}r(u,g,T,c),c("xhoverformat"),c("yhoverformat");var w=x<A.PTS_LINESONLY?"lines+markers":"lines";c("text"),c("hovertext"),c("hovertemplate"),c("mode",w),v.hasMarkers(g)&&(e(u,g,h,T,c,{noAngleRef:!0,noStandOff:!0}),c("marker.line.width",i||d?1:0)),v.hasLines(g)&&(c("connectgaps"),s(u,g,h,T,c),c("line.shape")),v.hasText(g)&&(c("texttemplate"),l(u,g,T,c,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0}));var C=(g.line||{}).color,y=(g.marker||{}).color;c("fill"),g.fill!=="none"&&n(u,g,h,c);var S=P.getComponentMethod("errorbars","supplyDefaults");S(u,g,C||y||h,{axis:"y"}),S(u,g,C||y||h,{axis:"x",inherit:"y"}),b.coerceSelectionMarkerOpacity(g,c)}},26768:function(j,V,t){var b=t(3400),P=t(76308),o=t(13448).DESELECTDIM;function L(A){var v=A[0],p=v.trace,r=v.t,e=r._scene,s=r.index,n=e.selectBatch[s],l=e.unselectBatch[s],f=e.textOptions[s],u=e.textSelectedOptions[s]||{},g=e.textUnselectedOptions[s]||{},h=b.extendFlat({},f),T,c;if(n.length||l.length){var i=u.color,d=g.color,x=f.color,w=b.isArrayOrTypedArray(x);for(h.color=new Array(p._length),T=0;T<n.length;T++)c=n[T],h.color[c]=i||(w?x[c]:x);for(T=0;T<l.length;T++){c=l[T];var C=w?x[c]:x;h.color[c]=d||(i?C:P.addOpacity(C,o))}}e.glText[s].update(h)}j.exports={styleTextSelection:L}},99396:function(j,V,t){var b=t(76688);j.exports=function(o,L,A){var v=o.i;return"x"in o||(o.x=L._x[v]),"y"in o||(o.y=L._y[v]),b(o,L,A)}},80088:function(j,V,t){var b=t(67072);V.isOpenSymbol=function(P){return typeof P=="string"?b.OPEN_RE.test(P):P%200>100},V.isDotSymbol=function(P){return typeof P=="string"?b.DOT_RE.test(P):P>200}},41272:function(j,V,t){var b=t(24040),P=t(3400),o=t(44928);function L(v,p,r,e){var s=v.cd,n=s[0].t,l=s[0].trace,f=v.xa,u=v.ya,g=n.x,h=n.y,T=f.c2p(p),c=u.c2p(r),i=v.distance,d;if(n.tree){var x=f.p2c(T-i),w=f.p2c(T+i),C=u.p2c(c-i),y=u.p2c(c+i);e==="x"?d=n.tree.range(Math.min(x,w),Math.min(u._rl[0],u._rl[1]),Math.max(x,w),Math.max(u._rl[0],u._rl[1])):d=n.tree.range(Math.min(x,w),Math.min(C,y),Math.max(x,w),Math.max(C,y))}else d=n.ids;var S,M,a,E,m,k,I,O,z,B=i;if(e==="x"){var F=!!l.xperiodalignment,_=!!l.yperiodalignment;for(m=0;m<d.length;m++){if(S=d[m],a=g[S],k=Math.abs(f.c2p(a)-T),F){var N=f.c2p(l._xStarts[S]),G=f.c2p(l._xEnds[S]);k=T>=Math.min(N,G)&&T<=Math.max(N,G)?0:1/0}if(k<B){if(B=k,E=h[S],I=u.c2p(E)-c,_){var X=u.c2p(l._yStarts[S]),$=u.c2p(l._yEnds[S]);I=c>=Math.min(X,$)&&c<=Math.max(X,$)?0:1/0}z=Math.sqrt(k*k+I*I),M=d[m]}}}else for(m=d.length-1;m>-1;m--)S=d[m],a=g[S],E=h[S],k=f.c2p(a)-T,I=u.c2p(E)-c,O=Math.sqrt(k*k+I*I),O<B&&(B=z=O,M=S);return v.index=M,v.distance=B,v.dxy=z,M===void 0?[v]:[A(v,g,h,l)]}function A(v,p,r,e){var s=v.xa,n=v.ya,l=v.distance,f=v.dxy,u=v.index,g={pointNumber:u,x:p[u],y:r[u]};g.tx=P.isArrayOrTypedArray(e.text)?e.text[u]:e.text,g.htx=Array.isArray(e.hovertext)?e.hovertext[u]:e.hovertext,g.data=Array.isArray(e.customdata)?e.customdata[u]:e.customdata,g.tp=Array.isArray(e.textposition)?e.textposition[u]:e.textposition;var h=e.textfont;h&&(g.ts=P.isArrayOrTypedArray(h.size)?h.size[u]:h.size,g.tc=P.isArrayOrTypedArray(h.color)?h.color[u]:h.color,g.tf=Array.isArray(h.family)?h.family[u]:h.family,g.tw=Array.isArray(h.weight)?h.weight[u]:h.weight,g.ty=Array.isArray(h.style)?h.style[u]:h.style,g.tv=Array.isArray(h.variant)?h.variant[u]:h.variant);var T=e.marker;T&&(g.ms=P.isArrayOrTypedArray(T.size)?T.size[u]:T.size,g.mo=P.isArrayOrTypedArray(T.opacity)?T.opacity[u]:T.opacity,g.mx=P.isArrayOrTypedArray(T.symbol)?T.symbol[u]:T.symbol,g.ma=P.isArrayOrTypedArray(T.angle)?T.angle[u]:T.angle,g.mc=P.isArrayOrTypedArray(T.color)?T.color[u]:T.color);var c=T&&T.line;c&&(g.mlc=Array.isArray(c.color)?c.color[u]:c.color,g.mlw=P.isArrayOrTypedArray(c.width)?c.width[u]:c.width);var i=T&&T.gradient;i&&i.type!=="none"&&(g.mgt=Array.isArray(i.type)?i.type[u]:i.type,g.mgc=Array.isArray(i.color)?i.color[u]:i.color);var d=s.c2p(g.x,!0),x=n.c2p(g.y,!0),w=g.mrc||1,C=e.hoverlabel;C&&(g.hbg=Array.isArray(C.bgcolor)?C.bgcolor[u]:C.bgcolor,g.hbc=Array.isArray(C.bordercolor)?C.bordercolor[u]:C.bordercolor,g.hts=P.isArrayOrTypedArray(C.font.size)?C.font.size[u]:C.font.size,g.htc=Array.isArray(C.font.color)?C.font.color[u]:C.font.color,g.htf=Array.isArray(C.font.family)?C.font.family[u]:C.font.family,g.hnl=P.isArrayOrTypedArray(C.namelength)?C.namelength[u]:C.namelength);var y=e.hoverinfo;y&&(g.hi=Array.isArray(y)?y[u]:y);var S=e.hovertemplate;S&&(g.ht=Array.isArray(S)?S[u]:S);var M={};M[v.index]=g;var a=e._origX,E=e._origY,m=P.extendFlat({},v,{color:o(e,g),x0:d-w,x1:d+w,xLabelVal:a?a[u]:g.x,y0:x-w,y1:x+w,yLabelVal:E?E[u]:g.y,cd:M,distance:l,spikeDistance:f,hovertemplate:g.ht});return g.htx?m.text=g.htx:g.tx?m.text=g.tx:e.text&&(m.text=e.text),P.fillText(g,e,m),b.getComponentMethod("errorbars","hoverInfo")(g,e,m),m}j.exports={hoverPoints:L,calcHover:A}},38983:function(j,V,t){var b=t(64628);b.plot=t(89876),j.exports=b},89876:function(j,V,t){var b=t(38540),P=t(13472),o=t(24544),L=t(23352),A=t(3400),v=t(72760).selectMode,p=t(5048),r=t(43028),e=t(14328),s=t(26768).styleTextSelection,n={};function l(u,g,h,T){var c=u._size,i=u.width*T,d=u.height*T,x=c.l*T,w=c.b*T,C=c.r*T,y=c.t*T,S=c.w*T,M=c.h*T;return[x+g.domain[0]*S,w+h.domain[0]*M,i-C-(1-g.domain[1])*S,d-y-(1-h.domain[1])*M]}var f=j.exports=function(g,h,T){if(T.length){var c=g._fullLayout,i=h._scene,d=h.xaxis,x=h.yaxis,w,C;if(i){var y=p(g,["ANGLE_instanced_arrays","OES_element_index_uint"],n);if(!y){i.init();return}var S=i.count,M=c._glcanvas.data()[0].regl;if(e(g,h,T),i.dirty){if((i.line2d||i.error2d)&&!(i.scatter2d||i.fill2d||i.glText)&&M.clear({}),i.error2d===!0&&(i.error2d=o(M)),i.line2d===!0&&(i.line2d=P(M)),i.scatter2d===!0&&(i.scatter2d=b(M)),i.fill2d===!0&&(i.fill2d=P(M)),i.glText===!0)for(i.glText=new Array(S),w=0;w<S;w++)i.glText[w]=new L(M);if(i.glText){if(S>i.glText.length){var a=S-i.glText.length;for(w=0;w<a;w++)i.glText.push(new L(M))}else if(S<i.glText.length){var E=i.glText.length-S,m=i.glText.splice(S,E);m.forEach(function(K){K.destroy()})}for(w=0;w<S;w++)i.glText[w].update(i.textOptions[w])}if(i.line2d&&(i.line2d.update(i.lineOptions),i.lineOptions=i.lineOptions.map(function(K){if(K&&K.positions){for(var H=K.positions,at=0;at<H.length&&(isNaN(H[at])||isNaN(H[at+1]));)at+=2;for(var tt=H.length-2;tt>at&&(isNaN(H[tt])||isNaN(H[tt+1]));)tt-=2;K.positions=H.slice(at,tt+2)}return K}),i.line2d.update(i.lineOptions)),i.error2d){var k=(i.errorXOptions||[]).concat(i.errorYOptions||[]);i.error2d.update(k)}i.scatter2d&&i.scatter2d.update(i.markerOptions),i.fillOrder=A.repeat(null,S),i.fill2d&&(i.fillOptions=i.fillOptions.map(function(K,H){var at=T[H];if(!(!K||!at||!at[0]||!at[0].trace)){var tt=at[0],lt=tt.trace,dt=tt.t,mt=i.lineOptions[H],gt,Mt,Lt=[];lt._ownfill&&Lt.push(H),lt._nexttrace&&Lt.push(H+1),Lt.length&&(i.fillOrder[H]=Lt);var zt=[],xt=mt&&mt.positions||dt.positions,Ct,wt;if(lt.fill==="tozeroy"){for(Ct=0;Ct<xt.length&&isNaN(xt[Ct+1]);)Ct+=2;for(wt=xt.length-2;wt>Ct&&isNaN(xt[wt+1]);)wt-=2;xt[Ct+1]!==0&&(zt=[xt[Ct],0]),zt=zt.concat(xt.slice(Ct,wt+2)),xt[wt+1]!==0&&(zt=zt.concat([xt[wt],0]))}else if(lt.fill==="tozerox"){for(Ct=0;Ct<xt.length&&isNaN(xt[Ct]);)Ct+=2;for(wt=xt.length-2;wt>Ct&&isNaN(xt[wt]);)wt-=2;xt[Ct]!==0&&(zt=[0,xt[Ct+1]]),zt=zt.concat(xt.slice(Ct,wt+2)),xt[wt]!==0&&(zt=zt.concat([0,xt[wt+1]]))}else if(lt.fill==="toself"||lt.fill==="tonext"){for(zt=[],gt=0,K.splitNull=!0,Mt=0;Mt<xt.length;Mt+=2)(isNaN(xt[Mt])||isNaN(xt[Mt+1]))&&(zt=zt.concat(xt.slice(gt,Mt)),zt.push(xt[gt],xt[gt+1]),zt.push(null,null),gt=Mt+2);zt=zt.concat(xt.slice(gt)),gt&&zt.push(xt[gt],xt[gt+1])}else{var Rt=lt._nexttrace;if(Rt){var Tt=i.lineOptions[H+1];if(Tt){var Bt=Tt.positions;if(lt.fill==="tonexty"){for(zt=xt.slice(),H=Math.floor(Bt.length/2);H--;){var Gt=Bt[H*2],te=Bt[H*2+1];isNaN(Gt)||isNaN(te)||zt.push(Gt,te)}K.fill=Rt.fillcolor}}}}if(lt._prevtrace&&lt._prevtrace.fill==="tonext"){var Wt=i.lineOptions[H-1].positions,jt=zt.length/2;gt=jt;var ie=[gt];for(Mt=0;Mt<Wt.length;Mt+=2)(isNaN(Wt[Mt])||isNaN(Wt[Mt+1]))&&(ie.push(Mt/2+jt+1),gt=Mt+2);zt=zt.concat(Wt),K.hole=ie}return K.fillmode=lt.fill,K.opacity=lt.opacity,K.positions=zt,K}}),i.fill2d.update(i.fillOptions))}var I=c.dragmode,O=v(I),z=c.clickmode.indexOf("select")>-1;for(w=0;w<S;w++){var B=T[w][0],F=B.trace,_=B.t,N=_.index,G=F._length,X=_.x,$=_.y;if(F.selectedpoints||O||z){if(O||(O=!0),F.selectedpoints){var et=i.selectBatch[N]=A.selIndices2selPoints(F),ot={};for(C=0;C<et.length;C++)ot[et[C]]=1;var nt=[];for(C=0;C<G;C++)ot[C]||nt.push(C);i.unselectBatch[N]=nt}var Z=_.xpx=new Array(G),Q=_.ypx=new Array(G);for(C=0;C<G;C++)Z[C]=d.c2p(X[C]),Q[C]=x.c2p($[C])}else _.xpx=_.ypx=null}if(O){if(i.select2d||(i.select2d=b(c._glcanvas.data()[1].regl)),i.scatter2d){var W=new Array(S);for(w=0;w<S;w++)W[w]=i.selectBatch[w].length||i.unselectBatch[w].length?i.markerUnselectedOptions[w]:{};i.scatter2d.update(W)}i.select2d&&(i.select2d.update(i.markerOptions),i.select2d.update(i.markerSelectedOptions)),i.glText&&T.forEach(function(K){var H=((K||[])[0]||{}).trace||{};r.hasText(H)&&s(K)})}else i.scatter2d&&i.scatter2d.update(i.markerOptions);var J={viewport:l(c,d,x,g._context.plotGlPixelRatio),range:[(d._rl||d.range)[0],(x._rl||x.range)[0],(d._rl||d.range)[1],(x._rl||x.range)[1]]},it=A.repeat(J,i.count);i.fill2d&&i.fill2d.update(it),i.line2d&&i.line2d.update(it),i.error2d&&i.error2d.update(it.concat(it)),i.scatter2d&&i.scatter2d.update(it),i.select2d&&i.select2d.update(it),i.glText&&i.glText.forEach(function(K){K.update(J)})}}};f.reglPrecompiled=n},74588:function(j,V,t){var b=t(3400);j.exports=function(o,L){var A=L._scene,v={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},p={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return L._scene||(A=L._scene={},A.init=function(){b.extendFlat(A,p,v)},A.init(),A.update=function(e){var s=b.repeat(e,A.count);if(A.fill2d&&A.fill2d.update(s),A.scatter2d&&A.scatter2d.update(s),A.line2d&&A.line2d.update(s),A.error2d&&A.error2d.update(s.concat(s)),A.select2d&&A.select2d.update(s),A.glText)for(var n=0;n<A.count;n++)A.glText[n].update(e)},A.draw=function(){for(var e=A.count,s=A.fill2d,n=A.error2d,l=A.line2d,f=A.scatter2d,u=A.glText,g=A.select2d,h=A.selectBatch,T=A.unselectBatch,c=0;c<e;c++){if(s&&A.fillOrder[c]&&s.draw(A.fillOrder[c]),l&&A.lineOptions[c]&&l.draw(c),n&&(A.errorXOptions[c]&&n.draw(c),A.errorYOptions[c]&&n.draw(c+e)),f&&A.markerOptions[c])if(T[c].length){var i=b.repeat([],A.count);i[c]=T[c],f.draw(i)}else h[c].length||f.draw(c);u[c]&&A.textOptions[c]&&u[c].render()}g&&g.draw(h),A.dirty=!1},A.destroy=function(){A.fill2d&&A.fill2d.destroy&&A.fill2d.destroy(),A.scatter2d&&A.scatter2d.destroy&&A.scatter2d.destroy(),A.error2d&&A.error2d.destroy&&A.error2d.destroy(),A.line2d&&A.line2d.destroy&&A.line2d.destroy(),A.select2d&&A.select2d.destroy&&A.select2d.destroy(),A.glText&&A.glText.forEach(function(e){e.destroy&&e.destroy()}),A.lineOptions=null,A.fillOptions=null,A.markerOptions=null,A.markerSelectedOptions=null,A.markerUnselectedOptions=null,A.errorXOptions=null,A.errorYOptions=null,A.textOptions=null,A.textSelectedOptions=null,A.textUnselectedOptions=null,A.selectBatch=null,A.unselectBatch=null,L._scene=null}),A.dirty||b.extendFlat(A,v),A}},73224:function(j,V,t){var b=t(43028),P=t(26768).styleTextSelection;j.exports=function(L,A){var v=L.cd,p=L.xaxis,r=L.yaxis,e=[],s=v[0].trace,n=v[0].t,l=s._length,f=n.x,u=n.y,g=n._scene,h=n.index;if(!g)return e;var T=b.hasText(s),c=b.hasMarkers(s),i=!c&&!T;if(s.visible!==!0||i)return e;var d=[],x=[];if(A!==!1&&!A.degenerate)for(var w=0;w<l;w++)A.contains([n.xpx[w],n.ypx[w]],!1,w,L)?(d.push(w),e.push({pointNumber:w,x:p.c2d(f[w]),y:r.c2d(u[w])})):x.push(w);if(c){var C=g.scatter2d;if(!d.length&&!x.length){var y=new Array(g.count);y[h]=g.markerOptions[h],C.update.apply(C,y)}else if(!g.selectBatch[h].length&&!g.unselectBatch[h].length){var S=new Array(g.count);S[h]=g.markerUnselectedOptions[h],C.update.apply(C,S)}}return g.selectBatch[h]=d,g.unselectBatch[h]=x,T&&P(v),e}},31512:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(98304),L=t(6096),A=t(52904),v=t(5232),p=t(45464),r=t(49084),e=t(92880).extendFlat,s=t(67824).overrideAll,n=t(5232),l=L.line,f=L.marker;j.exports=s({lon:L.lon,lat:L.lat,cluster:{enabled:{valType:"boolean"},maxzoom:e({},n.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:e({},f.opacity,{dflt:1})},mode:e({},A.mode,{dflt:"markers"}),text:e({},A.text,{}),texttemplate:P({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:e({},A.hovertext,{}),line:{color:l.color,width:l.width},connectgaps:A.connectgaps,marker:e({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:f.opacity,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode},r("marker")),fill:L.fill,fillcolor:o(),textfont:v.layers.symbol.textfont,textposition:v.layers.symbol.textposition,below:{valType:"string"},selected:{marker:A.selected.marker},unselected:{marker:A.unselected.marker},hoverinfo:e({},p.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:b()},"calc","nested")},79732:function(j){var V=["Metropolis Black Italic","Metropolis Black","Metropolis Bold Italic","Metropolis Bold","Metropolis Extra Bold Italic","Metropolis Extra Bold","Metropolis Extra Light Italic","Metropolis Extra Light","Metropolis Light Italic","Metropolis Light","Metropolis Medium Italic","Metropolis Medium","Metropolis Regular Italic","Metropolis Regular","Metropolis Semi Bold Italic","Metropolis Semi Bold","Metropolis Thin Italic","Metropolis Thin","Open Sans Bold Italic","Open Sans Bold","Open Sans Extrabold Italic","Open Sans Extrabold","Open Sans Italic","Open Sans Light Italic","Open Sans Light","Open Sans Regular","Open Sans Semibold Italic","Open Sans Semibold","Klokantech Noto Sans Bold","Klokantech Noto Sans CJK Bold","Klokantech Noto Sans CJK Regular","Klokantech Noto Sans Italic","Klokantech Noto Sans Regular"];j.exports={isSupportedFont:function(t){return V.indexOf(t)!==-1}}},59392:function(j,V,t){var b=t(38248),P=t(3400),o=t(39032).BADNUM,L=t(44808),A=t(8932),v=t(43616),p=t(7152),r=t(43028),e=t(79732).isSupportedFont,s=t(89032),n=t(10624).appendArrayPointValue,l=t(72736).NEWLINES,f=t(72736).BR_TAG_ALL;j.exports=function(C,y){var S=y[0].trace,M=S.visible===!0&&S._length!==0,a=S.fill!=="none",E=r.hasLines(S),m=r.hasMarkers(S),k=r.hasText(S),I=m&&S.marker.symbol==="circle",O=m&&S.marker.symbol!=="circle",z=S.cluster&&S.cluster.enabled,B=u("fill"),F=u("line"),_=u("circle"),N=u("symbol"),G={fill:B,line:F,circle:_,symbol:N};if(!M)return G;var X;if((a||E)&&(X=L.calcTraceToLineCoords(y)),a&&(B.geojson=L.makePolygon(X),B.layout.visibility="visible",P.extendFlat(B.paint,{"fill-color":S.fillcolor})),E&&(F.geojson=L.makeLine(X),F.layout.visibility="visible",P.extendFlat(F.paint,{"line-width":S.line.width,"line-color":S.line.color,"line-opacity":S.opacity})),I){var $=g(y);_.geojson=$.geojson,_.layout.visibility="visible",z&&(_.filter=["!",["has","point_count"]],G.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":d(S.cluster.color,S.cluster.step),"circle-radius":d(S.cluster.size,S.cluster.step),"circle-opacity":d(S.cluster.opacity,S.cluster.step)}},G.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":x(S),"text-size":12}}),P.extendFlat(_.paint,{"circle-color":$.mcc,"circle-radius":$.mrc,"circle-opacity":$.mo})}if(I&&z&&(_.filter=["!",["has","point_count"]]),(O||k)&&(N.geojson=h(y,C),P.extendFlat(N.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),O&&(P.extendFlat(N.layout,{"icon-size":S.marker.size/10}),"angle"in S.marker&&S.marker.angle!=="auto"&&P.extendFlat(N.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),N.layout["icon-allow-overlap"]=S.marker.allowoverlap,P.extendFlat(N.paint,{"icon-opacity":S.opacity*S.marker.opacity,"icon-color":S.marker.color})),k)){var et=(S.marker||{}).size,ot=s(S.textposition,et);P.extendFlat(N.layout,{"text-size":S.textfont.size,"text-anchor":ot.anchor,"text-offset":ot.offset,"text-font":x(S)}),P.extendFlat(N.paint,{"text-color":S.textfont.color,"text-opacity":S.opacity})}return G};function u(w){return{type:w,geojson:L.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function g(w){var C=w[0].trace,y=C.marker,S=C.selectedpoints,M=P.isArrayOrTypedArray(y.color),a=P.isArrayOrTypedArray(y.size),E=P.isArrayOrTypedArray(y.opacity),m;function k(et){return C.opacity*et}function I(et){return et/2}var O;M&&(A.hasColorscale(C,"marker")?O=A.makeColorScaleFuncFromTrace(y):O=P.identity);var z;a&&(z=p(C));var B;E&&(B=function(et){var ot=b(et)?+P.constrain(et,0,1):0;return k(ot)});var F=[];for(m=0;m<w.length;m++){var _=w[m],N=_.lonlat;if(!i(N)){var G={};O&&(G.mcc=_.mcc=O(_.mc)),z&&(G.mrc=_.mrc=z(_.ms)),B&&(G.mo=B(_.mo)),S&&(G.selected=_.selected||0),F.push({type:"Feature",id:m+1,geometry:{type:"Point",coordinates:N},properties:G})}}var X;if(S)for(X=v.makeSelectedPointStyleFns(C),m=0;m<F.length;m++){var $=F[m].properties;X.selectedOpacityFn&&($.mo=k(X.selectedOpacityFn($))),X.selectedColorFn&&($.mcc=X.selectedColorFn($)),X.selectedSizeFn&&($.mrc=X.selectedSizeFn($))}return{geojson:{type:"FeatureCollection",features:F},mcc:M||X&&X.selectedColorFn?{type:"identity",property:"mcc"}:y.color,mrc:a||X&&X.selectedSizeFn?{type:"identity",property:"mrc"}:I(y.size),mo:E||X&&X.selectedOpacityFn?{type:"identity",property:"mo"}:k(y.opacity)}}function h(w,C){for(var y=C._fullLayout,S=w[0].trace,M=S.marker||{},a=M.symbol,E=M.angle,m=a!=="circle"?T(a):c,k=E!=="auto"?T(E,!0):c,I=r.hasText(S)?T(S.text):c,O=[],z=0;z<w.length;z++){var B=w[z];if(!i(B.lonlat)){var F=S.texttemplate,_;if(F){var N=Array.isArray(F)?F[z]||"":F,G=S._module.formatLabels(B,S,y),X={};n(X,S,B.i);var $=S._meta||{};_=P.texttemplateString(N,G,y._d3locale,X,B,$)}else _=I(z);_&&(_=_.replace(l,"").replace(f,`
`)),O.push({type:"Feature",geometry:{type:"Point",coordinates:B.lonlat},properties:{symbol:m(z),angle:k(z),text:_}})}}return{type:"FeatureCollection",features:O}}function T(w,C){return P.isArrayOrTypedArray(w)?C?function(y){return b(w[y])?+w[y]:0}:function(y){return w[y]}:w?function(){return w}:c}function c(){return""}function i(w){return w[0]===o}function d(w,C){var y;if(P.isArrayOrTypedArray(w)&&P.isArrayOrTypedArray(C)){y=["step",["get","point_count"],w[0]];for(var S=1;S<w.length;S++)y.push(C[S-1],w[S])}else y=w;return y}function x(w){var C=w.textfont,y=C.family,S=C.style,M=C.weight,a=y.split(" "),E=a[a.length-1]==="Italic";E&&a.pop(),E=E||S==="italic";var m=a.join(" ");M==="bold"&&a.indexOf("Bold")===-1?m+=" Bold":M<=1e3&&(a[0]==="Metropolis"?(m="Metropolis",M>850?m+=" Black":M>750?m+=" Extra Bold":M>650?m+=" Bold":M>550?m+=" Semi Bold":M>450?m+=" Medium":M>350?m+=" Regular":M>250?m+=" Light":M>150?m+=" Extra Light":m+=" Thin"):a.slice(0,2).join(" ")==="Open Sans"?(m="Open Sans",M>750?m+=" Extrabold":M>650?m+=" Bold":M>550?m+=" Semibold":M>350?m+=" Regular":m+=" Light"):a.slice(0,3).join(" ")==="Klokantech Noto Sans"&&(m="Klokantech Noto Sans",a[3]==="CJK"&&(m+=" CJK"),m+=M>500?" Bold":" Regular")),E&&(m+=" Italic"),m==="Open Sans Regular Italic"?m="Open Sans Italic":m==="Open Sans Regular Bold"?m="Open Sans Bold":m==="Open Sans Regular Bold Italic"?m="Open Sans Bold Italic":m==="Klokantech Noto Sans Regular Italic"&&(m="Klokantech Noto Sans Italic"),e(m)||(m=y);var k=m.split(", ");return k}},15752:function(j,V,t){var b=t(3400),P=t(43028),o=t(74428),L=t(66828),A=t(124),v=t(70840),p=t(31512),r=t(79732).isSupportedFont;j.exports=function(n,l,f,u){function g(a,E){return b.coerce(n,l,p,a,E)}function h(a,E){return b.coerce2(n,l,p,a,E)}var T=e(n,l,g);if(!T){l.visible=!1;return}if(g("text"),g("texttemplate"),g("hovertext"),g("hovertemplate"),g("mode"),g("below"),P.hasMarkers(l)){o(n,l,f,u,g,{noLine:!0,noAngle:!0}),g("marker.allowoverlap"),g("marker.angle");var c=l.marker;c.symbol!=="circle"&&(b.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),b.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}P.hasLines(l)&&(L(n,l,f,u,g,{noDash:!0}),g("connectgaps"));var i=h("cluster.maxzoom"),d=h("cluster.step"),x=h("cluster.color",l.marker&&l.marker.color||f),w=h("cluster.size"),C=h("cluster.opacity"),y=i!==!1||d!==!1||x!==!1||w!==!1||C!==!1,S=g("cluster.enabled",y);if(S||P.hasText(l)){var M=u.font.family;A(n,l,u,g,{noSelect:!0,noFontVariant:!0,noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0,font:{family:r(M)?M:"Open Sans Regular",weight:u.font.weight,style:u.font.style,size:u.font.size,color:u.font.color}})}g("fill"),l.fill!=="none"&&v(n,l,f,g),b.coerceSelectionMarkerOpacity(l,g)};function e(s,n,l){var f=l("lon")||[],u=l("lat")||[],g=Math.min(f.length,u.length);return n._length=g,g}},37920:function(j){j.exports=function(t,b){return t.lon=b.lon,t.lat=b.lat,t}},11960:function(j,V,t){var b=t(54460);j.exports=function(o,L,A){var v={},p=A[L.subplot]._subplot,r=p.mockAxis,e=o.lonlat;return v.lonLabel=b.tickText(r,r.c2l(e[0]),!0).text,v.latLabel=b.tickText(r,r.c2l(e[1]),!0).text,v}},63312:function(j,V,t){var b=t(93024),P=t(3400),o=t(44928),L=P.fillText,A=t(39032).BADNUM,v=t(47552).traceLayerPrefix;function p(e,s,n){var l=e.cd,f=l[0].trace,u=e.xa,g=e.ya,h=e.subplot,T=[],c=v+f.uid+"-circle",i=f.cluster&&f.cluster.enabled;if(i){var d=h.map.queryRenderedFeatures(null,{layers:[c]});T=d.map(function(z){return z.id})}var x=s>=0?Math.floor((s+180)/360):Math.ceil((s-180)/360),w=x*360,C=s-w;function y(z){var B=z.lonlat;if(B[0]===A||i&&T.indexOf(z.i+1)===-1)return 1/0;var F=P.modHalf(B[0],360),_=B[1],N=h.project([F,_]),G=N.x-u.c2p([C,_]),X=N.y-g.c2p([F,n]),$=Math.max(3,z.mrc||0);return Math.max(Math.sqrt(G*G+X*X)-$,1-3/$)}if(b.getClosest(l,y,e),e.index!==!1){var S=l[e.index],M=S.lonlat,a=[P.modHalf(M[0],360)+w,M[1]],E=u.c2p(a),m=g.c2p(a),k=S.mrc||1;e.x0=E-k,e.x1=E+k,e.y0=m-k,e.y1=m+k;var I={};I[f.subplot]={_subplot:h};var O=f._module.formatLabels(S,f,I);return e.lonLabel=O.lonLabel,e.latLabel=O.latLabel,e.color=o(f,S),e.extraText=r(f,S,l[0].t.labels),e.hovertemplate=f.hovertemplate,[e]}}function r(e,s,n){if(e.hovertemplate)return;var l=s.hi||e.hoverinfo,f=l.split("+"),u=f.indexOf("all")!==-1,g=f.indexOf("lon")!==-1,h=f.indexOf("lat")!==-1,T=s.lonlat,c=[];function i(d){return d+"°"}return u||g&&h?c.push("("+i(T[1])+", "+i(T[0])+")"):g?c.push(n.lon+i(T[0])):h&&c.push(n.lat+i(T[1])),(u||f.indexOf("text")!==-1)&&L(s,e,c),c.join("<br>")}j.exports={hoverPoints:p,getExtraText:r}},11572:function(j,V,t){j.exports={attributes:t(31512),supplyDefaults:t(15752),colorbar:t(5528),formatLabels:t(11960),calc:t(25212),plot:t(9660),hoverPoints:t(63312).hoverPoints,eventData:t(37920),selectPoints:t(404),styleOnSelect:function(b,P){if(P){var o=P[0].trace;o._glTrace.update(P)}},moduleType:"trace",name:"scattermapbox",basePlotModule:t(33688),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},9660:function(j,V,t){var b=t(3400),P=t(59392),o=t(47552).traceLayerPrefix,L={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function A(p,r,e,s){this.type="scattermapbox",this.subplot=p,this.uid=r,this.clusterEnabled=e,this.isHidden=s,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol",cluster:"source-"+r+"-circle",clusterCount:"source-"+r+"-circle"},this.layerIds={fill:o+r+"-fill",line:o+r+"-line",circle:o+r+"-circle",symbol:o+r+"-symbol",cluster:o+r+"-cluster",clusterCount:o+r+"-cluster-count"},this.below=null}var v=A.prototype;v.addSource=function(p,r,e){var s={type:"geojson",data:r.geojson};e&&e.enabled&&b.extendFlat(s,{cluster:!0,clusterMaxZoom:e.maxzoom});var n=this.subplot.map.getSource(this.sourceIds[p]);n?n.setData(r.geojson):this.subplot.map.addSource(this.sourceIds[p],s)},v.setSourceData=function(p,r){this.subplot.map.getSource(this.sourceIds[p]).setData(r.geojson)},v.addLayer=function(p,r,e){var s={type:r.type,id:this.layerIds[p],source:this.sourceIds[p],layout:r.layout,paint:r.paint};r.filter&&(s.filter=r.filter);for(var n=this.layerIds[p],l,f=this.subplot.getMapLayers(),u=0;u<f.length;u++)if(f[u].id===n){l=!0;break}l?(this.subplot.setOptions(n,"setLayoutProperty",s.layout),s.layout.visibility==="visible"&&this.subplot.setOptions(n,"setPaintProperty",s.paint)):this.subplot.addLayer(s,e)},v.update=function(r){var e=r[0].trace,s=this.subplot,n=s.map,l=P(s.gd,r),f=s.belowLookup["trace-"+this.uid],u=!!(e.cluster&&e.cluster.enabled),g=!!this.clusterEnabled,h=this;function T(M){M||h.addSource("circle",l.circle,e.cluster);for(var a=L.cluster,E=0;E<a.length;E++){var m=a[E],k=l[m];h.addLayer(m,k,f)}}function c(M){for(var a=L.cluster,E=a.length-1;E>=0;E--){var m=a[E];n.removeLayer(h.layerIds[m])}M||n.removeSource(h.sourceIds.circle)}function i(M){for(var a=L.nonCluster,E=0;E<a.length;E++){var m=a[E],k=l[m];M||h.addSource(m,k),h.addLayer(m,k,f)}}function d(M){for(var a=L.nonCluster,E=a.length-1;E>=0;E--){var m=a[E];n.removeLayer(h.layerIds[m]),M||n.removeSource(h.sourceIds[m])}}function x(M){g?c(M):d(M)}function w(M){u?T(M):i(M)}function C(){for(var M=u?L.cluster:L.nonCluster,a=0;a<M.length;a++){var E=M[a],m=l[E];m&&(s.setOptions(h.layerIds[E],"setLayoutProperty",m.layout),m.layout.visibility==="visible"&&(E!=="cluster"&&h.setSourceData(E,m),s.setOptions(h.layerIds[E],"setPaintProperty",m.paint)))}}var y=this.isHidden,S=e.visible!==!0;S?y||x():y?S||w():g!==u?(x(),w()):(this.below!==f&&(x(!0),w(!0)),C()),this.clusterEnabled=u,this.isHidden=S,this.below=f,r[0].trace._glTrace=this},v.dispose=function(){for(var r=this.subplot.map,e=this.clusterEnabled?L.cluster:L.nonCluster,s=e.length-1;s>=0;s--){var n=e[s];r.removeLayer(this.layerIds[n]),r.removeSource(this.sourceIds[n])}},j.exports=function(r,e){var s=e[0].trace,n=s.cluster&&s.cluster.enabled,l=s.visible!==!0,f=new A(r,s.uid,n,l),u=P(r.gd,e),g=f.below=r.belowLookup["trace-"+s.uid],h,T,c;if(n)for(f.addSource("circle",u.circle,s.cluster),h=0;h<L.cluster.length;h++)T=L.cluster[h],c=u[T],f.addLayer(T,c,g);else for(h=0;h<L.nonCluster.length;h++)T=L.nonCluster[h],c=u[T],f.addSource(T,c,s.cluster),f.addLayer(T,c,g);return e[0].trace._glTrace=f,f}},404:function(j,V,t){var b=t(3400),P=t(43028),o=t(39032).BADNUM;j.exports=function(A,v){var p=A.cd,r=A.xaxis,e=A.yaxis,s=[],n=p[0].trace,l;if(!P.hasMarkers(n))return[];if(v===!1)for(l=0;l<p.length;l++)p[l].selected=0;else for(l=0;l<p.length;l++){var f=p[l],u=f.lonlat;if(u[0]!==o){var g=[b.modHalf(u[0],360),u[1]],h=[r.c2p(g),e.c2p(g)];v.contains(h,null,l,A)?(s.push({pointNumber:l,lon:u[0],lat:u[1]}),f.selected=1):f.selected=0}}return s}},8319:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(92880).extendFlat,L=t(98304),A=t(52904),v=t(45464),p=A.line;j.exports={mode:A.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:A.text,texttemplate:P({editType:"plot"},{keys:["r","theta","text"]}),hovertext:A.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:o({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:A.connectgaps,marker:A.marker,cliponaxis:o({},A.cliponaxis,{dflt:!1}),textposition:A.textposition,textfont:A.textfont,fill:o({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:L(),hoverinfo:o({},v.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:A.hoveron,hovertemplate:b(),selected:A.selected,unselected:A.unselected}},58320:function(j,V,t){var b=t(38248),P=t(39032).BADNUM,o=t(54460),L=t(90136),A=t(20148),v=t(4500),p=t(16356).calcMarkerSize;j.exports=function(e,s){for(var n=e._fullLayout,l=s.subplot,f=n[l].radialaxis,u=n[l].angularaxis,g=f.makeCalcdata(s,"r"),h=u.makeCalcdata(s,"theta"),T=s._length,c=new Array(T),i=0;i<T;i++){var d=g[i],x=h[i],w=c[i]={};b(d)&&b(x)?(w.r=d,w.theta=x):w.r=P}var C=p(s,T);return s._extremes.x=o.findExtremes(f,g,{ppad:C}),L(e,s),A(c,s),v(c,s),c}},85968:function(j,V,t){var b=t(3400),P=t(43028),o=t(74428),L=t(66828),A=t(11731),v=t(124),p=t(70840),r=t(88200).PTS_LINESONLY,e=t(8319);function s(l,f,u,g){function h(i,d){return b.coerce(l,f,e,i,d)}var T=n(l,f,g,h);if(!T){f.visible=!1;return}h("thetaunit"),h("mode",T<r?"lines+markers":"lines"),h("text"),h("hovertext"),f.hoveron!=="fills"&&h("hovertemplate"),P.hasMarkers(f)&&o(l,f,u,g,h,{gradient:!0}),P.hasLines(f)&&(L(l,f,u,g,h,{backoff:!0}),A(l,f,h),h("connectgaps")),P.hasText(f)&&(h("texttemplate"),v(l,f,g,h));var c=[];(P.hasMarkers(f)||P.hasText(f))&&(h("cliponaxis"),h("marker.maxdisplayed"),c.push("points")),h("fill"),f.fill!=="none"&&(p(l,f,u,h),P.hasLines(f)||A(l,f,h)),(f.fill==="tonext"||f.fill==="toself")&&c.push("fills"),h("hoveron",c.join("+")||"points"),b.coerceSelectionMarkerOpacity(f,h)}function n(l,f,u,g){var h=g("r"),T=g("theta");b.isTypedArray(h)&&(f.r=h=Array.from(h)),b.isTypedArray(T)&&(f.theta=T=Array.from(T));var c;if(h)T?c=Math.min(h.length,T.length):(c=h.length,g("theta0"),g("dtheta"));else{if(!T)return 0;c=f.theta.length,g("r0"),g("dr")}return f._length=c,c}j.exports={handleRThetaDefaults:n,supplyDefaults:s}},22852:function(j,V,t){var b=t(3400),P=t(54460);j.exports=function(L,A,v){var p={},r=v[A.subplot]._subplot,e,s;r?(e=r.radialAxis,s=r.angularAxis):(r=v[A.subplot],e=r.radialaxis,s=r.angularaxis);var n=e.c2l(L.r);p.rLabel=P.tickText(e,n,!0).text;var l=s.thetaunit==="degrees"?b.rad2deg(L.theta):L.theta;return p.thetaLabel=P.tickText(s,l,!0).text,p}},8504:function(j,V,t){var b=t(98723);function P(L,A,v,p){var r=b(L,A,v,p);if(!(!r||r[0].index===!1)){var e=r[0];if(e.index===void 0)return r;var s=L.subplot,n=e.cd[e.index],l=e.trace;if(s.isPtInside(n))return e.xLabelVal=void 0,e.yLabelVal=void 0,o(n,l,s,e),e.hovertemplate=l.hovertemplate,r}}function o(L,A,v,p){var r=v.radialAxis,e=v.angularAxis;r._hovertitle="r",e._hovertitle="θ";var s={};s[A.subplot]={_subplot:v};var n=A._module.formatLabels(L,A,s);p.rLabel=n.rLabel,p.thetaLabel=n.thetaLabel;var l=L.hi||A.hoverinfo,f=[];function u(h,T){f.push(h._hovertitle+": "+T)}if(!A.hovertemplate){var g=l.split("+");g.indexOf("all")!==-1&&(g=["r","theta","text"]),g.indexOf("r")!==-1&&u(r,p.rLabel),g.indexOf("theta")!==-1&&u(e,p.thetaLabel),g.indexOf("text")!==-1&&p.text&&(f.push(p.text),delete p.text),p.extraText=f.join("<br>")}}j.exports={hoverPoints:P,makeHoverPointText:o}},76924:function(j,V,t){j.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:t(40872),categories:["polar","symbols","showLegend","scatter-like"],attributes:t(8319),supplyDefaults:t(85968).supplyDefaults,colorbar:t(5528),formatLabels:t(22852),calc:t(58320),plot:t(43456),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(8504).hoverPoints,selectPoints:t(91560),meta:{}}},43456:function(j,V,t){var b=t(96504),P=t(39032).BADNUM;j.exports=function(L,A,v){for(var p=A.layers.frontplot.select("g.scatterlayer"),r=A.xaxis,e=A.yaxis,s={xaxis:r,yaxis:e,plot:A.framework,layerClipId:A._hasClipOnAxisFalse?A.clipIds.forTraces:null},n=A.radialAxis,l=A.angularAxis,f=0;f<v.length;f++)for(var u=v[f],g=0;g<u.length;g++){g===0&&(u[0].trace._xA=r,u[0].trace._yA=e);var h=u[g],T=h.r;if(T===P)h.x=h.y=P;else{var c=n.c2g(T),i=l.c2g(h.theta);h.x=c*Math.cos(i),h.y=c*Math.sin(i)}}b(L,s,v,p)}},24396:function(j,V,t){var b=t(8319),P=t(2876),o=t(21776).Gw;j.exports={mode:b.mode,r:b.r,theta:b.theta,r0:b.r0,dr:b.dr,theta0:b.theta0,dtheta:b.dtheta,thetaunit:b.thetaunit,text:b.text,texttemplate:o({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,hovertemplate:b.hovertemplate,line:{color:P.line.color,width:P.line.width,dash:P.line.dash,editType:"calc"},connectgaps:P.connectgaps,marker:P.marker,fill:P.fill,fillcolor:P.fillcolor,textposition:P.textposition,textfont:P.textfont,hoverinfo:b.hoverinfo,selected:b.selected,unselected:b.unselected}},27160:function(j,V,t){j.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:t(40872),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:t(24396),supplyDefaults:t(98608),colorbar:t(5528),formatLabels:t(94120),calc:t(66720),hoverPoints:t(1600).hoverPoints,selectPoints:t(73224),meta:{}}},66720:function(j,V,t){var b=t(90136),P=t(16356).calcMarkerSize,o=t(84236),L=t(54460),A=t(67072).TOO_MANY_POINTS;j.exports=function(p,r){var e=p._fullLayout,s=r.subplot,n=e[s].radialaxis,l=e[s].angularaxis,f=r._r=n.makeCalcdata(r,"r"),u=r._theta=l.makeCalcdata(r,"theta"),g=r._length,h={};g<f.length&&(f=f.slice(0,g)),g<u.length&&(u=u.slice(0,g)),h.r=f,h.theta=u,b(p,r);var T=h.opts=o.style(p,r),c;return g<A?c=P(r,g):T.marker&&(c=2*(T.marker.sizeAvg||Math.max(T.marker.size,3))),r._extremes.x=L.findExtremes(n,f,{ppad:c}),[{x:!1,y:!1,t:h,trace:r}]}},98608:function(j,V,t){var b=t(3400),P=t(43028),o=t(85968).handleRThetaDefaults,L=t(74428),A=t(66828),v=t(124),p=t(70840),r=t(88200).PTS_LINESONLY,e=t(24396);j.exports=function(n,l,f,u){function g(T,c){return b.coerce(n,l,e,T,c)}var h=o(n,l,u,g);if(!h){l.visible=!1;return}g("thetaunit"),g("mode",h<r?"lines+markers":"lines"),g("text"),g("hovertext"),l.hoveron!=="fills"&&g("hovertemplate"),P.hasMarkers(l)&&L(n,l,f,u,g,{noAngleRef:!0,noStandOff:!0}),P.hasLines(l)&&(A(n,l,f,u,g),g("connectgaps")),P.hasText(l)&&(g("texttemplate"),v(n,l,u,g,{noFontShadow:!0,noFontLineposition:!0,noFontTextcase:!0})),g("fill"),l.fill!=="none"&&p(n,l,f,g),b.coerceSelectionMarkerOpacity(l,g)}},94120:function(j,V,t){var b=t(22852);j.exports=function(o,L,A){var v=o.i;return"r"in o||(o.r=L._r[v]),"theta"in o||(o.theta=L._theta[v]),b(o,L,A)}},1600:function(j,V,t){var b=t(41272),P=t(8504).makeHoverPointText;function o(L,A,v,p){var r=L.cd,e=r[0].t,s=e.r,n=e.theta,l=b.hoverPoints(L,A,v,p);if(!(!l||l[0].index===!1)){var f=l[0];if(f.index===void 0)return l;var u=L.subplot,g=f.cd[f.index],h=f.trace;if(g.r=s[f.index],g.theta=n[f.index],!!u.isPtInside(g))return f.xLabelVal=void 0,f.yLabelVal=void 0,P(g,h,u,f),l}}j.exports={hoverPoints:o}},62944:function(j,V,t){var b=t(27160);b.plot=t(56512),j.exports=b},56512:function(j,V,t){var b=t(3108),P=t(38248),o=t(89876),L=t(74588),A=t(84236),v=t(3400),p=t(67072).TOO_MANY_POINTS,r={};j.exports=function(s,n,l){if(l.length){var f=n.radialAxis,u=n.angularAxis,g=L(s,n);return l.forEach(function(h){if(!(!h||!h[0]||!h[0].trace)){var T=h[0],c=T.trace,i=T.t,d=c._length,x=i.r,w=i.theta,C=i.opts,y,S=x.slice(),M=w.slice();for(y=0;y<x.length;y++)n.isPtInside({r:x[y],theta:w[y]})||(S[y]=NaN,M[y]=NaN);var a=new Array(d*2),E=Array(d),m=Array(d);for(y=0;y<d;y++){var k=S[y],I,O;if(P(k)){var z=f.c2g(k),B=u.c2g(M[y],c.thetaunit);I=z*Math.cos(B),O=z*Math.sin(B)}else I=O=NaN;E[y]=a[y*2]=I,m[y]=a[y*2+1]=O}i.tree=b(a),C.marker&&d>=p&&(C.marker.cluster=i.tree),C.marker&&(C.markerSel.positions=C.markerUnsel.positions=C.marker.positions=a),C.line&&a.length>1&&v.extendFlat(C.line,A.linePositions(s,c,a)),C.text&&(v.extendFlat(C.text,{positions:a},A.textPosition(s,c,C.text,C.marker)),v.extendFlat(C.textSel,{positions:a},A.textPosition(s,c,C.text,C.markerSel)),v.extendFlat(C.textUnsel,{positions:a},A.textPosition(s,c,C.text,C.markerUnsel))),C.fill&&!g.fill2d&&(g.fill2d=!0),C.marker&&!g.scatter2d&&(g.scatter2d=!0),C.line&&!g.line2d&&(g.line2d=!0),C.text&&!g.glText&&(g.glText=!0),g.lineOptions.push(C.line),g.fillOptions.push(C.fill),g.markerOptions.push(C.marker),g.markerSelectedOptions.push(C.markerSel),g.markerUnselectedOptions.push(C.markerUnsel),g.textOptions.push(C.text),g.textSelectedOptions.push(C.textSel),g.textUnselectedOptions.push(C.textUnsel),g.selectBatch.push([]),g.unselectBatch.push([]),i.x=E,i.y=m,i.rawx=E,i.rawy=m,i.r=x,i.theta=w,i.positions=a,i._scene=g,i.index=g.count,g.count++}}),o(s,n,l)}},j.exports.reglPrecompiled=r},69496:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(92880).extendFlat,L=t(98304),A=t(52904),v=t(45464),p=A.line;j.exports={mode:A.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:A.text,texttemplate:P({editType:"plot"},{keys:["real","imag","text"]}),hovertext:A.hovertext,line:{color:p.color,width:p.width,dash:p.dash,backoff:p.backoff,shape:o({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:A.connectgaps,marker:A.marker,cliponaxis:o({},A.cliponaxis,{dflt:!1}),textposition:A.textposition,textfont:A.textfont,fill:o({},A.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:L(),hoverinfo:o({},v.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:A.hoveron,hovertemplate:b(),selected:A.selected,unselected:A.unselected}},47507:function(j,V,t){var b=t(38248),P=t(39032).BADNUM,o=t(90136),L=t(20148),A=t(4500),v=t(16356).calcMarkerSize;j.exports=function(r,e){for(var s=r._fullLayout,n=e.subplot,l=s[n].realaxis,f=s[n].imaginaryaxis,u=l.makeCalcdata(e,"real"),g=f.makeCalcdata(e,"imag"),h=e._length,T=new Array(h),c=0;c<h;c++){var i=u[c],d=g[c],x=T[c]={};b(i)&&b(d)?(x.real=i,x.imag=d):x.real=P}return v(e,h),o(r,e),L(T,e),A(T,e),T}},76716:function(j,V,t){var b=t(3400),P=t(43028),o=t(74428),L=t(66828),A=t(11731),v=t(124),p=t(70840),r=t(88200).PTS_LINESONLY,e=t(69496);j.exports=function(l,f,u,g){function h(i,d){return b.coerce(l,f,e,i,d)}var T=s(l,f,g,h);if(!T){f.visible=!1;return}h("mode",T<r?"lines+markers":"lines"),h("text"),h("hovertext"),f.hoveron!=="fills"&&h("hovertemplate"),P.hasMarkers(f)&&o(l,f,u,g,h,{gradient:!0}),P.hasLines(f)&&(L(l,f,u,g,h,{backoff:!0}),A(l,f,h),h("connectgaps")),P.hasText(f)&&(h("texttemplate"),v(l,f,g,h));var c=[];(P.hasMarkers(f)||P.hasText(f))&&(h("cliponaxis"),h("marker.maxdisplayed"),c.push("points")),h("fill"),f.fill!=="none"&&(p(l,f,u,h),P.hasLines(f)||A(l,f,h)),(f.fill==="tonext"||f.fill==="toself")&&c.push("fills"),h("hoveron",c.join("+")||"points"),b.coerceSelectionMarkerOpacity(f,h)};function s(n,l,f,u){var g=u("real"),h=u("imag"),T;return g&&h&&(T=Math.min(g.length,h.length)),b.isTypedArray(g)&&(l.real=g=Array.from(g)),b.isTypedArray(h)&&(l.imag=h=Array.from(h)),l._length=T,T}},49504:function(j,V,t){var b=t(54460);j.exports=function(o,L,A){var v={},p=A[L.subplot]._subplot;return v.realLabel=b.tickText(p.radialAxis,o.real,!0).text,v.imagLabel=b.tickText(p.angularAxis,o.imag,!0).text,v}},25292:function(j,V,t){var b=t(98723);function P(L,A,v,p){var r=b(L,A,v,p);if(!(!r||r[0].index===!1)){var e=r[0];if(e.index===void 0)return r;var s=L.subplot,n=e.cd[e.index],l=e.trace;if(s.isPtInside(n))return e.xLabelVal=void 0,e.yLabelVal=void 0,o(n,l,s,e),e.hovertemplate=l.hovertemplate,r}}function o(L,A,v,p){var r=v.radialAxis,e=v.angularAxis;r._hovertitle="real",e._hovertitle="imag";var s={};s[A.subplot]={_subplot:v};var n=A._module.formatLabels(L,A,s);p.realLabel=n.realLabel,p.imagLabel=n.imagLabel;var l=L.hi||A.hoverinfo,f=[];function u(h,T){f.push(h._hovertitle+": "+T)}if(!A.hovertemplate){var g=l.split("+");g.indexOf("all")!==-1&&(g=["real","imag","text"]),g.indexOf("real")!==-1&&u(r,p.realLabel),g.indexOf("imag")!==-1&&u(e,p.imagLabel),g.indexOf("text")!==-1&&p.text&&(f.push(p.text),delete p.text),p.extraText=f.join("<br>")}}j.exports={hoverPoints:P,makeHoverPointText:o}},95443:function(j,V,t){j.exports={moduleType:"trace",name:"scattersmith",basePlotModule:t(47788),categories:["smith","symbols","showLegend","scatter-like"],attributes:t(69496),supplyDefaults:t(76716),colorbar:t(5528),formatLabels:t(49504),calc:t(47507),plot:t(34927),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(25292).hoverPoints,selectPoints:t(91560),meta:{}}},34927:function(j,V,t){var b=t(96504),P=t(39032).BADNUM,o=t(36416),L=o.smith;j.exports=function(v,p,r){for(var e=p.layers.frontplot.select("g.scatterlayer"),s=p.xaxis,n=p.yaxis,l={xaxis:s,yaxis:n,plot:p.framework,layerClipId:p._hasClipOnAxisFalse?p.clipIds.forTraces:null},f=0;f<r.length;f++)for(var u=r[f],g=0;g<u.length;g++){g===0&&(u[0].trace._xA=s,u[0].trace._yA=n);var h=u[g],T=h.real;if(T===P)h.x=h.y=P;else{var c=L([T,h.imag]);h.x=c[0],h.y=c[1]}}b(v,l,r,e)}},5896:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(98304),L=t(52904),A=t(45464),v=t(49084),p=t(98192).u,r=t(92880).extendFlat,e=L.marker,s=L.line,n=e.line;j.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:r({},L.mode,{dflt:"markers"}),text:r({},L.text,{}),texttemplate:P({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:r({},L.hovertext,{}),line:{color:s.color,width:s.width,dash:p,backoff:s.backoff,shape:r({},s.shape,{values:["linear","spline"]}),smoothing:s.smoothing,editType:"calc"},connectgaps:L.connectgaps,cliponaxis:L.cliponaxis,fill:r({},L.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:o(),marker:r({symbol:e.symbol,opacity:e.opacity,angle:e.angle,angleref:e.angleref,standoff:e.standoff,maxdisplayed:e.maxdisplayed,size:e.size,sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,line:r({width:n.width,editType:"calc"},v("marker.line")),gradient:e.gradient,editType:"calc"},v("marker")),textfont:L.textfont,textposition:L.textposition,selected:L.selected,unselected:L.unselected,hoverinfo:r({},A.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:L.hoveron,hovertemplate:b()}},34335:function(j,V,t){var b=t(38248),P=t(90136),o=t(20148),L=t(4500),A=t(16356).calcMarkerSize,v=["a","b","c"],p={a:["b","c"],b:["a","c"],c:["a","b"]};j.exports=function(e,s){var n=e._fullLayout[s.subplot],l=n.sum,f=s.sum||l,u={a:s.a,b:s.b,c:s.c},g,h,T,c,i,d;for(g=0;g<v.length;g++)if(T=v[g],!u[T]){for(i=u[p[T][0]],d=u[p[T][1]],c=new Array(i.length),h=0;h<i.length;h++)c[h]=f-i[h]-d[h];u[T]=c}var x=s._length,w=new Array(x),C,y,S,M,a,E;for(g=0;g<x;g++)C=u.a[g],y=u.b[g],S=u.c[g],b(C)&&b(y)&&b(S)?(C=+C,y=+y,S=+S,M=l/(C+y+S),M!==1&&(C*=M,y*=M,S*=M),E=C,a=S-y,w[g]={x:a,y:E,a:C,b:y,c:S}):w[g]={x:!1,y:!1};return A(s,x),P(e,s),o(w,s),L(w,s),w}},84256:function(j,V,t){var b=t(3400),P=t(88200),o=t(43028),L=t(74428),A=t(66828),v=t(11731),p=t(124),r=t(70840),e=t(5896);j.exports=function(n,l,f,u){function g(w,C){return b.coerce(n,l,e,w,C)}var h=g("a"),T=g("b"),c=g("c"),i;if(h?(i=h.length,T?(i=Math.min(i,T.length),c&&(i=Math.min(i,c.length))):c?i=Math.min(i,c.length):i=0):T&&c&&(i=Math.min(T.length,c.length)),!i){l.visible=!1;return}l._length=i,g("sum"),g("text"),g("hovertext"),l.hoveron!=="fills"&&g("hovertemplate");var d=i<P.PTS_LINESONLY?"lines+markers":"lines";g("mode",d),o.hasMarkers(l)&&L(n,l,f,u,g,{gradient:!0}),o.hasLines(l)&&(A(n,l,f,u,g,{backoff:!0}),v(n,l,g),g("connectgaps")),o.hasText(l)&&(g("texttemplate"),p(n,l,u,g));var x=[];(o.hasMarkers(l)||o.hasText(l))&&(g("cliponaxis"),g("marker.maxdisplayed"),x.push("points")),g("fill"),l.fill!=="none"&&(r(n,l,f,g),o.hasLines(l)||v(n,l,g)),(l.fill==="tonext"||l.fill==="toself")&&x.push("fills"),g("hoveron",x.join("+")||"points"),b.coerceSelectionMarkerOpacity(l,g)}},97476:function(j){j.exports=function(t,b,P,o,L){if(b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),o[L]){var A=o[L];t.a=A.a,t.b=A.b,t.c=A.c}else t.a=b.a,t.b=b.b,t.c=b.c;return t}},90404:function(j,V,t){var b=t(54460);j.exports=function(o,L,A){var v={},p=A[L.subplot]._subplot;return v.aLabel=b.tickText(p.aaxis,o.a,!0).text,v.bLabel=b.tickText(p.baxis,o.b,!0).text,v.cLabel=b.tickText(p.caxis,o.c,!0).text,v}},26596:function(j,V,t){var b=t(98723);j.exports=function(o,L,A,v){var p=b(o,L,A,v);if(!p||p[0].index===!1)return;var r=p[0];if(r.index===void 0){var e=1-r.y0/o.ya._length,s=o.xa._length,n=s*e/2,l=s-n;return r.x0=Math.max(Math.min(r.x0,l),n),r.x1=Math.max(Math.min(r.x1,l),n),p}var f=r.cd[r.index],u=r.trace,g=r.subplot;r.a=f.a,r.b=f.b,r.c=f.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var h={};h[u.subplot]={_subplot:g};var T=u._module.formatLabels(f,u,h);r.aLabel=T.aLabel,r.bLabel=T.bLabel,r.cLabel=T.cLabel;var c=f.hi||u.hoverinfo,i=[];function d(w,C){i.push(w._hovertitle+": "+C)}if(!u.hovertemplate){var x=c.split("+");x.indexOf("all")!==-1&&(x=["a","b","c"]),x.indexOf("a")!==-1&&d(g.aaxis,r.aLabel),x.indexOf("b")!==-1&&d(g.baxis,r.bLabel),x.indexOf("c")!==-1&&d(g.caxis,r.cLabel)}return r.extraText=i.join("<br>"),r.hovertemplate=u.hovertemplate,p}},34864:function(j,V,t){j.exports={attributes:t(5896),supplyDefaults:t(84256),colorbar:t(5528),formatLabels:t(90404),calc:t(34335),plot:t(88776),style:t(49224).style,styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(26596),selectPoints:t(91560),eventData:t(97476),moduleType:"trace",name:"scatterternary",basePlotModule:t(19352),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},88776:function(j,V,t){var b=t(96504);j.exports=function(o,L,A){var v=L.plotContainer;v.select(".scatterlayer").selectAll("*").remove();for(var p=L.xaxis,r=L.yaxis,e={xaxis:p,yaxis:r,plot:v,layerClipId:L._hasClipOnAxisFalse?L.clipIdRelative:null},s=L.layers.frontplot.select("g.scatterlayer"),n=0;n<A.length;n++){var l=A[n];l.length&&(l[0].trace._xA=p,l[0].trace._yA=r)}b(o,e,A,s)}},44524:function(j,V,t){var b=t(52904),P=t(49084),o=t(29736).axisHoverFormat,L=t(21776).Ks,A=t(2876),v=t(33816).idRegex,p=t(31780).templatedArray,r=t(92880).extendFlat,e=b.marker,s=e.line,n=r(P("marker.line",{editTypeOverride:"calc"}),{width:r({},s.width,{editType:"calc"}),editType:"calc"}),l=r(P("marker"),{symbol:e.symbol,angle:e.angle,size:r({},e.size,{editType:"markerSize"}),sizeref:e.sizeref,sizemin:e.sizemin,sizemode:e.sizemode,opacity:e.opacity,colorbar:e.colorbar,line:n,editType:"calc"});l.color.editType=l.cmin.editType=l.cmax.editType="style";function f(u){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:v[u],editType:"plot"}}}j.exports={dimensions:p("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},A.text,{}),hovertext:r({},A.hovertext,{}),hovertemplate:L(),xhoverformat:o("x"),yhoverformat:o("y"),marker:l,xaxes:f("x"),yaxes:f("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:A.selected.marker,editType:"calc"},unselected:{marker:A.unselected.marker,editType:"calc"},opacity:A.opacity}},28888:function(j,V,t){var b=t(24040),P=t(12704);j.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t(44524),supplyDefaults:t(69544),colorbar:t(5528),calc:t(66821),plot:t(54840),hoverPoints:t(72248).hoverPoints,selectPoints:t(62500),editStyle:t(83156),meta:{}},b.register(P)},99332:function(j,V,t){var b=t(13472),P=t(24040),o=t(5048),L=t(84888)._M,A=t(57952),v=t(79811).getFromId,p=t(54460).shouldShowZeroLine,r="splom",e={};function s(h){var T=h._fullLayout,c=P.getModule(r),i=L(h.calcdata,c)[0],d=o(h,["ANGLE_instanced_arrays","OES_element_index_uint"],e);d&&(T._hasOnlyLargeSploms&&f(h),c.plot(h,{},i))}function n(h){var T=h.calcdata,c=h._fullLayout;c._hasOnlyLargeSploms&&f(h);for(var i=0;i<T.length;i++){var d=T[i][0],x=d.trace,w=c._splomScenes[x.uid];x.type==="splom"&&w&&w.matrix&&l(h,x,w)}}function l(h,T,c){for(var i=c.matrixOptions.data.length,d=T._visibleDims,x=c.viewOpts.ranges=new Array(i),w=0;w<d.length;w++){var C=d[w],y=x[w]=new Array(4),S=v(h,T._diag[C][0]);S&&(y[0]=S.r2l(S.range[0]),y[2]=S.r2l(S.range[1]));var M=v(h,T._diag[C][1]);M&&(y[1]=M.r2l(M.range[0]),y[3]=M.r2l(M.range[1]))}c.selectBatch.length||c.unselectBatch.length?c.matrix.update({ranges:x},{ranges:x}):c.matrix.update({ranges:x})}function f(h){var T=h._fullLayout,c=T._glcanvas.data()[0].regl,i=T._splomGrid;i||(i=T._splomGrid=b(c)),i.update(u(h))}function u(h){var T=h._context.plotGlPixelRatio,c=h._fullLayout,i=c._size,d=[0,0,c.width*T,c.height*T],x={},w;function C(G,X,$,et,ot,nt){$*=T,et*=T,ot*=T,nt*=T;var Z=X[G+"color"],Q=X[G+"width"],W=String(Z+Q);W in x?x[W].data.push(NaN,NaN,$,et,ot,nt):x[W]={data:[$,et,ot,nt],join:"rect",thickness:Q*T,color:Z,viewport:d,range:d,overlay:!1}}for(w in c._splomSubplots){var y=c._plots[w],S=y.xaxis,M=y.yaxis,a=S._gridVals,E=M._gridVals,m=S._offset,k=S._length,I=M._length,O=i.b+M.domain[0]*i.h,z=-M._m,B=-z*M.r2l(M.range[0],M.calendar),F,_;if(S.showgrid)for(w=0;w<a.length;w++)F=m+S.l2p(a[w].x),C("grid",S,F,O,F,O+I);if(M.showgrid)for(w=0;w<E.length;w++)_=O+B+z*E[w].x,C("grid",M,m,_,m+k,_);p(h,S,M)&&(F=m+S.l2p(0),C("zeroline",S,F,O,F,O+I)),p(h,M,S)&&(_=O+B+0,C("zeroline",M,m,_,m+k,_))}var N=[];for(w in x)N.push(x[w]);return N}function g(h,T,c,i){var d={},x;if(i._splomScenes){for(x=0;x<h.length;x++){var w=h[x];w.type==="splom"&&(d[w.uid]=1)}for(x=0;x<c.length;x++){var C=c[x];if(!d[C.uid]){var y=i._splomScenes[C.uid];y&&y.destroy&&y.destroy(),i._splomScenes[C.uid]=null,delete i._splomScenes[C.uid]}}}Object.keys(i._splomScenes||{}).length===0&&delete i._splomScenes,i._splomGrid&&!T._hasOnlyLargeSploms&&i._hasOnlyLargeSploms&&(i._splomGrid.destroy(),i._splomGrid=null,delete i._splomGrid),A.clean(h,T,c,i)}j.exports={name:r,attr:A.attr,attrRegex:A.attrRegex,layoutAttributes:A.layoutAttributes,supplyLayoutDefaults:A.supplyLayoutDefaults,drawFramework:A.drawFramework,plot:s,drag:n,updateGrid:f,clean:g,updateFx:A.updateFx,toSVG:A.toSVG,reglPrecompiled:e}},66821:function(j,V,t){var b=t(3400),P=t(79811),o=t(16356).calcMarkerSize,L=t(16356).calcAxisExpansion,A=t(90136),v=t(84236).markerSelection,p=t(84236).markerStyle,r=t(72308),e=t(39032).BADNUM,s=t(67072).TOO_MANY_POINTS;j.exports=function(l,f){var u=f.dimensions,g=f._length,h={},T=h.cdata=[],c=h.data=[],i=f._visibleDims=[],d,x,w,C,y;function S(k,I){for(var O=k.makeCalcdata({v:I.values,vcalendar:f.calendar},"v"),z=0;z<O.length;z++)O[z]=O[z]===e?NaN:O[z];T.push(O),c.push(k.type==="log"?b.simpleMap(O,k.c2l):O)}for(d=0;d<u.length;d++)if(w=u[d],w.visible){if(C=P.getFromId(l,f._diag[d][0]),y=P.getFromId(l,f._diag[d][1]),C&&y&&C.type!==y.type){b.log("Skipping splom dimension "+d+" with conflicting axis types");continue}C?(S(C,w),y&&y.type==="category"&&(y._categories=C._categories.slice())):S(y,w),i.push(d)}A(l,f),b.extendFlat(h,p(l,f));var M=T.length,a=M*g>s,E;for(a?E=h.sizeAvg||Math.max(h.size,3):E=o(f,g),x=0;x<i.length;x++)d=i[x],w=u[d],C=P.getFromId(l,f._diag[d][0])||{},y=P.getFromId(l,f._diag[d][1])||{},L(l,f,C,y,T[x],T[x],E);var m=r(l,f);return m.matrix||(m.matrix=!0),m.matrixOptions=h,m.selectedOptions=v(l,f,f.selected),m.unselectedOptions=v(l,f,f.unselected),[{x:!1,y:!1,t:{},trace:f}]}},69544:function(j,V,t){var b=t(3400),P=t(51272),o=t(44524),L=t(43028),A=t(74428),v=t(26284),p=t(80088).isOpenSymbol;j.exports=function(n,l,f,u){function g(C,y){return b.coerce(n,l,o,C,y)}var h=P(n,l,{name:"dimensions",handleItemDefaults:r}),T=g("diagonal.visible"),c=g("showupperhalf"),i=g("showlowerhalf"),d=v(l,h,"values");if(!d||!T&&!c&&!i){l.visible=!1;return}g("text"),g("hovertext"),g("hovertemplate"),g("xhoverformat"),g("yhoverformat"),A(n,l,f,u,g,{noAngleRef:!0,noStandOff:!0});var x=p(l.marker.symbol),w=L.isBubble(l);g("marker.line.width",x||w?1:0),e(n,l,u,g),b.coerceSelectionMarkerOpacity(l,g)};function r(s,n){function l(u,g){return b.coerce(s,n,o.dimensions,u,g)}l("label");var f=l("values");f&&f.length?l("visible"):n.visible=!1,l("axis.type"),l("axis.matches")}function e(s,n,l,f){var u=n.dimensions,g=u.length,h=n.showupperhalf,T=n.showlowerhalf,c=n.diagonal.visible,i,d,x=new Array(g),w=new Array(g);for(i=0;i<g;i++){var C=i?i+1:"";x[i]="x"+C,w[i]="y"+C}var y=f("xaxes",x),S=f("yaxes",w),M=n._diag=new Array(g);n._xaxes={},n._yaxes={};var a=[],E=[];function m(G,X,$,et){if(G){var ot=G.charAt(0),nt=l._splomAxes[ot];if(n["_"+ot+"axes"][G]=1,et.push(G),!(G in nt)){var Z=nt[G]={};$&&(Z.label=$.label||"",$.visible&&$.axis&&($.axis.type&&(Z.type=$.axis.type),$.axis.matches&&(Z.matches=X)))}}}var k=!c&&!T,I=!c&&!h;for(n._axesDim={},i=0;i<g;i++){var O=u[i],z=i===0,B=i===g-1,F=z&&k||B&&I?void 0:y[i],_=z&&I||B&&k?void 0:S[i];m(F,_,O,a),m(_,F,O,E),M[i]=[F,_],n._axesDim[F]=i,n._axesDim[_]=i}for(i=0;i<a.length;i++)for(d=0;d<E.length;d++){var N=a[i]+E[d];(i>d&&h||i<d&&T||i===d&&(c||!T||!h))&&(l._splomSubplots[N]=1)}(!T||!c&&h&&T)&&(l._splomGridDflt.xside="bottom",l._splomGridDflt.yside="left")}},83156:function(j,V,t){var b=t(3400),P=t(90136),o=t(84236).markerStyle;j.exports=function(A,v){var p=v.trace,r=A._fullLayout._splomScenes[p.uid];if(r){P(A,p),b.extendFlat(r.matrixOptions,o(A,p));var e=b.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(e,null)}}},50328:function(j,V){V.getDimIndex=function(b,P){for(var o=P._id,L=o.charAt(0),A={x:0,y:1}[L],v=b._visibleDims,p=0;p<v.length;p++){var r=v[p];if(b._diag[r][A]===o)return p}return!1}},72248:function(j,V,t){var b=t(50328),P=t(41272).calcHover,o=t(54460).getFromId,L=t(92880).extendFlat;function A(p,r,e,s,n){n||(n={});var l=(s||"").charAt(0)==="x",f=(s||"").charAt(0)==="y",u=v(p,r,e);if((l||f)&&n.hoversubplots==="axis"&&u[0])for(var g=(l?p.xa:p.ya)._subplotsWith,h=n.gd,T=L({},p),c=0;c<g.length;c++){var i=g[c];if(i!==p.xa._id+p.ya._id){f?T.xa=o(h,i,"x"):T.ya=o(h,i,"y");var d=l||f,x=v(T,r,e,d);u=u.concat(x)}}return u}function v(p,r,e,s){var n=p.cd,l=n[0].trace,f=p.scene,u=f.matrixOptions.cdata,g=p.xa,h=p.ya,T=g.c2p(r),c=h.c2p(e),i=p.distance,d=b.getDimIndex(l,g),x=b.getDimIndex(l,h);if(d===!1||x===!1)return[p];for(var w=u[d],C=u[x],y,S,M=i,a=0;a<w.length;a++)if(!(s&&a!==p.index)){var E=w[a],m=C[a],k=g.c2p(E)-T,I=h.c2p(m)-c,O=Math.sqrt(k*k+I*I);(s||O<M)&&(M=S=O,y=a)}return p.index=y,p.distance=M,p.dxy=S,y===void 0?[p]:[P(p,w,C,l)]}j.exports={hoverPoints:A}},97924:function(j,V,t){var b=t(28888);b.basePlotModule=t(99332),j.exports=b},54840:function(j,V,t){var b=t(55795),P=t(3400),o=t(79811),L=t(72760).selectMode;j.exports=function(p,r,e){if(e.length)for(var s=0;s<e.length;s++)A(p,e[s][0])};function A(v,p){var r=v._fullLayout,e=r._size,s=p.trace,n=p.t,l=r._splomScenes[s.uid],f=l.matrixOptions,u=f.cdata,g=r._glcanvas.data()[0].regl,h=r.dragmode,T,c,i,d,x;if(u.length!==0){f.lower=s.showupperhalf,f.upper=s.showlowerhalf,f.diagonal=s.diagonal.visible;var w=s._visibleDims,C=u.length,y=l.viewOpts={};for(y.ranges=new Array(C),y.domains=new Array(C),x=0;x<w.length;x++){i=w[x];var S=y.ranges[x]=new Array(4),M=y.domains[x]=new Array(4);T=o.getFromId(v,s._diag[i][0]),T&&(S[0]=T._rl[0],S[2]=T._rl[1],M[0]=T.domain[0],M[2]=T.domain[1]),c=o.getFromId(v,s._diag[i][1]),c&&(S[1]=c._rl[0],S[3]=c._rl[1],M[1]=c.domain[0],M[3]=c.domain[1])}var a=v._context.plotGlPixelRatio,E=e.l*a,m=e.b*a,k=e.w*a,I=e.h*a;y.viewport=[E,m,k+E,I+m],l.matrix===!0&&(l.matrix=b(g));var O=r.clickmode.indexOf("select")>-1,z=L(h)||!!s.selectedpoints||O,B=!0;if(z){var F=s._length;if(s.selectedpoints){l.selectBatch=s.selectedpoints;var _=s.selectedpoints,N={};for(i=0;i<_.length;i++)N[_[i]]=!0;var G=[];for(i=0;i<F;i++)N[i]||G.push(i);l.unselectBatch=G}var X=n.xpx=new Array(C),$=n.ypx=new Array(C);for(x=0;x<w.length;x++){if(i=w[x],T=o.getFromId(v,s._diag[i][0]),T)for(X[x]=new Array(F),d=0;d<F;d++)X[x][d]=T.c2p(u[x][d]);if(c=o.getFromId(v,s._diag[i][1]),c)for($[x]=new Array(F),d=0;d<F;d++)$[x][d]=c.c2p(u[x][d])}if(l.selectBatch.length||l.unselectBatch.length){var et=P.extendFlat({},f,l.unselectedOptions,y),ot=P.extendFlat({},f,l.selectedOptions,y);l.matrix.update(et,ot),B=!1}}else n.xpx=n.ypx=null;if(B){var nt=P.extendFlat({},f,y);l.matrix.update(nt,null)}}}},72308:function(j,V,t){var b=t(3400);j.exports=function(o,L){var A=o._fullLayout,v=L.uid,p=A._splomScenes;p||(p=A._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},e={matrix:!1,selectBatch:[],unselectBatch:[]},s=p[L.uid];return s||(s=p[v]=b.extendFlat({},r,e),s.draw=function(){s.matrix&&s.matrix.draw&&(s.selectBatch.length||s.unselectBatch.length?s.matrix.draw(s.unselectBatch,s.selectBatch):s.matrix.draw()),s.dirty=!1},s.destroy=function(){s.matrix&&s.matrix.destroy&&s.matrix.destroy(),s.matrixOptions=null,s.selectBatch=null,s.unselectBatch=null,s=null}),s.dirty||b.extendFlat(s,r),s}},62500:function(j,V,t){var b=t(3400),P=b.pushUnique,o=t(43028),L=t(50328);j.exports=function(v,p){var r=v.cd,e=r[0].trace,s=r[0].t,n=v.scene,l=n.matrixOptions.cdata,f=v.xaxis,u=v.yaxis,g=[];if(!n)return g;var h=!o.hasMarkers(e)&&!o.hasText(e);if(e.visible!==!0||h)return g;var T=L.getDimIndex(e,f),c=L.getDimIndex(e,u);if(T===!1||c===!1)return g;var i=s.xpx[T],d=s.ypx[c],x=l[T],w=l[c],C=(v.scene.selectBatch||[]).slice(),y=[];if(p!==!1&&!p.degenerate)for(var S=0;S<x.length;S++)p.contains([i[S],d[S]],null,S,v)?(g.push({pointNumber:S,x:x[S],y:w[S]}),P(C,S)):C.indexOf(S)!==-1?P(C,S):y.push(S);var M=n.matrixOptions;return!C.length&&!y.length?n.matrix.update(M,null):!n.selectBatch.length&&!n.unselectBatch.length&&n.matrix.update(n.unselectedOptions,b.extendFlat({},M,n.selectedOptions,n.viewOpts)),n.selectBatch=C,n.unselectBatch=y,g}},90167:function(j,V,t){var b=t(49084),P=t(29736).axisHoverFormat,o=t(21776).Ks,L=t(52948),A=t(45464),v=t(92880).extendFlat,p={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:o({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:P("u",1),vhoverformat:P("v",1),whoverformat:P("w",1),xhoverformat:P("x"),yhoverformat:P("y"),zhoverformat:P("z"),showlegend:v({},A.showlegend,{dflt:!1})};v(p,b("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(e){p[e]=L[e]}),p.hoverinfo=v({},A.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),p.transforms=void 0,j.exports=p},3832:function(j,V,t){var b=t(3400),P=t(47128);function o(p,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=v(r.u,r._len),r._v=v(r.v,r._len),r._w=v(r.w,r._len),r._x=v(r.x,r._len),r._y=v(r.y,r._len),r._z=v(r.z,r._len);var e=L(r);r._gridFill=e.fill,r._Xs=e.Xs,r._Ys=e.Ys,r._Zs=e.Zs,r._len=e.len;var s=0,n,l,f;r.starts&&(n=v(r.starts.x||[]),l=v(r.starts.y||[]),f=v(r.starts.z||[]),s=Math.min(n.length,l.length,f.length)),r._startsX=n||[],r._startsY=l||[],r._startsZ=f||[];var u=0,g=1/0,h;for(h=0;h<r._len;h++){var T=r._u[h],c=r._v[h],i=r._w[h],d=Math.sqrt(T*T+c*c+i*i);u=Math.max(u,d),g=Math.min(g,d)}for(P(p,r,{vals:[g,u],containerStr:"",cLetter:"c"}),h=0;h<s;h++){var x=n[h];e.xMax=Math.max(e.xMax,x),e.xMin=Math.min(e.xMin,x);var w=l[h];e.yMax=Math.max(e.yMax,w),e.yMin=Math.min(e.yMin,w);var C=f[h];e.zMax=Math.max(e.zMax,C),e.zMin=Math.min(e.zMin,C)}r._slen=s,r._normMax=u,r._xbnds=[e.xMin,e.xMax],r._ybnds=[e.yMin,e.yMax],r._zbnds=[e.zMin,e.zMax]}function L(p){var r=p._x,e=p._y,s=p._z,n=p._len,l,f,u,g=-1/0,h=1/0,T=-1/0,c=1/0,i=-1/0,d=1/0,x="",w,C,y,S,M,a,E,m,k;for(n&&(S=r[0],a=e[0],m=s[0]),n>1&&(M=r[n-1],E=e[n-1],k=s[n-1]),l=0;l<n;l++)g=Math.max(g,r[l]),h=Math.min(h,r[l]),T=Math.max(T,e[l]),c=Math.min(c,e[l]),i=Math.max(i,s[l]),d=Math.min(d,s[l]),!w&&r[l]!==S&&(w=!0,x+="x"),!C&&e[l]!==a&&(C=!0,x+="y"),!y&&s[l]!==m&&(y=!0,x+="z");w||(x+="x"),C||(x+="y"),y||(x+="z");var I=A(p._x),O=A(p._y),z=A(p._z);x=x.replace("x",(S>M?"-":"+")+"x"),x=x.replace("y",(a>E?"-":"+")+"y"),x=x.replace("z",(m>k?"-":"+")+"z");var B=function(){n=0,I=[],O=[],z=[]};(!n||n<I.length*O.length*z.length)&&B();var F=function(lt){return lt==="x"?r:lt==="y"?e:s},_=function(lt){return lt==="x"?I:lt==="y"?O:z},N=function(lt){return lt[n-1]<lt[0]?-1:1},G=F(x[1]),X=F(x[3]),$=F(x[5]),et=_(x[1]).length,ot=_(x[3]).length,nt=_(x[5]).length,Z=!1,Q=function(lt,dt,mt){return et*(ot*lt+dt)+mt},W=N(F(x[1])),J=N(F(x[3])),it=N(F(x[5]));for(l=0;l<nt-1;l++){for(f=0;f<ot-1;f++){for(u=0;u<et-1;u++){var K=Q(l,f,u),H=Q(l,f,u+1),at=Q(l,f+1,u),tt=Q(l+1,f,u);if((!(G[K]*W<G[H]*W)||!(X[K]*J<X[at]*J)||!($[K]*it<$[tt]*it))&&(Z=!0),Z)break}if(Z)break}if(Z)break}return Z&&(b.warn("Encountered arbitrary coordinates! Unable to input data grid."),B()),{xMin:h,yMin:c,zMin:d,xMax:g,yMax:T,zMax:i,Xs:I,Ys:O,Zs:z,len:n,fill:x}}function A(p){return b.distinctVals(p).vals}function v(p,r){if(r===void 0&&(r=p.length),b.isTypedArray(p))return p.subarray(0,r);for(var e=[],s=0;s<r;s++)e[s]=+p[s];return e}j.exports={calc:o,filter:v,processGrid:L}},25668:function(j,V,t){var b=t(67792).gl_streamtube3d,P=b.createTubeMesh,o=t(3400),L=t(33040).parseColorScale,A=t(8932).extractOpts,v=t(52094),p={xaxis:0,yaxis:1,zaxis:2};function r(u,g){this.scene=u,this.uid=g,this.mesh=null,this.data=null}var e=r.prototype;e.handlePick=function(u){var g=this.scene.fullSceneLayout,h=this.scene.dataScale;function T(d,x){var w=g[x],C=h[p[x]];return w.l2c(d)/C}if(u.object===this.mesh){var c=u.data.position,i=u.data.velocity;return u.traceCoordinate=[T(c[0],"xaxis"),T(c[1],"yaxis"),T(c[2],"zaxis"),T(i[0],"xaxis"),T(i[1],"yaxis"),T(i[2],"zaxis"),u.data.intensity*this.data._normMax,u.data.divergence],u.textLabel=this.data.hovertext||this.data.text,!0}};function s(u){var g=u.length,h;return g>2?h=u.slice(1,g-1):g===2?h=[(u[0]+u[1])/2]:h=u,h}function n(u){var g=u.length;return g===1?[.5,.5]:[u[1]-u[0],u[g-1]-u[g-2]]}function l(u,g){var h=u.fullSceneLayout,T=u.dataScale,c=g._len,i={};function d(ot,nt){var Z=h[nt],Q=T[p[nt]];return o.simpleMap(ot,function(W){return Z.d2l(W)*Q})}if(i.vectors=v(d(g._u,"xaxis"),d(g._v,"yaxis"),d(g._w,"zaxis"),c),!c)return{positions:[],cells:[]};var x=d(g._Xs,"xaxis"),w=d(g._Ys,"yaxis"),C=d(g._Zs,"zaxis");i.meshgrid=[x,w,C],i.gridFill=g._gridFill;var y=g._slen;if(y)i.startingPositions=v(d(g._startsX,"xaxis"),d(g._startsY,"yaxis"),d(g._startsZ,"zaxis"));else{for(var S=w[0],M=s(x),a=s(C),E=new Array(M.length*a.length),m=0,k=0;k<M.length;k++)for(var I=0;I<a.length;I++)E[m++]=[M[k],S,a[I]];i.startingPositions=E}i.colormap=L(g),i.tubeSize=g.sizeref,i.maxLength=g.maxdisplayed;var O=d(g._xbnds,"xaxis"),z=d(g._ybnds,"yaxis"),B=d(g._zbnds,"zaxis"),F=n(x),_=n(w),N=n(C),G=[[O[0]-F[0],z[0]-_[0],B[0]-N[0]],[O[1]+F[1],z[1]+_[1],B[1]+N[1]]],X=b(i,G),$=A(g);X.vertexIntensityBounds=[$.min/g._normMax,$.max/g._normMax];var et=g.lightposition;return X.lightPosition=[et.x,et.y,et.z],X.ambient=g.lighting.ambient,X.diffuse=g.lighting.diffuse,X.specular=g.lighting.specular,X.roughness=g.lighting.roughness,X.fresnel=g.lighting.fresnel,X.opacity=g.opacity,g._pad=X.tubeScale*g.sizeref*2,X}e.update=function(u){this.data=u;var g=l(this.scene,u);this.mesh.update(g)},e.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(u,g){var h=u.glplot.gl,T=l(u,g),c=P(h,T),i=new r(u,g.uid);return i.mesh=c,i.data=g,c._trace=i,u.glplot.add(c),i}j.exports=f},54304:function(j,V,t){var b=t(3400),P=t(27260),o=t(90167);j.exports=function(A,v,p,r){function e(h,T){return b.coerce(A,v,o,h,T)}var s=e("u"),n=e("v"),l=e("w"),f=e("x"),u=e("y"),g=e("z");if(!s||!s.length||!n||!n.length||!l||!l.length||!f||!f.length||!u||!u.length||!g||!g.length){v.visible=!1;return}e("starts.x"),e("starts.y"),e("starts.z"),e("maxdisplayed"),e("sizeref"),e("lighting.ambient"),e("lighting.diffuse"),e("lighting.specular"),e("lighting.roughness"),e("lighting.fresnel"),e("lightposition.x"),e("lightposition.y"),e("lightposition.z"),P(A,v,r,e,{prefix:"",cLetter:"c"}),e("text"),e("hovertext"),e("hovertemplate"),e("uhoverformat"),e("vhoverformat"),e("whoverformat"),e("xhoverformat"),e("yhoverformat"),e("zhoverformat"),v._length=null}},15436:function(j,V,t){j.exports={moduleType:"trace",name:"streamtube",basePlotModule:t(12536),categories:["gl3d","showLegend"],attributes:t(90167),supplyDefaults:t(54304),colorbar:{min:"cmin",max:"cmax"},calc:t(3832).calc,plot:t(25668),eventData:function(b,P){return b.tubex=b.x,b.tubey=b.y,b.tubez=b.z,b.tubeu=P.traceCoordinate[3],b.tubev=P.traceCoordinate[4],b.tubew=P.traceCoordinate[5],b.norm=P.traceCoordinate[6],b.divergence=P.traceCoordinate[7],delete b.x,delete b.y,delete b.z,b},meta:{}}},424:function(j,V,t){var b=t(45464),P=t(21776).Ks,o=t(21776).Gw,L=t(49084),A=t(86968).u,v=t(74996),p=t(27328),r=t(92880).extendFlat,e=t(98192).c;j.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},v.marker.line.color,{dflt:null}),width:r({},v.marker.line.width,{dflt:1}),editType:"calc"},pattern:e,editType:"calc"},L("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:v.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:o({editType:"plot"},{keys:p.eventDataKeys.concat(["label","value"])}),hovertext:v.hovertext,hoverinfo:r({},b.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:P({},{keys:p.eventDataKeys}),textfont:v.textfont,insidetextorientation:v.insidetextorientation,insidetextfont:v.insidetextfont,outsidetextfont:r({},v.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:v.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:A({name:"sunburst",trace:!0,editType:"calc"})}},54904:function(j,V,t){var b=t(7316);V.name="sunburst",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},3776:function(j,V,t){var b=t(74148),P=t(38248),o=t(3400),L=t(8932).makeColorScaleFuncFromTrace,A=t(45768).makePullColorFn,v=t(45768).generateExtendedColors,p=t(8932).calc,r=t(39032).ALMOST_EQUAL,e={},s={},n={};V.calc=function(f,u){var g=f._fullLayout,h=u.ids,T=o.isArrayOrTypedArray(h),c=u.labels,i=u.parents,d=u.values,x=o.isArrayOrTypedArray(d),w=[],C={},y={},S=function(W,J){C[W]?C[W].push(J):C[W]=[J],y[J]=1},M=function(W){return W||typeof W=="number"},a=function(W){return!x||P(d[W])&&d[W]>=0},E,m,k;T?(E=Math.min(h.length,i.length),m=function(W){return M(h[W])&&a(W)},k=function(W){return String(h[W])}):(E=Math.min(c.length,i.length),m=function(W){return M(c[W])&&a(W)},k=function(W){return String(c[W])}),x&&(E=Math.min(E,d.length));for(var I=0;I<E;I++)if(m(I)){var O=k(I),z=M(i[I])?String(i[I]):"",B={i:I,id:O,pid:z,label:M(c[I])?String(c[I]):""};x&&(B.v=+d[I]),w.push(B),S(z,O)}if(C[""]){if(C[""].length>1){for(var N=o.randstr(),G=0;G<w.length;G++)w[G].pid===""&&(w[G].pid=N);w.unshift({hasMultipleRoots:!0,id:N,pid:"",label:""})}}else{var F=[],_;for(_ in C)y[_]||F.push(_);if(F.length===1)_=F[0],w.unshift({hasImpliedRoot:!0,id:_,pid:"",label:_});else return o.warn(["Multiple implied roots, cannot build",u.type,"hierarchy of",u.name+".","These roots include:",F.join(", ")].join(" "))}var X;try{X=b.stratify().id(function(W){return W.id}).parentId(function(W){return W.pid})(w)}catch(W){return o.warn(["Failed to build",u.type,"hierarchy of",u.name+".","Error:",W.message].join(" "))}var $=b.hierarchy(X),et=!1;if(x)switch(u.branchvalues){case"remainder":$.sum(function(W){return W.data.v});break;case"total":$.each(function(W){var J=W.data.data,it=J.v;if(W.children){var K=W.children.reduce(function(H,at){return H+at.data.data.v},0);if((J.hasImpliedRoot||J.hasMultipleRoots)&&(it=K),it<K*r)return et=!0,o.warn(["Total value for node",W.data.data.id,"of",u.name,"is smaller than the sum of its children.",`
parent value =`,it,`
children sum =`,K].join(" "))}W.value=it});break}else l($,u,{branches:u.count.indexOf("branches")!==-1,leaves:u.count.indexOf("leaves")!==-1});if(!et){u.sort&&$.sort(function(W,J){return J.value-W.value});var ot,nt,Z=u.marker.colors||[],Q=!!Z.length;return u._hasColorscale?(Q||(Z=x?u.values:u._values),p(f,u,{vals:Z,containerStr:"marker",cLetter:"c"}),nt=L(u.marker)):ot=A(g["_"+u.type+"colormap"]),$.each(function(W){var J=W.data.data;J.color=u._hasColorscale?nt(Z[J.i]):ot(Z[J.i],J.id)}),w[0].hierarchy=$,w}},V._runCrossTraceCalc=function(f,u){var g=u._fullLayout,h=u.calcdata,T=g[f+"colorway"],c=g["_"+f+"colormap"];g["extend"+f+"colors"]&&(T=v(T,f==="icicle"?n:f==="treemap"?s:e));var i=0,d;function x(S){var M=S.data.data,a=M.id;M.color===!1&&(c[a]?M.color=c[a]:S.parent?S.parent.parent?M.color=S.parent.data.data.color:(c[a]=M.color=T[i%T.length],i++):M.color=d)}for(var w=0;w<h.length;w++){var C=h[w],y=C[0];y.trace.type===f&&y.hierarchy&&(d=y.trace.root.color,y.hierarchy.each(x))}},V.crossTraceCalc=function(f){return V._runCrossTraceCalc("sunburst",f)};function l(f,u,g){var h=0,T=f.children;if(T){for(var c=T.length,i=0;i<c;i++)h+=l(T[i],u,g);g.branches&&h++}else g.leaves&&h++;return f.value=f.data.data.value=h,u._values||(u._values=[]),u._values[f.data.data.i]=h,h}},27328:function(j){j.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},25244:function(j,V,t){var b=t(3400),P=t(424),o=t(86968).Q,L=t(31508).handleText,A=t(74174).handleMarkerDefaults,v=t(8932),p=v.hasColorscale,r=v.handleDefaults;j.exports=function(s,n,l,f){function u(x,w){return b.coerce(s,n,P,x,w)}var g=u("labels"),h=u("parents");if(!g||!g.length||!h||!h.length){n.visible=!1;return}var T=u("values");T&&T.length?u("branchvalues"):u("count"),u("level"),u("maxdepth"),A(s,n,f,u);var c=n._hasColorscale=p(s,"marker","colors")||(s.marker||{}).coloraxis;c&&r(s,n,f,u,{prefix:"marker.",cLetter:"c"}),u("leaf.opacity",c?1:.7);var i=u("text");u("texttemplate"),n.texttemplate||u("textinfo",b.isArrayOrTypedArray(i)?"text+label":"label"),u("hovertext"),u("hovertemplate");var d="auto";L(s,n,f,u,d,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),u("insidetextorientation"),u("sort"),u("rotation"),u("root.color"),o(n,f,u),n._length=null}},60404:function(j,V,t){var b=t(43616),P=t(76308);j.exports=function(L,A,v,p,r){var e=A.data.data,s=e.i,n=r||e.color;if(s>=0){A.i=e.i;var l=v.marker;l.pattern?(!l.colors||!l.pattern.shape)&&(l.color=n,A.color=n):(l.color=n,A.color=n),b.pointStyle(L,v,p,A)}else P.fill(L,n)}},45716:function(j,V,t){var b=t(33428),P=t(24040),o=t(10624).appendArrayPointValue,L=t(93024),A=t(3400),v=t(95924),p=t(78176),r=t(69656),e=r.formatPieValue;j.exports=function(l,f,u,g,h){var T=g[0],c=T.trace,i=T.hierarchy,d=c.type==="sunburst",x=c.type==="treemap"||c.type==="icicle";"_hasHoverLabel"in c||(c._hasHoverLabel=!1),"_hasHoverEvent"in c||(c._hasHoverEvent=!1);var w=function(S){var M=u._fullLayout;if(!(u._dragging||M.hovermode===!1)){var a=u._fullData[c.index],E=S.data.data,m=E.i,k=p.isHierarchyRoot(S),I=p.getParent(i,S),O=p.getValue(S),z=function(H){return A.castOption(a,m,H)},B=z("hovertemplate"),F=L.castHoverinfo(a,M,m),_=M.separators,N;if(B||F&&F!=="none"&&F!=="skip"){var G,X;d&&(G=T.cx+S.pxmid[0]*(1-S.rInscribed),X=T.cy+S.pxmid[1]*(1-S.rInscribed)),x&&(G=S._hoverX,X=S._hoverY);var $={},et=[],ot=[],nt=function(H){return et.indexOf(H)!==-1};F&&(et=F==="all"?a._module.attributes.hoverinfo.flags:F.split("+")),$.label=E.label,nt("label")&&$.label&&ot.push($.label),E.hasOwnProperty("v")&&($.value=E.v,$.valueLabel=e($.value,_),nt("value")&&ot.push($.valueLabel)),$.currentPath=S.currentPath=p.getPath(S.data),nt("current path")&&!k&&ot.push($.currentPath);var Z,Q=[],W=function(){Q.indexOf(Z)===-1&&(ot.push(Z),Q.push(Z))};$.percentParent=S.percentParent=O/p.getValue(I),$.parent=S.parentString=p.getPtLabel(I),nt("percent parent")&&(Z=p.formatPercent($.percentParent,_)+" of "+$.parent,W()),$.percentEntry=S.percentEntry=O/p.getValue(f),$.entry=S.entry=p.getPtLabel(f),nt("percent entry")&&!k&&!S.onPathbar&&(Z=p.formatPercent($.percentEntry,_)+" of "+$.entry,W()),$.percentRoot=S.percentRoot=O/p.getValue(i),$.root=S.root=p.getPtLabel(i),nt("percent root")&&!k&&(Z=p.formatPercent($.percentRoot,_)+" of "+$.root,W()),$.text=z("hovertext")||z("text"),nt("text")&&(Z=$.text,A.isValidTextValue(Z)&&ot.push(Z)),N=[s(S,a,h.eventDataKeys)];var J={trace:a,y:X,_x0:S._x0,_x1:S._x1,_y0:S._y0,_y1:S._y1,text:ot.join("<br>"),name:B||nt("name")?a.name:void 0,color:z("hoverlabel.bgcolor")||E.color,borderColor:z("hoverlabel.bordercolor"),fontFamily:z("hoverlabel.font.family"),fontSize:z("hoverlabel.font.size"),fontColor:z("hoverlabel.font.color"),fontWeight:z("hoverlabel.font.weight"),fontStyle:z("hoverlabel.font.style"),fontVariant:z("hoverlabel.font.variant"),nameLength:z("hoverlabel.namelength"),textAlign:z("hoverlabel.align"),hovertemplate:B,hovertemplateLabels:$,eventData:N};d&&(J.x0=G-S.rInscribed*S.rpx1,J.x1=G+S.rInscribed*S.rpx1,J.idealAlign=S.pxmid[0]<0?"left":"right"),x&&(J.x=G,J.idealAlign=G<0?"left":"right");var it=[];L.loneHover(J,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:u,inOut_bbox:it}),N[0].bbox=it[0],c._hasHoverLabel=!0}if(x){var K=l.select("path.surface");h.styleOne(K,S,a,u,{hovered:!0})}c._hasHoverEvent=!0,u.emit("plotly_hover",{points:N||[s(S,a,h.eventDataKeys)],event:b.event})}},C=function(S){var M=u._fullLayout,a=u._fullData[c.index],E=b.select(this).datum();if(c._hasHoverEvent&&(S.originalEvent=b.event,u.emit("plotly_unhover",{points:[s(E,a,h.eventDataKeys)],event:b.event}),c._hasHoverEvent=!1),c._hasHoverLabel&&(L.loneUnhover(M._hoverlayer.node()),c._hasHoverLabel=!1),x){var m=l.select("path.surface");h.styleOne(m,E,a,u,{hovered:!1})}},y=function(S){var M=u._fullLayout,a=u._fullData[c.index],E=d&&(p.isHierarchyRoot(S)||p.isLeaf(S)),m=p.getPtId(S),k=p.isEntry(S)?p.findEntryWithChild(i,m):p.findEntryWithLevel(i,m),I=p.getPtId(k),O={points:[s(S,a,h.eventDataKeys)],event:b.event};E||(O.nextLevel=I);var z=v.triggerHandler(u,"plotly_"+c.type+"click",O);if(z!==!1&&M.hovermode&&(u._hoverdata=[s(S,a,h.eventDataKeys)],L.click(u,b.event)),!E&&z!==!1&&!u._dragging&&!u._transitioning){P.call("_storeDirectGUIEdit",a,M._tracePreGUI[a.uid],{level:a.level});var B={data:[{level:I}],traces:[c.index]},F={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};L.loneUnhover(M._hoverlayer.node()),P.call("animate",u,B,F)}};l.on("mouseover",w),l.on("mouseout",C),l.on("click",y)};function s(n,l,f){for(var u=n.data.data,g={curveNumber:l.index,pointNumber:u.i,data:l._input,fullData:l},h=0;h<f.length;h++){var T=f[h];T in n&&(g[T]=n[T])}return"parentString"in n&&!p.isHierarchyRoot(n)&&(g.parent=n.parentString),o(g,l,u.i),g}},78176:function(j,V,t){var b=t(3400),P=t(76308),o=t(93972),L=t(69656);V.findEntryWithLevel=function(r,e){var s;return e&&r.eachAfter(function(n){if(V.getPtId(n)===e)return s=n.copy()}),s||r},V.findEntryWithChild=function(r,e){var s;return r.eachAfter(function(n){for(var l=n.children||[],f=0;f<l.length;f++){var u=l[f];if(V.getPtId(u)===e)return s=n.copy()}}),s||r},V.isEntry=function(r){return!r.parent},V.isLeaf=function(r){return!r.children},V.getPtId=function(r){return r.data.data.id},V.getPtLabel=function(r){return r.data.data.label},V.getValue=function(r){return r.value},V.isHierarchyRoot=function(r){return p(r)===""},V.setSliceCursor=function(r,e,s){var n=s.isTransitioning;if(!n){var l=r.datum();n=s.hideOnRoot&&V.isHierarchyRoot(l)||s.hideOnLeaves&&V.isLeaf(l)}o(r,n?null:"pointer")};function A(r,e,s){return{color:V.getOutsideTextFontKey("color",r,e,s),family:V.getOutsideTextFontKey("family",r,e,s),size:V.getOutsideTextFontKey("size",r,e,s),weight:V.getOutsideTextFontKey("weight",r,e,s),style:V.getOutsideTextFontKey("style",r,e,s),variant:V.getOutsideTextFontKey("variant",r,e,s),textcase:V.getOutsideTextFontKey("textcase",r,e,s),lineposition:V.getOutsideTextFontKey("lineposition",r,e,s),shadow:V.getOutsideTextFontKey("shadow",r,e,s)}}function v(r,e,s,n){var l=(n||{}).onPathbar,f=e.data.data,u=f.i,g=b.castOption(r,u,(l?"pathbar.textfont":"insidetextfont")+".color");return!g&&r._input.textfont&&(g=b.castOption(r._input,u,"textfont.color")),{color:g||P.contrast(f.color),family:V.getInsideTextFontKey("family",r,e,s,n),size:V.getInsideTextFontKey("size",r,e,s,n),weight:V.getInsideTextFontKey("weight",r,e,s,n),style:V.getInsideTextFontKey("style",r,e,s,n),variant:V.getInsideTextFontKey("variant",r,e,s,n),textcase:V.getInsideTextFontKey("textcase",r,e,s,n),lineposition:V.getInsideTextFontKey("lineposition",r,e,s,n),shadow:V.getInsideTextFontKey("shadow",r,e,s,n)}}V.getInsideTextFontKey=function(r,e,s,n,l){var f=(l||{}).onPathbar,u=f?"pathbar.textfont":"insidetextfont",g=s.data.data.i;return b.castOption(e,g,u+"."+r)||b.castOption(e,g,"textfont."+r)||n.size},V.getOutsideTextFontKey=function(r,e,s,n){var l=s.data.data.i;return b.castOption(e,l,"outsidetextfont."+r)||b.castOption(e,l,"textfont."+r)||n.size},V.isOutsideText=function(r,e){return!r._hasColorscale&&V.isHierarchyRoot(e)},V.determineTextFont=function(r,e,s,n){return V.isOutsideText(r,e)?A(r,e,s):v(r,e,s,n)},V.hasTransition=function(r){return!!(r&&r.duration>0)},V.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},V.isHeader=function(r,e){return!(V.isLeaf(r)||r.depth===e._maxDepth-1)};function p(r){return r.data.data.pid}V.getParent=function(r,e){return V.findEntryWithLevel(r,p(e))},V.listPath=function(r,e){var s=r.parent;if(!s)return[];var n=e?[s.data[e]]:[s];return V.listPath(s,e).concat(n)},V.getPath=function(r){return V.listPath(r,"label").join("/")+"/"},V.formatValue=L.formatPieValue,V.formatPercent=function(r,e){var s=b.formatPercent(r,0);return s==="0%"&&(s=L.formatPiePercent(r,e)),s}},5621:function(j,V,t){j.exports={moduleType:"trace",name:"sunburst",basePlotModule:t(54904),categories:[],animatable:!0,attributes:t(424),layoutAttributes:t(84920),supplyDefaults:t(25244),supplyLayoutDefaults:t(28732),calc:t(3776).calc,crossTraceCalc:t(3776).crossTraceCalc,plot:t(96488).plot,style:t(85676).style,colorbar:t(5528),meta:{}}},84920:function(j){j.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},28732:function(j,V,t){var b=t(3400),P=t(84920);j.exports=function(L,A){function v(p,r){return b.coerce(L,A,P,p,r)}v("sunburstcolorway",A.colorway),v("extendsunburstcolors")}},96488:function(j,V,t){var b=t(33428),P=t(74148),o=t(67756).qy,L=t(43616),A=t(3400),v=t(72736),p=t(82744),r=p.recordMinTextSize,e=p.clearMinTextSize,s=t(37820),n=t(69656).getRotationAngle,l=s.computeTransform,f=s.transformInsideText,u=t(85676).styleOne,g=t(60100).resizeText,h=t(45716),T=t(27328),c=t(78176);V.plot=function(y,S,M,a){var E=y._fullLayout,m=E._sunburstlayer,k,I,O=!M,z=!E.uniformtext.mode&&c.hasTransition(M);if(e("sunburst",E),k=m.selectAll("g.trace.sunburst").data(S,function(F){return F[0].trace.uid}),k.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),k.order(),z){a&&(I=a());var B=b.transition().duration(M.duration).ease(M.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});B.each(function(){m.selectAll("g.trace").each(function(F){i(y,F,this,M)})})}else k.each(function(F){i(y,F,this,M)}),E.uniformtext.mode&&g(y,E._sunburstlayer.selectAll(".trace"),"sunburst");O&&k.exit().remove()};function i(y,S,M,a){var E=y._context.staticPlot,m=y._fullLayout,k=!m.uniformtext.mode&&c.hasTransition(a),I=b.select(M),O=I.selectAll("g.slice"),z=S[0],B=z.trace,F=z.hierarchy,_=c.findEntryWithLevel(F,B.level),N=c.getMaxDepth(B),G=m._size,X=B.domain,$=G.w*(X.x[1]-X.x[0]),et=G.h*(X.y[1]-X.y[0]),ot=.5*Math.min($,et),nt=z.cx=G.l+G.w*(X.x[1]+X.x[0])/2,Z=z.cy=G.t+G.h*(1-X.y[0])-et/2;if(!_)return O.remove();var Q=null,W={};k&&O.each(function(Bt){W[c.getPtId(Bt)]={rpx0:Bt.rpx0,rpx1:Bt.rpx1,x0:Bt.x0,x1:Bt.x1,transform:Bt.transform},!Q&&c.isEntry(Bt)&&(Q=Bt)});var J=d(_).descendants(),it=_.height+1,K=0,H=N;z.hasMultipleRoots&&c.isHierarchyRoot(_)&&(J=J.slice(1),it-=1,K=1,H+=1),J=J.filter(function(Bt){return Bt.y1<=H});var at=n(B.rotation);at&&J.forEach(function(Bt){Bt.x0+=at,Bt.x1+=at});var tt=Math.min(it,N),lt=function(Bt){return(Bt-K)/tt*ot},dt=function(Bt,Gt){return[Bt*Math.cos(Gt),-Bt*Math.sin(Gt)]},mt=function(Bt){return A.pathAnnulus(Bt.rpx0,Bt.rpx1,Bt.x0,Bt.x1,nt,Z)},gt=function(Bt){return nt+w(Bt)[0]*(Bt.transform.rCenter||0)+(Bt.transform.x||0)},Mt=function(Bt){return Z+w(Bt)[1]*(Bt.transform.rCenter||0)+(Bt.transform.y||0)};O=O.data(J,c.getPtId),O.enter().append("g").classed("slice",!0),k?O.exit().transition().each(function(){var Bt=b.select(this),Gt=Bt.select("path.surface");Gt.transition().attrTween("d",function(Wt){var jt=Ct(Wt);return function(ie){return mt(jt(ie))}});var te=Bt.select("g.slicetext");te.attr("opacity",0)}).remove():O.exit().remove(),O.order();var Lt=null;if(k&&Q){var zt=c.getPtId(Q);O.each(function(Bt){Lt===null&&c.getPtId(Bt)===zt&&(Lt=Bt.x1)})}var xt=O;k&&(xt=xt.transition().each("end",function(){var Bt=b.select(this);c.setSliceCursor(Bt,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),xt.each(function(Bt){var Gt=b.select(this),te=A.ensureSingle(Gt,"path","surface",function(pe){pe.style("pointer-events",E?"none":"all")});Bt.rpx0=lt(Bt.y0),Bt.rpx1=lt(Bt.y1),Bt.xmid=(Bt.x0+Bt.x1)/2,Bt.pxmid=dt(Bt.rpx1,Bt.xmid),Bt.midangle=-(Bt.xmid-Math.PI/2),Bt.startangle=-(Bt.x0-Math.PI/2),Bt.stopangle=-(Bt.x1-Math.PI/2),Bt.halfangle=.5*Math.min(A.angleDelta(Bt.x0,Bt.x1)||Math.PI,Math.PI),Bt.ring=1-Bt.rpx0/Bt.rpx1,Bt.rInscribed=x(Bt),k?te.transition().attrTween("d",function(pe){var Te=wt(pe);return function(Qt){return mt(Te(Qt))}}):te.attr("d",mt),Gt.call(h,_,y,S,{eventDataKeys:T.eventDataKeys,transitionTime:T.CLICK_TRANSITION_TIME,transitionEasing:T.CLICK_TRANSITION_EASING}).call(c.setSliceCursor,y,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:y._transitioning}),te.call(u,Bt,B,y);var Wt=A.ensureSingle(Gt,"g","slicetext"),jt=A.ensureSingle(Wt,"text","",function(pe){pe.attr("data-notex",1)}),ie=A.ensureUniformFontSize(y,c.determineTextFont(B,Bt,m.font));jt.text(V.formatSliceLabel(Bt,_,B,S,m)).classed("slicetext",!0).attr("text-anchor","middle").call(L.font,ie).call(v.convertToTspans,y);var ue=L.bBox(jt.node());Bt.transform=f(ue,Bt,z),Bt.transform.targetX=gt(Bt),Bt.transform.targetY=Mt(Bt);var fe=function(pe,Te){var Qt=pe.transform;return l(Qt,Te),Qt.fontSize=ie.size,r(B.type,Qt,m),A.getTextTransform(Qt)};k?jt.transition().attrTween("transform",function(pe){var Te=Rt(pe);return function(Qt){return fe(Te(Qt),ue)}}):jt.attr("transform",fe(Bt,ue))});function Ct(Bt){var Gt=c.getPtId(Bt),te=W[Gt],Wt=W[c.getPtId(_)],jt;if(Wt){var ie=(Bt.x1>Wt.x1?2*Math.PI:0)+at;jt=Bt.rpx1<Wt.rpx1?{x0:Bt.x0,x1:Bt.x1,rpx0:0,rpx1:0}:{x0:ie,x1:ie,rpx0:Bt.rpx0,rpx1:Bt.rpx1}}else{var ue,fe=c.getPtId(Bt.parent);O.each(function(Ot){if(c.getPtId(Ot)===fe)return ue=Ot});var pe=ue.children,Te;pe.forEach(function(Ot,Nt){if(c.getPtId(Ot)===Gt)return Te=Nt});var Qt=pe.length,Pt=o(ue.x0,ue.x1);jt={rpx0:ot,rpx1:ot,x0:Pt(Te/Qt),x1:Pt((Te+1)/Qt)}}return o(te,jt)}function wt(Bt){var Gt=W[c.getPtId(Bt)],te,Wt={x0:Bt.x0,x1:Bt.x1,rpx0:Bt.rpx0,rpx1:Bt.rpx1};if(Gt)te=Gt;else if(Q)if(Bt.parent)if(Lt){var jt=(Bt.x1>Lt?2*Math.PI:0)+at;te={x0:jt,x1:jt}}else te={rpx0:ot,rpx1:ot},A.extendFlat(te,Tt(Bt));else te={rpx0:0,rpx1:0};else te={x0:at,x1:at};return o(te,Wt)}function Rt(Bt){var Gt=W[c.getPtId(Bt)],te,Wt=Bt.transform;if(Gt)te=Gt;else if(te={rpx1:Bt.rpx1,transform:{textPosAngle:Wt.textPosAngle,scale:0,rotate:Wt.rotate,rCenter:Wt.rCenter,x:Wt.x,y:Wt.y}},Q)if(Bt.parent)if(Lt){var jt=Bt.x1>Lt?2*Math.PI:0;te.x0=te.x1=jt}else A.extendFlat(te,Tt(Bt));else te.x0=te.x1=at;else te.x0=te.x1=at;var ie=o(te.transform.textPosAngle,Bt.transform.textPosAngle),ue=o(te.rpx1,Bt.rpx1),fe=o(te.x0,Bt.x0),pe=o(te.x1,Bt.x1),Te=o(te.transform.scale,Wt.scale),Qt=o(te.transform.rotate,Wt.rotate),Pt=Wt.rCenter===0?3:te.transform.rCenter===0?1/3:1,Ot=o(te.transform.rCenter,Wt.rCenter),Nt=function(Ht){return Ot(Math.pow(Ht,Pt))};return function(Ht){var St=ue(Ht),kt=fe(Ht),Ft=pe(Ht),At=Nt(Ht),ft=dt(St,(kt+Ft)/2),pt=ie(Ht),Dt={pxmid:ft,rpx1:St,transform:{textPosAngle:pt,rCenter:At,x:Wt.x,y:Wt.y}};return r(B.type,Wt,m),{transform:{targetX:gt(Dt),targetY:Mt(Dt),scale:Te(Ht),rotate:Qt(Ht),rCenter:At}}}}function Tt(Bt){var Gt=Bt.parent,te=W[c.getPtId(Gt)],Wt={};if(te){var jt=Gt.children,ie=jt.indexOf(Bt),ue=jt.length,fe=o(te.x0,te.x1);Wt.x0=fe(ie/ue),Wt.x1=fe(ie/ue)}else Wt.x0=Wt.x1=0;return Wt}}function d(y){return P.partition().size([2*Math.PI,y.height+1])(y)}V.formatSliceLabel=function(y,S,M,a,E){var m=M.texttemplate,k=M.textinfo;if(!m&&(!k||k==="none"))return"";var I=E.separators,O=a[0],z=y.data.data,B=O.hierarchy,F=c.isHierarchyRoot(y),_=c.getParent(B,y),N=c.getValue(y);if(!m){var G=k.split("+"),X=function(K){return G.indexOf(K)!==-1},$=[],et;if(X("label")&&z.label&&$.push(z.label),z.hasOwnProperty("v")&&X("value")&&$.push(c.formatValue(z.v,I)),!F){X("current path")&&$.push(c.getPath(y.data));var ot=0;X("percent parent")&&ot++,X("percent entry")&&ot++,X("percent root")&&ot++;var nt=ot>1;if(ot){var Z,Q=function(K){et=c.formatPercent(Z,I),nt&&(et+=" of "+K),$.push(et)};X("percent parent")&&!F&&(Z=N/c.getValue(_),Q("parent")),X("percent entry")&&(Z=N/c.getValue(S),Q("entry")),X("percent root")&&(Z=N/c.getValue(B),Q("root"))}}return X("text")&&(et=A.castOption(M,z.i,"text"),A.isValidTextValue(et)&&$.push(et)),$.join("<br>")}var W=A.castOption(M,z.i,"texttemplate");if(!W)return"";var J={};z.label&&(J.label=z.label),z.hasOwnProperty("v")&&(J.value=z.v,J.valueLabel=c.formatValue(z.v,I)),J.currentPath=c.getPath(y.data),F||(J.percentParent=N/c.getValue(_),J.percentParentLabel=c.formatPercent(J.percentParent,I),J.parent=c.getPtLabel(_)),J.percentEntry=N/c.getValue(S),J.percentEntryLabel=c.formatPercent(J.percentEntry,I),J.entry=c.getPtLabel(S),J.percentRoot=N/c.getValue(B),J.percentRootLabel=c.formatPercent(J.percentRoot,I),J.root=c.getPtLabel(B),z.hasOwnProperty("color")&&(J.color=z.color);var it=A.castOption(M,z.i,"text");return(A.isValidTextValue(it)||it==="")&&(J.text=it),J.customdata=A.castOption(M,z.i,"customdata"),A.texttemplateString(W,J,E._d3locale,J,M._meta||{})};function x(y){return y.rpx0===0&&A.isFullCircle([y.x0,y.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(y.halfangle)),y.ring/2))}function w(y){return C(y.rpx1,y.transform.textPosAngle)}function C(y,S){return[y*Math.sin(S),-y*Math.cos(S)]}},85676:function(j,V,t){var b=t(33428),P=t(76308),o=t(3400),L=t(82744).resizeText,A=t(60404);function v(r){var e=r._fullLayout._sunburstlayer.selectAll(".trace");L(r,e,"sunburst"),e.each(function(s){var n=b.select(this),l=s[0],f=l.trace;n.style("opacity",f.opacity),n.selectAll("path.surface").each(function(u){b.select(this).call(p,u,f,r)})})}function p(r,e,s,n){var l=e.data.data,f=!e.children,u=l.i,g=o.castOption(s,u,"marker.line.color")||P.defaultLine,h=o.castOption(s,u,"marker.line.width")||0;r.call(A,e,s,n).style("stroke-width",h).call(P.stroke,g).style("opacity",f?s.leaf.opacity:null)}j.exports={style:v,styleOne:p}},16716:function(j,V,t){var b=t(76308),P=t(49084),o=t(29736).axisHoverFormat,L=t(21776).Ks,A=t(45464),v=t(92880).extendFlat,p=t(67824).overrideAll;function r(n){return{valType:"boolean",dflt:!1}}function e(n){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:b.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:b.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var s=j.exports=p(v({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:L(),xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},P("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:e(),y:e(),z:e()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:v({},P.zauto,{}),zmin:v({},P.zmin,{}),zmax:v({},P.zmax,{})},hoverinfo:v({},A.hoverinfo),showlegend:v({},A.showlegend,{dflt:!1})}),"calc","nested");s.x.editType=s.y.editType=s.z.editType="calc+clearAxisTypes",s.transforms=void 0},56576:function(j,V,t){var b=t(47128);j.exports=function(o,L){L.surfacecolor?b(o,L,{vals:L.surfacecolor,containerStr:"",cLetter:"c"}):b(o,L,{vals:L.z,containerStr:"",cLetter:"c"})}},79164:function(j,V,t){var b=t(67792).gl_surface3d,P=t(67792).ndarray,o=t(67792).ndarray_linear_interpolate.d2,L=t(70448),A=t(11240),v=t(3400).isArrayOrTypedArray,p=t(33040).parseColorScale,r=t(43080),e=t(8932).extractOpts;function s(a,E,m){this.scene=a,this.uid=m,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var n=s.prototype;n.getXat=function(a,E,m,k){var I=v(this.data.x)?v(this.data.x[0])?this.data.x[E][a]:this.data.x[a]:a;return m===void 0?I:k.d2l(I,0,m)},n.getYat=function(a,E,m,k){var I=v(this.data.y)?v(this.data.y[0])?this.data.y[E][a]:this.data.y[E]:E;return m===void 0?I:k.d2l(I,0,m)},n.getZat=function(a,E,m,k){var I=this.data.z[E][a];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[E][a]),m===void 0?I:k.d2l(I,0,m)},n.handlePick=function(a){if(a.object===this.surface){var E=(a.data.index[0]-1)/this.dataScaleX-1,m=(a.data.index[1]-1)/this.dataScaleY-1,k=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(m),this.data._ylength-1),0);a.index=[k,I],a.traceCoordinate=[this.getXat(k,I),this.getYat(k,I),this.getZat(k,I)],a.dataCoordinate=[this.getXat(k,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(k,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(k,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var O=0;O<3;O++){var z=a.dataCoordinate[O];z!=null&&(a.dataCoordinate[O]*=this.scene.dataScale[O])}var B=this.data.hovertext||this.data.text;return v(B)&&B[I]&&B[I][k]!==void 0?a.textLabel=B[I][k]:B?a.textLabel=B:a.textLabel="",a.data.dataCoordinate=a.dataCoordinate.slice(),this.surface.highlight(a.data),this.scene.glplot.spikes.position=a.dataCoordinate,!0}};function l(a){var E=a[0].rgb,m=a[a.length-1].rgb;return E[0]===m[0]&&E[1]===m[1]&&E[2]===m[2]&&E[3]===m[3]}var f=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function u(a,E){if(a<E)return 0;for(var m=0;Math.floor(a%E)===0;)a/=E,m++;return m}function g(a){for(var E=[],m=0;m<f.length;m++){var k=f[m];E.push(u(a,k))}return E}function h(a){for(var E=g(a),m=a,k=0;k<f.length;k++)if(E[k]>0){m=f[k];break}return m}function T(a,E){if(!(a<1||E<1)){for(var m=g(a),k=g(E),I=1,O=0;O<f.length;O++)I*=Math.pow(f[O],Math.max(m[O],k[O]));return I}}function c(a){if(a.length!==0){for(var E=1,m=0;m<a.length;m++)E=T(E,a[m]);return E}}n.calcXnums=function(a){var E,m=[];for(E=1;E<a;E++){var k=this.getXat(E-1,0),I=this.getXat(E,0);I!==k&&k!==void 0&&k!==null&&I!==void 0&&I!==null?m[E-1]=Math.abs(I-k):m[E-1]=0}var O=0;for(E=1;E<a;E++)O+=m[E-1];for(E=1;E<a;E++)m[E-1]===0?m[E-1]=1:m[E-1]=Math.round(O/m[E-1]);return m},n.calcYnums=function(a){var E,m=[];for(E=1;E<a;E++){var k=this.getYat(0,E-1),I=this.getYat(0,E);I!==k&&k!==void 0&&k!==null&&I!==void 0&&I!==null?m[E-1]=Math.abs(I-k):m[E-1]=0}var O=0;for(E=1;E<a;E++)O+=m[E-1];for(E=1;E<a;E++)m[E-1]===0?m[E-1]=1:m[E-1]=Math.round(O/m[E-1]);return m};var i=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],d=i[9],x=i[13];n.estimateScale=function(a,E){for(var m=E===0?this.calcXnums(a):this.calcYnums(a),k=1+c(m);k<d;)k*=2;for(;k>x;)k--,k/=h(k),k++,k<d&&(k=x);var I=Math.round(k/a);return I>1?I:1};function w(a,E,m){var k=m[8]+m[2]*E[0]+m[5]*E[1];return a[0]=(m[6]+m[0]*E[0]+m[3]*E[1])/k,a[1]=(m[7]+m[1]*E[0]+m[4]*E[1])/k,a}function C(a,E,m){return y(a,E,w,m),a}function y(a,E,m,k){for(var I=[0,0],O=a.shape[0],z=a.shape[1],B=0;B<O;B++)for(var F=0;F<z;F++)m(I,[B,F],k),a.set(B,F,o(E,I[0],I[1]));return a}n.refineCoords=function(a){for(var E=this.dataScaleX,m=this.dataScaleY,k=a[0].shape[0],I=a[0].shape[1],O=Math.floor(a[0].shape[0]*E+1)|0,z=Math.floor(a[0].shape[1]*m+1)|0,B=1+k+1,F=1+I+1,_=P(new Float32Array(B*F),[B,F]),N=[1/E,0,0,0,1/m,0,0,0,1],G=0;G<a.length;++G){this.surface.padField(_,a[G]);var X=P(new Float32Array(O*z),[O,z]);C(X,_,N),a[G]=X}};function S(a,E){for(var m=!1,k=0;k<a.length;k++)if(E===a[k]){m=!0;break}m===!1&&a.push(E)}n.setContourLevels=function(){var a=[[],[],[]],E=[!1,!1,!1],m=!1,k,I,O;for(k=0;k<3;++k)if(this.showContour[k]&&(m=!0,this.contourSize[k]>0&&this.contourStart[k]!==null&&this.contourEnd[k]!==null&&this.contourEnd[k]>this.contourStart[k]))for(E[k]=!0,I=this.contourStart[k];I<this.contourEnd[k];I+=this.contourSize[k])O=I*this.scene.dataScale[k],S(a[k],O);if(m){var z=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(z[k]=E[k]?a[k]:this.scene.contourLevels[k]);this.surface.update({levels:z})}},n.update=function(a){var E=this.scene,m=E.fullSceneLayout,k=this.surface,I=p(a),O=E.dataScale,z=a.z[0].length,B=a._ylength,F=E.contourLevels;this.data=a;var _,N,G,X,$=[];for(_=0;_<3;_++)for($[_]=[],N=0;N<z;N++)$[_][N]=[];for(N=0;N<z;N++)for(G=0;G<B;G++)$[0][N][G]=this.getXat(N,G,a.xcalendar,m.xaxis),$[1][N][G]=this.getYat(N,G,a.ycalendar,m.yaxis),$[2][N][G]=this.getZat(N,G,a.zcalendar,m.zaxis);if(a.connectgaps)for(a._emptypoints=A($[2]),L($[2],a._emptypoints),a._interpolatedZ=[],N=0;N<z;N++)for(a._interpolatedZ[N]=[],G=0;G<B;G++)a._interpolatedZ[N][G]=$[2][N][G];for(_=0;_<3;_++)for(N=0;N<z;N++)for(G=0;G<B;G++)X=$[_][N][G],X==null?$[_][N][G]=NaN:X=$[_][N][G]*=O[_];for(_=0;_<3;_++)for(N=0;N<z;N++)for(G=0;G<B;G++)X=$[_][N][G],X!=null&&(this.minValues[_]>X&&(this.minValues[_]=X),this.maxValues[_]<X&&(this.maxValues[_]=X));for(_=0;_<3;_++)this.objectOffset[_]=.5*(this.minValues[_]+this.maxValues[_]);for(_=0;_<3;_++)for(N=0;N<z;N++)for(G=0;G<B;G++)X=$[_][N][G],X!=null&&($[_][N][G]-=this.objectOffset[_]);var et=[P(new Float32Array(z*B),[z,B]),P(new Float32Array(z*B),[z,B]),P(new Float32Array(z*B),[z,B])];for(_=0;_<3;_++)for(N=0;N<z;N++)for(G=0;G<B;G++)et[_].set(N,G,$[_][N][G]);$=[];var ot={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!a.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:a.opacityscale,opacity:a.opacity},nt=e(a);if(ot.intensityBounds=[nt.min,nt.max],a.surfacecolor){var Z=P(new Float32Array(z*B),[z,B]);for(N=0;N<z;N++)for(G=0;G<B;G++)Z.set(N,G,a.surfacecolor[G][N]);et.push(Z)}else ot.intensityBounds[0]*=O[2],ot.intensityBounds[1]*=O[2];(x<et[0].shape[0]||x<et[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(et[0].shape[0],0),this.dataScaleY=this.estimateScale(et[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(et)),a.surfacecolor&&(ot.intensity=et.pop());var Q=[!0,!0,!0],W=["x","y","z"];for(_=0;_<3;++_){var J=a.contours[W[_]];Q[_]=J.highlight,ot.showContour[_]=J.show||J.highlight,ot.showContour[_]&&(ot.contourProject[_]=[J.project.x,J.project.y,J.project.z],J.show?(this.showContour[_]=!0,ot.levels[_]=F[_],k.highlightColor[_]=ot.contourColor[_]=r(J.color),J.usecolormap?k.highlightTint[_]=ot.contourTint[_]=0:k.highlightTint[_]=ot.contourTint[_]=1,ot.contourWidth[_]=J.width,this.contourStart[_]=J.start,this.contourEnd[_]=J.end,this.contourSize[_]=J.size):(this.showContour[_]=!1,this.contourStart[_]=null,this.contourEnd[_]=null,this.contourSize[_]=0),J.highlight&&(ot.dynamicColor[_]=r(J.highlightcolor),ot.dynamicWidth[_]=J.highlightwidth))}l(I)&&(ot.vertexColor=!0),ot.objectOffset=this.objectOffset,ot.coords=et,k.update(ot),k.visible=a.visible,k.enableDynamic=Q,k.enableHighlight=Q,k.snapToData=!0,"lighting"in a&&(k.ambientLight=a.lighting.ambient,k.diffuseLight=a.lighting.diffuse,k.specularLight=a.lighting.specular,k.roughness=a.lighting.roughness,k.fresnel=a.lighting.fresnel),"lightposition"in a&&(k.lightPosition=[a.lightposition.x,a.lightposition.y,a.lightposition.z])},n.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function M(a,E){var m=a.glplot.gl,k=b({gl:m}),I=new s(a,k,E.uid);return k._trace=I,I.update(E),a.glplot.add(k),I}j.exports=M},60192:function(j,V,t){var b=t(24040),P=t(3400),o=t(27260),L=t(16716),A=.1;function v(n,l){for(var f=[],u=32,g=0;g<u;g++){var h=g/(u-1),T=l+(1-l)*(1-Math.pow(Math.sin(n*h*Math.PI),2));f.push([h,Math.max(0,Math.min(1,T))])}return f}function p(n){var l=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var f=0;f<n.length;f++){var u=n[f];if(u.length!==2||+u[0]<l)return!1;l=+u[0]}return!0}function r(n,l,f,u){var g,h;function T(a,E){return P.coerce(n,l,L,a,E)}var c=T("x"),i=T("y"),d=T("z");if(!d||!d.length||c&&c.length<1||i&&i.length<1){l.visible=!1;return}l._xlength=Array.isArray(c)&&P.isArrayOrTypedArray(c[0])?d.length:d[0].length,l._ylength=d.length;var x=b.getComponentMethod("calendars","handleTraceDefaults");x(n,l,["x","y","z"],u),T("text"),T("hovertext"),T("hovertemplate"),T("xhoverformat"),T("yhoverformat"),T("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(a){T(a)});var w=T("surfacecolor"),C=["x","y","z"];for(g=0;g<3;++g){var y="contours."+C[g],S=T(y+".show"),M=T(y+".highlight");if(S||M)for(h=0;h<3;++h)T(y+".project."+C[h]);S&&(T(y+".color"),T(y+".width"),T(y+".usecolormap")),M&&(T(y+".highlightcolor"),T(y+".highlightwidth")),T(y+".start"),T(y+".end"),T(y+".size")}w||(s(n,"zmin","cmin"),s(n,"zmax","cmax"),s(n,"zauto","cauto")),o(n,l,u,T,{prefix:"",cLetter:"c"}),e(n,l,u,T),l._length=null}function e(n,l,f,u){var g=u("opacityscale");g==="max"?l.opacityscale=[[0,A],[1,1]]:g==="min"?l.opacityscale=[[0,1],[1,A]]:g==="extremes"?l.opacityscale=v(1,A):p(g)||(l.opacityscale=void 0)}function s(n,l,f){l in n&&!(f in n)&&(n[f]=n[l])}j.exports={supplyDefaults:r,opacityscaleDefaults:e}},91304:function(j,V,t){j.exports={attributes:t(16716),supplyDefaults:t(60192).supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:t(56576),plot:t(79164),moduleType:"trace",name:"surface",basePlotModule:t(12536),categories:["gl3d","2dMap","showLegend"],meta:{}}},60520:function(j,V,t){var b=t(13916),P=t(92880).extendFlat,o=t(67824).overrideAll,L=t(25376),A=t(86968).u,v=t(29736).descriptionOnlyNumbers,p=j.exports=o({domain:A({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:P({},b.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:P({},L({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:v("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:P({},b.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:P({},L({arrayOk:!0}))}},"calc","from-root");p.transforms=void 0},85852:function(j,V,t){var b=t(84888)._M,P=t(24752),o="table";V.name=o,V.plot=function(L){var A=b(L.calcdata,o)[0];A.length&&P(L,A)},V.clean=function(L,A,v,p){var r=p._has&&p._has(o),e=A._has&&A._has(o);r&&!e&&p._paperdiv.selectAll(".table").remove()}},39312:function(j,V,t){var b=t(71688).wrap;j.exports=function(){return b({})}},23536:function(j){j.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},55992:function(j,V,t){var b=t(23536),P=t(92880).extendFlat,o=t(38248),L=t(38116).isTypedArray,A=t(38116).isArrayOrTypedArray;j.exports=function(g,h){var T=r(h.cells.values),c=function(X){return X.slice(h.header.values.length,X.length)},i=r(h.header.values);i.length&&!i[0].length&&(i[0]=[""],i=r(i));var d=i.concat(c(T).map(function(){return e((i[0]||[""]).length)})),x=h.domain,w=Math.floor(g._fullLayout._size.w*(x.x[1]-x.x[0])),C=Math.floor(g._fullLayout._size.h*(x.y[1]-x.y[0])),y=h.header.values.length?d[0].map(function(){return h.header.height}):[b.emptyHeaderHeight],S=T.length?T[0].map(function(){return h.cells.height}):[],M=y.reduce(p,0),a=C-M,E=a+b.uplift,m=l(S,E),k=l(y,M),I=n(k,[]),O=n(m,I),z={},B=h._fullInput.columnorder;A(B)&&(B=Array.from(B)),B=B.concat(c(T.map(function(X,$){return $})));var F=d.map(function(X,$){var et=A(h.columnwidth)?h.columnwidth[Math.min($,h.columnwidth.length-1)]:h.columnwidth;return o(et)?Number(et):1}),_=F.reduce(p,0);F=F.map(function(X){return X/_*w});var N=Math.max(v(h.header.line.width),v(h.cells.line.width)),G={key:h.uid+g._context.staticPlot,translateX:x.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-x.y[1]),size:g._fullLayout._size,width:w,maxLineWidth:N,height:C,columnOrder:B,groupHeight:C,rowBlocks:O,headerRowBlocks:I,scrollY:0,cells:P({},h.cells,{values:T}),headerCells:P({},h.header,{values:d}),gdColumns:d.map(function(X){return X[0]}),gdColumnsOriginalOrder:d.map(function(X){return X[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:d.map(function(X,$){var et=z[X];z[X]=(et||0)+1;var ot=X+"__"+z[X];return{key:ot,label:X,specIndex:$,xIndex:B[$],xScale:s,x:void 0,calcdata:void 0,columnWidth:F[$]}})};return G.columns.forEach(function(X){X.calcdata=G,X.x=s(X)}),G};function v(u){if(A(u)){for(var g=0,h=0;h<u.length;h++)g=Math.max(g,v(u[h]));return g}return u}function p(u,g){return u+g}function r(u){var g=u.slice(),h=1/0,T=0,c;for(c=0;c<g.length;c++)L(g[c])?g[c]=Array.from(g[c]):A(g[c])||(g[c]=[g[c]]),h=Math.min(h,g[c].length),T=Math.max(T,g[c].length);if(h!==T)for(c=0;c<g.length;c++){var i=T-g[c].length;i&&(g[c]=g[c].concat(e(i)))}return g}function e(u){for(var g=new Array(u),h=0;h<u;h++)g[h]="";return g}function s(u){return u.calcdata.columns.reduce(function(g,h){return h.xIndex<u.xIndex?g+h.columnWidth:g},0)}function n(u,g){var h=Object.keys(u);return h.map(function(T){return P({},u[T],{auxiliaryBlocks:g})})}function l(u,g){for(var h={},T,c=0,i=0,d=f(),x=0,w=0,C=0;C<u.length;C++)T=u[C],d.rows.push({rowIndex:C,rowHeight:T}),i+=T,(i>=g||C===u.length-1)&&(h[c]=d,d.key=w++,d.firstRowIndex=x,d.lastRowIndex=C,d=f(),c+=i,x=C+1,i=0);return h}function f(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},53056:function(j,V,t){var b=t(92880).extendFlat;V.splitToPanels=function(o){var L=[0,0],A=b({},o,{key:"header",type:"header",page:0,prevPages:L,currentRepaint:[null,null],dragHandle:!0,values:o.calcdata.headerCells.values[o.specIndex],rowBlocks:o.calcdata.headerRowBlocks,calcdata:b({},o.calcdata,{cells:o.calcdata.headerCells})}),v=b({},o,{key:"cells1",type:"cells",page:0,prevPages:L,currentRepaint:[null,null],dragHandle:!1,values:o.calcdata.cells.values[o.specIndex],rowBlocks:o.calcdata.rowBlocks}),p=b({},o,{key:"cells2",type:"cells",page:1,prevPages:L,currentRepaint:[null,null],dragHandle:!1,values:o.calcdata.cells.values[o.specIndex],rowBlocks:o.calcdata.rowBlocks});return[v,p,A]},V.splitToCells=function(o){var L=P(o);return(o.values||[]).slice(L[0],L[1]).map(function(A,v){var p=typeof A=="string"&&A.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:v+p,key:L[0]+v,column:o,calcdata:o.calcdata,page:o.page,rowBlocks:o.rowBlocks,value:A}})};function P(o){var L=o.rowBlocks[o.page],A=L?L.rows[0].rowIndex:0,v=L?A+L.rows.length:0;return[A,v]}},53212:function(j,V,t){var b=t(3400),P=t(60520),o=t(86968).Q;function L(A,v){for(var p=A.columnorder||[],r=A.header.values.length,e=p.slice(0,r),s=e.slice().sort(function(f,u){return f-u}),n=e.map(function(f){return s.indexOf(f)}),l=n.length;l<r;l++)n.push(l);v("columnorder",n)}j.exports=function(v,p,r,e){function s(n,l){return b.coerce(v,p,P,n,l)}o(p,e,s),s("columnwidth"),s("header.values"),s("header.format"),s("header.align"),s("header.prefix"),s("header.suffix"),s("header.height"),s("header.line.width"),s("header.line.color"),s("header.fill.color"),b.coerceFont(s,"header.font",e.font),L(p,s),s("cells.values"),s("cells.format"),s("cells.align"),s("cells.prefix"),s("cells.suffix"),s("cells.height"),s("cells.line.width"),s("cells.line.color"),s("cells.fill.color"),b.coerceFont(s,"cells.font",e.font),p._length=null}},41724:function(j,V,t){j.exports={attributes:t(60520),supplyDefaults:t(53212),calc:t(39312),plot:t(24752),moduleType:"trace",name:"table",basePlotModule:t(85852),categories:["noOpacity"],meta:{}}},24752:function(j,V,t){var b=t(23536),P=t(33428),o=t(3400),L=o.numberFormat,A=t(71688),v=t(43616),p=t(72736),r=t(3400).raiseToTop,e=t(3400).strTranslate,s=t(3400).cancelTransition,n=t(55992),l=t(53056),f=t(76308);j.exports=function(at,tt){var lt=!at._context.staticPlot,dt=at._fullLayout._paper.selectAll("."+b.cn.table).data(tt.map(function(Wt){var jt=A.unwrap(Wt),ie=jt.trace;return n(at,ie)}),A.keyFun);dt.exit().remove(),dt.enter().append("g").classed(b.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),dt.attr("width",function(Wt){return Wt.width+Wt.size.l+Wt.size.r}).attr("height",function(Wt){return Wt.height+Wt.size.t+Wt.size.b}).attr("transform",function(Wt){return e(Wt.translateX,Wt.translateY)});var mt=dt.selectAll("."+b.cn.tableControlView).data(A.repeat,A.keyFun),gt=mt.enter().append("g").classed(b.cn.tableControlView,!0).style("box-sizing","content-box");if(lt){var Mt="onwheel"in document?"wheel":"mousewheel";gt.on("mousemove",function(Wt){mt.filter(function(jt){return Wt===jt}).call(c,at)}).on(Mt,function(Wt){if(!Wt.scrollbarState.wheeling){Wt.scrollbarState.wheeling=!0;var jt=Wt.scrollY+P.event.deltaY,ie=X(at,mt,null,jt)(Wt);ie||(P.event.stopPropagation(),P.event.preventDefault()),Wt.scrollbarState.wheeling=!1}}).call(c,at,!0)}mt.attr("transform",function(Wt){return e(Wt.size.l,Wt.size.t)});var Lt=mt.selectAll("."+b.cn.scrollBackground).data(A.repeat,A.keyFun);Lt.enter().append("rect").classed(b.cn.scrollBackground,!0).attr("fill","none"),Lt.attr("width",function(Wt){return Wt.width}).attr("height",function(Wt){return Wt.height}),mt.each(function(Wt){v.setClipUrl(P.select(this),g(at,Wt),at)});var zt=mt.selectAll("."+b.cn.yColumn).data(function(Wt){return Wt.columns},A.keyFun);zt.enter().append("g").classed(b.cn.yColumn,!0),zt.exit().remove(),zt.attr("transform",function(Wt){return e(Wt.x,0)}),lt&&zt.call(P.behavior.drag().origin(function(Wt){var jt=P.select(this);return z(jt,Wt,-b.uplift),r(this),Wt.calcdata.columnDragInProgress=!0,c(mt.filter(function(ie){return Wt.calcdata.key===ie.key}),at),Wt}).on("drag",function(Wt){var jt=P.select(this),ie=function(pe){return(Wt===pe?P.event.x:pe.x)+pe.columnWidth/2};Wt.x=Math.max(-b.overdrag,Math.min(Wt.calcdata.width+b.overdrag-Wt.columnWidth,P.event.x));var ue=T(zt).filter(function(pe){return pe.calcdata.key===Wt.calcdata.key}),fe=ue.sort(function(pe,Te){return ie(pe)-ie(Te)});fe.forEach(function(pe,Te){pe.xIndex=Te,pe.x=Wt===pe?pe.x:pe.xScale(pe)}),zt.filter(function(pe){return Wt!==pe}).transition().ease(b.transitionEase).duration(b.transitionDuration).attr("transform",function(pe){return e(pe.x,0)}),jt.call(s).attr("transform",e(Wt.x,-b.uplift))}).on("dragend",function(Wt){var jt=P.select(this),ie=Wt.calcdata;Wt.x=Wt.xScale(Wt),Wt.calcdata.columnDragInProgress=!1,z(jt,Wt,0),I(at,ie,ie.columns.map(function(ue){return ue.xIndex}))})),zt.each(function(Wt){v.setClipUrl(P.select(this),h(at,Wt),at)});var xt=zt.selectAll("."+b.cn.columnBlock).data(l.splitToPanels,A.keyFun);xt.enter().append("g").classed(b.cn.columnBlock,!0).attr("id",function(Wt){return Wt.key}),xt.style("cursor",function(Wt){return Wt.dragHandle?"ew-resize":Wt.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Ct=xt.filter(F),wt=xt.filter(B);lt&&wt.call(P.behavior.drag().origin(function(Wt){return P.event.stopPropagation(),Wt}).on("drag",X(at,mt,-1)).on("dragend",function(){})),i(at,mt,Ct,xt),i(at,mt,wt,xt);var Rt=mt.selectAll("."+b.cn.scrollAreaClip).data(A.repeat,A.keyFun);Rt.enter().append("clipPath").classed(b.cn.scrollAreaClip,!0).attr("id",function(Wt){return g(at,Wt)});var Tt=Rt.selectAll("."+b.cn.scrollAreaClipRect).data(A.repeat,A.keyFun);Tt.enter().append("rect").classed(b.cn.scrollAreaClipRect,!0).attr("x",-b.overdrag).attr("y",-b.uplift).attr("fill","none"),Tt.attr("width",function(Wt){return Wt.width+2*b.overdrag}).attr("height",function(Wt){return Wt.height+b.uplift});var Bt=zt.selectAll("."+b.cn.columnBoundary).data(A.repeat,A.keyFun);Bt.enter().append("g").classed(b.cn.columnBoundary,!0);var Gt=zt.selectAll("."+b.cn.columnBoundaryClippath).data(A.repeat,A.keyFun);Gt.enter().append("clipPath").classed(b.cn.columnBoundaryClippath,!0),Gt.attr("id",function(Wt){return h(at,Wt)});var te=Gt.selectAll("."+b.cn.columnBoundaryRect).data(A.repeat,A.keyFun);te.enter().append("rect").classed(b.cn.columnBoundaryRect,!0).attr("fill","none"),te.attr("width",function(Wt){return Wt.columnWidth+2*u(Wt)}).attr("height",function(Wt){return Wt.calcdata.height+2*u(Wt)+b.uplift}).attr("x",function(Wt){return-u(Wt)}).attr("y",function(Wt){return-u(Wt)}),G(null,wt,mt)};function u(H){return Math.ceil(H.calcdata.maxLineWidth/2)}function g(H,at){return"clip"+H._fullLayout._uid+"_scrollAreaBottomClip_"+at.key}function h(H,at){return"clip"+H._fullLayout._uid+"_columnBoundaryClippath_"+at.calcdata.key+"_"+at.specIndex}function T(H){return[].concat.apply([],H.map(function(at){return at})).map(function(at){return at.__data__})}function c(H,at,tt){function lt(zt){var xt=zt.rowBlocks;return Q(xt,xt.length-1)+(xt.length?W(xt[xt.length-1],1/0):1)}var dt=H.selectAll("."+b.cn.scrollbarKit).data(A.repeat,A.keyFun);dt.enter().append("g").classed(b.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),dt.each(function(zt){var xt=zt.scrollbarState;xt.totalHeight=lt(zt),xt.scrollableAreaHeight=zt.groupHeight-_(zt),xt.currentlyVisibleHeight=Math.min(xt.totalHeight,xt.scrollableAreaHeight),xt.ratio=xt.currentlyVisibleHeight/xt.totalHeight,xt.barLength=Math.max(xt.ratio*xt.currentlyVisibleHeight,b.goldenRatio*b.scrollbarWidth),xt.barWiggleRoom=xt.currentlyVisibleHeight-xt.barLength,xt.wiggleRoom=Math.max(0,xt.totalHeight-xt.scrollableAreaHeight),xt.topY=xt.barWiggleRoom===0?0:zt.scrollY/xt.wiggleRoom*xt.barWiggleRoom,xt.bottomY=xt.topY+xt.barLength,xt.dragMultiplier=xt.wiggleRoom/xt.barWiggleRoom}).attr("transform",function(zt){var xt=zt.width+b.scrollbarWidth/2+b.scrollbarOffset;return e(xt,_(zt))});var mt=dt.selectAll("."+b.cn.scrollbar).data(A.repeat,A.keyFun);mt.enter().append("g").classed(b.cn.scrollbar,!0);var gt=mt.selectAll("."+b.cn.scrollbarSlider).data(A.repeat,A.keyFun);gt.enter().append("g").classed(b.cn.scrollbarSlider,!0),gt.attr("transform",function(zt){return e(0,zt.scrollbarState.topY||0)});var Mt=gt.selectAll("."+b.cn.scrollbarGlyph).data(A.repeat,A.keyFun);Mt.enter().append("line").classed(b.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",b.scrollbarWidth).attr("stroke-linecap","round").attr("y1",b.scrollbarWidth/2),Mt.attr("y2",function(zt){return zt.scrollbarState.barLength-b.scrollbarWidth/2}).attr("stroke-opacity",function(zt){return zt.columnDragInProgress||!zt.scrollbarState.barWiggleRoom||tt?0:.4}),Mt.transition().delay(0).duration(0),Mt.transition().delay(b.scrollbarHideDelay).duration(b.scrollbarHideDuration).attr("stroke-opacity",0);var Lt=mt.selectAll("."+b.cn.scrollbarCaptureZone).data(A.repeat,A.keyFun);Lt.enter().append("line").classed(b.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",b.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(zt){var xt=P.event.y,Ct=this.getBoundingClientRect(),wt=zt.scrollbarState,Rt=xt-Ct.top,Tt=P.scale.linear().domain([0,wt.scrollableAreaHeight]).range([0,wt.totalHeight]).clamp(!0);wt.topY<=Rt&&Rt<=wt.bottomY||X(at,H,null,Tt(Rt-wt.barLength/2))(zt)}).call(P.behavior.drag().origin(function(zt){return P.event.stopPropagation(),zt.scrollbarState.scrollbarScrollInProgress=!0,zt}).on("drag",X(at,H)).on("dragend",function(){})),Lt.attr("y2",function(zt){return zt.scrollbarState.scrollableAreaHeight}),at._context.staticPlot&&(Mt.remove(),Lt.remove())}function i(H,at,tt,lt){var dt=d(tt),mt=x(dt);S(mt);var gt=w(mt);a(gt);var Mt=y(mt),Lt=C(Mt);M(Lt),E(Lt,at,lt,H),Z(mt)}function d(H){var at=H.selectAll("."+b.cn.columnCells).data(A.repeat,A.keyFun);return at.enter().append("g").classed(b.cn.columnCells,!0),at.exit().remove(),at}function x(H){var at=H.selectAll("."+b.cn.columnCell).data(l.splitToCells,function(tt){return tt.keyWithinBlock});return at.enter().append("g").classed(b.cn.columnCell,!0),at.exit().remove(),at}function w(H){var at=H.selectAll("."+b.cn.cellRect).data(A.repeat,function(tt){return tt.keyWithinBlock});return at.enter().append("rect").classed(b.cn.cellRect,!0),at}function C(H){var at=H.selectAll("."+b.cn.cellText).data(A.repeat,function(tt){return tt.keyWithinBlock});return at.enter().append("text").classed(b.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){P.event.stopPropagation()}),at}function y(H){var at=H.selectAll("."+b.cn.cellTextHolder).data(A.repeat,function(tt){return tt.keyWithinBlock});return at.enter().append("g").classed(b.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),at}function S(H){H.each(function(at,tt){var lt=at.calcdata.cells.font,dt=at.column.specIndex,mt={size:O(lt.size,dt,tt),color:O(lt.color,dt,tt),family:O(lt.family,dt,tt),weight:O(lt.weight,dt,tt),style:O(lt.style,dt,tt),variant:O(lt.variant,dt,tt),textcase:O(lt.textcase,dt,tt),lineposition:O(lt.lineposition,dt,tt),shadow:O(lt.shadow,dt,tt)};at.rowNumber=at.key,at.align=O(at.calcdata.cells.align,dt,tt),at.cellBorderWidth=O(at.calcdata.cells.line.width,dt,tt),at.font=mt})}function M(H){H.each(function(at){v.font(P.select(this),at.font)})}function a(H){H.attr("width",function(at){return at.column.columnWidth}).attr("stroke-width",function(at){return at.cellBorderWidth}).each(function(at){var tt=P.select(this);f.stroke(tt,O(at.calcdata.cells.line.color,at.column.specIndex,at.rowNumber)),f.fill(tt,O(at.calcdata.cells.fill.color,at.column.specIndex,at.rowNumber))})}function E(H,at,tt,lt){H.text(function(dt){var mt=dt.column.specIndex,gt=dt.rowNumber,Mt=dt.value,Lt=typeof Mt=="string",zt=Lt&&Mt.match(/<br>/i),xt=!Lt||zt;dt.mayHaveMarkup=Lt&&Mt.match(/[<&>]/);var Ct=m(Mt);dt.latex=Ct;var wt=Ct?"":O(dt.calcdata.cells.prefix,mt,gt)||"",Rt=Ct?"":O(dt.calcdata.cells.suffix,mt,gt)||"",Tt=Ct?null:O(dt.calcdata.cells.format,mt,gt)||null,Bt=wt+(Tt?L(Tt)(dt.value):dt.value)+Rt,Gt;dt.wrappingNeeded=!dt.wrapped&&!xt&&!Ct&&(Gt=k(Bt)),dt.cellHeightMayIncrease=zt||Ct||dt.mayHaveMarkup||(Gt===void 0?k(Bt):Gt),dt.needsConvertToTspans=dt.mayHaveMarkup||dt.wrappingNeeded||dt.latex;var te;if(dt.wrappingNeeded){var Wt=b.wrapSplitCharacter===" "?Bt.replace(/<a href=/ig,"<a_href="):Bt,jt=Wt.split(b.wrapSplitCharacter),ie=b.wrapSplitCharacter===" "?jt.map(function(ue){return ue.replace(/<a_href=/ig,"<a href=")}):jt;dt.fragments=ie.map(function(ue){return{text:ue,width:null}}),dt.fragments.push({fragment:b.wrapSpacer,width:null}),te=ie.join(b.lineBreaker)+b.lineBreaker+b.wrapSpacer}else delete dt.fragments,te=Bt;return te}).attr("dy",function(dt){return dt.needsConvertToTspans?0:"0.75em"}).each(function(dt){var mt=this,gt=P.select(mt),Mt=dt.wrappingNeeded?et:ot;dt.needsConvertToTspans?p.convertToTspans(gt,lt,Mt(tt,mt,at,lt,dt)):P.select(mt.parentNode).attr("transform",function(Lt){return e(nt(Lt),b.cellPad)}).attr("text-anchor",function(Lt){return{left:"start",center:"middle",right:"end"}[Lt.align]})})}function m(H){return typeof H=="string"&&H.match(b.latexCheck)}function k(H){return H.indexOf(b.wrapSplitCharacter)!==-1}function I(H,at,tt){var lt=at.gdColumnsOriginalOrder;at.gdColumns.sort(function(dt,mt){return tt[lt.indexOf(dt)]-tt[lt.indexOf(mt)]}),at.columnorder=tt,H.emit("plotly_restyle")}function O(H,at,tt){if(o.isArrayOrTypedArray(H)){var lt=H[Math.min(at,H.length-1)];return o.isArrayOrTypedArray(lt)?lt[Math.min(tt,lt.length-1)]:lt}else return H}function z(H,at,tt){H.transition().ease(b.releaseTransitionEase).duration(b.releaseTransitionDuration).attr("transform",e(at.x,tt))}function B(H){return H.type==="cells"}function F(H){return H.type==="header"}function _(H){var at=H.rowBlocks.length?H.rowBlocks[0].auxiliaryBlocks:[];return at.reduce(function(tt,lt){return tt+W(lt,1/0)},0)}function N(H,at,tt){for(var lt=[],dt=0,mt=0;mt<H.length;mt++){for(var gt=H[mt],Mt=gt.rows,Lt=0,zt=0;zt<Mt.length;zt++)Lt+=Mt[zt].rowHeight;gt.allRowsHeight=Lt;var xt=dt+Lt,Ct=at,wt=Ct+tt;Ct<xt&&wt>dt&&lt.push(mt),dt+=Lt}return lt}function G(H,at,tt){var lt=T(at)[0];if(lt!==void 0){var dt=lt.rowBlocks,mt=lt.calcdata,gt=Q(dt,dt.length),Mt=lt.calcdata.groupHeight-_(lt),Lt=mt.scrollY=Math.max(0,Math.min(gt-Mt,mt.scrollY)),zt=N(dt,Lt,Mt);zt.length===1&&(zt[0]===dt.length-1?zt.unshift(zt[0]-1):zt.push(zt[0]+1)),zt[0]%2&&zt.reverse(),at.each(function(xt,Ct){xt.page=zt[Ct],xt.scrollY=Lt}),at.attr("transform",function(xt){var Ct=Q(xt.rowBlocks,xt.page)-xt.scrollY;return e(0,Ct)}),H&&($(H,tt,at,zt,lt.prevPages,lt,0),$(H,tt,at,zt,lt.prevPages,lt,1),c(tt,H))}}function X(H,at,tt,lt){return function(mt){var gt=mt.calcdata?mt.calcdata:mt,Mt=at.filter(function(Ct){return gt.key===Ct.key}),Lt=tt||gt.scrollbarState.dragMultiplier,zt=gt.scrollY;gt.scrollY=lt===void 0?gt.scrollY+Lt*P.event.dy:lt;var xt=Mt.selectAll("."+b.cn.yColumn).selectAll("."+b.cn.columnBlock).filter(B);return G(H,xt,Mt),gt.scrollY===zt}}function $(H,at,tt,lt,dt,mt,gt){var Mt=lt[gt]!==dt[gt];Mt&&(clearTimeout(mt.currentRepaint[gt]),mt.currentRepaint[gt]=setTimeout(function(){var Lt=tt.filter(function(zt,xt){return xt===gt&&lt[xt]!==dt[xt]});i(H,at,Lt,tt),dt[gt]=lt[gt]}))}function et(H,at,tt,lt){return function(){var mt=P.select(at.parentNode);mt.each(function(gt){var Mt=gt.fragments;mt.selectAll("tspan.line").each(function(Bt,Gt){Mt[Gt].width=this.getComputedTextLength()});var Lt=Mt[Mt.length-1].width,zt=Mt.slice(0,-1),xt=[],Ct,wt,Rt=0,Tt=gt.column.columnWidth-2*b.cellPad;for(gt.value="";zt.length;)Ct=zt.shift(),wt=Ct.width+Lt,Rt+wt>Tt&&(gt.value+=xt.join(b.wrapSpacer)+b.lineBreaker,xt=[],Rt=0),xt.push(Ct.text),Rt+=wt;Rt&&(gt.value+=xt.join(b.wrapSpacer)),gt.wrapped=!0}),mt.selectAll("tspan.line").remove(),E(mt.select("."+b.cn.cellText),tt,H,lt),P.select(at.parentNode.parentNode).call(Z)}}function ot(H,at,tt,lt,dt){return function(){if(!dt.settledY){var gt=P.select(at.parentNode),Mt=it(dt),Lt=dt.key-Mt.firstRowIndex,zt=Mt.rows[Lt].rowHeight,xt=dt.cellHeightMayIncrease?at.parentNode.getBoundingClientRect().height+2*b.cellPad:zt,Ct=Math.max(xt,zt),wt=Ct-Mt.rows[Lt].rowHeight;wt&&(Mt.rows[Lt].rowHeight=Ct,H.selectAll("."+b.cn.columnCell).call(Z),G(null,H.filter(B),0),c(tt,lt,!0)),gt.attr("transform",function(){var Rt=this,Tt=Rt.parentNode,Bt=Tt.getBoundingClientRect(),Gt=P.select(Rt.parentNode).select("."+b.cn.cellRect).node().getBoundingClientRect(),te=Rt.transform.baseVal.consolidate(),Wt=Gt.top-Bt.top+(te?te.matrix.f:b.cellPad);return e(nt(dt,P.select(Rt.parentNode).select("."+b.cn.cellTextHolder).node().getBoundingClientRect().width),Wt)}),dt.settledY=!0}}}function nt(H,at){switch(H.align){case"left":return b.cellPad;case"right":return H.column.columnWidth-(at||0)-b.cellPad;case"center":return(H.column.columnWidth-(at||0))/2;default:return b.cellPad}}function Z(H){H.attr("transform",function(at){var tt=at.rowBlocks[0].auxiliaryBlocks.reduce(function(gt,Mt){return gt+W(Mt,1/0)},0),lt=it(at),dt=W(lt,at.key),mt=dt+tt;return e(0,mt)}).selectAll("."+b.cn.cellRect).attr("height",function(at){return K(it(at),at.key).rowHeight})}function Q(H,at){for(var tt=0,lt=at-1;lt>=0;lt--)tt+=J(H[lt]);return tt}function W(H,at){for(var tt=0,lt=0;lt<H.rows.length&&H.rows[lt].rowIndex<at;lt++)tt+=H.rows[lt].rowHeight;return tt}function J(H){var at=H.allRowsHeight;if(at!==void 0)return at;for(var tt=0,lt=0;lt<H.rows.length;lt++)tt+=H.rows[lt].rowHeight;return H.allRowsHeight=tt,tt}function it(H){return H.rowBlocks[H.page]}function K(H,at){return H.rows[at-H.firstRowIndex]}},40516:function(j,V,t){var b=t(21776).Ks,P=t(21776).Gw,o=t(49084),L=t(86968).u,A=t(74996),v=t(424),p=t(32984),r=t(92880).extendFlat,e=t(98192).c;j.exports={labels:v.labels,parents:v.parents,values:v.values,branchvalues:v.branchvalues,count:v.count,level:v.level,maxdepth:v.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:v.marker.colors,pattern:e,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:v.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},o("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},A.textfont,{}),editType:"calc"},text:A.text,textinfo:v.textinfo,texttemplate:P({editType:"plot"},{keys:p.eventDataKeys.concat(["label","value"])}),hovertext:A.hovertext,hoverinfo:v.hoverinfo,hovertemplate:b({},{keys:p.eventDataKeys}),textfont:A.textfont,insidetextfont:A.insidetextfont,outsidetextfont:r({},A.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:A.sort,root:v.root,domain:L({name:"treemap",trace:!0,editType:"calc"})}},79516:function(j,V,t){var b=t(7316);V.name="treemap",V.plot=function(P,o,L,A){b.plotBasePlot(V.name,P,o,L,A)},V.clean=function(P,o,L,A){b.cleanBasePlot(V.name,P,o,L,A)}},97840:function(j,V,t){var b=t(3776);V.r=function(P,o){return b.calc(P,o)},V.q=function(P){return b._runCrossTraceCalc("treemap",P)}},32984:function(j){j.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},34092:function(j,V,t){var b=t(3400),P=t(40516),o=t(76308),L=t(86968).Q,A=t(31508).handleText,v=t(78048).TEXTPAD,p=t(74174).handleMarkerDefaults,r=t(8932),e=r.hasColorscale,s=r.handleDefaults;j.exports=function(l,f,u,g){function h(a,E){return b.coerce(l,f,P,a,E)}var T=h("labels"),c=h("parents");if(!T||!T.length||!c||!c.length){f.visible=!1;return}var i=h("values");i&&i.length?h("branchvalues"):h("count"),h("level"),h("maxdepth");var d=h("tiling.packing");d==="squarify"&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var x=h("text");h("texttemplate"),f.texttemplate||h("textinfo",b.isArrayOrTypedArray(x)?"text+label":"label"),h("hovertext"),h("hovertemplate");var w=h("pathbar.visible"),C="auto";A(l,f,g,h,C,{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=f.textposition.indexOf("bottom")!==-1;p(l,f,g,h);var S=f._hasColorscale=e(l,"marker","colors")||(l.marker||{}).coloraxis;S?s(l,f,g,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(f.marker.colors||[]).length);var M=f.textfont.size*2;h("marker.pad.t",y?M/4:M),h("marker.pad.l",M/4),h("marker.pad.r",M/4),h("marker.pad.b",y?M:M/4),h("marker.cornerradius"),f._hovered={marker:{line:{width:2,color:o.contrast(g.paper_bgcolor)}}},w&&(h("pathbar.thickness",f.pathbar.textfont.size+2*v),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),L(f,g,h),f._length=null}},95808:function(j,V,t){var b=t(33428),P=t(78176),o=t(82744),L=o.clearMinTextSize,A=t(60100).resizeText,v=t(52960);j.exports=function(r,e,s,n,l){var f=l.type,u=l.drawDescendants,g=r._fullLayout,h=g["_"+f+"layer"],T,c,i=!s;if(L(f,g),T=h.selectAll("g.trace."+f).data(e,function(x){return x[0].trace.uid}),T.enter().append("g").classed("trace",!0).classed(f,!0),T.order(),!g.uniformtext.mode&&P.hasTransition(s)){n&&(c=n());var d=b.transition().duration(s.duration).ease(s.easing).each("end",function(){c&&c()}).each("interrupt",function(){c&&c()});d.each(function(){h.selectAll("g.trace").each(function(x){v(r,x,this,s,u)})})}else T.each(function(x){v(r,x,this,s,u)}),g.uniformtext.mode&&A(r,h.selectAll(".trace"),f);i&&T.exit().remove()}},27336:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(72736),A=t(13832),v=t(66192).styleOne,p=t(32984),r=t(78176),e=t(45716),s=!0;j.exports=function(l,f,u,g,h){var T=h.barDifY,c=h.width,i=h.height,d=h.viewX,x=h.viewY,w=h.pathSlice,C=h.toMoveInsideSlice,y=h.strTransform,S=h.hasTransition,M=h.handleSlicesExit,a=h.makeUpdateSliceInterpolator,E=h.makeUpdateTextInterpolator,m={},k=l._context.staticPlot,I=l._fullLayout,O=f[0],z=O.trace,B=O.hierarchy,F=c/z._entryDepth,_=r.listPath(u.data,"id"),N=A(B.copy(),[c,i],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();N=N.filter(function(X){var $=_.indexOf(X.data.id);return $===-1?!1:(X.x0=F*$,X.x1=F*($+1),X.y0=T,X.y1=T+i,X.onPathbar=!0,!0)}),N.reverse(),g=g.data(N,r.getPtId),g.enter().append("g").classed("pathbar",!0),M(g,s,m,[c,i],w),g.order();var G=g;S&&(G=G.transition().each("end",function(){var X=b.select(this);r.setSliceCursor(X,l,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(X){X._x0=d(X.x0),X._x1=d(X.x1),X._y0=x(X.y0),X._y1=x(X.y1),X._hoverX=d(X.x1-Math.min(c,i)/2),X._hoverY=x(X.y1-i/2);var $=b.select(this),et=P.ensureSingle($,"path","surface",function(Q){Q.style("pointer-events",k?"none":"all")});S?et.transition().attrTween("d",function(Q){var W=a(Q,s,m,[c,i]);return function(J){return w(W(J))}}):et.attr("d",w),$.call(e,u,l,f,{styleOne:v,eventDataKeys:p.eventDataKeys,transitionTime:p.CLICK_TRANSITION_TIME,transitionEasing:p.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,l,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:l._transitioning}),et.call(v,X,z,l,{hovered:!1}),X._text=(r.getPtLabel(X)||"").split("<br>").join(" ")||"";var ot=P.ensureSingle($,"g","slicetext"),nt=P.ensureSingle(ot,"text","",function(Q){Q.attr("data-notex",1)}),Z=P.ensureUniformFontSize(l,r.determineTextFont(z,X,I.font,{onPathbar:!0}));nt.text(X._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(o.font,Z).call(L.convertToTspans,l),X.textBB=o.bBox(nt.node()),X.transform=C(X,{fontSize:Z.size,onPathbar:!0}),X.transform.fontSize=Z.size,S?nt.transition().attrTween("transform",function(Q){var W=E(Q,s,m,[c,i]);return function(J){return y(W(J))}}):nt.attr("transform",y(X))})}},76477:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(72736),A=t(13832),v=t(66192).styleOne,p=t(32984),r=t(78176),e=t(45716),s=t(96488).formatSliceLabel,n=!1;j.exports=function(f,u,g,h,T){var c=T.width,i=T.height,d=T.viewX,x=T.viewY,w=T.pathSlice,C=T.toMoveInsideSlice,y=T.strTransform,S=T.hasTransition,M=T.handleSlicesExit,a=T.makeUpdateSliceInterpolator,E=T.makeUpdateTextInterpolator,m=T.prevEntry,k={},I=f._context.staticPlot,O=f._fullLayout,z=u[0],B=z.trace,F=B.textposition.indexOf("left")!==-1,_=B.textposition.indexOf("right")!==-1,N=B.textposition.indexOf("bottom")!==-1,G=!N&&!B.marker.pad.t||N&&!B.marker.pad.b,X=A(g,[c,i],{packing:B.tiling.packing,squarifyratio:B.tiling.squarifyratio,flipX:B.tiling.flip.indexOf("x")>-1,flipY:B.tiling.flip.indexOf("y")>-1,pad:{inner:B.tiling.pad,top:B.marker.pad.t,left:B.marker.pad.l,right:B.marker.pad.r,bottom:B.marker.pad.b}}),$=X.descendants(),et=1/0,ot=-1/0;$.forEach(function(J){var it=J.depth;it>=B._maxDepth?(J.x0=J.x1=(J.x0+J.x1)/2,J.y0=J.y1=(J.y0+J.y1)/2):(et=Math.min(et,it),ot=Math.max(ot,it))}),h=h.data($,r.getPtId),B._maxVisibleLayers=isFinite(ot)?ot-et+1:0,h.enter().append("g").classed("slice",!0),M(h,n,k,[c,i],w),h.order();var nt=null;if(S&&m){var Z=r.getPtId(m);h.each(function(J){nt===null&&r.getPtId(J)===Z&&(nt={x0:J.x0,x1:J.x1,y0:J.y0,y1:J.y1})})}var Q=function(){return nt||{x0:0,x1:c,y0:0,y1:i}},W=h;return S&&(W=W.transition().each("end",function(){var J=b.select(this);r.setSliceCursor(J,f,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),W.each(function(J){var it=r.isHeader(J,B);J._x0=d(J.x0),J._x1=d(J.x1),J._y0=x(J.y0),J._y1=x(J.y1),J._hoverX=d(J.x1-B.marker.pad.r),J._hoverY=x(N?J.y1-B.marker.pad.b/2:J.y0+B.marker.pad.t/2);var K=b.select(this),H=P.ensureSingle(K,"path","surface",function(gt){gt.style("pointer-events",I?"none":"all")});S?H.transition().attrTween("d",function(gt){var Mt=a(gt,n,Q(),[c,i]);return function(Lt){return w(Mt(Lt))}}):H.attr("d",w),K.call(e,g,f,u,{styleOne:v,eventDataKeys:p.eventDataKeys,transitionTime:p.CLICK_TRANSITION_TIME,transitionEasing:p.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,f,{isTransitioning:f._transitioning}),H.call(v,J,B,f,{hovered:!1}),J.x0===J.x1||J.y0===J.y1?J._text="":it?J._text=G?"":r.getPtLabel(J)||"":J._text=s(J,g,B,u,O)||"";var at=P.ensureSingle(K,"g","slicetext"),tt=P.ensureSingle(at,"text","",function(gt){gt.attr("data-notex",1)}),lt=P.ensureUniformFontSize(f,r.determineTextFont(B,J,O.font)),dt=J._text||" ",mt=it&&dt.indexOf("<br>")===-1;tt.text(dt).classed("slicetext",!0).attr("text-anchor",_?"end":F||mt?"start":"middle").call(o.font,lt).call(L.convertToTspans,f),J.textBB=o.bBox(tt.node()),J.transform=C(J,{fontSize:lt.size,isHeader:it}),J.transform.fontSize=lt.size,S?tt.transition().attrTween("transform",function(gt){var Mt=E(gt,n,Q(),[c,i]);return function(Lt){return y(Mt(Lt))}}):tt.attr("transform",y(J))}),nt}},83024:function(j){j.exports=function V(t,b,P){var o;P.swapXY&&(o=t.x0,t.x0=t.y0,t.y0=o,o=t.x1,t.x1=t.y1,t.y1=o),P.flipX&&(o=t.x0,t.x0=b[0]-t.x1,t.x1=b[0]-o),P.flipY&&(o=t.y0,t.y0=b[1]-t.y1,t.y1=b[1]-o);var L=t.children;if(L)for(var A=0;A<L.length;A++)V(L[A],b,P)}},31991:function(j,V,t){j.exports={moduleType:"trace",name:"treemap",basePlotModule:t(79516),categories:[],animatable:!0,attributes:t(40516),layoutAttributes:t(45392),supplyDefaults:t(34092),supplyLayoutDefaults:t(77480),calc:t(97840).r,crossTraceCalc:t(97840).q,plot:t(53264),style:t(66192).style,colorbar:t(5528),meta:{}}},45392:function(j){j.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},77480:function(j,V,t){var b=t(3400),P=t(45392);j.exports=function(L,A){function v(p,r){return b.coerce(L,A,P,p,r)}v("treemapcolorway",A.colorway),v("extendtreemapcolors")}},13832:function(j,V,t){var b=t(74148),P=t(83024);j.exports=function(A,v,p){var r=p.flipX,e=p.flipY,s=p.packing==="dice-slice",n=p.pad[e?"bottom":"top"],l=p.pad[r?"right":"left"],f=p.pad[r?"left":"right"],u=p.pad[e?"top":"bottom"],g;s&&(g=l,l=n,n=g,g=f,f=u,u=g);var h=b.treemap().tile(o(p.packing,p.squarifyratio)).paddingInner(p.pad.inner).paddingLeft(l).paddingRight(f).paddingTop(n).paddingBottom(u).size(s?[v[1],v[0]]:v)(A);return(s||r||e)&&P(h,v,{swapXY:s,flipX:r,flipY:e}),h};function o(L,A){switch(L){case"squarify":return b.treemapSquarify.ratio(A);case"binary":return b.treemapBinary;case"dice":return b.treemapDice;case"slice":return b.treemapSlice;default:return b.treemapSliceDice}}},53264:function(j,V,t){var b=t(95808),P=t(76477);j.exports=function(L,A,v,p){return b(L,A,v,p,{type:"treemap",drawDescendants:P})}},52960:function(j,V,t){var b=t(33428),P=t(67756).qy,o=t(78176),L=t(3400),A=t(78048).TEXTPAD,v=t(98184),p=v.toMoveInsideBar,r=t(82744),e=r.recordMinTextSize,s=t(32984),n=t(27336);function l(f){return o.isHierarchyRoot(f)?"":o.getPtId(f)}j.exports=function(u,g,h,T,c){var i=u._fullLayout,d=g[0],x=d.trace,w=x.type,C=w==="icicle",y=d.hierarchy,S=o.findEntryWithLevel(y,x.level),M=b.select(h),a=M.selectAll("g.pathbar"),E=M.selectAll("g.slice");if(!S){a.remove(),E.remove();return}var m=o.isHierarchyRoot(S),k=!i.uniformtext.mode&&o.hasTransition(T),I=o.getMaxDepth(x),O=function(Pt){return Pt.data.depth-S.data.depth<I},z=i._size,B=x.domain,F=z.w*(B.x[1]-B.x[0]),_=z.h*(B.y[1]-B.y[0]),N=F,G=x.pathbar.thickness,X=x.marker.line.width+s.gapWithPathbar,$=x.pathbar.visible?x.pathbar.side.indexOf("bottom")>-1?_+X:-(G+X):0,et={x0:N,x1:N,y0:$,y1:$+G},ot=function(Pt,Ot,Nt){var Ht=x.tiling.pad,St=function(ft){return ft-Ht<=Ot.x0},kt=function(ft){return ft+Ht>=Ot.x1},Ft=function(ft){return ft-Ht<=Ot.y0},At=function(ft){return ft+Ht>=Ot.y1};return Pt.x0===Ot.x0&&Pt.x1===Ot.x1&&Pt.y0===Ot.y0&&Pt.y1===Ot.y1?{x0:Pt.x0,x1:Pt.x1,y0:Pt.y0,y1:Pt.y1}:{x0:St(Pt.x0-Ht)?0:kt(Pt.x0-Ht)?Nt[0]:Pt.x0,x1:St(Pt.x1+Ht)?0:kt(Pt.x1+Ht)?Nt[0]:Pt.x1,y0:Ft(Pt.y0-Ht)?0:At(Pt.y0-Ht)?Nt[1]:Pt.y0,y1:Ft(Pt.y1+Ht)?0:At(Pt.y1+Ht)?Nt[1]:Pt.y1}},nt=null,Z={},Q={},W=null,J=function(Pt,Ot){return Ot?Z[l(Pt)]:Q[l(Pt)]},it=function(Pt,Ot,Nt,Ht){if(Ot)return Z[l(y)]||et;var St=Q[x.level]||Nt;return O(Pt)?ot(Pt,St,Ht):{}};d.hasMultipleRoots&&m&&I++,x._maxDepth=I,x._backgroundColor=i.paper_bgcolor,x._entryDepth=S.data.depth,x._atRootLevel=m;var K=-F/2+z.l+z.w*(B.x[1]+B.x[0])/2,H=-_/2+z.t+z.h*(1-(B.y[1]+B.y[0])/2),at=function(Pt){return K+Pt},tt=function(Pt){return H+Pt},lt=tt(0),dt=at(0),mt=function(Pt){return dt+Pt},gt=function(Pt){return lt+Pt};function Mt(Pt,Ot){return Pt+","+Ot}var Lt=mt(0),zt=function(Pt){Pt.x=Math.max(Lt,Pt.x)},xt=x.pathbar.edgeshape,Ct=function(Pt){var Ot=mt(Math.max(Math.min(Pt.x0,Pt.x0),0)),Nt=mt(Math.min(Math.max(Pt.x1,Pt.x1),N)),Ht=gt(Pt.y0),St=gt(Pt.y1),kt=G/2,Ft={},At={};Ft.x=Ot,At.x=Nt,Ft.y=At.y=(Ht+St)/2;var ft={x:Ot,y:Ht},pt={x:Nt,y:Ht},Dt={x:Nt,y:St},Ut={x:Ot,y:St};return xt===">"?(ft.x-=kt,pt.x-=kt,Dt.x-=kt,Ut.x-=kt):xt==="/"?(Dt.x-=kt,Ut.x-=kt,Ft.x-=kt/2,At.x-=kt/2):xt==="\\"?(ft.x-=kt,pt.x-=kt,Ft.x-=kt/2,At.x-=kt/2):xt==="<"&&(Ft.x-=kt,At.x-=kt),zt(ft),zt(Ut),zt(Ft),zt(pt),zt(Dt),zt(At),"M"+Mt(ft.x,ft.y)+"L"+Mt(pt.x,pt.y)+"L"+Mt(At.x,At.y)+"L"+Mt(Dt.x,Dt.y)+"L"+Mt(Ut.x,Ut.y)+"L"+Mt(Ft.x,Ft.y)+"Z"},wt=x[C?"tiling":"marker"].pad,Rt=function(Pt){return x.textposition.indexOf(Pt)!==-1},Tt=Rt("top"),Bt=Rt("left"),Gt=Rt("right"),te=Rt("bottom"),Wt=function(Pt){var Ot=at(Pt.x0),Nt=at(Pt.x1),Ht=tt(Pt.y0),St=tt(Pt.y1),kt=Nt-Ot,Ft=St-Ht;if(!kt||!Ft)return"";var At=x.marker.cornerradius||0,ft=Math.min(At,kt/2,Ft/2);ft&&Pt.data&&Pt.data.data&&Pt.data.data.label&&(Tt&&(ft=Math.min(ft,wt.t)),Bt&&(ft=Math.min(ft,wt.l)),Gt&&(ft=Math.min(ft,wt.r)),te&&(ft=Math.min(ft,wt.b)));var pt=function(Dt,Ut){return ft?"a"+Mt(ft,ft)+" 0 0 1 "+Mt(Dt,Ut):""};return"M"+Mt(Ot,Ht+ft)+pt(ft,-ft)+"L"+Mt(Nt-ft,Ht)+pt(ft,ft)+"L"+Mt(Nt,St-ft)+pt(-ft,ft)+"L"+Mt(Ot+ft,St)+pt(-ft,-ft)+"Z"},jt=function(Pt,Ot){var Nt=Pt.x0,Ht=Pt.x1,St=Pt.y0,kt=Pt.y1,Ft=Pt.textBB,At=Tt||Ot.isHeader&&!te,ft=At?"start":te?"end":"middle",pt=Rt("right"),Dt=Rt("left")||Ot.onPathbar,Ut=Dt?-1:pt?1:0;if(Ot.isHeader){if(Nt+=(C?wt:wt.l)-A,Ht-=(C?wt:wt.r)-A,Nt>=Ht){var $t=(Nt+Ht)/2;Nt=$t,Ht=$t}var re;te?(re=kt-(C?wt:wt.b),St<re&&re<kt&&(St=re)):(re=St+(C?wt:wt.t),St<re&&re<kt&&(kt=re))}var Be=p(Nt,Ht,St,kt,Ft,{isHorizontal:!1,constrained:!0,angle:0,anchor:ft,leftToRight:Ut});return Be.fontSize=Ot.fontSize,Be.targetX=at(Be.targetX),Be.targetY=tt(Be.targetY),isNaN(Be.targetX)||isNaN(Be.targetY)?{}:(Nt!==Ht&&St!==kt&&e(x.type,Be,i),{scale:Be.scale,rotate:Be.rotate,textX:Be.textX,textY:Be.textY,anchorX:Be.anchorX,anchorY:Be.anchorY,targetX:Be.targetX,targetY:Be.targetY})},ie=function(Pt,Ot){for(var Nt,Ht=0,St=Pt;!Nt&&Ht<I;)Ht++,St=St.parent,St?Nt=J(St,Ot):Ht=I;return Nt||{}},ue=function(Pt,Ot,Nt,Ht){var St=J(Pt,Ot),kt;if(Ot)kt=et;else{var Ft=J(S,Ot);Ft?kt=ot(Pt,Ft,Ht):kt={}}return P(St,kt)},fe=function(Pt,Ot,Nt,Ht,St){var kt=J(Pt,Ot),Ft;if(kt)Ft=kt;else if(Ot)Ft=et;else if(nt)if(Pt.parent){var At=W||Nt;At&&!Ot?Ft=ot(Pt,At,Ht):(Ft={},L.extendFlat(Ft,ie(Pt,Ot)))}else Ft=L.extendFlat({},Pt),C&&(St.orientation==="h"?St.flipX?Ft.x0=Pt.x1:Ft.x1=0:St.flipY?Ft.y0=Pt.y1:Ft.y1=0);else Ft={};return P(Ft,{x0:Pt.x0,x1:Pt.x1,y0:Pt.y0,y1:Pt.y1})},pe=function(Pt,Ot,Nt,Ht){var St=J(Pt,Ot),kt={},Ft=it(Pt,Ot,Nt,Ht);L.extendFlat(kt,{transform:jt({x0:Ft.x0,x1:Ft.x1,y0:Ft.y0,y1:Ft.y1,textBB:Pt.textBB,_text:Pt._text},{isHeader:o.isHeader(Pt,x)})}),St?kt=St:Pt.parent&&L.extendFlat(kt,ie(Pt,Ot));var At=Pt.transform;return Pt.x0!==Pt.x1&&Pt.y0!==Pt.y1&&e(x.type,At,i),P(kt,{transform:{scale:At.scale,rotate:At.rotate,textX:At.textX,textY:At.textY,anchorX:At.anchorX,anchorY:At.anchorY,targetX:At.targetX,targetY:At.targetY}})},Te=function(Pt,Ot,Nt,Ht,St){var kt=Ht[0],Ft=Ht[1];k?Pt.exit().transition().each(function(){var At=b.select(this),ft=At.select("path.surface");ft.transition().attrTween("d",function(Dt){var Ut=ue(Dt,Ot,Nt,[kt,Ft]);return function($t){return St(Ut($t))}});var pt=At.select("g.slicetext");pt.attr("opacity",0)}).remove():Pt.exit().remove()},Qt=function(Pt){var Ot=Pt.transform;return Pt.x0!==Pt.x1&&Pt.y0!==Pt.y1&&e(x.type,Ot,i),L.getTextTransform({textX:Ot.textX,textY:Ot.textY,anchorX:Ot.anchorX,anchorY:Ot.anchorY,targetX:Ot.targetX,targetY:Ot.targetY,scale:Ot.scale,rotate:Ot.rotate})};k&&(a.each(function(Pt){Z[l(Pt)]={x0:Pt.x0,x1:Pt.x1,y0:Pt.y0,y1:Pt.y1},Pt.transform&&(Z[l(Pt)].transform={textX:Pt.transform.textX,textY:Pt.transform.textY,anchorX:Pt.transform.anchorX,anchorY:Pt.transform.anchorY,targetX:Pt.transform.targetX,targetY:Pt.transform.targetY,scale:Pt.transform.scale,rotate:Pt.transform.rotate})}),E.each(function(Pt){Q[l(Pt)]={x0:Pt.x0,x1:Pt.x1,y0:Pt.y0,y1:Pt.y1},Pt.transform&&(Q[l(Pt)].transform={textX:Pt.transform.textX,textY:Pt.transform.textY,anchorX:Pt.transform.anchorX,anchorY:Pt.transform.anchorY,targetX:Pt.transform.targetX,targetY:Pt.transform.targetY,scale:Pt.transform.scale,rotate:Pt.transform.rotate}),!nt&&o.isEntry(Pt)&&(nt=Pt)})),W=c(u,g,S,E,{width:F,height:_,viewX:at,viewY:tt,pathSlice:Wt,toMoveInsideSlice:jt,prevEntry:nt,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:pe,handleSlicesExit:Te,hasTransition:k,strTransform:Qt}),x.pathbar.visible?n(u,g,S,a,{barDifY:$,width:N,height:G,viewX:mt,viewY:gt,pathSlice:Ct,toMoveInsideSlice:jt,makeUpdateSliceInterpolator:fe,makeUpdateTextInterpolator:pe,handleSlicesExit:Te,hasTransition:k,strTransform:Qt}):a.remove()}},66192:function(j,V,t){var b=t(33428),P=t(76308),o=t(3400),L=t(78176),A=t(82744).resizeText,v=t(60404);function p(e){var s=e._fullLayout._treemaplayer.selectAll(".trace");A(e,s,"treemap"),s.each(function(n){var l=b.select(this),f=n[0],u=f.trace;l.style("opacity",u.opacity),l.selectAll("path.surface").each(function(g){b.select(this).call(r,g,u,e,{hovered:!1})})})}function r(e,s,n,l,f){var u=(f||{}).hovered,g=s.data.data,h=g.i,T,c,i=g.color,d=L.isHierarchyRoot(s),x=1;if(u)T=n._hovered.marker.line.color,c=n._hovered.marker.line.width;else if(d&&i===n.root.color)x=100,T="rgba(0,0,0,0)",c=0;else if(T=o.castOption(n,h,"marker.line.color")||P.defaultLine,c=o.castOption(n,h,"marker.line.width")||0,!n._hasColorscale&&!s.onPathbar){var w=n.marker.depthfade;if(w){var C=P.combine(P.addOpacity(n._backgroundColor,.75),i),y;if(w===!0){var S=L.getMaxDepth(n);isFinite(S)?L.isLeaf(s)?y=0:y=n._maxVisibleLayers-(s.data.depth-n._entryDepth):y=s.data.height+1}else y=s.data.depth-n._entryDepth,n._atRootLevel||y++;if(y>0)for(var M=0;M<y;M++){var a=.5*M/y;i=P.combine(P.addOpacity(C,a),i)}}}e.call(v,s,n,l,i).style("stroke-width",c).call(P.stroke,T).style("opacity",x)}j.exports={style:p,styleOne:r}},13988:function(j,V,t){var b=t(63188),P=t(92880).extendFlat,o=t(29736).axisHoverFormat;j.exports={y:b.y,x:b.x,x0:b.x0,y0:b.y0,xhoverformat:o("x"),yhoverformat:o("y"),name:P({},b.name,{}),orientation:P({},b.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:b.fillcolor,points:P({},b.boxpoints,{}),jitter:P({},b.jitter,{}),pointpos:P({},b.pointpos,{}),width:P({},b.width,{}),marker:b.marker,text:b.text,hovertext:b.hovertext,hovertemplate:b.hovertemplate,quartilemethod:b.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,selected:b.selected,unselected:b.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"},zorder:b.zorder}},67064:function(j,V,t){var b=t(3400),P=t(54460),o=t(62555),L=t(63800),A=t(39032).BADNUM;j.exports=function(s,n){var l=o(s,n);if(l[0].t.empty)return l;for(var f=s._fullLayout,u=P.getFromId(s,n[n.orientation==="h"?"xaxis":"yaxis"]),g=1/0,h=-1/0,T=0,c=0,i=0;i<l.length;i++){var d=l[i],x=d.pts.map(L.extractVal),w=d.bandwidth=p(n,d,x),C=d.span=r(n,d,u,w);if(d.min===d.max&&w===0)C=d.span=[d.min,d.max],d.density=[{v:1,t:C[0]}],d.bandwidth=w,T=Math.max(T,1);else{var y=C[1]-C[0],S=Math.ceil(y/(w/3)),M=y/S;if(!isFinite(M)||!isFinite(S))return b.error("Something went wrong with computing the violin span"),l[0].t.empty=!0,l;var a=L.makeKDE(d,n,x);d.density=new Array(S);for(var E=0,m=C[0];m<C[1]+M/2;E++,m+=M){var k=a(m);d.density[E]={v:k,t:m},T=Math.max(T,k)}}c=Math.max(c,x.length),g=Math.min(g,C[0]),h=Math.max(h,C[1])}var I=P.findExtremes(u,[g,h],{padded:!0});if(n._extremes[u._id]=I,n.width)l[0].t.maxKDE=T;else{var O=f._violinScaleGroupStats,z=n.scalegroup,B=O[z];B?(B.maxKDE=Math.max(B.maxKDE,T),B.maxCount=Math.max(B.maxCount,c)):O[z]={maxKDE:T,maxCount:c}}return l[0].t.labels.kde=b._(s,"kde:"),l};function v(e,s,n){var l=Math.min(s,n/1.349);return 1.059*l*Math.pow(e,-.2)}function p(e,s,n){var l=s.max-s.min;if(!l)return e.bandwidth?e.bandwidth:0;if(e.bandwidth)return Math.max(e.bandwidth,l/1e4);var f=n.length,u=b.stdev(n,f-1,s.mean);return Math.max(v(f,u,s.q3-s.q1),l/100)}function r(e,s,n,l){var f=e.spanmode,u=e.span||[],g=[s.min,s.max],h=[s.min-2*l,s.max+2*l],T;function c(d){var x=u[d],w=n.type==="multicategory"?n.r2c(x):n.d2c(x,0,e[s.valLetter+"calendar"]);return w===A?h[d]:w}f==="soft"?T=h:f==="hard"?T=g:T=[c(0),c(1)];var i={type:"linear",range:T};return P.setConvert(i),i.cleanRange(),T}},14348:function(j,V,t){var b=t(96404).setPositionOffset,P=["v","h"];j.exports=function(L,A){for(var v=L.calcdata,p=A.xaxis,r=A.yaxis,e=0;e<P.length;e++){for(var s=P[e],n=s==="h"?r:p,l=[],f=0;f<v.length;f++){var u=v[f],g=u[0].t,h=u[0].trace;h.visible===!0&&h.type==="violin"&&!g.empty&&h.orientation===s&&h.xaxis===p._id&&h.yaxis===r._id&&l.push(f)}b("violin",L,l,n)}}},36240:function(j,V,t){var b=t(3400),P=t(76308),o=t(90624),L=t(13988);j.exports=function(v,p,r,e){function s(M,a){return b.coerce(v,p,L,M,a)}function n(M,a){return b.coerce2(v,p,L,M,a)}if(o.handleSampleDefaults(v,p,s,e),p.visible!==!1){s("bandwidth"),s("side");var l=s("width");l||(s("scalegroup",p.name),s("scalemode"));var f=s("span"),u;Array.isArray(f)&&(u="manual"),s("spanmode",u);var g=s("line.color",(v.marker||{}).color||r),h=s("line.width"),T=s("fillcolor",P.addOpacity(p.line.color,.5));o.handlePointsDefaults(v,p,s,{prefix:""});var c=n("box.width"),i=n("box.fillcolor",T),d=n("box.line.color",g),x=n("box.line.width",h),w=s("box.visible",!!(c||i||d||x));w||(p.box={visible:!1});var C=n("meanline.color",g),y=n("meanline.width",h),S=s("meanline.visible",!!(C||y));S||(p.meanline={visible:!1}),s("quartilemethod"),s("zorder")}}},63800:function(j,V,t){var b=t(3400),P={gaussian:function(o){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*o*o)}};V.makeKDE=function(o,L,A){var v=A.length,p=P.gaussian,r=o.bandwidth,e=1/(v*r);return function(s){for(var n=0,l=0;l<v;l++)n+=p((s-A[l])/r);return e*n}},V.getPositionOnKdePath=function(o,L,A){var v,p;L.orientation==="h"?(v="y",p="x"):(v="x",p="y");var r=b.findPointOnPath(o.path,A,p,{pathLength:o.pathLength}),e=o.posCenterPx,s=r[v],n=L.side==="both"?2*e-s:e;return[s,n]},V.getKdeValue=function(o,L,A){var v=o.pts.map(V.extractVal),p=V.makeKDE(o,L,v);return p(A)/o.posDensityScale},V.extractVal=function(o){return o.v}},78e3:function(j,V,t){var b=t(76308),P=t(3400),o=t(54460),L=t(27576),A=t(63800);j.exports=function(p,r,e,s,n){n||(n={});var l=n.hoverLayer,f=p.cd,u=f[0].trace,g=u.hoveron,h=g.indexOf("violins")!==-1,T=g.indexOf("kde")!==-1,c=[],i,d;if(h||T){var x=L.hoverOnBoxes(p,r,e,s);if(T&&x.length>0){var w=p.xa,C=p.ya,y,S,M,a,E;u.orientation==="h"?(E=r,y="y",M=C,S="x",a=w):(E=e,y="x",M=w,S="y",a=C);var m=f[p.index];if(E>=m.span[0]&&E<=m.span[1]){var k=P.extendFlat({},p),I=a.c2p(E,!0),O=A.getKdeValue(m,u,E),z=A.getPositionOnKdePath(m,u,I),B=M._offset,F=M._length;k[y+"0"]=z[0],k[y+"1"]=z[1],k[S+"0"]=k[S+"1"]=I,k[S+"Label"]=S+": "+o.hoverLabelText(a,E,u[S+"hoverformat"])+", "+f[0].t.labels.kde+" "+O.toFixed(3);for(var _=0,N=0;N<x.length;N++)if(x[N].attr==="med"){_=N;break}k.spikeDistance=x[_].spikeDistance;var G=y+"Spike";k[G]=x[_][G],x[_].spikeDistance=void 0,x[_][G]=void 0,k.hovertemplate=!1,c.push(k),d={},d[y+"1"]=P.constrain(B+z[0],B,B+F),d[y+"2"]=P.constrain(B+z[1],B,B+F),d[S+"1"]=d[S+"2"]=a._offset+I}}h&&(c=c.concat(x))}g.indexOf("points")!==-1&&(i=L.hoverOnPoints(p,r,e));var X=l.selectAll(".violinline-"+u.uid).data(d?[0]:[]);return X.enter().append("line").classed("violinline-"+u.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(d).call(b.stroke,p.color),s==="closest"?i?[i]:c:(i&&c.push(i),c)}},22869:function(j,V,t){j.exports={attributes:t(13988),layoutAttributes:t(98228),supplyDefaults:t(36240),crossTraceDefaults:t(90624).crossTraceDefaults,supplyLayoutDefaults:t(8939),calc:t(67064),crossTraceCalc:t(14348),plot:t(5140),style:t(95908),styleOnSelect:t(49224).styleOnSelect,hoverPoints:t(78e3),selectPoints:t(8264),moduleType:"trace",name:"violin",basePlotModule:t(57952),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},98228:function(j,V,t){var b=t(16560),P=t(3400).extendFlat;j.exports={violinmode:P({},b.boxmode,{}),violingap:P({},b.boxgap,{}),violingroupgap:P({},b.boxgroupgap,{})}},8939:function(j,V,t){var b=t(3400),P=t(98228),o=t(68832);j.exports=function(A,v,p){function r(e,s){return b.coerce(A,v,P,e,s)}o._supply(A,v,p,r,"violin")}},5140:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(18728),A=t(52340),v=t(63800);j.exports=function(r,e,s,n){var l=r._context.staticPlot,f=r._fullLayout,u=e.xaxis,g=e.yaxis;function h(T,c){var i=A(T,{xaxis:u,yaxis:g,trace:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return o.smoothopen(i[0],1)}P.makeTraceGroups(n,s,"trace violins").each(function(T){var c=b.select(this),i=T[0],d=i.t,x=i.trace;if(x.visible!==!0||d.empty){c.remove();return}var w=d.bPos,C=d.bdPos,y=e[d.valLetter+"axis"],S=e[d.posLetter+"axis"],M=x.side==="both",a=M||x.side==="positive",E=M||x.side==="negative",m=c.selectAll("path.violin").data(P.identity);m.enter().append("path").style("vector-effect",l?"none":"non-scaling-stroke").attr("class","violin"),m.exit().remove(),m.each(function(N){var G=b.select(this),X=N.density,$=X.length,et=S.c2l(N.pos+w,!0),ot=S.l2p(et),nt;if(x.width)nt=d.maxKDE/C;else{var Z=f._violinScaleGroupStats[x.scalegroup];nt=x.scalemode==="count"?Z.maxKDE/C*(Z.maxCount/N.pts.length):Z.maxKDE/C}var Q,W,J,it,K,H,at;if(a){for(H=new Array($),it=0;it<$;it++)at=H[it]={},at[d.posLetter]=et+X[it].v/nt,at[d.valLetter]=y.c2l(X[it].t,!0);Q=h(H,x)}if(E){for(H=new Array($),K=0,it=$-1;K<$;K++,it--)at=H[K]={},at[d.posLetter]=et-X[it].v/nt,at[d.valLetter]=y.c2l(X[it].t,!0);W=h(H,x)}if(M)J=Q+"L"+W.substr(1)+"Z";else{var tt=[ot,y.c2p(X[0].t)],lt=[ot,y.c2p(X[$-1].t)];x.orientation==="h"&&(tt.reverse(),lt.reverse()),a?J="M"+tt+"L"+Q.substr(1)+"L"+lt:J="M"+lt+"L"+W.substr(1)+"L"+tt}G.attr("d",J),N.posCenterPx=ot,N.posDensityScale=nt*C,N.path=G.node(),N.pathLength=N.path.getTotalLength()/(M?2:1)});var k=x.box,I=k.width,O=(k.line||{}).width,z,B;M?(z=C*I,B=0):a?(z=[0,C*I/2],B=O*{x:1,y:-1}[d.posLetter]):(z=[C*I/2,0],B=O*{x:-1,y:1}[d.posLetter]),L.plotBoxAndWhiskers(c,{pos:S,val:y},x,{bPos:w,bdPos:z,bPosPxOffset:B}),L.plotBoxMean(c,{pos:S,val:y},x,{bPos:w,bdPos:z,bPosPxOffset:B});var F;!x.box.visible&&x.meanline.visible&&(F=P.identity);var _=c.selectAll("path.meanline").data(F||[]);_.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect",l?"none":"non-scaling-stroke"),_.exit().remove(),_.each(function(N){var G=y.c2p(N.mean,!0),X=v.getPositionOnKdePath(N,x,G);b.select(this).attr("d",x.orientation==="h"?"M"+G+","+X[0]+"V"+X[1]:"M"+X[0]+","+G+"H"+X[1])}),L.plotPoints(c,{x:u,y:g},x,d)})}},95908:function(j,V,t){var b=t(33428),P=t(76308),o=t(49224).stylePoints;j.exports=function(A){var v=b.select(A).selectAll("g.trace.violins");v.style("opacity",function(p){return p[0].trace.opacity}),v.each(function(p){var r=p[0].trace,e=b.select(this),s=r.box||{},n=s.line||{},l=r.meanline||{},f=l.width;e.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(P.stroke,r.line.color).call(P.fill,r.fillcolor),e.selectAll("path.box").style("stroke-width",n.width+"px").call(P.stroke,n.color).call(P.fill,s.fillcolor);var u={"stroke-width":f+"px","stroke-dasharray":2*f+"px,"+f+"px"};e.selectAll("path.mean").style(u).call(P.stroke,l.color),e.selectAll("path.meanline").style(u).call(P.stroke,l.color),o(e,r,A)})}},58168:function(j,V,t){var b=t(49084),P=t(50048),o=t(16716),L=t(45464),A=t(92880).extendFlat,v=t(67824).overrideAll,p=j.exports=v(A({x:P.x,y:P.y,z:P.z,value:P.value,isomin:P.isomin,isomax:P.isomax,surface:P.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:P.slices,caps:P.caps,text:P.text,hovertext:P.hovertext,xhoverformat:P.xhoverformat,yhoverformat:P.yhoverformat,zhoverformat:P.zhoverformat,valuehoverformat:P.valuehoverformat,hovertemplate:P.hovertemplate},b("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:P.colorbar,opacity:P.opacity,opacityscale:o.opacityscale,lightposition:P.lightposition,lighting:P.lighting,flatshading:P.flatshading,contour:P.contour,hoverinfo:A({},L.hoverinfo),showlegend:A({},L.showlegend,{dflt:!1})}),"calc","nested");p.x.editType=p.y.editType=p.z.editType=p.value.editType="calc+clearAxisTypes",p.transforms=void 0},91976:function(j,V,t){var b=t(67792).gl_mesh3d,P=t(33040).parseColorScale,o=t(3400).isArrayOrTypedArray,L=t(43080),A=t(8932).extractOpts,v=t(52094),p=t(31460).findNearestOnAxis,r=t(31460).generateIsoMeshes;function e(l,f,u){this.scene=l,this.uid=u,this.mesh=f,this.name="",this.data=null,this.showContour=!1}var s=e.prototype;s.handlePick=function(l){if(l.object===this.mesh){var f=l.data.index,u=this.data._meshX[f],g=this.data._meshY[f],h=this.data._meshZ[f],T=this.data._Ys.length,c=this.data._Zs.length,i=p(u,this.data._Xs).id,d=p(g,this.data._Ys).id,x=p(h,this.data._Zs).id,w=l.index=x+c*d+c*T*i;l.traceCoordinate=[this.data._meshX[w],this.data._meshY[w],this.data._meshZ[w],this.data._value[w]];var C=this.data.hovertext||this.data.text;return o(C)&&C[w]!==void 0?l.textLabel=C[w]:C&&(l.textLabel=C),!0}},s.update=function(l){var f=this.scene,u=f.fullSceneLayout;this.data=r(l);function g(d,x,w,C){return x.map(function(y){return d.d2l(y,0,C)*w})}var h=v(g(u.xaxis,l._meshX,f.dataScale[0],l.xcalendar),g(u.yaxis,l._meshY,f.dataScale[1],l.ycalendar),g(u.zaxis,l._meshZ,f.dataScale[2],l.zcalendar)),T=v(l._meshI,l._meshJ,l._meshK),c={positions:h,cells:T,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:L(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},i=A(l);c.vertexIntensity=l._meshIntensity,c.vertexIntensityBounds=[i.min,i.max],c.colormap=P(l),this.mesh.update(c)},s.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function n(l,f){var u=l.glplot.gl,g=b({gl:u}),h=new e(l,g,f.uid);return g._trace=h,h.update(f),l.glplot.add(g),h}j.exports=n},12448:function(j,V,t){var b=t(3400),P=t(58168),o=t(70548).supplyIsoDefaults,L=t(60192).opacityscaleDefaults;j.exports=function(v,p,r,e){function s(n,l){return b.coerce(v,p,P,n,l)}o(v,p,r,e,s),L(v,p,e,s)}},67776:function(j,V,t){j.exports={attributes:t(58168),supplyDefaults:t(12448),calc:t(62624),colorbar:{min:"cmin",max:"cmax"},plot:t(91976),moduleType:"trace",name:"volume",basePlotModule:t(12536),categories:["gl3d","showLegend"],meta:{}}},65776:function(j,V,t){var b=t(20832),P=t(52904).line,o=t(45464),L=t(29736).axisHoverFormat,A=t(21776).Ks,v=t(21776).Gw,p=t(10213),r=t(92880).extendFlat,e=t(76308);function s(n){return{marker:{color:r({},b.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},b.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},b.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}j.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:b.x,x0:b.x0,dx:b.dx,y:b.y,y0:b.y0,dy:b.dy,xperiod:b.xperiod,yperiod:b.yperiod,xperiod0:b.xperiod0,yperiod0:b.yperiod0,xperiodalignment:b.xperiodalignment,yperiodalignment:b.yperiodalignment,xhoverformat:L("x"),yhoverformat:L("y"),hovertext:b.hovertext,hovertemplate:A({},{keys:p.eventDataKeys}),hoverinfo:r({},o.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:v({editType:"plot"},{keys:p.eventDataKeys.concat(["label"])}),text:b.text,textposition:b.textposition,insidetextanchor:b.insidetextanchor,textangle:b.textangle,textfont:b.textfont,insidetextfont:b.insidetextfont,outsidetextfont:b.outsidetextfont,constraintext:b.constraintext,cliponaxis:b.cliponaxis,orientation:b.orientation,offset:b.offset,width:b.width,increasing:s(),decreasing:s(),totals:s(),connector:{line:{color:r({},P.color,{dflt:e.defaultLine}),width:r({},P.width,{editType:"plot"}),dash:P.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:b.offsetgroup,alignmentgroup:b.alignmentgroup,zorder:b.zorder}},73540:function(j,V,t){var b=t(54460),P=t(1220),o=t(3400).mergeArray,L=t(4500),A=t(39032).BADNUM;function v(r){return r==="a"||r==="absolute"}function p(r){return r==="t"||r==="total"}j.exports=function(e,s){var n=b.getFromId(e,s.xaxis||"x"),l=b.getFromId(e,s.yaxis||"y"),f,u,g,h,T,c;s.orientation==="h"?(f=n.makeCalcdata(s,"x"),g=l.makeCalcdata(s,"y"),h=P(s,l,"y",g),T=!!s.yperiodalignment,c="y"):(f=l.makeCalcdata(s,"y"),g=n.makeCalcdata(s,"x"),h=P(s,n,"x",g),T=!!s.xperiodalignment,c="x"),u=h.vals;for(var i=Math.min(u.length,f.length),d=new Array(i),x=0,w,C=!1,y=0;y<i;y++){var S=f[y]||0,M=!1;(f[y]!==A||p(s.measure[y])||v(s.measure[y]))&&y+1<i&&(f[y+1]!==A||p(s.measure[y+1])||v(s.measure[y+1]))&&(M=!0);var a=d[y]={i:y,p:u[y],s:S,rawS:S,cNext:M};v(s.measure[y])?(x=a.s,a.isSum=!0,a.dir="totals",a.s=x):p(s.measure[y])?(a.isSum=!0,a.dir="totals",a.s=x):(a.isSum=!1,a.dir=a.rawS<0?"decreasing":"increasing",w=a.s,a.s=x+w,x+=w),a.dir==="totals"&&(C=!0),T&&(d[y].orig_p=g[y],d[y][c+"End"]=h.ends[y],d[y][c+"Start"]=h.starts[y]),s.ids&&(a.id=String(s.ids[y])),a.v=(s.base||0)+x}return d.length&&(d[0].hasTotals=C),o(s.text,d,"tx"),o(s.hovertext,d,"htx"),L(d,s),d}},10213:function(j){j.exports={eventDataKeys:["initial","delta","final"]}},50152:function(j,V,t){var b=t(96376).setGroupPositions;j.exports=function(o,L){var A=o._fullLayout,v=o._fullData,p=o.calcdata,r=L.xaxis,e=L.yaxis,s=[],n=[],l=[],f,u;for(u=0;u<v.length;u++){var g=v[u];g.visible===!0&&g.xaxis===r._id&&g.yaxis===e._id&&g.type==="waterfall"&&(f=p[u],g.orientation==="h"?l.push(f):n.push(f),s.push(f))}var h={mode:A.waterfallmode,norm:A.waterfallnorm,gap:A.waterfallgap,groupgap:A.waterfallgroupgap};for(b(o,r,e,n,h),b(o,e,r,l,h),u=0;u<s.length;u++){f=s[u];for(var T=0;T<f.length;T++){var c=f[T];c.isSum===!1&&(c.s0+=T===0?0:f[T-1].s),T+1<f.length&&(f[T].nextP0=f[T+1].p0,f[T].nextS0=f[T+1].s0)}}}},24224:function(j,V,t){var b=t(3400),P=t(20011),o=t(31508).handleText,L=t(43980),A=t(31147),v=t(65776),p=t(76308),r=t(48164),e=r.INCREASING.COLOR,s=r.DECREASING.COLOR,n="#4499FF";function l(g,h,T){g(h+".marker.color",T),g(h+".marker.line.color",p.defaultLine),g(h+".marker.line.width")}function f(g,h,T,c){function i(y,S){return b.coerce(g,h,v,y,S)}var d=L(g,h,c,i);if(!d){h.visible=!1;return}A(g,h,c,i),i("xhoverformat"),i("yhoverformat"),i("measure"),i("orientation",h.x&&!h.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate");var x=i("textposition");o(g,h,c,i,x,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h.textposition!=="none"&&(i("texttemplate"),h.texttemplate||i("textinfo")),l(i,"increasing",e),l(i,"decreasing",s),l(i,"totals",n);var w=i("connector.visible");if(w){i("connector.mode");var C=i("connector.line.width");C&&(i("connector.line.color"),i("connector.line.dash"))}i("zorder")}function u(g,h){var T,c;function i(x){return b.coerce(c._input,c,v,x)}if(h.waterfallmode==="group")for(var d=0;d<g.length;d++)c=g[d],T=c._input,P(T,c,h,i)}j.exports={supplyDefaults:f,crossTraceDefaults:u}},53256:function(j){j.exports=function(t,b){return t.x="xVal"in b?b.xVal:b.x,t.y="yVal"in b?b.yVal:b.y,"initial"in b&&(t.initial=b.initial),"delta"in b&&(t.delta=b.delta),"final"in b&&(t.final=b.final),b.xa&&(t.xaxis=b.xa),b.ya&&(t.yaxis=b.ya),t}},94196:function(j,V,t){var b=t(54460).hoverLabelText,P=t(76308).opacity,o=t(63400).hoverOnBars,L=t(48164),A={increasing:L.INCREASING.SYMBOL,decreasing:L.DECREASING.SYMBOL};j.exports=function(r,e,s,n,l){var f=o(r,e,s,n,l);if(!f)return;var u=f.cd,g=u[0].trace,h=g.orientation==="h",T=h?"x":"y",c=h?r.xa:r.ya;function i(m){return b(c,m,g[T+"hoverformat"])}var d=f.index,x=u[d],w=x.isSum?x.b+x.s:x.rawS;f.initial=x.b+x.s-w,f.delta=w,f.final=f.initial+f.delta;var C=i(Math.abs(f.delta));f.deltaLabel=w<0?"("+C+")":C,f.finalLabel=i(f.final),f.initialLabel=i(f.initial);var y=x.hi||g.hoverinfo,S=[];if(y&&y!=="none"&&y!=="skip"){var M=y==="all",a=y.split("+"),E=function(m){return M||a.indexOf(m)!==-1};x.isSum||(E("final")&&(h?!E("x"):!E("y"))&&S.push(f.finalLabel),E("delta")&&(w<0?S.push(f.deltaLabel+" "+A.decreasing):S.push(f.deltaLabel+" "+A.increasing)),E("initial")&&S.push("Initial: "+f.initialLabel))}return S.length&&(f.extraText=S.join("<br>")),f.color=v(g,x),[f]};function v(p,r){var e=p[r.dir].marker,s=e.color,n=e.line.color,l=e.line.width;if(P(s))return s;if(P(n)&&l)return n}},95952:function(j,V,t){j.exports={attributes:t(65776),layoutAttributes:t(91352),supplyDefaults:t(24224).supplyDefaults,crossTraceDefaults:t(24224).crossTraceDefaults,supplyLayoutDefaults:t(59464),calc:t(73540),crossTraceCalc:t(50152),plot:t(64488),style:t(12252).style,hoverPoints:t(94196),eventData:t(53256),selectPoints:t(45784),moduleType:"trace",name:"waterfall",basePlotModule:t(57952),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},91352:function(j){j.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},59464:function(j,V,t){var b=t(3400),P=t(91352);j.exports=function(o,L,A){var v=!1;function p(s,n){return b.coerce(o,L,P,s,n)}for(var r=0;r<A.length;r++){var e=A[r];if(e.visible&&e.type==="waterfall"){v=!0;break}}v&&(p("waterfallmode"),p("waterfallgap",.2),p("waterfallgroupgap"))}},64488:function(j,V,t){var b=t(33428),P=t(3400),o=t(43616),L=t(39032).BADNUM,A=t(98184),v=t(82744).clearMinTextSize;j.exports=function(s,n,l,f){var u=s._fullLayout;v("waterfall",u),A.plot(s,n,l,f,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),p(s,n,l,f)};function p(e,s,n,l){var f=s.xaxis,u=s.yaxis;P.makeTraceGroups(l,n,"trace bars").each(function(g){var h=b.select(this),T=g[0].trace,c=P.ensureSingle(h,"g","lines");if(!T.connector||!T.connector.visible){c.remove();return}var i=T.orientation==="h",d=T.connector.mode,x=c.selectAll("g.line").data(P.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var w=x.size();x.each(function(C,y){if(!(y!==w-1&&!C.cNext)){var S=r(C,f,u,i),M=S[0],a=S[1],E="";M[0]!==L&&a[0]!==L&&M[1]!==L&&a[1]!==L&&(d==="spanning"&&!C.isSum&&y>0&&(i?E+="M"+M[0]+","+a[1]+"V"+a[0]:E+="M"+M[1]+","+a[0]+"H"+M[0]),d!=="between"&&(C.isSum||y<w-1)&&(i?E+="M"+M[1]+","+a[0]+"V"+a[1]:E+="M"+M[0]+","+a[1]+"H"+M[1]),M[2]!==L&&a[2]!==L&&(i?E+="M"+M[1]+","+a[1]+"V"+a[2]:E+="M"+M[1]+","+a[1]+"H"+M[2])),E===""&&(E="M0,0Z"),P.ensureSingle(b.select(this),"path").attr("d",E).call(o.setClipUrl,s.layerClipId,e)}})})}function r(e,s,n,l){var f=[],u=[],g=l?s:n,h=l?n:s;return f[0]=g.c2p(e.s0,!0),u[0]=h.c2p(e.p0,!0),f[1]=g.c2p(e.s1,!0),u[1]=h.c2p(e.p1,!0),f[2]=g.c2p(e.nextS0,!0),u[2]=h.c2p(e.nextP0,!0),l?[f,u]:[u,f]}},12252:function(j,V,t){var b=t(33428),P=t(43616),o=t(76308),L=t(13448).DESELECTDIM,A=t(60100),v=t(82744).resizeText,p=A.styleTextPoints;function r(e,s,n){var l=n||b.select(e).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");v(e,l,"waterfall"),l.style("opacity",function(f){return f[0].trace.opacity}),l.each(function(f){var u=b.select(this),g=f[0].trace;u.selectAll(".point > path").each(function(h){if(!h.isBlank){var T=g[h.dir].marker;b.select(this).call(o.fill,T.color).call(o.stroke,T.line.color).call(P.dashLine,T.line.dash,T.line.width).style("opacity",g.selectedpoints&&!h.selected?L:1)}}),p(u,g,e),u.selectAll(".lines").each(function(){var h=g.connector.line;P.lineGroupStyle(b.select(this).selectAll("path"),h.width,h.color,h.dash)})})}j.exports={style:r}},84224:function(j,V,t){var b=t(54460),P=t(3400),o=t(73060),L=t(60468).W,A=t(39032).BADNUM;V.moduleType="transform",V.name="aggregate";var v=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},p=v.aggregations;V.supplyDefaults=function(f,u){var g={},h;function T(m,k){return P.coerce(f,g,v,m,k)}var c=T("enabled");if(!c)return g;var i=o.findArrayAttributes(u),d={};for(h=0;h<i.length;h++)d[i[h]]=1;var x=T("groups");if(!Array.isArray(x)){if(!d[x])return g.enabled=!1,g;d[x]=0}var w=f.aggregations||[],C=g.aggregations=new Array(w.length),y;function S(m,k){return P.coerce(w[h],y,p,m,k)}for(h=0;h<w.length;h++){y={_index:h};var M=S("target"),a=S("func"),E=S("enabled");E&&M&&(d[M]||a==="count"&&d[M]===void 0)?(a==="stddev"&&S("funcmode"),d[M]=0,C[h]=y):C[h]={enabled:!1,_index:h}}for(h=0;h<i.length;h++)d[i[h]]&&C.push({target:i[h],func:p.func.dflt,enabled:!0,_index:-1});return g},V.calcTransform=function(f,u,g){if(g.enabled){var h=g.groups,T=P.getTargetArray(u,{target:h});if(T){var c,i,d,x,w={},C={},y=[],S=L(u.transforms,g),M=T.length;for(u._length&&(M=Math.min(M,u._length)),c=0;c<M;c++)i=T[c],d=w[i],d===void 0?(w[i]=y.length,x=[c],y.push(x),C[w[i]]=S(c)):(y[d].push(c),C[w[i]]=(C[w[i]]||[]).concat(S(c)));g._indexToPoints=C;var a=g.aggregations;for(c=0;c<a.length;c++)r(f,u,y,a[c]);typeof h=="string"&&r(f,u,y,{target:h,func:"first",enabled:!0}),u._length=y.length}}};function r(f,u,g,h){if(h.enabled){for(var T=h.target,c=P.nestedProperty(u,T),i=c.get(),d=b.getDataConversions(f,u,T,i),x=e(h,d),w=new Array(g.length),C=0;C<g.length;C++)w[C]=x(i,g[C]);c.set(w),h.func==="count"&&P.pushUnique(u._arrayAttrs,T)}}function e(f,u){var g=f.func,h=u.d2c,T=u.c2d;switch(g){case"count":return s;case"first":return n;case"last":return l;case"sum":return function(c,i){for(var d=0,x=0;x<i.length;x++){var w=h(c[i[x]]);w!==A&&(d+=w)}return T(d)};case"avg":return function(c,i){for(var d=0,x=0,w=0;w<i.length;w++){var C=h(c[i[w]]);C!==A&&(d+=C,x++)}return x?T(d/x):A};case"min":return function(c,i){for(var d=1/0,x=0;x<i.length;x++){var w=h(c[i[x]]);w!==A&&(d=Math.min(d,w))}return d===1/0?A:T(d)};case"max":return function(c,i){for(var d=-1/0,x=0;x<i.length;x++){var w=h(c[i[x]]);w!==A&&(d=Math.max(d,w))}return d===-1/0?A:T(d)};case"range":return function(c,i){for(var d=1/0,x=-1/0,w=0;w<i.length;w++){var C=h(c[i[w]]);C!==A&&(d=Math.min(d,C),x=Math.max(x,C))}return x===-1/0||d===1/0?A:T(x-d)};case"change":return function(c,i){var d=h(c[i[0]]),x=h(c[i[i.length-1]]);return d===A||x===A?A:T(x-d)};case"median":return function(c,i){for(var d=[],x=0;x<i.length;x++){var w=h(c[i[x]]);w!==A&&d.push(w)}if(!d.length)return A;d.sort(P.sorterAsc);var C=(d.length-1)/2;return T((d[Math.floor(C)]+d[Math.ceil(C)])/2)};case"mode":return function(c,i){for(var d={},x=0,w=A,C=0;C<i.length;C++){var y=h(c[i[C]]);if(y!==A){var S=d[y]=(d[y]||0)+1;S>x&&(x=S,w=y)}}return x?T(w):A};case"rms":return function(c,i){for(var d=0,x=0,w=0;w<i.length;w++){var C=h(c[i[w]]);C!==A&&(d+=C*C,x++)}return x?T(Math.sqrt(d/x)):A};case"stddev":return function(c,i){var d=0,x=0,w=1,C=A,y;for(y=0;y<i.length&&C===A;y++)C=h(c[i[y]]);if(C===A)return A;for(;y<i.length;y++){var S=h(c[i[y]]);if(S!==A){var M=S-C;d+=M,x+=M*M,w++}}var a=f.funcmode==="sample"?w-1:w;return a?Math.sqrt((x-d*d/w)/a):0}}}function s(f,u){return u.length}function n(f,u){return f[u[0]]}function l(f,u){return f[u[u.length-1]]}},76744:function(j,V,t){var b=t(3400),P=t(24040),o=t(54460),L=t(60468).W,A=t(69104),v=A.COMPARISON_OPS,p=A.INTERVAL_OPS,r=A.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(v).concat(p).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(s){var n={};function l(h,T){return b.coerce(s,n,V.attributes,h,T)}var f=l("enabled");if(f){var u=l("target");if(b.isArrayOrTypedArray(u)&&u.length===0)return n.enabled=!1,n;l("preservegaps"),l("operation"),l("value");var g=P.getComponentMethod("calendars","handleDefaults");g(s,n,"valuecalendar",null),g(s,n,"targetcalendar",null)}return n},V.calcTransform=function(s,n,l){if(!l.enabled)return;var f=b.getTargetArray(n,l);if(!f)return;var u=l.target,g=f.length;n._length&&(g=Math.min(g,n._length));var h=l.targetcalendar,T=n._arrayAttrs,c=l.preservegaps;if(typeof u=="string"){var i=b.nestedProperty(n,u+"calendar").get();i&&(h=i)}var d=o.getDataToCoordFunc(s,n,u,f),x=e(l,d,h),w={},C={},y=0;function S(I,O){for(var z=0;z<T.length;z++){var B=b.nestedProperty(n,T[z]);I(B,O)}}var M,a;c?(M=function(I){w[I.astr]=b.extendDeep([],I.get()),I.set(new Array(g))},a=function(I,O){var z=w[I.astr][O];I.get()[O]=z}):(M=function(I){w[I.astr]=b.extendDeep([],I.get()),I.set([])},a=function(I,O){var z=w[I.astr][O];I.get().push(z)}),S(M);for(var E=L(n.transforms,l),m=0;m<g;m++){var k=x(f[m]);k?(S(a,m),C[y++]=E(m)):c&&y++}l._indexToPoints=C,n._length=y};function e(s,n,l){var f=s.operation,u=s.value,g=b.isArrayOrTypedArray(u);function h(d){return d.indexOf(f)!==-1}var T=function(d){return n(d,0,s.valuecalendar)},c=function(d){return n(d,0,l)},i;switch(h(v)?i=T(g?u[0]:u):h(p)?i=g?[T(u[0]),T(u[1])]:[T(u),T(u)]:h(r)&&(i=g?u.map(T):[T(u)]),f){case"=":return function(d){return c(d)===i};case"!=":return function(d){return c(d)!==i};case"<":return function(d){return c(d)<i};case"<=":return function(d){return c(d)<=i};case">":return function(d){return c(d)>i};case">=":return function(d){return c(d)>=i};case"[]":return function(d){var x=c(d);return x>=i[0]&&x<=i[1]};case"()":return function(d){var x=c(d);return x>i[0]&&x<i[1]};case"[)":return function(d){var x=c(d);return x>=i[0]&&x<i[1]};case"(]":return function(d){var x=c(d);return x>i[0]&&x<=i[1]};case"][":return function(d){var x=c(d);return x<=i[0]||x>=i[1]};case")(":return function(d){var x=c(d);return x<i[0]||x>i[1]};case"](":return function(d){var x=c(d);return x<=i[0]||x>i[1]};case")[":return function(d){var x=c(d);return x<i[0]||x>=i[1]};case"{}":return function(d){return i.indexOf(c(d))!==-1};case"}{":return function(d){return i.indexOf(c(d))===-1}}}},32028:function(j,V,t){var b=t(3400),P=t(73060),o=t(7316),L=t(60468).W;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(v,p,r){var e,s={};function n(T,c){return b.coerce(v,s,V.attributes,T,c)}var l=n("enabled");if(!l)return s;n("groups"),n("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var f=v.styles,u=s.styles=[];if(f)for(e=0;e<f.length;e++){var g=u[e]={};b.coerce(f[e],u[e],V.attributes.styles,"target");var h=b.coerce(f[e],u[e],V.attributes.styles,"value");b.isPlainObject(h)?g.value=b.extendDeep({},h):h&&delete g.value}return s},V.transform=function(v,p){var r,e,s,n=[];for(e=0;e<v.length;e++)for(r=A(v[e],p),s=0;s<r.length;s++)n.push(r[s]);return n};function A(v,p){var r,e,s,n,l,f,u,g,h,T,c=p.transform,i=p.transformIndex,d=v.transforms[i].groups,x=L(v.transforms,c);if(!b.isArrayOrTypedArray(d)||d.length===0)return[v];var w=b.filterUnique(d),C=new Array(w.length),y=d.length,S=P.findArrayAttributes(v),M=c.styles||[],a={};for(r=0;r<M.length;r++)a[M[r].target]=M[r].value;c.styles&&(T=b.keyedContainer(c,"styles","target","value.name"));var E={},m={};for(r=0;r<w.length;r++){f=w[r],E[f]=r,m[f]=0,u=C[r]=b.extendDeepNoArrays({},v),u._group=f,u.transforms[i]._indexToPoints={};var k=null;for(T&&(k=T.get(f)),k||k===""?u.name=k:u.name=b.templateString(c.nameformat,{trace:v.name,group:f}),g=u.transforms,u.transforms=[],e=0;e<g.length;e++)u.transforms[e]=b.extendDeepNoArrays({},g[e]);for(e=0;e<S.length;e++)b.nestedProperty(u,S[e]).set([])}for(s=0;s<S.length;s++){for(n=S[s],e=0,h=[];e<w.length;e++)h[e]=b.nestedProperty(C[e],n).get();for(l=b.nestedProperty(v,n).get(),e=0;e<y;e++)h[E[d[e]]].push(l[e])}for(e=0;e<y;e++){u=C[E[d[e]]];var I=u.transforms[i]._indexToPoints;I[m[d[e]]]=x(e),m[d[e]]++}for(r=0;r<w.length;r++)f=w[r],u=C[r],o.clearExpandedTraceDefaultColors(u),u=b.extendDeepNoArrays(u,a[f]||{});return C}},60468:function(j,V){V.W=function(t,b){for(var P,o,L=0;L<t.length&&(P=t[L],P!==b);L++)!P._indexToPoints||P.enabled===!1||(o=P._indexToPoints);var A=o?function(v){return o[v]}:function(v){return[v]};return A}},76272:function(j,V,t){var b=t(3400),P=t(54460),o=t(60468).W,L=t(39032).BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(p){var r={};function e(n,l){return b.coerce(p,r,V.attributes,n,l)}var s=e("enabled");return s&&(e("target"),e("order")),r},V.calcTransform=function(p,r,e){if(e.enabled){var s=b.getTargetArray(r,e);if(s){var n=e.target,l=s.length;r._length&&(l=Math.min(l,r._length));var f=r._arrayAttrs,u=P.getDataToCoordFunc(p,r,n,s),g=A(e,s,u,l),h=o(r.transforms,e),T={},c,i;for(c=0;c<f.length;c++){var d=b.nestedProperty(r,f[c]),x=d.get(),w=new Array(l);for(i=0;i<l;i++)w[i]=x[g[i]];d.set(w)}for(i=0;i<l;i++)T[i]=h(g[i]);e._indexToPoints=T,r._length=l}}};function A(p,r,e,s){var n=new Array(s),l=new Array(s),f;for(f=0;f<s;f++)n[f]={v:r[f],i:f};for(n.sort(v(p,e)),f=0;f<s;f++)l[f]=n[f].i;return l}function v(p,r){switch(p.order){case"ascending":return function(e,s){var n=r(e.v),l=r(s.v);return n===L?1:l===L?-1:n-l};case"descending":return function(e,s){var n=r(e.v),l=r(s.v);return n===L?1:l===L?-1:l-n}}}},25788:function(j,V){V.version="2.34.0"},67792:function(j,V,t){var b=t(4168);(function(){var P={1964:function(v,p,r){v.exports={alpha_shape:r(3502),convex_hull:r(7352),delaunay_triangulate:r(7642),gl_cone3d:r(6405),gl_error3d:r(9165),gl_heatmap2d:r(2510),gl_line3d:r(5714),gl_mesh3d:r(7201),gl_plot2d:r(1850),gl_plot3d:r(4100),gl_pointcloud2d:r(4696),gl_scatter3d:r(8418),gl_select_box:r(3161),gl_spikes2d:r(4098),gl_streamtube3d:r(7815),gl_surface3d:r(9499),ndarray:r(9618),ndarray_linear_interpolate:r(4317)}},4793:function(v,p,r){/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/function e(At,ft){if(!(At instanceof ft))throw new TypeError("Cannot call a class as a function")}function s(At,ft){for(var pt=0;pt<ft.length;pt++){var Dt=ft[pt];Dt.enumerable=Dt.enumerable||!1,Dt.configurable=!0,"value"in Dt&&(Dt.writable=!0),Object.defineProperty(At,l(Dt.key),Dt)}}function n(At,ft,pt){return ft&&s(At.prototype,ft),Object.defineProperty(At,"prototype",{writable:!1}),At}function l(At){var ft=f(At,"string");return x(ft)=="symbol"?ft:ft+""}function f(At,ft){if(x(At)!="object"||!At)return At;var pt=At[Symbol.toPrimitive];if(pt!==void 0){var Dt=pt.call(At,ft);if(x(Dt)!="object")return Dt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(At)}function u(At,ft,pt){return ft=c(ft),g(At,T()?Reflect.construct(ft,[],c(At).constructor):ft.apply(At,pt))}function g(At,ft){if(ft&&(x(ft)==="object"||typeof ft=="function"))return ft;if(ft!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(At)}function h(At){if(At===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return At}function T(){try{var At=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T=function(){return!!At})()}function c(At){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(pt){return pt.__proto__||Object.getPrototypeOf(pt)},c(At)}function i(At,ft){if(typeof ft!="function"&&ft!==null)throw new TypeError("Super expression must either be null or a function");At.prototype=Object.create(ft&&ft.prototype,{constructor:{value:At,writable:!0,configurable:!0}}),Object.defineProperty(At,"prototype",{writable:!1}),ft&&d(At,ft)}function d(At,ft){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Dt,Ut){return Dt.__proto__=Ut,Dt},d(At,ft)}function x(At){"@babel/helpers - typeof";return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},x(At)}var w=r(7507),C=r(3778),y=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;p.hp=E,p.IS=50;var S=2147483647;E.TYPED_ARRAY_SUPPORT=M(),!E.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function M(){try{var At=new Uint8Array(1),ft={foo:function(){return 42}};return Object.setPrototypeOf(ft,Uint8Array.prototype),Object.setPrototypeOf(At,ft),At.foo()===42}catch{return!1}}Object.defineProperty(E.prototype,"parent",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.buffer}}),Object.defineProperty(E.prototype,"offset",{enumerable:!0,get:function(){if(E.isBuffer(this))return this.byteOffset}});function a(At){if(At>S)throw new RangeError('The value "'+At+'" is invalid for option "size"');var ft=new Uint8Array(At);return Object.setPrototypeOf(ft,E.prototype),ft}function E(At,ft,pt){if(typeof At=="number"){if(typeof ft=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(At)}return m(At,ft,pt)}E.poolSize=8192;function m(At,ft,pt){if(typeof At=="string")return z(At,ft);if(ArrayBuffer.isView(At))return F(At);if(At==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(At));if(Nt(At,ArrayBuffer)||At&&Nt(At.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Nt(At,SharedArrayBuffer)||At&&Nt(At.buffer,SharedArrayBuffer)))return _(At,ft,pt);if(typeof At=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Dt=At.valueOf&&At.valueOf();if(Dt!=null&&Dt!==At)return E.from(Dt,ft,pt);var Ut=N(At);if(Ut)return Ut;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof At[Symbol.toPrimitive]=="function")return E.from(At[Symbol.toPrimitive]("string"),ft,pt);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+x(At))}E.from=function(At,ft,pt){return m(At,ft,pt)},Object.setPrototypeOf(E.prototype,Uint8Array.prototype),Object.setPrototypeOf(E,Uint8Array);function k(At){if(typeof At!="number")throw new TypeError('"size" argument must be of type number');if(At<0)throw new RangeError('The value "'+At+'" is invalid for option "size"')}function I(At,ft,pt){return k(At),At<=0?a(At):ft!==void 0?typeof pt=="string"?a(At).fill(ft,pt):a(At).fill(ft):a(At)}E.alloc=function(At,ft,pt){return I(At,ft,pt)};function O(At){return k(At),a(At<0?0:G(At)|0)}E.allocUnsafe=function(At){return O(At)},E.allocUnsafeSlow=function(At){return O(At)};function z(At,ft){if((typeof ft!="string"||ft==="")&&(ft="utf8"),!E.isEncoding(ft))throw new TypeError("Unknown encoding: "+ft);var pt=X(At,ft)|0,Dt=a(pt),Ut=Dt.write(At,ft);return Ut!==pt&&(Dt=Dt.slice(0,Ut)),Dt}function B(At){for(var ft=At.length<0?0:G(At.length)|0,pt=a(ft),Dt=0;Dt<ft;Dt+=1)pt[Dt]=At[Dt]&255;return pt}function F(At){if(Nt(At,Uint8Array)){var ft=new Uint8Array(At);return _(ft.buffer,ft.byteOffset,ft.byteLength)}return B(At)}function _(At,ft,pt){if(ft<0||At.byteLength<ft)throw new RangeError('"offset" is outside of buffer bounds');if(At.byteLength<ft+(pt||0))throw new RangeError('"length" is outside of buffer bounds');var Dt;return ft===void 0&&pt===void 0?Dt=new Uint8Array(At):pt===void 0?Dt=new Uint8Array(At,ft):Dt=new Uint8Array(At,ft,pt),Object.setPrototypeOf(Dt,E.prototype),Dt}function N(At){if(E.isBuffer(At)){var ft=G(At.length)|0,pt=a(ft);return pt.length===0||At.copy(pt,0,0,ft),pt}if(At.length!==void 0)return typeof At.length!="number"||Ht(At.length)?a(0):B(At);if(At.type==="Buffer"&&Array.isArray(At.data))return B(At.data)}function G(At){if(At>=S)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+S.toString(16)+" bytes");return At|0}E.isBuffer=function(ft){return ft!=null&&ft._isBuffer===!0&&ft!==E.prototype},E.compare=function(ft,pt){if(Nt(ft,Uint8Array)&&(ft=E.from(ft,ft.offset,ft.byteLength)),Nt(pt,Uint8Array)&&(pt=E.from(pt,pt.offset,pt.byteLength)),!E.isBuffer(ft)||!E.isBuffer(pt))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ft===pt)return 0;for(var Dt=ft.length,Ut=pt.length,$t=0,re=Math.min(Dt,Ut);$t<re;++$t)if(ft[$t]!==pt[$t]){Dt=ft[$t],Ut=pt[$t];break}return Dt<Ut?-1:Ut<Dt?1:0},E.isEncoding=function(ft){switch(String(ft).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},E.concat=function(ft,pt){if(!Array.isArray(ft))throw new TypeError('"list" argument must be an Array of Buffers');if(ft.length===0)return E.alloc(0);var Dt;if(pt===void 0)for(pt=0,Dt=0;Dt<ft.length;++Dt)pt+=ft[Dt].length;var Ut=E.allocUnsafe(pt),$t=0;for(Dt=0;Dt<ft.length;++Dt){var re=ft[Dt];if(Nt(re,Uint8Array))$t+re.length>Ut.length?(E.isBuffer(re)||(re=E.from(re)),re.copy(Ut,$t)):Uint8Array.prototype.set.call(Ut,re,$t);else if(E.isBuffer(re))re.copy(Ut,$t);else throw new TypeError('"list" argument must be an Array of Buffers');$t+=re.length}return Ut};function X(At,ft){if(E.isBuffer(At))return At.length;if(ArrayBuffer.isView(At)||Nt(At,ArrayBuffer))return At.byteLength;if(typeof At!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+x(At));var pt=At.length,Dt=arguments.length>2&&arguments[2]===!0;if(!Dt&&pt===0)return 0;for(var Ut=!1;;)switch(ft){case"ascii":case"latin1":case"binary":return pt;case"utf8":case"utf-8":return pe(At).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pt*2;case"hex":return pt>>>1;case"base64":return Pt(At).length;default:if(Ut)return Dt?-1:pe(At).length;ft=(""+ft).toLowerCase(),Ut=!0}}E.byteLength=X;function $(At,ft,pt){var Dt=!1;if((ft===void 0||ft<0)&&(ft=0),ft>this.length||((pt===void 0||pt>this.length)&&(pt=this.length),pt<=0)||(pt>>>=0,ft>>>=0,pt<=ft))return"";for(At||(At="utf8");;)switch(At){case"hex":return mt(this,ft,pt);case"utf8":case"utf-8":return H(this,ft,pt);case"ascii":return lt(this,ft,pt);case"latin1":case"binary":return dt(this,ft,pt);case"base64":return K(this,ft,pt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,ft,pt);default:if(Dt)throw new TypeError("Unknown encoding: "+At);At=(At+"").toLowerCase(),Dt=!0}}E.prototype._isBuffer=!0;function et(At,ft,pt){var Dt=At[ft];At[ft]=At[pt],At[pt]=Dt}E.prototype.swap16=function(){var ft=this.length;if(ft%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var pt=0;pt<ft;pt+=2)et(this,pt,pt+1);return this},E.prototype.swap32=function(){var ft=this.length;if(ft%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var pt=0;pt<ft;pt+=4)et(this,pt,pt+3),et(this,pt+1,pt+2);return this},E.prototype.swap64=function(){var ft=this.length;if(ft%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var pt=0;pt<ft;pt+=8)et(this,pt,pt+7),et(this,pt+1,pt+6),et(this,pt+2,pt+5),et(this,pt+3,pt+4);return this},E.prototype.toString=function(){var ft=this.length;return ft===0?"":arguments.length===0?H(this,0,ft):$.apply(this,arguments)},E.prototype.toLocaleString=E.prototype.toString,E.prototype.equals=function(ft){if(!E.isBuffer(ft))throw new TypeError("Argument must be a Buffer");return this===ft?!0:E.compare(this,ft)===0},E.prototype.inspect=function(){var ft="",pt=p.IS;return ft=this.toString("hex",0,pt).replace(/(.{2})/g,"$1 ").trim(),this.length>pt&&(ft+=" ... "),"<Buffer "+ft+">"},y&&(E.prototype[y]=E.prototype.inspect),E.prototype.compare=function(ft,pt,Dt,Ut,$t){if(Nt(ft,Uint8Array)&&(ft=E.from(ft,ft.offset,ft.byteLength)),!E.isBuffer(ft))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+x(ft));if(pt===void 0&&(pt=0),Dt===void 0&&(Dt=ft?ft.length:0),Ut===void 0&&(Ut=0),$t===void 0&&($t=this.length),pt<0||Dt>ft.length||Ut<0||$t>this.length)throw new RangeError("out of range index");if(Ut>=$t&&pt>=Dt)return 0;if(Ut>=$t)return-1;if(pt>=Dt)return 1;if(pt>>>=0,Dt>>>=0,Ut>>>=0,$t>>>=0,this===ft)return 0;for(var re=$t-Ut,Be=Dt-pt,We=Math.min(re,Be),me=this.slice(Ut,$t),Se=ft.slice(pt,Dt),je=0;je<We;++je)if(me[je]!==Se[je]){re=me[je],Be=Se[je];break}return re<Be?-1:Be<re?1:0};function ot(At,ft,pt,Dt,Ut){if(At.length===0)return-1;if(typeof pt=="string"?(Dt=pt,pt=0):pt>2147483647?pt=2147483647:pt<-2147483648&&(pt=-2147483648),pt=+pt,Ht(pt)&&(pt=Ut?0:At.length-1),pt<0&&(pt=At.length+pt),pt>=At.length){if(Ut)return-1;pt=At.length-1}else if(pt<0)if(Ut)pt=0;else return-1;if(typeof ft=="string"&&(ft=E.from(ft,Dt)),E.isBuffer(ft))return ft.length===0?-1:nt(At,ft,pt,Dt,Ut);if(typeof ft=="number")return ft=ft&255,typeof Uint8Array.prototype.indexOf=="function"?Ut?Uint8Array.prototype.indexOf.call(At,ft,pt):Uint8Array.prototype.lastIndexOf.call(At,ft,pt):nt(At,[ft],pt,Dt,Ut);throw new TypeError("val must be string, number or Buffer")}function nt(At,ft,pt,Dt,Ut){var $t=1,re=At.length,Be=ft.length;if(Dt!==void 0&&(Dt=String(Dt).toLowerCase(),Dt==="ucs2"||Dt==="ucs-2"||Dt==="utf16le"||Dt==="utf-16le")){if(At.length<2||ft.length<2)return-1;$t=2,re/=2,Be/=2,pt/=2}function We(he,Ye){return $t===1?he[Ye]:he.readUInt16BE(Ye*$t)}var me;if(Ut){var Se=-1;for(me=pt;me<re;me++)if(We(At,me)===We(ft,Se===-1?0:me-Se)){if(Se===-1&&(Se=me),me-Se+1===Be)return Se*$t}else Se!==-1&&(me-=me-Se),Se=-1}else for(pt+Be>re&&(pt=re-Be),me=pt;me>=0;me--){for(var je=!0,vr=0;vr<Be;vr++)if(We(At,me+vr)!==We(ft,vr)){je=!1;break}if(je)return me}return-1}E.prototype.includes=function(ft,pt,Dt){return this.indexOf(ft,pt,Dt)!==-1},E.prototype.indexOf=function(ft,pt,Dt){return ot(this,ft,pt,Dt,!0)},E.prototype.lastIndexOf=function(ft,pt,Dt){return ot(this,ft,pt,Dt,!1)};function Z(At,ft,pt,Dt){pt=Number(pt)||0;var Ut=At.length-pt;Dt?(Dt=Number(Dt),Dt>Ut&&(Dt=Ut)):Dt=Ut;var $t=ft.length;Dt>$t/2&&(Dt=$t/2);var re;for(re=0;re<Dt;++re){var Be=parseInt(ft.substr(re*2,2),16);if(Ht(Be))return re;At[pt+re]=Be}return re}function Q(At,ft,pt,Dt){return Ot(pe(ft,At.length-pt),At,pt,Dt)}function W(At,ft,pt,Dt){return Ot(Te(ft),At,pt,Dt)}function J(At,ft,pt,Dt){return Ot(Pt(ft),At,pt,Dt)}function it(At,ft,pt,Dt){return Ot(Qt(ft,At.length-pt),At,pt,Dt)}E.prototype.write=function(ft,pt,Dt,Ut){if(pt===void 0)Ut="utf8",Dt=this.length,pt=0;else if(Dt===void 0&&typeof pt=="string")Ut=pt,Dt=this.length,pt=0;else if(isFinite(pt))pt=pt>>>0,isFinite(Dt)?(Dt=Dt>>>0,Ut===void 0&&(Ut="utf8")):(Ut=Dt,Dt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var $t=this.length-pt;if((Dt===void 0||Dt>$t)&&(Dt=$t),ft.length>0&&(Dt<0||pt<0)||pt>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ut||(Ut="utf8");for(var re=!1;;)switch(Ut){case"hex":return Z(this,ft,pt,Dt);case"utf8":case"utf-8":return Q(this,ft,pt,Dt);case"ascii":case"latin1":case"binary":return W(this,ft,pt,Dt);case"base64":return J(this,ft,pt,Dt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,ft,pt,Dt);default:if(re)throw new TypeError("Unknown encoding: "+Ut);Ut=(""+Ut).toLowerCase(),re=!0}},E.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function K(At,ft,pt){return ft===0&&pt===At.length?w.fromByteArray(At):w.fromByteArray(At.slice(ft,pt))}function H(At,ft,pt){pt=Math.min(At.length,pt);for(var Dt=[],Ut=ft;Ut<pt;){var $t=At[Ut],re=null,Be=$t>239?4:$t>223?3:$t>191?2:1;if(Ut+Be<=pt){var We=void 0,me=void 0,Se=void 0,je=void 0;switch(Be){case 1:$t<128&&(re=$t);break;case 2:We=At[Ut+1],(We&192)===128&&(je=($t&31)<<6|We&63,je>127&&(re=je));break;case 3:We=At[Ut+1],me=At[Ut+2],(We&192)===128&&(me&192)===128&&(je=($t&15)<<12|(We&63)<<6|me&63,je>2047&&(je<55296||je>57343)&&(re=je));break;case 4:We=At[Ut+1],me=At[Ut+2],Se=At[Ut+3],(We&192)===128&&(me&192)===128&&(Se&192)===128&&(je=($t&15)<<18|(We&63)<<12|(me&63)<<6|Se&63,je>65535&&je<1114112&&(re=je))}}re===null?(re=65533,Be=1):re>65535&&(re-=65536,Dt.push(re>>>10&1023|55296),re=56320|re&1023),Dt.push(re),Ut+=Be}return tt(Dt)}var at=4096;function tt(At){var ft=At.length;if(ft<=at)return String.fromCharCode.apply(String,At);for(var pt="",Dt=0;Dt<ft;)pt+=String.fromCharCode.apply(String,At.slice(Dt,Dt+=at));return pt}function lt(At,ft,pt){var Dt="";pt=Math.min(At.length,pt);for(var Ut=ft;Ut<pt;++Ut)Dt+=String.fromCharCode(At[Ut]&127);return Dt}function dt(At,ft,pt){var Dt="";pt=Math.min(At.length,pt);for(var Ut=ft;Ut<pt;++Ut)Dt+=String.fromCharCode(At[Ut]);return Dt}function mt(At,ft,pt){var Dt=At.length;(!ft||ft<0)&&(ft=0),(!pt||pt<0||pt>Dt)&&(pt=Dt);for(var Ut="",$t=ft;$t<pt;++$t)Ut+=St[At[$t]];return Ut}function gt(At,ft,pt){for(var Dt=At.slice(ft,pt),Ut="",$t=0;$t<Dt.length-1;$t+=2)Ut+=String.fromCharCode(Dt[$t]+Dt[$t+1]*256);return Ut}E.prototype.slice=function(ft,pt){var Dt=this.length;ft=~~ft,pt=pt===void 0?Dt:~~pt,ft<0?(ft+=Dt,ft<0&&(ft=0)):ft>Dt&&(ft=Dt),pt<0?(pt+=Dt,pt<0&&(pt=0)):pt>Dt&&(pt=Dt),pt<ft&&(pt=ft);var Ut=this.subarray(ft,pt);return Object.setPrototypeOf(Ut,E.prototype),Ut};function Mt(At,ft,pt){if(At%1!==0||At<0)throw new RangeError("offset is not uint");if(At+ft>pt)throw new RangeError("Trying to access beyond buffer length")}E.prototype.readUintLE=E.prototype.readUIntLE=function(ft,pt,Dt){ft=ft>>>0,pt=pt>>>0,Dt||Mt(ft,pt,this.length);for(var Ut=this[ft],$t=1,re=0;++re<pt&&($t*=256);)Ut+=this[ft+re]*$t;return Ut},E.prototype.readUintBE=E.prototype.readUIntBE=function(ft,pt,Dt){ft=ft>>>0,pt=pt>>>0,Dt||Mt(ft,pt,this.length);for(var Ut=this[ft+--pt],$t=1;pt>0&&($t*=256);)Ut+=this[ft+--pt]*$t;return Ut},E.prototype.readUint8=E.prototype.readUInt8=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,1,this.length),this[ft]},E.prototype.readUint16LE=E.prototype.readUInt16LE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,2,this.length),this[ft]|this[ft+1]<<8},E.prototype.readUint16BE=E.prototype.readUInt16BE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,2,this.length),this[ft]<<8|this[ft+1]},E.prototype.readUint32LE=E.prototype.readUInt32LE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),(this[ft]|this[ft+1]<<8|this[ft+2]<<16)+this[ft+3]*16777216},E.prototype.readUint32BE=E.prototype.readUInt32BE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),this[ft]*16777216+(this[ft+1]<<16|this[ft+2]<<8|this[ft+3])},E.prototype.readBigUInt64LE=kt(function(ft){ft=ft>>>0,jt(ft,"offset");var pt=this[ft],Dt=this[ft+7];(pt===void 0||Dt===void 0)&&ie(ft,this.length-8);var Ut=pt+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24),$t=this[++ft]+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+Dt*Math.pow(2,24);return BigInt(Ut)+(BigInt($t)<<BigInt(32))}),E.prototype.readBigUInt64BE=kt(function(ft){ft=ft>>>0,jt(ft,"offset");var pt=this[ft],Dt=this[ft+7];(pt===void 0||Dt===void 0)&&ie(ft,this.length-8);var Ut=pt*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft],$t=this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+Dt;return(BigInt(Ut)<<BigInt(32))+BigInt($t)}),E.prototype.readIntLE=function(ft,pt,Dt){ft=ft>>>0,pt=pt>>>0,Dt||Mt(ft,pt,this.length);for(var Ut=this[ft],$t=1,re=0;++re<pt&&($t*=256);)Ut+=this[ft+re]*$t;return $t*=128,Ut>=$t&&(Ut-=Math.pow(2,8*pt)),Ut},E.prototype.readIntBE=function(ft,pt,Dt){ft=ft>>>0,pt=pt>>>0,Dt||Mt(ft,pt,this.length);for(var Ut=pt,$t=1,re=this[ft+--Ut];Ut>0&&($t*=256);)re+=this[ft+--Ut]*$t;return $t*=128,re>=$t&&(re-=Math.pow(2,8*pt)),re},E.prototype.readInt8=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,1,this.length),this[ft]&128?(255-this[ft]+1)*-1:this[ft]},E.prototype.readInt16LE=function(ft,pt){ft=ft>>>0,pt||Mt(ft,2,this.length);var Dt=this[ft]|this[ft+1]<<8;return Dt&32768?Dt|4294901760:Dt},E.prototype.readInt16BE=function(ft,pt){ft=ft>>>0,pt||Mt(ft,2,this.length);var Dt=this[ft+1]|this[ft]<<8;return Dt&32768?Dt|4294901760:Dt},E.prototype.readInt32LE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),this[ft]|this[ft+1]<<8|this[ft+2]<<16|this[ft+3]<<24},E.prototype.readInt32BE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),this[ft]<<24|this[ft+1]<<16|this[ft+2]<<8|this[ft+3]},E.prototype.readBigInt64LE=kt(function(ft){ft=ft>>>0,jt(ft,"offset");var pt=this[ft],Dt=this[ft+7];(pt===void 0||Dt===void 0)&&ie(ft,this.length-8);var Ut=this[ft+4]+this[ft+5]*Math.pow(2,8)+this[ft+6]*Math.pow(2,16)+(Dt<<24);return(BigInt(Ut)<<BigInt(32))+BigInt(pt+this[++ft]*Math.pow(2,8)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,24))}),E.prototype.readBigInt64BE=kt(function(ft){ft=ft>>>0,jt(ft,"offset");var pt=this[ft],Dt=this[ft+7];(pt===void 0||Dt===void 0)&&ie(ft,this.length-8);var Ut=(pt<<24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+this[++ft];return(BigInt(Ut)<<BigInt(32))+BigInt(this[++ft]*Math.pow(2,24)+this[++ft]*Math.pow(2,16)+this[++ft]*Math.pow(2,8)+Dt)}),E.prototype.readFloatLE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),C.read(this,ft,!0,23,4)},E.prototype.readFloatBE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,4,this.length),C.read(this,ft,!1,23,4)},E.prototype.readDoubleLE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,8,this.length),C.read(this,ft,!0,52,8)},E.prototype.readDoubleBE=function(ft,pt){return ft=ft>>>0,pt||Mt(ft,8,this.length),C.read(this,ft,!1,52,8)};function Lt(At,ft,pt,Dt,Ut,$t){if(!E.isBuffer(At))throw new TypeError('"buffer" argument must be a Buffer instance');if(ft>Ut||ft<$t)throw new RangeError('"value" argument is out of bounds');if(pt+Dt>At.length)throw new RangeError("Index out of range")}E.prototype.writeUintLE=E.prototype.writeUIntLE=function(ft,pt,Dt,Ut){if(ft=+ft,pt=pt>>>0,Dt=Dt>>>0,!Ut){var $t=Math.pow(2,8*Dt)-1;Lt(this,ft,pt,Dt,$t,0)}var re=1,Be=0;for(this[pt]=ft&255;++Be<Dt&&(re*=256);)this[pt+Be]=ft/re&255;return pt+Dt},E.prototype.writeUintBE=E.prototype.writeUIntBE=function(ft,pt,Dt,Ut){if(ft=+ft,pt=pt>>>0,Dt=Dt>>>0,!Ut){var $t=Math.pow(2,8*Dt)-1;Lt(this,ft,pt,Dt,$t,0)}var re=Dt-1,Be=1;for(this[pt+re]=ft&255;--re>=0&&(Be*=256);)this[pt+re]=ft/Be&255;return pt+Dt},E.prototype.writeUint8=E.prototype.writeUInt8=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,1,255,0),this[pt]=ft&255,pt+1},E.prototype.writeUint16LE=E.prototype.writeUInt16LE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,2,65535,0),this[pt]=ft&255,this[pt+1]=ft>>>8,pt+2},E.prototype.writeUint16BE=E.prototype.writeUInt16BE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,2,65535,0),this[pt]=ft>>>8,this[pt+1]=ft&255,pt+2},E.prototype.writeUint32LE=E.prototype.writeUInt32LE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,4,4294967295,0),this[pt+3]=ft>>>24,this[pt+2]=ft>>>16,this[pt+1]=ft>>>8,this[pt]=ft&255,pt+4},E.prototype.writeUint32BE=E.prototype.writeUInt32BE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,4,4294967295,0),this[pt]=ft>>>24,this[pt+1]=ft>>>16,this[pt+2]=ft>>>8,this[pt+3]=ft&255,pt+4};function zt(At,ft,pt,Dt,Ut){Wt(ft,Dt,Ut,At,pt,7);var $t=Number(ft&BigInt(4294967295));At[pt++]=$t,$t=$t>>8,At[pt++]=$t,$t=$t>>8,At[pt++]=$t,$t=$t>>8,At[pt++]=$t;var re=Number(ft>>BigInt(32)&BigInt(4294967295));return At[pt++]=re,re=re>>8,At[pt++]=re,re=re>>8,At[pt++]=re,re=re>>8,At[pt++]=re,pt}function xt(At,ft,pt,Dt,Ut){Wt(ft,Dt,Ut,At,pt,7);var $t=Number(ft&BigInt(4294967295));At[pt+7]=$t,$t=$t>>8,At[pt+6]=$t,$t=$t>>8,At[pt+5]=$t,$t=$t>>8,At[pt+4]=$t;var re=Number(ft>>BigInt(32)&BigInt(4294967295));return At[pt+3]=re,re=re>>8,At[pt+2]=re,re=re>>8,At[pt+1]=re,re=re>>8,At[pt]=re,pt+8}E.prototype.writeBigUInt64LE=kt(function(ft){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return zt(this,ft,pt,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeBigUInt64BE=kt(function(ft){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return xt(this,ft,pt,BigInt(0),BigInt("0xffffffffffffffff"))}),E.prototype.writeIntLE=function(ft,pt,Dt,Ut){if(ft=+ft,pt=pt>>>0,!Ut){var $t=Math.pow(2,8*Dt-1);Lt(this,ft,pt,Dt,$t-1,-$t)}var re=0,Be=1,We=0;for(this[pt]=ft&255;++re<Dt&&(Be*=256);)ft<0&&We===0&&this[pt+re-1]!==0&&(We=1),this[pt+re]=(ft/Be>>0)-We&255;return pt+Dt},E.prototype.writeIntBE=function(ft,pt,Dt,Ut){if(ft=+ft,pt=pt>>>0,!Ut){var $t=Math.pow(2,8*Dt-1);Lt(this,ft,pt,Dt,$t-1,-$t)}var re=Dt-1,Be=1,We=0;for(this[pt+re]=ft&255;--re>=0&&(Be*=256);)ft<0&&We===0&&this[pt+re+1]!==0&&(We=1),this[pt+re]=(ft/Be>>0)-We&255;return pt+Dt},E.prototype.writeInt8=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,1,127,-128),ft<0&&(ft=255+ft+1),this[pt]=ft&255,pt+1},E.prototype.writeInt16LE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,2,32767,-32768),this[pt]=ft&255,this[pt+1]=ft>>>8,pt+2},E.prototype.writeInt16BE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,2,32767,-32768),this[pt]=ft>>>8,this[pt+1]=ft&255,pt+2},E.prototype.writeInt32LE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,4,2147483647,-2147483648),this[pt]=ft&255,this[pt+1]=ft>>>8,this[pt+2]=ft>>>16,this[pt+3]=ft>>>24,pt+4},E.prototype.writeInt32BE=function(ft,pt,Dt){return ft=+ft,pt=pt>>>0,Dt||Lt(this,ft,pt,4,2147483647,-2147483648),ft<0&&(ft=4294967295+ft+1),this[pt]=ft>>>24,this[pt+1]=ft>>>16,this[pt+2]=ft>>>8,this[pt+3]=ft&255,pt+4},E.prototype.writeBigInt64LE=kt(function(ft){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return zt(this,ft,pt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),E.prototype.writeBigInt64BE=kt(function(ft){var pt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return xt(this,ft,pt,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ct(At,ft,pt,Dt,Ut,$t){if(pt+Dt>At.length)throw new RangeError("Index out of range");if(pt<0)throw new RangeError("Index out of range")}function wt(At,ft,pt,Dt,Ut){return ft=+ft,pt=pt>>>0,Ut||Ct(At,ft,pt,4),C.write(At,ft,pt,Dt,23,4),pt+4}E.prototype.writeFloatLE=function(ft,pt,Dt){return wt(this,ft,pt,!0,Dt)},E.prototype.writeFloatBE=function(ft,pt,Dt){return wt(this,ft,pt,!1,Dt)};function Rt(At,ft,pt,Dt,Ut){return ft=+ft,pt=pt>>>0,Ut||Ct(At,ft,pt,8),C.write(At,ft,pt,Dt,52,8),pt+8}E.prototype.writeDoubleLE=function(ft,pt,Dt){return Rt(this,ft,pt,!0,Dt)},E.prototype.writeDoubleBE=function(ft,pt,Dt){return Rt(this,ft,pt,!1,Dt)},E.prototype.copy=function(ft,pt,Dt,Ut){if(!E.isBuffer(ft))throw new TypeError("argument should be a Buffer");if(Dt||(Dt=0),!Ut&&Ut!==0&&(Ut=this.length),pt>=ft.length&&(pt=ft.length),pt||(pt=0),Ut>0&&Ut<Dt&&(Ut=Dt),Ut===Dt||ft.length===0||this.length===0)return 0;if(pt<0)throw new RangeError("targetStart out of bounds");if(Dt<0||Dt>=this.length)throw new RangeError("Index out of range");if(Ut<0)throw new RangeError("sourceEnd out of bounds");Ut>this.length&&(Ut=this.length),ft.length-pt<Ut-Dt&&(Ut=ft.length-pt+Dt);var $t=Ut-Dt;return this===ft&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(pt,Dt,Ut):Uint8Array.prototype.set.call(ft,this.subarray(Dt,Ut),pt),$t},E.prototype.fill=function(ft,pt,Dt,Ut){if(typeof ft=="string"){if(typeof pt=="string"?(Ut=pt,pt=0,Dt=this.length):typeof Dt=="string"&&(Ut=Dt,Dt=this.length),Ut!==void 0&&typeof Ut!="string")throw new TypeError("encoding must be a string");if(typeof Ut=="string"&&!E.isEncoding(Ut))throw new TypeError("Unknown encoding: "+Ut);if(ft.length===1){var $t=ft.charCodeAt(0);(Ut==="utf8"&&$t<128||Ut==="latin1")&&(ft=$t)}}else typeof ft=="number"?ft=ft&255:typeof ft=="boolean"&&(ft=Number(ft));if(pt<0||this.length<pt||this.length<Dt)throw new RangeError("Out of range index");if(Dt<=pt)return this;pt=pt>>>0,Dt=Dt===void 0?this.length:Dt>>>0,ft||(ft=0);var re;if(typeof ft=="number")for(re=pt;re<Dt;++re)this[re]=ft;else{var Be=E.isBuffer(ft)?ft:E.from(ft,Ut),We=Be.length;if(We===0)throw new TypeError('The value "'+ft+'" is invalid for argument "value"');for(re=0;re<Dt-pt;++re)this[re+pt]=Be[re%We]}return this};var Tt={};function Bt(At,ft,pt){Tt[At]=function(Dt){function Ut(){var $t;return e(this,Ut),$t=u(this,Ut),Object.defineProperty($t,"message",{value:ft.apply($t,arguments),writable:!0,configurable:!0}),$t.name="".concat($t.name," [").concat(At,"]"),$t.stack,delete $t.name,$t}return i(Ut,Dt),n(Ut,[{key:"code",get:function(){return At},set:function(re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:re,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(At,"]: ").concat(this.message)}}])}(pt)}Bt("ERR_BUFFER_OUT_OF_BOUNDS",function(At){return At?"".concat(At," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Bt("ERR_INVALID_ARG_TYPE",function(At,ft){return'The "'.concat(At,'" argument must be of type number. Received type ').concat(x(ft))},TypeError),Bt("ERR_OUT_OF_RANGE",function(At,ft,pt){var Dt='The value of "'.concat(At,'" is out of range.'),Ut=pt;return Number.isInteger(pt)&&Math.abs(pt)>Math.pow(2,32)?Ut=Gt(String(pt)):typeof pt=="bigint"&&(Ut=String(pt),(pt>Math.pow(BigInt(2),BigInt(32))||pt<-Math.pow(BigInt(2),BigInt(32)))&&(Ut=Gt(Ut)),Ut+="n"),Dt+=" It must be ".concat(ft,". Received ").concat(Ut),Dt},RangeError);function Gt(At){for(var ft="",pt=At.length,Dt=At[0]==="-"?1:0;pt>=Dt+4;pt-=3)ft="_".concat(At.slice(pt-3,pt)).concat(ft);return"".concat(At.slice(0,pt)).concat(ft)}function te(At,ft,pt){jt(ft,"offset"),(At[ft]===void 0||At[ft+pt]===void 0)&&ie(ft,At.length-(pt+1))}function Wt(At,ft,pt,Dt,Ut,$t){if(At>pt||At<ft){var re=typeof ft=="bigint"?"n":"",Be;throw ft===0||ft===BigInt(0)?Be=">= 0".concat(re," and < 2").concat(re," ** ").concat(($t+1)*8).concat(re):Be=">= -(2".concat(re," ** ").concat(($t+1)*8-1).concat(re,") and < 2 ** ")+"".concat(($t+1)*8-1).concat(re),new Tt.ERR_OUT_OF_RANGE("value",Be,At)}te(Dt,Ut,$t)}function jt(At,ft){if(typeof At!="number")throw new Tt.ERR_INVALID_ARG_TYPE(ft,"number",At)}function ie(At,ft,pt){throw Math.floor(At)!==At?(jt(At,pt),new Tt.ERR_OUT_OF_RANGE("offset","an integer",At)):ft<0?new Tt.ERR_BUFFER_OUT_OF_BOUNDS:new Tt.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(ft),At)}var ue=/[^+/0-9A-Za-z-_]/g;function fe(At){if(At=At.split("=")[0],At=At.trim().replace(ue,""),At.length<2)return"";for(;At.length%4!==0;)At=At+"=";return At}function pe(At,ft){ft=ft||1/0;for(var pt,Dt=At.length,Ut=null,$t=[],re=0;re<Dt;++re){if(pt=At.charCodeAt(re),pt>55295&&pt<57344){if(!Ut){if(pt>56319){(ft-=3)>-1&&$t.push(239,191,189);continue}else if(re+1===Dt){(ft-=3)>-1&&$t.push(239,191,189);continue}Ut=pt;continue}if(pt<56320){(ft-=3)>-1&&$t.push(239,191,189),Ut=pt;continue}pt=(Ut-55296<<10|pt-56320)+65536}else Ut&&(ft-=3)>-1&&$t.push(239,191,189);if(Ut=null,pt<128){if((ft-=1)<0)break;$t.push(pt)}else if(pt<2048){if((ft-=2)<0)break;$t.push(pt>>6|192,pt&63|128)}else if(pt<65536){if((ft-=3)<0)break;$t.push(pt>>12|224,pt>>6&63|128,pt&63|128)}else if(pt<1114112){if((ft-=4)<0)break;$t.push(pt>>18|240,pt>>12&63|128,pt>>6&63|128,pt&63|128)}else throw new Error("Invalid code point")}return $t}function Te(At){for(var ft=[],pt=0;pt<At.length;++pt)ft.push(At.charCodeAt(pt)&255);return ft}function Qt(At,ft){for(var pt,Dt,Ut,$t=[],re=0;re<At.length&&!((ft-=2)<0);++re)pt=At.charCodeAt(re),Dt=pt>>8,Ut=pt%256,$t.push(Ut),$t.push(Dt);return $t}function Pt(At){return w.toByteArray(fe(At))}function Ot(At,ft,pt,Dt){var Ut;for(Ut=0;Ut<Dt&&!(Ut+pt>=ft.length||Ut>=At.length);++Ut)ft[Ut+pt]=At[Ut];return Ut}function Nt(At,ft){return At instanceof ft||At!=null&&At.constructor!=null&&At.constructor.name!=null&&At.constructor.name===ft.name}function Ht(At){return At!==At}var St=function(){for(var At="0123456789abcdef",ft=new Array(256),pt=0;pt<16;++pt)for(var Dt=pt*16,Ut=0;Ut<16;++Ut)ft[Dt+Ut]=At[pt]+At[Ut];return ft}();function kt(At){return typeof BigInt>"u"?Ft:At}function Ft(){throw new Error("BigInt not supported")}},9216:function(v){v.exports=s,v.exports.isMobile=s,v.exports.default=s;var p=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,e=/android|ipad|playbook|silk/i;function s(n){n||(n={});var l=n.ua;if(!l&&typeof navigator<"u"&&(l=navigator.userAgent),l&&l.headers&&typeof l.headers["user-agent"]=="string"&&(l=l.headers["user-agent"]),typeof l!="string")return!1;var f=p.test(l)&&!r.test(l)||!!n.tablet&&e.test(l);return!f&&n.tablet&&n.featureDetect&&navigator&&navigator.maxTouchPoints>1&&l.indexOf("Macintosh")!==-1&&l.indexOf("Safari")!==-1&&(f=!0),f}},6296:function(v,p,r){v.exports=u;var e=r(7261),s=r(9977),n=r(4192);function l(g,h){this._controllerNames=Object.keys(g),this._controllerList=this._controllerNames.map(function(T){return g[T]}),this._mode=h,this._active=g[h],this._active||(this._mode="turntable",this._active=g.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var f=l.prototype;f.flush=function(g){for(var h=this._controllerList,T=0;T<h.length;++T)h[T].flush(g)},f.idle=function(g){for(var h=this._controllerList,T=0;T<h.length;++T)h[T].idle(g)},f.lookAt=function(g,h,T,c){for(var i=this._controllerList,d=0;d<i.length;++d)i[d].lookAt(g,h,T,c)},f.rotate=function(g,h,T,c){for(var i=this._controllerList,d=0;d<i.length;++d)i[d].rotate(g,h,T,c)},f.pan=function(g,h,T,c){for(var i=this._controllerList,d=0;d<i.length;++d)i[d].pan(g,h,T,c)},f.translate=function(g,h,T,c){for(var i=this._controllerList,d=0;d<i.length;++d)i[d].translate(g,h,T,c)},f.setMatrix=function(g,h){for(var T=this._controllerList,c=0;c<T.length;++c)T[c].setMatrix(g,h)},f.setDistanceLimits=function(g,h){for(var T=this._controllerList,c=0;c<T.length;++c)T[c].setDistanceLimits(g,h)},f.setDistance=function(g,h){for(var T=this._controllerList,c=0;c<T.length;++c)T[c].setDistance(g,h)},f.recalcMatrix=function(g){this._active.recalcMatrix(g)},f.getDistance=function(g){return this._active.getDistance(g)},f.getDistanceLimits=function(g){return this._active.getDistanceLimits(g)},f.lastT=function(){return this._active.lastT()},f.setMode=function(g){if(g!==this._mode){var h=this._controllerNames.indexOf(g);if(!(h<0)){var T=this._active,c=this._controllerList[h],i=Math.max(T.lastT(),c.lastT());T.recalcMatrix(i),c.setMatrix(i,T.computedMatrix),this._active=c,this._mode=g,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},f.getMode=function(){return this._mode};function u(g){g=g||{};var h=g.eye||[0,0,1],T=g.center||[0,0,0],c=g.up||[0,1,0],i=g.distanceLimits||[0,1/0],d=g.mode||"turntable",x=e(),w=s(),C=n();return x.setDistanceLimits(i[0],i[1]),x.lookAt(0,h,T,c),w.setDistanceLimits(i[0],i[1]),w.lookAt(0,h,T,c),C.setDistanceLimits(i[0],i[1]),C.lookAt(0,h,T,c),new l({turntable:x,orbit:w,matrix:C},d)}},7169:function(v,p,r){var e=typeof WeakMap>"u"?r(1538):WeakMap,s=r(2762),n=r(8116),l=new e;function f(u){var g=l.get(u),h=g&&(g._triangleBuffer.handle||g._triangleBuffer.buffer);if(!h||!u.isBuffer(h)){var T=s(u,new Float32Array([-1,-1,-1,4,4,-1]));g=n(u,[{buffer:T,type:u.FLOAT,size:2}]),g._triangleBuffer=T,l.set(u,g)}g.bind(),u.drawArrays(u.TRIANGLES,0,3),g.unbind()}v.exports=f},1085:function(v,p,r){var e=r(1371);v.exports=s;function s(n,l,f){l=typeof l=="number"?l:1,f=f||": ";var u=n.split(/\r?\n/),g=String(u.length+l-1).length;return u.map(function(h,T){var c=T+l,i=String(c).length,d=e(c,g-i);return d+f+h}).join(`
`)}},3952:function(v,p,r){v.exports=n;var e=r(3250);function s(l,f){for(var u=new Array(f+1),g=0;g<l.length;++g)u[g]=l[g];for(var g=0;g<=l.length;++g){for(var h=l.length;h<=f;++h){for(var T=new Array(f),c=0;c<f;++c)T[c]=Math.pow(h+1-g,c);u[h]=T}var i=e.apply(void 0,u);if(i)return!0}return!1}function n(l){var f=l.length;if(f===0)return[];if(f===1)return[0];for(var u=l[0].length,g=[l[0]],h=[0],T=1;T<f;++T){if(g.push(l[T]),!s(g,u)){g.pop();continue}if(h.push(T),h.length===u+1)return h}return h}},5995:function(v,p,r){v.exports=n;var e=r(7642),s=r(6037);function n(l,f){return e(f).filter(function(u){for(var g=new Array(u.length),h=0;h<u.length;++h)g[h]=f[u[h]];return s(g)*l<1})}},3502:function(v,p,r){v.exports=n;var e=r(5995),s=r(9127);function n(l,f){return s(e(l,f))}},6468:function(v){v.exports=function(r){return atob(r)}},2642:function(v,p,r){v.exports=n;var e=r(727);function s(l){for(var f=0,u=0;u<l.length;++u)f+=l[u];return f}function n(l,f){for(var u=f.length,g=new Array(u+1),h=0;h<u;++h){for(var T=new Array(u+1),c=0;c<=u;++c)T[c]=l[c][h];g[h]=T}g[u]=new Array(u+1);for(var h=0;h<=u;++h)g[u][h]=1;for(var i=new Array(u+1),h=0;h<u;++h)i[h]=f[h];i[u]=1;var d=e(g,i),x=s(d[u+1]);x===0&&(x=1);for(var w=new Array(u+1),h=0;h<=u;++h)w[h]=s(d[h])/x;return w}},7507:function(v,p){p.byteLength=g,p.toByteArray=T,p.fromByteArray=d;for(var r=[],e=[],s=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,f=n.length;l<f;++l)r[l]=n[l],e[n.charCodeAt(l)]=l;e[45]=62,e[95]=63;function u(x){var w=x.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=x.indexOf("=");C===-1&&(C=w);var y=C===w?0:4-C%4;return[C,y]}function g(x){var w=u(x),C=w[0],y=w[1];return(C+y)*3/4-y}function h(x,w,C){return(w+C)*3/4-C}function T(x){var w,C=u(x),y=C[0],S=C[1],M=new s(h(x,y,S)),a=0,E=S>0?y-4:y,m;for(m=0;m<E;m+=4)w=e[x.charCodeAt(m)]<<18|e[x.charCodeAt(m+1)]<<12|e[x.charCodeAt(m+2)]<<6|e[x.charCodeAt(m+3)],M[a++]=w>>16&255,M[a++]=w>>8&255,M[a++]=w&255;return S===2&&(w=e[x.charCodeAt(m)]<<2|e[x.charCodeAt(m+1)]>>4,M[a++]=w&255),S===1&&(w=e[x.charCodeAt(m)]<<10|e[x.charCodeAt(m+1)]<<4|e[x.charCodeAt(m+2)]>>2,M[a++]=w>>8&255,M[a++]=w&255),M}function c(x){return r[x>>18&63]+r[x>>12&63]+r[x>>6&63]+r[x&63]}function i(x,w,C){for(var y,S=[],M=w;M<C;M+=3)y=(x[M]<<16&16711680)+(x[M+1]<<8&65280)+(x[M+2]&255),S.push(c(y));return S.join("")}function d(x){for(var w,C=x.length,y=C%3,S=[],M=16383,a=0,E=C-y;a<E;a+=M)S.push(i(x,a,a+M>E?E:a+M));return y===1?(w=x[C-1],S.push(r[w>>2]+r[w<<4&63]+"==")):y===2&&(w=(x[C-2]<<8)+x[C-1],S.push(r[w>>10]+r[w>>4&63]+r[w<<2&63]+"=")),S.join("")}},3865:function(v,p,r){var e=r(869);v.exports=s;function s(n,l){return e(n[0].mul(l[1]).add(l[0].mul(n[1])),n[1].mul(l[1]))}},1318:function(v){v.exports=p;function p(r,e){return r[0].mul(e[1]).cmp(e[0].mul(r[1]))}},8697:function(v,p,r){var e=r(869);v.exports=s;function s(n,l){return e(n[0].mul(l[1]),n[1].mul(l[0]))}},7842:function(v,p,r){var e=r(6330),s=r(1533),n=r(2651),l=r(4387),f=r(869),u=r(8697);v.exports=g;function g(h,T){if(e(h))return T?u(h,g(T)):[h[0].clone(),h[1].clone()];var c=0,i,d;if(s(h))i=h.clone();else if(typeof h=="string")i=l(h);else{if(h===0)return[n(0),n(1)];if(h===Math.floor(h))i=n(h);else{for(;h!==Math.floor(h);)h=h*Math.pow(2,256),c-=256;i=n(h)}}if(e(T))i.mul(T[1]),d=T[0].clone();else if(s(T))d=T.clone();else if(typeof T=="string")d=l(T);else if(!T)d=n(1);else if(T===Math.floor(T))d=n(T);else{for(;T!==Math.floor(T);)T=T*Math.pow(2,256),c+=256;d=n(T)}return c>0?i=i.ushln(c):c<0&&(d=d.ushln(-c)),f(i,d)}},6330:function(v,p,r){var e=r(1533);v.exports=s;function s(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},5716:function(v,p,r){var e=r(6859);v.exports=s;function s(n){return n.cmp(new e(0))}},1369:function(v,p,r){var e=r(5716);v.exports=s;function s(n){var l=n.length,f=n.words,u=0;if(l===1)u=f[0];else if(l===2)u=f[0]+f[1]*67108864;else for(var g=0;g<l;g++){var h=f[g];u+=h*Math.pow(67108864,g)}return e(n)*u}},4025:function(v,p,r){var e=r(2361),s=r(8828).countTrailingZeros;v.exports=n;function n(l){var f=s(e.lo(l));if(f<32)return f;var u=s(e.hi(l));return u>20?52:u+32}},1533:function(v,p,r){r(6859),v.exports=e;function e(s){return s&&typeof s=="object"&&!!s.words}},2651:function(v,p,r){var e=r(6859),s=r(2361);v.exports=n;function n(l){var f=s.exponent(l);return f<52?new e(l):new e(l*Math.pow(2,52-f)).ushln(f-52)}},869:function(v,p,r){var e=r(2651),s=r(5716);v.exports=n;function n(l,f){var u=s(l),g=s(f);if(u===0)return[e(0),e(1)];if(g===0)return[e(0),e(0)];g<0&&(l=l.neg(),f=f.neg());var h=l.gcd(f);return h.cmpn(1)?[l.div(h),f.div(h)]:[l,f]}},4387:function(v,p,r){var e=r(6859);v.exports=s;function s(n){return new e(n)}},6504:function(v,p,r){var e=r(869);v.exports=s;function s(n,l){return e(n[0].mul(l[0]),n[1].mul(l[1]))}},7721:function(v,p,r){var e=r(5716);v.exports=s;function s(n){return e(n[0])*e(n[1])}},5572:function(v,p,r){var e=r(869);v.exports=s;function s(n,l){return e(n[0].mul(l[1]).sub(n[1].mul(l[0])),n[1].mul(l[1]))}},946:function(v,p,r){var e=r(1369),s=r(4025);v.exports=n;function n(l){var f=l[0],u=l[1];if(f.cmpn(0)===0)return 0;var g=f.abs().divmod(u.abs()),h=g.div,T=e(h),c=g.mod,i=f.negative!==u.negative?-1:1;if(c.cmpn(0)===0)return i*T;if(T){var d=s(T)+4,x=e(c.ushln(d).divRound(u));return i*(T+x*Math.pow(2,-d))}else{var w=u.bitLength()-c.bitLength()+53,x=e(c.ushln(w).divRound(u));return w<1023?i*x*Math.pow(2,-w):(x*=Math.pow(2,-1023),i*x*Math.pow(2,1023-w))}}},2478:function(v){function p(f,u,g,h,T){for(var c=T+1;h<=T;){var i=h+T>>>1,d=f[i],x=g!==void 0?g(d,u):d-u;x>=0?(c=i,T=i-1):h=i+1}return c}function r(f,u,g,h,T){for(var c=T+1;h<=T;){var i=h+T>>>1,d=f[i],x=g!==void 0?g(d,u):d-u;x>0?(c=i,T=i-1):h=i+1}return c}function e(f,u,g,h,T){for(var c=h-1;h<=T;){var i=h+T>>>1,d=f[i],x=g!==void 0?g(d,u):d-u;x<0?(c=i,h=i+1):T=i-1}return c}function s(f,u,g,h,T){for(var c=h-1;h<=T;){var i=h+T>>>1,d=f[i],x=g!==void 0?g(d,u):d-u;x<=0?(c=i,h=i+1):T=i-1}return c}function n(f,u,g,h,T){for(;h<=T;){var c=h+T>>>1,i=f[c],d=g!==void 0?g(i,u):i-u;if(d===0)return c;d<=0?h=c+1:T=c-1}return-1}function l(f,u,g,h,T,c){return typeof g=="function"?c(f,u,g,h===void 0?0:h|0,T===void 0?f.length-1:T|0):c(f,u,void 0,g===void 0?0:g|0,h===void 0?f.length-1:h|0)}v.exports={ge:function(f,u,g,h,T){return l(f,u,g,h,T,p)},gt:function(f,u,g,h,T){return l(f,u,g,h,T,r)},lt:function(f,u,g,h,T){return l(f,u,g,h,T,e)},le:function(f,u,g,h,T){return l(f,u,g,h,T,s)},eq:function(f,u,g,h,T){return l(f,u,g,h,T,n)}}},8828:function(v,p){"use restrict";var r=32;p.INT_BITS=r,p.INT_MAX=2147483647,p.INT_MIN=-1<<r-1,p.sign=function(n){return(n>0)-(n<0)},p.abs=function(n){var l=n>>r-1;return(n^l)-l},p.min=function(n,l){return l^(n^l)&-(n<l)},p.max=function(n,l){return n^(n^l)&-(n<l)},p.isPow2=function(n){return!(n&n-1)&&!!n},p.log2=function(n){var l,f;return l=(n>65535)<<4,n>>>=l,f=(n>255)<<3,n>>>=f,l|=f,f=(n>15)<<2,n>>>=f,l|=f,f=(n>3)<<1,n>>>=f,l|=f,l|n>>1},p.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},p.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function e(n){var l=32;return n&=-n,n&&l--,n&65535&&(l-=16),n&16711935&&(l-=8),n&252645135&&(l-=4),n&858993459&&(l-=2),n&1431655765&&(l-=1),l}p.countTrailingZeros=e,p.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},p.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},p.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var s=new Array(256);(function(n){for(var l=0;l<256;++l){var f=l,u=l,g=7;for(f>>>=1;f;f>>>=1)u<<=1,u|=f&1,--g;n[l]=u<<g&255}})(s),p.reverse=function(n){return s[n&255]<<24|s[n>>>8&255]<<16|s[n>>>16&255]<<8|s[n>>>24&255]},p.interleave2=function(n,l){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,n|l<<1},p.deinterleave2=function(n,l){return n=n>>>l&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},p.interleave3=function(n,l,f){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,n|=l<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,n|f<<2},p.deinterleave3=function(n,l){return n=n>>>l&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},p.nextCombination=function(n){var l=n|n-1;return l+1|(~l&-~l)-1>>>e(n)+1}},6859:function(v,p,r){v=r.nmd(v),function(e,s){function n(F,_){if(!F)throw new Error(_||"Assertion failed")}function l(F,_){F.super_=_;var N=function(){};N.prototype=_.prototype,F.prototype=new N,F.prototype.constructor=F}function f(F,_,N){if(f.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&((_==="le"||_==="be")&&(N=_,_=10),this._init(F||0,_||10,N||"be"))}typeof e=="object"?e.exports=f:s.BN=f,f.BN=f,f.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=r(7790).Buffer}catch{}f.isBN=function(_){return _ instanceof f?!0:_!==null&&typeof _=="object"&&_.constructor.wordSize===f.wordSize&&Array.isArray(_.words)},f.max=function(_,N){return _.cmp(N)>0?_:N},f.min=function(_,N){return _.cmp(N)<0?_:N},f.prototype._init=function(_,N,G){if(typeof _=="number")return this._initNumber(_,N,G);if(typeof _=="object")return this._initArray(_,N,G);N==="hex"&&(N=16),n(N===(N|0)&&N>=2&&N<=36),_=_.toString().replace(/\s+/g,"");var X=0;_[0]==="-"&&(X++,this.negative=1),X<_.length&&(N===16?this._parseHex(_,X,G):(this._parseBase(_,N,X),G==="le"&&this._initArray(this.toArray(),N,G)))},f.prototype._initNumber=function(_,N,G){_<0&&(this.negative=1,_=-_),_<67108864?(this.words=[_&67108863],this.length=1):_<4503599627370496?(this.words=[_&67108863,_/67108864&67108863],this.length=2):(n(_<9007199254740992),this.words=[_&67108863,_/67108864&67108863,1],this.length=3),G==="le"&&this._initArray(this.toArray(),N,G)},f.prototype._initArray=function(_,N,G){if(n(typeof _.length=="number"),_.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(_.length/3),this.words=new Array(this.length);for(var X=0;X<this.length;X++)this.words[X]=0;var $,et,ot=0;if(G==="be")for(X=_.length-1,$=0;X>=0;X-=3)et=_[X]|_[X-1]<<8|_[X-2]<<16,this.words[$]|=et<<ot&67108863,this.words[$+1]=et>>>26-ot&67108863,ot+=24,ot>=26&&(ot-=26,$++);else if(G==="le")for(X=0,$=0;X<_.length;X+=3)et=_[X]|_[X+1]<<8|_[X+2]<<16,this.words[$]|=et<<ot&67108863,this.words[$+1]=et>>>26-ot&67108863,ot+=24,ot>=26&&(ot-=26,$++);return this.strip()};function g(F,_){var N=F.charCodeAt(_);return N>=65&&N<=70?N-55:N>=97&&N<=102?N-87:N-48&15}function h(F,_,N){var G=g(F,N);return N-1>=_&&(G|=g(F,N-1)<<4),G}f.prototype._parseHex=function(_,N,G){this.length=Math.ceil((_.length-N)/6),this.words=new Array(this.length);for(var X=0;X<this.length;X++)this.words[X]=0;var $=0,et=0,ot;if(G==="be")for(X=_.length-1;X>=N;X-=2)ot=h(_,N,X)<<$,this.words[et]|=ot&67108863,$>=18?($-=18,et+=1,this.words[et]|=ot>>>26):$+=8;else{var nt=_.length-N;for(X=nt%2===0?N+1:N;X<_.length;X+=2)ot=h(_,N,X)<<$,this.words[et]|=ot&67108863,$>=18?($-=18,et+=1,this.words[et]|=ot>>>26):$+=8}this.strip()};function T(F,_,N,G){for(var X=0,$=Math.min(F.length,N),et=_;et<$;et++){var ot=F.charCodeAt(et)-48;X*=G,ot>=49?X+=ot-49+10:ot>=17?X+=ot-17+10:X+=ot}return X}f.prototype._parseBase=function(_,N,G){this.words=[0],this.length=1;for(var X=0,$=1;$<=67108863;$*=N)X++;X--,$=$/N|0;for(var et=_.length-G,ot=et%X,nt=Math.min(et,et-ot)+G,Z=0,Q=G;Q<nt;Q+=X)Z=T(_,Q,Q+X,N),this.imuln($),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z);if(ot!==0){var W=1;for(Z=T(_,Q,_.length,N),Q=0;Q<ot;Q++)W*=N;this.imuln(W),this.words[0]+Z<67108864?this.words[0]+=Z:this._iaddn(Z)}this.strip()},f.prototype.copy=function(_){_.words=new Array(this.length);for(var N=0;N<this.length;N++)_.words[N]=this.words[N];_.length=this.length,_.negative=this.negative,_.red=this.red},f.prototype.clone=function(){var _=new f(null);return this.copy(_),_},f.prototype._expand=function(_){for(;this.length<_;)this.words[this.length++]=0;return this},f.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},f.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},f.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],i=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];f.prototype.toString=function(_,N){_=_||10,N=N|0||1;var G;if(_===16||_==="hex"){G="";for(var X=0,$=0,et=0;et<this.length;et++){var ot=this.words[et],nt=((ot<<X|$)&16777215).toString(16);$=ot>>>24-X&16777215,$!==0||et!==this.length-1?G=c[6-nt.length]+nt+G:G=nt+G,X+=2,X>=26&&(X-=26,et--)}for($!==0&&(G=$.toString(16)+G);G.length%N!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}if(_===(_|0)&&_>=2&&_<=36){var Z=i[_],Q=d[_];G="";var W=this.clone();for(W.negative=0;!W.isZero();){var J=W.modn(Q).toString(_);W=W.idivn(Q),W.isZero()?G=J+G:G=c[Z-J.length]+J+G}for(this.isZero()&&(G="0"+G);G.length%N!==0;)G="0"+G;return this.negative!==0&&(G="-"+G),G}n(!1,"Base should be between 2 and 36")},f.prototype.toNumber=function(){var _=this.words[0];return this.length===2?_+=this.words[1]*67108864:this.length===3&&this.words[2]===1?_+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-_:_},f.prototype.toJSON=function(){return this.toString(16)},f.prototype.toBuffer=function(_,N){return n(typeof u<"u"),this.toArrayLike(u,_,N)},f.prototype.toArray=function(_,N){return this.toArrayLike(Array,_,N)},f.prototype.toArrayLike=function(_,N,G){var X=this.byteLength(),$=G||Math.max(1,X);n(X<=$,"byte array longer than desired length"),n($>0,"Requested array length <= 0"),this.strip();var et=N==="le",ot=new _($),nt,Z,Q=this.clone();if(et){for(Z=0;!Q.isZero();Z++)nt=Q.andln(255),Q.iushrn(8),ot[Z]=nt;for(;Z<$;Z++)ot[Z]=0}else{for(Z=0;Z<$-X;Z++)ot[Z]=0;for(Z=0;!Q.isZero();Z++)nt=Q.andln(255),Q.iushrn(8),ot[$-Z-1]=nt}return ot},Math.clz32?f.prototype._countBits=function(_){return 32-Math.clz32(_)}:f.prototype._countBits=function(_){var N=_,G=0;return N>=4096&&(G+=13,N>>>=13),N>=64&&(G+=7,N>>>=7),N>=8&&(G+=4,N>>>=4),N>=2&&(G+=2,N>>>=2),G+N},f.prototype._zeroBits=function(_){if(_===0)return 26;var N=_,G=0;return N&8191||(G+=13,N>>>=13),N&127||(G+=7,N>>>=7),N&15||(G+=4,N>>>=4),N&3||(G+=2,N>>>=2),N&1||G++,G},f.prototype.bitLength=function(){var _=this.words[this.length-1],N=this._countBits(_);return(this.length-1)*26+N};function x(F){for(var _=new Array(F.bitLength()),N=0;N<_.length;N++){var G=N/26|0,X=N%26;_[N]=(F.words[G]&1<<X)>>>X}return _}f.prototype.zeroBits=function(){if(this.isZero())return 0;for(var _=0,N=0;N<this.length;N++){var G=this._zeroBits(this.words[N]);if(_+=G,G!==26)break}return _},f.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},f.prototype.toTwos=function(_){return this.negative!==0?this.abs().inotn(_).iaddn(1):this.clone()},f.prototype.fromTwos=function(_){return this.testn(_-1)?this.notn(_).iaddn(1).ineg():this.clone()},f.prototype.isNeg=function(){return this.negative!==0},f.prototype.neg=function(){return this.clone().ineg()},f.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},f.prototype.iuor=function(_){for(;this.length<_.length;)this.words[this.length++]=0;for(var N=0;N<_.length;N++)this.words[N]=this.words[N]|_.words[N];return this.strip()},f.prototype.ior=function(_){return n((this.negative|_.negative)===0),this.iuor(_)},f.prototype.or=function(_){return this.length>_.length?this.clone().ior(_):_.clone().ior(this)},f.prototype.uor=function(_){return this.length>_.length?this.clone().iuor(_):_.clone().iuor(this)},f.prototype.iuand=function(_){var N;this.length>_.length?N=_:N=this;for(var G=0;G<N.length;G++)this.words[G]=this.words[G]&_.words[G];return this.length=N.length,this.strip()},f.prototype.iand=function(_){return n((this.negative|_.negative)===0),this.iuand(_)},f.prototype.and=function(_){return this.length>_.length?this.clone().iand(_):_.clone().iand(this)},f.prototype.uand=function(_){return this.length>_.length?this.clone().iuand(_):_.clone().iuand(this)},f.prototype.iuxor=function(_){var N,G;this.length>_.length?(N=this,G=_):(N=_,G=this);for(var X=0;X<G.length;X++)this.words[X]=N.words[X]^G.words[X];if(this!==N)for(;X<N.length;X++)this.words[X]=N.words[X];return this.length=N.length,this.strip()},f.prototype.ixor=function(_){return n((this.negative|_.negative)===0),this.iuxor(_)},f.prototype.xor=function(_){return this.length>_.length?this.clone().ixor(_):_.clone().ixor(this)},f.prototype.uxor=function(_){return this.length>_.length?this.clone().iuxor(_):_.clone().iuxor(this)},f.prototype.inotn=function(_){n(typeof _=="number"&&_>=0);var N=Math.ceil(_/26)|0,G=_%26;this._expand(N),G>0&&N--;for(var X=0;X<N;X++)this.words[X]=~this.words[X]&67108863;return G>0&&(this.words[X]=~this.words[X]&67108863>>26-G),this.strip()},f.prototype.notn=function(_){return this.clone().inotn(_)},f.prototype.setn=function(_,N){n(typeof _=="number"&&_>=0);var G=_/26|0,X=_%26;return this._expand(G+1),N?this.words[G]=this.words[G]|1<<X:this.words[G]=this.words[G]&~(1<<X),this.strip()},f.prototype.iadd=function(_){var N;if(this.negative!==0&&_.negative===0)return this.negative=0,N=this.isub(_),this.negative^=1,this._normSign();if(this.negative===0&&_.negative!==0)return _.negative=0,N=this.isub(_),_.negative=1,N._normSign();var G,X;this.length>_.length?(G=this,X=_):(G=_,X=this);for(var $=0,et=0;et<X.length;et++)N=(G.words[et]|0)+(X.words[et]|0)+$,this.words[et]=N&67108863,$=N>>>26;for(;$!==0&&et<G.length;et++)N=(G.words[et]|0)+$,this.words[et]=N&67108863,$=N>>>26;if(this.length=G.length,$!==0)this.words[this.length]=$,this.length++;else if(G!==this)for(;et<G.length;et++)this.words[et]=G.words[et];return this},f.prototype.add=function(_){var N;return _.negative!==0&&this.negative===0?(_.negative=0,N=this.sub(_),_.negative^=1,N):_.negative===0&&this.negative!==0?(this.negative=0,N=_.sub(this),this.negative=1,N):this.length>_.length?this.clone().iadd(_):_.clone().iadd(this)},f.prototype.isub=function(_){if(_.negative!==0){_.negative=0;var N=this.iadd(_);return _.negative=1,N._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(_),this.negative=1,this._normSign();var G=this.cmp(_);if(G===0)return this.negative=0,this.length=1,this.words[0]=0,this;var X,$;G>0?(X=this,$=_):(X=_,$=this);for(var et=0,ot=0;ot<$.length;ot++)N=(X.words[ot]|0)-($.words[ot]|0)+et,et=N>>26,this.words[ot]=N&67108863;for(;et!==0&&ot<X.length;ot++)N=(X.words[ot]|0)+et,et=N>>26,this.words[ot]=N&67108863;if(et===0&&ot<X.length&&X!==this)for(;ot<X.length;ot++)this.words[ot]=X.words[ot];return this.length=Math.max(this.length,ot),X!==this&&(this.negative=1),this.strip()},f.prototype.sub=function(_){return this.clone().isub(_)};function w(F,_,N){N.negative=_.negative^F.negative;var G=F.length+_.length|0;N.length=G,G=G-1|0;var X=F.words[0]|0,$=_.words[0]|0,et=X*$,ot=et&67108863,nt=et/67108864|0;N.words[0]=ot;for(var Z=1;Z<G;Z++){for(var Q=nt>>>26,W=nt&67108863,J=Math.min(Z,_.length-1),it=Math.max(0,Z-F.length+1);it<=J;it++){var K=Z-it|0;X=F.words[K]|0,$=_.words[it]|0,et=X*$+W,Q+=et/67108864|0,W=et&67108863}N.words[Z]=W|0,nt=Q|0}return nt!==0?N.words[Z]=nt|0:N.length--,N.strip()}var C=function(_,N,G){var X=_.words,$=N.words,et=G.words,ot=0,nt,Z,Q,W=X[0]|0,J=W&8191,it=W>>>13,K=X[1]|0,H=K&8191,at=K>>>13,tt=X[2]|0,lt=tt&8191,dt=tt>>>13,mt=X[3]|0,gt=mt&8191,Mt=mt>>>13,Lt=X[4]|0,zt=Lt&8191,xt=Lt>>>13,Ct=X[5]|0,wt=Ct&8191,Rt=Ct>>>13,Tt=X[6]|0,Bt=Tt&8191,Gt=Tt>>>13,te=X[7]|0,Wt=te&8191,jt=te>>>13,ie=X[8]|0,ue=ie&8191,fe=ie>>>13,pe=X[9]|0,Te=pe&8191,Qt=pe>>>13,Pt=$[0]|0,Ot=Pt&8191,Nt=Pt>>>13,Ht=$[1]|0,St=Ht&8191,kt=Ht>>>13,Ft=$[2]|0,At=Ft&8191,ft=Ft>>>13,pt=$[3]|0,Dt=pt&8191,Ut=pt>>>13,$t=$[4]|0,re=$t&8191,Be=$t>>>13,We=$[5]|0,me=We&8191,Se=We>>>13,je=$[6]|0,vr=je&8191,he=je>>>13,Ye=$[7]|0,Qe=Ye&8191,mr=Ye>>>13,ir=$[8]|0,ve=ir&8191,ne=ir>>>13,ge=$[9]|0,Ae=ge&8191,Re=ge>>>13;G.negative=_.negative^N.negative,G.length=19,nt=Math.imul(J,Ot),Z=Math.imul(J,Nt),Z=Z+Math.imul(it,Ot)|0,Q=Math.imul(it,Nt);var ze=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(ze>>>26)|0,ze&=67108863,nt=Math.imul(H,Ot),Z=Math.imul(H,Nt),Z=Z+Math.imul(at,Ot)|0,Q=Math.imul(at,Nt),nt=nt+Math.imul(J,St)|0,Z=Z+Math.imul(J,kt)|0,Z=Z+Math.imul(it,St)|0,Q=Q+Math.imul(it,kt)|0;var ke=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(ke>>>26)|0,ke&=67108863,nt=Math.imul(lt,Ot),Z=Math.imul(lt,Nt),Z=Z+Math.imul(dt,Ot)|0,Q=Math.imul(dt,Nt),nt=nt+Math.imul(H,St)|0,Z=Z+Math.imul(H,kt)|0,Z=Z+Math.imul(at,St)|0,Q=Q+Math.imul(at,kt)|0,nt=nt+Math.imul(J,At)|0,Z=Z+Math.imul(J,ft)|0,Z=Z+Math.imul(it,At)|0,Q=Q+Math.imul(it,ft)|0;var _e=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(_e>>>26)|0,_e&=67108863,nt=Math.imul(gt,Ot),Z=Math.imul(gt,Nt),Z=Z+Math.imul(Mt,Ot)|0,Q=Math.imul(Mt,Nt),nt=nt+Math.imul(lt,St)|0,Z=Z+Math.imul(lt,kt)|0,Z=Z+Math.imul(dt,St)|0,Q=Q+Math.imul(dt,kt)|0,nt=nt+Math.imul(H,At)|0,Z=Z+Math.imul(H,ft)|0,Z=Z+Math.imul(at,At)|0,Q=Q+Math.imul(at,ft)|0,nt=nt+Math.imul(J,Dt)|0,Z=Z+Math.imul(J,Ut)|0,Z=Z+Math.imul(it,Dt)|0,Q=Q+Math.imul(it,Ut)|0;var Ke=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,nt=Math.imul(zt,Ot),Z=Math.imul(zt,Nt),Z=Z+Math.imul(xt,Ot)|0,Q=Math.imul(xt,Nt),nt=nt+Math.imul(gt,St)|0,Z=Z+Math.imul(gt,kt)|0,Z=Z+Math.imul(Mt,St)|0,Q=Q+Math.imul(Mt,kt)|0,nt=nt+Math.imul(lt,At)|0,Z=Z+Math.imul(lt,ft)|0,Z=Z+Math.imul(dt,At)|0,Q=Q+Math.imul(dt,ft)|0,nt=nt+Math.imul(H,Dt)|0,Z=Z+Math.imul(H,Ut)|0,Z=Z+Math.imul(at,Dt)|0,Q=Q+Math.imul(at,Ut)|0,nt=nt+Math.imul(J,re)|0,Z=Z+Math.imul(J,Be)|0,Z=Z+Math.imul(it,re)|0,Q=Q+Math.imul(it,Be)|0;var hr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(hr>>>26)|0,hr&=67108863,nt=Math.imul(wt,Ot),Z=Math.imul(wt,Nt),Z=Z+Math.imul(Rt,Ot)|0,Q=Math.imul(Rt,Nt),nt=nt+Math.imul(zt,St)|0,Z=Z+Math.imul(zt,kt)|0,Z=Z+Math.imul(xt,St)|0,Q=Q+Math.imul(xt,kt)|0,nt=nt+Math.imul(gt,At)|0,Z=Z+Math.imul(gt,ft)|0,Z=Z+Math.imul(Mt,At)|0,Q=Q+Math.imul(Mt,ft)|0,nt=nt+Math.imul(lt,Dt)|0,Z=Z+Math.imul(lt,Ut)|0,Z=Z+Math.imul(dt,Dt)|0,Q=Q+Math.imul(dt,Ut)|0,nt=nt+Math.imul(H,re)|0,Z=Z+Math.imul(H,Be)|0,Z=Z+Math.imul(at,re)|0,Q=Q+Math.imul(at,Be)|0,nt=nt+Math.imul(J,me)|0,Z=Z+Math.imul(J,Se)|0,Z=Z+Math.imul(it,me)|0,Q=Q+Math.imul(it,Se)|0;var cr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(cr>>>26)|0,cr&=67108863,nt=Math.imul(Bt,Ot),Z=Math.imul(Bt,Nt),Z=Z+Math.imul(Gt,Ot)|0,Q=Math.imul(Gt,Nt),nt=nt+Math.imul(wt,St)|0,Z=Z+Math.imul(wt,kt)|0,Z=Z+Math.imul(Rt,St)|0,Q=Q+Math.imul(Rt,kt)|0,nt=nt+Math.imul(zt,At)|0,Z=Z+Math.imul(zt,ft)|0,Z=Z+Math.imul(xt,At)|0,Q=Q+Math.imul(xt,ft)|0,nt=nt+Math.imul(gt,Dt)|0,Z=Z+Math.imul(gt,Ut)|0,Z=Z+Math.imul(Mt,Dt)|0,Q=Q+Math.imul(Mt,Ut)|0,nt=nt+Math.imul(lt,re)|0,Z=Z+Math.imul(lt,Be)|0,Z=Z+Math.imul(dt,re)|0,Q=Q+Math.imul(dt,Be)|0,nt=nt+Math.imul(H,me)|0,Z=Z+Math.imul(H,Se)|0,Z=Z+Math.imul(at,me)|0,Q=Q+Math.imul(at,Se)|0,nt=nt+Math.imul(J,vr)|0,Z=Z+Math.imul(J,he)|0,Z=Z+Math.imul(it,vr)|0,Q=Q+Math.imul(it,he)|0;var dr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(dr>>>26)|0,dr&=67108863,nt=Math.imul(Wt,Ot),Z=Math.imul(Wt,Nt),Z=Z+Math.imul(jt,Ot)|0,Q=Math.imul(jt,Nt),nt=nt+Math.imul(Bt,St)|0,Z=Z+Math.imul(Bt,kt)|0,Z=Z+Math.imul(Gt,St)|0,Q=Q+Math.imul(Gt,kt)|0,nt=nt+Math.imul(wt,At)|0,Z=Z+Math.imul(wt,ft)|0,Z=Z+Math.imul(Rt,At)|0,Q=Q+Math.imul(Rt,ft)|0,nt=nt+Math.imul(zt,Dt)|0,Z=Z+Math.imul(zt,Ut)|0,Z=Z+Math.imul(xt,Dt)|0,Q=Q+Math.imul(xt,Ut)|0,nt=nt+Math.imul(gt,re)|0,Z=Z+Math.imul(gt,Be)|0,Z=Z+Math.imul(Mt,re)|0,Q=Q+Math.imul(Mt,Be)|0,nt=nt+Math.imul(lt,me)|0,Z=Z+Math.imul(lt,Se)|0,Z=Z+Math.imul(dt,me)|0,Q=Q+Math.imul(dt,Se)|0,nt=nt+Math.imul(H,vr)|0,Z=Z+Math.imul(H,he)|0,Z=Z+Math.imul(at,vr)|0,Q=Q+Math.imul(at,he)|0,nt=nt+Math.imul(J,Qe)|0,Z=Z+Math.imul(J,mr)|0,Z=Z+Math.imul(it,Qe)|0,Q=Q+Math.imul(it,mr)|0;var fr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(fr>>>26)|0,fr&=67108863,nt=Math.imul(ue,Ot),Z=Math.imul(ue,Nt),Z=Z+Math.imul(fe,Ot)|0,Q=Math.imul(fe,Nt),nt=nt+Math.imul(Wt,St)|0,Z=Z+Math.imul(Wt,kt)|0,Z=Z+Math.imul(jt,St)|0,Q=Q+Math.imul(jt,kt)|0,nt=nt+Math.imul(Bt,At)|0,Z=Z+Math.imul(Bt,ft)|0,Z=Z+Math.imul(Gt,At)|0,Q=Q+Math.imul(Gt,ft)|0,nt=nt+Math.imul(wt,Dt)|0,Z=Z+Math.imul(wt,Ut)|0,Z=Z+Math.imul(Rt,Dt)|0,Q=Q+Math.imul(Rt,Ut)|0,nt=nt+Math.imul(zt,re)|0,Z=Z+Math.imul(zt,Be)|0,Z=Z+Math.imul(xt,re)|0,Q=Q+Math.imul(xt,Be)|0,nt=nt+Math.imul(gt,me)|0,Z=Z+Math.imul(gt,Se)|0,Z=Z+Math.imul(Mt,me)|0,Q=Q+Math.imul(Mt,Se)|0,nt=nt+Math.imul(lt,vr)|0,Z=Z+Math.imul(lt,he)|0,Z=Z+Math.imul(dt,vr)|0,Q=Q+Math.imul(dt,he)|0,nt=nt+Math.imul(H,Qe)|0,Z=Z+Math.imul(H,mr)|0,Z=Z+Math.imul(at,Qe)|0,Q=Q+Math.imul(at,mr)|0,nt=nt+Math.imul(J,ve)|0,Z=Z+Math.imul(J,ne)|0,Z=Z+Math.imul(it,ve)|0,Q=Q+Math.imul(it,ne)|0;var Lr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,nt=Math.imul(Te,Ot),Z=Math.imul(Te,Nt),Z=Z+Math.imul(Qt,Ot)|0,Q=Math.imul(Qt,Nt),nt=nt+Math.imul(ue,St)|0,Z=Z+Math.imul(ue,kt)|0,Z=Z+Math.imul(fe,St)|0,Q=Q+Math.imul(fe,kt)|0,nt=nt+Math.imul(Wt,At)|0,Z=Z+Math.imul(Wt,ft)|0,Z=Z+Math.imul(jt,At)|0,Q=Q+Math.imul(jt,ft)|0,nt=nt+Math.imul(Bt,Dt)|0,Z=Z+Math.imul(Bt,Ut)|0,Z=Z+Math.imul(Gt,Dt)|0,Q=Q+Math.imul(Gt,Ut)|0,nt=nt+Math.imul(wt,re)|0,Z=Z+Math.imul(wt,Be)|0,Z=Z+Math.imul(Rt,re)|0,Q=Q+Math.imul(Rt,Be)|0,nt=nt+Math.imul(zt,me)|0,Z=Z+Math.imul(zt,Se)|0,Z=Z+Math.imul(xt,me)|0,Q=Q+Math.imul(xt,Se)|0,nt=nt+Math.imul(gt,vr)|0,Z=Z+Math.imul(gt,he)|0,Z=Z+Math.imul(Mt,vr)|0,Q=Q+Math.imul(Mt,he)|0,nt=nt+Math.imul(lt,Qe)|0,Z=Z+Math.imul(lt,mr)|0,Z=Z+Math.imul(dt,Qe)|0,Q=Q+Math.imul(dt,mr)|0,nt=nt+Math.imul(H,ve)|0,Z=Z+Math.imul(H,ne)|0,Z=Z+Math.imul(at,ve)|0,Q=Q+Math.imul(at,ne)|0,nt=nt+Math.imul(J,Ae)|0,Z=Z+Math.imul(J,Re)|0,Z=Z+Math.imul(it,Ae)|0,Q=Q+Math.imul(it,Re)|0;var xr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(xr>>>26)|0,xr&=67108863,nt=Math.imul(Te,St),Z=Math.imul(Te,kt),Z=Z+Math.imul(Qt,St)|0,Q=Math.imul(Qt,kt),nt=nt+Math.imul(ue,At)|0,Z=Z+Math.imul(ue,ft)|0,Z=Z+Math.imul(fe,At)|0,Q=Q+Math.imul(fe,ft)|0,nt=nt+Math.imul(Wt,Dt)|0,Z=Z+Math.imul(Wt,Ut)|0,Z=Z+Math.imul(jt,Dt)|0,Q=Q+Math.imul(jt,Ut)|0,nt=nt+Math.imul(Bt,re)|0,Z=Z+Math.imul(Bt,Be)|0,Z=Z+Math.imul(Gt,re)|0,Q=Q+Math.imul(Gt,Be)|0,nt=nt+Math.imul(wt,me)|0,Z=Z+Math.imul(wt,Se)|0,Z=Z+Math.imul(Rt,me)|0,Q=Q+Math.imul(Rt,Se)|0,nt=nt+Math.imul(zt,vr)|0,Z=Z+Math.imul(zt,he)|0,Z=Z+Math.imul(xt,vr)|0,Q=Q+Math.imul(xt,he)|0,nt=nt+Math.imul(gt,Qe)|0,Z=Z+Math.imul(gt,mr)|0,Z=Z+Math.imul(Mt,Qe)|0,Q=Q+Math.imul(Mt,mr)|0,nt=nt+Math.imul(lt,ve)|0,Z=Z+Math.imul(lt,ne)|0,Z=Z+Math.imul(dt,ve)|0,Q=Q+Math.imul(dt,ne)|0,nt=nt+Math.imul(H,Ae)|0,Z=Z+Math.imul(H,Re)|0,Z=Z+Math.imul(at,Ae)|0,Q=Q+Math.imul(at,Re)|0;var Yt=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,nt=Math.imul(Te,At),Z=Math.imul(Te,ft),Z=Z+Math.imul(Qt,At)|0,Q=Math.imul(Qt,ft),nt=nt+Math.imul(ue,Dt)|0,Z=Z+Math.imul(ue,Ut)|0,Z=Z+Math.imul(fe,Dt)|0,Q=Q+Math.imul(fe,Ut)|0,nt=nt+Math.imul(Wt,re)|0,Z=Z+Math.imul(Wt,Be)|0,Z=Z+Math.imul(jt,re)|0,Q=Q+Math.imul(jt,Be)|0,nt=nt+Math.imul(Bt,me)|0,Z=Z+Math.imul(Bt,Se)|0,Z=Z+Math.imul(Gt,me)|0,Q=Q+Math.imul(Gt,Se)|0,nt=nt+Math.imul(wt,vr)|0,Z=Z+Math.imul(wt,he)|0,Z=Z+Math.imul(Rt,vr)|0,Q=Q+Math.imul(Rt,he)|0,nt=nt+Math.imul(zt,Qe)|0,Z=Z+Math.imul(zt,mr)|0,Z=Z+Math.imul(xt,Qe)|0,Q=Q+Math.imul(xt,mr)|0,nt=nt+Math.imul(gt,ve)|0,Z=Z+Math.imul(gt,ne)|0,Z=Z+Math.imul(Mt,ve)|0,Q=Q+Math.imul(Mt,ne)|0,nt=nt+Math.imul(lt,Ae)|0,Z=Z+Math.imul(lt,Re)|0,Z=Z+Math.imul(dt,Ae)|0,Q=Q+Math.imul(dt,Re)|0;var Jt=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,nt=Math.imul(Te,Dt),Z=Math.imul(Te,Ut),Z=Z+Math.imul(Qt,Dt)|0,Q=Math.imul(Qt,Ut),nt=nt+Math.imul(ue,re)|0,Z=Z+Math.imul(ue,Be)|0,Z=Z+Math.imul(fe,re)|0,Q=Q+Math.imul(fe,Be)|0,nt=nt+Math.imul(Wt,me)|0,Z=Z+Math.imul(Wt,Se)|0,Z=Z+Math.imul(jt,me)|0,Q=Q+Math.imul(jt,Se)|0,nt=nt+Math.imul(Bt,vr)|0,Z=Z+Math.imul(Bt,he)|0,Z=Z+Math.imul(Gt,vr)|0,Q=Q+Math.imul(Gt,he)|0,nt=nt+Math.imul(wt,Qe)|0,Z=Z+Math.imul(wt,mr)|0,Z=Z+Math.imul(Rt,Qe)|0,Q=Q+Math.imul(Rt,mr)|0,nt=nt+Math.imul(zt,ve)|0,Z=Z+Math.imul(zt,ne)|0,Z=Z+Math.imul(xt,ve)|0,Q=Q+Math.imul(xt,ne)|0,nt=nt+Math.imul(gt,Ae)|0,Z=Z+Math.imul(gt,Re)|0,Z=Z+Math.imul(Mt,Ae)|0,Q=Q+Math.imul(Mt,Re)|0;var qe=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(qe>>>26)|0,qe&=67108863,nt=Math.imul(Te,re),Z=Math.imul(Te,Be),Z=Z+Math.imul(Qt,re)|0,Q=Math.imul(Qt,Be),nt=nt+Math.imul(ue,me)|0,Z=Z+Math.imul(ue,Se)|0,Z=Z+Math.imul(fe,me)|0,Q=Q+Math.imul(fe,Se)|0,nt=nt+Math.imul(Wt,vr)|0,Z=Z+Math.imul(Wt,he)|0,Z=Z+Math.imul(jt,vr)|0,Q=Q+Math.imul(jt,he)|0,nt=nt+Math.imul(Bt,Qe)|0,Z=Z+Math.imul(Bt,mr)|0,Z=Z+Math.imul(Gt,Qe)|0,Q=Q+Math.imul(Gt,mr)|0,nt=nt+Math.imul(wt,ve)|0,Z=Z+Math.imul(wt,ne)|0,Z=Z+Math.imul(Rt,ve)|0,Q=Q+Math.imul(Rt,ne)|0,nt=nt+Math.imul(zt,Ae)|0,Z=Z+Math.imul(zt,Re)|0,Z=Z+Math.imul(xt,Ae)|0,Q=Q+Math.imul(xt,Re)|0;var tr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(tr>>>26)|0,tr&=67108863,nt=Math.imul(Te,me),Z=Math.imul(Te,Se),Z=Z+Math.imul(Qt,me)|0,Q=Math.imul(Qt,Se),nt=nt+Math.imul(ue,vr)|0,Z=Z+Math.imul(ue,he)|0,Z=Z+Math.imul(fe,vr)|0,Q=Q+Math.imul(fe,he)|0,nt=nt+Math.imul(Wt,Qe)|0,Z=Z+Math.imul(Wt,mr)|0,Z=Z+Math.imul(jt,Qe)|0,Q=Q+Math.imul(jt,mr)|0,nt=nt+Math.imul(Bt,ve)|0,Z=Z+Math.imul(Bt,ne)|0,Z=Z+Math.imul(Gt,ve)|0,Q=Q+Math.imul(Gt,ne)|0,nt=nt+Math.imul(wt,Ae)|0,Z=Z+Math.imul(wt,Re)|0,Z=Z+Math.imul(Rt,Ae)|0,Q=Q+Math.imul(Rt,Re)|0;var Ge=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,nt=Math.imul(Te,vr),Z=Math.imul(Te,he),Z=Z+Math.imul(Qt,vr)|0,Q=Math.imul(Qt,he),nt=nt+Math.imul(ue,Qe)|0,Z=Z+Math.imul(ue,mr)|0,Z=Z+Math.imul(fe,Qe)|0,Q=Q+Math.imul(fe,mr)|0,nt=nt+Math.imul(Wt,ve)|0,Z=Z+Math.imul(Wt,ne)|0,Z=Z+Math.imul(jt,ve)|0,Q=Q+Math.imul(jt,ne)|0,nt=nt+Math.imul(Bt,Ae)|0,Z=Z+Math.imul(Bt,Re)|0,Z=Z+Math.imul(Gt,Ae)|0,Q=Q+Math.imul(Gt,Re)|0;var Ee=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,nt=Math.imul(Te,Qe),Z=Math.imul(Te,mr),Z=Z+Math.imul(Qt,Qe)|0,Q=Math.imul(Qt,mr),nt=nt+Math.imul(ue,ve)|0,Z=Z+Math.imul(ue,ne)|0,Z=Z+Math.imul(fe,ve)|0,Q=Q+Math.imul(fe,ne)|0,nt=nt+Math.imul(Wt,Ae)|0,Z=Z+Math.imul(Wt,Re)|0,Z=Z+Math.imul(jt,Ae)|0,Q=Q+Math.imul(jt,Re)|0;var Xe=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,nt=Math.imul(Te,ve),Z=Math.imul(Te,ne),Z=Z+Math.imul(Qt,ve)|0,Q=Math.imul(Qt,ne),nt=nt+Math.imul(ue,Ae)|0,Z=Z+Math.imul(ue,Re)|0,Z=Z+Math.imul(fe,Ae)|0,Q=Q+Math.imul(fe,Re)|0;var rr=(ot+nt|0)+((Z&8191)<<13)|0;ot=(Q+(Z>>>13)|0)+(rr>>>26)|0,rr&=67108863,nt=Math.imul(Te,Ae),Z=Math.imul(Te,Re),Z=Z+Math.imul(Qt,Ae)|0,Q=Math.imul(Qt,Re);var Je=(ot+nt|0)+((Z&8191)<<13)|0;return ot=(Q+(Z>>>13)|0)+(Je>>>26)|0,Je&=67108863,et[0]=ze,et[1]=ke,et[2]=_e,et[3]=Ke,et[4]=hr,et[5]=cr,et[6]=dr,et[7]=fr,et[8]=Lr,et[9]=xr,et[10]=Yt,et[11]=Jt,et[12]=qe,et[13]=tr,et[14]=Ge,et[15]=Ee,et[16]=Xe,et[17]=rr,et[18]=Je,ot!==0&&(et[19]=ot,G.length++),G};Math.imul||(C=w);function y(F,_,N){N.negative=_.negative^F.negative,N.length=F.length+_.length;for(var G=0,X=0,$=0;$<N.length-1;$++){var et=X;X=0;for(var ot=G&67108863,nt=Math.min($,_.length-1),Z=Math.max(0,$-F.length+1);Z<=nt;Z++){var Q=$-Z,W=F.words[Q]|0,J=_.words[Z]|0,it=W*J,K=it&67108863;et=et+(it/67108864|0)|0,K=K+ot|0,ot=K&67108863,et=et+(K>>>26)|0,X+=et>>>26,et&=67108863}N.words[$]=ot,G=et,et=X}return G!==0?N.words[$]=G:N.length--,N.strip()}function S(F,_,N){var G=new M;return G.mulp(F,_,N)}f.prototype.mulTo=function(_,N){var G,X=this.length+_.length;return this.length===10&&_.length===10?G=C(this,_,N):X<63?G=w(this,_,N):X<1024?G=y(this,_,N):G=S(this,_,N),G};function M(F,_){this.x=F,this.y=_}M.prototype.makeRBT=function(_){for(var N=new Array(_),G=f.prototype._countBits(_)-1,X=0;X<_;X++)N[X]=this.revBin(X,G,_);return N},M.prototype.revBin=function(_,N,G){if(_===0||_===G-1)return _;for(var X=0,$=0;$<N;$++)X|=(_&1)<<N-$-1,_>>=1;return X},M.prototype.permute=function(_,N,G,X,$,et){for(var ot=0;ot<et;ot++)X[ot]=N[_[ot]],$[ot]=G[_[ot]]},M.prototype.transform=function(_,N,G,X,$,et){this.permute(et,_,N,G,X,$);for(var ot=1;ot<$;ot<<=1)for(var nt=ot<<1,Z=Math.cos(2*Math.PI/nt),Q=Math.sin(2*Math.PI/nt),W=0;W<$;W+=nt)for(var J=Z,it=Q,K=0;K<ot;K++){var H=G[W+K],at=X[W+K],tt=G[W+K+ot],lt=X[W+K+ot],dt=J*tt-it*lt;lt=J*lt+it*tt,tt=dt,G[W+K]=H+tt,X[W+K]=at+lt,G[W+K+ot]=H-tt,X[W+K+ot]=at-lt,K!==nt&&(dt=Z*J-Q*it,it=Z*it+Q*J,J=dt)}},M.prototype.guessLen13b=function(_,N){var G=Math.max(N,_)|1,X=G&1,$=0;for(G=G/2|0;G;G=G>>>1)$++;return 1<<$+1+X},M.prototype.conjugate=function(_,N,G){if(!(G<=1))for(var X=0;X<G/2;X++){var $=_[X];_[X]=_[G-X-1],_[G-X-1]=$,$=N[X],N[X]=-N[G-X-1],N[G-X-1]=-$}},M.prototype.normalize13b=function(_,N){for(var G=0,X=0;X<N/2;X++){var $=Math.round(_[2*X+1]/N)*8192+Math.round(_[2*X]/N)+G;_[X]=$&67108863,$<67108864?G=0:G=$/67108864|0}return _},M.prototype.convert13b=function(_,N,G,X){for(var $=0,et=0;et<N;et++)$=$+(_[et]|0),G[2*et]=$&8191,$=$>>>13,G[2*et+1]=$&8191,$=$>>>13;for(et=2*N;et<X;++et)G[et]=0;n($===0),n(($&-8192)===0)},M.prototype.stub=function(_){for(var N=new Array(_),G=0;G<_;G++)N[G]=0;return N},M.prototype.mulp=function(_,N,G){var X=2*this.guessLen13b(_.length,N.length),$=this.makeRBT(X),et=this.stub(X),ot=new Array(X),nt=new Array(X),Z=new Array(X),Q=new Array(X),W=new Array(X),J=new Array(X),it=G.words;it.length=X,this.convert13b(_.words,_.length,ot,X),this.convert13b(N.words,N.length,Q,X),this.transform(ot,et,nt,Z,X,$),this.transform(Q,et,W,J,X,$);for(var K=0;K<X;K++){var H=nt[K]*W[K]-Z[K]*J[K];Z[K]=nt[K]*J[K]+Z[K]*W[K],nt[K]=H}return this.conjugate(nt,Z,X),this.transform(nt,Z,it,et,X,$),this.conjugate(it,et,X),this.normalize13b(it,X),G.negative=_.negative^N.negative,G.length=_.length+N.length,G.strip()},f.prototype.mul=function(_){var N=new f(null);return N.words=new Array(this.length+_.length),this.mulTo(_,N)},f.prototype.mulf=function(_){var N=new f(null);return N.words=new Array(this.length+_.length),S(this,_,N)},f.prototype.imul=function(_){return this.clone().mulTo(_,this)},f.prototype.imuln=function(_){n(typeof _=="number"),n(_<67108864);for(var N=0,G=0;G<this.length;G++){var X=(this.words[G]|0)*_,$=(X&67108863)+(N&67108863);N>>=26,N+=X/67108864|0,N+=$>>>26,this.words[G]=$&67108863}return N!==0&&(this.words[G]=N,this.length++),this},f.prototype.muln=function(_){return this.clone().imuln(_)},f.prototype.sqr=function(){return this.mul(this)},f.prototype.isqr=function(){return this.imul(this.clone())},f.prototype.pow=function(_){var N=x(_);if(N.length===0)return new f(1);for(var G=this,X=0;X<N.length&&N[X]===0;X++,G=G.sqr());if(++X<N.length)for(var $=G.sqr();X<N.length;X++,$=$.sqr())N[X]!==0&&(G=G.mul($));return G},f.prototype.iushln=function(_){n(typeof _=="number"&&_>=0);var N=_%26,G=(_-N)/26,X=67108863>>>26-N<<26-N,$;if(N!==0){var et=0;for($=0;$<this.length;$++){var ot=this.words[$]&X,nt=(this.words[$]|0)-ot<<N;this.words[$]=nt|et,et=ot>>>26-N}et&&(this.words[$]=et,this.length++)}if(G!==0){for($=this.length-1;$>=0;$--)this.words[$+G]=this.words[$];for($=0;$<G;$++)this.words[$]=0;this.length+=G}return this.strip()},f.prototype.ishln=function(_){return n(this.negative===0),this.iushln(_)},f.prototype.iushrn=function(_,N,G){n(typeof _=="number"&&_>=0);var X;N?X=(N-N%26)/26:X=0;var $=_%26,et=Math.min((_-$)/26,this.length),ot=67108863^67108863>>>$<<$,nt=G;if(X-=et,X=Math.max(0,X),nt){for(var Z=0;Z<et;Z++)nt.words[Z]=this.words[Z];nt.length=et}if(et!==0)if(this.length>et)for(this.length-=et,Z=0;Z<this.length;Z++)this.words[Z]=this.words[Z+et];else this.words[0]=0,this.length=1;var Q=0;for(Z=this.length-1;Z>=0&&(Q!==0||Z>=X);Z--){var W=this.words[Z]|0;this.words[Z]=Q<<26-$|W>>>$,Q=W&ot}return nt&&Q!==0&&(nt.words[nt.length++]=Q),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},f.prototype.ishrn=function(_,N,G){return n(this.negative===0),this.iushrn(_,N,G)},f.prototype.shln=function(_){return this.clone().ishln(_)},f.prototype.ushln=function(_){return this.clone().iushln(_)},f.prototype.shrn=function(_){return this.clone().ishrn(_)},f.prototype.ushrn=function(_){return this.clone().iushrn(_)},f.prototype.testn=function(_){n(typeof _=="number"&&_>=0);var N=_%26,G=(_-N)/26,X=1<<N;if(this.length<=G)return!1;var $=this.words[G];return!!($&X)},f.prototype.imaskn=function(_){n(typeof _=="number"&&_>=0);var N=_%26,G=(_-N)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=G)return this;if(N!==0&&G++,this.length=Math.min(G,this.length),N!==0){var X=67108863^67108863>>>N<<N;this.words[this.length-1]&=X}return this.strip()},f.prototype.maskn=function(_){return this.clone().imaskn(_)},f.prototype.iaddn=function(_){return n(typeof _=="number"),n(_<67108864),_<0?this.isubn(-_):this.negative!==0?this.length===1&&(this.words[0]|0)<_?(this.words[0]=_-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(_),this.negative=1,this):this._iaddn(_)},f.prototype._iaddn=function(_){this.words[0]+=_;for(var N=0;N<this.length&&this.words[N]>=67108864;N++)this.words[N]-=67108864,N===this.length-1?this.words[N+1]=1:this.words[N+1]++;return this.length=Math.max(this.length,N+1),this},f.prototype.isubn=function(_){if(n(typeof _=="number"),n(_<67108864),_<0)return this.iaddn(-_);if(this.negative!==0)return this.negative=0,this.iaddn(_),this.negative=1,this;if(this.words[0]-=_,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var N=0;N<this.length&&this.words[N]<0;N++)this.words[N]+=67108864,this.words[N+1]-=1;return this.strip()},f.prototype.addn=function(_){return this.clone().iaddn(_)},f.prototype.subn=function(_){return this.clone().isubn(_)},f.prototype.iabs=function(){return this.negative=0,this},f.prototype.abs=function(){return this.clone().iabs()},f.prototype._ishlnsubmul=function(_,N,G){var X=_.length+G,$;this._expand(X);var et,ot=0;for($=0;$<_.length;$++){et=(this.words[$+G]|0)+ot;var nt=(_.words[$]|0)*N;et-=nt&67108863,ot=(et>>26)-(nt/67108864|0),this.words[$+G]=et&67108863}for(;$<this.length-G;$++)et=(this.words[$+G]|0)+ot,ot=et>>26,this.words[$+G]=et&67108863;if(ot===0)return this.strip();for(n(ot===-1),ot=0,$=0;$<this.length;$++)et=-(this.words[$]|0)+ot,ot=et>>26,this.words[$]=et&67108863;return this.negative=1,this.strip()},f.prototype._wordDiv=function(_,N){var G=this.length-_.length,X=this.clone(),$=_,et=$.words[$.length-1]|0,ot=this._countBits(et);G=26-ot,G!==0&&($=$.ushln(G),X.iushln(G),et=$.words[$.length-1]|0);var nt=X.length-$.length,Z;if(N!=="mod"){Z=new f(null),Z.length=nt+1,Z.words=new Array(Z.length);for(var Q=0;Q<Z.length;Q++)Z.words[Q]=0}var W=X.clone()._ishlnsubmul($,1,nt);W.negative===0&&(X=W,Z&&(Z.words[nt]=1));for(var J=nt-1;J>=0;J--){var it=(X.words[$.length+J]|0)*67108864+(X.words[$.length+J-1]|0);for(it=Math.min(it/et|0,67108863),X._ishlnsubmul($,it,J);X.negative!==0;)it--,X.negative=0,X._ishlnsubmul($,1,J),X.isZero()||(X.negative^=1);Z&&(Z.words[J]=it)}return Z&&Z.strip(),X.strip(),N!=="div"&&G!==0&&X.iushrn(G),{div:Z||null,mod:X}},f.prototype.divmod=function(_,N,G){if(n(!_.isZero()),this.isZero())return{div:new f(0),mod:new f(0)};var X,$,et;return this.negative!==0&&_.negative===0?(et=this.neg().divmod(_,N),N!=="mod"&&(X=et.div.neg()),N!=="div"&&($=et.mod.neg(),G&&$.negative!==0&&$.iadd(_)),{div:X,mod:$}):this.negative===0&&_.negative!==0?(et=this.divmod(_.neg(),N),N!=="mod"&&(X=et.div.neg()),{div:X,mod:et.mod}):this.negative&_.negative?(et=this.neg().divmod(_.neg(),N),N!=="div"&&($=et.mod.neg(),G&&$.negative!==0&&$.isub(_)),{div:et.div,mod:$}):_.length>this.length||this.cmp(_)<0?{div:new f(0),mod:this}:_.length===1?N==="div"?{div:this.divn(_.words[0]),mod:null}:N==="mod"?{div:null,mod:new f(this.modn(_.words[0]))}:{div:this.divn(_.words[0]),mod:new f(this.modn(_.words[0]))}:this._wordDiv(_,N)},f.prototype.div=function(_){return this.divmod(_,"div",!1).div},f.prototype.mod=function(_){return this.divmod(_,"mod",!1).mod},f.prototype.umod=function(_){return this.divmod(_,"mod",!0).mod},f.prototype.divRound=function(_){var N=this.divmod(_);if(N.mod.isZero())return N.div;var G=N.div.negative!==0?N.mod.isub(_):N.mod,X=_.ushrn(1),$=_.andln(1),et=G.cmp(X);return et<0||$===1&&et===0?N.div:N.div.negative!==0?N.div.isubn(1):N.div.iaddn(1)},f.prototype.modn=function(_){n(_<=67108863);for(var N=(1<<26)%_,G=0,X=this.length-1;X>=0;X--)G=(N*G+(this.words[X]|0))%_;return G},f.prototype.idivn=function(_){n(_<=67108863);for(var N=0,G=this.length-1;G>=0;G--){var X=(this.words[G]|0)+N*67108864;this.words[G]=X/_|0,N=X%_}return this.strip()},f.prototype.divn=function(_){return this.clone().idivn(_)},f.prototype.egcd=function(_){n(_.negative===0),n(!_.isZero());var N=this,G=_.clone();N.negative!==0?N=N.umod(_):N=N.clone();for(var X=new f(1),$=new f(0),et=new f(0),ot=new f(1),nt=0;N.isEven()&&G.isEven();)N.iushrn(1),G.iushrn(1),++nt;for(var Z=G.clone(),Q=N.clone();!N.isZero();){for(var W=0,J=1;!(N.words[0]&J)&&W<26;++W,J<<=1);if(W>0)for(N.iushrn(W);W-- >0;)(X.isOdd()||$.isOdd())&&(X.iadd(Z),$.isub(Q)),X.iushrn(1),$.iushrn(1);for(var it=0,K=1;!(G.words[0]&K)&&it<26;++it,K<<=1);if(it>0)for(G.iushrn(it);it-- >0;)(et.isOdd()||ot.isOdd())&&(et.iadd(Z),ot.isub(Q)),et.iushrn(1),ot.iushrn(1);N.cmp(G)>=0?(N.isub(G),X.isub(et),$.isub(ot)):(G.isub(N),et.isub(X),ot.isub($))}return{a:et,b:ot,gcd:G.iushln(nt)}},f.prototype._invmp=function(_){n(_.negative===0),n(!_.isZero());var N=this,G=_.clone();N.negative!==0?N=N.umod(_):N=N.clone();for(var X=new f(1),$=new f(0),et=G.clone();N.cmpn(1)>0&&G.cmpn(1)>0;){for(var ot=0,nt=1;!(N.words[0]&nt)&&ot<26;++ot,nt<<=1);if(ot>0)for(N.iushrn(ot);ot-- >0;)X.isOdd()&&X.iadd(et),X.iushrn(1);for(var Z=0,Q=1;!(G.words[0]&Q)&&Z<26;++Z,Q<<=1);if(Z>0)for(G.iushrn(Z);Z-- >0;)$.isOdd()&&$.iadd(et),$.iushrn(1);N.cmp(G)>=0?(N.isub(G),X.isub($)):(G.isub(N),$.isub(X))}var W;return N.cmpn(1)===0?W=X:W=$,W.cmpn(0)<0&&W.iadd(_),W},f.prototype.gcd=function(_){if(this.isZero())return _.abs();if(_.isZero())return this.abs();var N=this.clone(),G=_.clone();N.negative=0,G.negative=0;for(var X=0;N.isEven()&&G.isEven();X++)N.iushrn(1),G.iushrn(1);do{for(;N.isEven();)N.iushrn(1);for(;G.isEven();)G.iushrn(1);var $=N.cmp(G);if($<0){var et=N;N=G,G=et}else if($===0||G.cmpn(1)===0)break;N.isub(G)}while(!0);return G.iushln(X)},f.prototype.invm=function(_){return this.egcd(_).a.umod(_)},f.prototype.isEven=function(){return(this.words[0]&1)===0},f.prototype.isOdd=function(){return(this.words[0]&1)===1},f.prototype.andln=function(_){return this.words[0]&_},f.prototype.bincn=function(_){n(typeof _=="number");var N=_%26,G=(_-N)/26,X=1<<N;if(this.length<=G)return this._expand(G+1),this.words[G]|=X,this;for(var $=X,et=G;$!==0&&et<this.length;et++){var ot=this.words[et]|0;ot+=$,$=ot>>>26,ot&=67108863,this.words[et]=ot}return $!==0&&(this.words[et]=$,this.length++),this},f.prototype.isZero=function(){return this.length===1&&this.words[0]===0},f.prototype.cmpn=function(_){var N=_<0;if(this.negative!==0&&!N)return-1;if(this.negative===0&&N)return 1;this.strip();var G;if(this.length>1)G=1;else{N&&(_=-_),n(_<=67108863,"Number is too big");var X=this.words[0]|0;G=X===_?0:X<_?-1:1}return this.negative!==0?-G|0:G},f.prototype.cmp=function(_){if(this.negative!==0&&_.negative===0)return-1;if(this.negative===0&&_.negative!==0)return 1;var N=this.ucmp(_);return this.negative!==0?-N|0:N},f.prototype.ucmp=function(_){if(this.length>_.length)return 1;if(this.length<_.length)return-1;for(var N=0,G=this.length-1;G>=0;G--){var X=this.words[G]|0,$=_.words[G]|0;if(X!==$){X<$?N=-1:X>$&&(N=1);break}}return N},f.prototype.gtn=function(_){return this.cmpn(_)===1},f.prototype.gt=function(_){return this.cmp(_)===1},f.prototype.gten=function(_){return this.cmpn(_)>=0},f.prototype.gte=function(_){return this.cmp(_)>=0},f.prototype.ltn=function(_){return this.cmpn(_)===-1},f.prototype.lt=function(_){return this.cmp(_)===-1},f.prototype.lten=function(_){return this.cmpn(_)<=0},f.prototype.lte=function(_){return this.cmp(_)<=0},f.prototype.eqn=function(_){return this.cmpn(_)===0},f.prototype.eq=function(_){return this.cmp(_)===0},f.red=function(_){return new z(_)},f.prototype.toRed=function(_){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),_.convertTo(this)._forceRed(_)},f.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},f.prototype._forceRed=function(_){return this.red=_,this},f.prototype.forceRed=function(_){return n(!this.red,"Already a number in reduction context"),this._forceRed(_)},f.prototype.redAdd=function(_){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,_)},f.prototype.redIAdd=function(_){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,_)},f.prototype.redSub=function(_){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,_)},f.prototype.redISub=function(_){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,_)},f.prototype.redShl=function(_){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,_)},f.prototype.redMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.mul(this,_)},f.prototype.redIMul=function(_){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,_),this.red.imul(this,_)},f.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},f.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},f.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},f.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},f.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},f.prototype.redPow=function(_){return n(this.red&&!_.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,_)};var a={k256:null,p224:null,p192:null,p25519:null};function E(F,_){this.name=F,this.p=new f(_,16),this.n=this.p.bitLength(),this.k=new f(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}E.prototype._tmp=function(){var _=new f(null);return _.words=new Array(Math.ceil(this.n/13)),_},E.prototype.ireduce=function(_){var N=_,G;do this.split(N,this.tmp),N=this.imulK(N),N=N.iadd(this.tmp),G=N.bitLength();while(G>this.n);var X=G<this.n?-1:N.ucmp(this.p);return X===0?(N.words[0]=0,N.length=1):X>0?N.isub(this.p):N.strip!==void 0?N.strip():N._strip(),N},E.prototype.split=function(_,N){_.iushrn(this.n,0,N)},E.prototype.imulK=function(_){return _.imul(this.k)};function m(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}l(m,E),m.prototype.split=function(_,N){for(var G=4194303,X=Math.min(_.length,9),$=0;$<X;$++)N.words[$]=_.words[$];if(N.length=X,_.length<=9){_.words[0]=0,_.length=1;return}var et=_.words[9];for(N.words[N.length++]=et&G,$=10;$<_.length;$++){var ot=_.words[$]|0;_.words[$-10]=(ot&G)<<4|et>>>22,et=ot}et>>>=22,_.words[$-10]=et,et===0&&_.length>10?_.length-=10:_.length-=9},m.prototype.imulK=function(_){_.words[_.length]=0,_.words[_.length+1]=0,_.length+=2;for(var N=0,G=0;G<_.length;G++){var X=_.words[G]|0;N+=X*977,_.words[G]=N&67108863,N=X*64+(N/67108864|0)}return _.words[_.length-1]===0&&(_.length--,_.words[_.length-1]===0&&_.length--),_};function k(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}l(k,E);function I(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}l(I,E);function O(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}l(O,E),O.prototype.imulK=function(_){for(var N=0,G=0;G<_.length;G++){var X=(_.words[G]|0)*19+N,$=X&67108863;X>>>=26,_.words[G]=$,N=X}return N!==0&&(_.words[_.length++]=N),_},f._prime=function(_){if(a[_])return a[_];var N;if(_==="k256")N=new m;else if(_==="p224")N=new k;else if(_==="p192")N=new I;else if(_==="p25519")N=new O;else throw new Error("Unknown prime "+_);return a[_]=N,N};function z(F){if(typeof F=="string"){var _=f._prime(F);this.m=_.p,this.prime=_}else n(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}z.prototype._verify1=function(_){n(_.negative===0,"red works only with positives"),n(_.red,"red works only with red numbers")},z.prototype._verify2=function(_,N){n((_.negative|N.negative)===0,"red works only with positives"),n(_.red&&_.red===N.red,"red works only with red numbers")},z.prototype.imod=function(_){return this.prime?this.prime.ireduce(_)._forceRed(this):_.umod(this.m)._forceRed(this)},z.prototype.neg=function(_){return _.isZero()?_.clone():this.m.sub(_)._forceRed(this)},z.prototype.add=function(_,N){this._verify2(_,N);var G=_.add(N);return G.cmp(this.m)>=0&&G.isub(this.m),G._forceRed(this)},z.prototype.iadd=function(_,N){this._verify2(_,N);var G=_.iadd(N);return G.cmp(this.m)>=0&&G.isub(this.m),G},z.prototype.sub=function(_,N){this._verify2(_,N);var G=_.sub(N);return G.cmpn(0)<0&&G.iadd(this.m),G._forceRed(this)},z.prototype.isub=function(_,N){this._verify2(_,N);var G=_.isub(N);return G.cmpn(0)<0&&G.iadd(this.m),G},z.prototype.shl=function(_,N){return this._verify1(_),this.imod(_.ushln(N))},z.prototype.imul=function(_,N){return this._verify2(_,N),this.imod(_.imul(N))},z.prototype.mul=function(_,N){return this._verify2(_,N),this.imod(_.mul(N))},z.prototype.isqr=function(_){return this.imul(_,_.clone())},z.prototype.sqr=function(_){return this.mul(_,_)},z.prototype.sqrt=function(_){if(_.isZero())return _.clone();var N=this.m.andln(3);if(n(N%2===1),N===3){var G=this.m.add(new f(1)).iushrn(2);return this.pow(_,G)}for(var X=this.m.subn(1),$=0;!X.isZero()&&X.andln(1)===0;)$++,X.iushrn(1);n(!X.isZero());var et=new f(1).toRed(this),ot=et.redNeg(),nt=this.m.subn(1).iushrn(1),Z=this.m.bitLength();for(Z=new f(2*Z*Z).toRed(this);this.pow(Z,nt).cmp(ot)!==0;)Z.redIAdd(ot);for(var Q=this.pow(Z,X),W=this.pow(_,X.addn(1).iushrn(1)),J=this.pow(_,X),it=$;J.cmp(et)!==0;){for(var K=J,H=0;K.cmp(et)!==0;H++)K=K.redSqr();n(H<it);var at=this.pow(Q,new f(1).iushln(it-H-1));W=W.redMul(at),Q=at.redSqr(),J=J.redMul(Q),it=H}return W},z.prototype.invm=function(_){var N=_._invmp(this.m);return N.negative!==0?(N.negative=0,this.imod(N).redNeg()):this.imod(N)},z.prototype.pow=function(_,N){if(N.isZero())return new f(1).toRed(this);if(N.cmpn(1)===0)return _.clone();var G=4,X=new Array(1<<G);X[0]=new f(1).toRed(this),X[1]=_;for(var $=2;$<X.length;$++)X[$]=this.mul(X[$-1],_);var et=X[0],ot=0,nt=0,Z=N.bitLength()%26;for(Z===0&&(Z=26),$=N.length-1;$>=0;$--){for(var Q=N.words[$],W=Z-1;W>=0;W--){var J=Q>>W&1;if(et!==X[0]&&(et=this.sqr(et)),J===0&&ot===0){nt=0;continue}ot<<=1,ot|=J,nt++,!(nt!==G&&($!==0||W!==0))&&(et=this.mul(et,X[ot]),nt=0,ot=0)}Z=26}return et},z.prototype.convertTo=function(_){var N=_.umod(this.m);return N===_?N.clone():N},z.prototype.convertFrom=function(_){var N=_.clone();return N.red=null,N},f.mont=function(_){return new B(_)};function B(F){z.call(this,F),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new f(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}l(B,z),B.prototype.convertTo=function(_){return this.imod(_.ushln(this.shift))},B.prototype.convertFrom=function(_){var N=this.imod(_.mul(this.rinv));return N.red=null,N},B.prototype.imul=function(_,N){if(_.isZero()||N.isZero())return _.words[0]=0,_.length=1,_;var G=_.imul(N),X=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=G.isub(X).iushrn(this.shift),et=$;return $.cmp(this.m)>=0?et=$.isub(this.m):$.cmpn(0)<0&&(et=$.iadd(this.m)),et._forceRed(this)},B.prototype.mul=function(_,N){if(_.isZero()||N.isZero())return new f(0)._forceRed(this);var G=_.mul(N),X=G.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),$=G.isub(X).iushrn(this.shift),et=$;return $.cmp(this.m)>=0?et=$.isub(this.m):$.cmpn(0)<0&&(et=$.iadd(this.m)),et._forceRed(this)},B.prototype.invm=function(_){var N=this.imod(_._invmp(this.m).mul(this.r2));return N._forceRed(this)}}(v,this)},6204:function(v){v.exports=p;function p(r){var e,s,n,l=r.length,f=0;for(e=0;e<l;++e)f+=r[e].length;var u=new Array(f),g=0;for(e=0;e<l;++e){var h=r[e],T=h.length;for(s=0;s<T;++s){var c=u[g++]=new Array(T-1),i=0;for(n=0;n<T;++n)n!==s&&(c[i++]=h[n]);if(s&1){var d=c[1];c[1]=c[0],c[0]=d}}}return u}},6867:function(v,p,r){v.exports=i;var e=r(1888),s=r(855),n=r(7150);function l(d,x){for(var w=0;w<d;++w)if(!(x[w]<=x[w+d]))return!0;return!1}function f(d,x,w,C){for(var y=0,S=0,M=0,a=d.length;M<a;++M){var E=d[M];if(!l(x,E)){for(var m=0;m<2*x;++m)w[y++]=E[m];C[S++]=M}}return S}function u(d,x,w,C){var y=d.length,S=x.length;if(!(y<=0||S<=0)){var M=d[0].length>>>1;if(!(M<=0)){var a,E=e.mallocDouble(2*M*y),m=e.mallocInt32(y);if(y=f(d,M,E,m),y>0){if(M===1&&C)s.init(y),a=s.sweepComplete(M,w,0,y,E,m,0,y,E,m);else{var k=e.mallocDouble(2*M*S),I=e.mallocInt32(S);S=f(x,M,k,I),S>0&&(s.init(y+S),M===1?a=s.sweepBipartite(M,w,0,y,E,m,0,S,k,I):a=n(M,w,C,y,E,m,S,k,I),e.free(k),e.free(I))}e.free(E),e.free(m)}return a}}}var g;function h(d,x){g.push([d,x])}function T(d){return g=[],u(d,d,h,!0),g}function c(d,x){return g=[],u(d,x,h,!1),g}function i(d,x,w){switch(arguments.length){case 1:return T(d);case 2:return typeof x=="function"?u(d,d,x,!0):c(d,x);case 3:return u(d,x,w,!1);default:throw new Error("box-intersect: Invalid arguments")}}},2455:function(v,p){function r(){function n(u,g,h,T,c,i,d,x,w,C,y){for(var S=2*u,M=T,a=S*T;M<c;++M,a+=S){var E=i[g+a],m=i[g+a+u],k=d[M];t:for(var I=x,O=S*x;I<w;++I,O+=S){var z=C[g+O],B=C[g+O+u],F=y[I];if(!(B<E||m<z)){for(var _=g+1;_<u;++_){var N=i[_+a],G=i[_+u+a],X=C[_+O],$=C[_+u+O];if(G<X||$<N)continue t}var et=h(k,F);if(et!==void 0)return et}}}}function l(u,g,h,T,c,i,d,x,w,C,y){for(var S=2*u,M=x,a=S*x;M<w;++M,a+=S){var E=C[g+a],m=C[g+a+u],k=y[M];t:for(var I=T,O=S*T;I<c;++I,O+=S){var z=i[g+O],B=i[g+O+u],F=d[I];if(!(m<z||B<E)){for(var _=g+1;_<u;++_){var N=i[_+O],G=i[_+u+O],X=C[_+a],$=C[_+u+a];if(G<X||$<N)continue t}var et=h(F,k);if(et!==void 0)return et}}}}function f(u,g,h,T,c,i,d,x,w,C,y){return c-T>w-x?n(u,g,h,T,c,i,d,x,w,C,y):l(u,g,h,T,c,i,d,x,w,C,y)}return f}function e(){function n(h,T,c,i,d,x,w,C,y,S,M){for(var a=2*h,E=i,m=a*i;E<d;++E,m+=a){var k=x[T+m],I=x[T+m+h],O=w[E];t:for(var z=C,B=a*C;z<y;++z,B+=a){var F=S[T+B],_=M[z];if(!(F<=k||I<F)){for(var N=T+1;N<h;++N){var G=x[N+m],X=x[N+h+m],$=S[N+B],et=S[N+h+B];if(X<$||et<G)continue t}var ot=c(_,O);if(ot!==void 0)return ot}}}}function l(h,T,c,i,d,x,w,C,y,S,M){for(var a=2*h,E=i,m=a*i;E<d;++E,m+=a){var k=x[T+m],I=x[T+m+h],O=w[E];t:for(var z=C,B=a*C;z<y;++z,B+=a){var F=S[T+B],_=M[z];if(!(F<k||I<F)){for(var N=T+1;N<h;++N){var G=x[N+m],X=x[N+h+m],$=S[N+B],et=S[N+h+B];if(X<$||et<G)continue t}var ot=c(O,_);if(ot!==void 0)return ot}}}}function f(h,T,c,i,d,x,w,C,y,S,M){for(var a=2*h,E=C,m=a*C;E<y;++E,m+=a){var k=S[T+m],I=M[E];t:for(var O=i,z=a*i;O<d;++O,z+=a){var B=x[T+z],F=x[T+z+h],_=w[O];if(!(k<=B||F<k)){for(var N=T+1;N<h;++N){var G=x[N+z],X=x[N+h+z],$=S[N+m],et=S[N+h+m];if(X<$||et<G)continue t}var ot=c(I,_);if(ot!==void 0)return ot}}}}function u(h,T,c,i,d,x,w,C,y,S,M){for(var a=2*h,E=C,m=a*C;E<y;++E,m+=a){var k=S[T+m],I=M[E];t:for(var O=i,z=a*i;O<d;++O,z+=a){var B=x[T+z],F=x[T+z+h],_=w[O];if(!(k<B||F<k)){for(var N=T+1;N<h;++N){var G=x[N+z],X=x[N+h+z],$=S[N+m],et=S[N+h+m];if(X<$||et<G)continue t}var ot=c(_,I);if(ot!==void 0)return ot}}}}function g(h,T,c,i,d,x,w,C,y,S,M,a){return x-d>S-y?i?n(h,T,c,d,x,w,C,y,S,M,a):l(h,T,c,d,x,w,C,y,S,M,a):i?f(h,T,c,d,x,w,C,y,S,M,a):u(h,T,c,d,x,w,C,y,S,M,a)}return g}function s(n){return n?r():e()}p.partial=s(!1),p.full=s(!0)},7150:function(v,p,r){v.exports=F;var e=r(1888),s=r(8828),n=r(2455),l=n.partial,f=n.full,u=r(855),g=r(3545),h=r(8105),T=128,c=1<<22,i=1<<22,d=h("!(lo>=p0)&&!(p1>=hi)"),x=h("lo===p0"),w=h("lo<p0"),C=h("hi<=p0"),y=h("lo<=p0&&p0<=hi"),S=h("lo<p0&&p0<=hi"),M=6,a=2,E=1024,m=e.mallocInt32(E),k=e.mallocDouble(E);function I(_,N){var G=8*s.log2(N+1)*(_+1)|0,X=s.nextPow2(M*G);m.length<X&&(e.free(m),m=e.mallocInt32(X));var $=s.nextPow2(a*G);k.length<$&&(e.free(k),k=e.mallocDouble($))}function O(_,N,G,X,$,et,ot,nt,Z){var Q=M*_;m[Q]=N,m[Q+1]=G,m[Q+2]=X,m[Q+3]=$,m[Q+4]=et,m[Q+5]=ot;var W=a*_;k[W]=nt,k[W+1]=Z}function z(_,N,G,X,$,et,ot,nt,Z,Q,W){var J=2*_,it=Z*J,K=Q[it+N];t:for(var H=$,at=$*J;H<et;++H,at+=J){var tt=ot[at+N],lt=ot[at+N+_];if(!(K<tt||lt<K)&&!(X&&K===tt)){for(var dt=nt[H],mt=N+1;mt<_;++mt){var tt=ot[at+mt],lt=ot[at+mt+_],gt=Q[it+mt],Mt=Q[it+mt+_];if(lt<gt||Mt<tt)continue t}var Lt;if(X?Lt=G(W,dt):Lt=G(dt,W),Lt!==void 0)return Lt}}}function B(_,N,G,X,$,et,ot,nt,Z,Q){var W=2*_,J=nt*W,it=Z[J+N];t:for(var K=X,H=X*W;K<$;++K,H+=W){var at=ot[K];if(at!==Q){var tt=et[H+N],lt=et[H+N+_];if(!(it<tt||lt<it)){for(var dt=N+1;dt<_;++dt){var tt=et[H+dt],lt=et[H+dt+_],mt=Z[J+dt],gt=Z[J+dt+_];if(lt<mt||gt<tt)continue t}var Mt=G(at,Q);if(Mt!==void 0)return Mt}}}}function F(_,N,G,X,$,et,ot,nt,Z){I(_,X+ot);var Q=0,W=2*_,J;for(O(Q++,0,0,X,0,ot,G?16:0,-1/0,1/0),G||O(Q++,0,0,ot,0,X,1,-1/0,1/0);Q>0;){Q-=1;var it=Q*M,K=m[it],H=m[it+1],at=m[it+2],tt=m[it+3],lt=m[it+4],dt=m[it+5],mt=Q*a,gt=k[mt],Mt=k[mt+1],Lt=dt&1,zt=!!(dt&16),xt=$,Ct=et,wt=nt,Rt=Z;if(Lt&&(xt=nt,Ct=Z,wt=$,Rt=et),!(dt&2&&(at=w(_,K,H,at,xt,Ct,Mt),H>=at))&&!(dt&4&&(H=C(_,K,H,at,xt,Ct,gt),H>=at))){var Tt=at-H,Bt=lt-tt;if(zt){if(_*Tt*(Tt+Bt)<i){if(J=u.scanComplete(_,K,N,H,at,xt,Ct,tt,lt,wt,Rt),J!==void 0)return J;continue}}else if(_*Math.min(Tt,Bt)<T){if(J=l(_,K,N,Lt,H,at,xt,Ct,tt,lt,wt,Rt),J!==void 0)return J;continue}else if(_*Tt*Bt<c){if(J=u.scanBipartite(_,K,N,Lt,H,at,xt,Ct,tt,lt,wt,Rt),J!==void 0)return J;continue}var Gt=d(_,K,H,at,xt,Ct,gt,Mt);if(H<Gt)if(_*(Gt-H)<T){if(J=f(_,K+1,N,H,Gt,xt,Ct,tt,lt,wt,Rt),J!==void 0)return J}else if(K===_-2){if(Lt?J=u.sweepBipartite(_,N,tt,lt,wt,Rt,H,Gt,xt,Ct):J=u.sweepBipartite(_,N,H,Gt,xt,Ct,tt,lt,wt,Rt),J!==void 0)return J}else O(Q++,K+1,H,Gt,tt,lt,Lt,-1/0,1/0),O(Q++,K+1,tt,lt,H,Gt,Lt^1,-1/0,1/0);if(Gt<at){var te=g(_,K,tt,lt,wt,Rt),Wt=wt[W*te+K],jt=x(_,K,te,lt,wt,Rt,Wt);if(jt<lt&&O(Q++,K,Gt,at,jt,lt,(Lt|4)+(zt?16:0),Wt,Mt),tt<te&&O(Q++,K,Gt,at,tt,te,(Lt|2)+(zt?16:0),gt,Wt),te+1===jt){if(zt?J=B(_,K,N,Gt,at,xt,Ct,te,wt,Rt[te]):J=z(_,K,N,Lt,Gt,at,xt,Ct,te,wt,Rt[te]),J!==void 0)return J}else if(te<jt){var ie;if(zt){if(ie=y(_,K,Gt,at,xt,Ct,Wt),Gt<ie){var ue=x(_,K,Gt,ie,xt,Ct,Wt);if(K===_-2){if(Gt<ue&&(J=u.sweepComplete(_,N,Gt,ue,xt,Ct,te,jt,wt,Rt),J!==void 0)||ue<ie&&(J=u.sweepBipartite(_,N,ue,ie,xt,Ct,te,jt,wt,Rt),J!==void 0))return J}else Gt<ue&&O(Q++,K+1,Gt,ue,te,jt,16,-1/0,1/0),ue<ie&&(O(Q++,K+1,ue,ie,te,jt,0,-1/0,1/0),O(Q++,K+1,te,jt,ue,ie,1,-1/0,1/0))}}else Lt?ie=S(_,K,Gt,at,xt,Ct,Wt):ie=y(_,K,Gt,at,xt,Ct,Wt),Gt<ie&&(K===_-2?Lt?J=u.sweepBipartite(_,N,te,jt,wt,Rt,Gt,ie,xt,Ct):J=u.sweepBipartite(_,N,Gt,ie,xt,Ct,te,jt,wt,Rt):(O(Q++,K+1,Gt,ie,te,jt,Lt,-1/0,1/0),O(Q++,K+1,te,jt,Gt,ie,Lt^1,-1/0,1/0)))}}}}}},3545:function(v,p,r){v.exports=f;var e=r(8105),s=e("lo<p0"),n=8;function l(u,g,h,T,c,i){for(var d=2*u,x=d*(h+1)+g,w=h+1;w<T;++w,x+=d)for(var C=c[x],y=w,S=d*(w-1);y>h&&c[S+g]>C;--y,S-=d){for(var M=S,a=S+d,E=0;E<d;++E,++M,++a){var m=c[M];c[M]=c[a],c[a]=m}var k=i[y];i[y]=i[y-1],i[y-1]=k}}function f(u,g,h,T,c,i){if(T<=h+1)return h;for(var d=h,x=T,w=T+h>>>1,C=2*u,y=w,S=c[C*w+g];d<x;){if(x-d<n){l(u,g,d,x,c,i),S=c[C*w+g];break}var M=x-d,a=Math.random()*M+d|0,E=c[C*a+g],m=Math.random()*M+d|0,k=c[C*m+g],I=Math.random()*M+d|0,O=c[C*I+g];E<=k?O>=k?(y=m,S=k):E>=O?(y=a,S=E):(y=I,S=O):k>=O?(y=m,S=k):O>=E?(y=a,S=E):(y=I,S=O);for(var F=C*(x-1),_=C*y,z=0;z<C;++z,++F,++_){var B=c[F];c[F]=c[_],c[_]=B}var N=i[x-1];i[x-1]=i[y],i[y]=N,y=s(u,g,d,x-1,c,i,S);for(var F=C*(x-1),_=C*y,z=0;z<C;++z,++F,++_){var B=c[F];c[F]=c[_],c[_]=B}var N=i[x-1];if(i[x-1]=i[y],i[y]=N,w<y){for(x=y-1;d<x&&c[C*(x-1)+g]===S;)x-=1;x+=1}else if(y<w)for(d=y+1;d<x&&c[C*d+g]===S;)d+=1;else break}return s(u,g,h,w,c,i,c[C*w+g])}},8105:function(v){v.exports=r;var p={"lo===p0":e,"lo<p0":s,"lo<=p0":n,"hi<=p0":l,"lo<p0&&p0<=hi":u,"lo<=p0&&p0<=hi":f,"!(lo>=p0)&&!(p1>=hi)":g};function r(h){return p[h]}function e(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+a];if(k===w)if(M===m)M+=1,S+=C;else{for(var I=0;C>I;++I){var O=d[y+I];d[y+I]=d[S],d[S++]=O}var z=x[m];x[m]=x[M],x[M++]=z}}return M}function s(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+a];if(k<w)if(M===m)M+=1,S+=C;else{for(var I=0;C>I;++I){var O=d[y+I];d[y+I]=d[S],d[S++]=O}var z=x[m];x[m]=x[M],x[M++]=z}}return M}function n(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+E];if(k<=w)if(M===m)M+=1,S+=C;else{for(var I=0;C>I;++I){var O=d[y+I];d[y+I]=d[S],d[S++]=O}var z=x[m];x[m]=x[M],x[M++]=z}}return M}function l(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+E];if(k<=w)if(M===m)M+=1,S+=C;else{for(var I=0;C>I;++I){var O=d[y+I];d[y+I]=d[S],d[S++]=O}var z=x[m];x[m]=x[M],x[M++]=z}}return M}function f(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+a],I=d[y+E];if(k<=w&&w<=I)if(M===m)M+=1,S+=C;else{for(var O=0;C>O;++O){var z=d[y+O];d[y+O]=d[S],d[S++]=z}var B=x[m];x[m]=x[M],x[M++]=B}}return M}function u(h,T,c,i,d,x,w){for(var C=2*h,y=C*c,S=y,M=c,a=T,E=h+T,m=c;i>m;++m,y+=C){var k=d[y+a],I=d[y+E];if(k<w&&w<=I)if(M===m)M+=1,S+=C;else{for(var O=0;C>O;++O){var z=d[y+O];d[y+O]=d[S],d[S++]=z}var B=x[m];x[m]=x[M],x[M++]=B}}return M}function g(h,T,c,i,d,x,w,C){for(var y=2*h,S=y*c,M=S,a=c,E=T,m=h+T,k=c;i>k;++k,S+=y){var I=d[S+E],O=d[S+m];if(!(I>=w)&&!(C>=O))if(a===k)a+=1,M+=y;else{for(var z=0;y>z;++z){var B=d[S+z];d[S+z]=d[M],d[M++]=B}var F=x[k];x[k]=x[a],x[a++]=F}}return a}},1811:function(v){v.exports=r;var p=32;function r(T,c){c<=4*p?e(0,c-1,T):h(0,c-1,T)}function e(T,c,i){for(var d=2*(T+1),x=T+1;x<=c;++x){for(var w=i[d++],C=i[d++],y=x,S=d-2;y-- >T;){var M=i[S-2],a=i[S-1];if(M<w)break;if(M===w&&a<C)break;i[S]=M,i[S+1]=a,S-=2}i[S]=w,i[S+1]=C}}function s(T,c,i){T*=2,c*=2;var d=i[T],x=i[T+1];i[T]=i[c],i[T+1]=i[c+1],i[c]=d,i[c+1]=x}function n(T,c,i){T*=2,c*=2,i[T]=i[c],i[T+1]=i[c+1]}function l(T,c,i,d){T*=2,c*=2,i*=2;var x=d[T],w=d[T+1];d[T]=d[c],d[T+1]=d[c+1],d[c]=d[i],d[c+1]=d[i+1],d[i]=x,d[i+1]=w}function f(T,c,i,d,x){T*=2,c*=2,x[T]=x[c],x[c]=i,x[T+1]=x[c+1],x[c+1]=d}function u(T,c,i){T*=2,c*=2;var d=i[T],x=i[c];return d<x?!1:d===x?i[T+1]>i[c+1]:!0}function g(T,c,i,d){T*=2;var x=d[T];return x<c?!0:x===c?d[T+1]<i:!1}function h(T,c,i){var d=(c-T+1)/6|0,x=T+d,w=c-d,C=T+c>>1,y=C-d,S=C+d,M=x,a=y,E=C,m=S,k=w,I=T+1,O=c-1,z=0;u(M,a,i)&&(z=M,M=a,a=z),u(m,k,i)&&(z=m,m=k,k=z),u(M,E,i)&&(z=M,M=E,E=z),u(a,E,i)&&(z=a,a=E,E=z),u(M,m,i)&&(z=M,M=m,m=z),u(E,m,i)&&(z=E,E=m,m=z),u(a,k,i)&&(z=a,a=k,k=z),u(a,E,i)&&(z=a,a=E,E=z),u(m,k,i)&&(z=m,m=k,k=z);for(var B=i[2*a],F=i[2*a+1],_=i[2*m],N=i[2*m+1],G=2*M,X=2*E,$=2*k,et=2*x,ot=2*C,nt=2*w,Z=0;Z<2;++Z){var Q=i[G+Z],W=i[X+Z],J=i[$+Z];i[et+Z]=Q,i[ot+Z]=W,i[nt+Z]=J}n(y,T,i),n(S,c,i);for(var it=I;it<=O;++it)if(g(it,B,F,i))it!==I&&s(it,I,i),++I;else if(!g(it,_,N,i))for(;;)if(g(O,_,N,i)){g(O,B,F,i)?(l(it,I,O,i),++I,--O):(s(it,O,i),--O);break}else{if(--O<it)break;continue}f(T,I-1,B,F,i),f(c,O+1,_,N,i),I-2-T<=p?e(T,I-2,i):h(T,I-2,i),c-(O+2)<=p?e(O+2,c,i):h(O+2,c,i),O-I<=p?e(I,O,i):h(I,O,i)}},855:function(v,p,r){v.exports={init:x,sweepBipartite:y,sweepComplete:S,scanBipartite:M,scanComplete:a};var e=r(1888),s=r(8828),n=r(1811),l=1<<28,f=1024,u=e.mallocInt32(f),g=e.mallocInt32(f),h=e.mallocInt32(f),T=e.mallocInt32(f),c=e.mallocInt32(f),i=e.mallocInt32(f),d=e.mallocDouble(f*8);function x(E){var m=s.nextPow2(E);u.length<m&&(e.free(u),u=e.mallocInt32(m)),g.length<m&&(e.free(g),g=e.mallocInt32(m)),h.length<m&&(e.free(h),h=e.mallocInt32(m)),T.length<m&&(e.free(T),T=e.mallocInt32(m)),c.length<m&&(e.free(c),c=e.mallocInt32(m)),i.length<m&&(e.free(i),i=e.mallocInt32(m));var k=8*m;d.length<k&&(e.free(d),d=e.mallocDouble(k))}function w(E,m,k,I){var O=m[I],z=E[k-1];E[O]=z,m[z]=O}function C(E,m,k,I){E[k]=I,m[I]=k}function y(E,m,k,I,O,z,B,F,_,N){for(var G=0,X=2*E,$=E-1,et=X-1,ot=k;ot<I;++ot){var nt=z[ot],Z=X*ot;d[G++]=O[Z+$],d[G++]=-(nt+1),d[G++]=O[Z+et],d[G++]=nt}for(var ot=B;ot<F;++ot){var nt=N[ot]+l,Q=X*ot;d[G++]=_[Q+$],d[G++]=-nt,d[G++]=_[Q+et],d[G++]=nt}var W=G>>>1;n(d,W);for(var J=0,it=0,ot=0;ot<W;++ot){var K=d[2*ot+1]|0;if(K>=l)K=K-l|0,w(h,T,it--,K);else if(K>=0)w(u,g,J--,K);else if(K<=-l){K=-K-l|0;for(var H=0;H<J;++H){var at=m(u[H],K);if(at!==void 0)return at}C(h,T,it++,K)}else{K=-K-1|0;for(var H=0;H<it;++H){var at=m(K,h[H]);if(at!==void 0)return at}C(u,g,J++,K)}}}function S(E,m,k,I,O,z,B,F,_,N){for(var G=0,X=2*E,$=E-1,et=X-1,ot=k;ot<I;++ot){var nt=z[ot]+1<<1,Z=X*ot;d[G++]=O[Z+$],d[G++]=-nt,d[G++]=O[Z+et],d[G++]=nt}for(var ot=B;ot<F;++ot){var nt=N[ot]+1<<1,Q=X*ot;d[G++]=_[Q+$],d[G++]=-nt|1,d[G++]=_[Q+et],d[G++]=nt|1}var W=G>>>1;n(d,W);for(var J=0,it=0,K=0,ot=0;ot<W;++ot){var H=d[2*ot+1]|0,at=H&1;if(ot<W-1&&H>>1===d[2*ot+3]>>1&&(at=2,ot+=1),H<0){for(var tt=-(H>>1)-1,lt=0;lt<K;++lt){var dt=m(c[lt],tt);if(dt!==void 0)return dt}if(at!==0)for(var lt=0;lt<J;++lt){var dt=m(u[lt],tt);if(dt!==void 0)return dt}if(at!==1)for(var lt=0;lt<it;++lt){var dt=m(h[lt],tt);if(dt!==void 0)return dt}at===0?C(u,g,J++,tt):at===1?C(h,T,it++,tt):at===2&&C(c,i,K++,tt)}else{var tt=(H>>1)-1;at===0?w(u,g,J--,tt):at===1?w(h,T,it--,tt):at===2&&w(c,i,K--,tt)}}}function M(E,m,k,I,O,z,B,F,_,N,G,X){var $=0,et=2*E,ot=m,nt=m+E,Z=1,Q=1;I?Q=l:Z=l;for(var W=O;W<z;++W){var J=W+Z,it=et*W;d[$++]=B[it+ot],d[$++]=-J,d[$++]=B[it+nt],d[$++]=J}for(var W=_;W<N;++W){var J=W+Q,K=et*W;d[$++]=G[K+ot],d[$++]=-J}var H=$>>>1;n(d,H);for(var at=0,W=0;W<H;++W){var tt=d[2*W+1]|0;if(tt<0){var J=-tt,lt=!1;if(J>=l?(lt=!I,J-=l):(lt=!!I,J-=1),lt)C(u,g,at++,J);else{var dt=X[J],mt=et*J,gt=G[mt+m+1],Mt=G[mt+m+1+E];t:for(var Lt=0;Lt<at;++Lt){var zt=u[Lt],xt=et*zt;if(!(Mt<B[xt+m+1]||B[xt+m+1+E]<gt)){for(var Ct=m+2;Ct<E;++Ct)if(G[mt+Ct+E]<B[xt+Ct]||B[xt+Ct+E]<G[mt+Ct])continue t;var wt=F[zt],Rt;if(I?Rt=k(dt,wt):Rt=k(wt,dt),Rt!==void 0)return Rt}}}}else w(u,g,at--,tt-Z)}}function a(E,m,k,I,O,z,B,F,_,N,G){for(var X=0,$=2*E,et=m,ot=m+E,nt=I;nt<O;++nt){var Z=nt+l,Q=$*nt;d[X++]=z[Q+et],d[X++]=-Z,d[X++]=z[Q+ot],d[X++]=Z}for(var nt=F;nt<_;++nt){var Z=nt+1,W=$*nt;d[X++]=N[W+et],d[X++]=-Z}var J=X>>>1;n(d,J);for(var it=0,nt=0;nt<J;++nt){var K=d[2*nt+1]|0;if(K<0){var Z=-K;if(Z>=l)u[it++]=Z-l;else{Z-=1;var H=G[Z],at=$*Z,tt=N[at+m+1],lt=N[at+m+1+E];t:for(var dt=0;dt<it;++dt){var mt=u[dt],gt=B[mt];if(gt===H)break;var Mt=$*mt;if(!(lt<z[Mt+m+1]||z[Mt+m+1+E]<tt)){for(var Lt=m+2;Lt<E;++Lt)if(N[at+Lt+E]<z[Mt+Lt]||z[Mt+Lt+E]<N[at+Lt])continue t;var zt=k(gt,H);if(zt!==void 0)return zt}}}}else{for(var Z=K-l,dt=it-1;dt>=0;--dt)if(u[dt]===Z){for(var Lt=dt+1;Lt<it;++Lt)u[Lt-1]=u[Lt];break}--it}}}},2538:function(v,p,r){var e=r(8902),s=r(5542),n=r(2272),l=r(5023);v.exports=T;function f(c){return[Math.min(c[0],c[1]),Math.max(c[0],c[1])]}function u(c,i){return c[0]-i[0]||c[1]-i[1]}function g(c){return c.map(f).sort(u)}function h(c,i,d){return i in c?c[i]:d}function T(c,i,d){Array.isArray(i)?(d=d||{},i=i||[]):(d=i||{},i=[]);var x=!!h(d,"delaunay",!0),w=!!h(d,"interior",!0),C=!!h(d,"exterior",!0),y=!!h(d,"infinity",!1);if(!w&&!C||c.length===0)return[];var S=e(c,i);if(x||w!==C||y){for(var M=s(c.length,g(i)),a=0;a<S.length;++a){var E=S[a];M.addTriangle(E[0],E[1],E[2])}return x&&n(c,M),C?w?y?l(M,0,y):M.cells():l(M,1,y):l(M,-1)}else return S}},2272:function(v,p,r){var e=r(2646)[4];r(2478),v.exports=n;function s(l,f,u,g,h,T){var c=f.opposite(g,h);if(!(c<0)){if(h<g){var i=g;g=h,h=i,i=T,T=c,c=i}f.isConstraint(g,h)||e(l[g],l[h],l[T],l[c])<0&&u.push(g,h)}}function n(l,f){for(var u=[],g=l.length,h=f.stars,T=0;T<g;++T)for(var c=h[T],i=1;i<c.length;i+=2){var d=c[i];if(!(d<T)&&!f.isConstraint(T,d)){for(var x=c[i-1],w=-1,C=1;C<c.length;C+=2)if(c[C-1]===d){w=c[C];break}w<0||e(l[T],l[d],l[x],l[w])<0&&u.push(T,d)}}for(;u.length>0;){for(var d=u.pop(),T=u.pop(),x=-1,w=-1,c=h[T],y=1;y<c.length;y+=2){var S=c[y-1],M=c[y];S===d?w=M:M===d&&(x=S)}x<0||w<0||e(l[T],l[d],l[x],l[w])>=0||(f.flip(T,d),s(l,f,u,x,T,w),s(l,f,u,T,w,x),s(l,f,u,w,d,x),s(l,f,u,d,x,w))}}},5023:function(v,p,r){var e=r(2478);v.exports=g;function s(h,T,c,i,d,x,w){this.cells=h,this.neighbor=T,this.flags=i,this.constraint=c,this.active=d,this.next=x,this.boundary=w}var n=s.prototype;function l(h,T){return h[0]-T[0]||h[1]-T[1]||h[2]-T[2]}n.locate=function(){var h=[0,0,0];return function(T,c,i){var d=T,x=c,w=i;return c<i?c<T&&(d=c,x=i,w=T):i<T&&(d=i,x=T,w=c),d<0?-1:(h[0]=d,h[1]=x,h[2]=w,e.eq(this.cells,h,l))}}();function f(h,T){for(var c=h.cells(),i=c.length,d=0;d<i;++d){var x=c[d],w=x[0],C=x[1],y=x[2];C<y?C<w&&(x[0]=C,x[1]=y,x[2]=w):y<w&&(x[0]=y,x[1]=w,x[2]=C)}c.sort(l);for(var S=new Array(i),d=0;d<S.length;++d)S[d]=0;var M=[],a=[],E=new Array(3*i),m=new Array(3*i),k=null;T&&(k=[]);for(var I=new s(c,E,m,S,M,a,k),d=0;d<i;++d)for(var x=c[d],O=0;O<3;++O){var w=x[O],C=x[(O+1)%3],z=E[3*d+O]=I.locate(C,w,h.opposite(C,w)),B=m[3*d+O]=h.isConstraint(w,C);z<0&&(B?a.push(d):(M.push(d),S[d]=1),T&&k.push([C,w,-1]))}return I}function u(h,T,c){for(var i=0,d=0;d<h.length;++d)T[d]===c&&(h[i++]=h[d]);return h.length=i,h}function g(h,T,c){var i=f(h,c);if(T===0)return c?i.cells.concat(i.boundary):i.cells;for(var d=1,x=i.active,w=i.next,C=i.flags,y=i.cells,S=i.constraint,M=i.neighbor;x.length>0||w.length>0;){for(;x.length>0;){var a=x.pop();if(C[a]!==-d){C[a]=d,y[a];for(var E=0;E<3;++E){var m=M[3*a+E];m>=0&&C[m]===0&&(S[3*a+E]?w.push(m):(x.push(m),C[m]=d))}}}var k=w;w=x,x=k,w.length=0,d=-d}var I=u(y,C,T);return c?I.concat(i.boundary):I}},8902:function(v,p,r){var e=r(2478),s=r(3250)[3],n=0,l=1,f=2;v.exports=w;function u(C,y,S,M,a){this.a=C,this.b=y,this.idx=S,this.lowerIds=M,this.upperIds=a}function g(C,y,S,M){this.a=C,this.b=y,this.type=S,this.idx=M}function h(C,y){var S=C.a[0]-y.a[0]||C.a[1]-y.a[1]||C.type-y.type;return S||C.type!==n&&(S=s(C.a,C.b,y.b),S)?S:C.idx-y.idx}function T(C,y){return s(C.a,C.b,y)}function c(C,y,S,M,a){for(var E=e.lt(y,M,T),m=e.gt(y,M,T),k=E;k<m;++k){for(var I=y[k],O=I.lowerIds,B=O.length;B>1&&s(S[O[B-2]],S[O[B-1]],M)>0;)C.push([O[B-1],O[B-2],a]),B-=1;O.length=B,O.push(a);for(var z=I.upperIds,B=z.length;B>1&&s(S[z[B-2]],S[z[B-1]],M)<0;)C.push([z[B-2],z[B-1],a]),B-=1;z.length=B,z.push(a)}}function i(C,y){var S;return C.a[0]<y.a[0]?S=s(C.a,C.b,y.a):S=s(y.b,y.a,C.a),S||(y.b[0]<C.b[0]?S=s(C.a,C.b,y.b):S=s(y.b,y.a,C.b),S||C.idx-y.idx)}function d(C,y,S){var M=e.le(C,S,i),a=C[M],E=a.upperIds,m=E[E.length-1];a.upperIds=[m],C.splice(M+1,0,new u(S.a,S.b,S.idx,[m],E))}function x(C,y,S){var M=S.a;S.a=S.b,S.b=M;var a=e.eq(C,S,i),E=C[a],m=C[a-1];m.upperIds=E.upperIds,C.splice(a,1)}function w(C,y){for(var S=C.length,M=y.length,a=[],E=0;E<S;++E)a.push(new g(C[E],null,n,E));for(var E=0;E<M;++E){var m=y[E],k=C[m[0]],I=C[m[1]];k[0]<I[0]?a.push(new g(k,I,f,E),new g(I,k,l,E)):k[0]>I[0]&&a.push(new g(I,k,f,E),new g(k,I,l,E))}a.sort(h);for(var O=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),z=[new u([O,1],[O,0],-1,[],[])],B=[],E=0,F=a.length;E<F;++E){var _=a[E],N=_.type;N===n?c(B,z,C,_.a,_.idx):N===f?d(z,C,_):x(z,C,_)}return B}},5542:function(v,p,r){var e=r(2478);v.exports=f;function s(u,g){this.stars=u,this.edges=g}var n=s.prototype;function l(u,g,h){for(var T=1,c=u.length;T<c;T+=2)if(u[T-1]===g&&u[T]===h){u[T-1]=u[c-2],u[T]=u[c-1],u.length=c-2;return}}n.isConstraint=function(){var u=[0,0];function g(h,T){return h[0]-T[0]||h[1]-T[1]}return function(h,T){return u[0]=Math.min(h,T),u[1]=Math.max(h,T),e.eq(this.edges,u,g)>=0}}(),n.removeTriangle=function(u,g,h){var T=this.stars;l(T[u],g,h),l(T[g],h,u),l(T[h],u,g)},n.addTriangle=function(u,g,h){var T=this.stars;T[u].push(g,h),T[g].push(h,u),T[h].push(u,g)},n.opposite=function(u,g){for(var h=this.stars[g],T=1,c=h.length;T<c;T+=2)if(h[T]===u)return h[T-1];return-1},n.flip=function(u,g){var h=this.opposite(u,g),T=this.opposite(g,u);this.removeTriangle(u,g,h),this.removeTriangle(g,u,T),this.addTriangle(u,T,h),this.addTriangle(g,h,T)},n.edges=function(){for(var u=this.stars,g=[],h=0,T=u.length;h<T;++h)for(var c=u[h],i=0,d=c.length;i<d;i+=2)g.push([c[i],c[i+1]]);return g},n.cells=function(){for(var u=this.stars,g=[],h=0,T=u.length;h<T;++h)for(var c=u[h],i=0,d=c.length;i<d;i+=2){var x=c[i],w=c[i+1];h<Math.min(x,w)&&g.push([h,x,w])}return g};function f(u,g){for(var h=new Array(u),T=0;T<u;++T)h[T]=[];return new s(h,g)}},2419:function(v){v.exports=p;function p(r){for(var e=1,s=1;s<r.length;++s)for(var n=0;n<s;++n)if(r[s]<r[n])e=-e;else if(r[n]===r[s])return 0;return e}},3628:function(v,p,r){var e=r(1338),s=r(727);function n(u,g){for(var h=0,T=u.length,c=0;c<T;++c)h+=u[c]*g[c];return h}function l(u){var g=u.length;if(g===0)return[];u[0].length;var h=e([u.length+1,u.length+1],1),T=e([u.length+1],1);h[g][g]=0;for(var c=0;c<g;++c){for(var i=0;i<=c;++i)h[i][c]=h[c][i]=2*n(u[c],u[i]);T[c]=n(u[c],u[c])}for(var d=s(h,T),x=0,w=d[g+1],c=0;c<w.length;++c)x+=w[c];for(var C=new Array(g),c=0;c<g;++c){for(var w=d[c],y=0,i=0;i<w.length;++i)y+=w[i];C[c]=y/x}return C}function f(u){if(u.length===0)return[];for(var g=u[0].length,h=e([g]),T=l(u),c=0;c<u.length;++c)for(var i=0;i<g;++i)h[i]+=u[c][i]*T[c];return h}f.barycenetric=l,v.exports=f},6037:function(v,p,r){v.exports=s;var e=r(3628);function s(n){for(var l=e(n),f=0,u=0;u<n.length;++u)for(var g=n[u],h=0;h<l.length;++h)f+=Math.pow(g[h]-l[h],2);return Math.sqrt(f/n.length)}},332:function(v,p,r){v.exports=k;var e=r(1755),s=r(6867),n=r(1125),l=r(7842),f=r(1318),u=r(946),g=r(5838),h=r(1278),T=r(3637);function c(I){var O=u(I);return[h(O,-1/0),h(O,1/0)]}function i(I,O){for(var z=new Array(O.length),B=0;B<O.length;++B){var F=O[B],_=I[F[0]],N=I[F[1]];z[B]=[h(Math.min(_[0],N[0]),-1/0),h(Math.min(_[1],N[1]),-1/0),h(Math.max(_[0],N[0]),1/0),h(Math.max(_[1],N[1]),1/0)]}return z}function d(I){for(var O=new Array(I.length),z=0;z<I.length;++z){var B=I[z];O[z]=[h(B[0],-1/0),h(B[1],-1/0),h(B[0],1/0),h(B[1],1/0)]}return O}function x(I,O,z){var B=[];return s(z,function(F,_){var N=O[F],G=O[_];if(!(N[0]===G[0]||N[0]===G[1]||N[1]===G[0]||N[1]===G[1])){var X=I[N[0]],$=I[N[1]],et=I[G[0]],ot=I[G[1]];n(X,$,et,ot)&&B.push([F,_])}}),B}function w(I,O,z,B){var F=[];return s(z,B,function(_,N){var G=O[_];if(!(G[0]===N||G[1]===N)){var X=I[N],$=I[G[0]],et=I[G[1]];n($,et,X,X)&&F.push([_,N])}}),F}function C(I,O,z,B,F){var _,N,G=I.map(function(mt){return[l(mt[0]),l(mt[1])]});for(_=0;_<z.length;++_){var X=z[_];N=X[0];var $=X[1],et=O[N],ot=O[$],nt=T(g(I[et[0]]),g(I[et[1]]),g(I[ot[0]]),g(I[ot[1]]));if(nt){var Z=I.length;I.push([u(nt[0]),u(nt[1])]),G.push(nt),B.push([N,Z],[$,Z])}}for(B.sort(function(mt,gt){if(mt[0]!==gt[0])return mt[0]-gt[0];var Mt=G[mt[1]],Lt=G[gt[1]];return f(Mt[0],Lt[0])||f(Mt[1],Lt[1])}),_=B.length-1;_>=0;--_){var Q=B[_];N=Q[0];var W=O[N],J=W[0],it=W[1],K=I[J],H=I[it];if((K[0]-H[0]||K[1]-H[1])<0){var at=J;J=it,it=at}W[0]=J;var tt=W[1]=Q[1],lt;for(F&&(lt=W[2]);_>0&&B[_-1][0]===N;){var Q=B[--_],dt=Q[1];F?O.push([tt,dt,lt]):O.push([tt,dt]),tt=dt}F?O.push([tt,it,lt]):O.push([tt,it])}return G}function y(I,O,z){for(var B=O.length,F=new e(B),_=[],N=0;N<O.length;++N){var G=O[N],X=c(G[0]),$=c(G[1]);_.push([h(X[0],-1/0),h($[0],-1/0),h(X[1],1/0),h($[1],1/0)])}s(_,function(Q,W){F.link(Q,W)});for(var et=!0,ot=new Array(B),N=0;N<B;++N){var nt=F.find(N);nt!==N&&(et=!1,I[nt]=[Math.min(I[N][0],I[nt][0]),Math.min(I[N][1],I[nt][1])])}if(et)return null;for(var Z=0,N=0;N<B;++N){var nt=F.find(N);nt===N?(ot[N]=Z,I[Z++]=I[N]):ot[N]=-1}I.length=Z;for(var N=0;N<B;++N)ot[N]<0&&(ot[N]=ot[F.find(N)]);return ot}function S(I,O){return I[0]-O[0]||I[1]-O[1]}function M(I,O){var z=I[0]-O[0]||I[1]-O[1];return z||(I[2]<O[2]?-1:I[2]>O[2]?1:0)}function a(I,O,z){if(I.length!==0){if(O)for(var B=0;B<I.length;++B){var F=I[B],_=O[F[0]],N=O[F[1]];F[0]=Math.min(_,N),F[1]=Math.max(_,N)}else for(var B=0;B<I.length;++B){var F=I[B],_=F[0],N=F[1];F[0]=Math.min(_,N),F[1]=Math.max(_,N)}z?I.sort(M):I.sort(S);for(var G=1,B=1;B<I.length;++B){var X=I[B-1],$=I[B];$[0]===X[0]&&$[1]===X[1]&&(!z||$[2]===X[2])||(I[G++]=$)}I.length=G}}function E(I,O,z){var B=y(I,[],d(I));return a(O,B,z),!!B}function m(I,O,z){var B=i(I,O),F=x(I,O,B),_=d(I),N=w(I,O,B,_),G=C(I,O,F,N,z),X=y(I,G);return a(O,X,z),X?!0:F.length>0||N.length>0}function k(I,O,z){var B;if(z){B=O;for(var F=new Array(O.length),_=0;_<O.length;++_){var N=O[_];F[_]=[N[0],N[1],z[_]]}O=F}for(var G=E(I,O,!!z);m(I,O,!!z);)G=!0;if(z&&G){B.length=0,z.length=0;for(var _=0;_<O.length;++_){var N=O[_];B.push([N[0],N[1]]),z.push(N[2])}}return G}},3637:function(v,p,r){v.exports=T;var e=r(6504),s=r(8697),n=r(5572),l=r(7721),f=r(544),u=r(2653),g=r(8987);function h(c,i){return n(e(c[0],i[1]),e(c[1],i[0]))}function T(c,i,d,x){var w=f(i,c),C=f(x,d),y=h(w,C);if(l(y)===0)return null;var S=f(c,d),M=h(C,S),a=s(M,y),E=g(w,a),m=u(c,E);return m}},3642:function(v){v.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(v,p,r){var e=r(3642),s=r(395);v.exports=n;function n(g){var h,T,c,i,d,x,w,C,a,y,S;if(g||(g={}),C=(g.nshades||72)-1,w=g.format||"hex",x=g.colormap,x||(x="jet"),typeof x=="string"){if(x=x.toLowerCase(),!e[x])throw Error(x+" not a supported colorscale");d=e[x]}else if(Array.isArray(x))d=x.slice();else throw Error("unsupported colormap option",x);if(d.length>C+1)throw new Error(x+" map requires nshades to be at least size "+d.length);Array.isArray(g.alpha)?g.alpha.length!==2?y=[1,1]:y=g.alpha.slice():typeof g.alpha=="number"?y=[g.alpha,g.alpha]:y=[1,1],h=d.map(function(k){return Math.round(k.index*C)}),y[0]=Math.min(Math.max(y[0],0),1),y[1]=Math.min(Math.max(y[1],0),1);var M=d.map(function(k,I){var O=d[I].index,z=d[I].rgb.slice();return z.length===4&&z[3]>=0&&z[3]<=1||(z[3]=y[0]+(y[1]-y[0])*O),z}),a=[];for(S=0;S<h.length-1;++S){i=h[S+1]-h[S],T=M[S],c=M[S+1];for(var E=0;E<i;E++){var m=E/i;a.push([Math.round(s(T[0],c[0],m)),Math.round(s(T[1],c[1],m)),Math.round(s(T[2],c[2],m)),s(T[3],c[3],m)])}}return a.push(d[d.length-1].rgb.concat(y[1])),w==="hex"?a=a.map(f):w==="rgbaString"?a=a.map(u):w==="float"&&(a=a.map(l)),a}function l(g){return[g[0]/255,g[1]/255,g[2]/255,g[3]]}function f(g){for(var h,T="#",c=0;c<3;++c)h=g[c],h=h.toString(16),T+=("00"+h).substr(h.length);return T}function u(g){return"rgba("+g.join(",")+")"}},3140:function(v,p,r){v.exports=g;var e=r(3250),s=r(8572),n=r(9362),l=r(5382),f=r(8210);function u(h,T,c){var i=n(h[0],-T[0]),d=n(h[1],-T[1]),x=n(c[0],-T[0]),w=n(c[1],-T[1]),C=f(l(i,x),l(d,w));return C[C.length-1]>=0}function g(h,T,c,i){var d=e(T,c,i);if(d===0){var x=s(e(h,T,c)),w=s(e(h,T,i));if(x===w){if(x===0){var C=u(h,T,c),y=u(h,T,i);return C===y?0:C?1:-1}return 0}else{if(w===0)return x>0||u(h,T,i)?-1:1;if(x===0)return w>0||u(h,T,c)?1:-1}return s(w-x)}var S=e(h,T,c);if(S>0)return d>0&&e(h,T,i)>0?1:-1;if(S<0)return d>0||e(h,T,i)>0?1:-1;var M=e(h,T,i);return M>0||u(h,T,c)?1:-1}},8572:function(v){v.exports=function(r){return r<0?-1:r>0?1:0}},8507:function(v){v.exports=e;var p=Math.min;function r(s,n){return s-n}function e(s,n){var l=s.length,f=s.length-n.length;if(f)return f;switch(l){case 0:return 0;case 1:return s[0]-n[0];case 2:return s[0]+s[1]-n[0]-n[1]||p(s[0],s[1])-p(n[0],n[1]);case 3:var u=s[0]+s[1],g=n[0]+n[1];if(f=u+s[2]-(g+n[2]),f)return f;var h=p(s[0],s[1]),T=p(n[0],n[1]);return p(h,s[2])-p(T,n[2])||p(h+s[2],u)-p(T+n[2],g);case 4:var c=s[0],i=s[1],d=s[2],x=s[3],w=n[0],C=n[1],y=n[2],S=n[3];return c+i+d+x-(w+C+y+S)||p(c,i,d,x)-p(w,C,y,S,w)||p(c+i,c+d,c+x,i+d,i+x,d+x)-p(w+C,w+y,w+S,C+y,C+S,y+S)||p(c+i+d,c+i+x,c+d+x,i+d+x)-p(w+C+y,w+C+S,w+y+S,C+y+S);default:for(var M=s.slice().sort(r),a=n.slice().sort(r),E=0;E<l;++E)if(f=M[E]-a[E],f)return f;return 0}}},3788:function(v,p,r){var e=r(8507),s=r(2419);v.exports=n;function n(l,f){return e(l,f)||s(l)-s(f)}},7352:function(v,p,r){var e=r(5721),s=r(4750),n=r(2690);v.exports=l;function l(f){var u=f.length;if(u===0)return[];if(u===1)return[[0]];var g=f[0].length;return g===0?[]:g===1?e(f):g===2?s(f):n(f,g)}},5721:function(v){v.exports=p;function p(r){for(var e=0,s=0,n=1;n<r.length;++n)r[n][0]<r[e][0]&&(e=n),r[n][0]>r[s][0]&&(s=n);return e<s?[[e],[s]]:e>s?[[s],[e]]:[[e]]}},4750:function(v,p,r){v.exports=s;var e=r(3090);function s(n){var l=e(n),f=l.length;if(f<=2)return[];for(var u=new Array(f),g=l[f-1],h=0;h<f;++h){var T=l[h];u[h]=[g,T],g=T}return u}},2690:function(v,p,r){v.exports=f;var e=r(8954),s=r(3952);function n(u,g){for(var h=u.length,T=new Array(h),c=0;c<g.length;++c)T[c]=u[g[c]];for(var i=g.length,c=0;c<h;++c)g.indexOf(c)<0&&(T[i++]=u[c]);return T}function l(u,g){for(var h=u.length,T=g.length,c=0;c<h;++c)for(var i=u[c],d=0;d<i.length;++d){var x=i[d];if(x<T)i[d]=g[x];else{x=x-T;for(var w=0;w<T;++w)x>=g[w]&&(x+=1);i[d]=x}}return u}function f(u,g){try{return e(u,!0)}catch{var h=s(u);if(h.length<=g)return[];var T=n(u,h),c=e(T,!0);return l(c,h)}}},4769:function(v){function p(e,s,n,l,f,u){var g=6*f*f-6*f,h=3*f*f-4*f+1,T=-6*f*f+6*f,c=3*f*f-2*f;if(e.length){u||(u=new Array(e.length));for(var i=e.length-1;i>=0;--i)u[i]=g*e[i]+h*s[i]+T*n[i]+c*l[i];return u}return g*e+h*s+T*n[i]+c*l}function r(e,s,n,l,f,u){var g=f-1,h=f*f,T=g*g,c=(1+2*f)*T,i=f*T,d=h*(3-2*f),x=h*g;if(e.length){u||(u=new Array(e.length));for(var w=e.length-1;w>=0;--w)u[w]=c*e[w]+i*s[w]+d*n[w]+x*l[w];return u}return c*e+i*s+d*n+x*l}v.exports=r,v.exports.derivative=p},7642:function(v,p,r){var e=r(8954),s=r(1682);v.exports=u;function n(g,h){this.point=g,this.index=h}function l(g,h){for(var T=g.point,c=h.point,i=T.length,d=0;d<i;++d){var x=c[d]-T[d];if(x)return x}return 0}function f(g,h,T){if(g===1)return T?[[-1,0]]:[];var c=h.map(function(C,y){return[C[0],y]});c.sort(function(C,y){return C[0]-y[0]});for(var i=new Array(g-1),d=1;d<g;++d){var x=c[d-1],w=c[d];i[d-1]=[x[1],w[1]]}return T&&i.push([-1,i[0][1]],[i[g-1][1],-1]),i}function u(g,h){var T=g.length;if(T===0)return[];var c=g[0].length;if(c<1)return[];if(c===1)return f(T,g,h);for(var i=new Array(T),d=1,x=0;x<T;++x){for(var w=g[x],C=new Array(c+1),y=0,S=0;S<c;++S){var M=w[S];C[S]=M,y+=M*M}C[c]=y,i[x]=new n(C,x),d=Math.max(y,d)}s(i,l),T=i.length;for(var a=new Array(T+c+1),E=new Array(T+c+1),m=(c+1)*(c+1)*d,k=new Array(c+1),x=0;x<=c;++x)k[x]=0;k[c]=m,a[0]=k.slice(),E[0]=-1;for(var x=0;x<=c;++x){var C=k.slice();C[x]=1,a[x+1]=C,E[x+1]=-1}for(var x=0;x<T;++x){var I=i[x];a[x+c+1]=I.point,E[x+c+1]=I.index}var O=e(a,!1);if(h?O=O.filter(function(z){for(var B=0,F=0;F<=c;++F){var _=E[z[F]];if(_<0&&++B>=2)return!1;z[F]=_}return!0}):O=O.filter(function(z){for(var B=0;B<=c;++B){var F=E[z[B]];if(F<0)return!1;z[B]=F}return!0}),c&1)for(var x=0;x<O.length;++x){var I=O[x],C=I[0];I[0]=I[1],I[1]=C}return O}},2361:function(v){var p=!1;if(typeof Float64Array<"u"){var r=new Float64Array(1),e=new Uint32Array(r.buffer);if(r[0]=1,p=!0,e[1]===1072693248){let n=function(u,g){return e[0]=u,e[1]=g,r[0]},l=function(u){return r[0]=u,e[0]},f=function(u){return r[0]=u,e[1]};v.exports=function(g){return r[0]=g,[e[0],e[1]]},v.exports.pack=n,v.exports.lo=l,v.exports.hi=f}else if(e[0]===1072693248){let n=function(u,g){return e[1]=u,e[0]=g,r[0]},l=function(u){return r[0]=u,e[1]},f=function(u){return r[0]=u,e[0]};v.exports=function(g){return r[0]=g,[e[1],e[0]]},v.exports.pack=n,v.exports.lo=l,v.exports.hi=f}else p=!1}if(!p){let n=function(u,g){return s.writeUInt32LE(u,0,!0),s.writeUInt32LE(g,4,!0),s.readDoubleLE(0,!0)},l=function(u){return s.writeDoubleLE(u,0,!0),s.readUInt32LE(0,!0)},f=function(u){return s.writeDoubleLE(u,0,!0),s.readUInt32LE(4,!0)};var s=new Buffer(8);v.exports=function(g){return s.writeDoubleLE(g,0,!0),[s.readUInt32LE(0,!0),s.readUInt32LE(4,!0)]},v.exports.pack=n,v.exports.lo=l,v.exports.hi=f}v.exports.sign=function(n){return v.exports.hi(n)>>>31},v.exports.exponent=function(n){var l=v.exports.hi(n);return(l<<1>>>21)-1023},v.exports.fraction=function(n){var l=v.exports.lo(n),f=v.exports.hi(n),u=f&(1<<20)-1;return f&2146435072&&(u+=1048576),[l,u]},v.exports.denormalized=function(n){var l=v.exports.hi(n);return!(l&2146435072)}},1338:function(v){function p(s,n,l){var f=s[l]|0;if(f<=0)return[];var u=new Array(f),g;if(l===s.length-1)for(g=0;g<f;++g)u[g]=n;else for(g=0;g<f;++g)u[g]=p(s,n,l+1);return u}function r(s,n){var l,f;for(l=new Array(s),f=0;f<s;++f)l[f]=n;return l}function e(s,n){switch(typeof n>"u"&&(n=0),typeof s){case"number":if(s>0)return r(s|0,n);break;case"object":if(typeof s.length=="number")return p(s,n,0);break}return[]}v.exports=e},3134:function(v,p,r){v.exports=s;var e=r(1682);function s(n,l){var f=n.length;if(typeof l!="number"){l=0;for(var u=0;u<f;++u){var g=n[u];l=Math.max(l,g[0],g[1])}l=(l|0)+1}l=l|0;for(var h=new Array(l),u=0;u<l;++u)h[u]=[];for(var u=0;u<f;++u){var g=n[u];h[g[0]].push(g[1]),h[g[1]].push(g[0])}for(var T=0;T<l;++T)e(h[T],function(c,i){return c-i});return h}},5033:function(v){v.exports=p;function p(r,e,s){var n=e||0,l=s||1;return[[r[12]+r[0],r[13]+r[1],r[14]+r[2],r[15]+r[3]],[r[12]-r[0],r[13]-r[1],r[14]-r[2],r[15]-r[3]],[r[12]+r[4],r[13]+r[5],r[14]+r[6],r[15]+r[7]],[r[12]-r[4],r[13]-r[5],r[14]-r[6],r[15]-r[7]],[n*r[12]+r[8],n*r[13]+r[9],n*r[14]+r[10],n*r[15]+r[11]],[l*r[12]-r[8],l*r[13]-r[9],l*r[14]-r[10],l*r[15]-r[11]]]}},9215:function(v,p,r){v.exports=g;var e=r(4769),s=r(2478);function n(h,T,c){return Math.min(T,Math.max(h,c))}function l(h,T,c){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var i=0;i<this.dimension;++i)this.bounds[0][i]=-1/0,this.bounds[1][i]=1/0;this._state=h.slice().reverse(),this._velocity=T.slice().reverse(),this._time=[c],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var f=l.prototype;f.flush=function(h){var T=s.gt(this._time,h)-1;T<=0||(this._time.splice(0,T),this._state.splice(0,T*this.dimension),this._velocity.splice(0,T*this.dimension))},f.curve=function(h){var T=this._time,c=T.length,i=s.le(T,h),d=this._scratch[0],x=this._state,w=this._velocity,C=this.dimension,y=this.bounds;if(i<0)for(var S=C-1,M=0;M<C;++M,--S)d[M]=x[S];else if(i>=c-1)for(var S=x.length-1,a=h-T[c-1],M=0;M<C;++M,--S)d[M]=x[S]+a*w[S];else{for(var S=C*(i+1)-1,E=T[i],m=T[i+1],k=m-E||1,I=this._scratch[1],O=this._scratch[2],z=this._scratch[3],B=this._scratch[4],F=!0,M=0;M<C;++M,--S)I[M]=x[S],z[M]=w[S]*k,O[M]=x[S+C],B[M]=w[S+C]*k,F=F&&I[M]===O[M]&&z[M]===B[M]&&z[M]===0;if(F)for(var M=0;M<C;++M)d[M]=I[M];else e(I,z,O,B,(h-E)/k,d)}for(var _=y[0],N=y[1],M=0;M<C;++M)d[M]=n(_[M],N[M],d[M]);return d},f.dcurve=function(h){var T=this._time,c=T.length,i=s.le(T,h),d=this._scratch[0],x=this._state,w=this._velocity,C=this.dimension;if(i>=c-1){var y=x.length-1;h-T[c-1];for(var S=0;S<C;++S,--y)d[S]=w[y]}else{for(var y=C*(i+1)-1,M=T[i],a=T[i+1],E=a-M||1,m=this._scratch[1],k=this._scratch[2],I=this._scratch[3],O=this._scratch[4],z=!0,S=0;S<C;++S,--y)m[S]=x[y],I[S]=w[y]*E,k[S]=x[y+C],O[S]=w[y+C]*E,z=z&&m[S]===k[S]&&I[S]===O[S]&&I[S]===0;if(z)for(var S=0;S<C;++S)d[S]=0;else{e.derivative(m,I,k,O,(h-M)/E,d);for(var S=0;S<C;++S)d[S]/=E}}return d},f.lastT=function(){var h=this._time;return h[h.length-1]},f.stable=function(){for(var h=this._velocity,T=h.length,c=this.dimension-1;c>=0;--c)if(h[--T])return!1;return!0},f.jump=function(h){var T=this.lastT(),c=this.dimension;if(!(h<T||arguments.length!==c+1)){var i=this._state,d=this._velocity,x=i.length-this.dimension,w=this.bounds,C=w[0],y=w[1];this._time.push(T,h);for(var S=0;S<2;++S)for(var M=0;M<c;++M)i.push(i[x++]),d.push(0);this._time.push(h);for(var M=c;M>0;--M)i.push(n(C[M-1],y[M-1],arguments[M])),d.push(0)}},f.push=function(h){var T=this.lastT(),c=this.dimension;if(!(h<T||arguments.length!==c+1)){var i=this._state,d=this._velocity,x=i.length-this.dimension,w=h-T,C=this.bounds,y=C[0],S=C[1],M=w>1e-6?1/w:0;this._time.push(h);for(var a=c;a>0;--a){var E=n(y[a-1],S[a-1],arguments[a]);i.push(E),d.push((E-i[x++])*M)}}},f.set=function(h){var T=this.dimension;if(!(h<this.lastT()||arguments.length!==T+1)){var c=this._state,i=this._velocity,d=this.bounds,x=d[0],w=d[1];this._time.push(h);for(var C=T;C>0;--C)c.push(n(x[C-1],w[C-1],arguments[C])),i.push(0)}},f.move=function(h){var T=this.lastT(),c=this.dimension;if(!(h<=T||arguments.length!==c+1)){var i=this._state,d=this._velocity,x=i.length-this.dimension,w=this.bounds,C=w[0],y=w[1],S=h-T,M=S>1e-6?1/S:0;this._time.push(h);for(var a=c;a>0;--a){var E=arguments[a];i.push(n(C[a-1],y[a-1],i[x++]+E)),d.push(E*M)}}},f.idle=function(h){var T=this.lastT();if(!(h<T)){var c=this.dimension,i=this._state,d=this._velocity,x=i.length-c,w=this.bounds,C=w[0],y=w[1],S=h-T;this._time.push(h);for(var M=c-1;M>=0;--M)i.push(n(C[M],y[M],i[x]+S*d[x])),d.push(0),x+=1}};function u(h){for(var T=new Array(h),c=0;c<h;++c)T[c]=0;return T}function g(h,T,c){switch(arguments.length){case 0:return new l([0],[0],0);case 1:if(typeof h=="number"){var i=u(h);return new l(i,i,0)}else return new l(h,u(h.length),0);case 2:if(typeof T=="number"){var i=u(h.length);return new l(h,i,+T)}else c=0;case 3:if(h.length!==T.length)throw new Error("state and velocity lengths must match");return new l(h,T,c)}}},3840:function(v){v.exports=C;var p=0,r=1;function e(y,S,M,a,E,m){this._color=y,this.key=S,this.value=M,this.left=a,this.right=E,this._count=m}function s(y){return new e(y._color,y.key,y.value,y.left,y.right,y._count)}function n(y,S){return new e(y,S.key,S.value,S.left,S.right,S._count)}function l(y){y._count=1+(y.left?y.left._count:0)+(y.right?y.right._count:0)}function f(y,S){this._compare=y,this.root=S}var u=f.prototype;Object.defineProperty(u,"keys",{get:function(){var y=[];return this.forEach(function(S,M){y.push(S)}),y}}),Object.defineProperty(u,"values",{get:function(){var y=[];return this.forEach(function(S,M){y.push(M)}),y}}),Object.defineProperty(u,"length",{get:function(){return this.root?this.root._count:0}}),u.insert=function(y,S){for(var M=this._compare,a=this.root,E=[],m=[];a;){var k=M(y,a.key);E.push(a),m.push(k),k<=0?a=a.left:a=a.right}E.push(new e(p,y,S,null,null,1));for(var I=E.length-2;I>=0;--I){var a=E[I];m[I]<=0?E[I]=new e(a._color,a.key,a.value,E[I+1],a.right,a._count+1):E[I]=new e(a._color,a.key,a.value,a.left,E[I+1],a._count+1)}for(var I=E.length-1;I>1;--I){var O=E[I-1],a=E[I];if(O._color===r||a._color===r)break;var z=E[I-2];if(z.left===O)if(O.left===a){var B=z.right;if(B&&B._color===p)O._color=r,z.right=n(r,B),z._color=p,I-=1;else{if(z._color=p,z.left=O.right,O._color=r,O.right=z,E[I-2]=O,E[I-1]=a,l(z),l(O),I>=3){var F=E[I-3];F.left===z?F.left=O:F.right=O}break}}else{var B=z.right;if(B&&B._color===p)O._color=r,z.right=n(r,B),z._color=p,I-=1;else{if(O.right=a.left,z._color=p,z.left=a.right,a._color=r,a.left=O,a.right=z,E[I-2]=a,E[I-1]=O,l(z),l(O),l(a),I>=3){var F=E[I-3];F.left===z?F.left=a:F.right=a}break}}else if(O.right===a){var B=z.left;if(B&&B._color===p)O._color=r,z.left=n(r,B),z._color=p,I-=1;else{if(z._color=p,z.right=O.left,O._color=r,O.left=z,E[I-2]=O,E[I-1]=a,l(z),l(O),I>=3){var F=E[I-3];F.right===z?F.right=O:F.left=O}break}}else{var B=z.left;if(B&&B._color===p)O._color=r,z.left=n(r,B),z._color=p,I-=1;else{if(O.left=a.right,z._color=p,z.right=a.left,a._color=r,a.right=O,a.left=z,E[I-2]=a,E[I-1]=O,l(z),l(O),l(a),I>=3){var F=E[I-3];F.right===z?F.right=a:F.left=a}break}}}return E[0]._color=r,new f(M,E[0])};function g(y,S){if(S.left){var M=g(y,S.left);if(M)return M}var M=y(S.key,S.value);if(M)return M;if(S.right)return g(y,S.right)}function h(y,S,M,a){var E=S(y,a.key);if(E<=0){if(a.left){var m=h(y,S,M,a.left);if(m)return m}var m=M(a.key,a.value);if(m)return m}if(a.right)return h(y,S,M,a.right)}function T(y,S,M,a,E){var m=M(y,E.key),k=M(S,E.key),I;if(m<=0&&(E.left&&(I=T(y,S,M,a,E.left),I)||k>0&&(I=a(E.key,E.value),I)))return I;if(k>0&&E.right)return T(y,S,M,a,E.right)}u.forEach=function(S,M,a){if(this.root)switch(arguments.length){case 1:return g(S,this.root);case 2:return h(M,this._compare,S,this.root);case 3:return this._compare(M,a)>=0?void 0:T(M,a,this._compare,S,this.root)}},Object.defineProperty(u,"begin",{get:function(){for(var y=[],S=this.root;S;)y.push(S),S=S.left;return new c(this,y)}}),Object.defineProperty(u,"end",{get:function(){for(var y=[],S=this.root;S;)y.push(S),S=S.right;return new c(this,y)}}),u.at=function(y){if(y<0)return new c(this,[]);for(var S=this.root,M=[];;){if(M.push(S),S.left){if(y<S.left._count){S=S.left;continue}y-=S.left._count}if(!y)return new c(this,M);if(y-=1,S.right){if(y>=S.right._count)break;S=S.right}else break}return new c(this,[])},u.ge=function(y){for(var S=this._compare,M=this.root,a=[],E=0;M;){var m=S(y,M.key);a.push(M),m<=0&&(E=a.length),m<=0?M=M.left:M=M.right}return a.length=E,new c(this,a)},u.gt=function(y){for(var S=this._compare,M=this.root,a=[],E=0;M;){var m=S(y,M.key);a.push(M),m<0&&(E=a.length),m<0?M=M.left:M=M.right}return a.length=E,new c(this,a)},u.lt=function(y){for(var S=this._compare,M=this.root,a=[],E=0;M;){var m=S(y,M.key);a.push(M),m>0&&(E=a.length),m<=0?M=M.left:M=M.right}return a.length=E,new c(this,a)},u.le=function(y){for(var S=this._compare,M=this.root,a=[],E=0;M;){var m=S(y,M.key);a.push(M),m>=0&&(E=a.length),m<0?M=M.left:M=M.right}return a.length=E,new c(this,a)},u.find=function(y){for(var S=this._compare,M=this.root,a=[];M;){var E=S(y,M.key);if(a.push(M),E===0)return new c(this,a);E<=0?M=M.left:M=M.right}return new c(this,[])},u.remove=function(y){var S=this.find(y);return S?S.remove():this},u.get=function(y){for(var S=this._compare,M=this.root;M;){var a=S(y,M.key);if(a===0)return M.value;a<=0?M=M.left:M=M.right}};function c(y,S){this.tree=y,this._stack=S}var i=c.prototype;Object.defineProperty(i,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(i,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),i.clone=function(){return new c(this.tree,this._stack.slice())};function d(y,S){y.key=S.key,y.value=S.value,y.left=S.left,y.right=S.right,y._color=S._color,y._count=S._count}function x(y){for(var S,M,a,E,m=y.length-1;m>=0;--m){if(S=y[m],m===0){S._color=r;return}if(M=y[m-1],M.left===S){if(a=M.right,a.right&&a.right._color===p){if(a=M.right=s(a),E=a.right=s(a.right),M.right=a.left,a.left=M,a.right=E,a._color=M._color,S._color=r,M._color=r,E._color=r,l(M),l(a),m>1){var k=y[m-2];k.left===M?k.left=a:k.right=a}y[m-1]=a;return}else if(a.left&&a.left._color===p){if(a=M.right=s(a),E=a.left=s(a.left),M.right=E.left,a.left=E.right,E.left=M,E.right=a,E._color=M._color,M._color=r,a._color=r,S._color=r,l(M),l(a),l(E),m>1){var k=y[m-2];k.left===M?k.left=E:k.right=E}y[m-1]=E;return}if(a._color===r)if(M._color===p){M._color=r,M.right=n(p,a);return}else{M.right=n(p,a);continue}else{if(a=s(a),M.right=a.left,a.left=M,a._color=M._color,M._color=p,l(M),l(a),m>1){var k=y[m-2];k.left===M?k.left=a:k.right=a}y[m-1]=a,y[m]=M,m+1<y.length?y[m+1]=S:y.push(S),m=m+2}}else{if(a=M.left,a.left&&a.left._color===p){if(a=M.left=s(a),E=a.left=s(a.left),M.left=a.right,a.right=M,a.left=E,a._color=M._color,S._color=r,M._color=r,E._color=r,l(M),l(a),m>1){var k=y[m-2];k.right===M?k.right=a:k.left=a}y[m-1]=a;return}else if(a.right&&a.right._color===p){if(a=M.left=s(a),E=a.right=s(a.right),M.left=E.right,a.right=E.left,E.right=M,E.left=a,E._color=M._color,M._color=r,a._color=r,S._color=r,l(M),l(a),l(E),m>1){var k=y[m-2];k.right===M?k.right=E:k.left=E}y[m-1]=E;return}if(a._color===r)if(M._color===p){M._color=r,M.left=n(p,a);return}else{M.left=n(p,a);continue}else{if(a=s(a),M.left=a.right,a.right=M,a._color=M._color,M._color=p,l(M),l(a),m>1){var k=y[m-2];k.right===M?k.right=a:k.left=a}y[m-1]=a,y[m]=M,m+1<y.length?y[m+1]=S:y.push(S),m=m+2}}}}i.remove=function(){var y=this._stack;if(y.length===0)return this.tree;var S=new Array(y.length),M=y[y.length-1];S[S.length-1]=new e(M._color,M.key,M.value,M.left,M.right,M._count);for(var a=y.length-2;a>=0;--a){var M=y[a];M.left===y[a+1]?S[a]=new e(M._color,M.key,M.value,S[a+1],M.right,M._count):S[a]=new e(M._color,M.key,M.value,M.left,S[a+1],M._count)}if(M=S[S.length-1],M.left&&M.right){var E=S.length;for(M=M.left;M.right;)S.push(M),M=M.right;var m=S[E-1];S.push(new e(M._color,m.key,m.value,M.left,M.right,M._count)),S[E-1].key=M.key,S[E-1].value=M.value;for(var a=S.length-2;a>=E;--a)M=S[a],S[a]=new e(M._color,M.key,M.value,M.left,S[a+1],M._count);S[E-1].left=S[E]}if(M=S[S.length-1],M._color===p){var k=S[S.length-2];k.left===M?k.left=null:k.right===M&&(k.right=null),S.pop();for(var a=0;a<S.length;++a)S[a]._count--;return new f(this.tree._compare,S[0])}else if(M.left||M.right){M.left?d(M,M.left):M.right&&d(M,M.right),M._color=r;for(var a=0;a<S.length-1;++a)S[a]._count--;return new f(this.tree._compare,S[0])}else{if(S.length===1)return new f(this.tree._compare,null);for(var a=0;a<S.length;++a)S[a]._count--;var I=S[S.length-2];x(S),I.left===M?I.left=null:I.right=null}return new f(this.tree._compare,S[0])},Object.defineProperty(i,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(i,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(i,"index",{get:function(){var y=0,S=this._stack;if(S.length===0){var M=this.tree.root;return M?M._count:0}else S[S.length-1].left&&(y=S[S.length-1].left._count);for(var a=S.length-2;a>=0;--a)S[a+1]===S[a].right&&(++y,S[a].left&&(y+=S[a].left._count));return y},enumerable:!0}),i.next=function(){var y=this._stack;if(y.length!==0){var S=y[y.length-1];if(S.right)for(S=S.right;S;)y.push(S),S=S.left;else for(y.pop();y.length>0&&y[y.length-1].right===S;)S=y[y.length-1],y.pop()}},Object.defineProperty(i,"hasNext",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].right)return!0;for(var S=y.length-1;S>0;--S)if(y[S-1].left===y[S])return!0;return!1}}),i.update=function(y){var S=this._stack;if(S.length===0)throw new Error("Can't update empty node!");var M=new Array(S.length),a=S[S.length-1];M[M.length-1]=new e(a._color,a.key,y,a.left,a.right,a._count);for(var E=S.length-2;E>=0;--E)a=S[E],a.left===S[E+1]?M[E]=new e(a._color,a.key,a.value,M[E+1],a.right,a._count):M[E]=new e(a._color,a.key,a.value,a.left,M[E+1],a._count);return new f(this.tree._compare,M[0])},i.prev=function(){var y=this._stack;if(y.length!==0){var S=y[y.length-1];if(S.left)for(S=S.left;S;)y.push(S),S=S.right;else for(y.pop();y.length>0&&y[y.length-1].left===S;)S=y[y.length-1],y.pop()}},Object.defineProperty(i,"hasPrev",{get:function(){var y=this._stack;if(y.length===0)return!1;if(y[y.length-1].left)return!0;for(var S=y.length-1;S>0;--S)if(y[S-1].right===y[S])return!0;return!1}});function w(y,S){return y<S?-1:y>S?1:0}function C(y){return new f(y||w,null)}},3837:function(v,p,r){v.exports=I;var e=r(4935),s=r(501),n=r(5304),l=r(6429),f=r(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),g=ArrayBuffer,h=DataView;function T(O){return g.isView(O)&&!(O instanceof h)}function c(O){return Array.isArray(O)||T(O)}function i(O,z){return O[0]=z[0],O[1]=z[1],O[2]=z[2],O}function d(O){this.gl=O,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(O)}var x=d.prototype;x.update=function(O){O=O||{};function z(J,it,K){if(K in O){var H=O[K],at=this[K],tt;(J?c(H)&&c(H[0]):c(H))?this[K]=tt=[it(H[0]),it(H[1]),it(H[2])]:this[K]=tt=[it(H),it(H),it(H)];for(var lt=0;lt<3;++lt)if(tt[lt]!==at[lt])return!0}return!1}var B=z.bind(this,!1,Number),F=z.bind(this,!1,Boolean),_=z.bind(this,!1,String),N=z.bind(this,!0,function(J){if(c(J)){if(J.length===3)return[+J[0],+J[1],+J[2],1];if(J.length===4)return[+J[0],+J[1],+J[2],+J[3]]}return[0,0,0,1]}),G,X=!1,$=!1;if("bounds"in O)for(var et=O.bounds,ot=0;ot<2;++ot)for(var nt=0;nt<3;++nt)et[ot][nt]!==this.bounds[ot][nt]&&($=!0),this.bounds[ot][nt]=et[ot][nt];if("ticks"in O){G=O.ticks,X=!0,this.autoTicks=!1;for(var ot=0;ot<3;++ot)this.tickSpacing[ot]=0}else B("tickSpacing")&&(this.autoTicks=!0,$=!0);if(this._firstInit&&("ticks"in O||"tickSpacing"in O||(this.autoTicks=!0),$=!0,X=!0,this._firstInit=!1),$&&this.autoTicks&&(G=f.create(this.bounds,this.tickSpacing),X=!0),X){for(var ot=0;ot<3;++ot)G[ot].sort(function(it,K){return it.x-K.x});f.equal(G,this.ticks)?X=!1:this.ticks=G}F("tickEnable"),_("tickFont")&&(X=!0),_("tickFontStyle")&&(X=!0),_("tickFontWeight")&&(X=!0),_("tickFontVariant")&&(X=!0),B("tickSize"),B("tickAngle"),B("tickPad"),N("tickColor");var Z=_("labels");_("labelFont")&&(Z=!0),_("labelFontStyle")&&(Z=!0),_("labelFontWeight")&&(Z=!0),_("labelFontVariant")&&(Z=!0),F("labelEnable"),B("labelSize"),B("labelPad"),N("labelColor"),F("lineEnable"),F("lineMirror"),B("lineWidth"),N("lineColor"),F("lineTickEnable"),F("lineTickMirror"),B("lineTickLength"),B("lineTickWidth"),N("lineTickColor"),F("gridEnable"),B("gridWidth"),N("gridColor"),F("zeroEnable"),N("zeroLineColor"),B("zeroLineWidth"),F("backgroundEnable"),N("backgroundColor");var Q=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],W=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(Z||X)&&this._text.update(this.bounds,this.labels,Q,this.ticks,W):this._text=e(this.gl,this.bounds,this.labels,Q,this.ticks,W),this._lines&&X&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=s(this.gl,this.bounds,this.ticks))};function w(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var C=[new w,new w,new w];function y(O,z,B,F,_){for(var N=O.primalOffset,G=O.primalMinor,X=O.mirrorOffset,$=O.mirrorMinor,et=F[z],ot=0;ot<3;++ot)if(z!==ot){var nt=N,Z=X,Q=G,W=$;et&1<<ot&&(nt=X,Z=N,Q=$,W=G),nt[ot]=B[0][ot],Z[ot]=B[1][ot],_[ot]>0?(Q[ot]=-1,W[ot]=0):(Q[ot]=0,W[ot]=1)}}var S=[0,0,0],M={model:u,view:u,projection:u,_ortho:!1};x.isOpaque=function(){return!0},x.isTransparent=function(){return!1},x.drawTransparent=function(O){};var a=0,E=[0,0,0],m=[0,0,0],k=[0,0,0];x.draw=function(O){O=O||M;for(var K=this.gl,z=O.model||u,B=O.view||u,F=O.projection||u,_=this.bounds,N=O._ortho||!1,G=l(z,B,F,_,N),X=G.cubeEdges,$=G.axis,et=B[12],ot=B[13],nt=B[14],Z=B[15],Q=N?2:1,W=Q*this.pixelRatio*(F[3]*et+F[7]*ot+F[11]*nt+F[15]*Z)/K.drawingBufferHeight,J=0;J<3;++J)this.lastCubeProps.cubeEdges[J]=X[J],this.lastCubeProps.axis[J]=$[J];for(var it=C,J=0;J<3;++J)y(C[J],J,this.bounds,X,$);for(var K=this.gl,H=S,J=0;J<3;++J)this.backgroundEnable[J]?H[J]=$[J]:H[J]=0;this._background.draw(z,B,F,_,H,this.backgroundColor),this._lines.bind(z,B,F,this);for(var J=0;J<3;++J){var at=[0,0,0];$[J]>0?at[J]=_[1][J]:at[J]=_[0][J];for(var tt=0;tt<2;++tt){var lt=(J+1+tt)%3,dt=(J+1+(tt^1))%3;this.gridEnable[lt]&&this._lines.drawGrid(lt,dt,this.bounds,at,this.gridColor[lt],this.gridWidth[lt]*this.pixelRatio)}for(var tt=0;tt<2;++tt){var lt=(J+1+tt)%3,dt=(J+1+(tt^1))%3;this.zeroEnable[dt]&&Math.min(_[0][dt],_[1][dt])<=0&&Math.max(_[0][dt],_[1][dt])>=0&&this._lines.drawZero(lt,dt,this.bounds,at,this.zeroLineColor[dt],this.zeroLineWidth[dt]*this.pixelRatio)}}for(var J=0;J<3;++J){this.lineEnable[J]&&this._lines.drawAxisLine(J,this.bounds,it[J].primalOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio),this.lineMirror[J]&&this._lines.drawAxisLine(J,this.bounds,it[J].mirrorOffset,this.lineColor[J],this.lineWidth[J]*this.pixelRatio);for(var mt=i(E,it[J].primalMinor),gt=i(m,it[J].mirrorMinor),Mt=this.lineTickLength,tt=0;tt<3;++tt){var Lt=W/z[5*tt];mt[tt]*=Mt[tt]*Lt,gt[tt]*=Mt[tt]*Lt}this.lineTickEnable[J]&&this._lines.drawAxisTicks(J,it[J].primalOffset,mt,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio),this.lineTickMirror[J]&&this._lines.drawAxisTicks(J,it[J].mirrorOffset,gt,this.lineTickColor[J],this.lineTickWidth[J]*this.pixelRatio)}this._lines.unbind(),this._text.bind(z,B,F,this.pixelRatio);var zt,xt=.5,Ct,wt;function Rt(jt){wt=[0,0,0],wt[jt]=1}function Tt(jt,ie,ue){var fe=(jt+1)%3,pe=(jt+2)%3,Te=ie[fe],Qt=ie[pe],Pt=ue[fe],Ot=ue[pe];if(Te>0&&Ot>0){Rt(fe);return}else if(Te>0&&Ot<0){Rt(fe);return}else if(Te<0&&Ot>0){Rt(fe);return}else if(Te<0&&Ot<0){Rt(fe);return}else if(Qt>0&&Pt>0){Rt(pe);return}else if(Qt>0&&Pt<0){Rt(pe);return}else if(Qt<0&&Pt>0){Rt(pe);return}else if(Qt<0&&Pt<0){Rt(pe);return}}for(var J=0;J<3;++J){for(var Bt=it[J].primalMinor,Gt=it[J].mirrorMinor,te=i(k,it[J].primalOffset),tt=0;tt<3;++tt)this.lineTickEnable[J]&&(te[tt]+=W*Bt[tt]*Math.max(this.lineTickLength[tt],0)/z[5*tt]);var Wt=[0,0,0];if(Wt[J]=1,this.tickEnable[J]){this.tickAngle[J]===-3600?(this.tickAngle[J]=0,this.tickAlign[J]="auto"):this.tickAlign[J]=-1,Ct=1,zt=[this.tickAlign[J],xt,Ct],zt[0]==="auto"?zt[0]=a:zt[0]=parseInt(""+zt[0]),wt=[0,0,0],Tt(J,Bt,Gt);for(var tt=0;tt<3;++tt)te[tt]+=W*Bt[tt]*this.tickPad[tt]/z[5*tt];this._text.drawTicks(J,this.tickSize[J],this.tickAngle[J],te,this.tickColor[J],Wt,wt,zt)}if(this.labelEnable[J]){Ct=0,wt=[0,0,0],this.labels[J].length>4&&(Rt(J),Ct=1),zt=[this.labelAlign[J],xt,Ct],zt[0]==="auto"?zt[0]=a:zt[0]=parseInt(""+zt[0]);for(var tt=0;tt<3;++tt)te[tt]+=W*Bt[tt]*this.labelPad[tt]/z[5*tt];te[J]+=.5*(_[0][J]+_[1][J]),this._text.drawLabel(J,this.labelSize[J],this.labelAngle[J],te,this.labelColor[J],[0,0,0],wt,zt)}}this._text.unbind()},x.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function I(O,z){var B=new d(O);return B.update(z),B}},5304:function(v,p,r){v.exports=u;var e=r(2762),s=r(8116),n=r(1879).bg;function l(g,h,T,c){this.gl=g,this.buffer=h,this.vao=T,this.shader=c}var f=l.prototype;f.draw=function(g,h,T,c,i,d){for(var x=!1,w=0;w<3;++w)x=x||i[w];if(x){var C=this.gl;C.enable(C.POLYGON_OFFSET_FILL),C.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:g,view:h,projection:T,bounds:c,enable:i,colors:d},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),C.disable(C.POLYGON_OFFSET_FILL)}},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function u(g){for(var h=[],T=[],c=0,i=0;i<3;++i)for(var d=(i+1)%3,x=(i+2)%3,w=[0,0,0],C=[0,0,0],y=-1;y<=1;y+=2){T.push(c,c+2,c+1,c+1,c+2,c+3),w[i]=y,C[i]=y;for(var S=-1;S<=1;S+=2){w[d]=S;for(var M=-1;M<=1;M+=2)w[x]=M,h.push(w[0],w[1],w[2],C[0],C[1],C[2]),c+=1}var a=d;d=x,x=a}var E=e(g,new Float32Array(h)),m=e(g,new Uint16Array(T),g.ELEMENT_ARRAY_BUFFER),k=s(g,[{buffer:E,type:g.FLOAT,size:3,offset:0,stride:24},{buffer:E,type:g.FLOAT,size:3,offset:12,stride:24}],m),I=n(g);return I.attributes.position.location=0,I.attributes.normal.location=1,new l(g,E,k,I)}},6429:function(v,p,r){v.exports=y;var e=r(8828),s=r(6760),n=r(5202),l=r(3250),f=new Array(16),u=new Array(8),g=new Array(8),h=new Array(3),T=[0,0,0];(function(){for(var S=0;S<8;++S)u[S]=[1,1,1,1],g[S]=[1,1,1]})();function c(S,M,a){for(var E=0;E<4;++E){S[E]=a[12+E];for(var m=0;m<3;++m)S[E]+=M[m]*a[4*m+E]}}var i=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function d(S){for(var M=0;M<i.length;++M)if(S=n.positive(S,i[M]),S.length<3)return 0;for(var a=S[0],E=a[0]/a[3],m=a[1]/a[3],k=0,M=1;M+1<S.length;++M){var I=S[M],O=S[M+1],z=I[0]/I[3],B=I[1]/I[3],F=O[0]/O[3],_=O[1]/O[3],N=z-E,G=B-m,X=F-E,$=_-m;k+=Math.abs(N*$-G*X)}return k}var x=[1,1,1],w=[0,0,0],C={cubeEdges:x,axis:w};function y(S,M,a,E,m){s(f,M,S),s(f,a,f);for(var k=0,I=0;I<2;++I){h[2]=E[I][2];for(var O=0;O<2;++O){h[1]=E[O][1];for(var z=0;z<2;++z)h[0]=E[z][0],c(u[k],h,f),k+=1}}for(var B=-1,I=0;I<8;++I){for(var F=u[I][3],_=0;_<3;++_)g[I][_]=u[I][_]/F;m&&(g[I][2]*=-1),F<0&&(B<0||g[I][2]<g[B][2])&&(B=I)}if(B<0){B=0;for(var N=0;N<3;++N){for(var G=(N+2)%3,X=(N+1)%3,$=-1,et=-1,ot=0;ot<2;++ot){var nt=ot<<N,Z=nt+(ot<<G)+(1-ot<<X),Q=nt+(1-ot<<G)+(ot<<X);l(g[nt],g[Z],g[Q],T)<0||(ot?$=1:et=1)}if($<0||et<0){et>$&&(B|=1<<N);continue}for(var ot=0;ot<2;++ot){var nt=ot<<N,Z=nt+(ot<<G)+(1-ot<<X),Q=nt+(1-ot<<G)+(ot<<X),W=d([u[nt],u[Z],u[Q],u[nt+(1<<G)+(1<<X)]]);ot?$=W:et=W}if(et>$){B|=1<<N;continue}}}for(var J=7^B,it=-1,I=0;I<8;++I)I===B||I===J||(it<0||g[it][1]>g[I][1])&&(it=I);for(var K=-1,I=0;I<3;++I){var H=it^1<<I;if(!(H===B||H===J)){K<0&&(K=H);var X=g[H];X[0]<g[K][0]&&(K=H)}}for(var at=-1,I=0;I<3;++I){var H=it^1<<I;if(!(H===B||H===J||H===K)){at<0&&(at=H);var X=g[H];X[0]>g[at][0]&&(at=H)}}var tt=x;tt[0]=tt[1]=tt[2]=0,tt[e.log2(K^it)]=it&K,tt[e.log2(it^at)]=it&at;var lt=at^7;lt===B||lt===J?(lt=K^7,tt[e.log2(at^lt)]=lt&at):tt[e.log2(K^lt)]=lt&K;for(var dt=w,mt=B,N=0;N<3;++N)mt&1<<N?dt[N]=-1:dt[N]=1;return C}},501:function(v,p,r){v.exports=x;var e=r(2762),s=r(8116),n=r(1879).n,l=[0,0,0],f=[0,0,0],u=[0,0,0],g=[0,0,0],h=[1,1];function T(w){return w[0]=w[1]=w[2]=0,w}function c(w,C){return w[0]=C[0],w[1]=C[1],w[2]=C[2],w}function i(w,C,y,S,M,a,E,m){this.gl=w,this.vertBuffer=C,this.vao=y,this.shader=S,this.tickCount=M,this.tickOffset=a,this.gridCount=E,this.gridOffset=m}var d=i.prototype;d.bind=function(w,C,y){this.shader.bind(),this.shader.uniforms.model=w,this.shader.uniforms.view=C,this.shader.uniforms.projection=y,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=h,this.vao.bind()},d.unbind=function(){this.vao.unbind()},d.drawAxisLine=function(w,C,y,S,M){var a=T(f);this.shader.uniforms.majorAxis=f,a[w]=C[1][w]-C[0][w],this.shader.uniforms.minorAxis=a;var E=c(g,y);E[w]+=C[0][w],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=S;var m=T(u);m[(w+2)%3]=1,this.shader.uniforms.screenAxis=m,this.vao.draw(this.gl.TRIANGLES,6);var m=T(u);m[(w+1)%3]=1,this.shader.uniforms.screenAxis=m,this.vao.draw(this.gl.TRIANGLES,6)},d.drawAxisTicks=function(w,C,y,S,M){if(this.tickCount[w]){var a=T(l);a[w]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=C,this.shader.uniforms.minorAxis=y,this.shader.uniforms.color=S,this.shader.uniforms.lineWidth=M;var E=T(u);E[w]=1,this.shader.uniforms.screenAxis=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[w],this.tickOffset[w])}},d.drawGrid=function(w,C,y,S,M,a){if(this.gridCount[w]){var E=T(f);E[C]=y[1][C]-y[0][C],this.shader.uniforms.minorAxis=E;var m=c(g,S);m[C]+=y[0][C],this.shader.uniforms.offset=m;var k=T(l);k[w]=1,this.shader.uniforms.majorAxis=k;var I=T(u);I[w]=1,this.shader.uniforms.screenAxis=I,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,this.gridCount[w],this.gridOffset[w])}},d.drawZero=function(w,C,y,S,M,a){var E=T(f);this.shader.uniforms.majorAxis=E,E[w]=y[1][w]-y[0][w],this.shader.uniforms.minorAxis=E;var m=c(g,S);m[w]+=y[0][w],this.shader.uniforms.offset=m;var k=T(u);k[C]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,6)},d.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function x(w,C,y){var S=[],M=[0,0,0],a=[0,0,0],E=[0,0,0],m=[0,0,0];S.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;k<3;++k){for(var z=S.length/3|0,I=0;I<y[k].length;++I){var O=+y[k][I].x;S.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var F=S.length/3|0;M[k]=z,a[k]=F-z;for(var z=S.length/3|0,B=0;B<y[k].length;++B){var O=+y[k][B].x;S.push(O,0,1,O,1,1,O,0,-1,O,0,-1,O,1,1,O,1,-1)}var F=S.length/3|0;E[k]=z,m[k]=F-z}var _=e(w,new Float32Array(S)),N=s(w,[{buffer:_,type:w.FLOAT,size:3,stride:0,offset:0}]),G=n(w);return G.attributes.position.location=0,new i(w,_,N,G,a,M,m,E)}},1879:function(v,p,r){var e=r(3236),s=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);p.n=function(T){return s(T,n,l,null,[{name:"position",type:"vec3"}])};var f=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * (view * (model * vec4(p, 1.0)));
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}
`]),u=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);p.Q=function(T){return s(T,f,u,null,[{name:"position",type:"vec3"}])};var g=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}
`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);p.bg=function(T){return s(T,g,h,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(v,p,r){v.exports=d;var e=r(2762),s=r(8116),n=r(4359),l=r(1879).Q,f=window||b.global||{},u=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var g=3;function h(x,w,C,y){this.gl=x,this.shader=w,this.buffer=C,this.vao=y,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var T=h.prototype,c=[0,0];T.bind=function(x,w,C,y){this.vao.bind(),this.shader.bind();var S=this.shader.uniforms;S.model=x,S.view=w,S.projection=C,S.pixelScale=y,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},T.unbind=function(){this.vao.unbind()},T.update=function(x,w,C,y,S){var M=[];function a(N,G,X,$,et,ot){var nt=[X.style,X.weight,X.variant,X.family].join("_"),Z=u[nt];Z||(Z=u[nt]={});var Q=Z[G];Q||(Q=Z[G]=i(G,{triangles:!0,font:X.family,fontStyle:X.style,fontWeight:X.weight,fontVariant:X.variant,textAlign:"center",textBaseline:"middle",lineSpacing:et,styletags:ot}));for(var W=($||12)/12,J=Q.positions,it=Q.cells,K=0,H=it.length;K<H;++K)for(var at=it[K],tt=2;tt>=0;--tt){var lt=J[at[tt]];M.push(W*lt[0],-W*lt[1],N)}}for(var E=[0,0,0],m=[0,0,0],k=[0,0,0],I=[0,0,0],O=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},B=0;B<3;++B){k[B]=M.length/g|0,a(.5*(x[0][B]+x[1][B]),w[B],C[B],12,O,z),I[B]=(M.length/g|0)-k[B],E[B]=M.length/g|0;for(var F=0;F<y[B].length;++F)if(y[B][F].text){var _={family:y[B][F].font||S[B].family,style:S[B].fontStyle||S[B].style,weight:S[B].fontWeight||S[B].weight,variant:S[B].fontVariant||S[B].variant};a(y[B][F].x,y[B][F].text,_,y[B][F].fontSize||12,O,z)}m[B]=(M.length/g|0)-E[B]}this.buffer.update(M),this.tickOffset=E,this.tickCount=m,this.labelOffset=k,this.labelCount=I},T.drawTicks=function(x,w,C,y,S,M,a,E){this.tickCount[x]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=S,this.shader.uniforms.angle=C,this.shader.uniforms.scale=w,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.tickCount[x],this.tickOffset[x]))},T.drawLabel=function(x,w,C,y,S,M,a,E){this.labelCount[x]&&(this.shader.uniforms.axis=M,this.shader.uniforms.color=S,this.shader.uniforms.angle=C,this.shader.uniforms.scale=w,this.shader.uniforms.offset=y,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=E,this.vao.draw(this.gl.TRIANGLES,this.labelCount[x],this.labelOffset[x]))},T.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function i(x,w){try{return n(x,w)}catch(C){return console.warn('error vectorizing text:"'+x+'" error:',C),{cells:[],positions:[]}}}function d(x,w,C,y,S,M){var a=e(x),E=s(x,[{buffer:a,size:3}]),m=l(x);m.attributes.position.location=0;var k=new h(x,m,a,E);return k.update(w,C,y,S,M),k}},6444:function(v,p){p.create=e,p.equal=s;function r(n,l){var f=n+"",u=f.indexOf("."),g=0;u>=0&&(g=f.length-u-1);var h=Math.pow(10,g),T=Math.round(n*l*h),c=T+"";if(c.indexOf("e")>=0)return c;var i=T/h,d=T%h;T<0?(i=-Math.ceil(i)|0,d=-d|0):(i=Math.floor(i)|0,d=d|0);var x=""+i;if(T<0&&(x="-"+x),g){for(var w=""+d;w.length<g;)w="0"+w;return x+"."+w}else return x}function e(n,l){for(var f=[],u=0;u<3;++u){var g=[];.5*(n[0][u]+n[1][u]);for(var h=0;h*l[u]<=n[1][u];++h)g.push({x:h*l[u],text:r(l[u],h)});for(var h=-1;h*l[u]>=n[0][u];--h)g.push({x:h*l[u],text:r(l[u],h)});f.push(g)}return f}function s(n,l){for(var f=0;f<3;++f){if(n[f].length!==l[f].length)return!1;for(var u=0;u<n[f].length;++u){var g=n[f][u],h=l[f][u];if(g.x!==h.x||g.text!==h.text||g.font!==h.font||g.fontColor!==h.fontColor||g.fontSize!==h.fontSize||g.dx!==h.dx||g.dy!==h.dy)return!1}}return!0}},5445:function(v,p,r){v.exports=C;var e=r(5033),s=r(5202),n=r(6429),l=r(6760),f=r(5665),u=r(5352),g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=new Float32Array(16);function T(y,S,M){this.lo=y,this.hi=S,this.pixelsPerDataUnit=M}var c=[0,0,0,1],i=[0,0,0,1];function d(y,S,M,a,E){for(var m=0;m<3;++m){for(var k=c,I=i,O=0;O<3;++O)I[O]=k[O]=M[O];I[3]=k[3]=1,I[m]+=1,u(I,I,S),I[3]<0&&(y[m]=1/0),k[m]-=1,u(k,k,S),k[3]<0&&(y[m]=1/0);var z=(k[0]/k[3]-I[0]/I[3])*a,B=(k[1]/k[3]-I[1]/I[3])*E;y[m]=.25*Math.sqrt(z*z+B*B)}return y}var x=[new T(1/0,-1/0,1/0),new T(1/0,-1/0,1/0),new T(1/0,-1/0,1/0)],w=[0,0,0];function C(y,S,M,a,B){var m=S.model||g,k=S.view||g,I=S.projection||g,O=S._ortho||!1,z=y.bounds,B=B||n(m,k,I,z,O),F=B.axis;l(h,k,m),l(h,I,h);for(var _=x,N=0;N<3;++N)_[N].lo=1/0,_[N].hi=-1/0,_[N].pixelsPerDataUnit=1/0;var G=e(f(h,h));f(h,h);for(var X=0;X<3;++X){var $=(X+1)%3,et=(X+2)%3,ot=w;t:for(var N=0;N<2;++N){var nt=[];if(F[X]<0!=!!N){ot[X]=z[N][X];for(var Z=0;Z<2;++Z){ot[$]=z[Z^N][$];for(var Q=0;Q<2;++Q)ot[et]=z[Q^Z^N][et],nt.push(ot.slice())}for(var W=O?5:4,Z=W;Z===W;++Z){if(nt.length===0)continue t;nt=s.positive(nt,G[Z])}for(var Z=0;Z<nt.length;++Z)for(var et=nt[Z],J=d(w,h,et,M,a),Q=0;Q<3;++Q)_[Q].lo=Math.min(_[Q].lo,et[Q]),_[Q].hi=Math.max(_[Q].hi,et[Q]),Q!==X&&(_[Q].pixelsPerDataUnit=Math.min(_[Q].pixelsPerDataUnit,Math.abs(J[Q])))}}}return _}},2762:function(v,p,r){var e=r(1888),s=r(5298),n=r(9618),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function f(i,d,x,w,C){this.gl=i,this.type=d,this.handle=x,this.length=w,this.usage=C}var u=f.prototype;u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)};function g(i,d,x,w,C,y){var S=C.length*C.BYTES_PER_ELEMENT;if(y<0)return i.bufferData(d,C,w),S;if(S+y>x)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return i.bufferSubData(d,y,C),x}function h(i,d){for(var x=e.malloc(i.length,d),w=i.length,C=0;C<w;++C)x[C]=i[C];return x}function T(i,d){for(var x=1,w=d.length-1;w>=0;--w){if(d[w]!==x)return!1;x*=i[w]}return!0}u.update=function(i,d){if(typeof d!="number"&&(d=-1),this.bind(),typeof i=="object"&&typeof i.shape<"u"){var x=i.dtype;if(l.indexOf(x)<0&&(x="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var w=gl.getExtension("OES_element_index_uint");w&&x!=="uint16"?x="uint32":x="uint16"}if(x===i.dtype&&T(i.shape,i.stride))i.offset===0&&i.data.length===i.shape[0]?this.length=g(this.gl,this.type,this.length,this.usage,i.data,d):this.length=g(this.gl,this.type,this.length,this.usage,i.data.subarray(i.offset,i.shape[0]),d);else{var C=e.malloc(i.size,x),y=n(C,i.shape);s.assign(y,i),d<0?this.length=g(this.gl,this.type,this.length,this.usage,C,d):this.length=g(this.gl,this.type,this.length,this.usage,C.subarray(0,i.size),d),e.free(C)}}else if(Array.isArray(i)){var S;this.type===this.gl.ELEMENT_ARRAY_BUFFER?S=h(i,"uint16"):S=h(i,"float32"),d<0?this.length=g(this.gl,this.type,this.length,this.usage,S,d):this.length=g(this.gl,this.type,this.length,this.usage,S.subarray(0,i.length),d),e.free(S)}else if(typeof i=="object"&&typeof i.length=="number")this.length=g(this.gl,this.type,this.length,this.usage,i,d);else if(typeof i=="number"||i===void 0){if(d>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");i=i|0,i<=0&&(i=1),this.gl.bufferData(this.type,i|0,this.usage),this.length=i}else throw new Error("gl-buffer: Invalid data type")};function c(i,d,x,w){if(x=x||i.ARRAY_BUFFER,w=w||i.DYNAMIC_DRAW,x!==i.ARRAY_BUFFER&&x!==i.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(w!==i.DYNAMIC_DRAW&&w!==i.STATIC_DRAW&&w!==i.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var C=i.createBuffer(),y=new f(i,x,C,0,w);return y.update(d),y}v.exports=c},6405:function(v,p,r){var e=r(2931);v.exports=function(n,l){var f=n.positions,u=n.vectors,g={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),g;for(var h=0,T=1/0,c=-1/0,i=1/0,d=-1/0,x=1/0,w=-1/0,C=null,y=null,S=[],M=1/0,a=!1,E=n.coneSizemode==="raw",m=0;m<f.length;m++){var k=f[m];T=Math.min(k[0],T),c=Math.max(k[0],c),i=Math.min(k[1],i),d=Math.max(k[1],d),x=Math.min(k[2],x),w=Math.max(k[2],w);var I=u[m];if(e.length(I)>h&&(h=e.length(I)),m&&!E){var O=2*e.distance(C,k)/(e.length(y)+e.length(I));O?(M=Math.min(M,O),a=!1):a=!0}a||(C=k,y=I),S.push(I)}var z=[T,i,x],B=[c,d,w];l&&(l[0]=z,l[1]=B),h===0&&(h=1);var F=1/h;isFinite(M)||(M=1),g.vectorScale=M;var _=n.coneSize||(E?1:.5);n.absoluteConeSize&&(_=n.absoluteConeSize*F),g.coneScale=_;for(var m=0,N=0;m<f.length;m++)for(var k=f[m],G=k[0],X=k[1],$=k[2],et=S[m],ot=e.length(et)*F,nt=0,Z=8;nt<Z;nt++){g.positions.push([G,X,$,N++]),g.positions.push([G,X,$,N++]),g.positions.push([G,X,$,N++]),g.positions.push([G,X,$,N++]),g.positions.push([G,X,$,N++]),g.positions.push([G,X,$,N++]),g.vectors.push(et),g.vectors.push(et),g.vectors.push(et),g.vectors.push(et),g.vectors.push(et),g.vectors.push(et),g.vertexIntensity.push(ot,ot,ot),g.vertexIntensity.push(ot,ot,ot);var Q=g.positions.length;g.cells.push([Q-6,Q-5,Q-4],[Q-3,Q-2,Q-1])}return g};var s=r(614);v.exports.createMesh=r(9060),v.exports.createConeMesh=function(n,l){return v.exports.createMesh(n,l,{shaders:s,traceType:"cone"})}},9060:function(v,p,r){var e=r(9405),s=r(2762),n=r(8116),l=r(7766),f=r(6760),u=r(7608),g=r(9618),h=r(6729),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(S,M,a,E,m,k,I,O,z,B,F){this.gl=S,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=M,this.dirty=!0,this.triShader=a,this.pickShader=E,this.trianglePositions=m,this.triangleVectors=k,this.triangleColors=O,this.triangleUVs=z,this.triangleIds=I,this.triangleVAO=B,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=T,this._view=T,this._projection=T,this._resolution=[1,1]}var i=c.prototype;i.isOpaque=function(){return this.opacity>=1},i.isTransparent=function(){return this.opacity<1},i.pickSlots=1,i.setPickBase=function(S){this.pickId=S};function d(S){for(var M=h({colormap:S,nshades:256,format:"rgba"}),a=new Uint8Array(256*4),E=0;E<256;++E){for(var m=M[E],k=0;k<3;++k)a[4*E+k]=m[k];a[4*E+3]=m[3]*255}return g(a,[256,256,4],[4,0,1])}function x(S){for(var M=S.length,a=new Array(M),E=0;E<M;++E)a[E]=S[E][2];return a}i.update=function(S){S=S||{};var M=this.gl;this.dirty=!0,"lightPosition"in S&&(this.lightPosition=S.lightPosition),"opacity"in S&&(this.opacity=S.opacity),"ambient"in S&&(this.ambientLight=S.ambient),"diffuse"in S&&(this.diffuseLight=S.diffuse),"specular"in S&&(this.specularLight=S.specular),"roughness"in S&&(this.roughness=S.roughness),"fresnel"in S&&(this.fresnel=S.fresnel),S.tubeScale!==void 0&&(this.tubeScale=S.tubeScale),S.vectorScale!==void 0&&(this.vectorScale=S.vectorScale),S.coneScale!==void 0&&(this.coneScale=S.coneScale),S.coneOffset!==void 0&&(this.coneOffset=S.coneOffset),S.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=M.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=M.LINEAR,this.texture.setPixels(d(S.colormap)),this.texture.generateMipmap());var a=S.cells,E=S.positions,m=S.vectors;if(!(!E||!a||!m)){var k=[],I=[],O=[],z=[],B=[];this.cells=a,this.positions=E,this.vectors=m;var F=S.meshColor||[1,1,1,1],_=S.vertexIntensity,N=1/0,G=-1/0;if(_)if(S.vertexIntensityBounds)N=+S.vertexIntensityBounds[0],G=+S.vertexIntensityBounds[1];else for(var X=0;X<_.length;++X){var $=_[X];N=Math.min(N,$),G=Math.max(G,$)}else for(var X=0;X<E.length;++X){var $=E[X][2];N=Math.min(N,$),G=Math.max(G,$)}_?this.intensity=_:this.intensity=x(E),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var X=0;X<E.length;++X)for(var et=E[X],ot=0;ot<3;++ot)isNaN(et[ot])||!isFinite(et[ot])||(this.bounds[0][ot]=Math.min(this.bounds[0][ot],et[ot]),this.bounds[1][ot]=Math.max(this.bounds[1][ot],et[ot]));var nt=0;t:for(var X=0;X<a.length;++X){var Z=a[X];switch(Z.length){case 3:for(var ot=0;ot<3;++ot)for(var Q=Z[ot],et=E[Q],W=0;W<3;++W)if(isNaN(et[W])||!isFinite(et[W]))continue t;for(var ot=0;ot<3;++ot){var Q=Z[2-ot],et=E[Q];k.push(et[0],et[1],et[2],et[3]);var J=m[Q];I.push(J[0],J[1],J[2],J[3]||0);var it=F;it.length===3?O.push(it[0],it[1],it[2],1):O.push(it[0],it[1],it[2],it[3]);var K;_?K=[(_[Q]-N)/(G-N),0]:K=[(et[2]-N)/(G-N),0],z.push(K[0],K[1]),B.push(X)}nt+=1;break}}this.triangleCount=nt,this.trianglePositions.update(k),this.triangleVectors.update(I),this.triangleColors.update(O),this.triangleUVs.update(z),this.triangleIds.update(new Uint32Array(B))}},i.drawTransparent=i.draw=function(S){S=S||{};for(var M=this.gl,a=S.model||T,E=S.view||T,m=S.projection||T,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],I=0;I<3;++I)k[0][I]=Math.max(k[0][I],this.clipBounds[0][I]),k[1][I]=Math.min(k[1][I],this.clipBounds[1][I]);var O={model:a,view:E,projection:m,inverseModel:T.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};O.inverseModel=u(O.inverseModel,O.model),M.disable(M.CULL_FACE),this.texture.bind(0);var z=new Array(16);f(z,O.view,O.model),f(z,O.projection,z),u(z,z);for(var I=0;I<3;++I)O.eyePosition[I]=z[12+I]/z[15];for(var B=z[15],I=0;I<3;++I)B+=this.lightPosition[I]*z[4*I+3];for(var I=0;I<3;++I){for(var F=z[12+I],_=0;_<3;++_)F+=z[4*_+I]*this.lightPosition[_];O.lightPosition[I]=F/B}if(this.triangleCount>0){var N=this.triShader;N.bind(),N.uniforms=O,this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},i.drawPick=function(S){S=S||{};for(var M=this.gl,a=S.model||T,E=S.view||T,m=S.projection||T,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],I=0;I<3;++I)k[0][I]=Math.max(k[0][I],this.clipBounds[0][I]),k[1][I]=Math.min(k[1][I],this.clipBounds[1][I]);this._model=[].slice.call(a),this._view=[].slice.call(E),this._projection=[].slice.call(m),this._resolution=[M.drawingBufferWidth,M.drawingBufferHeight];var O={model:a,view:E,projection:m,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},z=this.pickShader;z.bind(),z.uniforms=O,this.triangleCount>0&&(this.triangleVAO.bind(),M.drawArrays(M.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},i.pick=function(S){if(!S||S.id!==this.pickId)return null;var M=S.value[0]+256*S.value[1]+65536*S.value[2],a=this.cells[M],E=this.positions[a[1]].slice(0,3),m={position:E,dataCoordinate:E,index:Math.floor(a[1]/48)};return this.traceType==="cone"?m.index=Math.floor(a[1]/48):this.traceType==="streamtube"&&(m.intensity=this.intensity[a[1]],m.velocity=this.vectors[a[1]].slice(0,3),m.divergence=this.vectors[a[1]][3],m.index=M),m},i.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function w(S,M){var a=e(S,M.meshShader.vertex,M.meshShader.fragment,null,M.meshShader.attributes);return a.attributes.position.location=0,a.attributes.color.location=2,a.attributes.uv.location=3,a.attributes.vector.location=4,a}function C(S,M){var a=e(S,M.pickShader.vertex,M.pickShader.fragment,null,M.pickShader.attributes);return a.attributes.position.location=0,a.attributes.id.location=1,a.attributes.vector.location=4,a}function y(S,M,a){var E=a.shaders;arguments.length===1&&(M=S,S=M.gl);var m=w(S,E),k=C(S,E),I=l(S,g(new Uint8Array([255,255,255,255]),[1,1,4]));I.generateMipmap(),I.minFilter=S.LINEAR_MIPMAP_LINEAR,I.magFilter=S.LINEAR;var O=s(S),z=s(S),B=s(S),F=s(S),_=s(S),N=n(S,[{buffer:O,type:S.FLOAT,size:4},{buffer:_,type:S.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:B,type:S.FLOAT,size:4},{buffer:F,type:S.FLOAT,size:2},{buffer:z,type:S.FLOAT,size:4}]),G=new c(S,I,m,k,O,z,_,B,F,N,a.traceType||"cone");return G.update(M),G}v.exports=y},614:function(v,p,r){var e=r(3236),s=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * (view * conePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);p.meshShader={vertex:s,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},p.pickShader={vertex:l,fragment:f,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(v){v.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(v,p,r){var e=r(737);v.exports=function(n){return e[n]}},9165:function(v,p,r){v.exports=c;var e=r(2762),s=r(8116),n=r(3436),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(i,d,x,w){this.gl=i,this.shader=w,this.buffer=d,this.vao=x,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=f.prototype;u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(i){var d=this.gl,x=this.shader.uniforms;this.shader.bind();var w=x.view=i.view||l,C=x.projection=i.projection||l;x.model=i.model||l,x.clipBounds=this.clipBounds,x.opacity=this.opacity;var y=w[12],S=w[13],M=w[14],a=w[15],E=i._ortho||!1,m=E?2:1,k=m*this.pixelRatio*(C[3]*y+C[7]*S+C[11]*M+C[15]*a)/d.drawingBufferHeight;this.vao.bind();for(var I=0;I<3;++I)d.lineWidth(this.lineWidth[I]*this.pixelRatio),x.capSize=this.capSize[I]*k,this.lineCount[I]&&d.drawArrays(d.LINES,this.lineOffset[I],this.lineCount[I]);this.vao.unbind()};function g(i,d){for(var x=0;x<3;++x)i[0][x]=Math.min(i[0][x],d[x]),i[1][x]=Math.max(i[1][x],d[x])}var h=function(){for(var i=new Array(3),d=0;d<3;++d){for(var x=[],w=1;w<=2;++w)for(var C=-1;C<=1;C+=2){var y=(w+d)%3,S=[0,0,0];S[y]=C,x.push(S)}i[d]=x}return i}();function T(i,d,x,w){for(var C=h[w],y=0;y<C.length;++y){var S=C[y];i.push(d[0],d[1],d[2],x[0],x[1],x[2],x[3],S[0],S[1],S[2])}return C.length}u.update=function(i){i=i||{},"lineWidth"in i&&(this.lineWidth=i.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in i&&(this.capSize=i.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in i&&(this.opacity=+i.opacity,this.opacity<1&&(this.hasAlpha=!0));var d=i.color||[[0,0,0],[0,0,0],[0,0,0]],x=i.position,w=i.error;if(Array.isArray(d[0])||(d=[d,d,d]),x&&w){var C=[],y=x.length,S=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var M=0;M<3;++M){this.lineOffset[M]=S;t:for(var a=0;a<y;++a){for(var E=x[a],m=0;m<3;++m)if(isNaN(E[m])||!isFinite(E[m]))continue t;var k=w[a],I=d[M];if(Array.isArray(I[0])&&(I=d[a]),I.length===3?I=[I[0],I[1],I[2],1]:I.length===4&&(I=[I[0],I[1],I[2],I[3]],!this.hasAlpha&&I[3]<1&&(this.hasAlpha=!0)),!(isNaN(k[0][M])||isNaN(k[1][M]))){if(k[0][M]<0){var O=E.slice();O[M]+=k[0][M],C.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,O[0],O[1],O[2],I[0],I[1],I[2],I[3],0,0,0),g(this.bounds,O),S+=2+T(C,O,I,M)}if(k[1][M]>0){var O=E.slice();O[M]+=k[1][M],C.push(E[0],E[1],E[2],I[0],I[1],I[2],I[3],0,0,0,O[0],O[1],O[2],I[0],I[1],I[2],I[3],0,0,0),g(this.bounds,O),S+=2+T(C,O,I,M)}}}this.lineCount[M]=S-this.lineOffset[M]}this.buffer.update(C)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function c(i){var d=i.gl,x=e(d),w=s(d,[{buffer:x,type:d.FLOAT,size:3,offset:0,stride:40},{buffer:x,type:d.FLOAT,size:4,offset:12,stride:40},{buffer:x,type:d.FLOAT,size:3,offset:28,stride:40}]),C=n(d);C.attributes.position.location=0,C.attributes.color.location=1,C.attributes.offset.location=2;var y=new f(d,x,w,C);return y.update(i),y}},3436:function(v,p,r){var e=r(3236),s=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * (view * worldPosition);
  fragColor           = color;
  fragPosition        = position;
}`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);v.exports=function(f){return s(f,n,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(v,p,r){var e=r(7766);v.exports=S;var s=null,n,l,f,u;function g(M){var a=M.getParameter(M.FRAMEBUFFER_BINDING),E=M.getParameter(M.RENDERBUFFER_BINDING),m=M.getParameter(M.TEXTURE_BINDING_2D);return[a,E,m]}function h(M,a){M.bindFramebuffer(M.FRAMEBUFFER,a[0]),M.bindRenderbuffer(M.RENDERBUFFER,a[1]),M.bindTexture(M.TEXTURE_2D,a[2])}function T(M,a){var E=M.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL);s=new Array(E+1);for(var m=0;m<=E;++m){for(var k=new Array(E),I=0;I<m;++I)k[I]=M.COLOR_ATTACHMENT0+I;for(var I=m;I<E;++I)k[I]=M.NONE;s[m]=k}}function c(M){switch(M){case n:throw new Error("gl-fbo: Framebuffer unsupported");case l:throw new Error("gl-fbo: Framebuffer incomplete attachment");case f:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case u:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function i(M,a,E,m,k,I){if(!m)return null;var O=e(M,a,E,k,m);return O.magFilter=M.NEAREST,O.minFilter=M.NEAREST,O.mipSamples=1,O.bind(),M.framebufferTexture2D(M.FRAMEBUFFER,I,M.TEXTURE_2D,O.handle,0),O}function d(M,a,E,m,k){var I=M.createRenderbuffer();return M.bindRenderbuffer(M.RENDERBUFFER,I),M.renderbufferStorage(M.RENDERBUFFER,m,a,E),M.framebufferRenderbuffer(M.FRAMEBUFFER,k,M.RENDERBUFFER,I),I}function x(M){var a=g(M.gl),E=M.gl,m=M.handle=E.createFramebuffer(),k=M._shape[0],I=M._shape[1],O=M.color.length,z=M._ext,B=M._useStencil,F=M._useDepth,_=M._colorType;E.bindFramebuffer(E.FRAMEBUFFER,m);for(var N=0;N<O;++N)M.color[N]=i(E,k,I,_,E.RGBA,E.COLOR_ATTACHMENT0+N);O===0?(M._color_rb=d(E,k,I,E.RGBA4,E.COLOR_ATTACHMENT0),z&&z.drawBuffersWEBGL(s[0])):O>1&&z.drawBuffersWEBGL(s[O]);var G=E.getExtension("WEBGL_depth_texture");G?B?M.depth=i(E,k,I,G.UNSIGNED_INT_24_8_WEBGL,E.DEPTH_STENCIL,E.DEPTH_STENCIL_ATTACHMENT):F&&(M.depth=i(E,k,I,E.UNSIGNED_SHORT,E.DEPTH_COMPONENT,E.DEPTH_ATTACHMENT)):F&&B?M._depth_rb=d(E,k,I,E.DEPTH_STENCIL,E.DEPTH_STENCIL_ATTACHMENT):F?M._depth_rb=d(E,k,I,E.DEPTH_COMPONENT16,E.DEPTH_ATTACHMENT):B&&(M._depth_rb=d(E,k,I,E.STENCIL_INDEX,E.STENCIL_ATTACHMENT));var X=E.checkFramebufferStatus(E.FRAMEBUFFER);if(X!==E.FRAMEBUFFER_COMPLETE){M._destroyed=!0,E.bindFramebuffer(E.FRAMEBUFFER,null),E.deleteFramebuffer(M.handle),M.handle=null,M.depth&&(M.depth.dispose(),M.depth=null),M._depth_rb&&(E.deleteRenderbuffer(M._depth_rb),M._depth_rb=null);for(var N=0;N<M.color.length;++N)M.color[N].dispose(),M.color[N]=null;M._color_rb&&(E.deleteRenderbuffer(M._color_rb),M._color_rb=null),h(E,a),c(X)}h(E,a)}function w(M,a,E,m,k,I,O,z){this.gl=M,this._shape=[a|0,E|0],this._destroyed=!1,this._ext=z,this.color=new Array(k);for(var B=0;B<k;++B)this.color[B]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=m,this._useDepth=I,this._useStencil=O;var F=this,_=[a|0,E|0];Object.defineProperties(_,{0:{get:function(){return F._shape[0]},set:function(N){return F.width=N}},1:{get:function(){return F._shape[1]},set:function(N){return F.height=N}}}),this._shapeVector=_,x(this)}var C=w.prototype;function y(M,a,E){if(M._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(M._shape[0]===a&&M._shape[1]===E)){var m=M.gl,k=m.getParameter(m.MAX_RENDERBUFFER_SIZE);if(a<0||a>k||E<0||E>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");M._shape[0]=a,M._shape[1]=E;for(var I=g(m),O=0;O<M.color.length;++O)M.color[O].shape=M._shape;M._color_rb&&(m.bindRenderbuffer(m.RENDERBUFFER,M._color_rb),m.renderbufferStorage(m.RENDERBUFFER,m.RGBA4,M._shape[0],M._shape[1])),M.depth&&(M.depth.shape=M._shape),M._depth_rb&&(m.bindRenderbuffer(m.RENDERBUFFER,M._depth_rb),M._useDepth&&M._useStencil?m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_STENCIL,M._shape[0],M._shape[1]):M._useDepth?m.renderbufferStorage(m.RENDERBUFFER,m.DEPTH_COMPONENT16,M._shape[0],M._shape[1]):M._useStencil&&m.renderbufferStorage(m.RENDERBUFFER,m.STENCIL_INDEX,M._shape[0],M._shape[1])),m.bindFramebuffer(m.FRAMEBUFFER,M.handle);var z=m.checkFramebufferStatus(m.FRAMEBUFFER);z!==m.FRAMEBUFFER_COMPLETE&&(M.dispose(),h(m,I),c(z)),h(m,I)}}Object.defineProperties(C,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(M){if(Array.isArray(M)||(M=[M|0,M|0]),M.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var a=M[0]|0,E=M[1]|0;return y(this,a,E),[a,E]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(M){return M=M|0,y(this,M,this._shape[1]),M},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(M){return M=M|0,y(this,this._shape[0],M),M},enumerable:!1}}),C.bind=function(){if(!this._destroyed){var M=this.gl;M.bindFramebuffer(M.FRAMEBUFFER,this.handle),M.viewport(0,0,this._shape[0],this._shape[1])}},C.dispose=function(){if(!this._destroyed){this._destroyed=!0;var M=this.gl;M.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(M.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var a=0;a<this.color.length;++a)this.color[a].dispose(),this.color[a]=null;this._color_rb&&(M.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function S(M,a,E,m){n||(n=M.FRAMEBUFFER_UNSUPPORTED,l=M.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,f=M.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,u=M.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=M.getExtension("WEBGL_draw_buffers");if(!s&&k&&T(M,k),Array.isArray(a)&&(m=E,E=a[1]|0,a=a[0]|0),typeof a!="number")throw new Error("gl-fbo: Missing shape parameter");var I=M.getParameter(M.MAX_RENDERBUFFER_SIZE);if(a<0||a>I||E<0||E>I)throw new Error("gl-fbo: Parameters are too large for FBO");m=m||{};var O=1;if("color"in m){if(O=Math.max(m.color|0,0),O<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(O>1)if(k){if(O>M.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+O+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var z=M.UNSIGNED_BYTE,B=M.getExtension("OES_texture_float");if(m.float&&O>0){if(!B)throw new Error("gl-fbo: Context does not support floating point textures");z=M.FLOAT}else m.preferFloat&&O>0&&B&&(z=M.FLOAT);var F=!0;"depth"in m&&(F=!!m.depth);var _=!1;return"stencil"in m&&(_=!!m.stencil),new w(M,a,E,z,O,F,_,k)}},2992:function(v,p,r){var e=r(3387).sprintf,s=r(5171),n=r(1848),l=r(1085);v.exports=f;function f(u,g,h){var T=n(g)||"of unknown name (see npm glsl-shader-name)",c="unknown type";h!==void 0&&(c=h===s.FRAGMENT_SHADER?"fragment":"vertex");for(var i=e(`Error compiling %s shader %s:
`,c,T),d=e("%s%s",i,u),x=u.split(`
`),w={},C=0;C<x.length;C++){var y=x[C];if(!(y===""||y==="\0")){var S=parseInt(y.split(":")[2]);if(isNaN(S))throw new Error(e("Could not parse error: %s",y));w[S]=y}}for(var M=l(g).split(`
`),C=0;C<M.length;C++)if(!(!w[C+3]&&!w[C+2]&&!w[C+1])){var a=M[C];if(i+=a+`
`,w[C+1]){var E=w[C+1];E=E.substr(E.split(":",3).join(":").length+1).trim(),i+=e(`^^^ %s

`,E)}}return{long:i.trim(),short:d.trim()}}},2510:function(v,p,r){v.exports=c;var e=r(2478),s=r(7762),n=r(1888),l=r(9405),f=r(2762),u=r(6768);function g(i,d,x,w,C,y,S){this.plot=i,this.shader=d,this.pickShader=x,this.positionBuffer=w,this.weightBuffer=C,this.colorBuffer=y,this.idBuffer=S,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var h=g.prototype,T=[0,0,1,0,0,1,1,0,1,1,0,1];h.draw=function(){var i=[1,0,0,0,1,0,0,0,1];return function(){var d=this.plot,x=this.shader,w=this.bounds,C=this.numVertices;if(!(C<=0)){var y=d.gl,S=d.dataBox,M=w[2]-w[0],a=w[3]-w[1],E=S[2]-S[0],m=S[3]-S[1];i[0]=2*M/E,i[4]=2*a/m,i[6]=2*(w[0]-S[0])/E-1,i[7]=2*(w[1]-S[1])/m-1,x.bind();var k=x.uniforms;k.viewTransform=i,k.shape=this.shape;var I=x.attributes;this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(y.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),I.color.pointer(y.UNSIGNED_BYTE,!0),y.drawArrays(y.TRIANGLES,0,C)}}}(),h.drawPick=function(){var i=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(x){var w=this.plot,C=this.pickShader,y=this.bounds,S=this.numVertices;if(!(S<=0)){var M=w.gl,a=w.dataBox,E=y[2]-y[0],m=y[3]-y[1],k=a[2]-a[0],I=a[3]-a[1];i[0]=2*E/k,i[4]=2*m/I,i[6]=2*(y[0]-a[0])/k-1,i[7]=2*(y[1]-a[1])/I-1;for(var O=0;O<4;++O)d[O]=x>>O*8&255;this.pickOffset=x,C.bind();var z=C.uniforms;z.viewTransform=i,z.pickOffset=d,z.shape=this.shape;var B=C.attributes;return this.positionBuffer.bind(),B.position.pointer(),this.weightBuffer.bind(),B.weight.pointer(M.UNSIGNED_BYTE,!1),this.idBuffer.bind(),B.pickId.pointer(M.UNSIGNED_BYTE,!1),M.drawArrays(M.TRIANGLES,0,S),x+this.shape[0]*this.shape[1]}}}(),h.pick=function(i,d,x){var w=this.pickOffset,C=this.shape[0]*this.shape[1];if(x<w||x>=w+C)return null;var y=x-w,S=this.xData,M=this.yData;return{object:this,pointId:y,dataCoord:[S[y%this.shape[0]],M[y/this.shape[0]|0]]}},h.update=function(i){i=i||{};var d=i.shape||[0,0],x=i.x||s(d[0]),w=i.y||s(d[1]),C=i.z||new Float32Array(d[0]*d[1]),y=i.zsmooth!==!1;this.xData=x,this.yData=w;var S=i.colorLevels||[0],M=i.colorValues||[0,0,0,1],a=S.length,E=this.bounds,m,k,I,O;y?(m=E[0]=x[0],k=E[1]=w[0],I=E[2]=x[x.length-1],O=E[3]=w[w.length-1]):(m=E[0]=x[0]+(x[1]-x[0])/2,k=E[1]=w[0]+(w[1]-w[0])/2,I=E[2]=x[x.length-1]+(x[x.length-1]-x[x.length-2])/2,O=E[3]=w[w.length-1]+(w[w.length-1]-w[w.length-2])/2);var z=1/(I-m),B=1/(O-k),F=d[0],_=d[1];this.shape=[F,_];var N=(y?(F-1)*(_-1):F*_)*(T.length>>>1);this.numVertices=N;for(var G=n.mallocUint8(N*4),X=n.mallocFloat32(N*2),$=n.mallocUint8(N*2),et=n.mallocUint32(N),ot=0,nt=y?F-1:F,Z=y?_-1:_,Q=0;Q<Z;++Q){var W,J;y?(W=B*(w[Q]-k),J=B*(w[Q+1]-k)):(W=Q<_-1?B*(w[Q]-(w[Q+1]-w[Q])/2-k):B*(w[Q]-(w[Q]-w[Q-1])/2-k),J=Q<_-1?B*(w[Q]+(w[Q+1]-w[Q])/2-k):B*(w[Q]+(w[Q]-w[Q-1])/2-k));for(var it=0;it<nt;++it){var K,H;y?(K=z*(x[it]-m),H=z*(x[it+1]-m)):(K=it<F-1?z*(x[it]-(x[it+1]-x[it])/2-m):z*(x[it]-(x[it]-x[it-1])/2-m),H=it<F-1?z*(x[it]+(x[it+1]-x[it])/2-m):z*(x[it]+(x[it]-x[it-1])/2-m));for(var at=0;at<T.length;at+=2){var tt=T[at],lt=T[at+1],dt=y?(Q+lt)*F+(it+tt):Q*F+it,mt=C[dt],gt=e.le(S,mt),Mt,Lt,zt,xt;if(gt<0)Mt=M[0],Lt=M[1],zt=M[2],xt=M[3];else if(gt===a-1)Mt=M[4*a-4],Lt=M[4*a-3],zt=M[4*a-2],xt=M[4*a-1];else{var Ct=(mt-S[gt])/(S[gt+1]-S[gt]),wt=1-Ct,Rt=4*gt,Tt=4*(gt+1);Mt=wt*M[Rt]+Ct*M[Tt],Lt=wt*M[Rt+1]+Ct*M[Tt+1],zt=wt*M[Rt+2]+Ct*M[Tt+2],xt=wt*M[Rt+3]+Ct*M[Tt+3]}G[4*ot]=255*Mt,G[4*ot+1]=255*Lt,G[4*ot+2]=255*zt,G[4*ot+3]=255*xt,X[2*ot]=K*.5+H*.5,X[2*ot+1]=W*.5+J*.5,$[2*ot]=tt,$[2*ot+1]=lt,et[ot]=Q*F+it,ot+=1}}}this.positionBuffer.update(X),this.weightBuffer.update($),this.colorBuffer.update(G),this.idBuffer.update(et),n.free(X),n.free(G),n.free($),n.free(et)},h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function c(i,d){var x=i.gl,w=l(x,u.vertex,u.fragment),C=l(x,u.pickVertex,u.pickFragment),y=f(x),S=f(x),M=f(x),a=f(x),E=new g(i,w,C,y,S,M,a);return E.update(d),i.addObject(E),E}},6768:function(v,p,r){var e=r(3236);v.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},7319:function(v,p,r){var e=r(3236),s=r(9405),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),f=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];p.createShader=function(g){return s(g,n,l,null,u)},p.createPickShader=function(g){return s(g,n,f,null,u)}},5714:function(v,p,r){v.exports=M;var e=r(2762),s=r(8116),n=r(7766),l=new Uint8Array(4),f=new Float32Array(l.buffer);function u(a,E,m,k){return l[0]=k,l[1]=m,l[2]=E,l[3]=a,f[0]}var g=r(2478),h=r(9618),T=r(7319),c=T.createShader,i=T.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(a,E){for(var m=0,k=0;k<3;++k){var I=a[k]-E[k];m+=I*I}return Math.sqrt(m)}function w(a){for(var E=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],m=0;m<3;++m)E[0][m]=Math.max(a[0][m],E[0][m]),E[1][m]=Math.min(a[1][m],E[1][m]);return E}function C(a,E,m,k){this.arcLength=a,this.position=E,this.index=m,this.dataCoordinate=k}function y(a,E,m,k,I,O){this.gl=a,this.shader=E,this.pickShader=m,this.buffer=k,this.vao=I,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=O,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var S=y.prototype;S.isTransparent=function(){return this.hasAlpha},S.isOpaque=function(){return!this.hasAlpha},S.pickSlots=1,S.setPickBase=function(a){this.pickId=a},S.drawTransparent=S.draw=function(a){if(this.vertexCount){var E=this.gl,m=this.shader,k=this.vao;m.bind(),m.uniforms={model:a.model||d,view:a.view||d,projection:a.projection||d,clipBounds:w(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[E.drawingBufferWidth,E.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(E.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},S.drawPick=function(a){if(this.vertexCount){var E=this.gl,m=this.pickShader,k=this.vao;m.bind(),m.uniforms={model:a.model||d,view:a.view||d,projection:a.projection||d,pickId:this.pickId,clipBounds:w(this.clipBounds),screenShape:[E.drawingBufferWidth,E.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(E.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},S.update=function(a){var E,m;this.dirty=!0;var k=!!a.connectGaps;"dashScale"in a&&(this.dashScale=a.dashScale),this.hasAlpha=!1,"opacity"in a&&(this.opacity=+a.opacity,this.opacity<1&&(this.hasAlpha=!0));var I=[],O=[],z=[],B=0,F=0,_=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],N=a.position||a.positions;if(N){var G=a.color||a.colors||[0,0,0,1],X=a.lineWidth||1,$=!1;t:for(E=1;E<N.length;++E){var et=N[E-1],ot=N[E];for(O.push(B),z.push(et.slice()),m=0;m<3;++m){if(isNaN(et[m])||isNaN(ot[m])||!isFinite(et[m])||!isFinite(ot[m])){if(!k&&I.length>0){for(var nt=0;nt<24;++nt)I.push(I[I.length-12]);F+=2,$=!0}continue t}_[0][m]=Math.min(_[0][m],et[m],ot[m]),_[1][m]=Math.max(_[1][m],et[m],ot[m])}var Z,Q;Array.isArray(G[0])?(Z=G.length>E-1?G[E-1]:G.length>0?G[G.length-1]:[0,0,0,1],Q=G.length>E?G[E]:G.length>0?G[G.length-1]:[0,0,0,1]):Z=Q=G,Z.length===3&&(Z=[Z[0],Z[1],Z[2],1]),Q.length===3&&(Q=[Q[0],Q[1],Q[2],1]),!this.hasAlpha&&Z[3]<1&&(this.hasAlpha=!0);var W;Array.isArray(X)?W=X.length>E-1?X[E-1]:X.length>0?X[X.length-1]:[0,0,0,1]:W=X;var J=B;if(B+=x(et,ot),$){for(m=0;m<2;++m)I.push(et[0],et[1],et[2],ot[0],ot[1],ot[2],J,W,Z[0],Z[1],Z[2],Z[3]);F+=2,$=!1}I.push(et[0],et[1],et[2],ot[0],ot[1],ot[2],J,W,Z[0],Z[1],Z[2],Z[3],et[0],et[1],et[2],ot[0],ot[1],ot[2],J,-W,Z[0],Z[1],Z[2],Z[3],ot[0],ot[1],ot[2],et[0],et[1],et[2],B,-W,Q[0],Q[1],Q[2],Q[3],ot[0],ot[1],ot[2],et[0],et[1],et[2],B,W,Q[0],Q[1],Q[2],Q[3]),F+=4}}if(this.buffer.update(I),O.push(B),z.push(N[N.length-1].slice()),this.bounds=_,this.vertexCount=F,this.points=z,this.arcLength=O,"dashes"in a){var it=a.dashes,K=it.slice();for(K.unshift(0),E=1;E<K.length;++E)K[E]=K[E-1]+K[E];var H=h(new Array(256*4),[256,1,4]);for(E=0;E<256;++E){for(m=0;m<4;++m)H.set(E,0,m,0);g.le(K,K[K.length-1]*E/255)&1?H.set(E,0,0,0):H.set(E,0,0,255)}this.texture.setPixels(H)}},S.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},S.pick=function(a){if(!a||a.id!==this.pickId)return null;var E=u(a.value[0],a.value[1],a.value[2],0),m=g.le(this.arcLength,E);if(m<0)return null;if(m===this.arcLength.length-1)return new C(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),m);for(var k=this.points[m],I=this.points[Math.min(m+1,this.points.length-1)],O=(E-this.arcLength[m])/(this.arcLength[m+1]-this.arcLength[m]),z=1-O,B=[0,0,0],F=0;F<3;++F)B[F]=z*k[F]+O*I[F];var _=Math.min(O<.5?m:m+1,this.points.length-1);return new C(E,B,_,this.points[_])};function M(a){var E=a.gl||a.scene&&a.scene.gl,m=c(E);m.attributes.position.location=0,m.attributes.nextPosition.location=1,m.attributes.arcLength.location=2,m.attributes.lineWidth.location=3,m.attributes.color.location=4;var k=i(E);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var I=e(E),O=s(E,[{buffer:I,size:3,offset:0,stride:48},{buffer:I,size:3,offset:12,stride:48},{buffer:I,size:1,offset:24,stride:48},{buffer:I,size:1,offset:28,stride:48},{buffer:I,size:4,offset:32,stride:48}]),z=h(new Array(256*4),[256,1,4]),B=0;B<1024;++B)z.data[B]=255;var F=n(E,z);F.wrap=E.REPEAT;var _=new y(E,m,k,I,O,F);return _.update(a),_}},1903:function(v){v.exports=p;function p(r){var e=new Float32Array(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}},6864:function(v){v.exports=p;function p(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},9921:function(v){v.exports=p;function p(r){var e=r[0],s=r[1],n=r[2],l=r[3],f=r[4],u=r[5],g=r[6],h=r[7],T=r[8],c=r[9],i=r[10],d=r[11],x=r[12],w=r[13],C=r[14],y=r[15],S=e*u-s*f,M=e*g-n*f,a=e*h-l*f,E=s*g-n*u,m=s*h-l*u,k=n*h-l*g,I=T*w-c*x,O=T*C-i*x,z=T*y-d*x,B=c*C-i*w,F=c*y-d*w,_=i*y-d*C;return S*_-M*F+a*B+E*z-m*O+k*I}},7399:function(v){v.exports=p;function p(r,e){var s=e[0],n=e[1],l=e[2],f=e[3],u=s+s,g=n+n,h=l+l,T=s*u,c=n*u,i=n*g,d=l*u,x=l*g,w=l*h,C=f*u,y=f*g,S=f*h;return r[0]=1-i-w,r[1]=c+S,r[2]=d-y,r[3]=0,r[4]=c-S,r[5]=1-T-w,r[6]=x+C,r[7]=0,r[8]=d+y,r[9]=x-C,r[10]=1-T-i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},6743:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=e[3],g=n+n,h=l+l,T=f+f,c=n*g,i=n*h,d=n*T,x=l*h,w=l*T,C=f*T,y=u*g,S=u*h,M=u*T;return r[0]=1-(x+C),r[1]=i+M,r[2]=d-S,r[3]=0,r[4]=i-M,r[5]=1-(c+C),r[6]=w+y,r[7]=0,r[8]=d+S,r[9]=w-y,r[10]=1-(c+x),r[11]=0,r[12]=s[0],r[13]=s[1],r[14]=s[2],r[15]=1,r}},7894:function(v){v.exports=p;function p(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}},7608:function(v){v.exports=p;function p(r,e){var s=e[0],n=e[1],l=e[2],f=e[3],u=e[4],g=e[5],h=e[6],T=e[7],c=e[8],i=e[9],d=e[10],x=e[11],w=e[12],C=e[13],y=e[14],S=e[15],M=s*g-n*u,a=s*h-l*u,E=s*T-f*u,m=n*h-l*g,k=n*T-f*g,I=l*T-f*h,O=c*C-i*w,z=c*y-d*w,B=c*S-x*w,F=i*y-d*C,_=i*S-x*C,N=d*S-x*y,G=M*N-a*_+E*F+m*B-k*z+I*O;return G?(G=1/G,r[0]=(g*N-h*_+T*F)*G,r[1]=(l*_-n*N-f*F)*G,r[2]=(C*I-y*k+S*m)*G,r[3]=(d*k-i*I-x*m)*G,r[4]=(h*B-u*N-T*z)*G,r[5]=(s*N-l*B+f*z)*G,r[6]=(y*E-w*I-S*a)*G,r[7]=(c*I-d*E+x*a)*G,r[8]=(u*_-g*B+T*O)*G,r[9]=(n*B-s*_-f*O)*G,r[10]=(w*k-C*E+S*M)*G,r[11]=(i*E-c*k-x*M)*G,r[12]=(g*z-u*F-h*O)*G,r[13]=(s*F-n*z+l*O)*G,r[14]=(C*a-w*m-y*M)*G,r[15]=(c*m-i*a+d*M)*G,r):null}},6582:function(v,p,r){var e=r(7894);v.exports=s;function s(n,l,f,u){var g,h,T,c,i,d,x,w,C,y,S=l[0],M=l[1],a=l[2],E=u[0],m=u[1],k=u[2],I=f[0],O=f[1],z=f[2];return Math.abs(S-I)<1e-6&&Math.abs(M-O)<1e-6&&Math.abs(a-z)<1e-6?e(n):(x=S-I,w=M-O,C=a-z,y=1/Math.sqrt(x*x+w*w+C*C),x*=y,w*=y,C*=y,g=m*C-k*w,h=k*x-E*C,T=E*w-m*x,y=Math.sqrt(g*g+h*h+T*T),y?(y=1/y,g*=y,h*=y,T*=y):(g=0,h=0,T=0),c=w*T-C*h,i=C*g-x*T,d=x*h-w*g,y=Math.sqrt(c*c+i*i+d*d),y?(y=1/y,c*=y,i*=y,d*=y):(c=0,i=0,d=0),n[0]=g,n[1]=c,n[2]=x,n[3]=0,n[4]=h,n[5]=i,n[6]=w,n[7]=0,n[8]=T,n[9]=d,n[10]=C,n[11]=0,n[12]=-(g*S+h*M+T*a),n[13]=-(c*S+i*M+d*a),n[14]=-(x*S+w*M+C*a),n[15]=1,n)}},6760:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=e[3],g=e[4],h=e[5],T=e[6],c=e[7],i=e[8],d=e[9],x=e[10],w=e[11],C=e[12],y=e[13],S=e[14],M=e[15],a=s[0],E=s[1],m=s[2],k=s[3];return r[0]=a*n+E*g+m*i+k*C,r[1]=a*l+E*h+m*d+k*y,r[2]=a*f+E*T+m*x+k*S,r[3]=a*u+E*c+m*w+k*M,a=s[4],E=s[5],m=s[6],k=s[7],r[4]=a*n+E*g+m*i+k*C,r[5]=a*l+E*h+m*d+k*y,r[6]=a*f+E*T+m*x+k*S,r[7]=a*u+E*c+m*w+k*M,a=s[8],E=s[9],m=s[10],k=s[11],r[8]=a*n+E*g+m*i+k*C,r[9]=a*l+E*h+m*d+k*y,r[10]=a*f+E*T+m*x+k*S,r[11]=a*u+E*c+m*w+k*M,a=s[12],E=s[13],m=s[14],k=s[15],r[12]=a*n+E*g+m*i+k*C,r[13]=a*l+E*h+m*d+k*y,r[14]=a*f+E*T+m*x+k*S,r[15]=a*u+E*c+m*w+k*M,r}},4040:function(v){v.exports=p;function p(r,e,s,n,l,f,u){var g=1/(e-s),h=1/(n-l),T=1/(f-u);return r[0]=-2*g,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*h,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*T,r[11]=0,r[12]=(e+s)*g,r[13]=(l+n)*h,r[14]=(u+f)*T,r[15]=1,r}},4772:function(v){v.exports=p;function p(r,e,s,n,l){var f=1/Math.tan(e/2),u=1/(n-l);return r[0]=f/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(l+n)*u,r[11]=-1,r[12]=0,r[13]=0,r[14]=2*l*n*u,r[15]=0,r}},6079:function(v){v.exports=p;function p(r,e,s,n){var l=n[0],f=n[1],u=n[2],g=Math.sqrt(l*l+f*f+u*u),h,T,c,i,d,x,w,C,y,S,M,a,E,m,k,I,O,z,B,F,_,N,G,X;return Math.abs(g)<1e-6?null:(g=1/g,l*=g,f*=g,u*=g,h=Math.sin(s),T=Math.cos(s),c=1-T,i=e[0],d=e[1],x=e[2],w=e[3],C=e[4],y=e[5],S=e[6],M=e[7],a=e[8],E=e[9],m=e[10],k=e[11],I=l*l*c+T,O=f*l*c+u*h,z=u*l*c-f*h,B=l*f*c-u*h,F=f*f*c+T,_=u*f*c+l*h,N=l*u*c+f*h,G=f*u*c-l*h,X=u*u*c+T,r[0]=i*I+C*O+a*z,r[1]=d*I+y*O+E*z,r[2]=x*I+S*O+m*z,r[3]=w*I+M*O+k*z,r[4]=i*B+C*F+a*_,r[5]=d*B+y*F+E*_,r[6]=x*B+S*F+m*_,r[7]=w*B+M*F+k*_,r[8]=i*N+C*G+a*X,r[9]=d*N+y*G+E*X,r[10]=x*N+S*G+m*X,r[11]=w*N+M*G+k*X,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}},5567:function(v){v.exports=p;function p(r,e,s){var n=Math.sin(s),l=Math.cos(s),f=e[4],u=e[5],g=e[6],h=e[7],T=e[8],c=e[9],i=e[10],d=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=f*l+T*n,r[5]=u*l+c*n,r[6]=g*l+i*n,r[7]=h*l+d*n,r[8]=T*l-f*n,r[9]=c*l-u*n,r[10]=i*l-g*n,r[11]=d*l-h*n,r}},2408:function(v){v.exports=p;function p(r,e,s){var n=Math.sin(s),l=Math.cos(s),f=e[0],u=e[1],g=e[2],h=e[3],T=e[8],c=e[9],i=e[10],d=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=f*l-T*n,r[1]=u*l-c*n,r[2]=g*l-i*n,r[3]=h*l-d*n,r[8]=f*n+T*l,r[9]=u*n+c*l,r[10]=g*n+i*l,r[11]=h*n+d*l,r}},7089:function(v){v.exports=p;function p(r,e,s){var n=Math.sin(s),l=Math.cos(s),f=e[0],u=e[1],g=e[2],h=e[3],T=e[4],c=e[5],i=e[6],d=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=f*l+T*n,r[1]=u*l+c*n,r[2]=g*l+i*n,r[3]=h*l+d*n,r[4]=T*l-f*n,r[5]=c*l-u*n,r[6]=i*l-g*n,r[7]=d*l-h*n,r}},2504:function(v){v.exports=p;function p(r,e,s){var n=s[0],l=s[1],f=s[2];return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*l,r[5]=e[5]*l,r[6]=e[6]*l,r[7]=e[7]*l,r[8]=e[8]*f,r[9]=e[9]*f,r[10]=e[10]*f,r[11]=e[11]*f,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}},7656:function(v){v.exports=p;function p(r,e,s){var n=s[0],l=s[1],f=s[2],u,g,h,T,c,i,d,x,w,C,y,S;return e===r?(r[12]=e[0]*n+e[4]*l+e[8]*f+e[12],r[13]=e[1]*n+e[5]*l+e[9]*f+e[13],r[14]=e[2]*n+e[6]*l+e[10]*f+e[14],r[15]=e[3]*n+e[7]*l+e[11]*f+e[15]):(u=e[0],g=e[1],h=e[2],T=e[3],c=e[4],i=e[5],d=e[6],x=e[7],w=e[8],C=e[9],y=e[10],S=e[11],r[0]=u,r[1]=g,r[2]=h,r[3]=T,r[4]=c,r[5]=i,r[6]=d,r[7]=x,r[8]=w,r[9]=C,r[10]=y,r[11]=S,r[12]=u*n+c*l+w*f+e[12],r[13]=g*n+i*l+C*f+e[13],r[14]=h*n+d*l+y*f+e[14],r[15]=T*n+x*l+S*f+e[15]),r}},5665:function(v){v.exports=p;function p(r,e){if(r===e){var s=e[1],n=e[2],l=e[3],f=e[6],u=e[7],g=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=s,r[6]=e[9],r[7]=e[13],r[8]=n,r[9]=f,r[11]=e[14],r[12]=l,r[13]=u,r[14]=g}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}},7626:function(v,p,r){var e=r(2642),s=r(9346);v.exports=g;function n(h,T){for(var c=[0,0,0,0],i=0;i<4;++i)for(var d=0;d<4;++d)c[d]+=h[4*i+d]*T[i];return c}function l(h,T,c,i,d){for(var x=n(i,n(c,n(T,[h[0],h[1],h[2],1]))),w=0;w<3;++w)x[w]/=x[3];return[.5*d[0]*(1+x[0]),.5*d[1]*(1-x[1])]}function f(h,T){if(h.length===2){for(var c=0,i=0,d=0;d<2;++d)c+=Math.pow(T[d]-h[0][d],2),i+=Math.pow(T[d]-h[1][d],2);return c=Math.sqrt(c),i=Math.sqrt(i),c+i<1e-6?[1,0]:[i/(c+i),c/(i+c)]}else if(h.length===3){var x=[0,0];return s(h[0],h[1],h[2],T,x),e(h,x)}return[]}function u(h,T){for(var c=[0,0,0],i=0;i<h.length;++i)for(var d=h[i],x=T[i],w=0;w<3;++w)c[w]+=x*d[w];return c}function g(h,T,c,i,d,x){if(h.length===1)return[0,h[0].slice()];for(var w=new Array(h.length),C=0;C<h.length;++C)w[C]=l(h[C],c,i,d,x);for(var y=0,S=1/0,C=0;C<w.length;++C){for(var M=0,a=0;a<2;++a)M+=Math.pow(w[C][a]-T[a],2);M<S&&(S=M,y=C)}for(var E=f(w,T),m=0,C=0;C<3;++C){if(E[C]<-.001||E[C]>1.0001)return null;m+=E[C]}return Math.abs(m-1)>.001?null:[y,u(h,E),E]}},840:function(v,p,r){var e=r(3236),s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * (view * (model * vec4(p, 1.0)));
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),l=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),u=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * (view * (model * vec4(position, 1.0)));
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),g=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
  f_id        = id;
  f_position  = position;
}`]),T=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * (view * (model * vec4(position, 1.0)));
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * (view * (model * vec4(position, 1.0)));
}`]),d=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);p.meshShader={vertex:s,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},p.wireShader={vertex:l,fragment:f,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},p.pointShader={vertex:u,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},p.pickShader={vertex:h,fragment:T,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},p.pointPickShader={vertex:c,fragment:T,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},p.contourShader={vertex:i,fragment:d,attributes:[{name:"position",type:"vec3"}]}},7201:function(v,p,r){var e=1e-6,s=1e-6,n=r(9405),l=r(2762),f=r(8116),u=r(7766),g=r(8406),h=r(6760),T=r(7608),c=r(9618),i=r(6729),d=r(7765),x=r(1888),w=r(840),C=r(7626),y=w.meshShader,S=w.wireShader,M=w.pointShader,a=w.pickShader,E=w.pointPickShader,m=w.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function I(nt,Z,Q,W,J,it,K,H,at,tt,lt,dt,mt,gt,Mt,Lt,zt,xt,Ct,wt,Rt,Tt,Bt,Gt,te,Wt,jt){this.gl=nt,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Z,this.dirty=!0,this.triShader=Q,this.lineShader=W,this.pointShader=J,this.pickShader=it,this.pointPickShader=K,this.contourShader=H,this.trianglePositions=at,this.triangleColors=lt,this.triangleNormals=mt,this.triangleUVs=dt,this.triangleIds=tt,this.triangleVAO=gt,this.triangleCount=0,this.lineWidth=1,this.edgePositions=Mt,this.edgeColors=zt,this.edgeUVs=xt,this.edgeIds=Lt,this.edgeVAO=Ct,this.edgeCount=0,this.pointPositions=wt,this.pointColors=Tt,this.pointUVs=Bt,this.pointSizes=Gt,this.pointIds=Rt,this.pointVAO=te,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Wt,this.contourVAO=jt,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var O=I.prototype;O.isOpaque=function(){return!this.hasAlpha},O.isTransparent=function(){return this.hasAlpha},O.pickSlots=1,O.setPickBase=function(nt){this.pickId=nt};function z(nt,Z){if(!Z||!Z.length)return 1;for(var Q=0;Q<Z.length;++Q){if(Z.length<2)return 1;if(Z[Q][0]===nt)return Z[Q][1];if(Z[Q][0]>nt&&Q>0){var W=(Z[Q][0]-nt)/(Z[Q][0]-Z[Q-1][0]);return Z[Q][1]*(1-W)+W*Z[Q-1][1]}}return 1}function B(nt,Z){for(var Q=i({colormap:nt,nshades:256,format:"rgba"}),W=new Uint8Array(256*4),J=0;J<256;++J){for(var it=Q[J],K=0;K<3;++K)W[4*J+K]=it[K];Z?W[4*J+3]=255*z(J/255,Z):W[4*J+3]=255*it[3]}return c(W,[256,256,4],[4,0,1])}function F(nt){for(var Z=nt.length,Q=new Array(Z),W=0;W<Z;++W)Q[W]=nt[W][2];return Q}O.highlight=function(nt){if(!nt||!this.contourEnable){this.contourCount=0;return}for(var Z=d(this.cells,this.intensity,nt.intensity),Q=Z.cells,W=Z.vertexIds,J=Z.vertexWeights,it=Q.length,K=x.mallocFloat32(2*3*it),H=0,at=0;at<it;++at)for(var tt=Q[at],lt=0;lt<2;++lt){var dt=tt[0];tt.length===2&&(dt=tt[lt]);for(var mt=W[dt][0],gt=W[dt][1],Mt=J[dt],Lt=1-Mt,zt=this.positions[mt],xt=this.positions[gt],Ct=0;Ct<3;++Ct)K[H++]=Mt*zt[Ct]+Lt*xt[Ct]}this.contourCount=H/3|0,this.contourPositions.update(K.subarray(0,H)),x.free(K)},O.update=function(nt){nt=nt||{};var Z=this.gl;this.dirty=!0,"contourEnable"in nt&&(this.contourEnable=nt.contourEnable),"contourColor"in nt&&(this.contourColor=nt.contourColor),"lineWidth"in nt&&(this.lineWidth=nt.lineWidth),"lightPosition"in nt&&(this.lightPosition=nt.lightPosition),this.hasAlpha=!1,"opacity"in nt&&(this.opacity=nt.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in nt&&(this.opacityscale=nt.opacityscale,this.hasAlpha=!0),"ambient"in nt&&(this.ambientLight=nt.ambient),"diffuse"in nt&&(this.diffuseLight=nt.diffuse),"specular"in nt&&(this.specularLight=nt.specular),"roughness"in nt&&(this.roughness=nt.roughness),"fresnel"in nt&&(this.fresnel=nt.fresnel),nt.texture?(this.texture.dispose(),this.texture=u(Z,nt.texture)):nt.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Z.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Z.LINEAR,this.texture.setPixels(B(nt.colormap,this.opacityscale)),this.texture.generateMipmap());var Q=nt.cells,W=nt.positions;if(!(!W||!Q)){var J=[],it=[],K=[],H=[],at=[],tt=[],lt=[],dt=[],mt=[],gt=[],Mt=[],Lt=[],zt=[],xt=[];this.cells=Q,this.positions=W;var Ct=nt.vertexNormals,wt=nt.cellNormals,Rt=nt.vertexNormalsEpsilon===void 0?e:nt.vertexNormalsEpsilon,Tt=nt.faceNormalsEpsilon===void 0?s:nt.faceNormalsEpsilon;nt.useFacetNormals&&!wt&&(wt=g.faceNormals(Q,W,Tt)),!wt&&!Ct&&(Ct=g.vertexNormals(Q,W,Rt));var Bt=nt.vertexColors,Gt=nt.cellColors,te=nt.meshColor||[1,1,1,1],Wt=nt.vertexUVs,jt=nt.vertexIntensity,ie=nt.cellUVs,ue=nt.cellIntensity,fe=1/0,pe=-1/0;if(!Wt&&!ie)if(jt)if(nt.vertexIntensityBounds)fe=+nt.vertexIntensityBounds[0],pe=+nt.vertexIntensityBounds[1];else for(var Te=0;Te<jt.length;++Te){var Qt=jt[Te];fe=Math.min(fe,Qt),pe=Math.max(pe,Qt)}else if(ue)if(nt.cellIntensityBounds)fe=+nt.cellIntensityBounds[0],pe=+nt.cellIntensityBounds[1];else for(var Te=0;Te<ue.length;++Te){var Qt=ue[Te];fe=Math.min(fe,Qt),pe=Math.max(pe,Qt)}else for(var Te=0;Te<W.length;++Te){var Qt=W[Te][2];fe=Math.min(fe,Qt),pe=Math.max(pe,Qt)}jt?this.intensity=jt:ue?this.intensity=ue:this.intensity=F(W),this.pickVertex=!(ue||Gt);var Pt=nt.pointSizes,Ot=nt.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Te=0;Te<W.length;++Te)for(var Nt=W[Te],Ht=0;Ht<3;++Ht)isNaN(Nt[Ht])||!isFinite(Nt[Ht])||(this.bounds[0][Ht]=Math.min(this.bounds[0][Ht],Nt[Ht]),this.bounds[1][Ht]=Math.max(this.bounds[1][Ht],Nt[Ht]));var St=0,kt=0,Ft=0;t:for(var Te=0;Te<Q.length;++Te){var At=Q[Te];switch(At.length){case 1:for(var ft=At[0],Nt=W[ft],Ht=0;Ht<3;++Ht)if(isNaN(Nt[Ht])||!isFinite(Nt[Ht]))continue t;gt.push(Nt[0],Nt[1],Nt[2]);var pt;Bt?pt=Bt[ft]:Gt?pt=Gt[Te]:pt=te,this.opacityscale&&jt?it.push(pt[0],pt[1],pt[2],this.opacity*z((jt[ft]-fe)/(pe-fe),this.opacityscale)):pt.length===3?Mt.push(pt[0],pt[1],pt[2],this.opacity):(Mt.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0));var Dt;Wt?Dt=Wt[ft]:jt?Dt=[(jt[ft]-fe)/(pe-fe),0]:ie?Dt=ie[Te]:ue?Dt=[(ue[Te]-fe)/(pe-fe),0]:Dt=[(Nt[2]-fe)/(pe-fe),0],Lt.push(Dt[0],Dt[1]),Pt?zt.push(Pt[ft]):zt.push(Ot),xt.push(Te),Ft+=1;break;case 2:for(var Ht=0;Ht<2;++Ht)for(var ft=At[Ht],Nt=W[ft],Ut=0;Ut<3;++Ut)if(isNaN(Nt[Ut])||!isFinite(Nt[Ut]))continue t;for(var Ht=0;Ht<2;++Ht){var ft=At[Ht],Nt=W[ft];tt.push(Nt[0],Nt[1],Nt[2]);var pt;Bt?pt=Bt[ft]:Gt?pt=Gt[Te]:pt=te,this.opacityscale&&jt?it.push(pt[0],pt[1],pt[2],this.opacity*z((jt[ft]-fe)/(pe-fe),this.opacityscale)):pt.length===3?lt.push(pt[0],pt[1],pt[2],this.opacity):(lt.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0));var Dt;Wt?Dt=Wt[ft]:jt?Dt=[(jt[ft]-fe)/(pe-fe),0]:ie?Dt=ie[Te]:ue?Dt=[(ue[Te]-fe)/(pe-fe),0]:Dt=[(Nt[2]-fe)/(pe-fe),0],dt.push(Dt[0],Dt[1]),mt.push(Te)}kt+=1;break;case 3:for(var Ht=0;Ht<3;++Ht)for(var ft=At[Ht],Nt=W[ft],Ut=0;Ut<3;++Ut)if(isNaN(Nt[Ut])||!isFinite(Nt[Ut]))continue t;for(var Ht=0;Ht<3;++Ht){var ft=At[2-Ht],Nt=W[ft];J.push(Nt[0],Nt[1],Nt[2]);var pt;Bt?pt=Bt[ft]:Gt?pt=Gt[Te]:pt=te,pt?this.opacityscale&&jt?it.push(pt[0],pt[1],pt[2],this.opacity*z((jt[ft]-fe)/(pe-fe),this.opacityscale)):pt.length===3?it.push(pt[0],pt[1],pt[2],this.opacity):(it.push(pt[0],pt[1],pt[2],pt[3]*this.opacity),pt[3]<1&&(this.hasAlpha=!0)):it.push(.5,.5,.5,1);var Dt;Wt?Dt=Wt[ft]:jt?Dt=[(jt[ft]-fe)/(pe-fe),0]:ie?Dt=ie[Te]:ue?Dt=[(ue[Te]-fe)/(pe-fe),0]:Dt=[(Nt[2]-fe)/(pe-fe),0],H.push(Dt[0],Dt[1]);var $t;Ct?$t=Ct[ft]:$t=wt[Te],K.push($t[0],$t[1],$t[2]),at.push(Te)}St+=1;break}}this.pointCount=Ft,this.edgeCount=kt,this.triangleCount=St,this.pointPositions.update(gt),this.pointColors.update(Mt),this.pointUVs.update(Lt),this.pointSizes.update(zt),this.pointIds.update(new Uint32Array(xt)),this.edgePositions.update(tt),this.edgeColors.update(lt),this.edgeUVs.update(dt),this.edgeIds.update(new Uint32Array(mt)),this.trianglePositions.update(J),this.triangleColors.update(it),this.triangleUVs.update(H),this.triangleNormals.update(K),this.triangleIds.update(new Uint32Array(at))}},O.drawTransparent=O.draw=function(nt){nt=nt||{};for(var Z=this.gl,Q=nt.model||k,W=nt.view||k,J=nt.projection||k,it=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)it[0][K]=Math.max(it[0][K],this.clipBounds[0][K]),it[1][K]=Math.min(it[1][K],this.clipBounds[1][K]);var H={model:Q,view:W,projection:J,inverseModel:k.slice(),clipBounds:it,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=T(H.inverseModel,H.model),Z.disable(Z.CULL_FACE),this.texture.bind(0);var at=new Array(16);h(at,H.view,H.model),h(at,H.projection,at),T(at,at);for(var K=0;K<3;++K)H.eyePosition[K]=at[12+K]/at[15];for(var tt=at[15],K=0;K<3;++K)tt+=this.lightPosition[K]*at[4*K+3];for(var K=0;K<3;++K){for(var lt=at[12+K],dt=0;dt<3;++dt)lt+=at[4*dt+K]*this.lightPosition[dt];H.lightPosition[K]=lt/tt}if(this.triangleCount>0){var mt=this.triShader;mt.bind(),mt.uniforms=H,this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var mt=this.lineShader;mt.bind(),mt.uniforms=H,this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var mt=this.pointShader;mt.bind(),mt.uniforms=H,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var mt=this.contourShader;mt.bind(),mt.uniforms=H,this.contourVAO.bind(),Z.drawArrays(Z.LINES,0,this.contourCount),this.contourVAO.unbind()}},O.drawPick=function(nt){nt=nt||{};for(var Z=this.gl,Q=nt.model||k,W=nt.view||k,J=nt.projection||k,it=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],K=0;K<3;++K)it[0][K]=Math.max(it[0][K],this.clipBounds[0][K]),it[1][K]=Math.min(it[1][K],this.clipBounds[1][K]);this._model=[].slice.call(Q),this._view=[].slice.call(W),this._projection=[].slice.call(J),this._resolution=[Z.drawingBufferWidth,Z.drawingBufferHeight];var H={model:Q,view:W,projection:J,clipBounds:it,pickId:this.pickId/255},at=this.pickShader;if(at.bind(),at.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),Z.drawArrays(Z.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Z.lineWidth(this.lineWidth*this.pixelRatio),Z.drawArrays(Z.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var at=this.pointPickShader;at.bind(),at.uniforms=H,this.pointVAO.bind(),Z.drawArrays(Z.POINTS,0,this.pointCount),this.pointVAO.unbind()}},O.pick=function(nt){if(!nt||nt.id!==this.pickId)return null;for(var Z=nt.value[0]+256*nt.value[1]+65536*nt.value[2],Q=this.cells[Z],W=this.positions,J=new Array(Q.length),it=0;it<Q.length;++it)J[it]=W[Q[it]];var K=nt.coord[0],H=nt.coord[1];if(!this.pickVertex){var at=this.positions[Q[0]],tt=this.positions[Q[1]],lt=this.positions[Q[2]],dt=[(at[0]+tt[0]+lt[0])/3,(at[1]+tt[1]+lt[1])/3,(at[2]+tt[2]+lt[2])/3];return{_cellCenter:!0,position:[K,H],index:Z,cell:Q,cellId:Z,intensity:this.intensity[Z],dataCoordinate:dt}}var mt=C(J,[K*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!mt)return null;for(var gt=mt[2],Mt=0,it=0;it<Q.length;++it)Mt+=gt[it]*this.intensity[Q[it]];return{position:mt[1],index:Q[mt[0]],cell:Q,cellId:Z,intensity:Mt,dataCoordinate:this.positions[Q[mt[0]]]}},O.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function _(nt){var Z=n(nt,y.vertex,y.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.normal.location=4,Z}function N(nt){var Z=n(nt,S.vertex,S.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z}function G(nt){var Z=n(nt,M.vertex,M.fragment);return Z.attributes.position.location=0,Z.attributes.color.location=2,Z.attributes.uv.location=3,Z.attributes.pointSize.location=4,Z}function X(nt){var Z=n(nt,a.vertex,a.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z}function $(nt){var Z=n(nt,E.vertex,E.fragment);return Z.attributes.position.location=0,Z.attributes.id.location=1,Z.attributes.pointSize.location=4,Z}function et(nt){var Z=n(nt,m.vertex,m.fragment);return Z.attributes.position.location=0,Z}function ot(nt,Z){arguments.length===1&&(Z=nt,nt=Z.gl);var Q=nt.getExtension("OES_standard_derivatives")||nt.getExtension("MOZ_OES_standard_derivatives")||nt.getExtension("WEBKIT_OES_standard_derivatives");if(!Q)throw new Error("derivatives not supported");var W=_(nt),J=N(nt),it=G(nt),K=X(nt),H=$(nt),at=et(nt),tt=u(nt,c(new Uint8Array([255,255,255,255]),[1,1,4]));tt.generateMipmap(),tt.minFilter=nt.LINEAR_MIPMAP_LINEAR,tt.magFilter=nt.LINEAR;var lt=l(nt),dt=l(nt),mt=l(nt),gt=l(nt),Mt=l(nt),Lt=f(nt,[{buffer:lt,type:nt.FLOAT,size:3},{buffer:Mt,type:nt.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:dt,type:nt.FLOAT,size:4},{buffer:mt,type:nt.FLOAT,size:2},{buffer:gt,type:nt.FLOAT,size:3}]),zt=l(nt),xt=l(nt),Ct=l(nt),wt=l(nt),Rt=f(nt,[{buffer:zt,type:nt.FLOAT,size:3},{buffer:wt,type:nt.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:xt,type:nt.FLOAT,size:4},{buffer:Ct,type:nt.FLOAT,size:2}]),Tt=l(nt),Bt=l(nt),Gt=l(nt),te=l(nt),Wt=l(nt),jt=f(nt,[{buffer:Tt,type:nt.FLOAT,size:3},{buffer:Wt,type:nt.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Bt,type:nt.FLOAT,size:4},{buffer:Gt,type:nt.FLOAT,size:2},{buffer:te,type:nt.FLOAT,size:1}]),ie=l(nt),ue=f(nt,[{buffer:ie,type:nt.FLOAT,size:3}]),fe=new I(nt,tt,W,J,it,K,H,at,lt,Mt,dt,mt,gt,Lt,zt,wt,xt,Ct,Rt,Tt,Wt,Bt,Gt,te,jt,ie,ue);return fe.update(Z),fe}v.exports=ot},8120:function(v,p,r){v.exports=u;var e=r(2762),s=r(9405),n=r(3603);function l(g,h,T){this.plot=g,this.vbo=h,this.shader=T}var f=l.prototype;f.bind=function(){var g=this.shader;this.vbo.bind(),this.shader.bind(),g.attributes.coord.pointer(),g.uniforms.screenBox=this.plot.screenBox},f.drawBox=function(){var g=[0,0],h=[0,0];return function(T,c,i,d,x){var w=this.plot,C=this.shader,y=w.gl;g[0]=T,g[1]=c,h[0]=i,h[1]=d,C.uniforms.lo=g,C.uniforms.hi=h,C.uniforms.color=x,y.drawArrays(y.TRIANGLE_STRIP,0,4)}}(),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function u(g){var h=g.gl,T=e(h,[0,0,0,1,1,0,1,1]),c=s(h,n.boxVert,n.lineFrag);return new l(g,T,c)}},1913:function(v,p,r){v.exports=h;var e=r(2762),s=r(9405),n=r(2478),l=r(3603);function f(T,c,i,d){this.plot=T,this.vbo=c,this.shader=i,this.tickShader=d,this.ticks=[[],[]]}function u(T,c){return T-c}var g=f.prototype;g.draw=function(){var T=[0,0],c=[0,0],i=[0,0];return function(){for(var d=this.plot,x=this.vbo,w=this.shader,C=this.ticks,y=d.gl,S=d._tickBounds,M=d.dataBox,a=d.viewBox,E=d.gridLineWidth,m=d.gridLineColor,k=d.gridLineEnable,I=d.pixelRatio,O=0;O<2;++O){var z=S[O],B=S[O+2],F=B-z,_=.5*(M[O+2]+M[O]),N=M[O+2]-M[O];c[O]=2*F/N,T[O]=2*(z-_)/N}w.bind(),x.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=T,w.uniforms.dataScale=c;for(var G=0,O=0;O<2;++O){i[0]=i[1]=0,i[O]=1,w.uniforms.dataAxis=i,w.uniforms.lineWidth=E[O]/(a[O+2]-a[O])*I,w.uniforms.color=m[O];var X=C[O].length*6;k[O]&&X&&y.drawArrays(y.TRIANGLES,G,X),G+=X}}}(),g.drawTickMarks=function(){var T=[0,0],c=[0,0],i=[1,0],d=[0,1],x=[0,0],w=[0,0];return function(){for(var C=this.plot,y=this.vbo,S=this.tickShader,M=this.ticks,a=C.gl,E=C._tickBounds,m=C.dataBox,k=C.viewBox,I=C.pixelRatio,O=C.screenBox,z=O[2]-O[0],B=O[3]-O[1],F=k[2]-k[0],_=k[3]-k[1],N=0;N<2;++N){var G=E[N],X=E[N+2],$=X-G,et=.5*(m[N+2]+m[N]),ot=m[N+2]-m[N];c[N]=2*$/ot,T[N]=2*(G-et)/ot}c[0]*=F/z,T[0]*=F/z,c[1]*=_/B,T[1]*=_/B,S.bind(),y.bind(),S.attributes.dataCoord.pointer();var nt=S.uniforms;nt.dataShift=T,nt.dataScale=c;var Z=C.tickMarkLength,Q=C.tickMarkWidth,W=C.tickMarkColor,J=0,it=M[0].length*6,K=Math.min(n.ge(M[0],(m[0]-E[0])/(E[2]-E[0]),u),M[0].length),H=Math.min(n.gt(M[0],(m[2]-E[0])/(E[2]-E[0]),u),M[0].length),at=J+6*K,tt=6*Math.max(0,H-K),lt=Math.min(n.ge(M[1],(m[1]-E[1])/(E[3]-E[1]),u),M[1].length),dt=Math.min(n.gt(M[1],(m[3]-E[1])/(E[3]-E[1]),u),M[1].length),mt=it+6*lt,gt=6*Math.max(0,dt-lt);x[0]=2*(k[0]-Z[1])/z-1,x[1]=(k[3]+k[1])/B-1,w[0]=Z[1]*I/z,w[1]=Q[1]*I/B,gt&&(nt.color=W[1],nt.tickScale=w,nt.dataAxis=d,nt.screenOffset=x,a.drawArrays(a.TRIANGLES,mt,gt)),x[0]=(k[2]+k[0])/z-1,x[1]=2*(k[1]-Z[0])/B-1,w[0]=Q[0]*I/z,w[1]=Z[0]*I/B,tt&&(nt.color=W[0],nt.tickScale=w,nt.dataAxis=i,nt.screenOffset=x,a.drawArrays(a.TRIANGLES,at,tt)),x[0]=2*(k[2]+Z[3])/z-1,x[1]=(k[3]+k[1])/B-1,w[0]=Z[3]*I/z,w[1]=Q[3]*I/B,gt&&(nt.color=W[3],nt.tickScale=w,nt.dataAxis=d,nt.screenOffset=x,a.drawArrays(a.TRIANGLES,mt,gt)),x[0]=(k[2]+k[0])/z-1,x[1]=2*(k[3]+Z[2])/B-1,w[0]=Q[2]*I/z,w[1]=Z[2]*I/B,tt&&(nt.color=W[2],nt.tickScale=w,nt.dataAxis=i,nt.screenOffset=x,a.drawArrays(a.TRIANGLES,at,tt))}}(),g.update=function(){var T=[1,1,-1,-1,1,-1],c=[1,-1,1,1,-1,-1];return function(i){var d=i.ticks,x=i.bounds,w=new Float32Array(6*3*(d[0].length+d[1].length));this.plot.zeroLineEnable;for(var C=0,y=[[],[]],S=0;S<2;++S)for(var M=y[S],a=d[S],E=x[S],m=x[S+2],k=0;k<a.length;++k){var I=(a[k].x-E)/(m-E);M.push(I);for(var O=0;O<6;++O)w[C++]=I,w[C++]=T[O],w[C++]=c[O]}this.ticks=y,this.vbo.update(w)}}(),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function h(T){var c=T.gl,i=e(c),d=s(c,l.gridVert,l.gridFrag),x=s(c,l.tickVert,l.gridFrag),w=new f(T,i,d,x);return w}},4747:function(v,p,r){v.exports=u;var e=r(2762),s=r(9405),n=r(3603);function l(g,h,T){this.plot=g,this.vbo=h,this.shader=T}var f=l.prototype;f.bind=function(){var g=this.shader;this.vbo.bind(),this.shader.bind(),g.attributes.coord.pointer(),g.uniforms.screenBox=this.plot.screenBox},f.drawLine=function(){var g=[0,0],h=[0,0];return function(T,c,i,d,x,w){var C=this.plot,y=this.shader,S=C.gl;g[0]=T,g[1]=c,h[0]=i,h[1]=d,y.uniforms.start=g,y.uniforms.end=h,y.uniforms.width=x*C.pixelRatio,y.uniforms.color=w,S.drawArrays(S.TRIANGLE_STRIP,0,4)}}(),f.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function u(g){var h=g.gl,T=e(h,[-1,-1,-1,1,1,-1,1,1]),c=s(h,n.lineVert,n.lineFrag),i=new l(g,T,c);return i}},3603:function(v,p,r){var e=r(3236),s=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);v.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:s,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:s,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:s,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},2142:function(v,p,r){v.exports=h;var e=r(2762),s=r(9405),n=r(529),l=r(2478),f=r(3603);function u(T,c,i){this.plot=T,this.vbo=c,this.shader=i,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var g=u.prototype;g.drawTicks=function(){var T=[0,0],c=[0,0],i=[0,0];return function(d){var x=this.plot,w=this.shader,C=this.tickX[d],y=this.tickOffset[d],S=x.gl,M=x.viewBox,a=x.dataBox,E=x.screenBox,m=x.pixelRatio,k=x.tickEnable,I=x.tickPad,O=x.tickColor,z=x.tickAngle,B=x.labelEnable,F=x.labelPad,_=x.labelColor,N=x.labelAngle,G=this.labelOffset[d],X=this.labelCount[d],$=l.lt(C,a[d]),et=l.le(C,a[d+2]);T[0]=T[1]=0,T[d]=1,c[d]=(M[2+d]+M[d])/(E[2+d]-E[d])-1;var ot=2/E[2+(d^1)]-E[d^1];c[d^1]=ot*M[d^1]-1,k[d]&&(c[d^1]-=ot*m*I[d],$<et&&y[et]>y[$]&&(w.uniforms.dataAxis=T,w.uniforms.screenOffset=c,w.uniforms.color=O[d],w.uniforms.angle=z[d],S.drawArrays(S.TRIANGLES,y[$],y[et]-y[$]))),B[d]&&X&&(c[d^1]-=ot*m*F[d],w.uniforms.dataAxis=i,w.uniforms.screenOffset=c,w.uniforms.color=_[d],w.uniforms.angle=N[d],S.drawArrays(S.TRIANGLES,G,X)),c[d^1]=ot*M[2+(d^1)]-1,k[d+2]&&(c[d^1]+=ot*m*I[d+2],$<et&&y[et]>y[$]&&(w.uniforms.dataAxis=T,w.uniforms.screenOffset=c,w.uniforms.color=O[d+2],w.uniforms.angle=z[d+2],S.drawArrays(S.TRIANGLES,y[$],y[et]-y[$]))),B[d+2]&&X&&(c[d^1]+=ot*m*F[d+2],w.uniforms.dataAxis=i,w.uniforms.screenOffset=c,w.uniforms.color=_[d+2],w.uniforms.angle=N[d+2],S.drawArrays(S.TRIANGLES,G,X))}}(),g.drawTitle=function(){var T=[0,0],c=[0,0];return function(){var i=this.plot,d=this.shader,x=i.gl,w=i.screenBox,C=i.titleCenter,y=i.titleAngle,S=i.titleColor,M=i.pixelRatio;if(this.titleCount){for(var a=0;a<2;++a)c[a]=2*(C[a]*M-w[a])/(w[2+a]-w[a])-1;d.bind(),d.uniforms.dataAxis=T,d.uniforms.screenOffset=c,d.uniforms.angle=y,d.uniforms.color=S,x.drawArrays(x.TRIANGLES,this.titleOffset,this.titleCount)}}}(),g.bind=function(){var T=[0,0],c=[0,0],i=[0,0];return function(){var d=this.plot,x=this.shader,w=d._tickBounds,C=d.dataBox,y=d.screenBox,S=d.viewBox;x.bind();for(var M=0;M<2;++M){var a=w[M],E=w[M+2],m=E-a,k=.5*(C[M+2]+C[M]),I=C[M+2]-C[M],O=S[M],z=S[M+2],B=z-O,F=y[M],_=y[M+2],N=_-F;c[M]=2*m/I*B/N,T[M]=2*(a-k)/I*B/N}i[1]=2*d.pixelRatio/(y[3]-y[1]),i[0]=i[1]*(y[3]-y[1])/(y[2]-y[0]),x.uniforms.dataScale=c,x.uniforms.dataShift=T,x.uniforms.textScale=i,this.vbo.bind(),x.attributes.textCoordinate.pointer()}}(),g.update=function(T){var c=[],i=T.ticks,d=T.bounds,x,w,C,y,S;for(S=0;S<2;++S){var M=[Math.floor(c.length/3)],a=[-1/0],E=i[S];for(x=0;x<E.length;++x){var m=E[x],k=m.x,I=m.text,O=m.font||"sans-serif",z=m.fontStyle||"normal",B=m.fontWeight||"normal",F=m.fontVariant||"normal";y=m.fontSize||12;for(var _=1/(d[S+2]-d[S]),N=d[S],G=I.split(`
`),X=0;X<G.length;X++)for(C=n(O,G[X],{fontStyle:z,fontWeight:B,fontVariant:F}).data,w=0;w<C.length;w+=2)c.push(C[w]*y,-C[w+1]*y-X*y*1.2,(k-N)*_);M.push(Math.floor(c.length/3)),a.push(k)}this.tickOffset[S]=M,this.tickX[S]=a}for(S=0;S<2;++S){for(this.labelOffset[S]=Math.floor(c.length/3),C=n(T.labelFont[S],T.labels[S],{fontStyle:T.labelFontStyle[S],fontWeight:T.labelFontWeight[S],fontVariant:T.labelFontVariant[S],textAlign:"center"}).data,y=T.labelSize[S],x=0;x<C.length;x+=2)c.push(C[x]*y,-C[x+1]*y,0);this.labelCount[S]=Math.floor(c.length/3)-this.labelOffset[S]}for(this.titleOffset=Math.floor(c.length/3),C=n(T.titleFont,T.title,{fontStyle:T.titleFontStyle,fontWeight:T.titleFontWeight,fontVariant:T.titleFontVariant}).data,y=T.titleSize,x=0;x<C.length;x+=2)c.push(C[x]*y,-C[x+1]*y,0);this.titleCount=Math.floor(c.length/3)-this.titleOffset,this.vbo.update(c)},g.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(T){var c=T.gl,i=e(c),d=s(c,f.textVert,f.textFrag),x=new u(T,i,d);return x}},1850:function(v,p,r){v.exports=c;var e=r(3589),s=r(1913),n=r(2142),l=r(4747),f=r(8120);function u(i,d){this.gl=i,this.pickBuffer=d,this.screenBox=[0,0,i.drawingBufferWidth,i.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var g=u.prototype;g.setDirty=function(){this.dirty=this.pickDirty=!0},g.setOverlayDirty=function(){this.dirty=!0},g.nextDepthValue=function(){return this._depthCounter++/65536},g.draw=function(){return function(){var i=this.gl,d=this.screenBox,x=this.viewBox,w=this.dataBox,C=this.pixelRatio,y=this.grid,S=this.line,M=this.text,a=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,i.bindFramebuffer(i.FRAMEBUFFER,null),i.enable(i.SCISSOR_TEST),i.disable(i.DEPTH_TEST),i.depthFunc(i.LESS),i.depthMask(!1),i.enable(i.BLEND),i.blendEquation(i.FUNC_ADD,i.FUNC_ADD),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),this.borderColor){i.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]);var E=this.borderColor;i.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)}i.scissor(x[0],x[1],x[2]-x[0],x[3]-x[1]),i.viewport(x[0],x[1],x[2]-x[0],x[3]-x[1]);var m=this.backgroundColor;i.clearColor(m[0]*m[3],m[1]*m[3],m[2]*m[3],m[3]),i.clear(i.COLOR_BUFFER_BIT),y.draw();var k=this.zeroLineEnable,I=this.zeroLineColor,O=this.zeroLineWidth;if(k[0]||k[1]){S.bind();for(var z=0;z<2;++z)if(!(!k[z]||!(w[z]<=0&&w[z+2]>=0))){var B=d[z]-w[z]*(d[z+2]-d[z])/(w[z+2]-w[z]);z===0?S.drawLine(B,d[1],B,d[3],O[z],I[z]):S.drawLine(d[0],B,d[2],B,O[z],I[z])}}for(var z=0;z<a.length;++z)a[z].draw();i.viewport(d[0],d[1],d[2]-d[0],d[3]-d[1]),i.scissor(d[0],d[1],d[2]-d[0],d[3]-d[1]),this.grid.drawTickMarks(),S.bind();var F=this.borderLineEnable,_=this.borderLineWidth,N=this.borderLineColor;F[1]&&S.drawLine(x[0],x[1]-.5*_[1]*C,x[0],x[3]+.5*_[3]*C,_[1],N[1]),F[0]&&S.drawLine(x[0]-.5*_[0]*C,x[1],x[2]+.5*_[2]*C,x[1],_[0],N[0]),F[3]&&S.drawLine(x[2],x[1]-.5*_[1]*C,x[2],x[3]+.5*_[3]*C,_[3],N[3]),F[2]&&S.drawLine(x[0]-.5*_[0]*C,x[3],x[2]+.5*_[2]*C,x[3],_[2],N[2]),M.bind();for(var z=0;z<2;++z)M.drawTicks(z);this.titleEnable&&M.drawTitle();for(var G=this.overlays,z=0;z<G.length;++z)G[z].draw();i.disable(i.SCISSOR_TEST),i.disable(i.BLEND),i.depthMask(!0)}}}(),g.drawPick=function(){return function(){if(!this.static){var i=this.pickBuffer;this.gl,this._pickTimeout=null,i.begin();for(var d=1,x=this.objects,w=0;w<x.length;++w)d=x[w].drawPick(d);i.end()}}}(),g.pick=function(){return function(i,d){if(!this.static){var x=this.pixelRatio,w=this.pickPixelRatio,C=this.viewBox,y=Math.round((i-C[0]/x)*w)|0,S=Math.round((d-C[1]/x)*w)|0,M=this.pickBuffer.query(y,S,this.pickRadius);if(!M)return null;for(var a=M.id+(M.value[0]<<8)+(M.value[1]<<16)+(M.value[2]<<24),E=this.objects,m=0;m<E.length;++m){var k=E[m].pick(y,S,a);if(k)return k}return null}}}();function h(i){for(var d=i.slice(),x=0;x<d.length;++x)d[x]=d[x].slice();return d}function T(i,d){return i.x-d.x}g.setScreenBox=function(i){var d=this.screenBox,x=this.pixelRatio;d[0]=Math.round(i[0]*x)|0,d[1]=Math.round(i[1]*x)|0,d[2]=Math.round(i[2]*x)|0,d[3]=Math.round(i[3]*x)|0,this.setDirty()},g.setDataBox=function(i){var d=this.dataBox,x=d[0]!==i[0]||d[1]!==i[1]||d[2]!==i[2]||d[3]!==i[3];x&&(d[0]=i[0],d[1]=i[1],d[2]=i[2],d[3]=i[3],this.setDirty())},g.setViewBox=function(i){var d=this.pixelRatio,x=this.viewBox;x[0]=Math.round(i[0]*d)|0,x[1]=Math.round(i[1]*d)|0,x[2]=Math.round(i[2]*d)|0,x[3]=Math.round(i[3]*d)|0;var w=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((i[2]-i[0])*w)|0,Math.round((i[3]-i[1])*w)|0],this.setDirty()},g.update=function(i){i=i||{};var d=this.gl;this.pixelRatio=i.pixelRatio||1;var x=this.pixelRatio;this.pickPixelRatio=Math.max(x,1),this.setScreenBox(i.screenBox||[0,0,d.drawingBufferWidth/x,d.drawingBufferHeight/x]),this.screenBox,this.setViewBox(i.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/x,.125*(this.screenBox[3]-this.screenBox[1])/x,.875*(this.screenBox[2]-this.screenBox[0])/x,.875*(this.screenBox[3]-this.screenBox[1])/x]);var w=this.viewBox,C=(w[2]-w[0])/(w[3]-w[1]);this.setDataBox(i.dataBox||[-10,-10/C,10,10/C]),this.borderColor=i.borderColor!==!1?(i.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(i.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(i.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(i.gridLineWidth||[1,1]).slice(),this.gridLineColor=h(i.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(i.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(i.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=h(i.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(i.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(i.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=h(i.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(i.titleCenter||[.5*(w[0]+w[2])/x,(w[3]+120)/x]).slice(),this.titleEnable=!("titleEnable"in i)||!!i.titleEnable,this.titleAngle=i.titleAngle||0,this.titleColor=(i.titleColor||[0,0,0,1]).slice(),this.labelPad=(i.labelPad||[15,15,15,15]).slice(),this.labelAngle=(i.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(i.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=h(i.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(i.tickPad||[15,15,15,15]).slice(),this.tickAngle=(i.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(i.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=h(i.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(i.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(i.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=h(i.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var y=i.ticks||[[],[]],S=this._tickBounds;S[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(var M=0;M<2;++M){var a=y[M].slice(0);a.length!==0&&(a.sort(T),S[M]=Math.min(S[M],a[0].x),S[M+2]=Math.max(S[M+2],a[a.length-1].x))}this.grid.update({bounds:S,ticks:y}),this.text.update({bounds:S,ticks:y,labels:i.labels||["x","y"],labelSize:i.labelSize||[12,12],labelFont:i.labelFont||["sans-serif","sans-serif"],labelFontStyle:i.labelFontStyle||["normal","normal"],labelFontWeight:i.labelFontWeight||["normal","normal"],labelFontVariant:i.labelFontVariant||["normal","normal"],title:i.title||"",titleSize:i.titleSize||18,titleFont:i.titleFont||"sans-serif",titleFontStyle:i.titleFontStyle||"normal",titleFontWeight:i.titleFontWeight||"normal",titleFontVariant:i.titleFontVariant||"normal"}),this.static=!!i.static,this.setDirty()},g.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var i=this.objects.length-1;i>=0;--i)this.objects[i].dispose();this.objects.length=0;for(var i=this.overlays.length-1;i>=0;--i)this.overlays[i].dispose();this.overlays.length=0,this.gl=null},g.addObject=function(i){this.objects.indexOf(i)<0&&(this.objects.push(i),this.setDirty())},g.removeObject=function(i){for(var d=this.objects,x=0;x<d.length;++x)if(d[x]===i){d.splice(x,1),this.setDirty();break}},g.addOverlay=function(i){this.overlays.indexOf(i)<0&&(this.overlays.push(i),this.setOverlayDirty())},g.removeOverlay=function(i){for(var d=this.overlays,x=0;x<d.length;++x)if(d[x]===i){d.splice(x,1),this.setOverlayDirty();break}};function c(i){var d=i.gl,x=e(d,[d.drawingBufferWidth,d.drawingBufferHeight]),w=new u(d,x);return w.grid=s(w),w.text=n(w),w.line=l(w),w.box=f(w),w.update(i),w}},4437:function(v,p,r){v.exports=g;var e=r(3025),s=r(6296),n=r(351),l=r(8512),f=r(24),u=r(7520);function g(h,T){h=h||document.body,T=T||{};var c=[.01,1/0];"distanceLimits"in T&&(c[0]=T.distanceLimits[0],c[1]=T.distanceLimits[1]),"zoomMin"in T&&(c[0]=T.zoomMin),"zoomMax"in T&&(c[1]=T.zoomMax);var i=s({center:T.center||[0,0,0],up:T.up||[0,1,0],eye:T.eye||[0,0,10],mode:T.mode||"orbit",distanceLimits:c}),d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0,w=h.clientWidth,C=h.clientHeight,y={keyBindingMode:"rotate",enableWheel:!0,view:i,element:h,delay:T.delay||16,rotateSpeed:T.rotateSpeed||1,zoomSpeed:T.zoomSpeed||1,translateSpeed:T.translateSpeed||1,flipX:!!T.flipX,flipY:!!T.flipY,modes:i.modes,_ortho:T._ortho||T.projection&&T.projection.type==="orthographic"||!1,tick:function(){var S=e(),M=this.delay,a=S-2*M;i.idle(S-M),i.recalcMatrix(a),i.flush(S-(100+M*2));for(var E=!0,m=i.computedMatrix,k=0;k<16;++k)E=E&&d[k]===m[k],d[k]=m[k];var I=h.clientWidth===w&&h.clientHeight===C;return w=h.clientWidth,C=h.clientHeight,E?!I:(x=Math.exp(i.computedRadius[0]),!0)},lookAt:function(S,M,a){i.lookAt(i.lastT(),S,M,a)},rotate:function(S,M,a){i.rotate(i.lastT(),S,M,a)},pan:function(S,M,a){i.pan(i.lastT(),S,M,a)},translate:function(S,M,a){i.translate(i.lastT(),S,M,a)}};return Object.defineProperties(y,{matrix:{get:function(){return i.computedMatrix},set:function(S){return i.setMatrix(i.lastT(),S),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(S){var M=i.computedUp.slice(),a=i.computedEye.slice(),E=i.computedCenter.slice();if(i.setMode(S),S==="turntable"){var m=e();i._active.lookAt(m,a,E,M),i._active.lookAt(m+500,a,E,[0,0,1]),i._active.flush(m)}return i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(S){return i.lookAt(i.lastT(),null,S),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(S){return i.lookAt(i.lastT(),S),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(S){return i.lookAt(i.lastT(),null,null,S),i.computedUp},enumerable:!0},distance:{get:function(){return x},set:function(S){return i.setDistance(i.lastT(),S),S},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(c)},set:function(S){return i.setDistanceLimits(S),S},enumerable:!0}}),h.addEventListener("contextmenu",function(S){return S.preventDefault(),!1}),y._lastX=-1,y._lastY=-1,y._lastMods={shift:!1,control:!1,alt:!1,meta:!1},y.enableMouseListeners=function(){y.mouseListener=n(h,S),h.addEventListener("touchstart",function(M){var a=f(M.changedTouches[0],h);S(0,a[0],a[1],y._lastMods),S(1,a[0],a[1],y._lastMods)},u?{passive:!0}:!1),h.addEventListener("touchmove",function(M){var a=f(M.changedTouches[0],h);S(1,a[0],a[1],y._lastMods),M.preventDefault()},u?{passive:!1}:!1),h.addEventListener("touchend",function(M){S(0,y._lastX,y._lastY,y._lastMods)},u?{passive:!0}:!1);function S(M,a,E,m){var k=y.keyBindingMode;if(k!==!1){var I=k==="rotate",O=k==="pan",z=k==="zoom",B=!!m.control,F=!!m.alt,_=!!m.shift,N=!!(M&1),G=!!(M&2),X=!!(M&4),$=1/h.clientHeight,et=$*(a-y._lastX),ot=$*(E-y._lastY),nt=y.flipX?1:-1,Z=y.flipY?1:-1,Q=Math.PI*y.rotateSpeed,W=e();if(y._lastX!==-1&&y._lastY!==-1&&((I&&N&&!B&&!F&&!_||N&&!B&&!F&&_)&&i.rotate(W,nt*Q*et,-Z*Q*ot,0),(O&&N&&!B&&!F&&!_||G||N&&B&&!F&&!_)&&i.pan(W,-y.translateSpeed*et*x,y.translateSpeed*ot*x,0),z&&N&&!B&&!F&&!_||X||N&&!B&&F&&!_)){var J=-y.zoomSpeed*ot/window.innerHeight*(W-i.lastT())*100;i.pan(W,0,0,x*(Math.exp(J)-1))}return y._lastX=a,y._lastY=E,y._lastMods=m,!0}}y.wheelListener=l(h,function(M,a){if(y.keyBindingMode!==!1&&y.enableWheel){var E=y.flipX?1:-1,m=y.flipY?1:-1,k=e();if(Math.abs(M)>Math.abs(a))i.rotate(k,0,0,-M*E*Math.PI*y.rotateSpeed/window.innerWidth);else if(!y._ortho){var I=-y.zoomSpeed*m*a/window.innerHeight*(k-i.lastT())/20;i.pan(k,0,0,x*(Math.exp(I)-1))}}},!0)},y.enableMouseListeners(),y}},799:function(v,p,r){var e=r(3236),s=r(9405),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),l=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);v.exports=function(f){return s(f,n,l,null,[{name:"position",type:"vec2"}])}},4100:function(v,p,r){var e=r(4437),s=r(3837),n=r(5445),l=r(4449),f=r(3589),u=r(2260),g=r(7169),h=r(351),T=r(4772),c=r(4040),i=r(799),d=r(9216)({tablet:!0,featureDetect:!0});v.exports={createScene:S,createCamera:e};function x(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function w(a,E){var m=null;try{m=a.getContext("webgl",E),m||(m=a.getContext("experimental-webgl",E))}catch{return null}return m}function C(a){var E=Math.round(Math.log(Math.abs(a))/Math.log(10));if(E<0){var m=Math.round(Math.pow(10,-E));return Math.ceil(a*m)/m}else if(E>0){var m=Math.round(Math.pow(10,E));return Math.ceil(a/m)*m}return Math.ceil(a)}function y(a){return typeof a=="boolean"?a:!0}function S(a){a=a||{},a.camera=a.camera||{};var E=a.canvas;if(!E)if(E=document.createElement("canvas"),a.container){var m=a.container;m.appendChild(E)}else document.body.appendChild(E);var k=a.gl;if(k||(a.glOptions&&(d=!!a.glOptions.preserveDrawingBuffer),k=w(E,a.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:d})),!k)throw new Error("webgl not supported");var I=a.bounds||[[-10,-10,-10],[10,10,10]],O=new x,z=u(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!d}),B=i(k),F=a.cameraObject&&a.cameraObject._ortho===!0||a.camera.projection&&a.camera.projection.type==="orthographic"||!1,_={eye:a.camera.eye||[2,0,0],center:a.camera.center||[0,0,0],up:a.camera.up||[0,1,0],zoomMin:a.camera.zoomMax||.1,zoomMax:a.camera.zoomMin||100,mode:a.camera.mode||"turntable",_ortho:F},N=a.axes||{},G=s(k,N);G.enable=!N.disable;var X=a.spikes||{},$=l(k,X),et=[],ot=[],nt=[],Z=[],Q=!0,K=!0,W=new Array(16),J=new Array(16),it={view:null,projection:W,model:J,_ortho:!1},K=!0,H=[k.drawingBufferWidth,k.drawingBufferHeight],at=a.cameraObject||e(E,_),tt={gl:k,contextLost:!1,pixelRatio:a.pixelRatio||1,canvas:E,selection:O,camera:at,axes:G,axesPixels:null,spikes:$,bounds:I,objects:et,shape:H,aspect:a.aspectRatio||[1,1,1],pickRadius:a.pickRadius||10,zNear:a.zNear||.01,zFar:a.zFar||1e3,fovy:a.fovy||Math.PI/4,clearColor:a.clearColor||[0,0,0,0],autoResize:y(a.autoResize),autoBounds:y(a.autoBounds),autoScale:!!a.autoScale,autoCenter:y(a.autoCenter),clipToBounds:y(a.clipToBounds),snapToData:!!a.snapToData,onselect:a.onselect||null,onrender:a.onrender||null,onclick:a.onclick||null,cameraParams:it,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(wt){this.aspect[0]=wt.x,this.aspect[1]=wt.y,this.aspect[2]=wt.z,K=!0},setBounds:function(wt,Rt){this.bounds[0][wt]=Rt.min,this.bounds[1][wt]=Rt.max},setClearColor:function(wt){this.clearColor=wt},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},lt=[k.drawingBufferWidth/tt.pixelRatio|0,k.drawingBufferHeight/tt.pixelRatio|0];function dt(){if(!tt._stopped&&tt.autoResize){var wt=E.parentNode,Rt=1,Tt=1;wt&&wt!==document.body?(Rt=wt.clientWidth,Tt=wt.clientHeight):(Rt=window.innerWidth,Tt=window.innerHeight);var Bt=Math.ceil(Rt*tt.pixelRatio)|0,Gt=Math.ceil(Tt*tt.pixelRatio)|0;if(Bt!==E.width||Gt!==E.height){E.width=Bt,E.height=Gt;var te=E.style;te.position=te.position||"absolute",te.left="0px",te.top="0px",te.width=Rt+"px",te.height=Tt+"px",Q=!0}}}tt.autoResize&&dt(),window.addEventListener("resize",dt);function mt(){for(var wt=et.length,Rt=Z.length,Tt=0;Tt<Rt;++Tt)nt[Tt]=0;t:for(var Tt=0;Tt<wt;++Tt){var Bt=et[Tt],Gt=Bt.pickSlots;if(!Gt){ot[Tt]=-1;continue}for(var te=0;te<Rt;++te)if(nt[te]+Gt<255){ot[Tt]=te,Bt.setPickBase(nt[te]+1),nt[te]+=Gt;continue t}var Wt=f(k,H);ot[Tt]=Rt,Z.push(Wt),nt.push(Gt),Bt.setPickBase(1),Rt+=1}for(;Rt>0&&nt[Rt-1]===0;)nt.pop(),Z.pop().dispose()}tt.update=function(wt){tt._stopped||(Q=!0,K=!0)},tt.add=function(wt){tt._stopped||(wt.axes=G,et.push(wt),ot.push(-1),Q=!0,K=!0,mt())},tt.remove=function(wt){if(!tt._stopped){var Rt=et.indexOf(wt);Rt<0||(et.splice(Rt,1),ot.pop(),Q=!0,K=!0,mt())}},tt.dispose=function(){if(!tt._stopped&&(tt._stopped=!0,window.removeEventListener("resize",dt),E.removeEventListener("webglcontextlost",gt),tt.mouseListener.enabled=!1,!tt.contextLost)){G.dispose(),$.dispose();for(var wt=0;wt<et.length;++wt)et[wt].dispose();z.dispose();for(var wt=0;wt<Z.length;++wt)Z[wt].dispose();B.dispose(),k=null,G=null,$=null,et=[]}},tt._mouseRotating=!1,tt._prevButtons=0,tt.enableMouseListeners=function(){tt.mouseListener=h(E,function(wt,Rt,Tt){if(!tt._stopped){var Bt=Z.length,Gt=et.length,te=O.object;O.distance=1/0,O.mouse[0]=Rt,O.mouse[1]=Tt,O.object=null,O.screen=null,O.dataCoordinate=O.dataPosition=null;var Wt=!1;if(wt&&tt._prevButtons)tt._mouseRotating=!0;else{tt._mouseRotating&&(K=!0),tt._mouseRotating=!1;for(var jt=0;jt<Bt;++jt){var ie=Z[jt].query(Rt,lt[1]-Tt-1,tt.pickRadius);if(ie){if(ie.distance>O.distance)continue;for(var ue=0;ue<Gt;++ue){var fe=et[ue];if(ot[ue]===jt){var pe=fe.pick(ie);pe&&(O.buttons=wt,O.screen=ie.coord,O.distance=ie.distance,O.object=fe,O.index=pe.distance,O.dataPosition=pe.position,O.dataCoordinate=pe.dataCoordinate,O.data=pe,Wt=!0)}}}}}te&&te!==O.object&&(te.highlight&&te.highlight(null),Q=!0),O.object&&(O.object.highlight&&O.object.highlight(O.data),Q=!0),Wt=Wt||O.object!==te,Wt&&tt.onselect&&tt.onselect(O),wt&1&&!(tt._prevButtons&1)&&tt.onclick&&tt.onclick(O),tt._prevButtons=wt}})};function gt(){if(tt.contextLost)return!0;k.isContextLost()&&(tt.contextLost=!0,tt.mouseListener.enabled=!1,tt.selection.object=null,tt.oncontextloss&&tt.oncontextloss())}E.addEventListener("webglcontextlost",gt);function Mt(){if(!gt()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var wt=et.length,Rt=Z.length,Tt=0;Tt<Rt;++Tt){var Bt=Z[Tt];Bt.shape=lt,Bt.begin();for(var Gt=0;Gt<wt;++Gt)if(ot[Gt]===Tt){var te=et[Gt];te.drawPick&&(te.pixelRatio=1,te.drawPick(it))}Bt.end()}}}var Lt=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],zt=[Lt[0].slice(),Lt[1].slice()];function xt(){if(!gt()){dt();var wt=tt.camera.tick();it.view=tt.camera.matrix,Q=Q||wt,K=K||wt,G.pixelRatio=tt.pixelRatio,$.pixelRatio=tt.pixelRatio;var Rt=et.length,Tt=Lt[0],Bt=Lt[1];Tt[0]=Tt[1]=Tt[2]=1/0,Bt[0]=Bt[1]=Bt[2]=-1/0;for(var Gt=0;Gt<Rt;++Gt){var te=et[Gt];te.pixelRatio=tt.pixelRatio,te.axes=tt.axes,Q=Q||!!te.dirty,K=K||!!te.dirty;var Wt=te.bounds;if(Wt)for(var jt=Wt[0],ie=Wt[1],ue=0;ue<3;++ue)Tt[ue]=Math.min(Tt[ue],jt[ue]),Bt[ue]=Math.max(Bt[ue],ie[ue])}var fe=tt.bounds;if(tt.autoBounds)for(var ue=0;ue<3;++ue){if(Bt[ue]<Tt[ue])Tt[ue]=-1,Bt[ue]=1;else{Tt[ue]===Bt[ue]&&(Tt[ue]-=1,Bt[ue]+=1);var pe=.05*(Bt[ue]-Tt[ue]);Tt[ue]=Tt[ue]-pe,Bt[ue]=Bt[ue]+pe}fe[0][ue]=Tt[ue],fe[1][ue]=Bt[ue]}for(var Te=!1,ue=0;ue<3;++ue)Te=Te||zt[0][ue]!==fe[0][ue]||zt[1][ue]!==fe[1][ue],zt[0][ue]=fe[0][ue],zt[1][ue]=fe[1][ue];if(K=K||Te,Q=Q||Te,!!Q){if(Te){for(var Qt=[0,0,0],Gt=0;Gt<3;++Gt)Qt[Gt]=C((fe[1][Gt]-fe[0][Gt])/10);G.autoTicks?G.update({bounds:fe,tickSpacing:Qt}):G.update({bounds:fe})}var Pt=k.drawingBufferWidth,Ot=k.drawingBufferHeight;H[0]=Pt,H[1]=Ot,lt[0]=Math.max(Pt/tt.pixelRatio,1)|0,lt[1]=Math.max(Ot/tt.pixelRatio,1)|0,M(tt,F);for(var Gt=0;Gt<Rt;++Gt){var te=et[Gt];te.axesBounds=fe,tt.clipToBounds&&(te.clipBounds=fe)}O.object&&(tt.snapToData?$.position=O.dataCoordinate:$.position=O.dataPosition,$.bounds=fe),K&&(K=!1,Mt()),tt.axesPixels=n(tt.axes,it,Pt,Ot),tt.onrender&&tt.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,Pt,Ot),tt.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Nt=!1;G.enable&&(Nt=Nt||G.isTransparent(),G.draw(it)),$.axes=G,O.object&&$.draw(it),k.disable(k.CULL_FACE);for(var Gt=0;Gt<Rt;++Gt){var te=et[Gt];te.axes=G,te.pixelRatio=tt.pixelRatio,te.isOpaque&&te.isOpaque()&&te.draw(it),te.isTransparent&&te.isTransparent()&&(Nt=!0)}if(Nt){z.shape=H,z.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),G.enable&&G.isTransparent()&&G.drawTransparent(it);for(var Gt=0;Gt<Rt;++Gt){var te=et[Gt];te.isOpaque&&te.isOpaque()&&te.draw(it)}k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),G.isTransparent()&&G.drawTransparent(it);for(var Gt=0;Gt<Rt;++Gt){var te=et[Gt];te.isTransparent&&te.isTransparent()&&te.drawTransparent(it)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),B.bind(),z.color[0].bind(0),B.uniforms.accumBuffer=0,g(k),k.disable(k.BLEND)}Q=!1;for(var Gt=0;Gt<Rt;++Gt)et[Gt].dirty=!1}}}function Ct(){tt._stopped||tt.contextLost||(xt(),requestAnimationFrame(Ct))}return tt.enableMouseListeners(),Ct(),tt.redraw=function(){tt._stopped||(Q=!0,xt())},tt}function M(a,E){var m=a.bounds,k=a.cameraParams,I=k.projection,O=k.model,z=a.gl.drawingBufferWidth,B=a.gl.drawingBufferHeight,F=a.zNear,_=a.zFar,N=a.fovy,G=z/B;E?(c(I,-G,G,-1,1,F,_),k._ortho=!0):(T(I,N,G,F,_),k._ortho=!1);for(var X=0;X<16;++X)O[X]=0;O[15]=1;for(var $=0,X=0;X<3;++X)$=Math.max($,m[1][X]-m[0][X]);for(var X=0;X<3;++X)a.autoScale?O[5*X]=a.aspect[X]/(m[1][X]-m[0][X]):O[5*X]=1/$,a.autoCenter&&(O[12+X]=-O[5*X]*.5*(m[0][X]+m[1][X]))}},6640:function(v,p,r){var e=r(3236);p.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),p.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),p.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),p.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},4696:function(v,p,r){var e=r(9405),s=r(2762),n=r(1888),l=r(6640);v.exports=h;function f(T,c,i,d,x){this.plot=T,this.offsetBuffer=c,this.pickBuffer=i,this.shader=d,this.pickShader=x,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var u=f.prototype;u.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},u.update=function(T){var c;T=T||{};function i(M,a){return M in T?T[M]:a}this.sizeMin=i("sizeMin",.5),this.sizeMax=i("sizeMax",20),this.color=i("color",[1,0,0,1]).slice(),this.areaRatio=i("areaRatio",1),this.borderColor=i("borderColor",[0,0,0,1]).slice(),this.blend=i("blend",!1);var d=T.positions.length>>>1,x=T.positions instanceof Float32Array,w=T.idToIndex instanceof Int32Array&&T.idToIndex.length>=d,C=T.positions,y=x?C:n.mallocFloat32(C.length),S=w?T.idToIndex:n.mallocInt32(d);if(x||y.set(C),!w)for(y.set(C),c=0;c<d;c++)S[c]=c;this.points=C,this.offsetBuffer.update(y),this.pickBuffer.update(S),x||n.free(y),w||n.free(S),this.pointCount=d,this.pickOffset=0};function g(T,c){var i=0,d=T.length>>>1,x;for(x=0;x<d;x++){var w=T[x*2],C=T[x*2+1];w>=c[0]&&w<=c[2]&&C>=c[1]&&C<=c[3]&&i++}return i}u.unifiedDraw=function(){var T=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(i){var d=i!==void 0,x=d?this.pickShader:this.shader,w=this.plot.gl,C=this.plot.dataBox;if(this.pointCount===0)return i;var y=C[2]-C[0],S=C[3]-C[1],M=g(this.points,C),a=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(M,.33333)));T[0]=2/y,T[4]=2/S,T[6]=-2*C[0]/y-1,T[7]=-2*C[1]/S-1,this.offsetBuffer.bind(),x.bind(),x.attributes.position.pointer(),x.uniforms.matrix=T,x.uniforms.color=this.color,x.uniforms.borderColor=this.borderColor,x.uniforms.pointCloud=a<5,x.uniforms.pointSize=a,x.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),d&&(c[0]=i&255,c[1]=i>>8&255,c[2]=i>>16&255,c[3]=i>>24&255,this.pickBuffer.bind(),x.attributes.pickId.pointer(w.UNSIGNED_BYTE),x.uniforms.pickOffset=c,this.pickOffset=i);var E=w.getParameter(w.BLEND),m=w.getParameter(w.DITHER);return E&&!this.blend&&w.disable(w.BLEND),m&&w.disable(w.DITHER),w.drawArrays(w.POINTS,0,this.pointCount),E&&!this.blend&&w.enable(w.BLEND),m&&w.enable(w.DITHER),i+this.pointCount}}(),u.draw=u.unifiedDraw,u.drawPick=u.unifiedDraw,u.pick=function(T,c,i){var d=this.pickOffset,x=this.pointCount;if(i<d||i>=d+x)return null;var w=i-d,C=this.points;return{object:this,pointId:w,dataCoord:[C[2*w],C[2*w+1]]}};function h(T,c){var i=T.gl,d=s(i),x=s(i),w=e(i,l.pointVertex,l.pointFragment),C=e(i,l.pickVertex,l.pickFragment),y=new f(T,d,x,w,C);return y.update(c),T.addObject(y),y}},783:function(v){v.exports=p;function p(r,e,s,n){var l=e[0],f=e[1],u=e[2],g=e[3],h=s[0],T=s[1],c=s[2],i=s[3],d,x,w,C,y;return x=l*h+f*T+u*c+g*i,x<0&&(x=-x,h=-h,T=-T,c=-c,i=-i),1-x>1e-6?(d=Math.acos(x),w=Math.sin(d),C=Math.sin((1-n)*d)/w,y=Math.sin(n*d)/w):(C=1-n,y=n),r[0]=C*l+y*h,r[1]=C*f+y*T,r[2]=C*u+y*c,r[3]=C*g+y*i,r}},5964:function(v){v.exports=function(p){return!p&&p!==0?"":p.toString()}},9366:function(v,p,r){var e=r(4359);v.exports=n;var s={};function n(l,f,u){var g=[f.style,f.weight,f.variant,f.family].join("_"),h=s[g];if(h||(h=s[g]={}),l in h)return h[l];var T={textAlign:"center",textBaseline:"middle",lineHeight:1,font:f.family,fontStyle:f.style,fontWeight:f.weight,fontVariant:f.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};T.triangles=!0;var c=e(l,T);T.triangles=!1;var i=e(l,T),d,x;if(u&&u!==1){for(d=0;d<c.positions.length;++d)for(x=0;x<c.positions[d].length;++x)c.positions[d][x]/=u;for(d=0;d<i.positions.length;++d)for(x=0;x<i.positions[d].length;++x)i.positions[d][x]/=u}var w=[[1/0,1/0],[-1/0,-1/0]],C=i.positions.length;for(d=0;d<C;++d){var y=i.positions[d];for(x=0;x<2;++x)w[0][x]=Math.min(w[0][x],y[x]),w[1][x]=Math.max(w[1][x],y[x])}return h[l]=[c,i,w]}},1283:function(v,p,r){var e=r(9405),s=r(3236),n=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),l=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),f=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),u=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),g=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),h=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],T={vertex:n,fragment:u,attributes:h},c={vertex:l,fragment:u,attributes:h},i={vertex:f,fragment:u,attributes:h},d={vertex:n,fragment:g,attributes:h},x={vertex:l,fragment:g,attributes:h},w={vertex:f,fragment:g,attributes:h};function C(y,S){var M=e(y,S),a=M.attributes;return a.position.location=0,a.color.location=1,a.glyph.location=2,a.id.location=3,M}p.createPerspective=function(y){return C(y,T)},p.createOrtho=function(y){return C(y,c)},p.createProject=function(y){return C(y,i)},p.createPickPerspective=function(y){return C(y,d)},p.createPickOrtho=function(y){return C(y,x)},p.createPickProject=function(y){return C(y,w)}},8418:function(v,p,r){var e=r(5219),s=r(2762),n=r(8116),l=r(1888),f=r(6760),u=r(1283),g=r(9366),h=r(5964),T=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=ArrayBuffer,i=DataView;function d(J){return c.isView(J)&&!(J instanceof i)}function x(J){return Array.isArray(J)||d(J)}v.exports=W;function w(J,it){var K=J[0],H=J[1],at=J[2],tt=J[3];return J[0]=it[0]*K+it[4]*H+it[8]*at+it[12]*tt,J[1]=it[1]*K+it[5]*H+it[9]*at+it[13]*tt,J[2]=it[2]*K+it[6]*H+it[10]*at+it[14]*tt,J[3]=it[3]*K+it[7]*H+it[11]*at+it[15]*tt,J}function C(J,it,K,H){return w(H,H),w(H,H),w(H,H)}function y(J,it){this.index=J,this.dataCoordinate=this.position=it}function S(J){return J===!0||J>1?1:J}function M(J,it,K,H,at,tt,lt,dt,mt,gt,Mt,Lt){this.gl=J,this.pixelRatio=1,this.shader=it,this.orthoShader=K,this.projectShader=H,this.pointBuffer=at,this.colorBuffer=tt,this.glyphBuffer=lt,this.idBuffer=dt,this.vao=mt,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[.6666666666666666,.6666666666666666,.6666666666666666],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=gt,this.pickOrthoShader=Mt,this.pickProjectShader=Lt,this.points=[],this._selectResult=new y(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var a=M.prototype;a.pickSlots=1,a.setPickBase=function(J){this.pickId=J},a.isTransparent=function(){if(this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&this.projectHasAlpha)return!0;return!1},a.isOpaque=function(){if(!this.hasAlpha)return!0;for(var J=0;J<3;++J)if(this.axesProject[J]&&!this.projectHasAlpha)return!0;return!1};var E=[0,0],m=[0,0,0],k=[0,0,0],I=[0,0,0,1],O=[0,0,0,1],z=T.slice(),B=[0,0,0],F=[[0,0,0],[0,0,0]];function _(J){return J[0]=J[1]=J[2]=0,J}function N(J,it){return J[0]=it[0],J[1]=it[1],J[2]=it[2],J[3]=1,J}function G(J,it,K,H){return J[0]=it[0],J[1]=it[1],J[2]=it[2],J[K]=H,J}function X(J){for(var it=F,K=0;K<2;++K)for(var H=0;H<3;++H)it[K][H]=Math.max(Math.min(J[K][H],1e8),-1e8);return it}function $(J,it,K,H){var at=it.axesProject,tt=it.gl,lt=J.uniforms,dt=K.model||T,mt=K.view||T,gt=K.projection||T,Mt=it.axesBounds,Lt=X(it.clipBounds),zt;it.axes&&it.axes.lastCubeProps?zt=it.axes.lastCubeProps.axis:zt=[1,1,1],E[0]=2/tt.drawingBufferWidth,E[1]=2/tt.drawingBufferHeight,J.bind(),lt.view=mt,lt.projection=gt,lt.screenSize=E,lt.highlightId=it.highlightId,lt.highlightScale=it.highlightScale,lt.clipBounds=Lt,lt.pickGroup=it.pickId/255,lt.pixelRatio=H;for(var xt=0;xt<3;++xt)if(at[xt]){lt.scale=it.projectScale[xt],lt.opacity=it.projectOpacity[xt];for(var Ct=z,wt=0;wt<16;++wt)Ct[wt]=0;for(var wt=0;wt<4;++wt)Ct[5*wt]=1;Ct[5*xt]=0,zt[xt]<0?Ct[12+xt]=Mt[0][xt]:Ct[12+xt]=Mt[1][xt],f(Ct,dt,Ct),lt.model=Ct;var Rt=(xt+1)%3,Tt=(xt+2)%3,Bt=_(m),Gt=_(k);Bt[Rt]=1,Gt[Tt]=1;var te=C(gt,mt,dt,N(I,Bt)),Wt=C(gt,mt,dt,N(O,Gt));if(Math.abs(te[1])>Math.abs(Wt[1])){var jt=te;te=Wt,Wt=jt,jt=Bt,Bt=Gt,Gt=jt;var ie=Rt;Rt=Tt,Tt=ie}te[0]<0&&(Bt[Rt]=-1),Wt[1]>0&&(Gt[Tt]=-1);for(var ue=0,fe=0,wt=0;wt<4;++wt)ue+=Math.pow(dt[4*Rt+wt],2),fe+=Math.pow(dt[4*Tt+wt],2);Bt[Rt]/=Math.sqrt(ue),Gt[Tt]/=Math.sqrt(fe),lt.axes[0]=Bt,lt.axes[1]=Gt,lt.fragClipBounds[0]=G(B,Lt[0],xt,-1e8),lt.fragClipBounds[1]=G(B,Lt[1],xt,1e8),it.vao.bind(),it.vao.draw(tt.TRIANGLES,it.vertexCount),it.lineWidth>0&&(tt.lineWidth(it.lineWidth*H),it.vao.draw(tt.LINES,it.lineVertexCount,it.vertexCount)),it.vao.unbind()}}var et=[-1e8,-1e8,-1e8],ot=[1e8,1e8,1e8],nt=[et,ot];function Z(J,it,K,H,at,tt,lt){var dt=K.gl;if((tt===K.projectHasAlpha||lt)&&$(it,K,H,at),tt===K.hasAlpha||lt){J.bind();var mt=J.uniforms;mt.model=H.model||T,mt.view=H.view||T,mt.projection=H.projection||T,E[0]=2/dt.drawingBufferWidth,E[1]=2/dt.drawingBufferHeight,mt.screenSize=E,mt.highlightId=K.highlightId,mt.highlightScale=K.highlightScale,mt.fragClipBounds=nt,mt.clipBounds=K.axes.bounds,mt.opacity=K.opacity,mt.pickGroup=K.pickId/255,mt.pixelRatio=at,K.vao.bind(),K.vao.draw(dt.TRIANGLES,K.vertexCount),K.lineWidth>0&&(dt.lineWidth(K.lineWidth*at),K.vao.draw(dt.LINES,K.lineVertexCount,K.vertexCount)),K.vao.unbind()}}a.draw=function(J){var it=this.useOrtho?this.orthoShader:this.shader;Z(it,this.projectShader,this,J,this.pixelRatio,!1,!1)},a.drawTransparent=function(J){var it=this.useOrtho?this.orthoShader:this.shader;Z(it,this.projectShader,this,J,this.pixelRatio,!0,!1)},a.drawPick=function(J){var it=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;Z(it,this.pickProjectShader,this,J,1,!0,!0)},a.pick=function(J){if(!J||J.id!==this.pickId)return null;var it=J.value[2]+(J.value[1]<<8)+(J.value[0]<<16);if(it>=this.pointCount||it<0)return null;var K=this.points[it],H=this._selectResult;H.index=it;for(var at=0;at<3;++at)H.position[at]=H.dataCoordinate[at]=K[at];return H},a.highlight=function(J){if(!J)this.highlightId=[1,1,1,1];else{var it=J.index,K=it&255,H=it>>8&255,at=it>>16&255;this.highlightId=[K/255,H/255,at/255,0]}};function Q(J,it,K,H){var at;x(J)?it<J.length?at=J[it]:at=void 0:at=J,at=h(at);var tt=!0;e(at)&&(at="▼",tt=!1),K||(K={});var lt=K.family;x(lt)&&(lt=lt[it]),lt||(lt="normal");var dt=K.weight;x(dt)&&(dt=dt[it]),dt||(dt="normal");var mt=K.style;x(mt)&&(mt=mt[it]),mt||(mt="normal");var gt=K.variant;x(gt)&&(gt=gt[it]),gt||(gt="normal");var Mt=g(at,{family:lt,weight:dt,style:mt,variant:gt},H),Mt=g(at,K,H);return{mesh:Mt[0],lines:Mt[1],bounds:Mt[2],visible:tt}}a.update=function(J){if(J=J||{},"perspective"in J&&(this.useOrtho=!J.perspective),"orthographic"in J&&(this.useOrtho=!!J.orthographic),"lineWidth"in J&&(this.lineWidth=J.lineWidth),"project"in J)if(x(J.project))this.axesProject=J.project;else{var it=!!J.project;this.axesProject=[it,it,it]}if("projectScale"in J)if(x(J.projectScale))this.projectScale=J.projectScale.slice();else{var K=+J.projectScale;this.projectScale=[K,K,K]}if(this.projectHasAlpha=!1,"projectOpacity"in J){if(x(J.projectOpacity))this.projectOpacity=J.projectOpacity.slice();else{var K=+J.projectOpacity;this.projectOpacity=[K,K,K]}for(var H=0;H<3;++H)this.projectOpacity[H]=S(this.projectOpacity[H]),this.projectOpacity[H]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in J&&(this.opacity=S(J.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var at=J.position,tt={family:J.font||"normal",style:J.fontStyle||"normal",weight:J.fontWeight||"normal",variant:J.fontVariant||"normal"},lt=J.alignment||[0,0],dt,mt;if(lt.length===2)dt=lt[0],mt=lt[1];else{dt=[],mt=[];for(var H=0;H<lt.length;++H)dt[H]=lt[H][0],mt[H]=lt[H][1]}var gt=[1/0,1/0,1/0],Mt=[-1/0,-1/0,-1/0],Lt=J.glyph,zt=J.color,xt=J.size,Ct=J.angle,wt=J.lineColor,Rt=-1,Tt=0,Bt=0,Gt=0;if(at.length){Gt=at.length;t:for(var H=0;H<Gt;++H){for(var te=at[H],Wt=0;Wt<3;++Wt)if(isNaN(te[Wt])||!isFinite(te[Wt]))continue t;var jt=Q(Lt,H,tt,this.pixelRatio),ie=jt.mesh,ue=jt.lines,fe=jt.bounds;Tt+=ie.cells.length*3,Bt+=ue.edges.length*2}}var pe=Tt+Bt,Te=l.mallocFloat(3*pe),Qt=l.mallocFloat(4*pe),Pt=l.mallocFloat(2*pe),Ot=l.mallocUint32(pe);if(pe>0){var Nt=0,Ht=Tt,St=[0,0,0,1],kt=[0,0,0,1],Ft=x(zt)&&x(zt[0]),At=x(wt)&&x(wt[0]);t:for(var H=0;H<Gt;++H){Rt+=1;for(var te=at[H],Wt=0;Wt<3;++Wt){if(isNaN(te[Wt])||!isFinite(te[Wt]))continue t;Mt[Wt]=Math.max(Mt[Wt],te[Wt]),gt[Wt]=Math.min(gt[Wt],te[Wt])}var jt=Q(Lt,H,tt,this.pixelRatio),ie=jt.mesh,ue=jt.lines,fe=jt.bounds,ft=jt.visible;if(!ft)St=[1,1,1,0];else if(x(zt)){var pt;if(Ft?H<zt.length?pt=zt[H]:pt=[0,0,0,0]:pt=zt,pt.length===3){for(var Wt=0;Wt<3;++Wt)St[Wt]=pt[Wt];St[3]=1}else if(pt.length===4){for(var Wt=0;Wt<4;++Wt)St[Wt]=pt[Wt];!this.hasAlpha&&pt[3]<1&&(this.hasAlpha=!0)}}else St[0]=St[1]=St[2]=0,St[3]=1;if(!ft)kt=[1,1,1,0];else if(x(wt)){var pt;if(At?H<wt.length?pt=wt[H]:pt=[0,0,0,0]:pt=wt,pt.length===3){for(var Wt=0;Wt<3;++Wt)kt[Wt]=pt[Wt];kt[Wt]=1}else if(pt.length===4){for(var Wt=0;Wt<4;++Wt)kt[Wt]=pt[Wt];!this.hasAlpha&&pt[3]<1&&(this.hasAlpha=!0)}}else kt[0]=kt[1]=kt[2]=0,kt[3]=1;var Dt=.5;ft?x(xt)?H<xt.length?Dt=+xt[H]:Dt=12:xt?Dt=+xt:this.useOrtho&&(Dt=12):Dt=0;var Ut=0;x(Ct)?H<Ct.length?Ut=+Ct[H]:Ut=0:Ct&&(Ut=+Ct);for(var $t=Math.cos(Ut),re=Math.sin(Ut),te=at[H],Wt=0;Wt<3;++Wt)Mt[Wt]=Math.max(Mt[Wt],te[Wt]),gt[Wt]=Math.min(gt[Wt],te[Wt]);var Be=dt,We=mt,Be=0;x(dt)?H<dt.length?Be=dt[H]:Be=0:dt&&(Be=dt);var We=0;x(mt)?H<mt.length?We=mt[H]:We=0:mt&&(We=mt),Be*=Be>0?1-fe[0][0]:Be<0?1+fe[1][0]:1,We*=We>0?1-fe[0][1]:We<0?1+fe[1][1]:1;for(var me=[Be,We],Ye=ie.cells||[],Qe=ie.positions||[],Wt=0;Wt<Ye.length;++Wt)for(var Se=Ye[Wt],je=0;je<3;++je){for(var vr=0;vr<3;++vr)Te[3*Nt+vr]=te[vr];for(var vr=0;vr<4;++vr)Qt[4*Nt+vr]=St[vr];Ot[Nt]=Rt;var he=Qe[Se[je]];Pt[2*Nt]=Dt*($t*he[0]-re*he[1]+me[0]),Pt[2*Nt+1]=Dt*(re*he[0]+$t*he[1]+me[1]),Nt+=1}for(var Ye=ue.edges,Qe=ue.positions,Wt=0;Wt<Ye.length;++Wt)for(var Se=Ye[Wt],je=0;je<2;++je){for(var vr=0;vr<3;++vr)Te[3*Ht+vr]=te[vr];for(var vr=0;vr<4;++vr)Qt[4*Ht+vr]=kt[vr];Ot[Ht]=Rt;var he=Qe[Se[je]];Pt[2*Ht]=Dt*($t*he[0]-re*he[1]+me[0]),Pt[2*Ht+1]=Dt*(re*he[0]+$t*he[1]+me[1]),Ht+=1}}}this.bounds=[gt,Mt],this.points=at,this.pointCount=at.length,this.vertexCount=Tt,this.lineVertexCount=Bt,this.pointBuffer.update(Te),this.colorBuffer.update(Qt),this.glyphBuffer.update(Pt),this.idBuffer.update(Ot),l.free(Te),l.free(Qt),l.free(Pt),l.free(Ot)},a.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function W(J){var it=J.gl,K=u.createPerspective(it),H=u.createOrtho(it),at=u.createProject(it),tt=u.createPickPerspective(it),lt=u.createPickOrtho(it),dt=u.createPickProject(it),mt=s(it),gt=s(it),Mt=s(it),Lt=s(it),zt=n(it,[{buffer:mt,size:3,type:it.FLOAT},{buffer:gt,size:4,type:it.FLOAT},{buffer:Mt,size:2,type:it.FLOAT},{buffer:Lt,size:4,type:it.UNSIGNED_BYTE,normalized:!0}]),xt=new M(it,K,H,at,mt,gt,Mt,Lt,zt,tt,lt,dt);return xt.update(J),xt}},4298:function(v,p,r){var e=r(3236);p.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),p.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},3161:function(v,p,r){var e=r(9405),s=r(2762),n=r(4298);v.exports=u;function l(g,h,T){this.plot=g,this.boxBuffer=h,this.boxShader=T,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var f=l.prototype;f.draw=function(){if(this.enabled){var g=this.plot,h=this.selectBox,T=this.borderWidth;this.innerFill;var c=this.innerColor;this.outerFill;var i=this.outerColor,d=this.borderColor,x=g.box,w=g.screenBox,C=g.dataBox,y=g.viewBox,S=g.pixelRatio,M=(h[0]-C[0])*(y[2]-y[0])/(C[2]-C[0])+y[0],a=(h[1]-C[1])*(y[3]-y[1])/(C[3]-C[1])+y[1],E=(h[2]-C[0])*(y[2]-y[0])/(C[2]-C[0])+y[0],m=(h[3]-C[1])*(y[3]-y[1])/(C[3]-C[1])+y[1];if(M=Math.max(M,y[0]),a=Math.max(a,y[1]),E=Math.min(E,y[2]),m=Math.min(m,y[3]),!(E<M||m<a)){x.bind();var k=w[2]-w[0],I=w[3]-w[1];if(this.outerFill&&(x.drawBox(0,0,k,a,i),x.drawBox(0,a,M,m,i),x.drawBox(0,m,k,I,i),x.drawBox(E,a,k,m,i)),this.innerFill&&x.drawBox(M,a,E,m,c),T>0){var O=T*S;x.drawBox(M-O,a-O,E+O,a+O,d),x.drawBox(M-O,m-O,E+O,m+O,d),x.drawBox(M-O,a-O,M+O,m+O,d),x.drawBox(E-O,a-O,E+O,m+O,d)}}}},f.update=function(g){g=g||{},this.innerFill=!!g.innerFill,this.outerFill=!!g.outerFill,this.innerColor=(g.innerColor||[0,0,0,.5]).slice(),this.outerColor=(g.outerColor||[0,0,0,.5]).slice(),this.borderColor=(g.borderColor||[0,0,0,1]).slice(),this.borderWidth=g.borderWidth||0,this.selectBox=(g.selectBox||this.selectBox).slice()},f.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function u(g,h){var T=g.gl,c=s(T,[0,0,0,1,1,0,1,1]),i=e(T,n.boxVertex,n.boxFragment),d=new l(g,c,i);return d.update(h),g.addOverlay(d),d}},3589:function(v,p,r){v.exports=T;var e=r(2260),s=r(1888),n=r(9618),l=r(8828).nextPow2,f=function(c,i,d){for(var x=1e8,w=-1,C=-1,y=c.shape[0],S=c.shape[1],M=0;M<y;M++)for(var a=0;a<S;a++){var E=c.get(M,a,0),m=c.get(M,a,1),k=c.get(M,a,2),I=c.get(M,a,3);if(E<255||m<255||k<255||I<255){var O=i-M,z=d-a,B=O*O+z*z;B<x&&(x=B,w=M,C=a)}}return[w,C,x]};function u(c,i,d,x,w){this.coord=[c,i],this.id=d,this.value=x,this.distance=w}function g(c,i,d){this.gl=c,this.fbo=i,this.buffer=d,this._readTimeout=null;var x=this;this._readCallback=function(){x.gl&&(i.bind(),c.readPixels(0,0,i.shape[0],i.shape[1],c.RGBA,c.UNSIGNED_BYTE,x.buffer),x._readTimeout=null)}}var h=g.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(c){if(this.gl){this.fbo.shape=c;var i=this.fbo.shape[0],d=this.fbo.shape[1];if(d*i*4>this.buffer.length){s.free(this.buffer);for(var x=this.buffer=s.mallocUint8(l(d*i*4)),w=0;w<d*i*4;++w)x[w]=255}return c}}}),h.begin=function(){var c=this.gl;this.shape,c&&(this.fbo.bind(),c.clearColor(1,1,1,1),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT))},h.end=function(){var c=this.gl;c&&(c.bindFramebuffer(c.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(c,i,d){if(!this.gl)return null;var x=this.fbo.shape.slice();c=c|0,i=i|0,typeof d!="number"&&(d=1);var w=Math.min(Math.max(c-d,0),x[0])|0,C=Math.min(Math.max(c+d,0),x[0])|0,y=Math.min(Math.max(i-d,0),x[1])|0,S=Math.min(Math.max(i+d,0),x[1])|0;if(C<=w||S<=y)return null;var M=[C-w,S-y],a=n(this.buffer,[M[0],M[1],4],[4,x[0]*4,1],4*(w+x[0]*y)),E=f(a.hi(M[0],M[1],1),d,d),m=E[0],k=E[1];if(m<0||Math.pow(this.radius,2)<E[2])return null;var I=a.get(m,k,0),O=a.get(m,k,1),z=a.get(m,k,2),B=a.get(m,k,3);return new u(m+w|0,k+y|0,I,[O,z,B],Math.sqrt(E[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),s.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function T(c,i){var d=i[0],x=i[1],w={},C=e(c,d,x,w),y=s.mallocUint8(d*x*4);return new g(c,C,y)}},9405:function(v,p,r){var e=r(3327),s=r(8731),n=r(216),l=r(5091),f=r(2145),u=r(8866);function g(i){this.gl=i,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var h=g.prototype;h.bind=function(){this.program||this._relink();var i,d=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),x=this.gl.lastAttribCount;if(d>x)for(i=x;i<d;i++)this.gl.enableVertexAttribArray(i);else if(x>d)for(i=d;i<x;i++)this.gl.disableVertexAttribArray(i);this.gl.lastAttribCount=d,this.gl.useProgram(this.program)},h.dispose=function(){for(var i=this.gl.lastAttribCount,d=0;d<i;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function T(i,d){return i.name<d.name?-1:1}h.update=function(i,d,x,w){if(!d||arguments.length===1){var C=i;i=C.vertex,d=C.fragment,x=C.uniforms,w=C.attributes}var y=this,S=y.gl,M=y._vref;y._vref=l.shader(S,S.VERTEX_SHADER,i),M&&M.dispose(),y.vertShader=y._vref.shader;var a=this._fref;if(y._fref=l.shader(S,S.FRAGMENT_SHADER,d),a&&a.dispose(),y.fragShader=y._fref.shader,!x||!w){var E=S.createProgram();if(S.attachShader(E,y.fragShader),S.attachShader(E,y.vertShader),S.linkProgram(E),!S.getProgramParameter(E,S.LINK_STATUS)){var m=S.getProgramInfoLog(E);throw new u(m,"Error linking program:"+m)}x=x||f.uniforms(S,E),w=w||f.attributes(S,E),S.deleteProgram(E)}w=w.slice(),w.sort(T);var k=[],I=[],O=[],z;for(z=0;z<w.length;++z){var B=w[z];if(B.type.indexOf("mat")>=0){for(var F=B.type.charAt(B.type.length-1)|0,_=new Array(F),N=0;N<F;++N)_[N]=O.length,I.push(B.name+"["+N+"]"),typeof B.location=="number"?O.push(B.location+N):Array.isArray(B.location)&&B.location.length===F&&typeof B.location[N]=="number"?O.push(B.location[N]|0):O.push(-1);k.push({name:B.name,type:B.type,locations:_})}else k.push({name:B.name,type:B.type,locations:[O.length]}),I.push(B.name),typeof B.location=="number"?O.push(B.location|0):O.push(-1)}var G=0;for(z=0;z<O.length;++z)if(O[z]<0){for(;O.indexOf(G)>=0;)G+=1;O[z]=G}var X=new Array(x.length);function $(){y.program=l.program(S,y._vref,y._fref,I,O);for(var et=0;et<x.length;++et)X[et]=S.getUniformLocation(y.program,x[et].name)}$(),y._relink=$,y.types={uniforms:n(x),attributes:n(w)},y.attributes=s(S,y,k,O),Object.defineProperty(y,"uniforms",e(S,y,x,X))};function c(i,d,x,w,C){var y=new g(i);return y.update(d,x,w,C),y}v.exports=c},8866:function(v){function p(r,e,s){this.shortMessage=e||"",this.longMessage=s||"",this.rawError=r||"",this.message="gl-shader: "+(e||r||"")+(s?`
`+s:""),this.stack=new Error().stack}p.prototype=new Error,p.prototype.name="GLError",p.prototype.constructor=p,v.exports=p},8731:function(v,p,r){v.exports=g;var e=r(8866);function s(h,T,c,i,d,x){this._gl=h,this._wrapper=T,this._index=c,this._locations=i,this._dimension=d,this._constFunc=x}var n=s.prototype;n.pointer=function(T,c,i,d){var x=this,w=x._gl,C=x._locations[x._index];w.vertexAttribPointer(C,x._dimension,T||w.FLOAT,!!c,i||0,d||0),w.enableVertexAttribArray(C)},n.set=function(h,T,c,i){return this._constFunc(this._locations[this._index],h,T,c,i)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=h|0,this._wrapper.program=null),h|0}});var l=[function(h,T,c){return c.length===void 0?h.vertexAttrib1f(T,c):h.vertexAttrib1fv(T,c)},function(h,T,c,i){return c.length===void 0?h.vertexAttrib2f(T,c,i):h.vertexAttrib2fv(T,c)},function(h,T,c,i,d){return c.length===void 0?h.vertexAttrib3f(T,c,i,d):h.vertexAttrib3fv(T,c)},function(h,T,c,i,d,x){return c.length===void 0?h.vertexAttrib4f(T,c,i,d,x):h.vertexAttrib4fv(T,c)}];function f(h,T,c,i,d,x,w){var C=l[d],y=new s(h,T,c,i,d,C);Object.defineProperty(x,w,{set:function(S){return h.disableVertexAttribArray(i[c]),C(h,i[c],S),S},get:function(){return y},enumerable:!0})}function u(h,T,c,i,d,x,w){for(var C=new Array(d),y=new Array(d),S=0;S<d;++S)f(h,T,c[S],i,d,C,S),y[S]=C[S];Object.defineProperty(C,"location",{set:function(E){if(Array.isArray(E))for(var m=0;m<d;++m)y[m].location=E[m];else for(var m=0;m<d;++m)y[m].location=E+m;return E},get:function(){for(var E=new Array(d),m=0;m<d;++m)E[m]=i[c[m]];return E},enumerable:!0}),C.pointer=function(E,m,k,I){E=E||h.FLOAT,m=!!m,k=k||d*d,I=I||0;for(var O=0;O<d;++O){var z=i[c[O]];h.vertexAttribPointer(z,d,E,m,k,I+O*d),h.enableVertexAttribArray(z)}};var M=new Array(d),a=h["vertexAttrib"+d+"fv"];Object.defineProperty(x,w,{set:function(E){for(var m=0;m<d;++m){var k=i[c[m]];if(h.disableVertexAttribArray(k),Array.isArray(E[0]))a.call(h,k,E[m]);else{for(var I=0;I<d;++I)M[I]=E[d*m+I];a.call(h,k,M)}}return E},get:function(){return C},enumerable:!0})}function g(h,T,c,i){for(var d={},x=0,w=c.length;x<w;++x){var C=c[x],y=C.name,S=C.type,M=C.locations;switch(S){case"bool":case"int":case"float":f(h,T,M[0],i,1,d,y);break;default:if(S.indexOf("vec")>=0){var a=S.charCodeAt(S.length-1)-48;if(a<2||a>4)throw new e("","Invalid data type for attribute "+y+": "+S);f(h,T,M[0],i,a,d,y)}else if(S.indexOf("mat")>=0){var a=S.charCodeAt(S.length-1)-48;if(a<2||a>4)throw new e("","Invalid data type for attribute "+y+": "+S);u(h,T,M,i,a,d,y)}else throw new e("","Unknown data type for attribute "+y+": "+S);break}}return d}},3327:function(v,p,r){var e=r(216),s=r(8866);v.exports=f;function n(u){return function(){return u}}function l(u,g){for(var h=new Array(u),T=0;T<u;++T)h[T]=g;return h}function f(u,g,h,T){function c(S){return function(M,a,E){return M.getUniform(a.program,E[S])}}function i(S){return function(a){for(var E=d("",S),m=0;m<E.length;++m){var k=E[m],I=k[0],O=k[1];if(T[O]){var z=a;if(typeof I=="string"&&(I.indexOf(".")===0||I.indexOf("[")===0)){var B=I;if(I.indexOf(".")===0&&(B=I.slice(1)),B.indexOf("]")===B.length-1){var F=B.indexOf("["),_=B.slice(0,F),N=B.slice(F+1,B.length-1);z=_?a[_][N]:a[N]}else z=a[B]}var G=h[O].type,X;switch(G){case"bool":case"int":case"sampler2D":case"samplerCube":u.uniform1i(T[O],z);break;case"float":u.uniform1f(T[O],z);break;default:var $=G.indexOf("vec");if(0<=$&&$<=1&&G.length===4+$){if(X=G.charCodeAt(G.length-1)-48,X<2||X>4)throw new s("","Invalid data type");switch(G.charAt(0)){case"b":case"i":u["uniform"+X+"iv"](T[O],z);break;case"v":u["uniform"+X+"fv"](T[O],z);break;default:throw new s("","Unrecognized data type for vector "+name+": "+G)}}else if(G.indexOf("mat")===0&&G.length===4){if(X=G.charCodeAt(G.length-1)-48,X<2||X>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+G);u["uniformMatrix"+X+"fv"](T[O],!1,z);break}else throw new s("","Unknown uniform data type for "+name+": "+G)}}}}}function d(S,M){if(typeof M!="object")return[[S,M]];var a=[];for(var E in M){var m=M[E],k=S;parseInt(E)+""===E?k+="["+E+"]":k+="."+E,typeof m=="object"?a.push.apply(a,d(k,m)):a.push([k,m])}return a}function x(S){switch(S){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var M=S.indexOf("vec");if(0<=M&&M<=1&&S.length===4+M){var a=S.charCodeAt(S.length-1)-48;if(a<2||a>4)throw new s("","Invalid data type");return S.charAt(0)==="b"?l(a,!1):l(a,0)}else if(S.indexOf("mat")===0&&S.length===4){var a=S.charCodeAt(S.length-1)-48;if(a<2||a>4)throw new s("","Invalid uniform dimension type for matrix "+name+": "+S);return l(a*a,0)}else throw new s("","Unknown uniform data type for "+name+": "+S)}}function w(S,M,a){if(typeof a=="object"){var E=C(a);Object.defineProperty(S,M,{get:n(E),set:i(a),enumerable:!0,configurable:!1})}else T[a]?Object.defineProperty(S,M,{get:c(a),set:i(a),enumerable:!0,configurable:!1}):S[M]=x(h[a].type)}function C(S){var M;if(Array.isArray(S)){M=new Array(S.length);for(var a=0;a<S.length;++a)w(M,a,S[a])}else{M={};for(var E in S)w(M,E,S[E])}return M}var y=e(h,!0);return{get:n(C(y)),set:i(y),enumerable:!0,configurable:!0}}},216:function(v){v.exports=p;function p(r,e){for(var s={},n=0;n<r.length;++n)for(var l=r[n].name,f=l.split("."),u=s,g=0;g<f.length;++g){var h=f[g].split("[");if(h.length>1){h[0]in u||(u[h[0]]=[]),u=u[h[0]];for(var T=1;T<h.length;++T){var c=parseInt(h[T]);T<h.length-1||g<f.length-1?(c in u||(T<h.length-1?u[c]=[]:u[c]={}),u=u[c]):e?u[c]=n:u[c]=r[n].type}}else g<f.length-1?(h[0]in u||(u[h[0]]={}),u=u[h[0]]):e?u[h[0]]=n:u[h[0]]=r[n].type}return s}},2145:function(v,p){p.uniforms=n,p.attributes=l;var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},e=null;function s(f,u){if(!e){var g=Object.keys(r);e={};for(var h=0;h<g.length;++h){var T=g[h];e[f[T]]=r[T]}}return e[u]}function n(f,u){for(var g=f.getProgramParameter(u,f.ACTIVE_UNIFORMS),h=[],T=0;T<g;++T){var c=f.getActiveUniform(u,T);if(c){var i=s(f,c.type);if(c.size>1)for(var d=0;d<c.size;++d)h.push({name:c.name.replace("[0]","["+d+"]"),type:i});else h.push({name:c.name,type:i})}}return h}function l(f,u){for(var g=f.getProgramParameter(u,f.ACTIVE_ATTRIBUTES),h=[],T=0;T<g;++T){var c=f.getActiveAttrib(u,T);c&&h.push({name:c.name,type:s(f,c.type)})}return h}},5091:function(v,p,r){p.shader=d,p.program=x;var e=r(8866),s=r(2992),n=typeof WeakMap>"u"?r(606):WeakMap,l=new n,f=0;function u(w,C,y,S,M,a,E){this.id=w,this.src=C,this.type=y,this.shader=S,this.count=a,this.programs=[],this.cache=E}u.prototype.dispose=function(){if(--this.count===0){for(var w=this.cache,C=w.gl,y=this.programs,S=0,M=y.length;S<M;++S){var a=w.programs[y[S]];a&&(delete w.programs[S],C.deleteProgram(a))}C.deleteShader(this.shader),delete w.shaders[this.type===C.FRAGMENT_SHADER|0][this.src]}};function g(w){this.gl=w,this.shaders=[{},{}],this.programs={}}var h=g.prototype;function T(w,C,y){var S=w.createShader(C);if(w.shaderSource(S,y),w.compileShader(S),!w.getShaderParameter(S,w.COMPILE_STATUS)){var M=w.getShaderInfoLog(S);try{var a=s(M,y,C)}catch(E){throw console.warn("Failed to format compiler error: "+E),new e(M,`Error compiling shader:
`+M)}throw new e(M,a.short,a.long)}return S}h.getShaderReference=function(w,C){var y=this.gl,S=this.shaders[w===y.FRAGMENT_SHADER|0],M=S[C];if(!M||!y.isShader(M.shader)){var a=T(y,w,C);M=S[C]=new u(f++,C,w,a,[],1,this)}else M.count+=1;return M};function c(w,C,y,S,M){var a=w.createProgram();w.attachShader(a,C),w.attachShader(a,y);for(var E=0;E<S.length;++E)w.bindAttribLocation(a,M[E],S[E]);if(w.linkProgram(a),!w.getProgramParameter(a,w.LINK_STATUS)){var m=w.getProgramInfoLog(a);throw new e(m,"Error linking program: "+m)}return a}h.getProgram=function(w,C,y,S){var M=[w.id,C.id,y.join(":"),S.join(":")].join("@"),a=this.programs[M];return(!a||!this.gl.isProgram(a))&&(this.programs[M]=a=c(this.gl,w.shader,C.shader,y,S),w.programs.push(M),C.programs.push(M)),a};function i(w){var C=l.get(w);return C||(C=new g(w),l.set(w,C)),C}function d(w,C,y){return i(w).getShaderReference(C,y)}function x(w,C,y,S,M){return i(w).getProgram(C,y,S,M)}},4098:function(v){v.exports=e;function p(s){this.plot=s,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var r=p.prototype;r.update=function(s){s=s||{},this.enable=(s.enable||[!0,!0,!1,!1]).slice(),this.width=(s.width||[1,1,1,1]).slice(),this.color=(s.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(s.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var s=this.enable,n=this.width,l=this.color,f=this.center,u=this.plot,g=u.line,h=u.dataBox,T=u.viewBox;if(g.bind(),h[0]<=f[0]&&f[0]<=h[2]&&h[1]<=f[1]&&f[1]<=h[3]){var c=T[0]+(f[0]-h[0])/(h[2]-h[0])*(T[2]-T[0]),i=T[1]+(f[1]-h[1])/(h[3]-h[1])*(T[3]-T[1]);s[0]&&g.drawLine(c,i,T[0],i,n[0],l[0]),s[1]&&g.drawLine(c,i,c,T[1],n[1],l[1]),s[2]&&g.drawLine(c,i,T[2],i,n[2],l[2]),s[3]&&g.drawLine(c,i,c,T[3],n[3],l[3])}},r.dispose=function(){this.plot.removeOverlay(this)};function e(s,n){var l=new p(s);return l.update(n),s.addOverlay(l),l}},1493:function(v,p,r){var e=r(3236),s=r(9405),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));
  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),l=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);v.exports=function(f){return s(f,n,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(v,p,r){var e=r(2762),s=r(8116),n=r(1493);v.exports=c;var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function f(i,d,x,w){this.gl=i,this.buffer=d,this.vao=x,this.shader=w,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=f.prototype,g=[0,0,0],h=[0,0,0],T=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(i){},u.draw=function(i){var d=this.gl,x=this.vao,w=this.shader;x.bind(),w.bind();var C=i.model||l,y=i.view||l,S=i.projection||l,M;this.axes&&(M=this.axes.lastCubeProps.axis);for(var a=g,E=h,m=0;m<3;++m)M&&M[m]<0?(a[m]=this.bounds[0][m],E[m]=this.bounds[1][m]):(a[m]=this.bounds[1][m],E[m]=this.bounds[0][m]);T[0]=d.drawingBufferWidth,T[1]=d.drawingBufferHeight,w.uniforms.model=C,w.uniforms.view=y,w.uniforms.projection=S,w.uniforms.coordinates=[this.position,a,E],w.uniforms.colors=this.colors,w.uniforms.screenShape=T;for(var m=0;m<3;++m)w.uniforms.lineWidth=this.lineWidth[m]*this.pixelRatio,this.enabled[m]&&(x.draw(d.TRIANGLES,6,6*m),this.drawSides[m]&&x.draw(d.TRIANGLES,12,18+12*m));x.unbind()},u.update=function(i){i&&("bounds"in i&&(this.bounds=i.bounds),"position"in i&&(this.position=i.position),"lineWidth"in i&&(this.lineWidth=i.lineWidth),"colors"in i&&(this.colors=i.colors),"enabled"in i&&(this.enabled=i.enabled),"drawSides"in i&&(this.drawSides=i.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function c(i,d){var x=[];function w(a,E,m,k,I,O){var z=[a,E,m,0,0,0,1];z[k+3]=1,z[k]=I,x.push.apply(x,z),z[6]=-1,x.push.apply(x,z),z[k]=O,x.push.apply(x,z),x.push.apply(x,z),z[6]=1,x.push.apply(x,z),z[k]=I,x.push.apply(x,z)}w(0,0,0,0,0,1),w(0,0,0,1,0,1),w(0,0,0,2,0,1),w(1,0,0,1,-1,1),w(1,0,0,2,-1,1),w(0,1,0,0,-1,1),w(0,1,0,2,-1,1),w(0,0,1,0,-1,1),w(0,0,1,1,-1,1);var C=e(i,x),y=s(i,[{type:i.FLOAT,buffer:C,size:3,offset:0,stride:28},{type:i.FLOAT,buffer:C,size:3,offset:12,stride:28},{type:i.FLOAT,buffer:C,size:1,offset:24,stride:28}]),S=n(i);S.attributes.position.location=0,S.attributes.color.location=1,S.attributes.weight.location=2;var M=new f(i,C,y,S);return M.update(d),M}},6740:function(v,p,r){var e=r(3236),s=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),l=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * (view * tubePosition);
  f_id        = id;
  f_position  = position.xyz;
}
`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);p.meshShader={vertex:s,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},p.pickShader={vertex:l,fragment:f,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(v,p,r){var e=r(2931),s=r(9970),n=["xyz","xzy","yxz","yzx","zxy","zyx"],l=function(x,w,C,y){for(var S=x.points,M=x.velocities,a=x.divergences,E=[],m=[],k=[],I=[],O=[],z=[],B=0,F=0,_=s.create(),N=s.create(),G=8,X=0;X<S.length;X++){var $=S[X],et=M[X],ot=a[X];w===0&&(ot=C*.05),F=e.length(et)/y,_=s.create(),e.copy(_,et),_[3]=ot;for(var nt=0;nt<G;nt++)O[nt]=[$[0],$[1],$[2],nt];if(I.length>0)for(var nt=0;nt<G;nt++){var Z=(nt+1)%G;E.push(I[nt],O[nt],O[Z],O[Z],I[Z],I[nt]),k.push(N,_,_,_,N,N),z.push(B,F,F,F,B,B);var Q=E.length;m.push([Q-6,Q-5,Q-4],[Q-3,Q-2,Q-1])}var W=I;I=O,O=W;var J=N;N=_,_=J;var it=B;B=F,F=it}return{positions:E,cells:m,vectors:k,vertexIntensity:z}},f=function(x,w,C,y){for(var S=0,M=0;M<x.length;M++)for(var a=x[M].velocities,E=0;E<a.length;E++)S=Math.max(S,e.length(a[E]));for(var m=x.map(function(X){return l(X,C,y,S)}),k=[],I=[],O=[],z=[],M=0;M<m.length;M++){var B=m[M],F=k.length;k=k.concat(B.positions),O=O.concat(B.vectors),z=z.concat(B.vertexIntensity);for(var E=0;E<B.cells.length;E++){var _=B.cells[E],N=[];I.push(N);for(var G=0;G<_.length;G++)N.push(_[G]+F)}}return{positions:k,cells:I,vectors:O,vertexIntensity:z,colormap:w}},u=function(x,w){var C=x.length,y;for(y=0;y<C;y++){var S=x[y];if(S===w)return y;if(S>w)return y-1}return y},g=function(x,w,C){return x<w?w:x>C?C:x},h=function(x,w,C){var y=w.vectors,S=w.meshgrid,M=x[0],a=x[1],E=x[2],m=S[0].length,k=S[1].length,I=S[2].length,O=u(S[0],M),z=u(S[1],a),B=u(S[2],E),F=O+1,_=z+1,N=B+1;if(O=g(O,0,m-1),F=g(F,0,m-1),z=g(z,0,k-1),_=g(_,0,k-1),B=g(B,0,I-1),N=g(N,0,I-1),O<0||z<0||B<0||F>m-1||_>k-1||N>I-1)return e.create();var G=S[0][O],X=S[0][F],$=S[1][z],et=S[1][_],ot=S[2][B],nt=S[2][N],Z=(M-G)/(X-G),Q=(a-$)/(et-$),W=(E-ot)/(nt-ot);isFinite(Z)||(Z=.5),isFinite(Q)||(Q=.5),isFinite(W)||(W=.5);var J,it,K,H,at,tt;switch(C.reversedX&&(O=m-1-O,F=m-1-F),C.reversedY&&(z=k-1-z,_=k-1-_),C.reversedZ&&(B=I-1-B,N=I-1-N),C.filled){case 5:at=B,tt=N,K=z*I,H=_*I,J=O*I*k,it=F*I*k;break;case 4:at=B,tt=N,J=O*I,it=F*I,K=z*I*m,H=_*I*m;break;case 3:K=z,H=_,at=B*k,tt=N*k,J=O*k*I,it=F*k*I;break;case 2:K=z,H=_,J=O*k,it=F*k,at=B*k*m,tt=N*k*m;break;case 1:J=O,it=F,at=B*m,tt=N*m,K=z*m*I,H=_*m*I;break;default:J=O,it=F,K=z*m,H=_*m,at=B*m*k,tt=N*m*k;break}var lt=y[J+K+at],dt=y[J+K+tt],mt=y[J+H+at],gt=y[J+H+tt],Mt=y[it+K+at],Lt=y[it+K+tt],zt=y[it+H+at],xt=y[it+H+tt],Ct=e.create(),wt=e.create(),Rt=e.create(),Tt=e.create();e.lerp(Ct,lt,Mt,Z),e.lerp(wt,dt,Lt,Z),e.lerp(Rt,mt,zt,Z),e.lerp(Tt,gt,xt,Z);var Bt=e.create(),Gt=e.create();e.lerp(Bt,Ct,Rt,Q),e.lerp(Gt,wt,Tt,Q);var te=e.create();return e.lerp(te,Bt,Gt,W),te},T=function(x){var w=1/0;x.sort(function(M,a){return M-a});for(var C=x.length,y=1;y<C;y++){var S=Math.abs(x[y]-x[y-1]);S<w&&(w=S)}return w},c=function(x){for(var w=[],C=[],y=[],S={},M={},a={},E=x.length,m=0;m<E;m++){var k=x[m],I=k[0],O=k[1],z=k[2];S[I]||(w.push(I),S[I]=!0),M[O]||(C.push(O),M[O]=!0),a[z]||(y.push(z),a[z]=!0)}var B=T(w),F=T(C),_=T(y),N=Math.min(B,F,_);return isFinite(N)?N:1};v.exports=function(x,w){var C=x.startingPositions,y=x.maxLength||1e3,S=x.tubeSize||1,M=x.absoluteTubeSize,a=x.gridFill||"+x+y+z",E={};a.indexOf("-x")!==-1&&(E.reversedX=!0),a.indexOf("-y")!==-1&&(E.reversedY=!0),a.indexOf("-z")!==-1&&(E.reversedZ=!0),E.filled=n.indexOf(a.replace(/-/g,"").replace(/\+/g,""));var m=x.getVelocity||function(Lt){return h(Lt,x,E)},k=x.getDivergence||function(Lt,zt){var xt=e.create(),Ct=1e-4;e.add(xt,Lt,[Ct,0,0]);var wt=m(xt);e.subtract(wt,wt,zt),e.scale(wt,wt,1/Ct),e.add(xt,Lt,[0,Ct,0]);var Rt=m(xt);e.subtract(Rt,Rt,zt),e.scale(Rt,Rt,1/Ct),e.add(xt,Lt,[0,0,Ct]);var Tt=m(xt);return e.subtract(Tt,Tt,zt),e.scale(Tt,Tt,1/Ct),e.add(xt,wt,Rt),e.add(xt,xt,Tt),xt},I=[],O=w[0][0],z=w[0][1],B=w[0][2],F=w[1][0],_=w[1][1],N=w[1][2],G=function(Lt){var zt=Lt[0],xt=Lt[1],Ct=Lt[2];return!(zt<O||zt>F||xt<z||xt>_||Ct<B||Ct>N)},X=e.distance(w[0],w[1]),$=10*X/y,et=$*$,ot=1,nt=0,Z=C.length;Z>1&&(ot=c(C));for(var Q=0;Q<Z;Q++){var W=e.create();e.copy(W,C[Q]);var J=[W],it=[],K=m(W),H=W;it.push(K);var at=[],tt=k(W,K),lt=e.length(tt);isFinite(lt)&&lt>nt&&(nt=lt),at.push(lt),I.push({points:J,velocities:it,divergences:at});for(var dt=0;dt<y*100&&J.length<y&&G(W);){dt++;var mt=e.clone(K),gt=e.squaredLength(mt);if(gt===0)break;if(gt>et&&e.scale(mt,mt,$/Math.sqrt(gt)),e.add(mt,mt,W),K=m(mt),e.squaredDistance(H,mt)-et>-1e-4*et){J.push(mt),H=mt,it.push(K);var tt=k(mt,K),lt=e.length(tt);isFinite(lt)&&lt>nt&&(nt=lt),at.push(lt)}W=mt}}var Mt=f(I,x.colormap,nt,ot);return M?Mt.tubeScale=M:(nt===0&&(nt=1),Mt.tubeScale=S*.5*ot/nt),Mt};var i=r(6740),d=r(6405).createMesh;v.exports.createTubeMesh=function(x,w){return d(x,w,{shaders:i,traceType:"streamtube"})}},990:function(v,p,r){var e=r(9405),s=r(3236),n=s([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);
  vec4 clipPosition = projection * (view * worldPosition);
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),l=s([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color — in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),f=s([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));
  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);

  vec4 clipPosition = projection * (view * worldPosition);
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),u=s([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);p.createShader=function(g){var h=e(g,n,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},p.createPickShader=function(g){var h=e(g,n,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h.attributes.normal.location=2,h},p.createContourShader=function(g){var h=e(g,f,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h},p.createPickContourShader=function(g){var h=e(g,f,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return h.attributes.uv.location=0,h.attributes.f.location=1,h}},9499:function(v,p,r){v.exports=it;var e=r(8828),s=r(2762),n=r(8116),l=r(7766),f=r(1888),u=r(6729),g=r(5298),h=r(9994),T=r(9618),c=r(3711),i=r(6760),d=r(7608),x=r(2478),w=r(6199),C=r(990),y=C.createShader,S=C.createContourShader,M=C.createPickShader,a=C.createPickContourShader,E=4*10,m=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],I=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var K=0;K<3;++K){var H=I[K],at=(K+1)%3,tt=(K+2)%3;H[at+0]=1,H[tt+3]=1,H[K+6]=1}})();function O(K,H,at,tt,lt){this.position=K,this.index=H,this.uv=at,this.level=tt,this.dataCoordinate=lt}var z=256;function B(K,H,at,tt,lt,dt,mt,gt,Mt,Lt,zt,xt,Ct,wt,Rt){this.gl=K,this.shape=H,this.bounds=at,this.objectOffset=Rt,this.intensityBounds=[],this._shader=tt,this._pickShader=lt,this._coordinateBuffer=dt,this._vao=mt,this._colorMap=gt,this._contourShader=Mt,this._contourPickShader=Lt,this._contourBuffer=zt,this._contourVAO=xt,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new O([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=Ct,this._dynamicVAO=wt,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[T(f.mallocFloat(1024),[0,0]),T(f.mallocFloat(1024),[0,0]),T(f.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var F=B.prototype;F.genColormap=function(K,H){var at=!1,tt=h([u({colormap:K,nshades:z,format:"rgba"}).map(function(lt,dt){var mt=H?_(dt/255,H):lt[3];return mt<1&&(at=!0),[lt[0],lt[1],lt[2],255*mt]})]);return g.divseq(tt,255),this.hasAlphaScale=at,tt},F.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},F.isOpaque=function(){return!this.isTransparent()},F.pickSlots=1,F.setPickBase=function(K){this.pickId=K};function _(K,H){if(!H||!H.length)return 1;for(var at=0;at<H.length;++at){if(H.length<2)return 1;if(H[at][0]===K)return H[at][1];if(H[at][0]>K&&at>0){var tt=(H[at][0]-K)/(H[at][0]-H[at-1][0]);return H[at][1]*(1-tt)+tt*H[at-1][1]}}return 1}var N=[0,0,0],G={showSurface:!1,showContour:!1,projections:[m.slice(),m.slice(),m.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function X(K,H){var at,tt,lt,dt=H.axes&&H.axes.lastCubeProps.axis||N,mt=H.showSurface,gt=H.showContour;for(at=0;at<3;++at)for(mt=mt||H.surfaceProject[at],tt=0;tt<3;++tt)gt=gt||H.contourProject[at][tt];for(at=0;at<3;++at){var Mt=G.projections[at];for(tt=0;tt<16;++tt)Mt[tt]=0;for(tt=0;tt<4;++tt)Mt[5*tt]=1;Mt[5*at]=0,Mt[12+at]=H.axesBounds[+(dt[at]>0)][at],i(Mt,K.model,Mt);var Lt=G.clipBounds[at];for(lt=0;lt<2;++lt)for(tt=0;tt<3;++tt)Lt[lt][tt]=K.clipBounds[lt][tt];Lt[0][at]=-1e8,Lt[1][at]=1e8}return G.showSurface=mt,G.showContour=gt,G}var $={model:m,view:m,projection:m,inverseModel:m.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},et=m.slice(),ot=[1,0,0,0,1,0,0,0,1];function nt(K,H){K=K||{};var at=this.gl;at.disable(at.CULL_FACE),this._colorMap.bind(0);var tt=$;tt.model=K.model||m,tt.view=K.view||m,tt.projection=K.projection||m,tt.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],tt.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],tt.objectOffset=this.objectOffset,tt.contourColor=this.contourColor[0],tt.inverseModel=d(tt.inverseModel,tt.model);for(var lt=0;lt<2;++lt)for(var dt=tt.clipBounds[lt],mt=0;mt<3;++mt)dt[mt]=Math.min(Math.max(this.clipBounds[lt][mt],-1e8),1e8);tt.kambient=this.ambientLight,tt.kdiffuse=this.diffuseLight,tt.kspecular=this.specularLight,tt.roughness=this.roughness,tt.fresnel=this.fresnel,tt.opacity=this.opacity,tt.height=0,tt.permutation=ot,tt.vertexColor=this.vertexColor;var gt=et;for(i(gt,tt.view,tt.model),i(gt,tt.projection,gt),d(gt,gt),lt=0;lt<3;++lt)tt.eyePosition[lt]=gt[12+lt]/gt[15];var Mt=gt[15];for(lt=0;lt<3;++lt)Mt+=this.lightPosition[lt]*gt[4*lt+3];for(lt=0;lt<3;++lt){var Lt=gt[12+lt];for(mt=0;mt<3;++mt)Lt+=gt[4*mt+lt]*this.lightPosition[mt];tt.lightPosition[lt]=Lt/Mt}var zt=X(tt,this);if(zt.showSurface){for(this._shader.bind(),this._shader.uniforms=tt,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(at.TRIANGLES,this._vertexCount),lt=0;lt<3;++lt)!this.surfaceProject[lt]||!this.vertexCount||(this._shader.uniforms.model=zt.projections[lt],this._shader.uniforms.clipBounds=zt.clipBounds[lt],this._vao.draw(at.TRIANGLES,this._vertexCount));this._vao.unbind()}if(zt.showContour){var xt=this._contourShader;tt.kambient=1,tt.kdiffuse=0,tt.kspecular=0,tt.opacity=1,xt.bind(),xt.uniforms=tt;var Ct=this._contourVAO;for(Ct.bind(),lt=0;lt<3;++lt)for(xt.uniforms.permutation=I[lt],at.lineWidth(this.contourWidth[lt]*this.pixelRatio),mt=0;mt<this.contourLevels[lt].length;++mt)mt===this.highlightLevel[lt]?(xt.uniforms.contourColor=this.highlightColor[lt],xt.uniforms.contourTint=this.highlightTint[lt]):(mt===0||mt-1===this.highlightLevel[lt])&&(xt.uniforms.contourColor=this.contourColor[lt],xt.uniforms.contourTint=this.contourTint[lt]),this._contourCounts[lt][mt]&&(xt.uniforms.height=this.contourLevels[lt][mt],Ct.draw(at.LINES,this._contourCounts[lt][mt],this._contourOffsets[lt][mt]));for(lt=0;lt<3;++lt)for(xt.uniforms.model=zt.projections[lt],xt.uniforms.clipBounds=zt.clipBounds[lt],mt=0;mt<3;++mt)if(this.contourProject[lt][mt]){xt.uniforms.permutation=I[mt],at.lineWidth(this.contourWidth[mt]*this.pixelRatio);for(var wt=0;wt<this.contourLevels[mt].length;++wt)wt===this.highlightLevel[mt]?(xt.uniforms.contourColor=this.highlightColor[mt],xt.uniforms.contourTint=this.highlightTint[mt]):(wt===0||wt-1===this.highlightLevel[mt])&&(xt.uniforms.contourColor=this.contourColor[mt],xt.uniforms.contourTint=this.contourTint[mt]),this._contourCounts[mt][wt]&&(xt.uniforms.height=this.contourLevels[mt][wt],Ct.draw(at.LINES,this._contourCounts[mt][wt],this._contourOffsets[mt][wt]))}for(Ct.unbind(),Ct=this._dynamicVAO,Ct.bind(),lt=0;lt<3;++lt)if(this._dynamicCounts[lt]!==0)for(xt.uniforms.model=tt.model,xt.uniforms.clipBounds=tt.clipBounds,xt.uniforms.permutation=I[lt],at.lineWidth(this.dynamicWidth[lt]*this.pixelRatio),xt.uniforms.contourColor=this.dynamicColor[lt],xt.uniforms.contourTint=this.dynamicTint[lt],xt.uniforms.height=this.dynamicLevel[lt],Ct.draw(at.LINES,this._dynamicCounts[lt],this._dynamicOffsets[lt]),mt=0;mt<3;++mt)this.contourProject[mt][lt]&&(xt.uniforms.model=zt.projections[mt],xt.uniforms.clipBounds=zt.clipBounds[mt],Ct.draw(at.LINES,this._dynamicCounts[lt],this._dynamicOffsets[lt]));Ct.unbind()}}F.draw=function(K){return nt.call(this,K,!1)},F.drawTransparent=function(K){return nt.call(this,K,!0)};var Z={model:m,view:m,projection:m,inverseModel:m,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};F.drawPick=function(K){K=K||{};var H=this.gl;H.disable(H.CULL_FACE);var at=Z;at.model=K.model||m,at.view=K.view||m,at.projection=K.projection||m,at.shape=this._field[2].shape,at.pickId=this.pickId/255,at.lowerBound=this.bounds[0],at.upperBound=this.bounds[1],at.objectOffset=this.objectOffset,at.permutation=ot;for(var tt=0;tt<2;++tt)for(var lt=at.clipBounds[tt],dt=0;dt<3;++dt)lt[dt]=Math.min(Math.max(this.clipBounds[tt][dt],-1e8),1e8);var mt=X(at,this);if(mt.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=at,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),tt=0;tt<3;++tt)this.surfaceProject[tt]&&(this._pickShader.uniforms.model=mt.projections[tt],this._pickShader.uniforms.clipBounds=mt.clipBounds[tt],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(mt.showContour){var gt=this._contourPickShader;gt.bind(),gt.uniforms=at;var Mt=this._contourVAO;for(Mt.bind(),dt=0;dt<3;++dt)for(H.lineWidth(this.contourWidth[dt]*this.pixelRatio),gt.uniforms.permutation=I[dt],tt=0;tt<this.contourLevels[dt].length;++tt)this._contourCounts[dt][tt]&&(gt.uniforms.height=this.contourLevels[dt][tt],Mt.draw(H.LINES,this._contourCounts[dt][tt],this._contourOffsets[dt][tt]));for(tt=0;tt<3;++tt)for(gt.uniforms.model=mt.projections[tt],gt.uniforms.clipBounds=mt.clipBounds[tt],dt=0;dt<3;++dt)if(this.contourProject[tt][dt]){gt.uniforms.permutation=I[dt],H.lineWidth(this.contourWidth[dt]*this.pixelRatio);for(var Lt=0;Lt<this.contourLevels[dt].length;++Lt)this._contourCounts[dt][Lt]&&(gt.uniforms.height=this.contourLevels[dt][Lt],Mt.draw(H.LINES,this._contourCounts[dt][Lt],this._contourOffsets[dt][Lt]))}Mt.unbind()}},F.pick=function(K){if(!K||K.id!==this.pickId)return null;var H=this._field[2].shape,at=this._pickResult,tt=H[0]*(K.value[0]+(K.value[2]>>4)/16)/255,lt=Math.floor(tt),dt=tt-lt,mt=H[1]*(K.value[1]+(K.value[2]&15)/16)/255,gt=Math.floor(mt),Mt=mt-gt;lt+=1,gt+=1;var Lt=at.position;Lt[0]=Lt[1]=Lt[2]=0;for(var zt=0;zt<2;++zt)for(var xt=zt?dt:1-dt,Ct=0;Ct<2;++Ct)for(var wt=Ct?Mt:1-Mt,Rt=lt+zt,Tt=gt+Ct,Bt=xt*wt,Gt=0;Gt<3;++Gt)Lt[Gt]+=this._field[Gt].get(Rt,Tt)*Bt;for(var te=this._pickResult.level,Wt=0;Wt<3;++Wt)if(te[Wt]=x.le(this.contourLevels[Wt],Lt[Wt]),te[Wt]<0)this.contourLevels[Wt].length>0&&(te[Wt]=0);else if(te[Wt]<this.contourLevels[Wt].length-1){var jt=this.contourLevels[Wt][te[Wt]],ie=this.contourLevels[Wt][te[Wt]+1];Math.abs(jt-Lt[Wt])>Math.abs(ie-Lt[Wt])&&(te[Wt]+=1)}for(at.index[0]=dt<.5?lt:lt+1,at.index[1]=Mt<.5?gt:gt+1,at.uv[0]=tt/H[0],at.uv[1]=mt/H[1],Gt=0;Gt<3;++Gt)at.dataCoordinate[Gt]=this._field[Gt].get(at.index[0],at.index[1]);return at},F.padField=function(K,H){var at=H.shape.slice(),tt=K.shape.slice();g.assign(K.lo(1,1).hi(at[0],at[1]),H),g.assign(K.lo(1).hi(at[0],1),H.hi(at[0],1)),g.assign(K.lo(1,tt[1]-1).hi(at[0],1),H.lo(0,at[1]-1).hi(at[0],1)),g.assign(K.lo(0,1).hi(1,at[1]),H.hi(1)),g.assign(K.lo(tt[0]-1,1).hi(1,at[1]),H.lo(at[0]-1)),K.set(0,0,H.get(0,0)),K.set(0,tt[1]-1,H.get(0,at[1]-1)),K.set(tt[0]-1,0,H.get(at[0]-1,0)),K.set(tt[0]-1,tt[1]-1,H.get(at[0]-1,at[1]-1))};function Q(K,H){return Array.isArray(K)?[H(K[0]),H(K[1]),H(K[2])]:[H(K),H(K),H(K)]}function W(K){return Array.isArray(K)?K.length===3?[K[0],K[1],K[2],1]:[K[0],K[1],K[2],K[3]]:[0,0,0,1]}function J(K){if(Array.isArray(K)){if(Array.isArray(K))return[W(K[0]),W(K[1]),W(K[2])];var H=W(K);return[H.slice(),H.slice(),H.slice()]}}F.update=function(K){K=K||{},this.objectOffset=K.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in K&&(this.contourWidth=Q(K.contourWidth,Number)),"showContour"in K&&(this.showContour=Q(K.showContour,Boolean)),"showSurface"in K&&(this.showSurface=!!K.showSurface),"contourTint"in K&&(this.contourTint=Q(K.contourTint,Boolean)),"contourColor"in K&&(this.contourColor=J(K.contourColor)),"contourProject"in K&&(this.contourProject=Q(K.contourProject,function(Yt){return Q(Yt,Boolean)})),"surfaceProject"in K&&(this.surfaceProject=K.surfaceProject),"dynamicColor"in K&&(this.dynamicColor=J(K.dynamicColor)),"dynamicTint"in K&&(this.dynamicTint=Q(K.dynamicTint,Number)),"dynamicWidth"in K&&(this.dynamicWidth=Q(K.dynamicWidth,Number)),"opacity"in K&&(this.opacity=K.opacity),"opacityscale"in K&&(this.opacityscale=K.opacityscale),"colorBounds"in K&&(this.colorBounds=K.colorBounds),"vertexColor"in K&&(this.vertexColor=K.vertexColor?1:0),"colormap"in K&&this._colorMap.setPixels(this.genColormap(K.colormap,this.opacityscale));var H=K.field||K.coords&&K.coords[2]||null,at=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in K||"coords"in K){var tt=(H.shape[0]+2)*(H.shape[1]+2);tt>this._field[2].data.length&&(f.freeFloat(this._field[2].data),this._field[2].data=f.mallocFloat(e.nextPow2(tt))),this._field[2]=T(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var lt=this.shape,dt=0;dt<2;++dt)this._field[2].size>this._field[dt].data.length&&(f.freeFloat(this._field[dt].data),this._field[dt].data=f.mallocFloat(this._field[2].size)),this._field[dt]=T(this._field[dt].data,[lt[0]+2,lt[1]+2]);if(K.coords){var mt=K.coords;if(!Array.isArray(mt)||mt.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(dt=0;dt<2;++dt){var gt=mt[dt];for(Ct=0;Ct<2;++Ct)if(gt.shape[Ct]!==lt[Ct])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[dt],gt)}}else if(K.ticks){var Mt=K.ticks;if(!Array.isArray(Mt)||Mt.length!==2)throw new Error("gl-surface: invalid ticks");for(dt=0;dt<2;++dt){var Lt=Mt[dt];if((Array.isArray(Lt)||Lt.length)&&(Lt=T(Lt)),Lt.shape[0]!==lt[dt])throw new Error("gl-surface: invalid tick length");var zt=T(Lt.data,lt);zt.stride[dt]=Lt.stride[0],zt.stride[dt^1]=0,this.padField(this._field[dt],zt)}}else{for(dt=0;dt<2;++dt){var xt=[0,0];xt[dt]=1,this._field[dt]=T(this._field[dt].data,[lt[0]+2,lt[1]+2],xt,0)}this._field[0].set(0,0,0);for(var Ct=0;Ct<lt[0];++Ct)this._field[0].set(Ct+1,0,Ct);for(this._field[0].set(lt[0]+1,0,lt[0]-1),this._field[1].set(0,0,0),Ct=0;Ct<lt[1];++Ct)this._field[1].set(0,Ct+1,Ct);this._field[1].set(0,lt[1]+1,lt[1]-1)}var wt=this._field,Rt=T(f.mallocFloat(wt[2].size*3*2),[3,lt[0]+2,lt[1]+2,2]);for(dt=0;dt<3;++dt)w(Rt.pick(dt),wt[dt],"mirror");var Tt=T(f.mallocFloat(wt[2].size*3),[lt[0]+2,lt[1]+2,3]);for(dt=0;dt<lt[0]+2;++dt)for(Ct=0;Ct<lt[1]+2;++Ct){var Bt=Rt.get(0,dt,Ct,0),Gt=Rt.get(0,dt,Ct,1),te=Rt.get(1,dt,Ct,0),Wt=Rt.get(1,dt,Ct,1),jt=Rt.get(2,dt,Ct,0),ie=Rt.get(2,dt,Ct,1),ue=te*ie-Wt*jt,fe=jt*Gt-ie*Bt,pe=Bt*Wt-Gt*te,Te=Math.sqrt(ue*ue+fe*fe+pe*pe);Te<1e-8?(Te=Math.max(Math.abs(ue),Math.abs(fe),Math.abs(pe)),Te<1e-8?(pe=1,fe=ue=0,Te=1):Te=1/Te):Te=1/Math.sqrt(Te),Tt.set(dt,Ct,0,ue*Te),Tt.set(dt,Ct,1,fe*Te),Tt.set(dt,Ct,2,pe*Te)}f.free(Rt.data);var Qt=[1/0,1/0,1/0],Pt=[-1/0,-1/0,-1/0],Ot=1/0,Nt=-1/0,Ht=(lt[0]-1)*(lt[1]-1)*6,St=f.mallocFloat(e.nextPow2(10*Ht)),kt=0,Ft=0;for(dt=0;dt<lt[0]-1;++dt)t:for(Ct=0;Ct<lt[1]-1;++Ct){for(var At=0;At<2;++At)for(var ft=0;ft<2;++ft)for(var pt=0;pt<3;++pt){var Dt=this._field[pt].get(1+dt+At,1+Ct+ft);if(isNaN(Dt)||!isFinite(Dt))continue t}for(pt=0;pt<6;++pt){var Ut=dt+k[pt][0],$t=Ct+k[pt][1],re=this._field[0].get(Ut+1,$t+1),Be=this._field[1].get(Ut+1,$t+1);Dt=this._field[2].get(Ut+1,$t+1),ue=Tt.get(Ut+1,$t+1,0),fe=Tt.get(Ut+1,$t+1,1),pe=Tt.get(Ut+1,$t+1,2),K.intensity&&(We=K.intensity.get(Ut,$t));var We=K.intensity?K.intensity.get(Ut,$t):Dt+this.objectOffset[2];St[kt++]=Ut,St[kt++]=$t,St[kt++]=re,St[kt++]=Be,St[kt++]=Dt,St[kt++]=0,St[kt++]=We,St[kt++]=ue,St[kt++]=fe,St[kt++]=pe,Qt[0]=Math.min(Qt[0],re+this.objectOffset[0]),Qt[1]=Math.min(Qt[1],Be+this.objectOffset[1]),Qt[2]=Math.min(Qt[2],Dt+this.objectOffset[2]),Ot=Math.min(Ot,We),Pt[0]=Math.max(Pt[0],re+this.objectOffset[0]),Pt[1]=Math.max(Pt[1],Be+this.objectOffset[1]),Pt[2]=Math.max(Pt[2],Dt+this.objectOffset[2]),Nt=Math.max(Nt,We),Ft+=1}}for(K.intensityBounds&&(Ot=+K.intensityBounds[0],Nt=+K.intensityBounds[1]),dt=6;dt<kt;dt+=10)St[dt]=(St[dt]-Ot)/(Nt-Ot);this._vertexCount=Ft,this._coordinateBuffer.update(St.subarray(0,kt)),f.freeFloat(St),f.free(Tt.data),this.bounds=[Qt,Pt],this.intensity=K.intensity||this._field[2],(this.intensityBounds[0]!==Ot||this.intensityBounds[1]!==Nt)&&(at=!0),this.intensityBounds=[Ot,Nt]}if("levels"in K){var me=K.levels;for(Array.isArray(me[0])?me=me.slice():me=[[],[],me],dt=0;dt<3;++dt)me[dt]=me[dt].slice(),me[dt].sort(function(Yt,Jt){return Yt-Jt});for(dt=0;dt<3;++dt)for(Ct=0;Ct<me[dt].length;++Ct)me[dt][Ct]-=this.objectOffset[dt];t:for(dt=0;dt<3;++dt){if(me[dt].length!==this.contourLevels[dt].length){at=!0;break}for(Ct=0;Ct<me[dt].length;++Ct)if(me[dt][Ct]!==this.contourLevels[dt][Ct]){at=!0;break t}}this.contourLevels=me}if(at){wt=this._field,lt=this.shape;for(var Se=[],je=0;je<3;++je){var vr=this.contourLevels[je],he=[],Ye=[],Qe=[0,0,0];for(dt=0;dt<vr.length;++dt){var mr=c(this._field[je],vr[dt]);he.push(Se.length/5|0),Ft=0;t:for(Ct=0;Ct<mr.cells.length;++Ct){var ir=mr.cells[Ct];for(pt=0;pt<2;++pt){var ve=mr.positions[ir[pt]],ne=ve[0],ge=Math.floor(ne)|0,Ae=ne-ge,Re=ve[1],ze=Math.floor(Re)|0,ke=Re-ze,_e=!1;e:for(var Ke=0;Ke<3;++Ke){Qe[Ke]=0;var hr=(je+Ke+1)%3;for(At=0;At<2;++At){var cr=At?Ae:1-Ae;for(Ut=Math.min(Math.max(ge+At,0),lt[0])|0,ft=0;ft<2;++ft){var dr=ft?ke:1-ke;if($t=Math.min(Math.max(ze+ft,0),lt[1])|0,Ke<2?Dt=this._field[hr].get(Ut,$t):Dt=(this.intensity.get(Ut,$t)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Dt)||isNaN(Dt)){_e=!0;break e}var fr=cr*dr;Qe[Ke]+=fr*Dt}}}if(!_e)Se.push(Qe[0],Qe[1],ve[0],ve[1],Qe[2]),Ft+=1;else{if(pt>0){for(var Lr=0;Lr<5;++Lr)Se.pop();Ft-=1}continue t}}}Ye.push(Ft)}this._contourOffsets[je]=he,this._contourCounts[je]=Ye}var xr=f.mallocFloat(Se.length);for(dt=0;dt<Se.length;++dt)xr[dt]=Se[dt];this._contourBuffer.update(xr),f.freeFloat(xr)}},F.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var K=0;K<3;++K)f.freeFloat(this._field[K].data)},F.highlight=function(K){var H;if(!K){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=K.level[H]:this.highlightLevel[H]=-1;var at;for(this.snapToData?at=K.dataCoordinate:at=K.position,H=0;H<3;++H)at[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||at[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||at[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||at[2]===this.dynamicLevel[2]))){for(var tt=0,lt=this.shape,dt=f.mallocFloat(12*lt[0]*lt[1]),mt=0;mt<3;++mt){if(!this.enableDynamic[mt]){this.dynamicLevel[mt]=NaN,this._dynamicCounts[mt]=0;continue}this.dynamicLevel[mt]=at[mt];var gt=(mt+1)%3,Mt=(mt+2)%3,Lt=this._field[mt],zt=this._field[gt],xt=this._field[Mt],Ct=c(Lt,at[mt]),wt=Ct.cells,Rt=Ct.positions;for(this._dynamicOffsets[mt]=tt,H=0;H<wt.length;++H)for(var Tt=wt[H],Bt=0;Bt<2;++Bt){var Gt=Rt[Tt[Bt]],te=+Gt[0],Wt=te|0,jt=Math.min(Wt+1,lt[0])|0,ie=te-Wt,ue=1-ie,fe=+Gt[1],pe=fe|0,Te=Math.min(pe+1,lt[1])|0,Qt=fe-pe,Pt=1-Qt,Ot=ue*Pt,Nt=ue*Qt,Ht=ie*Pt,St=ie*Qt,kt=Ot*zt.get(Wt,pe)+Nt*zt.get(Wt,Te)+Ht*zt.get(jt,pe)+St*zt.get(jt,Te),Ft=Ot*xt.get(Wt,pe)+Nt*xt.get(Wt,Te)+Ht*xt.get(jt,pe)+St*xt.get(jt,Te);if(isNaN(kt)||isNaN(Ft)){Bt&&(tt-=1);break}dt[2*tt+0]=kt,dt[2*tt+1]=Ft,tt+=1}this._dynamicCounts[mt]=tt-this._dynamicOffsets[mt]}this._dynamicBuffer.update(dt.subarray(0,2*tt)),f.freeFloat(dt)}};function it(K){var H=K.gl,at=y(H),tt=M(H),lt=S(H),dt=a(H),mt=s(H),gt=n(H,[{buffer:mt,size:4,stride:E,offset:0},{buffer:mt,size:3,stride:E,offset:16},{buffer:mt,size:3,stride:E,offset:28}]),Mt=s(H),Lt=n(H,[{buffer:Mt,size:4,stride:20,offset:0},{buffer:Mt,size:1,stride:20,offset:16}]),zt=s(H),xt=n(H,[{buffer:zt,size:2,type:H.FLOAT}]),Ct=l(H,1,z,H.RGBA,H.UNSIGNED_BYTE);Ct.minFilter=H.LINEAR,Ct.magFilter=H.LINEAR;var wt=new B(H,[0,0],[[0,0,0],[0,0,0]],at,tt,mt,gt,Ct,lt,dt,Mt,Lt,zt,xt,[0,0,0]),Rt={levels:[[],[],[]]};for(var Tt in K)Rt[Tt]=K[Tt];return Rt.colormap=Rt.colormap||"jet",wt.update(Rt),wt}},7766:function(v,p,r){var e=r(9618),s=r(5298),n=r(1888);v.exports=a;var l=null,f=null,u=null;function g(E){l=[E.LINEAR,E.NEAREST_MIPMAP_LINEAR,E.LINEAR_MIPMAP_NEAREST,E.LINEAR_MIPMAP_NEAREST],f=[E.NEAREST,E.LINEAR,E.NEAREST_MIPMAP_NEAREST,E.NEAREST_MIPMAP_LINEAR,E.LINEAR_MIPMAP_NEAREST,E.LINEAR_MIPMAP_LINEAR],u=[E.REPEAT,E.CLAMP_TO_EDGE,E.MIRRORED_REPEAT]}function h(E){return typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&E instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&E instanceof HTMLVideoElement||typeof ImageData<"u"&&E instanceof ImageData}var T=function(E,m){s.muls(E,m,255)};function c(E,m,k){var I=E.gl,O=I.getParameter(I.MAX_TEXTURE_SIZE);if(m<0||m>O||k<0||k>O)throw new Error("gl-texture2d: Invalid texture size");return E._shape=[m,k],E.bind(),I.texImage2D(I.TEXTURE_2D,0,E.format,m,k,0,E.format,E.type,null),E._mipLevels=[0],E}function i(E,m,k,I,O,z){this.gl=E,this.handle=m,this.format=O,this.type=z,this._shape=[k,I],this._mipLevels=[0],this._magFilter=E.NEAREST,this._minFilter=E.NEAREST,this._wrapS=E.CLAMP_TO_EDGE,this._wrapT=E.CLAMP_TO_EDGE,this._anisoSamples=1;var B=this,F=[this._wrapS,this._wrapT];Object.defineProperties(F,[{get:function(){return B._wrapS},set:function(N){return B.wrapS=N}},{get:function(){return B._wrapT},set:function(N){return B.wrapT=N}}]),this._wrapVector=F;var _=[this._shape[0],this._shape[1]];Object.defineProperties(_,[{get:function(){return B._shape[0]},set:function(N){return B.width=N}},{get:function(){return B._shape[1]},set:function(N){return B.height=N}}]),this._shapeVector=_}var d=i.prototype;Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(E){this.bind();var m=this.gl;if(this.type===m.FLOAT&&l.indexOf(E)>=0&&(m.getExtension("OES_texture_float_linear")||(E=m.NEAREST)),f.indexOf(E)<0)throw new Error("gl-texture2d: Unknown filter mode "+E);return m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,E),this._minFilter=E}},magFilter:{get:function(){return this._magFilter},set:function(E){this.bind();var m=this.gl;if(this.type===m.FLOAT&&l.indexOf(E)>=0&&(m.getExtension("OES_texture_float_linear")||(E=m.NEAREST)),f.indexOf(E)<0)throw new Error("gl-texture2d: Unknown filter mode "+E);return m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,E),this._magFilter=E}},mipSamples:{get:function(){return this._anisoSamples},set:function(E){var m=this._anisoSamples;if(this._anisoSamples=Math.max(E,1)|0,m!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(E){if(this.bind(),u.indexOf(E)<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,E),this._wrapS=E}},wrapT:{get:function(){return this._wrapT},set:function(E){if(this.bind(),u.indexOf(E)<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,E),this._wrapT=E}},wrap:{get:function(){return this._wrapVector},set:function(E){if(Array.isArray(E)||(E=[E,E]),E.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var m=0;m<2;++m)if(u.indexOf(E[m])<0)throw new Error("gl-texture2d: Unknown wrap mode "+E);this._wrapS=E[0],this._wrapT=E[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),E}},shape:{get:function(){return this._shapeVector},set:function(E){if(!Array.isArray(E))E=[E|0,E|0];else if(E.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return c(this,E[0]|0,E[1]|0),[E[0]|0,E[1]|0]}},width:{get:function(){return this._shape[0]},set:function(E){return E=E|0,c(this,E,this._shape[1]),E}},height:{get:function(){return this._shape[1]},set:function(E){return E=E|0,c(this,this._shape[0],E),E}}}),d.bind=function(E){var m=this.gl;return E!==void 0&&m.activeTexture(m.TEXTURE0+(E|0)),m.bindTexture(m.TEXTURE_2D,this.handle),E!==void 0?E|0:m.getParameter(m.ACTIVE_TEXTURE)-m.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var E=Math.min(this._shape[0],this._shape[1]),m=0;E>0;++m,E>>>=1)this._mipLevels.indexOf(m)<0&&this._mipLevels.push(m)},d.setPixels=function(E,m,k,I){var O=this.gl;this.bind(),Array.isArray(m)?(I=k,k=m[1]|0,m=m[0]|0):(m=m||0,k=k||0),I=I||0;var z=h(E)?E:E.raw;if(z){var B=this._mipLevels.indexOf(I)<0;B?(O.texImage2D(O.TEXTURE_2D,0,this.format,this.format,this.type,z),this._mipLevels.push(I)):O.texSubImage2D(O.TEXTURE_2D,I,m,k,this.format,this.type,z)}else if(E.shape&&E.stride&&E.data){if(E.shape.length<2||m+E.shape[1]>this._shape[1]>>>I||k+E.shape[0]>this._shape[0]>>>I||m<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");w(O,m,k,I,this.format,this.type,this._mipLevels,E)}else throw new Error("gl-texture2d: Unsupported data type")};function x(E,m){return E.length===3?m[2]===1&&m[1]===E[0]*E[2]&&m[0]===E[2]:m[0]===1&&m[1]===E[0]}function w(E,m,k,I,O,z,B,F){var _=F.dtype,N=F.shape.slice();if(N.length<2||N.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var G=0,X=0,$=x(N,F.stride.slice());if(_==="float32"?G=E.FLOAT:_==="float64"?(G=E.FLOAT,$=!1,_="float32"):_==="uint8"?G=E.UNSIGNED_BYTE:(G=E.UNSIGNED_BYTE,$=!1,_="uint8"),N.length===2)X=E.LUMINANCE,N=[N[0],N[1],1],F=e(F.data,N,[F.stride[0],F.stride[1],1],F.offset);else if(N.length===3){if(N[2]===1)X=E.ALPHA;else if(N[2]===2)X=E.LUMINANCE_ALPHA;else if(N[2]===3)X=E.RGB;else if(N[2]===4)X=E.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");N[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((X===E.LUMINANCE||X===E.ALPHA)&&(O===E.LUMINANCE||O===E.ALPHA)&&(X=O),X!==O)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var et=F.size,ot=B.indexOf(I)<0;if(ot&&B.push(I),G===z&&$)F.offset===0&&F.data.length===et?ot?E.texImage2D(E.TEXTURE_2D,I,O,N[0],N[1],0,O,z,F.data):E.texSubImage2D(E.TEXTURE_2D,I,m,k,N[0],N[1],O,z,F.data):ot?E.texImage2D(E.TEXTURE_2D,I,O,N[0],N[1],0,O,z,F.data.subarray(F.offset,F.offset+et)):E.texSubImage2D(E.TEXTURE_2D,I,m,k,N[0],N[1],O,z,F.data.subarray(F.offset,F.offset+et));else{var nt;z===E.FLOAT?nt=n.mallocFloat32(et):nt=n.mallocUint8(et);var Z=e(nt,N,[N[2],N[2]*N[0],1]);G===E.FLOAT&&z===E.UNSIGNED_BYTE?T(Z,F):s.assign(Z,F),ot?E.texImage2D(E.TEXTURE_2D,I,O,N[0],N[1],0,O,z,nt.subarray(0,et)):E.texSubImage2D(E.TEXTURE_2D,I,m,k,N[0],N[1],O,z,nt.subarray(0,et)),z===E.FLOAT?n.freeFloat32(nt):n.freeUint8(nt)}}function C(E){var m=E.createTexture();return E.bindTexture(E.TEXTURE_2D,m),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),m}function y(E,m,k,I,O){var z=E.getParameter(E.MAX_TEXTURE_SIZE);if(m<0||m>z||k<0||k>z)throw new Error("gl-texture2d: Invalid texture shape");if(O===E.FLOAT&&!E.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var B=C(E);return E.texImage2D(E.TEXTURE_2D,0,I,m,k,0,I,O,null),new i(E,B,m,k,I,O)}function S(E,m,k,I,O,z){var B=C(E);return E.texImage2D(E.TEXTURE_2D,0,O,O,z,m),new i(E,B,k,I,O,z)}function M(E,m){var k=m.dtype,I=m.shape.slice(),O=E.getParameter(E.MAX_TEXTURE_SIZE);if(I[0]<0||I[0]>O||I[1]<0||I[1]>O)throw new Error("gl-texture2d: Invalid texture size");var z=x(I,m.stride.slice()),B=0;k==="float32"?B=E.FLOAT:k==="float64"?(B=E.FLOAT,z=!1,k="float32"):k==="uint8"?B=E.UNSIGNED_BYTE:(B=E.UNSIGNED_BYTE,z=!1,k="uint8");var F=0;if(I.length===2)F=E.LUMINANCE,I=[I[0],I[1],1],m=e(m.data,I,[m.stride[0],m.stride[1],1],m.offset);else if(I.length===3)if(I[2]===1)F=E.ALPHA;else if(I[2]===2)F=E.LUMINANCE_ALPHA;else if(I[2]===3)F=E.RGB;else if(I[2]===4)F=E.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");B===E.FLOAT&&!E.getExtension("OES_texture_float")&&(B=E.UNSIGNED_BYTE,z=!1);var _,N,G=m.size;if(z)m.offset===0&&m.data.length===G?_=m.data:_=m.data.subarray(m.offset,m.offset+G);else{var X=[I[2],I[2]*I[0],1];N=n.malloc(G,k);var $=e(N,I,X,0);(k==="float32"||k==="float64")&&B===E.UNSIGNED_BYTE?T($,m):s.assign($,m),_=N.subarray(0,G)}var et=C(E);return E.texImage2D(E.TEXTURE_2D,0,F,I[0],I[1],0,F,B,_),z||n.free(N),new i(E,et,I[0],I[1],F,B)}function a(E){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||g(E),typeof arguments[1]=="number")return y(E,arguments[1],arguments[2],arguments[3]||E.RGBA,arguments[4]||E.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return y(E,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||E.RGBA,arguments[3]||E.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var m=arguments[1],k=h(m)?m:m.raw;if(k)return S(E,k,m.width|0,m.height|0,arguments[2]||E.RGBA,arguments[3]||E.UNSIGNED_BYTE);if(m.shape&&m.data&&m.stride)return M(E,m)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},1433:function(v){function p(r,e,s){e?e.bind():r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null);var n=r.getParameter(r.MAX_VERTEX_ATTRIBS)|0;if(s){if(s.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var l=0;l<s.length;++l){var f=s[l];if(f.buffer){var u=f.buffer,g=f.size||4,h=f.type||r.FLOAT,T=!!f.normalized,c=f.stride||0,i=f.offset||0;u.bind(),r.enableVertexAttribArray(l),r.vertexAttribPointer(l,g,h,T,c,i)}else{if(typeof f=="number")r.vertexAttrib1f(l,f);else if(f.length===1)r.vertexAttrib1f(l,f[0]);else if(f.length===2)r.vertexAttrib2f(l,f[0],f[1]);else if(f.length===3)r.vertexAttrib3f(l,f[0],f[1],f[2]);else if(f.length===4)r.vertexAttrib4f(l,f[0],f[1],f[2],f[3]);else throw new Error("gl-vao: Invalid vertex attribute");r.disableVertexAttribArray(l)}}for(;l<n;++l)r.disableVertexAttribArray(l)}else{r.bindBuffer(r.ARRAY_BUFFER,null);for(var l=0;l<n;++l)r.disableVertexAttribArray(l)}}v.exports=p},870:function(v,p,r){var e=r(1433);function s(l){this.gl=l,this._elements=null,this._attributes=null,this._elementsType=l.UNSIGNED_SHORT}s.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},s.prototype.update=function(l,f,u){this._elements=f,this._attributes=l,this._elementsType=u||this.gl.UNSIGNED_SHORT},s.prototype.dispose=function(){},s.prototype.unbind=function(){},s.prototype.draw=function(l,f,u){u=u||0;var g=this.gl;this._elements?g.drawElements(l,f,this._elementsType,u):g.drawArrays(l,u,f)};function n(l){return new s(l)}v.exports=n},7518:function(v,p,r){var e=r(1433);function s(f,u,g,h,T,c){this.location=f,this.dimension=u,this.a=g,this.b=h,this.c=T,this.d=c}s.prototype.bind=function(f){switch(this.dimension){case 1:f.vertexAttrib1f(this.location,this.a);break;case 2:f.vertexAttrib2f(this.location,this.a,this.b);break;case 3:f.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:f.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(f,u,g){this.gl=f,this._ext=u,this.handle=g,this._attribs=[],this._useElements=!1,this._elementsType=f.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var f=0;f<this._attribs.length;++f)this._attribs[f].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(f,u,g){if(this.bind(),e(this.gl,u,f),this.unbind(),this._attribs.length=0,f)for(var h=0;h<f.length;++h){var T=f[h];typeof T=="number"?this._attribs.push(new s(h,1,T)):Array.isArray(T)&&this._attribs.push(new s(h,T.length,T[0],T[1],T[2],T[3]))}this._useElements=!!u,this._elementsType=g||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(f,u,g){g=g||0;var h=this.gl;this._useElements?h.drawElements(f,u,this._elementsType,g):h.drawArrays(f,g,u)};function l(f,u){return new n(f,u,u.createVertexArrayOES())}v.exports=l},8116:function(v,p,r){var e=r(7518),s=r(870);function n(f){this.bindVertexArrayOES=f.bindVertexArray.bind(f),this.createVertexArrayOES=f.createVertexArray.bind(f),this.deleteVertexArrayOES=f.deleteVertexArray.bind(f)}function l(f,u,g,h){var T=f.createVertexArray?new n(f):f.getExtension("OES_vertex_array_object"),c;return T?c=e(f,T):c=s(f),c.update(u,g,h),c}v.exports=l},5632:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]+s[0],r[1]=e[1]+s[1],r[2]=e[2]+s[2],r}},8192:function(v,p,r){v.exports=l;var e=r(2825),s=r(3536),n=r(244);function l(f,u){var g=e(f[0],f[1],f[2]),h=e(u[0],u[1],u[2]);s(g,g),s(h,h);var T=n(g,h);return T>1?0:Math.acos(T)}},9226:function(v){v.exports=p;function p(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}},3126:function(v){v.exports=p;function p(r){var e=new Float32Array(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}},3990:function(v){v.exports=p;function p(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}},1091:function(v){v.exports=p;function p(){var r=new Float32Array(3);return r[0]=0,r[1]=0,r[2]=0,r}},5911:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=s[0],g=s[1],h=s[2];return r[0]=l*h-f*g,r[1]=f*u-n*h,r[2]=n*g-l*u,r}},5455:function(v,p,r){v.exports=r(7056)},7056:function(v){v.exports=p;function p(r,e){var s=e[0]-r[0],n=e[1]-r[1],l=e[2]-r[2];return Math.sqrt(s*s+n*n+l*l)}},4008:function(v,p,r){v.exports=r(6690)},6690:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]/s[0],r[1]=e[1]/s[1],r[2]=e[2]/s[2],r}},244:function(v){v.exports=p;function p(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}},2613:function(v){v.exports=1e-6},9922:function(v,p,r){v.exports=s;var e=r(2613);function s(n,l){var f=n[0],u=n[1],g=n[2],h=l[0],T=l[1],c=l[2];return Math.abs(f-h)<=e*Math.max(1,Math.abs(f),Math.abs(h))&&Math.abs(u-T)<=e*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(g-c)<=e*Math.max(1,Math.abs(g),Math.abs(c))}},9265:function(v){v.exports=p;function p(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}},2681:function(v){v.exports=p;function p(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}},5137:function(v,p,r){v.exports=s;var e=r(1091)();function s(n,l,f,u,g,h){var T,c;for(l||(l=3),f||(f=0),u?c=Math.min(u*l+f,n.length):c=n.length,T=f;T<c;T+=l)e[0]=n[T],e[1]=n[T+1],e[2]=n[T+2],g(e,e,h),n[T]=e[0],n[T+1]=e[1],n[T+2]=e[2];return n}},2825:function(v){v.exports=p;function p(r,e,s){var n=new Float32Array(3);return n[0]=r,n[1]=e,n[2]=s,n}},2931:function(v,p,r){v.exports={EPSILON:r(2613),create:r(1091),clone:r(3126),angle:r(8192),fromValues:r(2825),copy:r(3990),set:r(1463),equals:r(9922),exactEquals:r(9265),add:r(5632),subtract:r(6843),sub:r(2229),multiply:r(5847),mul:r(4505),divide:r(6690),div:r(4008),min:r(8107),max:r(7417),floor:r(2681),ceil:r(9226),round:r(2447),scale:r(6621),scaleAndAdd:r(8489),distance:r(7056),dist:r(5455),squaredDistance:r(2953),sqrDist:r(6141),length:r(1387),len:r(868),squaredLength:r(3066),sqrLen:r(5486),negate:r(5093),inverse:r(811),normalize:r(3536),dot:r(244),cross:r(5911),lerp:r(6658),random:r(7636),transformMat4:r(5673),transformMat3:r(492),transformQuat:r(264),rotateX:r(6894),rotateY:r(109),rotateZ:r(8692),forEach:r(5137)}},811:function(v){v.exports=p;function p(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}},868:function(v,p,r){v.exports=r(1387)},1387:function(v){v.exports=p;function p(r){var e=r[0],s=r[1],n=r[2];return Math.sqrt(e*e+s*s+n*n)}},6658:function(v){v.exports=p;function p(r,e,s,n){var l=e[0],f=e[1],u=e[2];return r[0]=l+n*(s[0]-l),r[1]=f+n*(s[1]-f),r[2]=u+n*(s[2]-u),r}},7417:function(v){v.exports=p;function p(r,e,s){return r[0]=Math.max(e[0],s[0]),r[1]=Math.max(e[1],s[1]),r[2]=Math.max(e[2],s[2]),r}},8107:function(v){v.exports=p;function p(r,e,s){return r[0]=Math.min(e[0],s[0]),r[1]=Math.min(e[1],s[1]),r[2]=Math.min(e[2],s[2]),r}},4505:function(v,p,r){v.exports=r(5847)},5847:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]*s[0],r[1]=e[1]*s[1],r[2]=e[2]*s[2],r}},5093:function(v){v.exports=p;function p(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}},3536:function(v){v.exports=p;function p(r,e){var s=e[0],n=e[1],l=e[2],f=s*s+n*n+l*l;return f>0&&(f=1/Math.sqrt(f),r[0]=e[0]*f,r[1]=e[1]*f,r[2]=e[2]*f),r}},7636:function(v){v.exports=p;function p(r,e){e=e||1;var s=Math.random()*2*Math.PI,n=Math.random()*2-1,l=Math.sqrt(1-n*n)*e;return r[0]=Math.cos(s)*l,r[1]=Math.sin(s)*l,r[2]=n*e,r}},6894:function(v){v.exports=p;function p(r,e,s,n){var l=s[1],f=s[2],u=e[1]-l,g=e[2]-f,h=Math.sin(n),T=Math.cos(n);return r[0]=e[0],r[1]=l+u*T-g*h,r[2]=f+u*h+g*T,r}},109:function(v){v.exports=p;function p(r,e,s,n){var l=s[0],f=s[2],u=e[0]-l,g=e[2]-f,h=Math.sin(n),T=Math.cos(n);return r[0]=l+g*h+u*T,r[1]=e[1],r[2]=f+g*T-u*h,r}},8692:function(v){v.exports=p;function p(r,e,s,n){var l=s[0],f=s[1],u=e[0]-l,g=e[1]-f,h=Math.sin(n),T=Math.cos(n);return r[0]=l+u*T-g*h,r[1]=f+u*h+g*T,r[2]=e[2],r}},2447:function(v){v.exports=p;function p(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}},6621:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r}},8489:function(v){v.exports=p;function p(r,e,s,n){return r[0]=e[0]+s[0]*n,r[1]=e[1]+s[1]*n,r[2]=e[2]+s[2]*n,r}},1463:function(v){v.exports=p;function p(r,e,s,n){return r[0]=e,r[1]=s,r[2]=n,r}},6141:function(v,p,r){v.exports=r(2953)},5486:function(v,p,r){v.exports=r(3066)},2953:function(v){v.exports=p;function p(r,e){var s=e[0]-r[0],n=e[1]-r[1],l=e[2]-r[2];return s*s+n*n+l*l}},3066:function(v){v.exports=p;function p(r){var e=r[0],s=r[1],n=r[2];return e*e+s*s+n*n}},2229:function(v,p,r){v.exports=r(6843)},6843:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],r}},492:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2];return r[0]=n*s[0]+l*s[3]+f*s[6],r[1]=n*s[1]+l*s[4]+f*s[7],r[2]=n*s[2]+l*s[5]+f*s[8],r}},5673:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=s[3]*n+s[7]*l+s[11]*f+s[15];return u=u||1,r[0]=(s[0]*n+s[4]*l+s[8]*f+s[12])/u,r[1]=(s[1]*n+s[5]*l+s[9]*f+s[13])/u,r[2]=(s[2]*n+s[6]*l+s[10]*f+s[14])/u,r}},264:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=s[0],g=s[1],h=s[2],T=s[3],c=T*n+g*f-h*l,i=T*l+h*n-u*f,d=T*f+u*l-g*n,x=-u*n-g*l-h*f;return r[0]=c*T+x*-u+i*-h-d*-g,r[1]=i*T+x*-g+d*-u-c*-h,r[2]=d*T+x*-h+c*-g-i*-u,r}},4361:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]+s[0],r[1]=e[1]+s[1],r[2]=e[2]+s[2],r[3]=e[3]+s[3],r}},2335:function(v){v.exports=p;function p(r){var e=new Float32Array(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}},2933:function(v){v.exports=p;function p(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}},7536:function(v){v.exports=p;function p(){var r=new Float32Array(4);return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}},4691:function(v){v.exports=p;function p(r,e){var s=e[0]-r[0],n=e[1]-r[1],l=e[2]-r[2],f=e[3]-r[3];return Math.sqrt(s*s+n*n+l*l+f*f)}},1373:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]/s[0],r[1]=e[1]/s[1],r[2]=e[2]/s[2],r[3]=e[3]/s[3],r}},3750:function(v){v.exports=p;function p(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}},3390:function(v){v.exports=p;function p(r,e,s,n){var l=new Float32Array(4);return l[0]=r,l[1]=e,l[2]=s,l[3]=n,l}},9970:function(v,p,r){v.exports={create:r(7536),clone:r(2335),fromValues:r(3390),copy:r(2933),set:r(4578),add:r(4361),subtract:r(6860),multiply:r(3576),divide:r(1373),min:r(2334),max:r(160),scale:r(9288),scaleAndAdd:r(4844),distance:r(4691),squaredDistance:r(7960),length:r(6808),squaredLength:r(483),negate:r(1498),inverse:r(4494),normalize:r(5177),dot:r(3750),lerp:r(2573),random:r(9131),transformMat4:r(5352),transformQuat:r(4041)}},4494:function(v){v.exports=p;function p(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}},6808:function(v){v.exports=p;function p(r){var e=r[0],s=r[1],n=r[2],l=r[3];return Math.sqrt(e*e+s*s+n*n+l*l)}},2573:function(v){v.exports=p;function p(r,e,s,n){var l=e[0],f=e[1],u=e[2],g=e[3];return r[0]=l+n*(s[0]-l),r[1]=f+n*(s[1]-f),r[2]=u+n*(s[2]-u),r[3]=g+n*(s[3]-g),r}},160:function(v){v.exports=p;function p(r,e,s){return r[0]=Math.max(e[0],s[0]),r[1]=Math.max(e[1],s[1]),r[2]=Math.max(e[2],s[2]),r[3]=Math.max(e[3],s[3]),r}},2334:function(v){v.exports=p;function p(r,e,s){return r[0]=Math.min(e[0],s[0]),r[1]=Math.min(e[1],s[1]),r[2]=Math.min(e[2],s[2]),r[3]=Math.min(e[3],s[3]),r}},3576:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]*s[0],r[1]=e[1]*s[1],r[2]=e[2]*s[2],r[3]=e[3]*s[3],r}},1498:function(v){v.exports=p;function p(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}},5177:function(v){v.exports=p;function p(r,e){var s=e[0],n=e[1],l=e[2],f=e[3],u=s*s+n*n+l*l+f*f;return u>0&&(u=1/Math.sqrt(u),r[0]=s*u,r[1]=n*u,r[2]=l*u,r[3]=f*u),r}},9131:function(v,p,r){var e=r(5177),s=r(9288);v.exports=n;function n(l,f){return f=f||1,l[0]=Math.random(),l[1]=Math.random(),l[2]=Math.random(),l[3]=Math.random(),e(l,l),s(l,l,f),l}},9288:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]*s,r[1]=e[1]*s,r[2]=e[2]*s,r[3]=e[3]*s,r}},4844:function(v){v.exports=p;function p(r,e,s,n){return r[0]=e[0]+s[0]*n,r[1]=e[1]+s[1]*n,r[2]=e[2]+s[2]*n,r[3]=e[3]+s[3]*n,r}},4578:function(v){v.exports=p;function p(r,e,s,n,l){return r[0]=e,r[1]=s,r[2]=n,r[3]=l,r}},7960:function(v){v.exports=p;function p(r,e){var s=e[0]-r[0],n=e[1]-r[1],l=e[2]-r[2],f=e[3]-r[3];return s*s+n*n+l*l+f*f}},483:function(v){v.exports=p;function p(r){var e=r[0],s=r[1],n=r[2],l=r[3];return e*e+s*s+n*n+l*l}},6860:function(v){v.exports=p;function p(r,e,s){return r[0]=e[0]-s[0],r[1]=e[1]-s[1],r[2]=e[2]-s[2],r[3]=e[3]-s[3],r}},5352:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=e[3];return r[0]=s[0]*n+s[4]*l+s[8]*f+s[12]*u,r[1]=s[1]*n+s[5]*l+s[9]*f+s[13]*u,r[2]=s[2]*n+s[6]*l+s[10]*f+s[14]*u,r[3]=s[3]*n+s[7]*l+s[11]*f+s[15]*u,r}},4041:function(v){v.exports=p;function p(r,e,s){var n=e[0],l=e[1],f=e[2],u=s[0],g=s[1],h=s[2],T=s[3],c=T*n+g*f-h*l,i=T*l+h*n-u*f,d=T*f+u*l-g*n,x=-u*n-g*l-h*f;return r[0]=c*T+x*-u+i*-h-d*-g,r[1]=i*T+x*-g+d*-u-c*-h,r[2]=d*T+x*-h+c*-g-i*-u,r[3]=e[3],r}},1848:function(v,p,r){var e=r(4905),s=r(6468);v.exports=n;function n(l){for(var f=Array.isArray(l)?l:e(l),u=0;u<f.length;u++){var g=f[u];if(g.type==="preprocessor"){var h=g.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var T=h[1],c=h[2];return(T?s(c):c).trim()}}}}},5874:function(v,p,r){v.exports=m;var e=r(620),s=r(7827),n=r(6852),l=r(7932),f=r(3508),u=999,g=9999,h=0,T=1,c=2,i=3,d=4,x=5,w=6,C=7,y=8,S=9,M=10,a=11,E=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function m(k){var I=0,O=0,z=u,B,F,_=[],N=[],G=1,X=0,$=0,et=!1,ot=!1,nt="",Z;k=k||{};var Q=n,W=e;k.version==="300 es"&&(Q=f,W=l);for(var J={},it={},I=0;I<Q.length;I++)J[Q[I]]=!0;for(var I=0;I<W.length;I++)it[W[I]]=!0;return function(Rt){return N=[],Rt!==null?H(Rt):at()};function K(Rt){Rt.length&&N.push({type:E[z],data:Rt,position:$,line:G,column:X})}function H(Rt){I=0,Rt.toString&&(Rt=Rt.toString()),nt+=Rt.replace(/\r\n/g,`
`),Z=nt.length;for(var Tt;B=nt[I],I<Z;){switch(Tt=I,z){case h:I=gt();break;case T:I=mt();break;case c:I=dt();break;case i:I=Mt();break;case d:I=xt();break;case a:I=zt();break;case x:I=Ct();break;case g:I=wt();break;case S:I=lt();break;case u:I=tt();break}if(Tt!==I)switch(nt[Tt]){case`
`:X=0,++G;break;default:++X;break}}return O+=I,nt=nt.slice(I),N}function at(Rt){return _.length&&K(_.join("")),z=M,K("(eof)"),N}function tt(){return _=_.length?[]:_,F==="/"&&B==="*"?($=O+I-1,z=h,F=B,I+1):F==="/"&&B==="/"?($=O+I-1,z=T,F=B,I+1):B==="#"?(z=c,$=O+I,I):/\s/.test(B)?(z=S,$=O+I,I):(et=/\d/.test(B),ot=/[^\w_]/.test(B),$=O+I,z=et?d:ot?i:g,I)}function lt(){return/[^\s]/g.test(B)?(K(_.join("")),z=u,I):(_.push(B),F=B,I+1)}function dt(){return(B==="\r"||B===`
`)&&F!=="\\"?(K(_.join("")),z=u,I):(_.push(B),F=B,I+1)}function mt(){return dt()}function gt(){return B==="/"&&F==="*"?(_.push(B),K(_.join("")),z=u,I+1):(_.push(B),F=B,I+1)}function Mt(){if(F==="."&&/\d/.test(B))return z=x,I;if(F==="/"&&B==="*")return z=h,I;if(F==="/"&&B==="/")return z=T,I;if(B==="."&&_.length){for(;Lt(_););return z=x,I}if(B===";"||B===")"||B==="("){if(_.length)for(;Lt(_););return K(B),z=u,I+1}var Rt=_.length===2&&B!=="=";if(/[\w_\d\s]/.test(B)||Rt){for(;Lt(_););return z=u,I}return _.push(B),F=B,I+1}function Lt(Rt){var Tt=0,Bt,Gt;do{if(Bt=s.indexOf(Rt.slice(0,Rt.length+Tt).join("")),Gt=s[Bt],Bt===-1){if(Tt--+Rt.length>0)continue;Gt=Rt.slice(0,1).join("")}return K(Gt),$+=Gt.length,_=_.slice(Gt.length),_.length}while(!0)}function zt(){return/[^a-fA-F0-9]/.test(B)?(K(_.join("")),z=u,I):(_.push(B),F=B,I+1)}function xt(){return B==="."||/[eE]/.test(B)?(_.push(B),z=x,F=B,I+1):B==="x"&&_.length===1&&_[0]==="0"?(z=a,_.push(B),F=B,I+1):/[^\d]/.test(B)?(K(_.join("")),z=u,I):(_.push(B),F=B,I+1)}function Ct(){return B==="f"&&(_.push(B),F=B,I+=1),/[eE]/.test(B)||(B==="-"||B==="+")&&/[eE]/.test(F)?(_.push(B),F=B,I+1):/[^\d]/.test(B)?(K(_.join("")),z=u,I):(_.push(B),F=B,I+1)}function wt(){if(/[^\d\w_]/.test(B)){var Rt=_.join("");return it[Rt]?z=y:J[Rt]?z=C:z=w,K(_.join("")),z=u,I}return _.push(B),F=B,I+1}}},3508:function(v,p,r){var e=r(6852);e=e.slice().filter(function(s){return!/^(gl\_|texture)/.test(s)}),v.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(v){v.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(v,p,r){var e=r(620);v.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(v){v.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(v){v.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(v,p,r){var e=r(5874);v.exports=s;function s(n,l){var f=e(l),u=[];return u=u.concat(f(n)),u=u.concat(f(null)),u}},3236:function(v){v.exports=function(p){typeof p=="string"&&(p=[p]);for(var r=[].slice.call(arguments,1),e=[],s=0;s<p.length-1;s++)e.push(p[s],r[s]||"");return e.push(p[s]),e.join("")}},7520:function(v,p,r){var e=r(9507);function s(){var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{n=!1}return n}v.exports=e&&s()},3778:function(v,p){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */p.read=function(r,e,s,n,l){var f,u,g=l*8-n-1,h=(1<<g)-1,T=h>>1,c=-7,i=s?l-1:0,d=s?-1:1,x=r[e+i];for(i+=d,f=x&(1<<-c)-1,x>>=-c,c+=g;c>0;f=f*256+r[e+i],i+=d,c-=8);for(u=f&(1<<-c)-1,f>>=-c,c+=n;c>0;u=u*256+r[e+i],i+=d,c-=8);if(f===0)f=1-T;else{if(f===h)return u?NaN:(x?-1:1)*(1/0);u=u+Math.pow(2,n),f=f-T}return(x?-1:1)*u*Math.pow(2,f-n)},p.write=function(r,e,s,n,l,f){var u,g,h,T=f*8-l-1,c=(1<<T)-1,i=c>>1,d=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=n?0:f-1,w=n?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(g=isNaN(e)?1:0,u=c):(u=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-u))<1&&(u--,h*=2),u+i>=1?e+=d/h:e+=d*Math.pow(2,1-i),e*h>=2&&(u++,h/=2),u+i>=c?(g=0,u=c):u+i>=1?(g=(e*h-1)*Math.pow(2,l),u=u+i):(g=e*Math.pow(2,i-1)*Math.pow(2,l),u=0));l>=8;r[s+x]=g&255,x+=w,g/=256,l-=8);for(u=u<<l|g,T+=l;T>0;r[s+x]=u&255,x+=w,u/=256,T-=8);r[s+x-w]|=C*128}},8954:function(v,p,r){v.exports=i;var e=r(3250),s=r(6803).Fw;function n(d,x,w){this.vertices=d,this.adjacent=x,this.boundary=w,this.lastVisited=-1}n.prototype.flip=function(){var d=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=d;var x=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=x};function l(d,x,w){this.vertices=d,this.cell=x,this.index=w}function f(d,x){return s(d.vertices,x.vertices)}function u(d){return function(){var x=this.tuple;return d.apply(this,x)}}function g(d){var x=e[d+1];return x||(x=e),u(x)}var h=[];function T(d,x,w){this.dimension=d,this.vertices=x,this.simplices=w,this.interior=w.filter(function(S){return!S.boundary}),this.tuple=new Array(d+1);for(var C=0;C<=d;++C)this.tuple[C]=this.vertices[C];var y=h[d];y||(y=h[d]=g(d)),this.orient=y}var c=T.prototype;c.handleBoundaryDegeneracy=function(d,x){var w=this.dimension,C=this.vertices.length-1,y=this.tuple,S=this.vertices,M=[d];for(d.lastVisited=-C;M.length>0;){d=M.pop();for(var a=d.adjacent,E=0;E<=w;++E){var m=a[E];if(!(!m.boundary||m.lastVisited<=-C)){for(var k=m.vertices,I=0;I<=w;++I){var O=k[I];O<0?y[I]=x:y[I]=S[O]}var z=this.orient();if(z>0)return m;m.lastVisited=-C,z===0&&M.push(m)}}}return null},c.walk=function(d,x){var w=this.vertices.length-1,C=this.dimension,y=this.vertices,S=this.tuple,M=x?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[M];t:for(;!a.boundary;){for(var E=a.vertices,m=a.adjacent,k=0;k<=C;++k)S[k]=y[E[k]];a.lastVisited=w;for(var k=0;k<=C;++k){var I=m[k];if(!(I.lastVisited>=w)){var O=S[k];S[k]=d;var z=this.orient();if(S[k]=O,z<0){a=I;continue t}else I.boundary?I.lastVisited=-w:I.lastVisited=w}}return}return a},c.addPeaks=function(d,x){var w=this.vertices.length-1,C=this.dimension,y=this.vertices,S=this.tuple,M=this.interior,a=this.simplices,E=[x];x.lastVisited=w,x.vertices[x.vertices.indexOf(-1)]=w,x.boundary=!1,M.push(x);for(var m=[];E.length>0;){var x=E.pop(),k=x.vertices,I=x.adjacent,O=k.indexOf(w);if(!(O<0)){for(var z=0;z<=C;++z)if(z!==O){var B=I[z];if(!(!B.boundary||B.lastVisited>=w)){var F=B.vertices;if(B.lastVisited!==-w){for(var _=0,N=0;N<=C;++N)F[N]<0?(_=N,S[N]=d):S[N]=y[F[N]];var G=this.orient();if(G>0){F[_]=w,B.boundary=!1,M.push(B),E.push(B),B.lastVisited=w;continue}else B.lastVisited=-w}var X=B.adjacent,$=k.slice(),et=I.slice(),ot=new n($,et,!0);a.push(ot);var nt=X.indexOf(x);if(!(nt<0)){X[nt]=ot,et[O]=B,$[z]=-1,et[z]=x,I[z]=ot,ot.flip();for(var N=0;N<=C;++N){var Z=$[N];if(!(Z<0||Z===w)){for(var Q=new Array(C-1),W=0,J=0;J<=C;++J){var it=$[J];it<0||J===N||(Q[W++]=it)}m.push(new l(Q,ot,N))}}}}}}}m.sort(f);for(var z=0;z+1<m.length;z+=2){var K=m[z],H=m[z+1],at=K.index,tt=H.index;at<0||tt<0||(K.cell.adjacent[K.index]=H.cell,H.cell.adjacent[H.index]=K.cell)}},c.insert=function(d,x){var w=this.vertices;w.push(d);var C=this.walk(d,x);if(C){for(var y=this.dimension,S=this.tuple,M=0;M<=y;++M){var a=C.vertices[M];a<0?S[M]=d:S[M]=w[a]}var E=this.orient(S);E<0||E===0&&(C=this.handleBoundaryDegeneracy(C,d),!C)||this.addPeaks(d,C)}},c.boundary=function(){for(var d=this.dimension,x=[],w=this.simplices,C=w.length,y=0;y<C;++y){var S=w[y];if(S.boundary){for(var M=new Array(d),a=S.vertices,E=0,m=0,k=0;k<=d;++k)a[k]>=0?M[E++]=a[k]:m=k&1;if(m===(d&1)){var I=M[0];M[0]=M[1],M[1]=I}x.push(M)}}return x};function i(d,x){var w=d.length;if(w===0)throw new Error("Must have at least d+1 points");var C=d[0].length;if(w<=C)throw new Error("Must input at least d+1 points");var y=d.slice(0,C+1),S=e.apply(void 0,y);if(S===0)throw new Error("Input not in general position");for(var M=new Array(C+1),a=0;a<=C;++a)M[a]=a;S<0&&(M[0]=1,M[1]=0);for(var E=new n(M,new Array(C+1),!1),m=E.adjacent,k=new Array(C+2),a=0;a<=C;++a){for(var I=M.slice(),O=0;O<=C;++O)O===a&&(I[O]=-1);var z=I[0];I[0]=I[1],I[1]=z;var B=new n(I,new Array(C+1),!0);m[a]=B,k[a]=B}k[C+1]=E;for(var a=0;a<=C;++a)for(var I=m[a].vertices,F=m[a].adjacent,O=0;O<=C;++O){var _=I[O];if(_<0){F[O]=E;continue}for(var N=0;N<=C;++N)m[N].vertices.indexOf(_)<0&&(F[O]=m[N])}for(var G=new T(C,y,k),X=!!x,a=C+1;a<w;++a)G.insert(d[a],X);return G.boundary()}},3352:function(v,p,r){var e=r(2478),s=0,n=1,l=2;v.exports=E;function f(m,k,I,O,z){this.mid=m,this.left=k,this.right=I,this.leftPoints=O,this.rightPoints=z,this.count=(k?k.count:0)+(I?I.count:0)+O.length}var u=f.prototype;function g(m,k){m.mid=k.mid,m.left=k.left,m.right=k.right,m.leftPoints=k.leftPoints,m.rightPoints=k.rightPoints,m.count=k.count}function h(m,k){var I=S(k);m.mid=I.mid,m.left=I.left,m.right=I.right,m.leftPoints=I.leftPoints,m.rightPoints=I.rightPoints,m.count=I.count}function T(m,k){var I=m.intervals([]);I.push(k),h(m,I)}function c(m,k){var I=m.intervals([]),O=I.indexOf(k);return O<0?s:(I.splice(O,1),h(m,I),n)}u.intervals=function(m){return m.push.apply(m,this.leftPoints),this.left&&this.left.intervals(m),this.right&&this.right.intervals(m),m},u.insert=function(m){var k=this.count-this.leftPoints.length;if(this.count+=1,m[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?T(this,m):this.left.insert(m):this.left=S([m]);else if(m[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?T(this,m):this.right.insert(m):this.right=S([m]);else{var I=e.ge(this.leftPoints,m,C),O=e.ge(this.rightPoints,m,y);this.leftPoints.splice(I,0,m),this.rightPoints.splice(O,0,m)}},u.remove=function(m){var k=this.count-this.leftPoints;if(m[1]<this.mid){if(!this.left)return s;var I=this.right?this.right.count:0;if(4*I>3*(k-1))return c(this,m);var O=this.left.remove(m);return O===l?(this.left=null,this.count-=1,n):(O===n&&(this.count-=1),O)}else if(m[0]>this.mid){if(!this.right)return s;var z=this.left?this.left.count:0;if(4*z>3*(k-1))return c(this,m);var O=this.right.remove(m);return O===l?(this.right=null,this.count-=1,n):(O===n&&(this.count-=1),O)}else{if(this.count===1)return this.leftPoints[0]===m?l:s;if(this.leftPoints.length===1&&this.leftPoints[0]===m){if(this.left&&this.right){for(var B=this,F=this.left;F.right;)B=F,F=F.right;if(B===this)F.right=this.right;else{var _=this.left,O=this.right;B.count-=F.count,B.right=F.left,F.left=_,F.right=O}g(this,F),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?g(this,this.left):g(this,this.right);return n}for(var _=e.ge(this.leftPoints,m,C);_<this.leftPoints.length&&this.leftPoints[_][0]===m[0];++_)if(this.leftPoints[_]===m){this.count-=1,this.leftPoints.splice(_,1);for(var O=e.ge(this.rightPoints,m,y);O<this.rightPoints.length&&this.rightPoints[O][1]===m[1];++O)if(this.rightPoints[O]===m)return this.rightPoints.splice(O,1),n}return s}};function i(m,k,I){for(var O=0;O<m.length&&m[O][0]<=k;++O){var z=I(m[O]);if(z)return z}}function d(m,k,I){for(var O=m.length-1;O>=0&&m[O][1]>=k;--O){var z=I(m[O]);if(z)return z}}function x(m,k){for(var I=0;I<m.length;++I){var O=k(m[I]);if(O)return O}}u.queryPoint=function(m,k){if(m<this.mid){if(this.left){var I=this.left.queryPoint(m,k);if(I)return I}return i(this.leftPoints,m,k)}else if(m>this.mid){if(this.right){var I=this.right.queryPoint(m,k);if(I)return I}return d(this.rightPoints,m,k)}else return x(this.leftPoints,k)},u.queryInterval=function(m,k,I){if(m<this.mid&&this.left){var O=this.left.queryInterval(m,k,I);if(O)return O}if(k>this.mid&&this.right){var O=this.right.queryInterval(m,k,I);if(O)return O}return k<this.mid?i(this.leftPoints,k,I):m>this.mid?d(this.rightPoints,m,I):x(this.leftPoints,I)};function w(m,k){return m-k}function C(m,k){var I=m[0]-k[0];return I||m[1]-k[1]}function y(m,k){var I=m[1]-k[1];return I||m[0]-k[0]}function S(m){if(m.length===0)return null;for(var k=[],I=0;I<m.length;++I)k.push(m[I][0],m[I][1]);k.sort(w);for(var O=k[k.length>>1],z=[],B=[],F=[],I=0;I<m.length;++I){var _=m[I];_[1]<O?z.push(_):O<_[0]?B.push(_):F.push(_)}var N=F,G=F.slice();return N.sort(C),G.sort(y),new f(O,S(z),S(B),N,G)}function M(m){this.root=m}var a=M.prototype;a.insert=function(m){this.root?this.root.insert(m):this.root=new f(m[0],null,null,[m],[m])},a.remove=function(m){if(this.root){var k=this.root.remove(m);return k===l&&(this.root=null),k!==s}return!1},a.queryPoint=function(m,k){if(this.root)return this.root.queryPoint(m,k)},a.queryInterval=function(m,k,I){if(m<=k&&this.root)return this.root.queryInterval(m,k,I)},Object.defineProperty(a,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(a,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function E(m){return!m||m.length===0?new M(null):new M(S(m))}},7762:function(v){function p(r){for(var e=new Array(r),s=0;s<r;++s)e[s]=s;return e}v.exports=p},9507:function(v){v.exports=!0},7163:function(v){/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/v.exports=function(e){return e!=null&&(p(e)||r(e)||!!e._isBuffer)};function p(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function r(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&p(e.slice(0,0))}},5219:function(v){v.exports=function(p){for(var r=p.length,e,s=0;s<r;s++)if(e=p.charCodeAt(s),(e<9||e>13)&&e!==32&&e!==133&&e!==160&&e!==5760&&e!==6158&&(e<8192||e>8205)&&e!==8232&&e!==8233&&e!==8239&&e!==8287&&e!==8288&&e!==12288&&e!==65279)return!1;return!0}},395:function(v){function p(r,e,s){return r*(1-s)+e*s}v.exports=p},2652:function(v,p,r){var e=r(4335),s=r(6864),n=r(1903),l=r(9921),f=r(7608),u=r(5665),g={length:r(1387),normalize:r(3536),dot:r(244),cross:r(5911)},h=s(),T=s(),c=[0,0,0,0],i=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];v.exports=function(S,M,a,E,m,k){if(M||(M=[0,0,0]),a||(a=[0,0,0]),E||(E=[0,0,0]),m||(m=[0,0,0,1]),k||(k=[0,0,0,1]),!e(h,S)||(n(T,h),T[3]=0,T[7]=0,T[11]=0,T[15]=1,Math.abs(l(T)<1e-8)))return!1;var I=h[3],O=h[7],z=h[11],B=h[12],F=h[13],_=h[14],N=h[15];if(I!==0||O!==0||z!==0){c[0]=I,c[1]=O,c[2]=z,c[3]=N;var G=f(T,T);if(!G)return!1;u(T,T),x(m,c,T)}else m[0]=m[1]=m[2]=0,m[3]=1;if(M[0]=B,M[1]=F,M[2]=_,w(i,h),a[0]=g.length(i[0]),g.normalize(i[0],i[0]),E[0]=g.dot(i[0],i[1]),C(i[1],i[1],i[0],1,-E[0]),a[1]=g.length(i[1]),g.normalize(i[1],i[1]),E[0]/=a[1],E[1]=g.dot(i[0],i[2]),C(i[2],i[2],i[0],1,-E[1]),E[2]=g.dot(i[1],i[2]),C(i[2],i[2],i[1],1,-E[2]),a[2]=g.length(i[2]),g.normalize(i[2],i[2]),E[1]/=a[2],E[2]/=a[2],g.cross(d,i[1],i[2]),g.dot(i[0],d)<0)for(var X=0;X<3;X++)a[X]*=-1,i[X][0]*=-1,i[X][1]*=-1,i[X][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+i[0][0]-i[1][1]-i[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-i[0][0]+i[1][1]-i[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-i[0][0]-i[1][1]+i[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+i[0][0]+i[1][1]+i[2][2],0)),i[2][1]>i[1][2]&&(k[0]=-k[0]),i[0][2]>i[2][0]&&(k[1]=-k[1]),i[1][0]>i[0][1]&&(k[2]=-k[2]),!0};function x(y,S,M){var a=S[0],E=S[1],m=S[2],k=S[3];return y[0]=M[0]*a+M[4]*E+M[8]*m+M[12]*k,y[1]=M[1]*a+M[5]*E+M[9]*m+M[13]*k,y[2]=M[2]*a+M[6]*E+M[10]*m+M[14]*k,y[3]=M[3]*a+M[7]*E+M[11]*m+M[15]*k,y}function w(y,S){y[0][0]=S[0],y[0][1]=S[1],y[0][2]=S[2],y[1][0]=S[4],y[1][1]=S[5],y[1][2]=S[6],y[2][0]=S[8],y[2][1]=S[9],y[2][2]=S[10]}function C(y,S,M,a,E){y[0]=S[0]*a+M[0]*E,y[1]=S[1]*a+M[1]*E,y[2]=S[2]*a+M[2]*E}},4335:function(v){v.exports=function(r,e){var s=e[15];if(s===0)return!1;for(var n=1/s,l=0;l<16;l++)r[l]=e[l]*n;return!0}},7442:function(v,p,r){var e=r(6658),s=r(7182),n=r(2652),l=r(9921),f=r(8648),u=c(),g=c(),h=c();v.exports=T;function T(x,w,C,y){if(l(w)===0||l(C)===0)return!1;var S=n(w,u.translate,u.scale,u.skew,u.perspective,u.quaternion),M=n(C,g.translate,g.scale,g.skew,g.perspective,g.quaternion);return!S||!M?!1:(e(h.translate,u.translate,g.translate,y),e(h.skew,u.skew,g.skew,y),e(h.scale,u.scale,g.scale,y),e(h.perspective,u.perspective,g.perspective,y),f(h.quaternion,u.quaternion,g.quaternion,y),s(x,h.translate,h.scale,h.skew,h.perspective,h.quaternion),!0)}function c(){return{translate:i(),scale:i(1),skew:i(),perspective:d(),quaternion:d()}}function i(x){return[x||0,x||0,x||0]}function d(){return[0,0,0,1]}},7182:function(v,p,r){var e={identity:r(7894),translate:r(7656),multiply:r(6760),create:r(6864),scale:r(2504),fromRotationTranslation:r(6743)};e.create();var s=e.create();v.exports=function(l,f,u,g,h,T){return e.identity(l),e.fromRotationTranslation(l,T,f),l[3]=h[0],l[7]=h[1],l[11]=h[2],l[15]=h[3],e.identity(s),g[2]!==0&&(s[9]=g[2],e.multiply(l,l,s)),g[1]!==0&&(s[9]=0,s[8]=g[1],e.multiply(l,l,s)),g[0]!==0&&(s[8]=0,s[4]=g[0],e.multiply(l,l,s)),e.scale(l,l,u),l}},4192:function(v,p,r){var e=r(2478),s=r(7442),n=r(7608),l=r(5567),f=r(2408),u=r(7089),g=r(6582),h=r(7656);r(2504);var T=r(3536),c=[0,0,0];v.exports=w;function i(C){this._components=C.slice(),this._time=[0],this.prevMatrix=C.slice(),this.nextMatrix=C.slice(),this.computedMatrix=C.slice(),this.computedInverse=C.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var d=i.prototype;d.recalcMatrix=function(C){var y=this._time,S=e.le(y,C),M=this.computedMatrix;if(!(S<0)){var a=this._components;if(S===y.length-1)for(var E=16*S,m=0;m<16;++m)M[m]=a[E++];else{for(var k=y[S+1]-y[S],E=16*S,I=this.prevMatrix,O=!0,m=0;m<16;++m)I[m]=a[E++];for(var z=this.nextMatrix,m=0;m<16;++m)z[m]=a[E++],O=O&&I[m]===z[m];if(k<1e-6||O)for(var m=0;m<16;++m)M[m]=I[m];else s(M,I,z,(C-y[S])/k)}var B=this.computedUp;B[0]=M[1],B[1]=M[5],B[2]=M[9],T(B,B);var F=this.computedInverse;n(F,M);var _=this.computedEye,N=F[15];_[0]=F[12]/N,_[1]=F[13]/N,_[2]=F[14]/N;for(var G=this.computedCenter,X=Math.exp(this.computedRadius[0]),m=0;m<3;++m)G[m]=_[m]-M[2+4*m]*X}},d.idle=function(C){if(!(C<this.lastT())){for(var y=this._components,S=y.length-16,M=0;M<16;++M)y.push(y[S++]);this._time.push(C)}},d.flush=function(C){var y=e.gt(this._time,C)-2;y<0||(this._time.splice(0,y),this._components.splice(0,16*y))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(C,y,S,M){this.recalcMatrix(C),y=y||this.computedEye,S=S||c,M=M||this.computedUp,this.setMatrix(C,g(this.computedMatrix,y,S,M));for(var a=0,E=0;E<3;++E)a+=Math.pow(S[E]-y[E],2);a=Math.log(Math.sqrt(a)),this.computedRadius[0]=a},d.rotate=function(C,y,S,M){this.recalcMatrix(C);var a=this.computedInverse;y&&f(a,a,y),S&&l(a,a,S),M&&u(a,a,M),this.setMatrix(C,n(this.computedMatrix,a))};var x=[0,0,0];d.pan=function(C,y,S,M){x[0]=-(y||0),x[1]=-(S||0),x[2]=-(M||0),this.recalcMatrix(C);var a=this.computedInverse;h(a,a,x),this.setMatrix(C,n(a,a))},d.translate=function(C,y,S,M){x[0]=y||0,x[1]=S||0,x[2]=M||0,this.recalcMatrix(C);var a=this.computedMatrix;h(a,a,x),this.setMatrix(C,a)},d.setMatrix=function(C,y){if(!(C<this.lastT())){this._time.push(C);for(var S=0;S<16;++S)this._components.push(y[S])}},d.setDistance=function(C,y){this.computedRadius[0]=y},d.setDistanceLimits=function(C,y){var S=this._limits;S[0]=C,S[1]=y},d.getDistanceLimits=function(C){var y=this._limits;return C?(C[0]=y[0],C[1]=y[1],C):y};function w(C){C=C||{};var y=C.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new i(y)}},3090:function(v,p,r){v.exports=s;var e=r(3250)[3];function s(n){var l=n.length;if(l<3){for(var d=new Array(l),f=0;f<l;++f)d[f]=f;return l===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:d}for(var u=new Array(l),f=0;f<l;++f)u[f]=f;u.sort(function(y,S){var M=n[y][0]-n[S][0];return M||n[y][1]-n[S][1]});for(var g=[u[0],u[1]],h=[u[0],u[1]],f=2;f<l;++f){for(var T=u[f],c=n[T],i=g.length;i>1&&e(n[g[i-2]],n[g[i-1]],c)<=0;)i-=1,g.pop();for(g.push(T),i=h.length;i>1&&e(n[h[i-2]],n[h[i-1]],c)>=0;)i-=1,h.pop();h.push(T)}for(var d=new Array(h.length+g.length-2),x=0,f=0,w=g.length;f<w;++f)d[x++]=g[f];for(var C=h.length-2;C>0;--C)d[x++]=h[C];return d}},351:function(v,p,r){v.exports=s;var e=r(4687);function s(n,l){l||(l=n,n=window);var f=0,u=0,g=0,h={shift:!1,alt:!1,control:!1,meta:!1},T=!1;function c(m){var k=!1;return"altKey"in m&&(k=k||m.altKey!==h.alt,h.alt=!!m.altKey),"shiftKey"in m&&(k=k||m.shiftKey!==h.shift,h.shift=!!m.shiftKey),"ctrlKey"in m&&(k=k||m.ctrlKey!==h.control,h.control=!!m.ctrlKey),"metaKey"in m&&(k=k||m.metaKey!==h.meta,h.meta=!!m.metaKey),k}function i(m,k){var I=e.x(k),O=e.y(k);"buttons"in k&&(m=k.buttons|0),(m!==f||I!==u||O!==g||c(k))&&(f=m|0,u=I||0,g=O||0,l&&l(f,u,g,h))}function d(m){i(0,m)}function x(){(f||u||g||h.shift||h.alt||h.meta||h.control)&&(u=g=0,f=0,h.shift=h.alt=h.control=h.meta=!1,l&&l(0,0,0,h))}function w(m){c(m)&&l&&l(f,u,g,h)}function C(m){e.buttons(m)===0?i(0,m):i(f,m)}function y(m){i(f|e.buttons(m),m)}function S(m){i(f&~e.buttons(m),m)}function M(){T||(T=!0,n.addEventListener("mousemove",C),n.addEventListener("mousedown",y),n.addEventListener("mouseup",S),n.addEventListener("mouseleave",d),n.addEventListener("mouseenter",d),n.addEventListener("mouseout",d),n.addEventListener("mouseover",d),n.addEventListener("blur",x),n.addEventListener("keyup",w),n.addEventListener("keydown",w),n.addEventListener("keypress",w),n!==window&&(window.addEventListener("blur",x),window.addEventListener("keyup",w),window.addEventListener("keydown",w),window.addEventListener("keypress",w)))}function a(){T&&(T=!1,n.removeEventListener("mousemove",C),n.removeEventListener("mousedown",y),n.removeEventListener("mouseup",S),n.removeEventListener("mouseleave",d),n.removeEventListener("mouseenter",d),n.removeEventListener("mouseout",d),n.removeEventListener("mouseover",d),n.removeEventListener("blur",x),n.removeEventListener("keyup",w),n.removeEventListener("keydown",w),n.removeEventListener("keypress",w),n!==window&&(window.removeEventListener("blur",x),window.removeEventListener("keyup",w),window.removeEventListener("keydown",w),window.removeEventListener("keypress",w)))}M();var E={element:n};return Object.defineProperties(E,{enabled:{get:function(){return T},set:function(m){m?M():a()},enumerable:!0},buttons:{get:function(){return f},enumerable:!0},x:{get:function(){return u},enumerable:!0},y:{get:function(){return g},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),E}},24:function(v){var p={left:0,top:0};v.exports=r;function r(s,n,l){n=n||s.currentTarget||s.srcElement,Array.isArray(l)||(l=[0,0]);var f=s.clientX||0,u=s.clientY||0,g=e(n);return l[0]=f-g.left,l[1]=u-g.top,l}function e(s){return s===window||s===document||s===document.body?p:s.getBoundingClientRect()}},4687:function(v,p){function r(l){if(typeof l=="object"){if("buttons"in l)return l.buttons;if("which"in l){var f=l.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in l){var f=l.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}p.buttons=r;function e(l){return l.target||l.srcElement||window}p.element=e;function s(l){if(typeof l=="object"){if("offsetX"in l)return l.offsetX;var f=e(l),u=f.getBoundingClientRect();return l.clientX-u.left}return 0}p.x=s;function n(l){if(typeof l=="object"){if("offsetY"in l)return l.offsetY;var f=e(l),u=f.getBoundingClientRect();return l.clientY-u.top}return 0}p.y=n},8512:function(v,p,r){var e=r(665);v.exports=s;function s(n,l,f){typeof n=="function"&&(f=!!l,l=n,n=window);var u=e("ex",n),g=function(h){f&&h.preventDefault();var T=h.deltaX||0,c=h.deltaY||0,i=h.deltaZ||0,d=h.deltaMode,x=1;switch(d){case 1:x=u;break;case 2:x=window.innerHeight;break}if(T*=x,c*=x,i*=x,T||c||i)return l(T,c,i,h)};return n.addEventListener("wheel",g),g}},2640:function(v,p,r){var e=r(1888);v.exports=l;var s={"false,0,1":function(u,g,h,T,c){return function(d,x,w,C){var y=d.shape[0]|0,S=d.shape[1]|0,M=d.data,a=d.offset|0,E=d.stride[0]|0,m=d.stride[1]|0,k=a,I,O=-E|0,z=0,B=-m|0,F=0,_=-E-m|0,N=0,G=E|0,X=m-E*y|0,$=0,et=0,ot=0,nt=2*y|0,Z=T(nt),Q=T(nt),W=0,J=0,it=-1,K=-1,H=0,at=-y|0,tt=y|0,lt=0,dt=-y-1|0,mt=y-1|0,gt=0,Mt=0,Lt=0;for($=0;$<y;++$)Z[W++]=h(M[k],x,w,C),k+=G;if(k+=X,S>0){if(et=1,Z[W++]=h(M[k],x,w,C),k+=G,y>0)for($=1,I=M[k],J=Z[W]=h(I,x,w,C),H=Z[W+it],lt=Z[W+at],gt=Z[W+dt],(J!==H||J!==lt||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,H,lt,gt,x,w,C),Mt=Q[W]=ot++),W+=1,k+=G,$=2;$<y;++$)I=M[k],J=Z[W]=h(I,x,w,C),H=Z[W+it],lt=Z[W+at],gt=Z[W+dt],(J!==H||J!==lt||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,H,lt,gt,x,w,C),Mt=Q[W]=ot++,gt!==H&&g(Q[W+it],Mt,N,z,gt,H,x,w,C)),W+=1,k+=G;for(k+=X,W=0,Lt=it,it=K,K=Lt,Lt=at,at=tt,tt=Lt,Lt=dt,dt=mt,mt=Lt,et=2;et<S;++et){if(Z[W++]=h(M[k],x,w,C),k+=G,y>0)for($=1,I=M[k],J=Z[W]=h(I,x,w,C),H=Z[W+it],lt=Z[W+at],gt=Z[W+dt],(J!==H||J!==lt||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,H,lt,gt,x,w,C),Mt=Q[W]=ot++,gt!==lt&&g(Q[W+at],Mt,F,N,lt,gt,x,w,C)),W+=1,k+=G,$=2;$<y;++$)I=M[k],J=Z[W]=h(I,x,w,C),H=Z[W+it],lt=Z[W+at],gt=Z[W+dt],(J!==H||J!==lt||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,H,lt,gt,x,w,C),Mt=Q[W]=ot++,gt!==lt&&g(Q[W+at],Mt,F,N,lt,gt,x,w,C),gt!==H&&g(Q[W+it],Mt,N,z,gt,H,x,w,C)),W+=1,k+=G;et&1&&(W=0),Lt=it,it=K,K=Lt,Lt=at,at=tt,tt=Lt,Lt=dt,dt=mt,mt=Lt,k+=X}}c(Q),c(Z)}},"false,1,0":function(u,g,h,T,c){return function(d,x,w,C){var y=d.shape[0]|0,S=d.shape[1]|0,M=d.data,a=d.offset|0,E=d.stride[0]|0,m=d.stride[1]|0,k=a,I,O=-E|0,z=0,B=-m|0,F=0,_=-E-m|0,N=0,G=m|0,X=E-m*S|0,$=0,et=0,ot=0,nt=2*S|0,Z=T(nt),Q=T(nt),W=0,J=0,it=-1,K=-1,H=0,at=-S|0,tt=S|0,lt=0,dt=-S-1|0,mt=S-1|0,gt=0,Mt=0,Lt=0;for(et=0;et<S;++et)Z[W++]=h(M[k],x,w,C),k+=G;if(k+=X,y>0){if($=1,Z[W++]=h(M[k],x,w,C),k+=G,S>0)for(et=1,I=M[k],J=Z[W]=h(I,x,w,C),lt=Z[W+at],H=Z[W+it],gt=Z[W+dt],(J!==lt||J!==H||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,lt,H,gt,x,w,C),Mt=Q[W]=ot++),W+=1,k+=G,et=2;et<S;++et)I=M[k],J=Z[W]=h(I,x,w,C),lt=Z[W+at],H=Z[W+it],gt=Z[W+dt],(J!==lt||J!==H||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,lt,H,gt,x,w,C),Mt=Q[W]=ot++,gt!==H&&g(Q[W+it],Mt,F,N,H,gt,x,w,C)),W+=1,k+=G;for(k+=X,W=0,Lt=at,at=tt,tt=Lt,Lt=it,it=K,K=Lt,Lt=dt,dt=mt,mt=Lt,$=2;$<y;++$){if(Z[W++]=h(M[k],x,w,C),k+=G,S>0)for(et=1,I=M[k],J=Z[W]=h(I,x,w,C),lt=Z[W+at],H=Z[W+it],gt=Z[W+dt],(J!==lt||J!==H||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,lt,H,gt,x,w,C),Mt=Q[W]=ot++,gt!==lt&&g(Q[W+at],Mt,N,z,gt,lt,x,w,C)),W+=1,k+=G,et=2;et<S;++et)I=M[k],J=Z[W]=h(I,x,w,C),lt=Z[W+at],H=Z[W+it],gt=Z[W+dt],(J!==lt||J!==H||J!==gt)&&(z=M[k+O],F=M[k+B],N=M[k+_],u($,et,I,z,F,N,J,lt,H,gt,x,w,C),Mt=Q[W]=ot++,gt!==H&&g(Q[W+it],Mt,F,N,H,gt,x,w,C),gt!==lt&&g(Q[W+at],Mt,N,z,gt,lt,x,w,C)),W+=1,k+=G;$&1&&(W=0),Lt=at,at=tt,tt=Lt,Lt=it,it=K,K=Lt,Lt=dt,dt=mt,mt=Lt,k+=X}}c(Q),c(Z)}}};function n(f,u,g,h,T,c){var i=[c,T].join(","),d=s[i];return d(f,u,g,e.mallocUint32,e.freeUint32)}function l(f){function u(x){throw new Error("ndarray-extract-contour: "+x)}typeof f!="object"&&u("Must specify arguments");var g=f.order;Array.isArray(g)||u("Must specify order");var h=f.arrayArguments||1;h<1&&u("Must have at least one array argument");var T=f.scalarArguments||0;T<0&&u("Scalar arg count must be > 0"),typeof f.vertex!="function"&&u("Must specify vertex creation function"),typeof f.cell!="function"&&u("Must specify cell creation function"),typeof f.phase!="function"&&u("Must specify phase function");for(var c=f.getters||[],i=new Array(h),d=0;d<h;++d)c.indexOf(d)>=0?i[d]=!0:i[d]=!1;return n(f.vertex,f.cell,f.phase,T,g,i)}},6199:function(v,p,r){var e=r(1338),s={zero:function(w,C,y,S){var M=w[0],a=y[0];S|=0;var E=0,m=a;for(E=0;E<M;++E)C[S]=0,S+=m},fdTemplate1:function(w,C,y,S,M,a,E){var m=w[0],k=y[0],I=a[0],O=-1*k,z=k;S|=0,E|=0;var B=0,F=k,_=I;for(B=0;B<m;++B)M[E]=.5*(C[S+O]-C[S+z]),S+=F,E+=_},fdTemplate2:function(w,C,y,S,M,a,E,m,k,I){var O=w[0],z=w[1],B=y[0],F=y[1],_=a[0],N=a[1],G=k[0],X=k[1],$=-1*B,et=B,ot=-1*F,nt=F;S|=0,E|=0,I|=0;var Z=0,Q=0,W=F,J=B-z*F,it=N,K=_-z*N,H=X,at=G-z*X;for(Q=0;Q<O;++Q){for(Z=0;Z<z;++Z)M[E]=.5*(C[S+$]-C[S+et]),m[I]=.5*(C[S+ot]-C[S+nt]),S+=W,E+=it,I+=H;S+=J,E+=K,I+=at}}},n={cdiff:function(w){var C={};return function(S,M,a){var E=S.dtype,m=S.order,k=M.dtype,I=M.order,O=a.dtype,z=a.order,B=[E,m.join(),k,I.join(),O,z.join()].join(),F=C[B];return F||(C[B]=F=w([E,m,k,I,O,z])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,M.data,M.stride,M.offset|0,a.data,a.stride,a.offset|0)}},zero:function(w){var C={};return function(S){var M=S.dtype,a=S.order,E=[M,a.join()].join(),m=C[E];return m||(C[E]=m=w([M,a])),m(S.shape.slice(0),S.data,S.stride,S.offset|0)}},fdTemplate1:function(w){var C={};return function(S,M){var a=S.dtype,E=S.order,m=M.dtype,k=M.order,I=[a,E.join(),m,k.join()].join(),O=C[I];return O||(C[I]=O=w([a,E,m,k])),O(S.shape.slice(0),S.data,S.stride,S.offset|0,M.data,M.stride,M.offset|0)}},fdTemplate2:function(w){var C={};return function(S,M,a){var E=S.dtype,m=S.order,k=M.dtype,I=M.order,O=a.dtype,z=a.order,B=[E,m.join(),k,I.join(),O,z.join()].join(),F=C[B];return F||(C[B]=F=w([E,m,k,I,O,z])),F(S.shape.slice(0),S.data,S.stride,S.offset|0,M.data,M.stride,M.offset|0,a.data,a.stride,a.offset|0)}}};function l(w){var C=n[w.funcName];return C(f.bind(void 0,w))}function f(w){return s[w.funcName]}function u(w){return l({funcName:w.funcName})}var g={},h={},T=u({funcName:"cdiff"}),c=u({funcName:"zero"});function i(w){return w in g?g[w]:g[w]=u({funcName:"fdTemplate"+w})}function d(w,C,y,S){return function(M,a){var E=a.shape.slice();return E[0]>2&&E[1]>2&&S(a.pick(-1,-1).lo(1,1).hi(E[0]-2,E[1]-2),M.pick(-1,-1,0).lo(1,1).hi(E[0]-2,E[1]-2),M.pick(-1,-1,1).lo(1,1).hi(E[0]-2,E[1]-2)),E[1]>2&&(y(a.pick(0,-1).lo(1).hi(E[1]-2),M.pick(0,-1,1).lo(1).hi(E[1]-2)),C(M.pick(0,-1,0).lo(1).hi(E[1]-2))),E[1]>2&&(y(a.pick(E[0]-1,-1).lo(1).hi(E[1]-2),M.pick(E[0]-1,-1,1).lo(1).hi(E[1]-2)),C(M.pick(E[0]-1,-1,0).lo(1).hi(E[1]-2))),E[0]>2&&(y(a.pick(-1,0).lo(1).hi(E[0]-2),M.pick(-1,0,0).lo(1).hi(E[0]-2)),C(M.pick(-1,0,1).lo(1).hi(E[0]-2))),E[0]>2&&(y(a.pick(-1,E[1]-1).lo(1).hi(E[0]-2),M.pick(-1,E[1]-1,0).lo(1).hi(E[0]-2)),C(M.pick(-1,E[1]-1,1).lo(1).hi(E[0]-2))),M.set(0,0,0,0),M.set(0,0,1,0),M.set(E[0]-1,0,0,0),M.set(E[0]-1,0,1,0),M.set(0,E[1]-1,0,0),M.set(0,E[1]-1,1,0),M.set(E[0]-1,E[1]-1,0,0),M.set(E[0]-1,E[1]-1,1,0),M}}function x(w){var C=w.join(),E=h[C];if(E)return E;for(var y=w.length,S=[T,c],M=1;M<=y;++M)S.push(i(M));var a=d,E=a.apply(void 0,S);return h[C]=E,E}v.exports=function(C,y,S){if(Array.isArray(S)||(typeof S=="string"?S=e(y.dimension,S):S=e(y.dimension,"clamp")),y.size===0)return C;if(y.dimension===0)return C.set(0),C;var M=x(S);return M(C,y)}},4317:function(v){function p(l,f){var u=Math.floor(f),g=f-u,h=0<=u&&u<l.shape[0],T=0<=u+1&&u+1<l.shape[0],c=h?+l.get(u):0,i=T?+l.get(u+1):0;return(1-g)*c+g*i}function r(l,f,u){var g=Math.floor(f),h=f-g,T=0<=g&&g<l.shape[0],c=0<=g+1&&g+1<l.shape[0],i=Math.floor(u),d=u-i,x=0<=i&&i<l.shape[1],w=0<=i+1&&i+1<l.shape[1],C=T&&x?l.get(g,i):0,y=T&&w?l.get(g,i+1):0,S=c&&x?l.get(g+1,i):0,M=c&&w?l.get(g+1,i+1):0;return(1-d)*((1-h)*C+h*S)+d*((1-h)*y+h*M)}function e(l,f,u,g){var h=Math.floor(f),T=f-h,c=0<=h&&h<l.shape[0],i=0<=h+1&&h+1<l.shape[0],d=Math.floor(u),x=u-d,w=0<=d&&d<l.shape[1],C=0<=d+1&&d+1<l.shape[1],y=Math.floor(g),S=g-y,M=0<=y&&y<l.shape[2],a=0<=y+1&&y+1<l.shape[2],E=c&&w&&M?l.get(h,d,y):0,m=c&&C&&M?l.get(h,d+1,y):0,k=i&&w&&M?l.get(h+1,d,y):0,I=i&&C&&M?l.get(h+1,d+1,y):0,O=c&&w&&a?l.get(h,d,y+1):0,z=c&&C&&a?l.get(h,d+1,y+1):0,B=i&&w&&a?l.get(h+1,d,y+1):0,F=i&&C&&a?l.get(h+1,d+1,y+1):0;return(1-S)*((1-x)*((1-T)*E+T*k)+x*((1-T)*m+T*I))+S*((1-x)*((1-T)*O+T*B)+x*((1-T)*z+T*F))}function s(l){var f=l.shape.length|0,u=new Array(f),g=new Array(f),h=new Array(f),T=new Array(f),c,i;for(c=0;c<f;++c)i=+arguments[c+1],u[c]=Math.floor(i),g[c]=i-u[c],h[c]=0<=u[c]&&u[c]<l.shape[c],T[c]=0<=u[c]+1&&u[c]+1<l.shape[c];var d=0,x,w,C;t:for(c=0;c<1<<f;++c){for(w=1,C=l.offset,x=0;x<f;++x)if(c&1<<x){if(!T[x])continue t;w*=g[x],C+=l.stride[x]*(u[x]+1)}else{if(!h[x])continue t;w*=1-g[x],C+=l.stride[x]*u[x]}d+=w*l.data[C]}return d}function n(l,f,u,g){switch(l.shape.length){case 0:return 0;case 1:return p(l,f);case 2:return r(l,f,u);case 3:return e(l,f,u,g);default:return s.apply(void 0,arguments)}}v.exports=n,v.exports.d1=p,v.exports.d2=r,v.exports.d3=e},5298:function(v,p){var r={"float64,2,1,0":function(){return function(h,T,c,i,d){var x=h[0],w=h[1],C=h[2],y=c[0],S=c[1],M=c[2];i|=0;var a=0,E=0,m=0,k=M,I=S-C*M,O=y-w*S;for(m=0;m<x;++m){for(E=0;E<w;++E){for(a=0;a<C;++a)T[i]/=d,i+=k;i+=I}i+=O}}},"uint8,2,0,1,float64,2,1,0":function(){return function(h,T,c,i,d,x,w,C){var y=h[0],S=h[1],M=h[2],a=c[0],E=c[1],m=c[2],k=x[0],I=x[1],O=x[2];i|=0,w|=0;for(var z=i,B=w,F=h[0]|0;F>0;){F<64?(y=F,F=0):(y=64,F-=64);for(var _=h[1]|0;_>0;){_<64?(S=_,_=0):(S=64,_-=64),i=z+F*a+_*E,w=B+F*k+_*I;var N=0,G=0,X=0,$=m,et=a-M*m,ot=E-y*a,nt=O,Z=k-M*O,Q=I-y*k;for(X=0;X<S;++X){for(G=0;G<y;++G){for(N=0;N<M;++N)T[i]=d[w]*C,i+=$,w+=nt;i+=et,w+=Z}i+=ot,w+=Q}}}}},"float32,1,0,float32,1,0":function(){return function(h,T,c,i,d,x,w){var C=h[0],y=h[1],S=c[0],M=c[1],a=x[0],E=x[1];i|=0,w|=0;var m=0,k=0,I=M,O=S-y*M,z=E,B=a-y*E;for(k=0;k<C;++k){for(m=0;m<y;++m)T[i]=d[w],i+=I,w+=z;i+=O,w+=B}}},"float32,1,0,float32,0,1":function(){return function(h,T,c,i,d,x,w){var C=h[0],y=h[1],S=c[0],M=c[1],a=x[0],E=x[1];i|=0,w|=0;for(var m=i,k=w,I=h[1]|0;I>0;){I<64?(y=I,I=0):(y=64,I-=64);for(var O=h[0]|0;O>0;){O<64?(C=O,O=0):(C=64,O-=64),i=m+I*M+O*S,w=k+I*E+O*a;var z=0,B=0,F=M,_=S-y*M,N=E,G=a-y*E;for(B=0;B<C;++B){for(z=0;z<y;++z)T[i]=d[w],i+=F,w+=N;i+=_,w+=G}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(h,T,c,i,d,x,w){var C=h[0],y=h[1],S=h[2],M=c[0],a=c[1],E=c[2],m=x[0],k=x[1],I=x[2];i|=0,w|=0;for(var O=i,z=w,B=h[2]|0;B>0;){B<64?(S=B,B=0):(S=64,B-=64);for(var F=h[0]|0;F>0;){F<64?(C=F,F=0):(C=64,F-=64);for(var _=h[1]|0;_>0;){_<64?(y=_,_=0):(y=64,_-=64),i=O+B*E+F*M+_*a,w=z+B*I+F*m+_*k;var N=0,G=0,X=0,$=E,et=M-S*E,ot=a-C*M,nt=I,Z=m-S*I,Q=k-C*m;for(X=0;X<y;++X){for(G=0;G<C;++G){for(N=0;N<S;++N)T[i]=d[w],i+=$,w+=nt;i+=et,w+=Z}i+=ot,w+=Q}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(h,T,c,i,d,x,w){var C=h[0],y=h[1],S=h[2],M=c[0],a=c[1],E=c[2],m=x[0],k=x[1],I=x[2];i|=0,w|=0;var O=0,z=0,B=0,F=E,_=M-S*E,N=a-C*M,G=I,X=m-S*I,$=k-C*m;for(B=0;B<y;++B){for(z=0;z<C;++z){for(O=0;O<S;++O)T[i]=d[w],i+=F,w+=G;i+=_,w+=X}i+=N,w+=$}}}};function e(g,h){var T=h.join(","),c=r[T];return c()}var s=e,n={mul:function(g){var h={};return function(c,i,d){var x=c.dtype,w=c.order,C=i.dtype,y=i.order,S=d.dtype,M=d.order,a=[x,w.join(),C,y.join(),S,M.join()].join(),E=h[a];return E||(h[a]=E=g([x,w,C,y,S,M])),E(c.shape.slice(0),c.data,c.stride,c.offset|0,i.data,i.stride,i.offset|0,d.data,d.stride,d.offset|0)}},muls:function(g){var h={};return function(c,i,d){var x=c.dtype,w=c.order,C=i.dtype,y=i.order,S=[x,w.join(),C,y.join()].join(),M=h[S];return M||(h[S]=M=g([x,w,C,y])),M(c.shape.slice(0),c.data,c.stride,c.offset|0,i.data,i.stride,i.offset|0,d)}},mulseq:function(g){var h={};return function(c,i){var d=c.dtype,x=c.order,w=[d,x.join()].join(),C=h[w];return C||(h[w]=C=g([d,x])),C(c.shape.slice(0),c.data,c.stride,c.offset|0,i)}},div:function(g){var h={};return function(c,i,d){var x=c.dtype,w=c.order,C=i.dtype,y=i.order,S=d.dtype,M=d.order,a=[x,w.join(),C,y.join(),S,M.join()].join(),E=h[a];return E||(h[a]=E=g([x,w,C,y,S,M])),E(c.shape.slice(0),c.data,c.stride,c.offset|0,i.data,i.stride,i.offset|0,d.data,d.stride,d.offset|0)}},divs:function(g){var h={};return function(c,i,d){var x=c.dtype,w=c.order,C=i.dtype,y=i.order,S=[x,w.join(),C,y.join()].join(),M=h[S];return M||(h[S]=M=g([x,w,C,y])),M(c.shape.slice(0),c.data,c.stride,c.offset|0,i.data,i.stride,i.offset|0,d)}},divseq:function(g){var h={};return function(c,i){var d=c.dtype,x=c.order,w=[d,x.join()].join(),C=h[w];return C||(h[w]=C=g([d,x])),C(c.shape.slice(0),c.data,c.stride,c.offset|0,i)}},assign:function(g){var h={};return function(c,i){var d=c.dtype,x=c.order,w=i.dtype,C=i.order,y=[d,x.join(),w,C.join()].join(),S=h[y];return S||(h[y]=S=g([d,x,w,C])),S(c.shape.slice(0),c.data,c.stride,c.offset|0,i.data,i.stride,i.offset|0)}}};function l(g){var h=n[g.funcName];return h(s.bind(void 0,g))}function f(g){return l({funcName:g.funcName})}var u={mul:"*",div:"/"};(function(){for(var g in u)p[g]=f({funcName:g}),p[g+"s"]=f({funcName:g+"s"}),p[g+"seq"]=f({funcName:g+"seq"})})(),p.assign=f({funcName:"assign"})},9994:function(v,p,r){var e=r(9618),s=r(8277);v.exports=function(l,f){for(var u=[],g=l,h=1;Array.isArray(g);)u.push(g.length),h*=g.length,g=g[0];return u.length===0?e():(f||(f=e(new Float64Array(h),u)),s(f,l),f)}},8277:function(v){function p(){return function(f,u,g,h,T){var c=f[0],i=f[1],d=f[2],x=g[0],w=g[1],C=g[2],y=[0,0,0];h|=0;var S=0,M=0,a=0,E=C,m=w-d*C,k=x-i*w;for(a=0;a<c;++a){for(M=0;M<i;++M){for(S=0;S<d;++S){{var I=T,O;for(O=0;O<y.length-1;++O)I=I[y[O]];u[h]=I[y[y.length-1]]}h+=E,++y[2]}h+=m,y[2]-=d,++y[1]}h+=k,y[1]-=i,++y[0]}}}function r(){return p()}var e=r;function s(f){var u={};return function(h,T){var c=h.dtype,i=h.order,d=[c,i.join()].join(),x=u[d];return x||(u[d]=x=f([c,i])),x(h.shape.slice(0),h.data,h.stride,h.offset|0,T)}}function n(f){return s(e.bind(void 0,f))}function l(f){return n({funcName:f.funcName})}v.exports=l({funcName:"convert"})},7640:function(v,p,r){var e=r(1888);function s(T){switch(T){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(T,c){return function(d,x,w,C,y,S,M,a,E,m,k){var I,O,z,B=d*y+C,F,_=T(a),N,G,X,$;for(I=d+1;I<=x;++I){for(O=I,B+=y,z=B,N=0,G=B,F=0;F<a;++F)_[N++]=w[G],G+=E;t:for(;O-- >d;){N=0,G=z-y;e:for(F=0;F<a;++F){if(X=w[G],$=_[N],X<$)break t;if(X>$)break e;G+=m,N+=k}for(N=z,G=z-y,F=0;F<a;++F)w[N]=w[G],N+=E,G+=E;z-=y}for(N=z,G=0,F=0;F<a;++F)w[N]=_[G++],N+=E}c(_)}}};function l(T,c){var i=s(c),d=[c,T].join(","),x=n[d];return i?x(i[0],i[1]):x()}var f={"uint32,1,0":function(T,c,i){return function d(x,w,C,y,S,M,a,E,m,k,I){var O=(w-x+1)/6|0,z=x+O,B=w-O,F=x+w>>1,_=F-O,N=F+O,G=z,X=_,$=F,et=N,ot=B,nt=x+1,Z=w-1,Q=!0,W,J,it,K,H,at,tt,lt,dt,mt=0,gt=0,Mt=0,Lt,zt,xt,Ct,wt,Rt,Tt,Bt,Gt,te,Wt,jt,ie,ue,fe,pe,Te=E,Qt=c(Te),Pt=c(Te);zt=S*G,xt=S*X,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=G,G=X,X=J;break t}if(Mt<0)break t;pe+=k}zt=S*et,xt=S*ot,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=et,et=ot,ot=J;break t}if(Mt<0)break t;pe+=k}zt=S*G,xt=S*$,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=G,G=$,$=J;break t}if(Mt<0)break t;pe+=k}zt=S*X,xt=S*$,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=X,X=$,$=J;break t}if(Mt<0)break t;pe+=k}zt=S*G,xt=S*et,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=G,G=et,et=J;break t}if(Mt<0)break t;pe+=k}zt=S*$,xt=S*et,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=$,$=et,et=J;break t}if(Mt<0)break t;pe+=k}zt=S*X,xt=S*ot,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=X,X=ot,ot=J;break t}if(Mt<0)break t;pe+=k}zt=S*X,xt=S*$,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=X,X=$,$=J;break t}if(Mt<0)break t;pe+=k}zt=S*et,xt=S*ot,pe=y;t:for(Lt=0;Lt<E;++Lt){if(tt=zt+pe,lt=xt+pe,Mt=C[tt]-C[lt],Mt>0){J=et,et=ot,ot=J;break t}if(Mt<0)break t;pe+=k}for(zt=S*G,xt=S*X,Ct=S*$,wt=S*et,Rt=S*ot,Tt=S*z,Bt=S*F,Gt=S*B,fe=0,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,dt=Ct+pe,te=wt+pe,Wt=Rt+pe,jt=Tt+pe,ie=Bt+pe,ue=Gt+pe,Qt[fe]=C[lt],Pt[fe]=C[te],Q=Q&&Qt[fe]===Pt[fe],it=C[tt],K=C[dt],H=C[Wt],C[jt]=it,C[ie]=K,C[ue]=H,++fe,pe+=m;for(zt=S*_,xt=S*x,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,C[tt]=C[lt],pe+=m;for(zt=S*N,xt=S*w,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,C[tt]=C[lt],pe+=m;if(Q)for(at=nt;at<=Z;++at){tt=y+at*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Qt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt!==0)if(Mt<0){if(at!==nt)for(zt=S*at,xt=S*nt,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;++nt}else for(;;){tt=y+Z*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Qt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt>0)Z--;else if(Mt<0){for(zt=S*at,xt=S*nt,Ct=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,dt=Ct+pe,W=C[tt],C[tt]=C[lt],C[lt]=C[dt],C[dt]=W,pe+=m;++nt,--Z;break}else{for(zt=S*at,xt=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;--Z;break}}}else for(at=nt;at<=Z;++at){tt=y+at*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(mt=C[tt]-Qt[fe],mt!==0)break t;fe+=I,tt+=k}if(mt<0){if(at!==nt)for(zt=S*at,xt=S*nt,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;++nt}else{tt=y+at*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(gt=C[tt]-Pt[fe],gt!==0)break t;fe+=I,tt+=k}if(gt>0)for(;;){tt=y+Z*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Pt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt>0){if(--Z<at)break;continue}else{tt=y+Z*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Qt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt<0){for(zt=S*at,xt=S*nt,Ct=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,dt=Ct+pe,W=C[tt],C[tt]=C[lt],C[lt]=C[dt],C[dt]=W,pe+=m;++nt,--Z}else{for(zt=S*at,xt=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;--Z}break}}}}for(zt=S*x,xt=S*(nt-1),fe=0,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,C[tt]=C[lt],C[lt]=Qt[fe],++fe,pe+=m;for(zt=S*w,xt=S*(Z+1),fe=0,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,C[tt]=C[lt],C[lt]=Pt[fe],++fe,pe+=m;if(nt-2-x<=32?T(x,nt-2,C,y,S,M,a,E,m,k,I):d(x,nt-2,C,y,S,M,a,E,m,k,I),w-(Z+2)<=32?T(Z+2,w,C,y,S,M,a,E,m,k,I):d(Z+2,w,C,y,S,M,a,E,m,k,I),Q){i(Qt),i(Pt);return}if(nt<z&&Z>B){t:for(;;){for(tt=y+nt*S,fe=0,pe=y,Lt=0;Lt<E;++Lt){if(C[tt]!==Qt[fe])break t;++fe,tt+=m}++nt}t:for(;;){for(tt=y+Z*S,fe=0,pe=y,Lt=0;Lt<E;++Lt){if(C[tt]!==Pt[fe])break t;++fe,tt+=m}--Z}for(at=nt;at<=Z;++at){tt=y+at*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(mt=C[tt]-Qt[fe],mt!==0)break t;fe+=I,tt+=k}if(mt===0){if(at!==nt)for(zt=S*at,xt=S*nt,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;++nt}else{tt=y+at*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(gt=C[tt]-Pt[fe],gt!==0)break t;fe+=I,tt+=k}if(gt===0)for(;;){tt=y+Z*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Pt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt===0){if(--Z<at)break;continue}else{tt=y+Z*S,fe=0;t:for(Lt=0;Lt<E;++Lt){if(Mt=C[tt]-Qt[fe],Mt!==0)break t;fe+=I,tt+=k}if(Mt<0){for(zt=S*at,xt=S*nt,Ct=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,dt=Ct+pe,W=C[tt],C[tt]=C[lt],C[lt]=C[dt],C[dt]=W,pe+=m;++nt,--Z}else{for(zt=S*at,xt=S*Z,pe=y,Lt=0;Lt<E;++Lt)tt=zt+pe,lt=xt+pe,W=C[tt],C[tt]=C[lt],C[lt]=W,pe+=m;--Z}break}}}}}i(Qt),i(Pt),Z-nt<=32?T(nt,Z,C,y,S,M,a,E,m,k,I):d(nt,Z,C,y,S,M,a,E,m,k,I)}}};function u(T,c,i){var d=s(c),x=[c,T].join(","),w=f[x];return T.length>1&&d?w(i,d[0],d[1]):w(i)}var g={"uint32,1,0":function(T,c){return function(i){var d=i.data,x=i.offset|0,w=i.shape,C=i.stride,y=C[0]|0,S=w[0]|0,M=C[1]|0,a=w[1]|0,E=M,m=M,k=1;S<=32?T(0,S-1,d,x,y,M,S,a,E,m,k):c(0,S-1,d,x,y,M,S,a,E,m,k)}}};function h(T,c){var i=[c,T].join(","),d=g[i],x=l(T,c),w=u(T,c,x);return d(x,w)}v.exports=h},446:function(v,p,r){var e=r(7640),s={};function n(l){var f=l.order,u=l.dtype,g=[f,u],h=g.join(":"),T=s[h];return T||(s[h]=T=e(f,u)),T(l),l}v.exports=n},9618:function(v,p,r){var e=r(7163),s=typeof Float64Array<"u";function n(c,i){return c[0]-i[0]}function l(){var c=this.stride,i=new Array(c.length),d;for(d=0;d<i.length;++d)i[d]=[Math.abs(c[d]),d];i.sort(n);var x=new Array(i.length);for(d=0;d<x.length;++d)x[d]=i[d][1];return x}var f={T:function(c){function i(x){this.data=x}var d=i.prototype;return d.dtype=c,d.index=function(){return-1},d.size=0,d.dimension=-1,d.shape=d.stride=d.order=[],d.lo=d.hi=d.transpose=d.step=function(){return new i(this.data)},d.get=d.set=function(){},d.pick=function(){return null},function(w){return new i(w)}},0:function(c,i){function d(w,C){this.data=w,this.offset=C}var x=d.prototype;return x.dtype=c,x.index=function(){return this.offset},x.dimension=0,x.size=1,x.shape=x.stride=x.order=[],x.lo=x.hi=x.transpose=x.step=function(){return new d(this.data,this.offset)},x.pick=function(){return i(this.data)},x.valueOf=x.get=function(){return c==="generic"?this.data.get(this.offset):this.data[this.offset]},x.set=function(C){return c==="generic"?this.data.set(this.offset,C):this.data[this.offset]=C},function(C,y,S,M){return new d(C,M)}},1:function(c,i,d){function x(C,y,S,M){this.data=C,this.shape=[y],this.stride=[S],this.offset=M|0}var w=x.prototype;return w.dtype=c,w.dimension=1,Object.defineProperty(w,"size",{get:function(){return this.shape[0]}}),w.order=[0],w.set=function(y,S){return c==="generic"?this.data.set(this.offset+this.stride[0]*y,S):this.data[this.offset+this.stride[0]*y]=S},w.get=function(y){return c==="generic"?this.data.get(this.offset+this.stride[0]*y):this.data[this.offset+this.stride[0]*y]},w.index=function(y){return this.offset+this.stride[0]*y},w.hi=function(y){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,this.stride[0],this.offset)},w.lo=function(y){var S=this.offset,M=0,a=this.shape[0],E=this.stride[0];return typeof y=="number"&&y>=0&&(M=y|0,S+=E*M,a-=M),new x(this.data,a,E,S)},w.step=function(y){var S=this.shape[0],M=this.stride[0],a=this.offset,E=0,m=Math.ceil;return typeof y=="number"&&(E=y|0,E<0?(a+=M*(S-1),S=m(-S/E)):S=m(S/E),M*=E),new x(this.data,S,M,a)},w.transpose=function(y){y=y===void 0?0:y|0;var S=this.shape,M=this.stride;return new x(this.data,S[y],M[y],this.offset)},w.pick=function(y){var S=[],M=[],a=this.offset;typeof y=="number"&&y>=0?a=a+this.stride[0]*y|0:(S.push(this.shape[0]),M.push(this.stride[0]));var E=i[S.length+1];return E(this.data,S,M,a)},function(y,S,M,a){return new x(y,S[0],M[0],a)}},2:function(c,i,d){function x(C,y,S,M,a,E){this.data=C,this.shape=[y,S],this.stride=[M,a],this.offset=E|0}var w=x.prototype;return w.dtype=c,w.dimension=2,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(w,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),w.set=function(y,S,M){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*S,M):this.data[this.offset+this.stride[0]*y+this.stride[1]*S]=M},w.get=function(y,S){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*S):this.data[this.offset+this.stride[0]*y+this.stride[1]*S]},w.index=function(y,S){return this.offset+this.stride[0]*y+this.stride[1]*S},w.hi=function(y,S){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof S!="number"||S<0?this.shape[1]:S|0,this.stride[0],this.stride[1],this.offset)},w.lo=function(y,S){var M=this.offset,a=0,E=this.shape[0],m=this.shape[1],k=this.stride[0],I=this.stride[1];return typeof y=="number"&&y>=0&&(a=y|0,M+=k*a,E-=a),typeof S=="number"&&S>=0&&(a=S|0,M+=I*a,m-=a),new x(this.data,E,m,k,I,M)},w.step=function(y,S){var M=this.shape[0],a=this.shape[1],E=this.stride[0],m=this.stride[1],k=this.offset,I=0,O=Math.ceil;return typeof y=="number"&&(I=y|0,I<0?(k+=E*(M-1),M=O(-M/I)):M=O(M/I),E*=I),typeof S=="number"&&(I=S|0,I<0?(k+=m*(a-1),a=O(-a/I)):a=O(a/I),m*=I),new x(this.data,M,a,E,m,k)},w.transpose=function(y,S){y=y===void 0?0:y|0,S=S===void 0?1:S|0;var M=this.shape,a=this.stride;return new x(this.data,M[y],M[S],a[y],a[S],this.offset)},w.pick=function(y,S){var M=[],a=[],E=this.offset;typeof y=="number"&&y>=0?E=E+this.stride[0]*y|0:(M.push(this.shape[0]),a.push(this.stride[0])),typeof S=="number"&&S>=0?E=E+this.stride[1]*S|0:(M.push(this.shape[1]),a.push(this.stride[1]));var m=i[M.length+1];return m(this.data,M,a,E)},function(y,S,M,a){return new x(y,S[0],S[1],M[0],M[1],a)}},3:function(c,i,d){function x(C,y,S,M,a,E,m,k){this.data=C,this.shape=[y,S,M],this.stride=[a,E,m],this.offset=k|0}var w=x.prototype;return w.dtype=c,w.dimension=3,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(w,"order",{get:function(){var y=Math.abs(this.stride[0]),S=Math.abs(this.stride[1]),M=Math.abs(this.stride[2]);return y>S?S>M?[2,1,0]:y>M?[1,2,0]:[1,0,2]:y>M?[2,0,1]:M>S?[0,1,2]:[0,2,1]}}),w.set=function(y,S,M,a){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M,a):this.data[this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M]=a},w.get=function(y,S,M){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M):this.data[this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M]},w.index=function(y,S,M){return this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M},w.hi=function(y,S,M){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof M!="number"||M<0?this.shape[2]:M|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},w.lo=function(y,S,M){var a=this.offset,E=0,m=this.shape[0],k=this.shape[1],I=this.shape[2],O=this.stride[0],z=this.stride[1],B=this.stride[2];return typeof y=="number"&&y>=0&&(E=y|0,a+=O*E,m-=E),typeof S=="number"&&S>=0&&(E=S|0,a+=z*E,k-=E),typeof M=="number"&&M>=0&&(E=M|0,a+=B*E,I-=E),new x(this.data,m,k,I,O,z,B,a)},w.step=function(y,S,M){var a=this.shape[0],E=this.shape[1],m=this.shape[2],k=this.stride[0],I=this.stride[1],O=this.stride[2],z=this.offset,B=0,F=Math.ceil;return typeof y=="number"&&(B=y|0,B<0?(z+=k*(a-1),a=F(-a/B)):a=F(a/B),k*=B),typeof S=="number"&&(B=S|0,B<0?(z+=I*(E-1),E=F(-E/B)):E=F(E/B),I*=B),typeof M=="number"&&(B=M|0,B<0?(z+=O*(m-1),m=F(-m/B)):m=F(m/B),O*=B),new x(this.data,a,E,m,k,I,O,z)},w.transpose=function(y,S,M){y=y===void 0?0:y|0,S=S===void 0?1:S|0,M=M===void 0?2:M|0;var a=this.shape,E=this.stride;return new x(this.data,a[y],a[S],a[M],E[y],E[S],E[M],this.offset)},w.pick=function(y,S,M){var a=[],E=[],m=this.offset;typeof y=="number"&&y>=0?m=m+this.stride[0]*y|0:(a.push(this.shape[0]),E.push(this.stride[0])),typeof S=="number"&&S>=0?m=m+this.stride[1]*S|0:(a.push(this.shape[1]),E.push(this.stride[1])),typeof M=="number"&&M>=0?m=m+this.stride[2]*M|0:(a.push(this.shape[2]),E.push(this.stride[2]));var k=i[a.length+1];return k(this.data,a,E,m)},function(y,S,M,a){return new x(y,S[0],S[1],S[2],M[0],M[1],M[2],a)}},4:function(c,i,d){function x(C,y,S,M,a,E,m,k,I,O){this.data=C,this.shape=[y,S,M,a],this.stride=[E,m,k,I],this.offset=O|0}var w=x.prototype;return w.dtype=c,w.dimension=4,Object.defineProperty(w,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(w,"order",{get:d}),w.set=function(y,S,M,a,E){return c==="generic"?this.data.set(this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M+this.stride[3]*a,E):this.data[this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M+this.stride[3]*a]=E},w.get=function(y,S,M,a){return c==="generic"?this.data.get(this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M+this.stride[3]*a):this.data[this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M+this.stride[3]*a]},w.index=function(y,S,M,a){return this.offset+this.stride[0]*y+this.stride[1]*S+this.stride[2]*M+this.stride[3]*a},w.hi=function(y,S,M,a){return new x(this.data,typeof y!="number"||y<0?this.shape[0]:y|0,typeof S!="number"||S<0?this.shape[1]:S|0,typeof M!="number"||M<0?this.shape[2]:M|0,typeof a!="number"||a<0?this.shape[3]:a|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},w.lo=function(y,S,M,a){var E=this.offset,m=0,k=this.shape[0],I=this.shape[1],O=this.shape[2],z=this.shape[3],B=this.stride[0],F=this.stride[1],_=this.stride[2],N=this.stride[3];return typeof y=="number"&&y>=0&&(m=y|0,E+=B*m,k-=m),typeof S=="number"&&S>=0&&(m=S|0,E+=F*m,I-=m),typeof M=="number"&&M>=0&&(m=M|0,E+=_*m,O-=m),typeof a=="number"&&a>=0&&(m=a|0,E+=N*m,z-=m),new x(this.data,k,I,O,z,B,F,_,N,E)},w.step=function(y,S,M,a){var E=this.shape[0],m=this.shape[1],k=this.shape[2],I=this.shape[3],O=this.stride[0],z=this.stride[1],B=this.stride[2],F=this.stride[3],_=this.offset,N=0,G=Math.ceil;return typeof y=="number"&&(N=y|0,N<0?(_+=O*(E-1),E=G(-E/N)):E=G(E/N),O*=N),typeof S=="number"&&(N=S|0,N<0?(_+=z*(m-1),m=G(-m/N)):m=G(m/N),z*=N),typeof M=="number"&&(N=M|0,N<0?(_+=B*(k-1),k=G(-k/N)):k=G(k/N),B*=N),typeof a=="number"&&(N=a|0,N<0?(_+=F*(I-1),I=G(-I/N)):I=G(I/N),F*=N),new x(this.data,E,m,k,I,O,z,B,F,_)},w.transpose=function(y,S,M,a){y=y===void 0?0:y|0,S=S===void 0?1:S|0,M=M===void 0?2:M|0,a=a===void 0?3:a|0;var E=this.shape,m=this.stride;return new x(this.data,E[y],E[S],E[M],E[a],m[y],m[S],m[M],m[a],this.offset)},w.pick=function(y,S,M,a){var E=[],m=[],k=this.offset;typeof y=="number"&&y>=0?k=k+this.stride[0]*y|0:(E.push(this.shape[0]),m.push(this.stride[0])),typeof S=="number"&&S>=0?k=k+this.stride[1]*S|0:(E.push(this.shape[1]),m.push(this.stride[1])),typeof M=="number"&&M>=0?k=k+this.stride[2]*M|0:(E.push(this.shape[2]),m.push(this.stride[2])),typeof a=="number"&&a>=0?k=k+this.stride[3]*a|0:(E.push(this.shape[3]),m.push(this.stride[3]));var I=i[E.length+1];return I(this.data,E,m,k)},function(y,S,M,a){return new x(y,S[0],S[1],S[2],S[3],M[0],M[1],M[2],M[3],a)}},5:function(i,d,x){function w(y,S,M,a,E,m,k,I,O,z,B,F){this.data=y,this.shape=[S,M,a,E,m],this.stride=[k,I,O,z,B],this.offset=F|0}var C=w.prototype;return C.dtype=i,C.dimension=5,Object.defineProperty(C,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(C,"order",{get:x}),C.set=function(S,M,a,E,m,k){return i==="generic"?this.data.set(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*a+this.stride[3]*E+this.stride[4]*m,k):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*a+this.stride[3]*E+this.stride[4]*m]=k},C.get=function(S,M,a,E,m){return i==="generic"?this.data.get(this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*a+this.stride[3]*E+this.stride[4]*m):this.data[this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*a+this.stride[3]*E+this.stride[4]*m]},C.index=function(S,M,a,E,m){return this.offset+this.stride[0]*S+this.stride[1]*M+this.stride[2]*a+this.stride[3]*E+this.stride[4]*m},C.hi=function(S,M,a,E,m){return new w(this.data,typeof S!="number"||S<0?this.shape[0]:S|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof a!="number"||a<0?this.shape[2]:a|0,typeof E!="number"||E<0?this.shape[3]:E|0,typeof m!="number"||m<0?this.shape[4]:m|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},C.lo=function(S,M,a,E,m){var k=this.offset,I=0,O=this.shape[0],z=this.shape[1],B=this.shape[2],F=this.shape[3],_=this.shape[4],N=this.stride[0],G=this.stride[1],X=this.stride[2],$=this.stride[3],et=this.stride[4];return typeof S=="number"&&S>=0&&(I=S|0,k+=N*I,O-=I),typeof M=="number"&&M>=0&&(I=M|0,k+=G*I,z-=I),typeof a=="number"&&a>=0&&(I=a|0,k+=X*I,B-=I),typeof E=="number"&&E>=0&&(I=E|0,k+=$*I,F-=I),typeof m=="number"&&m>=0&&(I=m|0,k+=et*I,_-=I),new w(this.data,O,z,B,F,_,N,G,X,$,et,k)},C.step=function(S,M,a,E,m){var k=this.shape[0],I=this.shape[1],O=this.shape[2],z=this.shape[3],B=this.shape[4],F=this.stride[0],_=this.stride[1],N=this.stride[2],G=this.stride[3],X=this.stride[4],$=this.offset,et=0,ot=Math.ceil;return typeof S=="number"&&(et=S|0,et<0?($+=F*(k-1),k=ot(-k/et)):k=ot(k/et),F*=et),typeof M=="number"&&(et=M|0,et<0?($+=_*(I-1),I=ot(-I/et)):I=ot(I/et),_*=et),typeof a=="number"&&(et=a|0,et<0?($+=N*(O-1),O=ot(-O/et)):O=ot(O/et),N*=et),typeof E=="number"&&(et=E|0,et<0?($+=G*(z-1),z=ot(-z/et)):z=ot(z/et),G*=et),typeof m=="number"&&(et=m|0,et<0?($+=X*(B-1),B=ot(-B/et)):B=ot(B/et),X*=et),new w(this.data,k,I,O,z,B,F,_,N,G,X,$)},C.transpose=function(S,M,a,E,m){S=S===void 0?0:S|0,M=M===void 0?1:M|0,a=a===void 0?2:a|0,E=E===void 0?3:E|0,m=m===void 0?4:m|0;var k=this.shape,I=this.stride;return new w(this.data,k[S],k[M],k[a],k[E],k[m],I[S],I[M],I[a],I[E],I[m],this.offset)},C.pick=function(S,M,a,E,m){var k=[],I=[],O=this.offset;typeof S=="number"&&S>=0?O=O+this.stride[0]*S|0:(k.push(this.shape[0]),I.push(this.stride[0])),typeof M=="number"&&M>=0?O=O+this.stride[1]*M|0:(k.push(this.shape[1]),I.push(this.stride[1])),typeof a=="number"&&a>=0?O=O+this.stride[2]*a|0:(k.push(this.shape[2]),I.push(this.stride[2])),typeof E=="number"&&E>=0?O=O+this.stride[3]*E|0:(k.push(this.shape[3]),I.push(this.stride[3])),typeof m=="number"&&m>=0?O=O+this.stride[4]*m|0:(k.push(this.shape[4]),I.push(this.stride[4]));var z=d[k.length+1];return z(this.data,k,I,O)},function(S,M,a,E){return new w(S,M[0],M[1],M[2],M[3],M[4],a[0],a[1],a[2],a[3],a[4],E)}}};function u(c,i){var d=i===-1?"T":String(i),x=f[d];return i===-1?x(c):i===0?x(c,h[c][0]):x(c,h[c],l)}function g(c){if(e(c))return"buffer";if(s)switch(Object.prototype.toString.call(c)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(c)?"array":"generic"}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function T(c,i,d,x){if(c===void 0){var a=h.array[0];return a([])}else typeof c=="number"&&(c=[c]);i===void 0&&(i=[c.length]);var w=i.length;if(d===void 0){d=new Array(w);for(var C=w-1,y=1;C>=0;--C)d[C]=y,y*=i[C]}if(x===void 0){x=0;for(var C=0;C<w;++C)d[C]<0&&(x-=(i[C]-1)*d[C])}for(var S=g(c),M=h[S];M.length<=w+1;)M.push(u(S,M.length-1));var a=M[w+1];return a(c,i,d,x)}v.exports=T},1278:function(v,p,r){var e=r(2361),s=Math.pow(2,-1074),n=-1>>>0;v.exports=l;function l(f,u){if(isNaN(f)||isNaN(u))return NaN;if(f===u)return f;if(f===0)return u<0?-s:s;var g=e.hi(f),h=e.lo(f);return u>f==f>0?h===n?(g+=1,h=0):h+=1:h===0?(h=n,g-=1):h-=1,e.pack(h,g)}},8406:function(v,p){var r=1e-6,e=1e-6;p.vertexNormals=function(s,n,l){for(var f=n.length,u=new Array(f),g=l===void 0?r:l,h=0;h<f;++h)u[h]=[0,0,0];for(var h=0;h<s.length;++h)for(var T=s[h],c=0,i=T[T.length-1],d=T[0],x=0;x<T.length;++x){c=i,i=d,d=T[(x+1)%T.length];for(var w=n[c],C=n[i],y=n[d],S=new Array(3),M=0,a=new Array(3),E=0,m=0;m<3;++m)S[m]=w[m]-C[m],M+=S[m]*S[m],a[m]=y[m]-C[m],E+=a[m]*a[m];if(M*E>g)for(var k=u[i],I=1/Math.sqrt(M*E),m=0;m<3;++m){var O=(m+1)%3,z=(m+2)%3;k[m]+=I*(a[O]*S[z]-a[z]*S[O])}}for(var h=0;h<f;++h){for(var k=u[h],B=0,m=0;m<3;++m)B+=k[m]*k[m];if(B>g)for(var I=1/Math.sqrt(B),m=0;m<3;++m)k[m]*=I;else for(var m=0;m<3;++m)k[m]=0}return u},p.faceNormals=function(s,n,l){for(var f=s.length,u=new Array(f),g=l===void 0?e:l,h=0;h<f;++h){for(var T=s[h],c=new Array(3),i=0;i<3;++i)c[i]=n[T[i]];for(var d=new Array(3),x=new Array(3),i=0;i<3;++i)d[i]=c[1][i]-c[0][i],x[i]=c[2][i]-c[0][i];for(var w=new Array(3),C=0,i=0;i<3;++i){var y=(i+1)%3,S=(i+2)%3;w[i]=d[y]*x[S]-d[S]*x[y],C+=w[i]*w[i]}C>g?C=1/Math.sqrt(C):C=0;for(var i=0;i<3;++i)w[i]*=C;u[h]=w}return u}},4081:function(v){v.exports=p;function p(r,e,s,n,l,f,u,g,h,T){var c=e+f+T;if(i>0){var i=Math.sqrt(c+1);r[0]=.5*(u-h)/i,r[1]=.5*(g-n)/i,r[2]=.5*(s-f)/i,r[3]=.5*i}else{var d=Math.max(e,f,T),i=Math.sqrt(2*d-c+1);e>=d?(r[0]=.5*i,r[1]=.5*(l+s)/i,r[2]=.5*(g+n)/i,r[3]=.5*(u-h)/i):f>=d?(r[0]=.5*(s+l)/i,r[1]=.5*i,r[2]=.5*(h+u)/i,r[3]=.5*(g-n)/i):(r[0]=.5*(n+g)/i,r[1]=.5*(u+h)/i,r[2]=.5*i,r[3]=.5*(s-l)/i)}return r}},9977:function(v,p,r){v.exports=i;var e=r(9215),s=r(6582),n=r(7399),l=r(7608),f=r(4081);function u(d,x,w){return Math.sqrt(Math.pow(d,2)+Math.pow(x,2)+Math.pow(w,2))}function g(d,x,w,C){return Math.sqrt(Math.pow(d,2)+Math.pow(x,2)+Math.pow(w,2)+Math.pow(C,2))}function h(d,x){var w=x[0],C=x[1],y=x[2],S=x[3],M=g(w,C,y,S);M>1e-6?(d[0]=w/M,d[1]=C/M,d[2]=y/M,d[3]=S/M):(d[0]=d[1]=d[2]=0,d[3]=1)}function T(d,x,w){this.radius=e([w]),this.center=e(x),this.rotation=e(d),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=T.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(d){this.radius.curve(d),this.center.curve(d),this.rotation.curve(d);var x=this.computedRotation;h(x,x);var w=this.computedMatrix;n(w,x);var C=this.computedCenter,y=this.computedEye,S=this.computedUp,M=Math.exp(this.computedRadius[0]);y[0]=C[0]+M*w[2],y[1]=C[1]+M*w[6],y[2]=C[2]+M*w[10],S[0]=w[1],S[1]=w[5],S[2]=w[9];for(var a=0;a<3;++a){for(var E=0,m=0;m<3;++m)E+=w[a+4*m]*y[m];w[12+a]=-E}},c.getMatrix=function(d,x){this.recalcMatrix(d);var w=this.computedMatrix;if(x){for(var C=0;C<16;++C)x[C]=w[C];return x}return w},c.idle=function(d){this.center.idle(d),this.radius.idle(d),this.rotation.idle(d)},c.flush=function(d){this.center.flush(d),this.radius.flush(d),this.rotation.flush(d)},c.pan=function(d,x,w,C){x=x||0,w=w||0,C=C||0,this.recalcMatrix(d);var y=this.computedMatrix,S=y[1],M=y[5],a=y[9],E=u(S,M,a);S/=E,M/=E,a/=E;var m=y[0],k=y[4],I=y[8],O=m*S+k*M+I*a;m-=S*O,k-=M*O,I-=a*O;var z=u(m,k,I);m/=z,k/=z,I/=z,y[2],y[6],y[10];var B=m*x+S*w,F=k*x+M*w,_=I*x+a*w;this.center.move(d,B,F,_);var N=Math.exp(this.computedRadius[0]);N=Math.max(1e-4,N+C),this.radius.set(d,Math.log(N))},c.rotate=function(d,x,w,C){this.recalcMatrix(d),x=x||0,w=w||0;var y=this.computedMatrix,S=y[0],M=y[4],a=y[8],E=y[1],m=y[5],k=y[9],I=y[2],O=y[6],z=y[10],B=x*S+w*E,F=x*M+w*m,_=x*a+w*k,N=-(O*_-z*F),G=-(z*B-I*_),X=-(I*F-O*B),$=Math.sqrt(Math.max(0,1-Math.pow(N,2)-Math.pow(G,2)-Math.pow(X,2))),et=g(N,G,X,$);et>1e-6?(N/=et,G/=et,X/=et,$/=et):(N=G=X=0,$=1);var ot=this.computedRotation,nt=ot[0],Z=ot[1],Q=ot[2],W=ot[3],J=nt*$+W*N+Z*X-Q*G,it=Z*$+W*G+Q*N-nt*X,K=Q*$+W*X+nt*G-Z*N,H=W*$-nt*N-Z*G-Q*X;if(C){N=I,G=O,X=z;var at=Math.sin(C)/u(N,G,X);N*=at,G*=at,X*=at,$=Math.cos(x),J=J*$+H*N+it*X-K*G,it=it*$+H*G+K*N-J*X,K=K*$+H*X+J*G-it*N,H=H*$-J*N-it*G-K*X}var tt=g(J,it,K,H);tt>1e-6?(J/=tt,it/=tt,K/=tt,H/=tt):(J=it=K=0,H=1),this.rotation.set(d,J,it,K,H)},c.lookAt=function(d,x,w,C){this.recalcMatrix(d),w=w||this.computedCenter,x=x||this.computedEye,C=C||this.computedUp;var y=this.computedMatrix;s(y,x,w,C);var S=this.computedRotation;f(S,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),h(S,S),this.rotation.set(d,S[0],S[1],S[2],S[3]);for(var M=0,a=0;a<3;++a)M+=Math.pow(w[a]-x[a],2);this.radius.set(d,.5*Math.log(Math.max(M,1e-6))),this.center.set(d,w[0],w[1],w[2])},c.translate=function(d,x,w,C){this.center.move(d,x||0,w||0,C||0)},c.setMatrix=function(d,x){var w=this.computedRotation;f(w,x[0],x[1],x[2],x[4],x[5],x[6],x[8],x[9],x[10]),h(w,w),this.rotation.set(d,w[0],w[1],w[2],w[3]);var C=this.computedMatrix;l(C,x);var y=C[15];if(Math.abs(y)>1e-6){var S=C[12]/y,M=C[13]/y,a=C[14]/y;this.recalcMatrix(d);var E=Math.exp(this.computedRadius[0]);this.center.set(d,S-C[2]*E,M-C[6]*E,a-C[10]*E),this.radius.idle(d)}else this.center.idle(d),this.radius.idle(d)},c.setDistance=function(d,x){x>0&&this.radius.set(d,Math.log(x))},c.setDistanceLimits=function(d,x){d>0?d=Math.log(d):d=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,d),this.radius.bounds[0][0]=d,this.radius.bounds[1][0]=x},c.getDistanceLimits=function(d){var x=this.radius.bounds;return d?(d[0]=Math.exp(x[0][0]),d[1]=Math.exp(x[1][0]),d):[Math.exp(x[0][0]),Math.exp(x[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(d){var x=this.lastT(),w=d.center;w&&this.center.set(x,w[0],w[1],w[2]);var C=d.rotation;C&&this.rotation.set(x,C[0],C[1],C[2],C[3]);var y=d.distance;y&&y>0&&this.radius.set(x,Math.log(y)),this.setDistanceLimits(d.zoomMin,d.zoomMax)};function i(d){d=d||{};var x=d.center||[0,0,0],w=d.rotation||[0,0,0,1],C=d.radius||1;x=[].slice.call(x,0,3),w=[].slice.call(w,0,4),h(w,w);var y=new T(w,x,Math.log(C));return y.setDistanceLimits(d.zoomMin,d.zoomMax),("eye"in d||"up"in d)&&y.lookAt(0,d.eye,d.center,d.up),y}},1371:function(v,p,r){/*!
* pad-left <https://github.com/jonschlinkert/pad-left>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT license.
*/var e=r(3233);v.exports=function(n,l,f){return f=typeof f<"u"?f+"":" ",e(f,l)+n}},3202:function(v){v.exports=function(r,e){e||(e=[0,""]),r=String(r);var s=parseFloat(r,10);return e[0]=s,e[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},3088:function(v,p,r){v.exports=s;var e=r(3140);function s(n,l){for(var f=l.length|0,u=n.length,g=[new Array(f),new Array(f)],h=0;h<f;++h)g[0][h]=[],g[1][h]=[];for(var h=0;h<u;++h){var T=n[h];g[0][T[0]].push(T),g[1][T[1]].push(T)}for(var c=[],h=0;h<f;++h)g[0][h].length+g[1][h].length===0&&c.push([h]);function i(M,a){var E=g[a][M[a]];E.splice(E.indexOf(M),1)}function d(M,a,E){for(var m,k,I,O=0;O<2;++O)if(g[O][a].length>0){m=g[O][a][0],I=O;break}k=m[I^1];for(var z=0;z<2;++z)for(var B=g[z][a],F=0;F<B.length;++F){var _=B[F],N=_[z^1],G=e(l[M],l[a],l[k],l[N]);G>0&&(m=_,k=N,I=z)}return E||m&&i(m,I),k}function x(M,a){var E=g[a][M][0],m=[M];i(E,a);for(var k=E[a^1];;){for(;k!==M;)m.push(k),k=d(m[m.length-2],k,!1);if(g[0][M].length+g[1][M].length===0)break;var I=m[m.length-1],O=M,z=m[1],B=d(I,O,!0);if(e(l[I],l[O],l[z],l[B])<0)break;m.push(M),k=d(I,O)}return m}function w(M,a){return a[1]===a[a.length-1]}for(var h=0;h<f;++h)for(var C=0;C<2;++C){for(var y=[];g[C][h].length>0;){g[0][h].length;var S=x(h,C);w(y,S)?y.push.apply(y,S):(y.length>0&&c.push(y),y=S)}y.length>0&&c.push(y)}return c}},5609:function(v,p,r){v.exports=s;var e=r(3134);function s(n,l){for(var f=e(n,l.length),u=new Array(l.length),g=new Array(l.length),h=[],T=0;T<l.length;++T){var c=f[T].length;g[T]=c,u[T]=!0,c<=1&&h.push(T)}for(;h.length>0;){var i=h.pop();u[i]=!1;for(var d=f[i],T=0;T<d.length;++T){var x=d[T];--g[x]===0&&h.push(x)}}for(var w=new Array(l.length),C=[],T=0;T<l.length;++T)if(u[T]){var i=C.length;w[T]=i,C.push(l[T])}else w[T]=-1;for(var y=[],T=0;T<n.length;++T){var S=n[T];u[S[0]]&&u[S[1]]&&y.push([w[S[0]],w[S[1]]])}return[y,C]}},2095:function(v,p,r){v.exports=c;var e=r(3134),s=r(3088),n=r(5085),l=r(5250),f=r(8210),u=r(1682),g=r(5609);function h(i,d){for(var x=new Array(i),w=0;w<i;++w)x[w]=d;return x}function T(i){for(var d=new Array(i),x=0;x<i;++x)d[x]=[];return d}function c(i,d){var H=g(i,d);i=H[0],d=H[1];var x=d.length;i.length;for(var w=e(i,d.length),C=0;C<x;++C)if(w[C].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var y=s(i,d);function S(Mt){for(var Lt=Mt.length,zt=[0],xt=0;xt<Lt;++xt){var Ct=d[Mt[xt]],wt=d[Mt[(xt+1)%Lt]],Rt=l(-Ct[0],Ct[1]),Tt=l(-Ct[0],wt[1]),Bt=l(wt[0],Ct[1]),Gt=l(wt[0],wt[1]);zt=f(zt,f(f(Rt,Tt),f(Bt,Gt)))}return zt[zt.length-1]>0}y=y.filter(S);for(var M=y.length,a=new Array(M),E=new Array(M),C=0;C<M;++C){a[C]=C;var m=new Array(M),k=y[C].map(function(Lt){return d[Lt]}),I=n([k]),O=0;t:for(var z=0;z<M;++z)if(m[z]=0,C!==z){for(var B=y[z],F=B.length,_=0;_<F;++_){var N=I(d[B[_]]);if(N!==0){N<0&&(m[z]=1,O+=1);continue t}}m[z]=1,O+=1}E[C]=[O,C,m]}E.sort(function(Mt,Lt){return Lt[0]-Mt[0]});for(var C=0;C<M;++C)for(var m=E[C],G=m[1],X=m[2],z=0;z<M;++z)X[z]&&(a[z]=G);for(var $=T(M),C=0;C<M;++C)$[C].push(a[C]),$[a[C]].push(C);for(var et={},ot=h(x,!1),C=0;C<M;++C)for(var B=y[C],F=B.length,z=0;z<F;++z){var nt=B[z],Z=B[(z+1)%F],Q=Math.min(nt,Z)+":"+Math.max(nt,Z);if(Q in et){var W=et[Q];$[W].push(C),$[C].push(W),ot[nt]=ot[Z]=!0}else et[Q]=C}function J(Mt){for(var Lt=Mt.length,zt=0;zt<Lt;++zt)if(!ot[Mt[zt]])return!1;return!0}for(var it=[],K=h(M,-1),C=0;C<M;++C)a[C]===C&&!J(y[C])?(it.push(C),K[C]=0):K[C]=-1;for(var H=[];it.length>0;){var at=it.pop(),tt=$[at];u(tt,function(Mt,Lt){return Mt-Lt});var lt=tt.length,dt=K[at],mt;if(dt===0){var B=y[at];mt=[B]}for(var C=0;C<lt;++C){var gt=tt[C];if(!(K[gt]>=0)&&(K[gt]=dt^1,it.push(gt),dt===0)){var B=y[gt];J(B)||(B.reverse(),mt.push(B))}}dt===0&&H.push(mt)}return H}},5085:function(v,p,r){v.exports=d;var e=r(3250)[3],s=r(4209),n=r(3352),l=r(2478);function f(){return!0}function u(x){return function(w,C){var y=x[w];return y?!!y.queryPoint(C,f):!1}}function g(x){for(var w={},C=0;C<x.length;++C){var y=x[C],S=y[0][0],M=y[0][1],a=y[1][1],E=[Math.min(M,a),Math.max(M,a)];S in w?w[S].push(E):w[S]=[E]}for(var m={},k=Object.keys(w),C=0;C<k.length;++C){var I=w[k[C]];m[k[C]]=n(I)}return u(m)}function h(x,w){return function(C){var y=l.le(w,C[0]);if(y<0)return 1;var S=x[y];if(!S)if(y>0&&w[y]===C[0])S=x[y-1];else return 1;for(var M=1;S;){var a=S.key,E=e(C,a[0],a[1]);if(a[0][0]<a[1][0])if(E<0)S=S.left;else if(E>0)M=-1,S=S.right;else return 0;else if(E>0)S=S.left;else if(E<0)M=1,S=S.right;else return 0}return M}}function T(x){return 1}function c(x){return function(C){return x(C[0],C[1])?0:1}}function i(x,w){return function(y){return x(y[0],y[1])?0:w(y)}}function d(x){for(var w=x.length,C=[],y=[],S=0;S<w;++S)for(var M=x[S],a=M.length,E=a-1,m=0;m<a;E=m++){var k=M[E],I=M[m];k[0]===I[0]?y.push([k,I]):C.push([k,I])}if(C.length===0)return y.length===0?T:c(g(y));var O=s(C),z=h(O.slabs,O.coordinates);return y.length===0?z:i(g(y),z)}},9346:function(v){var p=new Float64Array(4),r=new Float64Array(4),e=new Float64Array(4);function s(n,l,f,u,g){p.length<u.length&&(p=new Float64Array(u.length),r=new Float64Array(u.length),e=new Float64Array(u.length));for(var h=0;h<u.length;++h)p[h]=n[h]-u[h],r[h]=l[h]-n[h],e[h]=f[h]-n[h];for(var T=0,c=0,i=0,d=0,x=0,w=0,h=0;h<u.length;++h){var C=r[h],y=e[h],S=p[h];T+=C*C,c+=C*y,i+=y*y,d+=S*C,x+=S*y,w+=S*S}var M=Math.abs(T*i-c*c),a=c*x-i*d,E=c*d-T*x,m;if(a+E<=M)if(a<0)E<0&&d<0?(E=0,-d>=T?(a=1,m=T+2*d+w):(a=-d/T,m=d*a+w)):(a=0,x>=0?(E=0,m=w):-x>=i?(E=1,m=i+2*x+w):(E=-x/i,m=x*E+w));else if(E<0)E=0,d>=0?(a=0,m=w):-d>=T?(a=1,m=T+2*d+w):(a=-d/T,m=d*a+w);else{var k=1/M;a*=k,E*=k,m=a*(T*a+c*E+2*d)+E*(c*a+i*E+2*x)+w}else{var I,O,z,B;a<0?(I=c+d,O=i+x,O>I?(z=O-I,B=T-2*c+i,z>=B?(a=1,E=0,m=T+2*d+w):(a=z/B,E=1-a,m=a*(T*a+c*E+2*d)+E*(c*a+i*E+2*x)+w)):(a=0,O<=0?(E=1,m=i+2*x+w):x>=0?(E=0,m=w):(E=-x/i,m=x*E+w))):E<0?(I=c+x,O=T+d,O>I?(z=O-I,B=T-2*c+i,z>=B?(E=1,a=0,m=i+2*x+w):(E=z/B,a=1-E,m=a*(T*a+c*E+2*d)+E*(c*a+i*E+2*x)+w)):(E=0,O<=0?(a=1,m=T+2*d+w):d>=0?(a=0,m=w):(a=-d/T,m=d*a+w))):(z=i+x-c-d,z<=0?(a=0,E=1,m=i+2*x+w):(B=T-2*c+i,z>=B?(a=1,E=0,m=T+2*d+w):(a=z/B,E=1-a,m=a*(T*a+c*E+2*d)+E*(c*a+i*E+2*x)+w)))}for(var F=1-a-E,h=0;h<u.length;++h)g[h]=F*n[h]+a*l[h]+E*f[h];return m<0?0:m}v.exports=s},8648:function(v,p,r){v.exports=r(783)},2653:function(v,p,r){var e=r(3865);v.exports=s;function s(n,l){for(var f=n.length,u=new Array(f),g=0;g<f;++g)u[g]=e(n[g],l[g]);return u}},5838:function(v,p,r){v.exports=s;var e=r(7842);function s(n){for(var l=new Array(n.length),f=0;f<n.length;++f)l[f]=e(n[f]);return l}},8987:function(v,p,r){var e=r(7842),s=r(6504);v.exports=n;function n(l,f){for(var u=e(f),g=l.length,h=new Array(g),T=0;T<g;++T)h[T]=s(l[T],u);return h}},544:function(v,p,r){var e=r(5572);v.exports=s;function s(n,l){for(var f=n.length,u=new Array(f),g=0;g<f;++g)u[g]=e(n[g],l[g]);return u}},5771:function(v,p,r){var e=r(8507),s=r(3788),n=r(2419);v.exports=l;function l(f){f.sort(s);for(var u=f.length,g=0,h=0;h<u;++h){var T=f[h],c=n(T);if(c!==0){if(g>0){var i=f[g-1];if(e(T,i)===0&&n(i)!==c){g-=1;continue}}f[g++]=T}}return f.length=g,f}},3233:function(v){/*!
* repeat-string <https://github.com/jonschlinkert/repeat-string>
*
* Copyright (c) 2014-2015, Jon Schlinkert.
* Licensed under the MIT License.
*/var p="",r;v.exports=e;function e(s,n){if(typeof s!="string")throw new TypeError("expected a string");if(n===1)return s;if(n===2)return s+s;var l=s.length*n;if(r!==s||typeof r>"u")r=s,p="";else if(p.length>=l)return p.substr(0,l);for(;l>p.length&&n>1;)n&1&&(p+=s),n>>=1,s+=s;return p+=s,p=p.substr(0,l),p}},3025:function(v,p,r){v.exports=r.g.performance&&r.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(v){v.exports=p;function p(r){for(var e=r.length,s=r[r.length-1],n=e,l=e-2;l>=0;--l){var f=s,u=r[l];s=f+u;var g=s-f,h=u-g;h&&(r[--n]=s,s=h)}for(var T=0,l=n;l<e;++l){var f=r[l],u=s;s=f+u;var g=s-f,h=u-g;h&&(r[T++]=h)}return r[T++]=s,r.length=T,r}},2962:function(v,p,r){var e=r(5250),s=r(8210),n=r(3012),l=r(7004),f=6;function u(w,C,y,S){return function(a){return S(w(y(a[0][0],a[1][1]),y(-a[0][1],a[1][0])))}}function g(w,C,y,S){return function(a){return S(w(C(w(y(a[1][1],a[2][2]),y(-a[1][2],a[2][1])),a[0][0]),w(C(w(y(a[1][0],a[2][2]),y(-a[1][2],a[2][0])),-a[0][1]),C(w(y(a[1][0],a[2][1]),y(-a[1][1],a[2][0])),a[0][2]))))}}function h(w,C,y,S){return function(a){return S(w(w(C(w(C(w(y(a[2][2],a[3][3]),y(-a[2][3],a[3][2])),a[1][1]),w(C(w(y(a[2][1],a[3][3]),y(-a[2][3],a[3][1])),-a[1][2]),C(w(y(a[2][1],a[3][2]),y(-a[2][2],a[3][1])),a[1][3]))),a[0][0]),C(w(C(w(y(a[2][2],a[3][3]),y(-a[2][3],a[3][2])),a[1][0]),w(C(w(y(a[2][0],a[3][3]),y(-a[2][3],a[3][0])),-a[1][2]),C(w(y(a[2][0],a[3][2]),y(-a[2][2],a[3][0])),a[1][3]))),-a[0][1])),w(C(w(C(w(y(a[2][1],a[3][3]),y(-a[2][3],a[3][1])),a[1][0]),w(C(w(y(a[2][0],a[3][3]),y(-a[2][3],a[3][0])),-a[1][1]),C(w(y(a[2][0],a[3][1]),y(-a[2][1],a[3][0])),a[1][3]))),a[0][2]),C(w(C(w(y(a[2][1],a[3][2]),y(-a[2][2],a[3][1])),a[1][0]),w(C(w(y(a[2][0],a[3][2]),y(-a[2][2],a[3][0])),-a[1][1]),C(w(y(a[2][0],a[3][1]),y(-a[2][1],a[3][0])),a[1][2]))),-a[0][3]))))}}function T(w,C,y,S){return function(a){return S(w(w(C(w(w(C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][2]),w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),-a[2][3]),C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][4]))),a[1][1]),C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][1]),w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),-a[2][3]),C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),a[2][4]))),-a[1][2])),w(C(w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),a[2][1]),w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),-a[2][2]),C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][4]))),a[1][3]),C(w(C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][1]),w(C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),-a[2][2]),C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][3]))),-a[1][4]))),a[0][0]),C(w(w(C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][2]),w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),-a[2][3]),C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][4]))),a[1][0]),C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][3]),C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),a[2][4]))),-a[1][2])),w(C(w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][2]),C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),a[2][4]))),a[1][3]),C(w(C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][0]),w(C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),-a[2][2]),C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),a[2][3]))),-a[1][4]))),-a[0][1])),w(C(w(w(C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][1]),w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),-a[2][3]),C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),a[2][4]))),a[1][0]),C(w(C(w(y(a[3][3],a[4][4]),y(-a[3][4],a[4][3])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][3]),C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),a[2][4]))),-a[1][1])),w(C(w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][4]))),a[1][3]),C(w(C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][3]))),-a[1][4]))),a[0][2]),w(C(w(w(C(w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),a[2][1]),w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),-a[2][2]),C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][4]))),a[1][0]),C(w(C(w(y(a[3][2],a[4][4]),y(-a[3][4],a[4][2])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][2]),C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),a[2][4]))),-a[1][1])),w(C(w(C(w(y(a[3][1],a[4][4]),y(-a[3][4],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][4]),y(-a[3][4],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][4]))),a[1][2]),C(w(C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][2]))),-a[1][4]))),-a[0][3]),C(w(w(C(w(C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][1]),w(C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),-a[2][2]),C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][3]))),a[1][0]),C(w(C(w(y(a[3][2],a[4][3]),y(-a[3][3],a[4][2])),a[2][0]),w(C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),-a[2][2]),C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),a[2][3]))),-a[1][1])),w(C(w(C(w(y(a[3][1],a[4][3]),y(-a[3][3],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][3]),y(-a[3][3],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][3]))),a[1][2]),C(w(C(w(y(a[3][1],a[4][2]),y(-a[3][2],a[4][1])),a[2][0]),w(C(w(y(a[3][0],a[4][2]),y(-a[3][2],a[4][0])),-a[2][1]),C(w(y(a[3][0],a[4][1]),y(-a[3][1],a[4][0])),a[2][2]))),-a[1][3]))),a[0][4])))))}}function c(w){var C=w===2?u:w===3?g:w===4?h:w===5?T:void 0;return C(s,n,e,l)}var i=[function(){return[0]},function(C){return[C[0][0]]}];function d(w,C,y,S,M,a,E,m){return function(I){switch(I.length){case 0:return w(I);case 1:return C(I);case 2:return y(I);case 3:return S(I);case 4:return M(I);case 5:return a(I)}var O=E[I.length];return O||(O=E[I.length]=m(I.length)),O(I)}}function x(){for(;i.length<f;)i.push(c(i.length));v.exports=d.apply(void 0,i.concat([i,c]));for(var w=0;w<i.length;++w)v.exports[w]=i[w]}x()},1944:function(v,p,r){var e=r(5250),s=r(8210);v.exports=n;function n(l,f){for(var u=e(l[0],f[0]),g=1;g<l.length;++g)u=s(u,e(l[g],f[g]));return u}},2646:function(v,p,r){var e=r(5250),s=r(8210),n=r(8545),l=r(3012),f=6;function u(M){var a=M===3?c:M===4?i:M===5?d:x;return a(s,n,e,l)}function g(){return 0}function h(){return 0}function T(){return 0}function c(M,a,E,m){function k(I,O,z){var B=E(I[0],I[0]),F=m(B,O[0]),_=m(B,z[0]),N=E(O[0],O[0]),G=m(N,I[0]),X=m(N,z[0]),$=E(z[0],z[0]),et=m($,I[0]),ot=m($,O[0]),nt=M(a(ot,X),a(G,F)),Z=a(et,_),Q=a(nt,Z);return Q[Q.length-1]}return k}function i(M,a,E,m){function k(I,O,z,B){var F=M(E(I[0],I[0]),E(I[1],I[1])),_=m(F,O[0]),N=m(F,z[0]),G=m(F,B[0]),X=M(E(O[0],O[0]),E(O[1],O[1])),$=m(X,I[0]),et=m(X,z[0]),ot=m(X,B[0]),nt=M(E(z[0],z[0]),E(z[1],z[1])),Z=m(nt,I[0]),Q=m(nt,O[0]),W=m(nt,B[0]),J=M(E(B[0],B[0]),E(B[1],B[1])),it=m(J,I[0]),K=m(J,O[0]),H=m(J,z[0]),at=M(M(m(a(H,W),O[1]),M(m(a(K,ot),-z[1]),m(a(Q,et),B[1]))),M(m(a(K,ot),I[1]),M(m(a(it,G),-O[1]),m(a($,_),B[1])))),tt=M(M(m(a(H,W),I[1]),M(m(a(it,G),-z[1]),m(a(Z,N),B[1]))),M(m(a(Q,et),I[1]),M(m(a(Z,N),-O[1]),m(a($,_),z[1])))),lt=a(at,tt);return lt[lt.length-1]}return k}function d(M,a,E,m){function k(I,O,z,B,F){var _=M(E(I[0],I[0]),M(E(I[1],I[1]),E(I[2],I[2]))),N=m(_,O[0]),G=m(_,z[0]),X=m(_,B[0]),$=m(_,F[0]),et=M(E(O[0],O[0]),M(E(O[1],O[1]),E(O[2],O[2]))),ot=m(et,I[0]),nt=m(et,z[0]),Z=m(et,B[0]),Q=m(et,F[0]),W=M(E(z[0],z[0]),M(E(z[1],z[1]),E(z[2],z[2]))),J=m(W,I[0]),it=m(W,O[0]),K=m(W,B[0]),H=m(W,F[0]),at=M(E(B[0],B[0]),M(E(B[1],B[1]),E(B[2],B[2]))),tt=m(at,I[0]),lt=m(at,O[0]),dt=m(at,z[0]),mt=m(at,F[0]),gt=M(E(F[0],F[0]),M(E(F[1],F[1]),E(F[2],F[2]))),Mt=m(gt,I[0]),Lt=m(gt,O[0]),zt=m(gt,z[0]),xt=m(gt,B[0]),Ct=M(M(M(m(M(m(a(xt,mt),z[1]),M(m(a(zt,H),-B[1]),m(a(dt,K),F[1]))),O[2]),M(m(M(m(a(xt,mt),O[1]),M(m(a(Lt,Q),-B[1]),m(a(lt,Z),F[1]))),-z[2]),m(M(m(a(zt,H),O[1]),M(m(a(Lt,Q),-z[1]),m(a(it,nt),F[1]))),B[2]))),M(m(M(m(a(dt,K),O[1]),M(m(a(lt,Z),-z[1]),m(a(it,nt),B[1]))),-F[2]),M(m(M(m(a(xt,mt),O[1]),M(m(a(Lt,Q),-B[1]),m(a(lt,Z),F[1]))),I[2]),m(M(m(a(xt,mt),I[1]),M(m(a(Mt,$),-B[1]),m(a(tt,X),F[1]))),-O[2])))),M(M(m(M(m(a(Lt,Q),I[1]),M(m(a(Mt,$),-O[1]),m(a(ot,N),F[1]))),B[2]),M(m(M(m(a(lt,Z),I[1]),M(m(a(tt,X),-O[1]),m(a(ot,N),B[1]))),-F[2]),m(M(m(a(dt,K),O[1]),M(m(a(lt,Z),-z[1]),m(a(it,nt),B[1]))),I[2]))),M(m(M(m(a(dt,K),I[1]),M(m(a(tt,X),-z[1]),m(a(J,G),B[1]))),-O[2]),M(m(M(m(a(lt,Z),I[1]),M(m(a(tt,X),-O[1]),m(a(ot,N),B[1]))),z[2]),m(M(m(a(it,nt),I[1]),M(m(a(J,G),-O[1]),m(a(ot,N),z[1]))),-B[2]))))),wt=M(M(M(m(M(m(a(xt,mt),z[1]),M(m(a(zt,H),-B[1]),m(a(dt,K),F[1]))),I[2]),m(M(m(a(xt,mt),I[1]),M(m(a(Mt,$),-B[1]),m(a(tt,X),F[1]))),-z[2])),M(m(M(m(a(zt,H),I[1]),M(m(a(Mt,$),-z[1]),m(a(J,G),F[1]))),B[2]),m(M(m(a(dt,K),I[1]),M(m(a(tt,X),-z[1]),m(a(J,G),B[1]))),-F[2]))),M(M(m(M(m(a(zt,H),O[1]),M(m(a(Lt,Q),-z[1]),m(a(it,nt),F[1]))),I[2]),m(M(m(a(zt,H),I[1]),M(m(a(Mt,$),-z[1]),m(a(J,G),F[1]))),-O[2])),M(m(M(m(a(Lt,Q),I[1]),M(m(a(Mt,$),-O[1]),m(a(ot,N),F[1]))),z[2]),m(M(m(a(it,nt),I[1]),M(m(a(J,G),-O[1]),m(a(ot,N),z[1]))),-F[2])))),Rt=a(Ct,wt);return Rt[Rt.length-1]}return k}function x(M,a,E,m){function k(I,O,z,B,F,_){var N=M(M(E(I[0],I[0]),E(I[1],I[1])),M(E(I[2],I[2]),E(I[3],I[3]))),G=m(N,O[0]),X=m(N,z[0]),$=m(N,B[0]),et=m(N,F[0]),ot=m(N,_[0]),nt=M(M(E(O[0],O[0]),E(O[1],O[1])),M(E(O[2],O[2]),E(O[3],O[3]))),Z=m(nt,I[0]),Q=m(nt,z[0]),W=m(nt,B[0]),J=m(nt,F[0]),it=m(nt,_[0]),K=M(M(E(z[0],z[0]),E(z[1],z[1])),M(E(z[2],z[2]),E(z[3],z[3]))),H=m(K,I[0]),at=m(K,O[0]),tt=m(K,B[0]),lt=m(K,F[0]),dt=m(K,_[0]),mt=M(M(E(B[0],B[0]),E(B[1],B[1])),M(E(B[2],B[2]),E(B[3],B[3]))),gt=m(mt,I[0]),Mt=m(mt,O[0]),Lt=m(mt,z[0]),zt=m(mt,F[0]),xt=m(mt,_[0]),Ct=M(M(E(F[0],F[0]),E(F[1],F[1])),M(E(F[2],F[2]),E(F[3],F[3]))),wt=m(Ct,I[0]),Rt=m(Ct,O[0]),Tt=m(Ct,z[0]),Bt=m(Ct,B[0]),Gt=m(Ct,_[0]),te=M(M(E(_[0],_[0]),E(_[1],_[1])),M(E(_[2],_[2]),E(_[3],_[3]))),Wt=m(te,I[0]),jt=m(te,O[0]),ie=m(te,z[0]),ue=m(te,B[0]),fe=m(te,F[0]),pe=M(M(M(m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),z[2]),m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),-B[2])),M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),F[2]),m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),-_[2]))),O[3]),M(m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),O[2]),m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),-B[2])),M(m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),F[2]),m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),-_[2]))),-z[3]),m(M(M(m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),O[2]),m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),-z[2])),M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),F[2]),m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),-_[2]))),B[3]))),M(M(m(M(M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),O[2]),m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),-z[2])),M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),B[2]),m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),-_[2]))),-F[3]),m(M(M(m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),O[2]),m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),-z[2])),M(m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),B[2]),m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),-F[2]))),_[3])),M(m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),O[2]),m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),-B[2])),M(m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),F[2]),m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),-_[2]))),I[3]),m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-B[2])),M(m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),F[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-_[2]))),-O[3])))),M(M(M(m(M(M(m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),F[2]),m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),-_[2]))),B[3]),m(M(M(m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),I[2]),m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),B[2]),m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),-_[2]))),-F[3])),M(m(M(M(m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),I[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-O[2])),M(m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),B[2]),m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),-F[2]))),_[3]),m(M(M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),O[2]),m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),-z[2])),M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),B[2]),m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),-_[2]))),I[3]))),M(M(m(M(M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),I[2]),m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),-z[2])),M(m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),B[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-_[2]))),-O[3]),m(M(M(m(M(m(a(ue,xt),O[1]),M(m(a(jt,it),-B[1]),m(a(Mt,W),_[1]))),I[2]),m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),B[2]),m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),-_[2]))),z[3])),M(m(M(M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),I[2]),m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-_[2]))),-B[3]),m(M(M(m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),I[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-O[2])),M(m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-B[2]))),_[3]))))),Te=M(M(M(m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),z[2]),m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),-B[2])),M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),F[2]),m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),-_[2]))),I[3]),M(m(M(M(m(M(m(a(fe,Gt),B[1]),M(m(a(ue,xt),-F[1]),m(a(Bt,zt),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-B[2])),M(m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),F[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-_[2]))),-z[3]),m(M(M(m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-z[2])),M(m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),F[2]),m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),-_[2]))),B[3]))),M(M(m(M(M(m(M(m(a(ue,xt),z[1]),M(m(a(ie,dt),-B[1]),m(a(Lt,tt),_[1]))),I[2]),m(M(m(a(ue,xt),I[1]),M(m(a(Wt,ot),-B[1]),m(a(gt,$),_[1]))),-z[2])),M(m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),B[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-_[2]))),-F[3]),m(M(M(m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),I[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-z[2])),M(m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),B[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-F[2]))),_[3])),M(m(M(M(m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),O[2]),m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),-z[2])),M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),F[2]),m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),-_[2]))),I[3]),m(M(M(m(M(m(a(fe,Gt),z[1]),M(m(a(ie,dt),-F[1]),m(a(Tt,lt),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-z[2])),M(m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),F[2]),m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),-_[2]))),-O[3])))),M(M(M(m(M(M(m(M(m(a(fe,Gt),O[1]),M(m(a(jt,it),-F[1]),m(a(Rt,J),_[1]))),I[2]),m(M(m(a(fe,Gt),I[1]),M(m(a(Wt,ot),-F[1]),m(a(wt,et),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),F[2]),m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),-_[2]))),z[3]),m(M(M(m(M(m(a(ie,dt),O[1]),M(m(a(jt,it),-z[1]),m(a(at,Q),_[1]))),I[2]),m(M(m(a(ie,dt),I[1]),M(m(a(Wt,ot),-z[1]),m(a(H,X),_[1]))),-O[2])),M(m(M(m(a(jt,it),I[1]),M(m(a(Wt,ot),-O[1]),m(a(Z,G),_[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-_[2]))),-F[3])),M(m(M(M(m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),I[2]),m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),-O[2])),M(m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-F[2]))),_[3]),m(M(M(m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),O[2]),m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),-z[2])),M(m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),B[2]),m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),-F[2]))),I[3]))),M(M(m(M(M(m(M(m(a(Bt,zt),z[1]),M(m(a(Tt,lt),-B[1]),m(a(Lt,tt),F[1]))),I[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-z[2])),M(m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),B[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-F[2]))),-O[3]),m(M(M(m(M(m(a(Bt,zt),O[1]),M(m(a(Rt,J),-B[1]),m(a(Mt,W),F[1]))),I[2]),m(M(m(a(Bt,zt),I[1]),M(m(a(wt,et),-B[1]),m(a(gt,$),F[1]))),-O[2])),M(m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),B[2]),m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),-F[2]))),z[3])),M(m(M(M(m(M(m(a(Tt,lt),O[1]),M(m(a(Rt,J),-z[1]),m(a(at,Q),F[1]))),I[2]),m(M(m(a(Tt,lt),I[1]),M(m(a(wt,et),-z[1]),m(a(H,X),F[1]))),-O[2])),M(m(M(m(a(Rt,J),I[1]),M(m(a(wt,et),-O[1]),m(a(Z,G),F[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-F[2]))),-B[3]),m(M(M(m(M(m(a(Lt,tt),O[1]),M(m(a(Mt,W),-z[1]),m(a(at,Q),B[1]))),I[2]),m(M(m(a(Lt,tt),I[1]),M(m(a(gt,$),-z[1]),m(a(H,X),B[1]))),-O[2])),M(m(M(m(a(Mt,W),I[1]),M(m(a(gt,$),-O[1]),m(a(Z,G),B[1]))),z[2]),m(M(m(a(at,Q),I[1]),M(m(a(H,X),-O[1]),m(a(Z,G),z[1]))),-B[2]))),F[3]))))),Qt=a(pe,Te);return Qt[Qt.length-1]}return k}var w=[g,h,T];function C(M){var a=w[M.length];return a||(a=w[M.length]=u(M.length)),a.apply(void 0,M)}function y(M,a,E,m,k,I,O,z){function B(F,_,N,G,X,$){switch(arguments.length){case 0:case 1:return 0;case 2:return m(F,_);case 3:return k(F,_,N);case 4:return I(F,_,N,G);case 5:return O(F,_,N,G,X);case 6:return z(F,_,N,G,X,$)}for(var et=new Array(arguments.length),ot=0;ot<arguments.length;++ot)et[ot]=arguments[ot];return M(et)}return B}function S(){for(;w.length<=f;)w.push(u(w.length));v.exports=y.apply(void 0,[C].concat(w));for(var M=0;M<=f;++M)v.exports[M]=w[M]}S()},727:function(v,p,r){var e=r(2962),s=6;function n(w){var C=w===2?u:w===3?g:w===4?h:w===5?T:c;return w<6?C(e[w]):C(e)}function l(){return[[0]]}function f(w,C){return[[C[0]],[w[0][0]]]}function u(w){return function(y,S){return[w([[+S[0],+y[0][1]],[+S[1],+y[1][1]]]),w([[+y[0][0],+S[0]],[+y[1][0],+S[1]]]),w(y)]}}function g(w){return function(y,S){return[w([[+S[0],+y[0][1],+y[0][2]],[+S[1],+y[1][1],+y[1][2]],[+S[2],+y[2][1],+y[2][2]]]),w([[+y[0][0],+S[0],+y[0][2]],[+y[1][0],+S[1],+y[1][2]],[+y[2][0],+S[2],+y[2][2]]]),w([[+y[0][0],+y[0][1],+S[0]],[+y[1][0],+y[1][1],+S[1]],[+y[2][0],+y[2][1],+S[2]]]),w(y)]}}function h(w){return function(y,S){return[w([[+S[0],+y[0][1],+y[0][2],+y[0][3]],[+S[1],+y[1][1],+y[1][2],+y[1][3]],[+S[2],+y[2][1],+y[2][2],+y[2][3]],[+S[3],+y[3][1],+y[3][2],+y[3][3]]]),w([[+y[0][0],+S[0],+y[0][2],+y[0][3]],[+y[1][0],+S[1],+y[1][2],+y[1][3]],[+y[2][0],+S[2],+y[2][2],+y[2][3]],[+y[3][0],+S[3],+y[3][2],+y[3][3]]]),w([[+y[0][0],+y[0][1],+S[0],+y[0][3]],[+y[1][0],+y[1][1],+S[1],+y[1][3]],[+y[2][0],+y[2][1],+S[2],+y[2][3]],[+y[3][0],+y[3][1],+S[3],+y[3][3]]]),w([[+y[0][0],+y[0][1],+y[0][2],+S[0]],[+y[1][0],+y[1][1],+y[1][2],+S[1]],[+y[2][0],+y[2][1],+y[2][2],+S[2]],[+y[3][0],+y[3][1],+y[3][2],+S[3]]]),w(y)]}}function T(w){return function(y,S){return[w([[+S[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4]],[+S[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4]],[+S[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4]],[+S[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4]],[+S[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4]]]),w([[+y[0][0],+S[0],+y[0][2],+y[0][3],+y[0][4]],[+y[1][0],+S[1],+y[1][2],+y[1][3],+y[1][4]],[+y[2][0],+S[2],+y[2][2],+y[2][3],+y[2][4]],[+y[3][0],+S[3],+y[3][2],+y[3][3],+y[3][4]],[+y[4][0],+S[4],+y[4][2],+y[4][3],+y[4][4]]]),w([[+y[0][0],+y[0][1],+S[0],+y[0][3],+y[0][4]],[+y[1][0],+y[1][1],+S[1],+y[1][3],+y[1][4]],[+y[2][0],+y[2][1],+S[2],+y[2][3],+y[2][4]],[+y[3][0],+y[3][1],+S[3],+y[3][3],+y[3][4]],[+y[4][0],+y[4][1],+S[4],+y[4][3],+y[4][4]]]),w([[+y[0][0],+y[0][1],+y[0][2],+S[0],+y[0][4]],[+y[1][0],+y[1][1],+y[1][2],+S[1],+y[1][4]],[+y[2][0],+y[2][1],+y[2][2],+S[2],+y[2][4]],[+y[3][0],+y[3][1],+y[3][2],+S[3],+y[3][4]],[+y[4][0],+y[4][1],+y[4][2],+S[4],+y[4][4]]]),w([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+S[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+S[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+S[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+S[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+S[4]]]),w(y)]}}function c(w){return function(y,S){return[w([[+S[0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+S[1],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+S[2],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+S[3],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+S[4],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+S[5],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),w([[+y[0][0],+S[0],+y[0][2],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+S[1],+y[1][2],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+S[2],+y[2][2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+S[3],+y[3][2],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+S[4],+y[4][2],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+S[5],+y[5][2],+y[5][3],+y[5][4],+y[5][5]]]),w([[+y[0][0],+y[0][1],+S[0],+y[0][3],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+S[1],+y[1][3],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+S[2],+y[2][3],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+S[3],+y[3][3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+S[4],+y[4][3],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+S[5],+y[5][3],+y[5][4],+y[5][5]]]),w([[+y[0][0],+y[0][1],+y[0][2],+S[0],+y[0][4],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+S[1],+y[1][4],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+S[2],+y[2][4],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+S[3],+y[3][4],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+S[4],+y[4][4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+S[5],+y[5][4],+y[5][5]]]),w([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+S[0],+y[0][5]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+S[1],+y[1][5]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+S[2],+y[2][5]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+S[3],+y[3][5]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+S[4],+y[4][5]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+S[5],+y[5][5]]]),w([[+y[0][0],+y[0][1],+y[0][2],+y[0][3],+y[0][4],+S[0]],[+y[1][0],+y[1][1],+y[1][2],+y[1][3],+y[1][4],+S[1]],[+y[2][0],+y[2][1],+y[2][2],+y[2][3],+y[2][4],+S[2]],[+y[3][0],+y[3][1],+y[3][2],+y[3][3],+y[3][4],+S[3]],[+y[4][0],+y[4][1],+y[4][2],+y[4][3],+y[4][4],+S[4]],[+y[5][0],+y[5][1],+y[5][2],+y[5][3],+y[5][4],+S[5]]]),w(y)]}}var i=[l,f];function d(w,C,y,S,M,a,E,m){return function(I,O){switch(I.length){case 0:return w(I,O);case 1:return C(I,O);case 2:return y(I,O);case 3:return S(I,O);case 4:return M(I,O);case 5:return a(I,O)}var z=E[I.length];return z||(z=E[I.length]=m(I.length)),z(I,O)}}function x(){for(;i.length<s;)i.push(n(i.length));v.exports=d.apply(void 0,i.concat([i,n]));for(var w=0;w<s;++w)v.exports[w]=i[w]}x()},3250:function(v,p,r){var e=r(5250),s=r(8210),n=r(3012),l=r(8545),f=5,u=11102230246251565e-32,g=(3+16*u)*u,h=(7+56*u)*u;function T(a,E,m,k){return function(O,z,B){var F=a(a(E(z[1],B[0]),E(-B[1],z[0])),a(E(O[1],z[0]),E(-z[1],O[0]))),_=a(E(O[1],B[0]),E(-B[1],O[0])),N=k(F,_);return N[N.length-1]}}function c(a,E,m,k){return function(O,z,B,F){var _=a(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),z[2]),a(m(a(E(z[1],F[0]),E(-F[1],z[0])),-B[2]),m(a(E(z[1],B[0]),E(-B[1],z[0])),F[2]))),a(m(a(E(z[1],F[0]),E(-F[1],z[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),F[2])))),N=a(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-B[2]),m(a(E(O[1],B[0]),E(-B[1],O[0])),F[2]))),a(m(a(E(z[1],B[0]),E(-B[1],z[0])),O[2]),a(m(a(E(O[1],B[0]),E(-B[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),B[2])))),G=k(_,N);return G[G.length-1]}}function i(a,E,m,k){return function(O,z,B,F,_){var N=a(a(a(m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),B[2]),a(m(a(E(B[1],_[0]),E(-_[1],B[0])),-F[2]),m(a(E(B[1],F[0]),E(-F[1],B[0])),_[2]))),z[3]),a(m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),z[2]),a(m(a(E(z[1],_[0]),E(-_[1],z[0])),-F[2]),m(a(E(z[1],F[0]),E(-F[1],z[0])),_[2]))),-B[3]),m(a(m(a(E(B[1],_[0]),E(-_[1],B[0])),z[2]),a(m(a(E(z[1],_[0]),E(-_[1],z[0])),-B[2]),m(a(E(z[1],B[0]),E(-B[1],z[0])),_[2]))),F[3]))),a(m(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),z[2]),a(m(a(E(z[1],F[0]),E(-F[1],z[0])),-B[2]),m(a(E(z[1],B[0]),E(-B[1],z[0])),F[2]))),-_[3]),a(m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),z[2]),a(m(a(E(z[1],_[0]),E(-_[1],z[0])),-F[2]),m(a(E(z[1],F[0]),E(-F[1],z[0])),_[2]))),O[3]),m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-F[2]),m(a(E(O[1],F[0]),E(-F[1],O[0])),_[2]))),-z[3])))),a(a(m(a(m(a(E(z[1],_[0]),E(-_[1],z[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),_[2]))),F[3]),a(m(a(m(a(E(z[1],F[0]),E(-F[1],z[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),F[2]))),-_[3]),m(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),z[2]),a(m(a(E(z[1],F[0]),E(-F[1],z[0])),-B[2]),m(a(E(z[1],B[0]),E(-B[1],z[0])),F[2]))),O[3]))),a(m(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-B[2]),m(a(E(O[1],B[0]),E(-B[1],O[0])),F[2]))),-z[3]),a(m(a(m(a(E(z[1],F[0]),E(-F[1],z[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),F[2]))),B[3]),m(a(m(a(E(z[1],B[0]),E(-B[1],z[0])),O[2]),a(m(a(E(O[1],B[0]),E(-B[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),B[2]))),-F[3]))))),G=a(a(a(m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),B[2]),a(m(a(E(B[1],_[0]),E(-_[1],B[0])),-F[2]),m(a(E(B[1],F[0]),E(-F[1],B[0])),_[2]))),O[3]),m(a(m(a(E(F[1],_[0]),E(-_[1],F[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-F[2]),m(a(E(O[1],F[0]),E(-F[1],O[0])),_[2]))),-B[3])),a(m(a(m(a(E(B[1],_[0]),E(-_[1],B[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-B[2]),m(a(E(O[1],B[0]),E(-B[1],O[0])),_[2]))),F[3]),m(a(m(a(E(B[1],F[0]),E(-F[1],B[0])),O[2]),a(m(a(E(O[1],F[0]),E(-F[1],O[0])),-B[2]),m(a(E(O[1],B[0]),E(-B[1],O[0])),F[2]))),-_[3]))),a(a(m(a(m(a(E(B[1],_[0]),E(-_[1],B[0])),z[2]),a(m(a(E(z[1],_[0]),E(-_[1],z[0])),-B[2]),m(a(E(z[1],B[0]),E(-B[1],z[0])),_[2]))),O[3]),m(a(m(a(E(B[1],_[0]),E(-_[1],B[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-B[2]),m(a(E(O[1],B[0]),E(-B[1],O[0])),_[2]))),-z[3])),a(m(a(m(a(E(z[1],_[0]),E(-_[1],z[0])),O[2]),a(m(a(E(O[1],_[0]),E(-_[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),_[2]))),B[3]),m(a(m(a(E(z[1],B[0]),E(-B[1],z[0])),O[2]),a(m(a(E(O[1],B[0]),E(-B[1],O[0])),-z[2]),m(a(E(O[1],z[0]),E(-z[1],O[0])),B[2]))),-_[3])))),X=k(N,G);return X[X.length-1]}}function d(a){var E=a===3?T:a===4?c:i;return E(s,e,n,l)}var x=d(3),w=d(4),C=[function(){return 0},function(){return 0},function(E,m){return m[0]-E[0]},function(E,m,k){var I=(E[1]-k[1])*(m[0]-k[0]),O=(E[0]-k[0])*(m[1]-k[1]),z=I-O,B;if(I>0){if(O<=0)return z;B=I+O}else if(I<0){if(O>=0)return z;B=-(I+O)}else return z;var F=g*B;return z>=F||z<=-F?z:x(E,m,k)},function(E,m,k,I){var O=E[0]-I[0],z=m[0]-I[0],B=k[0]-I[0],F=E[1]-I[1],_=m[1]-I[1],N=k[1]-I[1],G=E[2]-I[2],X=m[2]-I[2],$=k[2]-I[2],et=z*N,ot=B*_,nt=B*F,Z=O*N,Q=O*_,W=z*F,J=G*(et-ot)+X*(nt-Z)+$*(Q-W),it=(Math.abs(et)+Math.abs(ot))*Math.abs(G)+(Math.abs(nt)+Math.abs(Z))*Math.abs(X)+(Math.abs(Q)+Math.abs(W))*Math.abs($),K=h*it;return J>K||-J>K?J:w(E,m,k,I)}];function y(a){var E=C[a.length];return E||(E=C[a.length]=d(a.length)),E.apply(void 0,a)}function S(a,E,m,k,I,O,z){return function(F,_,N,G,X){switch(arguments.length){case 0:case 1:return 0;case 2:return k(F,_);case 3:return I(F,_,N);case 4:return O(F,_,N,G);case 5:return z(F,_,N,G,X)}for(var $=new Array(arguments.length),et=0;et<arguments.length;++et)$[et]=arguments[et];return a($)}}function M(){for(;C.length<=f;)C.push(d(C.length));v.exports=S.apply(void 0,[y].concat(C));for(var a=0;a<=f;++a)v.exports[a]=C[a]}M()},5382:function(v,p,r){var e=r(8210),s=r(3012);v.exports=n;function n(l,f){if(l.length===1)return s(f,l[0]);if(f.length===1)return s(l,f[0]);if(l.length===0||f.length===0)return[0];var u=[0];if(l.length<f.length)for(var g=0;g<l.length;++g)u=e(u,s(f,l[g]));else for(var g=0;g<f.length;++g)u=e(u,s(l,f[g]));return u}},3012:function(v,p,r){var e=r(5250),s=r(9362);v.exports=n;function n(l,f){var u=l.length;if(u===1){var g=e(l[0],f);return g[0]?g:[g[1]]}var h=new Array(2*u),T=[.1,.1],c=[.1,.1],i=0;e(l[0],f,T),T[0]&&(h[i++]=T[0]);for(var d=1;d<u;++d){e(l[d],f,c);var x=T[1];s(x,c[0],T),T[0]&&(h[i++]=T[0]);var w=c[1],C=T[1],y=w+C,S=y-w,M=C-S;T[1]=y,M&&(h[i++]=M)}return T[1]&&(h[i++]=T[1]),i===0&&(h[i++]=0),h.length=i,h}},1125:function(v,p,r){v.exports=n;var e=r(3250)[3];function s(l,f,u,g){for(var h=0;h<2;++h){var T=l[h],c=f[h],i=Math.min(T,c),d=Math.max(T,c),x=u[h],w=g[h],C=Math.min(x,w),y=Math.max(x,w);if(y<i||d<C)return!1}return!0}function n(l,f,u,g){var h=e(l,u,g),T=e(f,u,g);if(h>0&&T>0||h<0&&T<0)return!1;var c=e(u,l,f),i=e(g,l,f);return c>0&&i>0||c<0&&i<0?!1:h===0&&T===0&&c===0&&i===0?s(l,f,u,g):!0}},8545:function(v){v.exports=r;function p(e,s){var n=e+s,l=n-e,f=n-l,u=s-l,g=e-f,h=g+u;return h?[h,n]:[n]}function r(e,s){var n=e.length|0,l=s.length|0;if(n===1&&l===1)return p(e[0],-s[0]);var f=n+l,u=new Array(f),g=0,h=0,T=0,c=Math.abs,i=e[h],d=c(i),x=-s[T],w=c(x),C,y;d<w?(y=i,h+=1,h<n&&(i=e[h],d=c(i))):(y=x,T+=1,T<l&&(x=-s[T],w=c(x))),h<n&&d<w||T>=l?(C=i,h+=1,h<n&&(i=e[h],d=c(i))):(C=x,T+=1,T<l&&(x=-s[T],w=c(x)));for(var S=C+y,M=S-C,a=y-M,E=a,m=S,k,I,O,z,B;h<n&&T<l;)d<w?(C=i,h+=1,h<n&&(i=e[h],d=c(i))):(C=x,T+=1,T<l&&(x=-s[T],w=c(x))),y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k;for(;h<n;)C=i,y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k,h+=1,h<n&&(i=e[h]);for(;T<l;)C=x,y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k,T+=1,T<l&&(x=-s[T]);return E&&(u[g++]=E),m&&(u[g++]=m),g||(u[g++]=0),u.length=g,u}},8210:function(v){v.exports=r;function p(e,s){var n=e+s,l=n-e,f=n-l,u=s-l,g=e-f,h=g+u;return h?[h,n]:[n]}function r(e,s){var n=e.length|0,l=s.length|0;if(n===1&&l===1)return p(e[0],s[0]);var f=n+l,u=new Array(f),g=0,h=0,T=0,c=Math.abs,i=e[h],d=c(i),x=s[T],w=c(x),C,y;d<w?(y=i,h+=1,h<n&&(i=e[h],d=c(i))):(y=x,T+=1,T<l&&(x=s[T],w=c(x))),h<n&&d<w||T>=l?(C=i,h+=1,h<n&&(i=e[h],d=c(i))):(C=x,T+=1,T<l&&(x=s[T],w=c(x)));for(var S=C+y,M=S-C,a=y-M,E=a,m=S,k,I,O,z,B;h<n&&T<l;)d<w?(C=i,h+=1,h<n&&(i=e[h],d=c(i))):(C=x,T+=1,T<l&&(x=s[T],w=c(x))),y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k;for(;h<n;)C=i,y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k,h+=1,h<n&&(i=e[h]);for(;T<l;)C=x,y=E,S=C+y,M=S-C,a=y-M,a&&(u[g++]=a),k=m+S,I=k-m,O=k-I,z=S-I,B=m-O,E=B+z,m=k,T+=1,T<l&&(x=s[T]);return E&&(u[g++]=E),m&&(u[g++]=m),g||(u[g++]=0),u.length=g,u}},9127:function(v,p,r){v.exports=n;var e=r(6204),s=r(5771);function n(l){return s(e(l))}},7765:function(v,p,r){v.exports=i;var e=r(9618),s=r(1888),n=r(446),l=r(1570);function f(d){for(var x=d.length,w=0,C=0;C<x;++C)w=Math.max(w,d[C].length)|0;return w-1}function u(d,x){for(var w=d.length,C=s.mallocUint8(w),y=0;y<w;++y)C[y]=d[y]<x|0;return C}function g(d,x){for(var w=d.length,C=x*(x+1)/2*w|0,y=s.mallocUint32(C*2),S=0,M=0;M<w;++M)for(var a=d[M],x=a.length,E=0;E<x;++E)for(var m=0;m<E;++m){var k=a[m],I=a[E];y[S++]=Math.min(k,I)|0,y[S++]=Math.max(k,I)|0}var O=S/2|0;n(e(y,[O,2]));for(var z=2,M=2;M<S;M+=2)y[M-2]===y[M]&&y[M-1]===y[M+1]||(y[z++]=y[M],y[z++]=y[M+1]);return e(y,[z/2|0,2])}function h(d,x,w,C){for(var y=d.data,S=d.shape[0],M=s.mallocDouble(S),a=0,E=0;E<S;++E){var m=y[2*E],k=y[2*E+1];if(w[m]!==w[k]){var I=x[m],O=x[k];y[2*a]=m,y[2*a+1]=k,M[a++]=(O-C)/(O-I)}}return d.shape[0]=a,e(M,[a])}function T(d,x){var w=s.mallocInt32(x*2),C=d.shape[0],y=d.data;w[0]=0;for(var S=0,M=0;M<C;++M){var a=y[2*M];if(a!==S){for(w[2*S+1]=M;++S<a;)w[2*S]=M,w[2*S+1]=M;w[2*S]=M}}for(w[2*S+1]=C;++S<x;)w[2*S]=w[2*S+1]=C;return w}function c(d){for(var x=d.shape[0]|0,w=d.data,C=new Array(x),y=0;y<x;++y)C[y]=[w[2*y],w[2*y+1]];return C}function i(d,x,w,C){w=w||0,typeof C>"u"&&(C=f(d));var y=d.length;if(y===0||C<1)return{cells:[],vertexIds:[],vertexWeights:[]};var S=u(x,+w),M=g(d,C),a=h(M,x,S,+w),E=T(M,x.length|0),m=l(C)(d,M.data,E,S),k=c(M),I=[].slice.call(a.data,0,a.shape[0]);return s.free(S),s.free(M.data),s.free(a.data),s.free(E),{cells:m,vertexIds:k,vertexWeights:I}}},1570:function(v){v.exports=r;var p=[function(){function s(n,l,f,u){for(var g=n.length,h=[],T=0;T<g;++T){var c=n[T];c.length}return h}return s},function(){function s(l,f,u,g){for(var h=Math.min(u,g)|0,T=Math.max(u,g)|0,c=l[2*h],i=l[2*h+1];c<i;){var d=c+i>>1,x=f[2*d+1];if(x===T)return d;T<x?i=d:c=d+1}return c}function n(l,f,u,g){for(var h=l.length,T=[],c=0;c<h;++c){var i=l[c],d=i.length;if(d===2){var x=(g[i[0]]<<0)+(g[i[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[1])]);break;case 2:T.push([s(u,f,i[1],i[0])]);break}}}return T}return n},function(){function s(l,f,u,g){for(var h=Math.min(u,g)|0,T=Math.max(u,g)|0,c=l[2*h],i=l[2*h+1];c<i;){var d=c+i>>1,x=f[2*d+1];if(x===T)return d;T<x?i=d:c=d+1}return c}function n(l,f,u,g){for(var h=l.length,T=[],c=0;c<h;++c){var i=l[c],d=i.length;if(d===3){var x=(g[i[0]]<<0)+(g[i[1]]<<1)+(g[i[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[2]),s(u,f,i[0],i[1])]);break;case 2:T.push([s(u,f,i[1],i[0]),s(u,f,i[1],i[2])]);break;case 3:T.push([s(u,f,i[0],i[2]),s(u,f,i[1],i[2])]);break;case 4:T.push([s(u,f,i[2],i[1]),s(u,f,i[2],i[0])]);break;case 5:T.push([s(u,f,i[2],i[1]),s(u,f,i[0],i[1])]);break;case 6:T.push([s(u,f,i[1],i[0]),s(u,f,i[2],i[0])]);break}}else if(d===2){var x=(g[i[0]]<<0)+(g[i[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[1])]);break;case 2:T.push([s(u,f,i[1],i[0])]);break}}}return T}return n},function(){function s(l,f,u,g){for(var h=Math.min(u,g)|0,T=Math.max(u,g)|0,c=l[2*h],i=l[2*h+1];c<i;){var d=c+i>>1,x=f[2*d+1];if(x===T)return d;T<x?i=d:c=d+1}return c}function n(l,f,u,g){for(var h=l.length,T=[],c=0;c<h;++c){var i=l[c],d=i.length;if(d===4){var x=(g[i[0]]<<0)+(g[i[1]]<<1)+(g[i[2]]<<2)+(g[i[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[1]),s(u,f,i[0],i[2]),s(u,f,i[0],i[3])]);break;case 2:T.push([s(u,f,i[1],i[2]),s(u,f,i[1],i[0]),s(u,f,i[1],i[3])]);break;case 3:T.push([s(u,f,i[1],i[2]),s(u,f,i[0],i[2]),s(u,f,i[0],i[3])],[s(u,f,i[1],i[3]),s(u,f,i[1],i[2]),s(u,f,i[0],i[3])]);break;case 4:T.push([s(u,f,i[2],i[0]),s(u,f,i[2],i[1]),s(u,f,i[2],i[3])]);break;case 5:T.push([s(u,f,i[0],i[1]),s(u,f,i[2],i[1]),s(u,f,i[0],i[3])],[s(u,f,i[2],i[1]),s(u,f,i[2],i[3]),s(u,f,i[0],i[3])]);break;case 6:T.push([s(u,f,i[2],i[0]),s(u,f,i[1],i[0]),s(u,f,i[1],i[3])],[s(u,f,i[2],i[3]),s(u,f,i[2],i[0]),s(u,f,i[1],i[3])]);break;case 7:T.push([s(u,f,i[0],i[3]),s(u,f,i[1],i[3]),s(u,f,i[2],i[3])]);break;case 8:T.push([s(u,f,i[3],i[1]),s(u,f,i[3],i[0]),s(u,f,i[3],i[2])]);break;case 9:T.push([s(u,f,i[3],i[1]),s(u,f,i[0],i[1]),s(u,f,i[0],i[2])],[s(u,f,i[3],i[2]),s(u,f,i[3],i[1]),s(u,f,i[0],i[2])]);break;case 10:T.push([s(u,f,i[1],i[0]),s(u,f,i[3],i[0]),s(u,f,i[1],i[2])],[s(u,f,i[3],i[0]),s(u,f,i[3],i[2]),s(u,f,i[1],i[2])]);break;case 11:T.push([s(u,f,i[1],i[2]),s(u,f,i[0],i[2]),s(u,f,i[3],i[2])]);break;case 12:T.push([s(u,f,i[3],i[0]),s(u,f,i[2],i[0]),s(u,f,i[2],i[1])],[s(u,f,i[3],i[1]),s(u,f,i[3],i[0]),s(u,f,i[2],i[1])]);break;case 13:T.push([s(u,f,i[0],i[1]),s(u,f,i[2],i[1]),s(u,f,i[3],i[1])]);break;case 14:T.push([s(u,f,i[2],i[0]),s(u,f,i[1],i[0]),s(u,f,i[3],i[0])]);break}}else if(d===3){var x=(g[i[0]]<<0)+(g[i[1]]<<1)+(g[i[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[2]),s(u,f,i[0],i[1])]);break;case 2:T.push([s(u,f,i[1],i[0]),s(u,f,i[1],i[2])]);break;case 3:T.push([s(u,f,i[0],i[2]),s(u,f,i[1],i[2])]);break;case 4:T.push([s(u,f,i[2],i[1]),s(u,f,i[2],i[0])]);break;case 5:T.push([s(u,f,i[2],i[1]),s(u,f,i[0],i[1])]);break;case 6:T.push([s(u,f,i[1],i[0]),s(u,f,i[2],i[0])]);break}}else if(d===2){var x=(g[i[0]]<<0)+(g[i[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:T.push([s(u,f,i[0],i[1])]);break;case 2:T.push([s(u,f,i[1],i[0])]);break}}}return T}return n}];function r(e){return p[e]()}},6803:function(v,p,r){r(8828),r(1755);function e(s,n){var l=s.length,f=s.length-n.length,u=Math.min;if(f)return f;switch(l){case 0:return 0;case 1:return s[0]-n[0];case 2:var i=s[0]+s[1]-n[0]-n[1];return i||u(s[0],s[1])-u(n[0],n[1]);case 3:var g=s[0]+s[1],h=n[0]+n[1];if(i=g+s[2]-(h+n[2]),i)return i;var T=u(s[0],s[1]),c=u(n[0],n[1]),i=u(T,s[2])-u(c,n[2]);return i||u(T+s[2],g)-u(c+n[2],h);default:var d=s.slice(0);d.sort();var x=n.slice(0);x.sort();for(var w=0;w<l;++w)if(f=d[w]-x[w],f)return f;return 0}}p.Fw=e},3105:function(v,p){"use restrict";var r=32;p.INT_BITS=r,p.INT_MAX=2147483647,p.INT_MIN=-1<<r-1,p.sign=function(n){return(n>0)-(n<0)},p.abs=function(n){var l=n>>r-1;return(n^l)-l},p.min=function(n,l){return l^(n^l)&-(n<l)},p.max=function(n,l){return n^(n^l)&-(n<l)},p.isPow2=function(n){return!(n&n-1)&&!!n},p.log2=function(n){var l,f;return l=(n>65535)<<4,n>>>=l,f=(n>255)<<3,n>>>=f,l|=f,f=(n>15)<<2,n>>>=f,l|=f,f=(n>3)<<1,n>>>=f,l|=f,l|n>>1},p.log10=function(n){return n>=1e9?9:n>=1e8?8:n>=1e7?7:n>=1e6?6:n>=1e5?5:n>=1e4?4:n>=1e3?3:n>=100?2:n>=10?1:0},p.popCount=function(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),(n+(n>>>4)&252645135)*16843009>>>24};function e(n){var l=32;return n&=-n,n&&l--,n&65535&&(l-=16),n&16711935&&(l-=8),n&252645135&&(l-=4),n&858993459&&(l-=2),n&1431655765&&(l-=1),l}p.countTrailingZeros=e,p.nextPow2=function(n){return n+=n===0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n+1},p.prevPow2=function(n){return n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n-(n>>>1)},p.parity=function(n){return n^=n>>>16,n^=n>>>8,n^=n>>>4,n&=15,27030>>>n&1};var s=new Array(256);(function(n){for(var l=0;l<256;++l){var f=l,u=l,g=7;for(f>>>=1;f;f>>>=1)u<<=1,u|=f&1,--g;n[l]=u<<g&255}})(s),p.reverse=function(n){return s[n&255]<<24|s[n>>>8&255]<<16|s[n>>>16&255]<<8|s[n>>>24&255]},p.interleave2=function(n,l){return n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,n|l<<1},p.deinterleave2=function(n,l){return n=n>>>l&1431655765,n=(n|n>>>1)&858993459,n=(n|n>>>2)&252645135,n=(n|n>>>4)&16711935,n=(n|n>>>16)&65535,n<<16>>16},p.interleave3=function(n,l,f){return n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,n|=l<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,n|f<<2},p.deinterleave3=function(n,l){return n=n>>>l&1227133513,n=(n|n>>>2)&3272356035,n=(n|n>>>4)&251719695,n=(n|n>>>8)&4278190335,n=(n|n>>>16)&1023,n<<22>>22},p.nextCombination=function(n){var l=n|n-1;return l+1|(~l&-~l)-1>>>e(n)+1}},2014:function(v,p,r){"use restrict";var e=r(3105),s=r(4623);function n(a){for(var E=0,m=Math.max,k=0,I=a.length;k<I;++k)E=m(E,a[k].length);return E-1}p.dimension=n;function l(a){for(var E=-1,m=Math.max,k=0,I=a.length;k<I;++k)for(var O=a[k],z=0,B=O.length;z<B;++z)E=m(E,O[z]);return E+1}p.countVertices=l;function f(a){for(var E=new Array(a.length),m=0,k=a.length;m<k;++m)E[m]=a[m].slice(0);return E}p.cloneCells=f;function u(a,E){var m=a.length,k=a.length-E.length,I=Math.min;if(k)return k;switch(m){case 0:return 0;case 1:return a[0]-E[0];case 2:var _=a[0]+a[1]-E[0]-E[1];return _||I(a[0],a[1])-I(E[0],E[1]);case 3:var O=a[0]+a[1],z=E[0]+E[1];if(_=O+a[2]-(z+E[2]),_)return _;var B=I(a[0],a[1]),F=I(E[0],E[1]),_=I(B,a[2])-I(F,E[2]);return _||I(B+a[2],O)-I(F+E[2],z);default:var N=a.slice(0);N.sort();var G=E.slice(0);G.sort();for(var X=0;X<m;++X)if(k=N[X]-G[X],k)return k;return 0}}p.compareCells=u;function g(a,E){return u(a[0],E[0])}function h(a,E){if(E){for(var m=a.length,k=new Array(m),I=0;I<m;++I)k[I]=[a[I],E[I]];k.sort(g);for(var I=0;I<m;++I)a[I]=k[I][0],E[I]=k[I][1];return a}else return a.sort(u),a}p.normalize=h;function T(a){if(a.length===0)return[];for(var E=1,m=a.length,k=1;k<m;++k){var I=a[k];if(u(I,a[k-1])){if(k===E){E++;continue}a[E++]=I}}return a.length=E,a}p.unique=T;function c(a,E){for(var m=0,k=a.length-1,I=-1;m<=k;){var O=m+k>>1,z=u(a[O],E);z<=0?(z===0&&(I=O),m=O+1):z>0&&(k=O-1)}return I}p.findCell=c;function i(a,E){for(var m=new Array(a.length),k=0,I=m.length;k<I;++k)m[k]=[];for(var O=[],k=0,z=E.length;k<z;++k)for(var B=E[k],F=B.length,_=1,N=1<<F;_<N;++_){O.length=e.popCount(_);for(var G=0,X=0;X<F;++X)_&1<<X&&(O[G++]=B[X]);var $=c(a,O);if(!($<0))for(;m[$++].push(k),!($>=a.length||u(a[$],O)!==0););}return m}p.incidence=i;function d(a,E){if(!E)return i(T(w(a,0)),a);for(var m=new Array(E),k=0;k<E;++k)m[k]=[];for(var k=0,I=a.length;k<I;++k)for(var O=a[k],z=0,B=O.length;z<B;++z)m[O[z]].push(k);return m}p.dual=d;function x(a){for(var E=[],m=0,k=a.length;m<k;++m)for(var I=a[m],O=I.length|0,z=1,B=1<<O;z<B;++z){for(var F=[],_=0;_<O;++_)z>>>_&1&&F.push(I[_]);E.push(F)}return h(E)}p.explode=x;function w(a,E){if(E<0)return[];for(var m=[],k=(1<<E+1)-1,I=0;I<a.length;++I)for(var O=a[I],z=k;z<1<<O.length;z=e.nextCombination(z)){for(var B=new Array(E+1),F=0,_=0;_<O.length;++_)z&1<<_&&(B[F++]=O[_]);m.push(B)}return h(m)}p.skeleton=w;function C(a){for(var E=[],m=0,k=a.length;m<k;++m)for(var I=a[m],O=0,z=I.length;O<z;++O){for(var B=new Array(I.length-1),F=0,_=0;F<z;++F)F!==O&&(B[_++]=I[F]);E.push(B)}return h(E)}p.boundary=C;function y(a,E){for(var m=new s(E),k=0;k<a.length;++k)for(var I=a[k],O=0;O<I.length;++O)for(var z=O+1;z<I.length;++z)m.link(I[O],I[z]);for(var B=[],F=m.ranks,k=0;k<F.length;++k)F[k]=-1;for(var k=0;k<a.length;++k){var _=m.find(a[k][0]);F[_]<0?(F[_]=B.length,B.push([a[k].slice(0)])):B[F[_]].push(a[k].slice(0))}return B}function S(a){for(var E=T(h(w(a,0))),m=new s(E.length),k=0;k<a.length;++k)for(var I=a[k],O=0;O<I.length;++O)for(var z=c(E,[I[O]]),B=O+1;B<I.length;++B)m.link(z,c(E,[I[B]]));for(var F=[],_=m.ranks,k=0;k<_.length;++k)_[k]=-1;for(var k=0;k<a.length;++k){var N=m.find(c(E,[a[k][0]]));_[N]<0?(_[N]=F.length,F.push([a[k].slice(0)])):F[_[N]].push(a[k].slice(0))}return F}function M(a,E){return E?y(a,E):S(a)}p.connectedComponents=M},4623:function(v){"use restrict";v.exports=p;function p(r){this.roots=new Array(r),this.ranks=new Array(r);for(var e=0;e<r;++e)this.roots[e]=e,this.ranks[e]=0}p.prototype.length=function(){return this.roots.length},p.prototype.makeSet=function(){var r=this.roots.length;return this.roots.push(r),this.ranks.push(0),r},p.prototype.find=function(r){for(var e=this.roots;e[r]!==r;){var s=e[r];e[r]=e[s],r=s}return r},p.prototype.link=function(r,e){var s=this.find(r),n=this.find(e);if(s!==n){var l=this.ranks,f=this.roots,u=l[s],g=l[n];u<g?f[s]=n:g<u?f[n]=s:(f[n]=s,++l[s])}}},5878:function(v,p,r){v.exports=l;var e=r(3250),s=r(2014);function n(f,u,g){var h=Math.abs(e(f,u,g)),T=Math.sqrt(Math.pow(u[0]-g[0],2)+Math.pow(u[1]-g[1],2));return h/T}function l(f,u,g){for(var h=u.length,T=f.length,c=new Array(h),i=new Array(h),d=new Array(h),x=new Array(h),w=0;w<h;++w)c[w]=i[w]=-1,d[w]=1/0,x[w]=!1;for(var w=0;w<T;++w){var C=f[w];if(C.length!==2)throw new Error("Input must be a graph");var y=C[1],S=C[0];i[S]!==-1?i[S]=-2:i[S]=y,c[y]!==-1?c[y]=-2:c[y]=S}function M(nt){if(x[nt])return 1/0;var Z=c[nt],Q=i[nt];return Z<0||Q<0?1/0:n(u[nt],u[Z],u[Q])}function a(nt,Z){var Q=F[nt],W=F[Z];F[nt]=W,F[Z]=Q,_[Q]=Z,_[W]=nt}function E(nt){return d[F[nt]]}function m(nt){return nt&1?nt-1>>1:(nt>>1)-1}function k(nt){for(var Z=E(nt);;){var Q=Z,W=2*nt+1,J=2*(nt+1),it=nt;if(W<G){var K=E(W);K<Q&&(it=W,Q=K)}if(J<G){var H=E(J);H<Q&&(it=J)}if(it===nt)return nt;a(nt,it),nt=it}}function I(nt){for(var Z=E(nt);nt>0;){var Q=m(nt);if(Q>=0){var W=E(Q);if(Z<W){a(nt,Q),nt=Q;continue}}return nt}}function O(){if(G>0){var nt=F[0];return a(0,G-1),G-=1,k(0),nt}return-1}function z(nt,Z){var Q=F[nt];return d[Q]===Z?nt:(d[Q]=-1/0,I(nt),O(),d[Q]=Z,G+=1,I(G-1))}function B(nt){if(!x[nt]){x[nt]=!0;var Z=c[nt],Q=i[nt];c[Q]>=0&&(c[Q]=Z),i[Z]>=0&&(i[Z]=Q),_[Z]>=0&&z(_[Z],M(Z)),_[Q]>=0&&z(_[Q],M(Q))}}for(var F=[],_=new Array(h),w=0;w<h;++w){var N=d[w]=M(w);N<1/0?(_[w]=F.length,F.push(w)):_[w]=-1}for(var G=F.length,w=G>>1;w>=0;--w)k(w);for(;;){var X=O();if(X<0||d[X]>g)break;B(X)}for(var $=[],w=0;w<h;++w)x[w]||(_[w]=$.length,$.push(u[w].slice()));$.length;function et(nt,Z){if(nt[Z]<0)return Z;var Q=Z,W=Z;do{var J=nt[W];if(!x[W]||J<0||J===W||(W=J,J=nt[W],!x[W]||J<0||J===W))break;W=J,Q=nt[Q]}while(Q!==W);for(var it=Z;it!==W;it=nt[it])nt[it]=W;return W}var ot=[];return f.forEach(function(nt){var Z=et(c,nt[0]),Q=et(i,nt[1]);if(Z>=0&&Q>=0&&Z!==Q){var W=_[Z],J=_[Q];W!==J&&ot.push([W,J])}}),s.unique(s.normalize(ot)),{positions:$,edges:ot}}},1303:function(v,p,r){v.exports=n;var e=r(3250);function s(l,f){var u,g;if(f[0][0]<f[1][0])u=f[0],g=f[1];else if(f[0][0]>f[1][0])u=f[1],g=f[0];else{var h=Math.min(l[0][1],l[1][1]),T=Math.max(l[0][1],l[1][1]),c=Math.min(f[0][1],f[1][1]),i=Math.max(f[0][1],f[1][1]);return T<c?T-c:h>i?h-i:T-i}var d,x;l[0][1]<l[1][1]?(d=l[0],x=l[1]):(d=l[1],x=l[0]);var w=e(g,u,d);return w||(w=e(g,u,x),w)?w:x-g}function n(l,f){var u,g;if(f[0][0]<f[1][0])u=f[0],g=f[1];else if(f[0][0]>f[1][0])u=f[1],g=f[0];else return s(f,l);var h,T;if(l[0][0]<l[1][0])h=l[0],T=l[1];else if(l[0][0]>l[1][0])h=l[1],T=l[0];else return-s(l,f);var c=e(u,g,T),i=e(u,g,h);if(c<0){if(i<=0)return c}else if(c>0){if(i>=0)return c}else if(i)return i;if(c=e(T,h,g),i=e(T,h,u),c<0){if(i<=0)return c}else if(c>0){if(i>=0)return c}else if(i)return i;return g[0]-T[0]}},4209:function(v,p,r){v.exports=i;var e=r(2478),s=r(3840),n=r(3250),l=r(1303);function f(d,x,w){this.slabs=d,this.coordinates=x,this.horizontal=w}var u=f.prototype;function g(d,x){return d.y-x}function h(d,x){for(var w=null;d;){var C=d.key,y,S;C[0][0]<C[1][0]?(y=C[0],S=C[1]):(y=C[1],S=C[0]);var M=n(y,S,x);if(M<0)d=d.left;else if(M>0)if(x[0]!==C[1][0])w=d,d=d.right;else{var a=h(d.right,x);if(a)return a;d=d.left}else{if(x[0]!==C[1][0])return d;var a=h(d.right,x);if(a)return a;d=d.left}}return w}u.castUp=function(d){var x=e.le(this.coordinates,d[0]);if(x<0)return-1;this.slabs[x];var w=h(this.slabs[x],d),C=-1;if(w&&(C=w.value),this.coordinates[x]===d[0]){var y=null;if(w&&(y=w.key),x>0){var S=h(this.slabs[x-1],d);S&&(y?l(S.key,y)>0&&(y=S.key,C=S.value):(C=S.value,y=S.key))}var M=this.horizontal[x];if(M.length>0){var a=e.ge(M,d[1],g);if(a<M.length){var E=M[a];if(d[1]===E.y){if(E.closed)return E.index;for(;a<M.length-1&&M[a+1].y===d[1];)if(a=a+1,E=M[a],E.closed)return E.index;if(E.y===d[1]&&!E.start){if(a=a+1,a>=M.length)return C;E=M[a]}}if(E.start)if(y){var m=n(y[0],y[1],[d[0],E.y]);y[0][0]>y[1][0]&&(m=-m),m>0&&(C=E.index)}else C=E.index;else E.y!==d[1]&&(C=E.index)}}}return C};function T(d,x,w,C){this.y=d,this.index=x,this.start=w,this.closed=C}function c(d,x,w,C){this.x=d,this.segment=x,this.create=w,this.index=C}function i(d){for(var x=d.length,w=2*x,C=new Array(w),y=0;y<x;++y){var S=d[y],M=S[0][0]<S[1][0];C[2*y]=new c(S[0][0],S,M,y),C[2*y+1]=new c(S[1][0],S,!M,y)}C.sort(function(B,F){var _=B.x-F.x;return _||(_=B.create-F.create,_)?_:Math.min(B.segment[0][1],B.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var a=s(l),E=[],m=[],k=[],y=0;y<w;){for(var I=C[y].x,O=[];y<w;){var z=C[y];if(z.x!==I)break;y+=1,z.segment[0][0]===z.x&&z.segment[1][0]===z.x?z.create&&(z.segment[0][1]<z.segment[1][1]?(O.push(new T(z.segment[0][1],z.index,!0,!0)),O.push(new T(z.segment[1][1],z.index,!1,!1))):(O.push(new T(z.segment[1][1],z.index,!0,!1)),O.push(new T(z.segment[0][1],z.index,!1,!0)))):z.create?a=a.insert(z.segment,z.index):a=a.remove(z.segment)}E.push(a.root),m.push(I),k.push(O)}return new f(E,m,k)}},5202:function(v,p,r){var e=r(1944),s=r(8210);v.exports=f,v.exports.positive=u,v.exports.negative=g;function n(h,T){var c=s(e(h,T),[T[T.length-1]]);return c[c.length-1]}function l(h,T,c,i){var d=i-T,x=-T/d;x<0?x=0:x>1&&(x=1);for(var w=1-x,C=h.length,y=new Array(C),S=0;S<C;++S)y[S]=x*h[S]+w*c[S];return y}function f(h,T){for(var c=[],i=[],d=n(h[h.length-1],T),x=h[h.length-1],w=h[0],C=0;C<h.length;++C,x=w){w=h[C];var y=n(w,T);if(d<0&&y>0||d>0&&y<0){var S=l(x,y,w,d);c.push(S),i.push(S.slice())}y<0?i.push(w.slice()):y>0?c.push(w.slice()):(c.push(w.slice()),i.push(w.slice())),d=y}return{positive:c,negative:i}}function u(h,T){for(var c=[],i=n(h[h.length-1],T),d=h[h.length-1],x=h[0],w=0;w<h.length;++w,d=x){x=h[w];var C=n(x,T);(i<0&&C>0||i>0&&C<0)&&c.push(l(d,C,x,i)),C>=0&&c.push(x.slice()),i=C}return c}function g(h,T){for(var c=[],i=n(h[h.length-1],T),d=h[h.length-1],x=h[0],w=0;w<h.length;++w,d=x){x=h[w];var C=n(x,T);(i<0&&C>0||i>0&&C<0)&&c.push(l(d,C,x,i)),C<=0&&c.push(x.slice()),i=C}return c}},3387:function(v,p,r){var e;(function(){var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(h){return f(g(h),arguments)}function l(h,T){return n.apply(null,[h].concat(T||[]))}function f(h,T){var c=1,i=h.length,d,x="",w,C,y,S,M,a,E,m;for(w=0;w<i;w++)if(typeof h[w]=="string")x+=h[w];else if(typeof h[w]=="object"){if(y=h[w],y.keys)for(d=T[c],C=0;C<y.keys.length;C++){if(d==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[C],y.keys[C-1]));d=d[y.keys[C]]}else y.param_no?d=T[y.param_no]:d=T[c++];if(s.not_type.test(y.type)&&s.not_primitive.test(y.type)&&d instanceof Function&&(d=d()),s.numeric_arg.test(y.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(n("[sprintf] expecting number but found %T",d));switch(s.number.test(y.type)&&(E=d>=0),y.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,y.width?parseInt(y.width):0);break;case"e":d=y.precision?parseFloat(d).toExponential(y.precision):parseFloat(d).toExponential();break;case"f":d=y.precision?parseFloat(d).toFixed(y.precision):parseFloat(d);break;case"g":d=y.precision?String(Number(d.toPrecision(y.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=y.precision?d.substring(0,y.precision):d;break;case"t":d=String(!!d),d=y.precision?d.substring(0,y.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=y.precision?d.substring(0,y.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=y.precision?d.substring(0,y.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}s.json.test(y.type)?x+=d:(s.number.test(y.type)&&(!E||y.sign)?(m=E?"+":"-",d=d.toString().replace(s.sign,"")):m="",M=y.pad_char?y.pad_char==="0"?"0":y.pad_char.charAt(1):" ",a=y.width-(m+d).length,S=y.width&&a>0?M.repeat(a):"",x+=y.align?m+d+S:M==="0"?m+S+d:S+m+d)}return x}var u=Object.create(null);function g(h){if(u[h])return u[h];for(var T=h,c,i=[],d=0;T;){if((c=s.text.exec(T))!==null)i.push(c[0]);else if((c=s.modulo.exec(T))!==null)i.push("%");else if((c=s.placeholder.exec(T))!==null){if(c[2]){d|=1;var x=[],w=c[2],C=[];if((C=s.key.exec(w))!==null)for(x.push(C[1]);(w=w.substring(C[0].length))!=="";)if((C=s.key_access.exec(w))!==null)x.push(C[1]);else if((C=s.index_access.exec(w))!==null)x.push(C[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=x}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");T=T.substring(c[0].length)}return u[h]=i}p.sprintf=n,p.vsprintf=l,typeof window<"u"&&(window.sprintf=n,window.vsprintf=l,e=function(){return{sprintf:n,vsprintf:l}}.call(p,r,p,v),e!==void 0&&(v.exports=e))})()},3711:function(v,p,r){v.exports=g;var e=r(2640),s=r(781),n={"2d":function(h,T,c){var i=h({order:T,scalarArguments:3,getters:c==="generic"?[0]:void 0,phase:function(x,w,C,y){return x>y|0},vertex:function(x,w,C,y,S,M,a,E,m,k,I,O,z){var B=(a<<0)+(E<<1)+(m<<2)+(k<<3)|0;if(!(B===0||B===15))switch(B){case 0:I.push([x-.5,w-.5]);break;case 1:I.push([x-.25-.25*(y+C-2*z)/(C-y),w-.25-.25*(S+C-2*z)/(C-S)]);break;case 2:I.push([x-.75-.25*(-y-C+2*z)/(y-C),w-.25-.25*(M+y-2*z)/(y-M)]);break;case 3:I.push([x-.5,w-.5-.5*(S+C+M+y-4*z)/(C-S+y-M)]);break;case 4:I.push([x-.25-.25*(M+S-2*z)/(S-M),w-.75-.25*(-S-C+2*z)/(S-C)]);break;case 5:I.push([x-.5-.5*(y+C+M+S-4*z)/(C-y+S-M),w-.5]);break;case 6:I.push([x-.5-.25*(-y-C+M+S)/(y-C+S-M),w-.5-.25*(-S-C+M+y)/(S-C+y-M)]);break;case 7:I.push([x-.75-.25*(M+S-2*z)/(S-M),w-.75-.25*(M+y-2*z)/(y-M)]);break;case 8:I.push([x-.75-.25*(-M-S+2*z)/(M-S),w-.75-.25*(-M-y+2*z)/(M-y)]);break;case 9:I.push([x-.5-.25*(y+C+-M-S)/(C-y+M-S),w-.5-.25*(S+C+-M-y)/(C-S+M-y)]);break;case 10:I.push([x-.5-.5*(-y-C+-M-S+4*z)/(y-C+M-S),w-.5]);break;case 11:I.push([x-.25-.25*(-M-S+2*z)/(M-S),w-.75-.25*(S+C-2*z)/(C-S)]);break;case 12:I.push([x-.5,w-.5-.5*(-S-C+-M-y+4*z)/(S-C+M-y)]);break;case 13:I.push([x-.75-.25*(y+C-2*z)/(C-y),w-.25-.25*(-M-y+2*z)/(M-y)]);break;case 14:I.push([x-.25-.25*(-y-C+2*z)/(y-C),w-.25-.25*(-S-C+2*z)/(S-C)]);break;case 15:I.push([x-.5,w-.5]);break}},cell:function(x,w,C,y,S,M,a,E,m){S?E.push([x,w]):E.push([w,x])}});return function(d,x){var w=[],C=[];return i(d,w,C,x),{positions:w,cells:C}}}};function l(h,T){var c=h.length+"d",i=n[c];if(i)return i(e,h,T)}function f(h,T){for(var c=s(h,T),i=c.length,d=new Array(i),x=new Array(i),w=0;w<i;++w)d[w]=[c[w]],x[w]=[w];return{positions:d,cells:x}}var u={};function g(h,d){if(h.dimension<=0)return{positions:[],cells:[]};if(h.dimension===1)return f(h,d);var c=h.order.join()+"-"+h.dtype,i=u[c],d=+d||0;return i||(i=u[c]=l(h.order,h.dtype)),i(h,d)}},529:function(v,p,r){v.exports=f;var e=r(4359),s=window||b.global||{},n=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function l(u){for(var g=u.cells,h=u.positions,T=new Float32Array(g.length*6),c=0,i=0,d=0;d<g.length;++d)for(var x=g[d],w=0;w<3;++w){var C=h[x[w]];T[c++]=C[0],T[c++]=C[1]+1.4,i=Math.max(C[0],i)}return{data:T,shape:i}}function f(u,g,T){var T=T||{},c=T.fontStyle||"normal",i=T.fontWeight||"normal",d=T.fontVariant||"normal",x=[c,i,d,u].join("_"),w=n[x];w||(w=n[x]={" ":{data:new Float32Array(0),shape:.2}});var C=w[g];if(!C)if(g.length<=1||!/\d/.test(g))C=w[g]=l(e(g,{triangles:!0,font:u,fontStyle:c,fontWeight:i,fontVariant:d,textAlign:T.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var y=g.split(/(\d|\s)/),S=new Array(y.length),M=0,a=0,E=0;E<y.length;++E)S[E]=f(u,y[E]),M+=S[E].data.length,a+=S[E].shape,E>0&&(a+=.02);for(var m=new Float32Array(M),k=0,I=-.5*a,E=0;E<S.length;++E){for(var O=S[E].data,z=0;z<O.length;z+=2)m[k++]=O[z]+I,m[k++]=O[z+1];I+=S[E].shape+.02}C=w[g]={data:m,shape:a}}return C}},665:function(v,p,r){var e=r(3202);v.exports=f;var s=96;function n(u,g){var h=e(getComputedStyle(u).getPropertyValue(g));return h[0]*f(h[1],u)}function l(u,g){var h=document.createElement("div");h.style["font-size"]="128"+u,g.appendChild(h);var T=n(h,"font-size")/128;return g.removeChild(h),T}function f(u,g){switch(g=g||document.body,u=(u||"px").trim().toLowerCase(),(g===window||g===document)&&(g=document.body),u){case"%":return g.clientHeight/100;case"ch":case"ex":return l(u,g);case"em":return n(g,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}},7261:function(v,p,r){v.exports=x;var e=r(9215),s=r(7608),n=r(6079),l=r(5911),f=r(3536),u=r(244);function g(w,C,y){return Math.sqrt(Math.pow(w,2)+Math.pow(C,2)+Math.pow(y,2))}function h(w){return Math.min(1,Math.max(-1,w))}function T(w){var C=Math.abs(w[0]),y=Math.abs(w[1]),S=Math.abs(w[2]),M=[0,0,0];C>Math.max(y,S)?M[2]=1:y>Math.max(C,S)?M[0]=1:M[1]=1;for(var a=0,E=0,m=0;m<3;++m)a+=w[m]*w[m],E+=M[m]*w[m];for(var m=0;m<3;++m)M[m]-=E/a*w[m];return f(M,M),M}function c(w,C,y,S,M,a,E,m){this.center=e(y),this.up=e(S),this.right=e(M),this.radius=e([a]),this.angle=e([E,m]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(w,C),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var k=0;k<16;++k)this.computedMatrix[k]=.5;this.recalcMatrix(0)}var i=c.prototype;i.setDistanceLimits=function(w,C){w>0?w=Math.log(w):w=-1/0,C>0?C=Math.log(C):C=1/0,C=Math.max(C,w),this.radius.bounds[0][0]=w,this.radius.bounds[1][0]=C},i.getDistanceLimits=function(w){var C=this.radius.bounds[0];return w?(w[0]=Math.exp(C[0][0]),w[1]=Math.exp(C[1][0]),w):[Math.exp(C[0][0]),Math.exp(C[1][0])]},i.recalcMatrix=function(w){this.center.curve(w),this.up.curve(w),this.right.curve(w),this.radius.curve(w),this.angle.curve(w);for(var C=this.computedUp,y=this.computedRight,S=0,M=0,a=0;a<3;++a)M+=C[a]*y[a],S+=C[a]*C[a];for(var E=Math.sqrt(S),m=0,a=0;a<3;++a)y[a]-=C[a]*M/S,m+=y[a]*y[a],C[a]/=E;for(var k=Math.sqrt(m),a=0;a<3;++a)y[a]/=k;var I=this.computedToward;l(I,C,y),f(I,I);for(var O=Math.exp(this.computedRadius[0]),z=this.computedAngle[0],B=this.computedAngle[1],F=Math.cos(z),_=Math.sin(z),N=Math.cos(B),G=Math.sin(B),X=this.computedCenter,$=F*N,et=_*N,ot=G,nt=-F*G,Z=-_*G,Q=N,W=this.computedEye,J=this.computedMatrix,a=0;a<3;++a){var it=$*y[a]+et*I[a]+ot*C[a];J[4*a+1]=nt*y[a]+Z*I[a]+Q*C[a],J[4*a+2]=it,J[4*a+3]=0}var K=J[1],H=J[5],at=J[9],tt=J[2],lt=J[6],dt=J[10],mt=H*dt-at*lt,gt=at*tt-K*dt,Mt=K*lt-H*tt,Lt=g(mt,gt,Mt);mt/=Lt,gt/=Lt,Mt/=Lt,J[0]=mt,J[4]=gt,J[8]=Mt;for(var a=0;a<3;++a)W[a]=X[a]+J[2+4*a]*O;for(var a=0;a<3;++a){for(var m=0,zt=0;zt<3;++zt)m+=J[a+4*zt]*W[zt];J[12+a]=-m}J[15]=1},i.getMatrix=function(w,C){this.recalcMatrix(w);var y=this.computedMatrix;if(C){for(var S=0;S<16;++S)C[S]=y[S];return C}return y};var d=[0,0,0];i.rotate=function(w,C,y,S){if(this.angle.move(w,C,y),S){this.recalcMatrix(w);var M=this.computedMatrix;d[0]=M[2],d[1]=M[6],d[2]=M[10];for(var a=this.computedUp,E=this.computedRight,m=this.computedToward,k=0;k<3;++k)M[4*k]=a[k],M[4*k+1]=E[k],M[4*k+2]=m[k];n(M,M,S,d);for(var k=0;k<3;++k)a[k]=M[4*k],E[k]=M[4*k+1];this.up.set(w,a[0],a[1],a[2]),this.right.set(w,E[0],E[1],E[2])}},i.pan=function(w,C,y,S){C=C||0,y=y||0,S=S||0,this.recalcMatrix(w);var M=this.computedMatrix;Math.exp(this.computedRadius[0]);var a=M[1],E=M[5],m=M[9],k=g(a,E,m);a/=k,E/=k,m/=k;var I=M[0],O=M[4],z=M[8],B=I*a+O*E+z*m;I-=a*B,O-=E*B,z-=m*B;var F=g(I,O,z);I/=F,O/=F,z/=F;var _=I*C+a*y,N=O*C+E*y,G=z*C+m*y;this.center.move(w,_,N,G);var X=Math.exp(this.computedRadius[0]);X=Math.max(1e-4,X+S),this.radius.set(w,Math.log(X))},i.translate=function(w,C,y,S){this.center.move(w,C||0,y||0,S||0)},i.setMatrix=function(w,C,y,S){var M=1;typeof y=="number"&&(M=y|0),(M<0||M>3)&&(M=1);var a=(M+2)%3;C||(this.recalcMatrix(w),C=this.computedMatrix);var E=C[M],m=C[M+4],k=C[M+8];if(S){var O=Math.abs(E),z=Math.abs(m),B=Math.abs(k),F=Math.max(O,z,B);O===F?(E=E<0?-1:1,m=k=0):B===F?(k=k<0?-1:1,E=m=0):(m=m<0?-1:1,E=k=0)}else{var I=g(E,m,k);E/=I,m/=I,k/=I}var _=C[a],N=C[a+4],G=C[a+8],X=_*E+N*m+G*k;_-=E*X,N-=m*X,G-=k*X;var $=g(_,N,G);_/=$,N/=$,G/=$;var et=m*G-k*N,ot=k*_-E*G,nt=E*N-m*_,Z=g(et,ot,nt);et/=Z,ot/=Z,nt/=Z,this.center.jump(w,Rt,Tt,Bt),this.radius.idle(w),this.up.jump(w,E,m,k),this.right.jump(w,_,N,G);var Q,W;if(M===2){var J=C[1],it=C[5],K=C[9],H=J*_+it*N+K*G,at=J*et+it*ot+K*nt;mt<0?Q=-Math.PI/2:Q=Math.PI/2,W=Math.atan2(at,H)}else{var tt=C[2],lt=C[6],dt=C[10],mt=tt*E+lt*m+dt*k,gt=tt*_+lt*N+dt*G,Mt=tt*et+lt*ot+dt*nt;Q=Math.asin(h(mt)),W=Math.atan2(Mt,gt)}this.angle.jump(w,W,Q),this.recalcMatrix(w);var Lt=C[2],zt=C[6],xt=C[10],Ct=this.computedMatrix;s(Ct,C);var wt=Ct[15],Rt=Ct[12]/wt,Tt=Ct[13]/wt,Bt=Ct[14]/wt,Gt=Math.exp(this.computedRadius[0]);this.center.jump(w,Rt-Lt*Gt,Tt-zt*Gt,Bt-xt*Gt)},i.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},i.idle=function(w){this.center.idle(w),this.up.idle(w),this.right.idle(w),this.radius.idle(w),this.angle.idle(w)},i.flush=function(w){this.center.flush(w),this.up.flush(w),this.right.flush(w),this.radius.flush(w),this.angle.flush(w)},i.setDistance=function(w,C){C>0&&this.radius.set(w,Math.log(C))},i.lookAt=function(w,C,y,S){this.recalcMatrix(w),C=C||this.computedEye,y=y||this.computedCenter,S=S||this.computedUp;var M=S[0],a=S[1],E=S[2],m=g(M,a,E);if(!(m<1e-6)){M/=m,a/=m,E/=m;var k=C[0]-y[0],I=C[1]-y[1],O=C[2]-y[2],z=g(k,I,O);if(!(z<1e-6)){k/=z,I/=z,O/=z;var B=this.computedRight,F=B[0],_=B[1],N=B[2],G=M*F+a*_+E*N;F-=G*M,_-=G*a,N-=G*E;var X=g(F,_,N);if(!(X<.01&&(F=a*O-E*I,_=E*k-M*O,N=M*I-a*k,X=g(F,_,N),X<1e-6))){F/=X,_/=X,N/=X,this.up.set(w,M,a,E),this.right.set(w,F,_,N),this.center.set(w,y[0],y[1],y[2]),this.radius.set(w,Math.log(z));var $=a*N-E*_,et=E*F-M*N,ot=M*_-a*F,nt=g($,et,ot);$/=nt,et/=nt,ot/=nt;var Z=M*k+a*I+E*O,Q=F*k+_*I+N*O,W=$*k+et*I+ot*O,J=Math.asin(h(Z)),it=Math.atan2(W,Q),K=this.angle._state,H=K[K.length-1],at=K[K.length-2];H=H%(2*Math.PI);var tt=Math.abs(H+2*Math.PI-it),lt=Math.abs(H-it),dt=Math.abs(H-2*Math.PI-it);tt<lt&&(H+=2*Math.PI),dt<lt&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,at),this.angle.set(w,it,J)}}}};function x(w){w=w||{};var C=w.center||[0,0,0],y=w.up||[0,1,0],S=w.right||T(y),M=w.radius||1,a=w.theta||0,E=w.phi||0;if(C=[].slice.call(C,0,3),y=[].slice.call(y,0,3),f(y,y),S=[].slice.call(S,0,3),f(S,S),"eye"in w){var m=w.eye,k=[m[0]-C[0],m[1]-C[1],m[2]-C[2]];l(S,k,y),g(S[0],S[1],S[2])<1e-6?S=T(y):f(S,S),M=g(k[0],k[1],k[2]);var I=u(y,k)/M,O=u(S,k)/M;E=Math.acos(I),a=Math.acos(O)}return M=Math.log(M),new c(w.zoomMin,w.zoomMax,C,y,S,M,a,E)}},5250:function(v){v.exports=r;var p=+(Math.pow(2,27)+1);function r(e,s,n){var l=e*s,f=p*e,u=f-e,g=f-u,h=e-g,T=p*s,c=T-s,i=T-c,d=s-i,x=l-g*i,w=x-h*i,C=w-g*d,y=h*d-C;return n?(n[0]=y,n[1]=l,n):[y,l]}},9362:function(v){v.exports=p;function p(r,e,s){var n=r+e,l=n-r,f=n-l,u=e-l,g=r-f;return s?(s[0]=g+u,s[1]=n,s):[g+u,n]}},1888:function(v,p,r){var e=r(8828),s=r(1338),n=r(4793).hp;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:s([32,0]),UINT16:s([32,0]),UINT32:s([32,0]),BIGUINT64:s([32,0]),INT8:s([32,0]),INT16:s([32,0]),INT32:s([32,0]),BIGINT64:s([32,0]),FLOAT:s([32,0]),DOUBLE:s([32,0]),DATA:s([32,0]),UINT8C:s([32,0]),BUFFER:s([32,0])});var l=typeof Uint8ClampedArray<"u",f=typeof BigUint64Array<"u",u=typeof BigInt64Array<"u",g=r.g.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=s([32,0])),g.BIGUINT64||(g.BIGUINT64=s([32,0])),g.BIGINT64||(g.BIGINT64=s([32,0])),g.BUFFER||(g.BUFFER=s([32,0]));var h=g.DATA,T=g.BUFFER;p.free=function(F){if(n.isBuffer(F))T[e.log2(F.length)].push(F);else{if(Object.prototype.toString.call(F)!=="[object ArrayBuffer]"&&(F=F.buffer),!F)return;var _=F.length||F.byteLength,N=e.log2(_)|0;h[N].push(F)}};function c(B){if(B){var F=B.length||B.byteLength,_=e.log2(F);h[_].push(B)}}function i(B){c(B.buffer)}p.freeUint8=p.freeUint16=p.freeUint32=p.freeBigUint64=p.freeInt8=p.freeInt16=p.freeInt32=p.freeBigInt64=p.freeFloat32=p.freeFloat=p.freeFloat64=p.freeDouble=p.freeUint8Clamped=p.freeDataView=i,p.freeArrayBuffer=c,p.freeBuffer=function(F){T[e.log2(F.length)].push(F)},p.malloc=function(F,_){if(_===void 0||_==="arraybuffer")return d(F);switch(_){case"uint8":return x(F);case"uint16":return w(F);case"uint32":return C(F);case"int8":return y(F);case"int16":return S(F);case"int32":return M(F);case"float":case"float32":return a(F);case"double":case"float64":return E(F);case"uint8_clamped":return m(F);case"bigint64":return I(F);case"biguint64":return k(F);case"buffer":return z(F);case"data":case"dataview":return O(F);default:return null}return null};function d(F){var F=e.nextPow2(F),_=e.log2(F),N=h[_];return N.length>0?N.pop():new ArrayBuffer(F)}p.mallocArrayBuffer=d;function x(B){return new Uint8Array(d(B),0,B)}p.mallocUint8=x;function w(B){return new Uint16Array(d(2*B),0,B)}p.mallocUint16=w;function C(B){return new Uint32Array(d(4*B),0,B)}p.mallocUint32=C;function y(B){return new Int8Array(d(B),0,B)}p.mallocInt8=y;function S(B){return new Int16Array(d(2*B),0,B)}p.mallocInt16=S;function M(B){return new Int32Array(d(4*B),0,B)}p.mallocInt32=M;function a(B){return new Float32Array(d(4*B),0,B)}p.mallocFloat32=p.mallocFloat=a;function E(B){return new Float64Array(d(8*B),0,B)}p.mallocFloat64=p.mallocDouble=E;function m(B){return l?new Uint8ClampedArray(d(B),0,B):x(B)}p.mallocUint8Clamped=m;function k(B){return f?new BigUint64Array(d(8*B),0,B):null}p.mallocBigUint64=k;function I(B){return u?new BigInt64Array(d(8*B),0,B):null}p.mallocBigInt64=I;function O(B){return new DataView(d(B),0,B)}p.mallocDataView=O;function z(B){B=e.nextPow2(B);var F=e.log2(B),_=T[F];return _.length>0?_.pop():new n(B)}p.mallocBuffer=z,p.clearCache=function(){for(var F=0;F<32;++F)g.UINT8[F].length=0,g.UINT16[F].length=0,g.UINT32[F].length=0,g.INT8[F].length=0,g.INT16[F].length=0,g.INT32[F].length=0,g.FLOAT[F].length=0,g.DOUBLE[F].length=0,g.BIGUINT64[F].length=0,g.BIGINT64[F].length=0,g.UINT8C[F].length=0,h[F].length=0,T[F].length=0}},1755:function(v){"use restrict";v.exports=p;function p(e){this.roots=new Array(e),this.ranks=new Array(e);for(var s=0;s<e;++s)this.roots[s]=s,this.ranks[s]=0}var r=p.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},r.find=function(e){for(var s=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[s]!==e;){var l=n[s];n[s]=e,s=l}return e},r.link=function(e,s){var n=this.find(e),l=this.find(s);if(n!==l){var f=this.ranks,u=this.roots,g=f[n],h=f[l];g<h?u[n]=l:h<g?u[l]=n:(u[l]=n,++f[n])}}},1682:function(v){function p(s,n){for(var l=1,f=s.length,u=s[0],g=s[0],h=1;h<f;++h)if(g=u,u=s[h],n(u,g)){if(h===l){l++;continue}s[l++]=u}return s.length=l,s}function r(s){for(var n=1,l=s.length,f=s[0],u=s[0],g=1;g<l;++g,u=f)if(u=f,f=s[g],f!==u){if(g===n){n++;continue}s[n++]=f}return s.length=n,s}function e(s,n,l){return s.length===0?s:n?(l||s.sort(n),p(s,n)):(l||s.sort(),r(s))}v.exports=e},4359:function(v,p,r){v.exports=l;var e=r(7718),s=null,n=null;typeof document<"u"&&(s=document.createElement("canvas"),s.width=8192,s.height=1024,n=s.getContext("2d"));function l(f,u){return(typeof u!="object"||u===null)&&(u={}),e(f,u.canvas||s,u.context||n,u)}},7718:function(v,p,r){v.exports=I,v.exports.processPixels=k;var e=r(3711),s=r(9618),n=r(5878),l=r(332),f=r(2538),u=r(2095),g="b",h="b|",T="i",c="i|",i="sup",d="+",x="+1",w="sub",C="-",y="-1";function S(O,z,B,F){for(var _="<"+O+">",N="</"+O+">",G=_.length,X=N.length,$=z[0]===d||z[0]===C,et=0,ot=-X;et>-1&&(et=B.indexOf(_,et),!(et===-1||(ot=B.indexOf(N,et+G),ot===-1)||ot<=et));){for(var nt=et;nt<ot+X;++nt)if(nt<et+G||nt>=ot)F[nt]=null,B=B.substr(0,nt)+" "+B.substr(nt+1);else if(F[nt]!==null){var Z=F[nt].indexOf(z[0]);Z===-1?F[nt]+=z:$&&(F[nt]=F[nt].substr(0,Z+1)+(1+parseInt(F[nt][Z+1]))+F[nt].substr(Z+2))}var Q=et+G,W=B.substr(Q,ot-Q),J=W.indexOf(_);J!==-1?et=J:et=ot+X}return F}function M(O,z,B){for(var F=z.textAlign||"start",_=z.textBaseline||"alphabetic",N=[1<<30,1<<30],G=[0,0],X=O.length,$=0;$<X;++$)for(var et=O[$],ot=0;ot<2;++ot)N[ot]=Math.min(N[ot],et[ot])|0,G[ot]=Math.max(G[ot],et[ot])|0;var nt=0;switch(F){case"center":nt=-.5*(N[0]+G[0]);break;case"right":case"end":nt=-G[0];break;case"left":case"start":nt=-N[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+F+"'")}var Z=0;switch(_){case"hanging":case"top":Z=-N[1];break;case"middle":Z=-.5*(N[1]+G[1]);break;case"alphabetic":case"ideographic":Z=-3*B;break;case"bottom":Z=-G[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+_+"'")}var Q=1/B;return"lineHeight"in z?Q*=+z.lineHeight:"width"in z?Q=z.width/(G[0]-N[0]):"height"in z&&(Q=z.height/(G[1]-N[1])),O.map(function(W){return[Q*(W[0]+nt),Q*(W[1]+Z)]})}function a(O,z,B,F,_,N){B=B.replace(/\n/g,""),N.breaklines===!0?B=B.replace(/\<br\>/g,`
`):B=B.replace(/\<br\>/g," ");var G="",X=[];for(H=0;H<B.length;++H)X[H]=G;N.bolds===!0&&(X=S(g,h,B,X)),N.italics===!0&&(X=S(T,c,B,X)),N.superscripts===!0&&(X=S(i,x,B,X)),N.subscripts===!0&&(X=S(w,y,B,X));var $=[],et="";for(H=0;H<B.length;++H)X[H]!==null&&(et+=B[H],$.push(X[H]));var ot=et.split(`
`),nt=ot.length,Z=Math.round(_*F),Q=F,W=F*2,J=0,it=nt*Z+W;O.height<it&&(O.height=it),z.fillStyle="#000",z.fillRect(0,0,O.width,O.height),z.fillStyle="#fff";var K,H,at,tt,lt,dt=0,mt="";function gt(){if(mt!==""){var Bt=z.measureText(mt).width;z.fillText(mt,Q+at,W+tt),at+=Bt}}function Mt(){return""+Math.round(lt)+"px "}function Lt(Bt,Gt){var te=""+z.font;if(N.subscripts===!0){var Wt=Bt.indexOf(C),jt=Gt.indexOf(C),ie=Wt>-1?parseInt(Bt[1+Wt]):0,ue=jt>-1?parseInt(Gt[1+jt]):0;ie!==ue&&(te=te.replace(Mt(),"?px "),lt*=Math.pow(.75,ue-ie),te=te.replace("?px ",Mt())),tt+=.25*Z*(ue-ie)}if(N.superscripts===!0){var fe=Bt.indexOf(d),pe=Gt.indexOf(d),Te=fe>-1?parseInt(Bt[1+fe]):0,Qt=pe>-1?parseInt(Gt[1+pe]):0;Te!==Qt&&(te=te.replace(Mt(),"?px "),lt*=Math.pow(.75,Qt-Te),te=te.replace("?px ",Mt())),tt-=.25*Z*(Qt-Te)}if(N.bolds===!0){var Pt=Bt.indexOf(h)>-1,Ot=Gt.indexOf(h)>-1;!Pt&&Ot&&(Nt?te=te.replace("italic ","italic bold "):te="bold "+te),Pt&&!Ot&&(te=te.replace("bold ",""))}if(N.italics===!0){var Nt=Bt.indexOf(c)>-1,Ht=Gt.indexOf(c)>-1;!Nt&&Ht&&(te="italic "+te),Nt&&!Ht&&(te=te.replace("italic ",""))}z.font=te}for(K=0;K<nt;++K){var zt=ot[K]+`
`;for(at=0,tt=K*Z,lt=F,mt="",H=0;H<zt.length;++H){var xt=H+dt<$.length?$[H+dt]:$[$.length-1];G===xt?mt+=zt[H]:(gt(),mt=zt[H],xt!==void 0&&(Lt(G,xt),G=xt))}gt(),dt+=zt.length;var Ct=Math.round(at+2*Q)|0;J<Ct&&(J=Ct)}var wt=J,Rt=W+Z*nt,Tt=s(z.getImageData(0,0,wt,Rt).data,[Rt,wt,4]);return Tt.pick(-1,-1,0).transpose(1,0)}function E(O,z){var B=e(O,128);return z?n(B.cells,B.positions,.25):{edges:B.cells,positions:B.positions}}function m(O,z,B,F){var _=E(O,F),N=M(_.positions,z,B),G=_.edges,X=z.orientation==="ccw";if(l(N,G),z.polygons||z.polygon||z.polyline){for(var $=u(G,N),et=new Array($.length),ot=0;ot<$.length;++ot){for(var nt=$[ot],Z=new Array(nt.length),Q=0;Q<nt.length;++Q){for(var W=nt[Q],J=new Array(W.length),it=0;it<W.length;++it)J[it]=N[W[it]].slice();X&&J.reverse(),Z[Q]=J}et[ot]=Z}return et}else return z.triangles||z.triangulate||z.triangle?{cells:f(N,G,{delaunay:!1,exterior:!1,interior:!0}),positions:N}:{edges:G,positions:N}}function k(O,z,B){try{return m(O,z,B,!0)}catch{}try{return m(O,z,B,!1)}catch{}return z.polygons||z.polyline||z.polygon?[]:z.triangles||z.triangulate||z.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function I(O,z,B,F){var _=64,N=1.25,G={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&F.size>0&&(_=F.size),F.lineSpacing&&F.lineSpacing>0&&(N=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(G.breaklines=!!F.styletags.breaklines),F.styletags&&F.styletags.bolds&&(G.bolds=!!F.styletags.bolds),F.styletags&&F.styletags.italics&&(G.italics=!!F.styletags.italics),F.styletags&&F.styletags.subscripts&&(G.subscripts=!!F.styletags.subscripts),F.styletags&&F.styletags.superscripts&&(G.superscripts=!!F.styletags.superscripts)),B.font=[F.fontStyle,F.fontVariant,F.fontWeight,_+"px",F.font].filter(function($){return $}).join(" "),B.textAlign="start",B.textBaseline="alphabetic",B.direction="ltr";var X=a(z,B,O,_,N,G);return k(X,F,_)}},1538:function(v){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function r(E){E.permitHostObjects___&&E.permitHostObjects___(r)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=r);var e=!1;if(typeof WeakMap=="function"){var s=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var n=new s,l=Object.freeze({});if(n.set(l,1),n.get(l)!==1)e=!0;else{v.exports=WeakMap;return}}}var f=Object.getOwnPropertyNames,u=Object.defineProperty,g=Object.isExtensible,h="weakmap:",T=h+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),i=new Uint8Array(c);crypto.getRandomValues(i),T=h+"rand:"+Array.prototype.map.call(i,function(E){return(E%36).toString(36)}).join("")+"___"}function d(E){return!(E.substr(0,h.length)==h&&E.substr(E.length-3)==="___")}if(u(Object,"getOwnPropertyNames",{value:function(m){return f(m).filter(d)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function(m){return x(m).filter(d)}})}function w(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var m=E[T];if(m&&m.key===E)return m;if(g(E)){m={key:E};try{return u(E,T,{value:m,writable:!1,enumerable:!1,configurable:!1}),m}catch{return}}}(function(){var E=Object.freeze;u(Object,"freeze",{value:function(O){return w(O),E(O)}});var m=Object.seal;u(Object,"seal",{value:function(O){return w(O),m(O)}});var k=Object.preventExtensions;u(Object,"preventExtensions",{value:function(O){return w(O),k(O)}})})();function C(E){return E.prototype=null,Object.freeze(E)}var y=!1;function S(){!y&&typeof console<"u"&&(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var M=0,a=function(){this instanceof a||S();var E=[],m=[],k=M++;function I(F,_){var N,G=w(F);return G?k in G?G[k]:_:(N=E.indexOf(F),N>=0?m[N]:_)}function O(F){var _=w(F);return _?k in _:E.indexOf(F)>=0}function z(F,_){var N,G=w(F);return G?G[k]=_:(N=E.indexOf(F),N>=0?m[N]=_:(N=E.length,m[N]=_,E[N]=F)),this}function B(F){var _=w(F),N,G;return _?k in _&&delete _[k]:(N=E.indexOf(F),N<0?!1:(G=E.length-1,E[N]=void 0,m[N]=m[G],E[N]=E[G],E.length=G,m.length=G,!0))}return Object.create(a.prototype,{get___:{value:C(I)},has___:{value:C(O)},set___:{value:C(z)},delete___:{value:C(B)}})};a.prototype=Object.create(Object.prototype,{get:{value:function(m,k){return this.get___(m,k)},writable:!0,configurable:!0},has:{value:function(m){return this.has___(m)},writable:!0,configurable:!0},set:{value:function(m,k){return this.set___(m,k)},writable:!0,configurable:!0},delete:{value:function(m){return this.delete___(m)},writable:!0,configurable:!0}}),typeof s=="function"?function(){e&&typeof Proxy<"u"&&(Proxy=void 0);function E(){this instanceof a||S();var m=new s,k=void 0,I=!1;function O(_,N){return k?m.has(_)?m.get(_):k.get___(_,N):m.get(_,N)}function z(_){return m.has(_)||(k?k.has___(_):!1)}var B;e?B=function(_,N){return m.set(_,N),m.has(_)||(k||(k=new a),k.set(_,N)),this}:B=function(_,N){if(I)try{m.set(_,N)}catch{k||(k=new a),k.set___(_,N)}else m.set(_,N);return this};function F(_){var N=!!m.delete(_);return k&&k.delete___(_)||N}return Object.create(a.prototype,{get___:{value:C(O)},has___:{value:C(z)},set___:{value:C(B)},delete___:{value:C(F)},permitHostObjects___:{value:C(function(_){if(_===r)I=!0;else throw new Error("bogus call to permitHostObjects___")})}})}E.prototype=a.prototype,v.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),v.exports=a)})()},236:function(v,p,r){var e=r(8284);v.exports=s;function s(){var n={};return function(l){if((typeof l!="object"||l===null)&&typeof l!="function")throw new Error("Weakmap-shim: Key must be object");var f=l.valueOf(n);return f&&f.identity===n?f:e(l,n)}}},8284:function(v){v.exports=p;function p(r,e){var s={identity:e},n=r.valueOf;return Object.defineProperty(r,"valueOf",{value:function(l){return l!==e?n.apply(this,arguments):s},writable:!0}),s}},606:function(v,p,r){var e=r(236);v.exports=s;function s(){var n=e();return{get:function(l,f){var u=n(l);return u.hasOwnProperty("value")?u.value:f},set:function(l,f){return n(l).value=f,this},has:function(l){return"value"in n(l)},delete:function(l){return delete n(l).value}}}},3349:function(v){function p(){return function(f,u,g,h,T,c){var i=f[0],d=g[0],x=[0],w=d;h|=0;var C=0,y=d;for(C=0;C<i;++C){{var S=u[h]-c,M=u[h+w]-c;S>=0!=M>=0&&T.push(x[0]+.5+.5*(S+M)/(S-M))}h+=y,++x[0]}}}function r(){return p()}var e=r;function s(f){var u={};return function(h,T,c){var i=h.dtype,d=h.order,x=[i,d.join()].join(),w=u[x];return w||(u[x]=w=f([i,d])),w(h.shape.slice(0),h.data,h.stride,h.offset|0,T,c)}}function n(f){return s(e.bind(void 0,f))}function l(f){return n({funcName:f.funcName})}v.exports=l({funcName:"zeroCrossings"})},781:function(v,p,r){v.exports=s;var e=r(3349);function s(n,l){var f=[];return l=+l||0,e(n.hi(n.shape[0]-1),f,l),f}},7790:function(){}},o={};function L(v){var p=o[v];if(p!==void 0)return p.exports;var r=o[v]={id:v,loaded:!1,exports:{}};return P[v].call(r.exports,r,r.exports,L),r.loaded=!0,r.exports}(function(){L.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()})(),function(){L.nmd=function(v){return v.paths=[],v.children||(v.children=[]),v}}();var A=L(1964);j.exports=A})()},33576:function(j,V,t){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function b(Qt,Pt){if(!(Qt instanceof Pt))throw new TypeError("Cannot call a class as a function")}function P(Qt,Pt){for(var Ot=0;Ot<Pt.length;Ot++){var Nt=Pt[Ot];Nt.enumerable=Nt.enumerable||!1,Nt.configurable=!0,"value"in Nt&&(Nt.writable=!0),Object.defineProperty(Qt,L(Nt.key),Nt)}}function o(Qt,Pt,Ot){return Pt&&P(Qt.prototype,Pt),Object.defineProperty(Qt,"prototype",{writable:!1}),Qt}function L(Qt){var Pt=A(Qt,"string");return l(Pt)==="symbol"?Pt:String(Pt)}function A(Qt,Pt){if(l(Qt)!=="object"||Qt===null)return Qt;var Ot=Qt[Symbol.toPrimitive];if(Ot!==void 0){var Nt=Ot.call(Qt,Pt);if(l(Nt)!=="object")return Nt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Qt)}function v(Qt,Pt,Ot){function Nt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{return!1}}return Pt=r(Pt),p(Qt,Nt()?Reflect.construct(Pt,[],r(Qt).constructor):Pt.apply(Qt,Ot))}function p(Qt,Pt){if(Pt&&(l(Pt)==="object"||typeof Pt=="function"))return Pt;if(Pt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(Qt)}function r(Qt){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(Ot){return Ot.__proto__||Object.getPrototypeOf(Ot)},r(Qt)}function e(Qt){if(Qt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt}function s(Qt,Pt){if(typeof Pt!="function"&&Pt!==null)throw new TypeError("Super expression must either be null or a function");Qt.prototype=Object.create(Pt&&Pt.prototype,{constructor:{value:Qt,writable:!0,configurable:!0}}),Object.defineProperty(Qt,"prototype",{writable:!1}),Pt&&n(Qt,Pt)}function n(Qt,Pt){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Nt,Ht){return Nt.__proto__=Ht,Nt},n(Qt,Pt)}function l(Qt){"@babel/helpers - typeof";return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pt){return typeof Pt}:function(Pt){return Pt&&typeof Symbol=="function"&&Pt.constructor===Symbol&&Pt!==Symbol.prototype?"symbol":typeof Pt},l(Qt)}var f=t(59968),u=t(35984),g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;V.Buffer=i,V.SlowBuffer=k,V.INSPECT_MAX_BYTES=50;var h=2147483647;V.kMaxLength=h,i.TYPED_ARRAY_SUPPORT=T(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{var Qt=new Uint8Array(1),Pt={foo:function(){return 42}};return Object.setPrototypeOf(Pt,Uint8Array.prototype),Object.setPrototypeOf(Qt,Pt),Qt.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function c(Qt){if(Qt>h)throw new RangeError('The value "'+Qt+'" is invalid for option "size"');var Pt=new Uint8Array(Qt);return Object.setPrototypeOf(Pt,i.prototype),Pt}function i(Qt,Pt,Ot){if(typeof Qt=="number"){if(typeof Pt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return C(Qt)}return d(Qt,Pt,Ot)}i.poolSize=8192;function d(Qt,Pt,Ot){if(typeof Qt=="string")return y(Qt,Pt);if(ArrayBuffer.isView(Qt))return M(Qt);if(Qt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(Qt));if(ie(Qt,ArrayBuffer)||Qt&&ie(Qt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ie(Qt,SharedArrayBuffer)||Qt&&ie(Qt.buffer,SharedArrayBuffer)))return a(Qt,Pt,Ot);if(typeof Qt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Nt=Qt.valueOf&&Qt.valueOf();if(Nt!=null&&Nt!==Qt)return i.from(Nt,Pt,Ot);var Ht=E(Qt);if(Ht)return Ht;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Qt[Symbol.toPrimitive]=="function")return i.from(Qt[Symbol.toPrimitive]("string"),Pt,Ot);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(Qt))}i.from=function(Qt,Pt,Ot){return d(Qt,Pt,Ot)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function x(Qt){if(typeof Qt!="number")throw new TypeError('"size" argument must be of type number');if(Qt<0)throw new RangeError('The value "'+Qt+'" is invalid for option "size"')}function w(Qt,Pt,Ot){return x(Qt),Qt<=0?c(Qt):Pt!==void 0?typeof Ot=="string"?c(Qt).fill(Pt,Ot):c(Qt).fill(Pt):c(Qt)}i.alloc=function(Qt,Pt,Ot){return w(Qt,Pt,Ot)};function C(Qt){return x(Qt),c(Qt<0?0:m(Qt)|0)}i.allocUnsafe=function(Qt){return C(Qt)},i.allocUnsafeSlow=function(Qt){return C(Qt)};function y(Qt,Pt){if((typeof Pt!="string"||Pt==="")&&(Pt="utf8"),!i.isEncoding(Pt))throw new TypeError("Unknown encoding: "+Pt);var Ot=I(Qt,Pt)|0,Nt=c(Ot),Ht=Nt.write(Qt,Pt);return Ht!==Ot&&(Nt=Nt.slice(0,Ht)),Nt}function S(Qt){for(var Pt=Qt.length<0?0:m(Qt.length)|0,Ot=c(Pt),Nt=0;Nt<Pt;Nt+=1)Ot[Nt]=Qt[Nt]&255;return Ot}function M(Qt){if(ie(Qt,Uint8Array)){var Pt=new Uint8Array(Qt);return a(Pt.buffer,Pt.byteOffset,Pt.byteLength)}return S(Qt)}function a(Qt,Pt,Ot){if(Pt<0||Qt.byteLength<Pt)throw new RangeError('"offset" is outside of buffer bounds');if(Qt.byteLength<Pt+(Ot||0))throw new RangeError('"length" is outside of buffer bounds');var Nt;return Pt===void 0&&Ot===void 0?Nt=new Uint8Array(Qt):Ot===void 0?Nt=new Uint8Array(Qt,Pt):Nt=new Uint8Array(Qt,Pt,Ot),Object.setPrototypeOf(Nt,i.prototype),Nt}function E(Qt){if(i.isBuffer(Qt)){var Pt=m(Qt.length)|0,Ot=c(Pt);return Ot.length===0||Qt.copy(Ot,0,0,Pt),Ot}if(Qt.length!==void 0)return typeof Qt.length!="number"||ue(Qt.length)?c(0):S(Qt);if(Qt.type==="Buffer"&&Array.isArray(Qt.data))return S(Qt.data)}function m(Qt){if(Qt>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return Qt|0}function k(Qt){return+Qt!=Qt&&(Qt=0),i.alloc(+Qt)}i.isBuffer=function(Pt){return Pt!=null&&Pt._isBuffer===!0&&Pt!==i.prototype},i.compare=function(Pt,Ot){if(ie(Pt,Uint8Array)&&(Pt=i.from(Pt,Pt.offset,Pt.byteLength)),ie(Ot,Uint8Array)&&(Ot=i.from(Ot,Ot.offset,Ot.byteLength)),!i.isBuffer(Pt)||!i.isBuffer(Ot))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Pt===Ot)return 0;for(var Nt=Pt.length,Ht=Ot.length,St=0,kt=Math.min(Nt,Ht);St<kt;++St)if(Pt[St]!==Ot[St]){Nt=Pt[St],Ht=Ot[St];break}return Nt<Ht?-1:Ht<Nt?1:0},i.isEncoding=function(Pt){switch(String(Pt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(Pt,Ot){if(!Array.isArray(Pt))throw new TypeError('"list" argument must be an Array of Buffers');if(Pt.length===0)return i.alloc(0);var Nt;if(Ot===void 0)for(Ot=0,Nt=0;Nt<Pt.length;++Nt)Ot+=Pt[Nt].length;var Ht=i.allocUnsafe(Ot),St=0;for(Nt=0;Nt<Pt.length;++Nt){var kt=Pt[Nt];if(ie(kt,Uint8Array))St+kt.length>Ht.length?(i.isBuffer(kt)||(kt=i.from(kt)),kt.copy(Ht,St)):Uint8Array.prototype.set.call(Ht,kt,St);else if(i.isBuffer(kt))kt.copy(Ht,St);else throw new TypeError('"list" argument must be an Array of Buffers');St+=kt.length}return Ht};function I(Qt,Pt){if(i.isBuffer(Qt))return Qt.length;if(ArrayBuffer.isView(Qt)||ie(Qt,ArrayBuffer))return Qt.byteLength;if(typeof Qt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(Qt));var Ot=Qt.length,Nt=arguments.length>2&&arguments[2]===!0;if(!Nt&&Ot===0)return 0;for(var Ht=!1;;)switch(Pt){case"ascii":case"latin1":case"binary":return Ot;case"utf8":case"utf-8":return Bt(Qt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ot*2;case"hex":return Ot>>>1;case"base64":return Wt(Qt).length;default:if(Ht)return Nt?-1:Bt(Qt).length;Pt=(""+Pt).toLowerCase(),Ht=!0}}i.byteLength=I;function O(Qt,Pt,Ot){var Nt=!1;if((Pt===void 0||Pt<0)&&(Pt=0),Pt>this.length||((Ot===void 0||Ot>this.length)&&(Ot=this.length),Ot<=0)||(Ot>>>=0,Pt>>>=0,Ot<=Pt))return"";for(Qt||(Qt="utf8");;)switch(Qt){case"hex":return J(this,Pt,Ot);case"utf8":case"utf-8":return ot(this,Pt,Ot);case"ascii":return Q(this,Pt,Ot);case"latin1":case"binary":return W(this,Pt,Ot);case"base64":return et(this,Pt,Ot);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return it(this,Pt,Ot);default:if(Nt)throw new TypeError("Unknown encoding: "+Qt);Qt=(Qt+"").toLowerCase(),Nt=!0}}i.prototype._isBuffer=!0;function z(Qt,Pt,Ot){var Nt=Qt[Pt];Qt[Pt]=Qt[Ot],Qt[Ot]=Nt}i.prototype.swap16=function(){var Pt=this.length;if(Pt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Ot=0;Ot<Pt;Ot+=2)z(this,Ot,Ot+1);return this},i.prototype.swap32=function(){var Pt=this.length;if(Pt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Ot=0;Ot<Pt;Ot+=4)z(this,Ot,Ot+3),z(this,Ot+1,Ot+2);return this},i.prototype.swap64=function(){var Pt=this.length;if(Pt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Ot=0;Ot<Pt;Ot+=8)z(this,Ot,Ot+7),z(this,Ot+1,Ot+6),z(this,Ot+2,Ot+5),z(this,Ot+3,Ot+4);return this},i.prototype.toString=function(){var Pt=this.length;return Pt===0?"":arguments.length===0?ot(this,0,Pt):O.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(Pt){if(!i.isBuffer(Pt))throw new TypeError("Argument must be a Buffer");return this===Pt?!0:i.compare(this,Pt)===0},i.prototype.inspect=function(){var Pt="",Ot=V.INSPECT_MAX_BYTES;return Pt=this.toString("hex",0,Ot).replace(/(.{2})/g,"$1 ").trim(),this.length>Ot&&(Pt+=" ... "),"<Buffer "+Pt+">"},g&&(i.prototype[g]=i.prototype.inspect),i.prototype.compare=function(Pt,Ot,Nt,Ht,St){if(ie(Pt,Uint8Array)&&(Pt=i.from(Pt,Pt.offset,Pt.byteLength)),!i.isBuffer(Pt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(Pt));if(Ot===void 0&&(Ot=0),Nt===void 0&&(Nt=Pt?Pt.length:0),Ht===void 0&&(Ht=0),St===void 0&&(St=this.length),Ot<0||Nt>Pt.length||Ht<0||St>this.length)throw new RangeError("out of range index");if(Ht>=St&&Ot>=Nt)return 0;if(Ht>=St)return-1;if(Ot>=Nt)return 1;if(Ot>>>=0,Nt>>>=0,Ht>>>=0,St>>>=0,this===Pt)return 0;for(var kt=St-Ht,Ft=Nt-Ot,At=Math.min(kt,Ft),ft=this.slice(Ht,St),pt=Pt.slice(Ot,Nt),Dt=0;Dt<At;++Dt)if(ft[Dt]!==pt[Dt]){kt=ft[Dt],Ft=pt[Dt];break}return kt<Ft?-1:Ft<kt?1:0};function B(Qt,Pt,Ot,Nt,Ht){if(Qt.length===0)return-1;if(typeof Ot=="string"?(Nt=Ot,Ot=0):Ot>2147483647?Ot=2147483647:Ot<-2147483648&&(Ot=-2147483648),Ot=+Ot,ue(Ot)&&(Ot=Ht?0:Qt.length-1),Ot<0&&(Ot=Qt.length+Ot),Ot>=Qt.length){if(Ht)return-1;Ot=Qt.length-1}else if(Ot<0)if(Ht)Ot=0;else return-1;if(typeof Pt=="string"&&(Pt=i.from(Pt,Nt)),i.isBuffer(Pt))return Pt.length===0?-1:F(Qt,Pt,Ot,Nt,Ht);if(typeof Pt=="number")return Pt=Pt&255,typeof Uint8Array.prototype.indexOf=="function"?Ht?Uint8Array.prototype.indexOf.call(Qt,Pt,Ot):Uint8Array.prototype.lastIndexOf.call(Qt,Pt,Ot):F(Qt,[Pt],Ot,Nt,Ht);throw new TypeError("val must be string, number or Buffer")}function F(Qt,Pt,Ot,Nt,Ht){var St=1,kt=Qt.length,Ft=Pt.length;if(Nt!==void 0&&(Nt=String(Nt).toLowerCase(),Nt==="ucs2"||Nt==="ucs-2"||Nt==="utf16le"||Nt==="utf-16le")){if(Qt.length<2||Pt.length<2)return-1;St=2,kt/=2,Ft/=2,Ot/=2}function At($t,re){return St===1?$t[re]:$t.readUInt16BE(re*St)}var ft;if(Ht){var pt=-1;for(ft=Ot;ft<kt;ft++)if(At(Qt,ft)===At(Pt,pt===-1?0:ft-pt)){if(pt===-1&&(pt=ft),ft-pt+1===Ft)return pt*St}else pt!==-1&&(ft-=ft-pt),pt=-1}else for(Ot+Ft>kt&&(Ot=kt-Ft),ft=Ot;ft>=0;ft--){for(var Dt=!0,Ut=0;Ut<Ft;Ut++)if(At(Qt,ft+Ut)!==At(Pt,Ut)){Dt=!1;break}if(Dt)return ft}return-1}i.prototype.includes=function(Pt,Ot,Nt){return this.indexOf(Pt,Ot,Nt)!==-1},i.prototype.indexOf=function(Pt,Ot,Nt){return B(this,Pt,Ot,Nt,!0)},i.prototype.lastIndexOf=function(Pt,Ot,Nt){return B(this,Pt,Ot,Nt,!1)};function _(Qt,Pt,Ot,Nt){Ot=Number(Ot)||0;var Ht=Qt.length-Ot;Nt?(Nt=Number(Nt),Nt>Ht&&(Nt=Ht)):Nt=Ht;var St=Pt.length;Nt>St/2&&(Nt=St/2);var kt;for(kt=0;kt<Nt;++kt){var Ft=parseInt(Pt.substr(kt*2,2),16);if(ue(Ft))return kt;Qt[Ot+kt]=Ft}return kt}function N(Qt,Pt,Ot,Nt){return jt(Bt(Pt,Qt.length-Ot),Qt,Ot,Nt)}function G(Qt,Pt,Ot,Nt){return jt(Gt(Pt),Qt,Ot,Nt)}function X(Qt,Pt,Ot,Nt){return jt(Wt(Pt),Qt,Ot,Nt)}function $(Qt,Pt,Ot,Nt){return jt(te(Pt,Qt.length-Ot),Qt,Ot,Nt)}i.prototype.write=function(Pt,Ot,Nt,Ht){if(Ot===void 0)Ht="utf8",Nt=this.length,Ot=0;else if(Nt===void 0&&typeof Ot=="string")Ht=Ot,Nt=this.length,Ot=0;else if(isFinite(Ot))Ot=Ot>>>0,isFinite(Nt)?(Nt=Nt>>>0,Ht===void 0&&(Ht="utf8")):(Ht=Nt,Nt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var St=this.length-Ot;if((Nt===void 0||Nt>St)&&(Nt=St),Pt.length>0&&(Nt<0||Ot<0)||Ot>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ht||(Ht="utf8");for(var kt=!1;;)switch(Ht){case"hex":return _(this,Pt,Ot,Nt);case"utf8":case"utf-8":return N(this,Pt,Ot,Nt);case"ascii":case"latin1":case"binary":return G(this,Pt,Ot,Nt);case"base64":return X(this,Pt,Ot,Nt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,Pt,Ot,Nt);default:if(kt)throw new TypeError("Unknown encoding: "+Ht);Ht=(""+Ht).toLowerCase(),kt=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function et(Qt,Pt,Ot){return Pt===0&&Ot===Qt.length?f.fromByteArray(Qt):f.fromByteArray(Qt.slice(Pt,Ot))}function ot(Qt,Pt,Ot){Ot=Math.min(Qt.length,Ot);for(var Nt=[],Ht=Pt;Ht<Ot;){var St=Qt[Ht],kt=null,Ft=St>239?4:St>223?3:St>191?2:1;if(Ht+Ft<=Ot){var At=void 0,ft=void 0,pt=void 0,Dt=void 0;switch(Ft){case 1:St<128&&(kt=St);break;case 2:At=Qt[Ht+1],(At&192)===128&&(Dt=(St&31)<<6|At&63,Dt>127&&(kt=Dt));break;case 3:At=Qt[Ht+1],ft=Qt[Ht+2],(At&192)===128&&(ft&192)===128&&(Dt=(St&15)<<12|(At&63)<<6|ft&63,Dt>2047&&(Dt<55296||Dt>57343)&&(kt=Dt));break;case 4:At=Qt[Ht+1],ft=Qt[Ht+2],pt=Qt[Ht+3],(At&192)===128&&(ft&192)===128&&(pt&192)===128&&(Dt=(St&15)<<18|(At&63)<<12|(ft&63)<<6|pt&63,Dt>65535&&Dt<1114112&&(kt=Dt))}}kt===null?(kt=65533,Ft=1):kt>65535&&(kt-=65536,Nt.push(kt>>>10&1023|55296),kt=56320|kt&1023),Nt.push(kt),Ht+=Ft}return Z(Nt)}var nt=4096;function Z(Qt){var Pt=Qt.length;if(Pt<=nt)return String.fromCharCode.apply(String,Qt);for(var Ot="",Nt=0;Nt<Pt;)Ot+=String.fromCharCode.apply(String,Qt.slice(Nt,Nt+=nt));return Ot}function Q(Qt,Pt,Ot){var Nt="";Ot=Math.min(Qt.length,Ot);for(var Ht=Pt;Ht<Ot;++Ht)Nt+=String.fromCharCode(Qt[Ht]&127);return Nt}function W(Qt,Pt,Ot){var Nt="";Ot=Math.min(Qt.length,Ot);for(var Ht=Pt;Ht<Ot;++Ht)Nt+=String.fromCharCode(Qt[Ht]);return Nt}function J(Qt,Pt,Ot){var Nt=Qt.length;(!Pt||Pt<0)&&(Pt=0),(!Ot||Ot<0||Ot>Nt)&&(Ot=Nt);for(var Ht="",St=Pt;St<Ot;++St)Ht+=fe[Qt[St]];return Ht}function it(Qt,Pt,Ot){for(var Nt=Qt.slice(Pt,Ot),Ht="",St=0;St<Nt.length-1;St+=2)Ht+=String.fromCharCode(Nt[St]+Nt[St+1]*256);return Ht}i.prototype.slice=function(Pt,Ot){var Nt=this.length;Pt=~~Pt,Ot=Ot===void 0?Nt:~~Ot,Pt<0?(Pt+=Nt,Pt<0&&(Pt=0)):Pt>Nt&&(Pt=Nt),Ot<0?(Ot+=Nt,Ot<0&&(Ot=0)):Ot>Nt&&(Ot=Nt),Ot<Pt&&(Ot=Pt);var Ht=this.subarray(Pt,Ot);return Object.setPrototypeOf(Ht,i.prototype),Ht};function K(Qt,Pt,Ot){if(Qt%1!==0||Qt<0)throw new RangeError("offset is not uint");if(Qt+Pt>Ot)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(Pt,Ot,Nt){Pt=Pt>>>0,Ot=Ot>>>0,Nt||K(Pt,Ot,this.length);for(var Ht=this[Pt],St=1,kt=0;++kt<Ot&&(St*=256);)Ht+=this[Pt+kt]*St;return Ht},i.prototype.readUintBE=i.prototype.readUIntBE=function(Pt,Ot,Nt){Pt=Pt>>>0,Ot=Ot>>>0,Nt||K(Pt,Ot,this.length);for(var Ht=this[Pt+--Ot],St=1;Ot>0&&(St*=256);)Ht+=this[Pt+--Ot]*St;return Ht},i.prototype.readUint8=i.prototype.readUInt8=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,1,this.length),this[Pt]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,2,this.length),this[Pt]|this[Pt+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,2,this.length),this[Pt]<<8|this[Pt+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),(this[Pt]|this[Pt+1]<<8|this[Pt+2]<<16)+this[Pt+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),this[Pt]*16777216+(this[Pt+1]<<16|this[Pt+2]<<8|this[Pt+3])},i.prototype.readBigUInt64LE=pe(function(Pt){Pt=Pt>>>0,Ct(Pt,"offset");var Ot=this[Pt],Nt=this[Pt+7];(Ot===void 0||Nt===void 0)&&wt(Pt,this.length-8);var Ht=Ot+this[++Pt]*Math.pow(2,8)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,24),St=this[++Pt]+this[++Pt]*Math.pow(2,8)+this[++Pt]*Math.pow(2,16)+Nt*Math.pow(2,24);return BigInt(Ht)+(BigInt(St)<<BigInt(32))}),i.prototype.readBigUInt64BE=pe(function(Pt){Pt=Pt>>>0,Ct(Pt,"offset");var Ot=this[Pt],Nt=this[Pt+7];(Ot===void 0||Nt===void 0)&&wt(Pt,this.length-8);var Ht=Ot*Math.pow(2,24)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,8)+this[++Pt],St=this[++Pt]*Math.pow(2,24)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,8)+Nt;return(BigInt(Ht)<<BigInt(32))+BigInt(St)}),i.prototype.readIntLE=function(Pt,Ot,Nt){Pt=Pt>>>0,Ot=Ot>>>0,Nt||K(Pt,Ot,this.length);for(var Ht=this[Pt],St=1,kt=0;++kt<Ot&&(St*=256);)Ht+=this[Pt+kt]*St;return St*=128,Ht>=St&&(Ht-=Math.pow(2,8*Ot)),Ht},i.prototype.readIntBE=function(Pt,Ot,Nt){Pt=Pt>>>0,Ot=Ot>>>0,Nt||K(Pt,Ot,this.length);for(var Ht=Ot,St=1,kt=this[Pt+--Ht];Ht>0&&(St*=256);)kt+=this[Pt+--Ht]*St;return St*=128,kt>=St&&(kt-=Math.pow(2,8*Ot)),kt},i.prototype.readInt8=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,1,this.length),this[Pt]&128?(255-this[Pt]+1)*-1:this[Pt]},i.prototype.readInt16LE=function(Pt,Ot){Pt=Pt>>>0,Ot||K(Pt,2,this.length);var Nt=this[Pt]|this[Pt+1]<<8;return Nt&32768?Nt|4294901760:Nt},i.prototype.readInt16BE=function(Pt,Ot){Pt=Pt>>>0,Ot||K(Pt,2,this.length);var Nt=this[Pt+1]|this[Pt]<<8;return Nt&32768?Nt|4294901760:Nt},i.prototype.readInt32LE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),this[Pt]|this[Pt+1]<<8|this[Pt+2]<<16|this[Pt+3]<<24},i.prototype.readInt32BE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),this[Pt]<<24|this[Pt+1]<<16|this[Pt+2]<<8|this[Pt+3]},i.prototype.readBigInt64LE=pe(function(Pt){Pt=Pt>>>0,Ct(Pt,"offset");var Ot=this[Pt],Nt=this[Pt+7];(Ot===void 0||Nt===void 0)&&wt(Pt,this.length-8);var Ht=this[Pt+4]+this[Pt+5]*Math.pow(2,8)+this[Pt+6]*Math.pow(2,16)+(Nt<<24);return(BigInt(Ht)<<BigInt(32))+BigInt(Ot+this[++Pt]*Math.pow(2,8)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,24))}),i.prototype.readBigInt64BE=pe(function(Pt){Pt=Pt>>>0,Ct(Pt,"offset");var Ot=this[Pt],Nt=this[Pt+7];(Ot===void 0||Nt===void 0)&&wt(Pt,this.length-8);var Ht=(Ot<<24)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,8)+this[++Pt];return(BigInt(Ht)<<BigInt(32))+BigInt(this[++Pt]*Math.pow(2,24)+this[++Pt]*Math.pow(2,16)+this[++Pt]*Math.pow(2,8)+Nt)}),i.prototype.readFloatLE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),u.read(this,Pt,!0,23,4)},i.prototype.readFloatBE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,4,this.length),u.read(this,Pt,!1,23,4)},i.prototype.readDoubleLE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,8,this.length),u.read(this,Pt,!0,52,8)},i.prototype.readDoubleBE=function(Pt,Ot){return Pt=Pt>>>0,Ot||K(Pt,8,this.length),u.read(this,Pt,!1,52,8)};function H(Qt,Pt,Ot,Nt,Ht,St){if(!i.isBuffer(Qt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Pt>Ht||Pt<St)throw new RangeError('"value" argument is out of bounds');if(Ot+Nt>Qt.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(Pt,Ot,Nt,Ht){if(Pt=+Pt,Ot=Ot>>>0,Nt=Nt>>>0,!Ht){var St=Math.pow(2,8*Nt)-1;H(this,Pt,Ot,Nt,St,0)}var kt=1,Ft=0;for(this[Ot]=Pt&255;++Ft<Nt&&(kt*=256);)this[Ot+Ft]=Pt/kt&255;return Ot+Nt},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(Pt,Ot,Nt,Ht){if(Pt=+Pt,Ot=Ot>>>0,Nt=Nt>>>0,!Ht){var St=Math.pow(2,8*Nt)-1;H(this,Pt,Ot,Nt,St,0)}var kt=Nt-1,Ft=1;for(this[Ot+kt]=Pt&255;--kt>=0&&(Ft*=256);)this[Ot+kt]=Pt/Ft&255;return Ot+Nt},i.prototype.writeUint8=i.prototype.writeUInt8=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,1,255,0),this[Ot]=Pt&255,Ot+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,2,65535,0),this[Ot]=Pt&255,this[Ot+1]=Pt>>>8,Ot+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,2,65535,0),this[Ot]=Pt>>>8,this[Ot+1]=Pt&255,Ot+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,4,4294967295,0),this[Ot+3]=Pt>>>24,this[Ot+2]=Pt>>>16,this[Ot+1]=Pt>>>8,this[Ot]=Pt&255,Ot+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,4,4294967295,0),this[Ot]=Pt>>>24,this[Ot+1]=Pt>>>16,this[Ot+2]=Pt>>>8,this[Ot+3]=Pt&255,Ot+4};function at(Qt,Pt,Ot,Nt,Ht){xt(Pt,Nt,Ht,Qt,Ot,7);var St=Number(Pt&BigInt(4294967295));Qt[Ot++]=St,St=St>>8,Qt[Ot++]=St,St=St>>8,Qt[Ot++]=St,St=St>>8,Qt[Ot++]=St;var kt=Number(Pt>>BigInt(32)&BigInt(4294967295));return Qt[Ot++]=kt,kt=kt>>8,Qt[Ot++]=kt,kt=kt>>8,Qt[Ot++]=kt,kt=kt>>8,Qt[Ot++]=kt,Ot}function tt(Qt,Pt,Ot,Nt,Ht){xt(Pt,Nt,Ht,Qt,Ot,7);var St=Number(Pt&BigInt(4294967295));Qt[Ot+7]=St,St=St>>8,Qt[Ot+6]=St,St=St>>8,Qt[Ot+5]=St,St=St>>8,Qt[Ot+4]=St;var kt=Number(Pt>>BigInt(32)&BigInt(4294967295));return Qt[Ot+3]=kt,kt=kt>>8,Qt[Ot+2]=kt,kt=kt>>8,Qt[Ot+1]=kt,kt=kt>>8,Qt[Ot]=kt,Ot+8}i.prototype.writeBigUInt64LE=pe(function(Pt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return at(this,Pt,Ot,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=pe(function(Pt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return tt(this,Pt,Ot,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(Pt,Ot,Nt,Ht){if(Pt=+Pt,Ot=Ot>>>0,!Ht){var St=Math.pow(2,8*Nt-1);H(this,Pt,Ot,Nt,St-1,-St)}var kt=0,Ft=1,At=0;for(this[Ot]=Pt&255;++kt<Nt&&(Ft*=256);)Pt<0&&At===0&&this[Ot+kt-1]!==0&&(At=1),this[Ot+kt]=(Pt/Ft>>0)-At&255;return Ot+Nt},i.prototype.writeIntBE=function(Pt,Ot,Nt,Ht){if(Pt=+Pt,Ot=Ot>>>0,!Ht){var St=Math.pow(2,8*Nt-1);H(this,Pt,Ot,Nt,St-1,-St)}var kt=Nt-1,Ft=1,At=0;for(this[Ot+kt]=Pt&255;--kt>=0&&(Ft*=256);)Pt<0&&At===0&&this[Ot+kt+1]!==0&&(At=1),this[Ot+kt]=(Pt/Ft>>0)-At&255;return Ot+Nt},i.prototype.writeInt8=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,1,127,-128),Pt<0&&(Pt=255+Pt+1),this[Ot]=Pt&255,Ot+1},i.prototype.writeInt16LE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,2,32767,-32768),this[Ot]=Pt&255,this[Ot+1]=Pt>>>8,Ot+2},i.prototype.writeInt16BE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,2,32767,-32768),this[Ot]=Pt>>>8,this[Ot+1]=Pt&255,Ot+2},i.prototype.writeInt32LE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,4,2147483647,-2147483648),this[Ot]=Pt&255,this[Ot+1]=Pt>>>8,this[Ot+2]=Pt>>>16,this[Ot+3]=Pt>>>24,Ot+4},i.prototype.writeInt32BE=function(Pt,Ot,Nt){return Pt=+Pt,Ot=Ot>>>0,Nt||H(this,Pt,Ot,4,2147483647,-2147483648),Pt<0&&(Pt=4294967295+Pt+1),this[Ot]=Pt>>>24,this[Ot+1]=Pt>>>16,this[Ot+2]=Pt>>>8,this[Ot+3]=Pt&255,Ot+4},i.prototype.writeBigInt64LE=pe(function(Pt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return at(this,Pt,Ot,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=pe(function(Pt){var Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return tt(this,Pt,Ot,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function lt(Qt,Pt,Ot,Nt,Ht,St){if(Ot+Nt>Qt.length)throw new RangeError("Index out of range");if(Ot<0)throw new RangeError("Index out of range")}function dt(Qt,Pt,Ot,Nt,Ht){return Pt=+Pt,Ot=Ot>>>0,Ht||lt(Qt,Pt,Ot,4),u.write(Qt,Pt,Ot,Nt,23,4),Ot+4}i.prototype.writeFloatLE=function(Pt,Ot,Nt){return dt(this,Pt,Ot,!0,Nt)},i.prototype.writeFloatBE=function(Pt,Ot,Nt){return dt(this,Pt,Ot,!1,Nt)};function mt(Qt,Pt,Ot,Nt,Ht){return Pt=+Pt,Ot=Ot>>>0,Ht||lt(Qt,Pt,Ot,8),u.write(Qt,Pt,Ot,Nt,52,8),Ot+8}i.prototype.writeDoubleLE=function(Pt,Ot,Nt){return mt(this,Pt,Ot,!0,Nt)},i.prototype.writeDoubleBE=function(Pt,Ot,Nt){return mt(this,Pt,Ot,!1,Nt)},i.prototype.copy=function(Pt,Ot,Nt,Ht){if(!i.isBuffer(Pt))throw new TypeError("argument should be a Buffer");if(Nt||(Nt=0),!Ht&&Ht!==0&&(Ht=this.length),Ot>=Pt.length&&(Ot=Pt.length),Ot||(Ot=0),Ht>0&&Ht<Nt&&(Ht=Nt),Ht===Nt||Pt.length===0||this.length===0)return 0;if(Ot<0)throw new RangeError("targetStart out of bounds");if(Nt<0||Nt>=this.length)throw new RangeError("Index out of range");if(Ht<0)throw new RangeError("sourceEnd out of bounds");Ht>this.length&&(Ht=this.length),Pt.length-Ot<Ht-Nt&&(Ht=Pt.length-Ot+Nt);var St=Ht-Nt;return this===Pt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ot,Nt,Ht):Uint8Array.prototype.set.call(Pt,this.subarray(Nt,Ht),Ot),St},i.prototype.fill=function(Pt,Ot,Nt,Ht){if(typeof Pt=="string"){if(typeof Ot=="string"?(Ht=Ot,Ot=0,Nt=this.length):typeof Nt=="string"&&(Ht=Nt,Nt=this.length),Ht!==void 0&&typeof Ht!="string")throw new TypeError("encoding must be a string");if(typeof Ht=="string"&&!i.isEncoding(Ht))throw new TypeError("Unknown encoding: "+Ht);if(Pt.length===1){var St=Pt.charCodeAt(0);(Ht==="utf8"&&St<128||Ht==="latin1")&&(Pt=St)}}else typeof Pt=="number"?Pt=Pt&255:typeof Pt=="boolean"&&(Pt=Number(Pt));if(Ot<0||this.length<Ot||this.length<Nt)throw new RangeError("Out of range index");if(Nt<=Ot)return this;Ot=Ot>>>0,Nt=Nt===void 0?this.length:Nt>>>0,Pt||(Pt=0);var kt;if(typeof Pt=="number")for(kt=Ot;kt<Nt;++kt)this[kt]=Pt;else{var Ft=i.isBuffer(Pt)?Pt:i.from(Pt,Ht),At=Ft.length;if(At===0)throw new TypeError('The value "'+Pt+'" is invalid for argument "value"');for(kt=0;kt<Nt-Ot;++kt)this[kt+Ot]=Ft[kt%At]}return this};var gt={};function Mt(Qt,Pt,Ot){gt[Qt]=function(Nt){s(Ht,Nt);function Ht(){var St;return b(this,Ht),St=v(this,Ht),Object.defineProperty(e(St),"message",{value:Pt.apply(e(St),arguments),writable:!0,configurable:!0}),St.name="".concat(St.name," [").concat(Qt,"]"),St.stack,delete St.name,St}return o(Ht,[{key:"code",get:function(){return Qt},set:function(kt){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:kt,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(Qt,"]: ").concat(this.message)}}]),Ht}(Ot)}Mt("ERR_BUFFER_OUT_OF_BOUNDS",function(Qt){return Qt?"".concat(Qt," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),Mt("ERR_INVALID_ARG_TYPE",function(Qt,Pt){return'The "'.concat(Qt,'" argument must be of type number. Received type ').concat(l(Pt))},TypeError),Mt("ERR_OUT_OF_RANGE",function(Qt,Pt,Ot){var Nt='The value of "'.concat(Qt,'" is out of range.'),Ht=Ot;return Number.isInteger(Ot)&&Math.abs(Ot)>Math.pow(2,32)?Ht=Lt(String(Ot)):typeof Ot=="bigint"&&(Ht=String(Ot),(Ot>Math.pow(BigInt(2),BigInt(32))||Ot<-Math.pow(BigInt(2),BigInt(32)))&&(Ht=Lt(Ht)),Ht+="n"),Nt+=" It must be ".concat(Pt,". Received ").concat(Ht),Nt},RangeError);function Lt(Qt){for(var Pt="",Ot=Qt.length,Nt=Qt[0]==="-"?1:0;Ot>=Nt+4;Ot-=3)Pt="_".concat(Qt.slice(Ot-3,Ot)).concat(Pt);return"".concat(Qt.slice(0,Ot)).concat(Pt)}function zt(Qt,Pt,Ot){Ct(Pt,"offset"),(Qt[Pt]===void 0||Qt[Pt+Ot]===void 0)&&wt(Pt,Qt.length-(Ot+1))}function xt(Qt,Pt,Ot,Nt,Ht,St){if(Qt>Ot||Qt<Pt){var kt=typeof Pt=="bigint"?"n":"",Ft;throw Pt===0||Pt===BigInt(0)?Ft=">= 0".concat(kt," and < 2").concat(kt," ** ").concat((St+1)*8).concat(kt):Ft=">= -(2".concat(kt," ** ").concat((St+1)*8-1).concat(kt,") and < 2 ** ")+"".concat((St+1)*8-1).concat(kt),new gt.ERR_OUT_OF_RANGE("value",Ft,Qt)}zt(Nt,Ht,St)}function Ct(Qt,Pt){if(typeof Qt!="number")throw new gt.ERR_INVALID_ARG_TYPE(Pt,"number",Qt)}function wt(Qt,Pt,Ot){throw Math.floor(Qt)!==Qt?(Ct(Qt,Ot),new gt.ERR_OUT_OF_RANGE("offset","an integer",Qt)):Pt<0?new gt.ERR_BUFFER_OUT_OF_BOUNDS:new gt.ERR_OUT_OF_RANGE("offset",">= ".concat(0," and <= ").concat(Pt),Qt)}var Rt=/[^+/0-9A-Za-z-_]/g;function Tt(Qt){if(Qt=Qt.split("=")[0],Qt=Qt.trim().replace(Rt,""),Qt.length<2)return"";for(;Qt.length%4!==0;)Qt=Qt+"=";return Qt}function Bt(Qt,Pt){Pt=Pt||1/0;for(var Ot,Nt=Qt.length,Ht=null,St=[],kt=0;kt<Nt;++kt){if(Ot=Qt.charCodeAt(kt),Ot>55295&&Ot<57344){if(!Ht){if(Ot>56319){(Pt-=3)>-1&&St.push(239,191,189);continue}else if(kt+1===Nt){(Pt-=3)>-1&&St.push(239,191,189);continue}Ht=Ot;continue}if(Ot<56320){(Pt-=3)>-1&&St.push(239,191,189),Ht=Ot;continue}Ot=(Ht-55296<<10|Ot-56320)+65536}else Ht&&(Pt-=3)>-1&&St.push(239,191,189);if(Ht=null,Ot<128){if((Pt-=1)<0)break;St.push(Ot)}else if(Ot<2048){if((Pt-=2)<0)break;St.push(Ot>>6|192,Ot&63|128)}else if(Ot<65536){if((Pt-=3)<0)break;St.push(Ot>>12|224,Ot>>6&63|128,Ot&63|128)}else if(Ot<1114112){if((Pt-=4)<0)break;St.push(Ot>>18|240,Ot>>12&63|128,Ot>>6&63|128,Ot&63|128)}else throw new Error("Invalid code point")}return St}function Gt(Qt){for(var Pt=[],Ot=0;Ot<Qt.length;++Ot)Pt.push(Qt.charCodeAt(Ot)&255);return Pt}function te(Qt,Pt){for(var Ot,Nt,Ht,St=[],kt=0;kt<Qt.length&&!((Pt-=2)<0);++kt)Ot=Qt.charCodeAt(kt),Nt=Ot>>8,Ht=Ot%256,St.push(Ht),St.push(Nt);return St}function Wt(Qt){return f.toByteArray(Tt(Qt))}function jt(Qt,Pt,Ot,Nt){var Ht;for(Ht=0;Ht<Nt&&!(Ht+Ot>=Pt.length||Ht>=Qt.length);++Ht)Pt[Ht+Ot]=Qt[Ht];return Ht}function ie(Qt,Pt){return Qt instanceof Pt||Qt!=null&&Qt.constructor!=null&&Qt.constructor.name!=null&&Qt.constructor.name===Pt.name}function ue(Qt){return Qt!==Qt}var fe=function(){for(var Qt="0123456789abcdef",Pt=new Array(256),Ot=0;Ot<16;++Ot)for(var Nt=Ot*16,Ht=0;Ht<16;++Ht)Pt[Nt+Ht]=Qt[Ot]+Qt[Ht];return Pt}();function pe(Qt){return typeof BigInt>"u"?Te:Qt}function Te(){throw new Error("BigInt not supported")}},25928:function(j){j.exports=P,j.exports.isMobile=P,j.exports.default=P;var V=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,t=/CrOS/,b=/android|ipad|playbook|silk/i;function P(o){o||(o={});var L=o.ua;if(!L&&typeof navigator<"u"&&(L=navigator.userAgent),L&&L.headers&&typeof L.headers["user-agent"]=="string"&&(L=L.headers["user-agent"]),typeof L!="string")return!1;var A=V.test(L)&&!t.test(L)||!!o.tablet&&b.test(L);return!A&&o.tablet&&o.featureDetect&&navigator&&navigator.maxTouchPoints>1&&L.indexOf("Macintosh")!==-1&&L.indexOf("Safari")!==-1&&(A=!0),A}},48932:function(j,V,t){t.r(V),t.d(V,{sankeyCenter:function(){return s},sankeyCircular:function(){return E},sankeyJustify:function(){return e},sankeyLeft:function(){return p},sankeyRight:function(){return r}});var b=t(84706),P=t(34712),o=t(10132),L=t(6688),A=t.n(L);function v(gt){return gt.target.depth}function p(gt){return gt.depth}function r(gt,Mt){return Mt-1-gt.height}function e(gt,Mt){return gt.sourceLinks.length?gt.depth:Mt-1}function s(gt){return gt.targetLinks.length?gt.depth:gt.sourceLinks.length?(0,b.SY)(gt.sourceLinks,v)-1:0}function n(gt){return function(){return gt}}var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(gt){return typeof gt}:function(gt){return gt&&typeof Symbol=="function"&&gt.constructor===Symbol&&gt!==Symbol.prototype?"symbol":typeof gt};function f(gt,Mt){return g(gt.source,Mt.source)||gt.index-Mt.index}function u(gt,Mt){return g(gt.target,Mt.target)||gt.index-Mt.index}function g(gt,Mt){return gt.partOfCycle===Mt.partOfCycle?gt.y0-Mt.y0:gt.circularLinkType==="top"||Mt.circularLinkType==="bottom"?-1:1}function h(gt){return gt.value}function T(gt){return(gt.y0+gt.y1)/2}function c(gt){return T(gt.source)}function i(gt){return T(gt.target)}function d(gt){return gt.index}function x(gt){return gt.nodes}function w(gt){return gt.links}function C(gt,Mt){var Lt=gt.get(Mt);if(!Lt)throw new Error("missing: "+Mt);return Lt}function y(gt,Mt){return Mt(gt)}var S=25,M=10,a=.3;function E(){var gt=0,Mt=0,Lt=1,zt=1,xt=24,Ct,wt=d,Rt=e,Tt=x,Bt=w,Gt=32,te=2,Wt,jt=null;function ie(){var Nt={nodes:Tt.apply(null,arguments),links:Bt.apply(null,arguments)};ue(Nt),m(Nt,wt,jt),fe(Nt),Qt(Nt),k(Nt,wt),Pt(Nt,Gt,wt),Ot(Nt);for(var Ht=4,St=0;St<Ht;St++)H(Nt,zt,wt),at(Nt,zt,wt),J(Nt,Mt,zt,wt),H(Nt,zt,wt),at(Nt,zt,wt);return mt(Nt,Mt,zt),_(Nt,te,zt,wt),Nt}ie.nodeId=function(Nt){return arguments.length?(wt=typeof Nt=="function"?Nt:n(Nt),ie):wt},ie.nodeAlign=function(Nt){return arguments.length?(Rt=typeof Nt=="function"?Nt:n(Nt),ie):Rt},ie.nodeWidth=function(Nt){return arguments.length?(xt=+Nt,ie):xt},ie.nodePadding=function(Nt){return arguments.length?(Ct=+Nt,ie):Ct},ie.nodes=function(Nt){return arguments.length?(Tt=typeof Nt=="function"?Nt:n(Nt),ie):Tt},ie.links=function(Nt){return arguments.length?(Bt=typeof Nt=="function"?Nt:n(Nt),ie):Bt},ie.size=function(Nt){return arguments.length?(gt=Mt=0,Lt=+Nt[0],zt=+Nt[1],ie):[Lt-gt,zt-Mt]},ie.extent=function(Nt){return arguments.length?(gt=+Nt[0][0],Lt=+Nt[1][0],Mt=+Nt[0][1],zt=+Nt[1][1],ie):[[gt,Mt],[Lt,zt]]},ie.iterations=function(Nt){return arguments.length?(Gt=+Nt,ie):Gt},ie.circularLinkGap=function(Nt){return arguments.length?(te=+Nt,ie):te},ie.nodePaddingRatio=function(Nt){return arguments.length?(Wt=+Nt,ie):Wt},ie.sortNodes=function(Nt){return arguments.length?(jt=Nt,ie):jt},ie.update=function(Nt){return k(Nt,wt),Ot(Nt),Nt.links.forEach(function(Ht){Ht.circular&&(Ht.circularLinkType=Ht.y0+Ht.y1<zt?"top":"bottom",Ht.source.circularLinkType=Ht.circularLinkType,Ht.target.circularLinkType=Ht.circularLinkType)}),H(Nt,zt,wt,!1),at(Nt,zt,wt),_(Nt,te,zt,wt),Nt};function ue(Nt){Nt.nodes.forEach(function(St,kt){St.index=kt,St.sourceLinks=[],St.targetLinks=[]});var Ht=(0,P.kH)(Nt.nodes,wt);return Nt.links.forEach(function(St,kt){St.index=kt;var Ft=St.source,At=St.target;(typeof Ft>"u"?"undefined":l(Ft))!=="object"&&(Ft=St.source=C(Ht,Ft)),(typeof At>"u"?"undefined":l(At))!=="object"&&(At=St.target=C(Ht,At)),Ft.sourceLinks.push(St),At.targetLinks.push(St)}),Nt}function fe(Nt){Nt.nodes.forEach(function(Ht){Ht.partOfCycle=!1,Ht.value=Math.max((0,b.oh)(Ht.sourceLinks,h),(0,b.oh)(Ht.targetLinks,h)),Ht.sourceLinks.forEach(function(St){St.circular&&(Ht.partOfCycle=!0,Ht.circularLinkType=St.circularLinkType)}),Ht.targetLinks.forEach(function(St){St.circular&&(Ht.partOfCycle=!0,Ht.circularLinkType=St.circularLinkType)})})}function pe(Nt){var Ht=0,St=0,kt=0,Ft=0,At=(0,b.kv)(Nt.nodes,function(ft){return ft.column});return Nt.links.forEach(function(ft){ft.circular&&(ft.circularLinkType=="top"?Ht=Ht+ft.width:St=St+ft.width,ft.target.column==0&&(Ft=Ft+ft.width),ft.source.column==At&&(kt=kt+ft.width))}),Ht=Ht>0?Ht+S+M:Ht,St=St>0?St+S+M:St,kt=kt>0?kt+S+M:kt,Ft=Ft>0?Ft+S+M:Ft,{top:Ht,bottom:St,left:Ft,right:kt}}function Te(Nt,Ht){var St=(0,b.kv)(Nt.nodes,function(Ut){return Ut.column}),kt=Lt-gt,Ft=zt-Mt,At=kt+Ht.right+Ht.left,ft=Ft+Ht.top+Ht.bottom,pt=kt/At,Dt=Ft/ft;return gt=gt*pt+Ht.left,Lt=Ht.right==0?Lt:Lt*pt,Mt=Mt*Dt+Ht.top,zt=zt*Dt,Nt.nodes.forEach(function(Ut){Ut.x0=gt+Ut.column*((Lt-gt-xt)/St),Ut.x1=Ut.x0+xt}),Dt}function Qt(Nt){var Ht,St,kt;for(Ht=Nt.nodes,St=[],kt=0;Ht.length;++kt,Ht=St,St=[])Ht.forEach(function(Ft){Ft.depth=kt,Ft.sourceLinks.forEach(function(At){St.indexOf(At.target)<0&&!At.circular&&St.push(At.target)})});for(Ht=Nt.nodes,St=[],kt=0;Ht.length;++kt,Ht=St,St=[])Ht.forEach(function(Ft){Ft.height=kt,Ft.targetLinks.forEach(function(At){St.indexOf(At.source)<0&&!At.circular&&St.push(At.source)})});Nt.nodes.forEach(function(Ft){Ft.column=Math.floor(Rt.call(null,Ft,kt))})}function Pt(Nt,Ht,St){var kt=(0,P.UJ)().key(function(Ut){return Ut.column}).sortKeys(b.XE).entries(Nt.nodes).map(function(Ut){return Ut.values});ft(St),Dt();for(var Ft=1,At=Ht;At>0;--At)pt(Ft*=.99,St),Dt();function ft(Ut){if(Wt){var $t=1/0;kt.forEach(function(me){var Se=zt*Wt/(me.length+1);$t=Se<$t?Se:$t}),Ct=$t}var re=(0,b.SY)(kt,function(me){return(zt-Mt-(me.length-1)*Ct)/(0,b.oh)(me,h)});re=re*a,Nt.links.forEach(function(me){me.width=me.value*re});var Be=pe(Nt),We=Te(Nt,Be);re=re*We,Nt.links.forEach(function(me){me.width=me.value*re}),kt.forEach(function(me){var Se=me.length;me.forEach(function(je,vr){je.depth==kt.length-1&&Se==1||je.depth==0&&Se==1?(je.y0=zt/2-je.value*re,je.y1=je.y0+je.value*re):je.partOfCycle?z(je,Ut)==0?(je.y0=zt/2+vr,je.y1=je.y0+je.value*re):je.circularLinkType=="top"?(je.y0=Mt+vr,je.y1=je.y0+je.value*re):(je.y0=zt-je.value*re-vr,je.y1=je.y0+je.value*re):Be.top==0||Be.bottom==0?(je.y0=(zt-Mt)/Se*vr,je.y1=je.y0+je.value*re):(je.y0=(zt-Mt)/2-Se/2+vr,je.y1=je.y0+je.value*re)})})}function pt(Ut,$t){var re=kt.length;kt.forEach(function(Be){var We=Be.length,me=Be[0].depth;Be.forEach(function(Se){var je;if((Se.sourceLinks.length||Se.targetLinks.length)&&!(Se.partOfCycle&&z(Se,$t)>0))if(me==0&&We==1)je=Se.y1-Se.y0,Se.y0=zt/2-je/2,Se.y1=zt/2+je/2;else if(me==re-1&&We==1)je=Se.y1-Se.y0,Se.y0=zt/2-je/2,Se.y1=zt/2+je/2;else{var vr=0,he=(0,b.mo)(Se.sourceLinks,i),Ye=(0,b.mo)(Se.targetLinks,c);he&&Ye?vr=(he+Ye)/2:vr=he||Ye;var Qe=(vr-T(Se))*Ut;Se.y0+=Qe,Se.y1+=Qe}})})}function Dt(){kt.forEach(function(Ut){var $t,re,Be=Mt,We=Ut.length,me;for(Ut.sort(g),me=0;me<We;++me)$t=Ut[me],re=Be-$t.y0,re>0&&($t.y0+=re,$t.y1+=re),Be=$t.y1+Ct;if(re=Be-Ct-zt,re>0)for(Be=$t.y0-=re,$t.y1-=re,me=We-2;me>=0;--me)$t=Ut[me],re=$t.y1+Ct-Be,re>0&&($t.y0-=re,$t.y1-=re),Be=$t.y0})}}function Ot(Nt){Nt.nodes.forEach(function(Ht){Ht.sourceLinks.sort(u),Ht.targetLinks.sort(f)}),Nt.nodes.forEach(function(Ht){var St=Ht.y0,kt=St,Ft=Ht.y1,At=Ft;Ht.sourceLinks.forEach(function(ft){ft.circular?(ft.y0=Ft-ft.width/2,Ft=Ft-ft.width):(ft.y0=St+ft.width/2,St+=ft.width)}),Ht.targetLinks.forEach(function(ft){ft.circular?(ft.y1=At-ft.width/2,At=At-ft.width):(ft.y1=kt+ft.width/2,kt+=ft.width)})})}return ie}function m(gt,Mt,Lt){var zt=0;if(Lt===null){for(var xt=[],Ct=0;Ct<gt.links.length;Ct++){var wt=gt.links[Ct],Rt=wt.source.index,Tt=wt.target.index;xt[Rt]||(xt[Rt]=[]),xt[Tt]||(xt[Tt]=[]),xt[Rt].indexOf(Tt)===-1&&xt[Rt].push(Tt)}var Bt=A()(xt);Bt.sort(function(jt,ie){return jt.length-ie.length});var Gt={};for(Ct=0;Ct<Bt.length;Ct++){var te=Bt[Ct],Wt=te.slice(-2);Gt[Wt[0]]||(Gt[Wt[0]]={}),Gt[Wt[0]][Wt[1]]=!0}gt.links.forEach(function(jt){var ie=jt.target.index,ue=jt.source.index;ie===ue||Gt[ue]&&Gt[ue][ie]?(jt.circular=!0,jt.circularLinkID=zt,zt=zt+1):jt.circular=!1})}else gt.links.forEach(function(jt){jt.source[Lt]<jt.target[Lt]?jt.circular=!1:(jt.circular=!0,jt.circularLinkID=zt,zt=zt+1)})}function k(gt,Mt){var Lt=0,zt=0;gt.links.forEach(function(xt){xt.circular&&(xt.source.circularLinkType||xt.target.circularLinkType?xt.circularLinkType=xt.source.circularLinkType?xt.source.circularLinkType:xt.target.circularLinkType:xt.circularLinkType=Lt<zt?"top":"bottom",xt.circularLinkType=="top"?Lt=Lt+1:zt=zt+1,gt.nodes.forEach(function(Ct){(y(Ct,Mt)==y(xt.source,Mt)||y(Ct,Mt)==y(xt.target,Mt))&&(Ct.circularLinkType=xt.circularLinkType)}))}),gt.links.forEach(function(xt){xt.circular&&(xt.source.circularLinkType==xt.target.circularLinkType&&(xt.circularLinkType=xt.source.circularLinkType),dt(xt,Mt)&&(xt.circularLinkType=xt.source.circularLinkType))})}function I(gt){var Mt=Math.abs(gt.y1-gt.y0),Lt=Math.abs(gt.target.x0-gt.source.x1);return Math.atan(Lt/Mt)}function O(gt,Mt){return gt.source.column<Mt.target.column?!1:!(gt.target.column>Mt.source.column)}function z(gt,Mt){var Lt=0;gt.sourceLinks.forEach(function(xt){Lt=xt.circular&&!dt(xt,Mt)?Lt+1:Lt});var zt=0;return gt.targetLinks.forEach(function(xt){zt=xt.circular&&!dt(xt,Mt)?zt+1:zt}),Lt+zt}function B(gt){var Mt=gt.source.sourceLinks,Lt=0;Mt.forEach(function(Ct){Lt=Ct.circular?Lt+1:Lt});var zt=gt.target.targetLinks,xt=0;return zt.forEach(function(Ct){xt=Ct.circular?xt+1:xt}),!(Lt>1||xt>1)}function F(gt,Mt,Lt){return gt.sort(G),gt.forEach(function(zt,xt){var Ct=0;if(dt(zt,Lt)&&B(zt))zt.circularPathData.verticalBuffer=Ct+zt.width/2;else{var wt=0;for(wt;wt<xt;wt++)if(O(gt[xt],gt[wt])){var Rt=gt[wt].circularPathData.verticalBuffer+gt[wt].width/2+Mt;Ct=Rt>Ct?Rt:Ct}zt.circularPathData.verticalBuffer=Ct+zt.width/2}}),gt}function _(gt,Mt,Lt,zt){var xt=5,Ct=(0,b.SY)(gt.links,function(Tt){return Tt.source.y0});gt.links.forEach(function(Tt){Tt.circular&&(Tt.circularPathData={})});var wt=gt.links.filter(function(Tt){return Tt.circularLinkType=="top"});F(wt,Mt,zt);var Rt=gt.links.filter(function(Tt){return Tt.circularLinkType=="bottom"});F(Rt,Mt,zt),gt.links.forEach(function(Tt){if(Tt.circular){if(Tt.circularPathData.arcRadius=Tt.width+M,Tt.circularPathData.leftNodeBuffer=xt,Tt.circularPathData.rightNodeBuffer=xt,Tt.circularPathData.sourceWidth=Tt.source.x1-Tt.source.x0,Tt.circularPathData.sourceX=Tt.source.x0+Tt.circularPathData.sourceWidth,Tt.circularPathData.targetX=Tt.target.x0,Tt.circularPathData.sourceY=Tt.y0,Tt.circularPathData.targetY=Tt.y1,dt(Tt,zt)&&B(Tt))Tt.circularPathData.leftSmallArcRadius=M+Tt.width/2,Tt.circularPathData.leftLargeArcRadius=M+Tt.width/2,Tt.circularPathData.rightSmallArcRadius=M+Tt.width/2,Tt.circularPathData.rightLargeArcRadius=M+Tt.width/2,Tt.circularLinkType=="bottom"?(Tt.circularPathData.verticalFullExtent=Tt.source.y1+S+Tt.circularPathData.verticalBuffer,Tt.circularPathData.verticalLeftInnerExtent=Tt.circularPathData.verticalFullExtent-Tt.circularPathData.leftLargeArcRadius,Tt.circularPathData.verticalRightInnerExtent=Tt.circularPathData.verticalFullExtent-Tt.circularPathData.rightLargeArcRadius):(Tt.circularPathData.verticalFullExtent=Tt.source.y0-S-Tt.circularPathData.verticalBuffer,Tt.circularPathData.verticalLeftInnerExtent=Tt.circularPathData.verticalFullExtent+Tt.circularPathData.leftLargeArcRadius,Tt.circularPathData.verticalRightInnerExtent=Tt.circularPathData.verticalFullExtent+Tt.circularPathData.rightLargeArcRadius);else{var Bt=Tt.source.column,Gt=Tt.circularLinkType,te=gt.links.filter(function(ie){return ie.source.column==Bt&&ie.circularLinkType==Gt});Tt.circularLinkType=="bottom"?te.sort($):te.sort(X);var Wt=0;te.forEach(function(ie,ue){ie.circularLinkID==Tt.circularLinkID&&(Tt.circularPathData.leftSmallArcRadius=M+Tt.width/2+Wt,Tt.circularPathData.leftLargeArcRadius=M+Tt.width/2+ue*Mt+Wt),Wt=Wt+ie.width}),Bt=Tt.target.column,te=gt.links.filter(function(ie){return ie.target.column==Bt&&ie.circularLinkType==Gt}),Tt.circularLinkType=="bottom"?te.sort(ot):te.sort(et),Wt=0,te.forEach(function(ie,ue){ie.circularLinkID==Tt.circularLinkID&&(Tt.circularPathData.rightSmallArcRadius=M+Tt.width/2+Wt,Tt.circularPathData.rightLargeArcRadius=M+Tt.width/2+ue*Mt+Wt),Wt=Wt+ie.width}),Tt.circularLinkType=="bottom"?(Tt.circularPathData.verticalFullExtent=Math.max(Lt,Tt.source.y1,Tt.target.y1)+S+Tt.circularPathData.verticalBuffer,Tt.circularPathData.verticalLeftInnerExtent=Tt.circularPathData.verticalFullExtent-Tt.circularPathData.leftLargeArcRadius,Tt.circularPathData.verticalRightInnerExtent=Tt.circularPathData.verticalFullExtent-Tt.circularPathData.rightLargeArcRadius):(Tt.circularPathData.verticalFullExtent=Ct-S-Tt.circularPathData.verticalBuffer,Tt.circularPathData.verticalLeftInnerExtent=Tt.circularPathData.verticalFullExtent+Tt.circularPathData.leftLargeArcRadius,Tt.circularPathData.verticalRightInnerExtent=Tt.circularPathData.verticalFullExtent+Tt.circularPathData.rightLargeArcRadius)}Tt.circularPathData.leftInnerExtent=Tt.circularPathData.sourceX+Tt.circularPathData.leftNodeBuffer,Tt.circularPathData.rightInnerExtent=Tt.circularPathData.targetX-Tt.circularPathData.rightNodeBuffer,Tt.circularPathData.leftFullExtent=Tt.circularPathData.sourceX+Tt.circularPathData.leftLargeArcRadius+Tt.circularPathData.leftNodeBuffer,Tt.circularPathData.rightFullExtent=Tt.circularPathData.targetX-Tt.circularPathData.rightLargeArcRadius-Tt.circularPathData.rightNodeBuffer}if(Tt.circular)Tt.path=N(Tt);else{var jt=(0,o.ak)().source(function(ie){var ue=ie.source.x0+(ie.source.x1-ie.source.x0),fe=ie.y0;return[ue,fe]}).target(function(ie){var ue=ie.target.x0,fe=ie.y1;return[ue,fe]});Tt.path=jt(Tt)}})}function N(gt){var Mt="";return gt.circularLinkType=="top"?Mt="M"+gt.circularPathData.sourceX+" "+gt.circularPathData.sourceY+" L"+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.sourceY+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftSmallArcRadius+" 0 0 0 "+gt.circularPathData.leftFullExtent+" "+(gt.circularPathData.sourceY-gt.circularPathData.leftSmallArcRadius)+" L"+gt.circularPathData.leftFullExtent+" "+gt.circularPathData.verticalLeftInnerExtent+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftLargeArcRadius+" 0 0 0 "+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.verticalFullExtent+" L"+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.verticalFullExtent+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightLargeArcRadius+" 0 0 0 "+gt.circularPathData.rightFullExtent+" "+gt.circularPathData.verticalRightInnerExtent+" L"+gt.circularPathData.rightFullExtent+" "+(gt.circularPathData.targetY-gt.circularPathData.rightSmallArcRadius)+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightSmallArcRadius+" 0 0 0 "+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.targetY+" L"+gt.circularPathData.targetX+" "+gt.circularPathData.targetY:Mt="M"+gt.circularPathData.sourceX+" "+gt.circularPathData.sourceY+" L"+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.sourceY+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftSmallArcRadius+" 0 0 1 "+gt.circularPathData.leftFullExtent+" "+(gt.circularPathData.sourceY+gt.circularPathData.leftSmallArcRadius)+" L"+gt.circularPathData.leftFullExtent+" "+gt.circularPathData.verticalLeftInnerExtent+" A"+gt.circularPathData.leftLargeArcRadius+" "+gt.circularPathData.leftLargeArcRadius+" 0 0 1 "+gt.circularPathData.leftInnerExtent+" "+gt.circularPathData.verticalFullExtent+" L"+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.verticalFullExtent+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightLargeArcRadius+" 0 0 1 "+gt.circularPathData.rightFullExtent+" "+gt.circularPathData.verticalRightInnerExtent+" L"+gt.circularPathData.rightFullExtent+" "+(gt.circularPathData.targetY+gt.circularPathData.rightSmallArcRadius)+" A"+gt.circularPathData.rightLargeArcRadius+" "+gt.circularPathData.rightSmallArcRadius+" 0 0 1 "+gt.circularPathData.rightInnerExtent+" "+gt.circularPathData.targetY+" L"+gt.circularPathData.targetX+" "+gt.circularPathData.targetY,Mt}function G(gt,Mt){return nt(gt)==nt(Mt)?gt.circularLinkType=="bottom"?$(gt,Mt):X(gt,Mt):nt(Mt)-nt(gt)}function X(gt,Mt){return gt.y0-Mt.y0}function $(gt,Mt){return Mt.y0-gt.y0}function et(gt,Mt){return gt.y1-Mt.y1}function ot(gt,Mt){return Mt.y1-gt.y1}function nt(gt){return gt.target.column-gt.source.column}function Z(gt){return gt.target.x0-gt.source.x1}function Q(gt,Mt){var Lt=I(gt),zt=Z(Mt)/Math.tan(Lt),xt=lt(gt)=="up"?gt.y1+zt:gt.y1-zt;return xt}function W(gt,Mt){var Lt=I(gt),zt=Z(Mt)/Math.tan(Lt),xt=lt(gt)=="up"?gt.y1-zt:gt.y1+zt;return xt}function J(gt,Mt,Lt,zt){gt.links.forEach(function(xt){if(!xt.circular&&xt.target.column-xt.source.column>1){var Ct=xt.source.column+1,wt=xt.target.column-1,Rt=1,Tt=wt-Ct+1;for(Rt=1;Ct<=wt;Ct++,Rt++)gt.nodes.forEach(function(Bt){if(Bt.column==Ct){var Gt=Rt/(Tt+1),te=Math.pow(1-Gt,3),Wt=3*Gt*Math.pow(1-Gt,2),jt=3*Math.pow(Gt,2)*(1-Gt),ie=Math.pow(Gt,3),ue=te*xt.y0+Wt*xt.y0+jt*xt.y1+ie*xt.y1,fe=ue-xt.width/2,pe=ue+xt.width/2,Te;fe>Bt.y0&&fe<Bt.y1?(Te=Bt.y1-fe+10,Te=Bt.circularLinkType=="bottom"?Te:-Te,Bt=K(Bt,Te,Mt,Lt),gt.nodes.forEach(function(Qt){y(Qt,zt)==y(Bt,zt)||Qt.column!=Bt.column||it(Bt,Qt)&&K(Qt,Te,Mt,Lt)})):pe>Bt.y0&&pe<Bt.y1?(Te=pe-Bt.y0+10,Bt=K(Bt,Te,Mt,Lt),gt.nodes.forEach(function(Qt){y(Qt,zt)==y(Bt,zt)||Qt.column!=Bt.column||Qt.y0<Bt.y1&&Qt.y1>Bt.y1&&K(Qt,Te,Mt,Lt)})):fe<Bt.y0&&pe>Bt.y1&&(Te=pe-Bt.y0+10,Bt=K(Bt,Te,Mt,Lt),gt.nodes.forEach(function(Qt){y(Qt,zt)==y(Bt,zt)||Qt.column!=Bt.column||Qt.y0<Bt.y1&&Qt.y1>Bt.y1&&K(Qt,Te,Mt,Lt)}))}})}})}function it(gt,Mt){return gt.y0>Mt.y0&&gt.y0<Mt.y1||gt.y1>Mt.y0&&gt.y1<Mt.y1?!0:gt.y0<Mt.y0&&gt.y1>Mt.y1}function K(gt,Mt,Lt,zt){return gt.y0+Mt>=Lt&&gt.y1+Mt<=zt&&(gt.y0=gt.y0+Mt,gt.y1=gt.y1+Mt,gt.targetLinks.forEach(function(xt){xt.y1=xt.y1+Mt}),gt.sourceLinks.forEach(function(xt){xt.y0=xt.y0+Mt})),gt}function H(gt,Mt,Lt,zt){gt.nodes.forEach(function(xt){zt&&xt.y+(xt.y1-xt.y0)>Mt&&(xt.y=xt.y-(xt.y+(xt.y1-xt.y0)-Mt));var Ct=gt.links.filter(function(Tt){return y(Tt.source,Lt)==y(xt,Lt)}),wt=Ct.length;wt>1&&Ct.sort(function(Tt,Bt){if(!Tt.circular&&!Bt.circular){if(Tt.target.column==Bt.target.column)return Tt.y1-Bt.y1;if(tt(Tt,Bt)){if(Tt.target.column>Bt.target.column){var Gt=W(Bt,Tt);return Tt.y1-Gt}if(Bt.target.column>Tt.target.column){var te=W(Tt,Bt);return te-Bt.y1}}else return Tt.y1-Bt.y1}if(Tt.circular&&!Bt.circular)return Tt.circularLinkType=="top"?-1:1;if(Bt.circular&&!Tt.circular)return Bt.circularLinkType=="top"?1:-1;if(Tt.circular&&Bt.circular)return Tt.circularLinkType===Bt.circularLinkType&&Tt.circularLinkType=="top"?Tt.target.column===Bt.target.column?Tt.target.y1-Bt.target.y1:Bt.target.column-Tt.target.column:Tt.circularLinkType===Bt.circularLinkType&&Tt.circularLinkType=="bottom"?Tt.target.column===Bt.target.column?Bt.target.y1-Tt.target.y1:Tt.target.column-Bt.target.column:Tt.circularLinkType=="top"?-1:1});var Rt=xt.y0;Ct.forEach(function(Tt){Tt.y0=Rt+Tt.width/2,Rt=Rt+Tt.width}),Ct.forEach(function(Tt,Bt){if(Tt.circularLinkType=="bottom"){var Gt=Bt+1,te=0;for(Gt;Gt<wt;Gt++)te=te+Ct[Gt].width;Tt.y0=xt.y1-te-Tt.width/2}})})}function at(gt,Mt,Lt){gt.nodes.forEach(function(zt){var xt=gt.links.filter(function(Rt){return y(Rt.target,Lt)==y(zt,Lt)}),Ct=xt.length;Ct>1&&xt.sort(function(Rt,Tt){if(!Rt.circular&&!Tt.circular){if(Rt.source.column==Tt.source.column)return Rt.y0-Tt.y0;if(tt(Rt,Tt)){if(Tt.source.column<Rt.source.column){var Bt=Q(Tt,Rt);return Rt.y0-Bt}if(Rt.source.column<Tt.source.column){var Gt=Q(Rt,Tt);return Gt-Tt.y0}}else return Rt.y0-Tt.y0}if(Rt.circular&&!Tt.circular)return Rt.circularLinkType=="top"?-1:1;if(Tt.circular&&!Rt.circular)return Tt.circularLinkType=="top"?1:-1;if(Rt.circular&&Tt.circular)return Rt.circularLinkType===Tt.circularLinkType&&Rt.circularLinkType=="top"?Rt.source.column===Tt.source.column?Rt.source.y1-Tt.source.y1:Rt.source.column-Tt.source.column:Rt.circularLinkType===Tt.circularLinkType&&Rt.circularLinkType=="bottom"?Rt.source.column===Tt.source.column?Rt.source.y1-Tt.source.y1:Tt.source.column-Rt.source.column:Rt.circularLinkType=="top"?-1:1});var wt=zt.y0;xt.forEach(function(Rt){Rt.y1=wt+Rt.width/2,wt=wt+Rt.width}),xt.forEach(function(Rt,Tt){if(Rt.circularLinkType=="bottom"){var Bt=Tt+1,Gt=0;for(Bt;Bt<Ct;Bt++)Gt=Gt+xt[Bt].width;Rt.y1=zt.y1-Gt-Rt.width/2}})})}function tt(gt,Mt){return lt(gt)==lt(Mt)}function lt(gt){return gt.y0-gt.y1>0?"up":"down"}function dt(gt,Mt){return y(gt.source,Mt)==y(gt.target,Mt)}function mt(gt,Mt,Lt){var zt=gt.nodes,xt=gt.links,Ct=!1,wt=!1;if(xt.forEach(function(Wt){Wt.circularLinkType=="top"?Ct=!0:Wt.circularLinkType=="bottom"&&(wt=!0)}),Ct==!1||wt==!1){var Rt=(0,b.SY)(zt,function(Wt){return Wt.y0}),Tt=(0,b.kv)(zt,function(Wt){return Wt.y1}),Bt=Tt-Rt,Gt=Lt-Mt,te=Gt/Bt;zt.forEach(function(Wt){var jt=(Wt.y1-Wt.y0)*te;Wt.y0=(Wt.y0-Rt)*te,Wt.y1=Wt.y0+jt}),xt.forEach(function(Wt){Wt.y0=(Wt.y0-Rt)*te,Wt.y1=(Wt.y1-Rt)*te,Wt.width=Wt.width*te})}}},26800:function(j,V,t){t.r(V),t.d(V,{sankey:function(){return d},sankeyCenter:function(){return p},sankeyJustify:function(){return v},sankeyLeft:function(){return L},sankeyLinkHorizontal:function(){return y},sankeyRight:function(){return A}});var b=t(84706),P=t(34712);function o(S){return S.target.depth}function L(S){return S.depth}function A(S,M){return M-1-S.height}function v(S,M){return S.sourceLinks.length?S.depth:M-1}function p(S){return S.targetLinks.length?S.depth:S.sourceLinks.length?(0,b.SY)(S.sourceLinks,o)-1:0}function r(S){return function(){return S}}function e(S,M){return n(S.source,M.source)||S.index-M.index}function s(S,M){return n(S.target,M.target)||S.index-M.index}function n(S,M){return S.y0-M.y0}function l(S){return S.value}function f(S){return(S.y0+S.y1)/2}function u(S){return f(S.source)*S.value}function g(S){return f(S.target)*S.value}function h(S){return S.index}function T(S){return S.nodes}function c(S){return S.links}function i(S,M){var a=S.get(M);if(!a)throw new Error("missing: "+M);return a}function d(){var S=0,M=0,a=1,E=1,m=24,k=8,I=h,O=v,z=T,B=c,F=32,_=2/3;function N(){var nt={nodes:z.apply(null,arguments),links:B.apply(null,arguments)};return G(nt),X(nt),$(nt),et(nt),ot(nt),nt}N.update=function(nt){return ot(nt),nt},N.nodeId=function(nt){return arguments.length?(I=typeof nt=="function"?nt:r(nt),N):I},N.nodeAlign=function(nt){return arguments.length?(O=typeof nt=="function"?nt:r(nt),N):O},N.nodeWidth=function(nt){return arguments.length?(m=+nt,N):m},N.nodePadding=function(nt){return arguments.length?(k=+nt,N):k},N.nodes=function(nt){return arguments.length?(z=typeof nt=="function"?nt:r(nt),N):z},N.links=function(nt){return arguments.length?(B=typeof nt=="function"?nt:r(nt),N):B},N.size=function(nt){return arguments.length?(S=M=0,a=+nt[0],E=+nt[1],N):[a-S,E-M]},N.extent=function(nt){return arguments.length?(S=+nt[0][0],a=+nt[1][0],M=+nt[0][1],E=+nt[1][1],N):[[S,M],[a,E]]},N.iterations=function(nt){return arguments.length?(F=+nt,N):F};function G(nt){nt.nodes.forEach(function(Q,W){Q.index=W,Q.sourceLinks=[],Q.targetLinks=[]});var Z=(0,P.kH)(nt.nodes,I);nt.links.forEach(function(Q,W){Q.index=W;var J=Q.source,it=Q.target;typeof J!="object"&&(J=Q.source=i(Z,J)),typeof it!="object"&&(it=Q.target=i(Z,it)),J.sourceLinks.push(Q),it.targetLinks.push(Q)})}function X(nt){nt.nodes.forEach(function(Z){Z.value=Math.max((0,b.oh)(Z.sourceLinks,l),(0,b.oh)(Z.targetLinks,l))})}function $(nt){var Z,Q,W;for(Z=nt.nodes,Q=[],W=0;Z.length;++W,Z=Q,Q=[])Z.forEach(function(it){it.depth=W,it.sourceLinks.forEach(function(K){Q.indexOf(K.target)<0&&Q.push(K.target)})});for(Z=nt.nodes,Q=[],W=0;Z.length;++W,Z=Q,Q=[])Z.forEach(function(it){it.height=W,it.targetLinks.forEach(function(K){Q.indexOf(K.source)<0&&Q.push(K.source)})});var J=(a-S-m)/(W-1);nt.nodes.forEach(function(it){it.x1=(it.x0=S+Math.max(0,Math.min(W-1,Math.floor(O.call(null,it,W))))*J)+m})}function et(nt){var Z=(0,P.UJ)().key(function(at){return at.x0}).sortKeys(b.XE).entries(nt.nodes).map(function(at){return at.values});J(),H();for(var Q=1,W=F;W>0;--W)K(Q*=.99),H(),it(Q),H();function J(){var at=(0,b.kv)(Z,function(dt){return dt.length}),tt=_*(E-M)/(at-1);k>tt&&(k=tt);var lt=(0,b.SY)(Z,function(dt){return(E-M-(dt.length-1)*k)/(0,b.oh)(dt,l)});Z.forEach(function(dt){dt.forEach(function(mt,gt){mt.y1=(mt.y0=gt)+mt.value*lt})}),nt.links.forEach(function(dt){dt.width=dt.value*lt})}function it(at){Z.forEach(function(tt){tt.forEach(function(lt){if(lt.targetLinks.length){var dt=((0,b.oh)(lt.targetLinks,u)/(0,b.oh)(lt.targetLinks,l)-f(lt))*at;lt.y0+=dt,lt.y1+=dt}})})}function K(at){Z.slice().reverse().forEach(function(tt){tt.forEach(function(lt){if(lt.sourceLinks.length){var dt=((0,b.oh)(lt.sourceLinks,g)/(0,b.oh)(lt.sourceLinks,l)-f(lt))*at;lt.y0+=dt,lt.y1+=dt}})})}function H(){Z.forEach(function(at){var tt,lt,dt=M,mt=at.length,gt;for(at.sort(n),gt=0;gt<mt;++gt)tt=at[gt],lt=dt-tt.y0,lt>0&&(tt.y0+=lt,tt.y1+=lt),dt=tt.y1+k;if(lt=dt-k-E,lt>0)for(dt=tt.y0-=lt,tt.y1-=lt,gt=mt-2;gt>=0;--gt)tt=at[gt],lt=tt.y1+k-dt,lt>0&&(tt.y0-=lt,tt.y1-=lt),dt=tt.y0})}}function ot(nt){nt.nodes.forEach(function(Z){Z.sourceLinks.sort(s),Z.targetLinks.sort(e)}),nt.nodes.forEach(function(Z){var Q=Z.y0,W=Q;Z.sourceLinks.forEach(function(J){J.y0=Q+J.width/2,Q+=J.width}),Z.targetLinks.forEach(function(J){J.y1=W+J.width/2,W+=J.width})})}return N}var x=t(10132);function w(S){return[S.source.x1,S.y0]}function C(S){return[S.target.x0,S.y1]}function y(){return(0,x.ak)().source(w).target(C)}},33428:function(j,V,t){var b,P;(function(){var o={version:"3.8.2"},L=[].slice,A=function(st){return L.call(st)},v=self.document;function p(st){return st&&(st.ownerDocument||st.document||st).documentElement}function r(st){return st&&(st.ownerDocument&&st.ownerDocument.defaultView||st.document&&st||st.defaultView)}if(v)try{A(v.documentElement.childNodes)[0].nodeType}catch{A=function(bt){for(var _t=bt.length,Kt=new Array(_t);_t--;)Kt[_t]=bt[_t];return Kt}}if(Date.now||(Date.now=function(){return+new Date}),v)try{v.createElement("DIV").style.setProperty("opacity",0,"")}catch{var e=this.Element.prototype,s=e.setAttribute,n=e.setAttributeNS,l=this.CSSStyleDeclaration.prototype,f=l.setProperty;e.setAttribute=function(bt,_t){s.call(this,bt,_t+"")},e.setAttributeNS=function(bt,_t,Kt){n.call(this,bt,_t,Kt+"")},l.setProperty=function(bt,_t,Kt){f.call(this,bt,_t+"",Kt)}}o.ascending=u;function u(st,bt){return st<bt?-1:st>bt?1:st>=bt?0:NaN}o.descending=function(st,bt){return bt<st?-1:bt>st?1:bt>=st?0:NaN},o.min=function(st,bt){var _t=-1,Kt=st.length,qt,le;if(arguments.length===1){for(;++_t<Kt;)if((le=st[_t])!=null&&le>=le){qt=le;break}for(;++_t<Kt;)(le=st[_t])!=null&&qt>le&&(qt=le)}else{for(;++_t<Kt;)if((le=bt.call(st,st[_t],_t))!=null&&le>=le){qt=le;break}for(;++_t<Kt;)(le=bt.call(st,st[_t],_t))!=null&&qt>le&&(qt=le)}return qt},o.max=function(st,bt){var _t=-1,Kt=st.length,qt,le;if(arguments.length===1){for(;++_t<Kt;)if((le=st[_t])!=null&&le>=le){qt=le;break}for(;++_t<Kt;)(le=st[_t])!=null&&le>qt&&(qt=le)}else{for(;++_t<Kt;)if((le=bt.call(st,st[_t],_t))!=null&&le>=le){qt=le;break}for(;++_t<Kt;)(le=bt.call(st,st[_t],_t))!=null&&le>qt&&(qt=le)}return qt},o.extent=function(st,bt){var _t=-1,Kt=st.length,qt,le,Ce;if(arguments.length===1){for(;++_t<Kt;)if((le=st[_t])!=null&&le>=le){qt=Ce=le;break}for(;++_t<Kt;)(le=st[_t])!=null&&(qt>le&&(qt=le),Ce<le&&(Ce=le))}else{for(;++_t<Kt;)if((le=bt.call(st,st[_t],_t))!=null&&le>=le){qt=Ce=le;break}for(;++_t<Kt;)(le=bt.call(st,st[_t],_t))!=null&&(qt>le&&(qt=le),Ce<le&&(Ce=le))}return[qt,Ce]};function g(st){return st===null?NaN:+st}function h(st){return!isNaN(st)}o.sum=function(st,bt){var _t=0,Kt=st.length,qt,le=-1;if(arguments.length===1)for(;++le<Kt;)h(qt=+st[le])&&(_t+=qt);else for(;++le<Kt;)h(qt=+bt.call(st,st[le],le))&&(_t+=qt);return _t},o.mean=function(st,bt){var _t=0,Kt=st.length,qt,le=-1,Ce=Kt;if(arguments.length===1)for(;++le<Kt;)h(qt=g(st[le]))?_t+=qt:--Ce;else for(;++le<Kt;)h(qt=g(bt.call(st,st[le],le)))?_t+=qt:--Ce;if(Ce)return _t/Ce},o.quantile=function(st,bt){var _t=(st.length-1)*bt+1,Kt=Math.floor(_t),qt=+st[Kt-1],le=_t-Kt;return le?qt+le*(st[Kt]-qt):qt},o.median=function(st,bt){var _t=[],Kt=st.length,qt,le=-1;if(arguments.length===1)for(;++le<Kt;)h(qt=g(st[le]))&&_t.push(qt);else for(;++le<Kt;)h(qt=g(bt.call(st,st[le],le)))&&_t.push(qt);if(_t.length)return o.quantile(_t.sort(u),.5)},o.variance=function(st,bt){var _t=st.length,Kt=0,qt,le,Ce=0,be=-1,Oe=0;if(arguments.length===1)for(;++be<_t;)h(qt=g(st[be]))&&(le=qt-Kt,Kt+=le/++Oe,Ce+=le*(qt-Kt));else for(;++be<_t;)h(qt=g(bt.call(st,st[be],be)))&&(le=qt-Kt,Kt+=le/++Oe,Ce+=le*(qt-Kt));if(Oe>1)return Ce/(Oe-1)},o.deviation=function(){var st=o.variance.apply(this,arguments);return st&&Math.sqrt(st)};function T(st){return{left:function(bt,_t,Kt,qt){for(arguments.length<3&&(Kt=0),arguments.length<4&&(qt=bt.length);Kt<qt;){var le=Kt+qt>>>1;st(bt[le],_t)<0?Kt=le+1:qt=le}return Kt},right:function(bt,_t,Kt,qt){for(arguments.length<3&&(Kt=0),arguments.length<4&&(qt=bt.length);Kt<qt;){var le=Kt+qt>>>1;st(bt[le],_t)>0?qt=le:Kt=le+1}return Kt}}}var c=T(u);o.bisectLeft=c.left,o.bisect=o.bisectRight=c.right,o.bisector=function(st){return T(st.length===1?function(bt,_t){return u(st(bt),_t)}:st)},o.shuffle=function(st,bt,_t){(Kt=arguments.length)<3&&(_t=st.length,Kt<2&&(bt=0));for(var Kt=_t-bt,qt,le;Kt;)le=Math.random()*Kt--|0,qt=st[Kt+bt],st[Kt+bt]=st[le+bt],st[le+bt]=qt;return st},o.permute=function(st,bt){for(var _t=bt.length,Kt=new Array(_t);_t--;)Kt[_t]=st[bt[_t]];return Kt},o.pairs=function(st){for(var bt=0,_t=st.length-1,Kt=st[0],qt=new Array(_t<0?0:_t);bt<_t;)qt[bt]=[Kt,Kt=st[++bt]];return qt},o.transpose=function(st){if(!(le=st.length))return[];for(var bt=-1,_t=o.min(st,i),Kt=new Array(_t);++bt<_t;)for(var qt=-1,le,Ce=Kt[bt]=new Array(le);++qt<le;)Ce[qt]=st[qt][bt];return Kt};function i(st){return st.length}o.zip=function(){return o.transpose(arguments)},o.keys=function(st){var bt=[];for(var _t in st)bt.push(_t);return bt},o.values=function(st){var bt=[];for(var _t in st)bt.push(st[_t]);return bt},o.entries=function(st){var bt=[];for(var _t in st)bt.push({key:_t,value:st[_t]});return bt},o.merge=function(st){for(var bt=st.length,_t,Kt=-1,qt=0,le,Ce;++Kt<bt;)qt+=st[Kt].length;for(le=new Array(qt);--bt>=0;)for(Ce=st[bt],_t=Ce.length;--_t>=0;)le[--qt]=Ce[_t];return le};var d=Math.abs;o.range=function(st,bt,_t){if(arguments.length<3&&(_t=1,arguments.length<2&&(bt=st,st=0)),(bt-st)/_t===1/0)throw new Error("infinite range");var Kt=[],qt=x(d(_t)),le=-1,Ce;if(st*=qt,bt*=qt,_t*=qt,_t<0)for(;(Ce=st+_t*++le)>bt;)Kt.push(Ce/qt);else for(;(Ce=st+_t*++le)<bt;)Kt.push(Ce/qt);return Kt};function x(st){for(var bt=1;st*bt%1;)bt*=10;return bt}function w(st,bt){for(var _t in bt)Object.defineProperty(st.prototype,_t,{value:bt[_t],enumerable:!1})}o.map=function(st,bt){var _t=new C;if(st instanceof C)st.forEach(function(be,Oe){_t.set(be,Oe)});else if(Array.isArray(st)){var Kt=-1,qt=st.length,le;if(arguments.length===1)for(;++Kt<qt;)_t.set(Kt,st[Kt]);else for(;++Kt<qt;)_t.set(bt.call(st,le=st[Kt],Kt),le)}else for(var Ce in st)_t.set(Ce,st[Ce]);return _t};function C(){this._=Object.create(null)}var y="__proto__",S="\0";w(C,{has:E,get:function(st){return this._[M(st)]},set:function(st,bt){return this._[M(st)]=bt},remove:m,keys:k,values:function(){var st=[];for(var bt in this._)st.push(this._[bt]);return st},entries:function(){var st=[];for(var bt in this._)st.push({key:a(bt),value:this._[bt]});return st},size:I,empty:O,forEach:function(st){for(var bt in this._)st.call(this,a(bt),this._[bt])}});function M(st){return(st+="")===y||st[0]===S?S+st:st}function a(st){return(st+="")[0]===S?st.slice(1):st}function E(st){return M(st)in this._}function m(st){return(st=M(st))in this._&&delete this._[st]}function k(){var st=[];for(var bt in this._)st.push(a(bt));return st}function I(){var st=0;for(var bt in this._)++st;return st}function O(){for(var st in this._)return!1;return!0}o.nest=function(){var st={},bt=[],_t=[],Kt,qt;function le(be,Oe,Ue){if(Ue>=bt.length)return qt?qt.call(st,Oe):Kt?Oe.sort(Kt):Oe;for(var nr=-1,Rr=Oe.length,Dr=bt[Ue++],Qr,sn,zr,Hr=new C,Kr;++nr<Rr;)(Kr=Hr.get(Qr=Dr(sn=Oe[nr])))?Kr.push(sn):Hr.set(Qr,[sn]);return be?(sn=be(),zr=function(hn,yn){sn.set(hn,le(be,yn,Ue))}):(sn={},zr=function(hn,yn){sn[hn]=le(be,yn,Ue)}),Hr.forEach(zr),sn}function Ce(be,Oe){if(Oe>=bt.length)return be;var Ue=[],nr=_t[Oe++];return be.forEach(function(Rr,Dr){Ue.push({key:Rr,values:Ce(Dr,Oe)})}),nr?Ue.sort(function(Rr,Dr){return nr(Rr.key,Dr.key)}):Ue}return st.map=function(be,Oe){return le(Oe,be,0)},st.entries=function(be){return Ce(le(o.map,be,0),0)},st.key=function(be){return bt.push(be),st},st.sortKeys=function(be){return _t[bt.length-1]=be,st},st.sortValues=function(be){return Kt=be,st},st.rollup=function(be){return qt=be,st},st},o.set=function(st){var bt=new z;if(st)for(var _t=0,Kt=st.length;_t<Kt;++_t)bt.add(st[_t]);return bt};function z(){this._=Object.create(null)}w(z,{has:E,add:function(st){return this._[M(st+="")]=!0,st},remove:m,values:k,size:I,empty:O,forEach:function(st){for(var bt in this._)st.call(this,a(bt))}}),o.behavior={};function B(st){return st}o.rebind=function(st,bt){for(var _t=1,Kt=arguments.length,qt;++_t<Kt;)st[qt=arguments[_t]]=F(st,bt,bt[qt]);return st};function F(st,bt,_t){return function(){var Kt=_t.apply(bt,arguments);return Kt===bt?st:Kt}}function _(st,bt){if(bt in st)return bt;bt=bt.charAt(0).toUpperCase()+bt.slice(1);for(var _t=0,Kt=N.length;_t<Kt;++_t){var qt=N[_t]+bt;if(qt in st)return qt}}var N=["webkit","ms","moz","Moz","o","O"];function G(){}o.dispatch=function(){for(var st=new X,bt=-1,_t=arguments.length;++bt<_t;)st[arguments[bt]]=$(st);return st};function X(){}X.prototype.on=function(st,bt){var _t=st.indexOf("."),Kt="";if(_t>=0&&(Kt=st.slice(_t+1),st=st.slice(0,_t)),st)return arguments.length<2?this[st].on(Kt):this[st].on(Kt,bt);if(arguments.length===2){if(bt==null)for(st in this)this.hasOwnProperty(st)&&this[st].on(Kt,null);return this}};function $(st){var bt=[],_t=new C;function Kt(){for(var qt=bt,le=-1,Ce=qt.length,be;++le<Ce;)(be=qt[le].on)&&be.apply(this,arguments);return st}return Kt.on=function(qt,le){var Ce=_t.get(qt),be;return arguments.length<2?Ce&&Ce.on:(Ce&&(Ce.on=null,bt=bt.slice(0,be=bt.indexOf(Ce)).concat(bt.slice(be+1)),_t.remove(qt)),le&&bt.push(_t.set(qt,{on:le})),st)},Kt}o.event=null;function et(){o.event.preventDefault()}function ot(){for(var st=o.event,bt;bt=st.sourceEvent;)st=bt;return st}function nt(st){for(var bt=new X,_t=0,Kt=arguments.length;++_t<Kt;)bt[arguments[_t]]=$(bt);return bt.of=function(qt,le){return function(Ce){try{var be=Ce.sourceEvent=o.event;Ce.target=st,o.event=Ce,bt[Ce.type].apply(qt,le)}finally{o.event=be}}},bt}o.requote=function(st){return st.replace(Z,"\\$&")};var Z=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Q={}.__proto__?function(st,bt){st.__proto__=bt}:function(st,bt){for(var _t in bt)st[_t]=bt[_t]};function W(st){return Q(st,H),st}var J=function(st,bt){return bt.querySelector(st)},it=function(st,bt){return bt.querySelectorAll(st)},K=function(st,bt){var _t=st.matches||st[_(st,"matchesSelector")];return K=function(Kt,qt){return _t.call(Kt,qt)},K(st,bt)};typeof Sizzle=="function"&&(J=function(st,bt){return Sizzle(st,bt)[0]||null},it=Sizzle,K=Sizzle.matchesSelector),o.selection=function(){return o.select(v.documentElement)};var H=o.selection.prototype=[];H.select=function(st){var bt=[],_t,Kt,qt,le;st=at(st);for(var Ce=-1,be=this.length;++Ce<be;){bt.push(_t=[]),_t.parentNode=(qt=this[Ce]).parentNode;for(var Oe=-1,Ue=qt.length;++Oe<Ue;)(le=qt[Oe])?(_t.push(Kt=st.call(le,le.__data__,Oe,Ce)),Kt&&"__data__"in le&&(Kt.__data__=le.__data__)):_t.push(null)}return W(bt)};function at(st){return typeof st=="function"?st:function(){return J(st,this)}}H.selectAll=function(st){var bt=[],_t,Kt;st=tt(st);for(var qt=-1,le=this.length;++qt<le;)for(var Ce=this[qt],be=-1,Oe=Ce.length;++be<Oe;)(Kt=Ce[be])&&(bt.push(_t=A(st.call(Kt,Kt.__data__,be,qt))),_t.parentNode=Kt);return W(bt)};function tt(st){return typeof st=="function"?st:function(){return it(st,this)}}var lt="http://www.w3.org/1999/xhtml",dt={svg:"http://www.w3.org/2000/svg",xhtml:lt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};o.ns={prefix:dt,qualify:function(st){var bt=st.indexOf(":"),_t=st;return bt>=0&&(_t=st.slice(0,bt))!=="xmlns"&&(st=st.slice(bt+1)),dt.hasOwnProperty(_t)?{space:dt[_t],local:st}:st}},H.attr=function(st,bt){if(arguments.length<2){if(typeof st=="string"){var _t=this.node();return st=o.ns.qualify(st),st.local?_t.getAttributeNS(st.space,st.local):_t.getAttribute(st)}for(bt in st)this.each(mt(bt,st[bt]));return this}return this.each(mt(st,bt))};function mt(st,bt){st=o.ns.qualify(st);function _t(){this.removeAttribute(st)}function Kt(){this.removeAttributeNS(st.space,st.local)}function qt(){this.setAttribute(st,bt)}function le(){this.setAttributeNS(st.space,st.local,bt)}function Ce(){var Oe=bt.apply(this,arguments);Oe==null?this.removeAttribute(st):this.setAttribute(st,Oe)}function be(){var Oe=bt.apply(this,arguments);Oe==null?this.removeAttributeNS(st.space,st.local):this.setAttributeNS(st.space,st.local,Oe)}return bt==null?st.local?Kt:_t:typeof bt=="function"?st.local?be:Ce:st.local?le:qt}function gt(st){return st.trim().replace(/\s+/g," ")}H.classed=function(st,bt){if(arguments.length<2){if(typeof st=="string"){var _t=this.node(),Kt=(st=Lt(st)).length,qt=-1;if(bt=_t.classList){for(;++qt<Kt;)if(!bt.contains(st[qt]))return!1}else for(bt=_t.getAttribute("class");++qt<Kt;)if(!Mt(st[qt]).test(bt))return!1;return!0}for(bt in st)this.each(zt(bt,st[bt]));return this}return this.each(zt(st,bt))};function Mt(st){return new RegExp("(?:^|\\s+)"+o.requote(st)+"(?:\\s+|$)","g")}function Lt(st){return(st+"").trim().split(/^|\s+/)}function zt(st,bt){st=Lt(st).map(xt);var _t=st.length;function Kt(){for(var le=-1;++le<_t;)st[le](this,bt)}function qt(){for(var le=-1,Ce=bt.apply(this,arguments);++le<_t;)st[le](this,Ce)}return typeof bt=="function"?qt:Kt}function xt(st){var bt=Mt(st);return function(_t,Kt){if(qt=_t.classList)return Kt?qt.add(st):qt.remove(st);var qt=_t.getAttribute("class")||"";Kt?(bt.lastIndex=0,bt.test(qt)||_t.setAttribute("class",gt(qt+" "+st))):_t.setAttribute("class",gt(qt.replace(bt," ")))}}H.style=function(st,bt,_t){var Kt=arguments.length;if(Kt<3){if(typeof st!="string"){Kt<2&&(bt="");for(_t in st)this.each(Ct(_t,st[_t],bt));return this}if(Kt<2){var qt=this.node();return r(qt).getComputedStyle(qt,null).getPropertyValue(st)}_t=""}return this.each(Ct(st,bt,_t))};function Ct(st,bt,_t){function Kt(){this.style.removeProperty(st)}function qt(){this.style.setProperty(st,bt,_t)}function le(){var Ce=bt.apply(this,arguments);Ce==null?this.style.removeProperty(st):this.style.setProperty(st,Ce,_t)}return bt==null?Kt:typeof bt=="function"?le:qt}H.property=function(st,bt){if(arguments.length<2){if(typeof st=="string")return this.node()[st];for(bt in st)this.each(wt(bt,st[bt]));return this}return this.each(wt(st,bt))};function wt(st,bt){function _t(){delete this[st]}function Kt(){this[st]=bt}function qt(){var le=bt.apply(this,arguments);le==null?delete this[st]:this[st]=le}return bt==null?_t:typeof bt=="function"?qt:Kt}H.text=function(st){return arguments.length?this.each(typeof st=="function"?function(){var bt=st.apply(this,arguments);this.textContent=bt??""}:st==null?function(){this.textContent=""}:function(){this.textContent=st}):this.node().textContent},H.html=function(st){return arguments.length?this.each(typeof st=="function"?function(){var bt=st.apply(this,arguments);this.innerHTML=bt??""}:st==null?function(){this.innerHTML=""}:function(){this.innerHTML=st}):this.node().innerHTML},H.append=function(st){return st=Rt(st),this.select(function(){return this.appendChild(st.apply(this,arguments))})};function Rt(st){function bt(){var Kt=this.ownerDocument,qt=this.namespaceURI;return qt===lt&&Kt.documentElement.namespaceURI===lt?Kt.createElement(st):Kt.createElementNS(qt,st)}function _t(){return this.ownerDocument.createElementNS(st.space,st.local)}return typeof st=="function"?st:(st=o.ns.qualify(st)).local?_t:bt}H.insert=function(st,bt){return st=Rt(st),bt=at(bt),this.select(function(){return this.insertBefore(st.apply(this,arguments),bt.apply(this,arguments)||null)})},H.remove=function(){return this.each(Tt)};function Tt(){var st=this.parentNode;st&&st.removeChild(this)}H.data=function(st,bt){var _t=-1,Kt=this.length,qt,le;if(!arguments.length){for(st=new Array(Kt=(qt=this[0]).length);++_t<Kt;)(le=qt[_t])&&(st[_t]=le.__data__);return st}function Ce(nr,Rr){var Dr,Qr=nr.length,sn=Rr.length,zr=Math.min(Qr,sn),Hr=new Array(sn),Kr=new Array(sn),hn=new Array(Qr),yn,qr;if(bt){var Gn=new C,aa=new Array(Qr),va;for(Dr=-1;++Dr<Qr;)(yn=nr[Dr])&&(Gn.has(va=bt.call(yn,yn.__data__,Dr))?hn[Dr]=yn:Gn.set(va,yn),aa[Dr]=va);for(Dr=-1;++Dr<sn;)(yn=Gn.get(va=bt.call(Rr,qr=Rr[Dr],Dr)))?yn!==!0&&(Hr[Dr]=yn,yn.__data__=qr):Kr[Dr]=Bt(qr),Gn.set(va,!0);for(Dr=-1;++Dr<Qr;)Dr in aa&&Gn.get(aa[Dr])!==!0&&(hn[Dr]=nr[Dr])}else{for(Dr=-1;++Dr<zr;)yn=nr[Dr],qr=Rr[Dr],yn?(yn.__data__=qr,Hr[Dr]=yn):Kr[Dr]=Bt(qr);for(;Dr<sn;++Dr)Kr[Dr]=Bt(Rr[Dr]);for(;Dr<Qr;++Dr)hn[Dr]=nr[Dr]}Kr.update=Hr,Kr.parentNode=Hr.parentNode=hn.parentNode=nr.parentNode,be.push(Kr),Oe.push(Hr),Ue.push(hn)}var be=jt([]),Oe=W([]),Ue=W([]);if(typeof st=="function")for(;++_t<Kt;)Ce(qt=this[_t],st.call(qt,qt.parentNode.__data__,_t));else for(;++_t<Kt;)Ce(qt=this[_t],st);return Oe.enter=function(){return be},Oe.exit=function(){return Ue},Oe};function Bt(st){return{__data__:st}}H.datum=function(st){return arguments.length?this.property("__data__",st):this.property("__data__")},H.filter=function(st){var bt=[],_t,Kt,qt;typeof st!="function"&&(st=Gt(st));for(var le=0,Ce=this.length;le<Ce;le++){bt.push(_t=[]),_t.parentNode=(Kt=this[le]).parentNode;for(var be=0,Oe=Kt.length;be<Oe;be++)(qt=Kt[be])&&st.call(qt,qt.__data__,be,le)&&_t.push(qt)}return W(bt)};function Gt(st){return function(){return K(this,st)}}H.order=function(){for(var st=-1,bt=this.length;++st<bt;)for(var _t=this[st],Kt=_t.length-1,qt=_t[Kt],le;--Kt>=0;)(le=_t[Kt])&&(qt&&qt!==le.nextSibling&&qt.parentNode.insertBefore(le,qt),qt=le);return this},H.sort=function(st){st=te.apply(this,arguments);for(var bt=-1,_t=this.length;++bt<_t;)this[bt].sort(st);return this.order()};function te(st){return arguments.length||(st=u),function(bt,_t){return bt&&_t?st(bt.__data__,_t.__data__):!bt-!_t}}H.each=function(st){return Wt(this,function(bt,_t,Kt){st.call(bt,bt.__data__,_t,Kt)})};function Wt(st,bt){for(var _t=0,Kt=st.length;_t<Kt;_t++)for(var qt=st[_t],le=0,Ce=qt.length,be;le<Ce;le++)(be=qt[le])&&bt(be,le,_t);return st}H.call=function(st){var bt=A(arguments);return st.apply(bt[0]=this,bt),this},H.empty=function(){return!this.node()},H.node=function(){for(var st=0,bt=this.length;st<bt;st++)for(var _t=this[st],Kt=0,qt=_t.length;Kt<qt;Kt++){var le=_t[Kt];if(le)return le}return null},H.size=function(){var st=0;return Wt(this,function(){++st}),st};function jt(st){return Q(st,ie),st}var ie=[];o.selection.enter=jt,o.selection.enter.prototype=ie,ie.append=H.append,ie.empty=H.empty,ie.node=H.node,ie.call=H.call,ie.size=H.size,ie.select=function(st){for(var bt=[],_t,Kt,qt,le,Ce,be=-1,Oe=this.length;++be<Oe;){qt=(le=this[be]).update,bt.push(_t=[]),_t.parentNode=le.parentNode;for(var Ue=-1,nr=le.length;++Ue<nr;)(Ce=le[Ue])?(_t.push(qt[Ue]=Kt=st.call(le.parentNode,Ce.__data__,Ue,be)),Kt.__data__=Ce.__data__):_t.push(null)}return W(bt)},ie.insert=function(st,bt){return arguments.length<2&&(bt=ue(this)),H.insert.call(this,st,bt)};function ue(st){var bt,_t;return function(Kt,qt,le){var Ce=st[le].update,be=Ce.length,Oe;for(le!=_t&&(_t=le,bt=0),qt>=bt&&(bt=qt+1);!(Oe=Ce[bt])&&++bt<be;);return Oe}}o.select=function(st){var bt;return typeof st=="string"?(bt=[J(st,v)],bt.parentNode=v.documentElement):(bt=[st],bt.parentNode=p(st)),W([bt])},o.selectAll=function(st){var bt;return typeof st=="string"?(bt=A(it(st,v)),bt.parentNode=v.documentElement):(bt=A(st),bt.parentNode=null),W([bt])},H.on=function(st,bt,_t){var Kt=arguments.length;if(Kt<3){if(typeof st!="string"){Kt<2&&(bt=!1);for(_t in st)this.each(fe(_t,st[_t],bt));return this}if(Kt<2)return(Kt=this.node()["__on"+st])&&Kt._;_t=!1}return this.each(fe(st,bt,_t))};function fe(st,bt,_t){var Kt="__on"+st,qt=st.indexOf("."),le=Te;qt>0&&(st=st.slice(0,qt));var Ce=pe.get(st);Ce&&(st=Ce,le=Qt);function be(){var nr=this[Kt];nr&&(this.removeEventListener(st,nr,nr.$),delete this[Kt])}function Oe(){var nr=le(bt,A(arguments));be.call(this),this.addEventListener(st,this[Kt]=nr,nr.$=_t),nr._=bt}function Ue(){var nr=new RegExp("^__on([^.]+)"+o.requote(st)+"$"),Rr;for(var Dr in this)if(Rr=Dr.match(nr)){var Qr=this[Dr];this.removeEventListener(Rr[1],Qr,Qr.$),delete this[Dr]}}return qt?bt?Oe:be:bt?G:Ue}var pe=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});v&&pe.forEach(function(st){"on"+st in v&&pe.remove(st)});function Te(st,bt){return function(_t){var Kt=o.event;o.event=_t,bt[0]=this.__data__;try{st.apply(this,bt)}finally{o.event=Kt}}}function Qt(st,bt){var _t=Te(st,bt);return function(Kt){var qt=this,le=Kt.relatedTarget;(!le||le!==qt&&!(le.compareDocumentPosition(qt)&8))&&_t.call(qt,Kt)}}var Pt,Ot=0;function Nt(st){var bt=".dragsuppress-"+ ++Ot,_t="click"+bt,Kt=o.select(r(st)).on("touchmove"+bt,et).on("dragstart"+bt,et).on("selectstart"+bt,et);if(Pt==null&&(Pt="onselectstart"in st?!1:_(st.style,"userSelect")),Pt){var qt=p(st).style,le=qt[Pt];qt[Pt]="none"}return function(Ce){if(Kt.on(bt,null),Pt&&(qt[Pt]=le),Ce){var be=function(){Kt.on(_t,null)};Kt.on(_t,function(){et(),be()},!0),setTimeout(be,0)}}}o.mouse=function(st){return St(st,ot())};var Ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function St(st,bt){bt.changedTouches&&(bt=bt.changedTouches[0]);var _t=st.ownerSVGElement||st;if(_t.createSVGPoint){var Kt=_t.createSVGPoint();if(Ht<0){var qt=r(st);if(qt.scrollX||qt.scrollY){_t=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var le=_t[0][0].getScreenCTM();Ht=!(le.f||le.e),_t.remove()}}return Ht?(Kt.x=bt.pageX,Kt.y=bt.pageY):(Kt.x=bt.clientX,Kt.y=bt.clientY),Kt=Kt.matrixTransform(st.getScreenCTM().inverse()),[Kt.x,Kt.y]}var Ce=st.getBoundingClientRect();return[bt.clientX-Ce.left-st.clientLeft,bt.clientY-Ce.top-st.clientTop]}o.touch=function(st,bt,_t){if(arguments.length<3&&(_t=bt,bt=ot().changedTouches),bt){for(var Kt=0,qt=bt.length,le;Kt<qt;++Kt)if((le=bt[Kt]).identifier===_t)return St(st,le)}},o.behavior.drag=function(){var st=nt(qt,"drag","dragstart","dragend"),bt=null,_t=le(G,o.mouse,r,"mousemove","mouseup"),Kt=le(kt,o.touch,B,"touchmove","touchend");function qt(){this.on("mousedown.drag",_t).on("touchstart.drag",Kt)}function le(Ce,be,Oe,Ue,nr){return function(){var Rr=this,Dr=o.event.target.correspondingElement||o.event.target,Qr=Rr.parentNode,sn=st.of(Rr,arguments),zr=0,Hr=Ce(),Kr=".drag"+(Hr==null?"":"-"+Hr),hn,yn=o.select(Oe(Dr)).on(Ue+Kr,aa).on(nr+Kr,va),qr=Nt(Dr),Gn=be(Qr,Hr);bt?(hn=bt.apply(Rr,arguments),hn=[hn.x-Gn[0],hn.y-Gn[1]]):hn=[0,0],sn({type:"dragstart"});function aa(){var ra=be(Qr,Hr),fa,da;ra&&(fa=ra[0]-Gn[0],da=ra[1]-Gn[1],zr|=fa|da,Gn=ra,sn({type:"drag",x:ra[0]+hn[0],y:ra[1]+hn[1],dx:fa,dy:da}))}function va(){be(Qr,Hr)&&(yn.on(Ue+Kr,null).on(nr+Kr,null),qr(zr),sn({type:"dragend"}))}}}return qt.origin=function(Ce){return arguments.length?(bt=Ce,qt):bt},o.rebind(qt,st,"on")};function kt(){return o.event.changedTouches[0].identifier}o.touches=function(st,bt){return arguments.length<2&&(bt=ot().touches),bt?A(bt).map(function(_t){var Kt=St(st,_t);return Kt.identifier=_t.identifier,Kt}):[]};var Ft=1e-6,At=Ft*Ft,ft=Math.PI,pt=2*ft,Dt=pt-Ft,Ut=ft/2,$t=ft/180,re=180/ft;function Be(st,bt,_t){return(bt[0]-st[0])*(_t[1]-st[1])-(bt[1]-st[1])*(_t[0]-st[0])}function We(st){return st>1?Ut:st<-1?-Ut:Math.asin(st)}function me(st){return((st=Math.exp(st))-1/st)/2}function Se(st){return((st=Math.exp(st))+1/st)/2}function je(st){return((st=Math.exp(2*st))-1)/(st+1)}var vr=Math.SQRT2,he=2,Ye=4;o.interpolateZoom=function(st,bt){var _t=st[0],Kt=st[1],qt=st[2],le=bt[0],Ce=bt[1],be=bt[2],Oe=le-_t,Ue=Ce-Kt,nr=Oe*Oe+Ue*Ue,Rr,Dr;if(nr<At)Dr=Math.log(be/qt)/vr,Rr=function(hn){return[_t+hn*Oe,Kt+hn*Ue,qt*Math.exp(vr*hn*Dr)]};else{var Qr=Math.sqrt(nr),sn=(be*be-qt*qt+Ye*nr)/(2*qt*he*Qr),zr=(be*be-qt*qt-Ye*nr)/(2*be*he*Qr),Hr=Math.log(Math.sqrt(sn*sn+1)-sn),Kr=Math.log(Math.sqrt(zr*zr+1)-zr);Dr=(Kr-Hr)/vr,Rr=function(hn){var yn=hn*Dr,qr=Se(Hr),Gn=qt/(he*Qr)*(qr*je(vr*yn+Hr)-me(Hr));return[_t+Gn*Oe,Kt+Gn*Ue,qt*qr/Se(vr*yn+Hr)]}}return Rr.duration=Dr*1e3,Rr},o.behavior.zoom=function(){var st={x:0,y:0,k:1},bt,_t,Kt,qt=[960,500],le=Qe,Ce=250,be=0,Oe="mousedown.zoom",Ue="mousemove.zoom",nr="mouseup.zoom",Rr,Dr="touchstart.zoom",Qr,sn=nt(yn,"zoomstart","zoom","zoomend"),zr,Hr,Kr,hn;ir||(ir="onwheel"in v?(mr=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in v?(mr=function(){return o.event.wheelDelta},"mousewheel"):(mr=function(){return-o.event.detail},"MozMousePixelScroll"));function yn(ea){ea.on(Oe,_a).on(ir+".zoom",Vi).on("dblclick.zoom",hi).on(Dr,oi)}yn.event=function(ea){ea.each(function(){var Ha=sn.of(this,arguments),Ma=st;_r?o.select(this).transition().each("start.zoom",function(){st=this.__chart__||{x:0,y:0,k:1},da(Ha)}).tween("zoom:zoom",function(){var Ja=qt[0],Mi=qt[1],si=_t?_t[0]:Ja/2,to=_t?_t[1]:Mi/2,eo=o.interpolateZoom([(si-st.x)/st.k,(to-st.y)/st.k,Ja/st.k],[(si-Ma.x)/Ma.k,(to-Ma.y)/Ma.k,Ja/Ma.k]);return function(io){var Si=eo(io),po=Ja/Si[2];this.__chart__=st={x:si-Si[0]*po,y:to-Si[1]*po,k:po},Na(Ha)}}).each("interrupt.zoom",function(){Ea(Ha)}).each("end.zoom",function(){Ea(Ha)}):(this.__chart__=st,da(Ha),Na(Ha),Ea(Ha))})},yn.translate=function(ea){return arguments.length?(st={x:+ea[0],y:+ea[1],k:st.k},fa(),yn):[st.x,st.y]},yn.scale=function(ea){return arguments.length?(st={x:st.x,y:st.y,k:null},aa(+ea),fa(),yn):st.k},yn.scaleExtent=function(ea){return arguments.length?(le=ea==null?Qe:[+ea[0],+ea[1]],yn):le},yn.center=function(ea){return arguments.length?(Kt=ea&&[+ea[0],+ea[1]],yn):Kt},yn.size=function(ea){return arguments.length?(qt=ea&&[+ea[0],+ea[1]],yn):qt},yn.duration=function(ea){return arguments.length?(Ce=+ea,yn):Ce},yn.x=function(ea){return arguments.length?(Hr=ea,zr=ea.copy(),st={x:0,y:0,k:1},yn):Hr},yn.y=function(ea){return arguments.length?(hn=ea,Kr=ea.copy(),st={x:0,y:0,k:1},yn):hn};function qr(ea){return[(ea[0]-st.x)/st.k,(ea[1]-st.y)/st.k]}function Gn(ea){return[ea[0]*st.k+st.x,ea[1]*st.k+st.y]}function aa(ea){st.k=Math.max(le[0],Math.min(le[1],ea))}function va(ea,Ha){Ha=Gn(Ha),st.x+=ea[0]-Ha[0],st.y+=ea[1]-Ha[1]}function ra(ea,Ha,Ma,Ja){ea.__chart__={x:st.x,y:st.y,k:st.k},aa(Math.pow(2,Ja)),va(_t=Ha,Ma),ea=o.select(ea),Ce>0&&(ea=ea.transition().duration(Ce)),ea.call(yn.event)}function fa(){Hr&&Hr.domain(zr.range().map(function(ea){return(ea-st.x)/st.k}).map(zr.invert)),hn&&hn.domain(Kr.range().map(function(ea){return(ea-st.y)/st.k}).map(Kr.invert))}function da(ea){be++||ea({type:"zoomstart"})}function Na(ea){fa(),ea({type:"zoom",scale:st.k,translate:[st.x,st.y]})}function Ea(ea){--be||(ea({type:"zoomend"}),_t=null)}function _a(){var ea=this,Ha=sn.of(ea,arguments),Ma=0,Ja=o.select(r(ea)).on(Ue,to).on(nr,eo),Mi=qr(o.mouse(ea)),si=Nt(ea);Ie.call(ea),da(Ha);function to(){Ma=1,va(o.mouse(ea),Mi),Na(Ha)}function eo(){Ja.on(Ue,null).on(nr,null),si(Ma),Ea(Ha)}}function oi(){var ea=this,Ha=sn.of(ea,arguments),Ma={},Ja=0,Mi,si=".zoom-"+o.event.changedTouches[0].identifier,to="touchmove"+si,eo="touchend"+si,io=[],Si=o.select(ea),po=Nt(ea);La(),da(Ha),Si.on(Oe,null).on(Dr,La);function ca(){var oo=o.touches(ea);return Mi=st.k,oo.forEach(function(vi){vi.identifier in Ma&&(Ma[vi.identifier]=qr(vi))}),oo}function La(){var oo=o.event.target;o.select(oo).on(to,Po).on(eo,_o),io.push(oo);for(var vi=o.event.changedTouches,ji=0,Gi=vi.length;ji<Gi;++ji)Ma[vi[ji].identifier]=null;var ls=ca(),Ss=Date.now();if(ls.length===1){if(Ss-Qr<500){var Ii=ls[0];ra(ea,Ii,Ma[Ii.identifier],Math.floor(Math.log(st.k)/Math.LN2)+1),et()}Qr=Ss}else if(ls.length>1){var Ii=ls[0],Sl=ls[1],Qa=Ii[0]-Sl[0],ki=Ii[1]-Sl[1];Ja=Qa*Qa+ki*ki}}function Po(){var oo=o.touches(ea),vi,ji,Gi,ls;Ie.call(ea);for(var Ss=0,Ii=oo.length;Ss<Ii;++Ss,ls=null)if(Gi=oo[Ss],ls=Ma[Gi.identifier]){if(ji)break;vi=Gi,ji=ls}if(ls){var Sl=(Sl=Gi[0]-vi[0])*Sl+(Sl=Gi[1]-vi[1])*Sl,Qa=Ja&&Math.sqrt(Sl/Ja);vi=[(vi[0]+Gi[0])/2,(vi[1]+Gi[1])/2],ji=[(ji[0]+ls[0])/2,(ji[1]+ls[1])/2],aa(Qa*Mi)}Qr=null,va(vi,ji),Na(Ha)}function _o(){if(o.event.touches.length){for(var oo=o.event.changedTouches,vi=0,ji=oo.length;vi<ji;++vi)delete Ma[oo[vi].identifier];for(var Gi in Ma)return void ca()}o.selectAll(io).on(si,null),Si.on(Oe,_a).on(Dr,oi),po(),Ea(Ha)}}function Vi(){var ea=sn.of(this,arguments);Rr?clearTimeout(Rr):(Ie.call(this),bt=qr(_t=Kt||o.mouse(this)),da(ea)),Rr=setTimeout(function(){Rr=null,Ea(ea)},50),et(),aa(Math.pow(2,mr()*.002)*st.k),va(_t,bt),Na(ea)}function hi(){var ea=o.mouse(this),Ha=Math.log(st.k)/Math.LN2;ra(this,ea,qr(ea),o.event.shiftKey?Math.ceil(Ha)-1:Math.floor(Ha)+1)}return o.rebind(yn,sn,"on")};var Qe=[0,1/0],mr,ir;o.color=ve;function ve(){}ve.prototype.toString=function(){return this.rgb()+""},o.hsl=ne;function ne(st,bt,_t){return this instanceof ne?(this.h=+st,this.s=+bt,void(this.l=+_t)):arguments.length<2?st instanceof ne?new ne(st.h,st.s,st.l):Je(""+st,He,ne):new ne(st,bt,_t)}var ge=ne.prototype=new ve;ge.brighter=function(st){return st=Math.pow(.7,arguments.length?st:1),new ne(this.h,this.s,this.l/st)},ge.darker=function(st){return st=Math.pow(.7,arguments.length?st:1),new ne(this.h,this.s,st*this.l)},ge.rgb=function(){return Ae(this.h,this.s,this.l)};function Ae(st,bt,_t){var Kt,qt;st=isNaN(st)?0:(st%=360)<0?st+360:st,bt=isNaN(bt)||bt<0?0:bt>1?1:bt,_t=_t<0?0:_t>1?1:_t,qt=_t<=.5?_t*(1+bt):_t+bt-_t*bt,Kt=2*_t-qt;function le(be){return be>360?be-=360:be<0&&(be+=360),be<60?Kt+(qt-Kt)*be/60:be<180?qt:be<240?Kt+(qt-Kt)*(240-be)/60:Kt}function Ce(be){return Math.round(le(be)*255)}return new tr(Ce(st+120),Ce(st),Ce(st-120))}o.hcl=Re;function Re(st,bt,_t){return this instanceof Re?(this.h=+st,this.c=+bt,void(this.l=+_t)):arguments.length<2?st instanceof Re?new Re(st.h,st.c,st.l):st instanceof _e?xr(st.l,st.a,st.b):xr((st=yr((st=o.rgb(st)).r,st.g,st.b)).l,st.a,st.b):new Re(st,bt,_t)}var ze=Re.prototype=new ve;ze.brighter=function(st){return new Re(this.h,this.c,Math.min(100,this.l+Ke*(arguments.length?st:1)))},ze.darker=function(st){return new Re(this.h,this.c,Math.max(0,this.l-Ke*(arguments.length?st:1)))},ze.rgb=function(){return ke(this.h,this.c,this.l).rgb()};function ke(st,bt,_t){return isNaN(st)&&(st=0),isNaN(bt)&&(bt=0),new _e(_t,Math.cos(st*=$t)*bt,Math.sin(st)*bt)}o.lab=_e;function _e(st,bt,_t){return this instanceof _e?(this.l=+st,this.a=+bt,void(this.b=+_t)):arguments.length<2?st instanceof _e?new _e(st.l,st.a,st.b):st instanceof Re?ke(st.h,st.c,st.l):yr((st=tr(st)).r,st.g,st.b):new _e(st,bt,_t)}var Ke=18,hr=.95047,cr=1,dr=1.08883,fr=_e.prototype=new ve;fr.brighter=function(st){return new _e(Math.min(100,this.l+Ke*(arguments.length?st:1)),this.a,this.b)},fr.darker=function(st){return new _e(Math.max(0,this.l-Ke*(arguments.length?st:1)),this.a,this.b)},fr.rgb=function(){return Lr(this.l,this.a,this.b)};function Lr(st,bt,_t){var Kt=(st+16)/116,qt=Kt+bt/500,le=Kt-_t/200;return qt=Yt(qt)*hr,Kt=Yt(Kt)*cr,le=Yt(le)*dr,new tr(qe(3.2404542*qt-1.5371385*Kt-.4985314*le),qe(-.969266*qt+1.8760108*Kt+.041556*le),qe(.0556434*qt-.2040259*Kt+1.0572252*le))}function xr(st,bt,_t){return st>0?new Re(Math.atan2(_t,bt)*re,Math.sqrt(bt*bt+_t*_t),st):new Re(NaN,NaN,st)}function Yt(st){return st>.206893034?st*st*st:(st-.13793103448275862)/7.787037}function Jt(st){return st>.008856?Math.pow(st,.3333333333333333):7.787037*st+.13793103448275862}function qe(st){return Math.round(255*(st<=.00304?12.92*st:1.055*Math.pow(st,.4166666666666667)-.055))}o.rgb=tr;function tr(st,bt,_t){return this instanceof tr?(this.r=~~st,this.g=~~bt,void(this.b=~~_t)):arguments.length<2?st instanceof tr?new tr(st.r,st.g,st.b):Je(""+st,tr,Ae):new tr(st,bt,_t)}function Ge(st){return new tr(st>>16,st>>8&255,st&255)}function Ee(st){return Ge(st)+""}var Xe=tr.prototype=new ve;Xe.brighter=function(st){st=Math.pow(.7,arguments.length?st:1);var bt=this.r,_t=this.g,Kt=this.b,qt=30;return!bt&&!_t&&!Kt?new tr(qt,qt,qt):(bt&&bt<qt&&(bt=qt),_t&&_t<qt&&(_t=qt),Kt&&Kt<qt&&(Kt=qt),new tr(Math.min(255,bt/st),Math.min(255,_t/st),Math.min(255,Kt/st)))},Xe.darker=function(st){return st=Math.pow(.7,arguments.length?st:1),new tr(st*this.r,st*this.g,st*this.b)},Xe.hsl=function(){return He(this.r,this.g,this.b)},Xe.toString=function(){return"#"+rr(this.r)+rr(this.g)+rr(this.b)};function rr(st){return st<16?"0"+Math.max(0,st).toString(16):Math.min(255,st).toString(16)}function Je(st,bt,_t){var Kt=0,qt=0,le=0,Ce,be,Oe;if(Ce=/([a-z]+)\((.*)\)/.exec(st=st.toLowerCase()),Ce)switch(be=Ce[2].split(","),Ce[1]){case"hsl":return _t(parseFloat(be[0]),parseFloat(be[1])/100,parseFloat(be[2])/100);case"rgb":return bt(Tr(be[0]),Tr(be[1]),Tr(be[2]))}return(Oe=vn.get(st))?bt(Oe.r,Oe.g,Oe.b):(st!=null&&st.charAt(0)==="#"&&!isNaN(Oe=parseInt(st.slice(1),16))&&(st.length===4?(Kt=(Oe&3840)>>4,Kt=Kt>>4|Kt,qt=Oe&240,qt=qt>>4|qt,le=Oe&15,le=le<<4|le):st.length===7&&(Kt=(Oe&16711680)>>16,qt=(Oe&65280)>>8,le=Oe&255)),bt(Kt,qt,le))}function He(st,bt,_t){var Kt=Math.min(st/=255,bt/=255,_t/=255),qt=Math.max(st,bt,_t),le=qt-Kt,Ce,be,Oe=(qt+Kt)/2;return le?(be=Oe<.5?le/(qt+Kt):le/(2-qt-Kt),st==qt?Ce=(bt-_t)/le+(bt<_t?6:0):bt==qt?Ce=(_t-st)/le+2:Ce=(st-bt)/le+4,Ce*=60):(Ce=NaN,be=Oe>0&&Oe<1?0:Ce),new ne(Ce,be,Oe)}function yr(st,bt,_t){st=Ir(st),bt=Ir(bt),_t=Ir(_t);var Kt=Jt((.4124564*st+.3575761*bt+.1804375*_t)/hr),qt=Jt((.2126729*st+.7151522*bt+.072175*_t)/cr),le=Jt((.0193339*st+.119192*bt+.9503041*_t)/dr);return _e(116*qt-16,500*(Kt-qt),200*(qt-le))}function Ir(st){return(st/=255)<=.04045?st/12.92:Math.pow((st+.055)/1.055,2.4)}function Tr(st){var bt=parseFloat(st);return st.charAt(st.length-1)==="%"?Math.round(bt*2.55):bt}var vn=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});vn.forEach(function(st,bt){vn.set(st,Ge(bt))});function Or(st){return typeof st=="function"?st:function(){return st}}o.functor=Or,o.xhr=En(B);function En(st){return function(bt,_t,Kt){return arguments.length===2&&typeof _t=="function"&&(Kt=_t,_t=null),nn(bt,_t,st,Kt)}}function nn(st,bt,_t,Kt){var qt={},le=o.dispatch("beforesend","progress","load","error"),Ce={},be=new XMLHttpRequest,Oe=null;self.XDomainRequest&&!("withCredentials"in be)&&/^(http(s)?:)?\/\//.test(st)&&(be=new XDomainRequest),"onload"in be?be.onload=be.onerror=Ue:be.onreadystatechange=function(){be.readyState>3&&Ue()};function Ue(){var nr=be.status,Rr;if(!nr&&Pr(be)||nr>=200&&nr<300||nr===304){try{Rr=_t.call(qt,be)}catch(Dr){le.error.call(qt,Dr);return}le.load.call(qt,Rr)}else le.error.call(qt,be)}return be.onprogress=function(nr){var Rr=o.event;o.event=nr;try{le.progress.call(qt,be)}finally{o.event=Rr}},qt.header=function(nr,Rr){return nr=(nr+"").toLowerCase(),arguments.length<2?Ce[nr]:(Rr==null?delete Ce[nr]:Ce[nr]=Rr+"",qt)},qt.mimeType=function(nr){return arguments.length?(bt=nr==null?null:nr+"",qt):bt},qt.responseType=function(nr){return arguments.length?(Oe=nr,qt):Oe},qt.response=function(nr){return _t=nr,qt},["get","post"].forEach(function(nr){qt[nr]=function(){return qt.send.apply(qt,[nr].concat(A(arguments)))}}),qt.send=function(nr,Rr,Dr){if(arguments.length===2&&typeof Rr=="function"&&(Dr=Rr,Rr=null),be.open(nr,st,!0),bt!=null&&!("accept"in Ce)&&(Ce.accept=bt+",*/*"),be.setRequestHeader)for(var Qr in Ce)be.setRequestHeader(Qr,Ce[Qr]);return bt!=null&&be.overrideMimeType&&be.overrideMimeType(bt),Oe!=null&&(be.responseType=Oe),Dr!=null&&qt.on("error",Dr).on("load",function(sn){Dr(null,sn)}),le.beforesend.call(qt,be),be.send(Rr??null),qt},qt.abort=function(){return be.abort(),qt},o.rebind(qt,le,"on"),Kt==null?qt:qt.get(gr(Kt))}function gr(st){return st.length===1?function(bt,_t){st(bt==null?_t:null)}:st}function Pr(st){var bt=st.responseType;return bt&&bt!=="text"?st.response:st.responseText}o.dsv=function(st,bt){var _t=new RegExp('["'+st+`
]`),Kt=st.charCodeAt(0);function qt(Ue,nr,Rr){arguments.length<3&&(Rr=nr,nr=null);var Dr=nn(Ue,bt,nr==null?le:Ce(nr),Rr);return Dr.row=function(Qr){return arguments.length?Dr.response((nr=Qr)==null?le:Ce(Qr)):nr},Dr}function le(Ue){return qt.parse(Ue.responseText)}function Ce(Ue){return function(nr){return qt.parse(nr.responseText,Ue)}}qt.parse=function(Ue,nr){var Rr;return qt.parseRows(Ue,function(Dr,Qr){if(Rr)return Rr(Dr,Qr-1);var sn=function(zr){for(var Hr={},Kr=Dr.length,hn=0;hn<Kr;++hn)Hr[Dr[hn]]=zr[hn];return Hr};Rr=nr?function(zr,Hr){return nr(sn(zr),Hr)}:sn})},qt.parseRows=function(Ue,nr){var Rr={},Dr={},Qr=[],sn=Ue.length,zr=0,Hr=0,Kr,hn;function yn(){if(zr>=sn)return Dr;if(hn)return hn=!1,Rr;var Gn=zr;if(Ue.charCodeAt(Gn)===34){for(var aa=Gn;aa++<sn;)if(Ue.charCodeAt(aa)===34){if(Ue.charCodeAt(aa+1)!==34)break;++aa}zr=aa+2;var va=Ue.charCodeAt(aa+1);return va===13?(hn=!0,Ue.charCodeAt(aa+2)===10&&++zr):va===10&&(hn=!0),Ue.slice(Gn+1,aa).replace(/""/g,'"')}for(;zr<sn;){var va=Ue.charCodeAt(zr++),ra=1;if(va===10)hn=!0;else if(va===13)hn=!0,Ue.charCodeAt(zr)===10&&(++zr,++ra);else if(va!==Kt)continue;return Ue.slice(Gn,zr-ra)}return Ue.slice(Gn)}for(;(Kr=yn())!==Dr;){for(var qr=[];Kr!==Rr&&Kr!==Dr;)qr.push(Kr),Kr=yn();nr&&(qr=nr(qr,Hr++))==null||Qr.push(qr)}return Qr},qt.format=function(Ue){if(Array.isArray(Ue[0]))return qt.formatRows(Ue);var nr=new z,Rr=[];return Ue.forEach(function(Dr){for(var Qr in Dr)nr.has(Qr)||Rr.push(nr.add(Qr))}),[Rr.map(Oe).join(st)].concat(Ue.map(function(Dr){return Rr.map(function(Qr){return Oe(Dr[Qr])}).join(st)})).join(`
`)},qt.formatRows=function(Ue){return Ue.map(be).join(`
`)};function be(Ue){return Ue.map(Oe).join(st)}function Oe(Ue){return _t.test(Ue)?'"'+Ue.replace(/\"/g,'""')+'"':Ue}return qt},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("	","text/tab-separated-values");var Xr,kr,pn,en,Tn=this[_(this,"requestAnimationFrame")]||function(st){setTimeout(st,17)};o.timer=function(){Ln.apply(this,arguments)};function Ln(st,bt,_t){var Kt=arguments.length;Kt<2&&(bt=0),Kt<3&&(_t=Date.now());var qt=_t+bt,le={c:st,t:qt,n:null};return kr?kr.n=le:Xr=le,kr=le,pn||(en=clearTimeout(en),pn=1,Tn(Yn)),le}function Yn(){var st=ma(),bt=wa()-st;bt>24?(isFinite(bt)&&(clearTimeout(en),en=setTimeout(Yn,bt)),pn=0):(pn=1,Tn(Yn))}o.timer.flush=function(){ma(),wa()};function ma(){for(var st=Date.now(),bt=Xr;bt;)st>=bt.t&&bt.c(st-bt.t)&&(bt.c=null),bt=bt.n;return st}function wa(){for(var st,bt=Xr,_t=1/0;bt;)bt.c?(bt.t<_t&&(_t=bt.t),bt=(st=bt).n):bt=st?st.n=bt.n:Xr=bt.n;return kr=st,_t}o.round=function(st,bt){return bt?Math.round(st*(bt=Math.pow(10,bt)))/bt:Math.round(st)},o.geom={};function la(st){return st[0]}function ia(st){return st[1]}o.geom.hull=function(st){var bt=la,_t=ia;if(arguments.length)return Kt(st);function Kt(qt){if(qt.length<3)return[];var le=Or(bt),Ce=Or(_t),be,Oe=qt.length,Ue=[],nr=[];for(be=0;be<Oe;be++)Ue.push([+le.call(this,qt[be],be),+Ce.call(this,qt[be],be),be]);for(Ue.sort(Cr),be=0;be<Oe;be++)nr.push([Ue[be][0],-Ue[be][1]]);var Rr=Rn(Ue),Dr=Rn(nr),Qr=Dr[0]===Rr[0],sn=Dr[Dr.length-1]===Rr[Rr.length-1],zr=[];for(be=Rr.length-1;be>=0;--be)zr.push(qt[Ue[Rr[be]][2]]);for(be=+Qr;be<Dr.length-sn;++be)zr.push(qt[Ue[Dr[be]][2]]);return zr}return Kt.x=function(qt){return arguments.length?(bt=qt,Kt):bt},Kt.y=function(qt){return arguments.length?(_t=qt,Kt):_t},Kt};function Rn(st){for(var bt=st.length,_t=[0,1],Kt=2,qt=2;qt<bt;qt++){for(;Kt>1&&Be(st[_t[Kt-2]],st[_t[Kt-1]],st[qt])<=0;)--Kt;_t[Kt++]=qt}return _t.slice(0,Kt)}function Cr(st,bt){return st[0]-bt[0]||st[1]-bt[1]}o.geom.polygon=function(st){return Q(st,an),st};var an=o.geom.polygon.prototype=[];an.area=function(){for(var st=-1,bt=this.length,_t,Kt=this[bt-1],qt=0;++st<bt;)_t=Kt,Kt=this[st],qt+=_t[1]*Kt[0]-_t[0]*Kt[1];return qt*.5},an.centroid=function(st){var bt=-1,_t=this.length,Kt=0,qt=0,le,Ce=this[_t-1],be;for(arguments.length||(st=-1/(6*this.area()));++bt<_t;)le=Ce,Ce=this[bt],be=le[0]*Ce[1]-Ce[0]*le[1],Kt+=(le[0]+Ce[0])*be,qt+=(le[1]+Ce[1])*be;return[Kt*st,qt*st]},an.clip=function(st){for(var bt,_t=Nn(st),Kt=-1,qt=this.length-Nn(this),le,Ce,be=this[qt-1],Oe,Ue,nr;++Kt<qt;){for(bt=st.slice(),st.length=0,Oe=this[Kt],Ue=bt[(Ce=bt.length-_t)-1],le=-1;++le<Ce;)nr=bt[le],on(nr,be,Oe)?(on(Ue,be,Oe)||st.push(ln(Ue,nr,be,Oe)),st.push(nr)):on(Ue,be,Oe)&&st.push(ln(Ue,nr,be,Oe)),Ue=nr;_t&&st.push(st[0]),be=Oe}return st};function on(st,bt,_t){return(_t[0]-bt[0])*(st[1]-bt[1])<(_t[1]-bt[1])*(st[0]-bt[0])}function ln(st,bt,_t,Kt){var qt=st[0],le=_t[0],Ce=bt[0]-qt,be=Kt[0]-le,Oe=st[1],Ue=_t[1],nr=bt[1]-Oe,Rr=Kt[1]-Ue,Dr=(be*(Oe-Ue)-Rr*(qt-le))/(Rr*Ce-be*nr);return[qt+Dr*Ce,Oe+Dr*nr]}function Nn(st){var bt=st[0],_t=st[st.length-1];return!(bt[0]-_t[0]||bt[1]-_t[1])}var gn,Cn,Un,ta=[],pa,ka,Ar=[];function Br(){ho(this),this.edge=this.site=this.circle=null}function Mr(st){var bt=ta.pop()||new Br;return bt.site=st,bt}function Nr(st){An(st),Un.remove(st),ta.push(st),ho(st)}function un(st){var bt=st.circle,_t=bt.x,Kt=bt.cy,qt={x:_t,y:Kt},le=st.P,Ce=st.N,be=[st];Nr(st);for(var Oe=le;Oe.circle&&d(_t-Oe.circle.x)<Ft&&d(Kt-Oe.circle.cy)<Ft;)le=Oe.P,be.unshift(Oe),Nr(Oe),Oe=le;be.unshift(Oe),An(Oe);for(var Ue=Ce;Ue.circle&&d(_t-Ue.circle.x)<Ft&&d(Kt-Ue.circle.cy)<Ft;)Ce=Ue.N,be.push(Ue),Nr(Ue),Ue=Ce;be.push(Ue),An(Ue);var nr=be.length,Rr;for(Rr=1;Rr<nr;++Rr)Ue=be[Rr],Oe=be[Rr-1],Ra(Ue.edge,Oe.site,Ue.site,qt);Oe=be[0],Ue=be[nr-1],Ue.edge=Jn(Oe.site,Ue.site,null,qt),wn(Oe),wn(Ue)}function Dn(st){for(var bt=st.x,_t=st.y,Kt,qt,le,Ce,be=Un._;be;)if(le=mn(be,_t)-bt,le>Ft)be=be.L;else if(Ce=bt-cn(be,_t),Ce>Ft){if(!be.R){Kt=be;break}be=be.R}else{le>-Ft?(Kt=be.P,qt=be):Ce>-Ft?(Kt=be,qt=be.N):Kt=qt=be;break}var Oe=Mr(st);if(Un.insert(Kt,Oe),!(!Kt&&!qt)){if(Kt===qt){An(Kt),qt=Mr(Kt.site),Un.insert(Oe,qt),Oe.edge=qt.edge=Jn(Kt.site,Oe.site),wn(Kt),wn(qt);return}if(!qt){Oe.edge=Jn(Kt.site,Oe.site);return}An(Kt),An(qt);var Ue=Kt.site,nr=Ue.x,Rr=Ue.y,Dr=st.x-nr,Qr=st.y-Rr,sn=qt.site,zr=sn.x-nr,Hr=sn.y-Rr,Kr=2*(Dr*Hr-Qr*zr),hn=Dr*Dr+Qr*Qr,yn=zr*zr+Hr*Hr,qr={x:(Hr*hn-Qr*yn)/Kr+nr,y:(Dr*yn-zr*hn)/Kr+Rr};Ra(qt.edge,Ue,sn,qr),Oe.edge=Jn(Ue,st,null,qr),qt.edge=Jn(st,sn,null,qr),wn(Kt),wn(qt)}}function mn(st,bt){var _t=st.site,Kt=_t.x,qt=_t.y,le=qt-bt;if(!le)return Kt;var Ce=st.P;if(!Ce)return-1/0;_t=Ce.site;var be=_t.x,Oe=_t.y,Ue=Oe-bt;if(!Ue)return be;var nr=be-Kt,Rr=1/le-1/Ue,Dr=nr/Ue;return Rr?(-Dr+Math.sqrt(Dr*Dr-2*Rr*(nr*nr/(-2*Ue)-Oe+Ue/2+qt-le/2)))/Rr+Kt:(Kt+be)/2}function cn(st,bt){var _t=st.N;if(_t)return mn(_t,bt);var Kt=st.site;return Kt.y===bt?Kt.x:1/0}function Er(st){this.site=st,this.edges=[]}Er.prototype.prepare=function(){for(var st=this.edges,bt=st.length,_t;bt--;)_t=st[bt].edge,(!_t.b||!_t.a)&&st.splice(bt,1);return st.sort(Gr),st.length};function Yr(st){for(var bt=st[0][0],_t=st[1][0],Kt=st[0][1],qt=st[1][1],le,Ce,be,Oe,Ue=Cn,nr=Ue.length,Rr,Dr,Qr,sn,zr,Hr;nr--;)if(Rr=Ue[nr],!(!Rr||!Rr.prepare()))for(Qr=Rr.edges,sn=Qr.length,Dr=0;Dr<sn;)Hr=Qr[Dr].end(),be=Hr.x,Oe=Hr.y,zr=Qr[++Dr%sn].start(),le=zr.x,Ce=zr.y,(d(be-le)>Ft||d(Oe-Ce)>Ft)&&(Qr.splice(Dr,0,new mi(ua(Rr.site,Hr,d(be-bt)<Ft&&qt-Oe>Ft?{x:bt,y:d(le-bt)<Ft?Ce:qt}:d(Oe-qt)<Ft&&_t-be>Ft?{x:d(Ce-qt)<Ft?le:_t,y:qt}:d(be-_t)<Ft&&Oe-Kt>Ft?{x:_t,y:d(le-_t)<Ft?Ce:Kt}:d(Oe-Kt)<Ft&&be-bt>Ft?{x:d(Ce-Kt)<Ft?le:bt,y:Kt}:null),Rr.site,null)),++sn)}function Gr(st,bt){return bt.angle-st.angle}function $r(){ho(this),this.x=this.y=this.arc=this.site=this.cy=null}function wn(st){var bt=st.P,_t=st.N;if(!(!bt||!_t)){var Kt=bt.site,qt=st.site,le=_t.site;if(Kt!==le){var Ce=qt.x,be=qt.y,Oe=Kt.x-Ce,Ue=Kt.y-be,nr=le.x-Ce,Hr=le.y-be,Rr=2*(Oe*Hr-Ue*nr);if(!(Rr>=-At)){var Dr=Oe*Oe+Ue*Ue,Qr=nr*nr+Hr*Hr,sn=(Hr*Dr-Ue*Qr)/Rr,zr=(Oe*Qr-nr*Dr)/Rr,Hr=zr+be,Kr=Ar.pop()||new $r;Kr.arc=st,Kr.site=qt,Kr.x=sn+Ce,Kr.y=Hr+Math.sqrt(sn*sn+zr*zr),Kr.cy=Hr,st.circle=Kr;for(var hn=null,yn=ka._;yn;)if(Kr.y<yn.y||Kr.y===yn.y&&Kr.x<=yn.x)if(yn.L)yn=yn.L;else{hn=yn.P;break}else if(yn.R)yn=yn.R;else{hn=yn;break}ka.insert(hn,Kr),hn||(pa=Kr)}}}}function An(st){var bt=st.circle;bt&&(bt.P||(pa=bt.N),ka.remove(bt),Ar.push(bt),ho(bt),st.circle=null)}function On(st,bt,_t,Kt){return function(qt){var le=qt.a,Ce=qt.b,be=le.x,Oe=le.y,Ue=Ce.x,nr=Ce.y,Rr=0,Dr=1,Qr=Ue-be,sn=nr-Oe,zr;if(zr=st-be,!(!Qr&&zr>0)){if(zr/=Qr,Qr<0){if(zr<Rr)return;zr<Dr&&(Dr=zr)}else if(Qr>0){if(zr>Dr)return;zr>Rr&&(Rr=zr)}if(zr=_t-be,!(!Qr&&zr<0)){if(zr/=Qr,Qr<0){if(zr>Dr)return;zr>Rr&&(Rr=zr)}else if(Qr>0){if(zr<Rr)return;zr<Dr&&(Dr=zr)}if(zr=bt-Oe,!(!sn&&zr>0)){if(zr/=sn,sn<0){if(zr<Rr)return;zr<Dr&&(Dr=zr)}else if(sn>0){if(zr>Dr)return;zr>Rr&&(Rr=zr)}if(zr=Kt-Oe,!(!sn&&zr<0)){if(zr/=sn,sn<0){if(zr>Dr)return;zr>Rr&&(Rr=zr)}else if(sn>0){if(zr<Rr)return;zr<Dr&&(Dr=zr)}return Rr>0&&(qt.a={x:be+Rr*Qr,y:Oe+Rr*sn}),Dr<1&&(qt.b={x:be+Dr*Qr,y:Oe+Dr*sn}),qt}}}}}}function Vn(st){for(var bt=gn,_t=On(st[0][0],st[0][1],st[1][0],st[1][1]),Kt=bt.length,qt;Kt--;)qt=bt[Kt],(!zn(qt,st)||!_t(qt)||d(qt.a.x-qt.b.x)<Ft&&d(qt.a.y-qt.b.y)<Ft)&&(qt.a=qt.b=null,bt.splice(Kt,1))}function zn(st,bt){var _t=st.b;if(_t)return!0;var Kt=st.a,qt=bt[0][0],le=bt[1][0],Ce=bt[0][1],be=bt[1][1],Oe=st.l,Ue=st.r,nr=Oe.x,Rr=Oe.y,Dr=Ue.x,Qr=Ue.y,sn=(nr+Dr)/2,zr=(Rr+Qr)/2,Hr,Kr;if(Qr===Rr){if(sn<qt||sn>=le)return;if(nr>Dr){if(!Kt)Kt={x:sn,y:Ce};else if(Kt.y>=be)return;_t={x:sn,y:be}}else{if(!Kt)Kt={x:sn,y:be};else if(Kt.y<Ce)return;_t={x:sn,y:Ce}}}else if(Hr=(nr-Dr)/(Qr-Rr),Kr=zr-Hr*sn,Hr<-1||Hr>1)if(nr>Dr){if(!Kt)Kt={x:(Ce-Kr)/Hr,y:Ce};else if(Kt.y>=be)return;_t={x:(be-Kr)/Hr,y:be}}else{if(!Kt)Kt={x:(be-Kr)/Hr,y:be};else if(Kt.y<Ce)return;_t={x:(Ce-Kr)/Hr,y:Ce}}else if(Rr<Qr){if(!Kt)Kt={x:qt,y:Hr*qt+Kr};else if(Kt.x>=le)return;_t={x:le,y:Hr*le+Kr}}else{if(!Kt)Kt={x:le,y:Hr*le+Kr};else if(Kt.x<qt)return;_t={x:qt,y:Hr*qt+Kr}}return st.a=Kt,st.b=_t,!0}function Zn(st,bt){this.l=st,this.r=bt,this.a=this.b=null}function Jn(st,bt,_t,Kt){var qt=new Zn(st,bt);return gn.push(qt),_t&&Ra(qt,st,bt,_t),Kt&&Ra(qt,bt,st,Kt),Cn[st.i].edges.push(new mi(qt,st,bt)),Cn[bt.i].edges.push(new mi(qt,bt,st)),qt}function ua(st,bt,_t){var Kt=new Zn(st,null);return Kt.a=bt,Kt.b=_t,gn.push(Kt),Kt}function Ra(st,bt,_t,Kt){!st.a&&!st.b?(st.a=Kt,st.l=bt,st.r=_t):st.l===_t?st.b=Kt:st.a=Kt}function mi(st,bt,_t){var Kt=st.a,qt=st.b;this.edge=st,this.site=bt,this.angle=_t?Math.atan2(_t.y-bt.y,_t.x-bt.x):st.l===bt?Math.atan2(qt.x-Kt.x,Kt.y-qt.y):Math.atan2(Kt.x-qt.x,qt.y-Kt.y)}mi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ri(){this._=null}function ho(st){st.U=st.C=st.L=st.R=st.P=st.N=null}ri.prototype={insert:function(st,bt){var _t,Kt,qt;if(st){if(bt.P=st,bt.N=st.N,st.N&&(st.N.P=bt),st.N=bt,st.R){for(st=st.R;st.L;)st=st.L;st.L=bt}else st.R=bt;_t=st}else this._?(st=ys(this._),bt.P=null,bt.N=st,st.P=st.L=bt,_t=st):(bt.P=bt.N=null,this._=bt,_t=null);for(bt.L=bt.R=null,bt.U=_t,bt.C=!0,st=bt;_t&&_t.C;)Kt=_t.U,_t===Kt.L?(qt=Kt.R,qt&&qt.C?(_t.C=qt.C=!1,Kt.C=!0,st=Kt):(st===_t.R&&(So(this,_t),st=_t,_t=st.U),_t.C=!1,Kt.C=!0,ro(this,Kt))):(qt=Kt.L,qt&&qt.C?(_t.C=qt.C=!1,Kt.C=!0,st=Kt):(st===_t.L&&(ro(this,_t),st=_t,_t=st.U),_t.C=!1,Kt.C=!0,So(this,Kt))),_t=st.U;this._.C=!1},remove:function(st){st.N&&(st.N.P=st.P),st.P&&(st.P.N=st.N),st.N=st.P=null;var bt=st.U,_t,Kt=st.L,qt=st.R,le,Ce;if(Kt?qt?le=ys(qt):le=Kt:le=qt,bt?bt.L===st?bt.L=le:bt.R=le:this._=le,Kt&&qt?(Ce=le.C,le.C=st.C,le.L=Kt,Kt.U=le,le!==qt?(bt=le.U,le.U=st.U,st=le.R,bt.L=st,le.R=qt,qt.U=le):(le.U=bt,bt=le,st=le.R)):(Ce=st.C,st=le),st&&(st.U=bt),!Ce){if(st&&st.C){st.C=!1;return}do{if(st===this._)break;if(st===bt.L){if(_t=bt.R,_t.C&&(_t.C=!1,bt.C=!0,So(this,bt),_t=bt.R),_t.L&&_t.L.C||_t.R&&_t.R.C){(!_t.R||!_t.R.C)&&(_t.L.C=!1,_t.C=!0,ro(this,_t),_t=bt.R),_t.C=bt.C,bt.C=_t.R.C=!1,So(this,bt),st=this._;break}}else if(_t=bt.L,_t.C&&(_t.C=!1,bt.C=!0,ro(this,bt),_t=bt.L),_t.L&&_t.L.C||_t.R&&_t.R.C){(!_t.L||!_t.L.C)&&(_t.R.C=!1,_t.C=!0,So(this,_t),_t=bt.L),_t.C=bt.C,bt.C=_t.L.C=!1,ro(this,bt),st=this._;break}_t.C=!0,st=bt,bt=bt.U}while(!st.C);st&&(st.C=!1)}}};function So(st,bt){var _t=bt,Kt=bt.R,qt=_t.U;qt?qt.L===_t?qt.L=Kt:qt.R=Kt:st._=Kt,Kt.U=qt,_t.U=Kt,_t.R=Kt.L,_t.R&&(_t.R.U=_t),Kt.L=_t}function ro(st,bt){var _t=bt,Kt=bt.L,qt=_t.U;qt?qt.L===_t?qt.L=Kt:qt.R=Kt:st._=Kt,Kt.U=qt,_t.U=Kt,_t.L=Kt.R,_t.L&&(_t.L.U=_t),Kt.R=_t}function ys(st){for(;st.L;)st=st.L;return st}function il(st,bt){var _t=st.sort(zl).pop(),Kt,qt,le;for(gn=[],Cn=new Array(st.length),Un=new ri,ka=new ri;;)if(le=pa,_t&&(!le||_t.y<le.y||_t.y===le.y&&_t.x<le.x))(_t.x!==Kt||_t.y!==qt)&&(Cn[_t.i]=new Er(_t),Dn(_t),Kt=_t.x,qt=_t.y),_t=st.pop();else if(le)un(le.arc);else break;bt&&(Vn(bt),Yr(bt));var Ce={cells:Cn,edges:gn};return Un=ka=gn=Cn=null,Ce}function zl(st,bt){return bt.y-st.y||bt.x-st.x}o.geom.voronoi=function(st){var bt=la,_t=ia,Kt=bt,qt=_t,le=ni;if(st)return Ce(st);function Ce(Oe){var Ue=new Array(Oe.length),nr=le[0][0],Rr=le[0][1],Dr=le[1][0],Qr=le[1][1];return il(be(Oe),le).cells.forEach(function(sn,zr){var Hr=sn.edges,Kr=sn.site,hn=Ue[zr]=Hr.length?Hr.map(function(yn){var qr=yn.start();return[qr.x,qr.y]}):Kr.x>=nr&&Kr.x<=Dr&&Kr.y>=Rr&&Kr.y<=Qr?[[nr,Qr],[Dr,Qr],[Dr,Rr],[nr,Rr]]:[];hn.point=Oe[zr]}),Ue}function be(Oe){return Oe.map(function(Ue,nr){return{x:Math.round(Kt(Ue,nr)/Ft)*Ft,y:Math.round(qt(Ue,nr)/Ft)*Ft,i:nr}})}return Ce.links=function(Oe){return il(be(Oe)).edges.filter(function(Ue){return Ue.l&&Ue.r}).map(function(Ue){return{source:Oe[Ue.l.i],target:Oe[Ue.r.i]}})},Ce.triangles=function(Oe){var Ue=[];return il(be(Oe)).cells.forEach(function(nr,Rr){for(var Dr=nr.site,Qr=nr.edges.sort(Gr),sn=-1,zr=Qr.length,Hr,Kr=Qr[zr-1].edge,hn=Kr.l===Dr?Kr.r:Kr.l;++sn<zr;)Hr=hn,Kr=Qr[sn].edge,hn=Kr.l===Dr?Kr.r:Kr.l,Rr<Hr.i&&Rr<hn.i&&_l(Dr,Hr,hn)<0&&Ue.push([Oe[Rr],Oe[Hr.i],Oe[hn.i]])}),Ue},Ce.x=function(Oe){return arguments.length?(Kt=Or(bt=Oe),Ce):bt},Ce.y=function(Oe){return arguments.length?(qt=Or(_t=Oe),Ce):_t},Ce.clipExtent=function(Oe){return arguments.length?(le=Oe??ni,Ce):le===ni?null:le},Ce.size=function(Oe){return arguments.length?Ce.clipExtent(Oe&&[[0,0],Oe]):le===ni?null:le&&le[1]},Ce};var ni=[[-1e6,-1e6],[1e6,1e6]];function _l(st,bt,_t){return(st.x-_t.x)*(bt.y-st.y)-(st.x-bt.x)*(_t.y-st.y)}o.geom.delaunay=function(st){return o.geom.voronoi().triangles(st)},o.geom.quadtree=function(st,bt,_t,Kt,qt){var le=la,Ce=ia,be;if(be=arguments.length)return le=Iu,Ce=Qi,be===3&&(qt=_t,Kt=bt,_t=bt=0),Oe(st);function Oe(Ue){var nr,Rr=Or(le),Dr=Or(Ce),Qr,sn,zr,Hr,Kr,hn,yn,qr;if(bt!=null)Kr=bt,hn=_t,yn=Kt,qr=qt;else if(yn=qr=-(Kr=hn=1/0),Qr=[],sn=[],Hr=Ue.length,be)for(zr=0;zr<Hr;++zr)nr=Ue[zr],nr.x<Kr&&(Kr=nr.x),nr.y<hn&&(hn=nr.y),nr.x>yn&&(yn=nr.x),nr.y>qr&&(qr=nr.y),Qr.push(nr.x),sn.push(nr.y);else for(zr=0;zr<Hr;++zr){var Gn=+Rr(nr=Ue[zr],zr),aa=+Dr(nr,zr);Gn<Kr&&(Kr=Gn),aa<hn&&(hn=aa),Gn>yn&&(yn=Gn),aa>qr&&(qr=aa),Qr.push(Gn),sn.push(aa)}var va=yn-Kr,ra=qr-hn;va>ra?qr=hn+va:yn=Kr+ra;function fa(Ea,_a,oi,Vi,hi,ea,Ha,Ma){if(!(isNaN(oi)||isNaN(Vi)))if(Ea.leaf){var Ja=Ea.x,Mi=Ea.y;if(Ja!=null)if(d(Ja-oi)+d(Mi-Vi)<.01)da(Ea,_a,oi,Vi,hi,ea,Ha,Ma);else{var si=Ea.point;Ea.x=Ea.y=Ea.point=null,da(Ea,si,Ja,Mi,hi,ea,Ha,Ma),da(Ea,_a,oi,Vi,hi,ea,Ha,Ma)}else Ea.x=oi,Ea.y=Vi,Ea.point=_a}else da(Ea,_a,oi,Vi,hi,ea,Ha,Ma)}function da(Ea,_a,oi,Vi,hi,ea,Ha,Ma){var Ja=(hi+Ha)*.5,Mi=(ea+Ma)*.5,si=oi>=Ja,to=Vi>=Mi,eo=to<<1|si;Ea.leaf=!1,Ea=Ea.nodes[eo]||(Ea.nodes[eo]=mo()),si?hi=Ja:Ha=Ja,to?ea=Mi:Ma=Mi,fa(Ea,_a,oi,Vi,hi,ea,Ha,Ma)}var Na=mo();if(Na.add=function(Ea){fa(Na,Ea,+Rr(Ea,++zr),+Dr(Ea,zr),Kr,hn,yn,qr)},Na.visit=function(Ea){ol(Ea,Na,Kr,hn,yn,qr)},Na.find=function(Ea){return uu(Na,Ea[0],Ea[1],Kr,hn,yn,qr)},zr=-1,bt==null){for(;++zr<Hr;)fa(Na,Ue[zr],Qr[zr],sn[zr],Kr,hn,yn,qr);--zr}else Ue.forEach(Na.add);return Qr=sn=Ue=nr=null,Na}return Oe.x=function(Ue){return arguments.length?(le=Ue,Oe):le},Oe.y=function(Ue){return arguments.length?(Ce=Ue,Oe):Ce},Oe.extent=function(Ue){return arguments.length?(Ue==null?bt=_t=Kt=qt=null:(bt=+Ue[0][0],_t=+Ue[0][1],Kt=+Ue[1][0],qt=+Ue[1][1]),Oe):bt==null?null:[[bt,_t],[Kt,qt]]},Oe.size=function(Ue){return arguments.length?(Ue==null?bt=_t=Kt=qt=null:(bt=_t=0,Kt=+Ue[0],qt=+Ue[1]),Oe):bt==null?null:[Kt-bt,qt-_t]},Oe};function Iu(st){return st.x}function Qi(st){return st.y}function mo(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function ol(st,bt,_t,Kt,qt,le){if(!st(bt,_t,Kt,qt,le)){var Ce=(_t+qt)*.5,be=(Kt+le)*.5,Oe=bt.nodes;Oe[0]&&ol(st,Oe[0],_t,Kt,Ce,be),Oe[1]&&ol(st,Oe[1],Ce,Kt,qt,be),Oe[2]&&ol(st,Oe[2],_t,be,Ce,le),Oe[3]&&ol(st,Oe[3],Ce,be,qt,le)}}function uu(st,bt,_t,Kt,qt,le,Ce){var be=1/0,Oe;return function Ue(nr,Rr,Dr,Qr,sn){if(!(Rr>le||Dr>Ce||Qr<Kt||sn<qt)){if(zr=nr.point){var zr,Hr=bt-nr.x,Kr=_t-nr.y,hn=Hr*Hr+Kr*Kr;if(hn<be){var yn=Math.sqrt(be=hn);Kt=bt-yn,qt=_t-yn,le=bt+yn,Ce=_t+yn,Oe=zr}}for(var qr=nr.nodes,Gn=(Rr+Qr)*.5,aa=(Dr+sn)*.5,va=bt>=Gn,ra=_t>=aa,fa=ra<<1|va,da=fa+4;fa<da;++fa)if(nr=qr[fa&3])switch(fa&3){case 0:Ue(nr,Rr,Dr,Gn,aa);break;case 1:Ue(nr,Gn,Dr,Qr,aa);break;case 2:Ue(nr,Rr,aa,Gn,sn);break;case 3:Ue(nr,Gn,aa,Qr,sn);break}}}(st,Kt,qt,le,Ce),Oe}o.interpolateRgb=Oi;function Oi(st,bt){st=o.rgb(st),bt=o.rgb(bt);var _t=st.r,Kt=st.g,qt=st.b,le=bt.r-_t,Ce=bt.g-Kt,be=bt.b-qt;return function(Oe){return"#"+rr(Math.round(_t+le*Oe))+rr(Math.round(Kt+Ce*Oe))+rr(Math.round(qt+be*Oe))}}o.interpolateObject=sl;function sl(st,bt){var _t={},Kt={},qt;for(qt in st)qt in bt?_t[qt]=ao(st[qt],bt[qt]):Kt[qt]=st[qt];for(qt in bt)qt in st||(Kt[qt]=bt[qt]);return function(le){for(qt in _t)Kt[qt]=_t[qt](le);return Kt}}o.interpolateNumber=Ui;function Ui(st,bt){return st=+st,bt=+bt,function(_t){return st*(1-_t)+bt*_t}}o.interpolateString=Xi;function Xi(st,bt){var _t=ll.lastIndex=no.lastIndex=0,Kt,qt,le,Ce=-1,be=[],Oe=[];for(st=st+"",bt=bt+"";(Kt=ll.exec(st))&&(qt=no.exec(bt));)(le=qt.index)>_t&&(le=bt.slice(_t,le),be[Ce]?be[Ce]+=le:be[++Ce]=le),(Kt=Kt[0])===(qt=qt[0])?be[Ce]?be[Ce]+=qt:be[++Ce]=qt:(be[++Ce]=null,Oe.push({i:Ce,x:Ui(Kt,qt)})),_t=no.lastIndex;return _t<bt.length&&(le=bt.slice(_t),be[Ce]?be[Ce]+=le:be[++Ce]=le),be.length<2?Oe[0]?(bt=Oe[0].x,function(Ue){return bt(Ue)+""}):function(){return bt}:(bt=Oe.length,function(Ue){for(var nr=0,Rr;nr<bt;++nr)be[(Rr=Oe[nr]).i]=Rr.x(Ue);return be.join("")})}var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,no=new RegExp(ll.source,"g");o.interpolate=ao;function ao(st,bt){for(var _t=o.interpolators.length,Kt;--_t>=0&&!(Kt=o.interpolators[_t](st,bt)););return Kt}o.interpolators=[function(st,bt){var _t=typeof bt;return(_t==="string"?vn.has(bt.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(bt)?Oi:Xi:bt instanceof ve?Oi:Array.isArray(bt)?ko:_t==="object"&&isNaN(bt)?sl:Ui)(st,bt)}],o.interpolateArray=ko;function ko(st,bt){var _t=[],Kt=[],qt=st.length,le=bt.length,Ce=Math.min(st.length,bt.length),be;for(be=0;be<Ce;++be)_t.push(ao(st[be],bt[be]));for(;be<qt;++be)Kt[be]=st[be];for(;be<le;++be)Kt[be]=bt[be];return function(Oe){for(be=0;be<Ce;++be)Kt[be]=_t[be](Oe);return Kt}}var of=function(){return B},Eo=o.map({linear:of,poly:sf,quad:function(){return Ls},cubic:function(){return is},sin:function(){return jf},exp:function(){return fu},circle:function(){return Kf},elastic:Jf,back:Qf,bounce:function(){return _u}}),Zf=o.map({in:B,out:$i,"in-out":ku,"out-in":function(st){return ku($i(st))}});o.ease=function(st){var bt=st.indexOf("-"),_t=bt>=0?st.slice(0,bt):st,Kt=bt>=0?st.slice(bt+1):"in";return _t=Eo.get(_t)||of,Kt=Zf.get(Kt)||B,as(Kt(_t.apply(null,L.call(arguments,1))))};function as(st){return function(bt){return bt<=0?0:bt>=1?1:st(bt)}}function $i(st){return function(bt){return 1-st(1-bt)}}function ku(st){return function(bt){return .5*(bt<.5?st(2*bt):2-st(2-2*bt))}}function Ls(st){return st*st}function is(st){return st*st*st}function zu(st){if(st<=0)return 0;if(st>=1)return 1;var bt=st*st,_t=bt*st;return 4*(st<.5?_t:3*(st-bt)+_t-.75)}function sf(st){return function(bt){return Math.pow(bt,st)}}function jf(st){return 1-Math.cos(st*Ut)}function fu(st){return Math.pow(2,10*(st-1))}function Kf(st){return 1-Math.sqrt(1-st*st)}function Jf(st,bt){var _t;return arguments.length<2&&(bt=.45),arguments.length?_t=bt/pt*Math.asin(1/st):(st=1,_t=bt/4),function(Kt){return 1+st*Math.pow(2,-10*Kt)*Math.sin((Kt-_t)*pt/bt)}}function Qf(st){return st||(st=1.70158),function(bt){return bt*bt*((st+1)*bt-st)}}function _u(st){return st<.36363636363636365?7.5625*st*st:st<.7272727272727273?7.5625*(st-=.5454545454545454)*st+.75:st<.9090909090909091?7.5625*(st-=.8181818181818182)*st+.9375:7.5625*(st-=.9545454545454546)*st+.984375}o.interpolateHcl=$f;function $f(st,bt){st=o.hcl(st),bt=o.hcl(bt);var _t=st.h,Kt=st.c,qt=st.l,le=bt.h-_t,Ce=bt.c-Kt,be=bt.l-qt;return isNaN(Ce)&&(Ce=0,Kt=isNaN(Kt)?bt.c:Kt),isNaN(le)?(le=0,_t=isNaN(_t)?bt.h:_t):le>180?le-=360:le<-180&&(le+=360),function(Oe){return ke(_t+le*Oe,Kt+Ce*Oe,qt+be*Oe)+""}}o.interpolateHsl=qf;function qf(st,bt){st=o.hsl(st),bt=o.hsl(bt);var _t=st.h,Kt=st.s,qt=st.l,le=bt.h-_t,Ce=bt.s-Kt,be=bt.l-qt;return isNaN(Ce)&&(Ce=0,Kt=isNaN(Kt)?bt.s:Kt),isNaN(le)?(le=0,_t=isNaN(_t)?bt.h:_t):le>180?le-=360:le<-180&&(le+=360),function(Oe){return Ae(_t+le*Oe,Kt+Ce*Oe,qt+be*Oe)+""}}o.interpolateLab=lf;function lf(st,bt){st=o.lab(st),bt=o.lab(bt);var _t=st.l,Kt=st.a,qt=st.b,le=bt.l-_t,Ce=bt.a-Kt,be=bt.b-qt;return function(Oe){return Lr(_t+le*Oe,Kt+Ce*Oe,qt+be*Oe)+""}}o.interpolateRound=uf;function uf(st,bt){return bt-=st,function(_t){return Math.round(st+bt*_t)}}o.transform=function(st){var bt=v.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(_t){if(_t!=null){bt.setAttribute("transform",_t);var Kt=bt.transform.baseVal.consolidate()}return new Ys(Kt?Kt.matrix:ff)})(st)};function Ys(st){var bt=[st.a,st.b],_t=[st.c,st.d],Kt=Fl(bt),qt=ul(bt,_t),le=Fl(Ol(_t,bt,-qt))||0;bt[0]*_t[1]<_t[0]*bt[1]&&(bt[0]*=-1,bt[1]*=-1,Kt*=-1,qt*=-1),this.rotate=(Kt?Math.atan2(bt[1],bt[0]):Math.atan2(-_t[0],_t[1]))*re,this.translate=[st.e,st.f],this.scale=[Kt,le],this.skew=le?Math.atan2(qt,le)*re:0}Ys.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function ul(st,bt){return st[0]*bt[0]+st[1]*bt[1]}function Fl(st){var bt=Math.sqrt(ul(st,st));return bt&&(st[0]/=bt,st[1]/=bt),bt}function Ol(st,bt,_t){return st[0]+=_t*bt[0],st[1]+=_t*bt[1],st}var ff={a:1,b:0,c:0,d:1,e:0,f:0};o.interpolateTransform=hu;function ms(st){return st.length?st.pop()+",":""}function tc(st,bt,_t,Kt){if(st[0]!==bt[0]||st[1]!==bt[1]){var qt=_t.push("translate(",null,",",null,")");Kt.push({i:qt-4,x:Ui(st[0],bt[0])},{i:qt-2,x:Ui(st[1],bt[1])})}else(bt[0]||bt[1])&&_t.push("translate("+bt+")")}function cu(st,bt,_t,Kt){st!==bt?(st-bt>180?bt+=360:bt-st>180&&(st+=360),Kt.push({i:_t.push(ms(_t)+"rotate(",null,")")-2,x:Ui(st,bt)})):bt&&_t.push(ms(_t)+"rotate("+bt+")")}function cf(st,bt,_t,Kt){st!==bt?Kt.push({i:_t.push(ms(_t)+"skewX(",null,")")-2,x:Ui(st,bt)}):bt&&_t.push(ms(_t)+"skewX("+bt+")")}function hf(st,bt,_t,Kt){if(st[0]!==bt[0]||st[1]!==bt[1]){var qt=_t.push(ms(_t)+"scale(",null,",",null,")");Kt.push({i:qt-4,x:Ui(st[0],bt[0])},{i:qt-2,x:Ui(st[1],bt[1])})}else(bt[0]!==1||bt[1]!==1)&&_t.push(ms(_t)+"scale("+bt+")")}function hu(st,bt){var _t=[],Kt=[];return st=o.transform(st),bt=o.transform(bt),tc(st.translate,bt.translate,_t,Kt),cu(st.rotate,bt.rotate,_t,Kt),cf(st.skew,bt.skew,_t,Kt),hf(st.scale,bt.scale,_t,Kt),st=bt=null,function(qt){for(var le=-1,Ce=Kt.length,be;++le<Ce;)_t[(be=Kt[le]).i]=be.x(qt);return _t.join("")}}function Vo(st,bt){return bt=(bt-=st=+st)||1/bt,function(_t){return(_t-st)/bt}}function fl(st,bt){return bt=(bt-=st=+st)||1/bt,function(_t){return Math.max(0,Math.min(1,(_t-st)/bt))}}o.layout={},o.layout.bundle=function(){return function(st){for(var bt=[],_t=-1,Kt=st.length;++_t<Kt;)bt.push(Xs(st[_t]));return bt}};function Xs(st){for(var bt=st.source,_t=st.target,Kt=Ps(bt,_t),qt=[bt];bt!==Kt;)bt=bt.parent,qt.push(bt);for(var le=qt.length;_t!==Kt;)qt.splice(le,0,_t),_t=_t.parent;return qt}function Bl(st){for(var bt=[],_t=st.parent;_t!=null;)bt.push(st),st=_t,_t=_t.parent;return bt.push(st),bt}function Ps(st,bt){if(st===bt)return st;for(var _t=Bl(st),Kt=Bl(bt),qt=_t.pop(),le=Kt.pop(),Ce=null;qt===le;)Ce=qt,qt=_t.pop(),le=Kt.pop();return Ce}o.layout.chord=function(){var st={},bt,_t,Kt,qt,le=0,Ce,be,Oe;function Ue(){var Rr={},Dr=[],Qr=o.range(qt),sn=[],zr,Hr,Kr,hn,yn;for(bt=[],_t=[],zr=0,hn=-1;++hn<qt;){for(Hr=0,yn=-1;++yn<qt;)Hr+=Kt[hn][yn];Dr.push(Hr),sn.push(o.range(qt)),zr+=Hr}for(Ce&&Qr.sort(function(Na,Ea){return Ce(Dr[Na],Dr[Ea])}),be&&sn.forEach(function(Na,Ea){Na.sort(function(_a,oi){return be(Kt[Ea][_a],Kt[Ea][oi])})}),zr=(pt-le*qt)/zr,Hr=0,hn=-1;++hn<qt;){for(Kr=Hr,yn=-1;++yn<qt;){var qr=Qr[hn],Gn=sn[qr][yn],aa=Kt[qr][Gn],va=Hr,ra=Hr+=aa*zr;Rr[qr+"-"+Gn]={index:qr,subindex:Gn,startAngle:va,endAngle:ra,value:aa}}_t[qr]={index:qr,startAngle:Kr,endAngle:Hr,value:Dr[qr]},Hr+=le}for(hn=-1;++hn<qt;)for(yn=hn-1;++yn<qt;){var fa=Rr[hn+"-"+yn],da=Rr[yn+"-"+hn];(fa.value||da.value)&&bt.push(fa.value<da.value?{source:da,target:fa}:{source:fa,target:da})}Oe&&nr()}function nr(){bt.sort(function(Rr,Dr){return Oe((Rr.source.value+Rr.target.value)/2,(Dr.source.value+Dr.target.value)/2)})}return st.matrix=function(Rr){return arguments.length?(qt=(Kt=Rr)&&Kt.length,bt=_t=null,st):Kt},st.padding=function(Rr){return arguments.length?(le=Rr,bt=_t=null,st):le},st.sortGroups=function(Rr){return arguments.length?(Ce=Rr,bt=_t=null,st):Ce},st.sortSubgroups=function(Rr){return arguments.length?(be=Rr,bt=null,st):be},st.sortChords=function(Rr){return arguments.length?(Oe=Rr,bt&&nr(),st):Oe},st.chords=function(){return bt||Ue(),bt},st.groups=function(){return _t||Ue(),_t},st},o.layout.force=function(){var st={},bt=o.dispatch("start","tick","end"),_t,Kt=[1,1],qt,le,Ce=.9,be=Ou,Oe=ec,Ue=-30,nr=vu,Rr=.1,Dr=.64,Qr=[],sn=[],zr,Hr,Kr;function hn(qr){return function(Gn,aa,va,ra){if(Gn.point!==qr){var fa=Gn.cx-qr.x,da=Gn.cy-qr.y,Na=ra-aa,Ea=fa*fa+da*da;if(Na*Na/Dr<Ea){if(Ea<nr){var _a=Gn.charge/Ea;qr.px-=fa*_a,qr.py-=da*_a}return!0}if(Gn.point&&Ea&&Ea<nr){var _a=Gn.pointCharge/Ea;qr.px-=fa*_a,qr.py-=da*_a}}return!Gn.charge}}st.tick=function(){if((le*=.99)<.005)return _t=null,bt.end({type:"end",alpha:le=0}),!0;var qr=Qr.length,Gn=sn.length,aa,va,ra,fa,da,Na,Ea,_a,oi;for(va=0;va<Gn;++va)ra=sn[va],fa=ra.source,da=ra.target,_a=da.x-fa.x,oi=da.y-fa.y,(Na=_a*_a+oi*oi)&&(Na=le*Hr[va]*((Na=Math.sqrt(Na))-zr[va])/Na,_a*=Na,oi*=Na,da.x-=_a*(Ea=fa.weight+da.weight?fa.weight/(fa.weight+da.weight):.5),da.y-=oi*Ea,fa.x+=_a*(Ea=1-Ea),fa.y+=oi*Ea);if((Ea=le*Rr)&&(_a=Kt[0]/2,oi=Kt[1]/2,va=-1,Ea))for(;++va<qr;)ra=Qr[va],ra.x+=(_a-ra.x)*Ea,ra.y+=(oi-ra.y)*Ea;if(Ue)for(zi(aa=o.geom.quadtree(Qr),le,Kr),va=-1;++va<qr;)(ra=Qr[va]).fixed||aa.visit(hn(ra));for(va=-1;++va<qr;)ra=Qr[va],ra.fixed?(ra.x=ra.px,ra.y=ra.py):(ra.x-=(ra.px-(ra.px=ra.x))*Ce,ra.y-=(ra.py-(ra.py=ra.y))*Ce);bt.tick({type:"tick",alpha:le})},st.nodes=function(qr){return arguments.length?(Qr=qr,st):Qr},st.links=function(qr){return arguments.length?(sn=qr,st):sn},st.size=function(qr){return arguments.length?(Kt=qr,st):Kt},st.linkDistance=function(qr){return arguments.length?(be=typeof qr=="function"?qr:+qr,st):be},st.distance=st.linkDistance,st.linkStrength=function(qr){return arguments.length?(Oe=typeof qr=="function"?qr:+qr,st):Oe},st.friction=function(qr){return arguments.length?(Ce=+qr,st):Ce},st.charge=function(qr){return arguments.length?(Ue=typeof qr=="function"?qr:+qr,st):Ue},st.chargeDistance=function(qr){return arguments.length?(nr=qr*qr,st):Math.sqrt(nr)},st.gravity=function(qr){return arguments.length?(Rr=+qr,st):Rr},st.theta=function(qr){return arguments.length?(Dr=qr*qr,st):Math.sqrt(Dr)},st.alpha=function(qr){return arguments.length?(qr=+qr,le?qr>0?le=qr:(_t.c=null,_t.t=NaN,_t=null,bt.end({type:"end",alpha:le=0})):qr>0&&(bt.start({type:"start",alpha:le=qr}),_t=Ln(st.tick)),st):le},st.start=function(){var qr,Gn=Qr.length,aa=sn.length,va=Kt[0],ra=Kt[1],fa,da;for(qr=0;qr<Gn;++qr)(da=Qr[qr]).index=qr,da.weight=0;for(qr=0;qr<aa;++qr)da=sn[qr],typeof da.source=="number"&&(da.source=Qr[da.source]),typeof da.target=="number"&&(da.target=Qr[da.target]),++da.source.weight,++da.target.weight;for(qr=0;qr<Gn;++qr)da=Qr[qr],isNaN(da.x)&&(da.x=Na("x",va)),isNaN(da.y)&&(da.y=Na("y",ra)),isNaN(da.px)&&(da.px=da.x),isNaN(da.py)&&(da.py=da.y);if(zr=[],typeof be=="function")for(qr=0;qr<aa;++qr)zr[qr]=+be.call(this,sn[qr],qr);else for(qr=0;qr<aa;++qr)zr[qr]=be;if(Hr=[],typeof Oe=="function")for(qr=0;qr<aa;++qr)Hr[qr]=+Oe.call(this,sn[qr],qr);else for(qr=0;qr<aa;++qr)Hr[qr]=Oe;if(Kr=[],typeof Ue=="function")for(qr=0;qr<Gn;++qr)Kr[qr]=+Ue.call(this,Qr[qr],qr);else for(qr=0;qr<Gn;++qr)Kr[qr]=Ue;function Na(Ea,_a){if(!fa){for(fa=new Array(Gn),hi=0;hi<Gn;++hi)fa[hi]=[];for(hi=0;hi<aa;++hi){var oi=sn[hi];fa[oi.source.index].push(oi.target),fa[oi.target.index].push(oi.source)}}for(var Vi=fa[qr],hi=-1,ea=Vi.length,Ha;++hi<ea;)if(!isNaN(Ha=Vi[hi][Ea]))return Ha;return Math.random()*_a}return st.resume()},st.resume=function(){return st.alpha(.1)},st.stop=function(){return st.alpha(0)},st.drag=function(){if(qt||(qt=o.behavior.drag().origin(B).on("dragstart.force",os).on("drag.force",yn).on("dragend.force",Fu)),!arguments.length)return qt;this.on("mouseover.force",cl).on("mouseout.force",Ho).call(qt)};function yn(qr){qr.px=o.event.x,qr.py=o.event.y,st.resume()}return o.rebind(st,bt,"on")};function os(st){st.fixed|=2}function Fu(st){st.fixed&=-7}function cl(st){st.fixed|=4,st.px=st.x,st.py=st.y}function Ho(st){st.fixed&=-5}function zi(st,bt,_t){var Kt=0,qt=0;if(st.charge=0,!st.leaf)for(var le=st.nodes,Ce=le.length,be=-1,Oe;++be<Ce;)Oe=le[be],Oe!=null&&(zi(Oe,bt,_t),st.charge+=Oe.charge,Kt+=Oe.charge*Oe.cx,qt+=Oe.charge*Oe.cy);if(st.point){st.leaf||(st.point.x+=Math.random()-.5,st.point.y+=Math.random()-.5);var Ue=bt*_t[st.point.index];st.charge+=st.pointCharge=Ue,Kt+=Ue*st.point.x,qt+=Ue*st.point.y}st.cx=Kt/st.charge,st.cy=qt/st.charge}var Ou=20,ec=1,vu=1/0;o.layout.hierarchy=function(){var st=pu,bt=du,_t=dl;function Kt(qt){var le=[qt],Ce=[],be;for(qt.depth=0;(be=le.pop())!=null;)if(Ce.push(be),(Ue=bt.call(Kt,be,be.depth))&&(Oe=Ue.length)){for(var Oe,Ue,nr;--Oe>=0;)le.push(nr=Ue[Oe]),nr.parent=be,nr.depth=be.depth+1;_t&&(be.value=0),be.children=Ue}else _t&&(be.value=+_t.call(Kt,be,be.depth)||0),delete be.children;return Co(qt,function(Rr){var Dr,Qr;st&&(Dr=Rr.children)&&Dr.sort(st),_t&&(Qr=Rr.parent)&&(Qr.value+=Rr.value)}),Ce}return Kt.sort=function(qt){return arguments.length?(st=qt,Kt):st},Kt.children=function(qt){return arguments.length?(bt=qt,Kt):bt},Kt.value=function(qt){return arguments.length?(_t=qt,Kt):_t},Kt.revalue=function(qt){return _t&&(vl(qt,function(le){le.children&&(le.value=0)}),Co(qt,function(le){var Ce;le.children||(le.value=+_t.call(Kt,le,le.depth)||0),(Ce=le.parent)&&(Ce.value+=le.value)})),qt},Kt};function hl(st,bt){return o.rebind(st,bt,"sort","children","value"),st.nodes=st,st.links=rc,st}function vl(st,bt){for(var _t=[st];(st=_t.pop())!=null;)if(bt(st),(qt=st.children)&&(Kt=qt.length))for(var Kt,qt;--Kt>=0;)_t.push(qt[Kt])}function Co(st,bt){for(var _t=[st],Kt=[];(st=_t.pop())!=null;)if(Kt.push(st),(Ce=st.children)&&(le=Ce.length))for(var qt=-1,le,Ce;++qt<le;)_t.push(Ce[qt]);for(;(st=Kt.pop())!=null;)bt(st)}function du(st){return st.children}function dl(st){return st.value}function pu(st,bt){return bt.value-st.value}function rc(st){return o.merge(st.map(function(bt){return(bt.children||[]).map(function(_t){return{source:bt,target:_t}})}))}o.layout.partition=function(){var st=o.layout.hierarchy(),bt=[1,1];function _t(le,Ce,be,Oe){var Ue=le.children;if(le.x=Ce,le.y=le.depth*Oe,le.dx=be,le.dy=Oe,Ue&&(Rr=Ue.length)){var nr=-1,Rr,Dr,Qr;for(be=le.value?be/le.value:0;++nr<Rr;)_t(Dr=Ue[nr],Ce,Qr=Dr.value*be,Oe),Ce+=Qr}}function Kt(le){var Ce=le.children,be=0;if(Ce&&(Ue=Ce.length))for(var Oe=-1,Ue;++Oe<Ue;)be=Math.max(be,Kt(Ce[Oe]));return 1+be}function qt(le,Ce){var be=st.call(this,le,Ce);return _t(be[0],0,bt[0],bt[1]/Kt(be[0])),be}return qt.size=function(le){return arguments.length?(bt=le,qt):bt},hl(qt,st)},o.layout.pie=function(){var st=Number,bt=vf,_t=0,Kt=pt,qt=0;function le(Ce){var be=Ce.length,Oe=Ce.map(function(hn,yn){return+st.call(le,hn,yn)}),Ue=+(typeof _t=="function"?_t.apply(this,arguments):_t),nr=(typeof Kt=="function"?Kt.apply(this,arguments):Kt)-Ue,Rr=Math.min(Math.abs(nr)/be,+(typeof qt=="function"?qt.apply(this,arguments):qt)),Dr=Rr*(nr<0?-1:1),Qr=o.sum(Oe),sn=Qr?(nr-be*Dr)/Qr:0,zr=o.range(be),Hr=[],Kr;return bt!=null&&zr.sort(bt===vf?function(hn,yn){return Oe[yn]-Oe[hn]}:function(hn,yn){return bt(Ce[hn],Ce[yn])}),zr.forEach(function(hn){Hr[hn]={data:Ce[hn],value:Kr=Oe[hn],startAngle:Ue,endAngle:Ue+=Kr*sn+Dr,padAngle:Rr}}),Hr}return le.value=function(Ce){return arguments.length?(st=Ce,le):st},le.sort=function(Ce){return arguments.length?(bt=Ce,le):bt},le.startAngle=function(Ce){return arguments.length?(_t=Ce,le):_t},le.endAngle=function(Ce){return arguments.length?(Kt=Ce,le):Kt},le.padAngle=function(Ce){return arguments.length?(qt=Ce,le):qt},le};var vf={};o.layout.stack=function(){var st=B,bt=Nl,_t=yu,Kt=Uu,qt=Bu,le=Nu;function Ce(be,Oe){if(!(sn=be.length))return be;var Ue=be.map(function(hn,yn){return st.call(Ce,hn,yn)}),nr=Ue.map(function(hn){return hn.map(function(yn,qr){return[qt.call(Ce,yn,qr),le.call(Ce,yn,qr)]})}),Rr=bt.call(Ce,nr,Oe);Ue=o.permute(Ue,Rr),nr=o.permute(nr,Rr);var Dr=_t.call(Ce,nr,Oe),Qr=Ue[0].length,sn,zr,Hr,Kr;for(Hr=0;Hr<Qr;++Hr)for(Kt.call(Ce,Ue[0][Hr],Kr=Dr[Hr],nr[0][Hr][1]),zr=1;zr<sn;++zr)Kt.call(Ce,Ue[zr][Hr],Kr+=nr[zr-1][Hr][1],nr[zr][Hr][1]);return be}return Ce.values=function(be){return arguments.length?(st=be,Ce):st},Ce.order=function(be){return arguments.length?(bt=typeof be=="function"?be:pl.get(be)||Nl,Ce):bt},Ce.offset=function(be){return arguments.length?(_t=typeof be=="function"?be:gu.get(be)||yu,Ce):_t},Ce.x=function(be){return arguments.length?(qt=be,Ce):qt},Ce.y=function(be){return arguments.length?(le=be,Ce):le},Ce.out=function(be){return arguments.length?(Kt=be,Ce):Kt},Ce};function Bu(st){return st.x}function Nu(st){return st.y}function Uu(st,bt,_t){st.y0=bt,st.y=_t}var pl=o.map({"inside-out":function(st){var bt=st.length,_t,Kt,qt=st.map(xi),le=st.map(df),Ce=o.range(bt).sort(function(Rr,Dr){return qt[Rr]-qt[Dr]}),be=0,Oe=0,Ue=[],nr=[];for(_t=0;_t<bt;++_t)Kt=Ce[_t],be<Oe?(be+=le[Kt],Ue.push(Kt)):(Oe+=le[Kt],nr.push(Kt));return nr.reverse().concat(Ue)},reverse:function(st){return o.range(st.length).reverse()},default:Nl}),gu=o.map({silhouette:function(st){var bt=st.length,_t=st[0].length,Kt=[],qt=0,le,Ce,be,Oe=[];for(Ce=0;Ce<_t;++Ce){for(le=0,be=0;le<bt;le++)be+=st[le][Ce][1];be>qt&&(qt=be),Kt.push(be)}for(Ce=0;Ce<_t;++Ce)Oe[Ce]=(qt-Kt[Ce])/2;return Oe},wiggle:function(st){var bt=st.length,_t=st[0],Kt=_t.length,qt,le,Ce,be,Oe,Ue,nr,Rr,Dr,Qr=[];for(Qr[0]=Rr=Dr=0,le=1;le<Kt;++le){for(qt=0,be=0;qt<bt;++qt)be+=st[qt][le][1];for(qt=0,Oe=0,nr=_t[le][0]-_t[le-1][0];qt<bt;++qt){for(Ce=0,Ue=(st[qt][le][1]-st[qt][le-1][1])/(2*nr);Ce<qt;++Ce)Ue+=(st[Ce][le][1]-st[Ce][le-1][1])/nr;Oe+=Ue*st[qt][le][1]}Qr[le]=Rr-=be?Oe/be*nr:0,Rr<Dr&&(Dr=Rr)}for(le=0;le<Kt;++le)Qr[le]-=Dr;return Qr},expand:function(st){var bt=st.length,_t=st[0].length,Kt=1/bt,qt,le,Ce,be=[];for(le=0;le<_t;++le){for(qt=0,Ce=0;qt<bt;qt++)Ce+=st[qt][le][1];if(Ce)for(qt=0;qt<bt;qt++)st[qt][le][1]/=Ce;else for(qt=0;qt<bt;qt++)st[qt][le][1]=Kt}for(le=0;le<_t;++le)be[le]=0;return be},zero:yu});function Nl(st){return o.range(st.length)}function yu(st){for(var bt=-1,_t=st[0].length,Kt=[];++bt<_t;)Kt[bt]=0;return Kt}function xi(st){for(var bt=1,_t=0,Kt=st[0][1],qt,le=st.length;bt<le;++bt)(qt=st[bt][1])>Kt&&(_t=bt,Kt=qt);return _t}function df(st){return st.reduce(Go,0)}function Go(st,bt){return st+bt[1]}o.layout.histogram=function(){var st=!0,bt=Number,_t=Zs,Kt=pf;function qt(le,Dr){for(var be=[],Oe=le.map(bt,this),Ue=_t.call(this,Oe,Dr),nr=Kt.call(this,Ue,Oe,Dr),Rr,Dr=-1,Qr=Oe.length,sn=nr.length-1,zr=st?1:1/Qr,Hr;++Dr<sn;)Rr=be[Dr]=[],Rr.dx=nr[Dr+1]-(Rr.x=nr[Dr]),Rr.y=0;if(sn>0)for(Dr=-1;++Dr<Qr;)Hr=Oe[Dr],Hr>=Ue[0]&&Hr<=Ue[1]&&(Rr=be[o.bisect(nr,Hr,1,sn)-1],Rr.y+=zr,Rr.push(le[Dr]));return be}return qt.value=function(le){return arguments.length?(bt=le,qt):bt},qt.range=function(le){return arguments.length?(_t=Or(le),qt):_t},qt.bins=function(le){return arguments.length?(Kt=typeof le=="number"?function(Ce){return Vu(Ce,le)}:Or(le),qt):Kt},qt.frequency=function(le){return arguments.length?(st=!!le,qt):st},qt};function pf(st,bt){return Vu(st,Math.ceil(Math.log(bt.length)/Math.LN2+1))}function Vu(st,bt){for(var _t=-1,Kt=+st[0],qt=(st[1]-Kt)/bt,le=[];++_t<=bt;)le[_t]=qt*_t+Kt;return le}function Zs(st){return[o.min(st),o.max(st)]}o.layout.pack=function(){var st=o.layout.hierarchy().sort(Rs),bt=0,_t=[1,1],Kt;function qt(le,Ce){var be=st.call(this,le,Ce),Oe=be[0],Ue=_t[0],nr=_t[1],Rr=Kt==null?Math.sqrt:typeof Kt=="function"?Kt:function(){return Kt};if(Oe.x=Oe.y=0,Co(Oe,function(Qr){Qr.r=+Rr(Qr.value)}),Co(Oe,Wo),bt){var Dr=bt*(Kt?1:Math.max(2*Oe.r/Ue,2*Oe.r/nr))/2;Co(Oe,function(Qr){Qr.r+=Dr}),Co(Oe,Wo),Co(Oe,function(Qr){Qr.r-=Dr})}return Ds(Oe,Ue/2,nr/2,Kt?1:1/Math.max(2*Oe.r/Ue,2*Oe.r/nr)),be}return qt.size=function(le){return arguments.length?(_t=le,qt):_t},qt.radius=function(le){return arguments.length?(Kt=le==null||typeof le=="function"?le:+le,qt):Kt},qt.padding=function(le){return arguments.length?(bt=+le,qt):bt},hl(qt,st)};function Rs(st,bt){return st.value-bt.value}function mu(st,bt){var _t=st._pack_next;st._pack_next=bt,bt._pack_prev=st,bt._pack_next=_t,_t._pack_prev=bt}function Bi(st,bt){st._pack_next=bt,bt._pack_prev=st}function Ul(st,bt){var _t=bt.x-st.x,Kt=bt.y-st.y,qt=st.r+bt.r;return .999*qt*qt>_t*_t+Kt*Kt}function Wo(st){if(!(bt=st.children)||!(Dr=bt.length))return;var bt,_t=1/0,Kt=-1/0,qt=1/0,le=-1/0,Ce,be,Oe,Ue,nr,Rr,Dr;function Qr(qr){_t=Math.min(qr.x-qr.r,_t),Kt=Math.max(qr.x+qr.r,Kt),qt=Math.min(qr.y-qr.r,qt),le=Math.max(qr.y+qr.r,le)}if(bt.forEach(xs),Ce=bt[0],Ce.x=-Ce.r,Ce.y=0,Qr(Ce),Dr>1&&(be=bt[1],be.x=be.r,be.y=0,Qr(be),Dr>2))for(Oe=bt[2],Yo(Ce,be,Oe),Qr(Oe),mu(Ce,Oe),Ce._pack_prev=Oe,mu(Oe,be),be=Ce._pack_next,Ue=3;Ue<Dr;Ue++){Yo(Ce,be,Oe=bt[Ue]);var sn=0,zr=1,Hr=1;for(nr=be._pack_next;nr!==be;nr=nr._pack_next,zr++)if(Ul(nr,Oe)){sn=1;break}if(sn==1)for(Rr=Ce._pack_prev;Rr!==nr._pack_prev&&!Ul(Rr,Oe);Rr=Rr._pack_prev,Hr++);sn?(zr<Hr||zr==Hr&&be.r<Ce.r?Bi(Ce,be=nr):Bi(Ce=Rr,be),Ue--):(mu(Ce,Oe),be=Oe,Qr(Oe))}var Kr=(_t+Kt)/2,hn=(qt+le)/2,yn=0;for(Ue=0;Ue<Dr;Ue++)Oe=bt[Ue],Oe.x-=Kr,Oe.y-=hn,yn=Math.max(yn,Oe.r+Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y));st.r=yn,bt.forEach(js)}function xs(st){st._pack_next=st._pack_prev=st}function js(st){delete st._pack_next,delete st._pack_prev}function Ds(st,bt,_t,Kt){var qt=st.children;if(st.x=bt+=Kt*st.x,st.y=_t+=Kt*st.y,st.r*=Kt,qt)for(var le=-1,Ce=qt.length;++le<Ce;)Ds(qt[le],bt,_t,Kt)}function Yo(st,bt,_t){var Kt=st.r+_t.r,qt=bt.x-st.x,le=bt.y-st.y;if(Kt&&(qt||le)){var Ce=bt.r+_t.r,be=qt*qt+le*le;Ce*=Ce,Kt*=Kt;var Oe=.5+(Kt-Ce)/(2*be),Ue=Math.sqrt(Math.max(0,2*Ce*(Kt+be)-(Kt-=be)*Kt-Ce*Ce))/(2*be);_t.x=st.x+Oe*qt+Ue*le,_t.y=st.y+Oe*le-Ue*qt}else _t.x=st.x+Kt,_t.y=st.y}o.layout.tree=function(){var st=o.layout.hierarchy().sort(null).value(null),bt=bs,_t=[1,1],Kt=null;function qt(nr,Rr){var Dr=st.call(this,nr,Rr),Qr=Dr[0],sn=le(Qr);if(Co(sn,Ce),sn.parent.m=-sn.z,vl(sn,be),Kt)vl(Qr,Ue);else{var zr=Qr,Hr=Qr,Kr=Qr;vl(Qr,function(Gn){Gn.x<zr.x&&(zr=Gn),Gn.x>Hr.x&&(Hr=Gn),Gn.depth>Kr.depth&&(Kr=Gn)});var hn=bt(zr,Hr)/2-zr.x,yn=_t[0]/(Hr.x+bt(Hr,zr)/2+hn),qr=_t[1]/(Kr.depth||1);vl(Qr,function(Gn){Gn.x=(Gn.x+hn)*yn,Gn.y=Gn.depth*qr})}return Dr}function le(nr){for(var Rr={A:null,children:[nr]},Dr=[Rr],Qr;(Qr=Dr.pop())!=null;)for(var sn=Qr.children,zr,Hr=0,Kr=sn.length;Hr<Kr;++Hr)Dr.push((sn[Hr]=zr={_:sn[Hr],parent:Qr,children:(zr=sn[Hr].children)&&zr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Hr}).a=zr);return Rr.children[0]}function Ce(nr){var Rr=nr.children,Dr=nr.parent.children,Qr=nr.i?Dr[nr.i-1]:null;if(Rr.length){nc(nr);var sn=(Rr[0].z+Rr[Rr.length-1].z)/2;Qr?(nr.z=Qr.z+bt(nr._,Qr._),nr.m=nr.z-sn):nr.z=sn}else Qr&&(nr.z=Qr.z+bt(nr._,Qr._));nr.parent.A=Oe(nr,Qr,nr.parent.A||Dr[0])}function be(nr){nr._.x=nr.z+nr.parent.m,nr.m+=nr.parent.m}function Oe(nr,Rr,Dr){if(Rr){for(var Qr=nr,sn=nr,zr=Rr,Hr=Qr.parent.children[0],Kr=Qr.m,hn=sn.m,yn=zr.m,qr=Hr.m,Gn;zr=Fo(zr),Qr=Xo(Qr),zr&&Qr;)Hr=Xo(Hr),sn=Fo(sn),sn.a=nr,Gn=zr.z+yn-Qr.z-Kr+bt(zr._,Qr._),Gn>0&&(Vl(ac(zr,nr,Dr),nr,Gn),Kr+=Gn,hn+=Gn),yn+=zr.m,Kr+=Qr.m,qr+=Hr.m,hn+=sn.m;zr&&!Fo(sn)&&(sn.t=zr,sn.m+=yn-hn),Qr&&!Xo(Hr)&&(Hr.t=Qr,Hr.m+=Kr-qr,Dr=nr)}return Dr}function Ue(nr){nr.x*=_t[0],nr.y=nr.depth*_t[1]}return qt.separation=function(nr){return arguments.length?(bt=nr,qt):bt},qt.size=function(nr){return arguments.length?(Kt=(_t=nr)==null?Ue:null,qt):Kt?null:_t},qt.nodeSize=function(nr){return arguments.length?(Kt=(_t=nr)==null?null:Ue,qt):Kt?_t:null},hl(qt,st)};function bs(st,bt){return st.parent==bt.parent?1:2}function Xo(st){var bt=st.children;return bt.length?bt[0]:st.t}function Fo(st){var bt=st.children,_t;return(_t=bt.length)?bt[_t-1]:st.t}function Vl(st,bt,_t){var Kt=_t/(bt.i-st.i);bt.c-=Kt,bt.s+=_t,st.c+=Kt,bt.z+=_t,bt.m+=_t}function nc(st){for(var bt=0,_t=0,Kt=st.children,qt=Kt.length,le;--qt>=0;)le=Kt[qt],le.z+=bt,le.m+=bt,bt+=le.s+(_t+=le.c)}function ac(st,bt,_t){return st.a.parent===bt.parent?st.a:_t}o.layout.cluster=function(){var st=o.layout.hierarchy().sort(null).value(null),bt=bs,_t=[1,1],Kt=!1;function qt(le,Ce){var be=st.call(this,le,Ce),Oe=be[0],Ue,nr=0;Co(Oe,function(zr){var Hr=zr.children;Hr&&Hr.length?(zr.x=oc(Hr),zr.y=ic(Hr)):(zr.x=Ue?nr+=bt(zr,Ue):0,zr.y=0,Ue=zr)});var Rr=Hu(Oe),Dr=gf(Oe),Qr=Rr.x-bt(Rr,Dr)/2,sn=Dr.x+bt(Dr,Rr)/2;return Co(Oe,Kt?function(zr){zr.x=(zr.x-Oe.x)*_t[0],zr.y=(Oe.y-zr.y)*_t[1]}:function(zr){zr.x=(zr.x-Qr)/(sn-Qr)*_t[0],zr.y=(1-(Oe.y?zr.y/Oe.y:1))*_t[1]}),be}return qt.separation=function(le){return arguments.length?(bt=le,qt):bt},qt.size=function(le){return arguments.length?(Kt=(_t=le)==null,qt):Kt?null:_t},qt.nodeSize=function(le){return arguments.length?(Kt=(_t=le)!=null,qt):Kt?_t:null},hl(qt,st)};function ic(st){return 1+o.max(st,function(bt){return bt.y})}function oc(st){return st.reduce(function(bt,_t){return bt+_t.x},0)/st.length}function Hu(st){var bt=st.children;return bt&&bt.length?Hu(bt[0]):st}function gf(st){var bt=st.children,_t;return bt&&(_t=bt.length)?gf(bt[_t-1]):st}o.layout.treemap=function(){var st=o.layout.hierarchy(),bt=Math.round,_t=[1,1],Kt=null,qt=yl,le=!1,Ce,be="squarify",Oe=.5*(1+Math.sqrt(5));function Ue(zr,Hr){for(var Kr=-1,hn=zr.length,yn,qr;++Kr<hn;)qr=(yn=zr[Kr]).value*(Hr<0?0:Hr),yn.area=isNaN(qr)||qr<=0?0:qr}function nr(zr){var Hr=zr.children;if(Hr&&Hr.length){var Kr=qt(zr),hn=[],yn=Hr.slice(),qr,Gn=1/0,aa,va=be==="slice"?Kr.dx:be==="dice"?Kr.dy:be==="slice-dice"?zr.depth&1?Kr.dy:Kr.dx:Math.min(Kr.dx,Kr.dy),ra;for(Ue(yn,Kr.dx*Kr.dy/zr.value),hn.area=0;(ra=yn.length)>0;)hn.push(qr=yn[ra-1]),hn.area+=qr.area,be!=="squarify"||(aa=Dr(hn,va))<=Gn?(yn.pop(),Gn=aa):(hn.area-=hn.pop().area,Qr(hn,va,Kr,!1),va=Math.min(Kr.dx,Kr.dy),hn.length=hn.area=0,Gn=1/0);hn.length&&(Qr(hn,va,Kr,!0),hn.length=hn.area=0),Hr.forEach(nr)}}function Rr(zr){var Hr=zr.children;if(Hr&&Hr.length){var Kr=qt(zr),hn=Hr.slice(),yn,qr=[];for(Ue(hn,Kr.dx*Kr.dy/zr.value),qr.area=0;yn=hn.pop();)qr.push(yn),qr.area+=yn.area,yn.z!=null&&(Qr(qr,yn.z?Kr.dx:Kr.dy,Kr,!hn.length),qr.length=qr.area=0);Hr.forEach(Rr)}}function Dr(zr,Hr){for(var Kr=zr.area,hn,yn=0,qr=1/0,Gn=-1,aa=zr.length;++Gn<aa;)(hn=zr[Gn].area)&&(hn<qr&&(qr=hn),hn>yn&&(yn=hn));return Kr*=Kr,Hr*=Hr,Kr?Math.max(Hr*yn*Oe/Kr,Kr/(Hr*qr*Oe)):1/0}function Qr(zr,Hr,Kr,hn){var yn=-1,qr=zr.length,Gn=Kr.x,aa=Kr.y,va=Hr?bt(zr.area/Hr):0,ra;if(Hr==Kr.dx){for((hn||va>Kr.dy)&&(va=Kr.dy);++yn<qr;)ra=zr[yn],ra.x=Gn,ra.y=aa,ra.dy=va,Gn+=ra.dx=Math.min(Kr.x+Kr.dx-Gn,va?bt(ra.area/va):0);ra.z=!0,ra.dx+=Kr.x+Kr.dx-Gn,Kr.y+=va,Kr.dy-=va}else{for((hn||va>Kr.dx)&&(va=Kr.dx);++yn<qr;)ra=zr[yn],ra.x=Gn,ra.y=aa,ra.dx=va,aa+=ra.dy=Math.min(Kr.y+Kr.dy-aa,va?bt(ra.area/va):0);ra.z=!1,ra.dy+=Kr.y+Kr.dy-aa,Kr.x+=va,Kr.dx-=va}}function sn(zr){var Hr=Ce||st(zr),Kr=Hr[0];return Kr.x=Kr.y=0,Kr.value?(Kr.dx=_t[0],Kr.dy=_t[1]):Kr.dx=Kr.dy=0,Ce&&st.revalue(Kr),Ue([Kr],Kr.dx*Kr.dy/Kr.value),(Ce?Rr:nr)(Kr),le&&(Ce=Hr),Hr}return sn.size=function(zr){return arguments.length?(_t=zr,sn):_t},sn.padding=function(zr){if(!arguments.length)return Kt;function Hr(yn){var qr=zr.call(sn,yn,yn.depth);return qr==null?yl(yn):qi(yn,typeof qr=="number"?[qr,qr,qr,qr]:qr)}function Kr(yn){return qi(yn,zr)}var hn;return qt=(Kt=zr)==null?yl:(hn=typeof zr)=="function"?Hr:(hn==="number"&&(zr=[zr,zr,zr,zr]),Kr),sn},sn.round=function(zr){return arguments.length?(bt=zr?Math.round:Number,sn):bt!=Number},sn.sticky=function(zr){return arguments.length?(le=zr,Ce=null,sn):le},sn.ratio=function(zr){return arguments.length?(Oe=zr,sn):Oe},sn.mode=function(zr){return arguments.length?(be=zr+"",sn):be},hl(sn,st)};function yl(st){return{x:st.x,y:st.y,dx:st.dx,dy:st.dy}}function qi(st,bt){var _t=st.x+bt[3],Kt=st.y+bt[0],qt=st.dx-bt[1]-bt[3],le=st.dy-bt[0]-bt[2];return qt<0&&(_t+=qt/2,qt=0),le<0&&(Kt+=le/2,le=0),{x:_t,y:Kt,dx:qt,dy:le}}o.random={normal:function(st,bt){var _t=arguments.length;return _t<2&&(bt=1),_t<1&&(st=0),function(){var Kt,qt,le;do Kt=Math.random()*2-1,qt=Math.random()*2-1,le=Kt*Kt+qt*qt;while(!le||le>1);return st+bt*Kt*Math.sqrt(-2*Math.log(le)/le)}},logNormal:function(){var st=o.random.normal.apply(o,arguments);return function(){return Math.exp(st())}},bates:function(st){var bt=o.random.irwinHall(st);return function(){return bt()/st}},irwinHall:function(st){return function(){for(var bt=0,_t=0;_t<st;_t++)bt+=Math.random();return bt}}},o.scale={};function zo(st){var bt=st[0],_t=st[st.length-1];return bt<_t?[bt,_t]:[_t,bt]}function ml(st){return st.rangeExtent?st.rangeExtent():zo(st.range())}function yf(st,bt,_t,Kt){var qt=_t(st[0],st[1]),le=Kt(bt[0],bt[1]);return function(Ce){return le(qt(Ce))}}function Hl(st,bt){var _t=0,Kt=st.length-1,qt=st[_t],le=st[Kt],Ce;return le<qt&&(Ce=_t,_t=Kt,Kt=Ce,Ce=qt,qt=le,le=Ce),st[_t]=bt.floor(qt),st[Kt]=bt.ceil(le),st}function ws(st){return st?{floor:function(bt){return Math.floor(bt/st)*st},ceil:function(bt){return Math.ceil(bt/st)*st}}:sc}var sc={floor:B,ceil:B};function mf(st,bt,_t,Kt){var qt=[],le=[],Ce=0,be=Math.min(st.length,bt.length)-1;for(st[be]<st[0]&&(st=st.slice().reverse(),bt=bt.slice().reverse());++Ce<=be;)qt.push(_t(st[Ce-1],st[Ce])),le.push(Kt(bt[Ce-1],bt[Ce]));return function(Oe){var Ue=o.bisect(st,Oe,1,be)-1;return le[Ue](qt[Ue](Oe))}}o.scale.linear=function(){return xf([0,1],[0,1],ao,!1)};function xf(st,bt,_t,Kt){var qt,le;function Ce(){var Oe=Math.min(st.length,bt.length)>2?mf:yf,Ue=Kt?fl:Vo;return qt=Oe(st,bt,Ue,_t),le=Oe(bt,st,Ue,ao),be}function be(Oe){return qt(Oe)}return be.invert=function(Oe){return le(Oe)},be.domain=function(Oe){return arguments.length?(st=Oe.map(Number),Ce()):st},be.range=function(Oe){return arguments.length?(bt=Oe,Ce()):bt},be.rangeRound=function(Oe){return be.range(Oe).interpolate(uf)},be.clamp=function(Oe){return arguments.length?(Kt=Oe,Ce()):Kt},be.interpolate=function(Oe){return arguments.length?(_t=Oe,Ce()):_t},be.ticks=function(Oe){return Zo(st,Oe)},be.tickFormat=function(Oe,Ue){return d3_scale_linearTickFormat(st,Oe,Ue)},be.nice=function(Oe){return bf(st,Oe),Ce()},be.copy=function(){return xf(st,bt,_t,Kt)},Ce()}function Gu(st,bt){return o.rebind(st,bt,"range","rangeRound","interpolate","clamp")}function bf(st,bt){return Hl(st,ws(xo(st,bt)[2])),Hl(st,ws(xo(st,bt)[2])),st}function xo(st,bt){bt==null&&(bt=10);var _t=zo(st),Kt=_t[1]-_t[0],qt=Math.pow(10,Math.floor(Math.log(Kt/bt)/Math.LN10)),le=bt/Kt*qt;return le<=.15?qt*=10:le<=.35?qt*=5:le<=.75&&(qt*=2),_t[0]=Math.ceil(_t[0]/qt)*qt,_t[1]=Math.floor(_t[1]/qt)*qt+qt*.5,_t[2]=qt,_t}function Zo(st,bt){return o.range.apply(o,xo(st,bt))}o.scale.log=function(){return Is(o.scale.linear().domain([0,1]),10,!0,[1,10])};function Is(st,bt,_t,Kt){function qt(be){return(_t?Math.log(be<0?0:be):-Math.log(be>0?0:-be))/Math.log(bt)}function le(be){return _t?Math.pow(bt,be):-Math.pow(bt,-be)}function Ce(be){return st(qt(be))}return Ce.invert=function(be){return le(st.invert(be))},Ce.domain=function(be){return arguments.length?(_t=be[0]>=0,st.domain((Kt=be.map(Number)).map(qt)),Ce):Kt},Ce.base=function(be){return arguments.length?(bt=+be,st.domain(Kt.map(qt)),Ce):bt},Ce.nice=function(){var be=Hl(Kt.map(qt),_t?Math:xl);return st.domain(be),Kt=be.map(le),Ce},Ce.ticks=function(){var be=zo(Kt),Oe=[],Ue=be[0],nr=be[1],Rr=Math.floor(qt(Ue)),Dr=Math.ceil(qt(nr)),Qr=bt%1?2:bt;if(isFinite(Dr-Rr)){if(_t){for(;Rr<Dr;Rr++)for(var sn=1;sn<Qr;sn++)Oe.push(le(Rr)*sn);Oe.push(le(Rr))}else for(Oe.push(le(Rr));Rr++<Dr;)for(var sn=Qr-1;sn>0;sn--)Oe.push(le(Rr)*sn);for(Rr=0;Oe[Rr]<Ue;Rr++);for(Dr=Oe.length;Oe[Dr-1]>nr;Dr--);Oe=Oe.slice(Rr,Dr)}return Oe},Ce.copy=function(){return Is(st.copy(),bt,_t,Kt)},Gu(Ce,st)}var xl={floor:function(st){return-Math.ceil(-st)},ceil:function(st){return-Math.floor(-st)}};o.scale.pow=function(){return xu(o.scale.linear(),1,[0,1])};function xu(st,bt,_t){var Kt=Ks(bt),qt=Ks(1/bt);function le(Ce){return st(Kt(Ce))}return le.invert=function(Ce){return qt(st.invert(Ce))},le.domain=function(Ce){return arguments.length?(st.domain((_t=Ce.map(Number)).map(Kt)),le):_t},le.ticks=function(Ce){return Zo(_t,Ce)},le.tickFormat=function(Ce,be){return d3_scale_linearTickFormat(_t,Ce,be)},le.nice=function(Ce){return le.domain(bf(_t,Ce))},le.exponent=function(Ce){return arguments.length?(Kt=Ks(bt=Ce),qt=Ks(1/bt),st.domain(_t.map(Kt)),le):bt},le.copy=function(){return xu(st.copy(),bt,_t)},Gu(le,st)}function Ks(st){return function(bt){return bt<0?-Math.pow(-bt,st):Math.pow(bt,st)}}o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return Js([],{t:"range",a:[[]]})};function Js(st,bt){var _t,Kt,qt;function le(be){return Kt[((_t.get(be)||(bt.t==="range"?_t.set(be,st.push(be)):NaN))-1)%Kt.length]}function Ce(be,Oe){return o.range(st.length).map(function(Ue){return be+Oe*Ue})}return le.domain=function(be){if(!arguments.length)return st;st=[],_t=new C;for(var Oe=-1,Ue=be.length,nr;++Oe<Ue;)_t.has(nr=be[Oe])||_t.set(nr,st.push(nr));return le[bt.t].apply(le,bt.a)},le.range=function(be){return arguments.length?(Kt=be,qt=0,bt={t:"range",a:arguments},le):Kt},le.rangePoints=function(be,Oe){arguments.length<2&&(Oe=0);var Ue=be[0],nr=be[1],Rr=st.length<2?(Ue=(Ue+nr)/2,0):(nr-Ue)/(st.length-1+Oe);return Kt=Ce(Ue+Rr*Oe/2,Rr),qt=0,bt={t:"rangePoints",a:arguments},le},le.rangeRoundPoints=function(be,Oe){arguments.length<2&&(Oe=0);var Ue=be[0],nr=be[1],Rr=st.length<2?(Ue=nr=Math.round((Ue+nr)/2),0):(nr-Ue)/(st.length-1+Oe)|0;return Kt=Ce(Ue+Math.round(Rr*Oe/2+(nr-Ue-(st.length-1+Oe)*Rr)/2),Rr),qt=0,bt={t:"rangeRoundPoints",a:arguments},le},le.rangeBands=function(be,Oe,Ue){arguments.length<2&&(Oe=0),arguments.length<3&&(Ue=Oe);var nr=be[1]<be[0],Rr=be[nr-0],Dr=be[1-nr],Qr=(Dr-Rr)/(st.length-Oe+2*Ue);return Kt=Ce(Rr+Qr*Ue,Qr),nr&&Kt.reverse(),qt=Qr*(1-Oe),bt={t:"rangeBands",a:arguments},le},le.rangeRoundBands=function(be,Oe,Ue){arguments.length<2&&(Oe=0),arguments.length<3&&(Ue=Oe);var nr=be[1]<be[0],Rr=be[nr-0],Dr=be[1-nr],Qr=Math.floor((Dr-Rr)/(st.length-Oe+2*Ue));return Kt=Ce(Rr+Math.round((Dr-Rr-(st.length-Oe)*Qr)/2),Qr),nr&&Kt.reverse(),qt=Math.round(Qr*(1-Oe)),bt={t:"rangeRoundBands",a:arguments},le},le.rangeBand=function(){return qt},le.rangeExtent=function(){return zo(bt.a[0])},le.copy=function(){return Js(st,bt)},le.domain(st)}o.scale.category10=function(){return o.scale.ordinal().range(wf)},o.scale.category20=function(){return o.scale.ordinal().range(Ts)},o.scale.category20b=function(){return o.scale.ordinal().range(bl)},o.scale.category20c=function(){return o.scale.ordinal().range(ks)};var wf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ee),Ts=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ee),bl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ee),ks=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ee);o.scale.quantile=function(){return As([],[])};function As(st,bt){var _t;function Kt(){var le=0,Ce=bt.length;for(_t=[];++le<Ce;)_t[le-1]=o.quantile(st,le/Ce);return qt}function qt(le){if(!isNaN(le=+le))return bt[o.bisect(_t,le)]}return qt.domain=function(le){return arguments.length?(st=le.map(g).filter(h).sort(u),Kt()):st},qt.range=function(le){return arguments.length?(bt=le,Kt()):bt},qt.quantiles=function(){return _t},qt.invertExtent=function(le){return le=bt.indexOf(le),le<0?[NaN,NaN]:[le>0?_t[le-1]:st[0],le<_t.length?_t[le]:st[st.length-1]]},qt.copy=function(){return As(st,bt)},Kt()}o.scale.quantize=function(){return Gl(0,1,[0,1])};function Gl(st,bt,_t){var Kt,qt;function le(be){return _t[Math.max(0,Math.min(qt,Math.floor(Kt*(be-st))))]}function Ce(){return Kt=_t.length/(bt-st),qt=_t.length-1,le}return le.domain=function(be){return arguments.length?(st=+be[0],bt=+be[be.length-1],Ce()):[st,bt]},le.range=function(be){return arguments.length?(_t=be,Ce()):_t},le.invertExtent=function(be){return be=_t.indexOf(be),be=be<0?NaN:be/Kt+st,[be,be+1/Kt]},le.copy=function(){return Gl(st,bt,_t)},Ce()}o.scale.threshold=function(){return wl([.5],[0,1])};function wl(st,bt){function _t(Kt){if(Kt<=Kt)return bt[o.bisect(st,Kt)]}return _t.domain=function(Kt){return arguments.length?(st=Kt,_t):st},_t.range=function(Kt){return arguments.length?(bt=Kt,_t):bt},_t.invertExtent=function(Kt){return Kt=bt.indexOf(Kt),[st[Kt-1],st[Kt]]},_t.copy=function(){return wl(st,bt)},_t}o.scale.identity=function(){return di([0,1])};function di(st){function bt(_t){return+_t}return bt.invert=bt,bt.domain=bt.range=function(_t){return arguments.length?(st=_t.map(bt),bt):st},bt.ticks=function(_t){return Zo(st,_t)},bt.tickFormat=function(_t,Kt){return d3_scale_linearTickFormat(st,_t,Kt)},bt.copy=function(){return di(st)},bt}o.svg={};function Tl(){return 0}o.svg.arc=function(){var st=Tf,bt=Al,_t=Tl,Kt=bu,qt=Wl,le=wu,Ce=Wu;function be(){var Ue=Math.max(0,+st.apply(this,arguments)),nr=Math.max(0,+bt.apply(this,arguments)),Rr=qt.apply(this,arguments)-Ut,Dr=le.apply(this,arguments)-Ut,Qr=Math.abs(Dr-Rr),sn=Rr>Dr?0:1;if(nr<Ue&&(zr=nr,nr=Ue,Ue=zr),Qr>=Dt)return Oe(nr,sn)+(Ue?Oe(Ue,1-sn):"")+"Z";var zr,Hr,Kr,hn,yn=0,qr=0,Gn,aa,va,ra,fa,da,Na,Ea,_a=[];if((hn=(+Ce.apply(this,arguments)||0)/2)&&(Kr=Kt===bu?Math.sqrt(Ue*Ue+nr*nr):+Kt.apply(this,arguments),sn||(qr*=-1),nr&&(qr=We(Kr/nr*Math.sin(hn))),Ue&&(yn=We(Kr/Ue*Math.sin(hn)))),nr){Gn=nr*Math.cos(Rr+qr),aa=nr*Math.sin(Rr+qr),va=nr*Math.cos(Dr-qr),ra=nr*Math.sin(Dr-qr);var oi=Math.abs(Dr-Rr-2*qr)<=ft?0:1;if(qr&&Yl(Gn,aa,va,ra)===sn^oi){var Vi=(Rr+Dr)/2;Gn=nr*Math.cos(Vi),aa=nr*Math.sin(Vi),va=ra=null}}else Gn=aa=0;if(Ue){fa=Ue*Math.cos(Dr-yn),da=Ue*Math.sin(Dr-yn),Na=Ue*Math.cos(Rr+yn),Ea=Ue*Math.sin(Rr+yn);var hi=Math.abs(Rr-Dr+2*yn)<=ft?0:1;if(yn&&Yl(fa,da,Na,Ea)===1-sn^hi){var ea=(Rr+Dr)/2;fa=Ue*Math.cos(ea),da=Ue*Math.sin(ea),Na=Ea=null}}else fa=da=0;if(Qr>Ft&&(zr=Math.min(Math.abs(nr-Ue)/2,+_t.apply(this,arguments)))>.001){Hr=Ue<nr^sn?0:1;var Ha=zr,Ma=zr;if(Qr<ft){var Ja=Na==null?[fa,da]:va==null?[Gn,aa]:ln([Gn,aa],[Na,Ea],[va,ra],[fa,da]),Mi=Gn-Ja[0],si=aa-Ja[1],to=va-Ja[0],eo=ra-Ja[1],io=1/Math.sin(Math.acos((Mi*to+si*eo)/(Math.sqrt(Mi*Mi+si*si)*Math.sqrt(to*to+eo*eo)))/2),Si=Math.sqrt(Ja[0]*Ja[0]+Ja[1]*Ja[1]);Ma=Math.min(zr,(Ue-Si)/(io-1)),Ha=Math.min(zr,(nr-Si)/(io+1))}if(va!=null){var po=Xl(Na==null?[fa,da]:[Na,Ea],[Gn,aa],nr,Ha,sn),ca=Xl([va,ra],[fa,da],nr,Ha,sn);zr===Ha?_a.push("M",po[0],"A",Ha,",",Ha," 0 0,",Hr," ",po[1],"A",nr,",",nr," 0 ",1-sn^Yl(po[1][0],po[1][1],ca[1][0],ca[1][1]),",",sn," ",ca[1],"A",Ha,",",Ha," 0 0,",Hr," ",ca[0]):_a.push("M",po[0],"A",Ha,",",Ha," 0 1,",Hr," ",ca[0])}else _a.push("M",Gn,",",aa);if(Na!=null){var La=Xl([Gn,aa],[Na,Ea],Ue,-Ma,sn),Po=Xl([fa,da],va==null?[Gn,aa]:[va,ra],Ue,-Ma,sn);zr===Ma?_a.push("L",Po[0],"A",Ma,",",Ma," 0 0,",Hr," ",Po[1],"A",Ue,",",Ue," 0 ",sn^Yl(Po[1][0],Po[1][1],La[1][0],La[1][1]),",",1-sn," ",La[1],"A",Ma,",",Ma," 0 0,",Hr," ",La[0]):_a.push("L",Po[0],"A",Ma,",",Ma," 0 0,",Hr," ",La[0])}else _a.push("L",fa,",",da)}else _a.push("M",Gn,",",aa),va!=null&&_a.push("A",nr,",",nr," 0 ",oi,",",sn," ",va,",",ra),_a.push("L",fa,",",da),Na!=null&&_a.push("A",Ue,",",Ue," 0 ",hi,",",1-sn," ",Na,",",Ea);return _a.push("Z"),_a.join("")}function Oe(Ue,nr){return"M0,"+Ue+"A"+Ue+","+Ue+" 0 1,"+nr+" 0,"+-Ue+"A"+Ue+","+Ue+" 0 1,"+nr+" 0,"+Ue}return be.innerRadius=function(Ue){return arguments.length?(st=Or(Ue),be):st},be.outerRadius=function(Ue){return arguments.length?(bt=Or(Ue),be):bt},be.cornerRadius=function(Ue){return arguments.length?(_t=Or(Ue),be):_t},be.padRadius=function(Ue){return arguments.length?(Kt=Ue==bu?bu:Or(Ue),be):Kt},be.startAngle=function(Ue){return arguments.length?(qt=Or(Ue),be):qt},be.endAngle=function(Ue){return arguments.length?(le=Or(Ue),be):le},be.padAngle=function(Ue){return arguments.length?(Ce=Or(Ue),be):Ce},be.centroid=function(){var Ue=(+st.apply(this,arguments)+ +bt.apply(this,arguments))/2,nr=(+qt.apply(this,arguments)+ +le.apply(this,arguments))/2-Ut;return[Math.cos(nr)*Ue,Math.sin(nr)*Ue]},be};var bu="auto";function Tf(st){return st.innerRadius}function Al(st){return st.outerRadius}function Wl(st){return st.startAngle}function wu(st){return st.endAngle}function Wu(st){return st&&st.padAngle}function Yl(st,bt,_t,Kt){return(st-_t)*bt-(bt-Kt)*st>0?0:1}function Xl(st,bt,_t,Kt,qt){var le=st[0]-bt[0],Ce=st[1]-bt[1],be=(qt?Kt:-Kt)/Math.sqrt(le*le+Ce*Ce),Oe=be*Ce,Ue=-be*le,nr=st[0]+Oe,Rr=st[1]+Ue,Dr=bt[0]+Oe,Qr=bt[1]+Ue,sn=(nr+Dr)/2,zr=(Rr+Qr)/2,Hr=Dr-nr,Kr=Qr-Rr,hn=Hr*Hr+Kr*Kr,yn=_t-Kt,qr=nr*Qr-Dr*Rr,Gn=(Kr<0?-1:1)*Math.sqrt(Math.max(0,yn*yn*hn-qr*qr)),aa=(qr*Kr-Hr*Gn)/hn,va=(-qr*Hr-Kr*Gn)/hn,ra=(qr*Kr+Hr*Gn)/hn,fa=(-qr*Hr+Kr*Gn)/hn,da=aa-sn,Na=va-zr,Ea=ra-sn,_a=fa-zr;return da*da+Na*Na>Ea*Ea+_a*_a&&(aa=ra,va=fa),[[aa-Oe,va-Ue],[aa*_t/yn,va*_t/yn]]}function zs(){return!0}function Zl(st){var bt=la,_t=ia,Kt=zs,qt=Zi,le=qt.key,Ce=.7;function be(Oe){var Ue=[],nr=[],Rr=-1,Dr=Oe.length,Qr,sn=Or(bt),zr=Or(_t);function Hr(){Ue.push("M",qt(st(nr),Ce))}for(;++Rr<Dr;)Kt.call(this,Qr=Oe[Rr],Rr)?nr.push([+sn.call(this,Qr,Rr),+zr.call(this,Qr,Rr)]):nr.length&&(Hr(),nr=[]);return nr.length&&Hr(),Ue.length?Ue.join(""):null}return be.x=function(Oe){return arguments.length?(bt=Oe,be):bt},be.y=function(Oe){return arguments.length?(_t=Oe,be):_t},be.defined=function(Oe){return arguments.length?(Kt=Oe,be):Kt},be.interpolate=function(Oe){return arguments.length?(typeof Oe=="function"?le=qt=Oe:le=(qt=_s.get(Oe)||Zi).key,be):le},be.tension=function(Oe){return arguments.length?(Ce=Oe,be):Ce},be}o.svg.line=function(){return Zl(B)};var _s=o.map({linear:Zi,"linear-closed":ss,step:Yu,"step-before":Qs,"step-after":Tu,basis:Ml,"basis-open":Mf,"basis-closed":Fs,bundle:uc,cardinal:Af,"cardinal-open":jl,"cardinal-closed":lc,monotone:Mu});_s.forEach(function(st,bt){bt.key=st,bt.closed=/-closed$/.test(st)});function Zi(st){return st.length>1?st.join("L"):st+"Z"}function ss(st){return st.join("L")+"Z"}function Yu(st){for(var bt=0,_t=st.length,Kt=st[0],qt=[Kt[0],",",Kt[1]];++bt<_t;)qt.push("H",(Kt[0]+(Kt=st[bt])[0])/2,"V",Kt[1]);return _t>1&&qt.push("H",Kt[0]),qt.join("")}function Qs(st){for(var bt=0,_t=st.length,Kt=st[0],qt=[Kt[0],",",Kt[1]];++bt<_t;)qt.push("V",(Kt=st[bt])[1],"H",Kt[0]);return qt.join("")}function Tu(st){for(var bt=0,_t=st.length,Kt=st[0],qt=[Kt[0],",",Kt[1]];++bt<_t;)qt.push("H",(Kt=st[bt])[0],"V",Kt[1]);return qt.join("")}function jl(st,bt){return st.length<4?Zi(st):st[1]+vo(st.slice(1,-1),Kl(st,bt))}function lc(st,bt){return st.length<3?ss(st):st[0]+vo((st.push(st[0]),st),Kl([st[st.length-2]].concat(st,[st[1]]),bt))}function Af(st,bt){return st.length<3?Zi(st):st[0]+vo(st,Kl(st,bt))}function vo(st,bt){if(bt.length<1||st.length!=bt.length&&st.length!=bt.length+2)return Zi(st);var _t=st.length!=bt.length,Kt="",qt=st[0],le=st[1],Ce=bt[0],be=Ce,Oe=1;if(_t&&(Kt+="Q"+(le[0]-Ce[0]*2/3)+","+(le[1]-Ce[1]*2/3)+","+le[0]+","+le[1],qt=st[1],Oe=2),bt.length>1){be=bt[1],le=st[Oe],Oe++,Kt+="C"+(qt[0]+Ce[0])+","+(qt[1]+Ce[1])+","+(le[0]-be[0])+","+(le[1]-be[1])+","+le[0]+","+le[1];for(var Ue=2;Ue<bt.length;Ue++,Oe++)le=st[Oe],be=bt[Ue],Kt+="S"+(le[0]-be[0])+","+(le[1]-be[1])+","+le[0]+","+le[1]}if(_t){var nr=st[Oe];Kt+="Q"+(le[0]+be[0]*2/3)+","+(le[1]+be[1]*2/3)+","+nr[0]+","+nr[1]}return Kt}function Kl(st,bt){for(var _t=[],Kt=(1-bt)/2,qt,le=st[0],Ce=st[1],be=1,Oe=st.length;++be<Oe;)qt=le,le=Ce,Ce=st[be],_t.push([Kt*(Ce[0]-qt[0]),Kt*(Ce[1]-qt[1])]);return _t}function Ml(st){if(st.length<3)return Zi(st);var bt=1,_t=st.length,Kt=st[0],qt=Kt[0],le=Kt[1],Ce=[qt,qt,qt,(Kt=st[1])[0]],be=[le,le,le,Kt[1]],Oe=[qt,",",le,"L",Lo(Ms,Ce),",",Lo(Ms,be)];for(st.push(st[_t-1]);++bt<=_t;)Kt=st[bt],Ce.shift(),Ce.push(Kt[0]),be.shift(),be.push(Kt[1]),Os(Oe,Ce,be);return st.pop(),Oe.push("L",Kt),Oe.join("")}function Mf(st){if(st.length<4)return Zi(st);for(var bt=[],_t=-1,Kt=st.length,qt,le=[0],Ce=[0];++_t<3;)qt=st[_t],le.push(qt[0]),Ce.push(qt[1]);for(bt.push(Lo(Ms,le)+","+Lo(Ms,Ce)),--_t;++_t<Kt;)qt=st[_t],le.shift(),le.push(qt[0]),Ce.shift(),Ce.push(qt[1]),Os(bt,le,Ce);return bt.join("")}function Fs(st){for(var bt,_t=-1,Kt=st.length,qt=Kt+4,le,Ce=[],be=[];++_t<4;)le=st[_t%Kt],Ce.push(le[0]),be.push(le[1]);for(bt=[Lo(Ms,Ce),",",Lo(Ms,be)],--_t;++_t<qt;)le=st[_t%Kt],Ce.shift(),Ce.push(le[0]),be.shift(),be.push(le[1]),Os(bt,Ce,be);return bt.join("")}function uc(st,bt){var _t=st.length-1;if(_t)for(var Kt=st[0][0],qt=st[0][1],le=st[_t][0]-Kt,Ce=st[_t][1]-qt,be=-1,Oe,Ue;++be<=_t;)Oe=st[be],Ue=be/_t,Oe[0]=bt*Oe[0]+(1-bt)*(Kt+Ue*le),Oe[1]=bt*Oe[1]+(1-bt)*(qt+Ue*Ce);return Ml(st)}function Lo(st,bt){return st[0]*bt[0]+st[1]*bt[1]+st[2]*bt[2]+st[3]*bt[3]}var Jl=[0,2/3,1/3,0],Au=[0,1/3,2/3,0],Ms=[0,1/6,2/3,1/6];function Os(st,bt,_t){st.push("C",Lo(Jl,bt),",",Lo(Jl,_t),",",Lo(Au,bt),",",Lo(Au,_t),",",Lo(Ms,bt),",",Lo(Ms,_t))}function Xu(st,bt){return(bt[1]-st[1])/(bt[0]-st[0])}function Ql(st){for(var bt=0,_t=st.length-1,Kt=[],qt=st[0],le=st[1],Ce=Kt[0]=Xu(qt,le);++bt<_t;)Kt[bt]=(Ce+(Ce=Xu(qt=le,le=st[bt+1])))/2;return Kt[bt]=Ce,Kt}function $l(st){for(var bt=[],_t,Kt,qt,le,Ce=Ql(st),be=-1,Oe=st.length-1;++be<Oe;)_t=Xu(st[be],st[be+1]),d(_t)<Ft?Ce[be]=Ce[be+1]=0:(Kt=Ce[be]/_t,qt=Ce[be+1]/_t,le=Kt*Kt+qt*qt,le>9&&(le=_t*3/Math.sqrt(le),Ce[be]=le*Kt,Ce[be+1]=le*qt));for(be=-1;++be<=Oe;)le=(st[Math.min(Oe,be+1)][0]-st[Math.max(0,be-1)][0])/(6*(1+Ce[be]*Ce[be])),bt.push([le||0,Ce[be]*le||0]);return bt}function Mu(st){return st.length<3?Zi(st):st[0]+vo(st,$l(st))}o.svg.line.radial=function(){var st=Zl(Sf);return st.radius=st.x,delete st.x,st.angle=st.y,delete st.y,st};function Sf(st){for(var bt,_t=-1,Kt=st.length,qt,le;++_t<Kt;)bt=st[_t],qt=bt[0],le=bt[1]-Ut,bt[0]=qt*Math.cos(le),bt[1]=qt*Math.sin(le);return st}function ql(st){var bt=la,_t=la,Kt=0,qt=ia,le=zs,Ce=Zi,be=Ce.key,Oe=Ce,Ue="L",nr=.7;function Rr(Dr){var Qr=[],sn=[],zr=[],Hr=-1,Kr=Dr.length,hn,yn=Or(bt),qr=Or(Kt),Gn=bt===_t?function(){return va}:Or(_t),aa=Kt===qt?function(){return ra}:Or(qt),va,ra;function fa(){Qr.push("M",Ce(st(zr),nr),Ue,Oe(st(sn.reverse()),nr),"Z")}for(;++Hr<Kr;)le.call(this,hn=Dr[Hr],Hr)?(sn.push([va=+yn.call(this,hn,Hr),ra=+qr.call(this,hn,Hr)]),zr.push([+Gn.call(this,hn,Hr),+aa.call(this,hn,Hr)])):sn.length&&(fa(),sn=[],zr=[]);return sn.length&&fa(),Qr.length?Qr.join(""):null}return Rr.x=function(Dr){return arguments.length?(bt=_t=Dr,Rr):_t},Rr.x0=function(Dr){return arguments.length?(bt=Dr,Rr):bt},Rr.x1=function(Dr){return arguments.length?(_t=Dr,Rr):_t},Rr.y=function(Dr){return arguments.length?(Kt=qt=Dr,Rr):qt},Rr.y0=function(Dr){return arguments.length?(Kt=Dr,Rr):Kt},Rr.y1=function(Dr){return arguments.length?(qt=Dr,Rr):qt},Rr.defined=function(Dr){return arguments.length?(le=Dr,Rr):le},Rr.interpolate=function(Dr){return arguments.length?(typeof Dr=="function"?be=Ce=Dr:be=(Ce=_s.get(Dr)||Zi).key,Oe=Ce.reverse||Ce,Ue=Ce.closed?"M":"L",Rr):be},Rr.tension=function(Dr){return arguments.length?(nr=Dr,Rr):nr},Rr}Qs.reverse=Tu,Tu.reverse=Qs,o.svg.area=function(){return ql(B)},o.svg.area.radial=function(){var st=ql(Sf);return st.radius=st.x,delete st.x,st.innerRadius=st.x0,delete st.x0,st.outerRadius=st.x1,delete st.x1,st.angle=st.y,delete st.y,st.startAngle=st.y0,delete st.y0,st.endAngle=st.y1,delete st.y1,st};function Zu(st){return st.source}function $s(st){return st.target}o.svg.chord=function(){var st=Zu,bt=$s,_t=ju,Kt=Wl,qt=wu;function le(nr,Rr){var Dr=Ce(this,st,nr,Rr),Qr=Ce(this,bt,nr,Rr);return"M"+Dr.p0+Oe(Dr.r,Dr.p1,Dr.a1-Dr.a0)+(be(Dr,Qr)?Ue(Dr.r,Dr.p1,Dr.r,Dr.p0):Ue(Dr.r,Dr.p1,Qr.r,Qr.p0)+Oe(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Ue(Qr.r,Qr.p1,Dr.r,Dr.p0))+"Z"}function Ce(nr,Rr,Dr,Qr){var sn=Rr.call(nr,Dr,Qr),zr=_t.call(nr,sn,Qr),Hr=Kt.call(nr,sn,Qr)-Ut,Kr=qt.call(nr,sn,Qr)-Ut;return{r:zr,a0:Hr,a1:Kr,p0:[zr*Math.cos(Hr),zr*Math.sin(Hr)],p1:[zr*Math.cos(Kr),zr*Math.sin(Kr)]}}function be(nr,Rr){return nr.a0==Rr.a0&&nr.a1==Rr.a1}function Oe(nr,Rr,Dr){return"A"+nr+","+nr+" 0 "+ +(Dr>ft)+",1 "+Rr}function Ue(nr,Rr,Dr,Qr){return"Q 0,0 "+Qr}return le.radius=function(nr){return arguments.length?(_t=Or(nr),le):_t},le.source=function(nr){return arguments.length?(st=Or(nr),le):st},le.target=function(nr){return arguments.length?(bt=Or(nr),le):bt},le.startAngle=function(nr){return arguments.length?(Kt=Or(nr),le):Kt},le.endAngle=function(nr){return arguments.length?(qt=Or(nr),le):qt},le};function ju(st){return st.radius}o.svg.diagonal=function(){var st=Zu,bt=$s,_t=tu;function Kt(qt,le){var Ce=st.call(this,qt,le),be=bt.call(this,qt,le),Oe=(Ce.y+be.y)/2,Ue=[Ce,{x:Ce.x,y:Oe},{x:be.x,y:Oe},be];return Ue=Ue.map(_t),"M"+Ue[0]+"C"+Ue[1]+" "+Ue[2]+" "+Ue[3]}return Kt.source=function(qt){return arguments.length?(st=Or(qt),Kt):st},Kt.target=function(qt){return arguments.length?(bt=Or(qt),Kt):bt},Kt.projection=function(qt){return arguments.length?(_t=qt,Kt):_t},Kt};function tu(st){return[st.x,st.y]}o.svg.diagonal.radial=function(){var st=o.svg.diagonal(),bt=tu,_t=st.projection;return st.projection=function(Kt){return arguments.length?_t(Ef(bt=Kt)):bt},st};function Ef(st){return function(){var bt=st.apply(this,arguments),_t=bt[0],Kt=bt[1]-Ut;return[_t*Math.cos(Kt),_t*Math.sin(Kt)]}}o.svg.symbol=function(){var st=ee,bt=Xt;function _t(Kt,qt){return(ye.get(st.call(this,Kt,qt))||de)(bt.call(this,Kt,qt))}return _t.type=function(Kt){return arguments.length?(st=Or(Kt),_t):st},_t.size=function(Kt){return arguments.length?(bt=Or(Kt),_t):bt},_t};function Xt(){return 64}function ee(){return"circle"}function de(st){var bt=Math.sqrt(st/ft);return"M0,"+bt+"A"+bt+","+bt+" 0 1,1 0,"+-bt+"A"+bt+","+bt+" 0 1,1 0,"+bt+"Z"}var ye=o.map({circle:de,cross:function(st){var bt=Math.sqrt(st/5)/2;return"M"+-3*bt+","+-bt+"H"+-bt+"V"+-3*bt+"H"+bt+"V"+-bt+"H"+3*bt+"V"+bt+"H"+bt+"V"+3*bt+"H"+-bt+"V"+bt+"H"+-3*bt+"Z"},diamond:function(st){var bt=Math.sqrt(st/(2*Pe)),_t=bt*Pe;return"M0,"+-bt+"L"+_t+",0 0,"+bt+" "+-_t+",0Z"},square:function(st){var bt=Math.sqrt(st)/2;return"M"+-bt+","+-bt+"L"+bt+","+-bt+" "+bt+","+bt+" "+-bt+","+bt+"Z"},"triangle-down":function(st){var bt=Math.sqrt(st/De),_t=bt*De/2;return"M0,"+_t+"L"+bt+","+-_t+" "+-bt+","+-_t+"Z"},"triangle-up":function(st){var bt=Math.sqrt(st/De),_t=bt*De/2;return"M0,"+-_t+"L"+bt+","+_t+" "+-bt+","+_t+"Z"}});o.svg.symbolTypes=ye.keys();var De=Math.sqrt(3),Pe=Math.tan(30*$t);H.transition=function(st){for(var bt=_r||++Sr,_t=Pn(st),Kt=[],qt,le,Ce=Vr||{time:Date.now(),ease:zu,delay:0,duration:250},be=-1,Oe=this.length;++be<Oe;){Kt.push(qt=[]);for(var Ue=this[be],nr=-1,Rr=Ue.length;++nr<Rr;)(le=Ue[nr])&&In(le,nr,_t,bt,Ce),qt.push(le)}return wr(Kt,_t,bt)},H.interrupt=function(st){return this.each(st==null?Ie:pr(Pn(st)))};var Ie=pr(Pn());function pr(st){return function(){var bt,_t,Kt;(bt=this[st])&&(Kt=bt[_t=bt.active])&&(Kt.timer.c=null,Kt.timer.t=NaN,--bt.count?delete bt[_t]:delete this[st],bt.active+=.5,Kt.event&&Kt.event.interrupt.call(this,this.__data__,Kt.index))}}function wr(st,bt,_t){return Q(st,sr),st.namespace=bt,st.id=_t,st}var sr=[],Sr=0,_r,Vr;sr.call=H.call,sr.empty=H.empty,sr.node=H.node,sr.size=H.size,o.transition=function(st,bt){return st&&st.transition?_r?st.transition(bt):st:o.selection().transition(st)},o.transition.prototype=sr,sr.select=function(st){var bt=this.id,_t=this.namespace,Kt=[],qt,le,Ce;st=at(st);for(var be=-1,Oe=this.length;++be<Oe;){Kt.push(qt=[]);for(var Ue=this[be],nr=-1,Rr=Ue.length;++nr<Rr;)(Ce=Ue[nr])&&(le=st.call(Ce,Ce.__data__,nr,be))?("__data__"in Ce&&(le.__data__=Ce.__data__),In(le,nr,_t,bt,Ce[_t][bt]),qt.push(le)):qt.push(null)}return wr(Kt,_t,bt)},sr.selectAll=function(st){var bt=this.id,_t=this.namespace,Kt=[],qt,le,Ce,be,Oe;st=tt(st);for(var Ue=-1,nr=this.length;++Ue<nr;)for(var Rr=this[Ue],Dr=-1,Qr=Rr.length;++Dr<Qr;)if(Ce=Rr[Dr]){Oe=Ce[_t][bt],le=st.call(Ce,Ce.__data__,Dr,Ue),Kt.push(qt=[]);for(var sn=-1,zr=le.length;++sn<zr;)(be=le[sn])&&In(be,sn,_t,bt,Oe),qt.push(be)}return wr(Kt,_t,bt)},sr.filter=function(st){var bt=[],_t,Kt,qt;typeof st!="function"&&(st=Gt(st));for(var le=0,Ce=this.length;le<Ce;le++){bt.push(_t=[]);for(var Kt=this[le],be=0,Oe=Kt.length;be<Oe;be++)(qt=Kt[be])&&st.call(qt,qt.__data__,be,le)&&_t.push(qt)}return wr(bt,this.namespace,this.id)},sr.tween=function(st,bt){var _t=this.id,Kt=this.namespace;return arguments.length<2?this.node()[Kt][_t].tween.get(st):Wt(this,bt==null?function(qt){qt[Kt][_t].tween.remove(st)}:function(qt){qt[Kt][_t].tween.set(st,bt)})};function rn(st,bt,_t,Kt){var qt=st.id,le=st.namespace;return Wt(st,typeof _t=="function"?function(Ce,be,Oe){Ce[le][qt].tween.set(bt,Kt(_t.call(Ce,Ce.__data__,be,Oe)))}:(_t=Kt(_t),function(Ce){Ce[le][qt].tween.set(bt,_t)}))}sr.attr=function(st,bt){if(arguments.length<2){for(bt in st)this.attr(bt,st[bt]);return this}var _t=st=="transform"?hu:ao,Kt=o.ns.qualify(st);function qt(){this.removeAttribute(Kt)}function le(){this.removeAttributeNS(Kt.space,Kt.local)}function Ce(Oe){return Oe==null?qt:(Oe+="",function(){var Ue=this.getAttribute(Kt),nr;return Ue!==Oe&&(nr=_t(Ue,Oe),function(Rr){this.setAttribute(Kt,nr(Rr))})})}function be(Oe){return Oe==null?le:(Oe+="",function(){var Ue=this.getAttributeNS(Kt.space,Kt.local),nr;return Ue!==Oe&&(nr=_t(Ue,Oe),function(Rr){this.setAttributeNS(Kt.space,Kt.local,nr(Rr))})})}return rn(this,"attr."+st,bt,Kt.local?be:Ce)},sr.attrTween=function(st,bt){var _t=o.ns.qualify(st);function Kt(le,Ce){var be=bt.call(this,le,Ce,this.getAttribute(_t));return be&&function(Oe){this.setAttribute(_t,be(Oe))}}function qt(le,Ce){var be=bt.call(this,le,Ce,this.getAttributeNS(_t.space,_t.local));return be&&function(Oe){this.setAttributeNS(_t.space,_t.local,be(Oe))}}return this.tween("attr."+st,_t.local?qt:Kt)},sr.style=function(st,bt,_t){var Kt=arguments.length;if(Kt<3){if(typeof st!="string"){Kt<2&&(bt="");for(_t in st)this.style(_t,st[_t],bt);return this}_t=""}function qt(){this.style.removeProperty(st)}function le(Ce){return Ce==null?qt:(Ce+="",function(){var be=r(this).getComputedStyle(this,null).getPropertyValue(st),Oe;return be!==Ce&&(Oe=ao(be,Ce),function(Ue){this.style.setProperty(st,Oe(Ue),_t)})})}return rn(this,"style."+st,bt,le)},sr.styleTween=function(st,bt,_t){arguments.length<3&&(_t="");function Kt(qt,le){var Ce=bt.call(this,qt,le,r(this).getComputedStyle(this,null).getPropertyValue(st));return Ce&&function(be){this.style.setProperty(st,Ce(be),_t)}}return this.tween("style."+st,Kt)},sr.text=function(st){return rn(this,"text",st,bn)};function bn(st){return st==null&&(st=""),function(){this.textContent=st}}sr.remove=function(){var st=this.namespace;return this.each("end.transition",function(){var bt;this[st].count<2&&(bt=this.parentNode)&&bt.removeChild(this)})},sr.ease=function(st){var bt=this.id,_t=this.namespace;return arguments.length<1?this.node()[_t][bt].ease:(typeof st!="function"&&(st=o.ease.apply(o,arguments)),Wt(this,function(Kt){Kt[_t][bt].ease=st}))},sr.delay=function(st){var bt=this.id,_t=this.namespace;return arguments.length<1?this.node()[_t][bt].delay:Wt(this,typeof st=="function"?function(Kt,qt,le){Kt[_t][bt].delay=+st.call(Kt,Kt.__data__,qt,le)}:(st=+st,function(Kt){Kt[_t][bt].delay=st}))},sr.duration=function(st){var bt=this.id,_t=this.namespace;return arguments.length<1?this.node()[_t][bt].duration:Wt(this,typeof st=="function"?function(Kt,qt,le){Kt[_t][bt].duration=Math.max(1,st.call(Kt,Kt.__data__,qt,le))}:(st=Math.max(1,st),function(Kt){Kt[_t][bt].duration=st}))},sr.each=function(st,bt){var _t=this.id,Kt=this.namespace;if(arguments.length<2){var qt=Vr,le=_r;try{_r=_t,Wt(this,function(Ce,be,Oe){Vr=Ce[Kt][_t],st.call(Ce,Ce.__data__,be,Oe)})}finally{Vr=qt,_r=le}}else Wt(this,function(Ce){var be=Ce[Kt][_t];(be.event||(be.event=o.dispatch("start","end","interrupt"))).on(st,bt)});return this},sr.transition=function(){for(var st=this.id,bt=++Sr,_t=this.namespace,Kt=[],qt,le,Ce,be,Oe=0,Ue=this.length;Oe<Ue;Oe++){Kt.push(qt=[]);for(var le=this[Oe],nr=0,Rr=le.length;nr<Rr;nr++)(Ce=le[nr])&&(be=Ce[_t][st],In(Ce,nr,_t,bt,{time:be.time,ease:be.ease,delay:be.delay+be.duration,duration:be.duration})),qt.push(Ce)}return wr(Kt,_t,bt)};function Pn(st){return st==null?"__transition__":"__transition_"+st+"__"}function In(st,bt,_t,Kt,qt){var le=st[_t]||(st[_t]={active:0,count:0}),Ce=le[Kt],be,Oe,Ue,nr,Rr;function Dr(zr){var Hr=Ce.delay;if(Oe.t=Hr+be,Hr<=zr)return Qr(zr-Hr);Oe.c=Qr}function Qr(zr){var Hr=le.active,Kr=le[Hr];Kr&&(Kr.timer.c=null,Kr.timer.t=NaN,--le.count,delete le[Hr],Kr.event&&Kr.event.interrupt.call(st,st.__data__,Kr.index));for(var hn in le)if(+hn<Kt){var yn=le[hn];yn.timer.c=null,yn.timer.t=NaN,--le.count,delete le[hn]}Oe.c=sn,Ln(function(){return Oe.c&&sn(zr||1)&&(Oe.c=null,Oe.t=NaN),1},0,be),le.active=Kt,Ce.event&&Ce.event.start.call(st,st.__data__,bt),Rr=[],Ce.tween.forEach(function(qr,Gn){(Gn=Gn.call(st,st.__data__,bt))&&Rr.push(Gn)}),nr=Ce.ease,Ue=Ce.duration}function sn(zr){for(var Hr=zr/Ue,Kr=nr(Hr),hn=Rr.length;hn>0;)Rr[--hn].call(st,Kr);if(Hr>=1)return Ce.event&&Ce.event.end.call(st,st.__data__,bt),--le.count?delete le[Kt]:delete st[_t],1}Ce||(be=qt.time,Oe=Ln(Dr,0,be),Ce=le[Kt]={tween:new C,time:be,timer:Oe,delay:qt.delay,duration:qt.duration,ease:qt.ease,index:bt},qt=null,++le.count)}o.svg.axis=function(){var st=o.scale.linear(),bt=$n,_t=6,Kt=6,qt=3,le=[10],Ce=null,be;function Oe(Ue){Ue.each(function(){var nr=o.select(this),Rr=this.__chart__||st,Dr=this.__chart__=st.copy(),Qr=Ce??(Dr.ticks?Dr.ticks.apply(Dr,le):Dr.domain()),sn=be??(Dr.tickFormat?Dr.tickFormat.apply(Dr,le):B),zr=nr.selectAll(".tick").data(Qr,Dr),Hr=zr.enter().insert("g",".domain").attr("class","tick").style("opacity",Ft),Kr=o.transition(zr.exit()).style("opacity",Ft).remove(),hn=o.transition(zr.order()).style("opacity",1),yn=Math.max(_t,0)+qt,qr,Gn=ml(Dr),aa=nr.selectAll(".domain").data([0]),va=(aa.enter().append("path").attr("class","domain"),o.transition(aa));Hr.append("line"),Hr.append("text");var ra=Hr.select("line"),fa=hn.select("line"),da=zr.select("text").text(sn),Na=Hr.select("text"),Ea=hn.select("text"),_a=bt==="top"||bt==="left"?-1:1,oi,Vi,hi,ea;if(bt==="bottom"||bt==="top"?(qr=Ia,oi="x",hi="y",Vi="x2",ea="y2",da.attr("dy",_a<0?"0em":".71em").style("text-anchor","middle"),va.attr("d","M"+Gn[0]+","+_a*Kt+"V0H"+Gn[1]+"V"+_a*Kt)):(qr=za,oi="y",hi="x",Vi="y2",ea="x2",da.attr("dy",".32em").style("text-anchor",_a<0?"end":"start"),va.attr("d","M"+_a*Kt+","+Gn[0]+"H0V"+Gn[1]+"H"+_a*Kt)),ra.attr(ea,_a*_t),Na.attr(hi,_a*yn),fa.attr(Vi,0).attr(ea,_a*_t),Ea.attr(oi,0).attr(hi,_a*yn),Dr.rangeBand){var Ha=Dr,Ma=Ha.rangeBand()/2;Rr=Dr=function(Ja){return Ha(Ja)+Ma}}else Rr.rangeBand?Rr=Dr:Kr.call(qr,Dr,Rr);Hr.call(qr,Rr,Dr),hn.call(qr,Dr,Dr)})}return Oe.scale=function(Ue){return arguments.length?(st=Ue,Oe):st},Oe.orient=function(Ue){return arguments.length?(bt=Ue in Da?Ue+"":$n,Oe):bt},Oe.ticks=function(){return arguments.length?(le=A(arguments),Oe):le},Oe.tickValues=function(Ue){return arguments.length?(Ce=Ue,Oe):Ce},Oe.tickFormat=function(Ue){return arguments.length?(be=Ue,Oe):be},Oe.tickSize=function(Ue){var nr=arguments.length;return nr?(_t=+Ue,Kt=+arguments[nr-1],Oe):_t},Oe.innerTickSize=function(Ue){return arguments.length?(_t=+Ue,Oe):_t},Oe.outerTickSize=function(Ue){return arguments.length?(Kt=+Ue,Oe):Kt},Oe.tickPadding=function(Ue){return arguments.length?(qt=+Ue,Oe):qt},Oe.tickSubdivide=function(){return arguments.length&&Oe},Oe};var $n="bottom",Da={top:1,right:1,bottom:1,left:1};function Ia(st,bt,_t){st.attr("transform",function(Kt){var qt=bt(Kt);return"translate("+(isFinite(qt)?qt:_t(Kt))+",0)"})}function za(st,bt,_t){st.attr("transform",function(Kt){var qt=bt(Kt);return"translate(0,"+(isFinite(qt)?qt:_t(Kt))+")"})}o.svg.brush=function(){var st=nt(nr,"brushstart","brush","brushend"),bt=null,_t=null,Kt=[0,0],qt=[0,0],le,Ce,be=!0,Oe=!0,Ue=Ka[0];function nr(zr){zr.each(function(){var Hr=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",sn).on("touchstart.brush",sn),Kr=Hr.selectAll(".background").data([0]);Kr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Hr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var hn=Hr.selectAll(".resize").data(Ue,B);hn.exit().remove(),hn.enter().append("g").attr("class",function(aa){return"resize "+aa}).style("cursor",function(aa){return Oa[aa]}).append("rect").attr("x",function(aa){return/[ew]$/.test(aa)?-3:null}).attr("y",function(aa){return/^[ns]/.test(aa)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),hn.style("display",nr.empty()?"none":null);var yn=o.transition(Hr),qr=o.transition(Kr),Gn;bt&&(Gn=ml(bt),qr.attr("x",Gn[0]).attr("width",Gn[1]-Gn[0]),Dr(yn)),_t&&(Gn=ml(_t),qr.attr("y",Gn[0]).attr("height",Gn[1]-Gn[0]),Qr(yn)),Rr(yn)})}nr.event=function(zr){zr.each(function(){var Hr=st.of(this,arguments),Kr={x:Kt,y:qt,i:le,j:Ce},hn=this.__chart__||Kr;this.__chart__=Kr,_r?o.select(this).transition().each("start.brush",function(){le=hn.i,Ce=hn.j,Kt=hn.x,qt=hn.y,Hr({type:"brushstart"})}).tween("brush:brush",function(){var yn=ko(Kt,Kr.x),qr=ko(qt,Kr.y);return le=Ce=null,function(Gn){Kt=Kr.x=yn(Gn),qt=Kr.y=qr(Gn),Hr({type:"brush",mode:"resize"})}}).each("end.brush",function(){le=Kr.i,Ce=Kr.j,Hr({type:"brush",mode:"resize"}),Hr({type:"brushend"})}):(Hr({type:"brushstart"}),Hr({type:"brush",mode:"resize"}),Hr({type:"brushend"}))})};function Rr(zr){zr.selectAll(".resize").attr("transform",function(Hr){return"translate("+Kt[+/e$/.test(Hr)]+","+qt[+/^s/.test(Hr)]+")"})}function Dr(zr){zr.select(".extent").attr("x",Kt[0]),zr.selectAll(".extent,.n>rect,.s>rect").attr("width",Kt[1]-Kt[0])}function Qr(zr){zr.select(".extent").attr("y",qt[0]),zr.selectAll(".extent,.e>rect,.w>rect").attr("height",qt[1]-qt[0])}function sn(){var zr=this,Hr=o.select(o.event.target),Kr=st.of(zr,arguments),hn=o.select(zr),yn=Hr.datum(),qr=!/^(n|s)$/.test(yn)&&bt,Gn=!/^(e|w)$/.test(yn)&&_t,aa=Hr.classed("extent"),va=Nt(zr),ra,fa=o.mouse(zr),da,Na=o.select(r(zr)).on("keydown.brush",oi).on("keyup.brush",Vi);if(o.event.changedTouches?Na.on("touchmove.brush",hi).on("touchend.brush",Ha):Na.on("mousemove.brush",hi).on("mouseup.brush",Ha),hn.interrupt().selectAll("*").interrupt(),aa)fa[0]=Kt[0]-fa[0],fa[1]=qt[0]-fa[1];else if(yn){var Ea=+/w$/.test(yn),_a=+/^n/.test(yn);da=[Kt[1-Ea]-fa[0],qt[1-_a]-fa[1]],fa[0]=Kt[Ea],fa[1]=qt[_a]}else o.event.altKey&&(ra=fa.slice());hn.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",Hr.style("cursor")),Kr({type:"brushstart"}),hi();function oi(){o.event.keyCode==32&&(aa||(ra=null,fa[0]-=Kt[1],fa[1]-=qt[1],aa=2),et())}function Vi(){o.event.keyCode==32&&aa==2&&(fa[0]+=Kt[1],fa[1]+=qt[1],aa=0,et())}function hi(){var Ma=o.mouse(zr),Ja=!1;da&&(Ma[0]+=da[0],Ma[1]+=da[1]),aa||(o.event.altKey?(ra||(ra=[(Kt[0]+Kt[1])/2,(qt[0]+qt[1])/2]),fa[0]=Kt[+(Ma[0]<ra[0])],fa[1]=qt[+(Ma[1]<ra[1])]):ra=null),qr&&ea(Ma,bt,0)&&(Dr(hn),Ja=!0),Gn&&ea(Ma,_t,1)&&(Qr(hn),Ja=!0),Ja&&(Rr(hn),Kr({type:"brush",mode:aa?"move":"resize"}))}function ea(Ma,Ja,Mi){var si=ml(Ja),to=si[0],eo=si[1],io=fa[Mi],Si=Mi?qt:Kt,po=Si[1]-Si[0],ca,La;if(aa&&(to-=io,eo-=po+io),ca=(Mi?Oe:be)?Math.max(to,Math.min(eo,Ma[Mi])):Ma[Mi],aa?La=(ca+=io)+po:(ra&&(io=Math.max(to,Math.min(eo,2*ra[Mi]-ca))),io<ca?(La=ca,ca=io):La=io),Si[0]!=ca||Si[1]!=La)return Mi?Ce=null:le=null,Si[0]=ca,Si[1]=La,!0}function Ha(){hi(),hn.style("pointer-events","all").selectAll(".resize").style("display",nr.empty()?"none":null),o.select("body").style("cursor",null),Na.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),va(),Kr({type:"brushend"})}}return nr.x=function(zr){return arguments.length?(bt=zr,Ue=Ka[!bt<<1|!_t],nr):bt},nr.y=function(zr){return arguments.length?(_t=zr,Ue=Ka[!bt<<1|!_t],nr):_t},nr.clamp=function(zr){return arguments.length?(bt&&_t?(be=!!zr[0],Oe=!!zr[1]):bt?be=!!zr:_t&&(Oe=!!zr),nr):bt&&_t?[be,Oe]:bt?be:_t?Oe:null},nr.extent=function(zr){var Hr,Kr,hn,yn,qr;return arguments.length?(bt&&(Hr=zr[0],Kr=zr[1],_t&&(Hr=Hr[0],Kr=Kr[0]),le=[Hr,Kr],bt.invert&&(Hr=bt(Hr),Kr=bt(Kr)),Kr<Hr&&(qr=Hr,Hr=Kr,Kr=qr),(Hr!=Kt[0]||Kr!=Kt[1])&&(Kt=[Hr,Kr])),_t&&(hn=zr[0],yn=zr[1],bt&&(hn=hn[1],yn=yn[1]),Ce=[hn,yn],_t.invert&&(hn=_t(hn),yn=_t(yn)),yn<hn&&(qr=hn,hn=yn,yn=qr),(hn!=qt[0]||yn!=qt[1])&&(qt=[hn,yn])),nr):(bt&&(le?(Hr=le[0],Kr=le[1]):(Hr=Kt[0],Kr=Kt[1],bt.invert&&(Hr=bt.invert(Hr),Kr=bt.invert(Kr)),Kr<Hr&&(qr=Hr,Hr=Kr,Kr=qr))),_t&&(Ce?(hn=Ce[0],yn=Ce[1]):(hn=qt[0],yn=qt[1],_t.invert&&(hn=_t.invert(hn),yn=_t.invert(yn)),yn<hn&&(qr=hn,hn=yn,yn=qr))),bt&&_t?[[Hr,hn],[Kr,yn]]:bt?[Hr,Kr]:_t&&[hn,yn])},nr.clear=function(){return nr.empty()||(Kt=[0,0],qt=[0,0],le=Ce=null),nr},nr.empty=function(){return!!bt&&Kt[0]==Kt[1]||!!_t&&qt[0]==qt[1]},o.rebind(nr,st,"on")};var Oa={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ka=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];o.text=En(function(st){return st.responseText}),o.json=function(st,bt){return nn(st,"application/json",pi,bt)};function pi(st){return JSON.parse(st.responseText)}o.html=function(st,bt){return nn(st,"text/html",Ni,bt)};function Ni(st){var bt=v.createRange();return bt.selectNode(v.body),bt.createContextualFragment(st.responseText)}o.xml=En(function(st){return st.responseXML}),b=o,P=typeof b=="function"?b.call(V,t,V,j):b,P!==void 0&&(j.exports=P)}).apply(self)},3480:function(j){(function(V,t){j.exports=t()})(this,function(){var V,t,b;function P(o,L){if(!V)V=L;else if(!t)t=L;else{var A="var sharedChunk = {}; ("+V+")(sharedChunk); ("+t+")(sharedChunk);",v={};V(v),b=L(v),typeof window<"u"&&(b.workerUrl=window.URL.createObjectURL(new Blob([A],{type:"text/javascript"})))}}return P(["exports"],function(o){function L(R,D){return D={exports:{}},R(D,D.exports),D.exports}var A="1.13.4",v=p;function p(R,D,U,rt){this.cx=3*R,this.bx=3*(U-R)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*D,this.by=3*(rt-D)-this.cy,this.ay=1-this.cy-this.by,this.p1x=R,this.p1y=rt,this.p2x=U,this.p2y=rt}p.prototype.sampleCurveX=function(R){return((this.ax*R+this.bx)*R+this.cx)*R},p.prototype.sampleCurveY=function(R){return((this.ay*R+this.by)*R+this.cy)*R},p.prototype.sampleCurveDerivativeX=function(R){return(3*this.ax*R+2*this.bx)*R+this.cx},p.prototype.solveCurveX=function(R,D){typeof D>"u"&&(D=1e-6);var U,rt,ct,yt,Et;for(ct=R,Et=0;Et<8;Et++){if(yt=this.sampleCurveX(ct)-R,Math.abs(yt)<D)return ct;var Zt=this.sampleCurveDerivativeX(ct);if(Math.abs(Zt)<1e-6)break;ct=ct-yt/Zt}if(U=0,rt=1,ct=R,ct<U)return U;if(ct>rt)return rt;for(;U<rt;){if(yt=this.sampleCurveX(ct),Math.abs(yt-R)<D)return ct;R>yt?U=ct:rt=ct,ct=(rt-U)*.5+U}return ct},p.prototype.solve=function(R,D){return this.sampleCurveY(this.solveCurveX(R,D))};var r=e;function e(R,D){this.x=R,this.y=D}e.prototype={clone:function(){return new e(this.x,this.y)},add:function(R){return this.clone()._add(R)},sub:function(R){return this.clone()._sub(R)},multByPoint:function(R){return this.clone()._multByPoint(R)},divByPoint:function(R){return this.clone()._divByPoint(R)},mult:function(R){return this.clone()._mult(R)},div:function(R){return this.clone()._div(R)},rotate:function(R){return this.clone()._rotate(R)},rotateAround:function(R,D){return this.clone()._rotateAround(R,D)},matMult:function(R){return this.clone()._matMult(R)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(R){return this.x===R.x&&this.y===R.y},dist:function(R){return Math.sqrt(this.distSqr(R))},distSqr:function(R){var D=R.x-this.x,U=R.y-this.y;return D*D+U*U},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(R){return Math.atan2(this.y-R.y,this.x-R.x)},angleWith:function(R){return this.angleWithSep(R.x,R.y)},angleWithSep:function(R,D){return Math.atan2(this.x*D-this.y*R,this.x*R+this.y*D)},_matMult:function(R){var D=R[0]*this.x+R[1]*this.y,U=R[2]*this.x+R[3]*this.y;return this.x=D,this.y=U,this},_add:function(R){return this.x+=R.x,this.y+=R.y,this},_sub:function(R){return this.x-=R.x,this.y-=R.y,this},_mult:function(R){return this.x*=R,this.y*=R,this},_div:function(R){return this.x/=R,this.y/=R,this},_multByPoint:function(R){return this.x*=R.x,this.y*=R.y,this},_divByPoint:function(R){return this.x/=R.x,this.y/=R.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var R=this.y;return this.y=this.x,this.x=-R,this},_rotate:function(R){var D=Math.cos(R),U=Math.sin(R),rt=D*this.x-U*this.y,ct=U*this.x+D*this.y;return this.x=rt,this.y=ct,this},_rotateAround:function(R,D){var U=Math.cos(R),rt=Math.sin(R),ct=D.x+U*(this.x-D.x)-rt*(this.y-D.y),yt=D.y+rt*(this.x-D.x)+U*(this.y-D.y);return this.x=ct,this.y=yt,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(R){return R instanceof e?R:Array.isArray(R)?new e(R[0],R[1]):R};var s=typeof self<"u"?self:{};function n(R,D){if(Array.isArray(R)){if(!Array.isArray(D)||R.length!==D.length)return!1;for(var U=0;U<R.length;U++)if(!n(R[U],D[U]))return!1;return!0}if(typeof R=="object"&&R!==null&&D!==null){if(typeof D!="object")return!1;var rt=Object.keys(R);if(rt.length!==Object.keys(D).length)return!1;for(var ct in R)if(!n(R[ct],D[ct]))return!1;return!0}return R===D}var l=Math.pow(2,53)-1;function f(R){if(R<=0)return 0;if(R>=1)return 1;var D=R*R,U=D*R;return 4*(R<.5?U:3*(R-D)+U-.75)}function u(R,D,U,rt){var ct=new v(R,D,U,rt);return function(yt){return ct.solve(yt)}}var g=u(.25,.1,.25,1);function h(R,D,U){return Math.min(U,Math.max(D,R))}function T(R,D,U){var rt=U-D,ct=((R-D)%rt+rt)%rt+D;return ct===D?U:ct}function c(R,D,U){if(!R.length)return U(null,[]);var rt=R.length,ct=new Array(R.length),yt=null;R.forEach(function(Et,Zt){D(Et,function(ce,we){ce&&(yt=ce),ct[Zt]=we,--rt===0&&U(yt,ct)})})}function i(R){var D=[];for(var U in R)D.push(R[U]);return D}function d(R,D){var U=[];for(var rt in R)rt in D||U.push(rt);return U}function x(R){for(var D=[],U=arguments.length-1;U-- >0;)D[U]=arguments[U+1];for(var rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt];for(var Et in yt)R[Et]=yt[Et]}return R}function w(R,D){for(var U={},rt=0;rt<D.length;rt++){var ct=D[rt];ct in R&&(U[ct]=R[ct])}return U}var C=1;function y(){return C++}function S(){function R(D){return D?(D^Math.random()*16>>D/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,R)}return R()}function M(R){return R<=1?1:Math.pow(2,Math.ceil(Math.log(R)/Math.LN2))}function a(R){return R?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(R):!1}function E(R,D){R.forEach(function(U){D[U]&&(D[U]=D[U].bind(D))})}function m(R,D){return R.indexOf(D,R.length-D.length)!==-1}function k(R,D,U){var rt={};for(var ct in R)rt[ct]=D.call(U||this,R[ct],ct,R);return rt}function I(R,D,U){var rt={};for(var ct in R)D.call(U||this,R[ct],ct,R)&&(rt[ct]=R[ct]);return rt}function O(R){return Array.isArray(R)?R.map(O):typeof R=="object"&&R?k(R,O):R}function z(R,D){for(var U=0;U<R.length;U++)if(D.indexOf(R[U])>=0)return!0;return!1}var B={};function F(R){B[R]||(typeof console<"u"&&console.warn(R),B[R]=!0)}function _(R,D,U){return(U.y-R.y)*(D.x-R.x)>(D.y-R.y)*(U.x-R.x)}function N(R){for(var D=0,U=0,rt=R.length,ct=rt-1,yt=void 0,Et=void 0;U<rt;ct=U++)yt=R[U],Et=R[ct],D+=(Et.x-yt.x)*(yt.y+Et.y);return D}function G(R){var D=R[0],U=R[1],rt=R[2];return U+=90,U*=Math.PI/180,rt*=Math.PI/180,{x:D*Math.cos(U)*Math.sin(rt),y:D*Math.sin(U)*Math.sin(rt),z:D*Math.cos(rt)}}function X(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function $(R){var D=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,U={};if(R.replace(D,function(ct,yt,Et,Zt){var ce=Et||Zt;return U[yt]=ce?ce.toLowerCase():!0,""}),U["max-age"]){var rt=parseInt(U["max-age"],10);isNaN(rt)?delete U["max-age"]:U["max-age"]=rt}return U}var et=null;function ot(R){if(et==null){var D=R.navigator?R.navigator.userAgent:null;et=!!R.safari||!!(D&&(/\b(iPad|iPhone|iPod)\b/.test(D)||D.match("Safari")&&!D.match("Chrome")))}return et}function nt(R){try{var D=s[R];return D.setItem("_mapbox_test_",1),D.removeItem("_mapbox_test_"),!0}catch{return!1}}function Z(R){return s.btoa(encodeURIComponent(R).replace(/%([0-9A-F]{2})/g,function(D,U){return String.fromCharCode(+("0x"+U))}))}function Q(R){return decodeURIComponent(s.atob(R).split("").map(function(D){return"%"+("00"+D.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var W=s.performance&&s.performance.now?s.performance.now.bind(s.performance):Date.now.bind(Date),J=s.requestAnimationFrame||s.mozRequestAnimationFrame||s.webkitRequestAnimationFrame||s.msRequestAnimationFrame,it=s.cancelAnimationFrame||s.mozCancelAnimationFrame||s.webkitCancelAnimationFrame||s.msCancelAnimationFrame,K,H,at={now:W,frame:function(D){var U=J(D);return{cancel:function(){return it(U)}}},getImageData:function(D,U){U===void 0&&(U=0);var rt=s.document.createElement("canvas"),ct=rt.getContext("2d");if(!ct)throw new Error("failed to create canvas 2d context");return rt.width=D.width,rt.height=D.height,ct.drawImage(D,0,0,D.width,D.height),ct.getImageData(-U,-U,D.width+2*U,D.height+2*U)},resolveURL:function(D){return K||(K=s.document.createElement("a")),K.href=D,K.href},hardwareConcurrency:s.navigator&&s.navigator.hardwareConcurrency||4,get devicePixelRatio(){return s.devicePixelRatio},get prefersReducedMotion(){return s.matchMedia?(H==null&&(H=s.matchMedia("(prefers-reduced-motion: reduce)")),H.matches):!1}},tt={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},lt={supported:!1,testSupport:Lt},dt,mt=!1,gt,Mt=!1;s.document&&(gt=s.document.createElement("img"),gt.onload=function(){dt&&zt(dt),dt=null,Mt=!0},gt.onerror=function(){mt=!0,dt=null},gt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function Lt(R){mt||!gt||(Mt?zt(R):dt=R)}function zt(R){var D=R.createTexture();R.bindTexture(R.TEXTURE_2D,D);try{if(R.texImage2D(R.TEXTURE_2D,0,R.RGBA,R.RGBA,R.UNSIGNED_BYTE,gt),R.isContextLost())return;lt.supported=!0}catch{}R.deleteTexture(D),mt=!0}var xt="01";function Ct(){for(var R="1",D="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",U="",rt=0;rt<10;rt++)U+=D[Math.floor(Math.random()*62)];var ct=12*60*60*1e3,yt=[R,xt,U].join(""),Et=Date.now()+ct;return{token:yt,tokenExpiresAt:Et}}var wt=function(D,U){this._transformRequestFn=D,this._customAccessToken=U,this._createSkuToken()};wt.prototype._createSkuToken=function(){var D=Ct();this._skuToken=D.token,this._skuTokenExpiresAt=D.tokenExpiresAt},wt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},wt.prototype.transformRequest=function(D,U){return this._transformRequestFn?this._transformRequestFn(D,U)||{url:D}:{url:D}},wt.prototype.normalizeStyleURL=function(D,U){if(!Rt(D))return D;var rt=jt(D);return rt.path="/styles/v1"+rt.path,this._makeAPIURL(rt,this._customAccessToken||U)},wt.prototype.normalizeGlyphsURL=function(D,U){if(!Rt(D))return D;var rt=jt(D);return rt.path="/fonts/v1"+rt.path,this._makeAPIURL(rt,this._customAccessToken||U)},wt.prototype.normalizeSourceURL=function(D,U){if(!Rt(D))return D;var rt=jt(D);return rt.path="/v4/"+rt.authority+".json",rt.params.push("secure"),this._makeAPIURL(rt,this._customAccessToken||U)},wt.prototype.normalizeSpriteURL=function(D,U,rt,ct){var yt=jt(D);return Rt(D)?(yt.path="/styles/v1"+yt.path+"/sprite"+U+rt,this._makeAPIURL(yt,this._customAccessToken||ct)):(yt.path+=""+U+rt,ie(yt))},wt.prototype.normalizeTileURL=function(D,U){if(this._isSkuTokenExpired()&&this._createSkuToken(),D&&!Rt(D))return D;var rt=jt(D),ct=/(\.(png|jpg)\d*)(?=$)/,yt=/^.+\/v4\//,Et=at.devicePixelRatio>=2||U===512?"@2x":"",Zt=lt.supported?".webp":"$1";rt.path=rt.path.replace(ct,""+Et+Zt),rt.path=rt.path.replace(yt,"/"),rt.path="/v4"+rt.path;var ce=this._customAccessToken||te(rt.params)||tt.ACCESS_TOKEN;return tt.REQUIRE_ACCESS_TOKEN&&ce&&this._skuToken&&rt.params.push("sku="+this._skuToken),this._makeAPIURL(rt,ce)},wt.prototype.canonicalizeTileURL=function(D,U){var rt="/v4/",ct=/\.[\w]+$/,yt=jt(D);if(!yt.path.match(/(^\/v4\/)/)||!yt.path.match(ct))return D;var Et="mapbox://tiles/";Et+=yt.path.replace(rt,"");var Zt=yt.params;return U&&(Zt=Zt.filter(function(ce){return!ce.match(/^access_token=/)})),Zt.length&&(Et+="?"+Zt.join("&")),Et},wt.prototype.canonicalizeTileset=function(D,U){for(var rt=U?Rt(U):!1,ct=[],yt=0,Et=D.tiles||[];yt<Et.length;yt+=1){var Zt=Et[yt];Bt(Zt)?ct.push(this.canonicalizeTileURL(Zt,rt)):ct.push(Zt)}return ct},wt.prototype._makeAPIURL=function(D,U){var rt="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ct=jt(tt.API_URL);if(D.protocol=ct.protocol,D.authority=ct.authority,D.protocol==="http"){var yt=D.params.indexOf("secure");yt>=0&&D.params.splice(yt,1)}if(ct.path!=="/"&&(D.path=""+ct.path+D.path),!tt.REQUIRE_ACCESS_TOKEN)return ie(D);if(U=U||tt.ACCESS_TOKEN,!U)throw new Error("An API access token is required to use Mapbox GL. "+rt);if(U[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+rt);return D.params=D.params.filter(function(Et){return Et.indexOf("access_token")===-1}),D.params.push("access_token="+U),ie(D)};function Rt(R){return R.indexOf("mapbox:")===0}var Tt=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Bt(R){return Tt.test(R)}function Gt(R){return R.indexOf("sku=")>0&&Bt(R)}function te(R){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D],ct=rt.match(/^access_token=(.*)$/);if(ct)return ct[1]}return null}var Wt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function jt(R){var D=R.match(Wt);if(!D)throw new Error("Unable to parse URL object");return{protocol:D[1],authority:D[2],path:D[3]||"/",params:D[4]?D[4].split("&"):[]}}function ie(R){var D=R.params.length?"?"+R.params.join("&"):"";return R.protocol+"://"+R.authority+R.path+D}var ue="mapbox.eventData";function fe(R){if(!R)return null;var D=R.split(".");if(!D||D.length!==3)return null;try{var U=JSON.parse(Q(D[1]));return U}catch{return null}}var pe=function(D){this.type=D,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};pe.prototype.getStorageKey=function(D){var U=fe(tt.ACCESS_TOKEN),rt="";return U&&U.u?rt=Z(U.u):rt=tt.ACCESS_TOKEN||"",D?ue+"."+D+":"+rt:ue+":"+rt},pe.prototype.fetchEventData=function(){var D=nt("localStorage"),U=this.getStorageKey(),rt=this.getStorageKey("uuid");if(D)try{var ct=s.localStorage.getItem(U);ct&&(this.eventData=JSON.parse(ct));var yt=s.localStorage.getItem(rt);yt&&(this.anonId=yt)}catch{F("Unable to read from LocalStorage")}},pe.prototype.saveEventData=function(){var D=nt("localStorage"),U=this.getStorageKey(),rt=this.getStorageKey("uuid");if(D)try{s.localStorage.setItem(rt,this.anonId),Object.keys(this.eventData).length>=1&&s.localStorage.setItem(U,JSON.stringify(this.eventData))}catch{F("Unable to write to LocalStorage")}},pe.prototype.processRequests=function(D){},pe.prototype.postEvent=function(D,U,rt,ct){var yt=this;if(tt.EVENTS_URL){var Et=jt(tt.EVENTS_URL);Et.params.push("access_token="+(ct||tt.ACCESS_TOKEN||""));var Zt={event:this.type,created:new Date(D).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:A,skuId:xt,userId:this.anonId},ce=U?x(Zt,U):Zt,we={url:ie(Et),headers:{"Content-Type":"text/plain"},body:JSON.stringify([ce])};this.pendingRequest=_e(we,function(Le){yt.pendingRequest=null,rt(Le),yt.saveEventData(),yt.processRequests(ct)})}},pe.prototype.queueRequest=function(D,U){this.queue.push(D),this.processRequests(U)};var Te=function(R){function D(){R.call(this,"map.load"),this.success={},this.skuToken=""}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.postMapLoadEvent=function(rt,ct,yt,Et){this.skuToken=yt,(tt.EVENTS_URL&&Et||tt.ACCESS_TOKEN&&Array.isArray(rt)&&rt.some(function(Zt){return Rt(Zt)||Bt(Zt)}))&&this.queueRequest({id:ct,timestamp:Date.now()},Et)},D.prototype.processRequests=function(rt){var ct=this;if(!(this.pendingRequest||this.queue.length===0)){var yt=this.queue.shift(),Et=yt.id,Zt=yt.timestamp;Et&&this.success[Et]||(this.anonId||this.fetchEventData(),a(this.anonId)||(this.anonId=S()),this.postEvent(Zt,{skuToken:this.skuToken},function(ce){ce||Et&&(ct.success[Et]=!0)},rt))}},D}(pe),Qt=function(R){function D(U){R.call(this,"appUserTurnstile"),this._customAccessToken=U}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.postTurnstileEvent=function(rt,ct){tt.EVENTS_URL&&tt.ACCESS_TOKEN&&Array.isArray(rt)&&rt.some(function(yt){return Rt(yt)||Bt(yt)})&&this.queueRequest(Date.now(),ct)},D.prototype.processRequests=function(rt){var ct=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var yt=fe(tt.ACCESS_TOKEN),Et=yt?yt.u:tt.ACCESS_TOKEN,Zt=Et!==this.eventData.tokenU;a(this.anonId)||(this.anonId=S(),Zt=!0);var ce=this.queue.shift();if(this.eventData.lastSuccess){var we=new Date(this.eventData.lastSuccess),Le=new Date(ce),Ve=(ce-this.eventData.lastSuccess)/(24*60*60*1e3);Zt=Zt||Ve>=1||Ve<-1||we.getDate()!==Le.getDate()}else Zt=!0;if(!Zt)return this.processRequests();this.postEvent(ce,{"enabled.telemetry":!1},function(ar){ar||(ct.eventData.lastSuccess=ce,ct.eventData.tokenU=Et)},rt)}},D}(pe),Pt=new Qt,Ot=Pt.postTurnstileEvent.bind(Pt),Nt=new Te,Ht=Nt.postMapLoadEvent.bind(Nt),St="mapbox-tiles",kt=500,Ft=50,At=1e3*60*7,ft;function pt(){s.caches&&!ft&&(ft=s.caches.open(St))}var Dt;function Ut(R,D){if(Dt===void 0)try{new Response(new ReadableStream),Dt=!0}catch{Dt=!1}Dt?D(R.body):R.blob().then(D)}function $t(R,D,U){if(pt(),!!ft){var rt={status:D.status,statusText:D.statusText,headers:new s.Headers};D.headers.forEach(function(Et,Zt){return rt.headers.set(Zt,Et)});var ct=$(D.headers.get("Cache-Control")||"");if(!ct["no-store"]){ct["max-age"]&&rt.headers.set("Expires",new Date(U+ct["max-age"]*1e3).toUTCString());var yt=new Date(rt.headers.get("Expires")).getTime()-U;yt<At||Ut(D,function(Et){var Zt=new s.Response(Et,rt);pt(),ft&&ft.then(function(ce){return ce.put(re(R.url),Zt)}).catch(function(ce){return F(ce.message)})})}}}function re(R){var D=R.indexOf("?");return D<0?R:R.slice(0,D)}function Be(R,D){if(pt(),!ft)return D(null);var U=re(R.url);ft.then(function(rt){rt.match(U).then(function(ct){var yt=We(ct);rt.delete(U),yt&&rt.put(U,ct.clone()),D(null,ct,yt)}).catch(D)}).catch(D)}function We(R){if(!R)return!1;var D=new Date(R.headers.get("Expires")||0),U=$(R.headers.get("Cache-Control")||"");return D>Date.now()&&!U["no-cache"]}var me=1/0;function Se(R){me++,me>Ft&&(R.getActor().send("enforceCacheSizeLimit",kt),me=0)}function je(R){pt(),ft&&ft.then(function(D){D.keys().then(function(U){for(var rt=0;rt<U.length-R;rt++)D.delete(U[rt])})})}function vr(R){var D=s.caches.delete(St);R&&D.catch(R).then(function(){return R()})}function he(R,D){kt=R,Ft=D}var Ye;function Qe(){return Ye==null&&(Ye=s.OffscreenCanvas&&new s.OffscreenCanvas(1,1).getContext("2d")&&typeof s.createImageBitmap=="function"),Ye}var mr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(mr);var ir=function(R){function D(U,rt,ct){rt===401&&Bt(ct)&&(U+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),R.call(this,U),this.status=rt,this.url=ct,this.name=this.constructor.name,this.message=U}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},D}(Error),ve=X()?function(){return self.worker&&self.worker.referrer}:function(){return(s.location.protocol==="blob:"?s.parent:s).location.href},ne=function(R){return/^file:/.test(R)||/^file:/.test(ve())&&!/^\w+:/.test(R)};function ge(R,D){var U=new s.AbortController,rt=new s.Request(R.url,{method:R.method||"GET",body:R.body,credentials:R.credentials,headers:R.headers,referrer:ve(),signal:U.signal}),ct=!1,yt=!1,Et=Gt(rt.url);R.type==="json"&&rt.headers.set("Accept","application/json");var Zt=function(we,Le,Ve){if(!yt){if(we&&we.message!=="SecurityError"&&F(we),Le&&Ve)return ce(Le);var ar=Date.now();s.fetch(rt).then(function(er){if(er.ok){var br=Et?er.clone():null;return ce(er,br,ar)}else return D(new ir(er.statusText,er.status,R.url))}).catch(function(er){er.code!==20&&D(new Error(er.message))})}},ce=function(we,Le,Ve){(R.type==="arrayBuffer"?we.arrayBuffer():R.type==="json"?we.json():we.text()).then(function(ar){yt||(Le&&Ve&&$t(rt,Le,Ve),ct=!0,D(null,ar,we.headers.get("Cache-Control"),we.headers.get("Expires")))}).catch(function(ar){yt||D(new Error(ar.message))})};return Et?Be(rt,Zt):Zt(null,null),{cancel:function(){yt=!0,ct||U.abort()}}}function Ae(R,D){var U=new s.XMLHttpRequest;U.open(R.method||"GET",R.url,!0),R.type==="arrayBuffer"&&(U.responseType="arraybuffer");for(var rt in R.headers)U.setRequestHeader(rt,R.headers[rt]);return R.type==="json"&&(U.responseType="text",U.setRequestHeader("Accept","application/json")),U.withCredentials=R.credentials==="include",U.onerror=function(){D(new Error(U.statusText))},U.onload=function(){if((U.status>=200&&U.status<300||U.status===0)&&U.response!==null){var ct=U.response;if(R.type==="json")try{ct=JSON.parse(U.response)}catch(yt){return D(yt)}D(null,ct,U.getResponseHeader("Cache-Control"),U.getResponseHeader("Expires"))}else D(new ir(U.statusText,U.status,R.url))},U.send(R.body),{cancel:function(){return U.abort()}}}var Re=function(R,D){if(!ne(R.url)){if(s.fetch&&s.Request&&s.AbortController&&s.Request.prototype.hasOwnProperty("signal"))return ge(R,D);if(X()&&self.worker&&self.worker.actor){var U=!0;return self.worker.actor.send("getResource",R,D,void 0,U)}}return Ae(R,D)},ze=function(R,D){return Re(x(R,{type:"json"}),D)},ke=function(R,D){return Re(x(R,{type:"arrayBuffer"}),D)},_e=function(R,D){return Re(x(R,{method:"POST"}),D)};function Ke(R){var D=s.document.createElement("a");return D.href=R,D.protocol===s.document.location.protocol&&D.host===s.document.location.host}var hr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function cr(R,D,U,rt){var ct=new s.Image,yt=s.URL;ct.onload=function(){D(null,ct),yt.revokeObjectURL(ct.src),ct.onload=null,s.requestAnimationFrame(function(){ct.src=hr})},ct.onerror=function(){return D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Et=new s.Blob([new Uint8Array(R)],{type:"image/png"});ct.cacheControl=U,ct.expires=rt,ct.src=R.byteLength?yt.createObjectURL(Et):hr}function dr(R,D){var U=new s.Blob([new Uint8Array(R)],{type:"image/png"});s.createImageBitmap(U).then(function(rt){D(null,rt)}).catch(function(rt){D(new Error("Could not load image because of "+rt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var fr,Lr,xr=function(){fr=[],Lr=0};xr();var Yt=function(R,D){if(lt.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),Lr>=tt.MAX_PARALLEL_IMAGE_REQUESTS){var U={requestParameters:R,callback:D,cancelled:!1,cancel:function(){this.cancelled=!0}};return fr.push(U),U}Lr++;var rt=!1,ct=function(){if(!rt)for(rt=!0,Lr--;fr.length&&Lr<tt.MAX_PARALLEL_IMAGE_REQUESTS;){var Et=fr.shift(),Zt=Et.requestParameters,ce=Et.callback,we=Et.cancelled;we||(Et.cancel=Yt(Zt,ce).cancel)}},yt=ke(R,function(Et,Zt,ce,we){ct(),Et?D(Et):Zt&&(Qe()?dr(Zt,D):cr(Zt,D,ce,we))});return{cancel:function(){yt.cancel(),ct()}}},Jt=function(R,D){var U=s.document.createElement("video");U.muted=!0,U.onloadstart=function(){D(null,U)};for(var rt=0;rt<R.length;rt++){var ct=s.document.createElement("source");Ke(R[rt])||(U.crossOrigin="Anonymous"),ct.src=R[rt],U.appendChild(ct)}return{cancel:function(){}}};function qe(R,D,U){var rt=U[R]&&U[R].indexOf(D)!==-1;rt||(U[R]=U[R]||[],U[R].push(D))}function tr(R,D,U){if(U&&U[R]){var rt=U[R].indexOf(D);rt!==-1&&U[R].splice(rt,1)}}var Ge=function(D,U){U===void 0&&(U={}),x(this,U),this.type=D},Ee=function(R){function D(U,rt){rt===void 0&&(rt={}),R.call(this,"error",x({error:U},rt))}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D}(Ge),Xe=function(){};Xe.prototype.on=function(D,U){return this._listeners=this._listeners||{},qe(D,U,this._listeners),this},Xe.prototype.off=function(D,U){return tr(D,U,this._listeners),tr(D,U,this._oneTimeListeners),this},Xe.prototype.once=function(D,U){return this._oneTimeListeners=this._oneTimeListeners||{},qe(D,U,this._oneTimeListeners),this},Xe.prototype.fire=function(D,U){typeof D=="string"&&(D=new Ge(D,U||{}));var rt=D.type;if(this.listens(rt)){D.target=this;for(var ct=this._listeners&&this._listeners[rt]?this._listeners[rt].slice():[],yt=0,Et=ct;yt<Et.length;yt+=1){var Zt=Et[yt];Zt.call(this,D)}for(var ce=this._oneTimeListeners&&this._oneTimeListeners[rt]?this._oneTimeListeners[rt].slice():[],we=0,Le=ce;we<Le.length;we+=1){var Ve=Le[we];tr(rt,Ve,this._oneTimeListeners),Ve.call(this,D)}var ar=this._eventedParent;ar&&(x(D,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),ar.fire(D))}else D instanceof Ee&&console.error(D.error);return this},Xe.prototype.listens=function(D){return this._listeners&&this._listeners[D]&&this._listeners[D].length>0||this._oneTimeListeners&&this._oneTimeListeners[D]&&this._oneTimeListeners[D].length>0||this._eventedParent&&this._eventedParent.listens(D)},Xe.prototype.setEventedParent=function(D,U){return this._eventedParent=D,this._eventedParentData=U,this};var rr=8,Je={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},He={"*":{type:"source"}},yr=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Ir={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Tr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},vn={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Or={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},En={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},nn={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},gr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Pr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Xr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},pn={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},en={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Tn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ma={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wa={type:"array",value:"*"},la={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},ia={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},Rn={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Cr={type:"array",value:"*",minimum:1},an={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},on=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],ln={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},Nn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},gn={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Cn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Un={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},ta={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},pa={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ka={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Ar={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},Br={"*":{type:"string"}},Mr={$version:rr,$root:Je,sources:He,source:yr,source_vector:Ir,source_raster:Tr,source_raster_dem:vn,source_geojson:Or,source_video:En,source_image:nn,layer:gr,layout:Pr,layout_background:Xr,layout_fill:kr,layout_circle:pn,layout_heatmap:en,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:Tn,layout_symbol:Ln,layout_raster:Yn,layout_hillshade:ma,filter:wa,filter_operator:la,geometry_type:ia,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:Rn,expression:Cr,light:an,paint:on,paint_fill:ln,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:Nn,paint_circle:gn,paint_heatmap:Cn,paint_symbol:Un,paint_raster:ta,paint_hillshade:pa,paint_background:ka,transition:Ar,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:Br},Nr=function(D,U,rt,ct){this.message=(D?D+": ":"")+rt,ct&&(this.identifier=ct),U!=null&&U.__line__&&(this.line=U.__line__)};function un(R){var D=R.key,U=R.value;return U?[new Nr(D,U,"constants have been deprecated as of v8")]:[]}function Dn(R){for(var D=[],U=arguments.length-1;U-- >0;)D[U]=arguments[U+1];for(var rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt];for(var Et in yt)R[Et]=yt[Et]}return R}function mn(R){return R instanceof Number||R instanceof String||R instanceof Boolean?R.valueOf():R}function cn(R){if(Array.isArray(R))return R.map(cn);if(R instanceof Object&&!(R instanceof Number||R instanceof String||R instanceof Boolean)){var D={};for(var U in R)D[U]=cn(R[U]);return D}return mn(R)}var Er=function(R){function D(U,rt){R.call(this,rt),this.message=rt,this.key=U}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D}(Error),Yr=function(D,U){U===void 0&&(U=[]),this.parent=D,this.bindings={};for(var rt=0,ct=U;rt<ct.length;rt+=1){var yt=ct[rt],Et=yt[0],Zt=yt[1];this.bindings[Et]=Zt}};Yr.prototype.concat=function(D){return new Yr(this,D)},Yr.prototype.get=function(D){if(this.bindings[D])return this.bindings[D];if(this.parent)return this.parent.get(D);throw new Error(D+" not found in scope.")},Yr.prototype.has=function(D){return this.bindings[D]?!0:this.parent?this.parent.has(D):!1};var Gr={kind:"null"},$r={kind:"number"},wn={kind:"string"},An={kind:"boolean"},On={kind:"color"},Vn={kind:"object"},zn={kind:"value"},Zn={kind:"error"},Jn={kind:"collator"},ua={kind:"formatted"},Ra={kind:"resolvedImage"};function mi(R,D){return{kind:"array",itemType:R,N:D}}function ri(R){if(R.kind==="array"){var D=ri(R.itemType);return typeof R.N=="number"?"array<"+D+", "+R.N+">":R.itemType.kind==="value"?"array":"array<"+D+">"}else return R.kind}var ho=[Gr,$r,wn,An,On,ua,Vn,mi(zn),Ra];function So(R,D){if(D.kind==="error")return null;if(R.kind==="array"){if(D.kind==="array"&&(D.N===0&&D.itemType.kind==="value"||!So(R.itemType,D.itemType))&&(typeof R.N!="number"||R.N===D.N))return null}else{if(R.kind===D.kind)return null;if(R.kind==="value")for(var U=0,rt=ho;U<rt.length;U+=1){var ct=rt[U];if(!So(ct,D))return null}}return"Expected "+ri(R)+" but found "+ri(D)+" instead."}function ro(R,D){return D.some(function(U){return U.kind===R.kind})}function ys(R,D){return D.some(function(U){return U==="null"?R===null:U==="array"?Array.isArray(R):U==="object"?R&&!Array.isArray(R)&&typeof R=="object":U===typeof R})}var il=L(function(R,D){var U={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function rt(we){return we=Math.round(we),we<0?0:we>255?255:we}function ct(we){return we<0?0:we>1?1:we}function yt(we){return we[we.length-1]==="%"?rt(parseFloat(we)/100*255):rt(parseInt(we))}function Et(we){return we[we.length-1]==="%"?ct(parseFloat(we)/100):ct(parseFloat(we))}function Zt(we,Le,Ve){return Ve<0?Ve+=1:Ve>1&&(Ve-=1),Ve*6<1?we+(Le-we)*Ve*6:Ve*2<1?Le:Ve*3<2?we+(Le-we)*(2/3-Ve)*6:we}function ce(we){var Le=we.replace(/ /g,"").toLowerCase();if(Le in U)return U[Le].slice();if(Le[0]==="#"){if(Le.length===4){var Ve=parseInt(Le.substr(1),16);return Ve>=0&&Ve<=4095?[(Ve&3840)>>4|(Ve&3840)>>8,Ve&240|(Ve&240)>>4,Ve&15|(Ve&15)<<4,1]:null}else if(Le.length===7){var Ve=parseInt(Le.substr(1),16);return Ve>=0&&Ve<=16777215?[(Ve&16711680)>>16,(Ve&65280)>>8,Ve&255,1]:null}return null}var ar=Le.indexOf("("),er=Le.indexOf(")");if(ar!==-1&&er+1===Le.length){var br=Le.substr(0,ar),Ur=Le.substr(ar+1,er-(ar+1)).split(","),fn=1;switch(br){case"rgba":if(Ur.length!==4)return null;fn=Et(Ur.pop());case"rgb":return Ur.length!==3?null:[yt(Ur[0]),yt(Ur[1]),yt(Ur[2]),fn];case"hsla":if(Ur.length!==4)return null;fn=Et(Ur.pop());case"hsl":if(Ur.length!==3)return null;var tn=(parseFloat(Ur[0])%360+360)%360/360,Sn=Et(Ur[1]),xn=Et(Ur[2]),Mn=xn<=.5?xn*(Sn+1):xn+Sn-xn*Sn,_n=xn*2-Mn;return[rt(Zt(_n,Mn,tn+1/3)*255),rt(Zt(_n,Mn,tn)*255),rt(Zt(_n,Mn,tn-1/3)*255),fn];default:return null}}return null}try{D.parseCSSColor=ce}catch{}}),zl=il.parseCSSColor,ni=function(D,U,rt,ct){ct===void 0&&(ct=1),this.r=D,this.g=U,this.b=rt,this.a=ct};ni.parse=function(D){if(D){if(D instanceof ni)return D;if(typeof D=="string"){var U=zl(D);if(U)return new ni(U[0]/255*U[3],U[1]/255*U[3],U[2]/255*U[3],U[3])}}},ni.prototype.toString=function(){var D=this.toArray(),U=D[0],rt=D[1],ct=D[2],yt=D[3];return"rgba("+Math.round(U)+","+Math.round(rt)+","+Math.round(ct)+","+yt+")"},ni.prototype.toArray=function(){var D=this,U=D.r,rt=D.g,ct=D.b,yt=D.a;return yt===0?[0,0,0,0]:[U*255/yt,rt*255/yt,ct*255/yt,yt]},ni.black=new ni(0,0,0,1),ni.white=new ni(1,1,1,1),ni.transparent=new ni(0,0,0,0),ni.red=new ni(1,0,0,1);var _l=function(D,U,rt){D?this.sensitivity=U?"variant":"case":this.sensitivity=U?"accent":"base",this.locale=rt,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};_l.prototype.compare=function(D,U){return this.collator.compare(D,U)},_l.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Iu=function(D,U,rt,ct,yt){this.text=D,this.image=U,this.scale=rt,this.fontStack=ct,this.textColor=yt},Qi=function(D){this.sections=D};Qi.fromString=function(D){return new Qi([new Iu(D,null,null,null,null)])},Qi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(D){return D.text.length!==0||D.image&&D.image.name.length!==0})},Qi.factory=function(D){return D instanceof Qi?D:Qi.fromString(D)},Qi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(D){return D.text}).join("")},Qi.prototype.serialize=function(){for(var D=["format"],U=0,rt=this.sections;U<rt.length;U+=1){var ct=rt[U];if(ct.image){D.push(["image",ct.image.name]);continue}D.push(ct.text);var yt={};ct.fontStack&&(yt["text-font"]=["literal",ct.fontStack.split(",")]),ct.scale&&(yt["font-scale"]=ct.scale),ct.textColor&&(yt["text-color"]=["rgba"].concat(ct.textColor.toArray())),D.push(yt)}return D};var mo=function(D){this.name=D.name,this.available=D.available};mo.prototype.toString=function(){return this.name},mo.fromString=function(D){return D?new mo({name:D,available:!1}):null},mo.prototype.serialize=function(){return["image",this.name]};function ol(R,D,U,rt){if(!(typeof R=="number"&&R>=0&&R<=255&&typeof D=="number"&&D>=0&&D<=255&&typeof U=="number"&&U>=0&&U<=255)){var ct=typeof rt=="number"?[R,D,U,rt]:[R,D,U];return"Invalid rgba value ["+ct.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof rt>"u"||typeof rt=="number"&&rt>=0&&rt<=1?null:"Invalid rgba value ["+[R,D,U,rt].join(", ")+"]: 'a' must be between 0 and 1."}function uu(R){if(R===null)return!0;if(typeof R=="string")return!0;if(typeof R=="boolean")return!0;if(typeof R=="number")return!0;if(R instanceof ni)return!0;if(R instanceof _l)return!0;if(R instanceof Qi)return!0;if(R instanceof mo)return!0;if(Array.isArray(R)){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D];if(!uu(rt))return!1}return!0}else if(typeof R=="object"){for(var ct in R)if(!uu(R[ct]))return!1;return!0}else return!1}function Oi(R){if(R===null)return Gr;if(typeof R=="string")return wn;if(typeof R=="boolean")return An;if(typeof R=="number")return $r;if(R instanceof ni)return On;if(R instanceof _l)return Jn;if(R instanceof Qi)return ua;if(R instanceof mo)return Ra;if(Array.isArray(R)){for(var D=R.length,U,rt=0,ct=R;rt<ct.length;rt+=1){var yt=ct[rt],Et=Oi(yt);if(!U)U=Et;else{if(U===Et)continue;U=zn;break}}return mi(U||zn,D)}else return Vn}function sl(R){var D=typeof R;return R===null?"":D==="string"||D==="number"||D==="boolean"?String(R):R instanceof ni||R instanceof Qi||R instanceof mo?R.toString():JSON.stringify(R)}var Ui=function(D,U){this.type=D,this.value=U};Ui.parse=function(D,U){if(D.length!==2)return U.error("'literal' expression requires exactly one argument, but found "+(D.length-1)+" instead.");if(!uu(D[1]))return U.error("invalid value");var rt=D[1],ct=Oi(rt),yt=U.expectedType;return ct.kind==="array"&&ct.N===0&&yt&&yt.kind==="array"&&(typeof yt.N!="number"||yt.N===0)&&(ct=yt),new Ui(ct,rt)},Ui.prototype.evaluate=function(){return this.value},Ui.prototype.eachChild=function(){},Ui.prototype.outputDefined=function(){return!0},Ui.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ni?["rgba"].concat(this.value.toArray()):this.value instanceof Qi?this.value.serialize():this.value};var Xi=function(D){this.name="ExpressionEvaluationError",this.message=D};Xi.prototype.toJSON=function(){return this.message};var ll={string:wn,number:$r,boolean:An,object:Vn},no=function(D,U){this.type=D,this.args=U};no.parse=function(D,U){if(D.length<2)return U.error("Expected at least one argument.");var rt=1,ct,yt=D[0];if(yt==="array"){var Et;if(D.length>2){var Zt=D[1];if(typeof Zt!="string"||!(Zt in ll)||Zt==="object")return U.error('The item type argument of "array" must be one of string, number, boolean',1);Et=ll[Zt],rt++}else Et=zn;var ce;if(D.length>3){if(D[2]!==null&&(typeof D[2]!="number"||D[2]<0||D[2]!==Math.floor(D[2])))return U.error('The length argument to "array" must be a positive integer literal',2);ce=D[2],rt++}ct=mi(Et,ce)}else ct=ll[yt];for(var we=[];rt<D.length;rt++){var Le=U.parse(D[rt],rt,zn);if(!Le)return null;we.push(Le)}return new no(ct,we)},no.prototype.evaluate=function(D){for(var U=0;U<this.args.length;U++){var rt=this.args[U].evaluate(D),ct=So(this.type,Oi(rt));if(ct){if(U===this.args.length-1)throw new Xi("Expected value to be of type "+ri(this.type)+", but found "+ri(Oi(rt))+" instead.")}else return rt}return null},no.prototype.eachChild=function(D){this.args.forEach(D)},no.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},no.prototype.serialize=function(){var D=this.type,U=[D.kind];if(D.kind==="array"){var rt=D.itemType;if(rt.kind==="string"||rt.kind==="number"||rt.kind==="boolean"){U.push(rt.kind);var ct=D.N;(typeof ct=="number"||this.args.length>1)&&U.push(ct)}}return U.concat(this.args.map(function(yt){return yt.serialize()}))};var ao=function(D){this.type=ua,this.sections=D};ao.parse=function(D,U){if(D.length<2)return U.error("Expected at least one argument.");var rt=D[1];if(!Array.isArray(rt)&&typeof rt=="object")return U.error("First argument must be an image or text section.");for(var ct=[],yt=!1,Et=1;Et<=D.length-1;++Et){var Zt=D[Et];if(yt&&typeof Zt=="object"&&!Array.isArray(Zt)){yt=!1;var ce=null;if(Zt["font-scale"]&&(ce=U.parse(Zt["font-scale"],1,$r),!ce))return null;var we=null;if(Zt["text-font"]&&(we=U.parse(Zt["text-font"],1,mi(wn)),!we))return null;var Le=null;if(Zt["text-color"]&&(Le=U.parse(Zt["text-color"],1,On),!Le))return null;var Ve=ct[ct.length-1];Ve.scale=ce,Ve.font=we,Ve.textColor=Le}else{var ar=U.parse(D[Et],1,zn);if(!ar)return null;var er=ar.type.kind;if(er!=="string"&&er!=="value"&&er!=="null"&&er!=="resolvedImage")return U.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");yt=!0,ct.push({content:ar,scale:null,font:null,textColor:null})}}return new ao(ct)},ao.prototype.evaluate=function(D){var U=function(rt){var ct=rt.content.evaluate(D);return Oi(ct)===Ra?new Iu("",ct,null,null,null):new Iu(sl(ct),null,rt.scale?rt.scale.evaluate(D):null,rt.font?rt.font.evaluate(D).join(","):null,rt.textColor?rt.textColor.evaluate(D):null)};return new Qi(this.sections.map(U))},ao.prototype.eachChild=function(D){for(var U=0,rt=this.sections;U<rt.length;U+=1){var ct=rt[U];D(ct.content),ct.scale&&D(ct.scale),ct.font&&D(ct.font),ct.textColor&&D(ct.textColor)}},ao.prototype.outputDefined=function(){return!1},ao.prototype.serialize=function(){for(var D=["format"],U=0,rt=this.sections;U<rt.length;U+=1){var ct=rt[U];D.push(ct.content.serialize());var yt={};ct.scale&&(yt["font-scale"]=ct.scale.serialize()),ct.font&&(yt["text-font"]=ct.font.serialize()),ct.textColor&&(yt["text-color"]=ct.textColor.serialize()),D.push(yt)}return D};var ko=function(D){this.type=Ra,this.input=D};ko.parse=function(D,U){if(D.length!==2)return U.error("Expected two arguments.");var rt=U.parse(D[1],1,wn);return rt?new ko(rt):U.error("No image name provided.")},ko.prototype.evaluate=function(D){var U=this.input.evaluate(D),rt=mo.fromString(U);return rt&&D.availableImages&&(rt.available=D.availableImages.indexOf(U)>-1),rt},ko.prototype.eachChild=function(D){D(this.input)},ko.prototype.outputDefined=function(){return!1},ko.prototype.serialize=function(){return["image",this.input.serialize()]};var of={"to-boolean":An,"to-color":On,"to-number":$r,"to-string":wn},Eo=function(D,U){this.type=D,this.args=U};Eo.parse=function(D,U){if(D.length<2)return U.error("Expected at least one argument.");var rt=D[0];if((rt==="to-boolean"||rt==="to-string")&&D.length!==2)return U.error("Expected one argument.");for(var ct=of[rt],yt=[],Et=1;Et<D.length;Et++){var Zt=U.parse(D[Et],Et,zn);if(!Zt)return null;yt.push(Zt)}return new Eo(ct,yt)},Eo.prototype.evaluate=function(D){if(this.type.kind==="boolean")return!!this.args[0].evaluate(D);if(this.type.kind==="color"){for(var U,rt,ct=0,yt=this.args;ct<yt.length;ct+=1){var Et=yt[ct];if(U=Et.evaluate(D),rt=null,U instanceof ni)return U;if(typeof U=="string"){var Zt=D.parseColor(U);if(Zt)return Zt}else if(Array.isArray(U)&&(U.length<3||U.length>4?rt="Invalid rbga value "+JSON.stringify(U)+": expected an array containing either three or four numeric values.":rt=ol(U[0],U[1],U[2],U[3]),!rt))return new ni(U[0]/255,U[1]/255,U[2]/255,U[3])}throw new Xi(rt||"Could not parse color from value '"+(typeof U=="string"?U:String(JSON.stringify(U)))+"'")}else if(this.type.kind==="number"){for(var ce=null,we=0,Le=this.args;we<Le.length;we+=1){var Ve=Le[we];if(ce=Ve.evaluate(D),ce===null)return 0;var ar=Number(ce);if(!isNaN(ar))return ar}throw new Xi("Could not convert "+JSON.stringify(ce)+" to number.")}else return this.type.kind==="formatted"?Qi.fromString(sl(this.args[0].evaluate(D))):this.type.kind==="resolvedImage"?mo.fromString(sl(this.args[0].evaluate(D))):sl(this.args[0].evaluate(D))},Eo.prototype.eachChild=function(D){this.args.forEach(D)},Eo.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},Eo.prototype.serialize=function(){if(this.type.kind==="formatted")return new ao([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ko(this.args[0]).serialize();var D=["to-"+this.type.kind];return this.eachChild(function(U){D.push(U.serialize())}),D};var Zf=["Unknown","Point","LineString","Polygon"],as=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};as.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},as.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Zf[this.feature.type]:this.feature.type:null},as.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},as.prototype.canonicalID=function(){return this.canonical},as.prototype.properties=function(){return this.feature&&this.feature.properties||{}},as.prototype.parseColor=function(D){var U=this._parseColorCache[D];return U||(U=this._parseColorCache[D]=ni.parse(D)),U};var $i=function(D,U,rt,ct){this.name=D,this.type=U,this._evaluate=rt,this.args=ct};$i.prototype.evaluate=function(D){return this._evaluate(D,this.args)},$i.prototype.eachChild=function(D){this.args.forEach(D)},$i.prototype.outputDefined=function(){return!1},$i.prototype.serialize=function(){return[this.name].concat(this.args.map(function(D){return D.serialize()}))},$i.parse=function(D,U){var rt,ct=D[0],yt=$i.definitions[ct];if(!yt)return U.error('Unknown expression "'+ct+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Et=Array.isArray(yt)?yt[0]:yt.type,Zt=Array.isArray(yt)?[[yt[1],yt[2]]]:yt.overloads,ce=Zt.filter(function(Aa){var Ca=Aa[0];return!Array.isArray(Ca)||Ca.length===D.length-1}),we=null,Le=0,Ve=ce;Le<Ve.length;Le+=1){var ar=Ve[Le],er=ar[0],br=ar[1];we=new os(U.registry,U.path,null,U.scope);for(var Ur=[],fn=!1,tn=1;tn<D.length;tn++){var Sn=D[tn],xn=Array.isArray(er)?er[tn-1]:er.type,Mn=we.parse(Sn,1+Ur.length,xn);if(!Mn){fn=!0;break}Ur.push(Mn)}if(!fn){if(Array.isArray(er)&&er.length!==Ur.length){we.error("Expected "+er.length+" arguments, but found "+Ur.length+" instead.");continue}for(var _n=0;_n<Ur.length;_n++){var jn=Array.isArray(er)?er[_n]:er.type,sa=Ur[_n];we.concat(_n+1).checkSubtype(jn,sa.type)}if(we.errors.length===0)return new $i(ct,Et,br,Ur)}}if(ce.length===1)(rt=U.errors).push.apply(rt,we.errors);else{for(var na=ce.length?ce:Zt,Ta=na.map(function(Aa){var Ca=Aa[0];return ku(Ca)}).join(" | "),ya=[],ba=1;ba<D.length;ba++){var Ua=U.parse(D[ba],1+ya.length);if(!Ua)return null;ya.push(ri(Ua.type))}U.error("Expected arguments of type "+Ta+", but found ("+ya.join(", ")+") instead.")}return null},$i.register=function(D,U){$i.definitions=U;for(var rt in U)D[rt]=$i};function ku(R){return Array.isArray(R)?"("+R.map(ri).join(", ")+")":"("+ri(R.type)+"...)"}var Ls=function(D,U,rt){this.type=Jn,this.locale=rt,this.caseSensitive=D,this.diacriticSensitive=U};Ls.parse=function(D,U){if(D.length!==2)return U.error("Expected one argument.");var rt=D[1];if(typeof rt!="object"||Array.isArray(rt))return U.error("Collator options argument must be an object.");var ct=U.parse(rt["case-sensitive"]===void 0?!1:rt["case-sensitive"],1,An);if(!ct)return null;var yt=U.parse(rt["diacritic-sensitive"]===void 0?!1:rt["diacritic-sensitive"],1,An);if(!yt)return null;var Et=null;return rt.locale&&(Et=U.parse(rt.locale,1,wn),!Et)?null:new Ls(ct,yt,Et)},Ls.prototype.evaluate=function(D){return new _l(this.caseSensitive.evaluate(D),this.diacriticSensitive.evaluate(D),this.locale?this.locale.evaluate(D):null)},Ls.prototype.eachChild=function(D){D(this.caseSensitive),D(this.diacriticSensitive),this.locale&&D(this.locale)},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){var D={};return D["case-sensitive"]=this.caseSensitive.serialize(),D["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(D.locale=this.locale.serialize()),["collator",D]};var is=8192;function zu(R,D){R[0]=Math.min(R[0],D[0]),R[1]=Math.min(R[1],D[1]),R[2]=Math.max(R[2],D[0]),R[3]=Math.max(R[3],D[1])}function sf(R){return(180+R)/360}function jf(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}function fu(R,D){return!(R[0]<=D[0]||R[2]>=D[2]||R[1]<=D[1]||R[3]>=D[3])}function Kf(R,D){var U=sf(R[0]),rt=jf(R[1]),ct=Math.pow(2,D.z);return[Math.round(U*ct*is),Math.round(rt*ct*is)]}function Jf(R,D,U){var rt=R[0]-D[0],ct=R[1]-D[1],yt=R[0]-U[0],Et=R[1]-U[1];return rt*Et-yt*ct===0&&rt*yt<=0&&ct*Et<=0}function Qf(R,D,U){return D[1]>R[1]!=U[1]>R[1]&&R[0]<(U[0]-D[0])*(R[1]-D[1])/(U[1]-D[1])+D[0]}function _u(R,D){for(var U=!1,rt=0,ct=D.length;rt<ct;rt++)for(var yt=D[rt],Et=0,Zt=yt.length;Et<Zt-1;Et++){if(Jf(R,yt[Et],yt[Et+1]))return!1;Qf(R,yt[Et],yt[Et+1])&&(U=!U)}return U}function $f(R,D){for(var U=0;U<D.length;U++)if(_u(R,D[U]))return!0;return!1}function qf(R,D){return R[0]*D[1]-R[1]*D[0]}function lf(R,D,U,rt){var ct=R[0]-U[0],yt=R[1]-U[1],Et=D[0]-U[0],Zt=D[1]-U[1],ce=rt[0]-U[0],we=rt[1]-U[1],Le=ct*we-ce*yt,Ve=Et*we-ce*Zt;return Le>0&&Ve<0||Le<0&&Ve>0}function uf(R,D,U,rt){var ct=[D[0]-R[0],D[1]-R[1]],yt=[rt[0]-U[0],rt[1]-U[1]];return qf(yt,ct)===0?!1:!!(lf(R,D,U,rt)&&lf(U,rt,R,D))}function Ys(R,D,U){for(var rt=0,ct=U;rt<ct.length;rt+=1)for(var yt=ct[rt],Et=0;Et<yt.length-1;++Et)if(uf(R,D,yt[Et],yt[Et+1]))return!0;return!1}function ul(R,D){for(var U=0;U<R.length;++U)if(!_u(R[U],D))return!1;for(var rt=0;rt<R.length-1;++rt)if(Ys(R[rt],R[rt+1],D))return!1;return!0}function Fl(R,D){for(var U=0;U<D.length;U++)if(ul(R,D[U]))return!0;return!1}function Ol(R,D,U){for(var rt=[],ct=0;ct<R.length;ct++){for(var yt=[],Et=0;Et<R[ct].length;Et++){var Zt=Kf(R[ct][Et],U);zu(D,Zt),yt.push(Zt)}rt.push(yt)}return rt}function ff(R,D,U){for(var rt=[],ct=0;ct<R.length;ct++){var yt=Ol(R[ct],D,U);rt.push(yt)}return rt}function ms(R,D,U,rt){if(R[0]<U[0]||R[0]>U[2]){var ct=rt*.5,yt=R[0]-U[0]>ct?-rt:U[0]-R[0]>ct?rt:0;yt===0&&(yt=R[0]-U[2]>ct?-rt:U[2]-R[0]>ct?rt:0),R[0]+=yt}zu(D,R)}function tc(R){R[0]=R[1]=1/0,R[2]=R[3]=-1/0}function cu(R,D,U,rt){for(var ct=Math.pow(2,rt.z)*is,yt=[rt.x*is,rt.y*is],Et=[],Zt=0,ce=R;Zt<ce.length;Zt+=1)for(var we=ce[Zt],Le=0,Ve=we;Le<Ve.length;Le+=1){var ar=Ve[Le],er=[ar.x+yt[0],ar.y+yt[1]];ms(er,D,U,ct),Et.push(er)}return Et}function cf(R,D,U,rt){for(var ct=Math.pow(2,rt.z)*is,yt=[rt.x*is,rt.y*is],Et=[],Zt=0,ce=R;Zt<ce.length;Zt+=1){for(var we=ce[Zt],Le=[],Ve=0,ar=we;Ve<ar.length;Ve+=1){var er=ar[Ve],br=[er.x+yt[0],er.y+yt[1]];zu(D,br),Le.push(br)}Et.push(Le)}if(D[2]-D[0]<=ct/2){tc(D);for(var Ur=0,fn=Et;Ur<fn.length;Ur+=1)for(var tn=fn[Ur],Sn=0,xn=tn;Sn<xn.length;Sn+=1){var Mn=xn[Sn];ms(Mn,D,U,ct)}}return Et}function hf(R,D){var U=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],ct=R.canonicalID();if(D.type==="Polygon"){var yt=Ol(D.coordinates,rt,ct),Et=cu(R.geometry(),U,rt,ct);if(!fu(U,rt))return!1;for(var Zt=0,ce=Et;Zt<ce.length;Zt+=1){var we=ce[Zt];if(!_u(we,yt))return!1}}if(D.type==="MultiPolygon"){var Le=ff(D.coordinates,rt,ct),Ve=cu(R.geometry(),U,rt,ct);if(!fu(U,rt))return!1;for(var ar=0,er=Ve;ar<er.length;ar+=1){var br=er[ar];if(!$f(br,Le))return!1}}return!0}function hu(R,D){var U=[1/0,1/0,-1/0,-1/0],rt=[1/0,1/0,-1/0,-1/0],ct=R.canonicalID();if(D.type==="Polygon"){var yt=Ol(D.coordinates,rt,ct),Et=cf(R.geometry(),U,rt,ct);if(!fu(U,rt))return!1;for(var Zt=0,ce=Et;Zt<ce.length;Zt+=1){var we=ce[Zt];if(!ul(we,yt))return!1}}if(D.type==="MultiPolygon"){var Le=ff(D.coordinates,rt,ct),Ve=cf(R.geometry(),U,rt,ct);if(!fu(U,rt))return!1;for(var ar=0,er=Ve;ar<er.length;ar+=1){var br=er[ar];if(!Fl(br,Le))return!1}}return!0}var Vo=function(D,U){this.type=An,this.geojson=D,this.geometries=U};Vo.parse=function(D,U){if(D.length!==2)return U.error("'within' expression requires exactly one argument, but found "+(D.length-1)+" instead.");if(uu(D[1])){var rt=D[1];if(rt.type==="FeatureCollection")for(var ct=0;ct<rt.features.length;++ct){var yt=rt.features[ct].geometry.type;if(yt==="Polygon"||yt==="MultiPolygon")return new Vo(rt,rt.features[ct].geometry)}else if(rt.type==="Feature"){var Et=rt.geometry.type;if(Et==="Polygon"||Et==="MultiPolygon")return new Vo(rt,rt.geometry)}else if(rt.type==="Polygon"||rt.type==="MultiPolygon")return new Vo(rt,rt)}return U.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Vo.prototype.evaluate=function(D){if(D.geometry()!=null&&D.canonicalID()!=null){if(D.geometryType()==="Point")return hf(D,this.geometries);if(D.geometryType()==="LineString")return hu(D,this.geometries)}return!1},Vo.prototype.eachChild=function(){},Vo.prototype.outputDefined=function(){return!0},Vo.prototype.serialize=function(){return["within",this.geojson]};function fl(R){if(R instanceof $i){if(R.name==="get"&&R.args.length===1)return!1;if(R.name==="feature-state")return!1;if(R.name==="has"&&R.args.length===1)return!1;if(R.name==="properties"||R.name==="geometry-type"||R.name==="id")return!1;if(/^filter-/.test(R.name))return!1}if(R instanceof Vo)return!1;var D=!0;return R.eachChild(function(U){D&&!fl(U)&&(D=!1)}),D}function Xs(R){if(R instanceof $i&&R.name==="feature-state")return!1;var D=!0;return R.eachChild(function(U){D&&!Xs(U)&&(D=!1)}),D}function Bl(R,D){if(R instanceof $i&&D.indexOf(R.name)>=0)return!1;var U=!0;return R.eachChild(function(rt){U&&!Bl(rt,D)&&(U=!1)}),U}var Ps=function(D,U){this.type=U.type,this.name=D,this.boundExpression=U};Ps.parse=function(D,U){if(D.length!==2||typeof D[1]!="string")return U.error("'var' expression requires exactly one string literal argument.");var rt=D[1];return U.scope.has(rt)?new Ps(rt,U.scope.get(rt)):U.error('Unknown variable "'+rt+'". Make sure "'+rt+'" has been bound in an enclosing "let" expression before using it.',1)},Ps.prototype.evaluate=function(D){return this.boundExpression.evaluate(D)},Ps.prototype.eachChild=function(){},Ps.prototype.outputDefined=function(){return!1},Ps.prototype.serialize=function(){return["var",this.name]};var os=function(D,U,rt,ct,yt){U===void 0&&(U=[]),ct===void 0&&(ct=new Yr),yt===void 0&&(yt=[]),this.registry=D,this.path=U,this.key=U.map(function(Et){return"["+Et+"]"}).join(""),this.scope=ct,this.errors=yt,this.expectedType=rt};os.prototype.parse=function(D,U,rt,ct,yt){return yt===void 0&&(yt={}),U?this.concat(U,rt,ct)._parse(D,yt):this._parse(D,yt)},os.prototype._parse=function(D,U){(D===null||typeof D=="string"||typeof D=="boolean"||typeof D=="number")&&(D=["literal",D]);function rt(Le,Ve,ar){return ar==="assert"?new no(Ve,[Le]):ar==="coerce"?new Eo(Ve,[Le]):Le}if(Array.isArray(D)){if(D.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ct=D[0];if(typeof ct!="string")return this.error("Expression name must be a string, but found "+typeof ct+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var yt=this.registry[ct];if(yt){var Et=yt.parse(D,this);if(!Et)return null;if(this.expectedType){var Zt=this.expectedType,ce=Et.type;if((Zt.kind==="string"||Zt.kind==="number"||Zt.kind==="boolean"||Zt.kind==="object"||Zt.kind==="array")&&ce.kind==="value")Et=rt(Et,Zt,U.typeAnnotation||"assert");else if((Zt.kind==="color"||Zt.kind==="formatted"||Zt.kind==="resolvedImage")&&(ce.kind==="value"||ce.kind==="string"))Et=rt(Et,Zt,U.typeAnnotation||"coerce");else if(this.checkSubtype(Zt,ce))return null}if(!(Et instanceof Ui)&&Et.type.kind!=="resolvedImage"&&Fu(Et)){var we=new as;try{Et=new Ui(Et.type,Et.evaluate(we))}catch(Le){return this.error(Le.message),null}}return Et}return this.error('Unknown expression "'+ct+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof D>"u"?this.error("'undefined' value invalid. Use null instead."):typeof D=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof D+" instead.")},os.prototype.concat=function(D,U,rt){var ct=typeof D=="number"?this.path.concat(D):this.path,yt=rt?this.scope.concat(rt):this.scope;return new os(this.registry,ct,U||null,yt,this.errors)},os.prototype.error=function(D){for(var U=[],rt=arguments.length-1;rt-- >0;)U[rt]=arguments[rt+1];var ct=""+this.key+U.map(function(yt){return"["+yt+"]"}).join("");this.errors.push(new Er(ct,D))},os.prototype.checkSubtype=function(D,U){var rt=So(D,U);return rt&&this.error(rt),rt};function Fu(R){if(R instanceof Ps)return Fu(R.boundExpression);if(R instanceof $i&&R.name==="error")return!1;if(R instanceof Ls)return!1;if(R instanceof Vo)return!1;var D=R instanceof Eo||R instanceof no,U=!0;return R.eachChild(function(rt){D?U=U&&Fu(rt):U=U&&rt instanceof Ui}),U?fl(R)&&Bl(R,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function cl(R,D){for(var U=R.length-1,rt=0,ct=U,yt=0,Et,Zt;rt<=ct;)if(yt=Math.floor((rt+ct)/2),Et=R[yt],Zt=R[yt+1],Et<=D){if(yt===U||D<Zt)return yt;rt=yt+1}else if(Et>D)ct=yt-1;else throw new Xi("Input is not a number.");return 0}var Ho=function(D,U,rt){this.type=D,this.input=U,this.labels=[],this.outputs=[];for(var ct=0,yt=rt;ct<yt.length;ct+=1){var Et=yt[ct],Zt=Et[0],ce=Et[1];this.labels.push(Zt),this.outputs.push(ce)}};Ho.parse=function(D,U){if(D.length-1<4)return U.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if((D.length-1)%2!==0)return U.error("Expected an even number of arguments.");var rt=U.parse(D[1],1,$r);if(!rt)return null;var ct=[],yt=null;U.expectedType&&U.expectedType.kind!=="value"&&(yt=U.expectedType);for(var Et=1;Et<D.length;Et+=2){var Zt=Et===1?-1/0:D[Et],ce=D[Et+1],we=Et,Le=Et+1;if(typeof Zt!="number")return U.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',we);if(ct.length&&ct[ct.length-1][0]>=Zt)return U.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',we);var Ve=U.parse(ce,Le,yt);if(!Ve)return null;yt=yt||Ve.type,ct.push([Zt,Ve])}return new Ho(yt,rt,ct)},Ho.prototype.evaluate=function(D){var U=this.labels,rt=this.outputs;if(U.length===1)return rt[0].evaluate(D);var ct=this.input.evaluate(D);if(ct<=U[0])return rt[0].evaluate(D);var yt=U.length;if(ct>=U[yt-1])return rt[yt-1].evaluate(D);var Et=cl(U,ct);return rt[Et].evaluate(D)},Ho.prototype.eachChild=function(D){D(this.input);for(var U=0,rt=this.outputs;U<rt.length;U+=1){var ct=rt[U];D(ct)}},Ho.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})},Ho.prototype.serialize=function(){for(var D=["step",this.input.serialize()],U=0;U<this.labels.length;U++)U>0&&D.push(this.labels[U]),D.push(this.outputs[U].serialize());return D};function zi(R,D,U){return R*(1-U)+D*U}function Ou(R,D,U){return new ni(zi(R.r,D.r,U),zi(R.g,D.g,U),zi(R.b,D.b,U),zi(R.a,D.a,U))}function ec(R,D,U){return R.map(function(rt,ct){return zi(rt,D[ct],U)})}var vu=Object.freeze({__proto__:null,number:zi,color:Ou,array:ec}),hl=.95047,vl=1,Co=1.08883,du=4/29,dl=6/29,pu=3*dl*dl,rc=dl*dl*dl,vf=Math.PI/180,Bu=180/Math.PI;function Nu(R){return R>rc?Math.pow(R,.3333333333333333):R/pu+du}function Uu(R){return R>dl?R*R*R:pu*(R-du)}function pl(R){return 255*(R<=.0031308?12.92*R:1.055*Math.pow(R,.4166666666666667)-.055)}function gu(R){return R/=255,R<=.04045?R/12.92:Math.pow((R+.055)/1.055,2.4)}function Nl(R){var D=gu(R.r),U=gu(R.g),rt=gu(R.b),ct=Nu((.4124564*D+.3575761*U+.1804375*rt)/hl),yt=Nu((.2126729*D+.7151522*U+.072175*rt)/vl),Et=Nu((.0193339*D+.119192*U+.9503041*rt)/Co);return{l:116*yt-16,a:500*(ct-yt),b:200*(yt-Et),alpha:R.a}}function yu(R){var D=(R.l+16)/116,U=isNaN(R.a)?D:D+R.a/500,rt=isNaN(R.b)?D:D-R.b/200;return D=vl*Uu(D),U=hl*Uu(U),rt=Co*Uu(rt),new ni(pl(3.2404542*U-1.5371385*D-.4985314*rt),pl(-.969266*U+1.8760108*D+.041556*rt),pl(.0556434*U-.2040259*D+1.0572252*rt),R.alpha)}function xi(R,D,U){return{l:zi(R.l,D.l,U),a:zi(R.a,D.a,U),b:zi(R.b,D.b,U),alpha:zi(R.alpha,D.alpha,U)}}function df(R){var D=Nl(R),U=D.l,rt=D.a,ct=D.b,yt=Math.atan2(ct,rt)*Bu;return{h:yt<0?yt+360:yt,c:Math.sqrt(rt*rt+ct*ct),l:U,alpha:R.a}}function Go(R){var D=R.h*vf,U=R.c,rt=R.l;return yu({l:rt,a:Math.cos(D)*U,b:Math.sin(D)*U,alpha:R.alpha})}function pf(R,D,U){var rt=D-R;return R+U*(rt>180||rt<-180?rt-360*Math.round(rt/360):rt)}function Vu(R,D,U){return{h:pf(R.h,D.h,U),c:zi(R.c,D.c,U),l:zi(R.l,D.l,U),alpha:zi(R.alpha,D.alpha,U)}}var Zs={forward:Nl,reverse:yu,interpolate:xi},Rs={forward:df,reverse:Go,interpolate:Vu},mu=Object.freeze({__proto__:null,lab:Zs,hcl:Rs}),Bi=function(D,U,rt,ct,yt){this.type=D,this.operator=U,this.interpolation=rt,this.input=ct,this.labels=[],this.outputs=[];for(var Et=0,Zt=yt;Et<Zt.length;Et+=1){var ce=Zt[Et],we=ce[0],Le=ce[1];this.labels.push(we),this.outputs.push(Le)}};Bi.interpolationFactor=function(D,U,rt,ct){var yt=0;if(D.name==="exponential")yt=Ul(U,D.base,rt,ct);else if(D.name==="linear")yt=Ul(U,1,rt,ct);else if(D.name==="cubic-bezier"){var Et=D.controlPoints,Zt=new v(Et[0],Et[1],Et[2],Et[3]);yt=Zt.solve(Ul(U,1,rt,ct))}return yt},Bi.parse=function(D,U){var rt=D[0],ct=D[1],yt=D[2],Et=D.slice(3);if(!Array.isArray(ct)||ct.length===0)return U.error("Expected an interpolation type expression.",1);if(ct[0]==="linear")ct={name:"linear"};else if(ct[0]==="exponential"){var Zt=ct[1];if(typeof Zt!="number")return U.error("Exponential interpolation requires a numeric base.",1,1);ct={name:"exponential",base:Zt}}else if(ct[0]==="cubic-bezier"){var ce=ct.slice(1);if(ce.length!==4||ce.some(function(tn){return typeof tn!="number"||tn<0||tn>1}))return U.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ct={name:"cubic-bezier",controlPoints:ce}}else return U.error("Unknown interpolation type "+String(ct[0]),1,0);if(D.length-1<4)return U.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if((D.length-1)%2!==0)return U.error("Expected an even number of arguments.");if(yt=U.parse(yt,2,$r),!yt)return null;var we=[],Le=null;rt==="interpolate-hcl"||rt==="interpolate-lab"?Le=On:U.expectedType&&U.expectedType.kind!=="value"&&(Le=U.expectedType);for(var Ve=0;Ve<Et.length;Ve+=2){var ar=Et[Ve],er=Et[Ve+1],br=Ve+3,Ur=Ve+4;if(typeof ar!="number")return U.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',br);if(we.length&&we[we.length-1][0]>=ar)return U.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',br);var fn=U.parse(er,Ur,Le);if(!fn)return null;Le=Le||fn.type,we.push([ar,fn])}return Le.kind!=="number"&&Le.kind!=="color"&&!(Le.kind==="array"&&Le.itemType.kind==="number"&&typeof Le.N=="number")?U.error("Type "+ri(Le)+" is not interpolatable."):new Bi(Le,rt,ct,yt,we)},Bi.prototype.evaluate=function(D){var U=this.labels,rt=this.outputs;if(U.length===1)return rt[0].evaluate(D);var ct=this.input.evaluate(D);if(ct<=U[0])return rt[0].evaluate(D);var yt=U.length;if(ct>=U[yt-1])return rt[yt-1].evaluate(D);var Et=cl(U,ct),Zt=U[Et],ce=U[Et+1],we=Bi.interpolationFactor(this.interpolation,ct,Zt,ce),Le=rt[Et].evaluate(D),Ve=rt[Et+1].evaluate(D);return this.operator==="interpolate"?vu[this.type.kind.toLowerCase()](Le,Ve,we):this.operator==="interpolate-hcl"?Rs.reverse(Rs.interpolate(Rs.forward(Le),Rs.forward(Ve),we)):Zs.reverse(Zs.interpolate(Zs.forward(Le),Zs.forward(Ve),we))},Bi.prototype.eachChild=function(D){D(this.input);for(var U=0,rt=this.outputs;U<rt.length;U+=1){var ct=rt[U];D(ct)}},Bi.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})},Bi.prototype.serialize=function(){var D;this.interpolation.name==="linear"?D=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?D=["linear"]:D=["exponential",this.interpolation.base]:D=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var U=[this.operator,D,this.input.serialize()],rt=0;rt<this.labels.length;rt++)U.push(this.labels[rt],this.outputs[rt].serialize());return U};function Ul(R,D,U,rt){var ct=rt-U,yt=R-U;return ct===0?0:D===1?yt/ct:(Math.pow(D,yt)-1)/(Math.pow(D,ct)-1)}var Wo=function(D,U){this.type=D,this.args=U};Wo.parse=function(D,U){if(D.length<2)return U.error("Expectected at least one argument.");var rt=null,ct=U.expectedType;ct&&ct.kind!=="value"&&(rt=ct);for(var yt=[],Et=0,Zt=D.slice(1);Et<Zt.length;Et+=1){var ce=Zt[Et],we=U.parse(ce,1+yt.length,rt,void 0,{typeAnnotation:"omit"});if(!we)return null;rt=rt||we.type,yt.push(we)}var Le=ct&&yt.some(function(Ve){return So(ct,Ve.type)});return Le?new Wo(zn,yt):new Wo(rt,yt)},Wo.prototype.evaluate=function(D){for(var U=null,rt=0,ct,yt=0,Et=this.args;yt<Et.length;yt+=1){var Zt=Et[yt];if(rt++,U=Zt.evaluate(D),U&&U instanceof mo&&!U.available&&(ct||(ct=U.name),U=null,rt===this.args.length&&(U=ct)),U!==null)break}return U},Wo.prototype.eachChild=function(D){this.args.forEach(D)},Wo.prototype.outputDefined=function(){return this.args.every(function(D){return D.outputDefined()})},Wo.prototype.serialize=function(){var D=["coalesce"];return this.eachChild(function(U){D.push(U.serialize())}),D};var xs=function(D,U){this.type=U.type,this.bindings=[].concat(D),this.result=U};xs.prototype.evaluate=function(D){return this.result.evaluate(D)},xs.prototype.eachChild=function(D){for(var U=0,rt=this.bindings;U<rt.length;U+=1){var ct=rt[U];D(ct[1])}D(this.result)},xs.parse=function(D,U){if(D.length<4)return U.error("Expected at least 3 arguments, but found "+(D.length-1)+" instead.");for(var rt=[],ct=1;ct<D.length-1;ct+=2){var yt=D[ct];if(typeof yt!="string")return U.error("Expected string, but found "+typeof yt+" instead.",ct);if(/[^a-zA-Z0-9_]/.test(yt))return U.error("Variable names must contain only alphanumeric characters or '_'.",ct);var Et=U.parse(D[ct+1],ct+1);if(!Et)return null;rt.push([yt,Et])}var Zt=U.parse(D[D.length-1],D.length-1,U.expectedType,rt);return Zt?new xs(rt,Zt):null},xs.prototype.outputDefined=function(){return this.result.outputDefined()},xs.prototype.serialize=function(){for(var D=["let"],U=0,rt=this.bindings;U<rt.length;U+=1){var ct=rt[U],yt=ct[0],Et=ct[1];D.push(yt,Et.serialize())}return D.push(this.result.serialize()),D};var js=function(D,U,rt){this.type=D,this.index=U,this.input=rt};js.parse=function(D,U){if(D.length!==3)return U.error("Expected 2 arguments, but found "+(D.length-1)+" instead.");var rt=U.parse(D[1],1,$r),ct=U.parse(D[2],2,mi(U.expectedType||zn));if(!rt||!ct)return null;var yt=ct.type;return new js(yt.itemType,rt,ct)},js.prototype.evaluate=function(D){var U=this.index.evaluate(D),rt=this.input.evaluate(D);if(U<0)throw new Xi("Array index out of bounds: "+U+" < 0.");if(U>=rt.length)throw new Xi("Array index out of bounds: "+U+" > "+(rt.length-1)+".");if(U!==Math.floor(U))throw new Xi("Array index must be an integer, but found "+U+" instead.");return rt[U]},js.prototype.eachChild=function(D){D(this.index),D(this.input)},js.prototype.outputDefined=function(){return!1},js.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ds=function(D,U){this.type=An,this.needle=D,this.haystack=U};Ds.parse=function(D,U){if(D.length!==3)return U.error("Expected 2 arguments, but found "+(D.length-1)+" instead.");var rt=U.parse(D[1],1,zn),ct=U.parse(D[2],2,zn);return!rt||!ct?null:ro(rt.type,[An,wn,$r,Gr,zn])?new Ds(rt,ct):U.error("Expected first argument to be of type boolean, string, number or null, but found "+ri(rt.type)+" instead")},Ds.prototype.evaluate=function(D){var U=this.needle.evaluate(D),rt=this.haystack.evaluate(D);if(!rt)return!1;if(!ys(U,["boolean","string","number","null"]))throw new Xi("Expected first argument to be of type boolean, string, number or null, but found "+ri(Oi(U))+" instead.");if(!ys(rt,["string","array"]))throw new Xi("Expected second argument to be of type array or string, but found "+ri(Oi(rt))+" instead.");return rt.indexOf(U)>=0},Ds.prototype.eachChild=function(D){D(this.needle),D(this.haystack)},Ds.prototype.outputDefined=function(){return!0},Ds.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Yo=function(D,U,rt){this.type=$r,this.needle=D,this.haystack=U,this.fromIndex=rt};Yo.parse=function(D,U){if(D.length<=2||D.length>=5)return U.error("Expected 3 or 4 arguments, but found "+(D.length-1)+" instead.");var rt=U.parse(D[1],1,zn),ct=U.parse(D[2],2,zn);if(!rt||!ct)return null;if(!ro(rt.type,[An,wn,$r,Gr,zn]))return U.error("Expected first argument to be of type boolean, string, number or null, but found "+ri(rt.type)+" instead");if(D.length===4){var yt=U.parse(D[3],3,$r);return yt?new Yo(rt,ct,yt):null}else return new Yo(rt,ct)},Yo.prototype.evaluate=function(D){var U=this.needle.evaluate(D),rt=this.haystack.evaluate(D);if(!ys(U,["boolean","string","number","null"]))throw new Xi("Expected first argument to be of type boolean, string, number or null, but found "+ri(Oi(U))+" instead.");if(!ys(rt,["string","array"]))throw new Xi("Expected second argument to be of type array or string, but found "+ri(Oi(rt))+" instead.");if(this.fromIndex){var ct=this.fromIndex.evaluate(D);return rt.indexOf(U,ct)}return rt.indexOf(U)},Yo.prototype.eachChild=function(D){D(this.needle),D(this.haystack),this.fromIndex&&D(this.fromIndex)},Yo.prototype.outputDefined=function(){return!1},Yo.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var D=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),D]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var bs=function(D,U,rt,ct,yt,Et){this.inputType=D,this.type=U,this.input=rt,this.cases=ct,this.outputs=yt,this.otherwise=Et};bs.parse=function(D,U){if(D.length<5)return U.error("Expected at least 4 arguments, but found only "+(D.length-1)+".");if(D.length%2!==1)return U.error("Expected an even number of arguments.");var rt,ct;U.expectedType&&U.expectedType.kind!=="value"&&(ct=U.expectedType);for(var yt={},Et=[],Zt=2;Zt<D.length-1;Zt+=2){var ce=D[Zt],we=D[Zt+1];Array.isArray(ce)||(ce=[ce]);var Le=U.concat(Zt);if(ce.length===0)return Le.error("Expected at least one branch label.");for(var Ve=0,ar=ce;Ve<ar.length;Ve+=1){var er=ar[Ve];if(typeof er!="number"&&typeof er!="string")return Le.error("Branch labels must be numbers or strings.");if(typeof er=="number"&&Math.abs(er)>Number.MAX_SAFE_INTEGER)return Le.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof er=="number"&&Math.floor(er)!==er)return Le.error("Numeric branch labels must be integer values.");if(!rt)rt=Oi(er);else if(Le.checkSubtype(rt,Oi(er)))return null;if(typeof yt[String(er)]<"u")return Le.error("Branch labels must be unique.");yt[String(er)]=Et.length}var br=U.parse(we,Zt,ct);if(!br)return null;ct=ct||br.type,Et.push(br)}var Ur=U.parse(D[1],1,zn);if(!Ur)return null;var fn=U.parse(D[D.length-1],D.length-1,ct);return!fn||Ur.type.kind!=="value"&&U.concat(1).checkSubtype(rt,Ur.type)?null:new bs(rt,ct,Ur,yt,Et,fn)},bs.prototype.evaluate=function(D){var U=this.input.evaluate(D),rt=Oi(U)===this.inputType&&this.outputs[this.cases[U]]||this.otherwise;return rt.evaluate(D)},bs.prototype.eachChild=function(D){D(this.input),this.outputs.forEach(D),D(this.otherwise)},bs.prototype.outputDefined=function(){return this.outputs.every(function(D){return D.outputDefined()})&&this.otherwise.outputDefined()},bs.prototype.serialize=function(){for(var D=this,U=["match",this.input.serialize()],rt=Object.keys(this.cases).sort(),ct=[],yt={},Et=0,Zt=rt;Et<Zt.length;Et+=1){var ce=Zt[Et],we=yt[this.cases[ce]];we===void 0?(yt[this.cases[ce]]=ct.length,ct.push([this.cases[ce],[ce]])):ct[we][1].push(ce)}for(var Le=function(Ur){return D.inputType.kind==="number"?Number(Ur):Ur},Ve=0,ar=ct;Ve<ar.length;Ve+=1){var er=ar[Ve],we=er[0],br=er[1];br.length===1?U.push(Le(br[0])):U.push(br.map(Le)),U.push(this.outputs[outputIndex$1].serialize())}return U.push(this.otherwise.serialize()),U};var Xo=function(D,U,rt){this.type=D,this.branches=U,this.otherwise=rt};Xo.parse=function(D,U){if(D.length<4)return U.error("Expected at least 3 arguments, but found only "+(D.length-1)+".");if(D.length%2!==0)return U.error("Expected an odd number of arguments.");var rt;U.expectedType&&U.expectedType.kind!=="value"&&(rt=U.expectedType);for(var ct=[],yt=1;yt<D.length-1;yt+=2){var Et=U.parse(D[yt],yt,An);if(!Et)return null;var Zt=U.parse(D[yt+1],yt+1,rt);if(!Zt)return null;ct.push([Et,Zt]),rt=rt||Zt.type}var ce=U.parse(D[D.length-1],D.length-1,rt);return ce?new Xo(rt,ct,ce):null},Xo.prototype.evaluate=function(D){for(var U=0,rt=this.branches;U<rt.length;U+=1){var ct=rt[U],yt=ct[0],Et=ct[1];if(yt.evaluate(D))return Et.evaluate(D)}return this.otherwise.evaluate(D)},Xo.prototype.eachChild=function(D){for(var U=0,rt=this.branches;U<rt.length;U+=1){var ct=rt[U],yt=ct[0],Et=ct[1];D(yt),D(Et)}D(this.otherwise)},Xo.prototype.outputDefined=function(){return this.branches.every(function(D){D[0];var U=D[1];return U.outputDefined()})&&this.otherwise.outputDefined()},Xo.prototype.serialize=function(){var D=["case"];return this.eachChild(function(U){D.push(U.serialize())}),D};var Fo=function(D,U,rt,ct){this.type=D,this.input=U,this.beginIndex=rt,this.endIndex=ct};Fo.parse=function(D,U){if(D.length<=2||D.length>=5)return U.error("Expected 3 or 4 arguments, but found "+(D.length-1)+" instead.");var rt=U.parse(D[1],1,zn),ct=U.parse(D[2],2,$r);if(!rt||!ct)return null;if(!ro(rt.type,[mi(zn),wn,zn]))return U.error("Expected first argument to be of type array or string, but found "+ri(rt.type)+" instead");if(D.length===4){var yt=U.parse(D[3],3,$r);return yt?new Fo(rt.type,rt,ct,yt):null}else return new Fo(rt.type,rt,ct)},Fo.prototype.evaluate=function(D){var U=this.input.evaluate(D),rt=this.beginIndex.evaluate(D);if(!ys(U,["string","array"]))throw new Xi("Expected first argument to be of type array or string, but found "+ri(Oi(U))+" instead.");if(this.endIndex){var ct=this.endIndex.evaluate(D);return U.slice(rt,ct)}return U.slice(rt)},Fo.prototype.eachChild=function(D){D(this.input),D(this.beginIndex),this.endIndex&&D(this.endIndex)},Fo.prototype.outputDefined=function(){return!1},Fo.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var D=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),D]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Vl(R,D){return R==="=="||R==="!="?D.kind==="boolean"||D.kind==="string"||D.kind==="number"||D.kind==="null"||D.kind==="value":D.kind==="string"||D.kind==="number"||D.kind==="value"}function nc(R,D,U){return D===U}function ac(R,D,U){return D!==U}function ic(R,D,U){return D<U}function oc(R,D,U){return D>U}function Hu(R,D,U){return D<=U}function gf(R,D,U){return D>=U}function yl(R,D,U,rt){return rt.compare(D,U)===0}function qi(R,D,U,rt){return!yl(R,D,U,rt)}function zo(R,D,U,rt){return rt.compare(D,U)<0}function ml(R,D,U,rt){return rt.compare(D,U)>0}function yf(R,D,U,rt){return rt.compare(D,U)<=0}function Hl(R,D,U,rt){return rt.compare(D,U)>=0}function ws(R,D,U){var rt=R!=="=="&&R!=="!=";return function(){function ct(yt,Et,Zt){this.type=An,this.lhs=yt,this.rhs=Et,this.collator=Zt,this.hasUntypedArgument=yt.type.kind==="value"||Et.type.kind==="value"}return ct.parse=function(Et,Zt){if(Et.length!==3&&Et.length!==4)return Zt.error("Expected two or three arguments.");var ce=Et[0],we=Zt.parse(Et[1],1,zn);if(!we)return null;if(!Vl(ce,we.type))return Zt.concat(1).error('"'+ce+`" comparisons are not supported for type '`+ri(we.type)+"'.");var Le=Zt.parse(Et[2],2,zn);if(!Le)return null;if(!Vl(ce,Le.type))return Zt.concat(2).error('"'+ce+`" comparisons are not supported for type '`+ri(Le.type)+"'.");if(we.type.kind!==Le.type.kind&&we.type.kind!=="value"&&Le.type.kind!=="value")return Zt.error("Cannot compare types '"+ri(we.type)+"' and '"+ri(Le.type)+"'.");rt&&(we.type.kind==="value"&&Le.type.kind!=="value"?we=new no(Le.type,[we]):we.type.kind!=="value"&&Le.type.kind==="value"&&(Le=new no(we.type,[Le])));var Ve=null;if(Et.length===4){if(we.type.kind!=="string"&&Le.type.kind!=="string"&&we.type.kind!=="value"&&Le.type.kind!=="value")return Zt.error("Cannot use collator to compare non-string types.");if(Ve=Zt.parse(Et[3],3,Jn),!Ve)return null}return new ct(we,Le,Ve)},ct.prototype.evaluate=function(Et){var Zt=this.lhs.evaluate(Et),ce=this.rhs.evaluate(Et);if(rt&&this.hasUntypedArgument){var we=Oi(Zt),Le=Oi(ce);if(we.kind!==Le.kind||!(we.kind==="string"||we.kind==="number"))throw new Xi('Expected arguments for "'+R+'" to be (string, string) or (number, number), but found ('+we.kind+", "+Le.kind+") instead.")}if(this.collator&&!rt&&this.hasUntypedArgument){var Ve=Oi(Zt),ar=Oi(ce);if(Ve.kind!=="string"||ar.kind!=="string")return D(Et,Zt,ce)}return this.collator?U(Et,Zt,ce,this.collator.evaluate(Et)):D(Et,Zt,ce)},ct.prototype.eachChild=function(Et){Et(this.lhs),Et(this.rhs),this.collator&&Et(this.collator)},ct.prototype.outputDefined=function(){return!0},ct.prototype.serialize=function(){var Et=[R];return this.eachChild(function(Zt){Et.push(Zt.serialize())}),Et},ct}()}var sc=ws("==",nc,yl),mf=ws("!=",ac,qi),xf=ws("<",ic,zo),Gu=ws(">",oc,ml),bf=ws("<=",Hu,yf),xo=ws(">=",gf,Hl),Zo=function(D,U,rt,ct,yt){this.type=wn,this.number=D,this.locale=U,this.currency=rt,this.minFractionDigits=ct,this.maxFractionDigits=yt};Zo.parse=function(D,U){if(D.length!==3)return U.error("Expected two arguments.");var rt=U.parse(D[1],1,$r);if(!rt)return null;var ct=D[2];if(typeof ct!="object"||Array.isArray(ct))return U.error("NumberFormat options argument must be an object.");var yt=null;if(ct.locale&&(yt=U.parse(ct.locale,1,wn),!yt))return null;var Et=null;if(ct.currency&&(Et=U.parse(ct.currency,1,wn),!Et))return null;var Zt=null;if(ct["min-fraction-digits"]&&(Zt=U.parse(ct["min-fraction-digits"],1,$r),!Zt))return null;var ce=null;return ct["max-fraction-digits"]&&(ce=U.parse(ct["max-fraction-digits"],1,$r),!ce)?null:new Zo(rt,yt,Et,Zt,ce)},Zo.prototype.evaluate=function(D){return new Intl.NumberFormat(this.locale?this.locale.evaluate(D):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(D):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(D):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(D):void 0}).format(this.number.evaluate(D))},Zo.prototype.eachChild=function(D){D(this.number),this.locale&&D(this.locale),this.currency&&D(this.currency),this.minFractionDigits&&D(this.minFractionDigits),this.maxFractionDigits&&D(this.maxFractionDigits)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){var D={};return this.locale&&(D.locale=this.locale.serialize()),this.currency&&(D.currency=this.currency.serialize()),this.minFractionDigits&&(D["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(D["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),D]};var Is=function(D){this.type=$r,this.input=D};Is.parse=function(D,U){if(D.length!==2)return U.error("Expected 1 argument, but found "+(D.length-1)+" instead.");var rt=U.parse(D[1],1);return rt?rt.type.kind!=="array"&&rt.type.kind!=="string"&&rt.type.kind!=="value"?U.error("Expected argument of type string or array, but found "+ri(rt.type)+" instead."):new Is(rt):null},Is.prototype.evaluate=function(D){var U=this.input.evaluate(D);if(typeof U=="string")return U.length;if(Array.isArray(U))return U.length;throw new Xi("Expected value to be of type string or array, but found "+ri(Oi(U))+" instead.")},Is.prototype.eachChild=function(D){D(this.input)},Is.prototype.outputDefined=function(){return!1},Is.prototype.serialize=function(){var D=["length"];return this.eachChild(function(U){D.push(U.serialize())}),D};var xl={"==":sc,"!=":mf,">":Gu,"<":xf,">=":xo,"<=":bf,array:no,at:js,boolean:no,case:Xo,coalesce:Wo,collator:Ls,format:ao,image:ko,in:Ds,"index-of":Yo,interpolate:Bi,"interpolate-hcl":Bi,"interpolate-lab":Bi,length:Is,let:xs,literal:Ui,match:bs,number:no,"number-format":Zo,object:no,slice:Fo,step:Ho,string:no,"to-boolean":Eo,"to-color":Eo,"to-number":Eo,"to-string":Eo,var:Ps,within:Vo};function xu(R,D){var U=D[0],rt=D[1],ct=D[2],yt=D[3];U=U.evaluate(R),rt=rt.evaluate(R),ct=ct.evaluate(R);var Et=yt?yt.evaluate(R):1,Zt=ol(U,rt,ct,Et);if(Zt)throw new Xi(Zt);return new ni(U/255*Et,rt/255*Et,ct/255*Et,Et)}function Ks(R,D){return R in D}function Js(R,D){var U=D[R];return typeof U>"u"?null:U}function wf(R,D,U,rt){for(;U<=rt;){var ct=U+rt>>1;if(D[ct]===R)return!0;D[ct]>R?rt=ct-1:U=ct+1}return!1}function Ts(R){return{type:R}}$i.register(xl,{error:[Zn,[wn],function(R,D){var U=D[0];throw new Xi(U.evaluate(R))}],typeof:[wn,[zn],function(R,D){var U=D[0];return ri(Oi(U.evaluate(R)))}],"to-rgba":[mi($r,4),[On],function(R,D){var U=D[0];return U.evaluate(R).toArray()}],rgb:[On,[$r,$r,$r],xu],rgba:[On,[$r,$r,$r,$r],xu],has:{type:An,overloads:[[[wn],function(R,D){var U=D[0];return Ks(U.evaluate(R),R.properties())}],[[wn,Vn],function(R,D){var U=D[0],rt=D[1];return Ks(U.evaluate(R),rt.evaluate(R))}]]},get:{type:zn,overloads:[[[wn],function(R,D){var U=D[0];return Js(U.evaluate(R),R.properties())}],[[wn,Vn],function(R,D){var U=D[0],rt=D[1];return Js(U.evaluate(R),rt.evaluate(R))}]]},"feature-state":[zn,[wn],function(R,D){var U=D[0];return Js(U.evaluate(R),R.featureState||{})}],properties:[Vn,[],function(R){return R.properties()}],"geometry-type":[wn,[],function(R){return R.geometryType()}],id:[zn,[],function(R){return R.id()}],zoom:[$r,[],function(R){return R.globals.zoom}],"heatmap-density":[$r,[],function(R){return R.globals.heatmapDensity||0}],"line-progress":[$r,[],function(R){return R.globals.lineProgress||0}],accumulated:[zn,[],function(R){return R.globals.accumulated===void 0?null:R.globals.accumulated}],"+":[$r,Ts($r),function(R,D){for(var U=0,rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt];U+=yt.evaluate(R)}return U}],"*":[$r,Ts($r),function(R,D){for(var U=1,rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt];U*=yt.evaluate(R)}return U}],"-":{type:$r,overloads:[[[$r,$r],function(R,D){var U=D[0],rt=D[1];return U.evaluate(R)-rt.evaluate(R)}],[[$r],function(R,D){var U=D[0];return-U.evaluate(R)}]]},"/":[$r,[$r,$r],function(R,D){var U=D[0],rt=D[1];return U.evaluate(R)/rt.evaluate(R)}],"%":[$r,[$r,$r],function(R,D){var U=D[0],rt=D[1];return U.evaluate(R)%rt.evaluate(R)}],ln2:[$r,[],function(){return Math.LN2}],pi:[$r,[],function(){return Math.PI}],e:[$r,[],function(){return Math.E}],"^":[$r,[$r,$r],function(R,D){var U=D[0],rt=D[1];return Math.pow(U.evaluate(R),rt.evaluate(R))}],sqrt:[$r,[$r],function(R,D){var U=D[0];return Math.sqrt(U.evaluate(R))}],log10:[$r,[$r],function(R,D){var U=D[0];return Math.log(U.evaluate(R))/Math.LN10}],ln:[$r,[$r],function(R,D){var U=D[0];return Math.log(U.evaluate(R))}],log2:[$r,[$r],function(R,D){var U=D[0];return Math.log(U.evaluate(R))/Math.LN2}],sin:[$r,[$r],function(R,D){var U=D[0];return Math.sin(U.evaluate(R))}],cos:[$r,[$r],function(R,D){var U=D[0];return Math.cos(U.evaluate(R))}],tan:[$r,[$r],function(R,D){var U=D[0];return Math.tan(U.evaluate(R))}],asin:[$r,[$r],function(R,D){var U=D[0];return Math.asin(U.evaluate(R))}],acos:[$r,[$r],function(R,D){var U=D[0];return Math.acos(U.evaluate(R))}],atan:[$r,[$r],function(R,D){var U=D[0];return Math.atan(U.evaluate(R))}],min:[$r,Ts($r),function(R,D){return Math.min.apply(Math,D.map(function(U){return U.evaluate(R)}))}],max:[$r,Ts($r),function(R,D){return Math.max.apply(Math,D.map(function(U){return U.evaluate(R)}))}],abs:[$r,[$r],function(R,D){var U=D[0];return Math.abs(U.evaluate(R))}],round:[$r,[$r],function(R,D){var U=D[0],rt=U.evaluate(R);return rt<0?-Math.round(-rt):Math.round(rt)}],floor:[$r,[$r],function(R,D){var U=D[0];return Math.floor(U.evaluate(R))}],ceil:[$r,[$r],function(R,D){var U=D[0];return Math.ceil(U.evaluate(R))}],"filter-==":[An,[wn,zn],function(R,D){var U=D[0],rt=D[1];return R.properties()[U.value]===rt.value}],"filter-id-==":[An,[zn],function(R,D){var U=D[0];return R.id()===U.value}],"filter-type-==":[An,[wn],function(R,D){var U=D[0];return R.geometryType()===U.value}],"filter-<":[An,[wn,zn],function(R,D){var U=D[0],rt=D[1],ct=R.properties()[U.value],yt=rt.value;return typeof ct==typeof yt&&ct<yt}],"filter-id-<":[An,[zn],function(R,D){var U=D[0],rt=R.id(),ct=U.value;return typeof rt==typeof ct&&rt<ct}],"filter->":[An,[wn,zn],function(R,D){var U=D[0],rt=D[1],ct=R.properties()[U.value],yt=rt.value;return typeof ct==typeof yt&&ct>yt}],"filter-id->":[An,[zn],function(R,D){var U=D[0],rt=R.id(),ct=U.value;return typeof rt==typeof ct&&rt>ct}],"filter-<=":[An,[wn,zn],function(R,D){var U=D[0],rt=D[1],ct=R.properties()[U.value],yt=rt.value;return typeof ct==typeof yt&&ct<=yt}],"filter-id-<=":[An,[zn],function(R,D){var U=D[0],rt=R.id(),ct=U.value;return typeof rt==typeof ct&&rt<=ct}],"filter->=":[An,[wn,zn],function(R,D){var U=D[0],rt=D[1],ct=R.properties()[U.value],yt=rt.value;return typeof ct==typeof yt&&ct>=yt}],"filter-id->=":[An,[zn],function(R,D){var U=D[0],rt=R.id(),ct=U.value;return typeof rt==typeof ct&&rt>=ct}],"filter-has":[An,[zn],function(R,D){var U=D[0];return U.value in R.properties()}],"filter-has-id":[An,[],function(R){return R.id()!==null&&R.id()!==void 0}],"filter-type-in":[An,[mi(wn)],function(R,D){var U=D[0];return U.value.indexOf(R.geometryType())>=0}],"filter-id-in":[An,[mi(zn)],function(R,D){var U=D[0];return U.value.indexOf(R.id())>=0}],"filter-in-small":[An,[wn,mi(zn)],function(R,D){var U=D[0],rt=D[1];return rt.value.indexOf(R.properties()[U.value])>=0}],"filter-in-large":[An,[wn,mi(zn)],function(R,D){var U=D[0],rt=D[1];return wf(R.properties()[U.value],rt.value,0,rt.value.length-1)}],all:{type:An,overloads:[[[An,An],function(R,D){var U=D[0],rt=D[1];return U.evaluate(R)&&rt.evaluate(R)}],[Ts(An),function(R,D){for(var U=0,rt=D;U<rt.length;U+=1){var ct=rt[U];if(!ct.evaluate(R))return!1}return!0}]]},any:{type:An,overloads:[[[An,An],function(R,D){var U=D[0],rt=D[1];return U.evaluate(R)||rt.evaluate(R)}],[Ts(An),function(R,D){for(var U=0,rt=D;U<rt.length;U+=1){var ct=rt[U];if(ct.evaluate(R))return!0}return!1}]]},"!":[An,[An],function(R,D){var U=D[0];return!U.evaluate(R)}],"is-supported-script":[An,[wn],function(R,D){var U=D[0],rt=R.globals&&R.globals.isSupportedScript;return rt?rt(U.evaluate(R)):!0}],upcase:[wn,[wn],function(R,D){var U=D[0];return U.evaluate(R).toUpperCase()}],downcase:[wn,[wn],function(R,D){var U=D[0];return U.evaluate(R).toLowerCase()}],concat:[wn,Ts(zn),function(R,D){return D.map(function(U){return sl(U.evaluate(R))}).join("")}],"resolved-locale":[wn,[Jn],function(R,D){var U=D[0];return U.evaluate(R).resolvedLocale()}]});function bl(R){return{result:"success",value:R}}function ks(R){return{result:"error",value:R}}function As(R){return R["property-type"]==="data-driven"||R["property-type"]==="cross-faded-data-driven"}function Gl(R){return!!R.expression&&R.expression.parameters.indexOf("zoom")>-1}function wl(R){return!!R.expression&&R.expression.interpolated}function di(R){return R instanceof Number?"number":R instanceof String?"string":R instanceof Boolean?"boolean":Array.isArray(R)?"array":R===null?"null":typeof R}function Tl(R){return typeof R=="object"&&R!==null&&!Array.isArray(R)}function bu(R){return R}function Tf(R,D){var U=D.type==="color",rt=R.stops&&typeof R.stops[0][0]=="object",ct=rt||R.property!==void 0,yt=rt||!ct,Et=R.type||(wl(D)?"exponential":"interval");if(U&&(R=Dn({},R),R.stops&&(R.stops=R.stops.map(function(na){return[na[0],ni.parse(na[1])]})),R.default?R.default=ni.parse(R.default):R.default=ni.parse(D.default)),R.colorSpace&&R.colorSpace!=="rgb"&&!mu[R.colorSpace])throw new Error("Unknown color space: "+R.colorSpace);var Zt,ce,we;if(Et==="exponential")Zt=Wu;else if(Et==="interval")Zt=wu;else if(Et==="categorical"){Zt=Wl,ce=Object.create(null);for(var Le=0,Ve=R.stops;Le<Ve.length;Le+=1){var ar=Ve[Le];ce[ar[0]]=ar[1]}we=typeof R.stops[0][0]}else if(Et==="identity")Zt=Yl;else throw new Error('Unknown function type "'+Et+'"');if(rt){for(var er={},br=[],Ur=0;Ur<R.stops.length;Ur++){var fn=R.stops[Ur],tn=fn[0].zoom;er[tn]===void 0&&(er[tn]={zoom:tn,type:R.type,property:R.property,default:R.default,stops:[]},br.push(tn)),er[tn].stops.push([fn[0].value,fn[1]])}for(var Sn=[],xn=0,Mn=br;xn<Mn.length;xn+=1){var _n=Mn[xn];Sn.push([er[_n].zoom,Tf(er[_n],D)])}var jn={name:"linear"};return{kind:"composite",interpolationType:jn,interpolationFactor:Bi.interpolationFactor.bind(void 0,jn),zoomStops:Sn.map(function(na){return na[0]}),evaluate:function(Ta,ya){var ba=Ta.zoom;return Wu({stops:Sn,base:R.base},D,ba).evaluate(ba,ya)}}}else if(yt){var sa=Et==="exponential"?{name:"exponential",base:R.base!==void 0?R.base:1}:null;return{kind:"camera",interpolationType:sa,interpolationFactor:Bi.interpolationFactor.bind(void 0,sa),zoomStops:R.stops.map(function(na){return na[0]}),evaluate:function(na){var Ta=na.zoom;return Zt(R,D,Ta,ce,we)}}}else return{kind:"source",evaluate:function(Ta,ya){var ba=ya&&ya.properties?ya.properties[R.property]:void 0;return ba===void 0?Al(R.default,D.default):Zt(R,D,ba,ce,we)}}}function Al(R,D,U){if(R!==void 0)return R;if(D!==void 0)return D;if(U!==void 0)return U}function Wl(R,D,U,rt,ct){var yt=typeof U===ct?rt[U]:void 0;return Al(yt,R.default,D.default)}function wu(R,D,U){if(di(U)!=="number")return Al(R.default,D.default);var rt=R.stops.length;if(rt===1||U<=R.stops[0][0])return R.stops[0][1];if(U>=R.stops[rt-1][0])return R.stops[rt-1][1];var ct=cl(R.stops.map(function(yt){return yt[0]}),U);return R.stops[ct][1]}function Wu(R,D,U){var rt=R.base!==void 0?R.base:1;if(di(U)!=="number")return Al(R.default,D.default);var ct=R.stops.length;if(ct===1||U<=R.stops[0][0])return R.stops[0][1];if(U>=R.stops[ct-1][0])return R.stops[ct-1][1];var yt=cl(R.stops.map(function(Ve){return Ve[0]}),U),Et=Xl(U,rt,R.stops[yt][0],R.stops[yt+1][0]),Zt=R.stops[yt][1],ce=R.stops[yt+1][1],we=vu[D.type]||bu;if(R.colorSpace&&R.colorSpace!=="rgb"){var Le=mu[R.colorSpace];we=function(Ve,ar){return Le.reverse(Le.interpolate(Le.forward(Ve),Le.forward(ar),Et))}}return typeof Zt.evaluate=="function"?{evaluate:function(){for(var ar=[],er=arguments.length;er--;)ar[er]=arguments[er];var br=Zt.evaluate.apply(void 0,ar),Ur=ce.evaluate.apply(void 0,ar);if(!(br===void 0||Ur===void 0))return we(br,Ur,Et)}}:we(Zt,ce,Et)}function Yl(R,D,U){return D.type==="color"?U=ni.parse(U):D.type==="formatted"?U=Qi.fromString(U.toString()):D.type==="resolvedImage"?U=mo.fromString(U.toString()):di(U)!==D.type&&(D.type!=="enum"||!D.values[U])&&(U=void 0),Al(U,R.default,D.default)}function Xl(R,D,U,rt){var ct=rt-U,yt=R-U;return ct===0?0:D===1?yt/ct:(Math.pow(D,yt)-1)/(Math.pow(D,ct)-1)}var zs=function(D,U){this.expression=D,this._warningHistory={},this._evaluator=new as,this._defaultValue=U?Af(U):null,this._enumValues=U&&U.type==="enum"?U.values:null};zs.prototype.evaluateWithoutErrorHandling=function(D,U,rt,ct,yt,Et){return this._evaluator.globals=D,this._evaluator.feature=U,this._evaluator.featureState=rt,this._evaluator.canonical=ct,this._evaluator.availableImages=yt||null,this._evaluator.formattedSection=Et,this.expression.evaluate(this._evaluator)},zs.prototype.evaluate=function(D,U,rt,ct,yt,Et){this._evaluator.globals=D,this._evaluator.feature=U||null,this._evaluator.featureState=rt||null,this._evaluator.canonical=ct,this._evaluator.availableImages=yt||null,this._evaluator.formattedSection=Et||null;try{var Zt=this.expression.evaluate(this._evaluator);if(Zt==null||typeof Zt=="number"&&Zt!==Zt)return this._defaultValue;if(this._enumValues&&!(Zt in this._enumValues))throw new Xi("Expected value to be one of "+Object.keys(this._enumValues).map(function(ce){return JSON.stringify(ce)}).join(", ")+", but found "+JSON.stringify(Zt)+" instead.");return Zt}catch(ce){return this._warningHistory[ce.message]||(this._warningHistory[ce.message]=!0,typeof console<"u"&&console.warn(ce.message)),this._defaultValue}};function Zl(R){return Array.isArray(R)&&R.length>0&&typeof R[0]=="string"&&R[0]in xl}function _s(R,D){var U=new os(xl,[],D?lc(D):void 0),rt=U.parse(R,void 0,void 0,void 0,D&&D.type==="string"?{typeAnnotation:"coerce"}:void 0);return rt?bl(new zs(rt,D)):ks(U.errors)}var Zi=function(D,U){this.kind=D,this._styleExpression=U,this.isStateDependent=D!=="constant"&&!Xs(U.expression)};Zi.prototype.evaluateWithoutErrorHandling=function(D,U,rt,ct,yt,Et){return this._styleExpression.evaluateWithoutErrorHandling(D,U,rt,ct,yt,Et)},Zi.prototype.evaluate=function(D,U,rt,ct,yt,Et){return this._styleExpression.evaluate(D,U,rt,ct,yt,Et)};var ss=function(D,U,rt,ct){this.kind=D,this.zoomStops=rt,this._styleExpression=U,this.isStateDependent=D!=="camera"&&!Xs(U.expression),this.interpolationType=ct};ss.prototype.evaluateWithoutErrorHandling=function(D,U,rt,ct,yt,Et){return this._styleExpression.evaluateWithoutErrorHandling(D,U,rt,ct,yt,Et)},ss.prototype.evaluate=function(D,U,rt,ct,yt,Et){return this._styleExpression.evaluate(D,U,rt,ct,yt,Et)},ss.prototype.interpolationFactor=function(D,U,rt){return this.interpolationType?Bi.interpolationFactor(this.interpolationType,D,U,rt):0};function Yu(R,D){if(R=_s(R,D),R.result==="error")return R;var U=R.value.expression,rt=fl(U);if(!rt&&!As(D))return ks([new Er("","data expressions not supported")]);var ct=Bl(U,["zoom"]);if(!ct&&!Gl(D))return ks([new Er("","zoom expressions not supported")]);var yt=jl(U);if(!yt&&!ct)return ks([new Er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(yt instanceof Er)return ks([yt]);if(yt instanceof Bi&&!wl(D))return ks([new Er("",'"interpolate" expressions cannot be used with this property')]);if(!yt)return bl(rt?new Zi("constant",R.value):new Zi("source",R.value));var Et=yt instanceof Bi?yt.interpolation:void 0;return bl(rt?new ss("camera",R.value,yt.labels,Et):new ss("composite",R.value,yt.labels,Et))}var Qs=function(D,U){this._parameters=D,this._specification=U,Dn(this,Tf(this._parameters,this._specification))};Qs.deserialize=function(D){return new Qs(D._parameters,D._specification)},Qs.serialize=function(D){return{_parameters:D._parameters,_specification:D._specification}};function Tu(R,D){if(Tl(R))return new Qs(R,D);if(Zl(R)){var U=Yu(R,D);if(U.result==="error")throw new Error(U.value.map(function(ct){return ct.key+": "+ct.message}).join(", "));return U.value}else{var rt=R;return typeof R=="string"&&D.type==="color"&&(rt=ni.parse(R)),{kind:"constant",evaluate:function(){return rt}}}}function jl(R){var D=null;if(R instanceof xs)D=jl(R.result);else if(R instanceof Wo)for(var U=0,rt=R.args;U<rt.length;U+=1){var ct=rt[U];if(D=jl(ct),D)break}else(R instanceof Ho||R instanceof Bi)&&R.input instanceof $i&&R.input.name==="zoom"&&(D=R);return D instanceof Er||R.eachChild(function(yt){var Et=jl(yt);Et instanceof Er?D=Et:!D&&Et?D=new Er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):D&&Et&&D!==Et&&(D=new Er("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),D}function lc(R){var D={color:On,string:wn,number:$r,enum:wn,boolean:An,formatted:ua,resolvedImage:Ra};return R.type==="array"?mi(D[R.value]||zn,R.length):D[R.type]}function Af(R){return R.type==="color"&&Tl(R.default)?new ni(0,0,0,0):R.type==="color"?ni.parse(R.default)||null:R.default===void 0?null:R.default}function vo(R){var D=R.key,U=R.value,rt=R.valueSpec||{},ct=R.objectElementValidators||{},yt=R.style,Et=R.styleSpec,Zt=[],ce=di(U);if(ce!=="object")return[new Nr(D,U,"object expected, "+ce+" found")];for(var we in U){var Le=we.split(".")[0],Ve=rt[Le]||rt["*"],ar=void 0;if(ct[Le])ar=ct[Le];else if(rt[Le])ar=_r;else if(ct["*"])ar=ct["*"];else if(rt["*"])ar=_r;else{Zt.push(new Nr(D,U[we],'unknown property "'+we+'"'));continue}Zt=Zt.concat(ar({key:(D&&D+".")+we,value:U[we],valueSpec:Ve,style:yt,styleSpec:Et,object:U,objectKey:we},U))}for(var er in rt)ct[er]||rt[er].required&&rt[er].default===void 0&&U[er]===void 0&&Zt.push(new Nr(D,U,'missing required property "'+er+'"'));return Zt}function Kl(R){var D=R.value,U=R.valueSpec,rt=R.style,ct=R.styleSpec,yt=R.key,Et=R.arrayElementValidator||_r;if(di(D)!=="array")return[new Nr(yt,D,"array expected, "+di(D)+" found")];if(U.length&&D.length!==U.length)return[new Nr(yt,D,"array length "+U.length+" expected, length "+D.length+" found")];if(U["min-length"]&&D.length<U["min-length"])return[new Nr(yt,D,"array length at least "+U["min-length"]+" expected, length "+D.length+" found")];var Zt={type:U.value,values:U.values};ct.$version<7&&(Zt.function=U.function),di(U.value)==="object"&&(Zt=U.value);for(var ce=[],we=0;we<D.length;we++)ce=ce.concat(Et({array:D,arrayIndex:we,value:D[we],valueSpec:Zt,style:rt,styleSpec:ct,key:yt+"["+we+"]"}));return ce}function Ml(R){var D=R.key,U=R.value,rt=R.valueSpec,ct=di(U);return ct==="number"&&U!==U&&(ct="NaN"),ct!=="number"?[new Nr(D,U,"number expected, "+ct+" found")]:"minimum"in rt&&U<rt.minimum?[new Nr(D,U,U+" is less than the minimum value "+rt.minimum)]:"maximum"in rt&&U>rt.maximum?[new Nr(D,U,U+" is greater than the maximum value "+rt.maximum)]:[]}function Mf(R){var D=R.valueSpec,U=mn(R.value.type),rt,ct={},yt,Et,Zt=U!=="categorical"&&R.value.property===void 0,ce=!Zt,we=di(R.value.stops)==="array"&&di(R.value.stops[0])==="array"&&di(R.value.stops[0][0])==="object",Le=vo({key:R.key,value:R.value,valueSpec:R.styleSpec.function,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{stops:Ve,default:br}});return U==="identity"&&Zt&&Le.push(new Nr(R.key,R.value,'missing required property "property"')),U!=="identity"&&!R.value.stops&&Le.push(new Nr(R.key,R.value,'missing required property "stops"')),U==="exponential"&&R.valueSpec.expression&&!wl(R.valueSpec)&&Le.push(new Nr(R.key,R.value,"exponential functions not supported")),R.styleSpec.$version>=8&&(ce&&!As(R.valueSpec)?Le.push(new Nr(R.key,R.value,"property functions not supported")):Zt&&!Gl(R.valueSpec)&&Le.push(new Nr(R.key,R.value,"zoom functions not supported"))),(U==="categorical"||we)&&R.value.property===void 0&&Le.push(new Nr(R.key,R.value,'"property" property is required')),Le;function Ve(Ur){if(U==="identity")return[new Nr(Ur.key,Ur.value,'identity function may not have a "stops" property')];var fn=[],tn=Ur.value;return fn=fn.concat(Kl({key:Ur.key,value:tn,valueSpec:Ur.valueSpec,style:Ur.style,styleSpec:Ur.styleSpec,arrayElementValidator:ar})),di(tn)==="array"&&tn.length===0&&fn.push(new Nr(Ur.key,tn,"array must have at least one stop")),fn}function ar(Ur){var fn=[],tn=Ur.value,Sn=Ur.key;if(di(tn)!=="array")return[new Nr(Sn,tn,"array expected, "+di(tn)+" found")];if(tn.length!==2)return[new Nr(Sn,tn,"array length 2 expected, length "+tn.length+" found")];if(we){if(di(tn[0])!=="object")return[new Nr(Sn,tn,"object expected, "+di(tn[0])+" found")];if(tn[0].zoom===void 0)return[new Nr(Sn,tn,"object stop key must have zoom")];if(tn[0].value===void 0)return[new Nr(Sn,tn,"object stop key must have value")];if(Et&&Et>mn(tn[0].zoom))return[new Nr(Sn,tn[0].zoom,"stop zoom values must appear in ascending order")];mn(tn[0].zoom)!==Et&&(Et=mn(tn[0].zoom),yt=void 0,ct={}),fn=fn.concat(vo({key:Sn+"[0]",value:tn[0],valueSpec:{zoom:{}},style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{zoom:Ml,value:er}}))}else fn=fn.concat(er({key:Sn+"[0]",value:tn[0],valueSpec:{},style:Ur.style,styleSpec:Ur.styleSpec},tn));return Zl(cn(tn[1]))?fn.concat([new Nr(Sn+"[1]",tn[1],"expressions are not allowed in function stops.")]):fn.concat(_r({key:Sn+"[1]",value:tn[1],valueSpec:D,style:Ur.style,styleSpec:Ur.styleSpec}))}function er(Ur,fn){var tn=di(Ur.value),Sn=mn(Ur.value),xn=Ur.value!==null?Ur.value:fn;if(!rt)rt=tn;else if(tn!==rt)return[new Nr(Ur.key,xn,tn+" stop domain type must match previous stop domain type "+rt)];if(tn!=="number"&&tn!=="string"&&tn!=="boolean")return[new Nr(Ur.key,xn,"stop domain value must be a number, string, or boolean")];if(tn!=="number"&&U!=="categorical"){var Mn="number expected, "+tn+" found";return As(D)&&U===void 0&&(Mn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Nr(Ur.key,xn,Mn)]}return U==="categorical"&&tn==="number"&&(!isFinite(Sn)||Math.floor(Sn)!==Sn)?[new Nr(Ur.key,xn,"integer expected, found "+Sn)]:U!=="categorical"&&tn==="number"&&yt!==void 0&&Sn<yt?[new Nr(Ur.key,xn,"stop domain values must appear in ascending order")]:(yt=Sn,U==="categorical"&&Sn in ct?[new Nr(Ur.key,xn,"stop domain values must be unique")]:(ct[Sn]=!0,[]))}function br(Ur){return _r({key:Ur.key,value:Ur.value,valueSpec:D,style:Ur.style,styleSpec:Ur.styleSpec})}}function Fs(R){var D=(R.expressionContext==="property"?Yu:_s)(cn(R.value),R.valueSpec);if(D.result==="error")return D.value.map(function(rt){return new Nr(""+R.key+rt.key,R.value,rt.message)});var U=D.value.expression||D.value._styleExpression.expression;if(R.expressionContext==="property"&&R.propertyKey==="text-font"&&!U.outputDefined())return[new Nr(R.key,R.value,'Invalid data expression for "'+R.propertyKey+'". Output values must be contained as literals within the expression.')];if(R.expressionContext==="property"&&R.propertyType==="layout"&&!Xs(U))return[new Nr(R.key,R.value,'"feature-state" data expressions are not supported with layout properties.')];if(R.expressionContext==="filter"&&!Xs(U))return[new Nr(R.key,R.value,'"feature-state" data expressions are not supported with filters.')];if(R.expressionContext&&R.expressionContext.indexOf("cluster")===0){if(!Bl(U,["zoom","feature-state"]))return[new Nr(R.key,R.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(R.expressionContext==="cluster-initial"&&!fl(U))return[new Nr(R.key,R.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uc(R){var D=R.value,U=R.key,rt=di(D);return rt!=="boolean"?[new Nr(U,D,"boolean expected, "+rt+" found")]:[]}function Lo(R){var D=R.key,U=R.value,rt=di(U);return rt!=="string"?[new Nr(D,U,"color expected, "+rt+" found")]:zl(U)===null?[new Nr(D,U,'color expected, "'+U+'" found')]:[]}function Jl(R){var D=R.key,U=R.value,rt=R.valueSpec,ct=[];return Array.isArray(rt.values)?rt.values.indexOf(mn(U))===-1&&ct.push(new Nr(D,U,"expected one of ["+rt.values.join(", ")+"], "+JSON.stringify(U)+" found")):Object.keys(rt.values).indexOf(mn(U))===-1&&ct.push(new Nr(D,U,"expected one of ["+Object.keys(rt.values).join(", ")+"], "+JSON.stringify(U)+" found")),ct}function Au(R){if(R===!0||R===!1)return!0;if(!Array.isArray(R)||R.length===0)return!1;switch(R[0]){case"has":return R.length>=2&&R[1]!=="$id"&&R[1]!=="$type";case"in":return R.length>=3&&(typeof R[1]!="string"||Array.isArray(R[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return R.length!==3||Array.isArray(R[1])||Array.isArray(R[2]);case"any":case"all":for(var D=0,U=R.slice(1);D<U.length;D+=1){var rt=U[D];if(!Au(rt)&&typeof rt!="boolean")return!1}return!0;default:return!0}}var Ms={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Os(R){if(R==null)return{filter:function(){return!0},needGeometry:!1};Au(R)||(R=$l(R));var D=_s(R,Ms);if(D.result==="error")throw new Error(D.value.map(function(rt){return rt.key+": "+rt.message}).join(", "));var U=Ql(R);return{filter:function(rt,ct,yt){return D.value.evaluate(rt,ct,{},yt)},needGeometry:U}}function Xu(R,D){return R<D?-1:R>D?1:0}function Ql(R){if(!Array.isArray(R))return!1;if(R[0]==="within")return!0;for(var D=1;D<R.length;D++)if(Ql(R[D]))return!0;return!1}function $l(R){if(!R)return!0;var D=R[0];if(R.length<=1)return D!=="any";var U=D==="=="?Mu(R[1],R[2],"=="):D==="!="?$s(Mu(R[1],R[2],"==")):D==="<"||D===">"||D==="<="||D===">="?Mu(R[1],R[2],D):D==="any"?Sf(R.slice(1)):D==="all"?["all"].concat(R.slice(1).map($l)):D==="none"?["all"].concat(R.slice(1).map($l).map($s)):D==="in"?ql(R[1],R.slice(2)):D==="!in"?$s(ql(R[1],R.slice(2))):D==="has"?Zu(R[1]):D==="!has"?$s(Zu(R[1])):D==="within"?R:!0;return U}function Mu(R,D,U){switch(R){case"$type":return["filter-type-"+U,D];case"$id":return["filter-id-"+U,D];default:return["filter-"+U,R,D]}}function Sf(R){return["any"].concat(R.map($l))}function ql(R,D){if(D.length===0)return!1;switch(R){case"$type":return["filter-type-in",["literal",D]];case"$id":return["filter-id-in",["literal",D]];default:return D.length>200&&!D.some(function(U){return typeof U!=typeof D[0]})?["filter-in-large",R,["literal",D.sort(Xu)]]:["filter-in-small",R,["literal",D]]}}function Zu(R){switch(R){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",R]}}function $s(R){return["!",R]}function ju(R){return Au(cn(R.value))?Fs(Dn({},R,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tu(R)}function tu(R){var D=R.value,U=R.key;if(di(D)!=="array")return[new Nr(U,D,"array expected, "+di(D)+" found")];var rt=R.styleSpec,ct,yt=[];if(D.length<1)return[new Nr(U,D,"filter array must have at least 1 element")];switch(yt=yt.concat(Jl({key:U+"[0]",value:D[0],valueSpec:rt.filter_operator,style:R.style,styleSpec:R.styleSpec})),mn(D[0])){case"<":case"<=":case">":case">=":D.length>=2&&mn(D[1])==="$type"&&yt.push(new Nr(U,D,'"$type" cannot be use with operator "'+D[0]+'"'));case"==":case"!=":D.length!==3&&yt.push(new Nr(U,D,'filter array for operator "'+D[0]+'" must have 3 elements'));case"in":case"!in":D.length>=2&&(ct=di(D[1]),ct!=="string"&&yt.push(new Nr(U+"[1]",D[1],"string expected, "+ct+" found")));for(var Et=2;Et<D.length;Et++)ct=di(D[Et]),mn(D[1])==="$type"?yt=yt.concat(Jl({key:U+"["+Et+"]",value:D[Et],valueSpec:rt.geometry_type,style:R.style,styleSpec:R.styleSpec})):ct!=="string"&&ct!=="number"&&ct!=="boolean"&&yt.push(new Nr(U+"["+Et+"]",D[Et],"string, number, or boolean expected, "+ct+" found"));break;case"any":case"all":case"none":for(var Zt=1;Zt<D.length;Zt++)yt=yt.concat(tu({key:U+"["+Zt+"]",value:D[Zt],style:R.style,styleSpec:R.styleSpec}));break;case"has":case"!has":ct=di(D[1]),D.length!==2?yt.push(new Nr(U,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ct!=="string"&&yt.push(new Nr(U+"[1]",D[1],"string expected, "+ct+" found"));break;case"within":ct=di(D[1]),D.length!==2?yt.push(new Nr(U,D,'filter array for "'+D[0]+'" operator must have 2 elements')):ct!=="object"&&yt.push(new Nr(U+"[1]",D[1],"object expected, "+ct+" found"));break}return yt}function Ef(R,D){var U=R.key,rt=R.style,ct=R.styleSpec,yt=R.value,Et=R.objectKey,Zt=ct[D+"_"+R.layerType];if(!Zt)return[];var ce=Et.match(/^(.*)-transition$/);if(D==="paint"&&ce&&Zt[ce[1]]&&Zt[ce[1]].transition)return _r({key:U,value:yt,valueSpec:ct.transition,style:rt,styleSpec:ct});var we=R.valueSpec||Zt[Et];if(!we)return[new Nr(U,yt,'unknown property "'+Et+'"')];var Le;if(di(yt)==="string"&&As(we)&&!we.tokens&&(Le=/^{([^}]+)}$/.exec(yt)))return[new Nr(U,yt,'"'+Et+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(Le[1])+" }`.")];var Ve=[];return R.layerType==="symbol"&&(Et==="text-field"&&rt&&!rt.glyphs&&Ve.push(new Nr(U,yt,'use of "text-field" requires a style "glyphs" property')),Et==="text-font"&&Tl(cn(yt))&&mn(yt.type)==="identity"&&Ve.push(new Nr(U,yt,'"text-font" does not support identity functions'))),Ve.concat(_r({key:R.key,value:yt,valueSpec:we,style:rt,styleSpec:ct,expressionContext:"property",propertyType:D,propertyKey:Et}))}function Xt(R){return Ef(R,"paint")}function ee(R){return Ef(R,"layout")}function de(R){var D=[],U=R.value,rt=R.key,ct=R.style,yt=R.styleSpec;!U.type&&!U.ref&&D.push(new Nr(rt,U,'either "type" or "ref" is required'));var Et=mn(U.type),Zt=mn(U.ref);if(U.id)for(var ce=mn(U.id),we=0;we<R.arrayIndex;we++){var Le=ct.layers[we];mn(Le.id)===ce&&D.push(new Nr(rt,U.id,'duplicate layer id "'+U.id+'", previously used at line '+Le.id.__line__))}if("ref"in U){["type","source","source-layer","filter","layout"].forEach(function(br){br in U&&D.push(new Nr(rt,U[br],'"'+br+'" is prohibited for ref layers'))});var Ve;ct.layers.forEach(function(br){mn(br.id)===Zt&&(Ve=br)}),Ve?Ve.ref?D.push(new Nr(rt,U.ref,"ref cannot reference another ref layer")):Et=mn(Ve.type):D.push(new Nr(rt,U.ref,'ref layer "'+Zt+'" not found'))}else if(Et!=="background")if(!U.source)D.push(new Nr(rt,U,'missing required property "source"'));else{var ar=ct.sources&&ct.sources[U.source],er=ar&&mn(ar.type);ar?er==="vector"&&Et==="raster"?D.push(new Nr(rt,U.source,'layer "'+U.id+'" requires a raster source')):er==="raster"&&Et!=="raster"?D.push(new Nr(rt,U.source,'layer "'+U.id+'" requires a vector source')):er==="vector"&&!U["source-layer"]?D.push(new Nr(rt,U,'layer "'+U.id+'" must specify a "source-layer"')):er==="raster-dem"&&Et!=="hillshade"?D.push(new Nr(rt,U.source,"raster-dem source can only be used with layer type 'hillshade'.")):Et==="line"&&U.paint&&U.paint["line-gradient"]&&(er!=="geojson"||!ar.lineMetrics)&&D.push(new Nr(rt,U,'layer "'+U.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):D.push(new Nr(rt,U.source,'source "'+U.source+'" not found'))}return D=D.concat(vo({key:rt,value:U,valueSpec:yt.layer,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _r({key:rt+".type",value:U.type,valueSpec:yt.layer.type,style:R.style,styleSpec:R.styleSpec,object:U,objectKey:"type"})},filter:ju,layout:function(Ur){return vo({layer:U,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(tn){return ee(Dn({layerType:Et},tn))}}})},paint:function(Ur){return vo({layer:U,key:Ur.key,value:Ur.value,style:Ur.style,styleSpec:Ur.styleSpec,objectElementValidators:{"*":function(tn){return Xt(Dn({layerType:Et},tn))}}})}}})),D}function ye(R){var D=R.value,U=R.key,rt=di(D);return rt!=="string"?[new Nr(U,D,"string expected, "+rt+" found")]:[]}var De={promoteId:Ie};function Pe(R){var D=R.value,U=R.key,rt=R.styleSpec,ct=R.style;if(!D.type)return[new Nr(U,D,'"type" is required')];var yt=mn(D.type),Et;switch(yt){case"vector":case"raster":case"raster-dem":return Et=vo({key:U,value:D,valueSpec:rt["source_"+yt.replace("-","_")],style:R.style,styleSpec:rt,objectElementValidators:De}),Et;case"geojson":if(Et=vo({key:U,value:D,valueSpec:rt.source_geojson,style:ct,styleSpec:rt,objectElementValidators:De}),D.cluster)for(var Zt in D.clusterProperties){var ce=D.clusterProperties[Zt],we=ce[0],Le=ce[1],Ve=typeof we=="string"?[we,["accumulated"],["get",Zt]]:we;Et.push.apply(Et,Fs({key:U+"."+Zt+".map",value:Le,expressionContext:"cluster-map"})),Et.push.apply(Et,Fs({key:U+"."+Zt+".reduce",value:Ve,expressionContext:"cluster-reduce"}))}return Et;case"video":return vo({key:U,value:D,valueSpec:rt.source_video,style:ct,styleSpec:rt});case"image":return vo({key:U,value:D,valueSpec:rt.source_image,style:ct,styleSpec:rt});case"canvas":return[new Nr(U,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Jl({key:U+".type",value:D.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:ct,styleSpec:rt})}}function Ie(R){var D=R.key,U=R.value;if(di(U)==="string")return ye({key:D,value:U});var rt=[];for(var ct in U)rt.push.apply(rt,ye({key:D+"."+ct,value:U[ct]}));return rt}function pr(R){var D=R.value,U=R.styleSpec,rt=U.light,ct=R.style,yt=[],Et=di(D);if(D===void 0)return yt;if(Et!=="object")return yt=yt.concat([new Nr("light",D,"object expected, "+Et+" found")]),yt;for(var Zt in D){var ce=Zt.match(/^(.*)-transition$/);ce&&rt[ce[1]]&&rt[ce[1]].transition?yt=yt.concat(_r({key:Zt,value:D[Zt],valueSpec:U.transition,style:ct,styleSpec:U})):rt[Zt]?yt=yt.concat(_r({key:Zt,value:D[Zt],valueSpec:rt[Zt],style:ct,styleSpec:U})):yt=yt.concat([new Nr(Zt,D[Zt],'unknown property "'+Zt+'"')])}return yt}function wr(R){return ye(R).length===0?[]:Fs(R)}function sr(R){return ye(R).length===0?[]:Fs(R)}var Sr={"*":function(){return[]},array:Kl,boolean:uc,number:Ml,color:Lo,constants:un,enum:Jl,filter:ju,function:Mf,layer:de,object:vo,source:Pe,light:pr,string:ye,formatted:wr,resolvedImage:sr};function _r(R){var D=R.value,U=R.valueSpec,rt=R.styleSpec;if(U.expression&&Tl(mn(D)))return Mf(R);if(U.expression&&Zl(cn(D)))return Fs(R);if(U.type&&Sr[U.type])return Sr[U.type](R);var ct=vo(Dn({},R,{valueSpec:U.type?rt[U.type]:U}));return ct}function Vr(R){var D=R.value,U=R.key,rt=ye(R);return rt.length||(D.indexOf("{fontstack}")===-1&&rt.push(new Nr(U,D,'"glyphs" url must include a "{fontstack}" token')),D.indexOf("{range}")===-1&&rt.push(new Nr(U,D,'"glyphs" url must include a "{range}" token'))),rt}function rn(R,D){D===void 0&&(D=Mr);var U=[];return U=U.concat(_r({key:"",value:R,valueSpec:D.$root,styleSpec:D,style:R,objectElementValidators:{glyphs:Vr,"*":function(){return[]}}})),R.constants&&(U=U.concat(un({key:"constants",value:R.constants,style:R,styleSpec:D}))),bn(U)}rn.source=Pn(Pe),rn.light=Pn(pr),rn.layer=Pn(de),rn.filter=Pn(ju),rn.paintProperty=Pn(Xt),rn.layoutProperty=Pn(ee);function bn(R){return[].concat(R).sort(function(D,U){return D.line-U.line})}function Pn(R){return function(){for(var D=[],U=arguments.length;U--;)D[U]=arguments[U];return bn(R.apply(this,D))}}var In=rn,$n=In.light,Da=In.paintProperty,Ia=In.layoutProperty;function za(R,D){var U=!1;if(D&&D.length)for(var rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt];R.fire(new Ee(new Error(yt.message))),U=!0}return U}var Oa=pi,Ka=3;function pi(R,D,U){var rt=this.cells=[];if(R instanceof ArrayBuffer){this.arrayBuffer=R;var ct=new Int32Array(this.arrayBuffer);R=ct[0],D=ct[1],U=ct[2],this.d=D+2*U;for(var yt=0;yt<this.d*this.d;yt++){var Et=ct[Ka+yt],Zt=ct[Ka+yt+1];rt.push(Et===Zt?null:ct.subarray(Et,Zt))}var ce=ct[Ka+rt.length],we=ct[Ka+rt.length+1];this.keys=ct.subarray(ce,we),this.bboxes=ct.subarray(we),this.insert=this._insertReadonly}else{this.d=D+2*U;for(var Le=0;Le<this.d*this.d;Le++)rt.push([]);this.keys=[],this.bboxes=[]}this.n=D,this.extent=R,this.padding=U,this.scale=D/R,this.uid=0;var Ve=U/D*R;this.min=-Ve,this.max=R+Ve}pi.prototype.insert=function(R,D,U,rt,ct){this._forEachCell(D,U,rt,ct,this._insertCell,this.uid++),this.keys.push(R),this.bboxes.push(D),this.bboxes.push(U),this.bboxes.push(rt),this.bboxes.push(ct)},pi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},pi.prototype._insertCell=function(R,D,U,rt,ct,yt){this.cells[ct].push(yt)},pi.prototype.query=function(R,D,U,rt,ct){var yt=this.min,Et=this.max;if(R<=yt&&D<=yt&&Et<=U&&Et<=rt&&!ct)return Array.prototype.slice.call(this.keys);var Zt=[],ce={};return this._forEachCell(R,D,U,rt,this._queryCell,Zt,ce,ct),Zt},pi.prototype._queryCell=function(R,D,U,rt,ct,yt,Et,Zt){var ce=this.cells[ct];if(ce!==null)for(var we=this.keys,Le=this.bboxes,Ve=0;Ve<ce.length;Ve++){var ar=ce[Ve];if(Et[ar]===void 0){var er=ar*4;(Zt?Zt(Le[er+0],Le[er+1],Le[er+2],Le[er+3]):R<=Le[er+2]&&D<=Le[er+3]&&U>=Le[er+0]&&rt>=Le[er+1])?(Et[ar]=!0,yt.push(we[ar])):Et[ar]=!1}}},pi.prototype._forEachCell=function(R,D,U,rt,ct,yt,Et,Zt){for(var ce=this._convertToCellCoord(R),we=this._convertToCellCoord(D),Le=this._convertToCellCoord(U),Ve=this._convertToCellCoord(rt),ar=ce;ar<=Le;ar++)for(var er=we;er<=Ve;er++){var br=this.d*er+ar;if(!(Zt&&!Zt(this._convertFromCellCoord(ar),this._convertFromCellCoord(er),this._convertFromCellCoord(ar+1),this._convertFromCellCoord(er+1)))&&ct.call(this,R,D,U,rt,br,yt,Et,Zt))return}},pi.prototype._convertFromCellCoord=function(R){return(R-this.padding)/this.scale},pi.prototype._convertToCellCoord=function(R){return Math.max(0,Math.min(this.d-1,Math.floor(R*this.scale)+this.padding))},pi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var R=this.cells,D=Ka+this.cells.length+1+1,U=0,rt=0;rt<this.cells.length;rt++)U+=this.cells[rt].length;var ct=new Int32Array(D+U+this.keys.length+this.bboxes.length);ct[0]=this.extent,ct[1]=this.n,ct[2]=this.padding;for(var yt=D,Et=0;Et<R.length;Et++){var Zt=R[Et];ct[Ka+Et]=yt,ct.set(Zt,yt),yt+=Zt.length}return ct[Ka+R.length]=yt,ct.set(this.keys,yt),yt+=this.keys.length,ct[Ka+R.length+1]=yt,ct.set(this.bboxes,yt),yt+=this.bboxes.length,ct.buffer};var Ni=s.ImageData,st=s.ImageBitmap,bt={};function _t(R,D,U){U===void 0&&(U={}),Object.defineProperty(D,"_classRegistryKey",{value:R,writeable:!1}),bt[R]={klass:D,omit:U.omit||[],shallow:U.shallow||[]}}_t("Object",Object),Oa.serialize=function(D,U){var rt=D.toArrayBuffer();return U&&U.push(rt),{buffer:rt}},Oa.deserialize=function(D){return new Oa(D.buffer)},_t("Grid",Oa),_t("Color",ni),_t("Error",Error),_t("ResolvedImage",mo),_t("StylePropertyFunction",Qs),_t("StyleExpression",zs,{omit:["_evaluator"]}),_t("ZoomDependentExpression",ss),_t("ZoomConstantExpression",Zi),_t("CompoundExpression",$i,{omit:["_evaluate"]});for(var Kt in xl)xl[Kt]._classRegistryKey||_t("Expression_"+Kt,xl[Kt]);function qt(R){return R&&typeof ArrayBuffer<"u"&&(R instanceof ArrayBuffer||R.constructor&&R.constructor.name==="ArrayBuffer")}function le(R){return st&&R instanceof st}function Ce(R,D){if(R==null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp)return R;if(qt(R)||le(R))return D&&D.push(R),R;if(ArrayBuffer.isView(R)){var U=R;return D&&D.push(U.buffer),U}if(R instanceof Ni)return D&&D.push(R.data.buffer),R;if(Array.isArray(R)){for(var rt=[],ct=0,yt=R;ct<yt.length;ct+=1){var Et=yt[ct];rt.push(Ce(Et,D))}return rt}if(typeof R=="object"){var Zt=R.constructor,ce=Zt._classRegistryKey;if(!ce)throw new Error("can't serialize object of unregistered class");var we=Zt.serialize?Zt.serialize(R,D):{};if(!Zt.serialize){for(var Le in R)if(R.hasOwnProperty(Le)&&!(bt[ce].omit.indexOf(Le)>=0)){var Ve=R[Le];we[Le]=bt[ce].shallow.indexOf(Le)>=0?Ve:Ce(Ve,D)}R instanceof Error&&(we.message=R.message)}if(we.$name)throw new Error("$name property is reserved for worker serialization logic.");return ce!=="Object"&&(we.$name=ce),we}throw new Error("can't serialize object of type "+typeof R)}function be(R){if(R==null||typeof R=="boolean"||typeof R=="number"||typeof R=="string"||R instanceof Boolean||R instanceof Number||R instanceof String||R instanceof Date||R instanceof RegExp||qt(R)||le(R)||ArrayBuffer.isView(R)||R instanceof Ni)return R;if(Array.isArray(R))return R.map(be);if(typeof R=="object"){var D=R.$name||"Object",U=bt[D],rt=U.klass;if(!rt)throw new Error("can't deserialize unregistered class "+D);if(rt.deserialize)return rt.deserialize(R);for(var ct=Object.create(rt.prototype),yt=0,Et=Object.keys(R);yt<Et.length;yt+=1){var Zt=Et[yt];if(Zt!=="$name"){var ce=R[Zt];ct[Zt]=bt[D].shallow.indexOf(Zt)>=0?ce:be(ce)}}return ct}throw new Error("can't deserialize object of type "+typeof R)}var Oe=function(){this.first=!0};Oe.prototype.update=function(D,U){var rt=Math.floor(D);return this.first?(this.first=!1,this.lastIntegerZoom=rt,this.lastIntegerZoomTime=0,this.lastZoom=D,this.lastFloorZoom=rt,!0):(this.lastFloorZoom>rt?(this.lastIntegerZoom=rt+1,this.lastIntegerZoomTime=U):this.lastFloorZoom<rt&&(this.lastIntegerZoom=rt,this.lastIntegerZoomTime=U),D!==this.lastZoom?(this.lastZoom=D,this.lastFloorZoom=rt,!0):!1)};var Ue={"Latin-1 Supplement":function(R){return R>=128&&R<=255},Arabic:function(R){return R>=1536&&R<=1791},"Arabic Supplement":function(R){return R>=1872&&R<=1919},"Arabic Extended-A":function(R){return R>=2208&&R<=2303},"Hangul Jamo":function(R){return R>=4352&&R<=4607},"Unified Canadian Aboriginal Syllabics":function(R){return R>=5120&&R<=5759},Khmer:function(R){return R>=6016&&R<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(R){return R>=6320&&R<=6399},"General Punctuation":function(R){return R>=8192&&R<=8303},"Letterlike Symbols":function(R){return R>=8448&&R<=8527},"Number Forms":function(R){return R>=8528&&R<=8591},"Miscellaneous Technical":function(R){return R>=8960&&R<=9215},"Control Pictures":function(R){return R>=9216&&R<=9279},"Optical Character Recognition":function(R){return R>=9280&&R<=9311},"Enclosed Alphanumerics":function(R){return R>=9312&&R<=9471},"Geometric Shapes":function(R){return R>=9632&&R<=9727},"Miscellaneous Symbols":function(R){return R>=9728&&R<=9983},"Miscellaneous Symbols and Arrows":function(R){return R>=11008&&R<=11263},"CJK Radicals Supplement":function(R){return R>=11904&&R<=12031},"Kangxi Radicals":function(R){return R>=12032&&R<=12255},"Ideographic Description Characters":function(R){return R>=12272&&R<=12287},"CJK Symbols and Punctuation":function(R){return R>=12288&&R<=12351},Hiragana:function(R){return R>=12352&&R<=12447},Katakana:function(R){return R>=12448&&R<=12543},Bopomofo:function(R){return R>=12544&&R<=12591},"Hangul Compatibility Jamo":function(R){return R>=12592&&R<=12687},Kanbun:function(R){return R>=12688&&R<=12703},"Bopomofo Extended":function(R){return R>=12704&&R<=12735},"CJK Strokes":function(R){return R>=12736&&R<=12783},"Katakana Phonetic Extensions":function(R){return R>=12784&&R<=12799},"Enclosed CJK Letters and Months":function(R){return R>=12800&&R<=13055},"CJK Compatibility":function(R){return R>=13056&&R<=13311},"CJK Unified Ideographs Extension A":function(R){return R>=13312&&R<=19903},"Yijing Hexagram Symbols":function(R){return R>=19904&&R<=19967},"CJK Unified Ideographs":function(R){return R>=19968&&R<=40959},"Yi Syllables":function(R){return R>=40960&&R<=42127},"Yi Radicals":function(R){return R>=42128&&R<=42191},"Hangul Jamo Extended-A":function(R){return R>=43360&&R<=43391},"Hangul Syllables":function(R){return R>=44032&&R<=55215},"Hangul Jamo Extended-B":function(R){return R>=55216&&R<=55295},"Private Use Area":function(R){return R>=57344&&R<=63743},"CJK Compatibility Ideographs":function(R){return R>=63744&&R<=64255},"Arabic Presentation Forms-A":function(R){return R>=64336&&R<=65023},"Vertical Forms":function(R){return R>=65040&&R<=65055},"CJK Compatibility Forms":function(R){return R>=65072&&R<=65103},"Small Form Variants":function(R){return R>=65104&&R<=65135},"Arabic Presentation Forms-B":function(R){return R>=65136&&R<=65279},"Halfwidth and Fullwidth Forms":function(R){return R>=65280&&R<=65519}};function nr(R){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D];if(sn(rt.charCodeAt(0)))return!0}return!1}function Rr(R){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D];if(!Dr(rt.charCodeAt(0)))return!1}return!0}function Dr(R){return!(Ue.Arabic(R)||Ue["Arabic Supplement"](R)||Ue["Arabic Extended-A"](R)||Ue["Arabic Presentation Forms-A"](R)||Ue["Arabic Presentation Forms-B"](R))}function Qr(R){return R<11904?!1:!!(Ue["Bopomofo Extended"](R)||Ue.Bopomofo(R)||Ue["CJK Compatibility Forms"](R)||Ue["CJK Compatibility Ideographs"](R)||Ue["CJK Compatibility"](R)||Ue["CJK Radicals Supplement"](R)||Ue["CJK Strokes"](R)||Ue["CJK Symbols and Punctuation"](R)||Ue["CJK Unified Ideographs Extension A"](R)||Ue["CJK Unified Ideographs"](R)||Ue["Enclosed CJK Letters and Months"](R)||Ue["Halfwidth and Fullwidth Forms"](R)||Ue.Hiragana(R)||Ue["Ideographic Description Characters"](R)||Ue["Kangxi Radicals"](R)||Ue["Katakana Phonetic Extensions"](R)||Ue.Katakana(R)||Ue["Vertical Forms"](R)||Ue["Yi Radicals"](R)||Ue["Yi Syllables"](R))}function sn(R){return R===746||R===747?!0:R<4352?!1:!!(Ue["Bopomofo Extended"](R)||Ue.Bopomofo(R)||Ue["CJK Compatibility Forms"](R)&&!(R>=65097&&R<=65103)||Ue["CJK Compatibility Ideographs"](R)||Ue["CJK Compatibility"](R)||Ue["CJK Radicals Supplement"](R)||Ue["CJK Strokes"](R)||Ue["CJK Symbols and Punctuation"](R)&&!(R>=12296&&R<=12305)&&!(R>=12308&&R<=12319)&&R!==12336||Ue["CJK Unified Ideographs Extension A"](R)||Ue["CJK Unified Ideographs"](R)||Ue["Enclosed CJK Letters and Months"](R)||Ue["Hangul Compatibility Jamo"](R)||Ue["Hangul Jamo Extended-A"](R)||Ue["Hangul Jamo Extended-B"](R)||Ue["Hangul Jamo"](R)||Ue["Hangul Syllables"](R)||Ue.Hiragana(R)||Ue["Ideographic Description Characters"](R)||Ue.Kanbun(R)||Ue["Kangxi Radicals"](R)||Ue["Katakana Phonetic Extensions"](R)||Ue.Katakana(R)&&R!==12540||Ue["Halfwidth and Fullwidth Forms"](R)&&R!==65288&&R!==65289&&R!==65293&&!(R>=65306&&R<=65310)&&R!==65339&&R!==65341&&R!==65343&&!(R>=65371&&R<=65503)&&R!==65507&&!(R>=65512&&R<=65519)||Ue["Small Form Variants"](R)&&!(R>=65112&&R<=65118)&&!(R>=65123&&R<=65126)||Ue["Unified Canadian Aboriginal Syllabics"](R)||Ue["Unified Canadian Aboriginal Syllabics Extended"](R)||Ue["Vertical Forms"](R)||Ue["Yijing Hexagram Symbols"](R)||Ue["Yi Syllables"](R)||Ue["Yi Radicals"](R))}function zr(R){return!!(Ue["Latin-1 Supplement"](R)&&(R===167||R===169||R===174||R===177||R===188||R===189||R===190||R===215||R===247)||Ue["General Punctuation"](R)&&(R===8214||R===8224||R===8225||R===8240||R===8241||R===8251||R===8252||R===8258||R===8263||R===8264||R===8265||R===8273)||Ue["Letterlike Symbols"](R)||Ue["Number Forms"](R)||Ue["Miscellaneous Technical"](R)&&(R>=8960&&R<=8967||R>=8972&&R<=8991||R>=8996&&R<=9e3||R===9003||R>=9085&&R<=9114||R>=9150&&R<=9165||R===9167||R>=9169&&R<=9179||R>=9186&&R<=9215)||Ue["Control Pictures"](R)&&R!==9251||Ue["Optical Character Recognition"](R)||Ue["Enclosed Alphanumerics"](R)||Ue["Geometric Shapes"](R)||Ue["Miscellaneous Symbols"](R)&&!(R>=9754&&R<=9759)||Ue["Miscellaneous Symbols and Arrows"](R)&&(R>=11026&&R<=11055||R>=11088&&R<=11097||R>=11192&&R<=11243)||Ue["CJK Symbols and Punctuation"](R)||Ue.Katakana(R)||Ue["Private Use Area"](R)||Ue["CJK Compatibility Forms"](R)||Ue["Small Form Variants"](R)||Ue["Halfwidth and Fullwidth Forms"](R)||R===8734||R===8756||R===8757||R>=9984&&R<=10087||R>=10102&&R<=10131||R===65532||R===65533)}function Hr(R){return!(sn(R)||zr(R))}function Kr(R){return Ue.Arabic(R)||Ue["Arabic Supplement"](R)||Ue["Arabic Extended-A"](R)||Ue["Arabic Presentation Forms-A"](R)||Ue["Arabic Presentation Forms-B"](R)}function hn(R){return R>=1424&&R<=2303||Ue["Arabic Presentation Forms-A"](R)||Ue["Arabic Presentation Forms-B"](R)}function yn(R,D){return!(!D&&hn(R)||R>=2304&&R<=3583||R>=3840&&R<=4255||Ue.Khmer(R))}function qr(R){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D];if(hn(rt.charCodeAt(0)))return!0}return!1}function Gn(R,D){for(var U=0,rt=R;U<rt.length;U+=1){var ct=rt[U];if(!yn(ct.charCodeAt(0),D))return!1}return!0}var aa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},va=null,ra=aa.unavailable,fa=null,da=function(R){R&&typeof R=="string"&&R.indexOf("NetworkError")>-1&&(ra=aa.error),va&&va(R)};function Na(){Ea.fire(new Ge("pluginStateChange",{pluginStatus:ra,pluginURL:fa}))}var Ea=new Xe,_a=function(){return ra},oi=function(R){return R({pluginStatus:ra,pluginURL:fa}),Ea.on("pluginStateChange",R),R},Vi=function(R,D,U){if(U===void 0&&(U=!1),ra===aa.deferred||ra===aa.loading||ra===aa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");fa=at.resolveURL(R),ra=aa.deferred,va=D,Na(),U||hi()},hi=function(){if(ra!==aa.deferred||!fa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ra=aa.loading,Na(),fa&&ke({url:fa},function(R){R?da(R):(ra=aa.loaded,Na())})},ea={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ra===aa.loaded||ea.applyArabicShaping!=null},isLoading:function(){return ra===aa.loading},setState:function(D){ra=D.pluginStatus,fa=D.pluginURL},isParsed:function(){return ea.applyArabicShaping!=null&&ea.processBidirectionalText!=null&&ea.processStyledBidirectionalText!=null},getPluginURL:function(){return fa}},Ha=function(){!ea.isLoading()&&!ea.isLoaded()&&_a()==="deferred"&&hi()},Ma=function(D,U){this.zoom=D,U?(this.now=U.now,this.fadeDuration=U.fadeDuration,this.zoomHistory=U.zoomHistory,this.transition=U.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Oe,this.transition={})};Ma.prototype.isSupportedScript=function(D){return Gn(D,ea.isLoaded())},Ma.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ma.prototype.getCrossfadeParameters=function(){var D=this.zoom,U=D-Math.floor(D),rt=this.crossFadingFactor();return D>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:U+(1-U)*rt}:{fromScale:.5,toScale:1,t:1-(1-rt)*U}};var Ja=function(D,U){this.property=D,this.value=U,this.expression=Tu(U===void 0?D.specification.default:U,D.specification)};Ja.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ja.prototype.possiblyEvaluate=function(D,U,rt){return this.property.possiblyEvaluate(this,D,U,rt)};var Mi=function(D){this.property=D,this.value=new Ja(D,void 0)};Mi.prototype.transitioned=function(D,U){return new to(this.property,this.value,U,x({},D.transition,this.transition),D.now)},Mi.prototype.untransitioned=function(){return new to(this.property,this.value,null,{},0)};var si=function(D){this._properties=D,this._values=Object.create(D.defaultTransitionablePropertyValues)};si.prototype.getValue=function(D){return O(this._values[D].value.value)},si.prototype.setValue=function(D,U){this._values.hasOwnProperty(D)||(this._values[D]=new Mi(this._values[D].property)),this._values[D].value=new Ja(this._values[D].property,U===null?void 0:O(U))},si.prototype.getTransition=function(D){return O(this._values[D].transition)},si.prototype.setTransition=function(D,U){this._values.hasOwnProperty(D)||(this._values[D]=new Mi(this._values[D].property)),this._values[D].transition=O(U)||void 0},si.prototype.serialize=function(){for(var D={},U=0,rt=Object.keys(this._values);U<rt.length;U+=1){var ct=rt[U],yt=this.getValue(ct);yt!==void 0&&(D[ct]=yt);var Et=this.getTransition(ct);Et!==void 0&&(D[ct+"-transition"]=Et)}return D},si.prototype.transitioned=function(D,U){for(var rt=new eo(this._properties),ct=0,yt=Object.keys(this._values);ct<yt.length;ct+=1){var Et=yt[ct];rt._values[Et]=this._values[Et].transitioned(D,U._values[Et])}return rt},si.prototype.untransitioned=function(){for(var D=new eo(this._properties),U=0,rt=Object.keys(this._values);U<rt.length;U+=1){var ct=rt[U];D._values[ct]=this._values[ct].untransitioned()}return D};var to=function(D,U,rt,ct,yt){this.property=D,this.value=U,this.begin=yt+ct.delay||0,this.end=this.begin+ct.duration||0,D.specification.transition&&(ct.delay||ct.duration)&&(this.prior=rt)};to.prototype.possiblyEvaluate=function(D,U,rt){var ct=D.now||0,yt=this.value.possiblyEvaluate(D,U,rt),Et=this.prior;if(Et){if(ct>this.end)return this.prior=null,yt;if(this.value.isDataDriven())return this.prior=null,yt;if(ct<this.begin)return Et.possiblyEvaluate(D,U,rt);var Zt=(ct-this.begin)/(this.end-this.begin);return this.property.interpolate(Et.possiblyEvaluate(D,U,rt),yt,f(Zt))}else return yt};var eo=function(D){this._properties=D,this._values=Object.create(D.defaultTransitioningPropertyValues)};eo.prototype.possiblyEvaluate=function(D,U,rt){for(var ct=new po(this._properties),yt=0,Et=Object.keys(this._values);yt<Et.length;yt+=1){var Zt=Et[yt];ct._values[Zt]=this._values[Zt].possiblyEvaluate(D,U,rt)}return ct},eo.prototype.hasTransition=function(){for(var D=0,U=Object.keys(this._values);D<U.length;D+=1){var rt=U[D];if(this._values[rt].prior)return!0}return!1};var io=function(D){this._properties=D,this._values=Object.create(D.defaultPropertyValues)};io.prototype.getValue=function(D){return O(this._values[D].value)},io.prototype.setValue=function(D,U){this._values[D]=new Ja(this._values[D].property,U===null?void 0:O(U))},io.prototype.serialize=function(){for(var D={},U=0,rt=Object.keys(this._values);U<rt.length;U+=1){var ct=rt[U],yt=this.getValue(ct);yt!==void 0&&(D[ct]=yt)}return D},io.prototype.possiblyEvaluate=function(D,U,rt){for(var ct=new po(this._properties),yt=0,Et=Object.keys(this._values);yt<Et.length;yt+=1){var Zt=Et[yt];ct._values[Zt]=this._values[Zt].possiblyEvaluate(D,U,rt)}return ct};var Si=function(D,U,rt){this.property=D,this.value=U,this.parameters=rt};Si.prototype.isConstant=function(){return this.value.kind==="constant"},Si.prototype.constantOr=function(D){return this.value.kind==="constant"?this.value.value:D},Si.prototype.evaluate=function(D,U,rt,ct){return this.property.evaluate(this.value,this.parameters,D,U,rt,ct)};var po=function(D){this._properties=D,this._values=Object.create(D.defaultPossiblyEvaluatedValues)};po.prototype.get=function(D){return this._values[D]};var ca=function(D){this.specification=D};ca.prototype.possiblyEvaluate=function(D,U){return D.expression.evaluate(U)},ca.prototype.interpolate=function(D,U,rt){var ct=vu[this.specification.type];return ct?ct(D,U,rt):D};var La=function(D,U){this.specification=D,this.overrides=U};La.prototype.possiblyEvaluate=function(D,U,rt,ct){return D.expression.kind==="constant"||D.expression.kind==="camera"?new Si(this,{kind:"constant",value:D.expression.evaluate(U,null,{},rt,ct)},U):new Si(this,D.expression,U)},La.prototype.interpolate=function(D,U,rt){if(D.value.kind!=="constant"||U.value.kind!=="constant")return D;if(D.value.value===void 0||U.value.value===void 0)return new Si(this,{kind:"constant",value:void 0},D.parameters);var ct=vu[this.specification.type];return ct?new Si(this,{kind:"constant",value:ct(D.value.value,U.value.value,rt)},D.parameters):D},La.prototype.evaluate=function(D,U,rt,ct,yt,Et){return D.kind==="constant"?D.value:D.evaluate(U,rt,ct,yt,Et)};var Po=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(rt,ct,yt,Et){if(rt.value===void 0)return new Si(this,{kind:"constant",value:void 0},ct);if(rt.expression.kind==="constant"){var Zt=rt.expression.evaluate(ct,null,{},yt,Et),ce=rt.property.specification.type==="resolvedImage",we=ce&&typeof Zt!="string"?Zt.name:Zt,Le=this._calculate(we,we,we,ct);return new Si(this,{kind:"constant",value:Le},ct)}else if(rt.expression.kind==="camera"){var Ve=this._calculate(rt.expression.evaluate({zoom:ct.zoom-1}),rt.expression.evaluate({zoom:ct.zoom}),rt.expression.evaluate({zoom:ct.zoom+1}),ct);return new Si(this,{kind:"constant",value:Ve},ct)}else return new Si(this,rt.expression,ct)},D.prototype.evaluate=function(rt,ct,yt,Et,Zt,ce){if(rt.kind==="source"){var we=rt.evaluate(ct,yt,Et,Zt,ce);return this._calculate(we,we,we,ct)}else return rt.kind==="composite"?this._calculate(rt.evaluate({zoom:Math.floor(ct.zoom)-1},yt,Et),rt.evaluate({zoom:Math.floor(ct.zoom)},yt,Et),rt.evaluate({zoom:Math.floor(ct.zoom)+1},yt,Et),ct):rt.value},D.prototype._calculate=function(rt,ct,yt,Et){var Zt=Et.zoom;return Zt>Et.zoomHistory.lastIntegerZoom?{from:rt,to:ct}:{from:yt,to:ct}},D.prototype.interpolate=function(rt){return rt},D}(La),_o=function(D){this.specification=D};_o.prototype.possiblyEvaluate=function(D,U,rt,ct){if(D.value!==void 0)if(D.expression.kind==="constant"){var yt=D.expression.evaluate(U,null,{},rt,ct);return this._calculate(yt,yt,yt,U)}else return this._calculate(D.expression.evaluate(new Ma(Math.floor(U.zoom-1),U)),D.expression.evaluate(new Ma(Math.floor(U.zoom),U)),D.expression.evaluate(new Ma(Math.floor(U.zoom+1),U)),U)},_o.prototype._calculate=function(D,U,rt,ct){var yt=ct.zoom;return yt>ct.zoomHistory.lastIntegerZoom?{from:D,to:U}:{from:rt,to:U}},_o.prototype.interpolate=function(D){return D};var oo=function(D){this.specification=D};oo.prototype.possiblyEvaluate=function(D,U,rt,ct){return!!D.expression.evaluate(U,null,{},rt,ct)},oo.prototype.interpolate=function(){return!1};var vi=function(D){this.properties=D,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var U in D){var rt=D[U];rt.specification.overridable&&this.overridableProperties.push(U);var ct=this.defaultPropertyValues[U]=new Ja(rt,void 0),yt=this.defaultTransitionablePropertyValues[U]=new Mi(rt);this.defaultTransitioningPropertyValues[U]=yt.untransitioned(),this.defaultPossiblyEvaluatedValues[U]=ct.possiblyEvaluate({})}};_t("DataDrivenProperty",La),_t("DataConstantProperty",ca),_t("CrossFadedDataDrivenProperty",Po),_t("CrossFadedProperty",_o),_t("ColorRampProperty",oo);var ji="-transition",Gi=function(R){function D(U,rt){if(R.call(this),this.id=U.id,this.type=U.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},U.type!=="custom"&&(U=U,this.metadata=U.metadata,this.minzoom=U.minzoom,this.maxzoom=U.maxzoom,U.type!=="background"&&(this.source=U.source,this.sourceLayer=U["source-layer"],this.filter=U.filter),rt.layout&&(this._unevaluatedLayout=new io(rt.layout)),rt.paint)){this._transitionablePaint=new si(rt.paint);for(var ct in U.paint)this.setPaintProperty(ct,U.paint[ct],{validate:!1});for(var yt in U.layout)this.setLayoutProperty(yt,U.layout[yt],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new po(rt.paint)}}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},D.prototype.getLayoutProperty=function(rt){return rt==="visibility"?this.visibility:this._unevaluatedLayout.getValue(rt)},D.prototype.setLayoutProperty=function(rt,ct,yt){if(yt===void 0&&(yt={}),ct!=null){var Et="layers."+this.id+".layout."+rt;if(this._validate(Ia,Et,rt,ct,yt))return}if(rt==="visibility"){this.visibility=ct;return}this._unevaluatedLayout.setValue(rt,ct)},D.prototype.getPaintProperty=function(rt){return m(rt,ji)?this._transitionablePaint.getTransition(rt.slice(0,-ji.length)):this._transitionablePaint.getValue(rt)},D.prototype.setPaintProperty=function(rt,ct,yt){if(yt===void 0&&(yt={}),ct!=null){var Et="layers."+this.id+".paint."+rt;if(this._validate(Da,Et,rt,ct,yt))return!1}if(m(rt,ji))return this._transitionablePaint.setTransition(rt.slice(0,-ji.length),ct||void 0),!1;var Zt=this._transitionablePaint._values[rt],ce=Zt.property.specification["property-type"]==="cross-faded-data-driven",we=Zt.value.isDataDriven(),Le=Zt.value;this._transitionablePaint.setValue(rt,ct),this._handleSpecialPaintPropertyUpdate(rt);var Ve=this._transitionablePaint._values[rt].value,ar=Ve.isDataDriven();return ar||we||ce||this._handleOverridablePaintPropertyUpdate(rt,Le,Ve)},D.prototype._handleSpecialPaintPropertyUpdate=function(rt){},D.prototype._handleOverridablePaintPropertyUpdate=function(rt,ct,yt){return!1},D.prototype.isHidden=function(rt){return this.minzoom&&rt<this.minzoom||this.maxzoom&&rt>=this.maxzoom?!0:this.visibility==="none"},D.prototype.updateTransitions=function(rt){this._transitioningPaint=this._transitionablePaint.transitioned(rt,this._transitioningPaint)},D.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},D.prototype.recalculate=function(rt,ct){rt.getCrossfadeParameters&&(this._crossfadeParameters=rt.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(rt,void 0,ct)),this.paint=this._transitioningPaint.possiblyEvaluate(rt,void 0,ct)},D.prototype.serialize=function(){var rt={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(rt.layout=rt.layout||{},rt.layout.visibility=this.visibility),I(rt,function(ct,yt){return ct!==void 0&&!(yt==="layout"&&!Object.keys(ct).length)&&!(yt==="paint"&&!Object.keys(ct).length)})},D.prototype._validate=function(rt,ct,yt,Et,Zt){return Zt===void 0&&(Zt={}),Zt&&Zt.validate===!1?!1:za(this,rt.call(In,{key:ct,layerType:this.type,objectKey:yt,value:Et,styleSpec:Mr,style:{glyphs:!0,sprite:!0}}))},D.prototype.is3D=function(){return!1},D.prototype.isTileClipped=function(){return!1},D.prototype.hasOffscreenPass=function(){return!1},D.prototype.resize=function(){},D.prototype.isStateDependent=function(){for(var rt in this.paint._values){var ct=this.paint.get(rt);if(!(!(ct instanceof Si)||!As(ct.property.specification))&&(ct.value.kind==="source"||ct.value.kind==="composite")&&ct.value.isStateDependent)return!0}return!1},D}(Xe),ls={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ss=function(D,U){this._structArray=D,this._pos1=U*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ii=128,Sl=5,Qa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Qa.serialize=function(D,U){return D._trim(),U&&(D.isTransferred=!0,U.push(D.arrayBuffer)),{length:D.length,arrayBuffer:D.arrayBuffer}},Qa.deserialize=function(D){var U=Object.create(this.prototype);return U.arrayBuffer=D.arrayBuffer,U.length=D.length,U.capacity=D.arrayBuffer.byteLength/U.bytesPerElement,U._refreshViews(),U},Qa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Qa.prototype.clear=function(){this.length=0},Qa.prototype.resize=function(D){this.reserve(D),this.length=D},Qa.prototype.reserve=function(D){if(D>this.capacity){this.capacity=Math.max(D,Math.floor(this.capacity*Sl),Ii),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var U=this.uint8;this._refreshViews(),U&&this.uint8.set(U)}},Qa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function ki(R,D){D===void 0&&(D=1);var U=0,rt=0,ct=R.map(function(Et){var Zt=fc(Et.type),ce=U=Dh(U,Math.max(D,Zt)),we=Et.components||1;return rt=Math.max(rt,Zt),U+=Zt*we,{name:Et.name,type:Et.type,components:we,offset:ce}}),yt=Dh(U,Math.max(rt,D));return{members:ct,size:yt,alignment:D}}function fc(R){return ls[R].BYTES_PER_ELEMENT}function Dh(R,D){return Math.ceil(R/D)*D}var Ku=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct){var yt=this.length;return this.resize(yt+1),this.emplace(yt,rt,ct)},D.prototype.emplace=function(rt,ct,yt){var Et=rt*2;return this.int16[Et+0]=ct,this.int16[Et+1]=yt,rt},D}(Qa);Ku.prototype.bytesPerElement=4,_t("StructArrayLayout2i4",Ku);var eh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,rt,ct,yt,Et)},D.prototype.emplace=function(rt,ct,yt,Et,Zt){var ce=rt*4;return this.int16[ce+0]=ct,this.int16[ce+1]=yt,this.int16[ce+2]=Et,this.int16[ce+3]=Zt,rt},D}(Qa);eh.prototype.bytesPerElement=8,_t("StructArrayLayout4i8",eh);var Su=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce){var we=this.length;return this.resize(we+1),this.emplace(we,rt,ct,yt,Et,Zt,ce)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we){var Le=rt*6;return this.int16[Le+0]=ct,this.int16[Le+1]=yt,this.int16[Le+2]=Et,this.int16[Le+3]=Zt,this.int16[Le+4]=ce,this.int16[Le+5]=we,rt},D}(Qa);Su.prototype.bytesPerElement=12,_t("StructArrayLayout2i4i12",Su);var Cf=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce){var we=this.length;return this.resize(we+1),this.emplace(we,rt,ct,yt,Et,Zt,ce)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we){var Le=rt*4,Ve=rt*8;return this.int16[Le+0]=ct,this.int16[Le+1]=yt,this.uint8[Ve+4]=Et,this.uint8[Ve+5]=Zt,this.uint8[Ve+6]=ce,this.uint8[Ve+7]=we,rt},D}(Qa);Cf.prototype.bytesPerElement=8,_t("StructArrayLayout2i4ub8",Cf);var Lf=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct){var yt=this.length;return this.resize(yt+1),this.emplace(yt,rt,ct)},D.prototype.emplace=function(rt,ct,yt){var Et=rt*2;return this.float32[Et+0]=ct,this.float32[Et+1]=yt,rt},D}(Qa);Lf.prototype.bytesPerElement=8,_t("StructArrayLayout2f8",Lf);var jo=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar){var er=this.length;return this.resize(er+1),this.emplace(er,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er){var br=rt*10;return this.uint16[br+0]=ct,this.uint16[br+1]=yt,this.uint16[br+2]=Et,this.uint16[br+3]=Zt,this.uint16[br+4]=ce,this.uint16[br+5]=we,this.uint16[br+6]=Le,this.uint16[br+7]=Ve,this.uint16[br+8]=ar,this.uint16[br+9]=er,rt},D}(Qa);jo.prototype.bytesPerElement=20,_t("StructArrayLayout10ui20",jo);var Eu=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br){var Ur=this.length;return this.resize(Ur+1),this.emplace(Ur,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur){var fn=rt*12;return this.int16[fn+0]=ct,this.int16[fn+1]=yt,this.int16[fn+2]=Et,this.int16[fn+3]=Zt,this.uint16[fn+4]=ce,this.uint16[fn+5]=we,this.uint16[fn+6]=Le,this.uint16[fn+7]=Ve,this.int16[fn+8]=ar,this.int16[fn+9]=er,this.int16[fn+10]=br,this.int16[fn+11]=Ur,rt},D}(Qa);Eu.prototype.bytesPerElement=24,_t("StructArrayLayout4i4ui4i24",Eu);var rh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt){var Et=this.length;return this.resize(Et+1),this.emplace(Et,rt,ct,yt)},D.prototype.emplace=function(rt,ct,yt,Et){var Zt=rt*3;return this.float32[Zt+0]=ct,this.float32[Zt+1]=yt,this.float32[Zt+2]=Et,rt},D}(Qa);rh.prototype.bytesPerElement=12,_t("StructArrayLayout3f12",rh);var nh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,rt)},D.prototype.emplace=function(rt,ct){var yt=rt*1;return this.uint32[yt+0]=ct,rt},D}(Qa);nh.prototype.bytesPerElement=4,_t("StructArrayLayout1ul4",nh);var cc=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve){var ar=this.length;return this.resize(ar+1),this.emplace(ar,rt,ct,yt,Et,Zt,ce,we,Le,Ve)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar){var er=rt*10,br=rt*5;return this.int16[er+0]=ct,this.int16[er+1]=yt,this.int16[er+2]=Et,this.int16[er+3]=Zt,this.int16[er+4]=ce,this.int16[er+5]=we,this.uint32[br+3]=Le,this.uint16[er+8]=Ve,this.uint16[er+9]=ar,rt},D}(Qa);cc.prototype.bytesPerElement=20,_t("StructArrayLayout6i1ul2ui20",cc);var wc=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce){var we=this.length;return this.resize(we+1),this.emplace(we,rt,ct,yt,Et,Zt,ce)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we){var Le=rt*6;return this.int16[Le+0]=ct,this.int16[Le+1]=yt,this.int16[Le+2]=Et,this.int16[Le+3]=Zt,this.int16[Le+4]=ce,this.int16[Le+5]=we,rt},D}(Qa);wc.prototype.bytesPerElement=12,_t("StructArrayLayout2i2i2i12",wc);var eu=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt){var ce=this.length;return this.resize(ce+1),this.emplace(ce,rt,ct,yt,Et,Zt)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce){var we=rt*4,Le=rt*8;return this.float32[we+0]=ct,this.float32[we+1]=yt,this.float32[we+2]=Et,this.int16[Le+6]=Zt,this.int16[Le+7]=ce,rt},D}(Qa);eu.prototype.bytesPerElement=16,_t("StructArrayLayout2f1f2i16",eu);var us=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,rt,ct,yt,Et)},D.prototype.emplace=function(rt,ct,yt,Et,Zt){var ce=rt*12,we=rt*3;return this.uint8[ce+0]=ct,this.uint8[ce+1]=yt,this.float32[we+1]=Et,this.float32[we+2]=Zt,rt},D}(Qa);us.prototype.bytesPerElement=12,_t("StructArrayLayout2ub2f12",us);var ru=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt){var Et=this.length;return this.resize(Et+1),this.emplace(Et,rt,ct,yt)},D.prototype.emplace=function(rt,ct,yt,Et){var Zt=rt*3;return this.uint16[Zt+0]=ct,this.uint16[Zt+1]=yt,this.uint16[Zt+2]=Et,rt},D}(Qa);ru.prototype.bytesPerElement=6,_t("StructArrayLayout3ui6",ru);var hc=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn){var Mn=this.length;return this.resize(Mn+1),this.emplace(Mn,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn,Mn){var _n=rt*24,jn=rt*12,sa=rt*48;return this.int16[_n+0]=ct,this.int16[_n+1]=yt,this.uint16[_n+2]=Et,this.uint16[_n+3]=Zt,this.uint32[jn+2]=ce,this.uint32[jn+3]=we,this.uint32[jn+4]=Le,this.uint16[_n+10]=Ve,this.uint16[_n+11]=ar,this.uint16[_n+12]=er,this.float32[jn+7]=br,this.float32[jn+8]=Ur,this.uint8[sa+36]=fn,this.uint8[sa+37]=tn,this.uint8[sa+38]=Sn,this.uint32[jn+10]=xn,this.int16[_n+22]=Mn,rt},D}(Qa);hc.prototype.bytesPerElement=48,_t("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hc);var Tc=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn,Mn,_n,jn,sa,na,Ta,ya,ba,Ua,Aa,Ca){var Xa=this.length;return this.resize(Xa+1),this.emplace(Xa,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn,Mn,_n,jn,sa,na,Ta,ya,ba,Ua,Aa,Ca)},D.prototype.emplace=function(rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn,Mn,_n,jn,sa,na,Ta,ya,ba,Ua,Aa,Ca,Xa){var Ba=rt*34,ui=rt*17;return this.int16[Ba+0]=ct,this.int16[Ba+1]=yt,this.int16[Ba+2]=Et,this.int16[Ba+3]=Zt,this.int16[Ba+4]=ce,this.int16[Ba+5]=we,this.int16[Ba+6]=Le,this.int16[Ba+7]=Ve,this.uint16[Ba+8]=ar,this.uint16[Ba+9]=er,this.uint16[Ba+10]=br,this.uint16[Ba+11]=Ur,this.uint16[Ba+12]=fn,this.uint16[Ba+13]=tn,this.uint16[Ba+14]=Sn,this.uint16[Ba+15]=xn,this.uint16[Ba+16]=Mn,this.uint16[Ba+17]=_n,this.uint16[Ba+18]=jn,this.uint16[Ba+19]=sa,this.uint16[Ba+20]=na,this.uint16[Ba+21]=Ta,this.uint16[Ba+22]=ya,this.uint32[ui+12]=ba,this.float32[ui+13]=Ua,this.float32[ui+14]=Aa,this.float32[ui+15]=Ca,this.float32[ui+16]=Xa,rt},D}(Qa);Tc.prototype.bytesPerElement=68,_t("StructArrayLayout8i15ui1ul4f68",Tc);var Pf=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,rt)},D.prototype.emplace=function(rt,ct){var yt=rt*1;return this.float32[yt+0]=ct,rt},D}(Qa);Pf.prototype.bytesPerElement=4,_t("StructArrayLayout1f4",Pf);var ah=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt){var Et=this.length;return this.resize(Et+1),this.emplace(Et,rt,ct,yt)},D.prototype.emplace=function(rt,ct,yt,Et){var Zt=rt*3;return this.int16[Zt+0]=ct,this.int16[Zt+1]=yt,this.int16[Zt+2]=Et,rt},D}(Qa);ah.prototype.bytesPerElement=6,_t("StructArrayLayout3i6",ah);var Cu=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt){var Et=this.length;return this.resize(Et+1),this.emplace(Et,rt,ct,yt)},D.prototype.emplace=function(rt,ct,yt,Et){var Zt=rt*2,ce=rt*4;return this.uint32[Zt+0]=ct,this.uint16[ce+2]=yt,this.uint16[ce+3]=Et,rt},D}(Qa);Cu.prototype.bytesPerElement=8,_t("StructArrayLayout1ul2ui8",Cu);var vc=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct){var yt=this.length;return this.resize(yt+1),this.emplace(yt,rt,ct)},D.prototype.emplace=function(rt,ct,yt){var Et=rt*2;return this.uint16[Et+0]=ct,this.uint16[Et+1]=yt,rt},D}(Qa);vc.prototype.bytesPerElement=4,_t("StructArrayLayout2ui4",vc);var Rf=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,rt)},D.prototype.emplace=function(rt,ct){var yt=rt*1;return this.uint16[yt+0]=ct,rt},D}(Qa);Rf.prototype.bytesPerElement=2,_t("StructArrayLayout1ui2",Rf);var Ju=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},D.prototype.emplaceBack=function(rt,ct,yt,Et){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,rt,ct,yt,Et)},D.prototype.emplace=function(rt,ct,yt,Et,Zt){var ce=rt*4;return this.float32[ce+0]=ct,this.float32[ce+1]=yt,this.float32[ce+2]=Et,this.float32[ce+3]=Zt,rt},D}(Qa);Ju.prototype.bytesPerElement=16,_t("StructArrayLayout4f16",Ju);var Ih=function(R){function D(){R.apply(this,arguments)}R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D;var U={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return U.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},U.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},U.x1.get=function(){return this._structArray.int16[this._pos2+2]},U.y1.get=function(){return this._structArray.int16[this._pos2+3]},U.x2.get=function(){return this._structArray.int16[this._pos2+4]},U.y2.get=function(){return this._structArray.int16[this._pos2+5]},U.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},U.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},U.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},U.anchorPoint.get=function(){return new r(this.anchorPointX,this.anchorPointY)},Object.defineProperties(D.prototype,U),D}(Ss);Ih.prototype.size=20;var ih=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.get=function(rt){return new Ih(this,rt)},D}(cc);_t("CollisionBoxArray",ih);var Qu=function(R){function D(){R.apply(this,arguments)}R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D;var U={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return U.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},U.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},U.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},U.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},U.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},U.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},U.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},U.segment.get=function(){return this._structArray.uint16[this._pos2+10]},U.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},U.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},U.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},U.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},U.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},U.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},U.placedOrientation.set=function(rt){this._structArray.uint8[this._pos1+37]=rt},U.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},U.hidden.set=function(rt){this._structArray.uint8[this._pos1+38]=rt},U.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},U.crossTileID.set=function(rt){this._structArray.uint32[this._pos4+10]=rt},U.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(D.prototype,U),D}(Ss);Qu.prototype.size=48;var oh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.get=function(rt){return new Qu(this,rt)},D}(hc);_t("PlacedSymbolArray",oh);var Df=function(R){function D(){R.apply(this,arguments)}R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D;var U={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return U.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},U.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},U.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},U.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},U.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},U.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},U.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},U.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},U.key.get=function(){return this._structArray.uint16[this._pos2+8]},U.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},U.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},U.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},U.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},U.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},U.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},U.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},U.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},U.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},U.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},U.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},U.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},U.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},U.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},U.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},U.crossTileID.set=function(rt){this._structArray.uint32[this._pos4+12]=rt},U.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},U.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},U.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},U.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(D.prototype,U),D}(Ss);Df.prototype.size=68;var kh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.get=function(rt){return new Df(this,rt)},D}(Tc);_t("SymbolInstanceArray",kh);var zh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.getoffsetX=function(rt){return this.float32[rt*1+0]},D}(Pf);_t("GlyphOffsetArray",zh);var qs=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.getx=function(rt){return this.int16[rt*3+0]},D.prototype.gety=function(rt){return this.int16[rt*3+1]},D.prototype.gettileUnitDistanceFromAnchor=function(rt){return this.int16[rt*3+2]},D}(ah);_t("SymbolLineVertexArray",qs);var _h=function(R){function D(){R.apply(this,arguments)}R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D;var U={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return U.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},U.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},U.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(D.prototype,U),D}(Ss);_h.prototype.size=8;var Fh=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.get=function(rt){return new _h(this,rt)},D}(Cu);_t("FeatureIndexArray",Fh);var kv=ki([{name:"a_pos",components:2,type:"Int16"}],4),Oh=kv.members,so=function(D){D===void 0&&(D=[]),this.segments=D};so.prototype.prepareSegment=function(D,U,rt,ct){var yt=this.segments[this.segments.length-1];return D>so.MAX_VERTEX_ARRAY_LENGTH&&F("Max vertices per segment is "+so.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+D),(!yt||yt.vertexLength+D>so.MAX_VERTEX_ARRAY_LENGTH||yt.sortKey!==ct)&&(yt={vertexOffset:U.length,primitiveOffset:rt.length,vertexLength:0,primitiveLength:0},ct!==void 0&&(yt.sortKey=ct),this.segments.push(yt)),yt},so.prototype.get=function(){return this.segments},so.prototype.destroy=function(){for(var D=0,U=this.segments;D<U.length;D+=1){var rt=U[D];for(var ct in rt.vaos)rt.vaos[ct].destroy()}},so.simpleSegment=function(D,U,rt,ct){return new so([{vertexOffset:D,primitiveOffset:U,vertexLength:rt,primitiveLength:ct,vaos:{},sortKey:0}])},so.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,_t("SegmentVector",so);function ut(R,D){return R=h(Math.floor(R),0,255),D=h(Math.floor(D),0,255),256*R+D}var Y=ki([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ht=L(function(R){function D(U,rt){var ct,yt,Et,Zt,ce,we,Le,Ve;for(ct=U.length&3,yt=U.length-ct,Et=rt,ce=3432918353,we=461845907,Ve=0;Ve<yt;)Le=U.charCodeAt(Ve)&255|(U.charCodeAt(++Ve)&255)<<8|(U.charCodeAt(++Ve)&255)<<16|(U.charCodeAt(++Ve)&255)<<24,++Ve,Le=(Le&65535)*ce+(((Le>>>16)*ce&65535)<<16)&4294967295,Le=Le<<15|Le>>>17,Le=(Le&65535)*we+(((Le>>>16)*we&65535)<<16)&4294967295,Et^=Le,Et=Et<<13|Et>>>19,Zt=(Et&65535)*5+(((Et>>>16)*5&65535)<<16)&4294967295,Et=(Zt&65535)+27492+(((Zt>>>16)+58964&65535)<<16);switch(Le=0,ct){case 3:Le^=(U.charCodeAt(Ve+2)&255)<<16;case 2:Le^=(U.charCodeAt(Ve+1)&255)<<8;case 1:Le^=U.charCodeAt(Ve)&255,Le=(Le&65535)*ce+(((Le>>>16)*ce&65535)<<16)&4294967295,Le=Le<<15|Le>>>17,Le=(Le&65535)*we+(((Le>>>16)*we&65535)<<16)&4294967295,Et^=Le}return Et^=U.length,Et^=Et>>>16,Et=(Et&65535)*2246822507+(((Et>>>16)*2246822507&65535)<<16)&4294967295,Et^=Et>>>13,Et=(Et&65535)*3266489909+(((Et>>>16)*3266489909&65535)<<16)&4294967295,Et^=Et>>>16,Et>>>0}R.exports=D}),q=L(function(R){function D(U,rt){for(var ct=U.length,yt=rt^ct,Et=0,Zt;ct>=4;)Zt=U.charCodeAt(Et)&255|(U.charCodeAt(++Et)&255)<<8|(U.charCodeAt(++Et)&255)<<16|(U.charCodeAt(++Et)&255)<<24,Zt=(Zt&65535)*1540483477+(((Zt>>>16)*1540483477&65535)<<16),Zt^=Zt>>>24,Zt=(Zt&65535)*1540483477+(((Zt>>>16)*1540483477&65535)<<16),yt=(yt&65535)*1540483477+(((yt>>>16)*1540483477&65535)<<16)^Zt,ct-=4,++Et;switch(ct){case 3:yt^=(U.charCodeAt(Et+2)&255)<<16;case 2:yt^=(U.charCodeAt(Et+1)&255)<<8;case 1:yt^=U.charCodeAt(Et)&255,yt=(yt&65535)*1540483477+(((yt>>>16)*1540483477&65535)<<16)}return yt^=yt>>>13,yt=(yt&65535)*1540483477+(((yt>>>16)*1540483477&65535)<<16),yt^=yt>>>15,yt>>>0}R.exports=D}),vt=ht,It=ht,Vt=q;vt.murmur3=It,vt.murmur2=Vt;var se=function(){this.ids=[],this.positions=[],this.indexed=!1};se.prototype.add=function(D,U,rt,ct){this.ids.push(Fe(D)),this.positions.push(U,rt,ct)},se.prototype.getPositions=function(D){for(var U=Fe(D),rt=0,ct=this.ids.length-1;rt<ct;){var yt=rt+ct>>1;this.ids[yt]>=U?ct=yt:rt=yt+1}for(var Et=[];this.ids[rt]===U;){var Zt=this.positions[3*rt],ce=this.positions[3*rt+1],we=this.positions[3*rt+2];Et.push({index:Zt,start:ce,end:we}),rt++}return Et},se.serialize=function(D,U){var rt=new Float64Array(D.ids),ct=new Uint32Array(D.positions);return $e(rt,ct,0,rt.length-1),U&&U.push(rt.buffer,ct.buffer),{ids:rt,positions:ct}},se.deserialize=function(D){var U=new se;return U.ids=D.ids,U.positions=D.positions,U.indexed=!0,U};var Me=Math.pow(2,53)-1;function Fe(R){var D=+R;return!isNaN(D)&&D<=Me?D:vt(String(R))}function $e(R,D,U,rt){for(;U<rt;){for(var ct=R[U+rt>>1],yt=U-1,Et=rt+1;;){do yt++;while(R[yt]<ct);do Et--;while(R[Et]>ct);if(yt>=Et)break;ur(R,yt,Et),ur(D,3*yt,3*Et),ur(D,3*yt+1,3*Et+1),ur(D,3*yt+2,3*Et+2)}Et-U<rt-Et?($e(R,D,U,Et),U=Et+1):($e(R,D,Et+1,rt),rt=Et)}}function ur(R,D,U){var rt=R[D];R[D]=R[U],R[U]=rt}_t("FeaturePositionMap",se);var lr=function(D,U){this.gl=D.gl,this.location=U},Fr=function(R){function D(U,rt){R.call(this,U,rt),this.current=0}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){this.current!==rt&&(this.current=rt,this.gl.uniform1i(this.location,rt))},D}(lr),jr=function(R){function D(U,rt){R.call(this,U,rt),this.current=0}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){this.current!==rt&&(this.current=rt,this.gl.uniform1f(this.location,rt))},D}(lr),Zr=function(R){function D(U,rt){R.call(this,U,rt),this.current=[0,0]}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1])&&(this.current=rt,this.gl.uniform2f(this.location,rt[0],rt[1]))},D}(lr),Wr=function(R){function D(U,rt){R.call(this,U,rt),this.current=[0,0,0]}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1]||rt[2]!==this.current[2])&&(this.current=rt,this.gl.uniform3f(this.location,rt[0],rt[1],rt[2]))},D}(lr),Jr=function(R){function D(U,rt){R.call(this,U,rt),this.current=[0,0,0,0]}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){(rt[0]!==this.current[0]||rt[1]!==this.current[1]||rt[2]!==this.current[2]||rt[3]!==this.current[3])&&(this.current=rt,this.gl.uniform4f(this.location,rt[0],rt[1],rt[2],rt[3]))},D}(lr),dn=function(R){function D(U,rt){R.call(this,U,rt),this.current=ni.transparent}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){(rt.r!==this.current.r||rt.g!==this.current.g||rt.b!==this.current.b||rt.a!==this.current.a)&&(this.current=rt,this.gl.uniform4f(this.location,rt.r,rt.g,rt.b,rt.a))},D}(lr),kn=new Float32Array(16),Hn=function(R){function D(U,rt){R.call(this,U,rt),this.current=kn}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.set=function(rt){if(rt[12]!==this.current[12]||rt[0]!==this.current[0]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);return}for(var ct=1;ct<16;ct++)if(rt[ct]!==this.current[ct]){this.current=rt,this.gl.uniformMatrix4fv(this.location,!1,rt);break}},D}(lr);function Kn(R){return[ut(255*R.r,255*R.g),ut(255*R.b,255*R.a)]}var Qn=function(D,U,rt){this.value=D,this.uniformNames=U.map(function(ct){return"u_"+ct}),this.type=rt};Qn.prototype.setUniform=function(D,U,rt){D.set(rt.constantOr(this.value))},Qn.prototype.getBinding=function(D,U,rt){return this.type==="color"?new dn(D,U):new jr(D,U)};var Xn=function(D,U){this.uniformNames=U.map(function(rt){return"u_"+rt}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Xn.prototype.setConstantPatternPositions=function(D,U){this.pixelRatioFrom=U.pixelRatio,this.pixelRatioTo=D.pixelRatio,this.patternFrom=U.tlbr,this.patternTo=D.tlbr},Xn.prototype.setUniform=function(D,U,rt,ct){var yt=ct==="u_pattern_to"?this.patternTo:ct==="u_pattern_from"?this.patternFrom:ct==="u_pixel_ratio_to"?this.pixelRatioTo:ct==="u_pixel_ratio_from"?this.pixelRatioFrom:null;yt&&D.set(yt)},Xn.prototype.getBinding=function(D,U,rt){return rt.substr(0,9)==="u_pattern"?new Jr(D,U):new jr(D,U)};var qn=function(D,U,rt,ct){this.expression=D,this.type=rt,this.maxValue=0,this.paintVertexAttributes=U.map(function(yt){return{name:"a_"+yt,type:"Float32",components:rt==="color"?2:1,offset:0}}),this.paintVertexArray=new ct};qn.prototype.populatePaintArray=function(D,U,rt,ct,yt){var Et=this.paintVertexArray.length,Zt=this.expression.evaluate(new Ma(0),U,{},ct,[],yt);this.paintVertexArray.resize(D),this._setPaintValue(Et,D,Zt)},qn.prototype.updatePaintArray=function(D,U,rt,ct){var yt=this.expression.evaluate({zoom:0},rt,ct);this._setPaintValue(D,U,yt)},qn.prototype._setPaintValue=function(D,U,rt){if(this.type==="color")for(var ct=Kn(rt),yt=D;yt<U;yt++)this.paintVertexArray.emplace(yt,ct[0],ct[1]);else{for(var Et=D;Et<U;Et++)this.paintVertexArray.emplace(Et,rt);this.maxValue=Math.max(this.maxValue,Math.abs(rt))}},qn.prototype.upload=function(D){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=D.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},qn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var oa=function(D,U,rt,ct,yt,Et){this.expression=D,this.uniformNames=U.map(function(Zt){return"u_"+Zt+"_t"}),this.type=rt,this.useIntegerZoom=ct,this.zoom=yt,this.maxValue=0,this.paintVertexAttributes=U.map(function(Zt){return{name:"a_"+Zt,type:"Float32",components:rt==="color"?4:2,offset:0}}),this.paintVertexArray=new Et};oa.prototype.populatePaintArray=function(D,U,rt,ct,yt){var Et=this.expression.evaluate(new Ma(this.zoom),U,{},ct,[],yt),Zt=this.expression.evaluate(new Ma(this.zoom+1),U,{},ct,[],yt),ce=this.paintVertexArray.length;this.paintVertexArray.resize(D),this._setPaintValue(ce,D,Et,Zt)},oa.prototype.updatePaintArray=function(D,U,rt,ct){var yt=this.expression.evaluate({zoom:this.zoom},rt,ct),Et=this.expression.evaluate({zoom:this.zoom+1},rt,ct);this._setPaintValue(D,U,yt,Et)},oa.prototype._setPaintValue=function(D,U,rt,ct){if(this.type==="color")for(var yt=Kn(rt),Et=Kn(ct),Zt=D;Zt<U;Zt++)this.paintVertexArray.emplace(Zt,yt[0],yt[1],Et[0],Et[1]);else{for(var ce=D;ce<U;ce++)this.paintVertexArray.emplace(ce,rt,ct);this.maxValue=Math.max(this.maxValue,Math.abs(rt),Math.abs(ct))}},oa.prototype.upload=function(D){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=D.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},oa.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},oa.prototype.setUniform=function(D,U){var rt=this.useIntegerZoom?Math.floor(U.zoom):U.zoom,ct=h(this.expression.interpolationFactor(rt,this.zoom,this.zoom+1),0,1);D.set(ct)},oa.prototype.getBinding=function(D,U,rt){return new jr(D,U)};var ha=function(D,U,rt,ct,yt,Et){this.expression=D,this.type=U,this.useIntegerZoom=rt,this.zoom=ct,this.layerId=Et,this.zoomInPaintVertexArray=new yt,this.zoomOutPaintVertexArray=new yt};ha.prototype.populatePaintArray=function(D,U,rt){var ct=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(D),this.zoomOutPaintVertexArray.resize(D),this._setPaintValues(ct,D,U.patterns&&U.patterns[this.layerId],rt)},ha.prototype.updatePaintArray=function(D,U,rt,ct,yt){this._setPaintValues(D,U,rt.patterns&&rt.patterns[this.layerId],yt)},ha.prototype._setPaintValues=function(D,U,rt,ct){if(!(!ct||!rt)){var yt=rt.min,Et=rt.mid,Zt=rt.max,ce=ct[yt],we=ct[Et],Le=ct[Zt];if(!(!ce||!we||!Le))for(var Ve=D;Ve<U;Ve++)this.zoomInPaintVertexArray.emplace(Ve,we.tl[0],we.tl[1],we.br[0],we.br[1],ce.tl[0],ce.tl[1],ce.br[0],ce.br[1],we.pixelRatio,ce.pixelRatio),this.zoomOutPaintVertexArray.emplace(Ve,we.tl[0],we.tl[1],we.br[0],we.br[1],Le.tl[0],Le.tl[1],Le.br[0],Le.br[1],we.pixelRatio,Le.pixelRatio)}},ha.prototype.upload=function(D){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=D.createVertexBuffer(this.zoomInPaintVertexArray,Y.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=D.createVertexBuffer(this.zoomOutPaintVertexArray,Y.members,this.expression.isStateDependent))},ha.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var xa=function(D,U,rt){this.binders={},this._buffers=[];var ct=[];for(var yt in D.paint._values)if(rt(yt)){var Et=D.paint.get(yt);if(!(!(Et instanceof Si)||!As(Et.property.specification))){var Zt=Fa(yt,D.type),ce=Et.value,we=Et.property.specification.type,Le=Et.property.useIntegerZoom,Ve=Et.property.specification["property-type"],ar=Ve==="cross-faded"||Ve==="cross-faded-data-driven";if(ce.kind==="constant")this.binders[yt]=ar?new Xn(ce.value,Zt):new Qn(ce.value,Zt,we),ct.push("/u_"+yt);else if(ce.kind==="source"||ar){var er=Za(yt,we,"source");this.binders[yt]=ar?new ha(ce,we,Le,U,er,D.id):new qn(ce,Zt,we,er),ct.push("/a_"+yt)}else{var br=Za(yt,we,"composite");this.binders[yt]=new oa(ce,Zt,we,Le,U,br),ct.push("/z_"+yt)}}}this.cacheKey=ct.sort().join("")};xa.prototype.getMaxValue=function(D){var U=this.binders[D];return U instanceof qn||U instanceof oa?U.maxValue:0},xa.prototype.populatePaintArrays=function(D,U,rt,ct,yt){for(var Et in this.binders){var Zt=this.binders[Et];(Zt instanceof qn||Zt instanceof oa||Zt instanceof ha)&&Zt.populatePaintArray(D,U,rt,ct,yt)}},xa.prototype.setConstantPatternPositions=function(D,U){for(var rt in this.binders){var ct=this.binders[rt];ct instanceof Xn&&ct.setConstantPatternPositions(D,U)}},xa.prototype.updatePaintArrays=function(D,U,rt,ct,yt){var Et=!1;for(var Zt in D)for(var ce=U.getPositions(Zt),we=0,Le=ce;we<Le.length;we+=1){var Ve=Le[we],ar=rt.feature(Ve.index);for(var er in this.binders){var br=this.binders[er];if((br instanceof qn||br instanceof oa||br instanceof ha)&&br.expression.isStateDependent===!0){var Ur=ct.paint.get(er);br.expression=Ur.value,br.updatePaintArray(Ve.start,Ve.end,ar,D[Zt],yt),Et=!0}}}return Et},xa.prototype.defines=function(){var D=[];for(var U in this.binders){var rt=this.binders[U];(rt instanceof Qn||rt instanceof Xn)&&D.push.apply(D,rt.uniformNames.map(function(ct){return"#define HAS_UNIFORM_"+ct}))}return D},xa.prototype.getBinderAttributes=function(){var D=[];for(var U in this.binders){var rt=this.binders[U];if(rt instanceof qn||rt instanceof oa)for(var ct=0;ct<rt.paintVertexAttributes.length;ct++)D.push(rt.paintVertexAttributes[ct].name);else if(rt instanceof ha)for(var yt=0;yt<Y.members.length;yt++)D.push(Y.members[yt].name)}return D},xa.prototype.getBinderUniforms=function(){var D=[];for(var U in this.binders){var rt=this.binders[U];if(rt instanceof Qn||rt instanceof Xn||rt instanceof oa)for(var ct=0,yt=rt.uniformNames;ct<yt.length;ct+=1){var Et=yt[ct];D.push(Et)}}return D},xa.prototype.getPaintVertexBuffers=function(){return this._buffers},xa.prototype.getUniforms=function(D,U){var rt=[];for(var ct in this.binders){var yt=this.binders[ct];if(yt instanceof Qn||yt instanceof Xn||yt instanceof oa)for(var Et=0,Zt=yt.uniformNames;Et<Zt.length;Et+=1){var ce=Zt[Et];if(U[ce]){var we=yt.getBinding(D,U[ce],ce);rt.push({name:ce,property:ct,binding:we})}}}return rt},xa.prototype.setUniforms=function(D,U,rt,ct){for(var yt=0,Et=U;yt<Et.length;yt+=1){var Zt=Et[yt],ce=Zt.name,we=Zt.property,Le=Zt.binding;this.binders[we].setUniform(Le,ct,rt.get(we),ce)}},xa.prototype.updatePaintBuffers=function(D){this._buffers=[];for(var U in this.binders){var rt=this.binders[U];if(D&&rt instanceof ha){var ct=D.fromScale===2?rt.zoomInPaintVertexBuffer:rt.zoomOutPaintVertexBuffer;ct&&this._buffers.push(ct)}else(rt instanceof qn||rt instanceof oa)&&rt.paintVertexBuffer&&this._buffers.push(rt.paintVertexBuffer)}},xa.prototype.upload=function(D){for(var U in this.binders){var rt=this.binders[U];(rt instanceof qn||rt instanceof oa||rt instanceof ha)&&rt.upload(D)}this.updatePaintBuffers()},xa.prototype.destroy=function(){for(var D in this.binders){var U=this.binders[D];(U instanceof qn||U instanceof oa||U instanceof ha)&&U.destroy()}};var ga=function(D,U,rt){rt===void 0&&(rt=function(){return!0}),this.programConfigurations={};for(var ct=0,yt=D;ct<yt.length;ct+=1){var Et=yt[ct];this.programConfigurations[Et.id]=new xa(Et,U,rt)}this.needsUpload=!1,this._featureMap=new se,this._bufferOffset=0};ga.prototype.populatePaintArrays=function(D,U,rt,ct,yt,Et){for(var Zt in this.programConfigurations)this.programConfigurations[Zt].populatePaintArrays(D,U,ct,yt,Et);U.id!==void 0&&this._featureMap.add(U.id,rt,this._bufferOffset,D),this._bufferOffset=D,this.needsUpload=!0},ga.prototype.updatePaintArrays=function(D,U,rt,ct){for(var yt=0,Et=rt;yt<Et.length;yt+=1){var Zt=Et[yt];this.needsUpload=this.programConfigurations[Zt.id].updatePaintArrays(D,this._featureMap,U,Zt,ct)||this.needsUpload}},ga.prototype.get=function(D){return this.programConfigurations[D]},ga.prototype.upload=function(D){if(this.needsUpload){for(var U in this.programConfigurations)this.programConfigurations[U].upload(D);this.needsUpload=!1}},ga.prototype.destroy=function(){for(var D in this.programConfigurations)this.programConfigurations[D].destroy()};function Fa(R,D){var U={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return U[R]||[R.replace(D+"-","").replace(/-/g,"_")]}function ti(R){var D={"line-pattern":{source:jo,composite:jo},"fill-pattern":{source:jo,composite:jo},"fill-extrusion-pattern":{source:jo,composite:jo}};return D[R]}function Za(R,D,U){var rt={color:{source:Lf,composite:Ju},number:{source:Pf,composite:Lf}},ct=ti(R);return ct&&ct[U]||rt[D][U]}_t("ConstantBinder",Qn),_t("CrossFadedConstantBinder",Xn),_t("SourceExpressionBinder",qn),_t("CrossFadedCompositeBinder",ha),_t("CompositeExpressionBinder",oa),_t("ProgramConfiguration",xa,{omit:["_buffers"]}),_t("ProgramConfigurationSet",ga);var Sa=8192,ja=15,Ga=Math.pow(2,ja-1)-1,li=-Ga-1;function ai(R){for(var D=Sa/R.extent,U=R.loadGeometry(),rt=0;rt<U.length;rt++)for(var ct=U[rt],yt=0;yt<ct.length;yt++){var Et=ct[yt],Zt=Math.round(Et.x*D),ce=Math.round(Et.y*D);Et.x=h(Zt,li,Ga),Et.y=h(ce,li,Ga),(Zt<Et.x||Zt>Et.x+1||ce<Et.y||ce>Et.y+1)&&F("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return U}function Ei(R,D){return{type:R.type,id:R.id,properties:R.properties,geometry:D?ai(R):[]}}function $a(R,D,U,rt,ct){R.emplaceBack(D*2+(rt+1)/2,U*2+(ct+1)/2)}var wi=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(U){return U.id}),this.index=D.index,this.hasPattern=!1,this.layoutVertexArray=new Ku,this.indexArray=new ru,this.segments=new so,this.programConfigurations=new ga(D.layers,D.zoom),this.stateDependentLayerIds=this.layers.filter(function(U){return U.isStateDependent()}).map(function(U){return U.id})};wi.prototype.populate=function(D,U,rt){var ct=this.layers[0],yt=[],Et=null;ct.type==="circle"&&(Et=ct.layout.get("circle-sort-key"));for(var Zt=0,ce=D;Zt<ce.length;Zt+=1){var we=ce[Zt],Le=we.feature,Ve=we.id,ar=we.index,er=we.sourceLayerIndex,br=this.layers[0]._featureFilter.needGeometry,Ur=Ei(Le,br);if(this.layers[0]._featureFilter.filter(new Ma(this.zoom),Ur,rt)){var fn=Et?Et.evaluate(Ur,{},rt):void 0,tn={id:Ve,properties:Le.properties,type:Le.type,sourceLayerIndex:er,index:ar,geometry:br?Ur.geometry:ai(Le),patterns:{},sortKey:fn};yt.push(tn)}}Et&&yt.sort(function(ya,ba){return ya.sortKey-ba.sortKey});for(var Sn=0,xn=yt;Sn<xn.length;Sn+=1){var Mn=xn[Sn],_n=Mn,jn=_n.geometry,sa=_n.index,na=_n.sourceLayerIndex,Ta=D[sa].feature;this.addFeature(Mn,jn,sa,rt),U.featureIndex.insert(Ta,jn,sa,na,this.index)}},wi.prototype.update=function(D,U,rt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,U,this.stateDependentLayers,rt)},wi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wi.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Oh),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},wi.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wi.prototype.addFeature=function(D,U,rt,ct){for(var yt=0,Et=U;yt<Et.length;yt+=1)for(var Zt=Et[yt],ce=0,we=Zt;ce<we.length;ce+=1){var Le=we[ce],Ve=Le.x,ar=Le.y;if(!(Ve<0||Ve>=Sa||ar<0||ar>=Sa)){var er=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,D.sortKey),br=er.vertexLength;$a(this.layoutVertexArray,Ve,ar,-1,-1),$a(this.layoutVertexArray,Ve,ar,1,-1),$a(this.layoutVertexArray,Ve,ar,1,1),$a(this.layoutVertexArray,Ve,ar,-1,1),this.indexArray.emplaceBack(br,br+1,br+2),this.indexArray.emplaceBack(br,br+3,br+2),er.vertexLength+=4,er.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,rt,{},ct)},_t("CircleBucket",wi,{omit:["layers"]});function Wa(R,D){for(var U=0;U<R.length;U++)if(Ko(D,R[U]))return!0;for(var rt=0;rt<D.length;rt++)if(Ko(R,D[rt]))return!0;return!!Ns(R,D)}function ei(R,D,U){return!!(Ko(R,D)||El(D,R,U))}function Wi(R,D){if(R.length===1)return Cl(D,R[0]);for(var U=0;U<D.length;U++)for(var rt=D[U],ct=0;ct<rt.length;ct++)if(Ko(R,rt[ct]))return!0;for(var yt=0;yt<R.length;yt++)if(Cl(D,R[yt]))return!0;for(var Et=0;Et<D.length;Et++)if(Ns(R,D[Et]))return!0;return!1}function go(R,D,U){for(var rt=0;rt<D.length;rt++){var ct=D[rt];if(R.length>=3){for(var yt=0;yt<ct.length;yt++)if(Ko(R,ct[yt]))return!0}if(Bs(R,ct,U))return!0}return!1}function Bs(R,D,U){if(R.length>1){if(Ns(R,D))return!0;for(var rt=0;rt<D.length;rt++)if(El(D[rt],R,U))return!0}for(var ct=0;ct<R.length;ct++)if(El(R[ct],D,U))return!0;return!1}function Ns(R,D){if(R.length===0||D.length===0)return!1;for(var U=0;U<R.length-1;U++)for(var rt=R[U],ct=R[U+1],yt=0;yt<D.length-1;yt++){var Et=D[yt],Zt=D[yt+1];if(tl(rt,ct,Et,Zt))return!0}return!1}function tl(R,D,U,rt){return _(R,U,rt)!==_(D,U,rt)&&_(R,D,U)!==_(R,D,rt)}function El(R,D,U){var rt=U*U;if(D.length===1)return R.distSqr(D[0])<rt;for(var ct=1;ct<D.length;ct++){var yt=D[ct-1],Et=D[ct];if($u(R,yt,Et)<rt)return!0}return!1}function $u(R,D,U){var rt=D.distSqr(U);if(rt===0)return R.distSqr(D);var ct=((R.x-D.x)*(U.x-D.x)+(R.y-D.y)*(U.y-D.y))/rt;return ct<0?R.distSqr(D):ct>1?R.distSqr(U):R.distSqr(U.sub(D)._mult(ct)._add(D))}function Cl(R,D){for(var U=!1,rt,ct,yt,Et=0;Et<R.length;Et++){rt=R[Et];for(var Zt=0,ce=rt.length-1;Zt<rt.length;ce=Zt++)ct=rt[Zt],yt=rt[ce],ct.y>D.y!=yt.y>D.y&&D.x<(yt.x-ct.x)*(D.y-ct.y)/(yt.y-ct.y)+ct.x&&(U=!U)}return U}function Ko(R,D){for(var U=!1,rt=0,ct=R.length-1;rt<R.length;ct=rt++){var yt=R[rt],Et=R[ct];yt.y>D.y!=Et.y>D.y&&D.x<(Et.x-yt.x)*(D.y-yt.y)/(Et.y-yt.y)+yt.x&&(U=!U)}return U}function Ll(R,D,U,rt,ct){for(var yt=0,Et=R;yt<Et.length;yt+=1){var Zt=Et[yt];if(D<=Zt.x&&U<=Zt.y&&rt>=Zt.x&&ct>=Zt.y)return!0}var ce=[new r(D,U),new r(D,ct),new r(rt,ct),new r(rt,U)];if(R.length>2)for(var we=0,Le=ce;we<Le.length;we+=1){var Ve=Le[we];if(Ko(R,Ve))return!0}for(var ar=0;ar<R.length-1;ar++){var er=R[ar],br=R[ar+1];if(fs(er,br,ce))return!0}return!1}function fs(R,D,U){var rt=U[0],ct=U[2];if(R.x<rt.x&&D.x<rt.x||R.x>ct.x&&D.x>ct.x||R.y<rt.y&&D.y<rt.y||R.y>ct.y&&D.y>ct.y)return!1;var yt=_(R,D,U[0]);return yt!==_(R,D,U[1])||yt!==_(R,D,U[2])||yt!==_(R,D,U[3])}function Jo(R,D,U){var rt=D.paint.get(R).value;return rt.kind==="constant"?rt.value:U.programConfigurations.get(D.id).getMaxValue(R)}function el(R){return Math.sqrt(R[0]*R[0]+R[1]*R[1])}function nu(R,D,U,rt,ct){if(!D[0]&&!D[1])return R;var yt=r.convert(D)._mult(ct);U==="viewport"&&yt._rotate(-rt);for(var Et=[],Zt=0;Zt<R.length;Zt++){var ce=R[Zt];Et.push(ce.sub(yt))}return Et}var rl=new vi({"circle-sort-key":new La(Mr.layout_circle["circle-sort-key"])}),Ac=new vi({"circle-radius":new La(Mr.paint_circle["circle-radius"]),"circle-color":new La(Mr.paint_circle["circle-color"]),"circle-blur":new La(Mr.paint_circle["circle-blur"]),"circle-opacity":new La(Mr.paint_circle["circle-opacity"]),"circle-translate":new ca(Mr.paint_circle["circle-translate"]),"circle-translate-anchor":new ca(Mr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ca(Mr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ca(Mr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new La(Mr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new La(Mr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new La(Mr.paint_circle["circle-stroke-opacity"])}),If={paint:Ac,layout:rl},bo=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var R=arguments,D=0,U=arguments.length;U--;)D+=R[U]*R[U];return Math.sqrt(D)});function Mc(){var R=new bo(4);return bo!=Float32Array&&(R[1]=0,R[2]=0),R[0]=1,R[3]=1,R}function dc(R,D,U){var rt=D[0],ct=D[1],yt=D[2],Et=D[3],Zt=Math.sin(U),ce=Math.cos(U);return R[0]=rt*ce+yt*Zt,R[1]=ct*ce+Et*Zt,R[2]=rt*-Zt+yt*ce,R[3]=ct*-Zt+Et*ce,R}function Oo(){var R=new bo(9);return bo!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[5]=0,R[6]=0,R[7]=0),R[0]=1,R[4]=1,R[8]=1,R}function kf(R,D){var U=Math.sin(D),rt=Math.cos(D);return R[0]=rt,R[1]=U,R[2]=0,R[3]=-U,R[4]=rt,R[5]=0,R[6]=0,R[7]=0,R[8]=1,R}function Sc(){var R=new bo(16);return bo!=Float32Array&&(R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=0,R[12]=0,R[13]=0,R[14]=0),R[0]=1,R[5]=1,R[10]=1,R[15]=1,R}function Ec(R){var D=new bo(16);return D[0]=R[0],D[1]=R[1],D[2]=R[2],D[3]=R[3],D[4]=R[4],D[5]=R[5],D[6]=R[6],D[7]=R[7],D[8]=R[8],D[9]=R[9],D[10]=R[10],D[11]=R[11],D[12]=R[12],D[13]=R[13],D[14]=R[14],D[15]=R[15],D}function Cc(R){return R[0]=1,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=1,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=1,R[11]=0,R[12]=0,R[13]=0,R[14]=0,R[15]=1,R}function zf(R,D){var U=D[0],rt=D[1],ct=D[2],yt=D[3],Et=D[4],Zt=D[5],ce=D[6],we=D[7],Le=D[8],Ve=D[9],ar=D[10],er=D[11],br=D[12],Ur=D[13],fn=D[14],tn=D[15],Sn=U*Zt-rt*Et,xn=U*ce-ct*Et,Mn=U*we-yt*Et,_n=rt*ce-ct*Zt,jn=rt*we-yt*Zt,sa=ct*we-yt*ce,na=Le*Ur-Ve*br,Ta=Le*fn-ar*br,ya=Le*tn-er*br,ba=Ve*fn-ar*Ur,Ua=Ve*tn-er*Ur,Aa=ar*tn-er*fn,Ca=Sn*Aa-xn*Ua+Mn*ba+_n*ya-jn*Ta+sa*na;return Ca?(Ca=1/Ca,R[0]=(Zt*Aa-ce*Ua+we*ba)*Ca,R[1]=(ct*Ua-rt*Aa-yt*ba)*Ca,R[2]=(Ur*sa-fn*jn+tn*_n)*Ca,R[3]=(ar*jn-Ve*sa-er*_n)*Ca,R[4]=(ce*ya-Et*Aa-we*Ta)*Ca,R[5]=(U*Aa-ct*ya+yt*Ta)*Ca,R[6]=(fn*Mn-br*sa-tn*xn)*Ca,R[7]=(Le*sa-ar*Mn+er*xn)*Ca,R[8]=(Et*Ua-Zt*ya+we*na)*Ca,R[9]=(rt*ya-U*Ua-yt*na)*Ca,R[10]=(br*jn-Ur*Mn+tn*Sn)*Ca,R[11]=(Ve*Mn-Le*jn-er*Sn)*Ca,R[12]=(Zt*Ta-Et*ba-ce*na)*Ca,R[13]=(U*ba-rt*Ta+ct*na)*Ca,R[14]=(Ur*xn-br*_n-fn*Sn)*Ca,R[15]=(Le*_n-Ve*xn+ar*Sn)*Ca,R):null}function _f(R,D,U){var rt=D[0],ct=D[1],yt=D[2],Et=D[3],Zt=D[4],ce=D[5],we=D[6],Le=D[7],Ve=D[8],ar=D[9],er=D[10],br=D[11],Ur=D[12],fn=D[13],tn=D[14],Sn=D[15],xn=U[0],Mn=U[1],_n=U[2],jn=U[3];return R[0]=xn*rt+Mn*Zt+_n*Ve+jn*Ur,R[1]=xn*ct+Mn*ce+_n*ar+jn*fn,R[2]=xn*yt+Mn*we+_n*er+jn*tn,R[3]=xn*Et+Mn*Le+_n*br+jn*Sn,xn=U[4],Mn=U[5],_n=U[6],jn=U[7],R[4]=xn*rt+Mn*Zt+_n*Ve+jn*Ur,R[5]=xn*ct+Mn*ce+_n*ar+jn*fn,R[6]=xn*yt+Mn*we+_n*er+jn*tn,R[7]=xn*Et+Mn*Le+_n*br+jn*Sn,xn=U[8],Mn=U[9],_n=U[10],jn=U[11],R[8]=xn*rt+Mn*Zt+_n*Ve+jn*Ur,R[9]=xn*ct+Mn*ce+_n*ar+jn*fn,R[10]=xn*yt+Mn*we+_n*er+jn*tn,R[11]=xn*Et+Mn*Le+_n*br+jn*Sn,xn=U[12],Mn=U[13],_n=U[14],jn=U[15],R[12]=xn*rt+Mn*Zt+_n*Ve+jn*Ur,R[13]=xn*ct+Mn*ce+_n*ar+jn*fn,R[14]=xn*yt+Mn*we+_n*er+jn*tn,R[15]=xn*Et+Mn*Le+_n*br+jn*Sn,R}function Ki(R,D,U){var rt=U[0],ct=U[1],yt=U[2],Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn;return D===R?(R[12]=D[0]*rt+D[4]*ct+D[8]*yt+D[12],R[13]=D[1]*rt+D[5]*ct+D[9]*yt+D[13],R[14]=D[2]*rt+D[6]*ct+D[10]*yt+D[14],R[15]=D[3]*rt+D[7]*ct+D[11]*yt+D[15]):(Et=D[0],Zt=D[1],ce=D[2],we=D[3],Le=D[4],Ve=D[5],ar=D[6],er=D[7],br=D[8],Ur=D[9],fn=D[10],tn=D[11],R[0]=Et,R[1]=Zt,R[2]=ce,R[3]=we,R[4]=Le,R[5]=Ve,R[6]=ar,R[7]=er,R[8]=br,R[9]=Ur,R[10]=fn,R[11]=tn,R[12]=Et*rt+Le*ct+br*yt+D[12],R[13]=Zt*rt+Ve*ct+Ur*yt+D[13],R[14]=ce*rt+ar*ct+fn*yt+D[14],R[15]=we*rt+er*ct+tn*yt+D[15]),R}function cs(R,D,U){var rt=U[0],ct=U[1],yt=U[2];return R[0]=D[0]*rt,R[1]=D[1]*rt,R[2]=D[2]*rt,R[3]=D[3]*rt,R[4]=D[4]*ct,R[5]=D[5]*ct,R[6]=D[6]*ct,R[7]=D[7]*ct,R[8]=D[8]*yt,R[9]=D[9]*yt,R[10]=D[10]*yt,R[11]=D[11]*yt,R[12]=D[12],R[13]=D[13],R[14]=D[14],R[15]=D[15],R}function hs(R,D,U){var rt=Math.sin(U),ct=Math.cos(U),yt=D[4],Et=D[5],Zt=D[6],ce=D[7],we=D[8],Le=D[9],Ve=D[10],ar=D[11];return D!==R&&(R[0]=D[0],R[1]=D[1],R[2]=D[2],R[3]=D[3],R[12]=D[12],R[13]=D[13],R[14]=D[14],R[15]=D[15]),R[4]=yt*ct+we*rt,R[5]=Et*ct+Le*rt,R[6]=Zt*ct+Ve*rt,R[7]=ce*ct+ar*rt,R[8]=we*ct-yt*rt,R[9]=Le*ct-Et*rt,R[10]=Ve*ct-Zt*rt,R[11]=ar*ct-ce*rt,R}function Lc(R,D,U){var rt=Math.sin(U),ct=Math.cos(U),yt=D[0],Et=D[1],Zt=D[2],ce=D[3],we=D[4],Le=D[5],Ve=D[6],ar=D[7];return D!==R&&(R[8]=D[8],R[9]=D[9],R[10]=D[10],R[11]=D[11],R[12]=D[12],R[13]=D[13],R[14]=D[14],R[15]=D[15]),R[0]=yt*ct+we*rt,R[1]=Et*ct+Le*rt,R[2]=Zt*ct+Ve*rt,R[3]=ce*ct+ar*rt,R[4]=we*ct-yt*rt,R[5]=Le*ct-Et*rt,R[6]=Ve*ct-Zt*rt,R[7]=ar*ct-ce*rt,R}function sh(R,D,U,rt,ct){var yt=1/Math.tan(D/2),Et;return R[0]=yt/U,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=yt,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[11]=-1,R[12]=0,R[13]=0,R[15]=0,ct!=null&&ct!==1/0?(Et=1/(rt-ct),R[10]=(ct+rt)*Et,R[14]=2*ct*rt*Et):(R[10]=-1,R[14]=-2*rt),R}function zv(R,D,U,rt,ct,yt,Et){var Zt=1/(D-U),ce=1/(rt-ct),we=1/(yt-Et);return R[0]=-2*Zt,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=-2*ce,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=2*we,R[11]=0,R[12]=(D+U)*Zt,R[13]=(ct+rt)*ce,R[14]=(Et+yt)*we,R[15]=1,R}var _v=_f;function pc(){var R=new bo(3);return bo!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function Fv(R){var D=new bo(3);return D[0]=R[0],D[1]=R[1],D[2]=R[2],D}function Pc(R,D,U){return R[0]=D[0]+U[0],R[1]=D[1]+U[1],R[2]=D[2]+U[2],R}function Ov(R,D,U){return R[0]=D[0]-U[0],R[1]=D[1]-U[1],R[2]=D[2]-U[2],R}function Bv(R,D,U){return R[0]=D[0]*U,R[1]=D[1]*U,R[2]=D[2]*U,R}function lh(R,D){var U=D[0],rt=D[1],ct=D[2],yt=U*U+rt*rt+ct*ct;return yt>0&&(yt=1/Math.sqrt(yt)),R[0]=D[0]*yt,R[1]=D[1]*yt,R[2]=D[2]*yt,R}function Sp(R,D){return R[0]*D[0]+R[1]*D[1]+R[2]*D[2]}function Ep(R,D,U){var rt=D[0],ct=D[1],yt=D[2],Et=U[0],Zt=U[1],ce=U[2];return R[0]=ct*ce-yt*Zt,R[1]=yt*Et-rt*ce,R[2]=rt*Zt-ct*Et,R}function Cp(R,D,U){var rt=D[0],ct=D[1],yt=D[2];return R[0]=rt*U[0]+ct*U[3]+yt*U[6],R[1]=rt*U[1]+ct*U[4]+yt*U[7],R[2]=rt*U[2]+ct*U[5]+yt*U[8],R}var Lp=Ov;(function(){var R=pc();return function(D,U,rt,ct,yt,Et){var Zt,ce;for(U||(U=3),rt||(rt=0),ct?ce=Math.min(ct*U+rt,D.length):ce=D.length,Zt=rt;Zt<ce;Zt+=U)R[0]=D[Zt],R[1]=D[Zt+1],R[2]=D[Zt+2],yt(R,R,Et),D[Zt]=R[0],D[Zt+1]=R[1],D[Zt+2]=R[2];return D}})();function Pp(){var R=new bo(4);return bo!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0,R[3]=0),R}function Rp(R,D,U){return R[0]=D[0]*U,R[1]=D[1]*U,R[2]=D[2]*U,R[3]=D[3]*U,R}function Dp(R,D){return R[0]*D[0]+R[1]*D[1]+R[2]*D[2]+R[3]*D[3]}function Bh(R,D,U){var rt=D[0],ct=D[1],yt=D[2],Et=D[3];return R[0]=U[0]*rt+U[4]*ct+U[8]*yt+U[12]*Et,R[1]=U[1]*rt+U[5]*ct+U[9]*yt+U[13]*Et,R[2]=U[2]*rt+U[6]*ct+U[10]*yt+U[14]*Et,R[3]=U[3]*rt+U[7]*ct+U[11]*yt+U[15]*Et,R}(function(){var R=Pp();return function(D,U,rt,ct,yt,Et){var Zt,ce;for(U||(U=4),rt||(rt=0),ct?ce=Math.min(ct*U+rt,D.length):ce=D.length,Zt=rt;Zt<ce;Zt+=U)R[0]=D[Zt],R[1]=D[Zt+1],R[2]=D[Zt+2],R[3]=D[Zt+3],yt(R,R,Et),D[Zt]=R[0],D[Zt+1]=R[1],D[Zt+2]=R[2],D[Zt+3]=R[3];return D}})();function Ip(){var R=new bo(2);return bo!=Float32Array&&(R[0]=0,R[1]=0),R}function kp(R){var D=R[0],U=R[1];return D*D+U*U}var zp=kp;(function(){var R=Ip();return function(D,U,rt,ct,yt,Et){var Zt,ce;for(U||(U=2),rt||(rt=0),ct?ce=Math.min(ct*U+rt,D.length):ce=D.length,Zt=rt;Zt<ce;Zt+=U)R[0]=D[Zt],R[1]=D[Zt+1],yt(R,R,Et),D[Zt]=R[0],D[Zt+1]=R[1];return D}})();var _p=function(R){function D(U){R.call(this,U,If)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(rt){return new wi(rt)},D.prototype.queryRadius=function(rt){var ct=rt;return Jo("circle-radius",this,ct)+Jo("circle-stroke-width",this,ct)+el(this.paint.get("circle-translate"))},D.prototype.queryIntersectsFeature=function(rt,ct,yt,Et,Zt,ce,we,Le){for(var Ve=nu(rt,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),ce.angle,we),ar=this.paint.get("circle-radius").evaluate(ct,yt),er=this.paint.get("circle-stroke-width").evaluate(ct,yt),br=ar+er,Ur=this.paint.get("circle-pitch-alignment")==="map",fn=Ur?Ve:Fp(Ve,Le),tn=Ur?br*we:br,Sn=0,xn=Et;Sn<xn.length;Sn+=1)for(var Mn=xn[Sn],_n=0,jn=Mn;_n<jn.length;_n+=1){var sa=jn[_n],na=Ur?sa:Ed(sa,Le),Ta=tn,ya=Bh([],[sa.x,sa.y,0,1],Le);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ta*=ya[3]/ce.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ta*=ce.cameraToCenterDistance/ya[3]),ei(fn,na,Ta))return!0}return!1},D}(Gi);function Ed(R,D){var U=Bh([],[R.x,R.y,0,1],D);return new r(U[0]/U[3],U[1]/U[3])}function Fp(R,D){return R.map(function(U){return Ed(U,D)})}var Cd=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D}(wi);_t("HeatmapBucket",Cd,{omit:["layers"]});function Nv(R,D,U,rt){var ct=D.width,yt=D.height;if(!rt)rt=new Uint8Array(ct*yt*U);else if(rt instanceof Uint8ClampedArray)rt=new Uint8Array(rt.buffer);else if(rt.length!==ct*yt*U)throw new RangeError("mismatched image size");return R.width=ct,R.height=yt,R.data=rt,R}function Ld(R,D,U){var rt=D.width,ct=D.height;if(!(rt===R.width&&ct===R.height)){var yt=Nv({},{width:rt,height:ct},U);Uv(R,yt,{x:0,y:0},{x:0,y:0},{width:Math.min(R.width,rt),height:Math.min(R.height,ct)},U),R.width=rt,R.height=ct,R.data=yt.data}}function Uv(R,D,U,rt,ct,yt){if(ct.width===0||ct.height===0)return D;if(ct.width>R.width||ct.height>R.height||U.x>R.width-ct.width||U.y>R.height-ct.height)throw new RangeError("out of range source coordinates for image copy");if(ct.width>D.width||ct.height>D.height||rt.x>D.width-ct.width||rt.y>D.height-ct.height)throw new RangeError("out of range destination coordinates for image copy");for(var Et=R.data,Zt=D.data,ce=0;ce<ct.height;ce++)for(var we=((U.y+ce)*R.width+U.x)*yt,Le=((rt.y+ce)*D.width+rt.x)*yt,Ve=0;Ve<ct.width*yt;Ve++)Zt[Le+Ve]=Et[we+Ve];return D}var gc=function(D,U){Nv(this,D,1,U)};gc.prototype.resize=function(D){Ld(this,D,1)},gc.prototype.clone=function(){return new gc({width:this.width,height:this.height},new Uint8Array(this.data))},gc.copy=function(D,U,rt,ct,yt){Uv(D,U,rt,ct,yt,1)};var vs=function(D,U){Nv(this,D,4,U)};vs.prototype.resize=function(D){Ld(this,D,4)},vs.prototype.replace=function(D,U){U?this.data.set(D):D instanceof Uint8ClampedArray?this.data=new Uint8Array(D.buffer):this.data=D},vs.prototype.clone=function(){return new vs({width:this.width,height:this.height},new Uint8Array(this.data))},vs.copy=function(D,U,rt,ct,yt){Uv(D,U,rt,ct,yt,4)},_t("AlphaImage",gc),_t("RGBAImage",vs);var Op=new vi({"heatmap-radius":new La(Mr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new La(Mr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ca(Mr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oo(Mr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ca(Mr.paint_heatmap["heatmap-opacity"])}),Bp={paint:Op};function Pd(R){var D={},U=R.resolution||256,rt=R.clips?R.clips.length:1,ct=R.image||new vs({width:U,height:rt}),yt=function(Sn,xn,Mn){D[R.evaluationKey]=Mn;var _n=R.expression.evaluate(D);ct.data[Sn+xn+0]=Math.floor(_n.r*255/_n.a),ct.data[Sn+xn+1]=Math.floor(_n.g*255/_n.a),ct.data[Sn+xn+2]=Math.floor(_n.b*255/_n.a),ct.data[Sn+xn+3]=Math.floor(_n.a*255)};if(R.clips)for(var we=0,Le=0;we<rt;++we,Le+=U*4)for(var Ve=0,ar=0;Ve<U;Ve++,ar+=4){var er=Ve/(U-1),br=R.clips[we],Ur=br.start,fn=br.end,tn=Ur*(1-er)+fn*er;yt(Le,ar,tn)}else for(var Et=0,Zt=0;Et<U;Et++,Zt+=4){var ce=Et/(U-1);yt(0,Zt,ce)}return ct}var Np=function(R){function D(U){R.call(this,U,Bp),this._updateColorRamp()}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(rt){return new Cd(rt)},D.prototype._handleSpecialPaintPropertyUpdate=function(rt){rt==="heatmap-color"&&this._updateColorRamp()},D.prototype._updateColorRamp=function(){var rt=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Pd({expression:rt,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},D.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},D}(Gi),Up=new vi({"hillshade-illumination-direction":new ca(Mr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ca(Mr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ca(Mr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ca(Mr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ca(Mr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ca(Mr.paint_hillshade["hillshade-accent-color"])}),Vp={paint:Up},Hp=function(R){function D(U){R.call(this,U,Vp)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},D}(Gi),Gp=ki([{name:"a_pos",components:2,type:"Int16"}],4),Wp=Gp.members,Vv=Nh,Yp=Nh;function Nh(R,D,U){U=U||2;var rt=D&&D.length,ct=rt?D[0]*U:R.length,yt=Rd(R,0,ct,U,!0),Et=[];if(!yt||yt.next===yt.prev)return Et;var Zt,ce,we,Le,Ve,ar,er;if(rt&&(yt=Jp(R,D,yt,U)),R.length>80*U){Zt=we=R[0],ce=Le=R[1];for(var br=U;br<ct;br+=U)Ve=R[br],ar=R[br+1],Ve<Zt&&(Zt=Ve),ar<ce&&(ce=ar),Ve>we&&(we=Ve),ar>Le&&(Le=ar);er=Math.max(we-Zt,Le-ce),er=er!==0?1/er:0}return uh(yt,Et,U,Zt,ce,er),Et}function Rd(R,D,U,rt,ct){var yt,Et;if(ct===Wv(R,D,U,rt)>0)for(yt=D;yt<U;yt+=rt)Et=kd(yt,R[yt],R[yt+1],Et);else for(yt=U-rt;yt>=D;yt-=rt)Et=kd(yt,R[yt],R[yt+1],Et);return Et&&Uh(Et,Et.next)&&(ch(Et),Et=Et.next),Et}function Ff(R,D){if(!R)return R;D||(D=R);var U=R,rt;do if(rt=!1,!U.steiner&&(Uh(U,U.next)||lo(U.prev,U,U.next)===0)){if(ch(U),U=D=U.prev,U===U.next)break;rt=!0}else U=U.next;while(rt||U!==D);return D}function uh(R,D,U,rt,ct,yt,Et){if(R){!Et&&yt&&eg(R,rt,ct,yt);for(var Zt=R,ce,we;R.prev!==R.next;){if(ce=R.prev,we=R.next,yt?Zp(R,rt,ct,yt):Xp(R)){D.push(ce.i/U),D.push(R.i/U),D.push(we.i/U),ch(R),R=we.next,Zt=we.next;continue}if(R=we,R===Zt){Et?Et===1?(R=jp(Ff(R),D,U),uh(R,D,U,rt,ct,yt,2)):Et===2&&Kp(R,D,U,rt,ct,yt):uh(Ff(R),D,U,rt,ct,yt,1);break}}}}function Xp(R){var D=R.prev,U=R,rt=R.next;if(lo(D,U,rt)>=0)return!1;for(var ct=R.next.next;ct!==R.prev;){if(Rc(D.x,D.y,U.x,U.y,rt.x,rt.y,ct.x,ct.y)&&lo(ct.prev,ct,ct.next)>=0)return!1;ct=ct.next}return!0}function Zp(R,D,U,rt){var ct=R.prev,yt=R,Et=R.next;if(lo(ct,yt,Et)>=0)return!1;for(var Zt=ct.x<yt.x?ct.x<Et.x?ct.x:Et.x:yt.x<Et.x?yt.x:Et.x,ce=ct.y<yt.y?ct.y<Et.y?ct.y:Et.y:yt.y<Et.y?yt.y:Et.y,we=ct.x>yt.x?ct.x>Et.x?ct.x:Et.x:yt.x>Et.x?yt.x:Et.x,Le=ct.y>yt.y?ct.y>Et.y?ct.y:Et.y:yt.y>Et.y?yt.y:Et.y,Ve=Hv(Zt,ce,D,U,rt),ar=Hv(we,Le,D,U,rt),er=R.prevZ,br=R.nextZ;er&&er.z>=Ve&&br&&br.z<=ar;){if(er!==R.prev&&er!==R.next&&Rc(ct.x,ct.y,yt.x,yt.y,Et.x,Et.y,er.x,er.y)&&lo(er.prev,er,er.next)>=0||(er=er.prevZ,br!==R.prev&&br!==R.next&&Rc(ct.x,ct.y,yt.x,yt.y,Et.x,Et.y,br.x,br.y)&&lo(br.prev,br,br.next)>=0))return!1;br=br.nextZ}for(;er&&er.z>=Ve;){if(er!==R.prev&&er!==R.next&&Rc(ct.x,ct.y,yt.x,yt.y,Et.x,Et.y,er.x,er.y)&&lo(er.prev,er,er.next)>=0)return!1;er=er.prevZ}for(;br&&br.z<=ar;){if(br!==R.prev&&br!==R.next&&Rc(ct.x,ct.y,yt.x,yt.y,Et.x,Et.y,br.x,br.y)&&lo(br.prev,br,br.next)>=0)return!1;br=br.nextZ}return!0}function jp(R,D,U){var rt=R;do{var ct=rt.prev,yt=rt.next.next;!Uh(ct,yt)&&Dd(ct,rt,rt.next,yt)&&fh(ct,yt)&&fh(yt,ct)&&(D.push(ct.i/U),D.push(rt.i/U),D.push(yt.i/U),ch(rt),ch(rt.next),rt=R=yt),rt=rt.next}while(rt!==R);return Ff(rt)}function Kp(R,D,U,rt,ct,yt){var Et=R;do{for(var Zt=Et.next.next;Zt!==Et.prev;){if(Et.i!==Zt.i&&ag(Et,Zt)){var ce=Id(Et,Zt);Et=Ff(Et,Et.next),ce=Ff(ce,ce.next),uh(Et,D,U,rt,ct,yt),uh(ce,D,U,rt,ct,yt);return}Zt=Zt.next}Et=Et.next}while(Et!==R)}function Jp(R,D,U,rt){var ct=[],yt,Et,Zt,ce,we;for(yt=0,Et=D.length;yt<Et;yt++)Zt=D[yt]*rt,ce=yt<Et-1?D[yt+1]*rt:R.length,we=Rd(R,Zt,ce,rt,!1),we===we.next&&(we.steiner=!0),ct.push(ng(we));for(ct.sort(Qp),yt=0;yt<ct.length;yt++)$p(ct[yt],U),U=Ff(U,U.next);return U}function Qp(R,D){return R.x-D.x}function $p(R,D){if(D=qp(R,D),D){var U=Id(D,R);Ff(D,D.next),Ff(U,U.next)}}function qp(R,D){var U=D,rt=R.x,ct=R.y,yt=-1/0,Et;do{if(ct<=U.y&&ct>=U.next.y&&U.next.y!==U.y){var Zt=U.x+(ct-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(Zt<=rt&&Zt>yt){if(yt=Zt,Zt===rt){if(ct===U.y)return U;if(ct===U.next.y)return U.next}Et=U.x<U.next.x?U:U.next}}U=U.next}while(U!==D);if(!Et)return null;if(rt===yt)return Et;var ce=Et,we=Et.x,Le=Et.y,Ve=1/0,ar;U=Et;do rt>=U.x&&U.x>=we&&rt!==U.x&&Rc(ct<Le?rt:yt,ct,we,Le,ct<Le?yt:rt,ct,U.x,U.y)&&(ar=Math.abs(ct-U.y)/(rt-U.x),fh(U,R)&&(ar<Ve||ar===Ve&&(U.x>Et.x||U.x===Et.x&&tg(Et,U)))&&(Et=U,Ve=ar)),U=U.next;while(U!==ce);return Et}function tg(R,D){return lo(R.prev,R,D.prev)<0&&lo(D.next,R,R.next)<0}function eg(R,D,U,rt){var ct=R;do ct.z===null&&(ct.z=Hv(ct.x,ct.y,D,U,rt)),ct.prevZ=ct.prev,ct.nextZ=ct.next,ct=ct.next;while(ct!==R);ct.prevZ.nextZ=null,ct.prevZ=null,rg(ct)}function rg(R){var D,U,rt,ct,yt,Et,Zt,ce,we=1;do{for(U=R,R=null,yt=null,Et=0;U;){for(Et++,rt=U,Zt=0,D=0;D<we&&(Zt++,rt=rt.nextZ,!!rt);D++);for(ce=we;Zt>0||ce>0&&rt;)Zt!==0&&(ce===0||!rt||U.z<=rt.z)?(ct=U,U=U.nextZ,Zt--):(ct=rt,rt=rt.nextZ,ce--),yt?yt.nextZ=ct:R=ct,ct.prevZ=yt,yt=ct;U=rt}yt.nextZ=null,we*=2}while(Et>1);return R}function Hv(R,D,U,rt,ct){return R=32767*(R-U)*ct,D=32767*(D-rt)*ct,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,R|D<<1}function ng(R){var D=R,U=R;do(D.x<U.x||D.x===U.x&&D.y<U.y)&&(U=D),D=D.next;while(D!==R);return U}function Rc(R,D,U,rt,ct,yt,Et,Zt){return(ct-Et)*(D-Zt)-(R-Et)*(yt-Zt)>=0&&(R-Et)*(rt-Zt)-(U-Et)*(D-Zt)>=0&&(U-Et)*(yt-Zt)-(ct-Et)*(rt-Zt)>=0}function ag(R,D){return R.next.i!==D.i&&R.prev.i!==D.i&&!ig(R,D)&&(fh(R,D)&&fh(D,R)&&og(R,D)&&(lo(R.prev,R,D.prev)||lo(R,D.prev,D))||Uh(R,D)&&lo(R.prev,R,R.next)>0&&lo(D.prev,D,D.next)>0)}function lo(R,D,U){return(D.y-R.y)*(U.x-D.x)-(D.x-R.x)*(U.y-D.y)}function Uh(R,D){return R.x===D.x&&R.y===D.y}function Dd(R,D,U,rt){var ct=Hh(lo(R,D,U)),yt=Hh(lo(R,D,rt)),Et=Hh(lo(U,rt,R)),Zt=Hh(lo(U,rt,D));return!!(ct!==yt&&Et!==Zt||ct===0&&Vh(R,U,D)||yt===0&&Vh(R,rt,D)||Et===0&&Vh(U,R,rt)||Zt===0&&Vh(U,D,rt))}function Vh(R,D,U){return D.x<=Math.max(R.x,U.x)&&D.x>=Math.min(R.x,U.x)&&D.y<=Math.max(R.y,U.y)&&D.y>=Math.min(R.y,U.y)}function Hh(R){return R>0?1:R<0?-1:0}function ig(R,D){var U=R;do{if(U.i!==R.i&&U.next.i!==R.i&&U.i!==D.i&&U.next.i!==D.i&&Dd(U,U.next,R,D))return!0;U=U.next}while(U!==R);return!1}function fh(R,D){return lo(R.prev,R,R.next)<0?lo(R,D,R.next)>=0&&lo(R,R.prev,D)>=0:lo(R,D,R.prev)<0||lo(R,R.next,D)<0}function og(R,D){var U=R,rt=!1,ct=(R.x+D.x)/2,yt=(R.y+D.y)/2;do U.y>yt!=U.next.y>yt&&U.next.y!==U.y&&ct<(U.next.x-U.x)*(yt-U.y)/(U.next.y-U.y)+U.x&&(rt=!rt),U=U.next;while(U!==R);return rt}function Id(R,D){var U=new Gv(R.i,R.x,R.y),rt=new Gv(D.i,D.x,D.y),ct=R.next,yt=D.prev;return R.next=D,D.prev=R,U.next=ct,ct.prev=U,rt.next=U,U.prev=rt,yt.next=rt,rt.prev=yt,rt}function kd(R,D,U,rt){var ct=new Gv(R,D,U);return rt?(ct.next=rt.next,ct.prev=rt,rt.next.prev=ct,rt.next=ct):(ct.prev=ct,ct.next=ct),ct}function ch(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function Gv(R,D,U){this.i=R,this.x=D,this.y=U,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Nh.deviation=function(R,D,U,rt){var ct=D&&D.length,yt=ct?D[0]*U:R.length,Et=Math.abs(Wv(R,0,yt,U));if(ct)for(var Zt=0,ce=D.length;Zt<ce;Zt++){var we=D[Zt]*U,Le=Zt<ce-1?D[Zt+1]*U:R.length;Et-=Math.abs(Wv(R,we,Le,U))}var Ve=0;for(Zt=0;Zt<rt.length;Zt+=3){var ar=rt[Zt]*U,er=rt[Zt+1]*U,br=rt[Zt+2]*U;Ve+=Math.abs((R[ar]-R[br])*(R[er+1]-R[ar+1])-(R[ar]-R[er])*(R[br+1]-R[ar+1]))}return Et===0&&Ve===0?0:Math.abs((Ve-Et)/Et)};function Wv(R,D,U,rt){for(var ct=0,yt=D,Et=U-rt;yt<U;yt+=rt)ct+=(R[Et]-R[yt])*(R[yt+1]+R[Et+1]),Et=yt;return ct}Nh.flatten=function(R){for(var D=R[0][0].length,U={vertices:[],holes:[],dimensions:D},rt=0,ct=0;ct<R.length;ct++){for(var yt=0;yt<R[ct].length;yt++)for(var Et=0;Et<D;Et++)U.vertices.push(R[ct][yt][Et]);ct>0&&(rt+=R[ct-1].length,U.holes.push(rt))}return U},Vv.default=Yp;function sg(R,D,U,rt,ct){zd(R,D,U,rt||R.length-1,ct||lg)}function zd(R,D,U,rt,ct){for(;rt>U;){if(rt-U>600){var yt=rt-U+1,Et=D-U+1,Zt=Math.log(yt),ce=.5*Math.exp(2*Zt/3),we=.5*Math.sqrt(Zt*ce*(yt-ce)/yt)*(Et-yt/2<0?-1:1),Le=Math.max(U,Math.floor(D-Et*ce/yt+we)),Ve=Math.min(rt,Math.floor(D+(yt-Et)*ce/yt+we));zd(R,D,Le,Ve,ct)}var ar=R[D],er=U,br=rt;for(hh(R,U,D),ct(R[rt],ar)>0&&hh(R,U,rt);er<br;){for(hh(R,er,br),er++,br--;ct(R[er],ar)<0;)er++;for(;ct(R[br],ar)>0;)br--}ct(R[U],ar)===0?hh(R,U,br):(br++,hh(R,br,rt)),br<=D&&(U=br+1),D<=br&&(rt=br-1)}}function hh(R,D,U){var rt=R[D];R[D]=R[U],R[U]=rt}function lg(R,D){return R<D?-1:R>D?1:0}function Yv(R,D){var U=R.length;if(U<=1)return[R];for(var rt=[],ct,yt,Et=0;Et<U;Et++){var Zt=N(R[Et]);Zt!==0&&(R[Et].area=Math.abs(Zt),yt===void 0&&(yt=Zt<0),yt===Zt<0?(ct&&rt.push(ct),ct=[R[Et]]):ct.push(R[Et]))}if(ct&&rt.push(ct),D>1)for(var ce=0;ce<rt.length;ce++)rt[ce].length<=D||(sg(rt[ce],D,1,rt[ce].length-1,ug),rt[ce]=rt[ce].slice(0,D));return rt}function ug(R,D){return D.area-R.area}function Xv(R,D,U){for(var rt=U.patternDependencies,ct=!1,yt=0,Et=D;yt<Et.length;yt+=1){var Zt=Et[yt],ce=Zt.paint.get(R+"-pattern");ce.isConstant()||(ct=!0);var we=ce.constantOr(null);we&&(ct=!0,rt[we.to]=!0,rt[we.from]=!0)}return ct}function Zv(R,D,U,rt,ct){for(var yt=ct.patternDependencies,Et=0,Zt=D;Et<Zt.length;Et+=1){var ce=Zt[Et],we=ce.paint.get(R+"-pattern"),Le=we.value;if(Le.kind!=="constant"){var Ve=Le.evaluate({zoom:rt-1},U,{},ct.availableImages),ar=Le.evaluate({zoom:rt},U,{},ct.availableImages),er=Le.evaluate({zoom:rt+1},U,{},ct.availableImages);Ve=Ve&&Ve.name?Ve.name:Ve,ar=ar&&ar.name?ar.name:ar,er=er&&er.name?er.name:er,yt[Ve]=!0,yt[ar]=!0,yt[er]=!0,U.patterns[ce.id]={min:Ve,mid:ar,max:er}}}return U}var fg=500,au=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(U){return U.id}),this.index=D.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ku,this.indexArray=new ru,this.indexArray2=new vc,this.programConfigurations=new ga(D.layers,D.zoom),this.segments=new so,this.segments2=new so,this.stateDependentLayerIds=this.layers.filter(function(U){return U.isStateDependent()}).map(function(U){return U.id})};au.prototype.populate=function(D,U,rt){this.hasPattern=Xv("fill",this.layers,U);for(var ct=this.layers[0].layout.get("fill-sort-key"),yt=[],Et=0,Zt=D;Et<Zt.length;Et+=1){var ce=Zt[Et],we=ce.feature,Le=ce.id,Ve=ce.index,ar=ce.sourceLayerIndex,er=this.layers[0]._featureFilter.needGeometry,br=Ei(we,er);if(this.layers[0]._featureFilter.filter(new Ma(this.zoom),br,rt)){var Ur=ct?ct.evaluate(br,{},rt,U.availableImages):void 0,fn={id:Le,properties:we.properties,type:we.type,sourceLayerIndex:ar,index:Ve,geometry:er?br.geometry:ai(we),patterns:{},sortKey:Ur};yt.push(fn)}}ct&&yt.sort(function(ya,ba){return ya.sortKey-ba.sortKey});for(var tn=0,Sn=yt;tn<Sn.length;tn+=1){var xn=Sn[tn],Mn=xn,_n=Mn.geometry,jn=Mn.index,sa=Mn.sourceLayerIndex;if(this.hasPattern){var na=Zv("fill",this.layers,xn,this.zoom,U);this.patternFeatures.push(na)}else this.addFeature(xn,_n,jn,rt,{});var Ta=D[jn].feature;U.featureIndex.insert(Ta,_n,jn,sa,this.index)}},au.prototype.update=function(D,U,rt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,U,this.stateDependentLayers,rt)},au.prototype.addFeatures=function(D,U,rt){for(var ct=0,yt=this.patternFeatures;ct<yt.length;ct+=1){var Et=yt[ct];this.addFeature(Et,Et.geometry,Et.index,U,rt)}},au.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},au.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},au.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Wp),this.indexBuffer=D.createIndexBuffer(this.indexArray),this.indexBuffer2=D.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(D),this.uploaded=!0},au.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},au.prototype.addFeature=function(D,U,rt,ct,yt){for(var Et=0,Zt=Yv(U,fg);Et<Zt.length;Et+=1){for(var ce=Zt[Et],we=0,Le=0,Ve=ce;Le<Ve.length;Le+=1){var ar=Ve[Le];we+=ar.length}for(var er=this.segments.prepareSegment(we,this.layoutVertexArray,this.indexArray),br=er.vertexLength,Ur=[],fn=[],tn=0,Sn=ce;tn<Sn.length;tn+=1){var xn=Sn[tn];if(xn.length!==0){xn!==ce[0]&&fn.push(Ur.length/2);var Mn=this.segments2.prepareSegment(xn.length,this.layoutVertexArray,this.indexArray2),_n=Mn.vertexLength;this.layoutVertexArray.emplaceBack(xn[0].x,xn[0].y),this.indexArray2.emplaceBack(_n+xn.length-1,_n),Ur.push(xn[0].x),Ur.push(xn[0].y);for(var jn=1;jn<xn.length;jn++)this.layoutVertexArray.emplaceBack(xn[jn].x,xn[jn].y),this.indexArray2.emplaceBack(_n+jn-1,_n+jn),Ur.push(xn[jn].x),Ur.push(xn[jn].y);Mn.vertexLength+=xn.length,Mn.primitiveLength+=xn.length}}for(var sa=Vv(Ur,fn),na=0;na<sa.length;na+=3)this.indexArray.emplaceBack(br+sa[na],br+sa[na+1],br+sa[na+2]);er.vertexLength+=we,er.primitiveLength+=sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,rt,yt,ct)},_t("FillBucket",au,{omit:["layers","patternFeatures"]});var cg=new vi({"fill-sort-key":new La(Mr.layout_fill["fill-sort-key"])}),hg=new vi({"fill-antialias":new ca(Mr.paint_fill["fill-antialias"]),"fill-opacity":new La(Mr.paint_fill["fill-opacity"]),"fill-color":new La(Mr.paint_fill["fill-color"]),"fill-outline-color":new La(Mr.paint_fill["fill-outline-color"]),"fill-translate":new ca(Mr.paint_fill["fill-translate"]),"fill-translate-anchor":new ca(Mr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Po(Mr.paint_fill["fill-pattern"])}),vg={paint:hg,layout:cg},dg=function(R){function D(U){R.call(this,U,vg)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(rt,ct){R.prototype.recalculate.call(this,rt,ct);var yt=this.paint._values["fill-outline-color"];yt.value.kind==="constant"&&yt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},D.prototype.createBucket=function(rt){return new au(rt)},D.prototype.queryRadius=function(){return el(this.paint.get("fill-translate"))},D.prototype.queryIntersectsFeature=function(rt,ct,yt,Et,Zt,ce,we){var Le=nu(rt,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),ce.angle,we);return Wi(Le,Et)},D.prototype.isTileClipped=function(){return!0},D}(Gi),pg=ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gg=pg.members,_d=Dc;function Dc(R,D,U,rt,ct){this.properties={},this.extent=U,this.type=0,this._pbf=R,this._geometry=-1,this._keys=rt,this._values=ct,R.readFields(yg,this,D)}function yg(R,D,U){R==1?D.id=U.readVarint():R==2?mg(U,D):R==3?D.type=U.readVarint():R==4&&(D._geometry=U.pos)}function mg(R,D){for(var U=R.readVarint()+R.pos;R.pos<U;){var rt=D._keys[R.readVarint()],ct=D._values[R.readVarint()];D.properties[rt]=ct}}Dc.types=["Unknown","Point","LineString","Polygon"],Dc.prototype.loadGeometry=function(){var R=this._pbf;R.pos=this._geometry;for(var D=R.readVarint()+R.pos,U=1,rt=0,ct=0,yt=0,Et=[],Zt;R.pos<D;){if(rt<=0){var ce=R.readVarint();U=ce&7,rt=ce>>3}if(rt--,U===1||U===2)ct+=R.readSVarint(),yt+=R.readSVarint(),U===1&&(Zt&&Et.push(Zt),Zt=[]),Zt.push(new r(ct,yt));else if(U===7)Zt&&Zt.push(Zt[0].clone());else throw new Error("unknown command "+U)}return Zt&&Et.push(Zt),Et},Dc.prototype.bbox=function(){var R=this._pbf;R.pos=this._geometry;for(var D=R.readVarint()+R.pos,U=1,rt=0,ct=0,yt=0,Et=1/0,Zt=-1/0,ce=1/0,we=-1/0;R.pos<D;){if(rt<=0){var Le=R.readVarint();U=Le&7,rt=Le>>3}if(rt--,U===1||U===2)ct+=R.readSVarint(),yt+=R.readSVarint(),ct<Et&&(Et=ct),ct>Zt&&(Zt=ct),yt<ce&&(ce=yt),yt>we&&(we=yt);else if(U!==7)throw new Error("unknown command "+U)}return[Et,ce,Zt,we]},Dc.prototype.toGeoJSON=function(R,D,U){var rt=this.extent*Math.pow(2,U),ct=this.extent*R,yt=this.extent*D,Et=this.loadGeometry(),Zt=Dc.types[this.type],ce,we;function Le(er){for(var br=0;br<er.length;br++){var Ur=er[br],fn=180-(Ur.y+yt)*360/rt;er[br]=[(Ur.x+ct)*360/rt-180,360/Math.PI*Math.atan(Math.exp(fn*Math.PI/180))-90]}}switch(this.type){case 1:var Ve=[];for(ce=0;ce<Et.length;ce++)Ve[ce]=Et[ce][0];Et=Ve,Le(Et);break;case 2:for(ce=0;ce<Et.length;ce++)Le(Et[ce]);break;case 3:for(Et=xg(Et),ce=0;ce<Et.length;ce++)for(we=0;we<Et[ce].length;we++)Le(Et[ce][we]);break}Et.length===1?Et=Et[0]:Zt="Multi"+Zt;var ar={type:"Feature",geometry:{type:Zt,coordinates:Et},properties:this.properties};return"id"in this&&(ar.id=this.id),ar};function xg(R){var D=R.length;if(D<=1)return[R];for(var U=[],rt,ct,yt=0;yt<D;yt++){var Et=bg(R[yt]);Et!==0&&(ct===void 0&&(ct=Et<0),ct===Et<0?(rt&&U.push(rt),rt=[R[yt]]):rt.push(R[yt]))}return rt&&U.push(rt),U}function bg(R){for(var D=0,U=0,rt=R.length,ct=rt-1,yt,Et;U<rt;ct=U++)yt=R[U],Et=R[ct],D+=(Et.x-yt.x)*(yt.y+Et.y);return D}var Fd=Od;function Od(R,D){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=R,this._keys=[],this._values=[],this._features=[],R.readFields(wg,this,D),this.length=this._features.length}function wg(R,D,U){R===15?D.version=U.readVarint():R===1?D.name=U.readString():R===5?D.extent=U.readVarint():R===2?D._features.push(U.pos):R===3?D._keys.push(U.readString()):R===4&&D._values.push(Tg(U))}function Tg(R){for(var D=null,U=R.readVarint()+R.pos;R.pos<U;){var rt=R.readVarint()>>3;D=rt===1?R.readString():rt===2?R.readFloat():rt===3?R.readDouble():rt===4?R.readVarint64():rt===5?R.readVarint():rt===6?R.readSVarint():rt===7?R.readBoolean():null}return D}Od.prototype.feature=function(R){if(R<0||R>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[R];var D=this._pbf.readVarint()+this._pbf.pos;return new _d(this._pbf,D,this.extent,this._keys,this._values)};var Ag=Mg;function Mg(R,D){this.layers=R.readFields(Sg,{},D)}function Sg(R,D,U){if(R===3){var rt=new Fd(U,U.readVarint()+U.pos);rt.length&&(D[rt.name]=rt)}}var Eg=Ag,Cg=_d,Lg=Fd,Ic={VectorTile:Eg,VectorTileFeature:Cg,VectorTileLayer:Lg},Pg=Ic.VectorTileFeature.types,Rg=500,jv=Math.pow(2,13);function vh(R,D,U,rt,ct,yt,Et,Zt){R.emplaceBack(D,U,Math.floor(rt*jv)*2+Et,ct*jv*2,yt*jv*2,Math.round(Zt))}var iu=function(D){this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(U){return U.id}),this.index=D.index,this.hasPattern=!1,this.layoutVertexArray=new Su,this.indexArray=new ru,this.programConfigurations=new ga(D.layers,D.zoom),this.segments=new so,this.stateDependentLayerIds=this.layers.filter(function(U){return U.isStateDependent()}).map(function(U){return U.id})};iu.prototype.populate=function(D,U,rt){this.features=[],this.hasPattern=Xv("fill-extrusion",this.layers,U);for(var ct=0,yt=D;ct<yt.length;ct+=1){var Et=yt[ct],Zt=Et.feature,ce=Et.id,we=Et.index,Le=Et.sourceLayerIndex,Ve=this.layers[0]._featureFilter.needGeometry,ar=Ei(Zt,Ve);if(this.layers[0]._featureFilter.filter(new Ma(this.zoom),ar,rt)){var er={id:ce,sourceLayerIndex:Le,index:we,geometry:Ve?ar.geometry:ai(Zt),properties:Zt.properties,type:Zt.type,patterns:{}};this.hasPattern?this.features.push(Zv("fill-extrusion",this.layers,er,this.zoom,U)):this.addFeature(er,er.geometry,we,rt,{}),U.featureIndex.insert(Zt,er.geometry,we,Le,this.index,!0)}}},iu.prototype.addFeatures=function(D,U,rt){for(var ct=0,yt=this.features;ct<yt.length;ct+=1){var Et=yt[ct],Zt=Et.geometry;this.addFeature(Et,Zt,Et.index,U,rt)}},iu.prototype.update=function(D,U,rt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,U,this.stateDependentLayers,rt)},iu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},iu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},iu.prototype.upload=function(D){this.uploaded||(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,gg),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},iu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},iu.prototype.addFeature=function(D,U,rt,ct,yt){for(var Et=0,Zt=Yv(U,Rg);Et<Zt.length;Et+=1){for(var ce=Zt[Et],we=0,Le=0,Ve=ce;Le<Ve.length;Le+=1){var ar=Ve[Le];we+=ar.length}for(var er=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),br=0,Ur=ce;br<Ur.length;br+=1){var fn=Ur[br];if(fn.length!==0&&!Ig(fn))for(var tn=0,Sn=0;Sn<fn.length;Sn++){var xn=fn[Sn];if(Sn>=1){var Mn=fn[Sn-1];if(!Dg(xn,Mn)){er.vertexLength+4>so.MAX_VERTEX_ARRAY_LENGTH&&(er=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var _n=xn.sub(Mn)._perp()._unit(),jn=Mn.dist(xn);tn+jn>32768&&(tn=0),vh(this.layoutVertexArray,xn.x,xn.y,_n.x,_n.y,0,0,tn),vh(this.layoutVertexArray,xn.x,xn.y,_n.x,_n.y,0,1,tn),tn+=jn,vh(this.layoutVertexArray,Mn.x,Mn.y,_n.x,_n.y,0,0,tn),vh(this.layoutVertexArray,Mn.x,Mn.y,_n.x,_n.y,0,1,tn);var sa=er.vertexLength;this.indexArray.emplaceBack(sa,sa+2,sa+1),this.indexArray.emplaceBack(sa+1,sa+2,sa+3),er.vertexLength+=4,er.primitiveLength+=2}}}}if(er.vertexLength+we>so.MAX_VERTEX_ARRAY_LENGTH&&(er=this.segments.prepareSegment(we,this.layoutVertexArray,this.indexArray)),Pg[D.type]==="Polygon"){for(var na=[],Ta=[],ya=er.vertexLength,ba=0,Ua=ce;ba<Ua.length;ba+=1){var Aa=Ua[ba];if(Aa.length!==0){Aa!==ce[0]&&Ta.push(na.length/2);for(var Ca=0;Ca<Aa.length;Ca++){var Xa=Aa[Ca];vh(this.layoutVertexArray,Xa.x,Xa.y,0,0,1,1,0),na.push(Xa.x),na.push(Xa.y)}}}for(var Ba=Vv(na,Ta),ui=0;ui<Ba.length;ui+=3)this.indexArray.emplaceBack(ya+Ba[ui],ya+Ba[ui+2],ya+Ba[ui+1]);er.primitiveLength+=Ba.length/3,er.vertexLength+=we}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,rt,yt,ct)},_t("FillExtrusionBucket",iu,{omit:["layers","features"]});function Dg(R,D){return R.x===D.x&&(R.x<0||R.x>Sa)||R.y===D.y&&(R.y<0||R.y>Sa)}function Ig(R){return R.every(function(D){return D.x<0})||R.every(function(D){return D.x>Sa})||R.every(function(D){return D.y<0})||R.every(function(D){return D.y>Sa})}var kg=new vi({"fill-extrusion-opacity":new ca(Mr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new La(Mr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ca(Mr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ca(Mr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Po(Mr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new La(Mr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new La(Mr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ca(Mr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),zg={paint:kg},_g=function(R){function D(U){R.call(this,U,zg)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.createBucket=function(rt){return new iu(rt)},D.prototype.queryRadius=function(){return el(this.paint.get("fill-extrusion-translate"))},D.prototype.is3D=function(){return!0},D.prototype.queryIntersectsFeature=function(rt,ct,yt,Et,Zt,ce,we,Le){var Ve=nu(rt,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),ce.angle,we),ar=this.paint.get("fill-extrusion-height").evaluate(ct,yt),er=this.paint.get("fill-extrusion-base").evaluate(ct,yt),br=Bg(Ve,Le,ce,0),Ur=Og(Et,er,ar,Le),fn=Ur[0],tn=Ur[1];return Fg(fn,tn,br)},D}(Gi);function dh(R,D){return R.x*D.x+R.y*D.y}function Bd(R,D){if(R.length===1){for(var U=0,rt=D[U++],ct;!ct||rt.equals(ct);)if(ct=D[U++],!ct)return 1/0;for(;U<D.length;U++){var yt=D[U],Et=R[0],Zt=ct.sub(rt),ce=yt.sub(rt),we=Et.sub(rt),Le=dh(Zt,Zt),Ve=dh(Zt,ce),ar=dh(ce,ce),er=dh(we,Zt),br=dh(we,ce),Ur=Le*ar-Ve*Ve,fn=(ar*er-Ve*br)/Ur,tn=(Le*br-Ve*er)/Ur,Sn=1-fn-tn,xn=rt.z*Sn+ct.z*fn+yt.z*tn;if(isFinite(xn))return xn}return 1/0}else{for(var Mn=1/0,_n=0,jn=D;_n<jn.length;_n+=1){var sa=jn[_n];Mn=Math.min(Mn,sa.z)}return Mn}}function Fg(R,D,U){var rt=1/0;Wi(U,D)&&(rt=Bd(U,D[0]));for(var ct=0;ct<D.length;ct++)for(var yt=D[ct],Et=R[ct],Zt=0;Zt<yt.length-1;Zt++){var ce=yt[Zt],we=yt[Zt+1],Le=Et[Zt],Ve=Et[Zt+1],ar=[ce,we,Ve,Le,ce];Wa(U,ar)&&(rt=Math.min(rt,Bd(U,ar)))}return rt===1/0?!1:rt}function Og(R,D,U,rt){for(var ct=[],yt=[],Et=rt[8]*D,Zt=rt[9]*D,ce=rt[10]*D,we=rt[11]*D,Le=rt[8]*U,Ve=rt[9]*U,ar=rt[10]*U,er=rt[11]*U,br=0,Ur=R;br<Ur.length;br+=1){for(var fn=Ur[br],tn=[],Sn=[],xn=0,Mn=fn;xn<Mn.length;xn+=1){var _n=Mn[xn],jn=_n.x,sa=_n.y,na=rt[0]*jn+rt[4]*sa+rt[12],Ta=rt[1]*jn+rt[5]*sa+rt[13],ya=rt[2]*jn+rt[6]*sa+rt[14],ba=rt[3]*jn+rt[7]*sa+rt[15],Ua=na+Et,Aa=Ta+Zt,Ca=ya+ce,Xa=ba+we,Ba=na+Le,ui=Ta+Ve,Ai=ya+ar,fi=ba+er,ci=new r(Ua/Xa,Aa/Xa);ci.z=Ca/Xa,tn.push(ci);var ii=new r(Ba/fi,ui/fi);ii.z=Ai/fi,Sn.push(ii)}ct.push(tn),yt.push(Sn)}return[ct,yt]}function Bg(R,D,U,rt){for(var ct=[],yt=0,Et=R;yt<Et.length;yt+=1){var Zt=Et[yt],ce=[Zt.x,Zt.y,rt,1];Bh(ce,ce,D),ct.push(new r(ce[0]/ce[3],ce[1]/ce[3]))}return ct}var Ng=ki([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ug=Ng.members,Vg=ki([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),Hg=Vg.members,Gg=Ic.VectorTileFeature.types,Nd=63,Wg=Math.cos(75/2*(Math.PI/180)),Yg=15,Xg=20,Zg=15,Ud=1/2,Vd=Math.pow(2,Zg-1)/Ud,Qo=function(D){var U=this;this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(rt){return rt.id}),this.index=D.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(rt){U.gradients[rt.id]={}}),this.layoutVertexArray=new Cf,this.layoutVertexArray2=new Lf,this.indexArray=new ru,this.programConfigurations=new ga(D.layers,D.zoom),this.segments=new so,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(rt){return rt.isStateDependent()}).map(function(rt){return rt.id})};Qo.prototype.populate=function(D,U,rt){this.hasPattern=Xv("line",this.layers,U);for(var ct=this.layers[0].layout.get("line-sort-key"),yt=[],Et=0,Zt=D;Et<Zt.length;Et+=1){var ce=Zt[Et],we=ce.feature,Le=ce.id,Ve=ce.index,ar=ce.sourceLayerIndex,er=this.layers[0]._featureFilter.needGeometry,br=Ei(we,er);if(this.layers[0]._featureFilter.filter(new Ma(this.zoom),br,rt)){var Ur=ct?ct.evaluate(br,{},rt):void 0,fn={id:Le,properties:we.properties,type:we.type,sourceLayerIndex:ar,index:Ve,geometry:er?br.geometry:ai(we),patterns:{},sortKey:Ur};yt.push(fn)}}ct&&yt.sort(function(ya,ba){return ya.sortKey-ba.sortKey});for(var tn=0,Sn=yt;tn<Sn.length;tn+=1){var xn=Sn[tn],Mn=xn,_n=Mn.geometry,jn=Mn.index,sa=Mn.sourceLayerIndex;if(this.hasPattern){var na=Zv("line",this.layers,xn,this.zoom,U);this.patternFeatures.push(na)}else this.addFeature(xn,_n,jn,rt,{});var Ta=D[jn].feature;U.featureIndex.insert(Ta,_n,jn,sa,this.index)}},Qo.prototype.update=function(D,U,rt){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(D,U,this.stateDependentLayers,rt)},Qo.prototype.addFeatures=function(D,U,rt){for(var ct=0,yt=this.patternFeatures;ct<yt.length;ct+=1){var Et=yt[ct];this.addFeature(Et,Et.geometry,Et.index,U,rt)}},Qo.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Qo.prototype.upload=function(D){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=D.createVertexBuffer(this.layoutVertexArray2,Hg)),this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,Ug),this.indexBuffer=D.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(D),this.uploaded=!0},Qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Qo.prototype.lineFeatureClips=function(D){if(D.properties&&D.properties.hasOwnProperty("mapbox_clip_start")&&D.properties.hasOwnProperty("mapbox_clip_end")){var U=+D.properties.mapbox_clip_start,rt=+D.properties.mapbox_clip_end;return{start:U,end:rt}}},Qo.prototype.addFeature=function(D,U,rt,ct,yt){var Et=this.layers[0].layout,Zt=Et.get("line-join").evaluate(D,{}),ce=Et.get("line-cap"),we=Et.get("line-miter-limit"),Le=Et.get("line-round-limit");this.lineClips=this.lineFeatureClips(D);for(var Ve=0,ar=U;Ve<ar.length;Ve+=1){var er=ar[Ve];this.addLine(er,D,Zt,ce,we,Le)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,D,rt,yt,ct)},Qo.prototype.addLine=function(D,U,rt,ct,yt,Et){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var Zt=0;Zt<D.length-1;Zt++)this.totalDistance+=D[Zt].dist(D[Zt+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var ce=Gg[U.type]==="Polygon",we=D.length;we>=2&&D[we-1].equals(D[we-2]);)we--;for(var Le=0;Le<we-1&&D[Le].equals(D[Le+1]);)Le++;if(!(we<(ce?3:2))){rt==="bevel"&&(yt=1.05);var Ve=this.overscaling<=16?Yg*Sa/(512*this.overscaling):0,ar=this.segments.prepareSegment(we*10,this.layoutVertexArray,this.indexArray),er,br=void 0,Ur=void 0,fn=void 0,tn=void 0;this.e1=this.e2=-1,ce&&(er=D[we-2],tn=D[Le].sub(er)._unit()._perp());for(var Sn=Le;Sn<we;Sn++)if(Ur=Sn===we-1?ce?D[Le+1]:void 0:D[Sn+1],!(Ur&&D[Sn].equals(Ur))){tn&&(fn=tn),er&&(br=er),er=D[Sn],tn=Ur?Ur.sub(er)._unit()._perp():fn,fn=fn||tn;var xn=fn.add(tn);(xn.x!==0||xn.y!==0)&&xn._unit();var Mn=fn.x*tn.x+fn.y*tn.y,_n=xn.x*tn.x+xn.y*tn.y,jn=_n!==0?1/_n:1/0,sa=2*Math.sqrt(2-2*_n),na=_n<Wg&&br&&Ur,Ta=fn.x*tn.y-fn.y*tn.x>0;if(na&&Sn>Le){var ya=er.dist(br);if(ya>2*Ve){var ba=er.sub(er.sub(br)._mult(Ve/ya)._round());this.updateDistance(br,ba),this.addCurrentVertex(ba,fn,0,0,ar),br=ba}}var Ua=br&&Ur,Aa=Ua?rt:ce?"butt":ct;if(Ua&&Aa==="round"&&(jn<Et?Aa="miter":jn<=2&&(Aa="fakeround")),Aa==="miter"&&jn>yt&&(Aa="bevel"),Aa==="bevel"&&(jn>2&&(Aa="flipbevel"),jn<yt&&(Aa="miter")),br&&this.updateDistance(br,er),Aa==="miter")xn._mult(jn),this.addCurrentVertex(er,xn,0,0,ar);else if(Aa==="flipbevel"){if(jn>100)xn=tn.mult(-1);else{var Ca=jn*fn.add(tn).mag()/fn.sub(tn).mag();xn._perp()._mult(Ca*(Ta?-1:1))}this.addCurrentVertex(er,xn,0,0,ar),this.addCurrentVertex(er,xn.mult(-1),0,0,ar)}else if(Aa==="bevel"||Aa==="fakeround"){var Xa=-Math.sqrt(jn*jn-1),Ba=Ta?Xa:0,ui=Ta?0:Xa;if(br&&this.addCurrentVertex(er,fn,Ba,ui,ar),Aa==="fakeround")for(var Ai=Math.round(sa*180/Math.PI/Xg),fi=1;fi<Ai;fi++){var ci=fi/Ai;if(ci!==.5){var ii=ci-.5,Ci=1.0904+Mn*(-3.2452+Mn*(3.55645-Mn*1.43519)),Pi=.848013+Mn*(-1.06021+Mn*.215638);ci=ci+ci*ii*(ci-1)*(Ci*ii*ii+Pi)}var Yi=tn.sub(fn)._mult(ci)._add(fn)._unit()._mult(Ta?-1:1);this.addHalfVertex(er,Yi.x,Yi.y,!1,Ta,0,ar)}Ur&&this.addCurrentVertex(er,tn,-Ba,-ui,ar)}else if(Aa==="butt")this.addCurrentVertex(er,xn,0,0,ar);else if(Aa==="square"){var Ji=br?1:-1;this.addCurrentVertex(er,xn,Ji,Ji,ar)}else Aa==="round"&&(br&&(this.addCurrentVertex(er,fn,0,0,ar),this.addCurrentVertex(er,fn,1,1,ar,!0)),Ur&&(this.addCurrentVertex(er,tn,-1,-1,ar,!0),this.addCurrentVertex(er,tn,0,0,ar)));if(na&&Sn<we-1){var To=er.dist(Ur);if(To>2*Ve){var co=er.add(Ur.sub(er)._mult(Ve/To)._round());this.updateDistance(er,co),this.addCurrentVertex(co,tn,0,0,ar),er=co}}}}},Qo.prototype.addCurrentVertex=function(D,U,rt,ct,yt,Et){Et===void 0&&(Et=!1);var Zt=U.x+U.y*rt,ce=U.y-U.x*rt,we=-U.x+U.y*ct,Le=-U.y-U.x*ct;this.addHalfVertex(D,Zt,ce,Et,!1,rt,yt),this.addHalfVertex(D,we,Le,Et,!0,-ct,yt),this.distance>Vd/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(D,U,rt,ct,yt,Et))},Qo.prototype.addHalfVertex=function(D,U,rt,ct,yt,Et,Zt){var ce=D.x,we=D.y,Le=this.lineClips?this.scaledDistance*(Vd-1):this.scaledDistance,Ve=Le*Ud;if(this.layoutVertexArray.emplaceBack((ce<<1)+(ct?1:0),(we<<1)+(yt?1:0),Math.round(Nd*U)+128,Math.round(Nd*rt)+128,(Et===0?0:Et<0?-1:1)+1|(Ve&63)<<2,Ve>>6),this.lineClips){var ar=this.scaledDistance-this.lineClips.start,er=this.lineClips.end-this.lineClips.start,br=ar/er;this.layoutVertexArray2.emplaceBack(br,this.lineClipsArray.length)}var Ur=Zt.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Ur),Zt.primitiveLength++),yt?this.e2=Ur:this.e1=Ur},Qo.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Qo.prototype.updateDistance=function(D,U){this.distance+=D.dist(U),this.updateScaledDistance()},_t("LineBucket",Qo,{omit:["layers","patternFeatures"]});var jg=new vi({"line-cap":new ca(Mr.layout_line["line-cap"]),"line-join":new La(Mr.layout_line["line-join"]),"line-miter-limit":new ca(Mr.layout_line["line-miter-limit"]),"line-round-limit":new ca(Mr.layout_line["line-round-limit"]),"line-sort-key":new La(Mr.layout_line["line-sort-key"])}),Kg=new vi({"line-opacity":new La(Mr.paint_line["line-opacity"]),"line-color":new La(Mr.paint_line["line-color"]),"line-translate":new ca(Mr.paint_line["line-translate"]),"line-translate-anchor":new ca(Mr.paint_line["line-translate-anchor"]),"line-width":new La(Mr.paint_line["line-width"]),"line-gap-width":new La(Mr.paint_line["line-gap-width"]),"line-offset":new La(Mr.paint_line["line-offset"]),"line-blur":new La(Mr.paint_line["line-blur"]),"line-dasharray":new _o(Mr.paint_line["line-dasharray"]),"line-pattern":new Po(Mr.paint_line["line-pattern"]),"line-gradient":new oo(Mr.paint_line["line-gradient"])}),Hd={paint:Kg,layout:jg},Jg=function(R){function D(){R.apply(this,arguments)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.possiblyEvaluate=function(rt,ct){return ct=new Ma(Math.floor(ct.zoom),{now:ct.now,fadeDuration:ct.fadeDuration,zoomHistory:ct.zoomHistory,transition:ct.transition}),R.prototype.possiblyEvaluate.call(this,rt,ct)},D.prototype.evaluate=function(rt,ct,yt,Et){return ct=x({},ct,{zoom:Math.floor(ct.zoom)}),R.prototype.evaluate.call(this,rt,ct,yt,Et)},D}(La),Gd=new Jg(Hd.paint.properties["line-width"].specification);Gd.useIntegerZoom=!0;var Qg=function(R){function D(U){R.call(this,U,Hd),this.gradientVersion=0}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype._handleSpecialPaintPropertyUpdate=function(rt){if(rt==="line-gradient"){var ct=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=ct._styleExpression.expression instanceof Ho,this.gradientVersion=(this.gradientVersion+1)%l}},D.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},D.prototype.recalculate=function(rt,ct){R.prototype.recalculate.call(this,rt,ct),this.paint._values["line-floorwidth"]=Gd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,rt)},D.prototype.createBucket=function(rt){return new Qo(rt)},D.prototype.queryRadius=function(rt){var ct=rt,yt=Wd(Jo("line-width",this,ct),Jo("line-gap-width",this,ct)),Et=Jo("line-offset",this,ct);return yt/2+Math.abs(Et)+el(this.paint.get("line-translate"))},D.prototype.queryIntersectsFeature=function(rt,ct,yt,Et,Zt,ce,we){var Le=nu(rt,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),ce.angle,we),Ve=we/2*Wd(this.paint.get("line-width").evaluate(ct,yt),this.paint.get("line-gap-width").evaluate(ct,yt)),ar=this.paint.get("line-offset").evaluate(ct,yt);return ar&&(Et=$g(Et,ar*we)),go(Le,Et,Ve)},D.prototype.isTileClipped=function(){return!0},D}(Gi);function Wd(R,D){return D>0?D+2*R:R}function $g(R,D){for(var U=[],rt=new r(0,0),ct=0;ct<R.length;ct++){for(var yt=R[ct],Et=[],Zt=0;Zt<yt.length;Zt++){var ce=yt[Zt-1],we=yt[Zt],Le=yt[Zt+1],Ve=Zt===0?rt:we.sub(ce)._unit()._perp(),ar=Zt===yt.length-1?rt:Le.sub(we)._unit()._perp(),er=Ve._add(ar)._unit(),br=er.x*ar.x+er.y*ar.y;er._mult(1/br),Et.push(er._mult(D)._add(we))}U.push(Et)}return U}var qg=ki([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),ty=ki([{name:"a_projected_pos",components:3,type:"Float32"}],4);ki([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var ey=ki([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ki([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Yd=ki([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ry=ki([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ki([{name:"triangle",components:3,type:"Uint16"}]),ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ki([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ki([{type:"Float32",name:"offsetX"}]),ki([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function ny(R,D,U){var rt=D.layout.get("text-transform").evaluate(U,{});return rt==="uppercase"?R=R.toLocaleUpperCase():rt==="lowercase"&&(R=R.toLocaleLowerCase()),ea.applyArabicShaping&&(R=ea.applyArabicShaping(R)),R}function ay(R,D,U){return R.sections.forEach(function(rt){rt.text=ny(rt.text,D,U)}),R}function iy(R){var D={},U={},rt=[],ct=0;function yt(tn){rt.push(R[tn]),ct++}function Et(tn,Sn,xn){var Mn=U[tn];return delete U[tn],U[Sn]=Mn,rt[Mn].geometry[0].pop(),rt[Mn].geometry[0]=rt[Mn].geometry[0].concat(xn[0]),Mn}function Zt(tn,Sn,xn){var Mn=D[Sn];return delete D[Sn],D[tn]=Mn,rt[Mn].geometry[0].shift(),rt[Mn].geometry[0]=xn[0].concat(rt[Mn].geometry[0]),Mn}function ce(tn,Sn,xn){var Mn=xn?Sn[0][Sn[0].length-1]:Sn[0][0];return tn+":"+Mn.x+":"+Mn.y}for(var we=0;we<R.length;we++){var Le=R[we],Ve=Le.geometry,ar=Le.text?Le.text.toString():null;if(!ar){yt(we);continue}var er=ce(ar,Ve),br=ce(ar,Ve,!0);if(er in U&&br in D&&U[er]!==D[br]){var Ur=Zt(er,br,Ve),fn=Et(er,br,rt[Ur].geometry);delete D[er],delete U[br],U[ce(ar,rt[fn].geometry,!0)]=fn,rt[Ur].geometry=null}else er in U?Et(er,br,Ve):br in D?Zt(er,br,Ve):(yt(we),D[er]=ct-1,U[br]=ct-1)}return rt.filter(function(tn){return tn.geometry})}var ph={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};function oy(R){for(var D="",U=0;U<R.length;U++){var rt=R.charCodeAt(U+1)||null,ct=R.charCodeAt(U-1)||null,yt=(!rt||!Hr(rt)||ph[R[U+1]])&&(!ct||!Hr(ct)||ph[R[U-1]]);yt&&ph[R[U]]?D+=ph[R[U]]:D+=R[U]}return D}var Ro=24,sy=function(R,D,U,rt,ct){var yt,Et,Zt=ct*8-rt-1,ce=(1<<Zt)-1,we=ce>>1,Le=-7,Ve=U?ct-1:0,ar=U?-1:1,er=R[D+Ve];for(Ve+=ar,yt=er&(1<<-Le)-1,er>>=-Le,Le+=Zt;Le>0;yt=yt*256+R[D+Ve],Ve+=ar,Le-=8);for(Et=yt&(1<<-Le)-1,yt>>=-Le,Le+=rt;Le>0;Et=Et*256+R[D+Ve],Ve+=ar,Le-=8);if(yt===0)yt=1-we;else{if(yt===ce)return Et?NaN:(er?-1:1)*(1/0);Et=Et+Math.pow(2,rt),yt=yt-we}return(er?-1:1)*Et*Math.pow(2,yt-rt)},ly=function(R,D,U,rt,ct,yt){var Et,Zt,ce,we=yt*8-ct-1,Le=(1<<we)-1,Ve=Le>>1,ar=ct===23?Math.pow(2,-24)-Math.pow(2,-77):0,er=rt?0:yt-1,br=rt?1:-1,Ur=D<0||D===0&&1/D<0?1:0;for(D=Math.abs(D),isNaN(D)||D===1/0?(Zt=isNaN(D)?1:0,Et=Le):(Et=Math.floor(Math.log(D)/Math.LN2),D*(ce=Math.pow(2,-Et))<1&&(Et--,ce*=2),Et+Ve>=1?D+=ar/ce:D+=ar*Math.pow(2,1-Ve),D*ce>=2&&(Et++,ce/=2),Et+Ve>=Le?(Zt=0,Et=Le):Et+Ve>=1?(Zt=(D*ce-1)*Math.pow(2,ct),Et=Et+Ve):(Zt=D*Math.pow(2,Ve-1)*Math.pow(2,ct),Et=0));ct>=8;R[U+er]=Zt&255,er+=br,Zt/=256,ct-=8);for(Et=Et<<ct|Zt,we+=ct;we>0;R[U+er]=Et&255,er+=br,Et/=256,we-=8);R[U+er-br]|=Ur*128},Gh={read:sy,write:ly},Wh=Li;function Li(R){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(R)?R:new Uint8Array(R||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var Kv=65536*65536,Xd=1/Kv,uy=12,Zd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Li.prototype={destroy:function(){this.buf=null},readFields:function(R,D,U){for(U=U||this.length;this.pos<U;){var rt=this.readVarint(),ct=rt>>3,yt=this.pos;this.type=rt&7,R(ct,D,this),this.pos===yt&&this.skip(rt)}return D},readMessage:function(R,D){return this.readFields(R,D,this.readVarint()+this.pos)},readFixed32:function(){var R=Yh(this.buf,this.pos);return this.pos+=4,R},readSFixed32:function(){var R=Kd(this.buf,this.pos);return this.pos+=4,R},readFixed64:function(){var R=Yh(this.buf,this.pos)+Yh(this.buf,this.pos+4)*Kv;return this.pos+=8,R},readSFixed64:function(){var R=Yh(this.buf,this.pos)+Kd(this.buf,this.pos+4)*Kv;return this.pos+=8,R},readFloat:function(){var R=Gh.read(this.buf,this.pos,!0,23,4);return this.pos+=4,R},readDouble:function(){var R=Gh.read(this.buf,this.pos,!0,52,8);return this.pos+=8,R},readVarint:function(R){var D=this.buf,U,rt;return rt=D[this.pos++],U=rt&127,rt<128||(rt=D[this.pos++],U|=(rt&127)<<7,rt<128)||(rt=D[this.pos++],U|=(rt&127)<<14,rt<128)||(rt=D[this.pos++],U|=(rt&127)<<21,rt<128)?U:(rt=D[this.pos],U|=(rt&15)<<28,fy(U,R,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var R=this.readVarint();return R%2===1?(R+1)/-2:R/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var R=this.readVarint()+this.pos,D=this.pos;return this.pos=R,R-D>=uy&&Zd?My(this.buf,D,R):Ay(this.buf,D,R)},readBytes:function(){var R=this.readVarint()+this.pos,D=this.buf.subarray(this.pos,R);return this.pos=R,D},readPackedVarint:function(R,D){if(this.type!==Li.Bytes)return R.push(this.readVarint(D));var U=qu(this);for(R=R||[];this.pos<U;)R.push(this.readVarint(D));return R},readPackedSVarint:function(R){if(this.type!==Li.Bytes)return R.push(this.readSVarint());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readSVarint());return R},readPackedBoolean:function(R){if(this.type!==Li.Bytes)return R.push(this.readBoolean());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readBoolean());return R},readPackedFloat:function(R){if(this.type!==Li.Bytes)return R.push(this.readFloat());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readFloat());return R},readPackedDouble:function(R){if(this.type!==Li.Bytes)return R.push(this.readDouble());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readDouble());return R},readPackedFixed32:function(R){if(this.type!==Li.Bytes)return R.push(this.readFixed32());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readFixed32());return R},readPackedSFixed32:function(R){if(this.type!==Li.Bytes)return R.push(this.readSFixed32());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readSFixed32());return R},readPackedFixed64:function(R){if(this.type!==Li.Bytes)return R.push(this.readFixed64());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readFixed64());return R},readPackedSFixed64:function(R){if(this.type!==Li.Bytes)return R.push(this.readSFixed64());var D=qu(this);for(R=R||[];this.pos<D;)R.push(this.readSFixed64());return R},skip:function(R){var D=R&7;if(D===Li.Varint)for(;this.buf[this.pos++]>127;);else if(D===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(D===Li.Fixed32)this.pos+=4;else if(D===Li.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+D)},writeTag:function(R,D){this.writeVarint(R<<3|D)},realloc:function(R){for(var D=this.length||16;D<this.pos+R;)D*=2;if(D!==this.length){var U=new Uint8Array(D);U.set(this.buf),this.buf=U,this.length=D}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(R){this.realloc(4),zc(this.buf,R,this.pos),this.pos+=4},writeSFixed32:function(R){this.realloc(4),zc(this.buf,R,this.pos),this.pos+=4},writeFixed64:function(R){this.realloc(8),zc(this.buf,R&-1,this.pos),zc(this.buf,Math.floor(R*Xd),this.pos+4),this.pos+=8},writeSFixed64:function(R){this.realloc(8),zc(this.buf,R&-1,this.pos),zc(this.buf,Math.floor(R*Xd),this.pos+4),this.pos+=8},writeVarint:function(R){if(R=+R||0,R>268435455||R<0){cy(R,this);return}this.realloc(4),this.buf[this.pos++]=R&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=(R>>>=7)&127|(R>127?128:0),!(R<=127)&&(this.buf[this.pos++]=R>>>7&127)))},writeSVarint:function(R){this.writeVarint(R<0?-R*2-1:R*2)},writeBoolean:function(R){this.writeVarint(!!R)},writeString:function(R){R=String(R),this.realloc(R.length*4),this.pos++;var D=this.pos;this.pos=Sy(this.buf,R,this.pos);var U=this.pos-D;U>=128&&jd(D,U,this),this.pos=D-1,this.writeVarint(U),this.pos+=U},writeFloat:function(R){this.realloc(4),Gh.write(this.buf,R,this.pos,!0,23,4),this.pos+=4},writeDouble:function(R){this.realloc(8),Gh.write(this.buf,R,this.pos,!0,52,8),this.pos+=8},writeBytes:function(R){var D=R.length;this.writeVarint(D),this.realloc(D);for(var U=0;U<D;U++)this.buf[this.pos++]=R[U]},writeRawMessage:function(R,D){this.pos++;var U=this.pos;R(D,this);var rt=this.pos-U;rt>=128&&jd(U,rt,this),this.pos=U-1,this.writeVarint(rt),this.pos+=rt},writeMessage:function(R,D,U){this.writeTag(R,Li.Bytes),this.writeRawMessage(D,U)},writePackedVarint:function(R,D){D.length&&this.writeMessage(R,dy,D)},writePackedSVarint:function(R,D){D.length&&this.writeMessage(R,py,D)},writePackedBoolean:function(R,D){D.length&&this.writeMessage(R,my,D)},writePackedFloat:function(R,D){D.length&&this.writeMessage(R,gy,D)},writePackedDouble:function(R,D){D.length&&this.writeMessage(R,yy,D)},writePackedFixed32:function(R,D){D.length&&this.writeMessage(R,xy,D)},writePackedSFixed32:function(R,D){D.length&&this.writeMessage(R,by,D)},writePackedFixed64:function(R,D){D.length&&this.writeMessage(R,wy,D)},writePackedSFixed64:function(R,D){D.length&&this.writeMessage(R,Ty,D)},writeBytesField:function(R,D){this.writeTag(R,Li.Bytes),this.writeBytes(D)},writeFixed32Field:function(R,D){this.writeTag(R,Li.Fixed32),this.writeFixed32(D)},writeSFixed32Field:function(R,D){this.writeTag(R,Li.Fixed32),this.writeSFixed32(D)},writeFixed64Field:function(R,D){this.writeTag(R,Li.Fixed64),this.writeFixed64(D)},writeSFixed64Field:function(R,D){this.writeTag(R,Li.Fixed64),this.writeSFixed64(D)},writeVarintField:function(R,D){this.writeTag(R,Li.Varint),this.writeVarint(D)},writeSVarintField:function(R,D){this.writeTag(R,Li.Varint),this.writeSVarint(D)},writeStringField:function(R,D){this.writeTag(R,Li.Bytes),this.writeString(D)},writeFloatField:function(R,D){this.writeTag(R,Li.Fixed32),this.writeFloat(D)},writeDoubleField:function(R,D){this.writeTag(R,Li.Fixed64),this.writeDouble(D)},writeBooleanField:function(R,D){this.writeVarintField(R,!!D)}};function fy(R,D,U){var rt=U.buf,ct,yt;if(yt=rt[U.pos++],ct=(yt&112)>>4,yt<128||(yt=rt[U.pos++],ct|=(yt&127)<<3,yt<128)||(yt=rt[U.pos++],ct|=(yt&127)<<10,yt<128)||(yt=rt[U.pos++],ct|=(yt&127)<<17,yt<128)||(yt=rt[U.pos++],ct|=(yt&127)<<24,yt<128)||(yt=rt[U.pos++],ct|=(yt&1)<<31,yt<128))return kc(R,ct,D);throw new Error("Expected varint not more than 10 bytes")}function qu(R){return R.type===Li.Bytes?R.readVarint()+R.pos:R.pos+1}function kc(R,D,U){return U?D*4294967296+(R>>>0):(D>>>0)*4294967296+(R>>>0)}function cy(R,D){var U,rt;if(R>=0?(U=R%4294967296|0,rt=R/4294967296|0):(U=~(-R%4294967296),rt=~(-R/4294967296),U^4294967295?U=U+1|0:(U=0,rt=rt+1|0)),R>=18446744073709552e3||R<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");D.realloc(10),hy(U,rt,D),vy(rt,D)}function hy(R,D,U){U.buf[U.pos++]=R&127|128,R>>>=7,U.buf[U.pos++]=R&127|128,R>>>=7,U.buf[U.pos++]=R&127|128,R>>>=7,U.buf[U.pos++]=R&127|128,R>>>=7,U.buf[U.pos]=R&127}function vy(R,D){var U=(R&7)<<4;D.buf[D.pos++]|=U|((R>>>=3)?128:0),R&&(D.buf[D.pos++]=R&127|((R>>>=7)?128:0),R&&(D.buf[D.pos++]=R&127|((R>>>=7)?128:0),R&&(D.buf[D.pos++]=R&127|((R>>>=7)?128:0),R&&(D.buf[D.pos++]=R&127|((R>>>=7)?128:0),R&&(D.buf[D.pos++]=R&127)))))}function jd(R,D,U){var rt=D<=16383?1:D<=2097151?2:D<=268435455?3:Math.floor(Math.log(D)/(Math.LN2*7));U.realloc(rt);for(var ct=U.pos-1;ct>=R;ct--)U.buf[ct+rt]=U.buf[ct]}function dy(R,D){for(var U=0;U<R.length;U++)D.writeVarint(R[U])}function py(R,D){for(var U=0;U<R.length;U++)D.writeSVarint(R[U])}function gy(R,D){for(var U=0;U<R.length;U++)D.writeFloat(R[U])}function yy(R,D){for(var U=0;U<R.length;U++)D.writeDouble(R[U])}function my(R,D){for(var U=0;U<R.length;U++)D.writeBoolean(R[U])}function xy(R,D){for(var U=0;U<R.length;U++)D.writeFixed32(R[U])}function by(R,D){for(var U=0;U<R.length;U++)D.writeSFixed32(R[U])}function wy(R,D){for(var U=0;U<R.length;U++)D.writeFixed64(R[U])}function Ty(R,D){for(var U=0;U<R.length;U++)D.writeSFixed64(R[U])}function Yh(R,D){return(R[D]|R[D+1]<<8|R[D+2]<<16)+R[D+3]*16777216}function zc(R,D,U){R[U]=D,R[U+1]=D>>>8,R[U+2]=D>>>16,R[U+3]=D>>>24}function Kd(R,D){return(R[D]|R[D+1]<<8|R[D+2]<<16)+(R[D+3]<<24)}function Ay(R,D,U){for(var rt="",ct=D;ct<U;){var yt=R[ct],Et=null,Zt=yt>239?4:yt>223?3:yt>191?2:1;if(ct+Zt>U)break;var ce,we,Le;Zt===1?yt<128&&(Et=yt):Zt===2?(ce=R[ct+1],(ce&192)===128&&(Et=(yt&31)<<6|ce&63,Et<=127&&(Et=null))):Zt===3?(ce=R[ct+1],we=R[ct+2],(ce&192)===128&&(we&192)===128&&(Et=(yt&15)<<12|(ce&63)<<6|we&63,(Et<=2047||Et>=55296&&Et<=57343)&&(Et=null))):Zt===4&&(ce=R[ct+1],we=R[ct+2],Le=R[ct+3],(ce&192)===128&&(we&192)===128&&(Le&192)===128&&(Et=(yt&15)<<18|(ce&63)<<12|(we&63)<<6|Le&63,(Et<=65535||Et>=1114112)&&(Et=null))),Et===null?(Et=65533,Zt=1):Et>65535&&(Et-=65536,rt+=String.fromCharCode(Et>>>10&1023|55296),Et=56320|Et&1023),rt+=String.fromCharCode(Et),ct+=Zt}return rt}function My(R,D,U){return Zd.decode(R.subarray(D,U))}function Sy(R,D,U){for(var rt=0,ct,yt;rt<D.length;rt++){if(ct=D.charCodeAt(rt),ct>55295&&ct<57344)if(yt)if(ct<56320){R[U++]=239,R[U++]=191,R[U++]=189,yt=ct;continue}else ct=yt-55296<<10|ct-56320|65536,yt=null;else{ct>56319||rt+1===D.length?(R[U++]=239,R[U++]=191,R[U++]=189):yt=ct;continue}else yt&&(R[U++]=239,R[U++]=191,R[U++]=189,yt=null);ct<128?R[U++]=ct:(ct<2048?R[U++]=ct>>6|192:(ct<65536?R[U++]=ct>>12|224:(R[U++]=ct>>18|240,R[U++]=ct>>12&63|128),R[U++]=ct>>6&63|128),R[U++]=ct&63|128)}return U}var Jv=3;function Ey(R,D,U){R===1&&U.readMessage(Cy,D)}function Cy(R,D,U){if(R===3){var rt=U.readMessage(Ly,{}),ct=rt.id,yt=rt.bitmap,Et=rt.width,Zt=rt.height,ce=rt.left,we=rt.top,Le=rt.advance;D.push({id:ct,bitmap:new gc({width:Et+2*Jv,height:Zt+2*Jv},yt),metrics:{width:Et,height:Zt,left:ce,top:we,advance:Le}})}}function Ly(R,D,U){R===1?D.id=U.readVarint():R===2?D.bitmap=U.readBytes():R===3?D.width=U.readVarint():R===4?D.height=U.readVarint():R===5?D.left=U.readSVarint():R===6?D.top=U.readSVarint():R===7&&(D.advance=U.readVarint())}function Py(R){return new Wh(R).readFields(Ey,[])}var Jd=Jv;function Qd(R){for(var D=0,U=0,rt=0,ct=R;rt<ct.length;rt+=1){var yt=ct[rt];D+=yt.w*yt.h,U=Math.max(U,yt.w)}R.sort(function(fn,tn){return tn.h-fn.h});for(var Et=Math.max(Math.ceil(Math.sqrt(D/.95)),U),Zt=[{x:0,y:0,w:Et,h:1/0}],ce=0,we=0,Le=0,Ve=R;Le<Ve.length;Le+=1)for(var ar=Ve[Le],er=Zt.length-1;er>=0;er--){var br=Zt[er];if(!(ar.w>br.w||ar.h>br.h)){if(ar.x=br.x,ar.y=br.y,we=Math.max(we,ar.y+ar.h),ce=Math.max(ce,ar.x+ar.w),ar.w===br.w&&ar.h===br.h){var Ur=Zt.pop();er<Zt.length&&(Zt[er]=Ur)}else ar.h===br.h?(br.x+=ar.w,br.w-=ar.w):ar.w===br.w?(br.y+=ar.h,br.h-=ar.h):(Zt.push({x:br.x+ar.w,y:br.y,w:br.w-ar.w,h:ar.h}),br.y+=ar.h,br.h-=ar.h);break}}return{w:ce,h:we,fill:D/(ce*we)||0}}var Es=1,Xh=function(D,U){var rt=U.pixelRatio,ct=U.version,yt=U.stretchX,Et=U.stretchY,Zt=U.content;this.paddedRect=D,this.pixelRatio=rt,this.stretchX=yt,this.stretchY=Et,this.content=Zt,this.version=ct},gh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};gh.tl.get=function(){return[this.paddedRect.x+Es,this.paddedRect.y+Es]},gh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Es,this.paddedRect.y+this.paddedRect.h-Es]},gh.tlbr.get=function(){return this.tl.concat(this.br)},gh.displaySize.get=function(){return[(this.paddedRect.w-Es*2)/this.pixelRatio,(this.paddedRect.h-Es*2)/this.pixelRatio]},Object.defineProperties(Xh.prototype,gh);var yh=function(D,U){var rt={},ct={};this.haveRenderCallbacks=[];var yt=[];this.addImages(D,rt,yt),this.addImages(U,ct,yt);var Et=Qd(yt),Zt=Et.w,ce=Et.h,we=new vs({width:Zt||1,height:ce||1});for(var Le in D){var Ve=D[Le],ar=rt[Le].paddedRect;vs.copy(Ve.data,we,{x:0,y:0},{x:ar.x+Es,y:ar.y+Es},Ve.data)}for(var er in U){var br=U[er],Ur=ct[er].paddedRect,fn=Ur.x+Es,tn=Ur.y+Es,Sn=br.data.width,xn=br.data.height;vs.copy(br.data,we,{x:0,y:0},{x:fn,y:tn},br.data),vs.copy(br.data,we,{x:0,y:xn-1},{x:fn,y:tn-1},{width:Sn,height:1}),vs.copy(br.data,we,{x:0,y:0},{x:fn,y:tn+xn},{width:Sn,height:1}),vs.copy(br.data,we,{x:Sn-1,y:0},{x:fn-1,y:tn},{width:1,height:xn}),vs.copy(br.data,we,{x:0,y:0},{x:fn+Sn,y:tn},{width:1,height:xn})}this.image=we,this.iconPositions=rt,this.patternPositions=ct};yh.prototype.addImages=function(D,U,rt){for(var ct in D){var yt=D[ct],Et={x:0,y:0,w:yt.data.width+2*Es,h:yt.data.height+2*Es};rt.push(Et),U[ct]=new Xh(Et,yt),yt.hasRenderCallback&&this.haveRenderCallbacks.push(ct)}},yh.prototype.patchUpdatedImages=function(D,U){D.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var rt in D.updatedImages)this.patchUpdatedImage(this.iconPositions[rt],D.getImage(rt),U),this.patchUpdatedImage(this.patternPositions[rt],D.getImage(rt),U)},yh.prototype.patchUpdatedImage=function(D,U,rt){if(!(!D||!U)&&D.version!==U.version){D.version=U.version;var ct=D.tl,yt=ct[0],Et=ct[1];rt.update(U.data,void 0,{x:yt,y:Et})}},_t("ImagePosition",Xh),_t("ImageAtlas",yh);var Us={horizontal:1,vertical:2,horizontalOnly:3},mh=-17;function Ry(R){for(var D=0,U=R;D<U.length;D+=1){var rt=U[D];if(rt.positionedGlyphs.length!==0)return!1}return!0}var $d=57344,qd=63743,_c=function(){this.scale=1,this.fontStack="",this.imageName=null};_c.forText=function(D,U){var rt=new _c;return rt.scale=D||1,rt.fontStack=U,rt},_c.forImage=function(D){var U=new _c;return U.imageName=D,U};var Bo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Bo.fromFeature=function(D,U){for(var rt=new Bo,ct=0;ct<D.sections.length;ct++){var yt=D.sections[ct];yt.image?rt.addImageSection(yt):rt.addTextSection(yt,U)}return rt},Bo.prototype.length=function(){return this.text.length},Bo.prototype.getSection=function(D){return this.sections[this.sectionIndex[D]]},Bo.prototype.getSectionIndex=function(D){return this.sectionIndex[D]},Bo.prototype.getCharCode=function(D){return this.text.charCodeAt(D)},Bo.prototype.verticalizePunctuation=function(){this.text=oy(this.text)},Bo.prototype.trim=function(){for(var D=0,U=0;U<this.text.length&&Lu[this.text.charCodeAt(U)];U++)D++;for(var rt=this.text.length,ct=this.text.length-1;ct>=0&&ct>=D&&Lu[this.text.charCodeAt(ct)];ct--)rt--;this.text=this.text.substring(D,rt),this.sectionIndex=this.sectionIndex.slice(D,rt)},Bo.prototype.substring=function(D,U){var rt=new Bo;return rt.text=this.text.substring(D,U),rt.sectionIndex=this.sectionIndex.slice(D,U),rt.sections=this.sections,rt},Bo.prototype.toString=function(){return this.text},Bo.prototype.getMaxScale=function(){var D=this;return this.sectionIndex.reduce(function(U,rt){return Math.max(U,D.sections[rt].scale)},0)},Bo.prototype.addTextSection=function(D,U){this.text+=D.text,this.sections.push(_c.forText(D.scale,D.fontStack||U));for(var rt=this.sections.length-1,ct=0;ct<D.text.length;++ct)this.sectionIndex.push(rt)},Bo.prototype.addImageSection=function(D){var U=D.image?D.image.name:"";if(U.length===0){F("Can't add FormattedSection with an empty image.");return}var rt=this.getNextImageSectionCharCode();if(!rt){F("Reached maximum number of images "+(qd-$d+2));return}this.text+=String.fromCharCode(rt),this.sections.push(_c.forImage(U)),this.sectionIndex.push(this.sections.length-1)},Bo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=qd?null:++this.imageSectionID:(this.imageSectionID=$d,this.imageSectionID)};function Dy(R,D){for(var U=[],rt=R.text,ct=0,yt=0,Et=D;yt<Et.length;yt+=1){var Zt=Et[yt];U.push(R.substring(ct,Zt)),ct=Zt}return ct<rt.length&&U.push(R.substring(ct,rt.length)),U}function Zh(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur){var fn=Bo.fromFeature(R,ct);Ve===Us.vertical&&fn.verticalizePunctuation();var tn,Sn=ea.processBidirectionalText,xn=ea.processStyledBidirectionalText;if(Sn&&fn.sections.length===1){tn=[];for(var Mn=Sn(fn.toString(),Qv(fn,we,yt,D,rt,er,br)),_n=0,jn=Mn;_n<jn.length;_n+=1){var sa=jn[_n],na=new Bo;na.text=sa,na.sections=fn.sections;for(var Ta=0;Ta<sa.length;Ta++)na.sectionIndex.push(0);tn.push(na)}}else if(xn){tn=[];for(var ya=xn(fn.text,fn.sectionIndex,Qv(fn,we,yt,D,rt,er,br)),ba=0,Ua=ya;ba<Ua.length;ba+=1){var Aa=Ua[ba],Ca=new Bo;Ca.text=Aa[0],Ca.sectionIndex=Aa[1],Ca.sections=fn.sections,tn.push(Ca)}}else tn=Dy(fn,Qv(fn,we,yt,D,rt,er,br));var Xa=[],Ba={positionedLines:Xa,text:fn.toString(),top:Le[1],bottom:Le[1],left:Le[0],right:Le[0],writingMode:Ve,iconsInText:!1,verticalizable:!1};return zy(Ba,D,U,rt,tn,Et,Zt,ce,Ve,we,ar,Ur),Ry(Xa)?!1:Ba}var Lu={};Lu[9]=!0,Lu[10]=!0,Lu[11]=!0,Lu[12]=!0,Lu[13]=!0,Lu[32]=!0;var Cs={};Cs[10]=!0,Cs[32]=!0,Cs[38]=!0,Cs[40]=!0,Cs[41]=!0,Cs[43]=!0,Cs[45]=!0,Cs[47]=!0,Cs[173]=!0,Cs[183]=!0,Cs[8203]=!0,Cs[8208]=!0,Cs[8211]=!0,Cs[8231]=!0;function t0(R,D,U,rt,ct,yt){if(D.imageName){var ce=rt[D.imageName];return ce?ce.displaySize[0]*D.scale*Ro/yt+ct:0}else{var Et=U[D.fontStack],Zt=Et&&Et[R];return Zt?Zt.metrics.advance*D.scale+ct:0}}function Iy(R,D,U,rt,ct,yt){for(var Et=0,Zt=0;Zt<R.length();Zt++){var ce=R.getSection(Zt);Et+=t0(R.getCharCode(Zt),ce,rt,ct,D,yt)}var we=Math.max(1,Math.ceil(Et/U));return Et/we}function e0(R,D,U,rt){var ct=Math.pow(R-D,2);return rt?R<D?ct/2:ct*2:ct+Math.abs(U)*U}function ky(R,D,U){var rt=0;return R===10&&(rt-=1e4),U&&(rt+=150),(R===40||R===65288)&&(rt+=50),(D===41||D===65289)&&(rt+=50),rt}function r0(R,D,U,rt,ct,yt){for(var Et=null,Zt=e0(D,U,ct,yt),ce=0,we=rt;ce<we.length;ce+=1){var Le=we[ce],Ve=D-Le.x,ar=e0(Ve,U,ct,yt)+Le.badness;ar<=Zt&&(Et=Le,Zt=ar)}return{index:R,x:D,priorBreak:Et,badness:Zt}}function n0(R){return R?n0(R.priorBreak).concat(R.index):[]}function Qv(R,D,U,rt,ct,yt,Et){if(yt!=="point")return[];if(!R)return[];for(var Zt=[],ce=Iy(R,D,U,rt,ct,Et),we=R.text.indexOf("​")>=0,Le=0,Ve=0;Ve<R.length();Ve++){var ar=R.getSection(Ve),er=R.getCharCode(Ve);if(Lu[er]||(Le+=t0(er,ar,rt,ct,D,Et)),Ve<R.length()-1){var br=Qr(er);(Cs[er]||br||ar.imageName)&&Zt.push(r0(Ve+1,Le,ce,Zt,ky(er,R.getCharCode(Ve+1),br&&we),!1))}}return n0(r0(R.length(),Le,ce,Zt,0,!0))}function $v(R){var D=.5,U=.5;switch(R){case"right":case"top-right":case"bottom-right":D=1;break;case"left":case"top-left":case"bottom-left":D=0;break}switch(R){case"bottom":case"bottom-right":case"bottom-left":U=1;break;case"top":case"top-right":case"top-left":U=0;break}return{horizontalAlign:D,verticalAlign:U}}function zy(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve){for(var ar=0,er=mh,br=0,Ur=0,fn=Zt==="right"?1:Zt==="left"?0:.5,tn=0,Sn=0,xn=ct;Sn<xn.length;Sn+=1){var Mn=xn[Sn];Mn.trim();var _n=Mn.getMaxScale(),jn=(_n-1)*Ro,sa={positionedGlyphs:[],lineOffset:0};R.positionedLines[tn]=sa;var na=sa.positionedGlyphs,Ta=0;if(!Mn.length()){er+=yt,++tn;continue}for(var ya=0;ya<Mn.length();ya++){var ba=Mn.getSection(ya),Ua=Mn.getSectionIndex(ya),Aa=Mn.getCharCode(ya),Ca=0,Xa=null,Ba=null,ui=null,Ai=Ro,fi=!(ce===Us.horizontal||!Le&&!sn(Aa)||Le&&(Lu[Aa]||Kr(Aa)));if(ba.imageName){var Yi=rt[ba.imageName];if(!Yi)continue;ui=ba.imageName,R.iconsInText=R.iconsInText||!0,Ba=Yi.paddedRect;var Ji=Yi.displaySize;ba.scale=ba.scale*Ro/Ve,Xa={width:Ji[0],height:Ji[1],left:Es,top:-Jd,advance:fi?Ji[1]:Ji[0]};var To=Ro-Ji[1]*ba.scale;Ca=jn+To,Ai=Xa.advance;var co=fi?Ji[0]*ba.scale-Ro*_n:Ji[1]*ba.scale-Ro*_n;co>0&&co>Ta&&(Ta=co)}else{var ci=U[ba.fontStack],ii=ci&&ci[Aa];if(ii&&ii.rect)Ba=ii.rect,Xa=ii.metrics;else{var Ci=D[ba.fontStack],Pi=Ci&&Ci[Aa];if(!Pi)continue;Xa=Pi.metrics}Ca=(_n-ba.scale)*Ro}fi?(R.verticalizable=!0,na.push({glyph:Aa,imageName:ui,x:ar,y:er+Ca,vertical:fi,scale:ba.scale,fontStack:ba.fontStack,sectionIndex:Ua,metrics:Xa,rect:Ba}),ar+=Ai*ba.scale+we):(na.push({glyph:Aa,imageName:ui,x:ar,y:er+Ca,vertical:fi,scale:ba.scale,fontStack:ba.fontStack,sectionIndex:Ua,metrics:Xa,rect:Ba}),ar+=Xa.advance*ba.scale+we)}if(na.length!==0){var No=ar-we;br=Math.max(No,br),_y(na,0,na.length-1,fn,Ta)}ar=0;var Uo=yt*_n+Ta;sa.lineOffset=Math.max(Ta,jn),er+=Uo,Ur=Math.max(Uo,Ur),++tn}var Ao=er-mh,$o=$v(Et),qo=$o.horizontalAlign,yo=$o.verticalAlign;Fy(R.positionedLines,fn,qo,yo,br,Ur,yt,Ao,ct.length),R.top+=-yo*Ao,R.bottom=R.top+Ao,R.left+=-qo*br,R.right=R.left+br}function _y(R,D,U,rt,ct){if(!(!rt&&!ct))for(var yt=R[U],Et=yt.metrics.advance*yt.scale,Zt=(R[U].x+Et)*rt,ce=D;ce<=U;ce++)R[ce].x-=Zt,R[ce].y+=ct}function Fy(R,D,U,rt,ct,yt,Et,Zt,ce){var we=(D-U)*ct,Le=0;yt!==Et?Le=-Zt*rt-mh:Le=(-rt*ce+.5)*Et;for(var Ve=0,ar=R;Ve<ar.length;Ve+=1)for(var er=ar[Ve],br=0,Ur=er.positionedGlyphs;br<Ur.length;br+=1){var fn=Ur[br];fn.x+=we,fn.y+=Le}}function Oy(R,D,U){var rt=$v(U),ct=rt.horizontalAlign,yt=rt.verticalAlign,Et=D[0],Zt=D[1],ce=Et-R.displaySize[0]*ct,we=ce+R.displaySize[0],Le=Zt-R.displaySize[1]*yt,Ve=Le+R.displaySize[1];return{image:R,top:Le,bottom:Ve,left:ce,right:we}}function a0(R,D,U,rt,ct,yt){var Et=R.image,Zt;if(Et.content){var ce=Et.content,we=Et.pixelRatio||1;Zt=[ce[0]/we,ce[1]/we,Et.displaySize[0]-ce[2]/we,Et.displaySize[1]-ce[3]/we]}var Le=D.left*yt,Ve=D.right*yt,ar,er,br,Ur;U==="width"||U==="both"?(Ur=ct[0]+Le-rt[3],er=ct[0]+Ve+rt[1]):(Ur=ct[0]+(Le+Ve-Et.displaySize[0])/2,er=Ur+Et.displaySize[0]);var fn=D.top*yt,tn=D.bottom*yt;return U==="height"||U==="both"?(ar=ct[1]+fn-rt[0],br=ct[1]+tn+rt[2]):(ar=ct[1]+(fn+tn-Et.displaySize[1])/2,br=ar+Et.displaySize[1]),{image:Et,top:ar,right:er,bottom:br,left:Ur,collisionPadding:Zt}}var Fc=function(R){function D(U,rt,ct,yt){R.call(this,U,rt),this.angle=ct,yt!==void 0&&(this.segment=yt)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.clone=function(){return new D(this.x,this.y,this.angle,this.segment)},D}(r);_t("Anchor",Fc);var ou=128;function qv(R,D){var U=D.expression;if(U.kind==="constant"){var rt=U.evaluate(new Ma(R+1));return{kind:"constant",layoutSize:rt}}else{if(U.kind==="source")return{kind:"source"};for(var ct=U.zoomStops,yt=U.interpolationType,Et=0;Et<ct.length&&ct[Et]<=R;)Et++;Et=Math.max(0,Et-1);for(var Zt=Et;Zt<ct.length&&ct[Zt]<R+1;)Zt++;Zt=Math.min(ct.length-1,Zt);var ce=ct[Et],we=ct[Zt];if(U.kind==="composite")return{kind:"composite",minZoom:ce,maxZoom:we,interpolationType:yt};var Le=U.evaluate(new Ma(ce)),Ve=U.evaluate(new Ma(we));return{kind:"camera",minZoom:ce,maxZoom:we,minSize:Le,maxSize:Ve,interpolationType:yt}}}function i0(R,D,U){var rt=D.uSize,ct=D.uSizeT,yt=U.lowerSize,Et=U.upperSize;return R.kind==="source"?yt/ou:R.kind==="composite"?zi(yt/ou,Et/ou,ct):rt}function o0(R,D){var U=0,rt=0;if(R.kind==="constant")rt=R.layoutSize;else if(R.kind!=="source"){var ct=R.interpolationType,yt=R.minZoom,Et=R.maxZoom,Zt=ct?h(Bi.interpolationFactor(ct,D,yt,Et),0,1):0;R.kind==="camera"?rt=zi(R.minSize,R.maxSize,Zt):U=Zt}return{uSizeT:U,uSize:rt}}var By=Object.freeze({__proto__:null,getSizeData:qv,evaluateSizeForFeature:i0,evaluateSizeForZoom:o0,SIZE_PACK_FACTOR:ou});function s0(R,D,U,rt,ct){if(D.segment===void 0)return!0;for(var yt=D,Et=D.segment+1,Zt=0;Zt>-U/2;){if(Et--,Et<0)return!1;Zt-=R[Et].dist(yt),yt=R[Et]}Zt+=R[Et].dist(R[Et+1]),Et++;for(var ce=[],we=0;Zt<U/2;){var Le=R[Et-1],Ve=R[Et],ar=R[Et+1];if(!ar)return!1;var er=Le.angleTo(Ve)-Ve.angleTo(ar);for(er=Math.abs((er+3*Math.PI)%(Math.PI*2)-Math.PI),ce.push({distance:Zt,angleDelta:er}),we+=er;Zt-ce[0].distance>rt;)we-=ce.shift().angleDelta;if(we>ct)return!1;Et++,Zt+=Ve.dist(ar)}return!0}function l0(R){for(var D=0,U=0;U<R.length-1;U++)D+=R[U].dist(R[U+1]);return D}function u0(R,D,U){return R?.6*D*U:0}function f0(R,D){return Math.max(R?R.right-R.left:0,D?D.right-D.left:0)}function Ny(R,D,U,rt,ct,yt){for(var Et=u0(U,ct,yt),Zt=f0(U,rt)*yt,ce=0,we=l0(R)/2,Le=0;Le<R.length-1;Le++){var Ve=R[Le],ar=R[Le+1],er=Ve.dist(ar);if(ce+er>we){var br=(we-ce)/er,Ur=zi(Ve.x,ar.x,br),fn=zi(Ve.y,ar.y,br),tn=new Fc(Ur,fn,ar.angleTo(Ve),Le);return tn._round(),!Et||s0(R,tn,Zt,Et,D)?tn:void 0}ce+=er}}function Uy(R,D,U,rt,ct,yt,Et,Zt,ce){var we=u0(rt,yt,Et),Le=f0(rt,ct),Ve=Le*Et,ar=R[0].x===0||R[0].x===ce||R[0].y===0||R[0].y===ce;D-Ve<D/4&&(D=Ve+D/4);var er=yt*2,br=ar?D/2*Zt%D:(Le/2+er)*Et*Zt%D;return c0(R,br,D,we,U,Ve,ar,!1,ce)}function c0(R,D,U,rt,ct,yt,Et,Zt,ce){for(var we=yt/2,Le=l0(R),Ve=0,ar=D-U,er=[],br=0;br<R.length-1;br++){for(var Ur=R[br],fn=R[br+1],tn=Ur.dist(fn),Sn=fn.angleTo(Ur);ar+U<Ve+tn;){ar+=U;var xn=(ar-Ve)/tn,Mn=zi(Ur.x,fn.x,xn),_n=zi(Ur.y,fn.y,xn);if(Mn>=0&&Mn<ce&&_n>=0&&_n<ce&&ar-we>=0&&ar+we<=Le){var jn=new Fc(Mn,_n,Sn,br);jn._round(),(!rt||s0(R,jn,yt,rt,ct))&&er.push(jn)}}Ve+=tn}return!Zt&&!er.length&&!Et&&(er=c0(R,Ve/2,U,rt,ct,yt,Et,!0,ce)),er}function h0(R,D,U,rt,ct){for(var yt=[],Et=0;Et<R.length;Et++)for(var Zt=R[Et],ce=void 0,we=0;we<Zt.length-1;we++){var Le=Zt[we],Ve=Zt[we+1];Le.x<D&&Ve.x<D||(Le.x<D?Le=new r(D,Le.y+(Ve.y-Le.y)*((D-Le.x)/(Ve.x-Le.x)))._round():Ve.x<D&&(Ve=new r(D,Le.y+(Ve.y-Le.y)*((D-Le.x)/(Ve.x-Le.x)))._round()),!(Le.y<U&&Ve.y<U)&&(Le.y<U?Le=new r(Le.x+(Ve.x-Le.x)*((U-Le.y)/(Ve.y-Le.y)),U)._round():Ve.y<U&&(Ve=new r(Le.x+(Ve.x-Le.x)*((U-Le.y)/(Ve.y-Le.y)),U)._round()),!(Le.x>=rt&&Ve.x>=rt)&&(Le.x>=rt?Le=new r(rt,Le.y+(Ve.y-Le.y)*((rt-Le.x)/(Ve.x-Le.x)))._round():Ve.x>=rt&&(Ve=new r(rt,Le.y+(Ve.y-Le.y)*((rt-Le.x)/(Ve.x-Le.x)))._round()),!(Le.y>=ct&&Ve.y>=ct)&&(Le.y>=ct?Le=new r(Le.x+(Ve.x-Le.x)*((ct-Le.y)/(Ve.y-Le.y)),ct)._round():Ve.y>=ct&&(Ve=new r(Le.x+(Ve.x-Le.x)*((ct-Le.y)/(Ve.y-Le.y)),ct)._round()),(!ce||!Le.equals(ce[ce.length-1]))&&(ce=[Le],yt.push(ce)),ce.push(Ve)))))}return yt}var Oc=Es;function v0(R,D,U,rt){var ct=[],yt=R.image,Et=yt.pixelRatio,Zt=yt.paddedRect.w-2*Oc,ce=yt.paddedRect.h-2*Oc,we=R.right-R.left,Le=R.bottom-R.top,Ve=yt.stretchX||[[0,Zt]],ar=yt.stretchY||[[0,ce]],er=function(ci,ii){return ci+ii[1]-ii[0]},br=Ve.reduce(er,0),Ur=ar.reduce(er,0),fn=Zt-br,tn=ce-Ur,Sn=0,xn=br,Mn=0,_n=Ur,jn=0,sa=fn,na=0,Ta=tn;if(yt.content&&rt){var ya=yt.content;Sn=jh(Ve,0,ya[0]),Mn=jh(ar,0,ya[1]),xn=jh(Ve,ya[0],ya[2]),_n=jh(ar,ya[1],ya[3]),jn=ya[0]-Sn,na=ya[1]-Mn,sa=ya[2]-ya[0]-xn,Ta=ya[3]-ya[1]-_n}var ba=function(ci,ii,Ci,Pi){var Yi=Kh(ci.stretch-Sn,xn,we,R.left),Ji=Jh(ci.fixed-jn,sa,ci.stretch,br),To=Kh(ii.stretch-Mn,_n,Le,R.top),co=Jh(ii.fixed-na,Ta,ii.stretch,Ur),No=Kh(Ci.stretch-Sn,xn,we,R.left),Uo=Jh(Ci.fixed-jn,sa,Ci.stretch,br),Ao=Kh(Pi.stretch-Mn,_n,Le,R.top),$o=Jh(Pi.fixed-na,Ta,Pi.stretch,Ur),qo=new r(Yi,To),yo=new r(No,To),ts=new r(No,Ao),Vs=new r(Yi,Ao),rf=new r(Ji/Et,co/Et),Nf=new r(Uo/Et,$o/Et),Uf=D*Math.PI/180;if(Uf){var Vf=Math.sin(Uf),Yc=Math.cos(Uf),Pl=[Yc,-Vf,Vf,Yc];qo._matMult(Pl),yo._matMult(Pl),Vs._matMult(Pl),ts._matMult(Pl)}var rv=ci.stretch+ci.fixed,sd=Ci.stretch+Ci.fixed,nv=ii.stretch+ii.fixed,ld=Pi.stretch+Pi.fixed,nl={x:yt.paddedRect.x+Oc+rv,y:yt.paddedRect.y+Oc+nv,w:sd-rv,h:ld-nv},Xc=sa/Et/we,av=Ta/Et/Le;return{tl:qo,tr:yo,bl:Vs,br:ts,tex:nl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:rf,pixelOffsetBR:Nf,minFontScaleX:Xc,minFontScaleY:av,isSDF:U}};if(!rt||!yt.stretchX&&!yt.stretchY)ct.push(ba({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Zt+1},{fixed:0,stretch:ce+1}));else for(var Ua=d0(Ve,fn,br),Aa=d0(ar,tn,Ur),Ca=0;Ca<Ua.length-1;Ca++)for(var Xa=Ua[Ca],Ba=Ua[Ca+1],ui=0;ui<Aa.length-1;ui++){var Ai=Aa[ui],fi=Aa[ui+1];ct.push(ba(Xa,Ai,Ba,fi))}return ct}function jh(R,D,U){for(var rt=0,ct=0,yt=R;ct<yt.length;ct+=1){var Et=yt[ct];rt+=Math.max(D,Math.min(U,Et[1]))-Math.max(D,Math.min(U,Et[0]))}return rt}function d0(R,D,U){for(var rt=[{fixed:-Oc,stretch:0}],ct=0,yt=R;ct<yt.length;ct+=1){var Et=yt[ct],Zt=Et[0],ce=Et[1],we=rt[rt.length-1];rt.push({fixed:Zt-we.stretch,stretch:we.stretch}),rt.push({fixed:Zt-we.stretch,stretch:we.stretch+(ce-Zt)})}return rt.push({fixed:D+Oc,stretch:U}),rt}function Kh(R,D,U,rt){return R/D*U+rt}function Jh(R,D,U,rt){return R-D*U/rt}function Vy(R,D,U,rt,ct,yt,Et,Zt){for(var ce=rt.layout.get("text-rotate").evaluate(yt,{})*Math.PI/180,we=[],Le=0,Ve=D.positionedLines;Le<Ve.length;Le+=1)for(var ar=Ve[Le],er=0,br=ar.positionedGlyphs;er<br.length;er+=1){var Ur=br[er];if(Ur.rect){var fn=Ur.rect||{},tn=1,Sn=Jd+tn,xn=!0,Mn=1,_n=0,jn=(ct||Zt)&&Ur.vertical,sa=Ur.metrics.advance*Ur.scale/2;if(Zt&&D.verticalizable){var na=(Ur.scale-1)*Ro,Ta=(Ro-Ur.metrics.width*Ur.scale)/2;_n=ar.lineOffset/2-(Ur.imageName?-Ta:na)}if(Ur.imageName){var ya=Et[Ur.imageName];xn=ya.sdf,Mn=ya.pixelRatio,Sn=Es/Mn}var ba=ct?[Ur.x+sa,Ur.y]:[0,0],Ua=ct?[0,0]:[Ur.x+sa+U[0],Ur.y+U[1]-_n],Aa=[0,0];jn&&(Aa=Ua,Ua=[0,0]);var Ca=(Ur.metrics.left-Sn)*Ur.scale-sa+Ua[0],Xa=(-Ur.metrics.top-Sn)*Ur.scale+Ua[1],Ba=Ca+fn.w*Ur.scale/Mn,ui=Xa+fn.h*Ur.scale/Mn,Ai=new r(Ca,Xa),fi=new r(Ba,Xa),ci=new r(Ca,ui),ii=new r(Ba,ui);if(jn){var Ci=new r(-sa,sa-mh),Pi=-Math.PI/2,Yi=Ro/2-sa,Ji=Ur.imageName?Yi:0,To=new r(5-mh-Yi,-Ji),co=new(Function.prototype.bind.apply(r,[null].concat(Aa)));Ai._rotateAround(Pi,Ci)._add(To)._add(co),fi._rotateAround(Pi,Ci)._add(To)._add(co),ci._rotateAround(Pi,Ci)._add(To)._add(co),ii._rotateAround(Pi,Ci)._add(To)._add(co)}if(ce){var No=Math.sin(ce),Uo=Math.cos(ce),Ao=[Uo,-No,No,Uo];Ai._matMult(Ao),fi._matMult(Ao),ci._matMult(Ao),ii._matMult(Ao)}var $o=new r(0,0),qo=new r(0,0),yo=0,ts=0;we.push({tl:Ai,tr:fi,bl:ci,br:ii,tex:fn,writingMode:D.writingMode,glyphOffset:ba,sectionIndex:Ur.sectionIndex,isSDF:xn,pixelOffsetTL:$o,pixelOffsetBR:qo,minFontScaleX:yo,minFontScaleY:ts})}}return we}var Qh=function(D,U,rt,ct,yt,Et,Zt,ce,we,Le){if(this.boxStartIndex=D.length,we){var Ve=Et.top,ar=Et.bottom,er=Et.collisionPadding;er&&(Ve-=er[1],ar+=er[3]);var br=ar-Ve;br>0&&(br=Math.max(10,br),this.circleDiameter=br)}else{var Ur=Et.top*Zt-ce,fn=Et.bottom*Zt+ce,tn=Et.left*Zt-ce,Sn=Et.right*Zt+ce,xn=Et.collisionPadding;if(xn&&(tn-=xn[0]*Zt,Ur-=xn[1]*Zt,Sn+=xn[2]*Zt,fn+=xn[3]*Zt),Le){var Mn=new r(tn,Ur),_n=new r(Sn,Ur),jn=new r(tn,fn),sa=new r(Sn,fn),na=Le*Math.PI/180;Mn._rotate(na),_n._rotate(na),jn._rotate(na),sa._rotate(na),tn=Math.min(Mn.x,_n.x,jn.x,sa.x),Sn=Math.max(Mn.x,_n.x,jn.x,sa.x),Ur=Math.min(Mn.y,_n.y,jn.y,sa.y),fn=Math.max(Mn.y,_n.y,jn.y,sa.y)}D.emplaceBack(U.x,U.y,tn,Ur,Sn,fn,rt,ct,yt)}this.boxEndIndex=D.length},Bc=function(D,U){if(D===void 0&&(D=[]),U===void 0&&(U=Hy),this.data=D,this.length=this.data.length,this.compare=U,this.length>0)for(var rt=(this.length>>1)-1;rt>=0;rt--)this._down(rt)};Bc.prototype.push=function(D){this.data.push(D),this.length++,this._up(this.length-1)},Bc.prototype.pop=function(){if(this.length!==0){var D=this.data[0],U=this.data.pop();return this.length--,this.length>0&&(this.data[0]=U,this._down(0)),D}},Bc.prototype.peek=function(){return this.data[0]},Bc.prototype._up=function(D){for(var U=this,rt=U.data,ct=U.compare,yt=rt[D];D>0;){var Et=D-1>>1,Zt=rt[Et];if(ct(yt,Zt)>=0)break;rt[D]=Zt,D=Et}rt[D]=yt},Bc.prototype._down=function(D){for(var U=this,rt=U.data,ct=U.compare,yt=this.length>>1,Et=rt[D];D<yt;){var Zt=(D<<1)+1,ce=rt[Zt],we=Zt+1;if(we<this.length&&ct(rt[we],ce)<0&&(Zt=we,ce=rt[we]),ct(ce,Et)>=0)break;rt[D]=ce,D=Zt}rt[D]=Et};function Hy(R,D){return R<D?-1:R>D?1:0}function Gy(R,D,U){U===void 0&&(U=!1);for(var rt=1/0,ct=1/0,yt=-1/0,Et=-1/0,Zt=R[0],ce=0;ce<Zt.length;ce++){var we=Zt[ce];(!ce||we.x<rt)&&(rt=we.x),(!ce||we.y<ct)&&(ct=we.y),(!ce||we.x>yt)&&(yt=we.x),(!ce||we.y>Et)&&(Et=we.y)}var Le=yt-rt,Ve=Et-ct,ar=Math.min(Le,Ve),er=ar/2,br=new Bc([],Wy);if(ar===0)return new r(rt,ct);for(var Ur=rt;Ur<yt;Ur+=ar)for(var fn=ct;fn<Et;fn+=ar)br.push(new Nc(Ur+er,fn+er,er,R));for(var tn=Xy(R),Sn=br.length;br.length;){var xn=br.pop();(xn.d>tn.d||!tn.d)&&(tn=xn,U&&console.log("found best %d after %d probes",Math.round(1e4*xn.d)/1e4,Sn)),!(xn.max-tn.d<=D)&&(er=xn.h/2,br.push(new Nc(xn.p.x-er,xn.p.y-er,er,R)),br.push(new Nc(xn.p.x+er,xn.p.y-er,er,R)),br.push(new Nc(xn.p.x-er,xn.p.y+er,er,R)),br.push(new Nc(xn.p.x+er,xn.p.y+er,er,R)),Sn+=4)}return U&&(console.log("num probes: "+Sn),console.log("best distance: "+tn.d)),tn.p}function Wy(R,D){return D.max-R.max}function Nc(R,D,U,rt){this.p=new r(R,D),this.h=U,this.d=Yy(this.p,rt),this.max=this.d+this.h*Math.SQRT2}function Yy(R,D){for(var U=!1,rt=1/0,ct=0;ct<D.length;ct++)for(var yt=D[ct],Et=0,Zt=yt.length,ce=Zt-1;Et<Zt;ce=Et++){var we=yt[Et],Le=yt[ce];we.y>R.y!=Le.y>R.y&&R.x<(Le.x-we.x)*(R.y-we.y)/(Le.y-we.y)+we.x&&(U=!U),rt=Math.min(rt,$u(R,we,Le))}return(U?1:-1)*Math.sqrt(rt)}function Xy(R){for(var D=0,U=0,rt=0,ct=R[0],yt=0,Et=ct.length,Zt=Et-1;yt<Et;Zt=yt++){var ce=ct[yt],we=ct[Zt],Le=ce.x*we.y-we.x*ce.y;U+=(ce.x+we.x)*Le,rt+=(ce.y+we.y)*Le,D+=Le*3}return new Nc(U/D,rt/D,0,R)}var Uc=7,td=Number.POSITIVE_INFINITY;function p0(R,D){function U(ct,yt){var Et=0,Zt=0;yt<0&&(yt=0);var ce=yt/Math.sqrt(2);switch(ct){case"top-right":case"top-left":Zt=ce-Uc;break;case"bottom-right":case"bottom-left":Zt=-ce+Uc;break;case"bottom":Zt=-yt+Uc;break;case"top":Zt=yt-Uc;break}switch(ct){case"top-right":case"bottom-right":Et=-ce;break;case"top-left":case"bottom-left":Et=ce;break;case"left":Et=yt;break;case"right":Et=-yt;break}return[Et,Zt]}function rt(ct,yt,Et){var Zt=0,ce=0;switch(yt=Math.abs(yt),Et=Math.abs(Et),ct){case"top-right":case"top-left":case"top":ce=Et-Uc;break;case"bottom-right":case"bottom-left":case"bottom":ce=-Et+Uc;break}switch(ct){case"top-right":case"bottom-right":case"right":Zt=-yt;break;case"top-left":case"bottom-left":case"left":Zt=yt;break}return[Zt,ce]}return D[1]!==td?rt(R,D[0],D[1]):U(R,D[0])}function Zy(R,D,U,rt,ct,yt,Et){R.createArrays();var Zt=512*R.overscaling;R.tilePixelRatio=Sa/Zt,R.compareText={},R.iconsNeedLinear=!1;var ce=R.layers[0].layout,we=R.layers[0]._unevaluatedLayout._values,Le={};if(R.textSizeData.kind==="composite"){var Ve=R.textSizeData,ar=Ve.minZoom,er=Ve.maxZoom;Le.compositeTextSizes=[we["text-size"].possiblyEvaluate(new Ma(ar),Et),we["text-size"].possiblyEvaluate(new Ma(er),Et)]}if(R.iconSizeData.kind==="composite"){var br=R.iconSizeData,Ur=br.minZoom,fn=br.maxZoom;Le.compositeIconSizes=[we["icon-size"].possiblyEvaluate(new Ma(Ur),Et),we["icon-size"].possiblyEvaluate(new Ma(fn),Et)]}Le.layoutTextSize=we["text-size"].possiblyEvaluate(new Ma(R.zoom+1),Et),Le.layoutIconSize=we["icon-size"].possiblyEvaluate(new Ma(R.zoom+1),Et),Le.textMaxSize=we["text-size"].possiblyEvaluate(new Ma(18));for(var tn=ce.get("text-line-height")*Ro,Sn=ce.get("text-rotation-alignment")==="map"&&ce.get("symbol-placement")!=="point",xn=ce.get("text-keep-upright"),Mn=ce.get("text-size"),_n=function(){var na=sa[jn],Ta=ce.get("text-font").evaluate(na,{},Et).join(","),ya=Mn.evaluate(na,{},Et),ba=Le.layoutTextSize.evaluate(na,{},Et),Ua=Le.layoutIconSize.evaluate(na,{},Et),Aa={horizontal:{},vertical:void 0},Ca=na.text,Xa=[0,0];if(Ca){var Ba=Ca.toString(),ui=ce.get("text-letter-spacing").evaluate(na,{},Et)*Ro,Ai=Rr(Ba)?ui:0,fi=ce.get("text-anchor").evaluate(na,{},Et),ci=ce.get("text-variable-anchor");if(!ci){var ii=ce.get("text-radial-offset").evaluate(na,{},Et);ii?Xa=p0(fi,[ii*Ro,td]):Xa=ce.get("text-offset").evaluate(na,{},Et).map(function(rf){return rf*Ro})}var Ci=Sn?"center":ce.get("text-justify").evaluate(na,{},Et),Pi=ce.get("symbol-placement"),Yi=Pi==="point"?ce.get("text-max-width").evaluate(na,{},Et)*Ro:0,Ji=function(){R.allowVerticalPlacement&&nr(Ba)&&(Aa.vertical=Zh(Ca,D,U,ct,Ta,Yi,tn,fi,"left",Ai,Xa,Us.vertical,!0,Pi,ba,ya))};if(!Sn&&ci){for(var To=Ci==="auto"?ci.map(function(rf){return ed(rf)}):[Ci],co=!1,No=0;No<To.length;No++){var Uo=To[No];if(!Aa.horizontal[Uo])if(co)Aa.horizontal[Uo]=Aa.horizontal[0];else{var Ao=Zh(Ca,D,U,ct,Ta,Yi,tn,"center",Uo,Ai,Xa,Us.horizontal,!1,Pi,ba,ya);Ao&&(Aa.horizontal[Uo]=Ao,co=Ao.positionedLines.length===1)}}Ji()}else{Ci==="auto"&&(Ci=ed(fi));var $o=Zh(Ca,D,U,ct,Ta,Yi,tn,fi,Ci,Ai,Xa,Us.horizontal,!1,Pi,ba,ya);$o&&(Aa.horizontal[Ci]=$o),Ji(),nr(Ba)&&Sn&&xn&&(Aa.vertical=Zh(Ca,D,U,ct,Ta,Yi,tn,fi,Ci,Ai,Xa,Us.vertical,!1,Pi,ba,ya))}}var qo=void 0,yo=!1;if(na.icon&&na.icon.name){var ts=rt[na.icon.name];ts&&(qo=Oy(ct[na.icon.name],ce.get("icon-offset").evaluate(na,{},Et),ce.get("icon-anchor").evaluate(na,{},Et)),yo=ts.sdf,R.sdfIcons===void 0?R.sdfIcons=ts.sdf:R.sdfIcons!==ts.sdf&&F("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ts.pixelRatio!==R.pixelRatio||ce.get("icon-rotate").constantOr(1)!==0)&&(R.iconsNeedLinear=!0))}var Vs=y0(Aa.horizontal)||Aa.vertical;R.iconsInText=Vs?Vs.iconsInText:!1,(Vs||qo)&&jy(R,na,Aa,qo,rt,Le,ba,Ua,Xa,yo,Et)},jn=0,sa=R.features;jn<sa.length;jn+=1)_n();yt&&R.generateCollisionDebugBuffers()}function ed(R){switch(R){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function jy(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le){var Ve=yt.textMaxSize.evaluate(D,{});Ve===void 0&&(Ve=Et);var ar=R.layers[0].layout,er=ar.get("icon-offset").evaluate(D,{},Le),br=y0(U.horizontal),Ur=24,fn=Et/Ur,tn=R.tilePixelRatio*fn,Sn=R.tilePixelRatio*Ve/Ur,xn=R.tilePixelRatio*Zt,Mn=R.tilePixelRatio*ar.get("symbol-spacing"),_n=ar.get("text-padding")*R.tilePixelRatio,jn=ar.get("icon-padding")*R.tilePixelRatio,sa=ar.get("text-max-angle")/180*Math.PI,na=ar.get("text-rotation-alignment")==="map"&&ar.get("symbol-placement")!=="point",Ta=ar.get("icon-rotation-alignment")==="map"&&ar.get("symbol-placement")!=="point",ya=ar.get("symbol-placement"),ba=Mn/2,Ua=ar.get("icon-text-fit"),Aa;rt&&Ua!=="none"&&(R.allowVerticalPlacement&&U.vertical&&(Aa=a0(rt,U.vertical,Ua,ar.get("icon-text-fit-padding"),er,fn)),br&&(rt=a0(rt,br,Ua,ar.get("icon-text-fit-padding"),er,fn)));var Ca=function(Yc,Pl){Pl.x<0||Pl.x>=Sa||Pl.y<0||Pl.y>=Sa||Ky(R,Pl,Yc,U,rt,ct,Aa,R.layers[0],R.collisionBoxArray,D.index,D.sourceLayerIndex,R.index,tn,_n,na,ce,xn,jn,Ta,er,D,yt,we,Le,Et)};if(ya==="line")for(var Xa=0,Ba=h0(D.geometry,0,0,Sa,Sa);Xa<Ba.length;Xa+=1)for(var ui=Ba[Xa],Ai=Uy(ui,Mn,sa,U.vertical||br,rt,Ur,Sn,R.overscaling,Sa),fi=0,ci=Ai;fi<ci.length;fi+=1){var ii=ci[fi],Ci=br;(!Ci||!Jy(R,Ci.text,ba,ii))&&Ca(ui,ii)}else if(ya==="line-center")for(var Pi=0,Yi=D.geometry;Pi<Yi.length;Pi+=1){var Ji=Yi[Pi];if(Ji.length>1){var To=Ny(Ji,sa,U.vertical||br,rt,Ur,Sn);To&&Ca(Ji,To)}}else if(D.type==="Polygon")for(var co=0,No=Yv(D.geometry,0);co<No.length;co+=1){var Uo=No[co],Ao=Gy(Uo,16);Ca(Uo[0],new Fc(Ao.x,Ao.y,0))}else if(D.type==="LineString")for(var $o=0,qo=D.geometry;$o<qo.length;$o+=1){var yo=qo[$o];Ca(yo,new Fc(yo[0].x,yo[0].y,0))}else if(D.type==="Point")for(var ts=0,Vs=D.geometry;ts<Vs.length;ts+=1)for(var rf=Vs[ts],Nf=0,Uf=rf;Nf<Uf.length;Nf+=1){var Vf=Uf[Nf];Ca([Vf],new Fc(Vf.x,Vf.y,0))}}var xh=255,Of=xh*ou;function g0(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br){var Ur=Vy(D,U,Zt,ct,yt,Et,rt,R.allowVerticalPlacement),fn=R.textSizeData,tn=null;fn.kind==="source"?(tn=[ou*ct.layout.get("text-size").evaluate(Et,{})],tn[0]>Of&&F(R.layerIds[0]+': Value for "text-size" is >= '+xh+'. Reduce your "text-size".')):fn.kind==="composite"&&(tn=[ou*er.compositeTextSizes[0].evaluate(Et,{},br),ou*er.compositeTextSizes[1].evaluate(Et,{},br)],(tn[0]>Of||tn[1]>Of)&&F(R.layerIds[0]+': Value for "text-size" is >= '+xh+'. Reduce your "text-size".')),R.addSymbols(R.text,Ur,tn,Zt,yt,Et,we,D,ce.lineStartIndex,ce.lineLength,ar,br);for(var Sn=0,xn=Le;Sn<xn.length;Sn+=1){var Mn=xn[Sn];Ve[Mn]=R.text.placedSymbolArray.length-1}return Ur.length*4}function y0(R){for(var D in R)return R[D];return null}function Ky(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar,er,br,Ur,fn,tn,Sn,xn,Mn,_n,jn,sa,na){var Ta,ya=R.addToLineVertexArray(D,U),ba,Ua,Aa,Ca,Xa=0,Ba=0,ui=0,Ai=0,fi=-1,ci=-1,ii={},Ci=vt(""),Pi=0,Yi=0;if(Zt._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ta=Zt.layout.get("text-offset").evaluate(Mn,{},sa).map(function(Th){return Th*Ro}),Pi=Ta[0],Yi=Ta[1]):(Pi=Zt.layout.get("text-radial-offset").evaluate(Mn,{},sa)*Ro,Yi=td),R.allowVerticalPlacement&&rt.vertical){var Ji=Zt.layout.get("text-rotate").evaluate(Mn,{},sa),To=Ji+90,co=rt.vertical;Aa=new Qh(ce,D,we,Le,Ve,co,ar,er,br,To),Et&&(Ca=new Qh(ce,D,we,Le,Ve,Et,fn,tn,br,To))}if(ct){var No=Zt.layout.get("icon-rotate").evaluate(Mn,{}),Uo=Zt.layout.get("icon-text-fit")!=="none",Ao=v0(ct,No,jn,Uo),$o=Et?v0(Et,No,jn,Uo):void 0;Ua=new Qh(ce,D,we,Le,Ve,ct,fn,tn,!1,No),Xa=Ao.length*4;var qo=R.iconSizeData,yo=null;qo.kind==="source"?(yo=[ou*Zt.layout.get("icon-size").evaluate(Mn,{})],yo[0]>Of&&F(R.layerIds[0]+': Value for "icon-size" is >= '+xh+'. Reduce your "icon-size".')):qo.kind==="composite"&&(yo=[ou*_n.compositeIconSizes[0].evaluate(Mn,{},sa),ou*_n.compositeIconSizes[1].evaluate(Mn,{},sa)],(yo[0]>Of||yo[1]>Of)&&F(R.layerIds[0]+': Value for "icon-size" is >= '+xh+'. Reduce your "icon-size".')),R.addSymbols(R.icon,Ao,yo,xn,Sn,Mn,!1,D,ya.lineStartIndex,ya.lineLength,-1,sa),fi=R.icon.placedSymbolArray.length-1,$o&&(Ba=$o.length*4,R.addSymbols(R.icon,$o,yo,xn,Sn,Mn,Us.vertical,D,ya.lineStartIndex,ya.lineLength,-1,sa),ci=R.icon.placedSymbolArray.length-1)}for(var ts in rt.horizontal){var Vs=rt.horizontal[ts];if(!ba){Ci=vt(Vs.text);var rf=Zt.layout.get("text-rotate").evaluate(Mn,{},sa);ba=new Qh(ce,D,we,Le,Ve,Vs,ar,er,br,rf)}var Nf=Vs.positionedLines.length===1;if(ui+=g0(R,D,Vs,yt,Zt,br,Mn,Ur,ya,rt.vertical?Us.horizontal:Us.horizontalOnly,Nf?Object.keys(rt.horizontal):[ts],ii,fi,_n,sa),Nf)break}rt.vertical&&(Ai+=g0(R,D,rt.vertical,yt,Zt,br,Mn,Ur,ya,Us.vertical,["vertical"],ii,ci,_n,sa));var Uf=ba?ba.boxStartIndex:R.collisionBoxArray.length,Vf=ba?ba.boxEndIndex:R.collisionBoxArray.length,Yc=Aa?Aa.boxStartIndex:R.collisionBoxArray.length,Pl=Aa?Aa.boxEndIndex:R.collisionBoxArray.length,rv=Ua?Ua.boxStartIndex:R.collisionBoxArray.length,sd=Ua?Ua.boxEndIndex:R.collisionBoxArray.length,nv=Ca?Ca.boxStartIndex:R.collisionBoxArray.length,ld=Ca?Ca.boxEndIndex:R.collisionBoxArray.length,nl=-1,Xc=function(Th,k0){return Th&&Th.circleDiameter?Math.max(Th.circleDiameter,k0):k0};nl=Xc(ba,nl),nl=Xc(Aa,nl),nl=Xc(Ua,nl),nl=Xc(Ca,nl);var av=nl>-1?1:0;av&&(nl*=na/Ro),R.glyphOffsetArray.length>=Ti.MAX_GLYPHS&&F("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Mn.sortKey!==void 0&&R.addToSortKeyRanges(R.symbolInstances.length,Mn.sortKey),R.symbolInstances.emplaceBack(D.x,D.y,ii.right>=0?ii.right:-1,ii.center>=0?ii.center:-1,ii.left>=0?ii.left:-1,ii.vertical||-1,fi,ci,Ci,Uf,Vf,Yc,Pl,rv,sd,nv,ld,we,ui,Ai,Xa,Ba,av,0,ar,Pi,Yi,nl)}function Jy(R,D,U,rt){var ct=R.compareText;if(!(D in ct))ct[D]=[];else for(var yt=ct[D],Et=yt.length-1;Et>=0;Et--)if(rt.dist(yt[Et])<U)return!0;return ct[D].push(rt),!1}var Qy=Ic.VectorTileFeature.types,$y=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function $h(R,D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar){var er=Zt?Math.min(Of,Math.round(Zt[0])):0,br=Zt?Math.min(Of,Math.round(Zt[1])):0;R.emplaceBack(D,U,Math.round(rt*32),Math.round(ct*32),yt,Et,(er<<1)+(ce?1:0),br,we*16,Le*16,Ve*256,ar*256)}function rd(R,D,U){R.emplaceBack(D.x,D.y,U),R.emplaceBack(D.x,D.y,U),R.emplaceBack(D.x,D.y,U),R.emplaceBack(D.x,D.y,U)}function qy(R){for(var D=0,U=R.sections;D<U.length;D+=1){var rt=U[D];if(qr(rt.text))return!0}return!1}var Vc=function(D){this.layoutVertexArray=new Eu,this.indexArray=new ru,this.programConfigurations=D,this.segments=new so,this.dynamicLayoutVertexArray=new rh,this.opacityVertexArray=new nh,this.placedSymbolArray=new oh};Vc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Vc.prototype.upload=function(D,U,rt,ct){this.isEmpty()||(rt&&(this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,qg.members),this.indexBuffer=D.createIndexBuffer(this.indexArray,U),this.dynamicLayoutVertexBuffer=D.createVertexBuffer(this.dynamicLayoutVertexArray,ty.members,!0),this.opacityVertexBuffer=D.createVertexBuffer(this.opacityVertexArray,$y,!0),this.opacityVertexBuffer.itemSize=1),(rt||ct)&&this.programConfigurations.upload(D))},Vc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},_t("SymbolBuffers",Vc);var bh=function(D,U,rt){this.layoutVertexArray=new D,this.layoutAttributes=U,this.indexArray=new rt,this.segments=new so,this.collisionVertexArray=new us};bh.prototype.upload=function(D){this.layoutVertexBuffer=D.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=D.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=D.createVertexBuffer(this.collisionVertexArray,ey.members,!0)},bh.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},_t("CollisionBuffers",bh);var Ti=function(D){this.collisionBoxArray=D.collisionBoxArray,this.zoom=D.zoom,this.overscaling=D.overscaling,this.layers=D.layers,this.layerIds=this.layers.map(function(ce){return ce.id}),this.index=D.index,this.pixelRatio=D.pixelRatio,this.sourceLayerIndex=D.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Cc([]),this.placementViewportMatrix=Cc([]);var U=this.layers[0],rt=U._unevaluatedLayout._values;this.textSizeData=qv(this.zoom,rt["text-size"]),this.iconSizeData=qv(this.zoom,rt["icon-size"]);var ct=this.layers[0].layout,yt=ct.get("symbol-sort-key"),Et=ct.get("symbol-z-order");this.canOverlap=ct.get("text-allow-overlap")||ct.get("icon-allow-overlap")||ct.get("text-ignore-placement")||ct.get("icon-ignore-placement"),this.sortFeaturesByKey=Et!=="viewport-y"&&yt.constantOr(1)!==void 0;var Zt=Et==="viewport-y"||Et==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Zt&&this.canOverlap,ct.get("symbol-placement")==="point"&&(this.writingModes=ct.get("text-writing-mode").map(function(ce){return Us[ce]})),this.stateDependentLayerIds=this.layers.filter(function(ce){return ce.isStateDependent()}).map(function(ce){return ce.id}),this.sourceID=D.sourceID};Ti.prototype.createArrays=function(){this.text=new Vc(new ga(this.layers,this.zoom,function(D){return/^text/.test(D)})),this.icon=new Vc(new ga(this.layers,this.zoom,function(D){return/^icon/.test(D)})),this.glyphOffsetArray=new zh,this.lineVertexArray=new qs,this.symbolInstances=new kh},Ti.prototype.calculateGlyphDependencies=function(D,U,rt,ct,yt){for(var Et=0;Et<D.length;Et++)if(U[D.charCodeAt(Et)]=!0,(rt||ct)&&yt){var Zt=ph[D.charAt(Et)];Zt&&(U[Zt.charCodeAt(0)]=!0)}},Ti.prototype.populate=function(D,U,rt){var ct=this.layers[0],yt=ct.layout,Et=yt.get("text-font"),Zt=yt.get("text-field"),ce=yt.get("icon-image"),we=(Zt.value.kind!=="constant"||Zt.value.value instanceof Qi&&!Zt.value.value.isEmpty()||Zt.value.value.toString().length>0)&&(Et.value.kind!=="constant"||Et.value.value.length>0),Le=ce.value.kind!=="constant"||!!ce.value.value||Object.keys(ce.parameters).length>0,Ve=yt.get("symbol-sort-key");if(this.features=[],!(!we&&!Le)){for(var ar=U.iconDependencies,er=U.glyphDependencies,br=U.availableImages,Ur=new Ma(this.zoom),fn=0,tn=D;fn<tn.length;fn+=1){var Sn=tn[fn],xn=Sn.feature,Mn=Sn.id,_n=Sn.index,jn=Sn.sourceLayerIndex,sa=ct._featureFilter.needGeometry,na=Ei(xn,sa);if(ct._featureFilter.filter(Ur,na,rt)){sa||(na.geometry=ai(xn));var Ta=void 0;if(we){var ya=ct.getValueAndResolveTokens("text-field",na,rt,br),ba=Qi.factory(ya);qy(ba)&&(this.hasRTLText=!0),(!this.hasRTLText||_a()==="unavailable"||this.hasRTLText&&ea.isParsed())&&(Ta=ay(ba,ct,na))}var Ua=void 0;if(Le){var Aa=ct.getValueAndResolveTokens("icon-image",na,rt,br);Aa instanceof mo?Ua=Aa:Ua=mo.fromString(Aa)}if(!(!Ta&&!Ua)){var Ca=this.sortFeaturesByKey?Ve.evaluate(na,{},rt):void 0,Xa={id:Mn,text:Ta,icon:Ua,index:_n,sourceLayerIndex:jn,geometry:na.geometry,properties:xn.properties,type:Qy[xn.type],sortKey:Ca};if(this.features.push(Xa),Ua&&(ar[Ua.name]=!0),Ta){var Ba=Et.evaluate(na,{},rt).join(","),ui=yt.get("text-rotation-alignment")==="map"&&yt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Us.vertical)>=0;for(var Ai=0,fi=Ta.sections;Ai<fi.length;Ai+=1){var ci=fi[Ai];if(ci.image)ar[ci.image.name]=!0;else{var ii=nr(Ta.toString()),Ci=ci.fontStack||Ba,Pi=er[Ci]=er[Ci]||{};this.calculateGlyphDependencies(ci.text,Pi,ui,this.allowVerticalPlacement,ii)}}}}}}yt.get("symbol-placement")==="line"&&(this.features=iy(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Yi,Ji){return Yi.sortKey-Ji.sortKey})}},Ti.prototype.update=function(D,U,rt){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(D,U,this.layers,rt),this.icon.programConfigurations.updatePaintArrays(D,U,this.layers,rt))},Ti.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ti.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ti.prototype.upload=function(D){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(D),this.iconCollisionBox.upload(D)),this.text.upload(D,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(D,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ti.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ti.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ti.prototype.addToLineVertexArray=function(D,U){var rt=this.lineVertexArray.length;if(D.segment!==void 0){for(var ct=D.dist(U[D.segment+1]),yt=D.dist(U[D.segment]),Et={},Zt=D.segment+1;Zt<U.length;Zt++)Et[Zt]={x:U[Zt].x,y:U[Zt].y,tileUnitDistanceFromAnchor:ct},Zt<U.length-1&&(ct+=U[Zt+1].dist(U[Zt]));for(var ce=D.segment||0;ce>=0;ce--)Et[ce]={x:U[ce].x,y:U[ce].y,tileUnitDistanceFromAnchor:yt},ce>0&&(yt+=U[ce-1].dist(U[ce]));for(var we=0;we<U.length;we++){var Le=Et[we];this.lineVertexArray.emplaceBack(Le.x,Le.y,Le.tileUnitDistanceFromAnchor)}}return{lineStartIndex:rt,lineLength:this.lineVertexArray.length-rt}},Ti.prototype.addSymbols=function(D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve,ar){for(var er=D.indexArray,br=D.layoutVertexArray,Ur=D.segments.prepareSegment(4*U.length,br,er,this.canOverlap?Et.sortKey:void 0),fn=this.glyphOffsetArray.length,tn=Ur.vertexLength,Sn=this.allowVerticalPlacement&&Zt===Us.vertical?Math.PI/2:0,xn=Et.text&&Et.text.sections,Mn=0;Mn<U.length;Mn++){var _n=U[Mn],jn=_n.tl,sa=_n.tr,na=_n.bl,Ta=_n.br,ya=_n.tex,ba=_n.pixelOffsetTL,Ua=_n.pixelOffsetBR,Aa=_n.minFontScaleX,Ca=_n.minFontScaleY,Xa=_n.glyphOffset,Ba=_n.isSDF,ui=_n.sectionIndex,Ai=Ur.vertexLength,fi=Xa[1];$h(br,ce.x,ce.y,jn.x,fi+jn.y,ya.x,ya.y,rt,Ba,ba.x,ba.y,Aa,Ca),$h(br,ce.x,ce.y,sa.x,fi+sa.y,ya.x+ya.w,ya.y,rt,Ba,Ua.x,ba.y,Aa,Ca),$h(br,ce.x,ce.y,na.x,fi+na.y,ya.x,ya.y+ya.h,rt,Ba,ba.x,Ua.y,Aa,Ca),$h(br,ce.x,ce.y,Ta.x,fi+Ta.y,ya.x+ya.w,ya.y+ya.h,rt,Ba,Ua.x,Ua.y,Aa,Ca),rd(D.dynamicLayoutVertexArray,ce,Sn),er.emplaceBack(Ai,Ai+1,Ai+2),er.emplaceBack(Ai+1,Ai+2,Ai+3),Ur.vertexLength+=4,Ur.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Xa[0]),(Mn===U.length-1||ui!==U[Mn+1].sectionIndex)&&D.programConfigurations.populatePaintArrays(br.length,Et,Et.index,{},ar,xn&&xn[ui])}D.placedSymbolArray.emplaceBack(ce.x,ce.y,fn,this.glyphOffsetArray.length-fn,tn,we,Le,ce.segment,rt?rt[0]:0,rt?rt[1]:0,ct[0],ct[1],Zt,0,!1,0,Ve)},Ti.prototype._addCollisionDebugVertex=function(D,U,rt,ct,yt,Et){return U.emplaceBack(0,0),D.emplaceBack(rt.x,rt.y,ct,yt,Math.round(Et.x),Math.round(Et.y))},Ti.prototype.addCollisionDebugVertices=function(D,U,rt,ct,yt,Et,Zt){var ce=yt.segments.prepareSegment(4,yt.layoutVertexArray,yt.indexArray),we=ce.vertexLength,Le=yt.layoutVertexArray,Ve=yt.collisionVertexArray,ar=Zt.anchorX,er=Zt.anchorY;this._addCollisionDebugVertex(Le,Ve,Et,ar,er,new r(D,U)),this._addCollisionDebugVertex(Le,Ve,Et,ar,er,new r(rt,U)),this._addCollisionDebugVertex(Le,Ve,Et,ar,er,new r(rt,ct)),this._addCollisionDebugVertex(Le,Ve,Et,ar,er,new r(D,ct)),ce.vertexLength+=4;var br=yt.indexArray;br.emplaceBack(we,we+1),br.emplaceBack(we+1,we+2),br.emplaceBack(we+2,we+3),br.emplaceBack(we+3,we),ce.primitiveLength+=4},Ti.prototype.addDebugCollisionBoxes=function(D,U,rt,ct){for(var yt=D;yt<U;yt++){var Et=this.collisionBoxArray.get(yt),Zt=Et.x1,ce=Et.y1,we=Et.x2,Le=Et.y2;this.addCollisionDebugVertices(Zt,ce,we,Le,ct?this.textCollisionBox:this.iconCollisionBox,Et.anchorPoint,rt)}},Ti.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new bh(wc,Yd.members,vc),this.iconCollisionBox=new bh(wc,Yd.members,vc);for(var D=0;D<this.symbolInstances.length;D++){var U=this.symbolInstances.get(D);this.addDebugCollisionBoxes(U.textBoxStartIndex,U.textBoxEndIndex,U,!0),this.addDebugCollisionBoxes(U.verticalTextBoxStartIndex,U.verticalTextBoxEndIndex,U,!0),this.addDebugCollisionBoxes(U.iconBoxStartIndex,U.iconBoxEndIndex,U,!1),this.addDebugCollisionBoxes(U.verticalIconBoxStartIndex,U.verticalIconBoxEndIndex,U,!1)}},Ti.prototype._deserializeCollisionBoxesForSymbol=function(D,U,rt,ct,yt,Et,Zt,ce,we){for(var Le={},Ve=U;Ve<rt;Ve++){var ar=D.get(Ve);Le.textBox={x1:ar.x1,y1:ar.y1,x2:ar.x2,y2:ar.y2,anchorPointX:ar.anchorPointX,anchorPointY:ar.anchorPointY},Le.textFeatureIndex=ar.featureIndex;break}for(var er=ct;er<yt;er++){var br=D.get(er);Le.verticalTextBox={x1:br.x1,y1:br.y1,x2:br.x2,y2:br.y2,anchorPointX:br.anchorPointX,anchorPointY:br.anchorPointY},Le.verticalTextFeatureIndex=br.featureIndex;break}for(var Ur=Et;Ur<Zt;Ur++){var fn=D.get(Ur);Le.iconBox={x1:fn.x1,y1:fn.y1,x2:fn.x2,y2:fn.y2,anchorPointX:fn.anchorPointX,anchorPointY:fn.anchorPointY},Le.iconFeatureIndex=fn.featureIndex;break}for(var tn=ce;tn<we;tn++){var Sn=D.get(tn);Le.verticalIconBox={x1:Sn.x1,y1:Sn.y1,x2:Sn.x2,y2:Sn.y2,anchorPointX:Sn.anchorPointX,anchorPointY:Sn.anchorPointY},Le.verticalIconFeatureIndex=Sn.featureIndex;break}return Le},Ti.prototype.deserializeCollisionBoxes=function(D){this.collisionArrays=[];for(var U=0;U<this.symbolInstances.length;U++){var rt=this.symbolInstances.get(U);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(D,rt.textBoxStartIndex,rt.textBoxEndIndex,rt.verticalTextBoxStartIndex,rt.verticalTextBoxEndIndex,rt.iconBoxStartIndex,rt.iconBoxEndIndex,rt.verticalIconBoxStartIndex,rt.verticalIconBoxEndIndex))}},Ti.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ti.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ti.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ti.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ti.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ti.prototype.addIndicesForPlacedSymbol=function(D,U){for(var rt=D.placedSymbolArray.get(U),ct=rt.vertexStartIndex+rt.numGlyphs*4,yt=rt.vertexStartIndex;yt<ct;yt+=4)D.indexArray.emplaceBack(yt,yt+1,yt+2),D.indexArray.emplaceBack(yt+1,yt+2,yt+3)},Ti.prototype.getSortedSymbolIndexes=function(D){if(this.sortedAngle===D&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var U=Math.sin(D),rt=Math.cos(D),ct=[],yt=[],Et=[],Zt=0;Zt<this.symbolInstances.length;++Zt){Et.push(Zt);var ce=this.symbolInstances.get(Zt);ct.push(Math.round(U*ce.anchorX+rt*ce.anchorY)|0),yt.push(ce.featureIndex)}return Et.sort(function(we,Le){return ct[we]-ct[Le]||yt[Le]-yt[we]}),Et},Ti.prototype.addToSortKeyRanges=function(D,U){var rt=this.sortKeyRanges[this.sortKeyRanges.length-1];rt&&rt.sortKey===U?rt.symbolInstanceEnd=D+1:this.sortKeyRanges.push({sortKey:U,symbolInstanceStart:D,symbolInstanceEnd:D+1})},Ti.prototype.sortFeatures=function(D){var U=this;if(this.sortFeaturesByY&&this.sortedAngle!==D&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(D),this.sortedAngle=D,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var rt=0,ct=this.symbolInstanceIndexes;rt<ct.length;rt+=1){var yt=ct[rt],Et=this.symbolInstances.get(yt);this.featureSortOrder.push(Et.featureIndex),[Et.rightJustifiedTextSymbolIndex,Et.centerJustifiedTextSymbolIndex,Et.leftJustifiedTextSymbolIndex].forEach(function(Zt,ce,we){Zt>=0&&we.indexOf(Zt)===ce&&U.addIndicesForPlacedSymbol(U.text,Zt)}),Et.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Et.verticalPlacedTextSymbolIndex),Et.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Et.placedIconSymbolIndex),Et.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Et.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},_t("SymbolBucket",Ti,{omit:["layers","collisionBoxArray","features","compareText"]}),Ti.MAX_GLYPHS=65535,Ti.addDynamicAttributes=rd;function t1(R,D){return D.replace(/{([^{}]+)}/g,function(U,rt){return rt in R?String(R[rt]):""})}var e1=new vi({"symbol-placement":new ca(Mr.layout_symbol["symbol-placement"]),"symbol-spacing":new ca(Mr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ca(Mr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new La(Mr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ca(Mr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ca(Mr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ca(Mr.layout_symbol["icon-ignore-placement"]),"icon-optional":new ca(Mr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ca(Mr.layout_symbol["icon-rotation-alignment"]),"icon-size":new La(Mr.layout_symbol["icon-size"]),"icon-text-fit":new ca(Mr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ca(Mr.layout_symbol["icon-text-fit-padding"]),"icon-image":new La(Mr.layout_symbol["icon-image"]),"icon-rotate":new La(Mr.layout_symbol["icon-rotate"]),"icon-padding":new ca(Mr.layout_symbol["icon-padding"]),"icon-keep-upright":new ca(Mr.layout_symbol["icon-keep-upright"]),"icon-offset":new La(Mr.layout_symbol["icon-offset"]),"icon-anchor":new La(Mr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ca(Mr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ca(Mr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ca(Mr.layout_symbol["text-rotation-alignment"]),"text-field":new La(Mr.layout_symbol["text-field"]),"text-font":new La(Mr.layout_symbol["text-font"]),"text-size":new La(Mr.layout_symbol["text-size"]),"text-max-width":new La(Mr.layout_symbol["text-max-width"]),"text-line-height":new ca(Mr.layout_symbol["text-line-height"]),"text-letter-spacing":new La(Mr.layout_symbol["text-letter-spacing"]),"text-justify":new La(Mr.layout_symbol["text-justify"]),"text-radial-offset":new La(Mr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ca(Mr.layout_symbol["text-variable-anchor"]),"text-anchor":new La(Mr.layout_symbol["text-anchor"]),"text-max-angle":new ca(Mr.layout_symbol["text-max-angle"]),"text-writing-mode":new ca(Mr.layout_symbol["text-writing-mode"]),"text-rotate":new La(Mr.layout_symbol["text-rotate"]),"text-padding":new ca(Mr.layout_symbol["text-padding"]),"text-keep-upright":new ca(Mr.layout_symbol["text-keep-upright"]),"text-transform":new La(Mr.layout_symbol["text-transform"]),"text-offset":new La(Mr.layout_symbol["text-offset"]),"text-allow-overlap":new ca(Mr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ca(Mr.layout_symbol["text-ignore-placement"]),"text-optional":new ca(Mr.layout_symbol["text-optional"])}),r1=new vi({"icon-opacity":new La(Mr.paint_symbol["icon-opacity"]),"icon-color":new La(Mr.paint_symbol["icon-color"]),"icon-halo-color":new La(Mr.paint_symbol["icon-halo-color"]),"icon-halo-width":new La(Mr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new La(Mr.paint_symbol["icon-halo-blur"]),"icon-translate":new ca(Mr.paint_symbol["icon-translate"]),"icon-translate-anchor":new ca(Mr.paint_symbol["icon-translate-anchor"]),"text-opacity":new La(Mr.paint_symbol["text-opacity"]),"text-color":new La(Mr.paint_symbol["text-color"],{runtimeType:On,getOverride:function(R){return R.textColor},hasOverride:function(R){return!!R.textColor}}),"text-halo-color":new La(Mr.paint_symbol["text-halo-color"]),"text-halo-width":new La(Mr.paint_symbol["text-halo-width"]),"text-halo-blur":new La(Mr.paint_symbol["text-halo-blur"]),"text-translate":new ca(Mr.paint_symbol["text-translate"]),"text-translate-anchor":new ca(Mr.paint_symbol["text-translate-anchor"])}),nd={paint:r1,layout:e1},Hc=function(D){this.type=D.property.overrides?D.property.overrides.runtimeType:Gr,this.defaultValue=D};Hc.prototype.evaluate=function(D){if(D.formattedSection){var U=this.defaultValue.property.overrides;if(U&&U.hasOverride(D.formattedSection))return U.getOverride(D.formattedSection)}return D.feature&&D.featureState?this.defaultValue.evaluate(D.feature,D.featureState):this.defaultValue.property.specification.default},Hc.prototype.eachChild=function(D){if(!this.defaultValue.isConstant()){var U=this.defaultValue.value;D(U._styleExpression.expression)}},Hc.prototype.outputDefined=function(){return!1},Hc.prototype.serialize=function(){return null},_t("FormatSectionOverride",Hc,{omit:["defaultValue"]});var n1=function(R){function D(U){R.call(this,U,nd)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.recalculate=function(rt,ct){if(R.prototype.recalculate.call(this,rt,ct),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var yt=this.layout.get("text-writing-mode");if(yt){for(var Et=[],Zt=0,ce=yt;Zt<ce.length;Zt+=1){var we=ce[Zt];Et.indexOf(we)<0&&Et.push(we)}this.layout._values["text-writing-mode"]=Et}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},D.prototype.getValueAndResolveTokens=function(rt,ct,yt,Et){var Zt=this.layout.get(rt).evaluate(ct,{},yt,Et),ce=this._unevaluatedLayout._values[rt];return!ce.isDataDriven()&&!Zl(ce.value)&&Zt?t1(ct.properties,Zt):Zt},D.prototype.createBucket=function(rt){return new Ti(rt)},D.prototype.queryRadius=function(){return 0},D.prototype.queryIntersectsFeature=function(){return!1},D.prototype._setPaintOverrides=function(){for(var rt=0,ct=nd.paint.overridableProperties;rt<ct.length;rt+=1){var yt=ct[rt];if(D.hasPaintOverride(this.layout,yt)){var Et=this.paint.get(yt),Zt=new Hc(Et),ce=new zs(Zt,Et.property.specification),we=null;Et.value.kind==="constant"||Et.value.kind==="source"?we=new Zi("source",ce):we=new ss("composite",ce,Et.value.zoomStops,Et.value._interpolationType),this.paint._values[yt]=new Si(Et.property,we,Et.parameters)}}},D.prototype._handleOverridablePaintPropertyUpdate=function(rt,ct,yt){return!this.layout||ct.isDataDriven()||yt.isDataDriven()?!1:D.hasPaintOverride(this.layout,rt)},D.hasPaintOverride=function(rt,ct){var yt=rt.get("text-field"),Et=nd.paint.properties[ct],Zt=!1,ce=function(Ve){for(var ar=0,er=Ve;ar<er.length;ar+=1){var br=er[ar];if(Et.overrides&&Et.overrides.hasOverride(br)){Zt=!0;return}}};if(yt.value.kind==="constant"&&yt.value.value instanceof Qi)ce(yt.value.value.sections);else if(yt.value.kind==="source"){var we=function(Ve){if(!Zt)if(Ve instanceof Ui&&Oi(Ve.value)===ua){var ar=Ve.value;ce(ar.sections)}else Ve instanceof ao?ce(Ve.sections):Ve.eachChild(we)},Le=yt.value;Le._styleExpression&&we(Le._styleExpression.expression)}return Zt},D}(Gi),a1=new vi({"background-color":new ca(Mr.paint_background["background-color"]),"background-pattern":new _o(Mr.paint_background["background-pattern"]),"background-opacity":new ca(Mr.paint_background["background-opacity"])}),i1={paint:a1},o1=function(R){function D(U){R.call(this,U,i1)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D}(Gi),s1=new vi({"raster-opacity":new ca(Mr.paint_raster["raster-opacity"]),"raster-hue-rotate":new ca(Mr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ca(Mr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ca(Mr.paint_raster["raster-brightness-max"]),"raster-saturation":new ca(Mr.paint_raster["raster-saturation"]),"raster-contrast":new ca(Mr.paint_raster["raster-contrast"]),"raster-resampling":new ca(Mr.paint_raster["raster-resampling"]),"raster-fade-duration":new ca(Mr.paint_raster["raster-fade-duration"])}),l1={paint:s1},u1=function(R){function D(U){R.call(this,U,l1)}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D}(Gi);function f1(R){var D=[],U=R.id;return U===void 0&&D.push({message:"layers."+U+': missing required property "id"'}),R.render===void 0&&D.push({message:"layers."+U+': missing required method "render"'}),R.renderingMode&&R.renderingMode!=="2d"&&R.renderingMode!=="3d"&&D.push({message:"layers."+U+': property "renderingMode" must be either "2d" or "3d"'}),D}var c1=function(R){function D(U){R.call(this,U,{}),this.implementation=U}return R&&(D.__proto__=R),D.prototype=Object.create(R&&R.prototype),D.prototype.constructor=D,D.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},D.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},D.prototype.recalculate=function(){},D.prototype.updateTransitions=function(){},D.prototype.hasTransition=function(){},D.prototype.serialize=function(){},D.prototype.onAdd=function(rt){this.implementation.onAdd&&this.implementation.onAdd(rt,rt.painter.context.gl)},D.prototype.onRemove=function(rt){this.implementation.onRemove&&this.implementation.onRemove(rt,rt.painter.context.gl)},D}(Gi),h1={circle:_p,heatmap:Np,hillshade:Hp,fill:dg,"fill-extrusion":_g,line:Qg,symbol:n1,background:o1,raster:u1};function v1(R){return R.type==="custom"?new c1(R):new h1[R.type](R)}var m0=s.HTMLImageElement,x0=s.HTMLCanvasElement,b0=s.HTMLVideoElement,w0=s.ImageData,qh=s.ImageBitmap,yc=function(D,U,rt,ct){this.context=D,this.format=rt,this.texture=D.gl.createTexture(),this.update(U,ct)};yc.prototype.update=function(D,U,rt){var ct=D.width,yt=D.height,Et=(!this.size||this.size[0]!==ct||this.size[1]!==yt)&&!rt,Zt=this,ce=Zt.context,we=ce.gl;if(this.useMipmap=!!(U&&U.useMipmap),we.bindTexture(we.TEXTURE_2D,this.texture),ce.pixelStoreUnpackFlipY.set(!1),ce.pixelStoreUnpack.set(1),ce.pixelStoreUnpackPremultiplyAlpha.set(this.format===we.RGBA&&(!U||U.premultiply!==!1)),Et)this.size=[ct,yt],D instanceof m0||D instanceof x0||D instanceof b0||D instanceof w0||qh&&D instanceof qh?we.texImage2D(we.TEXTURE_2D,0,this.format,this.format,we.UNSIGNED_BYTE,D):we.texImage2D(we.TEXTURE_2D,0,this.format,ct,yt,0,this.format,we.UNSIGNED_BYTE,D.data);else{var Le=rt||{x:0,y:0},Ve=Le.x,ar=Le.y;D instanceof m0||D instanceof x0||D instanceof b0||D instanceof w0||qh&&D instanceof qh?we.texSubImage2D(we.TEXTURE_2D,0,Ve,ar,we.RGBA,we.UNSIGNED_BYTE,D):we.texSubImage2D(we.TEXTURE_2D,0,Ve,ar,ct,yt,we.RGBA,we.UNSIGNED_BYTE,D.data)}this.useMipmap&&this.isSizePowerOfTwo()&&we.generateMipmap(we.TEXTURE_2D)},yc.prototype.bind=function(D,U,rt){var ct=this,yt=ct.context,Et=yt.gl;Et.bindTexture(Et.TEXTURE_2D,this.texture),rt===Et.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(rt=Et.LINEAR),D!==this.filter&&(Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MAG_FILTER,D),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_MIN_FILTER,rt||D),this.filter=D),U!==this.wrap&&(Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_S,U),Et.texParameteri(Et.TEXTURE_2D,Et.TEXTURE_WRAP_T,U),this.wrap=U)},yc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},yc.prototype.destroy=function(){var D=this.context,U=D.gl;U.deleteTexture(this.texture),this.texture=null};var ad=function(D){var U=this;this._callback=D,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){U._triggered=!1,U._callback()})};ad.prototype.trigger=function(){var D=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){D._triggered=!1,D._callback()},0))},ad.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Gc=function(D,U,rt){this.target=D,this.parent=U,this.mapId=rt,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},E(["receive","process"],this),this.invoker=new ad(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?D:s};Gc.prototype.send=function(D,U,rt,ct,yt){var Et=this;yt===void 0&&(yt=!1);var Zt=Math.round(Math.random()*1e18).toString(36).substring(0,10);rt&&(this.callbacks[Zt]=rt);var ce=ot(this.globalScope)?void 0:[];return this.target.postMessage({id:Zt,type:D,hasCallback:!!rt,targetMapId:ct,mustQueue:yt,sourceMapId:this.mapId,data:Ce(U,ce)},ce),{cancel:function(){rt&&delete Et.callbacks[Zt],Et.target.postMessage({id:Zt,type:"<cancel>",targetMapId:ct,sourceMapId:Et.mapId})}}},Gc.prototype.receive=function(D){var U=D.data,rt=U.id;if(rt&&!(U.targetMapId&&this.mapId!==U.targetMapId))if(U.type==="<cancel>"){delete this.tasks[rt];var ct=this.cancelCallbacks[rt];delete this.cancelCallbacks[rt],ct&&ct()}else X()||U.mustQueue?(this.tasks[rt]=U,this.taskQueue.push(rt),this.invoker.trigger()):this.processTask(rt,U)},Gc.prototype.process=function(){if(this.taskQueue.length){var D=this.taskQueue.shift(),U=this.tasks[D];delete this.tasks[D],this.taskQueue.length&&this.invoker.trigger(),U&&this.processTask(D,U)}},Gc.prototype.processTask=function(D,U){var rt=this;if(U.type==="<response>"){var ct=this.callbacks[D];delete this.callbacks[D],ct&&(U.error?ct(be(U.error)):ct(null,be(U.data)))}else{var yt=!1,Et=ot(this.globalScope)?void 0:[],Zt=U.hasCallback?function(ar,er){yt=!0,delete rt.cancelCallbacks[D],rt.target.postMessage({id:D,type:"<response>",sourceMapId:rt.mapId,error:ar?Ce(ar):null,data:Ce(er,Et)},Et)}:function(ar){yt=!0},ce=null,we=be(U.data);if(this.parent[U.type])ce=this.parent[U.type](U.sourceMapId,we,Zt);else if(this.parent.getWorkerSource){var Le=U.type.split("."),Ve=this.parent.getWorkerSource(U.sourceMapId,Le[0],we.source);ce=Ve[Le[1]](we,Zt)}else Zt(new Error("Could not find function "+U.type));!yt&&ce&&ce.cancel&&(this.cancelCallbacks[D]=ce.cancel)}},Gc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function d1(R,D,U){D=Math.pow(2,U)-D-1;var rt=T0(R*256,D*256,U),ct=T0((R+1)*256,(D+1)*256,U);return rt[0]+","+rt[1]+","+ct[0]+","+ct[1]}function T0(R,D,U){var rt=2*Math.PI*6378137/256/Math.pow(2,U),ct=R*rt-2*Math.PI*6378137/2,yt=D*rt-2*Math.PI*6378137/2;return[ct,yt]}var uo=function(D,U){D&&(U?this.setSouthWest(D).setNorthEast(U):D.length===4?this.setSouthWest([D[0],D[1]]).setNorthEast([D[2],D[3]]):this.setSouthWest(D[0]).setNorthEast(D[1]))};uo.prototype.setNorthEast=function(D){return this._ne=D instanceof _i?new _i(D.lng,D.lat):_i.convert(D),this},uo.prototype.setSouthWest=function(D){return this._sw=D instanceof _i?new _i(D.lng,D.lat):_i.convert(D),this},uo.prototype.extend=function(D){var U=this._sw,rt=this._ne,ct,yt;if(D instanceof _i)ct=D,yt=D;else if(D instanceof uo){if(ct=D._sw,yt=D._ne,!ct||!yt)return this}else{if(Array.isArray(D))if(D.length===4||D.every(Array.isArray)){var Et=D;return this.extend(uo.convert(Et))}else{var Zt=D;return this.extend(_i.convert(Zt))}return this}return!U&&!rt?(this._sw=new _i(ct.lng,ct.lat),this._ne=new _i(yt.lng,yt.lat)):(U.lng=Math.min(ct.lng,U.lng),U.lat=Math.min(ct.lat,U.lat),rt.lng=Math.max(yt.lng,rt.lng),rt.lat=Math.max(yt.lat,rt.lat)),this},uo.prototype.getCenter=function(){return new _i((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},uo.prototype.getSouthWest=function(){return this._sw},uo.prototype.getNorthEast=function(){return this._ne},uo.prototype.getNorthWest=function(){return new _i(this.getWest(),this.getNorth())},uo.prototype.getSouthEast=function(){return new _i(this.getEast(),this.getSouth())},uo.prototype.getWest=function(){return this._sw.lng},uo.prototype.getSouth=function(){return this._sw.lat},uo.prototype.getEast=function(){return this._ne.lng},uo.prototype.getNorth=function(){return this._ne.lat},uo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},uo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},uo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},uo.prototype.contains=function(D){var U=_i.convert(D),rt=U.lng,ct=U.lat,yt=this._sw.lat<=ct&&ct<=this._ne.lat,Et=this._sw.lng<=rt&&rt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Et=this._sw.lng>=rt&&rt>=this._ne.lng),yt&&Et},uo.convert=function(D){return!D||D instanceof uo?D:new uo(D)};var A0=63710088e-1,_i=function(D,U){if(isNaN(D)||isNaN(U))throw new Error("Invalid LngLat object: ("+D+", "+U+")");if(this.lng=+D,this.lat=+U,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_i.prototype.wrap=function(){return new _i(T(this.lng,-180,180),this.lat)},_i.prototype.toArray=function(){return[this.lng,this.lat]},_i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_i.prototype.distanceTo=function(D){var U=Math.PI/180,rt=this.lat*U,ct=D.lat*U,yt=Math.sin(rt)*Math.sin(ct)+Math.cos(rt)*Math.cos(ct)*Math.cos((D.lng-this.lng)*U),Et=A0*Math.acos(Math.min(yt,1));return Et},_i.prototype.toBounds=function(D){D===void 0&&(D=0);var U=40075017,rt=360*D/U,ct=rt/Math.cos(Math.PI/180*this.lat);return new uo(new _i(this.lng-ct,this.lat-rt),new _i(this.lng+ct,this.lat+rt))},_i.convert=function(D){if(D instanceof _i)return D;if(Array.isArray(D)&&(D.length===2||D.length===3))return new _i(Number(D[0]),Number(D[1]));if(!Array.isArray(D)&&typeof D=="object"&&D!==null)return new _i(Number("lng"in D?D.lng:D.lon),Number(D.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var M0=2*Math.PI*A0;function S0(R){return M0*Math.cos(R*Math.PI/180)}function E0(R){return(180+R)/360}function C0(R){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+R*Math.PI/360)))/360}function L0(R,D){return R/S0(D)}function p1(R){return R*360-180}function id(R){var D=180-R*360;return 360/Math.PI*Math.atan(Math.exp(D*Math.PI/180))-90}function g1(R,D){return R*S0(id(D))}function y1(R){return 1/Math.cos(R*Math.PI/180)}var mc=function(D,U,rt){rt===void 0&&(rt=0),this.x=+D,this.y=+U,this.z=+rt};mc.fromLngLat=function(D,U){U===void 0&&(U=0);var rt=_i.convert(D);return new mc(E0(rt.lng),C0(rt.lat),L0(U,rt.lat))},mc.prototype.toLngLat=function(){return new _i(p1(this.x),id(this.y))},mc.prototype.toAltitude=function(){return g1(this.z,this.y)},mc.prototype.meterInMercatorCoordinateUnits=function(){return 1/M0*y1(id(this.y))};var xc=function(D,U,rt){this.z=D,this.x=U,this.y=rt,this.key=wh(0,D,D,U,rt)};xc.prototype.equals=function(D){return this.z===D.z&&this.x===D.x&&this.y===D.y},xc.prototype.url=function(D,U){var rt=d1(this.x,this.y,this.z),ct=m1(this.z,this.x,this.y);return D[(this.x+this.y)%D.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(U==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ct).replace("{bbox-epsg-3857}",rt)},xc.prototype.getTilePoint=function(D){var U=Math.pow(2,this.z);return new r((D.x*U-this.x)*Sa,(D.y*U-this.y)*Sa)},xc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var P0=function(D,U){this.wrap=D,this.canonical=U,this.key=wh(D,U.z,U.z,U.x,U.y)},fo=function(D,U,rt,ct,yt){this.overscaledZ=D,this.wrap=U,this.canonical=new xc(rt,+ct,+yt),this.key=wh(U,D,rt,ct,yt)};fo.prototype.equals=function(D){return this.overscaledZ===D.overscaledZ&&this.wrap===D.wrap&&this.canonical.equals(D.canonical)},fo.prototype.scaledTo=function(D){var U=this.canonical.z-D;return D>this.canonical.z?new fo(D,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fo(D,this.wrap,D,this.canonical.x>>U,this.canonical.y>>U)},fo.prototype.calculateScaledKey=function(D,U){var rt=this.canonical.z-D;return D>this.canonical.z?wh(this.wrap*+U,D,this.canonical.z,this.canonical.x,this.canonical.y):wh(this.wrap*+U,D,D,this.canonical.x>>rt,this.canonical.y>>rt)},fo.prototype.isChildOf=function(D){if(D.wrap!==this.wrap)return!1;var U=this.canonical.z-D.canonical.z;return D.overscaledZ===0||D.overscaledZ<this.overscaledZ&&D.canonical.x===this.canonical.x>>U&&D.canonical.y===this.canonical.y>>U},fo.prototype.children=function(D){if(this.overscaledZ>=D)return[new fo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var U=this.canonical.z+1,rt=this.canonical.x*2,ct=this.canonical.y*2;return[new fo(U,this.wrap,U,rt,ct),new fo(U,this.wrap,U,rt+1,ct),new fo(U,this.wrap,U,rt,ct+1),new fo(U,this.wrap,U,rt+1,ct+1)]},fo.prototype.isLessThan=function(D){return this.wrap<D.wrap?!0:this.wrap>D.wrap?!1:this.overscaledZ<D.overscaledZ?!0:this.overscaledZ>D.overscaledZ?!1:this.canonical.x<D.canonical.x?!0:this.canonical.x>D.canonical.x?!1:this.canonical.y<D.canonical.y},fo.prototype.wrapped=function(){return new fo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},fo.prototype.unwrapTo=function(D){return new fo(this.overscaledZ,D,this.canonical.z,this.canonical.x,this.canonical.y)},fo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},fo.prototype.toUnwrapped=function(){return new P0(this.wrap,this.canonical)},fo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},fo.prototype.getTilePoint=function(D){return this.canonical.getTilePoint(new mc(D.x-this.wrap,D.y))};function wh(R,D,U,rt,ct){R*=2,R<0&&(R=R*-1-1);var yt=1<<U;return(yt*yt*R+yt*ct+rt).toString(36)+U.toString(36)+D.toString(36)}function m1(R,D,U){for(var rt="",ct,yt=R;yt>0;yt--)ct=1<<yt-1,rt+=(D&ct?1:0)+(U&ct?2:0);return rt}_t("CanonicalTileID",xc),_t("OverscaledTileID",fo,{omit:["posMatrix"]});var tf=function(D,U,rt){if(this.uid=D,U.height!==U.width)throw new RangeError("DEM tiles must be square");if(rt&&rt!=="mapbox"&&rt!=="terrarium")return F('"'+rt+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=U.height;var ct=this.dim=U.height-2;this.data=new Uint32Array(U.data.buffer),this.encoding=rt||"mapbox";for(var yt=0;yt<ct;yt++)this.data[this._idx(-1,yt)]=this.data[this._idx(0,yt)],this.data[this._idx(ct,yt)]=this.data[this._idx(ct-1,yt)],this.data[this._idx(yt,-1)]=this.data[this._idx(yt,0)],this.data[this._idx(yt,ct)]=this.data[this._idx(yt,ct-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ct,-1)]=this.data[this._idx(ct-1,0)],this.data[this._idx(-1,ct)]=this.data[this._idx(0,ct-1)],this.data[this._idx(ct,ct)]=this.data[this._idx(ct-1,ct-1)]};tf.prototype.get=function(D,U){var rt=new Uint8Array(this.data.buffer),ct=this._idx(D,U)*4,yt=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return yt(rt[ct],rt[ct+1],rt[ct+2])},tf.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,.00390625,32768]:[6553.6,25.6,.1,1e4]},tf.prototype._idx=function(D,U){if(D<-1||D>=this.dim+1||U<-1||U>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(U+1)*this.stride+(D+1)},tf.prototype._unpackMapbox=function(D,U,rt){return(D*256*256+U*256+rt)/10-1e4},tf.prototype._unpackTerrarium=function(D,U,rt){return D*256+U+rt/256-32768},tf.prototype.getPixels=function(){return new vs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},tf.prototype.backfillBorder=function(D,U,rt){if(this.dim!==D.dim)throw new Error("dem dimension mismatch");var ct=U*this.dim,yt=U*this.dim+this.dim,Et=rt*this.dim,Zt=rt*this.dim+this.dim;switch(U){case-1:ct=yt-1;break;case 1:yt=ct+1;break}switch(rt){case-1:Et=Zt-1;break;case 1:Zt=Et+1;break}for(var ce=-U*this.dim,we=-rt*this.dim,Le=Et;Le<Zt;Le++)for(var Ve=ct;Ve<yt;Ve++)this.data[this._idx(Ve,Le)]=D.data[this._idx(Ve+ce,Le+we)]},_t("DEMData",tf);function x1(R,D){var U={};if(!D)return U;for(var rt=function(){var Et=yt[ct],Zt=Et.layerIds.map(function(Ve){return D.getLayer(Ve)}).filter(Boolean);if(Zt.length!==0){Et.layers=Zt,Et.stateDependentLayerIds&&(Et.stateDependentLayers=Et.stateDependentLayerIds.map(function(Ve){return Zt.filter(function(ar){return ar.id===Ve})[0]}));for(var ce=0,we=Zt;ce<we.length;ce+=1){var Le=we[ce];U[Le.id]=Et}}},ct=0,yt=R;ct<yt.length;ct+=1)rt();return U}var tv=function(D){this._stringToNumber={},this._numberToString=[];for(var U=0;U<D.length;U++){var rt=D[U];this._stringToNumber[rt]=U,this._numberToString[U]=rt}};tv.prototype.encode=function(D){return this._stringToNumber[D]},tv.prototype.decode=function(D){return this._numberToString[D]};var ev=function(D,U,rt,ct,yt){this.type="Feature",this._vectorTileFeature=D,D._z=U,D._x=rt,D._y=ct,this.properties=D.properties,this.id=yt},od={geometry:{configurable:!0}};od.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},od.geometry.set=function(R){this._geometry=R},ev.prototype.toJSON=function(){var D={geometry:this.geometry};for(var U in this)U==="_geometry"||U==="_vectorTileFeature"||(D[U]=this[U]);return D},Object.defineProperties(ev.prototype,od);var Wc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Wc.prototype.updateState=function(D,U,rt){var ct=String(U);if(this.stateChanges[D]=this.stateChanges[D]||{},this.stateChanges[D][ct]=this.stateChanges[D][ct]||{},x(this.stateChanges[D][ct],rt),this.deletedStates[D]===null){this.deletedStates[D]={};for(var yt in this.state[D])yt!==ct&&(this.deletedStates[D][yt]=null)}else{var Et=this.deletedStates[D]&&this.deletedStates[D][ct]===null;if(Et){this.deletedStates[D][ct]={};for(var Zt in this.state[D][ct])rt[Zt]||(this.deletedStates[D][ct][Zt]=null)}else for(var ce in rt){var we=this.deletedStates[D]&&this.deletedStates[D][ct]&&this.deletedStates[D][ct][ce]===null;we&&delete this.deletedStates[D][ct][ce]}}},Wc.prototype.removeFeatureState=function(D,U,rt){var ct=this.deletedStates[D]===null;if(!ct){var yt=String(U);if(this.deletedStates[D]=this.deletedStates[D]||{},rt&&U!==void 0)this.deletedStates[D][yt]!==null&&(this.deletedStates[D][yt]=this.deletedStates[D][yt]||{},this.deletedStates[D][yt][rt]=null);else if(U!==void 0){var Et=this.stateChanges[D]&&this.stateChanges[D][yt];if(Et){this.deletedStates[D][yt]={};for(rt in this.stateChanges[D][yt])this.deletedStates[D][yt][rt]=null}else this.deletedStates[D][yt]=null}else this.deletedStates[D]=null}},Wc.prototype.getState=function(D,U){var rt=String(U),ct=this.state[D]||{},yt=this.stateChanges[D]||{},Et=x({},ct[rt],yt[rt]);if(this.deletedStates[D]===null)return{};if(this.deletedStates[D]){var Zt=this.deletedStates[D][U];if(Zt===null)return{};for(var ce in Zt)delete Et[ce]}return Et},Wc.prototype.initializeTileState=function(D,U){D.setFeatureState(this.state,U)},Wc.prototype.coalesceChanges=function(D,U){var rt={};for(var ct in this.stateChanges){this.state[ct]=this.state[ct]||{};var yt={};for(var Et in this.stateChanges[ct])this.state[ct][Et]||(this.state[ct][Et]={}),x(this.state[ct][Et],this.stateChanges[ct][Et]),yt[Et]=this.state[ct][Et];rt[ct]=yt}for(var Zt in this.deletedStates){this.state[Zt]=this.state[Zt]||{};var ce={};if(this.deletedStates[Zt]===null)for(var we in this.state[Zt])ce[we]={},this.state[Zt][we]={};else for(var Le in this.deletedStates[Zt]){var Ve=this.deletedStates[Zt][Le]===null;if(Ve)this.state[Zt][Le]={};else for(var ar=0,er=Object.keys(this.deletedStates[Zt][Le]);ar<er.length;ar+=1){var br=er[ar];delete this.state[Zt][Le][br]}ce[Le]=this.state[Zt][Le]}rt[Zt]=rt[Zt]||{},x(rt[Zt],ce)}if(this.stateChanges={},this.deletedStates={},Object.keys(rt).length!==0)for(var Ur in D){var fn=D[Ur];fn.setFeatureState(rt,U)}};var ef=function(D,U){this.tileID=D,this.x=D.canonical.x,this.y=D.canonical.y,this.z=D.canonical.z,this.grid=new Oa(Sa,16,0),this.grid3D=new Oa(Sa,16,0),this.featureIndexArray=new Fh,this.promoteId=U};ef.prototype.insert=function(D,U,rt,ct,yt,Et){var Zt=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(rt,ct,yt);for(var ce=Et?this.grid3D:this.grid,we=0;we<U.length;we++){for(var Le=U[we],Ve=[1/0,1/0,-1/0,-1/0],ar=0;ar<Le.length;ar++){var er=Le[ar];Ve[0]=Math.min(Ve[0],er.x),Ve[1]=Math.min(Ve[1],er.y),Ve[2]=Math.max(Ve[2],er.x),Ve[3]=Math.max(Ve[3],er.y)}Ve[0]<Sa&&Ve[1]<Sa&&Ve[2]>=0&&Ve[3]>=0&&ce.insert(Zt,Ve[0],Ve[1],Ve[2],Ve[3])}},ef.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ic.VectorTile(new Wh(this.rawTileData)).layers,this.sourceLayerCoder=new tv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},ef.prototype.query=function(D,U,rt,ct){var yt=this;this.loadVTLayers();for(var Et=D.params||{},Zt=Sa/D.tileSize/D.scale,ce=Os(Et.filter),we=D.queryGeometry,Le=D.queryPadding*Zt,Ve=D0(we),ar=this.grid.query(Ve.minX-Le,Ve.minY-Le,Ve.maxX+Le,Ve.maxY+Le),er=D0(D.cameraQueryGeometry),br=this.grid3D.query(er.minX-Le,er.minY-Le,er.maxX+Le,er.maxY+Le,function(jn,sa,na,Ta){return Ll(D.cameraQueryGeometry,jn-Le,sa-Le,na+Le,Ta+Le)}),Ur=0,fn=br;Ur<fn.length;Ur+=1){var tn=fn[Ur];ar.push(tn)}ar.sort(b1);for(var Sn={},xn,Mn=function(jn){var sa=ar[jn];if(sa!==xn){xn=sa;var na=yt.featureIndexArray.get(sa),Ta=null;yt.loadMatchingFeature(Sn,na.bucketIndex,na.sourceLayerIndex,na.featureIndex,ce,Et.layers,Et.availableImages,U,rt,ct,function(ya,ba,Ua){return Ta||(Ta=ai(ya)),ba.queryIntersectsFeature(we,ya,Ua,Ta,yt.z,D.transform,Zt,D.pixelPosMatrix)})}},_n=0;_n<ar.length;_n++)Mn(_n);return Sn},ef.prototype.loadMatchingFeature=function(D,U,rt,ct,yt,Et,Zt,ce,we,Le,Ve){var ar=this.bucketLayerIDs[U];if(!(Et&&!z(Et,ar))){var er=this.sourceLayerCoder.decode(rt),br=this.vtLayers[er],Ur=br.feature(ct);if(yt.needGeometry){var fn=Ei(Ur,!0);if(!yt.filter(new Ma(this.tileID.overscaledZ),fn,this.tileID.canonical))return}else if(!yt.filter(new Ma(this.tileID.overscaledZ),Ur))return;for(var tn=this.getId(Ur,er),Sn=0;Sn<ar.length;Sn++){var xn=ar[Sn];if(!(Et&&Et.indexOf(xn)<0)){var Mn=ce[xn];if(Mn){var _n={};tn!==void 0&&Le&&(_n=Le.getState(Mn.sourceLayer||"_geojsonTileLayer",tn));var jn=x({},we[xn]);jn.paint=R0(jn.paint,Mn.paint,Ur,_n,Zt),jn.layout=R0(jn.layout,Mn.layout,Ur,_n,Zt);var sa=!Ve||Ve(Ur,Mn,_n);if(sa){var na=new ev(Ur,this.z,this.x,this.y,tn);na.layer=jn;var Ta=D[xn];Ta===void 0&&(Ta=D[xn]=[]),Ta.push({featureIndex:ct,feature:na,intersectionZ:sa})}}}}}},ef.prototype.lookupSymbolFeatures=function(D,U,rt,ct,yt,Et,Zt,ce){var we={};this.loadVTLayers();for(var Le=Os(yt),Ve=0,ar=D;Ve<ar.length;Ve+=1){var er=ar[Ve];this.loadMatchingFeature(we,rt,ct,er,Le,Et,Zt,ce,U)}return we},ef.prototype.hasLayer=function(D){for(var U=0,rt=this.bucketLayerIDs;U<rt.length;U+=1)for(var ct=rt[U],yt=0,Et=ct;yt<Et.length;yt+=1){var Zt=Et[yt];if(D===Zt)return!0}return!1},ef.prototype.getId=function(D,U){var rt=D.id;if(this.promoteId){var ct=typeof this.promoteId=="string"?this.promoteId:this.promoteId[U];rt=D.properties[ct],typeof rt=="boolean"&&(rt=Number(rt))}return rt},_t("FeatureIndex",ef,{omit:["rawTileData","sourceLayerCoder"]});function R0(R,D,U,rt,ct){return k(R,function(yt,Et){var Zt=D instanceof po?D.get(Et):null;return Zt&&Zt.evaluate?Zt.evaluate(U,rt,ct):Zt})}function D0(R){for(var D=1/0,U=1/0,rt=-1/0,ct=-1/0,yt=0,Et=R;yt<Et.length;yt+=1){var Zt=Et[yt];D=Math.min(D,Zt.x),U=Math.min(U,Zt.y),rt=Math.max(rt,Zt.x),ct=Math.max(ct,Zt.y)}return{minX:D,minY:U,maxX:rt,maxY:ct}}function b1(R,D){return D-R}var w1=3e4,wo=function(D,U){this.tileID=D,this.uid=y(),this.uses=0,this.tileSize=U,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};wo.prototype.registerFadeDuration=function(D){var U=D+this.timeAdded;U<at.now()||this.fadeEndTime&&U<this.fadeEndTime||(this.fadeEndTime=U)},wo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},wo.prototype.loadVectorData=function(D,U,rt){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!D){this.collisionBoxArray=new ih;return}D.featureIndex&&(this.latestFeatureIndex=D.featureIndex,D.rawTileData?(this.latestRawTileData=D.rawTileData,this.latestFeatureIndex.rawTileData=D.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=D.collisionBoxArray,this.buckets=x1(D.buckets,U.style),this.hasSymbolBuckets=!1;for(var ct in this.buckets){var yt=this.buckets[ct];if(yt instanceof Ti)if(this.hasSymbolBuckets=!0,rt)yt.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Et in this.buckets){var Zt=this.buckets[Et];if(Zt instanceof Ti&&Zt.hasRTLText){this.hasRTLText=!0,Ha();break}}this.queryPadding=0;for(var ce in this.buckets){var we=this.buckets[ce];this.queryPadding=Math.max(this.queryPadding,U.style.getLayer(ce).queryRadius(we))}D.imageAtlas&&(this.imageAtlas=D.imageAtlas),D.glyphAtlasImage&&(this.glyphAtlasImage=D.glyphAtlasImage)},wo.prototype.unloadVectorData=function(){for(var D in this.buckets)this.buckets[D].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},wo.prototype.getBucket=function(D){return this.buckets[D.id]},wo.prototype.upload=function(D){for(var U in this.buckets){var rt=this.buckets[U];rt.uploadPending()&&rt.upload(D)}var ct=D.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new yc(D,this.imageAtlas.image,ct.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new yc(D,this.glyphAtlasImage,ct.ALPHA),this.glyphAtlasImage=null)},wo.prototype.prepare=function(D){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(D,this.imageAtlasTexture)},wo.prototype.queryRenderedFeatures=function(D,U,rt,ct,yt,Et,Zt,ce,we,Le){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:ct,cameraQueryGeometry:yt,scale:Et,tileSize:this.tileSize,pixelPosMatrix:Le,transform:ce,params:Zt,queryPadding:this.queryPadding*we},D,U,rt)},wo.prototype.querySourceFeatures=function(D,U){var rt=this.latestFeatureIndex;if(!(!rt||!rt.rawTileData)){var ct=rt.loadVTLayers(),yt=U?U.sourceLayer:"",Et=ct._geojsonTileLayer||ct[yt];if(Et)for(var Zt=Os(U&&U.filter),ce=this.tileID.canonical,we=ce.z,Le=ce.x,Ve=ce.y,ar={z:we,x:Le,y:Ve},er=0;er<Et.length;er++){var br=Et.feature(er);if(Zt.needGeometry){var Ur=Ei(br,!0);if(!Zt.filter(new Ma(this.tileID.overscaledZ),Ur,this.tileID.canonical))continue}else if(!Zt.filter(new Ma(this.tileID.overscaledZ),br))continue;var fn=rt.getId(br,yt),tn=new ev(br,we,Le,Ve,fn);tn.tile=ar,D.push(tn)}}},wo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},wo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},wo.prototype.setExpiryData=function(D){var U=this.expirationTime;if(D.cacheControl){var rt=$(D.cacheControl);rt["max-age"]&&(this.expirationTime=Date.now()+rt["max-age"]*1e3)}else D.expires&&(this.expirationTime=new Date(D.expires).getTime());if(this.expirationTime){var ct=Date.now(),yt=!1;if(this.expirationTime>ct)yt=!1;else if(!U)yt=!0;else if(this.expirationTime<U)yt=!0;else{var Et=this.expirationTime-U;Et?this.expirationTime=ct+Math.max(Et,w1):yt=!0}yt?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},wo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},wo.prototype.setFeatureState=function(D,U){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(D).length===0)){var rt=this.latestFeatureIndex.loadVTLayers();for(var ct in this.buckets)if(U.style.hasLayer(ct)){var yt=this.buckets[ct],Et=yt.layers[0].sourceLayer||"_geojsonTileLayer",Zt=rt[Et],ce=D[Et];if(!(!Zt||!ce||Object.keys(ce).length===0)){yt.update(ce,Zt,this.imageAtlas&&this.imageAtlas.patternPositions||{});var we=U&&U.style&&U.style.getLayer(ct);we&&(this.queryPadding=Math.max(this.queryPadding,we.queryRadius(yt)))}}}},wo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},wo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<at.now()},wo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},wo.prototype.setHoldDuration=function(D){this.symbolFadeHoldUntil=at.now()+D},wo.prototype.setDependencies=function(D,U){for(var rt={},ct=0,yt=U;ct<yt.length;ct+=1){var Et=yt[ct];rt[Et]=!0}this.dependencies[D]=rt},wo.prototype.hasDependency=function(D,U){for(var rt=0,ct=D;rt<ct.length;rt+=1){var yt=ct[rt],Et=this.dependencies[yt];if(Et)for(var Zt=0,ce=U;Zt<ce.length;Zt+=1){var we=ce[Zt];if(Et[we])return!0}}return!1};var T1=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Bf=s.performance,I0=function(D){this._marks={start:[D.url,"start"].join("#"),end:[D.url,"end"].join("#"),measure:D.url.toString()},Bf.mark(this._marks.start)};I0.prototype.finish=function(){Bf.mark(this._marks.end);var D=Bf.getEntriesByName(this._marks.measure);return D.length===0&&(Bf.measure(this._marks.measure,this._marks.start,this._marks.end),D=Bf.getEntriesByName(this._marks.measure),Bf.clearMarks(this._marks.start),Bf.clearMarks(this._marks.end),Bf.clearMeasures(this._marks.measure)),D},o.Actor=Gc,o.AlphaImage=gc,o.CanonicalTileID=xc,o.CollisionBoxArray=ih,o.Color=ni,o.DEMData=tf,o.DataConstantProperty=ca,o.DictionaryCoder=tv,o.EXTENT=Sa,o.ErrorEvent=Ee,o.EvaluationParameters=Ma,o.Event=Ge,o.Evented=Xe,o.FeatureIndex=ef,o.FillBucket=au,o.FillExtrusionBucket=iu,o.ImageAtlas=yh,o.ImagePosition=Xh,o.LineBucket=Qo,o.LngLat=_i,o.LngLatBounds=uo,o.MercatorCoordinate=mc,o.ONE_EM=Ro,o.OverscaledTileID=fo,o.Point=r,o.Point$1=r,o.Properties=vi,o.Protobuf=Wh,o.RGBAImage=vs,o.RequestManager=wt,o.RequestPerformance=I0,o.ResourceType=mr,o.SegmentVector=so,o.SourceFeatureState=Wc,o.StructArrayLayout1ui2=Rf,o.StructArrayLayout2f1f2i16=eu,o.StructArrayLayout2i4=Ku,o.StructArrayLayout3ui6=ru,o.StructArrayLayout4i8=eh,o.SymbolBucket=Ti,o.Texture=yc,o.Tile=wo,o.Transitionable=si,o.Uniform1f=jr,o.Uniform1i=Fr,o.Uniform2f=Zr,o.Uniform3f=Wr,o.Uniform4f=Jr,o.UniformColor=dn,o.UniformMatrix4f=Hn,o.UnwrappedTileID=P0,o.ValidationError=Nr,o.WritingMode=Us,o.ZoomHistory=Oe,o.add=Pc,o.addDynamicAttributes=rd,o.asyncAll=c,o.bezier=u,o.bindAll=E,o.browser=at,o.cacheEntryPossiblyAdded=Se,o.clamp=h,o.clearTileCache=vr,o.clipLine=h0,o.clone=Ec,o.clone$1=O,o.clone$2=Fv,o.collisionCircleLayout=ry,o.config=tt,o.create=Sc,o.create$1=Oo,o.create$2=Mc,o.createCommonjsModule=L,o.createExpression=_s,o.createLayout=ki,o.createStyleLayer=v1,o.cross=Ep,o.deepEqual=n,o.dot=Sp,o.dot$1=Dp,o.ease=g,o.emitValidationErrors=za,o.endsWith=m,o.enforceCacheSizeLimit=je,o.evaluateSizeForFeature=i0,o.evaluateSizeForZoom=o0,o.evaluateVariableOffset=p0,o.evented=Ea,o.extend=x,o.featureFilter=Os,o.filterObject=I,o.fromRotation=kf,o.getAnchorAlignment=$v,o.getAnchorJustification=ed,o.getArrayBuffer=ke,o.getImage=Yt,o.getJSON=ze,o.getRTLTextPluginStatus=_a,o.getReferrer=ve,o.getVideo=Jt,o.identity=Cc,o.invert=zf,o.isChar=Ue,o.isMapboxURL=Rt,o.keysDifference=d,o.makeRequest=Re,o.mapObject=k,o.mercatorXfromLng=E0,o.mercatorYfromLat=C0,o.mercatorZfromAltitude=L0,o.mul=_v,o.multiply=_f,o.mvt=Ic,o.nextPowerOfTwo=M,o.normalize=lh,o.number=zi,o.offscreenCanvasSupported=Qe,o.ortho=zv,o.parseGlyphPBF=Py,o.pbf=Wh,o.performSymbolLayout=Zy,o.perspective=sh,o.pick=w,o.plugin=ea,o.polygonIntersectsPolygon=Wa,o.postMapLoadEvent=Ht,o.postTurnstileEvent=Ot,o.potpack=Qd,o.refProperties=T1,o.register=_t,o.registerForPluginStateChange=oi,o.renderColorRamp=Pd,o.rotate=dc,o.rotateX=hs,o.rotateZ=Lc,o.scale=cs,o.scale$1=Rp,o.scale$2=Bv,o.setCacheLimits=he,o.setRTLTextPlugin=Vi,o.sphericalToCartesian=G,o.sqrLen=zp,o.styleSpec=Mr,o.sub=Lp,o.symbolSize=By,o.transformMat3=Cp,o.transformMat4=Bh,o.translate=Ki,o.triggerPluginCompletionEvent=da,o.uniqueId=y,o.validateCustomStyleLayer=f1,o.validateLight=$n,o.validateStyle=In,o.values=i,o.vectorTile=Ic,o.version=A,o.warnOnce=F,o.webpSupported=lt,o.window=s,o.wrap=T}),P(["./shared"],function(o){function L(ve){var ne=typeof ve;if(ne==="number"||ne==="boolean"||ne==="string"||ve===void 0||ve===null)return JSON.stringify(ve);if(Array.isArray(ve)){for(var ge="[",Ae=0,Re=ve;Ae<Re.length;Ae+=1){var ze=Re[Ae];ge+=L(ze)+","}return ge+"]"}for(var ke=Object.keys(ve).sort(),_e="{",Ke=0;Ke<ke.length;Ke++)_e+=JSON.stringify(ke[Ke])+":"+L(ve[ke[Ke]])+",";return _e+"}"}function A(ve){for(var ne="",ge=0,Ae=o.refProperties;ge<Ae.length;ge+=1){var Re=Ae[ge];ne+="/"+L(ve[Re])}return ne}function v(ve,ne){for(var ge={},Ae=0;Ae<ve.length;Ae++){var Re=ne&&ne[ve[Ae].id]||A(ve[Ae]);ne&&(ne[ve[Ae].id]=Re);var ze=ge[Re];ze||(ze=ge[Re]=[]),ze.push(ve[Ae])}var ke=[];for(var _e in ge)ke.push(ge[_e]);return ke}var p=function(ne){this.keyCache={},ne&&this.replace(ne)};p.prototype.replace=function(ne){this._layerConfigs={},this._layers={},this.update(ne,[])},p.prototype.update=function(ne,ge){for(var Ae=this,Re=0,ze=ne;Re<ze.length;Re+=1){var ke=ze[Re];this._layerConfigs[ke.id]=ke;var _e=this._layers[ke.id]=o.createStyleLayer(ke);_e._featureFilter=o.featureFilter(_e.filter),this.keyCache[ke.id]&&delete this.keyCache[ke.id]}for(var Ke=0,hr=ge;Ke<hr.length;Ke+=1){var cr=hr[Ke];delete this.keyCache[cr],delete this._layerConfigs[cr],delete this._layers[cr]}this.familiesBySource={};for(var dr=v(o.values(this._layerConfigs),this.keyCache),fr=0,Lr=dr;fr<Lr.length;fr+=1){var xr=Lr[fr],Yt=xr.map(function(Xe){return Ae._layers[Xe.id]}),Jt=Yt[0];if(Jt.visibility!=="none"){var qe=Jt.source||"",tr=this.familiesBySource[qe];tr||(tr=this.familiesBySource[qe]={});var Ge=Jt.sourceLayer||"_geojsonTileLayer",Ee=tr[Ge];Ee||(Ee=tr[Ge]=[]),Ee.push(Yt)}}};var r=1,e=function(ne){var ge={},Ae=[];for(var Re in ne){var ze=ne[Re],ke=ge[Re]={};for(var _e in ze){var Ke=ze[+_e];if(!(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)){var hr={x:0,y:0,w:Ke.bitmap.width+2*r,h:Ke.bitmap.height+2*r};Ae.push(hr),ke[_e]={rect:hr,metrics:Ke.metrics}}}}var cr=o.potpack(Ae),dr=cr.w,fr=cr.h,Lr=new o.AlphaImage({width:dr||1,height:fr||1});for(var xr in ne){var Yt=ne[xr];for(var Jt in Yt){var qe=Yt[+Jt];if(!(!qe||qe.bitmap.width===0||qe.bitmap.height===0)){var tr=ge[xr][Jt].rect;o.AlphaImage.copy(qe.bitmap,Lr,{x:0,y:0},{x:tr.x+r,y:tr.y+r},qe.bitmap)}}}this.image=Lr,this.positions=ge};o.register("GlyphAtlas",e);var s=function(ne){this.tileID=new o.OverscaledTileID(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId};s.prototype.parse=function(ne,ge,Ae,Re,ze){var ke=this;this.status="parsing",this.data=ne,this.collisionBoxArray=new o.CollisionBoxArray;var _e=new o.DictionaryCoder(Object.keys(ne.layers).sort()),Ke=new o.FeatureIndex(this.tileID,this.promoteId);Ke.bucketLayerIDs=[];var hr={},cr={featureIndex:Ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ae},dr=ge.familiesBySource[this.source];for(var fr in dr){var Lr=ne.layers[fr];if(Lr){Lr.version===1&&o.warnOnce('Vector tile source "'+this.source+'" layer "'+fr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var xr=_e.encode(fr),Yt=[],Jt=0;Jt<Lr.length;Jt++){var qe=Lr.feature(Jt),tr=Ke.getId(qe,fr);Yt.push({feature:qe,id:tr,index:Jt,sourceLayerIndex:xr})}for(var Ge=0,Ee=dr[fr];Ge<Ee.length;Ge+=1){var Xe=Ee[Ge],rr=Xe[0];if(!(rr.minzoom&&this.zoom<Math.floor(rr.minzoom))&&!(rr.maxzoom&&this.zoom>=rr.maxzoom)&&rr.visibility!=="none"){n(Xe,this.zoom,Ae);var Je=hr[rr.id]=rr.createBucket({index:Ke.bucketLayerIDs.length,layers:Xe,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:xr,sourceID:this.source});Je.populate(Yt,cr,this.tileID.canonical),Ke.bucketLayerIDs.push(Xe.map(function(gr){return gr.id}))}}}}var He,yr,Ir,Tr,vn=o.mapObject(cr.glyphDependencies,function(gr){return Object.keys(gr).map(Number)});Object.keys(vn).length?Re.send("getGlyphs",{uid:this.uid,stacks:vn},function(gr,Pr){He||(He=gr,yr=Pr,nn.call(ke))}):yr={};var Or=Object.keys(cr.iconDependencies);Or.length?Re.send("getImages",{icons:Or,source:this.source,tileID:this.tileID,type:"icons"},function(gr,Pr){He||(He=gr,Ir=Pr,nn.call(ke))}):Ir={};var En=Object.keys(cr.patternDependencies);En.length?Re.send("getImages",{icons:En,source:this.source,tileID:this.tileID,type:"patterns"},function(gr,Pr){He||(He=gr,Tr=Pr,nn.call(ke))}):Tr={},nn.call(this);function nn(){if(He)return ze(He);if(yr&&Ir&&Tr){var gr=new e(yr),Pr=new o.ImageAtlas(Ir,Tr);for(var Xr in hr){var kr=hr[Xr];kr instanceof o.SymbolBucket?(n(kr.layers,this.zoom,Ae),o.performSymbolLayout(kr,yr,gr.positions,Ir,Pr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kr.hasPattern&&(kr instanceof o.LineBucket||kr instanceof o.FillBucket||kr instanceof o.FillExtrusionBucket)&&(n(kr.layers,this.zoom,Ae),kr.addFeatures(cr,this.tileID.canonical,Pr.patternPositions))}this.status="done",ze(null,{buckets:o.values(hr).filter(function(pn){return!pn.isEmpty()}),featureIndex:Ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:gr.image,imageAtlas:Pr,glyphMap:this.returnDependencies?yr:null,iconMap:this.returnDependencies?Ir:null,glyphPositions:this.returnDependencies?gr.positions:null})}}};function n(ve,ne,ge){for(var Ae=new o.EvaluationParameters(ne),Re=0,ze=ve;Re<ze.length;Re+=1){var ke=ze[Re];ke.recalculate(Ae,ge)}}function l(ve,ne){var ge=o.getArrayBuffer(ve.request,function(Ae,Re,ze,ke){Ae?ne(Ae):Re&&ne(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(Re)),rawData:Re,cacheControl:ze,expires:ke})});return function(){ge.cancel(),ne()}}var f=function(ne,ge,Ae,Re){this.actor=ne,this.layerIndex=ge,this.availableImages=Ae,this.loadVectorData=Re||l,this.loading={},this.loaded={}};f.prototype.loadTile=function(ne,ge){var Ae=this,Re=ne.uid;this.loading||(this.loading={});var ze=ne&&ne.request&&ne.request.collectResourceTiming?new o.RequestPerformance(ne.request):!1,ke=this.loading[Re]=new s(ne);ke.abort=this.loadVectorData(ne,function(_e,Ke){if(delete Ae.loading[Re],_e||!Ke)return ke.status="done",Ae.loaded[Re]=ke,ge(_e);var hr=Ke.rawData,cr={};Ke.expires&&(cr.expires=Ke.expires),Ke.cacheControl&&(cr.cacheControl=Ke.cacheControl);var dr={};if(ze){var fr=ze.finish();fr&&(dr.resourceTiming=JSON.parse(JSON.stringify(fr)))}ke.vectorTile=Ke.vectorTile,ke.parse(Ke.vectorTile,Ae.layerIndex,Ae.availableImages,Ae.actor,function(Lr,xr){if(Lr||!xr)return ge(Lr);ge(null,o.extend({rawTileData:hr.slice(0)},xr,cr,dr))}),Ae.loaded=Ae.loaded||{},Ae.loaded[Re]=ke})},f.prototype.reloadTile=function(ne,ge){var Ae=this,Re=this.loaded,ze=ne.uid,ke=this;if(Re&&Re[ze]){var _e=Re[ze];_e.showCollisionBoxes=ne.showCollisionBoxes;var Ke=function(hr,cr){var dr=_e.reloadCallback;dr&&(delete _e.reloadCallback,_e.parse(_e.vectorTile,ke.layerIndex,Ae.availableImages,ke.actor,dr)),ge(hr,cr)};_e.status==="parsing"?_e.reloadCallback=Ke:_e.status==="done"&&(_e.vectorTile?_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,Ke):Ke())}},f.prototype.abortTile=function(ne,ge){var Ae=this.loading,Re=ne.uid;Ae&&Ae[Re]&&Ae[Re].abort&&(Ae[Re].abort(),delete Ae[Re]),ge()},f.prototype.removeTile=function(ne,ge){var Ae=this.loaded,Re=ne.uid;Ae&&Ae[Re]&&delete Ae[Re],ge()};var u=o.window.ImageBitmap,g=function(){this.loaded={}};g.prototype.loadTile=function(ne,ge){var Ae=ne.uid,Re=ne.encoding,ze=ne.rawImageData,ke=u&&ze instanceof u?this.getImageData(ze):ze,_e=new o.DEMData(Ae,ke,Re);this.loaded=this.loaded||{},this.loaded[Ae]=_e,ge(null,_e)},g.prototype.getImageData=function(ne){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(ne.width,ne.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ne.width,this.offscreenCanvas.height=ne.height,this.offscreenCanvasContext.drawImage(ne,0,0,ne.width,ne.height);var ge=this.offscreenCanvasContext.getImageData(-1,-1,ne.width+2,ne.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:ge.width,height:ge.height},ge.data)},g.prototype.removeTile=function(ne){var ge=this.loaded,Ae=ne.uid;ge&&ge[Ae]&&delete ge[Ae]};var h=T;function T(ve,ne){var ge=ve&&ve.type,Ae;if(ge==="FeatureCollection")for(Ae=0;Ae<ve.features.length;Ae++)T(ve.features[Ae],ne);else if(ge==="GeometryCollection")for(Ae=0;Ae<ve.geometries.length;Ae++)T(ve.geometries[Ae],ne);else if(ge==="Feature")T(ve.geometry,ne);else if(ge==="Polygon")c(ve.coordinates,ne);else if(ge==="MultiPolygon")for(Ae=0;Ae<ve.coordinates.length;Ae++)c(ve.coordinates[Ae],ne);return ve}function c(ve,ne){if(ve.length!==0){i(ve[0],ne);for(var ge=1;ge<ve.length;ge++)i(ve[ge],!ne)}}function i(ve,ne){for(var ge=0,Ae=0,Re=ve.length,ze=Re-1;Ae<Re;ze=Ae++)ge+=(ve[Ae][0]-ve[ze][0])*(ve[ze][1]+ve[Ae][1]);ge>=0!=!!ne&&ve.reverse()}var d=o.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(ne){this._feature=ne,this.extent=o.EXTENT,this.type=ne.type,this.properties=ne.tags,"id"in ne&&!isNaN(ne.id)&&(this.id=parseInt(ne.id,10))};x.prototype.loadGeometry=function(){if(this._feature.type===1){for(var ne=[],ge=0,Ae=this._feature.geometry;ge<Ae.length;ge+=1){var Re=Ae[ge];ne.push([new o.Point$1(Re[0],Re[1])])}return ne}else{for(var ze=[],ke=0,_e=this._feature.geometry;ke<_e.length;ke+=1){for(var Ke=_e[ke],hr=[],cr=0,dr=Ke;cr<dr.length;cr+=1){var fr=dr[cr];hr.push(new o.Point$1(fr[0],fr[1]))}ze.push(hr)}return ze}},x.prototype.toGeoJSON=function(ne,ge,Ae){return d.call(this,ne,ge,Ae)};var w=function(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=ne.length,this._features=ne};w.prototype.feature=function(ne){return new x(this._features[ne])};var C=o.vectorTile.VectorTileFeature,y=S;function S(ve,ne){this.options=ne||{},this.features=ve,this.length=ve.length}S.prototype.feature=function(ve){return new M(this.features[ve],this.options.extent)};function M(ve,ne){this.id=typeof ve.id=="number"?ve.id:void 0,this.type=ve.type,this.rawGeometry=ve.type===1?[ve.geometry]:ve.geometry,this.properties=ve.tags,this.extent=ne||4096}M.prototype.loadGeometry=function(){var ve=this.rawGeometry;this.geometry=[];for(var ne=0;ne<ve.length;ne++){for(var ge=ve[ne],Ae=[],Re=0;Re<ge.length;Re++)Ae.push(new o.Point$1(ge[Re][0],ge[Re][1]));this.geometry.push(Ae)}return this.geometry},M.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ve=this.geometry,ne=1/0,ge=-1/0,Ae=1/0,Re=-1/0,ze=0;ze<ve.length;ze++)for(var ke=ve[ze],_e=0;_e<ke.length;_e++){var Ke=ke[_e];ne=Math.min(ne,Ke.x),ge=Math.max(ge,Ke.x),Ae=Math.min(Ae,Ke.y),Re=Math.max(Re,Ke.y)}return[ne,Ae,ge,Re]},M.prototype.toGeoJSON=C.prototype.toGeoJSON;var a=I,E=I,m=O,k=y;function I(ve){var ne=new o.pbf;return z(ve,ne),ne.finish()}function O(ve,ne){ne=ne||{};var ge={};for(var Ae in ve)ge[Ae]=new y(ve[Ae].features,ne),ge[Ae].name=Ae,ge[Ae].version=ne.version,ge[Ae].extent=ne.extent;return I({layers:ge})}function z(ve,ne){for(var ge in ve.layers)ne.writeMessage(3,B,ve.layers[ge])}function B(ve,ne){ne.writeVarintField(15,ve.version||1),ne.writeStringField(1,ve.name||""),ne.writeVarintField(5,ve.extent||4096);var ge,Ae={keys:[],values:[],keycache:{},valuecache:{}};for(ge=0;ge<ve.length;ge++)Ae.feature=ve.feature(ge),ne.writeMessage(2,F,Ae);var Re=Ae.keys;for(ge=0;ge<Re.length;ge++)ne.writeStringField(3,Re[ge]);var ze=Ae.values;for(ge=0;ge<ze.length;ge++)ne.writeMessage(4,$,ze[ge])}function F(ve,ne){var ge=ve.feature;ge.id!==void 0&&ne.writeVarintField(1,ge.id),ne.writeMessage(2,_,ve),ne.writeVarintField(3,ge.type),ne.writeMessage(4,X,ge)}function _(ve,ne){var ge=ve.feature,Ae=ve.keys,Re=ve.values,ze=ve.keycache,ke=ve.valuecache;for(var _e in ge.properties){var Ke=ze[_e];typeof Ke>"u"&&(Ae.push(_e),Ke=Ae.length-1,ze[_e]=Ke),ne.writeVarint(Ke);var hr=ge.properties[_e],cr=typeof hr;cr!=="string"&&cr!=="boolean"&&cr!=="number"&&(hr=JSON.stringify(hr));var dr=cr+":"+hr,fr=ke[dr];typeof fr>"u"&&(Re.push(hr),fr=Re.length-1,ke[dr]=fr),ne.writeVarint(fr)}}function N(ve,ne){return(ne<<3)+(ve&7)}function G(ve){return ve<<1^ve>>31}function X(ve,ne){for(var ge=ve.loadGeometry(),Ae=ve.type,Re=0,ze=0,ke=ge.length,_e=0;_e<ke;_e++){var Ke=ge[_e],hr=1;Ae===1&&(hr=Ke.length),ne.writeVarint(N(1,hr));for(var cr=Ae===3?Ke.length-1:Ke.length,dr=0;dr<cr;dr++){dr===1&&Ae!==1&&ne.writeVarint(N(2,cr-1));var fr=Ke[dr].x-Re,Lr=Ke[dr].y-ze;ne.writeVarint(G(fr)),ne.writeVarint(G(Lr)),Re+=fr,ze+=Lr}Ae===3&&ne.writeVarint(N(7,1))}}function $(ve,ne){var ge=typeof ve;ge==="string"?ne.writeStringField(1,ve):ge==="boolean"?ne.writeBooleanField(7,ve):ge==="number"&&(ve%1!==0?ne.writeDoubleField(3,ve):ve<0?ne.writeSVarintField(6,ve):ne.writeVarintField(5,ve))}a.fromVectorTileJs=E,a.fromGeojsonVt=m,a.GeoJSONWrapper=k;function et(ve,ne,ge,Ae,Re,ze){if(!(Re-Ae<=ge)){var ke=Ae+Re>>1;ot(ve,ne,ke,Ae,Re,ze%2),et(ve,ne,ge,Ae,ke-1,ze+1),et(ve,ne,ge,ke+1,Re,ze+1)}}function ot(ve,ne,ge,Ae,Re,ze){for(;Re>Ae;){if(Re-Ae>600){var ke=Re-Ae+1,_e=ge-Ae+1,Ke=Math.log(ke),hr=.5*Math.exp(2*Ke/3),cr=.5*Math.sqrt(Ke*hr*(ke-hr)/ke)*(_e-ke/2<0?-1:1),dr=Math.max(Ae,Math.floor(ge-_e*hr/ke+cr)),fr=Math.min(Re,Math.floor(ge+(ke-_e)*hr/ke+cr));ot(ve,ne,ge,dr,fr,ze)}var Lr=ne[2*ge+ze],xr=Ae,Yt=Re;for(nt(ve,ne,Ae,ge),ne[2*Re+ze]>Lr&&nt(ve,ne,Ae,Re);xr<Yt;){for(nt(ve,ne,xr,Yt),xr++,Yt--;ne[2*xr+ze]<Lr;)xr++;for(;ne[2*Yt+ze]>Lr;)Yt--}ne[2*Ae+ze]===Lr?nt(ve,ne,Ae,Yt):(Yt++,nt(ve,ne,Yt,Re)),Yt<=ge&&(Ae=Yt+1),ge<=Yt&&(Re=Yt-1)}}function nt(ve,ne,ge,Ae){Z(ve,ge,Ae),Z(ne,2*ge,2*Ae),Z(ne,2*ge+1,2*Ae+1)}function Z(ve,ne,ge){var Ae=ve[ne];ve[ne]=ve[ge],ve[ge]=Ae}function Q(ve,ne,ge,Ae,Re,ze,ke){for(var _e=[0,ve.length-1,0],Ke=[],hr,cr;_e.length;){var dr=_e.pop(),fr=_e.pop(),Lr=_e.pop();if(fr-Lr<=ke){for(var xr=Lr;xr<=fr;xr++)hr=ne[2*xr],cr=ne[2*xr+1],hr>=ge&&hr<=Re&&cr>=Ae&&cr<=ze&&Ke.push(ve[xr]);continue}var Yt=Math.floor((Lr+fr)/2);hr=ne[2*Yt],cr=ne[2*Yt+1],hr>=ge&&hr<=Re&&cr>=Ae&&cr<=ze&&Ke.push(ve[Yt]);var Jt=(dr+1)%2;(dr===0?ge<=hr:Ae<=cr)&&(_e.push(Lr),_e.push(Yt-1),_e.push(Jt)),(dr===0?Re>=hr:ze>=cr)&&(_e.push(Yt+1),_e.push(fr),_e.push(Jt))}return Ke}function W(ve,ne,ge,Ae,Re,ze){for(var ke=[0,ve.length-1,0],_e=[],Ke=Re*Re;ke.length;){var hr=ke.pop(),cr=ke.pop(),dr=ke.pop();if(cr-dr<=ze){for(var fr=dr;fr<=cr;fr++)J(ne[2*fr],ne[2*fr+1],ge,Ae)<=Ke&&_e.push(ve[fr]);continue}var Lr=Math.floor((dr+cr)/2),xr=ne[2*Lr],Yt=ne[2*Lr+1];J(xr,Yt,ge,Ae)<=Ke&&_e.push(ve[Lr]);var Jt=(hr+1)%2;(hr===0?ge-Re<=xr:Ae-Re<=Yt)&&(ke.push(dr),ke.push(Lr-1),ke.push(Jt)),(hr===0?ge+Re>=xr:Ae+Re>=Yt)&&(ke.push(Lr+1),ke.push(cr),ke.push(Jt))}return _e}function J(ve,ne,ge,Ae){var Re=ve-ge,ze=ne-Ae;return Re*Re+ze*ze}var it=function(ve){return ve[0]},K=function(ve){return ve[1]},H=function(ne,ge,Ae,Re,ze){ge===void 0&&(ge=it),Ae===void 0&&(Ae=K),Re===void 0&&(Re=64),ze===void 0&&(ze=Float64Array),this.nodeSize=Re,this.points=ne;for(var ke=ne.length<65536?Uint16Array:Uint32Array,_e=this.ids=new ke(ne.length),Ke=this.coords=new ze(ne.length*2),hr=0;hr<ne.length;hr++)_e[hr]=hr,Ke[2*hr]=ge(ne[hr]),Ke[2*hr+1]=Ae(ne[hr]);et(_e,Ke,Re,0,_e.length-1,0)};H.prototype.range=function(ne,ge,Ae,Re){return Q(this.ids,this.coords,ne,ge,Ae,Re,this.nodeSize)},H.prototype.within=function(ne,ge,Ae){return W(this.ids,this.coords,ne,ge,Ae,this.nodeSize)};var at={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ve){return ve}},tt=function(ne){this.options=Ct(Object.create(at),ne),this.trees=new Array(this.options.maxZoom+1)};tt.prototype.load=function(ne){var ge=this.options,Ae=ge.log,Re=ge.minZoom,ze=ge.maxZoom,ke=ge.nodeSize;Ae&&console.time("total time");var _e="prepare "+ne.length+" points";Ae&&console.time(_e),this.points=ne;for(var Ke=[],hr=0;hr<ne.length;hr++)ne[hr].geometry&&Ke.push(dt(ne[hr],hr));this.trees[ze+1]=new H(Ke,wt,Rt,ke,Float32Array),Ae&&console.timeEnd(_e);for(var cr=ze;cr>=Re;cr--){var dr=+Date.now();Ke=this._cluster(Ke,cr),this.trees[cr]=new H(Ke,wt,Rt,ke,Float32Array),Ae&&console.log("z%d: %d clusters in %dms",cr,Ke.length,+Date.now()-dr)}return Ae&&console.timeEnd("total time"),this},tt.prototype.getClusters=function(ne,ge){var Ae=((ne[0]+180)%360+360)%360-180,Re=Math.max(-90,Math.min(90,ne[1])),ze=ne[2]===180?180:((ne[2]+180)%360+360)%360-180,ke=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)Ae=-180,ze=180;else if(Ae>ze){var _e=this.getClusters([Ae,Re,180,ke],ge),Ke=this.getClusters([-180,Re,ze,ke],ge);return _e.concat(Ke)}for(var hr=this.trees[this._limitZoom(ge)],cr=hr.range(Mt(Ae),Lt(ke),Mt(ze),Lt(Re)),dr=[],fr=0,Lr=cr;fr<Lr.length;fr+=1){var xr=Lr[fr],Yt=hr.points[xr];dr.push(Yt.numPoints?mt(Yt):this.points[Yt.index])}return dr},tt.prototype.getChildren=function(ne){var ge=this._getOriginId(ne),Ae=this._getOriginZoom(ne),Re="No cluster with the specified id.",ze=this.trees[Ae];if(!ze)throw new Error(Re);var ke=ze.points[ge];if(!ke)throw new Error(Re);for(var _e=this.options.radius/(this.options.extent*Math.pow(2,Ae-1)),Ke=ze.within(ke.x,ke.y,_e),hr=[],cr=0,dr=Ke;cr<dr.length;cr+=1){var fr=dr[cr],Lr=ze.points[fr];Lr.parentId===ne&&hr.push(Lr.numPoints?mt(Lr):this.points[Lr.index])}if(hr.length===0)throw new Error(Re);return hr},tt.prototype.getLeaves=function(ne,ge,Ae){ge=ge||10,Ae=Ae||0;var Re=[];return this._appendLeaves(Re,ne,ge,Ae,0),Re},tt.prototype.getTile=function(ne,ge,Ae){var Re=this.trees[this._limitZoom(ne)],ze=Math.pow(2,ne),ke=this.options,_e=ke.extent,Ke=ke.radius,hr=Ke/_e,cr=(Ae-hr)/ze,dr=(Ae+1+hr)/ze,fr={features:[]};return this._addTileFeatures(Re.range((ge-hr)/ze,cr,(ge+1+hr)/ze,dr),Re.points,ge,Ae,ze,fr),ge===0&&this._addTileFeatures(Re.range(1-hr/ze,cr,1,dr),Re.points,ze,Ae,ze,fr),ge===ze-1&&this._addTileFeatures(Re.range(0,cr,hr/ze,dr),Re.points,-1,Ae,ze,fr),fr.features.length?fr:null},tt.prototype.getClusterExpansionZoom=function(ne){for(var ge=this._getOriginZoom(ne)-1;ge<=this.options.maxZoom;){var Ae=this.getChildren(ne);if(ge++,Ae.length!==1)break;ne=Ae[0].properties.cluster_id}return ge},tt.prototype._appendLeaves=function(ne,ge,Ae,Re,ze){for(var ke=this.getChildren(ge),_e=0,Ke=ke;_e<Ke.length;_e+=1){var hr=Ke[_e],cr=hr.properties;if(cr&&cr.cluster?ze+cr.point_count<=Re?ze+=cr.point_count:ze=this._appendLeaves(ne,cr.cluster_id,Ae,Re,ze):ze<Re?ze++:ne.push(hr),ne.length===Ae)break}return ze},tt.prototype._addTileFeatures=function(ne,ge,Ae,Re,ze,ke){for(var _e=0,Ke=ne;_e<Ke.length;_e+=1){var hr=Ke[_e],cr=ge[hr],dr=cr.numPoints,fr={type:1,geometry:[[Math.round(this.options.extent*(cr.x*ze-Ae)),Math.round(this.options.extent*(cr.y*ze-Re))]],tags:dr?gt(cr):this.points[cr.index].properties},Lr=void 0;dr?Lr=cr.id:this.options.generateId?Lr=cr.index:this.points[cr.index].id&&(Lr=this.points[cr.index].id),Lr!==void 0&&(fr.id=Lr),ke.features.push(fr)}},tt.prototype._limitZoom=function(ne){return Math.max(this.options.minZoom,Math.min(+ne,this.options.maxZoom+1))},tt.prototype._cluster=function(ne,ge){for(var Ae=[],Re=this.options,ze=Re.radius,ke=Re.extent,_e=Re.reduce,Ke=Re.minPoints,hr=ze/(ke*Math.pow(2,ge)),cr=0;cr<ne.length;cr++){var dr=ne[cr];if(!(dr.zoom<=ge)){dr.zoom=ge;for(var fr=this.trees[ge+1],Lr=fr.within(dr.x,dr.y,hr),xr=dr.numPoints||1,Yt=xr,Jt=0,qe=Lr;Jt<qe.length;Jt+=1){var tr=qe[Jt],Ge=fr.points[tr];Ge.zoom>ge&&(Yt+=Ge.numPoints||1)}if(Yt>=Ke){for(var Ee=dr.x*xr,Xe=dr.y*xr,rr=_e&&xr>1?this._map(dr,!0):null,Je=(cr<<5)+(ge+1)+this.points.length,He=0,yr=Lr;He<yr.length;He+=1){var Ir=yr[He],Tr=fr.points[Ir];if(!(Tr.zoom<=ge)){Tr.zoom=ge;var vn=Tr.numPoints||1;Ee+=Tr.x*vn,Xe+=Tr.y*vn,Tr.parentId=Je,_e&&(rr||(rr=this._map(dr,!0)),_e(rr,this._map(Tr)))}}dr.parentId=Je,Ae.push(lt(Ee/Yt,Xe/Yt,Je,Yt,rr))}else if(Ae.push(dr),Yt>1)for(var Or=0,En=Lr;Or<En.length;Or+=1){var nn=En[Or],gr=fr.points[nn];gr.zoom<=ge||(gr.zoom=ge,Ae.push(gr))}}}return Ae},tt.prototype._getOriginId=function(ne){return ne-this.points.length>>5},tt.prototype._getOriginZoom=function(ne){return(ne-this.points.length)%32},tt.prototype._map=function(ne,ge){if(ne.numPoints)return ge?Ct({},ne.properties):ne.properties;var Ae=this.points[ne.index].properties,Re=this.options.map(Ae);return ge&&Re===Ae?Ct({},Re):Re};function lt(ve,ne,ge,Ae,Re){return{x:ve,y:ne,zoom:1/0,id:ge,parentId:-1,numPoints:Ae,properties:Re}}function dt(ve,ne){var ge=ve.geometry.coordinates,Ae=ge[0],Re=ge[1];return{x:Mt(Ae),y:Lt(Re),zoom:1/0,index:ne,parentId:-1}}function mt(ve){return{type:"Feature",id:ve.id,properties:gt(ve),geometry:{type:"Point",coordinates:[zt(ve.x),xt(ve.y)]}}}function gt(ve){var ne=ve.numPoints,ge=ne>=1e4?Math.round(ne/1e3)+"k":ne>=1e3?Math.round(ne/100)/10+"k":ne;return Ct(Ct({},ve.properties),{cluster:!0,cluster_id:ve.id,point_count:ne,point_count_abbreviated:ge})}function Mt(ve){return ve/360+.5}function Lt(ve){var ne=Math.sin(ve*Math.PI/180),ge=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ge<0?0:ge>1?1:ge}function zt(ve){return(ve-.5)*360}function xt(ve){var ne=(180-ve*360)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Ct(ve,ne){for(var ge in ne)ve[ge]=ne[ge];return ve}function wt(ve){return ve.x}function Rt(ve){return ve.y}function Tt(ve,ne,ge,Ae){for(var Re=Ae,ze=ge-ne>>1,ke=ge-ne,_e,Ke=ve[ne],hr=ve[ne+1],cr=ve[ge],dr=ve[ge+1],fr=ne+3;fr<ge;fr+=3){var Lr=Bt(ve[fr],ve[fr+1],Ke,hr,cr,dr);if(Lr>Re)_e=fr,Re=Lr;else if(Lr===Re){var xr=Math.abs(fr-ze);xr<ke&&(_e=fr,ke=xr)}}Re>Ae&&(_e-ne>3&&Tt(ve,ne,_e,Ae),ve[_e+2]=Re,ge-_e>3&&Tt(ve,_e,ge,Ae))}function Bt(ve,ne,ge,Ae,Re,ze){var ke=Re-ge,_e=ze-Ae;if(ke!==0||_e!==0){var Ke=((ve-ge)*ke+(ne-Ae)*_e)/(ke*ke+_e*_e);Ke>1?(ge=Re,Ae=ze):Ke>0&&(ge+=ke*Ke,Ae+=_e*Ke)}return ke=ve-ge,_e=ne-Ae,ke*ke+_e*_e}function Gt(ve,ne,ge,Ae){var Re={id:typeof ve>"u"?null:ve,type:ne,geometry:ge,tags:Ae,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return te(Re),Re}function te(ve){var ne=ve.geometry,ge=ve.type;if(ge==="Point"||ge==="MultiPoint"||ge==="LineString")Wt(ve,ne);else if(ge==="Polygon"||ge==="MultiLineString")for(var Ae=0;Ae<ne.length;Ae++)Wt(ve,ne[Ae]);else if(ge==="MultiPolygon")for(Ae=0;Ae<ne.length;Ae++)for(var Re=0;Re<ne[Ae].length;Re++)Wt(ve,ne[Ae][Re])}function Wt(ve,ne){for(var ge=0;ge<ne.length;ge+=3)ve.minX=Math.min(ve.minX,ne[ge]),ve.minY=Math.min(ve.minY,ne[ge+1]),ve.maxX=Math.max(ve.maxX,ne[ge]),ve.maxY=Math.max(ve.maxY,ne[ge+1])}function jt(ve,ne){var ge=[];if(ve.type==="FeatureCollection")for(var Ae=0;Ae<ve.features.length;Ae++)ie(ge,ve.features[Ae],ne,Ae);else ve.type==="Feature"?ie(ge,ve,ne):ie(ge,{geometry:ve},ne);return ge}function ie(ve,ne,ge,Ae){if(ne.geometry){var Re=ne.geometry.coordinates,ze=ne.geometry.type,ke=Math.pow(ge.tolerance/((1<<ge.maxZoom)*ge.extent),2),_e=[],Ke=ne.id;if(ge.promoteId?Ke=ne.properties[ge.promoteId]:ge.generateId&&(Ke=Ae||0),ze==="Point")ue(Re,_e);else if(ze==="MultiPoint")for(var hr=0;hr<Re.length;hr++)ue(Re[hr],_e);else if(ze==="LineString")fe(Re,_e,ke,!1);else if(ze==="MultiLineString")if(ge.lineMetrics){for(hr=0;hr<Re.length;hr++)_e=[],fe(Re[hr],_e,ke,!1),ve.push(Gt(Ke,"LineString",_e,ne.properties));return}else pe(Re,_e,ke,!1);else if(ze==="Polygon")pe(Re,_e,ke,!0);else if(ze==="MultiPolygon")for(hr=0;hr<Re.length;hr++){var cr=[];pe(Re[hr],cr,ke,!0),_e.push(cr)}else if(ze==="GeometryCollection"){for(hr=0;hr<ne.geometry.geometries.length;hr++)ie(ve,{id:Ke,geometry:ne.geometry.geometries[hr],properties:ne.properties},ge,Ae);return}else throw new Error("Input data is not a valid GeoJSON object.");ve.push(Gt(Ke,ze,_e,ne.properties))}}function ue(ve,ne){ne.push(Te(ve[0])),ne.push(Qt(ve[1])),ne.push(0)}function fe(ve,ne,ge,Ae){for(var Re,ze,ke=0,_e=0;_e<ve.length;_e++){var Ke=Te(ve[_e][0]),hr=Qt(ve[_e][1]);ne.push(Ke),ne.push(hr),ne.push(0),_e>0&&(Ae?ke+=(Re*hr-Ke*ze)/2:ke+=Math.sqrt(Math.pow(Ke-Re,2)+Math.pow(hr-ze,2))),Re=Ke,ze=hr}var cr=ne.length-3;ne[2]=1,Tt(ne,0,cr,ge),ne[cr+2]=1,ne.size=Math.abs(ke),ne.start=0,ne.end=ne.size}function pe(ve,ne,ge,Ae){for(var Re=0;Re<ve.length;Re++){var ze=[];fe(ve[Re],ze,ge,Ae),ne.push(ze)}}function Te(ve){return ve/360+.5}function Qt(ve){var ne=Math.sin(ve*Math.PI/180),ge=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return ge<0?0:ge>1?1:ge}function Pt(ve,ne,ge,Ae,Re,ze,ke,_e){if(ge/=ne,Ae/=ne,ze>=ge&&ke<Ae)return ve;if(ke<ge||ze>=Ae)return null;for(var Ke=[],hr=0;hr<ve.length;hr++){var cr=ve[hr],dr=cr.geometry,fr=cr.type,Lr=Re===0?cr.minX:cr.minY,xr=Re===0?cr.maxX:cr.maxY;if(Lr>=ge&&xr<Ae){Ke.push(cr);continue}else if(xr<ge||Lr>=Ae)continue;var Yt=[];if(fr==="Point"||fr==="MultiPoint")Ot(dr,Yt,ge,Ae,Re);else if(fr==="LineString")Nt(dr,Yt,ge,Ae,Re,!1,_e.lineMetrics);else if(fr==="MultiLineString")St(dr,Yt,ge,Ae,Re,!1);else if(fr==="Polygon")St(dr,Yt,ge,Ae,Re,!0);else if(fr==="MultiPolygon")for(var Jt=0;Jt<dr.length;Jt++){var qe=[];St(dr[Jt],qe,ge,Ae,Re,!0),qe.length&&Yt.push(qe)}if(Yt.length){if(_e.lineMetrics&&fr==="LineString"){for(Jt=0;Jt<Yt.length;Jt++)Ke.push(Gt(cr.id,fr,Yt[Jt],cr.tags));continue}(fr==="LineString"||fr==="MultiLineString")&&(Yt.length===1?(fr="LineString",Yt=Yt[0]):fr="MultiLineString"),(fr==="Point"||fr==="MultiPoint")&&(fr=Yt.length===3?"Point":"MultiPoint"),Ke.push(Gt(cr.id,fr,Yt,cr.tags))}}return Ke.length?Ke:null}function Ot(ve,ne,ge,Ae,Re){for(var ze=0;ze<ve.length;ze+=3){var ke=ve[ze+Re];ke>=ge&&ke<=Ae&&(ne.push(ve[ze]),ne.push(ve[ze+1]),ne.push(ve[ze+2]))}}function Nt(ve,ne,ge,Ae,Re,ze,ke){for(var _e=Ht(ve),Ke=Re===0?Ft:At,hr=ve.start,cr,dr,fr=0;fr<ve.length-3;fr+=3){var Lr=ve[fr],xr=ve[fr+1],Yt=ve[fr+2],Jt=ve[fr+3],qe=ve[fr+4],tr=Re===0?Lr:xr,Ge=Re===0?Jt:qe,Ee=!1;ke&&(cr=Math.sqrt(Math.pow(Lr-Jt,2)+Math.pow(xr-qe,2))),tr<ge?Ge>ge&&(dr=Ke(_e,Lr,xr,Jt,qe,ge),ke&&(_e.start=hr+cr*dr)):tr>Ae?Ge<Ae&&(dr=Ke(_e,Lr,xr,Jt,qe,Ae),ke&&(_e.start=hr+cr*dr)):kt(_e,Lr,xr,Yt),Ge<ge&&tr>=ge&&(dr=Ke(_e,Lr,xr,Jt,qe,ge),Ee=!0),Ge>Ae&&tr<=Ae&&(dr=Ke(_e,Lr,xr,Jt,qe,Ae),Ee=!0),!ze&&Ee&&(ke&&(_e.end=hr+cr*dr),ne.push(_e),_e=Ht(ve)),ke&&(hr+=cr)}var Xe=ve.length-3;Lr=ve[Xe],xr=ve[Xe+1],Yt=ve[Xe+2],tr=Re===0?Lr:xr,tr>=ge&&tr<=Ae&&kt(_e,Lr,xr,Yt),Xe=_e.length-3,ze&&Xe>=3&&(_e[Xe]!==_e[0]||_e[Xe+1]!==_e[1])&&kt(_e,_e[0],_e[1],_e[2]),_e.length&&ne.push(_e)}function Ht(ve){var ne=[];return ne.size=ve.size,ne.start=ve.start,ne.end=ve.end,ne}function St(ve,ne,ge,Ae,Re,ze){for(var ke=0;ke<ve.length;ke++)Nt(ve[ke],ne,ge,Ae,Re,ze,!1)}function kt(ve,ne,ge,Ae){ve.push(ne),ve.push(ge),ve.push(Ae)}function Ft(ve,ne,ge,Ae,Re,ze){var ke=(ze-ne)/(Ae-ne);return ve.push(ze),ve.push(ge+(Re-ge)*ke),ve.push(1),ke}function At(ve,ne,ge,Ae,Re,ze){var ke=(ze-ge)/(Re-ge);return ve.push(ne+(Ae-ne)*ke),ve.push(ze),ve.push(1),ke}function ft(ve,ne){var ge=ne.buffer/ne.extent,Ae=ve,Re=Pt(ve,1,-1-ge,ge,0,-1,2,ne),ze=Pt(ve,1,1-ge,2+ge,0,-1,2,ne);return(Re||ze)&&(Ae=Pt(ve,1,-ge,1+ge,0,-1,2,ne)||[],Re&&(Ae=pt(Re,1).concat(Ae)),ze&&(Ae=Ae.concat(pt(ze,-1)))),Ae}function pt(ve,ne){for(var ge=[],Ae=0;Ae<ve.length;Ae++){var Re=ve[Ae],ze=Re.type,ke;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")ke=Dt(Re.geometry,ne);else if(ze==="MultiLineString"||ze==="Polygon"){ke=[];for(var _e=0;_e<Re.geometry.length;_e++)ke.push(Dt(Re.geometry[_e],ne))}else if(ze==="MultiPolygon")for(ke=[],_e=0;_e<Re.geometry.length;_e++){for(var Ke=[],hr=0;hr<Re.geometry[_e].length;hr++)Ke.push(Dt(Re.geometry[_e][hr],ne));ke.push(Ke)}ge.push(Gt(Re.id,ze,ke,Re.tags))}return ge}function Dt(ve,ne){var ge=[];ge.size=ve.size,ve.start!==void 0&&(ge.start=ve.start,ge.end=ve.end);for(var Ae=0;Ae<ve.length;Ae+=3)ge.push(ve[Ae]+ne,ve[Ae+1],ve[Ae+2]);return ge}function Ut(ve,ne){if(ve.transformed)return ve;var ge=1<<ve.z,Ae=ve.x,Re=ve.y,ze,ke,_e;for(ze=0;ze<ve.features.length;ze++){var Ke=ve.features[ze],hr=Ke.geometry,cr=Ke.type;if(Ke.geometry=[],cr===1)for(ke=0;ke<hr.length;ke+=2)Ke.geometry.push($t(hr[ke],hr[ke+1],ne,ge,Ae,Re));else for(ke=0;ke<hr.length;ke++){var dr=[];for(_e=0;_e<hr[ke].length;_e+=2)dr.push($t(hr[ke][_e],hr[ke][_e+1],ne,ge,Ae,Re));Ke.geometry.push(dr)}}return ve.transformed=!0,ve}function $t(ve,ne,ge,Ae,Re,ze){return[Math.round(ge*(ve*Ae-Re)),Math.round(ge*(ne*Ae-ze))]}function re(ve,ne,ge,Ae,Re){for(var ze=ne===Re.maxZoom?0:Re.tolerance/((1<<ne)*Re.extent),ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ge,y:Ae,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_e=0;_e<ve.length;_e++){ke.numFeatures++,Be(ke,ve[_e],ze,Re);var Ke=ve[_e].minX,hr=ve[_e].minY,cr=ve[_e].maxX,dr=ve[_e].maxY;Ke<ke.minX&&(ke.minX=Ke),hr<ke.minY&&(ke.minY=hr),cr>ke.maxX&&(ke.maxX=cr),dr>ke.maxY&&(ke.maxY=dr)}return ke}function Be(ve,ne,ge,Ae){var Re=ne.geometry,ze=ne.type,ke=[];if(ze==="Point"||ze==="MultiPoint")for(var _e=0;_e<Re.length;_e+=3)ke.push(Re[_e]),ke.push(Re[_e+1]),ve.numPoints++,ve.numSimplified++;else if(ze==="LineString")We(ke,Re,ve,ge,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(_e=0;_e<Re.length;_e++)We(ke,Re[_e],ve,ge,ze==="Polygon",_e===0);else if(ze==="MultiPolygon")for(var Ke=0;Ke<Re.length;Ke++){var hr=Re[Ke];for(_e=0;_e<hr.length;_e++)We(ke,hr[_e],ve,ge,!0,_e===0)}if(ke.length){var cr=ne.tags||null;if(ze==="LineString"&&Ae.lineMetrics){cr={};for(var dr in ne.tags)cr[dr]=ne.tags[dr];cr.mapbox_clip_start=Re.start/Re.size,cr.mapbox_clip_end=Re.end/Re.size}var fr={geometry:ke,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:cr};ne.id!==null&&(fr.id=ne.id),ve.features.push(fr)}}function We(ve,ne,ge,Ae,Re,ze){var ke=Ae*Ae;if(Ae>0&&ne.size<(Re?ke:Ae)){ge.numPoints+=ne.length/3;return}for(var _e=[],Ke=0;Ke<ne.length;Ke+=3)(Ae===0||ne[Ke+2]>ke)&&(ge.numSimplified++,_e.push(ne[Ke]),_e.push(ne[Ke+1])),ge.numPoints++;Re&&me(_e,ze),ve.push(_e)}function me(ve,ne){for(var ge=0,Ae=0,Re=ve.length,ze=Re-2;Ae<Re;ze=Ae,Ae+=2)ge+=(ve[Ae]-ve[ze])*(ve[Ae+1]+ve[ze+1]);if(ge>0===ne)for(Ae=0,Re=ve.length;Ae<Re/2;Ae+=2){var ke=ve[Ae],_e=ve[Ae+1];ve[Ae]=ve[Re-2-Ae],ve[Ae+1]=ve[Re-1-Ae],ve[Re-2-Ae]=ke,ve[Re-1-Ae]=_e}}function Se(ve,ne){return new je(ve,ne)}function je(ve,ne){ne=this.options=he(Object.create(this.options),ne);var ge=ne.debug;if(ge&&console.time("preprocess data"),ne.maxZoom<0||ne.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ne.promoteId&&ne.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ae=jt(ve,ne);this.tiles={},this.tileCoords=[],ge&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ne.indexMaxZoom,ne.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ae=ft(Ae,ne),Ae.length&&this.splitTile(Ae,0,0,0),ge&&(Ae.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}je.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},je.prototype.splitTile=function(ve,ne,ge,Ae,Re,ze,ke){for(var _e=[ve,ne,ge,Ae],Ke=this.options,hr=Ke.debug;_e.length;){Ae=_e.pop(),ge=_e.pop(),ne=_e.pop(),ve=_e.pop();var cr=1<<ne,dr=vr(ne,ge,Ae),fr=this.tiles[dr];if(!fr&&(hr>1&&console.time("creation"),fr=this.tiles[dr]=re(ve,ne,ge,Ae,Ke),this.tileCoords.push({z:ne,x:ge,y:Ae}),hr)){hr>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ne,ge,Ae,fr.numFeatures,fr.numPoints,fr.numSimplified),console.timeEnd("creation"));var Lr="z"+ne;this.stats[Lr]=(this.stats[Lr]||0)+1,this.total++}if(fr.source=ve,Re){if(ne===Ke.maxZoom||ne===Re)continue;var xr=1<<Re-ne;if(ge!==Math.floor(ze/xr)||Ae!==Math.floor(ke/xr))continue}else if(ne===Ke.indexMaxZoom||fr.numPoints<=Ke.indexMaxPoints)continue;if(fr.source=null,ve.length!==0){hr>1&&console.time("clipping");var Yt=.5*Ke.buffer/Ke.extent,Jt=.5-Yt,qe=.5+Yt,tr=1+Yt,Ge,Ee,Xe,rr,Je,He;Ge=Ee=Xe=rr=null,Je=Pt(ve,cr,ge-Yt,ge+qe,0,fr.minX,fr.maxX,Ke),He=Pt(ve,cr,ge+Jt,ge+tr,0,fr.minX,fr.maxX,Ke),ve=null,Je&&(Ge=Pt(Je,cr,Ae-Yt,Ae+qe,1,fr.minY,fr.maxY,Ke),Ee=Pt(Je,cr,Ae+Jt,Ae+tr,1,fr.minY,fr.maxY,Ke),Je=null),He&&(Xe=Pt(He,cr,Ae-Yt,Ae+qe,1,fr.minY,fr.maxY,Ke),rr=Pt(He,cr,Ae+Jt,Ae+tr,1,fr.minY,fr.maxY,Ke),He=null),hr>1&&console.timeEnd("clipping"),_e.push(Ge||[],ne+1,ge*2,Ae*2),_e.push(Ee||[],ne+1,ge*2,Ae*2+1),_e.push(Xe||[],ne+1,ge*2+1,Ae*2),_e.push(rr||[],ne+1,ge*2+1,Ae*2+1)}}},je.prototype.getTile=function(ve,ne,ge){var Ae=this.options,Re=Ae.extent,ze=Ae.debug;if(ve<0||ve>24)return null;var ke=1<<ve;ne=(ne%ke+ke)%ke;var _e=vr(ve,ne,ge);if(this.tiles[_e])return Ut(this.tiles[_e],Re);ze>1&&console.log("drilling down to z%d-%d-%d",ve,ne,ge);for(var Ke=ve,hr=ne,cr=ge,dr;!dr&&Ke>0;)Ke--,hr=Math.floor(hr/2),cr=Math.floor(cr/2),dr=this.tiles[vr(Ke,hr,cr)];return!dr||!dr.source?null:(ze>1&&console.log("found parent tile z%d-%d-%d",Ke,hr,cr),ze>1&&console.time("drilling down"),this.splitTile(dr.source,Ke,hr,cr,ve,ne,ge),ze>1&&console.timeEnd("drilling down"),this.tiles[_e]?Ut(this.tiles[_e],Re):null)};function vr(ve,ne,ge){return((1<<ve)*ge+ne)*32+ve}function he(ve,ne){for(var ge in ne)ve[ge]=ne[ge];return ve}function Ye(ve,ne){var ge=ve.tileID.canonical;if(!this._geoJSONIndex)return ne(null,null);var Ae=this._geoJSONIndex.getTile(ge.z,ge.x,ge.y);if(!Ae)return ne(null,null);var Re=new w(Ae.features),ze=a(Re);(ze.byteOffset!==0||ze.byteLength!==ze.buffer.byteLength)&&(ze=new Uint8Array(ze)),ne(null,{vectorTile:Re,rawData:ze.buffer})}var Qe=function(ve){function ne(ge,Ae,Re,ze){ve.call(this,ge,Ae,Re,Ye),ze&&(this.loadGeoJSON=ze)}return ve&&(ne.__proto__=ve),ne.prototype=Object.create(ve&&ve.prototype),ne.prototype.constructor=ne,ne.prototype.loadData=function(Ae,Re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Re,this._pendingLoadDataParams=Ae,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ne.prototype._loadData=function(){var Ae=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Re=this._pendingCallback,ze=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ke=ze&&ze.request&&ze.request.collectResourceTiming?new o.RequestPerformance(ze.request):!1;this.loadGeoJSON(ze,function(_e,Ke){if(_e||!Ke)return Re(_e);if(typeof Ke!="object")return Re(new Error("Input data given to '"+ze.source+"' is not a valid GeoJSON object."));h(Ke,!0);try{if(ze.filter){var hr=o.createExpression(ze.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(hr.result==="error")throw new Error(hr.value.map(function(Lr){return Lr.key+": "+Lr.message}).join(", "));var cr=Ke.features.filter(function(Lr){return hr.value.evaluate({zoom:0},Lr)});Ke={type:"FeatureCollection",features:cr}}Ae._geoJSONIndex=ze.cluster?new tt(mr(ze)).load(Ke.features):Se(Ke,ze.geojsonVtOptions)}catch(Lr){return Re(Lr)}Ae.loaded={};var dr={};if(ke){var fr=ke.finish();fr&&(dr.resourceTiming={},dr.resourceTiming[ze.source]=JSON.parse(JSON.stringify(fr)))}Re(null,dr)})}},ne.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},ne.prototype.reloadTile=function(Ae,Re){var ze=this.loaded,ke=Ae.uid;return ze&&ze[ke]?ve.prototype.reloadTile.call(this,Ae,Re):this.loadTile(Ae,Re)},ne.prototype.loadGeoJSON=function(Ae,Re){if(Ae.request)o.getJSON(Ae.request,Re);else if(typeof Ae.data=="string")try{return Re(null,JSON.parse(Ae.data))}catch{return Re(new Error("Input data given to '"+Ae.source+"' is not a valid GeoJSON object."))}else return Re(new Error("Input data given to '"+Ae.source+"' is not a valid GeoJSON object."))},ne.prototype.removeSource=function(Ae,Re){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Re()},ne.prototype.getClusterExpansionZoom=function(Ae,Re){try{Re(null,this._geoJSONIndex.getClusterExpansionZoom(Ae.clusterId))}catch(ze){Re(ze)}},ne.prototype.getClusterChildren=function(Ae,Re){try{Re(null,this._geoJSONIndex.getChildren(Ae.clusterId))}catch(ze){Re(ze)}},ne.prototype.getClusterLeaves=function(Ae,Re){try{Re(null,this._geoJSONIndex.getLeaves(Ae.clusterId,Ae.limit,Ae.offset))}catch(ze){Re(ze)}},ne}(f);function mr(ve){var ne=ve.superclusterOptions,ge=ve.clusterProperties;if(!ge||!ne)return ne;for(var Ae={},Re={},ze={accumulated:null,zoom:0},ke={properties:null},_e=Object.keys(ge),Ke=0,hr=_e;Ke<hr.length;Ke+=1){var cr=hr[Ke],dr=ge[cr],fr=dr[0],Lr=dr[1],xr=o.createExpression(Lr),Yt=o.createExpression(typeof fr=="string"?[fr,["accumulated"],["get",cr]]:fr);Ae[cr]=xr.value,Re[cr]=Yt.value}return ne.map=function(Jt){ke.properties=Jt;for(var qe={},tr=0,Ge=_e;tr<Ge.length;tr+=1){var Ee=Ge[tr];qe[Ee]=Ae[Ee].evaluate(ze,ke)}return qe},ne.reduce=function(Jt,qe){ke.properties=qe;for(var tr=0,Ge=_e;tr<Ge.length;tr+=1){var Ee=Ge[tr];ze.accumulated=Jt[Ee],Jt[Ee]=Re[Ee].evaluate(ze,ke)}},ne}var ir=function(ne){var ge=this;this.self=ne,this.actor=new o.Actor(ne,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:f,geojson:Qe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ae,Re){if(ge.workerSourceTypes[Ae])throw new Error('Worker source with name "'+Ae+'" already registered.');ge.workerSourceTypes[Ae]=Re},this.self.registerRTLTextPlugin=function(Ae){if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=Ae.applyArabicShaping,o.plugin.processBidirectionalText=Ae.processBidirectionalText,o.plugin.processStyledBidirectionalText=Ae.processStyledBidirectionalText}};return ir.prototype.setReferrer=function(ne,ge){this.referrer=ge},ir.prototype.setImages=function(ne,ge,Ae){this.availableImages[ne]=ge;for(var Re in this.workerSources[ne]){var ze=this.workerSources[ne][Re];for(var ke in ze)ze[ke].availableImages=ge}Ae()},ir.prototype.setLayers=function(ne,ge,Ae){this.getLayerIndex(ne).replace(ge),Ae()},ir.prototype.updateLayers=function(ne,ge,Ae){this.getLayerIndex(ne).update(ge.layers,ge.removedIds),Ae()},ir.prototype.loadTile=function(ne,ge,Ae){this.getWorkerSource(ne,ge.type,ge.source).loadTile(ge,Ae)},ir.prototype.loadDEMTile=function(ne,ge,Ae){this.getDEMWorkerSource(ne,ge.source).loadTile(ge,Ae)},ir.prototype.reloadTile=function(ne,ge,Ae){this.getWorkerSource(ne,ge.type,ge.source).reloadTile(ge,Ae)},ir.prototype.abortTile=function(ne,ge,Ae){this.getWorkerSource(ne,ge.type,ge.source).abortTile(ge,Ae)},ir.prototype.removeTile=function(ne,ge,Ae){this.getWorkerSource(ne,ge.type,ge.source).removeTile(ge,Ae)},ir.prototype.removeDEMTile=function(ne,ge){this.getDEMWorkerSource(ne,ge.source).removeTile(ge)},ir.prototype.removeSource=function(ne,ge,Ae){if(!(!this.workerSources[ne]||!this.workerSources[ne][ge.type]||!this.workerSources[ne][ge.type][ge.source])){var Re=this.workerSources[ne][ge.type][ge.source];delete this.workerSources[ne][ge.type][ge.source],Re.removeSource!==void 0?Re.removeSource(ge,Ae):Ae()}},ir.prototype.loadWorkerSource=function(ne,ge,Ae){try{this.self.importScripts(ge.url),Ae()}catch(Re){Ae(Re.toString())}},ir.prototype.syncRTLPluginState=function(ne,ge,Ae){try{o.plugin.setState(ge);var Re=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&Re!=null){this.self.importScripts(Re);var ze=o.plugin.isParsed(),ke=ze?void 0:new Error("RTL Text Plugin failed to import scripts from "+Re);Ae(ke,ze)}}catch(_e){Ae(_e.toString())}},ir.prototype.getAvailableImages=function(ne){var ge=this.availableImages[ne];return ge||(ge=[]),ge},ir.prototype.getLayerIndex=function(ne){var ge=this.layerIndexes[ne];return ge||(ge=this.layerIndexes[ne]=new p),ge},ir.prototype.getWorkerSource=function(ne,ge,Ae){var Re=this;if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][ge]||(this.workerSources[ne][ge]={}),!this.workerSources[ne][ge][Ae]){var ze={send:function(ke,_e,Ke){Re.actor.send(ke,_e,Ke,ne)}};this.workerSources[ne][ge][Ae]=new this.workerSourceTypes[ge](ze,this.getLayerIndex(ne),this.getAvailableImages(ne))}return this.workerSources[ne][ge][Ae]},ir.prototype.getDEMWorkerSource=function(ne,ge){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][ge]||(this.demWorkerSources[ne][ge]=new g),this.demWorkerSources[ne][ge]},ir.prototype.enforceCacheSizeLimit=function(ne,ge){o.enforceCacheSizeLimit(ge)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new ir(self)),ir}),P(["./shared"],function(o){var L=o.createCommonjsModule(function(ut){ut.exports?ut.exports=Y:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=Y,window.mapboxgl.notSupportedReason=ht);function Y(Wr){return!ht(Wr)}function ht(Wr){if(!q())return"not a browser";if(!vt())return"insufficent Array support";if(!It())return"insufficient Function support";if(!Vt())return"insufficient Object support";if(!se())return"insufficient JSON support";if(!Me())return"insufficient worker support";if(!Fe())return"insufficient Uint8ClampedArray support";if(!$e())return"insufficient ArrayBuffer support";if(!ur())return"insufficient Canvas/getImageData support";if(!Fr(Wr&&Wr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function q(){return typeof window<"u"&&typeof document<"u"}function vt(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function It(){return Function.prototype&&Function.prototype.bind}function Vt(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function se(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function Me(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Wr=new Blob([""],{type:"text/javascript"}),Jr=URL.createObjectURL(Wr),dn,kn;try{kn=new Worker(Jr),dn=!0}catch{dn=!1}return kn&&kn.terminate(),URL.revokeObjectURL(Jr),dn}function Fe(){return"Uint8ClampedArray"in window}function $e(){return ArrayBuffer.isView}function ur(){var Wr=document.createElement("canvas");Wr.width=Wr.height=1;var Jr=Wr.getContext("2d");if(!Jr)return!1;var dn=Jr.getImageData(0,0,1,1);return dn&&dn.width===Wr.width}var lr={};function Fr(Wr){return lr[Wr]===void 0&&(lr[Wr]=Zr(Wr)),lr[Wr]}Y.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function jr(Wr){var Jr=document.createElement("canvas"),dn=Object.create(Y.webGLContextAttributes);return dn.failIfMajorPerformanceCaveat=Wr,Jr.probablySupportsContext?Jr.probablySupportsContext("webgl",dn)||Jr.probablySupportsContext("experimental-webgl",dn):Jr.supportsContext?Jr.supportsContext("webgl",dn)||Jr.supportsContext("experimental-webgl",dn):Jr.getContext("webgl",dn)||Jr.getContext("experimental-webgl",dn)}function Zr(Wr){var Jr=jr(Wr);if(!Jr)return!1;var dn=Jr.createShader(Jr.VERTEX_SHADER);return!dn||Jr.isContextLost()?!1:(Jr.shaderSource(dn,"void main() {}"),Jr.compileShader(dn),Jr.getShaderParameter(dn,Jr.COMPILE_STATUS)===!0)}}),A={};A.create=function(ut,Y,ht){var q=o.window.document.createElement(ut);return Y!==void 0&&(q.className=Y),ht&&ht.appendChild(q),q},A.createNS=function(ut,Y){var ht=o.window.document.createElementNS(ut,Y);return ht};var v=o.window.document&&o.window.document.documentElement.style;function p(ut){if(!v)return ut[0];for(var Y=0;Y<ut.length;Y++)if(ut[Y]in v)return ut[Y];return ut[0]}var r=p(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),e;A.disableDrag=function(){v&&r&&(e=v[r],v[r]="none")},A.enableDrag=function(){v&&r&&(v[r]=e)};var s=p(["transform","WebkitTransform"]);A.setTransform=function(ut,Y){ut.style[s]=Y};var n=!1;try{var l=Object.defineProperty({},"passive",{get:function(){n=!0}});o.window.addEventListener("test",l,l),o.window.removeEventListener("test",l,l)}catch{n=!1}A.addEventListener=function(ut,Y,ht,q){q===void 0&&(q={}),"passive"in q&&n?ut.addEventListener(Y,ht,q):ut.addEventListener(Y,ht,q.capture)},A.removeEventListener=function(ut,Y,ht,q){q===void 0&&(q={}),"passive"in q&&n?ut.removeEventListener(Y,ht,q):ut.removeEventListener(Y,ht,q.capture)};var f=function(ut){ut.preventDefault(),ut.stopPropagation(),o.window.removeEventListener("click",f,!0)};A.suppressClick=function(){o.window.addEventListener("click",f,!0),o.window.setTimeout(function(){o.window.removeEventListener("click",f,!0)},0)},A.mousePos=function(ut,Y){var ht=ut.getBoundingClientRect();return new o.Point(Y.clientX-ht.left-ut.clientLeft,Y.clientY-ht.top-ut.clientTop)},A.touchPos=function(ut,Y){for(var ht=ut.getBoundingClientRect(),q=[],vt=0;vt<Y.length;vt++)q.push(new o.Point(Y[vt].clientX-ht.left-ut.clientLeft,Y[vt].clientY-ht.top-ut.clientTop));return q},A.mouseButton=function(ut){return typeof o.window.InstallTrigger<"u"&&ut.button===2&&ut.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ut.button},A.remove=function(ut){ut.parentNode&&ut.parentNode.removeChild(ut)};function u(ut,Y,ht){var q,vt,It,Vt=o.browser.devicePixelRatio>1?"@2x":"",se=o.getJSON(Y.transformRequest(Y.normalizeSpriteURL(ut,Vt,".json"),o.ResourceType.SpriteJSON),function($e,ur){se=null,It||(It=$e,q=ur,Fe())}),Me=o.getImage(Y.transformRequest(Y.normalizeSpriteURL(ut,Vt,".png"),o.ResourceType.SpriteImage),function($e,ur){Me=null,It||(It=$e,vt=ur,Fe())});function Fe(){if(It)ht(It);else if(q&&vt){var $e=o.browser.getImageData(vt),ur={};for(var lr in q){var Fr=q[lr],jr=Fr.width,Zr=Fr.height,Wr=Fr.x,Jr=Fr.y,dn=Fr.sdf,kn=Fr.pixelRatio,Hn=Fr.stretchX,Kn=Fr.stretchY,Qn=Fr.content,Xn=new o.RGBAImage({width:jr,height:Zr});o.RGBAImage.copy($e,Xn,{x:Wr,y:Jr},{x:0,y:0},{width:jr,height:Zr}),ur[lr]={data:Xn,pixelRatio:kn,sdf:dn,stretchX:Hn,stretchY:Kn,content:Qn}}ht(null,ur)}}return{cancel:function(){se&&(se.cancel(),se=null),Me&&(Me.cancel(),Me=null)}}}function g(ut){var Y=ut.userImage;if(Y&&Y.render){var ht=Y.render();if(ht)return ut.data.replace(new Uint8Array(Y.data.buffer)),!0}return!1}var h=1,T=function(ut){function Y(){ut.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.isLoaded=function(){return this.loaded},Y.prototype.setLoaded=function(q){if(this.loaded!==q&&(this.loaded=q,q)){for(var vt=0,It=this.requestors;vt<It.length;vt+=1){var Vt=It[vt],se=Vt.ids,Me=Vt.callback;this._notify(se,Me)}this.requestors=[]}},Y.prototype.getImage=function(q){return this.images[q]},Y.prototype.addImage=function(q,vt){this._validate(q,vt)&&(this.images[q]=vt)},Y.prototype._validate=function(q,vt){var It=!0;return this._validateStretch(vt.stretchX,vt.data&&vt.data.width)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchX" value'))),It=!1),this._validateStretch(vt.stretchY,vt.data&&vt.data.height)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "stretchY" value'))),It=!1),this._validateContent(vt.content,vt)||(this.fire(new o.ErrorEvent(new Error('Image "'+q+'" has invalid "content" value'))),It=!1),It},Y.prototype._validateStretch=function(q,vt){if(!q)return!0;for(var It=0,Vt=0,se=q;Vt<se.length;Vt+=1){var Me=se[Vt];if(Me[0]<It||Me[1]<Me[0]||vt<Me[1])return!1;It=Me[1]}return!0},Y.prototype._validateContent=function(q,vt){return q?!(q.length!==4||q[0]<0||vt.data.width<q[0]||q[1]<0||vt.data.height<q[1]||q[2]<0||vt.data.width<q[2]||q[3]<0||vt.data.height<q[3]||q[2]<q[0]||q[3]<q[1]):!0},Y.prototype.updateImage=function(q,vt){var It=this.images[q];vt.version=It.version+1,this.images[q]=vt,this.updatedImages[q]=!0},Y.prototype.removeImage=function(q){var vt=this.images[q];delete this.images[q],delete this.patterns[q],vt.userImage&&vt.userImage.onRemove&&vt.userImage.onRemove()},Y.prototype.listImages=function(){return Object.keys(this.images)},Y.prototype.getImages=function(q,vt){var It=!0;if(!this.isLoaded())for(var Vt=0,se=q;Vt<se.length;Vt+=1){var Me=se[Vt];this.images[Me]||(It=!1)}this.isLoaded()||It?this._notify(q,vt):this.requestors.push({ids:q,callback:vt})},Y.prototype._notify=function(q,vt){for(var It={},Vt=0,se=q;Vt<se.length;Vt+=1){var Me=se[Vt];this.images[Me]||this.fire(new o.Event("styleimagemissing",{id:Me}));var Fe=this.images[Me];Fe?It[Me]={data:Fe.data.clone(),pixelRatio:Fe.pixelRatio,sdf:Fe.sdf,version:Fe.version,stretchX:Fe.stretchX,stretchY:Fe.stretchY,content:Fe.content,hasRenderCallback:!!(Fe.userImage&&Fe.userImage.render)}:o.warnOnce('Image "'+Me+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}vt(null,It)},Y.prototype.getPixelSize=function(){var q=this.atlasImage,vt=q.width,It=q.height;return{width:vt,height:It}},Y.prototype.getPattern=function(q){var vt=this.patterns[q],It=this.getImage(q);if(!It)return null;if(vt&&vt.position.version===It.version)return vt.position;if(vt)vt.position.version=It.version;else{var Vt=It.data.width+h*2,se=It.data.height+h*2,Me={w:Vt,h:se,x:0,y:0},Fe=new o.ImagePosition(Me,It);this.patterns[q]={bin:Me,position:Fe}}return this._updatePatternAtlas(),this.patterns[q].position},Y.prototype.bind=function(q){var vt=q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(q,this.atlasImage,vt.RGBA),this.atlasTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)},Y.prototype._updatePatternAtlas=function(){var q=[];for(var vt in this.patterns)q.push(this.patterns[vt].bin);var It=o.potpack(q),Vt=It.w,se=It.h,Me=this.atlasImage;Me.resize({width:Vt||1,height:se||1});for(var Fe in this.patterns){var $e=this.patterns[Fe],ur=$e.bin,lr=ur.x+h,Fr=ur.y+h,jr=this.images[Fe].data,Zr=jr.width,Wr=jr.height;o.RGBAImage.copy(jr,Me,{x:0,y:0},{x:lr,y:Fr},{width:Zr,height:Wr}),o.RGBAImage.copy(jr,Me,{x:0,y:Wr-1},{x:lr,y:Fr-1},{width:Zr,height:1}),o.RGBAImage.copy(jr,Me,{x:0,y:0},{x:lr,y:Fr+Wr},{width:Zr,height:1}),o.RGBAImage.copy(jr,Me,{x:Zr-1,y:0},{x:lr-1,y:Fr},{width:1,height:Wr}),o.RGBAImage.copy(jr,Me,{x:0,y:0},{x:lr+Zr,y:Fr},{width:1,height:Wr})}this.dirty=!0},Y.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},Y.prototype.dispatchRenderCallbacks=function(q){for(var vt=0,It=q;vt<It.length;vt+=1){var Vt=It[vt];if(!this.callbackDispatchedThisFrame[Vt]){this.callbackDispatchedThisFrame[Vt]=!0;var se=this.images[Vt],Me=g(se);Me&&this.updateImage(Vt,se)}}},Y}(o.Evented);function c(ut,Y,ht,q,vt){var It=Y*256,Vt=It+255,se=q.transformRequest(q.normalizeGlyphsURL(ht).replace("{fontstack}",ut).replace("{range}",It+"-"+Vt),o.ResourceType.Glyphs);o.getArrayBuffer(se,function(Me,Fe){if(Me)vt(Me);else if(Fe){for(var $e={},ur=0,lr=o.parseGlyphPBF(Fe);ur<lr.length;ur+=1){var Fr=lr[ur];$e[Fr.id]=Fr}vt(null,$e)}})}var i=w,d=w,x=1e20;function w(ut,Y,ht,q,vt,It){this.fontSize=ut||24,this.buffer=Y===void 0?3:Y,this.cutoff=q||.25,this.fontFamily=vt||"sans-serif",this.fontWeight=It||"normal",this.radius=ht||8;var Vt=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Vt,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Vt*Vt),this.gridInner=new Float64Array(Vt*Vt),this.f=new Float64Array(Vt),this.d=new Float64Array(Vt),this.z=new Float64Array(Vt+1),this.v=new Int16Array(Vt),this.middle=Math.round(Vt/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(ut){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ut,this.buffer,this.middle);for(var Y=this.ctx.getImageData(0,0,this.size,this.size),ht=new Uint8ClampedArray(this.size*this.size),q=0;q<this.size*this.size;q++){var vt=Y.data[q*4+3]/255;this.gridOuter[q]=vt===1?0:vt===0?x:Math.pow(Math.max(0,.5-vt),2),this.gridInner[q]=vt===1?x:vt===0?0:Math.pow(Math.max(0,vt-.5),2)}for(C(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),C(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),q=0;q<this.size*this.size;q++){var It=this.gridOuter[q]-this.gridInner[q];ht[q]=Math.max(0,Math.min(255,Math.round(255-255*(It/this.radius+this.cutoff))))}return ht};function C(ut,Y,ht,q,vt,It,Vt){for(var se=0;se<Y;se++){for(var Me=0;Me<ht;Me++)q[Me]=ut[Me*Y+se];for(y(q,vt,It,Vt,ht),Me=0;Me<ht;Me++)ut[Me*Y+se]=vt[Me]}for(Me=0;Me<ht;Me++){for(se=0;se<Y;se++)q[se]=ut[Me*Y+se];for(y(q,vt,It,Vt,Y),se=0;se<Y;se++)ut[Me*Y+se]=Math.sqrt(vt[se])}}function y(ut,Y,ht,q,vt){ht[0]=0,q[0]=-x,q[1]=+x;for(var It=1,Vt=0;It<vt;It++){for(var se=(ut[It]+It*It-(ut[ht[Vt]]+ht[Vt]*ht[Vt]))/(2*It-2*ht[Vt]);se<=q[Vt];)Vt--,se=(ut[It]+It*It-(ut[ht[Vt]]+ht[Vt]*ht[Vt]))/(2*It-2*ht[Vt]);Vt++,ht[Vt]=It,q[Vt]=se,q[Vt+1]=+x}for(It=0,Vt=0;It<vt;It++){for(;q[Vt+1]<It;)Vt++;Y[It]=(It-ht[Vt])*(It-ht[Vt])+ut[ht[Vt]]}}i.default=d;var S=function(Y,ht){this.requestManager=Y,this.localIdeographFontFamily=ht,this.entries={}};S.prototype.setURL=function(Y){this.url=Y},S.prototype.getGlyphs=function(Y,ht){var q=this,vt=[];for(var It in Y)for(var Vt=0,se=Y[It];Vt<se.length;Vt+=1){var Me=se[Vt];vt.push({stack:It,id:Me})}o.asyncAll(vt,function(Fe,$e){var ur=Fe.stack,lr=Fe.id,Fr=q.entries[ur];Fr||(Fr=q.entries[ur]={glyphs:{},requests:{},ranges:{}});var jr=Fr.glyphs[lr];if(jr!==void 0){$e(null,{stack:ur,id:lr,glyph:jr});return}if(jr=q._tinySDF(Fr,ur,lr),jr){Fr.glyphs[lr]=jr,$e(null,{stack:ur,id:lr,glyph:jr});return}var Zr=Math.floor(lr/256);if(Zr*256>65535){$e(new Error("glyphs > 65535 not supported"));return}if(Fr.ranges[Zr]){$e(null,{stack:ur,id:lr,glyph:jr});return}var Wr=Fr.requests[Zr];Wr||(Wr=Fr.requests[Zr]=[],S.loadGlyphRange(ur,Zr,q.url,q.requestManager,function(Jr,dn){if(dn){for(var kn in dn)q._doesCharSupportLocalGlyph(+kn)||(Fr.glyphs[+kn]=dn[+kn]);Fr.ranges[Zr]=!0}for(var Hn=0,Kn=Wr;Hn<Kn.length;Hn+=1){var Qn=Kn[Hn];Qn(Jr,dn)}delete Fr.requests[Zr]})),Wr.push(function(Jr,dn){Jr?$e(Jr):dn&&$e(null,{stack:ur,id:lr,glyph:dn[lr]||null})})},function(Fe,$e){if(Fe)ht(Fe);else if($e){for(var ur={},lr=0,Fr=$e;lr<Fr.length;lr+=1){var jr=Fr[lr],Zr=jr.stack,Wr=jr.id,Jr=jr.glyph;(ur[Zr]||(ur[Zr]={}))[Wr]=Jr&&{id:Jr.id,bitmap:Jr.bitmap.clone(),metrics:Jr.metrics}}ht(null,ur)}})},S.prototype._doesCharSupportLocalGlyph=function(Y){return!!this.localIdeographFontFamily&&(o.isChar["CJK Unified Ideographs"](Y)||o.isChar["Hangul Syllables"](Y)||o.isChar.Hiragana(Y)||o.isChar.Katakana(Y))},S.prototype._tinySDF=function(Y,ht,q){var vt=this.localIdeographFontFamily;if(vt&&this._doesCharSupportLocalGlyph(q)){var It=Y.tinySDF;if(!It){var Vt="400";/bold/i.test(ht)?Vt="900":/medium/i.test(ht)?Vt="500":/light/i.test(ht)&&(Vt="200"),It=Y.tinySDF=new S.TinySDF(24,3,8,.25,vt,Vt)}return{id:q,bitmap:new o.AlphaImage({width:30,height:30},It.draw(String.fromCharCode(q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=c,S.TinySDF=i;var M=function(){this.specification=o.styleSpec.light.position};M.prototype.possiblyEvaluate=function(Y,ht){return o.sphericalToCartesian(Y.expression.evaluate(ht))},M.prototype.interpolate=function(Y,ht,q){return{x:o.number(Y.x,ht.x,q),y:o.number(Y.y,ht.y,q),z:o.number(Y.z,ht.z,q)}};var a=new o.Properties({anchor:new o.DataConstantProperty(o.styleSpec.light.anchor),position:new M,color:new o.DataConstantProperty(o.styleSpec.light.color),intensity:new o.DataConstantProperty(o.styleSpec.light.intensity)}),E="-transition",m=function(ut){function Y(ht){ut.call(this),this._transitionable=new o.Transitionable(a),this.setLight(ht),this._transitioning=this._transitionable.untransitioned()}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getLight=function(){return this._transitionable.serialize()},Y.prototype.setLight=function(q,vt){if(vt===void 0&&(vt={}),!this._validate(o.validateLight,q,vt))for(var It in q){var Vt=q[It];o.endsWith(It,E)?this._transitionable.setTransition(It.slice(0,-E.length),Vt):this._transitionable.setValue(It,Vt)}},Y.prototype.updateTransitions=function(q){this._transitioning=this._transitionable.transitioned(q,this._transitioning)},Y.prototype.hasTransition=function(){return this._transitioning.hasTransition()},Y.prototype.recalculate=function(q){this.properties=this._transitioning.possiblyEvaluate(q)},Y.prototype._validate=function(q,vt,It){return It&&It.validate===!1?!1:o.emitValidationErrors(this,q.call(o.validateStyle,o.extend({value:vt,style:{glyphs:!0,sprite:!0},styleSpec:o.styleSpec})))},Y}(o.Evented),k=function(Y,ht){this.width=Y,this.height=ht,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};k.prototype.getDash=function(Y,ht){var q=Y.join(",")+String(ht);return this.dashEntry[q]||(this.dashEntry[q]=this.addDash(Y,ht)),this.dashEntry[q]},k.prototype.getDashRanges=function(Y,ht,q){var vt=Y.length%2===1,It=[],Vt=vt?-Y[Y.length-1]*q:0,se=Y[0]*q,Me=!0;It.push({left:Vt,right:se,isDash:Me,zeroLength:Y[0]===0});for(var Fe=Y[0],$e=1;$e<Y.length;$e++){Me=!Me;var ur=Y[$e];Vt=Fe*q,Fe+=ur,se=Fe*q,It.push({left:Vt,right:se,isDash:Me,zeroLength:ur===0})}return It},k.prototype.addRoundDash=function(Y,ht,q){for(var vt=ht/2,It=-q;It<=q;It++)for(var Vt=this.nextRow+q+It,se=this.width*Vt,Me=0,Fe=Y[Me],$e=0;$e<this.width;$e++){$e/Fe.right>1&&(Fe=Y[++Me]);var ur=Math.abs($e-Fe.left),lr=Math.abs($e-Fe.right),Fr=Math.min(ur,lr),jr=void 0,Zr=It/q*(vt+1);if(Fe.isDash){var Wr=vt-Math.abs(Zr);jr=Math.sqrt(Fr*Fr+Wr*Wr)}else jr=vt-Math.sqrt(Fr*Fr+Zr*Zr);this.data[se+$e]=Math.max(0,Math.min(255,jr+128))}},k.prototype.addRegularDash=function(Y){for(var ht=Y.length-1;ht>=0;--ht){var q=Y[ht],vt=Y[ht+1];q.zeroLength?Y.splice(ht,1):vt&&vt.isDash===q.isDash&&(vt.left=q.left,Y.splice(ht,1))}var It=Y[0],Vt=Y[Y.length-1];It.isDash===Vt.isDash&&(It.left=Vt.left-this.width,Vt.right=It.right+this.width);for(var se=this.width*this.nextRow,Me=0,Fe=Y[Me],$e=0;$e<this.width;$e++){$e/Fe.right>1&&(Fe=Y[++Me]);var ur=Math.abs($e-Fe.left),lr=Math.abs($e-Fe.right),Fr=Math.min(ur,lr),jr=Fe.isDash?Fr:-Fr;this.data[se+$e]=Math.max(0,Math.min(255,jr+128))}},k.prototype.addDash=function(Y,ht){var q=ht?7:0,vt=2*q+1;if(this.nextRow+vt>this.height)return o.warnOnce("LineAtlas out of space"),null;for(var It=0,Vt=0;Vt<Y.length;Vt++)It+=Y[Vt];if(It!==0){var se=this.width/It,Me=this.getDashRanges(Y,this.width,se);ht?this.addRoundDash(Me,se,q):this.addRegularDash(Me)}var Fe={y:(this.nextRow+q+.5)/this.height,height:2*q/this.height,width:It};return this.nextRow+=vt,this.dirty=!0,Fe},k.prototype.bind=function(Y){var ht=Y.gl;this.texture?(ht.bindTexture(ht.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ht.texSubImage2D(ht.TEXTURE_2D,0,0,0,this.width,this.height,ht.ALPHA,ht.UNSIGNED_BYTE,this.data))):(this.texture=ht.createTexture(),ht.bindTexture(ht.TEXTURE_2D,this.texture),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_S,ht.REPEAT),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_WRAP_T,ht.REPEAT),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MIN_FILTER,ht.LINEAR),ht.texParameteri(ht.TEXTURE_2D,ht.TEXTURE_MAG_FILTER,ht.LINEAR),ht.texImage2D(ht.TEXTURE_2D,0,ht.ALPHA,this.width,this.height,0,ht.ALPHA,ht.UNSIGNED_BYTE,this.data))};var I=function ut(Y,ht){this.workerPool=Y,this.actors=[],this.currentActor=0,this.id=o.uniqueId();for(var q=this.workerPool.acquire(this.id),vt=0;vt<q.length;vt++){var It=q[vt],Vt=new ut.Actor(It,ht,this.id);Vt.name="Worker "+vt,this.actors.push(Vt)}};I.prototype.broadcast=function(Y,ht,q){q=q||function(){},o.asyncAll(this.actors,function(vt,It){vt.send(Y,ht,It)},q)},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach(function(Y){Y.remove()}),this.actors=[],this.workerPool.release(this.id)},I.Actor=o.Actor;function O(ut,Y,ht){var q=function(vt,It){if(vt)return ht(vt);if(It){var Vt=o.pick(o.extend(It,ut),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);It.vector_layers&&(Vt.vectorLayers=It.vector_layers,Vt.vectorLayerIds=Vt.vectorLayers.map(function(se){return se.id})),Vt.tiles=Y.canonicalizeTileset(Vt,ut.url),ht(null,Vt)}};return ut.url?o.getJSON(Y.transformRequest(Y.normalizeSourceURL(ut.url),o.ResourceType.Source),q):o.browser.frame(function(){return q(null,ut)})}var z=function(Y,ht,q){this.bounds=o.LngLatBounds.convert(this.validateBounds(Y)),this.minzoom=ht||0,this.maxzoom=q||24};z.prototype.validateBounds=function(Y){return!Array.isArray(Y)||Y.length!==4?[-180,-90,180,90]:[Math.max(-180,Y[0]),Math.max(-90,Y[1]),Math.min(180,Y[2]),Math.min(90,Y[3])]},z.prototype.contains=function(Y){var ht=Math.pow(2,Y.z),q={minX:Math.floor(o.mercatorXfromLng(this.bounds.getWest())*ht),minY:Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*ht),maxX:Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*ht),maxY:Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*ht)},vt=Y.x>=q.minX&&Y.x<q.maxX&&Y.y>=q.minY&&Y.y<q.maxY;return vt};var B=function(ut){function Y(ht,q,vt,It){if(ut.call(this),this.id=ht,this.dispatcher=vt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(q,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},q),this._collectResourceTiming=q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(It)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(vt,It){q._tileJSONRequest=null,q._loaded=!0,vt?q.fire(new o.ErrorEvent(vt)):It&&(o.extend(q,It),It.bounds&&(q.tileBounds=new z(It.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(It.tiles,q.map._requestManager._customAccessToken),o.postMapLoadEvent(It.tiles,q.map._getMapId(),q.map._requestManager._skuToken,q.map._requestManager._customAccessToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setSourceProperty=function(q){this._tileJSONRequest&&this._tileJSONRequest.cancel(),q();var vt=this.map.style.sourceCaches[this.id];vt.clearTiles(),this.load()},Y.prototype.setTiles=function(q){var vt=this;return this.setSourceProperty(function(){vt._options.tiles=q}),this},Y.prototype.setUrl=function(q){var vt=this;return this.setSourceProperty(function(){vt.url=q,vt._options.url=q}),this},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return o.extend({},this._options)},Y.prototype.loadTile=function(q,vt){var It=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme)),Vt={request:this.map._requestManager.transformRequest(It,o.ResourceType.Tile),uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,tileSize:this.tileSize*q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Vt.request.collectResourceTiming=this._collectResourceTiming,!q.actor||q.state==="expired"?(q.actor=this.dispatcher.getActor(),q.request=q.actor.send("loadTile",Vt,se.bind(this))):q.state==="loading"?q.reloadCallback=vt:q.request=q.actor.send("reloadTile",Vt,se.bind(this));function se(Me,Fe){if(delete q.request,q.aborted)return vt(null);if(Me&&Me.status!==404)return vt(Me);Fe&&Fe.resourceTiming&&(q.resourceTiming=Fe.resourceTiming),this.map._refreshExpiredTiles&&Fe&&q.setExpiryData(Fe),q.loadVectorData(Fe,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),vt(null),q.reloadCallback&&(this.loadTile(q,q.reloadCallback),q.reloadCallback=null)}},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.actor&&q.actor.send("abortTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.unloadTile=function(q){q.unloadVectorData(),q.actor&&q.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id},void 0)},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),F=function(ut){function Y(ht,q,vt,It){ut.call(this),this.id=ht,this.dispatcher=vt,this.setEventedParent(It),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},q),o.extend(this,o.pick(q,["url","scheme","tileSize"]))}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(vt,It){q._tileJSONRequest=null,q._loaded=!0,vt?q.fire(new o.ErrorEvent(vt)):It&&(o.extend(q,It),It.bounds&&(q.tileBounds=new z(It.bounds,q.minzoom,q.maxzoom)),o.postTurnstileEvent(It.tiles),o.postMapLoadEvent(It.tiles,q.map._getMapId(),q.map._requestManager._skuToken),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),q.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},Y.prototype.serialize=function(){return o.extend({},this._options)},Y.prototype.hasTile=function(q){return!this.tileBounds||this.tileBounds.contains(q.canonical)},Y.prototype.loadTile=function(q,vt){var It=this,Vt=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=o.getImage(this.map._requestManager.transformRequest(Vt,o.ResourceType.Tile),function(se,Me){if(delete q.request,q.aborted)q.state="unloaded",vt(null);else if(se)q.state="errored",vt(se);else if(Me){It.map._refreshExpiredTiles&&q.setExpiryData(Me),delete Me.cacheControl,delete Me.expires;var Fe=It.map.painter.context,$e=Fe.gl;q.texture=It.map.painter.getTileTexture(Me.width),q.texture?q.texture.update(Me,{useMipmap:!0}):(q.texture=new o.Texture(Fe,Me,$e.RGBA,{useMipmap:!0}),q.texture.bind($e.LINEAR,$e.CLAMP_TO_EDGE,$e.LINEAR_MIPMAP_NEAREST),Fe.extTextureFilterAnisotropic&&$e.texParameterf($e.TEXTURE_2D,Fe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Fe.extTextureFilterAnisotropicMax)),q.state="loaded",o.cacheEntryPossiblyAdded(It.dispatcher),vt(null)}})},Y.prototype.abortTile=function(q,vt){q.request&&(q.request.cancel(),delete q.request),vt()},Y.prototype.unloadTile=function(q,vt){q.texture&&this.map.painter.saveTileTexture(q.texture),vt()},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),_=function(ut){function Y(ht,q,vt,It){ut.call(this,ht,q,vt,It),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},q),this.encoding=q.encoding||"mapbox"}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},Y.prototype.loadTile=function(q,vt){var It=this.map._requestManager.normalizeTileURL(q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);q.request=o.getImage(this.map._requestManager.transformRequest(It,o.ResourceType.Tile),Vt.bind(this)),q.neighboringTiles=this._getNeighboringTiles(q.tileID);function Vt(Me,Fe){if(delete q.request,q.aborted)q.state="unloaded",vt(null);else if(Me)q.state="errored",vt(Me);else if(Fe){this.map._refreshExpiredTiles&&q.setExpiryData(Fe),delete Fe.cacheControl,delete Fe.expires;var $e=o.window.ImageBitmap&&Fe instanceof o.window.ImageBitmap&&o.offscreenCanvasSupported(),ur=$e?Fe:o.browser.getImageData(Fe,1),lr={uid:q.uid,coord:q.tileID,source:this.id,rawImageData:ur,encoding:this.encoding};(!q.actor||q.state==="expired")&&(q.actor=this.dispatcher.getActor(),q.actor.send("loadDEMTile",lr,se.bind(this)))}}function se(Me,Fe){Me&&(q.state="errored",vt(Me)),Fe&&(q.dem=Fe,q.needsHillshadePrepare=!0,q.state="loaded",vt(null))}},Y.prototype._getNeighboringTiles=function(q){var vt=q.canonical,It=Math.pow(2,vt.z),Vt=(vt.x-1+It)%It,se=vt.x===0?q.wrap-1:q.wrap,Me=(vt.x+1+It)%It,Fe=vt.x+1===It?q.wrap+1:q.wrap,$e={};return $e[new o.OverscaledTileID(q.overscaledZ,se,vt.z,Vt,vt.y).key]={backfilled:!1},$e[new o.OverscaledTileID(q.overscaledZ,Fe,vt.z,Me,vt.y).key]={backfilled:!1},vt.y>0&&($e[new o.OverscaledTileID(q.overscaledZ,se,vt.z,Vt,vt.y-1).key]={backfilled:!1},$e[new o.OverscaledTileID(q.overscaledZ,q.wrap,vt.z,vt.x,vt.y-1).key]={backfilled:!1},$e[new o.OverscaledTileID(q.overscaledZ,Fe,vt.z,Me,vt.y-1).key]={backfilled:!1}),vt.y+1<It&&($e[new o.OverscaledTileID(q.overscaledZ,se,vt.z,Vt,vt.y+1).key]={backfilled:!1},$e[new o.OverscaledTileID(q.overscaledZ,q.wrap,vt.z,vt.x,vt.y+1).key]={backfilled:!1},$e[new o.OverscaledTileID(q.overscaledZ,Fe,vt.z,Me,vt.y+1).key]={backfilled:!1}),$e},Y.prototype.unloadTile=function(q){q.demTexture&&this.map.painter.saveTileTexture(q.demTexture),q.fbo&&(q.fbo.destroy(),delete q.fbo),q.dem&&delete q.dem,delete q.neighboringTiles,q.state="unloaded",q.actor&&q.actor.send("removeDEMTile",{uid:q.uid,source:this.id})},Y}(F),N=function(ut){function Y(ht,q,vt,It){ut.call(this),this.id=ht,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=vt.getActor(),this.setEventedParent(It),this._data=q.data,this._options=o.extend({},q),this._collectResourceTiming=q.collectResourceTiming,this._resourceTiming=[],q.maxzoom!==void 0&&(this.maxzoom=q.maxzoom),q.type&&(this.type=q.type),q.attribution&&(this.attribution=q.attribution),this.promoteId=q.promoteId;var Vt=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:q.cluster||!1,geojsonVtOptions:{buffer:(q.buffer!==void 0?q.buffer:128)*Vt,tolerance:(q.tolerance!==void 0?q.tolerance:.375)*Vt,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:q.lineMetrics||!1,generateId:q.generateId||!1},superclusterOptions:{maxZoom:q.clusterMaxZoom!==void 0?Math.min(q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,q.clusterMinPoints||2),extent:o.EXTENT,radius:(q.clusterRadius||50)*Vt,log:!1,generateId:q.generateId||!1},clusterProperties:q.clusterProperties,filter:q.filter},q.workerOptions)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(vt){if(vt){q.fire(new o.ErrorEvent(vt));return}var It={dataType:"source",sourceDataType:"metadata"};q._collectResourceTiming&&q._resourceTiming&&q._resourceTiming.length>0&&(It.resourceTiming=q._resourceTiming,q._resourceTiming=[]),q.fire(new o.Event("data",It))})},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setData=function(q){var vt=this;return this._data=q,this.fire(new o.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(It){if(It){vt.fire(new o.ErrorEvent(It));return}var Vt={dataType:"source",sourceDataType:"content"};vt._collectResourceTiming&&vt._resourceTiming&&vt._resourceTiming.length>0&&(Vt.resourceTiming=vt._resourceTiming,vt._resourceTiming=[]),vt.fire(new o.Event("data",Vt))}),this},Y.prototype.getClusterExpansionZoom=function(q,vt){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:q,source:this.id},vt),this},Y.prototype.getClusterChildren=function(q,vt){return this.actor.send("geojson.getClusterChildren",{clusterId:q,source:this.id},vt),this},Y.prototype.getClusterLeaves=function(q,vt,It,Vt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:q,limit:vt,offset:It},Vt),this},Y.prototype._updateWorkerData=function(q){var vt=this;this._loaded=!1;var It=o.extend({},this.workerOptions),Vt=this._data;typeof Vt=="string"?(It.request=this.map._requestManager.transformRequest(o.browser.resolveURL(Vt),o.ResourceType.Source),It.request.collectResourceTiming=this._collectResourceTiming):It.data=JSON.stringify(Vt),this.actor.send(this.type+".loadData",It,function(se,Me){vt._removed||Me&&Me.abandoned||(vt._loaded=!0,Me&&Me.resourceTiming&&Me.resourceTiming[vt.id]&&(vt._resourceTiming=Me.resourceTiming[vt.id].slice(0)),vt.actor.send(vt.type+".coalesce",{source:It.source},null),q(se))})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.loadTile=function(q,vt){var It=this,Vt=q.actor?"reloadTile":"loadTile";q.actor=this.actor;var se={type:this.type,uid:q.uid,tileID:q.tileID,zoom:q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};q.request=this.actor.send(Vt,se,function(Me,Fe){return delete q.request,q.unloadVectorData(),q.aborted?vt(null):Me?vt(Me):(q.loadVectorData(Fe,It.map.painter,Vt==="reloadTile"),vt(null))})},Y.prototype.abortTile=function(q){q.request&&(q.request.cancel(),delete q.request),q.aborted=!0},Y.prototype.unloadTile=function(q){q.unloadVectorData(),this.actor.send("removeTile",{uid:q.uid,type:this.type,source:this.id})},Y.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},Y.prototype.serialize=function(){return o.extend({},this._options,{type:this.type,data:this._data})},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented),G=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(ut){function Y(ht,q,vt,It){ut.call(this),this.id=ht,this.dispatcher=vt,this.coordinates=q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(It),this.options=q}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(q,vt){var It=this;this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),function(Vt,se){It._loaded=!0,Vt?It.fire(new o.ErrorEvent(Vt)):se&&(It.image=se,q&&(It.coordinates=q),vt&&vt(),It._finishLoading())})},Y.prototype.loaded=function(){return this._loaded},Y.prototype.updateImage=function(q){var vt=this;return!this.image||!q.url?this:(this.options.url=q.url,this.load(q.coordinates,function(){vt.texture=null}),this)},Y.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))},Y.prototype.onAdd=function(q){this.map=q,this.load()},Y.prototype.setCoordinates=function(q){var vt=this;this.coordinates=q;var It=q.map(o.MercatorCoordinate.fromLngLat);this.tileID=$(It),this.minzoom=this.maxzoom=this.tileID.z;var Vt=It.map(function(se){return vt.tileID.getTilePoint(se)._round()});return this._boundsArray=new o.StructArrayLayout4i8,this._boundsArray.emplaceBack(Vt[0].x,Vt[0].y,0,0),this._boundsArray.emplaceBack(Vt[1].x,Vt[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(Vt[3].x,Vt[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(Vt[2].x,Vt[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var q=this.map.painter.context,vt=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new o.Texture(q,this.image,vt.RGBA),this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE));for(var It in this.tiles){var Vt=this.tiles[It];Vt.state!=="loaded"&&(Vt.state="loaded",Vt.texture=this.texture)}}},Y.prototype.loadTile=function(q,vt){this.tileID&&this.tileID.equals(q.tileID.canonical)?(this.tiles[String(q.tileID.wrap)]=q,q.buckets={},vt(null)):(q.state="errored",vt(null))},Y.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return!1},Y}(o.Evented);function $(ut){for(var Y=1/0,ht=1/0,q=-1/0,vt=-1/0,It=0,Vt=ut;It<Vt.length;It+=1){var se=Vt[It];Y=Math.min(Y,se.x),ht=Math.min(ht,se.y),q=Math.max(q,se.x),vt=Math.max(vt,se.y)}var Me=q-Y,Fe=vt-ht,$e=Math.max(Me,Fe),ur=Math.max(0,Math.floor(-Math.log($e)/Math.LN2)),lr=Math.pow(2,ur);return new o.CanonicalTileID(ur,Math.floor((Y+q)/2*lr),Math.floor((ht+vt)/2*lr))}var et=function(ut){function Y(ht,q,vt,It){ut.call(this,ht,q,vt,It),this.roundZoom=!0,this.type="video",this.options=q}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){var q=this;this._loaded=!1;var vt=this.options;this.urls=[];for(var It=0,Vt=vt.urls;It<Vt.length;It+=1){var se=Vt[It];this.urls.push(this.map._requestManager.transformRequest(se,o.ResourceType.Source).url)}o.getVideo(this.urls,function(Me,Fe){q._loaded=!0,Me?q.fire(new o.ErrorEvent(Me)):Fe&&(q.video=Fe,q.video.loop=!0,q.video.addEventListener("playing",function(){q.map.triggerRepaint()}),q.map&&q.video.play(),q._finishLoading())})},Y.prototype.pause=function(){this.video&&this.video.pause()},Y.prototype.play=function(){this.video&&this.video.play()},Y.prototype.seek=function(q){if(this.video){var vt=this.video.seekable;q<vt.start(0)||q>vt.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+vt.start(0)+" and "+vt.end(0)+"-second mark."))):this.video.currentTime=q}},Y.prototype.getVideo=function(){return this.video},Y.prototype.onAdd=function(q){this.map||(this.map=q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},Y.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var q=this.map.painter.context,vt=q.gl;this.boundsBuffer||(this.boundsBuffer=q.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),vt.texSubImage2D(vt.TEXTURE_2D,0,0,0,vt.RGBA,vt.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(q,this.video,vt.RGBA),this.texture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE));for(var It in this.tiles){var Vt=this.tiles[It];Vt.state!=="loaded"&&(Vt.state="loaded",Vt.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this.video&&!this.video.paused},Y}(X),ot=function(ut){function Y(ht,q,vt,It){ut.call(this,ht,q,vt,It),q.coordinates?(!Array.isArray(q.coordinates)||q.coordinates.length!==4||q.coordinates.some(function(Vt){return!Array.isArray(Vt)||Vt.length!==2||Vt.some(function(se){return typeof se!="number"})}))&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+ht,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+ht,null,'missing required property "coordinates"'))),q.animate&&typeof q.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+ht,null,'optional "animate" property must be a boolean value'))),q.canvas?typeof q.canvas!="string"&&!(q.canvas instanceof o.window.HTMLCanvasElement)&&this.fire(new o.ErrorEvent(new o.ValidationError("sources."+ht,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError("sources."+ht,null,'missing required property "canvas"'))),this.options=q,this.animate=q.animate!==void 0?q.animate:!0}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},Y.prototype.getCanvas=function(){return this.canvas},Y.prototype.onAdd=function(q){this.map=q,this.load(),this.canvas&&this.animate&&this.play()},Y.prototype.onRemove=function(){this.pause()},Y.prototype.prepare=function(){var q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var vt=this.map.painter.context,It=vt.gl;this.boundsBuffer||(this.boundsBuffer=vt.createVertexBuffer(this._boundsArray,G.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(vt,this.canvas,It.RGBA,{premultiply:!0});for(var Vt in this.tiles){var se=this.tiles[Vt];se.state!=="loaded"&&(se.state="loaded",se.texture=this.texture)}}},Y.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},Y.prototype.hasTransition=function(){return this._playing},Y.prototype._hasInvalidDimensions=function(){for(var q=0,vt=[this.canvas.width,this.canvas.height];q<vt.length;q+=1){var It=vt[q];if(isNaN(It)||It<=0)return!0}return!1},Y}(X),nt={vector:B,raster:F,"raster-dem":_,geojson:N,video:et,image:X,canvas:ot},Z=function(ut,Y,ht,q){var vt=new nt[Y.type](ut,Y,ht,q);if(vt.id!==ut)throw new Error("Expected Source id to be "+ut+" instead of "+vt.id);return o.bindAll(["load","abort","unload","serialize","prepare"],vt),vt},Q=function(ut){return nt[ut]},W=function(ut,Y){nt[ut]=Y};function J(ut,Y){var ht=o.identity([]);return o.translate(ht,ht,[1,1,0]),o.scale(ht,ht,[ut.width*.5,ut.height*.5,1]),o.multiply(ht,ht,ut.calculatePosMatrix(Y.toUnwrapped()))}function it(ut,Y,ht){if(ut)for(var q=0,vt=ut;q<vt.length;q+=1){var It=vt[q],Vt=Y[It];if(Vt&&Vt.source===ht&&Vt.type==="fill-extrusion")return!0}else for(var se in Y){var Me=Y[se];if(Me.source===ht&&Me.type==="fill-extrusion")return!0}return!1}function K(ut,Y,ht,q,vt,It){var Vt=it(vt&&vt.layers,Y,ut.id),se=It.maxPitchScaleFactor(),Me=ut.tilesIn(q,se,Vt);Me.sort(tt);for(var Fe=[],$e=0,ur=Me;$e<ur.length;$e+=1){var lr=ur[$e];Fe.push({wrappedTileID:lr.tileID.wrapped().key,queryResults:lr.tile.queryRenderedFeatures(Y,ht,ut._state,lr.queryGeometry,lr.cameraQueryGeometry,lr.scale,vt,It,se,J(ut.transform,lr.tileID))})}var Fr=lt(Fe);for(var jr in Fr)Fr[jr].forEach(function(Zr){var Wr=Zr.feature,Jr=ut.getFeatureState(Wr.layer["source-layer"],Wr.id);Wr.source=Wr.layer.source,Wr.layer["source-layer"]&&(Wr.sourceLayer=Wr.layer["source-layer"]),Wr.state=Jr});return Fr}function H(ut,Y,ht,q,vt,It,Vt){for(var se={},Me=It.queryRenderedSymbols(q),Fe=[],$e=0,ur=Object.keys(Me).map(Number);$e<ur.length;$e+=1){var lr=ur[$e];Fe.push(Vt[lr])}Fe.sort(tt);for(var Fr=function(){var dn=Zr[jr],kn=dn.featureIndex.lookupSymbolFeatures(Me[dn.bucketInstanceId],Y,dn.bucketIndex,dn.sourceLayerIndex,vt.filter,vt.layers,vt.availableImages,ut);for(var Hn in kn){var Kn=se[Hn]=se[Hn]||[],Qn=kn[Hn];Qn.sort(function(ha,xa){var ga=dn.featureSortOrder;if(ga){var Fa=ga.indexOf(ha.featureIndex),ti=ga.indexOf(xa.featureIndex);return ti-Fa}else return xa.featureIndex-ha.featureIndex});for(var Xn=0,qn=Qn;Xn<qn.length;Xn+=1){var oa=qn[Xn];Kn.push(oa)}}},jr=0,Zr=Fe;jr<Zr.length;jr+=1)Fr();var Wr=function(dn){se[dn].forEach(function(kn){var Hn=kn.feature,Kn=ut[dn],Qn=ht[Kn.source],Xn=Qn.getFeatureState(Hn.layer["source-layer"],Hn.id);Hn.source=Hn.layer.source,Hn.layer["source-layer"]&&(Hn.sourceLayer=Hn.layer["source-layer"]),Hn.state=Xn})};for(var Jr in se)Wr(Jr);return se}function at(ut,Y){for(var ht=ut.getRenderableIds().map(function(Me){return ut.getTileByID(Me)}),q=[],vt={},It=0;It<ht.length;It++){var Vt=ht[It],se=Vt.tileID.canonical.key;vt[se]||(vt[se]=!0,Vt.querySourceFeatures(q,Y))}return q}function tt(ut,Y){var ht=ut.tileID,q=Y.tileID;return ht.overscaledZ-q.overscaledZ||ht.canonical.y-q.canonical.y||ht.wrap-q.wrap||ht.canonical.x-q.canonical.x}function lt(ut){for(var Y={},ht={},q=0,vt=ut;q<vt.length;q+=1){var It=vt[q],Vt=It.queryResults,se=It.wrappedTileID,Me=ht[se]=ht[se]||{};for(var Fe in Vt)for(var $e=Vt[Fe],ur=Me[Fe]=Me[Fe]||{},lr=Y[Fe]=Y[Fe]||[],Fr=0,jr=$e;Fr<jr.length;Fr+=1){var Zr=jr[Fr];ur[Zr.featureIndex]||(ur[Zr.featureIndex]=!0,lr.push(Zr))}}return Y}var dt=function(Y,ht){this.max=Y,this.onRemove=ht,this.reset()};dt.prototype.reset=function(){for(var Y in this.data)for(var ht=0,q=this.data[Y];ht<q.length;ht+=1){var vt=q[ht];vt.timeout&&clearTimeout(vt.timeout),this.onRemove(vt.value)}return this.data={},this.order=[],this},dt.prototype.add=function(Y,ht,q){var vt=this,It=Y.wrapped().key;this.data[It]===void 0&&(this.data[It]=[]);var Vt={value:ht,timeout:void 0};if(q!==void 0&&(Vt.timeout=setTimeout(function(){vt.remove(Y,Vt)},q)),this.data[It].push(Vt),this.order.push(It),this.order.length>this.max){var se=this._getAndRemoveByKey(this.order[0]);se&&this.onRemove(se)}return this},dt.prototype.has=function(Y){return Y.wrapped().key in this.data},dt.prototype.getAndRemove=function(Y){return this.has(Y)?this._getAndRemoveByKey(Y.wrapped().key):null},dt.prototype._getAndRemoveByKey=function(Y){var ht=this.data[Y].shift();return ht.timeout&&clearTimeout(ht.timeout),this.data[Y].length===0&&delete this.data[Y],this.order.splice(this.order.indexOf(Y),1),ht.value},dt.prototype.getByKey=function(Y){var ht=this.data[Y];return ht?ht[0].value:null},dt.prototype.get=function(Y){if(!this.has(Y))return null;var ht=this.data[Y.wrapped().key][0];return ht.value},dt.prototype.remove=function(Y,ht){if(!this.has(Y))return this;var q=Y.wrapped().key,vt=ht===void 0?0:this.data[q].indexOf(ht),It=this.data[q][vt];return this.data[q].splice(vt,1),It.timeout&&clearTimeout(It.timeout),this.data[q].length===0&&delete this.data[q],this.onRemove(It.value),this.order.splice(this.order.indexOf(q),1),this},dt.prototype.setMaxSize=function(Y){for(this.max=Y;this.order.length>this.max;){var ht=this._getAndRemoveByKey(this.order[0]);ht&&this.onRemove(ht)}return this},dt.prototype.filter=function(Y){var ht=[];for(var q in this.data)for(var vt=0,It=this.data[q];vt<It.length;vt+=1){var Vt=It[vt];Y(Vt.value)||ht.push(Vt)}for(var se=0,Me=ht;se<Me.length;se+=1){var Fe=Me[se];this.remove(Fe.value.tileID,Fe)}};var mt=function(Y,ht,q){this.context=Y;var vt=Y.gl;this.buffer=vt.createBuffer(),this.dynamicDraw=!!q,this.context.unbindVAO(),Y.bindElementBuffer.set(this.buffer),vt.bufferData(vt.ELEMENT_ARRAY_BUFFER,ht.arrayBuffer,this.dynamicDraw?vt.DYNAMIC_DRAW:vt.STATIC_DRAW),this.dynamicDraw||delete ht.arrayBuffer};mt.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},mt.prototype.updateData=function(Y){var ht=this.context.gl;this.context.unbindVAO(),this.bind(),ht.bufferSubData(ht.ELEMENT_ARRAY_BUFFER,0,Y.arrayBuffer)},mt.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var gt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Mt=function(Y,ht,q,vt){this.length=ht.length,this.attributes=q,this.itemSize=ht.bytesPerElement,this.dynamicDraw=vt,this.context=Y;var It=Y.gl;this.buffer=It.createBuffer(),Y.bindVertexBuffer.set(this.buffer),It.bufferData(It.ARRAY_BUFFER,ht.arrayBuffer,this.dynamicDraw?It.DYNAMIC_DRAW:It.STATIC_DRAW),this.dynamicDraw||delete ht.arrayBuffer};Mt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Mt.prototype.updateData=function(Y){var ht=this.context.gl;this.bind(),ht.bufferSubData(ht.ARRAY_BUFFER,0,Y.arrayBuffer)},Mt.prototype.enableAttributes=function(Y,ht){for(var q=0;q<this.attributes.length;q++){var vt=this.attributes[q],It=ht.attributes[vt.name];It!==void 0&&Y.enableVertexAttribArray(It)}},Mt.prototype.setVertexAttribPointers=function(Y,ht,q){for(var vt=0;vt<this.attributes.length;vt++){var It=this.attributes[vt],Vt=ht.attributes[It.name];Vt!==void 0&&Y.vertexAttribPointer(Vt,It.components,Y[gt[It.type]],!1,this.itemSize,It.offset+this.itemSize*(q||0))}},Mt.prototype.destroy=function(){var Y=this.context.gl;this.buffer&&(Y.deleteBuffer(this.buffer),delete this.buffer)};var Lt=function(Y){this.gl=Y.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(Y){},Lt.prototype.getDefault=function(){return this.default},Lt.prototype.setDefault=function(){this.set(this.default)};var zt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return o.Color.transparent},Y.prototype.set=function(q){var vt=this.current;q.r===vt.r&&q.g===vt.g&&q.b===vt.b&&q.a===vt.a&&!this.dirty||(this.gl.clearColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(Lt),xt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 1},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.clearDepth(q),this.current=q,this.dirty=!1)},Y}(Lt),Ct=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 0},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.clearStencil(q),this.current=q,this.dirty=!1)},Y}(Lt),wt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[!0,!0,!0,!0]},Y.prototype.set=function(q){var vt=this.current;q[0]===vt[0]&&q[1]===vt[1]&&q[2]===vt[2]&&q[3]===vt[3]&&!this.dirty||(this.gl.colorMask(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(Lt),Rt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!0},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.depthMask(q),this.current=q,this.dirty=!1)},Y}(Lt),Tt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 255},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.stencilMask(q),this.current=q,this.dirty=!1)},Y}(Lt),Bt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},Y.prototype.set=function(q){var vt=this.current;q.func===vt.func&&q.ref===vt.ref&&q.mask===vt.mask&&!this.dirty||(this.gl.stencilFunc(q.func,q.ref,q.mask),this.current=q,this.dirty=!1)},Y}(Lt),Gt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.KEEP,q.KEEP,q.KEEP]},Y.prototype.set=function(q){var vt=this.current;q[0]===vt[0]&&q[1]===vt[1]&&q[2]===vt[2]&&!this.dirty||(this.gl.stencilOp(q[0],q[1],q[2]),this.current=q,this.dirty=!1)},Y}(Lt),te=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;q?vt.enable(vt.STENCIL_TEST):vt.disable(vt.STENCIL_TEST),this.current=q,this.dirty=!1}},Y}(Lt),Wt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return[0,1]},Y.prototype.set=function(q){var vt=this.current;q[0]===vt[0]&&q[1]===vt[1]&&!this.dirty||(this.gl.depthRange(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(Lt),jt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;q?vt.enable(vt.DEPTH_TEST):vt.disable(vt.DEPTH_TEST),this.current=q,this.dirty=!1}},Y}(Lt),ie=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.LESS},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.depthFunc(q),this.current=q,this.dirty=!1)},Y}(Lt),ue=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;q?vt.enable(vt.BLEND):vt.disable(vt.BLEND),this.current=q,this.dirty=!1}},Y}(Lt),fe=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[q.ONE,q.ZERO]},Y.prototype.set=function(q){var vt=this.current;q[0]===vt[0]&&q[1]===vt[1]&&!this.dirty||(this.gl.blendFunc(q[0],q[1]),this.current=q,this.dirty=!1)},Y}(Lt),pe=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return o.Color.transparent},Y.prototype.set=function(q){var vt=this.current;q.r===vt.r&&q.g===vt.g&&q.b===vt.b&&q.a===vt.a&&!this.dirty||(this.gl.blendColor(q.r,q.g,q.b,q.a),this.current=q,this.dirty=!1)},Y}(Lt),Te=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.FUNC_ADD},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.blendEquation(q),this.current=q,this.dirty=!1)},Y}(Lt),Qt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;q?vt.enable(vt.CULL_FACE):vt.disable(vt.CULL_FACE),this.current=q,this.dirty=!1}},Y}(Lt),Pt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.BACK},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.cullFace(q),this.current=q,this.dirty=!1)},Y}(Lt),Ot=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.CCW},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.frontFace(q),this.current=q,this.dirty=!1)},Y}(Lt),Nt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.useProgram(q),this.current=q,this.dirty=!1)},Y}(Lt),Ht=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return this.gl.TEXTURE0},Y.prototype.set=function(q){q===this.current&&!this.dirty||(this.gl.activeTexture(q),this.current=q,this.dirty=!1)},Y}(Lt),St=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){var q=this.gl;return[0,0,q.drawingBufferWidth,q.drawingBufferHeight]},Y.prototype.set=function(q){var vt=this.current;q[0]===vt[0]&&q[1]===vt[1]&&q[2]===vt[2]&&q[3]===vt[3]&&!this.dirty||(this.gl.viewport(q[0],q[1],q[2],q[3]),this.current=q,this.dirty=!1)},Y}(Lt),kt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.bindFramebuffer(vt.FRAMEBUFFER,q),this.current=q,this.dirty=!1}},Y}(Lt),Ft=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.bindRenderbuffer(vt.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(Lt),At=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.bindTexture(vt.TEXTURE_2D,q),this.current=q,this.dirty=!1}},Y}(Lt),ft=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.bindBuffer(vt.ARRAY_BUFFER,q),this.current=q,this.dirty=!1}},Y}(Lt),pt=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){var vt=this.gl;vt.bindBuffer(vt.ELEMENT_ARRAY_BUFFER,q),this.current=q,this.dirty=!1},Y}(Lt),Dt=function(ut){function Y(ht){ut.call(this,ht),this.vao=ht.extVertexArrayObject}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y.prototype.set=function(q){!this.vao||q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(q),this.current=q,this.dirty=!1)},Y}(Lt),Ut=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return 4},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.pixelStorei(vt.UNPACK_ALIGNMENT,q),this.current=q,this.dirty=!1}},Y}(Lt),$t=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.pixelStorei(vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,q),this.current=q,this.dirty=!1}},Y}(Lt),re=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return!1},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){var vt=this.gl;vt.pixelStorei(vt.UNPACK_FLIP_Y_WEBGL,q),this.current=q,this.dirty=!1}},Y}(Lt),Be=function(ut){function Y(ht,q){ut.call(this,ht),this.context=ht,this.parent=q}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getDefault=function(){return null},Y}(Lt),We=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.setDirty=function(){this.dirty=!0},Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var vt=this.gl;vt.framebufferTexture2D(vt.FRAMEBUFFER,vt.COLOR_ATTACHMENT0,vt.TEXTURE_2D,q,0),this.current=q,this.dirty=!1}},Y}(Be),me=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.set=function(q){if(!(q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var vt=this.gl;vt.framebufferRenderbuffer(vt.FRAMEBUFFER,vt.DEPTH_ATTACHMENT,vt.RENDERBUFFER,q),this.current=q,this.dirty=!1}},Y}(Be),Se=function(Y,ht,q,vt){this.context=Y,this.width=ht,this.height=q;var It=Y.gl,Vt=this.framebuffer=It.createFramebuffer();this.colorAttachment=new We(Y,Vt),vt&&(this.depthAttachment=new me(Y,Vt))};Se.prototype.destroy=function(){var Y=this.context.gl,ht=this.colorAttachment.get();if(ht&&Y.deleteTexture(ht),this.depthAttachment){var q=this.depthAttachment.get();q&&Y.deleteRenderbuffer(q)}Y.deleteFramebuffer(this.framebuffer)};var je=519,vr=function(Y,ht,q){this.func=Y,this.mask=ht,this.range=q};vr.ReadOnly=!1,vr.ReadWrite=!0,vr.disabled=new vr(je,vr.ReadOnly,[0,1]);var he=519,Ye=7680,Qe=function(Y,ht,q,vt,It,Vt){this.test=Y,this.ref=ht,this.mask=q,this.fail=vt,this.depthFail=It,this.pass=Vt};Qe.disabled=new Qe({func:he,mask:0},0,0,Ye,Ye,Ye);var mr=0,ir=1,ve=771,ne=function(Y,ht,q){this.blendFunction=Y,this.blendColor=ht,this.mask=q};ne.Replace=[ir,mr],ne.disabled=new ne(ne.Replace,o.Color.transparent,[!1,!1,!1,!1]),ne.unblended=new ne(ne.Replace,o.Color.transparent,[!0,!0,!0,!0]),ne.alphaBlended=new ne([ir,ve],o.Color.transparent,[!0,!0,!0,!0]);var ge=1029,Ae=2305,Re=function(Y,ht,q){this.enable=Y,this.mode=ht,this.frontFace=q};Re.disabled=new Re(!1,ge,Ae),Re.backCCW=new Re(!0,ge,Ae);var ze=function(Y){this.gl=Y,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new zt(this),this.clearDepth=new xt(this),this.clearStencil=new Ct(this),this.colorMask=new wt(this),this.depthMask=new Rt(this),this.stencilMask=new Tt(this),this.stencilFunc=new Bt(this),this.stencilOp=new Gt(this),this.stencilTest=new te(this),this.depthRange=new Wt(this),this.depthTest=new jt(this),this.depthFunc=new ie(this),this.blend=new ue(this),this.blendFunc=new fe(this),this.blendColor=new pe(this),this.blendEquation=new Te(this),this.cullFace=new Qt(this),this.cullFaceSide=new Pt(this),this.frontFace=new Ot(this),this.program=new Nt(this),this.activeTexture=new Ht(this),this.viewport=new St(this),this.bindFramebuffer=new kt(this),this.bindRenderbuffer=new Ft(this),this.bindTexture=new At(this),this.bindVertexBuffer=new ft(this),this.bindElementBuffer=new pt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Dt(this),this.pixelStoreUnpack=new Ut(this),this.pixelStoreUnpackPremultiplyAlpha=new $t(this),this.pixelStoreUnpackFlipY=new re(this),this.extTextureFilterAnisotropic=Y.getExtension("EXT_texture_filter_anisotropic")||Y.getExtension("MOZ_EXT_texture_filter_anisotropic")||Y.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=Y.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=Y.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(Y.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=Y.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=Y.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=Y.getParameter(Y.MAX_TEXTURE_SIZE)};ze.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ze.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ze.prototype.createIndexBuffer=function(Y,ht){return new mt(this,Y,ht)},ze.prototype.createVertexBuffer=function(Y,ht,q){return new Mt(this,Y,ht,q)},ze.prototype.createRenderbuffer=function(Y,ht,q){var vt=this.gl,It=vt.createRenderbuffer();return this.bindRenderbuffer.set(It),vt.renderbufferStorage(vt.RENDERBUFFER,Y,ht,q),this.bindRenderbuffer.set(null),It},ze.prototype.createFramebuffer=function(Y,ht,q){return new Se(this,Y,ht,q)},ze.prototype.clear=function(Y){var ht=Y.color,q=Y.depth,vt=this.gl,It=0;ht&&(It|=vt.COLOR_BUFFER_BIT,this.clearColor.set(ht),this.colorMask.set([!0,!0,!0,!0])),typeof q<"u"&&(It|=vt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(q),this.depthMask.set(!0)),vt.clear(It)},ze.prototype.setCullFace=function(Y){Y.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(Y.mode),this.frontFace.set(Y.frontFace))},ze.prototype.setDepthMode=function(Y){Y.func===this.gl.ALWAYS&&!Y.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(Y.func),this.depthMask.set(Y.mask),this.depthRange.set(Y.range))},ze.prototype.setStencilMode=function(Y){Y.test.func===this.gl.ALWAYS&&!Y.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(Y.mask),this.stencilOp.set([Y.fail,Y.depthFail,Y.pass]),this.stencilFunc.set({func:Y.test.func,ref:Y.ref,mask:Y.test.mask}))},ze.prototype.setColorMode=function(Y){o.deepEqual(Y.blendFunction,ne.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(Y.blendFunction),this.blendColor.set(Y.blendColor)),this.colorMask.set(Y.mask)},ze.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ke=function(ut){function Y(ht,q,vt){var It=this;ut.call(this),this.id=ht,this.dispatcher=vt,this.on("data",function(Vt){Vt.dataType==="source"&&Vt.sourceDataType==="metadata"&&(It._sourceLoaded=!0),It._sourceLoaded&&!It._paused&&Vt.dataType==="source"&&Vt.sourceDataType==="content"&&(It.reload(),It.transform&&It.update(It.transform))}),this.on("error",function(){It._sourceErrored=!0}),this._source=Z(ht,q,vt,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new o.SourceFeatureState}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){this.map=q,this._maxTileCacheSize=q?q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(q)},Y.prototype.onRemove=function(q){this._source&&this._source.onRemove&&this._source.onRemove(q)},Y.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var q in this._tiles){var vt=this._tiles[q];if(vt.state!=="loaded"&&vt.state!=="errored")return!1}return!0},Y.prototype.getSource=function(){return this._source},Y.prototype.pause=function(){this._paused=!0},Y.prototype.resume=function(){if(this._paused){var q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,q&&this.reload(),this.transform&&this.update(this.transform)}},Y.prototype._loadTile=function(q,vt){return this._source.loadTile(q,vt)},Y.prototype._unloadTile=function(q){if(this._source.unloadTile)return this._source.unloadTile(q,function(){})},Y.prototype._abortTile=function(q){if(this._source.abortTile)return this._source.abortTile(q,function(){})},Y.prototype.serialize=function(){return this._source.serialize()},Y.prototype.prepare=function(q){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var vt in this._tiles){var It=this._tiles[vt];It.upload(q),It.prepare(this.map.style.imageManager)}},Y.prototype.getIds=function(){return o.values(this._tiles).map(function(q){return q.tileID}).sort(_e).map(function(q){return q.key})},Y.prototype.getRenderableIds=function(q){var vt=this,It=[];for(var Vt in this._tiles)this._isIdRenderable(Vt,q)&&It.push(this._tiles[Vt]);return q?It.sort(function(se,Me){var Fe=se.tileID,$e=Me.tileID,ur=new o.Point(Fe.canonical.x,Fe.canonical.y)._rotate(vt.transform.angle),lr=new o.Point($e.canonical.x,$e.canonical.y)._rotate(vt.transform.angle);return Fe.overscaledZ-$e.overscaledZ||lr.y-ur.y||lr.x-ur.x}).map(function(se){return se.tileID.key}):It.map(function(se){return se.tileID}).sort(_e).map(function(se){return se.key})},Y.prototype.hasRenderableParent=function(q){var vt=this.findLoadedParent(q,0);return vt?this._isIdRenderable(vt.tileID.key):!1},Y.prototype._isIdRenderable=function(q,vt){return this._tiles[q]&&this._tiles[q].hasData()&&!this._coveredTiles[q]&&(vt||!this._tiles[q].holdingForFade())},Y.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var q in this._tiles)this._tiles[q].state!=="errored"&&this._reloadTile(q,"reloading")},Y.prototype._reloadTile=function(q,vt){var It=this._tiles[q];It&&(It.state!=="loading"&&(It.state=vt),this._loadTile(It,this._tileLoaded.bind(this,It,q,vt)))},Y.prototype._tileLoaded=function(q,vt,It,Vt){if(Vt){q.state="errored",Vt.status!==404?this._source.fire(new o.ErrorEvent(Vt,{tile:q})):this.update(this.transform);return}q.timeAdded=o.browser.now(),It==="expired"&&(q.refreshedUponExpiration=!0),this._setTileReloadTimer(vt,q),this.getSource().type==="raster-dem"&&q.dem&&this._backfillDEM(q),this._state.initializeTileState(q,this.map?this.map.painter:null),this._source.fire(new o.Event("data",{dataType:"source",tile:q,coord:q.tileID}))},Y.prototype._backfillDEM=function(q){for(var vt=this.getRenderableIds(),It=0;It<vt.length;It++){var Vt=vt[It];if(q.neighboringTiles&&q.neighboringTiles[Vt]){var se=this.getTileByID(Vt);Me(q,se),Me(se,q)}}function Me(Fe,$e){Fe.needsHillshadePrepare=!0;var ur=$e.tileID.canonical.x-Fe.tileID.canonical.x,lr=$e.tileID.canonical.y-Fe.tileID.canonical.y,Fr=Math.pow(2,Fe.tileID.canonical.z),jr=$e.tileID.key;ur===0&&lr===0||Math.abs(lr)>1||(Math.abs(ur)>1&&(Math.abs(ur+Fr)===1?ur+=Fr:Math.abs(ur-Fr)===1&&(ur-=Fr)),!(!$e.dem||!Fe.dem)&&(Fe.dem.backfillBorder($e.dem,ur,lr),Fe.neighboringTiles&&Fe.neighboringTiles[jr]&&(Fe.neighboringTiles[jr].backfilled=!0)))}},Y.prototype.getTile=function(q){return this.getTileByID(q.key)},Y.prototype.getTileByID=function(q){return this._tiles[q]},Y.prototype._retainLoadedChildren=function(q,vt,It,Vt){for(var se in this._tiles){var Me=this._tiles[se];if(!(Vt[se]||!Me.hasData()||Me.tileID.overscaledZ<=vt||Me.tileID.overscaledZ>It)){for(var Fe=Me.tileID;Me&&Me.tileID.overscaledZ>vt+1;){var $e=Me.tileID.scaledTo(Me.tileID.overscaledZ-1);Me=this._tiles[$e.key],Me&&Me.hasData()&&(Fe=$e)}for(var ur=Fe;ur.overscaledZ>vt;)if(ur=ur.scaledTo(ur.overscaledZ-1),q[ur.key]){Vt[Fe.key]=Fe;break}}}},Y.prototype.findLoadedParent=function(q,vt){if(q.key in this._loadedParentTiles){var It=this._loadedParentTiles[q.key];return It&&It.tileID.overscaledZ>=vt?It:null}for(var Vt=q.overscaledZ-1;Vt>=vt;Vt--){var se=q.scaledTo(Vt),Me=this._getLoadedTile(se);if(Me)return Me}},Y.prototype._getLoadedTile=function(q){var vt=this._tiles[q.key];if(vt&&vt.hasData())return vt;var It=this._cache.getByKey(q.wrapped().key);return It},Y.prototype.updateCacheSize=function(q){var vt=Math.ceil(q.width/this._source.tileSize)+1,It=Math.ceil(q.height/this._source.tileSize)+1,Vt=vt*It,se=5,Me=Math.floor(Vt*se),Fe=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,Me):Me;this._cache.setMaxSize(Fe)},Y.prototype.handleWrapJump=function(q){var vt=this._prevLng===void 0?q:this._prevLng,It=q-vt,Vt=It/360,se=Math.round(Vt);if(this._prevLng=q,se){var Me={};for(var Fe in this._tiles){var $e=this._tiles[Fe];$e.tileID=$e.tileID.unwrapTo($e.tileID.wrap+se),Me[$e.tileID.key]=$e}this._tiles=Me;for(var ur in this._timers)clearTimeout(this._timers[ur]),delete this._timers[ur];for(var lr in this._tiles){var Fr=this._tiles[lr];this._setTileReloadTimer(lr,Fr)}}},Y.prototype.update=function(q){var vt=this;if(this.transform=q,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var It;this.used?this._source.tileID?It=q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ha){return new o.OverscaledTileID(ha.canonical.z,ha.wrap,ha.canonical.z,ha.canonical.x,ha.canonical.y)}):(It=q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(It=It.filter(function(ha){return vt._source.hasTile(ha)}))):It=[];var Vt=q.coveringZoomLevel(this._source),se=Math.max(Vt-Y.maxOverzooming,this._source.minzoom),Me=Math.max(Vt+Y.maxUnderzooming,this._source.minzoom),Fe=this._updateRetainedTiles(It,Vt);if(Ke(this._source.type)){for(var $e={},ur={},lr=Object.keys(Fe),Fr=0,jr=lr;Fr<jr.length;Fr+=1){var Zr=jr[Fr],Wr=Fe[Zr],Jr=this._tiles[Zr];if(!(!Jr||Jr.fadeEndTime&&Jr.fadeEndTime<=o.browser.now())){var dn=this.findLoadedParent(Wr,se);dn&&(this._addTile(dn.tileID),$e[dn.tileID.key]=dn.tileID),ur[Zr]=Wr}}this._retainLoadedChildren(ur,Vt,Me,Fe);for(var kn in $e)Fe[kn]||(this._coveredTiles[kn]=!0,Fe[kn]=$e[kn])}for(var Hn in Fe)this._tiles[Hn].clearFadeHold();for(var Kn=o.keysDifference(this._tiles,Fe),Qn=0,Xn=Kn;Qn<Xn.length;Qn+=1){var qn=Xn[Qn],oa=this._tiles[qn];oa.hasSymbolBuckets&&!oa.holdingForFade()?oa.setHoldDuration(this.map._fadeDuration):(!oa.hasSymbolBuckets||oa.symbolFadeFinished())&&this._removeTile(qn)}this._updateLoadedParentTileCache()}},Y.prototype.releaseSymbolFadeTiles=function(){for(var q in this._tiles)this._tiles[q].holdingForFade()&&this._removeTile(q)},Y.prototype._updateRetainedTiles=function(q,vt){for(var It={},Vt={},se=Math.max(vt-Y.maxOverzooming,this._source.minzoom),Me=Math.max(vt+Y.maxUnderzooming,this._source.minzoom),Fe={},$e=0,ur=q;$e<ur.length;$e+=1){var lr=ur[$e],Fr=this._addTile(lr);It[lr.key]=lr,!Fr.hasData()&&vt<this._source.maxzoom&&(Fe[lr.key]=lr)}this._retainLoadedChildren(Fe,vt,Me,It);for(var jr=0,Zr=q;jr<Zr.length;jr+=1){var Wr=Zr[jr],Jr=this._tiles[Wr.key];if(!Jr.hasData()){if(vt+1>this._source.maxzoom){var dn=Wr.children(this._source.maxzoom)[0],kn=this.getTile(dn);if(kn&&kn.hasData()){It[dn.key]=dn;continue}}else{var Hn=Wr.children(this._source.maxzoom);if(It[Hn[0].key]&&It[Hn[1].key]&&It[Hn[2].key]&&It[Hn[3].key])continue}for(var Kn=Jr.wasRequested(),Qn=Wr.overscaledZ-1;Qn>=se;--Qn){var Xn=Wr.scaledTo(Qn);if(Vt[Xn.key]||(Vt[Xn.key]=!0,Jr=this.getTile(Xn),!Jr&&Kn&&(Jr=this._addTile(Xn)),Jr&&(It[Xn.key]=Xn,Kn=Jr.wasRequested(),Jr.hasData())))break}}}return It},Y.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var q in this._tiles){for(var vt=[],It=void 0,Vt=this._tiles[q].tileID;Vt.overscaledZ>0;){if(Vt.key in this._loadedParentTiles){It=this._loadedParentTiles[Vt.key];break}vt.push(Vt.key);var se=Vt.scaledTo(Vt.overscaledZ-1);if(It=this._getLoadedTile(se),It)break;Vt=se}for(var Me=0,Fe=vt;Me<Fe.length;Me+=1){var $e=Fe[Me];this._loadedParentTiles[$e]=It}}},Y.prototype._addTile=function(q){var vt=this._tiles[q.key];if(vt)return vt;vt=this._cache.getAndRemove(q),vt&&(this._setTileReloadTimer(q.key,vt),vt.tileID=q,this._state.initializeTileState(vt,this.map?this.map.painter:null),this._cacheTimers[q.key]&&(clearTimeout(this._cacheTimers[q.key]),delete this._cacheTimers[q.key],this._setTileReloadTimer(q.key,vt)));var It=!!vt;return It||(vt=new o.Tile(q,this._source.tileSize*q.overscaleFactor()),this._loadTile(vt,this._tileLoaded.bind(this,vt,q.key,vt.state))),vt?(vt.uses++,this._tiles[q.key]=vt,It||this._source.fire(new o.Event("dataloading",{tile:vt,coord:vt.tileID,dataType:"source"})),vt):null},Y.prototype._setTileReloadTimer=function(q,vt){var It=this;q in this._timers&&(clearTimeout(this._timers[q]),delete this._timers[q]);var Vt=vt.getExpiryTimeout();Vt&&(this._timers[q]=setTimeout(function(){It._reloadTile(q,"expired"),delete It._timers[q]},Vt))},Y.prototype._removeTile=function(q){var vt=this._tiles[q];vt&&(vt.uses--,delete this._tiles[q],this._timers[q]&&(clearTimeout(this._timers[q]),delete this._timers[q]),!(vt.uses>0)&&(vt.hasData()&&vt.state!=="reloading"?this._cache.add(vt.tileID,vt,vt.getExpiryTimeout()):(vt.aborted=!0,this._abortTile(vt),this._unloadTile(vt))))},Y.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var q in this._tiles)this._removeTile(q);this._cache.reset()},Y.prototype.tilesIn=function(q,vt,It){var Vt=this,se=[],Me=this.transform;if(!Me)return se;for(var Fe=It?Me.getCameraQueryGeometry(q):q,$e=q.map(function(Qn){return Me.pointCoordinate(Qn)}),ur=Fe.map(function(Qn){return Me.pointCoordinate(Qn)}),lr=this.getIds(),Fr=1/0,jr=1/0,Zr=-1/0,Wr=-1/0,Jr=0,dn=ur;Jr<dn.length;Jr+=1){var kn=dn[Jr];Fr=Math.min(Fr,kn.x),jr=Math.min(jr,kn.y),Zr=Math.max(Zr,kn.x),Wr=Math.max(Wr,kn.y)}for(var Hn=function(Qn){var Xn=Vt._tiles[lr[Qn]];if(!Xn.holdingForFade()){var qn=Xn.tileID,oa=Math.pow(2,Me.zoom-Xn.tileID.overscaledZ),ha=vt*Xn.queryPadding*o.EXTENT/Xn.tileSize/oa,xa=[qn.getTilePoint(new o.MercatorCoordinate(Fr,jr)),qn.getTilePoint(new o.MercatorCoordinate(Zr,Wr))];if(xa[0].x-ha<o.EXTENT&&xa[0].y-ha<o.EXTENT&&xa[1].x+ha>=0&&xa[1].y+ha>=0){var ga=$e.map(function(ti){return qn.getTilePoint(ti)}),Fa=ur.map(function(ti){return qn.getTilePoint(ti)});se.push({tile:Xn,tileID:qn,queryGeometry:ga,cameraQueryGeometry:Fa,scale:oa})}}},Kn=0;Kn<lr.length;Kn++)Hn(Kn);return se},Y.prototype.getVisibleCoordinates=function(q){for(var vt=this,It=this.getRenderableIds(q).map(function(Fe){return vt._tiles[Fe].tileID}),Vt=0,se=It;Vt<se.length;Vt+=1){var Me=se[Vt];Me.posMatrix=this.transform.calculatePosMatrix(Me.toUnwrapped())}return It},Y.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Ke(this._source.type))for(var q in this._tiles){var vt=this._tiles[q];if(vt.fadeEndTime!==void 0&&vt.fadeEndTime>=o.browser.now())return!0}return!1},Y.prototype.setFeatureState=function(q,vt,It){q=q||"_geojsonTileLayer",this._state.updateState(q,vt,It)},Y.prototype.removeFeatureState=function(q,vt,It){q=q||"_geojsonTileLayer",this._state.removeFeatureState(q,vt,It)},Y.prototype.getFeatureState=function(q,vt){return q=q||"_geojsonTileLayer",this._state.getState(q,vt)},Y.prototype.setDependencies=function(q,vt,It){var Vt=this._tiles[q];Vt&&Vt.setDependencies(vt,It)},Y.prototype.reloadTilesForDependencies=function(q,vt){for(var It in this._tiles){var Vt=this._tiles[It];Vt.hasDependency(q,vt)&&this._reloadTile(It,"reloading")}this._cache.filter(function(se){return!se.hasDependency(q,vt)})},Y}(o.Evented);ke.maxOverzooming=10,ke.maxUnderzooming=3;function _e(ut,Y){var ht=Math.abs(ut.wrap*2)-+(ut.wrap<0),q=Math.abs(Y.wrap*2)-+(Y.wrap<0);return ut.overscaledZ-Y.overscaledZ||q-ht||Y.canonical.y-ut.canonical.y||Y.canonical.x-ut.canonical.x}function Ke(ut){return ut==="raster"||ut==="image"||ut==="video"}function hr(){return new o.window.Worker(so.workerUrl)}var cr="mapboxgl_preloaded_worker_pool",dr=function(){this.active={}};dr.prototype.acquire=function(Y){if(!this.workers)for(this.workers=[];this.workers.length<dr.workerCount;)this.workers.push(new hr);return this.active[Y]=!0,this.workers.slice()},dr.prototype.release=function(Y){delete this.active[Y],this.numActive()===0&&(this.workers.forEach(function(ht){ht.terminate()}),this.workers=null)},dr.prototype.isPreloaded=function(){return!!this.active[cr]},dr.prototype.numActive=function(){return Object.keys(this.active).length};var fr=Math.floor(o.browser.hardwareConcurrency/2);dr.workerCount=Math.max(Math.min(fr,6),1);var Lr;function xr(){return Lr||(Lr=new dr),Lr}function Yt(){var ut=xr();ut.acquire(cr)}function Jt(){var ut=Lr;ut&&(ut.isPreloaded()&&ut.numActive()===1?(ut.release(cr),Lr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function qe(ut,Y){var ht={};for(var q in ut)q!=="ref"&&(ht[q]=ut[q]);return o.refProperties.forEach(function(vt){vt in Y&&(ht[vt]=Y[vt])}),ht}function tr(ut){ut=ut.slice();for(var Y=Object.create(null),ht=0;ht<ut.length;ht++)Y[ut[ht].id]=ut[ht];for(var q=0;q<ut.length;q++)"ref"in ut[q]&&(ut[q]=qe(ut[q],Y[ut[q].ref]));return ut}function Ge(){var ut={},Y=o.styleSpec.$version;for(var ht in o.styleSpec.$root){var q=o.styleSpec.$root[ht];if(q.required){var vt=null;ht==="version"?vt=Y:q.type==="array"?vt=[]:vt={},vt!=null&&(ut[ht]=vt)}}return ut}var Ee={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Xe(ut,Y,ht){ht.push({command:Ee.addSource,args:[ut,Y[ut]]})}function rr(ut,Y,ht){Y.push({command:Ee.removeSource,args:[ut]}),ht[ut]=!0}function Je(ut,Y,ht,q){rr(ut,ht,q),Xe(ut,Y,ht)}function He(ut,Y,ht){var q;for(q in ut[ht])if(ut[ht].hasOwnProperty(q)&&q!=="data"&&!o.deepEqual(ut[ht][q],Y[ht][q]))return!1;for(q in Y[ht])if(Y[ht].hasOwnProperty(q)&&q!=="data"&&!o.deepEqual(ut[ht][q],Y[ht][q]))return!1;return!0}function yr(ut,Y,ht,q){ut=ut||{},Y=Y||{};var vt;for(vt in ut)ut.hasOwnProperty(vt)&&(Y.hasOwnProperty(vt)||rr(vt,ht,q));for(vt in Y)Y.hasOwnProperty(vt)&&(ut.hasOwnProperty(vt)?o.deepEqual(ut[vt],Y[vt])||(ut[vt].type==="geojson"&&Y[vt].type==="geojson"&&He(ut,Y,vt)?ht.push({command:Ee.setGeoJSONSourceData,args:[vt,Y[vt].data]}):Je(vt,Y,ht,q)):Xe(vt,Y,ht))}function Ir(ut,Y,ht,q,vt,It){ut=ut||{},Y=Y||{};var Vt;for(Vt in ut)ut.hasOwnProperty(Vt)&&(o.deepEqual(ut[Vt],Y[Vt])||ht.push({command:It,args:[q,Vt,Y[Vt],vt]}));for(Vt in Y)!Y.hasOwnProperty(Vt)||ut.hasOwnProperty(Vt)||o.deepEqual(ut[Vt],Y[Vt])||ht.push({command:It,args:[q,Vt,Y[Vt],vt]})}function Tr(ut){return ut.id}function vn(ut,Y){return ut[Y.id]=Y,ut}function Or(ut,Y,ht){ut=ut||[],Y=Y||[];var q=ut.map(Tr),vt=Y.map(Tr),It=ut.reduce(vn,{}),Vt=Y.reduce(vn,{}),se=q.slice(),Me=Object.create(null),Fe,$e,ur,lr,Fr,jr,Zr;for(Fe=0,$e=0;Fe<q.length;Fe++)ur=q[Fe],Vt.hasOwnProperty(ur)?$e++:(ht.push({command:Ee.removeLayer,args:[ur]}),se.splice(se.indexOf(ur,$e),1));for(Fe=0,$e=0;Fe<vt.length;Fe++)ur=vt[vt.length-1-Fe],se[se.length-1-Fe]!==ur&&(It.hasOwnProperty(ur)?(ht.push({command:Ee.removeLayer,args:[ur]}),se.splice(se.lastIndexOf(ur,se.length-$e),1)):$e++,jr=se[se.length-Fe],ht.push({command:Ee.addLayer,args:[Vt[ur],jr]}),se.splice(se.length-Fe,0,ur),Me[ur]=!0);for(Fe=0;Fe<vt.length;Fe++)if(ur=vt[Fe],lr=It[ur],Fr=Vt[ur],!(Me[ur]||o.deepEqual(lr,Fr))){if(!o.deepEqual(lr.source,Fr.source)||!o.deepEqual(lr["source-layer"],Fr["source-layer"])||!o.deepEqual(lr.type,Fr.type)){ht.push({command:Ee.removeLayer,args:[ur]}),jr=se[se.lastIndexOf(ur)+1],ht.push({command:Ee.addLayer,args:[Fr,jr]});continue}Ir(lr.layout,Fr.layout,ht,ur,null,Ee.setLayoutProperty),Ir(lr.paint,Fr.paint,ht,ur,null,Ee.setPaintProperty),o.deepEqual(lr.filter,Fr.filter)||ht.push({command:Ee.setFilter,args:[ur,Fr.filter]}),(!o.deepEqual(lr.minzoom,Fr.minzoom)||!o.deepEqual(lr.maxzoom,Fr.maxzoom))&&ht.push({command:Ee.setLayerZoomRange,args:[ur,Fr.minzoom,Fr.maxzoom]});for(Zr in lr)lr.hasOwnProperty(Zr)&&(Zr==="layout"||Zr==="paint"||Zr==="filter"||Zr==="metadata"||Zr==="minzoom"||Zr==="maxzoom"||(Zr.indexOf("paint.")===0?Ir(lr[Zr],Fr[Zr],ht,ur,Zr.slice(6),Ee.setPaintProperty):o.deepEqual(lr[Zr],Fr[Zr])||ht.push({command:Ee.setLayerProperty,args:[ur,Zr,Fr[Zr]]})));for(Zr in Fr)!Fr.hasOwnProperty(Zr)||lr.hasOwnProperty(Zr)||Zr==="layout"||Zr==="paint"||Zr==="filter"||Zr==="metadata"||Zr==="minzoom"||Zr==="maxzoom"||(Zr.indexOf("paint.")===0?Ir(lr[Zr],Fr[Zr],ht,ur,Zr.slice(6),Ee.setPaintProperty):o.deepEqual(lr[Zr],Fr[Zr])||ht.push({command:Ee.setLayerProperty,args:[ur,Zr,Fr[Zr]]}))}}function En(ut,Y){if(!ut)return[{command:Ee.setStyle,args:[Y]}];var ht=[];try{if(!o.deepEqual(ut.version,Y.version))return[{command:Ee.setStyle,args:[Y]}];o.deepEqual(ut.center,Y.center)||ht.push({command:Ee.setCenter,args:[Y.center]}),o.deepEqual(ut.zoom,Y.zoom)||ht.push({command:Ee.setZoom,args:[Y.zoom]}),o.deepEqual(ut.bearing,Y.bearing)||ht.push({command:Ee.setBearing,args:[Y.bearing]}),o.deepEqual(ut.pitch,Y.pitch)||ht.push({command:Ee.setPitch,args:[Y.pitch]}),o.deepEqual(ut.sprite,Y.sprite)||ht.push({command:Ee.setSprite,args:[Y.sprite]}),o.deepEqual(ut.glyphs,Y.glyphs)||ht.push({command:Ee.setGlyphs,args:[Y.glyphs]}),o.deepEqual(ut.transition,Y.transition)||ht.push({command:Ee.setTransition,args:[Y.transition]}),o.deepEqual(ut.light,Y.light)||ht.push({command:Ee.setLight,args:[Y.light]});var q={},vt=[];yr(ut.sources,Y.sources,vt,q);var It=[];ut.layers&&ut.layers.forEach(function(Vt){q[Vt.source]?ht.push({command:Ee.removeLayer,args:[Vt.id]}):It.push(Vt)}),ht=ht.concat(vt),Or(It,Y.layers,ht)}catch(Vt){console.warn("Unable to compute style diff:",Vt),ht=[{command:Ee.setStyle,args:[Y]}]}return ht}var nn=function(Y,ht){this.reset(Y,ht)};nn.prototype.reset=function(Y,ht){this.points=Y||[],this._distances=[0];for(var q=1;q<this.points.length;q++)this._distances[q]=this._distances[q-1]+this.points[q].dist(this.points[q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ht||0,this.length*.5),this.paddedLength=this.length-this.padding*2},nn.prototype.lerp=function(Y){if(this.points.length===1)return this.points[0];Y=o.clamp(Y,0,1);for(var ht=1,q=this._distances[ht],vt=Y*this.paddedLength+this.padding;q<vt&&ht<this._distances.length;)q=this._distances[++ht];var It=ht-1,Vt=this._distances[It],se=q-Vt,Me=se>0?(vt-Vt)/se:0;return this.points[It].mult(1-Me).add(this.points[ht].mult(Me))};var gr=function(Y,ht,q){var vt=this.boxCells=[],It=this.circleCells=[];this.xCellCount=Math.ceil(Y/q),this.yCellCount=Math.ceil(ht/q);for(var Vt=0;Vt<this.xCellCount*this.yCellCount;Vt++)vt.push([]),It.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=Y,this.height=ht,this.xScale=this.xCellCount/Y,this.yScale=this.yCellCount/ht,this.boxUid=0,this.circleUid=0};gr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},gr.prototype.insert=function(Y,ht,q,vt,It){this._forEachCell(ht,q,vt,It,this._insertBoxCell,this.boxUid++),this.boxKeys.push(Y),this.bboxes.push(ht),this.bboxes.push(q),this.bboxes.push(vt),this.bboxes.push(It)},gr.prototype.insertCircle=function(Y,ht,q,vt){this._forEachCell(ht-vt,q-vt,ht+vt,q+vt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(Y),this.circles.push(ht),this.circles.push(q),this.circles.push(vt)},gr.prototype._insertBoxCell=function(Y,ht,q,vt,It,Vt){this.boxCells[It].push(Vt)},gr.prototype._insertCircleCell=function(Y,ht,q,vt,It,Vt){this.circleCells[It].push(Vt)},gr.prototype._query=function(Y,ht,q,vt,It,Vt){if(q<0||Y>this.width||vt<0||ht>this.height)return It?!1:[];var se=[];if(Y<=0&&ht<=0&&this.width<=q&&this.height<=vt){if(It)return!0;for(var Me=0;Me<this.boxKeys.length;Me++)se.push({key:this.boxKeys[Me],x1:this.bboxes[Me*4],y1:this.bboxes[Me*4+1],x2:this.bboxes[Me*4+2],y2:this.bboxes[Me*4+3]});for(var Fe=0;Fe<this.circleKeys.length;Fe++){var $e=this.circles[Fe*3],ur=this.circles[Fe*3+1],lr=this.circles[Fe*3+2];se.push({key:this.circleKeys[Fe],x1:$e-lr,y1:ur-lr,x2:$e+lr,y2:ur+lr})}return Vt?se.filter(Vt):se}else{var Fr={hitTest:It,seenUids:{box:{},circle:{}}};return this._forEachCell(Y,ht,q,vt,this._queryCell,se,Fr,Vt),It?se.length>0:se}},gr.prototype._queryCircle=function(Y,ht,q,vt,It){var Vt=Y-q,se=Y+q,Me=ht-q,Fe=ht+q;if(se<0||Vt>this.width||Fe<0||Me>this.height)return vt?!1:[];var $e=[],ur={hitTest:vt,circle:{x:Y,y:ht,radius:q},seenUids:{box:{},circle:{}}};return this._forEachCell(Vt,Me,se,Fe,this._queryCellCircle,$e,ur,It),vt?$e.length>0:$e},gr.prototype.query=function(Y,ht,q,vt,It){return this._query(Y,ht,q,vt,!1,It)},gr.prototype.hitTest=function(Y,ht,q,vt,It){return this._query(Y,ht,q,vt,!0,It)},gr.prototype.hitTestCircle=function(Y,ht,q,vt){return this._queryCircle(Y,ht,q,!0,vt)},gr.prototype._queryCell=function(Y,ht,q,vt,It,Vt,se,Me){var Fe=se.seenUids,$e=this.boxCells[It];if($e!==null)for(var ur=this.bboxes,lr=0,Fr=$e;lr<Fr.length;lr+=1){var jr=Fr[lr];if(!Fe.box[jr]){Fe.box[jr]=!0;var Zr=jr*4;if(Y<=ur[Zr+2]&&ht<=ur[Zr+3]&&q>=ur[Zr+0]&&vt>=ur[Zr+1]&&(!Me||Me(this.boxKeys[jr]))){if(se.hitTest)return Vt.push(!0),!0;Vt.push({key:this.boxKeys[jr],x1:ur[Zr],y1:ur[Zr+1],x2:ur[Zr+2],y2:ur[Zr+3]})}}}var Wr=this.circleCells[It];if(Wr!==null)for(var Jr=this.circles,dn=0,kn=Wr;dn<kn.length;dn+=1){var Hn=kn[dn];if(!Fe.circle[Hn]){Fe.circle[Hn]=!0;var Kn=Hn*3;if(this._circleAndRectCollide(Jr[Kn],Jr[Kn+1],Jr[Kn+2],Y,ht,q,vt)&&(!Me||Me(this.circleKeys[Hn]))){if(se.hitTest)return Vt.push(!0),!0;var Qn=Jr[Kn],Xn=Jr[Kn+1],qn=Jr[Kn+2];Vt.push({key:this.circleKeys[Hn],x1:Qn-qn,y1:Xn-qn,x2:Qn+qn,y2:Xn+qn})}}}},gr.prototype._queryCellCircle=function(Y,ht,q,vt,It,Vt,se,Me){var Fe=se.circle,$e=se.seenUids,ur=this.boxCells[It];if(ur!==null)for(var lr=this.bboxes,Fr=0,jr=ur;Fr<jr.length;Fr+=1){var Zr=jr[Fr];if(!$e.box[Zr]){$e.box[Zr]=!0;var Wr=Zr*4;if(this._circleAndRectCollide(Fe.x,Fe.y,Fe.radius,lr[Wr+0],lr[Wr+1],lr[Wr+2],lr[Wr+3])&&(!Me||Me(this.boxKeys[Zr])))return Vt.push(!0),!0}}var Jr=this.circleCells[It];if(Jr!==null)for(var dn=this.circles,kn=0,Hn=Jr;kn<Hn.length;kn+=1){var Kn=Hn[kn];if(!$e.circle[Kn]){$e.circle[Kn]=!0;var Qn=Kn*3;if(this._circlesCollide(dn[Qn],dn[Qn+1],dn[Qn+2],Fe.x,Fe.y,Fe.radius)&&(!Me||Me(this.circleKeys[Kn])))return Vt.push(!0),!0}}},gr.prototype._forEachCell=function(Y,ht,q,vt,It,Vt,se,Me){for(var Fe=this._convertToXCellCoord(Y),$e=this._convertToYCellCoord(ht),ur=this._convertToXCellCoord(q),lr=this._convertToYCellCoord(vt),Fr=Fe;Fr<=ur;Fr++)for(var jr=$e;jr<=lr;jr++){var Zr=this.xCellCount*jr+Fr;if(It.call(this,Y,ht,q,vt,Zr,Vt,se,Me))return}},gr.prototype._convertToXCellCoord=function(Y){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(Y*this.xScale)))},gr.prototype._convertToYCellCoord=function(Y){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(Y*this.yScale)))},gr.prototype._circlesCollide=function(Y,ht,q,vt,It,Vt){var se=vt-Y,Me=It-ht,Fe=q+Vt;return Fe*Fe>se*se+Me*Me},gr.prototype._circleAndRectCollide=function(Y,ht,q,vt,It,Vt,se){var Me=(Vt-vt)/2,Fe=Math.abs(Y-(vt+Me));if(Fe>Me+q)return!1;var $e=(se-It)/2,ur=Math.abs(ht-(It+$e));if(ur>$e+q)return!1;if(Fe<=Me||ur<=$e)return!0;var lr=Fe-Me,Fr=ur-$e;return lr*lr+Fr*Fr<=q*q};function Pr(ut,Y,ht,q,vt){var It=o.create();return Y?(o.scale(It,It,[1/vt,1/vt,1]),ht||o.rotateZ(It,It,q.angle)):o.multiply(It,q.labelPlaneMatrix,ut),It}function Xr(ut,Y,ht,q,vt){if(Y){var It=o.clone(ut);return o.scale(It,It,[vt,vt,1]),ht||o.rotateZ(It,It,-q.angle),It}else return q.glCoordMatrix}function kr(ut,Y){var ht=[ut.x,ut.y,0,1];Cr(ht,ht,Y);var q=ht[3];return{point:new o.Point(ht[0]/q,ht[1]/q),signedDistanceFromCamera:q}}function pn(ut,Y){return .5+.5*(ut/Y)}function en(ut,Y){var ht=ut[0]/ut[3],q=ut[1]/ut[3],vt=ht>=-Y[0]&&ht<=Y[0]&&q>=-Y[1]&&q<=Y[1];return vt}function Tn(ut,Y,ht,q,vt,It,Vt,se){var Me=q?ut.textSizeData:ut.iconSizeData,Fe=o.evaluateSizeForZoom(Me,ht.transform.zoom),$e=[256/ht.width*2+1,256/ht.height*2+1],ur=q?ut.text.dynamicLayoutVertexArray:ut.icon.dynamicLayoutVertexArray;ur.clear();for(var lr=ut.lineVertexArray,Fr=q?ut.text.placedSymbolArray:ut.icon.placedSymbolArray,jr=ht.transform.width/ht.transform.height,Zr=!1,Wr=0;Wr<Fr.length;Wr++){var Jr=Fr.get(Wr);if(Jr.hidden||Jr.writingMode===o.WritingMode.vertical&&!Zr){Rn(Jr.numGlyphs,ur);continue}Zr=!1;var dn=[Jr.anchorX,Jr.anchorY,0,1];if(o.transformMat4(dn,dn,Y),!en(dn,$e)){Rn(Jr.numGlyphs,ur);continue}var kn=dn[3],Hn=pn(ht.transform.cameraToCenterDistance,kn),Kn=o.evaluateSizeForFeature(Me,Fe,Jr),Qn=Vt?Kn/Hn:Kn*Hn,Xn=new o.Point(Jr.anchorX,Jr.anchorY),qn=kr(Xn,vt).point,oa={},ha=ma(Jr,Qn,!1,se,Y,vt,It,ut.glyphOffsetArray,lr,ur,qn,Xn,oa,jr);Zr=ha.useVertical,(ha.notEnoughRoom||Zr||ha.needsFlipping&&ma(Jr,Qn,!0,se,Y,vt,It,ut.glyphOffsetArray,lr,ur,qn,Xn,oa,jr).notEnoughRoom)&&Rn(Jr.numGlyphs,ur)}q?ut.text.dynamicLayoutVertexBuffer.updateData(ur):ut.icon.dynamicLayoutVertexBuffer.updateData(ur)}function Ln(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e){var ur=se.glyphStartIndex+se.numGlyphs,lr=se.lineStartIndex,Fr=se.lineStartIndex+se.lineLength,jr=Y.getoffsetX(se.glyphStartIndex),Zr=Y.getoffsetX(ur-1),Wr=la(ut*jr,ht,q,vt,It,Vt,se.segment,lr,Fr,Me,Fe,$e);if(!Wr)return null;var Jr=la(ut*Zr,ht,q,vt,It,Vt,se.segment,lr,Fr,Me,Fe,$e);return Jr?{first:Wr,last:Jr}:null}function Yn(ut,Y,ht,q){if(ut===o.WritingMode.horizontal){var vt=Math.abs(ht.y-Y.y),It=Math.abs(ht.x-Y.x)*q;if(vt>It)return{useVertical:!0}}return(ut===o.WritingMode.vertical?Y.y<ht.y:Y.x>ht.x)?{needsFlipping:!0}:null}function ma(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur,lr,Fr){var jr=Y/24,Zr=ut.lineOffsetX*jr,Wr=ut.lineOffsetY*jr,Jr;if(ut.numGlyphs>1){var dn=ut.glyphStartIndex+ut.numGlyphs,kn=ut.lineStartIndex,Hn=ut.lineStartIndex+ut.lineLength,Kn=Ln(jr,se,Zr,Wr,ht,$e,ur,ut,Me,It,lr);if(!Kn)return{notEnoughRoom:!0};var Qn=kr(Kn.first.point,Vt).point,Xn=kr(Kn.last.point,Vt).point;if(q&&!ht){var qn=Yn(ut.writingMode,Qn,Xn,Fr);if(qn)return qn}Jr=[Kn.first];for(var oa=ut.glyphStartIndex+1;oa<dn-1;oa++)Jr.push(la(jr*se.getoffsetX(oa),Zr,Wr,ht,$e,ur,ut.segment,kn,Hn,Me,It,lr));Jr.push(Kn.last)}else{if(q&&!ht){var ha=kr(ur,vt).point,xa=ut.lineStartIndex+ut.segment+1,ga=new o.Point(Me.getx(xa),Me.gety(xa)),Fa=kr(ga,vt),ti=Fa.signedDistanceFromCamera>0?Fa.point:wa(ur,ga,ha,1,vt),Za=Yn(ut.writingMode,ha,ti,Fr);if(Za)return Za}var Sa=la(jr*se.getoffsetX(ut.glyphStartIndex),Zr,Wr,ht,$e,ur,ut.segment,ut.lineStartIndex,ut.lineStartIndex+ut.lineLength,Me,It,lr);if(!Sa)return{notEnoughRoom:!0};Jr=[Sa]}for(var ja=0,Ga=Jr;ja<Ga.length;ja+=1){var li=Ga[ja];o.addDynamicAttributes(Fe,li.point,li.angle)}return{}}function wa(ut,Y,ht,q,vt){var It=kr(ut.add(ut.sub(Y)._unit()),vt).point,Vt=ht.sub(It);return ht.add(Vt._mult(q/Vt.mag()))}function la(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur){var lr=q?ut-Y:ut+Y,Fr=lr>0?1:-1,jr=0;q&&(Fr*=-1,jr=Math.PI),Fr<0&&(jr+=Math.PI);for(var Zr=Fr>0?se+Vt:se+Vt+1,Wr=vt,Jr=vt,dn=0,kn=0,Hn=Math.abs(lr),Kn=[];dn+kn<=Hn;){if(Zr+=Fr,Zr<se||Zr>=Me)return null;if(Jr=Wr,Kn.push(Wr),Wr=ur[Zr],Wr===void 0){var Qn=new o.Point(Fe.getx(Zr),Fe.gety(Zr)),Xn=kr(Qn,$e);if(Xn.signedDistanceFromCamera>0)Wr=ur[Zr]=Xn.point;else{var qn=Zr-Fr,oa=dn===0?It:new o.Point(Fe.getx(qn),Fe.gety(qn));Wr=wa(oa,Qn,Jr,Hn-dn+1,$e)}}dn+=kn,kn=Jr.dist(Wr)}var ha=(Hn-dn)/kn,xa=Wr.sub(Jr),ga=xa.mult(ha)._add(Jr);ga._add(xa._unit()._perp()._mult(ht*Fr));var Fa=jr+Math.atan2(Wr.y-Jr.y,Wr.x-Jr.x);return Kn.push(ga),{point:ga,angle:Fa,path:Kn}}var ia=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rn(ut,Y){for(var ht=0;ht<ut;ht++){var q=Y.length;Y.resize(q+4),Y.float32.set(ia,q*3)}}function Cr(ut,Y,ht){var q=Y[0],vt=Y[1];return ut[0]=ht[0]*q+ht[4]*vt+ht[12],ut[1]=ht[1]*q+ht[5]*vt+ht[13],ut[3]=ht[3]*q+ht[7]*vt+ht[15],ut}var an=100,on=function(Y,ht,q){ht===void 0&&(ht=new gr(Y.width+2*an,Y.height+2*an,25)),q===void 0&&(q=new gr(Y.width+2*an,Y.height+2*an,25)),this.transform=Y,this.grid=ht,this.ignoredGrid=q,this.pitchfactor=Math.cos(Y._pitch)*Y.cameraToCenterDistance,this.screenRightBoundary=Y.width+an,this.screenBottomBoundary=Y.height+an,this.gridRightBoundary=Y.width+2*an,this.gridBottomBoundary=Y.height+2*an};on.prototype.placeCollisionBox=function(Y,ht,q,vt,It){var Vt=this.projectAndGetPerspectiveRatio(vt,Y.anchorPointX,Y.anchorPointY),se=q*Vt.perspectiveRatio,Me=Y.x1*se+Vt.point.x,Fe=Y.y1*se+Vt.point.y,$e=Y.x2*se+Vt.point.x,ur=Y.y2*se+Vt.point.y;return!this.isInsideGrid(Me,Fe,$e,ur)||!ht&&this.grid.hitTest(Me,Fe,$e,ur,It)?{box:[],offscreen:!1}:{box:[Me,Fe,$e,ur],offscreen:this.isOffscreen(Me,Fe,$e,ur)}},on.prototype.placeCollisionCircles=function(Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur,lr,Fr){var jr=[],Zr=new o.Point(ht.anchorX,ht.anchorY),Wr=kr(Zr,Vt),Jr=pn(this.transform.cameraToCenterDistance,Wr.signedDistanceFromCamera),dn=$e?It/Jr:It*Jr,kn=dn/o.ONE_EM,Hn=kr(Zr,se).point,Kn={},Qn=ht.lineOffsetX*kn,Xn=ht.lineOffsetY*kn,qn=Ln(kn,vt,Qn,Xn,!1,Hn,Zr,ht,q,se,Kn),oa=!1,ha=!1,xa=!0;if(qn){for(var ga=lr*.5*Jr+Fr,Fa=new o.Point(-an,-an),ti=new o.Point(this.screenRightBoundary,this.screenBottomBoundary),Za=new nn,Sa=qn.first,ja=qn.last,Ga=[],li=Sa.path.length-1;li>=1;li--)Ga.push(Sa.path[li]);for(var ai=1;ai<ja.path.length;ai++)Ga.push(ja.path[ai]);var Ei=ga*2.5;if(Me){var $a=Ga.map(function(rl){return kr(rl,Me)});$a.some(function(rl){return rl.signedDistanceFromCamera<=0})?Ga=[]:Ga=$a.map(function(rl){return rl.point})}var wi=[];if(Ga.length>0){for(var Wa=Ga[0].clone(),ei=Ga[0].clone(),Wi=1;Wi<Ga.length;Wi++)Wa.x=Math.min(Wa.x,Ga[Wi].x),Wa.y=Math.min(Wa.y,Ga[Wi].y),ei.x=Math.max(ei.x,Ga[Wi].x),ei.y=Math.max(ei.y,Ga[Wi].y);Wa.x>=Fa.x&&ei.x<=ti.x&&Wa.y>=Fa.y&&ei.y<=ti.y?wi=[Ga]:ei.x<Fa.x||Wa.x>ti.x||ei.y<Fa.y||Wa.y>ti.y?wi=[]:wi=o.clipLine([Ga],Fa.x,Fa.y,ti.x,ti.y)}for(var go=0,Bs=wi;go<Bs.length;go+=1){var Ns=Bs[go];Za.reset(Ns,ga*.25);var tl=0;Za.length<=.5*ga?tl=1:tl=Math.ceil(Za.paddedLength/Ei)+1;for(var El=0;El<tl;El++){var $u=El/Math.max(tl-1,1),Cl=Za.lerp($u),Ko=Cl.x+an,Ll=Cl.y+an;jr.push(Ko,Ll,ga,0);var fs=Ko-ga,Jo=Ll-ga,el=Ko+ga,nu=Ll+ga;if(xa=xa&&this.isOffscreen(fs,Jo,el,nu),ha=ha||this.isInsideGrid(fs,Jo,el,nu),!Y&&this.grid.hitTestCircle(Ko,Ll,ga,ur)&&(oa=!0,!Fe))return{circles:[],offscreen:!1,collisionDetected:oa}}}}return{circles:!Fe&&oa||!ha?[]:jr,offscreen:xa,collisionDetected:oa}},on.prototype.queryRenderedSymbols=function(Y){if(Y.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ht=[],q=1/0,vt=1/0,It=-1/0,Vt=-1/0,se=0,Me=Y;se<Me.length;se+=1){var Fe=Me[se],$e=new o.Point(Fe.x+an,Fe.y+an);q=Math.min(q,$e.x),vt=Math.min(vt,$e.y),It=Math.max(It,$e.x),Vt=Math.max(Vt,$e.y),ht.push($e)}for(var ur=this.grid.query(q,vt,It,Vt).concat(this.ignoredGrid.query(q,vt,It,Vt)),lr={},Fr={},jr=0,Zr=ur;jr<Zr.length;jr+=1){var Wr=Zr[jr],Jr=Wr.key;if(lr[Jr.bucketInstanceId]===void 0&&(lr[Jr.bucketInstanceId]={}),!lr[Jr.bucketInstanceId][Jr.featureIndex]){var dn=[new o.Point(Wr.x1,Wr.y1),new o.Point(Wr.x2,Wr.y1),new o.Point(Wr.x2,Wr.y2),new o.Point(Wr.x1,Wr.y2)];o.polygonIntersectsPolygon(ht,dn)&&(lr[Jr.bucketInstanceId][Jr.featureIndex]=!0,Fr[Jr.bucketInstanceId]===void 0&&(Fr[Jr.bucketInstanceId]=[]),Fr[Jr.bucketInstanceId].push(Jr.featureIndex))}}return Fr},on.prototype.insertCollisionBox=function(Y,ht,q,vt,It){var Vt=ht?this.ignoredGrid:this.grid,se={bucketInstanceId:q,featureIndex:vt,collisionGroupID:It};Vt.insert(se,Y[0],Y[1],Y[2],Y[3])},on.prototype.insertCollisionCircles=function(Y,ht,q,vt,It){for(var Vt=ht?this.ignoredGrid:this.grid,se={bucketInstanceId:q,featureIndex:vt,collisionGroupID:It},Me=0;Me<Y.length;Me+=4)Vt.insertCircle(se,Y[Me],Y[Me+1],Y[Me+2])},on.prototype.projectAndGetPerspectiveRatio=function(Y,ht,q){var vt=[ht,q,0,1];Cr(vt,vt,Y);var It=new o.Point((vt[0]/vt[3]+1)/2*this.transform.width+an,(-vt[1]/vt[3]+1)/2*this.transform.height+an);return{point:It,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/vt[3])}},on.prototype.isOffscreen=function(Y,ht,q,vt){return q<an||Y>=this.screenRightBoundary||vt<an||ht>this.screenBottomBoundary},on.prototype.isInsideGrid=function(Y,ht,q,vt){return q>=0&&Y<this.gridRightBoundary&&vt>=0&&ht<this.gridBottomBoundary},on.prototype.getViewportMatrix=function(){var Y=o.identity([]);return o.translate(Y,Y,[-an,-an,0]),Y};function ln(ut,Y,ht){return Y*(o.EXTENT/(ut.tileSize*Math.pow(2,ht-ut.tileID.overscaledZ)))}var Nn=function(Y,ht,q,vt){Y?this.opacity=Math.max(0,Math.min(1,Y.opacity+(Y.placed?ht:-ht))):this.opacity=vt&&q?1:0,this.placed=q};Nn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var gn=function(Y,ht,q,vt,It){this.text=new Nn(Y?Y.text:null,ht,q,It),this.icon=new Nn(Y?Y.icon:null,ht,vt,It)};gn.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Cn=function(Y,ht,q){this.text=Y,this.icon=ht,this.skipFade=q},Un=function(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]},ta=function(Y,ht,q,vt,It){this.bucketInstanceId=Y,this.featureIndex=ht,this.sourceLayerIndex=q,this.bucketIndex=vt,this.tileID=It},pa=function(Y){this.crossSourceCollisions=Y,this.maxGroupID=0,this.collisionGroups={}};pa.prototype.get=function(Y){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[Y]){var ht=++this.maxGroupID;this.collisionGroups[Y]={ID:ht,predicate:function(q){return q.collisionGroupID===ht}}}return this.collisionGroups[Y]};function ka(ut,Y,ht,q,vt){var It=o.getAnchorAlignment(ut),Vt=It.horizontalAlign,se=It.verticalAlign,Me=-(Vt-.5)*Y,Fe=-(se-.5)*ht,$e=o.evaluateVariableOffset(ut,q);return new o.Point(Me+$e[0]*vt,Fe+$e[1]*vt)}function Ar(ut,Y,ht,q,vt,It){var Vt=ut.x1,se=ut.x2,Me=ut.y1,Fe=ut.y2,$e=ut.anchorPointX,ur=ut.anchorPointY,lr=new o.Point(Y,ht);return q&&lr._rotate(vt?It:-It),{x1:Vt+lr.x,y1:Me+lr.y,x2:se+lr.x,y2:Fe+lr.y,anchorPointX:$e,anchorPointY:ur}}var Br=function(Y,ht,q,vt){this.transform=Y.clone(),this.collisionIndex=new on(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ht,this.retainedQueryData={},this.collisionGroups=new pa(q),this.collisionCircleArrays={},this.prevPlacement=vt,vt&&(vt.prevPlacement=void 0),this.placedOrientations={}};Br.prototype.getBucketParts=function(Y,ht,q,vt){var It=q.getBucket(ht),Vt=q.latestFeatureIndex;if(!(!It||!Vt||ht.id!==It.layerIds[0])){var se=q.collisionBoxArray,Me=It.layers[0].layout,Fe=Math.pow(2,this.transform.zoom-q.tileID.overscaledZ),$e=q.tileSize/o.EXTENT,ur=this.transform.calculatePosMatrix(q.tileID.toUnwrapped()),lr=Me.get("text-pitch-alignment")==="map",Fr=Me.get("text-rotation-alignment")==="map",jr=ln(q,1,this.transform.zoom),Zr=Pr(ur,lr,Fr,this.transform,jr),Wr=null;if(lr){var Jr=Xr(ur,lr,Fr,this.transform,jr);Wr=o.multiply([],this.transform.labelPlaneMatrix,Jr)}this.retainedQueryData[It.bucketInstanceId]=new ta(It.bucketInstanceId,Vt,It.sourceLayerIndex,It.index,q.tileID);var dn={bucket:It,layout:Me,posMatrix:ur,textLabelPlaneMatrix:Zr,labelToScreenMatrix:Wr,scale:Fe,textPixelRatio:$e,holdingForFade:q.holdingForFade(),collisionBoxArray:se,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(It.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(It.sourceID)};if(vt)for(var kn=0,Hn=It.sortKeyRanges;kn<Hn.length;kn+=1){var Kn=Hn[kn],Qn=Kn.sortKey,Xn=Kn.symbolInstanceStart,qn=Kn.symbolInstanceEnd;Y.push({sortKey:Qn,symbolInstanceStart:Xn,symbolInstanceEnd:qn,parameters:dn})}else Y.push({symbolInstanceStart:0,symbolInstanceEnd:It.symbolInstances.length,parameters:dn})}},Br.prototype.attemptAnchorPlacement=function(Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur,lr,Fr,jr,Zr){var Wr=[lr.textOffset0,lr.textOffset1],Jr=ka(Y,q,vt,Wr,It),dn=this.collisionIndex.placeCollisionBox(Ar(ht,Jr.x,Jr.y,Vt,se,this.transform.angle),ur,Me,Fe,$e.predicate);if(Zr){var kn=this.collisionIndex.placeCollisionBox(Ar(Zr,Jr.x,Jr.y,Vt,se,this.transform.angle),ur,Me,Fe,$e.predicate);if(kn.box.length===0)return}if(dn.box.length>0){var Hn;return this.prevPlacement&&this.prevPlacement.variableOffsets[lr.crossTileID]&&this.prevPlacement.placements[lr.crossTileID]&&this.prevPlacement.placements[lr.crossTileID].text&&(Hn=this.prevPlacement.variableOffsets[lr.crossTileID].anchor),this.variableOffsets[lr.crossTileID]={textOffset:Wr,width:q,height:vt,anchor:Y,textBoxScale:It,prevAnchor:Hn},this.markUsedJustification(Fr,Y,lr,jr),Fr.allowVerticalPlacement&&(this.markUsedOrientation(Fr,jr,lr),this.placedOrientations[lr.crossTileID]=jr),{shift:Jr,placedGlyphBoxes:dn}}},Br.prototype.placeLayerBucketPart=function(Y,ht,q){var vt=this,It=Y.parameters,Vt=It.bucket,se=It.layout,Me=It.posMatrix,Fe=It.textLabelPlaneMatrix,$e=It.labelToScreenMatrix,ur=It.textPixelRatio,lr=It.holdingForFade,Fr=It.collisionBoxArray,jr=It.partiallyEvaluatedTextSize,Zr=It.collisionGroup,Wr=se.get("text-optional"),Jr=se.get("icon-optional"),dn=se.get("text-allow-overlap"),kn=se.get("icon-allow-overlap"),Hn=se.get("text-rotation-alignment")==="map",Kn=se.get("text-pitch-alignment")==="map",Qn=se.get("icon-text-fit")!=="none",Xn=se.get("symbol-z-order")==="viewport-y",qn=dn&&(kn||!Vt.hasIconData()||Jr),oa=kn&&(dn||!Vt.hasTextData()||Wr);!Vt.collisionArrays&&Fr&&Vt.deserializeCollisionBoxes(Fr);var ha=function(Sa,ja){if(!ht[Sa.crossTileID]){if(lr){vt.placements[Sa.crossTileID]=new Cn(!1,!1,!1);return}var Ga=!1,li=!1,ai=!0,Ei=null,$a={box:null,offscreen:null},wi={box:null,offscreen:null},Wa=null,ei=null,Wi=null,go=0,Bs=0,Ns=0;ja.textFeatureIndex?go=ja.textFeatureIndex:Sa.useRuntimeCollisionCircles&&(go=Sa.featureIndex),ja.verticalTextFeatureIndex&&(Bs=ja.verticalTextFeatureIndex);var tl=ja.textBox;if(tl){var El=function(Ki){var cs=o.WritingMode.horizontal;if(Vt.allowVerticalPlacement&&!Ki&&vt.prevPlacement){var hs=vt.prevPlacement.placedOrientations[Sa.crossTileID];hs&&(vt.placedOrientations[Sa.crossTileID]=hs,cs=hs,vt.markUsedOrientation(Vt,cs,Sa))}return cs},$u=function(Ki,cs){if(Vt.allowVerticalPlacement&&Sa.numVerticalGlyphVertices>0&&ja.verticalTextBox)for(var hs=0,Lc=Vt.writingModes;hs<Lc.length;hs+=1){var sh=Lc[hs];if(sh===o.WritingMode.vertical?($a=cs(),wi=$a):$a=Ki(),$a&&$a.box&&$a.box.length)break}else $a=Ki()};if(se.get("text-variable-anchor")){var fs=se.get("text-variable-anchor");if(vt.prevPlacement&&vt.prevPlacement.variableOffsets[Sa.crossTileID]){var Jo=vt.prevPlacement.variableOffsets[Sa.crossTileID];fs.indexOf(Jo.anchor)>0&&(fs=fs.filter(function(Ki){return Ki!==Jo.anchor}),fs.unshift(Jo.anchor))}var el=function(Ki,cs,hs){for(var Lc=Ki.x2-Ki.x1,sh=Ki.y2-Ki.y1,zv=Sa.textBoxScale,_v=Qn&&!kn?cs:null,pc={box:[],offscreen:!1},Fv=dn?fs.length*2:fs.length,Pc=0;Pc<Fv;++Pc){var Ov=fs[Pc%fs.length],Bv=Pc>=fs.length,lh=vt.attemptAnchorPlacement(Ov,Ki,Lc,sh,zv,Hn,Kn,ur,Me,Zr,Bv,Sa,Vt,hs,_v);if(lh&&(pc=lh.placedGlyphBoxes,pc&&pc.box&&pc.box.length)){Ga=!0,Ei=lh.shift;break}}return pc},nu=function(){return el(tl,ja.iconBox,o.WritingMode.horizontal)},rl=function(){var Ki=ja.verticalTextBox,cs=$a&&$a.box&&$a.box.length;return Vt.allowVerticalPlacement&&!cs&&Sa.numVerticalGlyphVertices>0&&Ki?el(Ki,ja.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}};$u(nu,rl),$a&&(Ga=$a.box,ai=$a.offscreen);var Ac=El($a&&$a.box);if(!Ga&&vt.prevPlacement){var If=vt.prevPlacement.variableOffsets[Sa.crossTileID];If&&(vt.variableOffsets[Sa.crossTileID]=If,vt.markUsedJustification(Vt,If.anchor,Sa,Ac))}}else{var Cl=function(Ki,cs){var hs=vt.collisionIndex.placeCollisionBox(Ki,dn,ur,Me,Zr.predicate);return hs&&hs.box&&hs.box.length&&(vt.markUsedOrientation(Vt,cs,Sa),vt.placedOrientations[Sa.crossTileID]=cs),hs},Ko=function(){return Cl(tl,o.WritingMode.horizontal)},Ll=function(){var Ki=ja.verticalTextBox;return Vt.allowVerticalPlacement&&Sa.numVerticalGlyphVertices>0&&Ki?Cl(Ki,o.WritingMode.vertical):{box:null,offscreen:null}};$u(Ko,Ll),El($a&&$a.box&&$a.box.length)}}if(Wa=$a,Ga=Wa&&Wa.box&&Wa.box.length>0,ai=Wa&&Wa.offscreen,Sa.useRuntimeCollisionCircles){var bo=Vt.text.placedSymbolArray.get(Sa.centerJustifiedTextSymbolIndex),Mc=o.evaluateSizeForFeature(Vt.textSizeData,jr,bo),dc=se.get("text-padding"),Oo=Sa.collisionCircleDiameter;ei=vt.collisionIndex.placeCollisionCircles(dn,bo,Vt.lineVertexArray,Vt.glyphOffsetArray,Mc,Me,Fe,$e,q,Kn,Zr.predicate,Oo,dc),Ga=dn||ei.circles.length>0&&!ei.collisionDetected,ai=ai&&ei.offscreen}if(ja.iconFeatureIndex&&(Ns=ja.iconFeatureIndex),ja.iconBox){var kf=function(Ki){var cs=Qn&&Ei?Ar(Ki,Ei.x,Ei.y,Hn,Kn,vt.transform.angle):Ki;return vt.collisionIndex.placeCollisionBox(cs,kn,ur,Me,Zr.predicate)};wi&&wi.box&&wi.box.length&&ja.verticalIconBox?(Wi=kf(ja.verticalIconBox),li=Wi.box.length>0):(Wi=kf(ja.iconBox),li=Wi.box.length>0),ai=ai&&Wi.offscreen}var Sc=Wr||Sa.numHorizontalGlyphVertices===0&&Sa.numVerticalGlyphVertices===0,Ec=Jr||Sa.numIconVertices===0;if(!Sc&&!Ec?li=Ga=li&&Ga:Ec?Sc||(li=li&&Ga):Ga=li&&Ga,Ga&&Wa&&Wa.box&&(wi&&wi.box&&Bs?vt.collisionIndex.insertCollisionBox(Wa.box,se.get("text-ignore-placement"),Vt.bucketInstanceId,Bs,Zr.ID):vt.collisionIndex.insertCollisionBox(Wa.box,se.get("text-ignore-placement"),Vt.bucketInstanceId,go,Zr.ID)),li&&Wi&&vt.collisionIndex.insertCollisionBox(Wi.box,se.get("icon-ignore-placement"),Vt.bucketInstanceId,Ns,Zr.ID),ei&&(Ga&&vt.collisionIndex.insertCollisionCircles(ei.circles,se.get("text-ignore-placement"),Vt.bucketInstanceId,go,Zr.ID),q)){var Cc=Vt.bucketInstanceId,zf=vt.collisionCircleArrays[Cc];zf===void 0&&(zf=vt.collisionCircleArrays[Cc]=new Un);for(var _f=0;_f<ei.circles.length;_f+=4)zf.circles.push(ei.circles[_f+0]),zf.circles.push(ei.circles[_f+1]),zf.circles.push(ei.circles[_f+2]),zf.circles.push(ei.collisionDetected?1:0)}vt.placements[Sa.crossTileID]=new Cn(Ga||qn,li||oa,ai||Vt.justReloaded),ht[Sa.crossTileID]=!0}};if(Xn)for(var xa=Vt.getSortedSymbolIndexes(this.transform.angle),ga=xa.length-1;ga>=0;--ga){var Fa=xa[ga];ha(Vt.symbolInstances.get(Fa),Vt.collisionArrays[Fa])}else for(var ti=Y.symbolInstanceStart;ti<Y.symbolInstanceEnd;ti++)ha(Vt.symbolInstances.get(ti),Vt.collisionArrays[ti]);if(q&&Vt.bucketInstanceId in this.collisionCircleArrays){var Za=this.collisionCircleArrays[Vt.bucketInstanceId];o.invert(Za.invProjMatrix,Me),Za.viewportMatrix=this.collisionIndex.getViewportMatrix()}Vt.justReloaded=!1},Br.prototype.markUsedJustification=function(Y,ht,q,vt){var It={left:q.leftJustifiedTextSymbolIndex,center:q.centerJustifiedTextSymbolIndex,right:q.rightJustifiedTextSymbolIndex},Vt;vt===o.WritingMode.vertical?Vt=q.verticalPlacedTextSymbolIndex:Vt=It[o.getAnchorJustification(ht)];for(var se=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex,q.verticalPlacedTextSymbolIndex],Me=0,Fe=se;Me<Fe.length;Me+=1){var $e=Fe[Me];$e>=0&&(Vt>=0&&$e!==Vt?Y.text.placedSymbolArray.get($e).crossTileID=0:Y.text.placedSymbolArray.get($e).crossTileID=q.crossTileID)}},Br.prototype.markUsedOrientation=function(Y,ht,q){for(var vt=ht===o.WritingMode.horizontal||ht===o.WritingMode.horizontalOnly?ht:0,It=ht===o.WritingMode.vertical?ht:0,Vt=[q.leftJustifiedTextSymbolIndex,q.centerJustifiedTextSymbolIndex,q.rightJustifiedTextSymbolIndex],se=0,Me=Vt;se<Me.length;se+=1){var Fe=Me[se];Y.text.placedSymbolArray.get(Fe).placedOrientation=vt}q.verticalPlacedTextSymbolIndex&&(Y.text.placedSymbolArray.get(q.verticalPlacedTextSymbolIndex).placedOrientation=It)},Br.prototype.commit=function(Y){this.commitTime=Y,this.zoomAtLastRecencyCheck=this.transform.zoom;var ht=this.prevPlacement,q=!1;this.prevZoomAdjustment=ht?ht.zoomAdjustment(this.transform.zoom):0;var vt=ht?ht.symbolFadeChange(Y):1,It=ht?ht.opacities:{},Vt=ht?ht.variableOffsets:{},se=ht?ht.placedOrientations:{};for(var Me in this.placements){var Fe=this.placements[Me],$e=It[Me];$e?(this.opacities[Me]=new gn($e,vt,Fe.text,Fe.icon),q=q||Fe.text!==$e.text.placed||Fe.icon!==$e.icon.placed):(this.opacities[Me]=new gn(null,vt,Fe.text,Fe.icon,Fe.skipFade),q=q||Fe.text||Fe.icon)}for(var ur in It){var lr=It[ur];if(!this.opacities[ur]){var Fr=new gn(lr,vt,!1,!1);Fr.isHidden()||(this.opacities[ur]=Fr,q=q||lr.text.placed||lr.icon.placed)}}for(var jr in Vt)!this.variableOffsets[jr]&&this.opacities[jr]&&!this.opacities[jr].isHidden()&&(this.variableOffsets[jr]=Vt[jr]);for(var Zr in se)!this.placedOrientations[Zr]&&this.opacities[Zr]&&!this.opacities[Zr].isHidden()&&(this.placedOrientations[Zr]=se[Zr]);q?this.lastPlacementChangeTime=Y:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ht?ht.lastPlacementChangeTime:Y)},Br.prototype.updateLayerOpacities=function(Y,ht){for(var q={},vt=0,It=ht;vt<It.length;vt+=1){var Vt=It[vt],se=Vt.getBucket(Y);se&&Vt.latestFeatureIndex&&Y.id===se.layerIds[0]&&this.updateBucketOpacities(se,q,Vt.collisionBoxArray)}},Br.prototype.updateBucketOpacities=function(Y,ht,q){var vt=this;Y.hasTextData()&&Y.text.opacityVertexArray.clear(),Y.hasIconData()&&Y.icon.opacityVertexArray.clear(),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexArray.clear(),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexArray.clear();var It=Y.layers[0].layout,Vt=new gn(null,0,!1,!1,!0),se=It.get("text-allow-overlap"),Me=It.get("icon-allow-overlap"),Fe=It.get("text-variable-anchor"),$e=It.get("text-rotation-alignment")==="map",ur=It.get("text-pitch-alignment")==="map",lr=It.get("icon-text-fit")!=="none",Fr=new gn(null,0,se&&(Me||!Y.hasIconData()||It.get("icon-optional")),Me&&(se||!Y.hasTextData()||It.get("text-optional")),!0);!Y.collisionArrays&&q&&(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData())&&Y.deserializeCollisionBoxes(q);for(var jr=function(dn,kn,Hn){for(var Kn=0;Kn<kn/4;Kn++)dn.opacityVertexArray.emplaceBack(Hn)},Zr=function(dn){var kn=Y.symbolInstances.get(dn),Hn=kn.numHorizontalGlyphVertices,Kn=kn.numVerticalGlyphVertices,Qn=kn.crossTileID,Xn=ht[Qn],qn=vt.opacities[Qn];Xn?qn=Vt:qn||(qn=Fr,vt.opacities[Qn]=qn),ht[Qn]=!0;var oa=Hn>0||Kn>0,ha=kn.numIconVertices>0,xa=vt.placedOrientations[kn.crossTileID],ga=xa===o.WritingMode.vertical,Fa=xa===o.WritingMode.horizontal||xa===o.WritingMode.horizontalOnly;if(oa){var ti=Gr(qn.text),Za=ga?$r:ti;jr(Y.text,Hn,Za);var Sa=Fa?$r:ti;jr(Y.text,Kn,Sa);var ja=qn.text.isHidden();[kn.rightJustifiedTextSymbolIndex,kn.centerJustifiedTextSymbolIndex,kn.leftJustifiedTextSymbolIndex].forEach(function(Ns){Ns>=0&&(Y.text.placedSymbolArray.get(Ns).hidden=ja||ga?1:0)}),kn.verticalPlacedTextSymbolIndex>=0&&(Y.text.placedSymbolArray.get(kn.verticalPlacedTextSymbolIndex).hidden=ja||Fa?1:0);var Ga=vt.variableOffsets[kn.crossTileID];Ga&&vt.markUsedJustification(Y,Ga.anchor,kn,xa);var li=vt.placedOrientations[kn.crossTileID];li&&(vt.markUsedJustification(Y,"left",kn,li),vt.markUsedOrientation(Y,li,kn))}if(ha){var ai=Gr(qn.icon),Ei=!(lr&&kn.verticalPlacedIconSymbolIndex&&ga);if(kn.placedIconSymbolIndex>=0){var $a=Ei?ai:$r;jr(Y.icon,kn.numIconVertices,$a),Y.icon.placedSymbolArray.get(kn.placedIconSymbolIndex).hidden=qn.icon.isHidden()}if(kn.verticalPlacedIconSymbolIndex>=0){var wi=Ei?$r:ai;jr(Y.icon,kn.numVerticalIconVertices,wi),Y.icon.placedSymbolArray.get(kn.verticalPlacedIconSymbolIndex).hidden=qn.icon.isHidden()}}if(Y.hasIconCollisionBoxData()||Y.hasTextCollisionBoxData()){var Wa=Y.collisionArrays[dn];if(Wa){var ei=new o.Point(0,0);if(Wa.textBox||Wa.verticalTextBox){var Wi=!0;if(Fe){var go=vt.variableOffsets[Qn];go?(ei=ka(go.anchor,go.width,go.height,go.textOffset,go.textBoxScale),$e&&ei._rotate(ur?vt.transform.angle:-vt.transform.angle)):Wi=!1}Wa.textBox&&Mr(Y.textCollisionBox.collisionVertexArray,qn.text.placed,!Wi||ga,ei.x,ei.y),Wa.verticalTextBox&&Mr(Y.textCollisionBox.collisionVertexArray,qn.text.placed,!Wi||Fa,ei.x,ei.y)}var Bs=!!(!Fa&&Wa.verticalIconBox);Wa.iconBox&&Mr(Y.iconCollisionBox.collisionVertexArray,qn.icon.placed,Bs,lr?ei.x:0,lr?ei.y:0),Wa.verticalIconBox&&Mr(Y.iconCollisionBox.collisionVertexArray,qn.icon.placed,!Bs,lr?ei.x:0,lr?ei.y:0)}}},Wr=0;Wr<Y.symbolInstances.length;Wr++)Zr(Wr);if(Y.sortFeatures(this.transform.angle),this.retainedQueryData[Y.bucketInstanceId]&&(this.retainedQueryData[Y.bucketInstanceId].featureSortOrder=Y.featureSortOrder),Y.hasTextData()&&Y.text.opacityVertexBuffer&&Y.text.opacityVertexBuffer.updateData(Y.text.opacityVertexArray),Y.hasIconData()&&Y.icon.opacityVertexBuffer&&Y.icon.opacityVertexBuffer.updateData(Y.icon.opacityVertexArray),Y.hasIconCollisionBoxData()&&Y.iconCollisionBox.collisionVertexBuffer&&Y.iconCollisionBox.collisionVertexBuffer.updateData(Y.iconCollisionBox.collisionVertexArray),Y.hasTextCollisionBoxData()&&Y.textCollisionBox.collisionVertexBuffer&&Y.textCollisionBox.collisionVertexBuffer.updateData(Y.textCollisionBox.collisionVertexArray),Y.bucketInstanceId in this.collisionCircleArrays){var Jr=this.collisionCircleArrays[Y.bucketInstanceId];Y.placementInvProjMatrix=Jr.invProjMatrix,Y.placementViewportMatrix=Jr.viewportMatrix,Y.collisionCircleArray=Jr.circles,delete this.collisionCircleArrays[Y.bucketInstanceId]}},Br.prototype.symbolFadeChange=function(Y){return this.fadeDuration===0?1:(Y-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Br.prototype.zoomAdjustment=function(Y){return Math.max(0,(this.transform.zoom-Y)/1.5)},Br.prototype.hasTransitions=function(Y){return this.stale||Y-this.lastPlacementChangeTime<this.fadeDuration},Br.prototype.stillRecent=function(Y,ht){var q=this.zoomAtLastRecencyCheck===ht?1-this.zoomAdjustment(ht):1;return this.zoomAtLastRecencyCheck=ht,this.commitTime+this.fadeDuration*q>Y},Br.prototype.setStale=function(){this.stale=!0};function Mr(ut,Y,ht,q,vt){ut.emplaceBack(Y?1:0,ht?1:0,q||0,vt||0),ut.emplaceBack(Y?1:0,ht?1:0,q||0,vt||0),ut.emplaceBack(Y?1:0,ht?1:0,q||0,vt||0),ut.emplaceBack(Y?1:0,ht?1:0,q||0,vt||0)}var Nr=Math.pow(2,25),un=Math.pow(2,24),Dn=Math.pow(2,17),mn=Math.pow(2,16),cn=Math.pow(2,9),Er=Math.pow(2,8),Yr=Math.pow(2,1);function Gr(ut){if(ut.opacity===0&&!ut.placed)return 0;if(ut.opacity===1&&ut.placed)return 4294967295;var Y=ut.placed?1:0,ht=Math.floor(ut.opacity*127);return ht*Nr+Y*un+ht*Dn+Y*mn+ht*cn+Y*Er+ht*Yr+Y}var $r=0,wn=function(Y){this._sortAcrossTiles=Y.layout.get("symbol-z-order")!=="viewport-y"&&Y.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};wn.prototype.continuePlacement=function(Y,ht,q,vt,It){for(var Vt=this._bucketParts;this._currentTileIndex<Y.length;){var se=Y[this._currentTileIndex];if(ht.getBucketParts(Vt,vt,se,this._sortAcrossTiles),this._currentTileIndex++,It())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Vt.sort(function(Fe,$e){return Fe.sortKey-$e.sortKey}));this._currentPartIndex<Vt.length;){var Me=Vt[this._currentPartIndex];if(ht.placeLayerBucketPart(Me,this._seenCrossTileIDs,q),this._currentPartIndex++,It())return!0}return!1};var An=function(Y,ht,q,vt,It,Vt,se){this.placement=new Br(Y,It,Vt,se),this._currentPlacementIndex=ht.length-1,this._forceFullPlacement=q,this._showCollisionBoxes=vt,this._done=!1};An.prototype.isDone=function(){return this._done},An.prototype.continuePlacement=function(Y,ht,q){for(var vt=this,It=o.browser.now(),Vt=function(){var ur=o.browser.now()-It;return vt._forceFullPlacement?!1:ur>2};this._currentPlacementIndex>=0;){var se=Y[this._currentPlacementIndex],Me=ht[se],Fe=this.placement.collisionIndex.transform.zoom;if(Me.type==="symbol"&&(!Me.minzoom||Me.minzoom<=Fe)&&(!Me.maxzoom||Me.maxzoom>Fe)){this._inProgressLayer||(this._inProgressLayer=new wn(Me));var $e=this._inProgressLayer.continuePlacement(q[Me.source],this.placement,this._showCollisionBoxes,Me,Vt);if($e)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},An.prototype.commit=function(Y){return this.placement.commit(Y),this.placement};var On=512/o.EXTENT/2,Vn=function(Y,ht,q){this.tileID=Y,this.indexedSymbolInstances={},this.bucketInstanceId=q;for(var vt=0;vt<ht.length;vt++){var It=ht.get(vt),Vt=It.key;this.indexedSymbolInstances[Vt]||(this.indexedSymbolInstances[Vt]=[]),this.indexedSymbolInstances[Vt].push({crossTileID:It.crossTileID,coord:this.getScaledCoordinates(It,Y)})}};Vn.prototype.getScaledCoordinates=function(Y,ht){var q=ht.canonical.z-this.tileID.canonical.z,vt=On/Math.pow(2,q);return{x:Math.floor((ht.canonical.x*o.EXTENT+Y.anchorX)*vt),y:Math.floor((ht.canonical.y*o.EXTENT+Y.anchorY)*vt)}},Vn.prototype.findMatches=function(Y,ht,q){for(var vt=this.tileID.canonical.z<ht.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ht.canonical.z),It=0;It<Y.length;It++){var Vt=Y.get(It);if(!Vt.crossTileID){var se=this.indexedSymbolInstances[Vt.key];if(se)for(var Me=this.getScaledCoordinates(Vt,ht),Fe=0,$e=se;Fe<$e.length;Fe+=1){var ur=$e[Fe];if(Math.abs(ur.coord.x-Me.x)<=vt&&Math.abs(ur.coord.y-Me.y)<=vt&&!q[ur.crossTileID]){q[ur.crossTileID]=!0,Vt.crossTileID=ur.crossTileID;break}}}}};var zn=function(){this.maxCrossTileID=0};zn.prototype.generate=function(){return++this.maxCrossTileID};var Zn=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Zn.prototype.handleWrapJump=function(Y){var ht=Math.round((Y-this.lng)/360);if(ht!==0)for(var q in this.indexes){var vt=this.indexes[q],It={};for(var Vt in vt){var se=vt[Vt];se.tileID=se.tileID.unwrapTo(se.tileID.wrap+ht),It[se.tileID.key]=se}this.indexes[q]=It}this.lng=Y},Zn.prototype.addBucket=function(Y,ht,q){if(this.indexes[Y.overscaledZ]&&this.indexes[Y.overscaledZ][Y.key]){if(this.indexes[Y.overscaledZ][Y.key].bucketInstanceId===ht.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(Y.overscaledZ,this.indexes[Y.overscaledZ][Y.key])}for(var vt=0;vt<ht.symbolInstances.length;vt++){var It=ht.symbolInstances.get(vt);It.crossTileID=0}this.usedCrossTileIDs[Y.overscaledZ]||(this.usedCrossTileIDs[Y.overscaledZ]={});var Vt=this.usedCrossTileIDs[Y.overscaledZ];for(var se in this.indexes){var Me=this.indexes[se];if(Number(se)>Y.overscaledZ)for(var Fe in Me){var $e=Me[Fe];$e.tileID.isChildOf(Y)&&$e.findMatches(ht.symbolInstances,Y,Vt)}else{var ur=Y.scaledTo(Number(se)),lr=Me[ur.key];lr&&lr.findMatches(ht.symbolInstances,Y,Vt)}}for(var Fr=0;Fr<ht.symbolInstances.length;Fr++){var jr=ht.symbolInstances.get(Fr);jr.crossTileID||(jr.crossTileID=q.generate(),Vt[jr.crossTileID]=!0)}return this.indexes[Y.overscaledZ]===void 0&&(this.indexes[Y.overscaledZ]={}),this.indexes[Y.overscaledZ][Y.key]=new Vn(Y,ht.symbolInstances,ht.bucketInstanceId),!0},Zn.prototype.removeBucketCrossTileIDs=function(Y,ht){for(var q in ht.indexedSymbolInstances)for(var vt=0,It=ht.indexedSymbolInstances[q];vt<It.length;vt+=1){var Vt=It[vt];delete this.usedCrossTileIDs[Y][Vt.crossTileID]}},Zn.prototype.removeStaleBuckets=function(Y){var ht=!1;for(var q in this.indexes){var vt=this.indexes[q];for(var It in vt)Y[vt[It].bucketInstanceId]||(this.removeBucketCrossTileIDs(q,vt[It]),delete vt[It],ht=!0)}return ht};var Jn=function(){this.layerIndexes={},this.crossTileIDs=new zn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Jn.prototype.addLayer=function(Y,ht,q){var vt=this.layerIndexes[Y.id];vt===void 0&&(vt=this.layerIndexes[Y.id]=new Zn);var It=!1,Vt={};vt.handleWrapJump(q);for(var se=0,Me=ht;se<Me.length;se+=1){var Fe=Me[se],$e=Fe.getBucket(Y);!$e||Y.id!==$e.layerIds[0]||($e.bucketInstanceId||($e.bucketInstanceId=++this.maxBucketInstanceId),vt.addBucket(Fe.tileID,$e,this.crossTileIDs)&&(It=!0),Vt[$e.bucketInstanceId]=!0)}return vt.removeStaleBuckets(Vt)&&(It=!0),It},Jn.prototype.pruneUnusedLayers=function(Y){var ht={};Y.forEach(function(vt){ht[vt]=!0});for(var q in this.layerIndexes)ht[q]||delete this.layerIndexes[q]};var ua=function(ut,Y){return o.emitValidationErrors(ut,Y&&Y.filter(function(ht){return ht.identifier!=="source.canvas"}))},Ra=o.pick(Ee,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),mi=o.pick(Ee,["setCenter","setZoom","setBearing","setPitch"]),ri=Ge(),ho=function(ut){function Y(ht,q){var vt=this;q===void 0&&(q={}),ut.call(this),this.map=ht,this.dispatcher=new I(xr(),this),this.imageManager=new T,this.imageManager.setEventedParent(this),this.glyphManager=new S(ht._requestManager,q.localIdeographFontFamily),this.lineAtlas=new k(256,512),this.crossTileSymbolIndex=new Jn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());var It=this;this._rtlTextPluginCallback=Y.registerForPluginStateChange(function(Vt){var se={pluginStatus:Vt.pluginStatus,pluginURL:Vt.pluginURL};It.dispatcher.broadcast("syncRTLPluginState",se,function(Me,Fe){if(o.triggerPluginCompletionEvent(Me),Fe){var $e=Fe.every(function(lr){return lr});if($e)for(var ur in It.sourceCaches)It.sourceCaches[ur].reload()}})}),this.on("data",function(Vt){if(!(Vt.dataType!=="source"||Vt.sourceDataType!=="metadata")){var se=vt.sourceCaches[Vt.sourceId];if(se){var Me=se.getSource();if(!(!Me||!Me.vectorLayerIds))for(var Fe in vt._layers){var $e=vt._layers[Fe];$e.source===Me.id&&vt._validateLayer($e)}}}})}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.loadURL=function(q,vt){var It=this;vt===void 0&&(vt={}),this.fire(new o.Event("dataloading",{dataType:"style"}));var Vt=typeof vt.validate=="boolean"?vt.validate:!o.isMapboxURL(q);q=this.map._requestManager.normalizeStyleURL(q,vt.accessToken);var se=this.map._requestManager.transformRequest(q,o.ResourceType.Style);this._request=o.getJSON(se,function(Me,Fe){It._request=null,Me?It.fire(new o.ErrorEvent(Me)):Fe&&It._load(Fe,Vt)})},Y.prototype.loadJSON=function(q,vt){var It=this;vt===void 0&&(vt={}),this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.browser.frame(function(){It._request=null,It._load(q,vt.validate!==!1)})},Y.prototype.loadEmpty=function(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ri,!1)},Y.prototype._load=function(q,vt){if(!(vt&&ua(this,o.validateStyle(q)))){this._loaded=!0,this.stylesheet=q;for(var It in q.sources)this.addSource(It,q.sources[It],{validate:!1});q.sprite?this._loadSprite(q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(q.glyphs);var Vt=tr(this.stylesheet.layers);this._order=Vt.map(function($e){return $e.id}),this._layers={},this._serializedLayers={};for(var se=0,Me=Vt;se<Me.length;se+=1){var Fe=Me[se];Fe=o.createStyleLayer(Fe),Fe.setEventedParent(this,{layer:{id:Fe.id}}),this._layers[Fe.id]=Fe,this._serializedLayers[Fe.id]=Fe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new m(this.stylesheet.light),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}},Y.prototype._loadSprite=function(q){var vt=this;this._spriteRequest=u(q,this.map._requestManager,function(It,Vt){if(vt._spriteRequest=null,It)vt.fire(new o.ErrorEvent(It));else if(Vt)for(var se in Vt)vt.imageManager.addImage(se,Vt[se]);vt.imageManager.setLoaded(!0),vt._availableImages=vt.imageManager.listImages(),vt.dispatcher.broadcast("setImages",vt._availableImages),vt.fire(new o.Event("data",{dataType:"style"}))})},Y.prototype._validateLayer=function(q){var vt=this.sourceCaches[q.source];if(vt){var It=q.sourceLayer;if(It){var Vt=vt.getSource();(Vt.type==="geojson"||Vt.vectorLayerIds&&Vt.vectorLayerIds.indexOf(It)===-1)&&this.fire(new o.ErrorEvent(new Error('Source layer "'+It+'" does not exist on source "'+Vt.id+'" as specified by style layer "'+q.id+'"')))}}},Y.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var q in this.sourceCaches)if(!this.sourceCaches[q].loaded())return!1;return!!this.imageManager.isLoaded()},Y.prototype._serializeLayers=function(q){for(var vt=[],It=0,Vt=q;It<Vt.length;It+=1){var se=Vt[It],Me=this._layers[se];Me.type!=="custom"&&vt.push(Me.serialize())}return vt},Y.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var q in this.sourceCaches)if(this.sourceCaches[q].hasTransition())return!0;for(var vt in this._layers)if(this._layers[vt].hasTransition())return!0;return!1},Y.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},Y.prototype.update=function(q){if(this._loaded){var vt=this._changed;if(this._changed){var It=Object.keys(this._updatedLayers),Vt=Object.keys(this._removedLayers);(It.length||Vt.length)&&this._updateWorkerLayers(It,Vt);for(var se in this._updatedSources){var Me=this._updatedSources[se];Me==="reload"?this._reloadSource(se):Me==="clear"&&this._clearSource(se)}this._updateTilesForChangedImages();for(var Fe in this._updatedPaintProps)this._layers[Fe].updateTransitions(q);this.light.updateTransitions(q),this._resetUpdates()}var $e={};for(var ur in this.sourceCaches){var lr=this.sourceCaches[ur];$e[ur]=lr.used,lr.used=!1}for(var Fr=0,jr=this._order;Fr<jr.length;Fr+=1){var Zr=jr[Fr],Wr=this._layers[Zr];Wr.recalculate(q,this._availableImages),!Wr.isHidden(q.zoom)&&Wr.source&&(this.sourceCaches[Wr.source].used=!0)}for(var Jr in $e){var dn=this.sourceCaches[Jr];$e[Jr]!==dn.used&&dn.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:Jr}))}this.light.recalculate(q),this.z=q.zoom,vt&&this.fire(new o.Event("data",{dataType:"style"}))}},Y.prototype._updateTilesForChangedImages=function(){var q=Object.keys(this._changedImages);if(q.length){for(var vt in this.sourceCaches)this.sourceCaches[vt].reloadTilesForDependencies(["icons","patterns"],q);this._changedImages={}}},Y.prototype._updateWorkerLayers=function(q,vt){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(q),removedIds:vt})},Y.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},Y.prototype.setState=function(q){var vt=this;if(this._checkLoaded(),ua(this,o.validateStyle(q)))return!1;q=o.clone$1(q),q.layers=tr(q.layers);var It=En(this.serialize(),q).filter(function(se){return!(se.command in mi)});if(It.length===0)return!1;var Vt=It.filter(function(se){return!(se.command in Ra)});if(Vt.length>0)throw new Error("Unimplemented: "+Vt.map(function(se){return se.command}).join(", ")+".");return It.forEach(function(se){se.command!=="setTransition"&&vt[se.command].apply(vt,se.args)}),this.stylesheet=q,!0},Y.prototype.addImage=function(q,vt){if(this.getImage(q))return this.fire(new o.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(q,vt),this._afterImageUpdated(q)},Y.prototype.updateImage=function(q,vt){this.imageManager.updateImage(q,vt)},Y.prototype.getImage=function(q){return this.imageManager.getImage(q)},Y.prototype.removeImage=function(q){if(!this.getImage(q))return this.fire(new o.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(q),this._afterImageUpdated(q)},Y.prototype._afterImageUpdated=function(q){this._availableImages=this.imageManager.listImages(),this._changedImages[q]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))},Y.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},Y.prototype.addSource=function(q,vt,It){var Vt=this;if(It===void 0&&(It={}),this._checkLoaded(),this.sourceCaches[q]!==void 0)throw new Error("There is already a source with this ID");if(!vt.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(vt).join(", ")+".");var se=["vector","raster","geojson","video","image"],Me=se.indexOf(vt.type)>=0;if(!(Me&&this._validate(o.validateStyle.source,"sources."+q,vt,null,It))){this.map&&this.map._collectResourceTiming&&(vt.collectResourceTiming=!0);var Fe=this.sourceCaches[q]=new ke(q,vt,this.dispatcher);Fe.style=this,Fe.setEventedParent(this,function(){return{isSourceLoaded:Vt.loaded(),source:Fe.serialize(),sourceId:q}}),Fe.onAdd(this.map),this._changed=!0}},Y.prototype.removeSource=function(q){if(this._checkLoaded(),this.sourceCaches[q]===void 0)throw new Error("There is no source with this ID");for(var vt in this._layers)if(this._layers[vt].source===q)return this.fire(new o.ErrorEvent(new Error('Source "'+q+'" cannot be removed while layer "'+vt+'" is using it.')));var It=this.sourceCaches[q];delete this.sourceCaches[q],delete this._updatedSources[q],It.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:q})),It.setEventedParent(null),It.clearTiles(),It.onRemove&&It.onRemove(this.map),this._changed=!0},Y.prototype.setGeoJSONSourceData=function(q,vt){this._checkLoaded();var It=this.sourceCaches[q].getSource();It.setData(vt),this._changed=!0},Y.prototype.getSource=function(q){return this.sourceCaches[q]&&this.sourceCaches[q].getSource()},Y.prototype.addLayer=function(q,vt,It){It===void 0&&(It={}),this._checkLoaded();var Vt=q.id;if(this.getLayer(Vt)){this.fire(new o.ErrorEvent(new Error('Layer with id "'+Vt+'" already exists on this map')));return}var se;if(q.type==="custom"){if(ua(this,o.validateCustomStyleLayer(q)))return;se=o.createStyleLayer(q)}else{if(typeof q.source=="object"&&(this.addSource(Vt,q.source),q=o.clone$1(q),q=o.extend(q,{source:Vt})),this._validate(o.validateStyle.layer,"layers."+Vt,q,{arrayIndex:-1},It))return;se=o.createStyleLayer(q),this._validateLayer(se),se.setEventedParent(this,{layer:{id:Vt}}),this._serializedLayers[se.id]=se.serialize()}var Me=vt?this._order.indexOf(vt):this._order.length;if(vt&&Me===-1){this.fire(new o.ErrorEvent(new Error('Layer with id "'+vt+'" does not exist on this map.')));return}if(this._order.splice(Me,0,Vt),this._layerOrderChanged=!0,this._layers[Vt]=se,this._removedLayers[Vt]&&se.source&&se.type!=="custom"){var Fe=this._removedLayers[Vt];delete this._removedLayers[Vt],Fe.type!==se.type?this._updatedSources[se.source]="clear":(this._updatedSources[se.source]="reload",this.sourceCaches[se.source].pause())}this._updateLayer(se),se.onAdd&&se.onAdd(this.map)},Y.prototype.moveLayer=function(q,vt){this._checkLoaded(),this._changed=!0;var It=this._layers[q];if(!It){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be moved.")));return}if(q!==vt){var Vt=this._order.indexOf(q);this._order.splice(Vt,1);var se=vt?this._order.indexOf(vt):this._order.length;if(vt&&se===-1){this.fire(new o.ErrorEvent(new Error('Layer with id "'+vt+'" does not exist on this map.')));return}this._order.splice(se,0,q),this._layerOrderChanged=!0}},Y.prototype.removeLayer=function(q){this._checkLoaded();var vt=this._layers[q];if(!vt){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be removed.")));return}vt.setEventedParent(null);var It=this._order.indexOf(q);this._order.splice(It,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[q]=vt,delete this._layers[q],delete this._serializedLayers[q],delete this._updatedLayers[q],delete this._updatedPaintProps[q],vt.onRemove&&vt.onRemove(this.map)},Y.prototype.getLayer=function(q){return this._layers[q]},Y.prototype.hasLayer=function(q){return q in this._layers},Y.prototype.setLayerZoomRange=function(q,vt,It){this._checkLoaded();var Vt=this.getLayer(q);if(!Vt){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot have zoom extent.")));return}Vt.minzoom===vt&&Vt.maxzoom===It||(vt!=null&&(Vt.minzoom=vt),It!=null&&(Vt.maxzoom=It),this._updateLayer(Vt))},Y.prototype.setFilter=function(q,vt,It){It===void 0&&(It={}),this._checkLoaded();var Vt=this.getLayer(q);if(!Vt){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be filtered.")));return}if(!o.deepEqual(Vt.filter,vt)){if(vt==null){Vt.filter=void 0,this._updateLayer(Vt);return}this._validate(o.validateStyle.filter,"layers."+Vt.id+".filter",vt,null,It)||(Vt.filter=o.clone$1(vt),this._updateLayer(Vt))}},Y.prototype.getFilter=function(q){return o.clone$1(this.getLayer(q).filter)},Y.prototype.setLayoutProperty=function(q,vt,It,Vt){Vt===void 0&&(Vt={}),this._checkLoaded();var se=this.getLayer(q);if(!se){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")));return}o.deepEqual(se.getLayoutProperty(vt),It)||(se.setLayoutProperty(vt,It,Vt),this._updateLayer(se))},Y.prototype.getLayoutProperty=function(q,vt){var It=this.getLayer(q);if(!It){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style.")));return}return It.getLayoutProperty(vt)},Y.prototype.setPaintProperty=function(q,vt,It,Vt){Vt===void 0&&(Vt={}),this._checkLoaded();var se=this.getLayer(q);if(!se){this.fire(new o.ErrorEvent(new Error("The layer '"+q+"' does not exist in the map's style and cannot be styled.")));return}if(!o.deepEqual(se.getPaintProperty(vt),It)){var Me=se.setPaintProperty(vt,It,Vt);Me&&this._updateLayer(se),this._changed=!0,this._updatedPaintProps[q]=!0}},Y.prototype.getPaintProperty=function(q,vt){return this.getLayer(q).getPaintProperty(vt)},Y.prototype.setFeatureState=function(q,vt){this._checkLoaded();var It=q.source,Vt=q.sourceLayer,se=this.sourceCaches[It];if(se===void 0){this.fire(new o.ErrorEvent(new Error("The source '"+It+"' does not exist in the map's style.")));return}var Me=se.getSource().type;if(Me==="geojson"&&Vt){this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(Me==="vector"&&!Vt){this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}q.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),se.setFeatureState(Vt,q.id,vt)},Y.prototype.removeFeatureState=function(q,vt){this._checkLoaded();var It=q.source,Vt=this.sourceCaches[It];if(Vt===void 0){this.fire(new o.ErrorEvent(new Error("The source '"+It+"' does not exist in the map's style.")));return}var se=Vt.getSource().type,Me=se==="vector"?q.sourceLayer:void 0;if(se==="vector"&&!Me){this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(vt&&typeof q.id!="string"&&typeof q.id!="number"){this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));return}Vt.removeFeatureState(Me,q.id,vt)},Y.prototype.getFeatureState=function(q){this._checkLoaded();var vt=q.source,It=q.sourceLayer,Vt=this.sourceCaches[vt];if(Vt===void 0){this.fire(new o.ErrorEvent(new Error("The source '"+vt+"' does not exist in the map's style.")));return}var se=Vt.getSource().type;if(se==="vector"&&!It){this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return q.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),Vt.getFeatureState(It,q.id)},Y.prototype.getTransition=function(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},Y.prototype.serialize=function(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,function(q){return q.serialize()}),layers:this._serializeLayers(this._order)},function(q){return q!==void 0})},Y.prototype._updateLayer=function(q){this._updatedLayers[q.id]=!0,q.source&&!this._updatedSources[q.source]&&this.sourceCaches[q.source].getSource().type!=="raster"&&(this._updatedSources[q.source]="reload",this.sourceCaches[q.source].pause()),this._changed=!0},Y.prototype._flattenAndSortRenderedFeatures=function(q){for(var vt=this,It=function(Fa){return vt._layers[Fa].type==="fill-extrusion"},Vt={},se=[],Me=this._order.length-1;Me>=0;Me--){var Fe=this._order[Me];if(It(Fe)){Vt[Fe]=Me;for(var $e=0,ur=q;$e<ur.length;$e+=1){var lr=ur[$e],Fr=lr[Fe];if(Fr)for(var jr=0,Zr=Fr;jr<Zr.length;jr+=1){var Wr=Zr[jr];se.push(Wr)}}}}se.sort(function(Fa,ti){return ti.intersectionZ-Fa.intersectionZ});for(var Jr=[],dn=this._order.length-1;dn>=0;dn--){var kn=this._order[dn];if(It(kn))for(var Hn=se.length-1;Hn>=0;Hn--){var Kn=se[Hn].feature;if(Vt[Kn.layer.id]<dn)break;Jr.push(Kn),se.pop()}else for(var Qn=0,Xn=q;Qn<Xn.length;Qn+=1){var qn=Xn[Qn],oa=qn[kn];if(oa)for(var ha=0,xa=oa;ha<xa.length;ha+=1){var ga=xa[ha];Jr.push(ga.feature)}}}return Jr},Y.prototype.queryRenderedFeatures=function(q,vt,It){vt&&vt.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",vt.filter,null,vt);var Vt={};if(vt&&vt.layers){if(!Array.isArray(vt.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var se=0,Me=vt.layers;se<Me.length;se+=1){var Fe=Me[se],$e=this._layers[Fe];if(!$e)return this.fire(new o.ErrorEvent(new Error("The layer '"+Fe+"' does not exist in the map's style and cannot be queried for features."))),[];Vt[$e.source]=!0}}var ur=[];vt.availableImages=this._availableImages;for(var lr in this.sourceCaches)vt.layers&&!Vt[lr]||ur.push(K(this.sourceCaches[lr],this._layers,this._serializedLayers,q,vt,It));return this.placement&&ur.push(H(this._layers,this._serializedLayers,this.sourceCaches,q,vt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ur)},Y.prototype.querySourceFeatures=function(q,vt){vt&&vt.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",vt.filter,null,vt);var It=this.sourceCaches[q];return It?at(It,vt):[]},Y.prototype.addSourceType=function(q,vt,It){if(Y.getSourceType(q))return It(new Error('A source type called "'+q+'" already exists.'));if(Y.setSourceType(q,vt),!vt.workerSourceURL)return It(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:q,url:vt.workerSourceURL},It)},Y.prototype.getLight=function(){return this.light.getLight()},Y.prototype.setLight=function(q,vt){vt===void 0&&(vt={}),this._checkLoaded();var It=this.light.getLight(),Vt=!1;for(var se in q)if(!o.deepEqual(q[se],It[se])){Vt=!0;break}if(Vt){var Me={now:o.browser.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(q,vt),this.light.updateTransitions(Me)}},Y.prototype._validate=function(q,vt,It,Vt,se){return se===void 0&&(se={}),se&&se.validate===!1?!1:ua(this,q.call(o.validateStyle,o.extend({key:vt,style:this.serialize(),value:It,styleSpec:o.styleSpec},Vt)))},Y.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var q in this._layers){var vt=this._layers[q];vt.setEventedParent(null)}for(var It in this.sourceCaches)this.sourceCaches[It].clearTiles(),this.sourceCaches[It].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},Y.prototype._clearSource=function(q){this.sourceCaches[q].clearTiles()},Y.prototype._reloadSource=function(q){this.sourceCaches[q].resume(),this.sourceCaches[q].reload()},Y.prototype._updateSources=function(q){for(var vt in this.sourceCaches)this.sourceCaches[vt].update(q)},Y.prototype._generateCollisionBoxes=function(){for(var q in this.sourceCaches)this._reloadSource(q)},Y.prototype._updatePlacement=function(q,vt,It,Vt,se){se===void 0&&(se=!1);for(var Me=!1,Fe=!1,$e={},ur=0,lr=this._order;ur<lr.length;ur+=1){var Fr=lr[ur],jr=this._layers[Fr];if(jr.type==="symbol"){if(!$e[jr.source]){var Zr=this.sourceCaches[jr.source];$e[jr.source]=Zr.getRenderableIds(!0).map(function(Qn){return Zr.getTileByID(Qn)}).sort(function(Qn,Xn){return Xn.tileID.overscaledZ-Qn.tileID.overscaledZ||(Qn.tileID.isLessThan(Xn.tileID)?-1:1)})}var Wr=this.crossTileSymbolIndex.addLayer(jr,$e[jr.source],q.center.lng);Me=Me||Wr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),se=se||this._layerOrderChanged||It===0,(se||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.browser.now(),q.zoom))&&(this.pauseablePlacement=new An(q,this._order,se,vt,It,Vt,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$e),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.browser.now()),Fe=!0),Me&&this.pauseablePlacement.placement.setStale()),Fe||Me)for(var Jr=0,dn=this._order;Jr<dn.length;Jr+=1){var kn=dn[Jr],Hn=this._layers[kn];Hn.type==="symbol"&&this.placement.updateLayerOpacities(Hn,$e[Hn.source])}var Kn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.browser.now());return Kn},Y.prototype._releaseSymbolFadeTiles=function(){for(var q in this.sourceCaches)this.sourceCaches[q].releaseSymbolFadeTiles()},Y.prototype.getImages=function(q,vt,It){this.imageManager.getImages(vt.icons,It),this._updateTilesForChangedImages();var Vt=this.sourceCaches[vt.source];Vt&&Vt.setDependencies(vt.tileID.key,vt.type,vt.icons)},Y.prototype.getGlyphs=function(q,vt,It){this.glyphManager.getGlyphs(vt.stacks,It)},Y.prototype.getResource=function(q,vt,It){return o.makeRequest(vt,It)},Y}(o.Evented);ho.getSourceType=Q,ho.setSourceType=W,ho.registerForPluginStateChange=o.registerForPluginStateChange;var So=o.createLayout([{name:"a_pos",type:"Int16",components:2}]),ro=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,ys=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,il=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",ni=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,_l="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Iu=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qi=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,mo="void main() {gl_FragColor=vec4(1.0);}",ol="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",uu=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Oi=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,sl=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,Ui="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Xi="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",ll="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",no="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",ao="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ko="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",of="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Eo=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zf=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,as=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$i=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,ku=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ls=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,is=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,zu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,sf=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jf=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,fu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Kf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Jf=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Qf="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",_u=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$f="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",qf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lf=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,uf=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ys=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,ul=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Fl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Ol=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ff=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,ms=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,tc="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",cu=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cf=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,hf=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Vo=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,fl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Xs=xi(ro,ys),Bl=xi(il,zl),Ps=xi(ni,_l),os=xi(Iu,Qi),Fu=xi(mo,ol),cl=xi(uu,Oi),Ho=xi(sl,Ui),zi=xi(Xi,ll),Ou=xi(no,ao),ec=xi(ko,of),vu=xi(Eo,Zf),hl=xi(as,$i),vl=xi(ku,Ls),Co=xi(is,zu),du=xi(sf,jf),dl=xi(fu,Kf),pu=xi(Jf,Qf),rc=xi(_u,$f),vf=xi(qf,lf),Bu=xi(uf,Ys),Nu=xi(ul,Fl),Uu=xi(Ol,ff),pl=xi(ms,tc),gu=xi(cu,cf),Nl=xi(hf,hu),yu=xi(Vo,fl);function xi(ut,Y){var ht=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,q=Y.match(/attribute ([\w]+) ([\w]+)/g),vt=ut.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),It=Y.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),Vt=It?It.concat(vt):vt,se={};return ut=ut.replace(ht,function(Me,Fe,$e,ur,lr){return se[lr]=!0,Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+lr+`
varying `+$e+" "+ur+" "+lr+`;
#else
uniform `+$e+" "+ur+" u_"+lr+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+lr+`
    `+$e+" "+ur+" "+lr+" = u_"+lr+`;
#endif
`}),Y=Y.replace(ht,function(Me,Fe,$e,ur,lr){var Fr=ur==="float"?"vec2":"vec4",jr=lr.match(/color/)?"color":Fr;return se[lr]?Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+lr+`
uniform lowp float u_`+lr+`_t;
attribute `+$e+" "+Fr+" a_"+lr+`;
varying `+$e+" "+ur+" "+lr+`;
#else
uniform `+$e+" "+ur+" u_"+lr+`;
#endif
`:jr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lr+`
    `+lr+" = a_"+lr+`;
#else
    `+$e+" "+ur+" "+lr+" = u_"+lr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lr+`
    `+lr+" = unpack_mix_"+jr+"(a_"+lr+", u_"+lr+`_t);
#else
    `+$e+" "+ur+" "+lr+" = u_"+lr+`;
#endif
`:Fe==="define"?`
#ifndef HAS_UNIFORM_u_`+lr+`
uniform lowp float u_`+lr+`_t;
attribute `+$e+" "+Fr+" a_"+lr+`;
#else
uniform `+$e+" "+ur+" u_"+lr+`;
#endif
`:jr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lr+`
    `+$e+" "+ur+" "+lr+" = a_"+lr+`;
#else
    `+$e+" "+ur+" "+lr+" = u_"+lr+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lr+`
    `+$e+" "+ur+" "+lr+" = unpack_mix_"+jr+"(a_"+lr+", u_"+lr+`_t);
#else
    `+$e+" "+ur+" "+lr+" = u_"+lr+`;
#endif
`}),{fragmentSource:ut,vertexSource:Y,staticAttributes:q,staticUniforms:Vt}}var df=Object.freeze({__proto__:null,prelude:Xs,background:Bl,backgroundPattern:Ps,circle:os,clippingMask:Fu,heatmap:cl,heatmapTexture:Ho,collisionBox:zi,collisionCircle:Ou,debug:ec,fill:vu,fillOutline:hl,fillOutlinePattern:vl,fillPattern:Co,fillExtrusion:du,fillExtrusionPattern:dl,hillshadePrepare:pu,hillshade:rc,line:vf,lineGradient:Bu,linePattern:Nu,lineSDF:Uu,raster:pl,symbolIcon:gu,symbolSDF:Nl,symbolTextAndIcon:yu}),Go=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Go.prototype.bind=function(Y,ht,q,vt,It,Vt,se,Me){this.context=Y;for(var Fe=this.boundPaintVertexBuffers.length!==vt.length,$e=0;!Fe&&$e<vt.length;$e++)this.boundPaintVertexBuffers[$e]!==vt[$e]&&(Fe=!0);var ur=!this.vao||this.boundProgram!==ht||this.boundLayoutVertexBuffer!==q||Fe||this.boundIndexBuffer!==It||this.boundVertexOffset!==Vt||this.boundDynamicVertexBuffer!==se||this.boundDynamicVertexBuffer2!==Me;!Y.extVertexArrayObject||ur?this.freshBind(ht,q,vt,It,Vt,se,Me):(Y.bindVertexArrayOES.set(this.vao),se&&se.bind(),It&&It.dynamicDraw&&It.bind(),Me&&Me.bind())},Go.prototype.freshBind=function(Y,ht,q,vt,It,Vt,se){var Me,Fe=Y.numAttributes,$e=this.context,ur=$e.gl;if($e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$e.extVertexArrayObject.createVertexArrayOES(),$e.bindVertexArrayOES.set(this.vao),Me=0,this.boundProgram=Y,this.boundLayoutVertexBuffer=ht,this.boundPaintVertexBuffers=q,this.boundIndexBuffer=vt,this.boundVertexOffset=It,this.boundDynamicVertexBuffer=Vt,this.boundDynamicVertexBuffer2=se;else{Me=$e.currentNumAttributes||0;for(var lr=Fe;lr<Me;lr++)ur.disableVertexAttribArray(lr)}ht.enableAttributes(ur,Y);for(var Fr=0,jr=q;Fr<jr.length;Fr+=1){var Zr=jr[Fr];Zr.enableAttributes(ur,Y)}Vt&&Vt.enableAttributes(ur,Y),se&&se.enableAttributes(ur,Y),ht.bind(),ht.setVertexAttribPointers(ur,Y,It);for(var Wr=0,Jr=q;Wr<Jr.length;Wr+=1){var dn=Jr[Wr];dn.bind(),dn.setVertexAttribPointers(ur,Y,It)}Vt&&(Vt.bind(),Vt.setVertexAttribPointers(ur,Y,It)),vt&&vt.bind(),se&&(se.bind(),se.setVertexAttribPointers(ur,Y,It)),$e.currentNumAttributes=Fe},Go.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};function pf(ut){for(var Y=[],ht=0;ht<ut.length;ht++)if(ut[ht]!==null){var q=ut[ht].split(" ");Y.push(q.pop())}return Y}var Vu=function(Y,ht,q,vt,It,Vt){var se=Y.gl;this.program=se.createProgram();for(var Me=pf(q.staticAttributes),Fe=vt?vt.getBinderAttributes():[],$e=Me.concat(Fe),ur=q.staticUniforms?pf(q.staticUniforms):[],lr=vt?vt.getBinderUniforms():[],Fr=ur.concat(lr),jr=[],Zr=0,Wr=Fr;Zr<Wr.length;Zr+=1){var Jr=Wr[Zr];jr.indexOf(Jr)<0&&jr.push(Jr)}var dn=vt?vt.defines():[];Vt&&dn.push("#define OVERDRAW_INSPECTOR;");var kn=dn.concat(Xs.fragmentSource,q.fragmentSource).join(`
`),Hn=dn.concat(Xs.vertexSource,q.vertexSource).join(`
`),Kn=se.createShader(se.FRAGMENT_SHADER);if(se.isContextLost()){this.failedToCreate=!0;return}se.shaderSource(Kn,kn),se.compileShader(Kn),se.attachShader(this.program,Kn);var Qn=se.createShader(se.VERTEX_SHADER);if(se.isContextLost()){this.failedToCreate=!0;return}se.shaderSource(Qn,Hn),se.compileShader(Qn),se.attachShader(this.program,Qn),this.attributes={};var Xn={};this.numAttributes=$e.length;for(var qn=0;qn<this.numAttributes;qn++)$e[qn]&&(se.bindAttribLocation(this.program,qn,$e[qn]),this.attributes[$e[qn]]=qn);se.linkProgram(this.program),se.deleteShader(Qn),se.deleteShader(Kn);for(var oa=0;oa<jr.length;oa++){var ha=jr[oa];if(ha&&!Xn[ha]){var xa=se.getUniformLocation(this.program,ha);xa&&(Xn[ha]=xa)}}this.fixedUniforms=It(Y,Xn),this.binderUniforms=vt?vt.getUniforms(Y,Xn):[]};Vu.prototype.draw=function(Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur,lr,Fr,jr,Zr,Wr){var Jr,dn=Y.gl;if(!this.failedToCreate){Y.program.set(this.program),Y.setDepthMode(q),Y.setStencilMode(vt),Y.setColorMode(It),Y.setCullFace(Vt);for(var kn in this.fixedUniforms)this.fixedUniforms[kn].set(se[kn]);jr&&jr.setUniforms(Y,this.binderUniforms,lr,{zoom:Fr});for(var Hn=(Jr={},Jr[dn.LINES]=2,Jr[dn.TRIANGLES]=3,Jr[dn.LINE_STRIP]=1,Jr)[ht],Kn=0,Qn=ur.get();Kn<Qn.length;Kn+=1){var Xn=Qn[Kn],qn=Xn.vaos||(Xn.vaos={}),oa=qn[Me]||(qn[Me]=new Go);oa.bind(Y,this,Fe,jr?jr.getPaintVertexBuffers():[],$e,Xn.vertexOffset,Zr,Wr),dn.drawElements(ht,Xn.primitiveLength*Hn,dn.UNSIGNED_SHORT,Xn.primitiveOffset*Hn*2)}}};function Zs(ut,Y,ht){var q=1/ln(ht,1,Y.transform.tileZoom),vt=Math.pow(2,ht.tileID.overscaledZ),It=ht.tileSize*Math.pow(2,Y.transform.tileZoom)/vt,Vt=It*(ht.tileID.canonical.x+ht.tileID.wrap*vt),se=It*ht.tileID.canonical.y;return{u_image:0,u_texsize:ht.imageAtlasTexture.size,u_scale:[q,ut.fromScale,ut.toScale],u_fade:ut.t,u_pixel_coord_upper:[Vt>>16,se>>16],u_pixel_coord_lower:[Vt&65535,se&65535]}}function Rs(ut,Y,ht,q){var vt=ht.imageManager.getPattern(ut.from.toString()),It=ht.imageManager.getPattern(ut.to.toString()),Vt=ht.imageManager.getPixelSize(),se=Vt.width,Me=Vt.height,Fe=Math.pow(2,q.tileID.overscaledZ),$e=q.tileSize*Math.pow(2,ht.transform.tileZoom)/Fe,ur=$e*(q.tileID.canonical.x+q.tileID.wrap*Fe),lr=$e*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:vt.tl,u_pattern_br_a:vt.br,u_pattern_tl_b:It.tl,u_pattern_br_b:It.br,u_texsize:[se,Me],u_mix:Y.t,u_pattern_size_a:vt.displaySize,u_pattern_size_b:It.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/ln(q,1,ht.transform.tileZoom),u_pixel_coord_upper:[ur>>16,lr>>16],u_pixel_coord_lower:[ur&65535,lr&65535]}}var mu=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_lightpos:new o.Uniform3f(ut,Y.u_lightpos),u_lightintensity:new o.Uniform1f(ut,Y.u_lightintensity),u_lightcolor:new o.Uniform3f(ut,Y.u_lightcolor),u_vertical_gradient:new o.Uniform1f(ut,Y.u_vertical_gradient),u_opacity:new o.Uniform1f(ut,Y.u_opacity)}},Bi=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_lightpos:new o.Uniform3f(ut,Y.u_lightpos),u_lightintensity:new o.Uniform1f(ut,Y.u_lightintensity),u_lightcolor:new o.Uniform3f(ut,Y.u_lightcolor),u_vertical_gradient:new o.Uniform1f(ut,Y.u_vertical_gradient),u_height_factor:new o.Uniform1f(ut,Y.u_height_factor),u_image:new o.Uniform1i(ut,Y.u_image),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(ut,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(ut,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(ut,Y.u_scale),u_fade:new o.Uniform1f(ut,Y.u_fade),u_opacity:new o.Uniform1f(ut,Y.u_opacity)}},Ul=function(ut,Y,ht,q){var vt=Y.style.light,It=vt.properties.get("position"),Vt=[It.x,It.y,It.z],se=o.create$1();vt.properties.get("anchor")==="viewport"&&o.fromRotation(se,-Y.transform.angle),o.transformMat3(Vt,Vt,se);var Me=vt.properties.get("color");return{u_matrix:ut,u_lightpos:Vt,u_lightintensity:vt.properties.get("intensity"),u_lightcolor:[Me.r,Me.g,Me.b],u_vertical_gradient:+ht,u_opacity:q}},Wo=function(ut,Y,ht,q,vt,It,Vt){return o.extend(Ul(ut,Y,ht,q),Zs(It,Y,Vt),{u_height_factor:-Math.pow(2,vt.overscaledZ)/Vt.tileSize/8})},xs=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix)}},js=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_image:new o.Uniform1i(ut,Y.u_image),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(ut,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(ut,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(ut,Y.u_scale),u_fade:new o.Uniform1f(ut,Y.u_fade)}},Ds=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_world:new o.Uniform2f(ut,Y.u_world)}},Yo=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_world:new o.Uniform2f(ut,Y.u_world),u_image:new o.Uniform1i(ut,Y.u_image),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_pixel_coord_upper:new o.Uniform2f(ut,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(ut,Y.u_pixel_coord_lower),u_scale:new o.Uniform3f(ut,Y.u_scale),u_fade:new o.Uniform1f(ut,Y.u_fade)}},bs=function(ut){return{u_matrix:ut}},Xo=function(ut,Y,ht,q){return o.extend(bs(ut),Zs(ht,Y,q))},Fo=function(ut,Y){return{u_matrix:ut,u_world:Y}},Vl=function(ut,Y,ht,q,vt){return o.extend(Xo(ut,Y,ht,q),{u_world:vt})},nc=function(ut,Y){return{u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(ut,Y.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(ut,Y.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(ut,Y.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix)}},ac=function(ut,Y,ht,q){var vt=ut.transform,It,Vt;if(q.paint.get("circle-pitch-alignment")==="map"){var se=ln(ht,1,vt.zoom);It=!0,Vt=[se,se]}else It=!1,Vt=vt.pixelsToGLUnits;return{u_camera_to_center_distance:vt.cameraToCenterDistance,u_scale_with_map:+(q.paint.get("circle-pitch-scale")==="map"),u_matrix:ut.translatePosMatrix(Y.posMatrix,ht,q.paint.get("circle-translate"),q.paint.get("circle-translate-anchor")),u_pitch_with_map:+It,u_device_pixel_ratio:o.browser.devicePixelRatio,u_extrude_scale:Vt}},ic=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(ut,Y.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(ut,Y.u_extrude_scale),u_overscale_factor:new o.Uniform1f(ut,Y.u_overscale_factor)}},oc=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_inv_matrix:new o.UniformMatrix4f(ut,Y.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(ut,Y.u_viewport_size)}},Hu=function(ut,Y,ht){var q=ln(ht,1,Y.zoom),vt=Math.pow(2,Y.zoom-ht.tileID.overscaledZ),It=ht.tileID.overscaleFactor();return{u_matrix:ut,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pixels_to_tile_units:q,u_extrude_scale:[Y.pixelsToGLUnits[0]/(q*vt),Y.pixelsToGLUnits[1]/(q*vt)],u_overscale_factor:It}},gf=function(ut,Y,ht){return{u_matrix:ut,u_inv_matrix:Y,u_camera_to_center_distance:ht.cameraToCenterDistance,u_viewport_size:[ht.width,ht.height]}},yl=function(ut,Y){return{u_color:new o.UniformColor(ut,Y.u_color),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_overlay:new o.Uniform1i(ut,Y.u_overlay),u_overlay_scale:new o.Uniform1f(ut,Y.u_overlay_scale)}},qi=function(ut,Y,ht){return ht===void 0&&(ht=1),{u_matrix:ut,u_color:Y,u_overlay:0,u_overlay_scale:ht}},zo=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix)}},ml=function(ut){return{u_matrix:ut}},yf=function(ut,Y){return{u_extrude_scale:new o.Uniform1f(ut,Y.u_extrude_scale),u_intensity:new o.Uniform1f(ut,Y.u_intensity),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix)}},Hl=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_world:new o.Uniform2f(ut,Y.u_world),u_image:new o.Uniform1i(ut,Y.u_image),u_color_ramp:new o.Uniform1i(ut,Y.u_color_ramp),u_opacity:new o.Uniform1f(ut,Y.u_opacity)}},ws=function(ut,Y,ht,q){return{u_matrix:ut,u_extrude_scale:ln(Y,1,ht),u_intensity:q}},sc=function(ut,Y,ht,q){var vt=o.create();o.ortho(vt,0,ut.width,ut.height,0,0,1);var It=ut.context.gl;return{u_matrix:vt,u_world:[It.drawingBufferWidth,It.drawingBufferHeight],u_image:ht,u_color_ramp:q,u_opacity:Y.paint.get("heatmap-opacity")}},mf=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_image:new o.Uniform1i(ut,Y.u_image),u_latrange:new o.Uniform2f(ut,Y.u_latrange),u_light:new o.Uniform2f(ut,Y.u_light),u_shadow:new o.UniformColor(ut,Y.u_shadow),u_highlight:new o.UniformColor(ut,Y.u_highlight),u_accent:new o.UniformColor(ut,Y.u_accent)}},xf=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_image:new o.Uniform1i(ut,Y.u_image),u_dimension:new o.Uniform2f(ut,Y.u_dimension),u_zoom:new o.Uniform1f(ut,Y.u_zoom),u_unpack:new o.Uniform4f(ut,Y.u_unpack)}},Gu=function(ut,Y,ht){var q=ht.paint.get("hillshade-shadow-color"),vt=ht.paint.get("hillshade-highlight-color"),It=ht.paint.get("hillshade-accent-color"),Vt=ht.paint.get("hillshade-illumination-direction")*(Math.PI/180);ht.paint.get("hillshade-illumination-anchor")==="viewport"&&(Vt-=ut.transform.angle);var se=!ut.options.moving;return{u_matrix:ut.transform.calculatePosMatrix(Y.tileID.toUnwrapped(),se),u_image:0,u_latrange:xo(ut,Y.tileID),u_light:[ht.paint.get("hillshade-exaggeration"),Vt],u_shadow:q,u_highlight:vt,u_accent:It}},bf=function(ut,Y){var ht=Y.stride,q=o.create();return o.ortho(q,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(q,q,[0,-o.EXTENT,0]),{u_matrix:q,u_image:1,u_dimension:[ht,ht],u_zoom:ut.overscaledZ,u_unpack:Y.getUnpackVector()}};function xo(ut,Y){var ht=Math.pow(2,Y.canonical.z),q=Y.canonical.y;return[new o.MercatorCoordinate(0,q/ht).toLngLat().lat,new o.MercatorCoordinate(0,(q+1)/ht).toLngLat().lat]}var Zo=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_ratio:new o.Uniform1f(ut,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(ut,Y.u_units_to_pixels)}},Is=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_ratio:new o.Uniform1f(ut,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(ut,Y.u_units_to_pixels),u_image:new o.Uniform1i(ut,Y.u_image),u_image_height:new o.Uniform1f(ut,Y.u_image_height)}},xl=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_ratio:new o.Uniform1f(ut,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_image:new o.Uniform1i(ut,Y.u_image),u_units_to_pixels:new o.Uniform2f(ut,Y.u_units_to_pixels),u_scale:new o.Uniform3f(ut,Y.u_scale),u_fade:new o.Uniform1f(ut,Y.u_fade)}},xu=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_ratio:new o.Uniform1f(ut,Y.u_ratio),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(ut,Y.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(ut,Y.u_patternscale_a),u_patternscale_b:new o.Uniform2f(ut,Y.u_patternscale_b),u_sdfgamma:new o.Uniform1f(ut,Y.u_sdfgamma),u_image:new o.Uniform1i(ut,Y.u_image),u_tex_y_a:new o.Uniform1f(ut,Y.u_tex_y_a),u_tex_y_b:new o.Uniform1f(ut,Y.u_tex_y_b),u_mix:new o.Uniform1f(ut,Y.u_mix)}},Ks=function(ut,Y,ht){var q=ut.transform;return{u_matrix:ks(ut,Y,ht),u_ratio:1/ln(Y,1,q.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_units_to_pixels:[1/q.pixelsToGLUnits[0],1/q.pixelsToGLUnits[1]]}},Js=function(ut,Y,ht,q){return o.extend(Ks(ut,Y,ht),{u_image:0,u_image_height:q})},wf=function(ut,Y,ht,q){var vt=ut.transform,It=bl(Y,vt);return{u_matrix:ks(ut,Y,ht),u_texsize:Y.imageAtlasTexture.size,u_ratio:1/ln(Y,1,vt.zoom),u_device_pixel_ratio:o.browser.devicePixelRatio,u_image:0,u_scale:[It,q.fromScale,q.toScale],u_fade:q.t,u_units_to_pixels:[1/vt.pixelsToGLUnits[0],1/vt.pixelsToGLUnits[1]]}},Ts=function(ut,Y,ht,q,vt){var It=ut.transform,Vt=ut.lineAtlas,se=bl(Y,It),Me=ht.layout.get("line-cap")==="round",Fe=Vt.getDash(q.from,Me),$e=Vt.getDash(q.to,Me),ur=Fe.width*vt.fromScale,lr=$e.width*vt.toScale;return o.extend(Ks(ut,Y,ht),{u_patternscale_a:[se/ur,-Fe.height/2],u_patternscale_b:[se/lr,-$e.height/2],u_sdfgamma:Vt.width/(Math.min(ur,lr)*256*o.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Fe.y,u_tex_y_b:$e.y,u_mix:vt.t})};function bl(ut,Y){return 1/ln(ut,1,Y.tileZoom)}function ks(ut,Y,ht){return ut.translatePosMatrix(Y.tileID.posMatrix,Y,ht.paint.get("line-translate"),ht.paint.get("line-translate-anchor"))}var As=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_tl_parent:new o.Uniform2f(ut,Y.u_tl_parent),u_scale_parent:new o.Uniform1f(ut,Y.u_scale_parent),u_buffer_scale:new o.Uniform1f(ut,Y.u_buffer_scale),u_fade_t:new o.Uniform1f(ut,Y.u_fade_t),u_opacity:new o.Uniform1f(ut,Y.u_opacity),u_image0:new o.Uniform1i(ut,Y.u_image0),u_image1:new o.Uniform1i(ut,Y.u_image1),u_brightness_low:new o.Uniform1f(ut,Y.u_brightness_low),u_brightness_high:new o.Uniform1f(ut,Y.u_brightness_high),u_saturation_factor:new o.Uniform1f(ut,Y.u_saturation_factor),u_contrast_factor:new o.Uniform1f(ut,Y.u_contrast_factor),u_spin_weights:new o.Uniform3f(ut,Y.u_spin_weights)}},Gl=function(ut,Y,ht,q,vt){return{u_matrix:ut,u_tl_parent:Y,u_scale_parent:ht,u_buffer_scale:1,u_fade_t:q.mix,u_opacity:q.opacity*vt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:vt.paint.get("raster-brightness-min"),u_brightness_high:vt.paint.get("raster-brightness-max"),u_saturation_factor:Tl(vt.paint.get("raster-saturation")),u_contrast_factor:di(vt.paint.get("raster-contrast")),u_spin_weights:wl(vt.paint.get("raster-hue-rotate"))}};function wl(ut){ut*=Math.PI/180;var Y=Math.sin(ut),ht=Math.cos(ut);return[(2*ht+1)/3,(-Math.sqrt(3)*Y-ht+1)/3,(Math.sqrt(3)*Y-ht+1)/3]}function di(ut){return ut>0?1/(1-ut):1+ut}function Tl(ut){return ut>0?1-1/(1.001-ut):-ut}var bu=function(ut,Y){return{u_is_size_zoom_constant:new o.Uniform1i(ut,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(ut,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(ut,Y.u_size_t),u_size:new o.Uniform1f(ut,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(ut,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(ut,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(ut,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(ut,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(ut,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(ut,Y.u_coord_matrix),u_is_text:new o.Uniform1i(ut,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(ut,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_texture:new o.Uniform1i(ut,Y.u_texture)}},Tf=function(ut,Y){return{u_is_size_zoom_constant:new o.Uniform1i(ut,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(ut,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(ut,Y.u_size_t),u_size:new o.Uniform1f(ut,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(ut,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(ut,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(ut,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(ut,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(ut,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(ut,Y.u_coord_matrix),u_is_text:new o.Uniform1i(ut,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(ut,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_texture:new o.Uniform1i(ut,Y.u_texture),u_gamma_scale:new o.Uniform1f(ut,Y.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(ut,Y.u_is_halo)}},Al=function(ut,Y){return{u_is_size_zoom_constant:new o.Uniform1i(ut,Y.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(ut,Y.u_is_size_feature_constant),u_size_t:new o.Uniform1f(ut,Y.u_size_t),u_size:new o.Uniform1f(ut,Y.u_size),u_camera_to_center_distance:new o.Uniform1f(ut,Y.u_camera_to_center_distance),u_pitch:new o.Uniform1f(ut,Y.u_pitch),u_rotate_symbol:new o.Uniform1i(ut,Y.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(ut,Y.u_aspect_ratio),u_fade_change:new o.Uniform1f(ut,Y.u_fade_change),u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(ut,Y.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(ut,Y.u_coord_matrix),u_is_text:new o.Uniform1i(ut,Y.u_is_text),u_pitch_with_map:new o.Uniform1i(ut,Y.u_pitch_with_map),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_texsize_icon:new o.Uniform2f(ut,Y.u_texsize_icon),u_texture:new o.Uniform1i(ut,Y.u_texture),u_texture_icon:new o.Uniform1i(ut,Y.u_texture_icon),u_gamma_scale:new o.Uniform1f(ut,Y.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(ut,Y.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(ut,Y.u_is_halo)}},Wl=function(ut,Y,ht,q,vt,It,Vt,se,Me,Fe){var $e=vt.transform;return{u_is_size_zoom_constant:+(ut==="constant"||ut==="source"),u_is_size_feature_constant:+(ut==="constant"||ut==="camera"),u_size_t:Y?Y.uSizeT:0,u_size:Y?Y.uSize:0,u_camera_to_center_distance:$e.cameraToCenterDistance,u_pitch:$e.pitch/360*2*Math.PI,u_rotate_symbol:+ht,u_aspect_ratio:$e.width/$e.height,u_fade_change:vt.options.fadeDuration?vt.symbolFadeChange:1,u_matrix:It,u_label_plane_matrix:Vt,u_coord_matrix:se,u_is_text:+Me,u_pitch_with_map:+q,u_texsize:Fe,u_texture:0}},wu=function(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e){var ur=vt.transform;return o.extend(Wl(ut,Y,ht,q,vt,It,Vt,se,Me,Fe),{u_gamma_scale:q?Math.cos(ur._pitch)*ur.cameraToCenterDistance:1,u_device_pixel_ratio:o.browser.devicePixelRatio,u_is_halo:+$e})},Wu=function(ut,Y,ht,q,vt,It,Vt,se,Me,Fe){return o.extend(wu(ut,Y,ht,q,vt,It,Vt,se,!0,Me,!0),{u_texsize_icon:Fe,u_texture_icon:1})},Yl=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_opacity:new o.Uniform1f(ut,Y.u_opacity),u_color:new o.UniformColor(ut,Y.u_color)}},Xl=function(ut,Y){return{u_matrix:new o.UniformMatrix4f(ut,Y.u_matrix),u_opacity:new o.Uniform1f(ut,Y.u_opacity),u_image:new o.Uniform1i(ut,Y.u_image),u_pattern_tl_a:new o.Uniform2f(ut,Y.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(ut,Y.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(ut,Y.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(ut,Y.u_pattern_br_b),u_texsize:new o.Uniform2f(ut,Y.u_texsize),u_mix:new o.Uniform1f(ut,Y.u_mix),u_pattern_size_a:new o.Uniform2f(ut,Y.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(ut,Y.u_pattern_size_b),u_scale_a:new o.Uniform1f(ut,Y.u_scale_a),u_scale_b:new o.Uniform1f(ut,Y.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(ut,Y.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(ut,Y.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(ut,Y.u_tile_units_to_pixels)}},zs=function(ut,Y,ht){return{u_matrix:ut,u_opacity:Y,u_color:ht}},Zl=function(ut,Y,ht,q,vt,It){return o.extend(Rs(q,It,ht,vt),{u_matrix:ut,u_opacity:Y})},_s={fillExtrusion:mu,fillExtrusionPattern:Bi,fill:xs,fillPattern:js,fillOutline:Ds,fillOutlinePattern:Yo,circle:nc,collisionBox:ic,collisionCircle:oc,debug:yl,clippingMask:zo,heatmap:yf,heatmapTexture:Hl,hillshade:mf,hillshadePrepare:xf,line:Zo,lineGradient:Is,linePattern:xl,lineSDF:xu,raster:As,symbolIcon:bu,symbolSDF:Tf,symbolTextAndIcon:Al,background:Yl,backgroundPattern:Xl},Zi;function ss(ut,Y,ht,q,vt,It,Vt){for(var se=ut.context,Me=se.gl,Fe=ut.useProgram("collisionBox"),$e=[],ur=0,lr=0,Fr=0;Fr<q.length;Fr++){var jr=q[Fr],Zr=Y.getTile(jr),Wr=Zr.getBucket(ht);if(Wr){var Jr=jr.posMatrix;(vt[0]!==0||vt[1]!==0)&&(Jr=ut.translatePosMatrix(jr.posMatrix,Zr,vt,It));var dn=Vt?Wr.textCollisionBox:Wr.iconCollisionBox,kn=Wr.collisionCircleArray;if(kn.length>0){var Hn=o.create(),Kn=Jr;o.mul(Hn,Wr.placementInvProjMatrix,ut.transform.glCoordMatrix),o.mul(Hn,Hn,Wr.placementViewportMatrix),$e.push({circleArray:kn,circleOffset:lr,transform:Kn,invTransform:Hn}),ur+=kn.length/4,lr=ur}dn&&Fe.draw(se,Me.LINES,vr.disabled,Qe.disabled,ut.colorModeForRenderPass(),Re.disabled,Hu(Jr,ut.transform,Zr),ht.id,dn.layoutVertexBuffer,dn.indexBuffer,dn.segments,null,ut.transform.zoom,null,null,dn.collisionVertexBuffer)}}if(!(!Vt||!$e.length)){var Qn=ut.useProgram("collisionCircle"),Xn=new o.StructArrayLayout2f1f2i16;Xn.resize(ur*4),Xn._trim();for(var qn=0,oa=0,ha=$e;oa<ha.length;oa+=1)for(var xa=ha[oa],ga=0;ga<xa.circleArray.length/4;ga++){var Fa=ga*4,ti=xa.circleArray[Fa+0],Za=xa.circleArray[Fa+1],Sa=xa.circleArray[Fa+2],ja=xa.circleArray[Fa+3];Xn.emplace(qn++,ti,Za,Sa,ja,0),Xn.emplace(qn++,ti,Za,Sa,ja,1),Xn.emplace(qn++,ti,Za,Sa,ja,2),Xn.emplace(qn++,ti,Za,Sa,ja,3)}(!Zi||Zi.length<ur*2)&&(Zi=Yu(ur));for(var Ga=se.createIndexBuffer(Zi,!0),li=se.createVertexBuffer(Xn,o.collisionCircleLayout.members,!0),ai=0,Ei=$e;ai<Ei.length;ai+=1){var $a=Ei[ai],wi=gf($a.transform,$a.invTransform,ut.transform);Qn.draw(se,Me.TRIANGLES,vr.disabled,Qe.disabled,ut.colorModeForRenderPass(),Re.disabled,wi,ht.id,li,Ga,o.SegmentVector.simpleSegment(0,$a.circleOffset*2,$a.circleArray.length,$a.circleArray.length/2),null,ut.transform.zoom,null,null,null)}li.destroy(),Ga.destroy()}}function Yu(ut){var Y=ut*2,ht=new o.StructArrayLayout3ui6;ht.resize(Y),ht._trim();for(var q=0;q<Y;q++){var vt=q*6;ht.uint16[vt+0]=q*4+0,ht.uint16[vt+1]=q*4+1,ht.uint16[vt+2]=q*4+2,ht.uint16[vt+3]=q*4+2,ht.uint16[vt+4]=q*4+3,ht.uint16[vt+5]=q*4+0}return ht}var Qs=o.identity(new Float32Array(16));function Tu(ut,Y,ht,q,vt){if(ut.renderPass==="translucent"){var It=Qe.disabled,Vt=ut.colorModeForRenderPass(),se=ht.layout.get("text-variable-anchor");se&&lc(q,ut,ht,Y,ht.layout.get("text-rotation-alignment"),ht.layout.get("text-pitch-alignment"),vt),ht.paint.get("icon-opacity").constantOr(1)!==0&&Kl(ut,Y,ht,q,!1,ht.paint.get("icon-translate"),ht.paint.get("icon-translate-anchor"),ht.layout.get("icon-rotation-alignment"),ht.layout.get("icon-pitch-alignment"),ht.layout.get("icon-keep-upright"),It,Vt),ht.paint.get("text-opacity").constantOr(1)!==0&&Kl(ut,Y,ht,q,!0,ht.paint.get("text-translate"),ht.paint.get("text-translate-anchor"),ht.layout.get("text-rotation-alignment"),ht.layout.get("text-pitch-alignment"),ht.layout.get("text-keep-upright"),It,Vt),Y.map.showCollisionBoxes&&(ss(ut,Y,ht,q,ht.paint.get("text-translate"),ht.paint.get("text-translate-anchor"),!0),ss(ut,Y,ht,q,ht.paint.get("icon-translate"),ht.paint.get("icon-translate-anchor"),!1))}}function jl(ut,Y,ht,q,vt,It){var Vt=o.getAnchorAlignment(ut),se=Vt.horizontalAlign,Me=Vt.verticalAlign,Fe=-(se-.5)*Y,$e=-(Me-.5)*ht,ur=o.evaluateVariableOffset(ut,q);return new o.Point((Fe/vt+ur[0])*It,($e/vt+ur[1])*It)}function lc(ut,Y,ht,q,vt,It,Vt){for(var se=Y.transform,Me=vt==="map",Fe=It==="map",$e=0,ur=ut;$e<ur.length;$e+=1){var lr=ur[$e],Fr=q.getTile(lr),jr=Fr.getBucket(ht);if(!(!jr||!jr.text||!jr.text.segments.get().length)){var Zr=jr.textSizeData,Wr=o.evaluateSizeForZoom(Zr,se.zoom),Jr=ln(Fr,1,Y.transform.zoom),dn=Pr(lr.posMatrix,Fe,Me,Y.transform,Jr),kn=ht.layout.get("icon-text-fit")!=="none"&&jr.hasIconData();if(Wr){var Hn=Math.pow(2,se.zoom-Fr.tileID.overscaledZ);Af(jr,Me,Fe,Vt,o.symbolSize,se,dn,lr.posMatrix,Hn,Wr,kn)}}}}function Af(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e){var ur=ut.text.placedSymbolArray,lr=ut.text.dynamicLayoutVertexArray,Fr=ut.icon.dynamicLayoutVertexArray,jr={};lr.clear();for(var Zr=0;Zr<ur.length;Zr++){var Wr=ur.get(Zr),Jr=ut.allowVerticalPlacement&&!Wr.placedOrientation,dn=!Wr.hidden&&Wr.crossTileID&&!Jr?q[Wr.crossTileID]:null;if(!dn)Rn(Wr.numGlyphs,lr);else{var kn=new o.Point(Wr.anchorX,Wr.anchorY),Hn=kr(kn,ht?se:Vt),Kn=pn(It.cameraToCenterDistance,Hn.signedDistanceFromCamera),Qn=vt.evaluateSizeForFeature(ut.textSizeData,Fe,Wr)*Kn/o.ONE_EM;ht&&(Qn*=ut.tilePixelRatio/Me);for(var Xn=dn.width,qn=dn.height,oa=dn.anchor,ha=dn.textOffset,xa=dn.textBoxScale,ga=jl(oa,Xn,qn,ha,xa,Qn),Fa=ht?kr(kn.add(ga),Vt).point:Hn.point.add(Y?ga.rotate(-It.angle):ga),ti=ut.allowVerticalPlacement&&Wr.placedOrientation===o.WritingMode.vertical?Math.PI/2:0,Za=0;Za<Wr.numGlyphs;Za++)o.addDynamicAttributes(lr,Fa,ti);$e&&Wr.associatedIconIndex>=0&&(jr[Wr.associatedIconIndex]={shiftedAnchor:Fa,angle:ti})}}if($e){Fr.clear();for(var Sa=ut.icon.placedSymbolArray,ja=0;ja<Sa.length;ja++){var Ga=Sa.get(ja);if(Ga.hidden)Rn(Ga.numGlyphs,Fr);else{var li=jr[ja];if(!li)Rn(Ga.numGlyphs,Fr);else for(var ai=0;ai<Ga.numGlyphs;ai++)o.addDynamicAttributes(Fr,li.shiftedAnchor,li.angle)}}ut.icon.dynamicLayoutVertexBuffer.updateData(Fr)}ut.text.dynamicLayoutVertexBuffer.updateData(lr)}function vo(ut,Y,ht){return ht.iconsInText&&Y?"symbolTextAndIcon":ut?"symbolSDF":"symbolIcon"}function Kl(ut,Y,ht,q,vt,It,Vt,se,Me,Fe,$e,ur){for(var lr=ut.context,Fr=lr.gl,jr=ut.transform,Zr=se==="map",Wr=Me==="map",Jr=Zr&&ht.layout.get("symbol-placement")!=="point",dn=Zr&&!Wr&&!Jr,kn=ht.layout.get("symbol-sort-key").constantOr(1)!==void 0,Hn=!1,Kn=ut.depthModeForSublayer(0,vr.ReadOnly),Qn=ht.layout.get("text-variable-anchor"),Xn=[],qn=0,oa=q;qn<oa.length;qn+=1){var ha=oa[qn],xa=Y.getTile(ha),ga=xa.getBucket(ht);if(ga){var Fa=vt?ga.text:ga.icon;if(!(!Fa||!Fa.segments.get().length)){var ti=Fa.programConfigurations.get(ht.id),Za=vt||ga.sdfIcons,Sa=vt?ga.textSizeData:ga.iconSizeData,ja=Wr||jr.pitch!==0,Ga=ut.useProgram(vo(Za,vt,ga),ti),li=o.evaluateSizeForZoom(Sa,jr.zoom),ai=void 0,Ei=[0,0],$a=void 0,wi=void 0,Wa=null,ei=void 0;if(vt){if($a=xa.glyphAtlasTexture,wi=Fr.LINEAR,ai=xa.glyphAtlasTexture.size,ga.iconsInText){Ei=xa.imageAtlasTexture.size,Wa=xa.imageAtlasTexture;var Wi=Sa.kind==="composite"||Sa.kind==="camera";ei=ja||ut.options.rotating||ut.options.zooming||Wi?Fr.LINEAR:Fr.NEAREST}}else{var go=ht.layout.get("icon-size").constantOr(0)!==1||ga.iconsNeedLinear;$a=xa.imageAtlasTexture,wi=Za||ut.options.rotating||ut.options.zooming||go||ja?Fr.LINEAR:Fr.NEAREST,ai=xa.imageAtlasTexture.size}var Bs=ln(xa,1,ut.transform.zoom),Ns=Pr(ha.posMatrix,Wr,Zr,ut.transform,Bs),tl=Xr(ha.posMatrix,Wr,Zr,ut.transform,Bs),El=Qn&&ga.hasTextData(),$u=ht.layout.get("icon-text-fit")!=="none"&&El&&ga.hasIconData();Jr&&Tn(ga,ha.posMatrix,ut,vt,Ns,tl,Wr,Fe);var Cl=ut.translatePosMatrix(ha.posMatrix,xa,It,Vt),Ko=Jr||vt&&Qn||$u?Qs:Ns,Ll=ut.translatePosMatrix(tl,xa,It,Vt,!0),fs=Za&&ht.paint.get(vt?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Jo=void 0;Za?ga.iconsInText?Jo=Wu(Sa.kind,li,dn,Wr,ut,Cl,Ko,Ll,ai,Ei):Jo=wu(Sa.kind,li,dn,Wr,ut,Cl,Ko,Ll,vt,ai,!0):Jo=Wl(Sa.kind,li,dn,Wr,ut,Cl,Ko,Ll,vt,ai);var el={program:Ga,buffers:Fa,uniformValues:Jo,atlasTexture:$a,atlasTextureIcon:Wa,atlasInterpolation:wi,atlasInterpolationIcon:ei,isSDF:Za,hasHalo:fs};if(kn&&ga.canOverlap){Hn=!0;for(var nu=Fa.segments.get(),rl=0,Ac=nu;rl<Ac.length;rl+=1){var If=Ac[rl];Xn.push({segments:new o.SegmentVector([If]),sortKey:If.sortKey,state:el})}}else Xn.push({segments:Fa.segments,sortKey:0,state:el})}}}Hn&&Xn.sort(function(Sc,Ec){return Sc.sortKey-Ec.sortKey});for(var bo=0,Mc=Xn;bo<Mc.length;bo+=1){var dc=Mc[bo],Oo=dc.state;if(lr.activeTexture.set(Fr.TEXTURE0),Oo.atlasTexture.bind(Oo.atlasInterpolation,Fr.CLAMP_TO_EDGE),Oo.atlasTextureIcon&&(lr.activeTexture.set(Fr.TEXTURE1),Oo.atlasTextureIcon&&Oo.atlasTextureIcon.bind(Oo.atlasInterpolationIcon,Fr.CLAMP_TO_EDGE)),Oo.isSDF){var kf=Oo.uniformValues;Oo.hasHalo&&(kf.u_is_halo=1,Ml(Oo.buffers,dc.segments,ht,ut,Oo.program,Kn,$e,ur,kf)),kf.u_is_halo=0}Ml(Oo.buffers,dc.segments,ht,ut,Oo.program,Kn,$e,ur,Oo.uniformValues)}}function Ml(ut,Y,ht,q,vt,It,Vt,se,Me){var Fe=q.context,$e=Fe.gl;vt.draw(Fe,$e.TRIANGLES,It,Vt,se,Re.disabled,Me,ht.id,ut.layoutVertexBuffer,ut.indexBuffer,Y,ht.paint,q.transform.zoom,ut.programConfigurations.get(ht.id),ut.dynamicLayoutVertexBuffer,ut.opacityVertexBuffer)}function Mf(ut,Y,ht,q){if(ut.renderPass==="translucent"){var vt=ht.paint.get("circle-opacity"),It=ht.paint.get("circle-stroke-width"),Vt=ht.paint.get("circle-stroke-opacity"),se=ht.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(vt.constantOr(1)===0&&(It.constantOr(1)===0||Vt.constantOr(1)===0))){for(var Me=ut.context,Fe=Me.gl,$e=ut.depthModeForSublayer(0,vr.ReadOnly),ur=Qe.disabled,lr=ut.colorModeForRenderPass(),Fr=[],jr=0;jr<q.length;jr++){var Zr=q[jr],Wr=Y.getTile(Zr),Jr=Wr.getBucket(ht);if(Jr){var dn=Jr.programConfigurations.get(ht.id),kn=ut.useProgram("circle",dn),Hn=Jr.layoutVertexBuffer,Kn=Jr.indexBuffer,Qn=ac(ut,Zr,Wr,ht),Xn={programConfiguration:dn,program:kn,layoutVertexBuffer:Hn,indexBuffer:Kn,uniformValues:Qn};if(se)for(var qn=Jr.segments.get(),oa=0,ha=qn;oa<ha.length;oa+=1){var xa=ha[oa];Fr.push({segments:new o.SegmentVector([xa]),sortKey:xa.sortKey,state:Xn})}else Fr.push({segments:Jr.segments,sortKey:0,state:Xn})}}se&&Fr.sort(function($a,wi){return $a.sortKey-wi.sortKey});for(var ga=0,Fa=Fr;ga<Fa.length;ga+=1){var ti=Fa[ga],Za=ti.state,Sa=Za.programConfiguration,ja=Za.program,Ga=Za.layoutVertexBuffer,li=Za.indexBuffer,ai=Za.uniformValues,Ei=ti.segments;ja.draw(Me,Fe.TRIANGLES,$e,ur,lr,Re.disabled,ai,ht.id,Ga,li,Ei,ht.paint,ut.transform.zoom,Sa)}}}}function Fs(ut,Y,ht,q){if(ht.paint.get("heatmap-opacity")!==0)if(ut.renderPass==="offscreen"){var vt=ut.context,It=vt.gl,Vt=Qe.disabled,se=new ne([It.ONE,It.ONE],o.Color.transparent,[!0,!0,!0,!0]);uc(vt,ut,ht),vt.clear({color:o.Color.transparent});for(var Me=0;Me<q.length;Me++){var Fe=q[Me];if(!Y.hasRenderableParent(Fe)){var $e=Y.getTile(Fe),ur=$e.getBucket(ht);if(ur){var lr=ur.programConfigurations.get(ht.id),Fr=ut.useProgram("heatmap",lr),jr=ut.transform,Zr=jr.zoom;Fr.draw(vt,It.TRIANGLES,vr.disabled,Vt,se,Re.disabled,ws(Fe.posMatrix,$e,Zr,ht.paint.get("heatmap-intensity")),ht.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,ht.paint,ut.transform.zoom,lr)}}}vt.viewport.set([0,0,ut.width,ut.height])}else ut.renderPass==="translucent"&&(ut.context.setColorMode(ut.colorModeForRenderPass()),Jl(ut,ht))}function uc(ut,Y,ht){var q=ut.gl;ut.activeTexture.set(q.TEXTURE1),ut.viewport.set([0,0,Y.width/4,Y.height/4]);var vt=ht.heatmapFbo;if(vt)q.bindTexture(q.TEXTURE_2D,vt.colorAttachment.get()),ut.bindFramebuffer.set(vt.framebuffer);else{var It=q.createTexture();q.bindTexture(q.TEXTURE_2D,It),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,q.LINEAR),q.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,q.LINEAR),vt=ht.heatmapFbo=ut.createFramebuffer(Y.width/4,Y.height/4,!1),Lo(ut,Y,It,vt)}}function Lo(ut,Y,ht,q){var vt=ut.gl,It=ut.extRenderToTextureHalfFloat?ut.extTextureHalfFloat.HALF_FLOAT_OES:vt.UNSIGNED_BYTE;vt.texImage2D(vt.TEXTURE_2D,0,vt.RGBA,Y.width/4,Y.height/4,0,vt.RGBA,It,null),q.colorAttachment.set(ht)}function Jl(ut,Y){var ht=ut.context,q=ht.gl,vt=Y.heatmapFbo;if(vt){ht.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,vt.colorAttachment.get()),ht.activeTexture.set(q.TEXTURE1);var It=Y.colorRampTexture;It||(It=Y.colorRampTexture=new o.Texture(ht,Y.colorRamp,q.RGBA)),It.bind(q.LINEAR,q.CLAMP_TO_EDGE),ut.useProgram("heatmapTexture").draw(ht,q.TRIANGLES,vr.disabled,Qe.disabled,ut.colorModeForRenderPass(),Re.disabled,sc(ut,Y,0,1),Y.id,ut.viewportBuffer,ut.quadTriangleIndexBuffer,ut.viewportSegments,Y.paint,ut.transform.zoom)}}function Au(ut,Y,ht,q){if(ut.renderPass==="translucent"){var vt=ht.paint.get("line-opacity"),It=ht.paint.get("line-width");if(!(vt.constantOr(1)===0||It.constantOr(1)===0))for(var Vt=ut.depthModeForSublayer(0,vr.ReadOnly),se=ut.colorModeForRenderPass(),Me=ht.paint.get("line-dasharray"),Fe=ht.paint.get("line-pattern"),$e=Fe.constantOr(1),ur=ht.paint.get("line-gradient"),lr=ht.getCrossfadeParameters(),Fr=$e?"linePattern":Me?"lineSDF":ur?"lineGradient":"line",jr=ut.context,Zr=jr.gl,Wr=!0,Jr=0,dn=q;Jr<dn.length;Jr+=1){var kn=dn[Jr],Hn=Y.getTile(kn);if(!($e&&!Hn.patternsLoaded())){var Kn=Hn.getBucket(ht);if(Kn){var Qn=Kn.programConfigurations.get(ht.id),Xn=ut.context.program.get(),qn=ut.useProgram(Fr,Qn),oa=Wr||qn.program!==Xn,ha=Fe.constantOr(null);if(ha&&Hn.imageAtlas){var xa=Hn.imageAtlas,ga=xa.patternPositions[ha.to.toString()],Fa=xa.patternPositions[ha.from.toString()];ga&&Fa&&Qn.setConstantPatternPositions(ga,Fa)}var ti=$e?wf(ut,Hn,ht,lr):Me?Ts(ut,Hn,ht,Me,lr):ur?Js(ut,Hn,ht,Kn.lineClipsArray.length):Ks(ut,Hn,ht);if($e)jr.activeTexture.set(Zr.TEXTURE0),Hn.imageAtlasTexture.bind(Zr.LINEAR,Zr.CLAMP_TO_EDGE),Qn.updatePaintBuffers(lr);else if(Me&&(oa||ut.lineAtlas.dirty))jr.activeTexture.set(Zr.TEXTURE0),ut.lineAtlas.bind(jr);else if(ur){var Za=Kn.gradients[ht.id],Sa=Za.texture;if(ht.gradientVersion!==Za.version){var ja=256;if(ht.stepInterpolant){var Ga=Y.getSource().maxzoom,li=kn.canonical.z===Ga?Math.ceil(1<<ut.transform.maxZoom-kn.canonical.z):1,ai=Kn.maxLineLength/o.EXTENT,Ei=1024,$a=ai*Ei*li;ja=o.clamp(o.nextPowerOfTwo($a),256,jr.maxTextureSize)}Za.gradient=o.renderColorRamp({expression:ht.gradientExpression(),evaluationKey:"lineProgress",resolution:ja,image:Za.gradient||void 0,clips:Kn.lineClipsArray}),Za.texture?Za.texture.update(Za.gradient):Za.texture=new o.Texture(jr,Za.gradient,Zr.RGBA),Za.version=ht.gradientVersion,Sa=Za.texture}jr.activeTexture.set(Zr.TEXTURE0),Sa.bind(ht.stepInterpolant?Zr.NEAREST:Zr.LINEAR,Zr.CLAMP_TO_EDGE)}qn.draw(jr,Zr.TRIANGLES,Vt,ut.stencilModeForClipping(kn),se,Re.disabled,ti,ht.id,Kn.layoutVertexBuffer,Kn.indexBuffer,Kn.segments,ht.paint,ut.transform.zoom,Qn,Kn.layoutVertexBuffer2),Wr=!1}}}}}function Ms(ut,Y,ht,q){var vt=ht.paint.get("fill-color"),It=ht.paint.get("fill-opacity");if(It.constantOr(1)!==0){var Vt=ut.colorModeForRenderPass(),se=ht.paint.get("fill-pattern"),Me=ut.opaquePassEnabledForLayer()&&!se.constantOr(1)&&vt.constantOr(o.Color.transparent).a===1&&It.constantOr(0)===1?"opaque":"translucent";if(ut.renderPass===Me){var Fe=ut.depthModeForSublayer(1,ut.renderPass==="opaque"?vr.ReadWrite:vr.ReadOnly);Os(ut,Y,ht,q,Fe,Vt,!1)}if(ut.renderPass==="translucent"&&ht.paint.get("fill-antialias")){var $e=ut.depthModeForSublayer(ht.getPaintProperty("fill-outline-color")?2:0,vr.ReadOnly);Os(ut,Y,ht,q,$e,Vt,!0)}}}function Os(ut,Y,ht,q,vt,It,Vt){var se=ut.context.gl,Me=ht.paint.get("fill-pattern"),Fe=Me&&Me.constantOr(1),$e=ht.getCrossfadeParameters(),ur,lr,Fr,jr,Zr;Vt?(lr=Fe&&!ht.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ur=se.LINES):(lr=Fe?"fillPattern":"fill",ur=se.TRIANGLES);for(var Wr=0,Jr=q;Wr<Jr.length;Wr+=1){var dn=Jr[Wr],kn=Y.getTile(dn);if(!(Fe&&!kn.patternsLoaded())){var Hn=kn.getBucket(ht);if(Hn){var Kn=Hn.programConfigurations.get(ht.id),Qn=ut.useProgram(lr,Kn);Fe&&(ut.context.activeTexture.set(se.TEXTURE0),kn.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),Kn.updatePaintBuffers($e));var Xn=Me.constantOr(null);if(Xn&&kn.imageAtlas){var qn=kn.imageAtlas,oa=qn.patternPositions[Xn.to.toString()],ha=qn.patternPositions[Xn.from.toString()];oa&&ha&&Kn.setConstantPatternPositions(oa,ha)}var xa=ut.translatePosMatrix(dn.posMatrix,kn,ht.paint.get("fill-translate"),ht.paint.get("fill-translate-anchor"));if(!Vt)jr=Hn.indexBuffer,Zr=Hn.segments,Fr=Fe?Xo(xa,ut,$e,kn):bs(xa);else{jr=Hn.indexBuffer2,Zr=Hn.segments2;var ga=[se.drawingBufferWidth,se.drawingBufferHeight];Fr=lr==="fillOutlinePattern"&&Fe?Vl(xa,ut,$e,kn,ga):Fo(xa,ga)}Qn.draw(ut.context,ur,vt,ut.stencilModeForClipping(dn),It,Re.disabled,Fr,ht.id,Hn.layoutVertexBuffer,jr,Zr,ht.paint,ut.transform.zoom,Kn)}}}}function Xu(ut,Y,ht,q){var vt=ht.paint.get("fill-extrusion-opacity");if(vt!==0&&ut.renderPass==="translucent"){var It=new vr(ut.context.gl.LEQUAL,vr.ReadWrite,ut.depthRangeFor3D);if(vt===1&&!ht.paint.get("fill-extrusion-pattern").constantOr(1)){var Vt=ut.colorModeForRenderPass();Ql(ut,Y,ht,q,It,Qe.disabled,Vt)}else Ql(ut,Y,ht,q,It,Qe.disabled,ne.disabled),Ql(ut,Y,ht,q,It,ut.stencilModeFor3D(),ut.colorModeForRenderPass())}}function Ql(ut,Y,ht,q,vt,It,Vt){for(var se=ut.context,Me=se.gl,Fe=ht.paint.get("fill-extrusion-pattern"),$e=Fe.constantOr(1),ur=ht.getCrossfadeParameters(),lr=ht.paint.get("fill-extrusion-opacity"),Fr=0,jr=q;Fr<jr.length;Fr+=1){var Zr=jr[Fr],Wr=Y.getTile(Zr),Jr=Wr.getBucket(ht);if(Jr){var dn=Jr.programConfigurations.get(ht.id),kn=ut.useProgram($e?"fillExtrusionPattern":"fillExtrusion",dn);$e&&(ut.context.activeTexture.set(Me.TEXTURE0),Wr.imageAtlasTexture.bind(Me.LINEAR,Me.CLAMP_TO_EDGE),dn.updatePaintBuffers(ur));var Hn=Fe.constantOr(null);if(Hn&&Wr.imageAtlas){var Kn=Wr.imageAtlas,Qn=Kn.patternPositions[Hn.to.toString()],Xn=Kn.patternPositions[Hn.from.toString()];Qn&&Xn&&dn.setConstantPatternPositions(Qn,Xn)}var qn=ut.translatePosMatrix(Zr.posMatrix,Wr,ht.paint.get("fill-extrusion-translate"),ht.paint.get("fill-extrusion-translate-anchor")),oa=ht.paint.get("fill-extrusion-vertical-gradient"),ha=$e?Wo(qn,ut,oa,lr,Zr,ur,Wr):Ul(qn,ut,oa,lr);kn.draw(se,se.gl.TRIANGLES,vt,It,Vt,Re.backCCW,ha,ht.id,Jr.layoutVertexBuffer,Jr.indexBuffer,Jr.segments,ht.paint,ut.transform.zoom,dn)}}}function $l(ut,Y,ht,q){if(!(ut.renderPass!=="offscreen"&&ut.renderPass!=="translucent")){for(var vt=ut.context,It=ut.depthModeForSublayer(0,vr.ReadOnly),Vt=ut.colorModeForRenderPass(),se=ut.renderPass==="translucent"?ut.stencilConfigForOverlap(q):[{},q],Me=se[0],Fe=se[1],$e=0,ur=Fe;$e<ur.length;$e+=1){var lr=ur[$e],Fr=Y.getTile(lr);Fr.needsHillshadePrepare&&ut.renderPass==="offscreen"?Sf(ut,Fr,ht,It,Qe.disabled,Vt):ut.renderPass==="translucent"&&Mu(ut,Fr,ht,It,Me[lr.overscaledZ],Vt)}vt.viewport.set([0,0,ut.width,ut.height])}}function Mu(ut,Y,ht,q,vt,It){var Vt=ut.context,se=Vt.gl,Me=Y.fbo;if(Me){var Fe=ut.useProgram("hillshade");Vt.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_2D,Me.colorAttachment.get());var $e=Gu(ut,Y,ht);Fe.draw(Vt,se.TRIANGLES,q,vt,It,Re.disabled,$e,ht.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments)}}function Sf(ut,Y,ht,q,vt,It){var Vt=ut.context,se=Vt.gl,Me=Y.dem;if(Me&&Me.data){var Fe=Me.dim,$e=Me.stride,ur=Me.getPixels();if(Vt.activeTexture.set(se.TEXTURE1),Vt.pixelStoreUnpackPremultiplyAlpha.set(!1),Y.demTexture=Y.demTexture||ut.getTileTexture($e),Y.demTexture){var lr=Y.demTexture;lr.update(ur,{premultiply:!1}),lr.bind(se.NEAREST,se.CLAMP_TO_EDGE)}else Y.demTexture=new o.Texture(Vt,ur,se.RGBA,{premultiply:!1}),Y.demTexture.bind(se.NEAREST,se.CLAMP_TO_EDGE);Vt.activeTexture.set(se.TEXTURE0);var Fr=Y.fbo;if(!Fr){var jr=new o.Texture(Vt,{width:Fe,height:Fe,data:null},se.RGBA);jr.bind(se.LINEAR,se.CLAMP_TO_EDGE),Fr=Y.fbo=Vt.createFramebuffer(Fe,Fe,!0),Fr.colorAttachment.set(jr.texture)}Vt.bindFramebuffer.set(Fr.framebuffer),Vt.viewport.set([0,0,Fe,Fe]),ut.useProgram("hillshadePrepare").draw(Vt,se.TRIANGLES,q,vt,It,Re.disabled,bf(Y.tileID,Me),ht.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments),Y.needsHillshadePrepare=!1}}function ql(ut,Y,ht,q){if(ut.renderPass==="translucent"&&ht.paint.get("raster-opacity")!==0&&q.length)for(var vt=ut.context,It=vt.gl,Vt=Y.getSource(),se=ut.useProgram("raster"),Me=ut.colorModeForRenderPass(),Fe=Vt instanceof X?[{},q]:ut.stencilConfigForOverlap(q),$e=Fe[0],ur=Fe[1],lr=ur[ur.length-1].overscaledZ,Fr=!ut.options.moving,jr=0,Zr=ur;jr<Zr.length;jr+=1){var Wr=Zr[jr],Jr=ut.depthModeForSublayer(Wr.overscaledZ-lr,ht.paint.get("raster-opacity")===1?vr.ReadWrite:vr.ReadOnly,It.LESS),dn=Y.getTile(Wr),kn=ut.transform.calculatePosMatrix(Wr.toUnwrapped(),Fr);dn.registerFadeDuration(ht.paint.get("raster-fade-duration"));var Hn=Y.findLoadedParent(Wr,0),Kn=Zu(dn,Hn,Y,ht,ut.transform),Qn=void 0,Xn=void 0,qn=ht.paint.get("raster-resampling")==="nearest"?It.NEAREST:It.LINEAR;vt.activeTexture.set(It.TEXTURE0),dn.texture.bind(qn,It.CLAMP_TO_EDGE,It.LINEAR_MIPMAP_NEAREST),vt.activeTexture.set(It.TEXTURE1),Hn?(Hn.texture.bind(qn,It.CLAMP_TO_EDGE,It.LINEAR_MIPMAP_NEAREST),Qn=Math.pow(2,Hn.tileID.overscaledZ-dn.tileID.overscaledZ),Xn=[dn.tileID.canonical.x*Qn%1,dn.tileID.canonical.y*Qn%1]):dn.texture.bind(qn,It.CLAMP_TO_EDGE,It.LINEAR_MIPMAP_NEAREST);var oa=Gl(kn,Xn||[0,0],Qn||1,Kn,ht);Vt instanceof X?se.draw(vt,It.TRIANGLES,Jr,Qe.disabled,Me,Re.disabled,oa,ht.id,Vt.boundsBuffer,ut.quadTriangleIndexBuffer,Vt.boundsSegments):se.draw(vt,It.TRIANGLES,Jr,$e[Wr.overscaledZ],Me,Re.disabled,oa,ht.id,ut.rasterBoundsBuffer,ut.quadTriangleIndexBuffer,ut.rasterBoundsSegments)}}function Zu(ut,Y,ht,q,vt){var It=q.paint.get("raster-fade-duration");if(It>0){var Vt=o.browser.now(),se=(Vt-ut.timeAdded)/It,Me=Y?(Vt-Y.timeAdded)/It:-1,Fe=ht.getSource(),$e=vt.coveringZoomLevel({tileSize:Fe.tileSize,roundZoom:Fe.roundZoom}),ur=!Y||Math.abs(Y.tileID.overscaledZ-$e)>Math.abs(ut.tileID.overscaledZ-$e),lr=ur&&ut.refreshedUponExpiration?1:o.clamp(ur?se:1-Me,0,1);return ut.refreshedUponExpiration&&se>=1&&(ut.refreshedUponExpiration=!1),Y?{opacity:1,mix:1-lr}:{opacity:lr,mix:0}}else return{opacity:1,mix:0}}function $s(ut,Y,ht){var q=ht.paint.get("background-color"),vt=ht.paint.get("background-opacity");if(vt!==0){var It=ut.context,Vt=It.gl,se=ut.transform,Me=se.tileSize,Fe=ht.paint.get("background-pattern");if(!ut.isPatternMissing(Fe)){var $e=!Fe&&q.a===1&&vt===1&&ut.opaquePassEnabledForLayer()?"opaque":"translucent";if(ut.renderPass===$e){var ur=Qe.disabled,lr=ut.depthModeForSublayer(0,$e==="opaque"?vr.ReadWrite:vr.ReadOnly),Fr=ut.colorModeForRenderPass(),jr=ut.useProgram(Fe?"backgroundPattern":"background"),Zr=se.coveringTiles({tileSize:Me});Fe&&(It.activeTexture.set(Vt.TEXTURE0),ut.imageManager.bind(ut.context));for(var Wr=ht.getCrossfadeParameters(),Jr=0,dn=Zr;Jr<dn.length;Jr+=1){var kn=dn[Jr],Hn=ut.transform.calculatePosMatrix(kn.toUnwrapped()),Kn=Fe?Zl(Hn,vt,ut,Fe,{tileID:kn,tileSize:Me},Wr):zs(Hn,vt,q);jr.draw(It,Vt.TRIANGLES,lr,ur,Fr,Re.disabled,Kn,ht.id,ut.tileExtentBuffer,ut.quadTriangleIndexBuffer,ut.tileExtentSegments)}}}}}var ju=new o.Color(1,0,0,1),tu=new o.Color(0,1,0,1),Ef=new o.Color(0,0,1,1),Xt=new o.Color(1,0,1,1),ee=new o.Color(0,1,1,1);function de(ut){var Y=ut.transform.padding,ht=3;De(ut,ut.transform.height-(Y.top||0),ht,ju),De(ut,Y.bottom||0,ht,tu),Pe(ut,Y.left||0,ht,Ef),Pe(ut,ut.transform.width-(Y.right||0),ht,Xt);var q=ut.transform.centerPoint;ye(ut,q.x,ut.transform.height-q.y,ee)}function ye(ut,Y,ht,q){var vt=20,It=2;Ie(ut,Y-It/2,ht-vt/2,It,vt,q),Ie(ut,Y-vt/2,ht-It/2,vt,It,q)}function De(ut,Y,ht,q){Ie(ut,0,Y+ht/2,ut.transform.width,ht,q)}function Pe(ut,Y,ht,q){Ie(ut,Y-ht/2,0,ht,ut.transform.height,q)}function Ie(ut,Y,ht,q,vt,It){var Vt=ut.context,se=Vt.gl;se.enable(se.SCISSOR_TEST),se.scissor(Y*o.browser.devicePixelRatio,ht*o.browser.devicePixelRatio,q*o.browser.devicePixelRatio,vt*o.browser.devicePixelRatio),Vt.clear({color:It}),se.disable(se.SCISSOR_TEST)}function pr(ut,Y,ht){for(var q=0;q<ht.length;q++)wr(ut,Y,ht[q])}function wr(ut,Y,ht){var q=ut.context,vt=q.gl,It=ht.posMatrix,Vt=ut.useProgram("debug"),se=vr.disabled,Me=Qe.disabled,Fe=ut.colorModeForRenderPass(),$e="$debug";q.activeTexture.set(vt.TEXTURE0),ut.emptyTexture.bind(vt.LINEAR,vt.CLAMP_TO_EDGE),Vt.draw(q,vt.LINE_STRIP,se,Me,Fe,Re.disabled,qi(It,o.Color.red),$e,ut.debugBuffer,ut.tileBorderIndexBuffer,ut.debugSegments);var ur=Y.getTileByID(ht.key).latestRawTileData,lr=ur&&ur.byteLength||0,Fr=Math.floor(lr/1024),jr=Y.getTile(ht).tileSize,Zr=512/Math.min(jr,512)*(ht.overscaledZ/ut.transform.zoom)*.5,Wr=ht.canonical.toString();ht.overscaledZ!==ht.canonical.z&&(Wr+=" => "+ht.overscaledZ);var Jr=Wr+" "+Fr+"kb";sr(ut,Jr),Vt.draw(q,vt.TRIANGLES,se,Me,ne.alphaBlended,Re.disabled,qi(It,o.Color.transparent,Zr),$e,ut.debugBuffer,ut.quadTriangleIndexBuffer,ut.debugSegments)}function sr(ut,Y){ut.initDebugOverlayCanvas();var ht=ut.debugOverlayCanvas,q=ut.context.gl,vt=ut.debugOverlayCanvas.getContext("2d");vt.clearRect(0,0,ht.width,ht.height),vt.shadowColor="white",vt.shadowBlur=2,vt.lineWidth=1.5,vt.strokeStyle="white",vt.textBaseline="top",vt.font="bold 36px Open Sans, sans-serif",vt.fillText(Y,5,5),vt.strokeText(Y,5,5),ut.debugOverlayTexture.update(ht),ut.debugOverlayTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE)}function Sr(ut,Y,ht){var q=ut.context,vt=ht.implementation;if(ut.renderPass==="offscreen"){var It=vt.prerender;It&&(ut.setCustomLayerDefaults(),q.setColorMode(ut.colorModeForRenderPass()),It.call(vt,q.gl,ut.transform.customLayerMatrix()),q.setDirty(),ut.setBaseState())}else if(ut.renderPass==="translucent"){ut.setCustomLayerDefaults(),q.setColorMode(ut.colorModeForRenderPass()),q.setStencilMode(Qe.disabled);var Vt=vt.renderingMode==="3d"?new vr(ut.context.gl.LEQUAL,vr.ReadWrite,ut.depthRangeFor3D):ut.depthModeForSublayer(0,vr.ReadOnly);q.setDepthMode(Vt),vt.render(q.gl,ut.transform.customLayerMatrix()),q.setDirty(),ut.setBaseState(),q.bindFramebuffer.set(null)}}var _r={symbol:Tu,circle:Mf,heatmap:Fs,line:Au,fill:Ms,"fill-extrusion":Xu,hillshade:$l,raster:ql,background:$s,debug:pr,custom:Sr},Vr=function(Y,ht){this.context=new ze(Y),this.transform=ht,this._tileTextures={},this.setup(),this.numSublayers=ke.maxUnderzooming+ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Jn,this.gpuTimers={}};Vr.prototype.resize=function(Y,ht){if(this.width=Y*o.browser.devicePixelRatio,this.height=ht*o.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var q=0,vt=this.style._order;q<vt.length;q+=1){var It=vt[q];this.style._layers[It].resize()}},Vr.prototype.setup=function(){var Y=this.context,ht=new o.StructArrayLayout2i4;ht.emplaceBack(0,0),ht.emplaceBack(o.EXTENT,0),ht.emplaceBack(0,o.EXTENT),ht.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=Y.createVertexBuffer(ht,So.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);var q=new o.StructArrayLayout2i4;q.emplaceBack(0,0),q.emplaceBack(o.EXTENT,0),q.emplaceBack(0,o.EXTENT),q.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=Y.createVertexBuffer(q,So.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);var vt=new o.StructArrayLayout4i8;vt.emplaceBack(0,0,0,0),vt.emplaceBack(o.EXTENT,0,o.EXTENT,0),vt.emplaceBack(0,o.EXTENT,0,o.EXTENT),vt.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=Y.createVertexBuffer(vt,G.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);var It=new o.StructArrayLayout2i4;It.emplaceBack(0,0),It.emplaceBack(1,0),It.emplaceBack(0,1),It.emplaceBack(1,1),this.viewportBuffer=Y.createVertexBuffer(It,So.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);var Vt=new o.StructArrayLayout1ui2;Vt.emplaceBack(0),Vt.emplaceBack(1),Vt.emplaceBack(3),Vt.emplaceBack(2),Vt.emplaceBack(0),this.tileBorderIndexBuffer=Y.createIndexBuffer(Vt);var se=new o.StructArrayLayout3ui6;se.emplaceBack(0,1,2),se.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=Y.createIndexBuffer(se),this.emptyTexture=new o.Texture(Y,{width:1,height:1,data:new Uint8Array([0,0,0,0])},Y.gl.RGBA);var Me=this.context.gl;this.stencilClearMode=new Qe({func:Me.ALWAYS,mask:0},0,255,Me.ZERO,Me.ZERO,Me.ZERO)},Vr.prototype.clearStencil=function(){var Y=this.context,ht=Y.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var q=o.create();o.ortho(q,0,this.width,this.height,0,0,1),o.scale(q,q,[ht.drawingBufferWidth,ht.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(Y,ht.TRIANGLES,vr.disabled,this.stencilClearMode,ne.disabled,Re.disabled,ml(q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},Vr.prototype._renderTileClippingMasks=function(Y,ht){if(!(this.currentStencilSource===Y.source||!Y.isTileClipped()||!ht||!ht.length)){this.currentStencilSource=Y.source;var q=this.context,vt=q.gl;this.nextStencilID+ht.length>256&&this.clearStencil(),q.setColorMode(ne.disabled),q.setDepthMode(vr.disabled);var It=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Vt=0,se=ht;Vt<se.length;Vt+=1){var Me=se[Vt],Fe=this._tileClippingMaskIDs[Me.key]=this.nextStencilID++;It.draw(q,vt.TRIANGLES,vr.disabled,new Qe({func:vt.ALWAYS,mask:0},Fe,255,vt.KEEP,vt.KEEP,vt.REPLACE),ne.disabled,Re.disabled,ml(Me.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},Vr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var Y=this.nextStencilID++,ht=this.context.gl;return new Qe({func:ht.NOTEQUAL,mask:255},Y,255,ht.KEEP,ht.KEEP,ht.REPLACE)},Vr.prototype.stencilModeForClipping=function(Y){var ht=this.context.gl;return new Qe({func:ht.EQUAL,mask:255},this._tileClippingMaskIDs[Y.key],0,ht.KEEP,ht.KEEP,ht.REPLACE)},Vr.prototype.stencilConfigForOverlap=function(Y){var ht,q=this.context.gl,vt=Y.sort(function(Fe,$e){return $e.overscaledZ-Fe.overscaledZ}),It=vt[vt.length-1].overscaledZ,Vt=vt[0].overscaledZ-It+1;if(Vt>1){this.currentStencilSource=void 0,this.nextStencilID+Vt>256&&this.clearStencil();for(var se={},Me=0;Me<Vt;Me++)se[Me+It]=new Qe({func:q.GEQUAL,mask:255},Me+this.nextStencilID,255,q.KEEP,q.KEEP,q.REPLACE);return this.nextStencilID+=Vt,[se,vt]}return[(ht={},ht[It]=Qe.disabled,ht),vt]},Vr.prototype.colorModeForRenderPass=function(){var Y=this.context.gl;if(this._showOverdrawInspector){var ht=8,q=1/ht;return new ne([Y.CONSTANT_COLOR,Y.ONE],new o.Color(q,q,q,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?ne.unblended:ne.alphaBlended},Vr.prototype.depthModeForSublayer=function(Y,ht,q){if(!this.opaquePassEnabledForLayer())return vr.disabled;var vt=1-((1+this.currentLayer)*this.numSublayers+Y)*this.depthEpsilon;return new vr(q||this.context.gl.LEQUAL,ht,[vt,vt])},Vr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},Vr.prototype.render=function(Y,ht){var q=this;this.style=Y,this.options=ht,this.lineAtlas=Y.lineAtlas,this.imageManager=Y.imageManager,this.glyphManager=Y.glyphManager,this.symbolFadeChange=Y.placement.symbolFadeChange(o.browser.now()),this.imageManager.beginFrame();var vt=this.style._order,It=this.style.sourceCaches;for(var Vt in It){var se=It[Vt];se.used&&se.prepare(this.context)}var Me={},Fe={},$e={};for(var ur in It){var lr=It[ur];Me[ur]=lr.getVisibleCoordinates(),Fe[ur]=Me[ur].slice().reverse(),$e[ur]=lr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Fr=0;Fr<vt.length;Fr++){var jr=vt[Fr];if(this.style._layers[jr].is3D()){this.opaquePassCutoff=Fr;break}}this.renderPass="offscreen";for(var Zr=0,Wr=vt;Zr<Wr.length;Zr+=1){var Jr=Wr[Zr],dn=this.style._layers[Jr];if(!(!dn.hasOffscreenPass()||dn.isHidden(this.transform.zoom))){var kn=Fe[dn.source];dn.type!=="custom"&&!kn.length||this.renderLayer(this,It[dn.source],dn,kn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ht.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ht.showOverdrawInspector,this.depthRangeFor3D=[0,1-(Y._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=vt.length-1;this.currentLayer>=0;this.currentLayer--){var Hn=this.style._layers[vt[this.currentLayer]],Kn=It[Hn.source],Qn=Me[Hn.source];this._renderTileClippingMasks(Hn,Qn),this.renderLayer(this,Kn,Hn,Qn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<vt.length;this.currentLayer++){var Xn=this.style._layers[vt[this.currentLayer]],qn=It[Xn.source],oa=(Xn.type==="symbol"?$e:Fe)[Xn.source];this._renderTileClippingMasks(Xn,Me[Xn.source]),this.renderLayer(this,qn,Xn,oa)}if(this.options.showTileBoundaries){var ha,xa,ga=o.values(this.style._layers);ga.forEach(function(Fa){Fa.source&&!Fa.isHidden(q.transform.zoom)&&(Fa.source!==(xa&&xa.id)&&(xa=q.style.sourceCaches[Fa.source]),(!ha||ha.getSource().maxzoom<xa.getSource().maxzoom)&&(ha=xa))}),ha&&_r.debug(this,ha,ha.getVisibleCoordinates())}this.options.showPadding&&de(this),this.context.setDefault()},Vr.prototype.renderLayer=function(Y,ht,q,vt){q.isHidden(this.transform.zoom)||q.type!=="background"&&q.type!=="custom"&&!vt.length||(this.id=q.id,this.gpuTimingStart(q),_r[q.type](Y,ht,q,vt,this.style.placement.variableOffsets),this.gpuTimingEnd())},Vr.prototype.gpuTimingStart=function(Y){if(this.options.gpuTiming){var ht=this.context.extTimerQuery,q=this.gpuTimers[Y.id];q||(q=this.gpuTimers[Y.id]={calls:0,cpuTime:0,query:ht.createQueryEXT()}),q.calls++,ht.beginQueryEXT(ht.TIME_ELAPSED_EXT,q.query)}},Vr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var Y=this.context.extTimerQuery;Y.endQueryEXT(Y.TIME_ELAPSED_EXT)}},Vr.prototype.collectGpuTimers=function(){var Y=this.gpuTimers;return this.gpuTimers={},Y},Vr.prototype.queryGpuTimers=function(Y){var ht={};for(var q in Y){var vt=Y[q],It=this.context.extTimerQuery,Vt=It.getQueryObjectEXT(vt.query,It.QUERY_RESULT_EXT)/(1e3*1e3);It.deleteQueryEXT(vt.query),ht[q]=Vt}return ht},Vr.prototype.translatePosMatrix=function(Y,ht,q,vt,It){if(!q[0]&&!q[1])return Y;var Vt=It?vt==="map"?this.transform.angle:0:vt==="viewport"?-this.transform.angle:0;if(Vt){var se=Math.sin(Vt),Me=Math.cos(Vt);q=[q[0]*Me-q[1]*se,q[0]*se+q[1]*Me]}var Fe=[It?q[0]:ln(ht,q[0],this.transform.zoom),It?q[1]:ln(ht,q[1],this.transform.zoom),0],$e=new Float32Array(16);return o.translate($e,Y,Fe),$e},Vr.prototype.saveTileTexture=function(Y){var ht=this._tileTextures[Y.size[0]];ht?ht.push(Y):this._tileTextures[Y.size[0]]=[Y]},Vr.prototype.getTileTexture=function(Y){var ht=this._tileTextures[Y];return ht&&ht.length>0?ht.pop():null},Vr.prototype.isPatternMissing=function(Y){if(!Y)return!1;if(!Y.from||!Y.to)return!0;var ht=this.imageManager.getPattern(Y.from.toString()),q=this.imageManager.getPattern(Y.to.toString());return!ht||!q},Vr.prototype.useProgram=function(Y,ht){this.cache=this.cache||{};var q=""+Y+(ht?ht.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[q]||(this.cache[q]=new Vu(this.context,Y,df[Y],ht,_s[Y],this._showOverdrawInspector)),this.cache[q]},Vr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},Vr.prototype.setBaseState=function(){var Y=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(Y.FUNC_ADD)},Vr.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var Y=this.context.gl;this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,Y.RGBA)}},Vr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var rn=function(Y,ht){this.points=Y,this.planes=ht};rn.fromInvProjectionMatrix=function(Y,ht,q){var vt=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],It=Math.pow(2,q),Vt=vt.map(function(Fe){return o.transformMat4([],Fe,Y)}).map(function(Fe){return o.scale$1([],Fe,1/Fe[3]/ht*It)}),se=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],Me=se.map(function(Fe){var $e=o.sub([],Vt[Fe[0]],Vt[Fe[1]]),ur=o.sub([],Vt[Fe[2]],Vt[Fe[1]]),lr=o.normalize([],o.cross([],$e,ur)),Fr=-o.dot(lr,Vt[Fe[1]]);return lr.concat(Fr)});return new rn(Vt,Me)};var bn=function(Y,ht){this.min=Y,this.max=ht,this.center=o.scale$2([],o.add([],this.min,this.max),.5)};bn.prototype.quadrant=function(Y){for(var ht=[Y%2===0,Y<2],q=o.clone$2(this.min),vt=o.clone$2(this.max),It=0;It<ht.length;It++)q[It]=ht[It]?this.min[It]:this.center[It],vt[It]=ht[It]?this.center[It]:this.max[It];return vt[2]=this.max[2],new bn(q,vt)},bn.prototype.distanceX=function(Y){var ht=Math.max(Math.min(this.max[0],Y[0]),this.min[0]);return ht-Y[0]},bn.prototype.distanceY=function(Y){var ht=Math.max(Math.min(this.max[1],Y[1]),this.min[1]);return ht-Y[1]},bn.prototype.intersects=function(Y){for(var ht=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],q=!0,vt=0;vt<Y.planes.length;vt++){for(var It=Y.planes[vt],Vt=0,se=0;se<ht.length;se++)Vt+=o.dot$1(It,ht[se])>=0;if(Vt===0)return 0;Vt!==ht.length&&(q=!1)}if(q)return 2;for(var Me=0;Me<3;Me++){for(var Fe=Number.MAX_VALUE,$e=-Number.MAX_VALUE,ur=0;ur<Y.points.length;ur++){var lr=Y.points[ur][Me]-this.min[Me];Fe=Math.min(Fe,lr),$e=Math.max($e,lr)}if($e<0||Fe>this.max[Me]-this.min[Me])return 0}return 1};var Pn=function(Y,ht,q,vt){if(Y===void 0&&(Y=0),ht===void 0&&(ht=0),q===void 0&&(q=0),vt===void 0&&(vt=0),isNaN(Y)||Y<0||isNaN(ht)||ht<0||isNaN(q)||q<0||isNaN(vt)||vt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=Y,this.bottom=ht,this.left=q,this.right=vt};Pn.prototype.interpolate=function(Y,ht,q){return ht.top!=null&&Y.top!=null&&(this.top=o.number(Y.top,ht.top,q)),ht.bottom!=null&&Y.bottom!=null&&(this.bottom=o.number(Y.bottom,ht.bottom,q)),ht.left!=null&&Y.left!=null&&(this.left=o.number(Y.left,ht.left,q)),ht.right!=null&&Y.right!=null&&(this.right=o.number(Y.right,ht.right,q)),this},Pn.prototype.getCenter=function(Y,ht){var q=o.clamp((this.left+Y-this.right)/2,0,Y),vt=o.clamp((this.top+ht-this.bottom)/2,0,ht);return new o.Point(q,vt)},Pn.prototype.equals=function(Y){return this.top===Y.top&&this.bottom===Y.bottom&&this.left===Y.left&&this.right===Y.right},Pn.prototype.clone=function(){return new Pn(this.top,this.bottom,this.left,this.right)},Pn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var In=function(Y,ht,q,vt,It){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=It===void 0?!0:It,this._minZoom=Y||0,this._maxZoom=ht||22,this._minPitch=q??0,this._maxPitch=vt??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Pn,this._posMatrixCache={},this._alignedPosMatrixCache={}},$n={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};In.prototype.clone=function(){var Y=new In(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return Y.tileSize=this.tileSize,Y.latRange=this.latRange,Y.width=this.width,Y.height=this.height,Y._center=this._center,Y.zoom=this.zoom,Y.angle=this.angle,Y._fov=this._fov,Y._pitch=this._pitch,Y._unmodified=this._unmodified,Y._edgeInsets=this._edgeInsets.clone(),Y._calcMatrices(),Y},$n.minZoom.get=function(){return this._minZoom},$n.minZoom.set=function(ut){this._minZoom!==ut&&(this._minZoom=ut,this.zoom=Math.max(this.zoom,ut))},$n.maxZoom.get=function(){return this._maxZoom},$n.maxZoom.set=function(ut){this._maxZoom!==ut&&(this._maxZoom=ut,this.zoom=Math.min(this.zoom,ut))},$n.minPitch.get=function(){return this._minPitch},$n.minPitch.set=function(ut){this._minPitch!==ut&&(this._minPitch=ut,this.pitch=Math.max(this.pitch,ut))},$n.maxPitch.get=function(){return this._maxPitch},$n.maxPitch.set=function(ut){this._maxPitch!==ut&&(this._maxPitch=ut,this.pitch=Math.min(this.pitch,ut))},$n.renderWorldCopies.get=function(){return this._renderWorldCopies},$n.renderWorldCopies.set=function(ut){ut===void 0?ut=!0:ut===null&&(ut=!1),this._renderWorldCopies=ut},$n.worldSize.get=function(){return this.tileSize*this.scale},$n.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},$n.size.get=function(){return new o.Point(this.width,this.height)},$n.bearing.get=function(){return-this.angle/Math.PI*180},$n.bearing.set=function(ut){var Y=-o.wrap(ut,-180,180)*Math.PI/180;this.angle!==Y&&(this._unmodified=!1,this.angle=Y,this._calcMatrices(),this.rotationMatrix=o.create$2(),o.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},$n.pitch.get=function(){return this._pitch/Math.PI*180},$n.pitch.set=function(ut){var Y=o.clamp(ut,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==Y&&(this._unmodified=!1,this._pitch=Y,this._calcMatrices())},$n.fov.get=function(){return this._fov/Math.PI*180},$n.fov.set=function(ut){ut=Math.max(.01,Math.min(60,ut)),this._fov!==ut&&(this._unmodified=!1,this._fov=ut/180*Math.PI,this._calcMatrices())},$n.zoom.get=function(){return this._zoom},$n.zoom.set=function(ut){var Y=Math.min(Math.max(ut,this.minZoom),this.maxZoom);this._zoom!==Y&&(this._unmodified=!1,this._zoom=Y,this.scale=this.zoomScale(Y),this.tileZoom=Math.floor(Y),this.zoomFraction=Y-this.tileZoom,this._constrain(),this._calcMatrices())},$n.center.get=function(){return this._center},$n.center.set=function(ut){ut.lat===this._center.lat&&ut.lng===this._center.lng||(this._unmodified=!1,this._center=ut,this._constrain(),this._calcMatrices())},$n.padding.get=function(){return this._edgeInsets.toJSON()},$n.padding.set=function(ut){this._edgeInsets.equals(ut)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ut,1),this._calcMatrices())},$n.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},In.prototype.isPaddingEqual=function(Y){return this._edgeInsets.equals(Y)},In.prototype.interpolatePadding=function(Y,ht,q){this._unmodified=!1,this._edgeInsets.interpolate(Y,ht,q),this._constrain(),this._calcMatrices()},In.prototype.coveringZoomLevel=function(Y){var ht=(Y.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/Y.tileSize));return Math.max(0,ht)},In.prototype.getVisibleUnwrappedCoordinates=function(Y){var ht=[new o.UnwrappedTileID(0,Y)];if(this._renderWorldCopies)for(var q=this.pointCoordinate(new o.Point(0,0)),vt=this.pointCoordinate(new o.Point(this.width,0)),It=this.pointCoordinate(new o.Point(this.width,this.height)),Vt=this.pointCoordinate(new o.Point(0,this.height)),se=Math.floor(Math.min(q.x,vt.x,It.x,Vt.x)),Me=Math.floor(Math.max(q.x,vt.x,It.x,Vt.x)),Fe=1,$e=se-Fe;$e<=Me+Fe;$e++)$e!==0&&ht.push(new o.UnwrappedTileID($e,Y));return ht},In.prototype.coveringTiles=function(Y){var ht=this.coveringZoomLevel(Y),q=ht;if(Y.minzoom!==void 0&&ht<Y.minzoom)return[];Y.maxzoom!==void 0&&ht>Y.maxzoom&&(ht=Y.maxzoom);var vt=o.MercatorCoordinate.fromLngLat(this.center),It=Math.pow(2,ht),Vt=[It*vt.x,It*vt.y,0],se=rn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ht),Me=Y.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Me=ht);var Fe=3,$e=function(ga){return{aabb:new bn([ga*It,0,0],[(ga+1)*It,It,0]),zoom:0,x:0,y:0,wrap:ga,fullyVisible:!1}},ur=[],lr=[],Fr=ht,jr=Y.reparseOverscaled?q:ht;if(this._renderWorldCopies)for(var Zr=1;Zr<=3;Zr++)ur.push($e(-Zr)),ur.push($e(Zr));for(ur.push($e(0));ur.length>0;){var Wr=ur.pop(),Jr=Wr.x,dn=Wr.y,kn=Wr.fullyVisible;if(!kn){var Hn=Wr.aabb.intersects(se);if(Hn===0)continue;kn=Hn===2}var Kn=Wr.aabb.distanceX(Vt),Qn=Wr.aabb.distanceY(Vt),Xn=Math.max(Math.abs(Kn),Math.abs(Qn)),qn=Fe+(1<<Fr-Wr.zoom)-2;if(Wr.zoom===Fr||Xn>qn&&Wr.zoom>=Me){lr.push({tileID:new o.OverscaledTileID(Wr.zoom===Fr?jr:Wr.zoom,Wr.wrap,Wr.zoom,Jr,dn),distanceSq:o.sqrLen([Vt[0]-.5-Jr,Vt[1]-.5-dn])});continue}for(var oa=0;oa<4;oa++){var ha=(Jr<<1)+oa%2,xa=(dn<<1)+(oa>>1);ur.push({aabb:Wr.aabb.quadrant(oa),zoom:Wr.zoom+1,x:ha,y:xa,wrap:Wr.wrap,fullyVisible:kn})}}return lr.sort(function(ga,Fa){return ga.distanceSq-Fa.distanceSq}).map(function(ga){return ga.tileID})},In.prototype.resize=function(Y,ht){this.width=Y,this.height=ht,this.pixelsToGLUnits=[2/Y,-2/ht],this._constrain(),this._calcMatrices()},$n.unmodified.get=function(){return this._unmodified},In.prototype.zoomScale=function(Y){return Math.pow(2,Y)},In.prototype.scaleZoom=function(Y){return Math.log(Y)/Math.LN2},In.prototype.project=function(Y){var ht=o.clamp(Y.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.Point(o.mercatorXfromLng(Y.lng)*this.worldSize,o.mercatorYfromLat(ht)*this.worldSize)},In.prototype.unproject=function(Y){return new o.MercatorCoordinate(Y.x/this.worldSize,Y.y/this.worldSize).toLngLat()},$n.point.get=function(){return this.project(this.center)},In.prototype.setLocationAtPoint=function(Y,ht){var q=this.pointCoordinate(ht),vt=this.pointCoordinate(this.centerPoint),It=this.locationCoordinate(Y),Vt=new o.MercatorCoordinate(It.x-(q.x-vt.x),It.y-(q.y-vt.y));this.center=this.coordinateLocation(Vt),this._renderWorldCopies&&(this.center=this.center.wrap())},In.prototype.locationPoint=function(Y){return this.coordinatePoint(this.locationCoordinate(Y))},In.prototype.pointLocation=function(Y){return this.coordinateLocation(this.pointCoordinate(Y))},In.prototype.locationCoordinate=function(Y){return o.MercatorCoordinate.fromLngLat(Y)},In.prototype.coordinateLocation=function(Y){return Y.toLngLat()},In.prototype.pointCoordinate=function(Y){var ht=0,q=[Y.x,Y.y,0,1],vt=[Y.x,Y.y,1,1];o.transformMat4(q,q,this.pixelMatrixInverse),o.transformMat4(vt,vt,this.pixelMatrixInverse);var It=q[3],Vt=vt[3],se=q[0]/It,Me=vt[0]/Vt,Fe=q[1]/It,$e=vt[1]/Vt,ur=q[2]/It,lr=vt[2]/Vt,Fr=ur===lr?0:(ht-ur)/(lr-ur);return new o.MercatorCoordinate(o.number(se,Me,Fr)/this.worldSize,o.number(Fe,$e,Fr)/this.worldSize)},In.prototype.coordinatePoint=function(Y){var ht=[Y.x*this.worldSize,Y.y*this.worldSize,0,1];return o.transformMat4(ht,ht,this.pixelMatrix),new o.Point(ht[0]/ht[3],ht[1]/ht[3])},In.prototype.getBounds=function(){return new o.LngLatBounds().extend(this.pointLocation(new o.Point(0,0))).extend(this.pointLocation(new o.Point(this.width,0))).extend(this.pointLocation(new o.Point(this.width,this.height))).extend(this.pointLocation(new o.Point(0,this.height)))},In.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},In.prototype.setMaxBounds=function(Y){Y?(this.lngRange=[Y.getWest(),Y.getEast()],this.latRange=[Y.getSouth(),Y.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},In.prototype.calculatePosMatrix=function(Y,ht){ht===void 0&&(ht=!1);var q=Y.key,vt=ht?this._alignedPosMatrixCache:this._posMatrixCache;if(vt[q])return vt[q];var It=Y.canonical,Vt=this.worldSize/this.zoomScale(It.z),se=It.x+Math.pow(2,It.z)*Y.wrap,Me=o.identity(new Float64Array(16));return o.translate(Me,Me,[se*Vt,It.y*Vt,0]),o.scale(Me,Me,[Vt/o.EXTENT,Vt/o.EXTENT,1]),o.multiply(Me,ht?this.alignedProjMatrix:this.projMatrix,Me),vt[q]=new Float32Array(Me),vt[q]},In.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},In.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var Y=-90,ht=90,q=-180,vt=180,It,Vt,se,Me,Fe=this.size,$e=this._unmodified;if(this.latRange){var ur=this.latRange;Y=o.mercatorYfromLat(ur[1])*this.worldSize,ht=o.mercatorYfromLat(ur[0])*this.worldSize,It=ht-Y<Fe.y?Fe.y/(ht-Y):0}if(this.lngRange){var lr=this.lngRange;q=o.mercatorXfromLng(lr[0])*this.worldSize,vt=o.mercatorXfromLng(lr[1])*this.worldSize,Vt=vt-q<Fe.x?Fe.x/(vt-q):0}var Fr=this.point,jr=Math.max(Vt||0,It||0);if(jr){this.center=this.unproject(new o.Point(Vt?(vt+q)/2:Fr.x,It?(ht+Y)/2:Fr.y)),this.zoom+=this.scaleZoom(jr),this._unmodified=$e,this._constraining=!1;return}if(this.latRange){var Zr=Fr.y,Wr=Fe.y/2;Zr-Wr<Y&&(Me=Y+Wr),Zr+Wr>ht&&(Me=ht-Wr)}if(this.lngRange){var Jr=Fr.x,dn=Fe.x/2;Jr-dn<q&&(se=q+dn),Jr+dn>vt&&(se=vt-dn)}(se!==void 0||Me!==void 0)&&(this.center=this.unproject(new o.Point(se!==void 0?se:Fr.x,Me!==void 0?Me:Fr.y))),this._unmodified=$e,this._constraining=!1}},In.prototype._calcMatrices=function(){if(this.height){var Y=this._fov/2,ht=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(Y)*this.height;var q=Math.PI/2+this._pitch,vt=this._fov*(.5+ht.y/this.height),It=Math.sin(vt)*this.cameraToCenterDistance/Math.sin(o.clamp(Math.PI-q-vt,.01,Math.PI-.01)),Vt=this.point,se=Vt.x,Me=Vt.y,Fe=Math.cos(Math.PI/2-this._pitch)*It+this.cameraToCenterDistance,$e=Fe*1.01,ur=this.height/50,lr=new Float64Array(16);o.perspective(lr,this._fov,this.width/this.height,ur,$e),lr[8]=-ht.x*2/this.width,lr[9]=ht.y*2/this.height,o.scale(lr,lr,[1,-1,1]),o.translate(lr,lr,[0,0,-this.cameraToCenterDistance]),o.rotateX(lr,lr,this._pitch),o.rotateZ(lr,lr,this.angle),o.translate(lr,lr,[-se,-Me,0]),this.mercatorMatrix=o.scale([],lr,[this.worldSize,this.worldSize,this.worldSize]),o.scale(lr,lr,[1,1,o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=lr,this.invProjMatrix=o.invert([],this.projMatrix);var Fr=this.width%2/2,jr=this.height%2/2,Zr=Math.cos(this.angle),Wr=Math.sin(this.angle),Jr=se-Math.round(se)+Zr*Fr+Wr*jr,dn=Me-Math.round(Me)+Zr*jr+Wr*Fr,kn=new Float64Array(lr);if(o.translate(kn,kn,[Jr>.5?Jr-1:Jr,dn>.5?dn-1:dn,0]),this.alignedProjMatrix=kn,lr=o.create(),o.scale(lr,lr,[this.width/2,-this.height/2,1]),o.translate(lr,lr,[1,-1,0]),this.labelPlaneMatrix=lr,lr=o.create(),o.scale(lr,lr,[1,-1,1]),o.translate(lr,lr,[-1,-1,0]),o.scale(lr,lr,[2/this.width,2/this.height,1]),this.glCoordMatrix=lr,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),lr=o.invert(new Float64Array(16),this.pixelMatrix),!lr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=lr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},In.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var Y=this.pointCoordinate(new o.Point(0,0)),ht=[Y.x*this.worldSize,Y.y*this.worldSize,0,1],q=o.transformMat4(ht,ht,this.pixelMatrix);return q[3]/this.cameraToCenterDistance},In.prototype.getCameraPoint=function(){var Y=this._pitch,ht=Math.tan(Y)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.Point(0,ht))},In.prototype.getCameraQueryGeometry=function(Y){var ht=this.getCameraPoint();if(Y.length===1)return[Y[0],ht];for(var q=ht.x,vt=ht.y,It=ht.x,Vt=ht.y,se=0,Me=Y;se<Me.length;se+=1){var Fe=Me[se];q=Math.min(q,Fe.x),vt=Math.min(vt,Fe.y),It=Math.max(It,Fe.x),Vt=Math.max(Vt,Fe.y)}return[new o.Point(q,vt),new o.Point(It,vt),new o.Point(It,Vt),new o.Point(q,Vt),new o.Point(q,vt)]},Object.defineProperties(In.prototype,$n);function Da(ut,Y){var ht=!1,q=null,vt=function(){q=null,ht&&(ut(),q=setTimeout(vt,Y),ht=!1)};return function(){return ht=!0,q||vt(),q}}var Ia=function(Y){this._hashName=Y&&encodeURIComponent(Y),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Da(this._updateHashUnthrottled.bind(this),30*1e3/100)};Ia.prototype.addTo=function(Y){return this._map=Y,o.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Ia.prototype.remove=function(){return o.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Ia.prototype.getHashString=function(Y){var ht=this._map.getCenter(),q=Math.round(this._map.getZoom()*100)/100,vt=Math.ceil((q*Math.LN2+Math.log(512/360/.5))/Math.LN10),It=Math.pow(10,vt),Vt=Math.round(ht.lng*It)/It,se=Math.round(ht.lat*It)/It,Me=this._map.getBearing(),Fe=this._map.getPitch(),$e="";if(Y?$e+="/"+Vt+"/"+se+"/"+q:$e+=q+"/"+se+"/"+Vt,(Me||Fe)&&($e+="/"+Math.round(Me*10)/10),Fe&&($e+="/"+Math.round(Fe)),this._hashName){var ur=this._hashName,lr=!1,Fr=o.window.location.hash.slice(1).split("&").map(function(jr){var Zr=jr.split("=")[0];return Zr===ur?(lr=!0,Zr+"="+$e):jr}).filter(function(jr){return jr});return lr||Fr.push(ur+"="+$e),"#"+Fr.join("&")}return"#"+$e},Ia.prototype._getCurrentHash=function(){var Y=this,ht=o.window.location.hash.replace("#","");if(this._hashName){var q;return ht.split("&").map(function(vt){return vt.split("=")}).forEach(function(vt){vt[0]===Y._hashName&&(q=vt)}),(q&&q[1]||"").split("/")}return ht.split("/")},Ia.prototype._onHashChange=function(){var Y=this._getCurrentHash();if(Y.length>=3&&!Y.some(function(q){return isNaN(q)})){var ht=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(Y[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+Y[2],+Y[1]],zoom:+Y[0],bearing:ht,pitch:+(Y[4]||0)}),!0}return!1},Ia.prototype._updateHashUnthrottled=function(){var Y=o.window.location.href.replace(/(#.+)?$/,this.getHashString());try{o.window.history.replaceState(o.window.history.state,null,Y)}catch{}};var za={linearity:.3,easing:o.bezier(0,0,.3,1)},Oa=o.extend({deceleration:2500,maxSpeed:1400},za),Ka=o.extend({deceleration:20,maxSpeed:1400},za),pi=o.extend({deceleration:1e3,maxSpeed:360},za),Ni=o.extend({deceleration:1e3,maxSpeed:90},za),st=function(Y){this._map=Y,this.clear()};st.prototype.clear=function(){this._inertiaBuffer=[]},st.prototype.record=function(Y){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.browser.now(),settings:Y})},st.prototype._drainInertiaBuffer=function(){for(var Y=this._inertiaBuffer,ht=o.browser.now(),q=160;Y.length>0&&ht-Y[0].time>q;)Y.shift()},st.prototype._onMoveEnd=function(Y){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ht={zoom:0,bearing:0,pitch:0,pan:new o.Point(0,0),pinchAround:void 0,around:void 0},q=0,vt=this._inertiaBuffer;q<vt.length;q+=1){var It=vt[q],Vt=It.settings;ht.zoom+=Vt.zoomDelta||0,ht.bearing+=Vt.bearingDelta||0,ht.pitch+=Vt.pitchDelta||0,Vt.panDelta&&ht.pan._add(Vt.panDelta),Vt.around&&(ht.around=Vt.around),Vt.pinchAround&&(ht.pinchAround=Vt.pinchAround)}var se=this._inertiaBuffer[this._inertiaBuffer.length-1],Me=se.time-this._inertiaBuffer[0].time,Fe={};if(ht.pan.mag()){var $e=_t(ht.pan.mag(),Me,o.extend({},Oa,Y||{}));Fe.offset=ht.pan.mult($e.amount/ht.pan.mag()),Fe.center=this._map.transform.center,bt(Fe,$e)}if(ht.zoom){var ur=_t(ht.zoom,Me,Ka);Fe.zoom=this._map.transform.zoom+ur.amount,bt(Fe,ur)}if(ht.bearing){var lr=_t(ht.bearing,Me,pi);Fe.bearing=this._map.transform.bearing+o.clamp(lr.amount,-179,179),bt(Fe,lr)}if(ht.pitch){var Fr=_t(ht.pitch,Me,Ni);Fe.pitch=this._map.transform.pitch+Fr.amount,bt(Fe,Fr)}if(Fe.zoom||Fe.bearing){var jr=ht.pinchAround===void 0?ht.around:ht.pinchAround;Fe.around=jr?this._map.unproject(jr):this._map.getCenter()}return this.clear(),o.extend(Fe,{noMoveStart:!0})}};function bt(ut,Y){(!ut.duration||ut.duration<Y.duration)&&(ut.duration=Y.duration,ut.easing=Y.easing)}function _t(ut,Y,ht){var q=ht.maxSpeed,vt=ht.linearity,It=ht.deceleration,Vt=o.clamp(ut*vt/(Y/1e3),-q,q),se=Math.abs(Vt)/(It*vt);return{easing:ht.easing,duration:se*1e3,amount:Vt*(se/2)}}var Kt=function(ut){function Y(q,vt,It,Vt){Vt===void 0&&(Vt={});var se=A.mousePos(vt.getCanvasContainer(),It),Me=vt.unproject(se);ut.call(this,q,o.extend({point:se,lngLat:Me,originalEvent:It},Vt)),this._defaultPrevented=!1,this.target=vt}ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(o.Event),qt=function(ut){function Y(q,vt,It){var Vt=q==="touchend"?It.changedTouches:It.touches,se=A.touchPos(vt.getCanvasContainer(),Vt),Me=se.map(function(ur){return vt.unproject(ur)}),Fe=se.reduce(function(ur,lr,Fr,jr){return ur.add(lr.div(jr.length))},new o.Point(0,0)),$e=vt.unproject(Fe);ut.call(this,q,{points:se,point:Fe,lngLats:Me,lngLat:$e,originalEvent:It}),this._defaultPrevented=!1}ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(o.Event),le=function(ut){function Y(q,vt,It){ut.call(this,q,{originalEvent:It}),this._defaultPrevented=!1}ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y;var ht={defaultPrevented:{configurable:!0}};return Y.prototype.preventDefault=function(){this._defaultPrevented=!0},ht.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(Y.prototype,ht),Y}(o.Event),Ce=function(Y,ht){this._map=Y,this._clickTolerance=ht.clickTolerance};Ce.prototype.reset=function(){delete this._mousedownPos},Ce.prototype.wheel=function(Y){return this._firePreventable(new le(Y.type,this._map,Y))},Ce.prototype.mousedown=function(Y,ht){return this._mousedownPos=ht,this._firePreventable(new Kt(Y.type,this._map,Y))},Ce.prototype.mouseup=function(Y){this._map.fire(new Kt(Y.type,this._map,Y))},Ce.prototype.click=function(Y,ht){this._mousedownPos&&this._mousedownPos.dist(ht)>=this._clickTolerance||this._map.fire(new Kt(Y.type,this._map,Y))},Ce.prototype.dblclick=function(Y){return this._firePreventable(new Kt(Y.type,this._map,Y))},Ce.prototype.mouseover=function(Y){this._map.fire(new Kt(Y.type,this._map,Y))},Ce.prototype.mouseout=function(Y){this._map.fire(new Kt(Y.type,this._map,Y))},Ce.prototype.touchstart=function(Y){return this._firePreventable(new qt(Y.type,this._map,Y))},Ce.prototype.touchmove=function(Y){this._map.fire(new qt(Y.type,this._map,Y))},Ce.prototype.touchend=function(Y){this._map.fire(new qt(Y.type,this._map,Y))},Ce.prototype.touchcancel=function(Y){this._map.fire(new qt(Y.type,this._map,Y))},Ce.prototype._firePreventable=function(Y){if(this._map.fire(Y),Y.defaultPrevented)return{}},Ce.prototype.isEnabled=function(){return!0},Ce.prototype.isActive=function(){return!1},Ce.prototype.enable=function(){},Ce.prototype.disable=function(){};var be=function(Y){this._map=Y};be.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},be.prototype.mousemove=function(Y){this._map.fire(new Kt(Y.type,this._map,Y))},be.prototype.mousedown=function(){this._delayContextMenu=!0},be.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Kt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},be.prototype.contextmenu=function(Y){this._delayContextMenu?this._contextMenuEvent=Y:this._map.fire(new Kt(Y.type,this._map,Y)),this._map.listens("contextmenu")&&Y.preventDefault()},be.prototype.isEnabled=function(){return!0},be.prototype.isActive=function(){return!1},be.prototype.enable=function(){},be.prototype.disable=function(){};var Oe=function(Y,ht){this._map=Y,this._el=Y.getCanvasContainer(),this._container=Y.getContainer(),this._clickTolerance=ht.clickTolerance||1};Oe.prototype.isEnabled=function(){return!!this._enabled},Oe.prototype.isActive=function(){return!!this._active},Oe.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Oe.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Oe.prototype.mousedown=function(Y,ht){this.isEnabled()&&Y.shiftKey&&Y.button===0&&(A.disableDrag(),this._startPos=this._lastPos=ht,this._active=!0)},Oe.prototype.mousemoveWindow=function(Y,ht){if(this._active){var q=ht;if(!(this._lastPos.equals(q)||!this._box&&q.dist(this._startPos)<this._clickTolerance)){var vt=this._startPos;this._lastPos=q,this._box||(this._box=A.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",Y));var It=Math.min(vt.x,q.x),Vt=Math.max(vt.x,q.x),se=Math.min(vt.y,q.y),Me=Math.max(vt.y,q.y);A.setTransform(this._box,"translate("+It+"px,"+se+"px)"),this._box.style.width=Vt-It+"px",this._box.style.height=Me-se+"px"}}},Oe.prototype.mouseupWindow=function(Y,ht){var q=this;if(this._active&&Y.button===0){var vt=this._startPos,It=ht;if(this.reset(),A.suppressClick(),vt.x===It.x&&vt.y===It.y)this._fireEvent("boxzoomcancel",Y);else return this._map.fire(new o.Event("boxzoomend",{originalEvent:Y})),{cameraAnimation:function(Vt){return Vt.fitScreenCoordinates(vt,It,q._map.getBearing(),{linear:!0})}}}},Oe.prototype.keydown=function(Y){this._active&&Y.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",Y))},Oe.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(A.remove(this._box),this._box=null),A.enableDrag(),delete this._startPos,delete this._lastPos},Oe.prototype._fireEvent=function(Y,ht){return this._map.fire(new o.Event(Y,{originalEvent:ht}))};function Ue(ut,Y){for(var ht={},q=0;q<ut.length;q++)ht[ut[q].identifier]=Y[q];return ht}function nr(ut){for(var Y=new o.Point(0,0),ht=0,q=ut;ht<q.length;ht+=1){var vt=q[ht];Y._add(vt)}return Y.div(ut.length)}var Rr=500,Dr=500,Qr=30,sn=function(Y){this.reset(),this.numTouches=Y.numTouches};sn.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},sn.prototype.touchstart=function(Y,ht,q){(this.centroid||q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=Y.timeStamp),q.length===this.numTouches&&(this.centroid=nr(ht),this.touches=Ue(q,ht)))},sn.prototype.touchmove=function(Y,ht,q){if(!(this.aborted||!this.centroid)){var vt=Ue(q,ht);for(var It in this.touches){var Vt=this.touches[It],se=vt[It];(!se||se.dist(Vt)>Qr)&&(this.aborted=!0)}}},sn.prototype.touchend=function(Y,ht,q){if((!this.centroid||Y.timeStamp-this.startTime>Dr)&&(this.aborted=!0),q.length===0){var vt=!this.aborted&&this.centroid;if(this.reset(),vt)return vt}};var zr=function(Y){this.singleTap=new sn(Y),this.numTaps=Y.numTaps,this.reset()};zr.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},zr.prototype.touchstart=function(Y,ht,q){this.singleTap.touchstart(Y,ht,q)},zr.prototype.touchmove=function(Y,ht,q){this.singleTap.touchmove(Y,ht,q)},zr.prototype.touchend=function(Y,ht,q){var vt=this.singleTap.touchend(Y,ht,q);if(vt){var It=Y.timeStamp-this.lastTime<Rr,Vt=!this.lastTap||this.lastTap.dist(vt)<Qr;if((!It||!Vt)&&this.reset(),this.count++,this.lastTime=Y.timeStamp,this.lastTap=vt,this.count===this.numTaps)return this.reset(),vt}};var Hr=function(){this._zoomIn=new zr({numTouches:1,numTaps:2}),this._zoomOut=new zr({numTouches:2,numTaps:1}),this.reset()};Hr.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Hr.prototype.touchstart=function(Y,ht,q){this._zoomIn.touchstart(Y,ht,q),this._zoomOut.touchstart(Y,ht,q)},Hr.prototype.touchmove=function(Y,ht,q){this._zoomIn.touchmove(Y,ht,q),this._zoomOut.touchmove(Y,ht,q)},Hr.prototype.touchend=function(Y,ht,q){var vt=this,It=this._zoomIn.touchend(Y,ht,q),Vt=this._zoomOut.touchend(Y,ht,q);if(It)return this._active=!0,Y.preventDefault(),setTimeout(function(){return vt.reset()},0),{cameraAnimation:function(se){return se.easeTo({duration:300,zoom:se.getZoom()+1,around:se.unproject(It)},{originalEvent:Y})}};if(Vt)return this._active=!0,Y.preventDefault(),setTimeout(function(){return vt.reset()},0),{cameraAnimation:function(se){return se.easeTo({duration:300,zoom:se.getZoom()-1,around:se.unproject(Vt)},{originalEvent:Y})}}},Hr.prototype.touchcancel=function(){this.reset()},Hr.prototype.enable=function(){this._enabled=!0},Hr.prototype.disable=function(){this._enabled=!1,this.reset()},Hr.prototype.isEnabled=function(){return this._enabled},Hr.prototype.isActive=function(){return this._active};var Kr=0,hn=2,yn={};yn[Kr]=1,yn[hn]=2;function qr(ut,Y){var ht=yn[Y];return ut.buttons===void 0||(ut.buttons&ht)!==ht}var Gn=function(Y){this.reset(),this._clickTolerance=Y.clickTolerance||1};Gn.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Gn.prototype._correctButton=function(Y,ht){return!1},Gn.prototype._move=function(Y,ht){return{}},Gn.prototype.mousedown=function(Y,ht){if(!this._lastPoint){var q=A.mouseButton(Y);this._correctButton(Y,q)&&(this._lastPoint=ht,this._eventButton=q)}},Gn.prototype.mousemoveWindow=function(Y,ht){var q=this._lastPoint;if(q){if(Y.preventDefault(),qr(Y,this._eventButton)){this.reset();return}if(!(!this._moved&&ht.dist(q)<this._clickTolerance))return this._moved=!0,this._lastPoint=ht,this._move(q,ht)}},Gn.prototype.mouseupWindow=function(Y){if(this._lastPoint){var ht=A.mouseButton(Y);ht===this._eventButton&&(this._moved&&A.suppressClick(),this.reset())}},Gn.prototype.enable=function(){this._enabled=!0},Gn.prototype.disable=function(){this._enabled=!1,this.reset()},Gn.prototype.isEnabled=function(){return this._enabled},Gn.prototype.isActive=function(){return this._active};var aa=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.mousedown=function(q,vt){ut.prototype.mousedown.call(this,q,vt),this._lastPoint&&(this._active=!0)},Y.prototype._correctButton=function(q,vt){return vt===Kr&&!q.ctrlKey},Y.prototype._move=function(q,vt){return{around:vt,panDelta:vt.sub(q)}},Y}(Gn),va=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,vt){return vt===Kr&&q.ctrlKey||vt===hn},Y.prototype._move=function(q,vt){var It=.8,Vt=(vt.x-q.x)*It;if(Vt)return this._active=!0,{bearingDelta:Vt}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Gn),ra=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype._correctButton=function(q,vt){return vt===Kr&&q.ctrlKey||vt===hn},Y.prototype._move=function(q,vt){var It=-.5,Vt=(vt.y-q.y)*It;if(Vt)return this._active=!0,{pitchDelta:Vt}},Y.prototype.contextmenu=function(q){q.preventDefault()},Y}(Gn),fa=function(Y){this._minTouches=1,this._clickTolerance=Y.clickTolerance||1,this.reset()};fa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new o.Point(0,0)},fa.prototype.touchstart=function(Y,ht,q){return this._calculateTransform(Y,ht,q)},fa.prototype.touchmove=function(Y,ht,q){if(!(!this._active||q.length<this._minTouches))return Y.preventDefault(),this._calculateTransform(Y,ht,q)},fa.prototype.touchend=function(Y,ht,q){this._calculateTransform(Y,ht,q),this._active&&q.length<this._minTouches&&this.reset()},fa.prototype.touchcancel=function(){this.reset()},fa.prototype._calculateTransform=function(Y,ht,q){q.length>0&&(this._active=!0);var vt=Ue(q,ht),It=new o.Point(0,0),Vt=new o.Point(0,0),se=0;for(var Me in vt){var Fe=vt[Me],$e=this._touches[Me];$e&&(It._add(Fe),Vt._add(Fe.sub($e)),se++,vt[Me]=Fe)}if(this._touches=vt,!(se<this._minTouches||!Vt.mag())){var ur=Vt.div(se);if(this._sum._add(ur),!(this._sum.mag()<this._clickTolerance)){var lr=It.div(se);return{around:lr,panDelta:ur}}}},fa.prototype.enable=function(){this._enabled=!0},fa.prototype.disable=function(){this._enabled=!1,this.reset()},fa.prototype.isEnabled=function(){return this._enabled},fa.prototype.isActive=function(){return this._active};var da=function(){this.reset()};da.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},da.prototype._start=function(Y){},da.prototype._move=function(Y,ht,q){return{}},da.prototype.touchstart=function(Y,ht,q){this._firstTwoTouches||q.length<2||(this._firstTwoTouches=[q[0].identifier,q[1].identifier],this._start([ht[0],ht[1]]))},da.prototype.touchmove=function(Y,ht,q){if(this._firstTwoTouches){Y.preventDefault();var vt=this._firstTwoTouches,It=vt[0],Vt=vt[1],se=Na(q,ht,It),Me=Na(q,ht,Vt);if(!(!se||!Me)){var Fe=this._aroundCenter?null:se.add(Me).div(2);return this._move([se,Me],Fe,Y)}}},da.prototype.touchend=function(Y,ht,q){if(this._firstTwoTouches){var vt=this._firstTwoTouches,It=vt[0],Vt=vt[1],se=Na(q,ht,It),Me=Na(q,ht,Vt);se&&Me||(this._active&&A.suppressClick(),this.reset())}},da.prototype.touchcancel=function(){this.reset()},da.prototype.enable=function(Y){this._enabled=!0,this._aroundCenter=!!Y&&Y.around==="center"},da.prototype.disable=function(){this._enabled=!1,this.reset()},da.prototype.isEnabled=function(){return this._enabled},da.prototype.isActive=function(){return this._active};function Na(ut,Y,ht){for(var q=0;q<ut.length;q++)if(ut[q].identifier===ht)return Y[q]}var Ea=.1;function _a(ut,Y){return Math.log(ut/Y)/Math.LN2}var oi=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ut.prototype.reset.call(this),delete this._distance,delete this._startDistance},Y.prototype._start=function(q){this._startDistance=this._distance=q[0].dist(q[1])},Y.prototype._move=function(q,vt){var It=this._distance;if(this._distance=q[0].dist(q[1]),!(!this._active&&Math.abs(_a(this._distance,this._startDistance))<Ea))return this._active=!0,{zoomDelta:_a(this._distance,It),pinchAround:vt}},Y}(da),Vi=25;function hi(ut,Y){return ut.angleWith(Y)*180/Math.PI}var ea=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ut.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},Y.prototype._start=function(q){this._startVector=this._vector=q[0].sub(q[1]),this._minDiameter=q[0].dist(q[1])},Y.prototype._move=function(q,vt){var It=this._vector;if(this._vector=q[0].sub(q[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:hi(this._vector,It),pinchAround:vt}},Y.prototype._isBelowThreshold=function(q){this._minDiameter=Math.min(this._minDiameter,q.mag());var vt=Math.PI*this._minDiameter,It=Vi/vt*360,Vt=hi(q,this._startVector);return Math.abs(Vt)<It},Y}(da);function Ha(ut){return Math.abs(ut.y)>Math.abs(ut.x)}var Ma=100,Ja=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.reset=function(){ut.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},Y.prototype._start=function(q){this._lastPoints=q,Ha(q[0].sub(q[1]))&&(this._valid=!1)},Y.prototype._move=function(q,vt,It){var Vt=q[0].sub(this._lastPoints[0]),se=q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Vt,se,It.timeStamp),!!this._valid){this._lastPoints=q,this._active=!0;var Me=(Vt.y+se.y)/2,Fe=-.5;return{pitchDelta:Me*Fe}}},Y.prototype.gestureBeginsVertically=function(q,vt,It){if(this._valid!==void 0)return this._valid;var Vt=2,se=q.mag()>=Vt,Me=vt.mag()>=Vt;if(!(!se&&!Me)){if(!se||!Me)return this._firstMove===void 0&&(this._firstMove=It),It-this._firstMove<Ma?void 0:!1;var Fe=q.y>0==vt.y>0;return Ha(q)&&Ha(vt)&&Fe}},Y}(da),Mi={panStep:100,bearingStep:15,pitchStep:10},si=function(){var Y=Mi;this._panStep=Y.panStep,this._bearingStep=Y.bearingStep,this._pitchStep=Y.pitchStep,this._rotationDisabled=!1};si.prototype.reset=function(){this._active=!1},si.prototype.keydown=function(Y){var ht=this;if(!(Y.altKey||Y.ctrlKey||Y.metaKey)){var q=0,vt=0,It=0,Vt=0,se=0;switch(Y.keyCode){case 61:case 107:case 171:case 187:q=1;break;case 189:case 109:case 173:q=-1;break;case 37:Y.shiftKey?vt=-1:(Y.preventDefault(),Vt=-1);break;case 39:Y.shiftKey?vt=1:(Y.preventDefault(),Vt=1);break;case 38:Y.shiftKey?It=1:(Y.preventDefault(),se=-1);break;case 40:Y.shiftKey?It=-1:(Y.preventDefault(),se=1);break;default:return}return this._rotationDisabled&&(vt=0,It=0),{cameraAnimation:function(Me){var Fe=Me.getZoom();Me.easeTo({duration:300,easeId:"keyboardHandler",easing:to,zoom:q?Math.round(Fe)+q*(Y.shiftKey?2:1):Fe,bearing:Me.getBearing()+vt*ht._bearingStep,pitch:Me.getPitch()+It*ht._pitchStep,offset:[-Vt*ht._panStep,-se*ht._panStep],center:Me.getCenter()},{originalEvent:Y})}}}},si.prototype.enable=function(){this._enabled=!0},si.prototype.disable=function(){this._enabled=!1,this.reset()},si.prototype.isEnabled=function(){return this._enabled},si.prototype.isActive=function(){return this._active},si.prototype.disableRotation=function(){this._rotationDisabled=!0},si.prototype.enableRotation=function(){this._rotationDisabled=!1};function to(ut){return ut*(2-ut)}var eo=4.000244140625,io=1/100,Si=1/450,po=2,ca=function(Y,ht){this._map=Y,this._el=Y.getCanvasContainer(),this._handler=ht,this._delta=0,this._defaultZoomRate=io,this._wheelZoomRate=Si,o.bindAll(["_onTimeout"],this)};ca.prototype.setZoomRate=function(Y){this._defaultZoomRate=Y},ca.prototype.setWheelZoomRate=function(Y){this._wheelZoomRate=Y},ca.prototype.isEnabled=function(){return!!this._enabled},ca.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},ca.prototype.isZooming=function(){return!!this._zooming},ca.prototype.enable=function(Y){this.isEnabled()||(this._enabled=!0,this._aroundCenter=Y&&Y.around==="center")},ca.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ca.prototype.wheel=function(Y){if(this.isEnabled()){var ht=Y.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?Y.deltaY*40:Y.deltaY,q=o.browser.now(),vt=q-(this._lastWheelEventTime||0);this._lastWheelEventTime=q,ht!==0&&ht%eo===0?this._type="wheel":ht!==0&&Math.abs(ht)<4?this._type="trackpad":vt>400?(this._type=null,this._lastValue=ht,this._timeout=setTimeout(this._onTimeout,40,Y)):this._type||(this._type=Math.abs(vt*ht)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ht+=this._lastValue)),Y.shiftKey&&ht&&(ht=ht/4),this._type&&(this._lastWheelEvent=Y,this._delta-=ht,this._active||this._start(Y)),Y.preventDefault()}},ca.prototype._onTimeout=function(Y){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(Y)},ca.prototype._start=function(Y){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ht=A.mousePos(this._el,Y);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ht)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},ca.prototype.renderFrame=function(){var Y=this;if(this._frameId&&(this._frameId=null,!!this.isActive())){var ht=this._map.transform;if(this._delta!==0){var q=this._type==="wheel"&&Math.abs(this._delta)>eo?this._wheelZoomRate:this._defaultZoomRate,vt=po/(1+Math.exp(-Math.abs(this._delta*q)));this._delta<0&&vt!==0&&(vt=1/vt);var It=typeof this._targetZoom=="number"?ht.zoomScale(this._targetZoom):ht.scale;this._targetZoom=Math.min(ht.maxZoom,Math.max(ht.minZoom,ht.scaleZoom(It*vt))),this._type==="wheel"&&(this._startZoom=ht.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Vt=typeof this._targetZoom=="number"?this._targetZoom:ht.zoom,se=this._startZoom,Me=this._easing,Fe=!1,$e;if(this._type==="wheel"&&se&&Me){var ur=Math.min((o.browser.now()-this._lastWheelEventTime)/200,1),lr=Me(ur);$e=o.number(se,Vt,lr),ur<1?this._frameId||(this._frameId=!0):Fe=!0}else $e=Vt,Fe=!0;return this._active=!0,Fe&&(this._active=!1,this._finishTimeout=setTimeout(function(){Y._zooming=!1,Y._handler._triggerRenderFrame(),delete Y._targetZoom,delete Y._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Fe,zoomDelta:$e-ht.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},ca.prototype._smoothOutEasing=function(Y){var ht=o.ease;if(this._prevEase){var q=this._prevEase,vt=(o.browser.now()-q.start)/q.duration,It=q.easing(vt+.01)-q.easing(vt),Vt=.27/Math.sqrt(It*It+1e-4)*.01,se=Math.sqrt(.27*.27-Vt*Vt);ht=o.bezier(Vt,se,.25,1)}return this._prevEase={start:o.browser.now(),duration:Y,easing:ht},ht},ca.prototype.reset=function(){this._active=!1};var La=function(Y,ht){this._clickZoom=Y,this._tapZoom=ht};La.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},La.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},La.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},La.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Po=function(){this.reset()};Po.prototype.reset=function(){this._active=!1},Po.prototype.dblclick=function(Y,ht){return Y.preventDefault(),{cameraAnimation:function(q){q.easeTo({duration:300,zoom:q.getZoom()+(Y.shiftKey?-1:1),around:q.unproject(ht)},{originalEvent:Y})}}},Po.prototype.enable=function(){this._enabled=!0},Po.prototype.disable=function(){this._enabled=!1,this.reset()},Po.prototype.isEnabled=function(){return this._enabled},Po.prototype.isActive=function(){return this._active};var _o=function(){this._tap=new zr({numTouches:1,numTaps:1}),this.reset()};_o.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},_o.prototype.touchstart=function(Y,ht,q){this._swipePoint||(this._tapTime&&Y.timeStamp-this._tapTime>Rr&&this.reset(),this._tapTime?q.length>0&&(this._swipePoint=ht[0],this._swipeTouch=q[0].identifier):this._tap.touchstart(Y,ht,q))},_o.prototype.touchmove=function(Y,ht,q){if(!this._tapTime)this._tap.touchmove(Y,ht,q);else if(this._swipePoint){if(q[0].identifier!==this._swipeTouch)return;var vt=ht[0],It=vt.y-this._swipePoint.y;return this._swipePoint=vt,Y.preventDefault(),this._active=!0,{zoomDelta:It/128}}},_o.prototype.touchend=function(Y,ht,q){if(this._tapTime)this._swipePoint&&q.length===0&&this.reset();else{var vt=this._tap.touchend(Y,ht,q);vt&&(this._tapTime=Y.timeStamp)}},_o.prototype.touchcancel=function(){this.reset()},_o.prototype.enable=function(){this._enabled=!0},_o.prototype.disable=function(){this._enabled=!1,this.reset()},_o.prototype.isEnabled=function(){return this._enabled},_o.prototype.isActive=function(){return this._active};var oo=function(Y,ht,q){this._el=Y,this._mousePan=ht,this._touchPan=q};oo.prototype.enable=function(Y){this._inertiaOptions=Y||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},oo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},oo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},oo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var vi=function(Y,ht,q){this._pitchWithRotate=Y.pitchWithRotate,this._mouseRotate=ht,this._mousePitch=q};vi.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},vi.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},vi.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},vi.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var ji=function(Y,ht,q,vt){this._el=Y,this._touchZoom=ht,this._touchRotate=q,this._tapDragZoom=vt,this._rotationDisabled=!1,this._enabled=!0};ji.prototype.enable=function(Y){this._touchZoom.enable(Y),this._rotationDisabled||this._touchRotate.enable(Y),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},ji.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},ji.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},ji.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},ji.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},ji.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Gi=function(ut){return ut.zoom||ut.drag||ut.pitch||ut.rotate},ls=function(ut){function Y(){ut.apply(this,arguments)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y}(o.Event);function Ss(ut){return ut.panDelta&&ut.panDelta.mag()||ut.zoomDelta||ut.bearingDelta||ut.pitchDelta}var Ii=function(Y,ht){this._map=Y,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new st(Y),this._bearingSnap=ht.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ht),o.bindAll(["handleEvent","handleWindowEvent"],this);var q=this._el;this._listeners=[[q,"touchstart",{passive:!0}],[q,"touchmove",{passive:!1}],[q,"touchend",void 0],[q,"touchcancel",void 0],[q,"mousedown",void 0],[q,"mousemove",void 0],[q,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[q,"mouseover",void 0],[q,"mouseout",void 0],[q,"dblclick",void 0],[q,"click",void 0],[q,"keydown",{capture:!1}],[q,"keyup",void 0],[q,"wheel",{passive:!1}],[q,"contextmenu",void 0],[o.window,"blur",void 0]];for(var vt=0,It=this._listeners;vt<It.length;vt+=1){var Vt=It[vt],se=Vt[0],Me=Vt[1],Fe=Vt[2];A.addEventListener(se,Me,se===o.window.document?this.handleWindowEvent:this.handleEvent,Fe)}};Ii.prototype.destroy=function(){for(var Y=0,ht=this._listeners;Y<ht.length;Y+=1){var q=ht[Y],vt=q[0],It=q[1],Vt=q[2];A.removeEventListener(vt,It,vt===o.window.document?this.handleWindowEvent:this.handleEvent,Vt)}},Ii.prototype._addDefaultHandlers=function(Y){var ht=this._map,q=ht.getCanvasContainer();this._add("mapEvent",new Ce(ht,Y));var vt=ht.boxZoom=new Oe(ht,Y);this._add("boxZoom",vt);var It=new Hr,Vt=new Po;ht.doubleClickZoom=new La(Vt,It),this._add("tapZoom",It),this._add("clickZoom",Vt);var se=new _o;this._add("tapDragZoom",se);var Me=ht.touchPitch=new Ja;this._add("touchPitch",Me);var Fe=new va(Y),$e=new ra(Y);ht.dragRotate=new vi(Y,Fe,$e),this._add("mouseRotate",Fe,["mousePitch"]),this._add("mousePitch",$e,["mouseRotate"]);var ur=new aa(Y),lr=new fa(Y);ht.dragPan=new oo(q,ur,lr),this._add("mousePan",ur),this._add("touchPan",lr,["touchZoom","touchRotate"]);var Fr=new ea,jr=new oi;ht.touchZoomRotate=new ji(q,jr,Fr,se),this._add("touchRotate",Fr,["touchPan","touchZoom"]),this._add("touchZoom",jr,["touchPan","touchRotate"]);var Zr=ht.scrollZoom=new ca(ht,this);this._add("scrollZoom",Zr,["mousePan"]);var Wr=ht.keyboard=new si;this._add("keyboard",Wr),this._add("blockableMapEvent",new be(ht));for(var Jr=0,dn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Jr<dn.length;Jr+=1){var kn=dn[Jr];Y.interactive&&Y[kn]&&ht[kn].enable(Y[kn])}},Ii.prototype._add=function(Y,ht,q){this._handlers.push({handlerName:Y,handler:ht,allowed:q}),this._handlersById[Y]=ht},Ii.prototype.stop=function(Y){if(!this._updatingCamera){for(var ht=0,q=this._handlers;ht<q.length;ht+=1){var vt=q[ht],It=vt.handler;It.reset()}this._inertia.clear(),this._fireEvents({},{},Y),this._changes=[]}},Ii.prototype.isActive=function(){for(var Y=0,ht=this._handlers;Y<ht.length;Y+=1){var q=ht[Y],vt=q.handler;if(vt.isActive())return!0}return!1},Ii.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Ii.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Ii.prototype.isMoving=function(){return!!Gi(this._eventsInProgress)||this.isZooming()},Ii.prototype._blockedByActive=function(Y,ht,q){for(var vt in Y)if(vt!==q&&(!ht||ht.indexOf(vt)<0))return!0;return!1},Ii.prototype.handleWindowEvent=function(Y){this.handleEvent(Y,Y.type+"Window")},Ii.prototype._getMapTouches=function(Y){for(var ht=[],q=0,vt=Y;q<vt.length;q+=1){var It=vt[q],Vt=It.target;this._el.contains(Vt)&&ht.push(It)}return ht},Ii.prototype.handleEvent=function(Y,ht){if(Y.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;for(var q=Y.type==="renderFrame"?void 0:Y,vt={needsRenderFrame:!1},It={},Vt={},se=Y.touches?this._getMapTouches(Y.touches):void 0,Me=se?A.touchPos(this._el,se):A.mousePos(this._el,Y),Fe=0,$e=this._handlers;Fe<$e.length;Fe+=1){var ur=$e[Fe],lr=ur.handlerName,Fr=ur.handler,jr=ur.allowed;if(Fr.isEnabled()){var Zr=void 0;this._blockedByActive(Vt,jr,lr)?Fr.reset():Fr[ht||Y.type]&&(Zr=Fr[ht||Y.type](Y,Me,se),this.mergeHandlerResult(vt,It,Zr,lr,q),Zr&&Zr.needsRenderFrame&&this._triggerRenderFrame()),(Zr||Fr.isActive())&&(Vt[lr]=Fr)}}var Wr={};for(var Jr in this._previousActiveHandlers)Vt[Jr]||(Wr[Jr]=q);this._previousActiveHandlers=Vt,(Object.keys(Wr).length||Ss(vt))&&(this._changes.push([vt,It,Wr]),this._triggerRenderFrame()),(Object.keys(Vt).length||Ss(vt))&&this._map._stop(!0),this._updatingCamera=!1;var dn=vt.cameraAnimation;dn&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],dn(this._map))},Ii.prototype.mergeHandlerResult=function(Y,ht,q,vt,It){if(q){o.extend(Y,q);var Vt={handlerName:vt,originalEvent:q.originalEvent||It};q.zoomDelta!==void 0&&(ht.zoom=Vt),q.panDelta!==void 0&&(ht.drag=Vt),q.pitchDelta!==void 0&&(ht.pitch=Vt),q.bearingDelta!==void 0&&(ht.rotate=Vt)}},Ii.prototype._applyChanges=function(){for(var Y={},ht={},q={},vt=0,It=this._changes;vt<It.length;vt+=1){var Vt=It[vt],se=Vt[0],Me=Vt[1],Fe=Vt[2];se.panDelta&&(Y.panDelta=(Y.panDelta||new o.Point(0,0))._add(se.panDelta)),se.zoomDelta&&(Y.zoomDelta=(Y.zoomDelta||0)+se.zoomDelta),se.bearingDelta&&(Y.bearingDelta=(Y.bearingDelta||0)+se.bearingDelta),se.pitchDelta&&(Y.pitchDelta=(Y.pitchDelta||0)+se.pitchDelta),se.around!==void 0&&(Y.around=se.around),se.pinchAround!==void 0&&(Y.pinchAround=se.pinchAround),se.noInertia&&(Y.noInertia=se.noInertia),o.extend(ht,Me),o.extend(q,Fe)}this._updateMapTransform(Y,ht,q),this._changes=[]},Ii.prototype._updateMapTransform=function(Y,ht,q){var vt=this._map,It=vt.transform;if(!Ss(Y))return this._fireEvents(ht,q,!0);var Vt=Y.panDelta,se=Y.zoomDelta,Me=Y.bearingDelta,Fe=Y.pitchDelta,$e=Y.around,ur=Y.pinchAround;ur!==void 0&&($e=ur),vt._stop(!0),$e=$e||vt.transform.centerPoint;var lr=It.pointLocation(Vt?$e.sub(Vt):$e);Me&&(It.bearing+=Me),Fe&&(It.pitch+=Fe),se&&(It.zoom+=se),It.setLocationAtPoint(lr,$e),this._map._update(),Y.noInertia||this._inertia.record(Y),this._fireEvents(ht,q,!0)},Ii.prototype._fireEvents=function(Y,ht,q){var vt=this,It=Gi(this._eventsInProgress),Vt=Gi(Y),se={};for(var Me in Y){var Fe=Y[Me],$e=Fe.originalEvent;this._eventsInProgress[Me]||(se[Me+"start"]=$e),this._eventsInProgress[Me]=Y[Me]}!It&&Vt&&this._fireEvent("movestart",Vt.originalEvent);for(var ur in se)this._fireEvent(ur,se[ur]);Vt&&this._fireEvent("move",Vt.originalEvent);for(var lr in Y){var Fr=Y[lr],jr=Fr.originalEvent;this._fireEvent(lr,jr)}var Zr={},Wr;for(var Jr in this._eventsInProgress){var dn=this._eventsInProgress[Jr],kn=dn.handlerName,Hn=dn.originalEvent;this._handlersById[kn].isActive()||(delete this._eventsInProgress[Jr],Wr=ht[kn]||Hn,Zr[Jr+"end"]=Wr)}for(var Kn in Zr)this._fireEvent(Kn,Zr[Kn]);var Qn=Gi(this._eventsInProgress);if(q&&(It||Vt)&&!Qn){this._updatingCamera=!0;var Xn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qn=function(oa){return oa!==0&&-vt._bearingSnap<oa&&oa<vt._bearingSnap};Xn?(qn(Xn.bearing||this._map.getBearing())&&(Xn.bearing=0),this._map.easeTo(Xn,{originalEvent:Wr})):(this._map.fire(new o.Event("moveend",{originalEvent:Wr})),qn(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Ii.prototype._fireEvent=function(Y,ht){this._map.fire(new o.Event(Y,ht?{originalEvent:ht}:{}))},Ii.prototype._requestFrame=function(){var Y=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(ht){delete Y._frameId,Y.handleEvent(new ls("renderFrame",{timeStamp:ht})),Y._applyChanges()})},Ii.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Sl=function(ut){function Y(ht,q){ut.call(this),this._moving=!1,this._zooming=!1,this.transform=ht,this._bearingSnap=q.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.getCenter=function(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)},Y.prototype.setCenter=function(q,vt){return this.jumpTo({center:q},vt)},Y.prototype.panBy=function(q,vt,It){return q=o.Point.convert(q).mult(-1),this.panTo(this.transform.center,o.extend({offset:q},vt),It)},Y.prototype.panTo=function(q,vt,It){return this.easeTo(o.extend({center:q},vt),It)},Y.prototype.getZoom=function(){return this.transform.zoom},Y.prototype.setZoom=function(q,vt){return this.jumpTo({zoom:q},vt),this},Y.prototype.zoomTo=function(q,vt,It){return this.easeTo(o.extend({zoom:q},vt),It)},Y.prototype.zoomIn=function(q,vt){return this.zoomTo(this.getZoom()+1,q,vt),this},Y.prototype.zoomOut=function(q,vt){return this.zoomTo(this.getZoom()-1,q,vt),this},Y.prototype.getBearing=function(){return this.transform.bearing},Y.prototype.setBearing=function(q,vt){return this.jumpTo({bearing:q},vt),this},Y.prototype.getPadding=function(){return this.transform.padding},Y.prototype.setPadding=function(q,vt){return this.jumpTo({padding:q},vt),this},Y.prototype.rotateTo=function(q,vt,It){return this.easeTo(o.extend({bearing:q},vt),It)},Y.prototype.resetNorth=function(q,vt){return this.rotateTo(0,o.extend({duration:1e3},q),vt),this},Y.prototype.resetNorthPitch=function(q,vt){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},q),vt),this},Y.prototype.snapToNorth=function(q,vt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(q,vt):this},Y.prototype.getPitch=function(){return this.transform.pitch},Y.prototype.setPitch=function(q,vt){return this.jumpTo({pitch:q},vt),this},Y.prototype.cameraForBounds=function(q,vt){q=o.LngLatBounds.convert(q);var It=vt&&vt.bearing||0;return this._cameraForBoxAndBearing(q.getNorthWest(),q.getSouthEast(),It,vt)},Y.prototype._cameraForBoxAndBearing=function(q,vt,It,Vt){var se={top:0,bottom:0,right:0,left:0};if(Vt=o.extend({padding:se,offset:[0,0],maxZoom:this.transform.maxZoom},Vt),typeof Vt.padding=="number"){var Me=Vt.padding;Vt.padding={top:Me,bottom:Me,right:Me,left:Me}}Vt.padding=o.extend(se,Vt.padding);var Fe=this.transform,$e=Fe.padding,ur=Fe.project(o.LngLat.convert(q)),lr=Fe.project(o.LngLat.convert(vt)),Fr=ur.rotate(-It*Math.PI/180),jr=lr.rotate(-It*Math.PI/180),Zr=new o.Point(Math.max(Fr.x,jr.x),Math.max(Fr.y,jr.y)),Wr=new o.Point(Math.min(Fr.x,jr.x),Math.min(Fr.y,jr.y)),Jr=Zr.sub(Wr),dn=(Fe.width-($e.left+$e.right+Vt.padding.left+Vt.padding.right))/Jr.x,kn=(Fe.height-($e.top+$e.bottom+Vt.padding.top+Vt.padding.bottom))/Jr.y;if(kn<0||dn<0){o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Hn=Math.min(Fe.scaleZoom(Fe.scale*Math.min(dn,kn)),Vt.maxZoom),Kn=typeof Vt.offset.x=="number"?new o.Point(Vt.offset.x,Vt.offset.y):o.Point.convert(Vt.offset),Qn=(Vt.padding.left-Vt.padding.right)/2,Xn=(Vt.padding.top-Vt.padding.bottom)/2,qn=new o.Point(Qn,Xn),oa=qn.rotate(It*Math.PI/180),ha=Kn.add(oa),xa=ha.mult(Fe.scale/Fe.zoomScale(Hn)),ga=Fe.unproject(ur.add(lr).div(2).sub(xa));return{center:ga,zoom:Hn,bearing:It}},Y.prototype.fitBounds=function(q,vt,It){return this._fitInternal(this.cameraForBounds(q,vt),vt,It)},Y.prototype.fitScreenCoordinates=function(q,vt,It,Vt,se){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.Point.convert(q)),this.transform.pointLocation(o.Point.convert(vt)),It,Vt),Vt,se)},Y.prototype._fitInternal=function(q,vt,It){return q?(vt=o.extend(q,vt),delete vt.padding,vt.linear?this.easeTo(vt,It):this.flyTo(vt,It)):this},Y.prototype.jumpTo=function(q,vt){this.stop();var It=this.transform,Vt=!1,se=!1,Me=!1;return"zoom"in q&&It.zoom!==+q.zoom&&(Vt=!0,It.zoom=+q.zoom),q.center!==void 0&&(It.center=o.LngLat.convert(q.center)),"bearing"in q&&It.bearing!==+q.bearing&&(se=!0,It.bearing=+q.bearing),"pitch"in q&&It.pitch!==+q.pitch&&(Me=!0,It.pitch=+q.pitch),q.padding!=null&&!It.isPaddingEqual(q.padding)&&(It.padding=q.padding),this.fire(new o.Event("movestart",vt)).fire(new o.Event("move",vt)),Vt&&this.fire(new o.Event("zoomstart",vt)).fire(new o.Event("zoom",vt)).fire(new o.Event("zoomend",vt)),se&&this.fire(new o.Event("rotatestart",vt)).fire(new o.Event("rotate",vt)).fire(new o.Event("rotateend",vt)),Me&&this.fire(new o.Event("pitchstart",vt)).fire(new o.Event("pitch",vt)).fire(new o.Event("pitchend",vt)),this.fire(new o.Event("moveend",vt))},Y.prototype.easeTo=function(q,vt){var It=this;this._stop(!1,q.easeId),q=o.extend({offset:[0,0],duration:500,easing:o.ease},q),(q.animate===!1||!q.essential&&o.browser.prefersReducedMotion)&&(q.duration=0);var Vt=this.transform,se=this.getZoom(),Me=this.getBearing(),Fe=this.getPitch(),$e=this.getPadding(),ur="zoom"in q?+q.zoom:se,lr="bearing"in q?this._normalizeBearing(q.bearing,Me):Me,Fr="pitch"in q?+q.pitch:Fe,jr="padding"in q?q.padding:Vt.padding,Zr=o.Point.convert(q.offset),Wr=Vt.centerPoint.add(Zr),Jr=Vt.pointLocation(Wr),dn=o.LngLat.convert(q.center||Jr);this._normalizeCenter(dn);var kn=Vt.project(Jr),Hn=Vt.project(dn).sub(kn),Kn=Vt.zoomScale(ur-se),Qn,Xn;q.around&&(Qn=o.LngLat.convert(q.around),Xn=Vt.locationPoint(Qn));var qn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ur!==se,this._rotating=this._rotating||Me!==lr,this._pitching=this._pitching||Fr!==Fe,this._padding=!Vt.isPaddingEqual(jr),this._easeId=q.easeId,this._prepareEase(vt,q.noMoveStart,qn),this._ease(function(oa){if(It._zooming&&(Vt.zoom=o.number(se,ur,oa)),It._rotating&&(Vt.bearing=o.number(Me,lr,oa)),It._pitching&&(Vt.pitch=o.number(Fe,Fr,oa)),It._padding&&(Vt.interpolatePadding($e,jr,oa),Wr=Vt.centerPoint.add(Zr)),Qn)Vt.setLocationAtPoint(Qn,Xn);else{var ha=Vt.zoomScale(Vt.zoom-se),xa=ur>se?Math.min(2,Kn):Math.max(.5,Kn),ga=Math.pow(xa,1-oa),Fa=Vt.unproject(kn.add(Hn.mult(oa*ga)).mult(ha));Vt.setLocationAtPoint(Vt.renderWorldCopies?Fa.wrap():Fa,Wr)}It._fireMoveEvents(vt)},function(oa){It._afterEase(vt,oa)},q),this},Y.prototype._prepareEase=function(q,vt,It){It===void 0&&(It={}),this._moving=!0,!vt&&!It.moving&&this.fire(new o.Event("movestart",q)),this._zooming&&!It.zooming&&this.fire(new o.Event("zoomstart",q)),this._rotating&&!It.rotating&&this.fire(new o.Event("rotatestart",q)),this._pitching&&!It.pitching&&this.fire(new o.Event("pitchstart",q))},Y.prototype._fireMoveEvents=function(q){this.fire(new o.Event("move",q)),this._zooming&&this.fire(new o.Event("zoom",q)),this._rotating&&this.fire(new o.Event("rotate",q)),this._pitching&&this.fire(new o.Event("pitch",q))},Y.prototype._afterEase=function(q,vt){if(!(this._easeId&&vt&&this._easeId===vt)){delete this._easeId;var It=this._zooming,Vt=this._rotating,se=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,It&&this.fire(new o.Event("zoomend",q)),Vt&&this.fire(new o.Event("rotateend",q)),se&&this.fire(new o.Event("pitchend",q)),this.fire(new o.Event("moveend",q))}},Y.prototype.flyTo=function(q,vt){var It=this;if(!q.essential&&o.browser.prefersReducedMotion){var Vt=o.pick(q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Vt,vt)}this.stop(),q=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},q);var se=this.transform,Me=this.getZoom(),Fe=this.getBearing(),$e=this.getPitch(),ur=this.getPadding(),lr="zoom"in q?o.clamp(+q.zoom,se.minZoom,se.maxZoom):Me,Fr="bearing"in q?this._normalizeBearing(q.bearing,Fe):Fe,jr="pitch"in q?+q.pitch:$e,Zr="padding"in q?q.padding:se.padding,Wr=se.zoomScale(lr-Me),Jr=o.Point.convert(q.offset),dn=se.centerPoint.add(Jr),kn=se.pointLocation(dn),Hn=o.LngLat.convert(q.center||kn);this._normalizeCenter(Hn);var Kn=se.project(kn),Qn=se.project(Hn).sub(Kn),Xn=q.curve,qn=Math.max(se.width,se.height),oa=qn/Wr,ha=Qn.mag();if("minZoom"in q){var xa=o.clamp(Math.min(q.minZoom,Me,lr),se.minZoom,se.maxZoom),ga=qn/se.zoomScale(xa-Me);Xn=Math.sqrt(ga/ha*2)}var Fa=Xn*Xn;function ti(Wa){var ei=(oa*oa-qn*qn+(Wa?-1:1)*Fa*Fa*ha*ha)/(2*(Wa?oa:qn)*Fa*ha);return Math.log(Math.sqrt(ei*ei+1)-ei)}function Za(Wa){return(Math.exp(Wa)-Math.exp(-Wa))/2}function Sa(Wa){return(Math.exp(Wa)+Math.exp(-Wa))/2}function ja(Wa){return Za(Wa)/Sa(Wa)}var Ga=ti(0),li=function(Wa){return Sa(Ga)/Sa(Ga+Xn*Wa)},ai=function(Wa){return qn*((Sa(Ga)*ja(Ga+Xn*Wa)-Za(Ga))/Fa)/ha},Ei=(ti(1)-Ga)/Xn;if(Math.abs(ha)<1e-6||!isFinite(Ei)){if(Math.abs(qn-oa)<1e-6)return this.easeTo(q,vt);var $a=oa<qn?-1:1;Ei=Math.abs(Math.log(oa/qn))/Xn,ai=function(){return 0},li=function(Wa){return Math.exp($a*Xn*Wa)}}if("duration"in q)q.duration=+q.duration;else{var wi="screenSpeed"in q?+q.screenSpeed/Xn:+q.speed;q.duration=1e3*Ei/wi}return q.maxDuration&&q.duration>q.maxDuration&&(q.duration=0),this._zooming=!0,this._rotating=Fe!==Fr,this._pitching=jr!==$e,this._padding=!se.isPaddingEqual(Zr),this._prepareEase(vt,!1),this._ease(function(Wa){var ei=Wa*Ei,Wi=1/li(ei);se.zoom=Wa===1?lr:Me+se.scaleZoom(Wi),It._rotating&&(se.bearing=o.number(Fe,Fr,Wa)),It._pitching&&(se.pitch=o.number($e,jr,Wa)),It._padding&&(se.interpolatePadding(ur,Zr,Wa),dn=se.centerPoint.add(Jr));var go=Wa===1?Hn:se.unproject(Kn.add(Qn.mult(ai(ei))).mult(Wi));se.setLocationAtPoint(se.renderWorldCopies?go.wrap():go,dn),It._fireMoveEvents(vt)},function(){return It._afterEase(vt)},q),this},Y.prototype.isEasing=function(){return!!this._easeFrameId},Y.prototype.stop=function(){return this._stop()},Y.prototype._stop=function(q,vt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var It=this._onEaseEnd;delete this._onEaseEnd,It.call(this,vt)}if(!q){var Vt=this.handlers;Vt&&Vt.stop(!1)}return this},Y.prototype._ease=function(q,vt,It){It.animate===!1||It.duration===0?(q(1),vt()):(this._easeStart=o.browser.now(),this._easeOptions=It,this._onEaseFrame=q,this._onEaseEnd=vt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},Y.prototype._renderFrameCallback=function(){var q=Math.min((o.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(q)),q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},Y.prototype._normalizeBearing=function(q,vt){q=o.wrap(q,-180,180);var It=Math.abs(q-vt);return Math.abs(q-360-vt)<It&&(q-=360),Math.abs(q+360-vt)<It&&(q+=360),q},Y.prototype._normalizeCenter=function(q){var vt=this.transform;if(!(!vt.renderWorldCopies||vt.lngRange)){var It=q.lng-vt.center.lng;q.lng+=It>180?-360:It<-180?360:0}},Y}(o.Evented),Qa=function(Y){Y===void 0&&(Y={}),this.options=Y,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Qa.prototype.getDefaultPosition=function(){return"bottom-right"},Qa.prototype.onAdd=function(Y){var ht=this.options&&this.options.compact;return this._map=Y,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=A.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=A.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),ht&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ht===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Qa.prototype.onRemove=function(){A.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Qa.prototype._setElementTitle=function(Y,ht){var q=this._map._getUIString("AttributionControl."+ht);Y.title=q,Y.setAttribute("aria-label",q)},Qa.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Qa.prototype._updateEditLink=function(){var Y=this._editLink;Y||(Y=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ht=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(Y){var q=ht.reduce(function(vt,It,Vt){return It.value&&(vt+=It.key+"="+It.value+(Vt<ht.length-1?"&":"")),vt},"?");Y.href=o.config.FEEDBACK_URL+"/"+q+(this._map._hash?this._map._hash.getHashString(!0):""),Y.rel="noopener nofollow",this._setElementTitle(Y,"MapFeedback")}},Qa.prototype._updateData=function(Y){Y&&(Y.sourceDataType==="metadata"||Y.sourceDataType==="visibility"||Y.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Qa.prototype._updateAttributions=function(){if(this._map.style){var Y=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?Y=Y.concat(this.options.customAttribution.map(function(Me){return typeof Me!="string"?"":Me})):typeof this.options.customAttribution=="string"&&Y.push(this.options.customAttribution)),this._map.style.stylesheet){var ht=this._map.style.stylesheet;this.styleOwner=ht.owner,this.styleId=ht.id}var q=this._map.style.sourceCaches;for(var vt in q){var It=q[vt];if(It.used){var Vt=It.getSource();Vt.attribution&&Y.indexOf(Vt.attribution)<0&&Y.push(Vt.attribution)}}Y.sort(function(Me,Fe){return Me.length-Fe.length}),Y=Y.filter(function(Me,Fe){for(var $e=Fe+1;$e<Y.length;$e++)if(Y[$e].indexOf(Me)>=0)return!1;return!0});var se=Y.join(" | ");se!==this._attribHTML&&(this._attribHTML=se,Y.length?(this._innerContainer.innerHTML=se,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Qa.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var ki=function(){o.bindAll(["_updateLogo"],this),o.bindAll(["_updateCompact"],this)};ki.prototype.onAdd=function(Y){this._map=Y,this._container=A.create("div","mapboxgl-ctrl");var ht=A.create("a","mapboxgl-ctrl-logo");return ht.target="_blank",ht.rel="noopener nofollow",ht.href="https://www.mapbox.com/",ht.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ht.setAttribute("rel","noopener nofollow"),this._container.appendChild(ht),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},ki.prototype.onRemove=function(){A.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},ki.prototype.getDefaultPosition=function(){return"bottom-left"},ki.prototype._updateLogo=function(Y){(!Y||Y.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},ki.prototype._logoRequired=function(){if(this._map.style){var Y=this._map.style.sourceCaches;for(var ht in Y){var q=Y[ht].getSource();if(q.mapbox_logo)return!0}return!1}},ki.prototype._updateCompact=function(){var Y=this._container.children;if(Y.length){var ht=Y[0];this._map.getCanvasContainer().offsetWidth<250?ht.classList.add("mapboxgl-compact"):ht.classList.remove("mapboxgl-compact")}};var fc=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};fc.prototype.add=function(Y){var ht=++this._id,q=this._queue;return q.push({callback:Y,id:ht,cancelled:!1}),ht},fc.prototype.remove=function(Y){for(var ht=this._currentlyRunning,q=ht?this._queue.concat(ht):this._queue,vt=0,It=q;vt<It.length;vt+=1){var Vt=It[vt];if(Vt.id===Y){Vt.cancelled=!0;return}}},fc.prototype.run=function(Y){Y===void 0&&(Y=0);var ht=this._currentlyRunning=this._queue;this._queue=[];for(var q=0,vt=ht;q<vt.length;q+=1){var It=vt[q];if(!It.cancelled&&(It.callback(Y),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},fc.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Dh={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ku=o.window.HTMLImageElement,eh=o.window.HTMLElement,Su=o.window.ImageBitmap,Cf=-2,Lf=22,jo=0,Eu=60,rh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Cf,maxZoom:Lf,minPitch:jo,maxPitch:Eu,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},nh=function(ut){function Y(q){var vt=this;if(q=o.extend({},rh,q),q.minZoom!=null&&q.maxZoom!=null&&q.minZoom>q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(q.minPitch!=null&&q.maxPitch!=null&&q.minPitch>q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(q.minPitch!=null&&q.minPitch<jo)throw new Error("minPitch must be greater than or equal to "+jo);if(q.maxPitch!=null&&q.maxPitch>Eu)throw new Error("maxPitch must be less than or equal to "+Eu);var It=new In(q.minZoom,q.maxZoom,q.minPitch,q.maxPitch,q.renderWorldCopies);if(ut.call(this,It,q),this._interactive=q.interactive,this._maxTileCacheSize=q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=q.preserveDrawingBuffer,this._antialias=q.antialias,this._trackResize=q.trackResize,this._bearingSnap=q.bearingSnap,this._refreshExpiredTiles=q.refreshExpiredTiles,this._fadeDuration=q.fadeDuration,this._crossSourceCollisions=q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=q.collectResourceTiming,this._renderTaskQueue=new fc,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Dh,q.locale),this._clickTolerance=q.clickTolerance,this._requestManager=new o.RequestManager(q.transformRequest,q.accessToken),typeof q.container=="string"){if(this._container=o.window.document.getElementById(q.container),!this._container)throw new Error("Container '"+q.container+"' not found.")}else if(q.container instanceof eh)this._container=q.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(q.maxBounds&&this.setMaxBounds(q.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return vt._update(!1)}),this.on("moveend",function(){return vt._update(!1)}),this.on("zoom",function(){return vt._update(!0)}),typeof o.window<"u"&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ii(this,q);var Vt=typeof q.hash=="string"&&q.hash||void 0;this._hash=q.hash&&new Ia(Vt).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:q.center,zoom:q.zoom,bearing:q.bearing,pitch:q.pitch}),q.bounds&&(this.resize(),this.fitBounds(q.bounds,o.extend({},q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=q.localIdeographFontFamily,q.style&&this.setStyle(q.style,{localIdeographFontFamily:q.localIdeographFontFamily}),q.attributionControl&&this.addControl(new Qa({customAttribution:q.customAttribution})),this.addControl(new ki,q.logoPosition),this.on("style.load",function(){vt.transform.unmodified&&vt.jumpTo(vt.style.stylesheet)}),this.on("data",function(se){vt._update(se.dataType==="style"),vt.fire(new o.Event(se.dataType+"data",se))}),this.on("dataloading",function(se){vt.fire(new o.Event(se.dataType+"dataloading",se))})}ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y;var ht={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return Y.prototype._getMapId=function(){return this._mapId},Y.prototype.addControl=function(vt,It){if(It===void 0&&(vt.getDefaultPosition?It=vt.getDefaultPosition():It="top-right"),!vt||!vt.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Vt=vt.onAdd(this);this._controls.push(vt);var se=this._controlPositions[It];return It.indexOf("bottom")!==-1?se.insertBefore(Vt,se.firstChild):se.appendChild(Vt),this},Y.prototype.removeControl=function(vt){if(!vt||!vt.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var It=this._controls.indexOf(vt);return It>-1&&this._controls.splice(It,1),vt.onRemove(this),this},Y.prototype.hasControl=function(vt){return this._controls.indexOf(vt)>-1},Y.prototype.resize=function(vt){var It=this._containerDimensions(),Vt=It[0],se=It[1];this._resizeCanvas(Vt,se),this.transform.resize(Vt,se),this.painter.resize(Vt,se);var Me=!this._moving;return Me&&(this.stop(),this.fire(new o.Event("movestart",vt)).fire(new o.Event("move",vt))),this.fire(new o.Event("resize",vt)),Me&&this.fire(new o.Event("moveend",vt)),this},Y.prototype.getBounds=function(){return this.transform.getBounds()},Y.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},Y.prototype.setMaxBounds=function(vt){return this.transform.setMaxBounds(o.LngLatBounds.convert(vt)),this._update()},Y.prototype.setMinZoom=function(vt){if(vt=vt??Cf,vt>=Cf&&vt<=this.transform.maxZoom)return this.transform.minZoom=vt,this._update(),this.getZoom()<vt&&this.setZoom(vt),this;throw new Error("minZoom must be between "+Cf+" and the current maxZoom, inclusive")},Y.prototype.getMinZoom=function(){return this.transform.minZoom},Y.prototype.setMaxZoom=function(vt){if(vt=vt??Lf,vt>=this.transform.minZoom)return this.transform.maxZoom=vt,this._update(),this.getZoom()>vt&&this.setZoom(vt),this;throw new Error("maxZoom must be greater than the current minZoom")},Y.prototype.getMaxZoom=function(){return this.transform.maxZoom},Y.prototype.setMinPitch=function(vt){if(vt=vt??jo,vt<jo)throw new Error("minPitch must be greater than or equal to "+jo);if(vt>=jo&&vt<=this.transform.maxPitch)return this.transform.minPitch=vt,this._update(),this.getPitch()<vt&&this.setPitch(vt),this;throw new Error("minPitch must be between "+jo+" and the current maxPitch, inclusive")},Y.prototype.getMinPitch=function(){return this.transform.minPitch},Y.prototype.setMaxPitch=function(vt){if(vt=vt??Eu,vt>Eu)throw new Error("maxPitch must be less than or equal to "+Eu);if(vt>=this.transform.minPitch)return this.transform.maxPitch=vt,this._update(),this.getPitch()>vt&&this.setPitch(vt),this;throw new Error("maxPitch must be greater than the current minPitch")},Y.prototype.getMaxPitch=function(){return this.transform.maxPitch},Y.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},Y.prototype.setRenderWorldCopies=function(vt){return this.transform.renderWorldCopies=vt,this._update()},Y.prototype.project=function(vt){return this.transform.locationPoint(o.LngLat.convert(vt))},Y.prototype.unproject=function(vt){return this.transform.pointLocation(o.Point.convert(vt))},Y.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},Y.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},Y.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},Y.prototype._createDelegatedListener=function(vt,It,Vt){var se=this,Me;if(vt==="mouseenter"||vt==="mouseover"){var Fe=!1,$e=function(Wr){var Jr=se.getLayer(It)?se.queryRenderedFeatures(Wr.point,{layers:[It]}):[];Jr.length?Fe||(Fe=!0,Vt.call(se,new Kt(vt,se,Wr.originalEvent,{features:Jr}))):Fe=!1},ur=function(){Fe=!1};return{layer:It,listener:Vt,delegates:{mousemove:$e,mouseout:ur}}}else if(vt==="mouseleave"||vt==="mouseout"){var lr=!1,Fr=function(Wr){var Jr=se.getLayer(It)?se.queryRenderedFeatures(Wr.point,{layers:[It]}):[];Jr.length?lr=!0:lr&&(lr=!1,Vt.call(se,new Kt(vt,se,Wr.originalEvent)))},jr=function(Wr){lr&&(lr=!1,Vt.call(se,new Kt(vt,se,Wr.originalEvent)))};return{layer:It,listener:Vt,delegates:{mousemove:Fr,mouseout:jr}}}else{var Zr=function(Wr){var Jr=se.getLayer(It)?se.queryRenderedFeatures(Wr.point,{layers:[It]}):[];Jr.length&&(Wr.features=Jr,Vt.call(se,Wr),delete Wr.features)};return{layer:It,listener:Vt,delegates:(Me={},Me[vt]=Zr,Me)}}},Y.prototype.on=function(vt,It,Vt){if(Vt===void 0)return ut.prototype.on.call(this,vt,It);var se=this._createDelegatedListener(vt,It,Vt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[vt]=this._delegatedListeners[vt]||[],this._delegatedListeners[vt].push(se);for(var Me in se.delegates)this.on(Me,se.delegates[Me]);return this},Y.prototype.once=function(vt,It,Vt){if(Vt===void 0)return ut.prototype.once.call(this,vt,It);var se=this._createDelegatedListener(vt,It,Vt);for(var Me in se.delegates)this.once(Me,se.delegates[Me]);return this},Y.prototype.off=function(vt,It,Vt){var se=this;if(Vt===void 0)return ut.prototype.off.call(this,vt,It);var Me=function(Fe){for(var $e=Fe[vt],ur=0;ur<$e.length;ur++){var lr=$e[ur];if(lr.layer===It&&lr.listener===Vt){for(var Fr in lr.delegates)se.off(Fr,lr.delegates[Fr]);return $e.splice(ur,1),se}}};return this._delegatedListeners&&this._delegatedListeners[vt]&&Me(this._delegatedListeners),this},Y.prototype.queryRenderedFeatures=function(vt,It){if(!this.style)return[];It===void 0&&vt!==void 0&&!(vt instanceof o.Point)&&!Array.isArray(vt)&&(It=vt,vt=void 0),It=It||{},vt=vt||[[0,0],[this.transform.width,this.transform.height]];var Vt;if(vt instanceof o.Point||typeof vt[0]=="number")Vt=[o.Point.convert(vt)];else{var se=o.Point.convert(vt[0]),Me=o.Point.convert(vt[1]);Vt=[se,new o.Point(Me.x,se.y),Me,new o.Point(se.x,Me.y),se]}return this.style.queryRenderedFeatures(Vt,It,this.transform)},Y.prototype.querySourceFeatures=function(vt,It){return this.style.querySourceFeatures(vt,It)},Y.prototype.setStyle=function(vt,It){return It=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},It),It.diff!==!1&&It.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&vt?(this._diffStyle(vt,It),this):(this._localIdeographFontFamily=It.localIdeographFontFamily,this._updateStyle(vt,It))},Y.prototype._getUIString=function(vt){var It=this._locale[vt];if(It==null)throw new Error("Missing UI string '"+vt+"'");return It},Y.prototype._updateStyle=function(vt,It){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),vt)this.style=new ho(this,It||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof vt=="string"?this.style.loadURL(vt):this.style.loadJSON(vt),this},Y.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ho(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},Y.prototype._diffStyle=function(vt,It){var Vt=this;if(typeof vt=="string"){var se=this._requestManager.normalizeStyleURL(vt),Me=this._requestManager.transformRequest(se,o.ResourceType.Style);o.getJSON(Me,function(Fe,$e){Fe?Vt.fire(new o.ErrorEvent(Fe)):$e&&Vt._updateDiff($e,It)})}else typeof vt=="object"&&this._updateDiff(vt,It)},Y.prototype._updateDiff=function(vt,It){try{this.style.setState(vt)&&this._update(!0)}catch(Vt){o.warnOnce("Unable to perform style diff: "+(Vt.message||Vt.error||Vt)+".  Rebuilding the style from scratch."),this._updateStyle(vt,It)}},Y.prototype.getStyle=function(){if(this.style)return this.style.serialize()},Y.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},Y.prototype.addSource=function(vt,It){return this._lazyInitEmptyStyle(),this.style.addSource(vt,It),this._update(!0)},Y.prototype.isSourceLoaded=function(vt){var It=this.style&&this.style.sourceCaches[vt];if(It===void 0){this.fire(new o.ErrorEvent(new Error("There is no source with ID '"+vt+"'")));return}return It.loaded()},Y.prototype.areTilesLoaded=function(){var vt=this.style&&this.style.sourceCaches;for(var It in vt){var Vt=vt[It],se=Vt._tiles;for(var Me in se){var Fe=se[Me];if(!(Fe.state==="loaded"||Fe.state==="errored"))return!1}}return!0},Y.prototype.addSourceType=function(vt,It,Vt){return this._lazyInitEmptyStyle(),this.style.addSourceType(vt,It,Vt)},Y.prototype.removeSource=function(vt){return this.style.removeSource(vt),this._update(!0)},Y.prototype.getSource=function(vt){return this.style.getSource(vt)},Y.prototype.addImage=function(vt,It,Vt){Vt===void 0&&(Vt={});var se=Vt.pixelRatio;se===void 0&&(se=1);var Me=Vt.sdf;Me===void 0&&(Me=!1);var Fe=Vt.stretchX,$e=Vt.stretchY,ur=Vt.content;this._lazyInitEmptyStyle();var lr=0;if(It instanceof Ku||Su&&It instanceof Su){var Fr=o.browser.getImageData(It),jr=Fr.width,Zr=Fr.height,Wr=Fr.data;this.style.addImage(vt,{data:new o.RGBAImage({width:jr,height:Zr},Wr),pixelRatio:se,stretchX:Fe,stretchY:$e,content:ur,sdf:Me,version:lr})}else{if(It.width===void 0||It.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Jr=It.width,dn=It.height,kn=It.data,Hn=It;this.style.addImage(vt,{data:new o.RGBAImage({width:Jr,height:dn},new Uint8Array(kn)),pixelRatio:se,stretchX:Fe,stretchY:$e,content:ur,sdf:Me,version:lr,userImage:Hn}),Hn.onAdd&&Hn.onAdd(this,vt)}},Y.prototype.updateImage=function(vt,It){var Vt=this.style.getImage(vt);if(!Vt)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var se=It instanceof Ku||Su&&It instanceof Su?o.browser.getImageData(It):It,Me=se.width,Fe=se.height,$e=se.data;if(Me===void 0||Fe===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Me!==Vt.data.width||Fe!==Vt.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ur=!(It instanceof Ku||Su&&It instanceof Su);Vt.data.replace($e,ur),this.style.updateImage(vt,Vt)},Y.prototype.hasImage=function(vt){return vt?!!this.style.getImage(vt):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)},Y.prototype.removeImage=function(vt){this.style.removeImage(vt)},Y.prototype.loadImage=function(vt,It){o.getImage(this._requestManager.transformRequest(vt,o.ResourceType.Image),It)},Y.prototype.listImages=function(){return this.style.listImages()},Y.prototype.addLayer=function(vt,It){return this._lazyInitEmptyStyle(),this.style.addLayer(vt,It),this._update(!0)},Y.prototype.moveLayer=function(vt,It){return this.style.moveLayer(vt,It),this._update(!0)},Y.prototype.removeLayer=function(vt){return this.style.removeLayer(vt),this._update(!0)},Y.prototype.getLayer=function(vt){return this.style.getLayer(vt)},Y.prototype.setLayerZoomRange=function(vt,It,Vt){return this.style.setLayerZoomRange(vt,It,Vt),this._update(!0)},Y.prototype.setFilter=function(vt,It,Vt){return Vt===void 0&&(Vt={}),this.style.setFilter(vt,It,Vt),this._update(!0)},Y.prototype.getFilter=function(vt){return this.style.getFilter(vt)},Y.prototype.setPaintProperty=function(vt,It,Vt,se){return se===void 0&&(se={}),this.style.setPaintProperty(vt,It,Vt,se),this._update(!0)},Y.prototype.getPaintProperty=function(vt,It){return this.style.getPaintProperty(vt,It)},Y.prototype.setLayoutProperty=function(vt,It,Vt,se){return se===void 0&&(se={}),this.style.setLayoutProperty(vt,It,Vt,se),this._update(!0)},Y.prototype.getLayoutProperty=function(vt,It){return this.style.getLayoutProperty(vt,It)},Y.prototype.setLight=function(vt,It){return It===void 0&&(It={}),this._lazyInitEmptyStyle(),this.style.setLight(vt,It),this._update(!0)},Y.prototype.getLight=function(){return this.style.getLight()},Y.prototype.setFeatureState=function(vt,It){return this.style.setFeatureState(vt,It),this._update()},Y.prototype.removeFeatureState=function(vt,It){return this.style.removeFeatureState(vt,It),this._update()},Y.prototype.getFeatureState=function(vt){return this.style.getFeatureState(vt)},Y.prototype.getContainer=function(){return this._container},Y.prototype.getCanvasContainer=function(){return this._canvasContainer},Y.prototype.getCanvas=function(){return this._canvas},Y.prototype._containerDimensions=function(){var vt=0,It=0;return this._container&&(vt=this._container.clientWidth||400,It=this._container.clientHeight||300),[vt,It]},Y.prototype._detectMissingCSS=function(){var vt=o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");vt!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},Y.prototype._setupContainer=function(){var vt=this._container;vt.classList.add("mapboxgl-map");var It=this._missingCSSCanary=A.create("div","mapboxgl-canary",vt);It.style.visibility="hidden",this._detectMissingCSS();var Vt=this._canvasContainer=A.create("div","mapboxgl-canvas-container",vt);this._interactive&&Vt.classList.add("mapboxgl-interactive"),this._canvas=A.create("canvas","mapboxgl-canvas",Vt),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var se=this._containerDimensions();this._resizeCanvas(se[0],se[1]);var Me=this._controlContainer=A.create("div","mapboxgl-control-container",vt),Fe=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function($e){Fe[$e]=A.create("div","mapboxgl-ctrl-"+$e,Me)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},Y.prototype._resizeCanvas=function(vt,It){var Vt=o.browser.devicePixelRatio||1;this._canvas.width=Vt*vt,this._canvas.height=Vt*It,this._canvas.style.width=vt+"px",this._canvas.style.height=It+"px"},Y.prototype._setupPainter=function(){var vt=o.extend({},L.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),It=this._canvas.getContext("webgl",vt)||this._canvas.getContext("experimental-webgl",vt);if(!It){this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new Vr(It,this.transform),o.webpSupported.testSupport(It)},Y.prototype._contextLost=function(vt){vt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:vt}))},Y.prototype._contextRestored=function(vt){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:vt}))},Y.prototype._onMapScroll=function(vt){if(vt.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},Y.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},Y.prototype._update=function(vt){return this.style?(this._styleDirty=this._styleDirty||vt,this._sourcesDirty=!0,this.triggerRepaint(),this):this},Y.prototype._requestRenderFrame=function(vt){return this._update(),this._renderTaskQueue.add(vt)},Y.prototype._cancelRenderFrame=function(vt){this._renderTaskQueue.remove(vt)},Y.prototype._render=function(vt){var It=this,Vt,se=0,Me=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Vt=Me.createQueryEXT(),Me.beginQueryEXT(Me.TIME_ELAPSED_EXT,Vt),se=o.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(vt),!this._removed){var Fe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $e=this.transform.zoom,ur=o.browser.now();this.style.zoomHistory.update($e,ur);var lr=new o.EvaluationParameters($e,{now:ur,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Fr=lr.crossFadingFactor();(Fr!==1||Fr!==this._crossFadingFactor)&&(Fe=!0,this._crossFadingFactor=Fr),this.style.update(lr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||Fe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var jr=o.browser.now()-se;Me.endQueryEXT(Me.TIME_ELAPSED_EXT,Vt),setTimeout(function(){var Jr=Me.getQueryObjectEXT(Vt,Me.QUERY_RESULT_EXT)/1e6;Me.deleteQueryEXT(Vt),It.fire(new o.Event("gpu-timing-frame",{cpuTime:jr,gpuTime:Jr}))},50)}if(this.listens("gpu-timing-layer")){var Zr=this.painter.collectGpuTimers();setTimeout(function(){var Jr=It.painter.queryGpuTimers(Zr);It.fire(new o.Event("gpu-timing-layer",{layerTimes:Jr}))},50)}var Wr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Wr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),this._loaded&&!this._fullyLoaded&&!Wr&&(this._fullyLoaded=!0),this}},Y.prototype.remove=function(){this._hash&&this._hash.remove();for(var vt=0,It=this._controls;vt<It.length;vt+=1){var Vt=It[vt];Vt.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof o.window<"u"&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1));var se=this.painter.context.gl.getExtension("WEBGL_lose_context");se&&se.loseContext&&se.loseContext(),cc(this._canvasContainer),cc(this._controlContainer),cc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new o.Event("remove"))},Y.prototype.triggerRepaint=function(){var vt=this;this.style&&!this._frame&&(this._frame=o.browser.frame(function(It){vt._frame=null,vt._render(It)}))},Y.prototype._onWindowOnline=function(){this._update()},Y.prototype._onWindowResize=function(vt){this._trackResize&&this.resize({originalEvent:vt})._update()},ht.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ht.showTileBoundaries.set=function(q){this._showTileBoundaries!==q&&(this._showTileBoundaries=q,this._update())},ht.showPadding.get=function(){return!!this._showPadding},ht.showPadding.set=function(q){this._showPadding!==q&&(this._showPadding=q,this._update())},ht.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ht.showCollisionBoxes.set=function(q){this._showCollisionBoxes!==q&&(this._showCollisionBoxes=q,q?this.style._generateCollisionBoxes():this._update())},ht.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ht.showOverdrawInspector.set=function(q){this._showOverdrawInspector!==q&&(this._showOverdrawInspector=q,this._update())},ht.repaint.get=function(){return!!this._repaint},ht.repaint.set=function(q){this._repaint!==q&&(this._repaint=q,this.triggerRepaint())},ht.vertices.get=function(){return!!this._vertices},ht.vertices.set=function(q){this._vertices=q,this._update()},Y.prototype._setCacheLimits=function(vt,It){o.setCacheLimits(vt,It)},ht.version.get=function(){return o.version},Object.defineProperties(Y.prototype,ht),Y}(Sl);function cc(ut){ut.parentNode&&ut.parentNode.removeChild(ut)}var wc={showCompass:!0,showZoom:!0,visualizePitch:!1},eu=function(Y){var ht=this;this.options=o.extend({},wc,Y),this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(q){return q.preventDefault()}),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(q){return ht._map.zoomIn({},{originalEvent:q})}),A.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(q){return ht._map.zoomOut({},{originalEvent:q})}),A.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(q){ht.options.visualizePitch?ht._map.resetNorthPitch({},{originalEvent:q}):ht._map.resetNorth({},{originalEvent:q})}),this._compassIcon=A.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};eu.prototype._updateZoomButtons=function(){var Y=this._map.getZoom(),ht=Y===this._map.getMaxZoom(),q=Y===this._map.getMinZoom();this._zoomInButton.disabled=ht,this._zoomOutButton.disabled=q,this._zoomInButton.setAttribute("aria-disabled",ht.toString()),this._zoomOutButton.setAttribute("aria-disabled",q.toString())},eu.prototype._rotateCompassArrow=function(){var Y=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=Y},eu.prototype.onAdd=function(Y){return this._map=Y,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new us(this._map,this._compass,this.options.visualizePitch)),this._container},eu.prototype.onRemove=function(){A.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},eu.prototype._createButton=function(Y,ht){var q=A.create("button",Y,this._container);return q.type="button",q.addEventListener("click",ht),q},eu.prototype._setButtonTitle=function(Y,ht){var q=this._map._getUIString("NavigationControl."+ht);Y.title=q,Y.setAttribute("aria-label",q)};var us=function(Y,ht,q){q===void 0&&(q=!1),this._clickTolerance=10,this.element=ht,this.mouseRotate=new va({clickTolerance:Y.dragRotate._mouseRotate._clickTolerance}),this.map=Y,q&&(this.mousePitch=new ra({clickTolerance:Y.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),A.addEventListener(ht,"mousedown",this.mousedown),A.addEventListener(ht,"touchstart",this.touchstart,{passive:!1}),A.addEventListener(ht,"touchmove",this.touchmove),A.addEventListener(ht,"touchend",this.touchend),A.addEventListener(ht,"touchcancel",this.reset)};us.prototype.down=function(Y,ht){this.mouseRotate.mousedown(Y,ht),this.mousePitch&&this.mousePitch.mousedown(Y,ht),A.disableDrag()},us.prototype.move=function(Y,ht){var q=this.map,vt=this.mouseRotate.mousemoveWindow(Y,ht);if(vt&&vt.bearingDelta&&q.setBearing(q.getBearing()+vt.bearingDelta),this.mousePitch){var It=this.mousePitch.mousemoveWindow(Y,ht);It&&It.pitchDelta&&q.setPitch(q.getPitch()+It.pitchDelta)}},us.prototype.off=function(){var Y=this.element;A.removeEventListener(Y,"mousedown",this.mousedown),A.removeEventListener(Y,"touchstart",this.touchstart,{passive:!1}),A.removeEventListener(Y,"touchmove",this.touchmove),A.removeEventListener(Y,"touchend",this.touchend),A.removeEventListener(Y,"touchcancel",this.reset),this.offTemp()},us.prototype.offTemp=function(){A.enableDrag(),A.removeEventListener(o.window,"mousemove",this.mousemove),A.removeEventListener(o.window,"mouseup",this.mouseup)},us.prototype.mousedown=function(Y){this.down(o.extend({},Y,{ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}}),A.mousePos(this.element,Y)),A.addEventListener(o.window,"mousemove",this.mousemove),A.addEventListener(o.window,"mouseup",this.mouseup)},us.prototype.mousemove=function(Y){this.move(Y,A.mousePos(this.element,Y))},us.prototype.mouseup=function(Y){this.mouseRotate.mouseupWindow(Y),this.mousePitch&&this.mousePitch.mouseupWindow(Y),this.offTemp()},us.prototype.touchstart=function(Y){Y.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=A.touchPos(this.element,Y.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return Y.preventDefault()}},this._startPos))},us.prototype.touchmove=function(Y){Y.targetTouches.length!==1?this.reset():(this._lastPos=A.touchPos(this.element,Y.targetTouches)[0],this.move({preventDefault:function(){return Y.preventDefault()}},this._lastPos))},us.prototype.touchend=function(Y){Y.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},us.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function ru(ut,Y,ht){if(ut=new o.LngLat(ut.lng,ut.lat),Y){var q=new o.LngLat(ut.lng-360,ut.lat),vt=new o.LngLat(ut.lng+360,ut.lat),It=ht.locationPoint(ut).distSqr(Y);ht.locationPoint(q).distSqr(Y)<It?ut=q:ht.locationPoint(vt).distSqr(Y)<It&&(ut=vt)}for(;Math.abs(ut.lng-ht.center.lng)>180;){var Vt=ht.locationPoint(ut);if(Vt.x>=0&&Vt.y>=0&&Vt.x<=ht.width&&Vt.y<=ht.height)break;ut.lng>ht.center.lng?ut.lng-=360:ut.lng+=360}return ut}var hc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Tc(ut,Y,ht){var q=ut.classList;for(var vt in hc)q.remove("mapboxgl-"+ht+"-anchor-"+vt);q.add("mapboxgl-"+ht+"-anchor-"+Y)}var Pf=function(ut){function Y(ht,q){if(ut.call(this),(ht instanceof o.window.HTMLElement||q)&&(ht=o.extend({element:ht},q)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ht&&ht.anchor||"center",this._color=ht&&ht.color||"#3FB1CE",this._scale=ht&&ht.scale||1,this._draggable=ht&&ht.draggable||!1,this._clickTolerance=ht&&ht.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ht&&ht.rotation||0,this._rotationAlignment=ht&&ht.rotationAlignment||"auto",this._pitchAlignment=ht&&ht.pitchAlignment&&ht.pitchAlignment!=="auto"?ht.pitchAlignment:this._rotationAlignment,!ht||!ht.element){this._defaultMarker=!0,this._element=A.create("div"),this._element.setAttribute("aria-label","Map marker");var vt=A.createNS("http://www.w3.org/2000/svg","svg"),It=41,Vt=27;vt.setAttributeNS(null,"display","block"),vt.setAttributeNS(null,"height",It+"px"),vt.setAttributeNS(null,"width",Vt+"px"),vt.setAttributeNS(null,"viewBox","0 0 "+Vt+" "+It);var se=A.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"stroke","none"),se.setAttributeNS(null,"stroke-width","1"),se.setAttributeNS(null,"fill","none"),se.setAttributeNS(null,"fill-rule","evenodd");var Me=A.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"fill-rule","nonzero");var Fe=A.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Fe.setAttributeNS(null,"fill","#000000");for(var $e=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],ur=0,lr=$e;ur<lr.length;ur+=1){var Fr=lr[ur],jr=A.createNS("http://www.w3.org/2000/svg","ellipse");jr.setAttributeNS(null,"opacity","0.04"),jr.setAttributeNS(null,"cx","10.5"),jr.setAttributeNS(null,"cy","5.80029008"),jr.setAttributeNS(null,"rx",Fr.rx),jr.setAttributeNS(null,"ry",Fr.ry),Fe.appendChild(jr)}var Zr=A.createNS("http://www.w3.org/2000/svg","g");Zr.setAttributeNS(null,"fill",this._color);var Wr=A.createNS("http://www.w3.org/2000/svg","path");Wr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zr.appendChild(Wr);var Jr=A.createNS("http://www.w3.org/2000/svg","g");Jr.setAttributeNS(null,"opacity","0.25"),Jr.setAttributeNS(null,"fill","#000000");var dn=A.createNS("http://www.w3.org/2000/svg","path");dn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Jr.appendChild(dn);var kn=A.createNS("http://www.w3.org/2000/svg","g");kn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),kn.setAttributeNS(null,"fill","#FFFFFF");var Hn=A.createNS("http://www.w3.org/2000/svg","g");Hn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Kn=A.createNS("http://www.w3.org/2000/svg","circle");Kn.setAttributeNS(null,"fill","#000000"),Kn.setAttributeNS(null,"opacity","0.25"),Kn.setAttributeNS(null,"cx","5.5"),Kn.setAttributeNS(null,"cy","5.5"),Kn.setAttributeNS(null,"r","5.4999962");var Qn=A.createNS("http://www.w3.org/2000/svg","circle");Qn.setAttributeNS(null,"fill","#FFFFFF"),Qn.setAttributeNS(null,"cx","5.5"),Qn.setAttributeNS(null,"cy","5.5"),Qn.setAttributeNS(null,"r","5.4999962"),Hn.appendChild(Kn),Hn.appendChild(Qn),Me.appendChild(Fe),Me.appendChild(Zr),Me.appendChild(Jr),Me.appendChild(kn),Me.appendChild(Hn),vt.appendChild(Me),vt.setAttributeNS(null,"height",It*this._scale+"px"),vt.setAttributeNS(null,"width",Vt*this._scale+"px"),this._element.appendChild(vt),this._offset=o.Point.convert(ht&&ht.offset||[0,-14])}else this._element=ht.element,this._offset=o.Point.convert(ht&&ht.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Xn){Xn.preventDefault()}),this._element.addEventListener("mousedown",function(Xn){Xn.preventDefault()}),Tc(this._element,this._anchor,"marker"),this._popup=null}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this.remove(),this._map=q,q.getCanvasContainer().appendChild(this._element),q.on("move",this._update),q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},Y.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),A.remove(this._element),this._popup&&this._popup.remove(),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},Y.prototype.getElement=function(){return this._element},Y.prototype.setPopup=function(q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),q){if(!("offset"in q.options)){var vt=38.1,It=13.5,Vt=Math.sqrt(Math.pow(It,2)/2);q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-vt],"bottom-left":[Vt,(vt-It+Vt)*-1],"bottom-right":[-Vt,(vt-It+Vt)*-1],left:[It,(vt-It)*-1],right:[-It,(vt-It)*-1]}:this._offset}this._popup=q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},Y.prototype._onKeyPress=function(q){var vt=q.code,It=q.charCode||q.keyCode;(vt==="Space"||vt==="Enter"||It===32||It===13)&&this.togglePopup()},Y.prototype._onMapClick=function(q){var vt=q.originalEvent.target,It=this._element;this._popup&&(vt===It||It.contains(vt))&&this.togglePopup()},Y.prototype.getPopup=function(){return this._popup},Y.prototype.togglePopup=function(){var q=this._popup;if(q)q.isOpen()?q.remove():q.addTo(this._map);else return this;return this},Y.prototype._update=function(q){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=ru(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var vt="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?vt="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(vt="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var It="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?It="rotateX(0deg)":this._pitchAlignment==="map"&&(It="rotateX("+this._map.getPitch()+"deg)"),(!q||q.type==="moveend")&&(this._pos=this._pos.round()),A.setTransform(this._element,hc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+It+" "+vt)}},Y.prototype.getOffset=function(){return this._offset},Y.prototype.setOffset=function(q){return this._offset=o.Point.convert(q),this._update(),this},Y.prototype._onMove=function(q){if(!this._isDragging){var vt=this._clickTolerance||this._map._clickTolerance;this._isDragging=q.point.dist(this._pointerdownPos)>=vt}this._isDragging&&(this._pos=q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))},Y.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"},Y.prototype._addDragHandler=function(q){this._element.contains(q.originalEvent.target)&&(q.preventDefault(),this._positionDelta=q.point.sub(this._pos).add(this._offset),this._pointerdownPos=q.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},Y.prototype.setDraggable=function(q){return this._draggable=!!q,this._map&&(q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},Y.prototype.isDraggable=function(){return this._draggable},Y.prototype.setRotation=function(q){return this._rotation=q||0,this._update(),this},Y.prototype.getRotation=function(){return this._rotation},Y.prototype.setRotationAlignment=function(q){return this._rotationAlignment=q||"auto",this._update(),this},Y.prototype.getRotationAlignment=function(){return this._rotationAlignment},Y.prototype.setPitchAlignment=function(q){return this._pitchAlignment=q&&q!=="auto"?q:this._rotationAlignment,this._update(),this},Y.prototype.getPitchAlignment=function(){return this._pitchAlignment},Y}(o.Evented),ah={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Cu;function vc(ut){Cu!==void 0?ut(Cu):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(function(Y){Cu=Y.state!=="denied",ut(Cu)}):(Cu=!!o.window.navigator.geolocation,ut(Cu))}var Rf=0,Ju=!1,Ih=function(ut){function Y(ht){ut.call(this),this.options=o.extend({},ah,ht),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.onAdd=function(q){return this._map=q,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),vc(this._setupUI),this._container},Y.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),A.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Rf=0,Ju=!1},Y.prototype._isOutOfMapMaxBounds=function(q){var vt=this._map.getMaxBounds(),It=q.coords;return vt&&(It.longitude<vt.getWest()||It.longitude>vt.getEast()||It.latitude<vt.getSouth()||It.latitude>vt.getNorth())},Y.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},Y.prototype._onSuccess=function(q){if(this._map){if(this._isOutOfMapMaxBounds(q)){this._setErrorState(),this.fire(new o.Event("outofmaxbounds",q)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(q),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",q)),this._finish()}},Y.prototype._updateCamera=function(q){var vt=new o.LngLat(q.coords.longitude,q.coords.latitude),It=q.coords.accuracy,Vt=this._map.getBearing(),se=o.extend({bearing:Vt},this.options.fitBoundsOptions);this._map.fitBounds(vt.toBounds(It),se,{geolocateSource:!0})},Y.prototype._updateMarker=function(q){if(q){var vt=new o.LngLat(q.coords.longitude,q.coords.latitude);this._accuracyCircleMarker.setLngLat(vt).addTo(this._map),this._userLocationDotMarker.setLngLat(vt).addTo(this._map),this._accuracy=q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},Y.prototype._updateCircleRadius=function(){var q=this._map._container.clientHeight/2,vt=this._map.unproject([0,q]),It=this._map.unproject([1,q]),Vt=vt.distanceTo(It),se=Math.ceil(2*this._accuracy/Vt);this._circleElement.style.width=se+"px",this._circleElement.style.height=se+"px"},Y.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},Y.prototype._onError=function(q){if(this._map){if(this.options.trackUserLocation)if(q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var vt=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=vt,this._geolocateButton.setAttribute("aria-label",vt),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(q.code===3&&Ju)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",q)),this._finish()}},Y.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},Y.prototype._setupUI=function(q){var vt=this;if(this._container.addEventListener("contextmenu",function(se){return se.preventDefault()}),this._geolocateButton=A.create("button","mapboxgl-ctrl-geolocate",this._container),A.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",q===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var It=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=It,this._geolocateButton.setAttribute("aria-label",It)}else{var Vt=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Vt,this._geolocateButton.setAttribute("aria-label",Vt)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=A.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pf(this._dotElement),this._circleElement=A.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(se){var Me=se.originalEvent&&se.originalEvent.type==="resize";!se.geolocateSource&&vt._watchState==="ACTIVE_LOCK"&&!Me&&(vt._watchState="BACKGROUND",vt._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),vt._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),vt.fire(new o.Event("trackuserlocationend")))})},Y.prototype.trigger=function(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Rf--,Ju=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Rf++;var q;Rf>1?(q={maximumAge:6e5,timeout:0},Ju=!0):(q=this.options.positionOptions,Ju=!1),this._geolocationWatchID=o.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,q)}}else o.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},Y.prototype._clearWatch=function(){o.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},Y}(o.Evented),ih={maxWidth:100,unit:"metric"},Qu=function(Y){this.options=o.extend({},ih,Y),o.bindAll(["_onMove","setUnit"],this)};Qu.prototype.getDefaultPosition=function(){return"bottom-left"},Qu.prototype._onMove=function(){oh(this._map,this._container,this.options)},Qu.prototype.onAdd=function(Y){return this._map=Y,this._container=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",Y.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Qu.prototype.onRemove=function(){A.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Qu.prototype.setUnit=function(Y){this.options.unit=Y,oh(this._map,this._container,this.options)};function oh(ut,Y,ht){var q=ht&&ht.maxWidth||100,vt=ut._container.clientHeight/2,It=ut.unproject([0,vt]),Vt=ut.unproject([q,vt]),se=It.distanceTo(Vt);if(ht&&ht.unit==="imperial"){var Me=3.2808*se;if(Me>5280){var Fe=Me/5280;Df(Y,q,Fe,ut._getUIString("ScaleControl.Miles"))}else Df(Y,q,Me,ut._getUIString("ScaleControl.Feet"))}else if(ht&&ht.unit==="nautical"){var $e=se/1852;Df(Y,q,$e,ut._getUIString("ScaleControl.NauticalMiles"))}else se>=1e3?Df(Y,q,se/1e3,ut._getUIString("ScaleControl.Kilometers")):Df(Y,q,se,ut._getUIString("ScaleControl.Meters"))}function Df(ut,Y,ht,q){var vt=zh(ht),It=vt/ht;ut.style.width=Y*It+"px",ut.innerHTML=vt+"&nbsp;"+q}function kh(ut){var Y=Math.pow(10,Math.ceil(-Math.log(ut)/Math.LN10));return Math.round(ut*Y)/Y}function zh(ut){var Y=Math.pow(10,(""+Math.floor(ut)).length-1),ht=ut/Y;return ht=ht>=10?10:ht>=5?5:ht>=3?3:ht>=2?2:ht>=1?1:kh(ht),Y*ht}var qs=function(Y){this._fullscreen=!1,Y&&Y.container&&(Y.container instanceof o.window.HTMLElement?this._container=Y.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in o.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in o.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in o.window.document&&(this._fullscreenchange="MSFullscreenChange")};qs.prototype.onAdd=function(Y){return this._map=Y,this._container||(this._container=this._map.getContainer()),this._controlContainer=A.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},qs.prototype.onRemove=function(){A.remove(this._controlContainer),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},qs.prototype._checkFullscreenSupport=function(){return!!(o.window.document.fullscreenEnabled||o.window.document.mozFullScreenEnabled||o.window.document.msFullscreenEnabled||o.window.document.webkitFullscreenEnabled)},qs.prototype._setupUI=function(){var Y=this._fullscreenButton=A.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);A.create("span","mapboxgl-ctrl-icon",Y).setAttribute("aria-hidden",!0),Y.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},qs.prototype._updateTitle=function(){var Y=this._getTitle();this._fullscreenButton.setAttribute("aria-label",Y),this._fullscreenButton.title=Y},qs.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},qs.prototype._isFullscreen=function(){return this._fullscreen},qs.prototype._changeIcon=function(){var Y=o.window.document.fullscreenElement||o.window.document.mozFullScreenElement||o.window.document.webkitFullscreenElement||o.window.document.msFullscreenElement;Y===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},qs.prototype._onClickFullscreen=function(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.mozCancelFullScreen?o.window.document.mozCancelFullScreen():o.window.document.msExitFullscreen?o.window.document.msExitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var _h={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Fh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),kv=function(ut){function Y(ht){ut.call(this),this.options=o.extend(Object.create(_h),ht),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ut&&(Y.__proto__=ut),Y.prototype=Object.create(ut&&ut.prototype),Y.prototype.constructor=Y,Y.prototype.addTo=function(q){return this._map&&this.remove(),this._map=q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this},Y.prototype.isOpen=function(){return!!this._map},Y.prototype.remove=function(){return this._content&&A.remove(this._content),this._container&&(A.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this},Y.prototype.getLngLat=function(){return this._lngLat},Y.prototype.setLngLat=function(q){return this._lngLat=o.LngLat.convert(q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},Y.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},Y.prototype.getElement=function(){return this._container},Y.prototype.setText=function(q){return this.setDOMContent(o.window.document.createTextNode(q))},Y.prototype.setHTML=function(q){var vt=o.window.document.createDocumentFragment(),It=o.window.document.createElement("body"),Vt;for(It.innerHTML=q;Vt=It.firstChild,!!Vt;)vt.appendChild(Vt);return this.setDOMContent(vt)},Y.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},Y.prototype.setMaxWidth=function(q){return this.options.maxWidth=q,this._update(),this},Y.prototype.setDOMContent=function(q){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=A.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(q),this._createCloseButton(),this._update(),this._focusFirstElement(),this},Y.prototype.addClassName=function(q){this._container&&this._container.classList.add(q)},Y.prototype.removeClassName=function(q){this._container&&this._container.classList.remove(q)},Y.prototype.setOffset=function(q){return this.options.offset=q,this._update(),this},Y.prototype.toggleClassName=function(q){if(this._container)return this._container.classList.toggle(q)},Y.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=A.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},Y.prototype._onMouseUp=function(q){this._update(q.point)},Y.prototype._onMouseMove=function(q){this._update(q.point)},Y.prototype._onDrag=function(q){this._update(q.point)},Y.prototype._update=function(q){var vt=this,It=this._lngLat||this._trackPointer;if(!(!this._map||!It||!this._content)&&(this._container||(this._container=A.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=A.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Fr){return vt._container.classList.add(Fr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ru(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!q))){var Vt=this._pos=this._trackPointer&&q?q:this._map.project(this._lngLat),se=this.options.anchor,Me=Oh(this.options.offset);if(!se){var Fe=this._container.offsetWidth,$e=this._container.offsetHeight,ur;Vt.y+Me.bottom.y<$e?ur=["top"]:Vt.y>this._map.transform.height-$e?ur=["bottom"]:ur=[],Vt.x<Fe/2?ur.push("left"):Vt.x>this._map.transform.width-Fe/2&&ur.push("right"),ur.length===0?se="bottom":se=ur.join("-")}var lr=Vt.add(Me[se]).round();A.setTransform(this._container,hc[se]+" translate("+lr.x+"px,"+lr.y+"px)"),Tc(this._container,se,"popup")}},Y.prototype._focusFirstElement=function(){if(!(!this.options.focusAfterOpen||!this._container)){var q=this._container.querySelector(Fh);q&&q.focus()}},Y.prototype._onClose=function(){this.remove()},Y}(o.Evented);function Oh(ut){if(ut)if(typeof ut=="number"){var Y=Math.round(Math.sqrt(.5*Math.pow(ut,2)));return{center:new o.Point(0,0),top:new o.Point(0,ut),"top-left":new o.Point(Y,Y),"top-right":new o.Point(-Y,Y),bottom:new o.Point(0,-ut),"bottom-left":new o.Point(Y,-Y),"bottom-right":new o.Point(-Y,-Y),left:new o.Point(ut,0),right:new o.Point(-ut,0)}}else if(ut instanceof o.Point||Array.isArray(ut)){var ht=o.Point.convert(ut);return{center:ht,top:ht,"top-left":ht,"top-right":ht,bottom:ht,"bottom-left":ht,"bottom-right":ht,left:ht,right:ht}}else return{center:o.Point.convert(ut.center||[0,0]),top:o.Point.convert(ut.top||[0,0]),"top-left":o.Point.convert(ut["top-left"]||[0,0]),"top-right":o.Point.convert(ut["top-right"]||[0,0]),bottom:o.Point.convert(ut.bottom||[0,0]),"bottom-left":o.Point.convert(ut["bottom-left"]||[0,0]),"bottom-right":o.Point.convert(ut["bottom-right"]||[0,0]),left:o.Point.convert(ut.left||[0,0]),right:o.Point.convert(ut.right||[0,0])};else return Oh(new o.Point(0,0))}var so={version:o.version,supported:L,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:nh,NavigationControl:eu,GeolocateControl:Ih,AttributionControl:Qa,ScaleControl:Qu,FullscreenControl:qs,Popup:kv,Marker:Pf,Style:ho,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.Point,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,config:o.config,prewarm:Yt,clearPrewarmedResources:Jt,get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(ut){o.config.ACCESS_TOKEN=ut},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(ut){o.config.API_URL=ut},get workerCount(){return dr.workerCount},set workerCount(ut){dr.workerCount=ut},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ut){o.config.MAX_PARALLEL_IMAGE_REQUESTS=ut},clearStorage:function(Y){o.clearTileCache(Y)},workerUrl:""};return so}),b})},3108:function(j,V,t){j.exports=t(26099)},26099:function(j,V,t){var b=t(64928),P=t(32420),o=t(51160),L=t(76752),A=t(55616),v=t(31264),p=t(47520),r=t(18400),e=t(72512),s=t(76244),n=1073741824;j.exports=function(u,g){g||(g={}),u=p(u,"float64"),g=A(g,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var h=v(g.maxDepth,255),T=v(g.bounds,L(u,2));T[0]===T[2]&&T[2]++,T[1]===T[3]&&T[3]++;var c=l(u,T),i=u.length>>>1,d;g.dtype||(g.dtype="array"),typeof g.dtype=="string"?d=new(e(g.dtype))(i):g.dtype&&(d=g.dtype,Array.isArray(d)&&(d.length=i));for(var x=0;x<i;++x)d[x]=x;var w=[],C=[],y=[],S=[];O(0,0,1,d,0,1);for(var M=0,a=0;a<w.length;a++){var E=w[a];if(d.set)d.set(E,M);else for(var m=0,k=E.length;m<k;m++)d[m+M]=E[m];var I=M+w[a].length;S[a]=[M,I],M=I}return d.range=z,d;function O(_,N,G,X,$,et){if(!X.length)return null;var ot=w[$]||(w[$]=[]),nt=y[$]||(y[$]=[]),Z=C[$]||(C[$]=[]),Q=ot.length;if($++,$>h||et>n){for(var W=0;W<X.length;W++)ot.push(X[W]),nt.push(et),Z.push(null,null,null,null);return Q}if(ot.push(X[0]),nt.push(et),X.length<=1)return Z.push(null,null,null,null),Q;for(var J=G*.5,it=_+J,K=N+J,H=[],at=[],tt=[],lt=[],dt=1,mt=X.length;dt<mt;dt++){var gt=X[dt],Mt=c[gt*2],Lt=c[gt*2+1];Mt<it?Lt<K?H.push(gt):at.push(gt):Lt<K?tt.push(gt):lt.push(gt)}return et<<=2,Z.push(O(_,N,J,H,$,et),O(_,K,J,at,$,et+1),O(it,N,J,tt,$,et+2),O(it,K,J,lt,$,et+3)),Q}function z(){for(var _=[],N=arguments.length;N--;)_[N]=arguments[N];var G;if(r(_[_.length-1])){var X=_.pop();!_.length&&(X.x!=null||X.l!=null||X.left!=null)&&(_=[X],G={}),G=A(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else G={};_.length||(_=T);var $=o.apply(void 0,_),et=[Math.min($.x,$.x+$.width),Math.min($.y,$.y+$.height),Math.max($.x,$.x+$.width),Math.max($.y,$.y+$.height)],ot=et[0],nt=et[1],Z=et[2],Q=et[3],W=l([ot,nt,Z,Q],T),J=W[0],it=W[1],K=W[2],H=W[3],at=v(G.level,w.length);if(G.d!=null){var tt;typeof G.d=="number"?tt=[G.d,G.d]:G.d.length&&(tt=G.d),at=Math.min(Math.max(Math.ceil(-s(Math.abs(tt[0])/(T[2]-T[0]))),Math.ceil(-s(Math.abs(tt[1])/(T[3]-T[1])))),at)}if(at=Math.min(at,w.length),G.lod)return B(J,it,K,H,at);var lt=[];dt(0,0,1,0,0,1);function dt(gt,Mt,Lt,zt,xt,Ct){if(!(xt===null||Ct===null)){var wt=gt+Lt,Rt=Mt+Lt;if(!(J>wt||it>Rt||K<gt||H<Mt)&&!(zt>=at)&&xt!==Ct){var Tt=w[zt];Ct===void 0&&(Ct=Tt.length);for(var Bt=xt;Bt<Ct;Bt++){var Gt=Tt[Bt],te=u[Gt*2],Wt=u[Gt*2+1];te>=ot&&te<=Z&&Wt>=nt&&Wt<=Q&&lt.push(Gt)}var jt=C[zt],ie=jt[xt*4+0],ue=jt[xt*4+1],fe=jt[xt*4+2],pe=jt[xt*4+3],Te=mt(jt,xt+1),Qt=Lt*.5,Pt=zt+1;dt(gt,Mt,Qt,Pt,ie,ue||fe||pe||Te),dt(gt,Mt+Qt,Qt,Pt,ue,fe||pe||Te),dt(gt+Qt,Mt,Qt,Pt,fe,pe||Te),dt(gt+Qt,Mt+Qt,Qt,Pt,pe,Te)}}}function mt(gt,Mt){for(var Lt=null,zt=0;Lt===null;)if(Lt=gt[Mt*4+zt],zt++,zt>gt.length)return null;return Lt}return lt}function B(_,N,G,X,$){for(var et=[],ot=0;ot<$;ot++){var nt=y[ot],Z=S[ot][0],Q=F(_,N,ot),W=F(G,X,ot),J=b.ge(nt,Q),it=b.gt(nt,W,J,nt.length-1);et[ot]=[J+Z,it+Z]}return et}function F(_,N,G){for(var X=1,$=.5,et=.5,ot=.5,nt=0;nt<G;nt++)X<<=2,X+=_<$?N<et?0:1:N<et?2:3,ot*=.5,$+=_<$?-ot:ot,et+=N<et?-ot:ot;return X}};function l(f,u){for(var g=u[0],h=u[1],T=u[2],c=u[3],i=1/(T-g),d=1/(c-h),x=new Array(f.length),w=0,C=f.length/2;w<C;w++)x[2*w]=P((f[2*w]-g)*i,0,1),x[2*w+1]=P((f[2*w+1]-h)*d,0,1);return x}},40440:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(3256),P=6378137;function o(r){return b.geomReduce(r,function(e,s){return e+L(s)},0)}V.default=o;function L(r){var e=0,s;switch(r.type){case"Polygon":return A(r.coordinates);case"MultiPolygon":for(s=0;s<r.coordinates.length;s++)e+=A(r.coordinates[s]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function A(r){var e=0;if(r&&r.length>0){e+=Math.abs(v(r[0]));for(var s=1;s<r.length;s++)e-=Math.abs(v(r[s]))}return e}function v(r){var e,s,n,l,f,u,g,h=0,T=r.length;if(T>2){for(g=0;g<T;g++)g===T-2?(l=T-2,f=T-1,u=0):g===T-1?(l=T-1,f=0,u=1):(l=g,f=g+1,u=g+2),e=r[l],s=r[f],n=r[u],h+=(p(n[0])-p(e[0]))*Math.sin(p(s[1]));h=h*P*P/2}return h}function p(r){return r*Math.PI/180}},46284:function(j,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(M,a,E){E===void 0&&(E={});var m={type:"Feature"};return(E.id===0||E.id)&&(m.id=E.id),E.bbox&&(m.bbox=E.bbox),m.properties=a||{},m.geometry=M,m}V.feature=t;function b(M,a,E){switch(M){case"Point":return P(a).geometry;case"LineString":return v(a).geometry;case"Polygon":return L(a).geometry;case"MultiPoint":return s(a).geometry;case"MultiLineString":return e(a).geometry;case"MultiPolygon":return n(a).geometry;default:throw new Error(M+" is invalid")}}V.geometry=b;function P(M,a,E){if(E===void 0&&(E={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(M[0])||!w(M[1]))throw new Error("coordinates must contain numbers");var m={type:"Point",coordinates:M};return t(m,a,E)}V.point=P;function o(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return P(m,a)}),E)}V.points=o;function L(M,a,E){E===void 0&&(E={});for(var m=0,k=M;m<k.length;m++){var I=k[m];if(I.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var O=0;O<I[I.length-1].length;O++)if(I[I.length-1][O]!==I[0][O])throw new Error("First and last Position are not equivalent.")}var z={type:"Polygon",coordinates:M};return t(z,a,E)}V.polygon=L;function A(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return L(m,a)}),E)}V.polygons=A;function v(M,a,E){if(E===void 0&&(E={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var m={type:"LineString",coordinates:M};return t(m,a,E)}V.lineString=v;function p(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return v(m,a)}),E)}V.lineStrings=p;function r(M,a){a===void 0&&(a={});var E={type:"FeatureCollection"};return a.id&&(E.id=a.id),a.bbox&&(E.bbox=a.bbox),E.features=M,E}V.featureCollection=r;function e(M,a,E){E===void 0&&(E={});var m={type:"MultiLineString",coordinates:M};return t(m,a,E)}V.multiLineString=e;function s(M,a,E){E===void 0&&(E={});var m={type:"MultiPoint",coordinates:M};return t(m,a,E)}V.multiPoint=s;function n(M,a,E){E===void 0&&(E={});var m={type:"MultiPolygon",coordinates:M};return t(m,a,E)}V.multiPolygon=n;function l(M,a,E){E===void 0&&(E={});var m={type:"GeometryCollection",geometries:M};return t(m,a,E)}V.geometryCollection=l;function f(M,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var E=Math.pow(10,a||0);return Math.round(M*E)/E}V.round=f;function u(M,a){a===void 0&&(a="kilometers");var E=V.factors[a];if(!E)throw new Error(a+" units is invalid");return M*E}V.radiansToLength=u;function g(M,a){a===void 0&&(a="kilometers");var E=V.factors[a];if(!E)throw new Error(a+" units is invalid");return M/E}V.lengthToRadians=g;function h(M,a){return c(g(M,a))}V.lengthToDegrees=h;function T(M){var a=M%360;return a<0&&(a+=360),a}V.bearingToAzimuth=T;function c(M){var a=M%(2*Math.PI);return a*180/Math.PI}V.radiansToDegrees=c;function i(M){var a=M%360;return a*Math.PI/180}V.degreesToRadians=i;function d(M,a,E){if(a===void 0&&(a="kilometers"),E===void 0&&(E="kilometers"),!(M>=0))throw new Error("length must be a positive number");return u(g(M,a),E)}V.convertLength=d;function x(M,a,E){if(a===void 0&&(a="meters"),E===void 0&&(E="kilometers"),!(M>=0))throw new Error("area must be a positive number");var m=V.areaFactors[a];if(!m)throw new Error("invalid original units");var k=V.areaFactors[E];if(!k)throw new Error("invalid final units");return M/m*k}V.convertArea=x;function w(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}V.isNumber=w;function C(M){return!!M&&M.constructor===Object}V.isObject=C;function y(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(a){if(!w(a))throw new Error("bbox must only contain numbers")})}V.validateBBox=y;function S(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}V.validateId=S},3256:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(46284);function P(i,d,x){if(i!==null)for(var w,C,y,S,M,a,E,m=0,k=0,I,O=i.type,z=O==="FeatureCollection",B=O==="Feature",F=z?i.features.length:1,_=0;_<F;_++){E=z?i.features[_].geometry:B?i.geometry:i,I=E?E.type==="GeometryCollection":!1,M=I?E.geometries.length:1;for(var N=0;N<M;N++){var G=0,X=0;if(S=I?E.geometries[N]:E,S!==null){a=S.coordinates;var $=S.type;switch(m=x&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(d(a,k,_,G,X)===!1)return!1;k++,G++;break;case"LineString":case"MultiPoint":for(w=0;w<a.length;w++){if(d(a[w],k,_,G,X)===!1)return!1;k++,$==="MultiPoint"&&G++}$==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(w=0;w<a.length;w++){for(C=0;C<a[w].length-m;C++){if(d(a[w][C],k,_,G,X)===!1)return!1;k++}$==="MultiLineString"&&G++,$==="Polygon"&&X++}$==="Polygon"&&G++;break;case"MultiPolygon":for(w=0;w<a.length;w++){for(X=0,C=0;C<a[w].length;C++){for(y=0;y<a[w][C].length-m;y++){if(d(a[w][C][y],k,_,G,X)===!1)return!1;k++}X++}G++}break;case"GeometryCollection":for(w=0;w<S.geometries.length;w++)if(P(S.geometries[w],d,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,d,x,w){var C=x;return P(i,function(y,S,M,a,E){S===0&&x===void 0?C=y:C=d(C,y,S,M,a,E)},w),C}function L(i,d){var x;switch(i.type){case"FeatureCollection":for(x=0;x<i.features.length&&d(i.features[x].properties,x)!==!1;x++);break;case"Feature":d(i.properties,0);break}}function A(i,d,x){var w=x;return L(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function v(i,d){if(i.type==="Feature")d(i,0);else if(i.type==="FeatureCollection")for(var x=0;x<i.features.length&&d(i.features[x],x)!==!1;x++);}function p(i,d,x){var w=x;return v(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function r(i){var d=[];return P(i,function(x){d.push(x)}),d}function e(i,d){var x,w,C,y,S,M,a,E,m,k,I=0,O=i.type==="FeatureCollection",z=i.type==="Feature",B=O?i.features.length:1;for(x=0;x<B;x++){for(M=O?i.features[x].geometry:z?i.geometry:i,E=O?i.features[x].properties:z?i.properties:{},m=O?i.features[x].bbox:z?i.bbox:void 0,k=O?i.features[x].id:z?i.id:void 0,a=M?M.type==="GeometryCollection":!1,S=a?M.geometries.length:1,C=0;C<S;C++){if(y=a?M.geometries[C]:M,y===null){if(d(null,I,E,m,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(d(y,I,E,m,k)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<y.geometries.length;w++)if(d(y.geometries[w],I,E,m,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function s(i,d,x){var w=x;return e(i,function(C,y,S,M,a){y===0&&x===void 0?w=C:w=d(w,C,y,S,M,a)}),w}function n(i,d){e(i,function(x,w,C,y,S){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return d(b.feature(x,C,{bbox:y,id:S}),w,0)===!1?!1:void 0}var a;switch(M){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var E=0;E<x.coordinates.length;E++){var m=x.coordinates[E],k={type:a,coordinates:m};if(d(b.feature(k,C),w,E)===!1)return!1}})}function l(i,d,x){var w=x;return n(i,function(C,y,S){y===0&&S===0&&x===void 0?w=C:w=d(w,C,y,S)}),w}function f(i,d){n(i,function(x,w,C){var y=0;if(x.geometry){var S=x.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var M,a=0,E=0,m=0;if(P(x,function(k,I,O,z,B){if(M===void 0||w>a||z>E||B>m){M=k,a=w,E=z,m=B,y=0;return}var F=b.lineString([M,k],x.properties);if(d(F,w,C,B,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function u(i,d,x){var w=x,C=!1;return f(i,function(y,S,M,a,E){C===!1&&x===void 0?w=y:w=d(w,y,S,M,a,E),C=!0}),w}function g(i,d){if(!i)throw new Error("geojson is required");n(i,function(x,w,C){if(x.geometry!==null){var y=x.geometry.type,S=x.geometry.coordinates;switch(y){case"LineString":if(d(x,w,C,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<S.length;M++)if(d(b.lineString(S[M],x.properties),w,C,M)===!1)return!1;break}}})}function h(i,d,x){var w=x;return g(i,function(C,y,S,M){y===0&&x===void 0?w=C:w=d(w,C,y,S,M)}),w}function T(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.segmentIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=a.length+y-1),b.lineString([a[y],a[y+1]],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y-1),b.lineString([a[C][y],a[C][y+1]],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y-1),b.lineString([a[w][y],a[w][y+1]],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y-1),b.lineString([a[w][C][y],a[w][C][y+1]],S,d)}throw new Error("geojson is invalid")}function c(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.coordIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":return b.point(a,S,d);case"MultiPoint":return w<0&&(w=a.length+w),b.point(a[w],S,d);case"LineString":return y<0&&(y=a.length+y),b.point(a[y],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y),b.point(a[C][y],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y),b.point(a[w][y],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y),b.point(a[w][C][y],S,d)}throw new Error("geojson is invalid")}V.coordEach=P,V.coordReduce=o,V.propEach=L,V.propReduce=A,V.featureEach=v,V.featureReduce=p,V.coordAll=r,V.geomEach=e,V.geomReduce=s,V.flattenEach=n,V.flattenReduce=l,V.segmentEach=f,V.segmentReduce=u,V.lineEach=g,V.lineReduce=h,V.findSegment=T,V.findPoint=c},42428:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(84880);function P(o){var L=[1/0,1/0,-1/0,-1/0];return b.coordEach(o,function(A){L[0]>A[0]&&(L[0]=A[0]),L[1]>A[1]&&(L[1]=A[1]),L[2]<A[0]&&(L[2]=A[0]),L[3]<A[1]&&(L[3]=A[1])}),L}P.default=P,V.default=P},76796:function(j,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(M,a,E){E===void 0&&(E={});var m={type:"Feature"};return(E.id===0||E.id)&&(m.id=E.id),E.bbox&&(m.bbox=E.bbox),m.properties=a||{},m.geometry=M,m}V.feature=t;function b(M,a,E){switch(M){case"Point":return P(a).geometry;case"LineString":return v(a).geometry;case"Polygon":return L(a).geometry;case"MultiPoint":return s(a).geometry;case"MultiLineString":return e(a).geometry;case"MultiPolygon":return n(a).geometry;default:throw new Error(M+" is invalid")}}V.geometry=b;function P(M,a,E){if(E===void 0&&(E={}),!M)throw new Error("coordinates is required");if(!Array.isArray(M))throw new Error("coordinates must be an Array");if(M.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!w(M[0])||!w(M[1]))throw new Error("coordinates must contain numbers");var m={type:"Point",coordinates:M};return t(m,a,E)}V.point=P;function o(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return P(m,a)}),E)}V.points=o;function L(M,a,E){E===void 0&&(E={});for(var m=0,k=M;m<k.length;m++){var I=k[m];if(I.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var O=0;O<I[I.length-1].length;O++)if(I[I.length-1][O]!==I[0][O])throw new Error("First and last Position are not equivalent.")}var z={type:"Polygon",coordinates:M};return t(z,a,E)}V.polygon=L;function A(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return L(m,a)}),E)}V.polygons=A;function v(M,a,E){if(E===void 0&&(E={}),M.length<2)throw new Error("coordinates must be an array of two or more positions");var m={type:"LineString",coordinates:M};return t(m,a,E)}V.lineString=v;function p(M,a,E){return E===void 0&&(E={}),r(M.map(function(m){return v(m,a)}),E)}V.lineStrings=p;function r(M,a){a===void 0&&(a={});var E={type:"FeatureCollection"};return a.id&&(E.id=a.id),a.bbox&&(E.bbox=a.bbox),E.features=M,E}V.featureCollection=r;function e(M,a,E){E===void 0&&(E={});var m={type:"MultiLineString",coordinates:M};return t(m,a,E)}V.multiLineString=e;function s(M,a,E){E===void 0&&(E={});var m={type:"MultiPoint",coordinates:M};return t(m,a,E)}V.multiPoint=s;function n(M,a,E){E===void 0&&(E={});var m={type:"MultiPolygon",coordinates:M};return t(m,a,E)}V.multiPolygon=n;function l(M,a,E){E===void 0&&(E={});var m={type:"GeometryCollection",geometries:M};return t(m,a,E)}V.geometryCollection=l;function f(M,a){if(a===void 0&&(a=0),a&&!(a>=0))throw new Error("precision must be a positive number");var E=Math.pow(10,a||0);return Math.round(M*E)/E}V.round=f;function u(M,a){a===void 0&&(a="kilometers");var E=V.factors[a];if(!E)throw new Error(a+" units is invalid");return M*E}V.radiansToLength=u;function g(M,a){a===void 0&&(a="kilometers");var E=V.factors[a];if(!E)throw new Error(a+" units is invalid");return M/E}V.lengthToRadians=g;function h(M,a){return c(g(M,a))}V.lengthToDegrees=h;function T(M){var a=M%360;return a<0&&(a+=360),a}V.bearingToAzimuth=T;function c(M){var a=M%(2*Math.PI);return a*180/Math.PI}V.radiansToDegrees=c;function i(M){var a=M%360;return a*Math.PI/180}V.degreesToRadians=i;function d(M,a,E){if(a===void 0&&(a="kilometers"),E===void 0&&(E="kilometers"),!(M>=0))throw new Error("length must be a positive number");return u(g(M,a),E)}V.convertLength=d;function x(M,a,E){if(a===void 0&&(a="meters"),E===void 0&&(E="kilometers"),!(M>=0))throw new Error("area must be a positive number");var m=V.areaFactors[a];if(!m)throw new Error("invalid original units");var k=V.areaFactors[E];if(!k)throw new Error("invalid final units");return M/m*k}V.convertArea=x;function w(M){return!isNaN(M)&&M!==null&&!Array.isArray(M)}V.isNumber=w;function C(M){return!!M&&M.constructor===Object}V.isObject=C;function y(M){if(!M)throw new Error("bbox is required");if(!Array.isArray(M))throw new Error("bbox must be an Array");if(M.length!==4&&M.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");M.forEach(function(a){if(!w(a))throw new Error("bbox must only contain numbers")})}V.validateBBox=y;function S(M){if(!M)throw new Error("id is required");if(["string","number"].indexOf(typeof M)===-1)throw new Error("id must be a number or a string")}V.validateId=S},84880:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(76796);function P(i,d,x){if(i!==null)for(var w,C,y,S,M,a,E,m=0,k=0,I,O=i.type,z=O==="FeatureCollection",B=O==="Feature",F=z?i.features.length:1,_=0;_<F;_++){E=z?i.features[_].geometry:B?i.geometry:i,I=E?E.type==="GeometryCollection":!1,M=I?E.geometries.length:1;for(var N=0;N<M;N++){var G=0,X=0;if(S=I?E.geometries[N]:E,S!==null){a=S.coordinates;var $=S.type;switch(m=x&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(d(a,k,_,G,X)===!1)return!1;k++,G++;break;case"LineString":case"MultiPoint":for(w=0;w<a.length;w++){if(d(a[w],k,_,G,X)===!1)return!1;k++,$==="MultiPoint"&&G++}$==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(w=0;w<a.length;w++){for(C=0;C<a[w].length-m;C++){if(d(a[w][C],k,_,G,X)===!1)return!1;k++}$==="MultiLineString"&&G++,$==="Polygon"&&X++}$==="Polygon"&&G++;break;case"MultiPolygon":for(w=0;w<a.length;w++){for(X=0,C=0;C<a[w].length;C++){for(y=0;y<a[w][C].length-m;y++){if(d(a[w][C][y],k,_,G,X)===!1)return!1;k++}X++}G++}break;case"GeometryCollection":for(w=0;w<S.geometries.length;w++)if(P(S.geometries[w],d,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,d,x,w){var C=x;return P(i,function(y,S,M,a,E){S===0&&x===void 0?C=y:C=d(C,y,S,M,a,E)},w),C}function L(i,d){var x;switch(i.type){case"FeatureCollection":for(x=0;x<i.features.length&&d(i.features[x].properties,x)!==!1;x++);break;case"Feature":d(i.properties,0);break}}function A(i,d,x){var w=x;return L(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function v(i,d){if(i.type==="Feature")d(i,0);else if(i.type==="FeatureCollection")for(var x=0;x<i.features.length&&d(i.features[x],x)!==!1;x++);}function p(i,d,x){var w=x;return v(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function r(i){var d=[];return P(i,function(x){d.push(x)}),d}function e(i,d){var x,w,C,y,S,M,a,E,m,k,I=0,O=i.type==="FeatureCollection",z=i.type==="Feature",B=O?i.features.length:1;for(x=0;x<B;x++){for(M=O?i.features[x].geometry:z?i.geometry:i,E=O?i.features[x].properties:z?i.properties:{},m=O?i.features[x].bbox:z?i.bbox:void 0,k=O?i.features[x].id:z?i.id:void 0,a=M?M.type==="GeometryCollection":!1,S=a?M.geometries.length:1,C=0;C<S;C++){if(y=a?M.geometries[C]:M,y===null){if(d(null,I,E,m,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(d(y,I,E,m,k)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<y.geometries.length;w++)if(d(y.geometries[w],I,E,m,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function s(i,d,x){var w=x;return e(i,function(C,y,S,M,a){y===0&&x===void 0?w=C:w=d(w,C,y,S,M,a)}),w}function n(i,d){e(i,function(x,w,C,y,S){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return d(b.feature(x,C,{bbox:y,id:S}),w,0)===!1?!1:void 0}var a;switch(M){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var E=0;E<x.coordinates.length;E++){var m=x.coordinates[E],k={type:a,coordinates:m};if(d(b.feature(k,C),w,E)===!1)return!1}})}function l(i,d,x){var w=x;return n(i,function(C,y,S){y===0&&S===0&&x===void 0?w=C:w=d(w,C,y,S)}),w}function f(i,d){n(i,function(x,w,C){var y=0;if(x.geometry){var S=x.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var M,a=0,E=0,m=0;if(P(x,function(k,I,O,z,B){if(M===void 0||w>a||z>E||B>m){M=k,a=w,E=z,m=B,y=0;return}var F=b.lineString([M,k],x.properties);if(d(F,w,C,B,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function u(i,d,x){var w=x,C=!1;return f(i,function(y,S,M,a,E){C===!1&&x===void 0?w=y:w=d(w,y,S,M,a,E),C=!0}),w}function g(i,d){if(!i)throw new Error("geojson is required");n(i,function(x,w,C){if(x.geometry!==null){var y=x.geometry.type,S=x.geometry.coordinates;switch(y){case"LineString":if(d(x,w,C,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<S.length;M++)if(d(b.lineString(S[M],x.properties),w,C,M)===!1)return!1;break}}})}function h(i,d,x){var w=x;return g(i,function(C,y,S,M){y===0&&x===void 0?w=C:w=d(w,C,y,S,M)}),w}function T(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.segmentIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=a.length+y-1),b.lineString([a[y],a[y+1]],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y-1),b.lineString([a[C][y],a[C][y+1]],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y-1),b.lineString([a[w][y],a[w][y+1]],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y-1),b.lineString([a[w][C][y],a[w][C][y+1]],S,d)}throw new Error("geojson is invalid")}function c(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.coordIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":return b.point(a,S,d);case"MultiPoint":return w<0&&(w=a.length+w),b.point(a[w],S,d);case"LineString":return y<0&&(y=a.length+y),b.point(a[y],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y),b.point(a[C][y],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y),b.point(a[w][y],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y),b.point(a[w][C][y],S,d)}throw new Error("geojson is invalid")}V.coordEach=P,V.coordReduce=o,V.propEach=L,V.propReduce=A,V.featureEach=v,V.featureReduce=p,V.coordAll=r,V.geomEach=e,V.geomReduce=s,V.flattenEach=n,V.flattenReduce=l,V.segmentEach=f,V.segmentReduce=u,V.lineEach=g,V.lineReduce=h,V.findSegment=T,V.findPoint=c},77844:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(43752),P=t(49840);function o(L,A){A===void 0&&(A={});var v=0,p=0,r=0;return b.coordEach(L,function(e){v+=e[0],p+=e[1],r++}),P.point([v/r,p/r],A.properties)}V.default=o},49840:function(j,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/V.earthRadius,yards:.91441111923921},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function t(z,B,F){F===void 0&&(F={});var _={type:"Feature"};return(F.id===0||F.id)&&(_.id=F.id),F.bbox&&(_.bbox=F.bbox),_.properties=B||{},_.geometry=z,_}V.feature=t;function b(z,B,F){switch(z){case"Point":return P(B).geometry;case"LineString":return v(B).geometry;case"Polygon":return L(B).geometry;case"MultiPoint":return s(B).geometry;case"MultiLineString":return e(B).geometry;case"MultiPolygon":return n(B).geometry;default:throw new Error(z+" is invalid")}}V.geometry=b;function P(z,B,F){F===void 0&&(F={});var _={type:"Point",coordinates:z};return t(_,B,F)}V.point=P;function o(z,B,F){return F===void 0&&(F={}),r(z.map(function(_){return P(_,B)}),F)}V.points=o;function L(z,B,F){F===void 0&&(F={});for(var _=0,N=z;_<N.length;_++){var G=N[_];if(G.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var X=0;X<G[G.length-1].length;X++)if(G[G.length-1][X]!==G[0][X])throw new Error("First and last Position are not equivalent.")}var $={type:"Polygon",coordinates:z};return t($,B,F)}V.polygon=L;function A(z,B,F){return F===void 0&&(F={}),r(z.map(function(_){return L(_,B)}),F)}V.polygons=A;function v(z,B,F){if(F===void 0&&(F={}),z.length<2)throw new Error("coordinates must be an array of two or more positions");var _={type:"LineString",coordinates:z};return t(_,B,F)}V.lineString=v;function p(z,B,F){return F===void 0&&(F={}),r(z.map(function(_){return v(_,B)}),F)}V.lineStrings=p;function r(z,B){B===void 0&&(B={});var F={type:"FeatureCollection"};return B.id&&(F.id=B.id),B.bbox&&(F.bbox=B.bbox),F.features=z,F}V.featureCollection=r;function e(z,B,F){F===void 0&&(F={});var _={type:"MultiLineString",coordinates:z};return t(_,B,F)}V.multiLineString=e;function s(z,B,F){F===void 0&&(F={});var _={type:"MultiPoint",coordinates:z};return t(_,B,F)}V.multiPoint=s;function n(z,B,F){F===void 0&&(F={});var _={type:"MultiPolygon",coordinates:z};return t(_,B,F)}V.multiPolygon=n;function l(z,B,F){F===void 0&&(F={});var _={type:"GeometryCollection",geometries:z};return t(_,B,F)}V.geometryCollection=l;function f(z,B){if(B===void 0&&(B=0),B&&!(B>=0))throw new Error("precision must be a positive number");var F=Math.pow(10,B||0);return Math.round(z*F)/F}V.round=f;function u(z,B){B===void 0&&(B="kilometers");var F=V.factors[B];if(!F)throw new Error(B+" units is invalid");return z*F}V.radiansToLength=u;function g(z,B){B===void 0&&(B="kilometers");var F=V.factors[B];if(!F)throw new Error(B+" units is invalid");return z/F}V.lengthToRadians=g;function h(z,B){return c(g(z,B))}V.lengthToDegrees=h;function T(z){var B=z%360;return B<0&&(B+=360),B}V.bearingToAzimuth=T;function c(z){var B=z%(2*Math.PI);return B*180/Math.PI}V.radiansToDegrees=c;function i(z){var B=z%360;return B*Math.PI/180}V.degreesToRadians=i;function d(z,B,F){if(B===void 0&&(B="kilometers"),F===void 0&&(F="kilometers"),!(z>=0))throw new Error("length must be a positive number");return u(g(z,B),F)}V.convertLength=d;function x(z,B,F){if(B===void 0&&(B="meters"),F===void 0&&(F="kilometers"),!(z>=0))throw new Error("area must be a positive number");var _=V.areaFactors[B];if(!_)throw new Error("invalid original units");var N=V.areaFactors[F];if(!N)throw new Error("invalid final units");return z/_*N}V.convertArea=x;function w(z){return!isNaN(z)&&z!==null&&!Array.isArray(z)&&!/^\s*$/.test(z)}V.isNumber=w;function C(z){return!!z&&z.constructor===Object}V.isObject=C;function y(z){if(!z)throw new Error("bbox is required");if(!Array.isArray(z))throw new Error("bbox must be an Array");if(z.length!==4&&z.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");z.forEach(function(B){if(!w(B))throw new Error("bbox must only contain numbers")})}V.validateBBox=y;function S(z){if(!z)throw new Error("id is required");if(["string","number"].indexOf(typeof z)===-1)throw new Error("id must be a number or a string")}V.validateId=S;function M(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=M;function a(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=a;function E(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=E;function m(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=m;function k(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=k;function I(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=I;function O(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=O},43752:function(j,V,t){Object.defineProperty(V,"__esModule",{value:!0});var b=t(49840);function P(i,d,x){if(i!==null)for(var w,C,y,S,M,a,E,m=0,k=0,I,O=i.type,z=O==="FeatureCollection",B=O==="Feature",F=z?i.features.length:1,_=0;_<F;_++){E=z?i.features[_].geometry:B?i.geometry:i,I=E?E.type==="GeometryCollection":!1,M=I?E.geometries.length:1;for(var N=0;N<M;N++){var G=0,X=0;if(S=I?E.geometries[N]:E,S!==null){a=S.coordinates;var $=S.type;switch(m=x&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(d(a,k,_,G,X)===!1)return!1;k++,G++;break;case"LineString":case"MultiPoint":for(w=0;w<a.length;w++){if(d(a[w],k,_,G,X)===!1)return!1;k++,$==="MultiPoint"&&G++}$==="LineString"&&G++;break;case"Polygon":case"MultiLineString":for(w=0;w<a.length;w++){for(C=0;C<a[w].length-m;C++){if(d(a[w][C],k,_,G,X)===!1)return!1;k++}$==="MultiLineString"&&G++,$==="Polygon"&&X++}$==="Polygon"&&G++;break;case"MultiPolygon":for(w=0;w<a.length;w++){for(X=0,C=0;C<a[w].length;C++){for(y=0;y<a[w][C].length-m;y++){if(d(a[w][C][y],k,_,G,X)===!1)return!1;k++}X++}G++}break;case"GeometryCollection":for(w=0;w<S.geometries.length;w++)if(P(S.geometries[w],d,x)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(i,d,x,w){var C=x;return P(i,function(y,S,M,a,E){S===0&&x===void 0?C=y:C=d(C,y,S,M,a,E)},w),C}function L(i,d){var x;switch(i.type){case"FeatureCollection":for(x=0;x<i.features.length&&d(i.features[x].properties,x)!==!1;x++);break;case"Feature":d(i.properties,0);break}}function A(i,d,x){var w=x;return L(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function v(i,d){if(i.type==="Feature")d(i,0);else if(i.type==="FeatureCollection")for(var x=0;x<i.features.length&&d(i.features[x],x)!==!1;x++);}function p(i,d,x){var w=x;return v(i,function(C,y){y===0&&x===void 0?w=C:w=d(w,C,y)}),w}function r(i){var d=[];return P(i,function(x){d.push(x)}),d}function e(i,d){var x,w,C,y,S,M,a,E,m,k,I=0,O=i.type==="FeatureCollection",z=i.type==="Feature",B=O?i.features.length:1;for(x=0;x<B;x++){for(M=O?i.features[x].geometry:z?i.geometry:i,E=O?i.features[x].properties:z?i.properties:{},m=O?i.features[x].bbox:z?i.bbox:void 0,k=O?i.features[x].id:z?i.id:void 0,a=M?M.type==="GeometryCollection":!1,S=a?M.geometries.length:1,C=0;C<S;C++){if(y=a?M.geometries[C]:M,y===null){if(d(null,I,E,m,k)===!1)return!1;continue}switch(y.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(d(y,I,E,m,k)===!1)return!1;break}case"GeometryCollection":{for(w=0;w<y.geometries.length;w++)if(d(y.geometries[w],I,E,m,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function s(i,d,x){var w=x;return e(i,function(C,y,S,M,a){y===0&&x===void 0?w=C:w=d(w,C,y,S,M,a)}),w}function n(i,d){e(i,function(x,w,C,y,S){var M=x===null?null:x.type;switch(M){case null:case"Point":case"LineString":case"Polygon":return d(b.feature(x,C,{bbox:y,id:S}),w,0)===!1?!1:void 0}var a;switch(M){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var E=0;E<x.coordinates.length;E++){var m=x.coordinates[E],k={type:a,coordinates:m};if(d(b.feature(k,C),w,E)===!1)return!1}})}function l(i,d,x){var w=x;return n(i,function(C,y,S){y===0&&S===0&&x===void 0?w=C:w=d(w,C,y,S)}),w}function f(i,d){n(i,function(x,w,C){var y=0;if(x.geometry){var S=x.geometry.type;if(!(S==="Point"||S==="MultiPoint")){var M,a=0,E=0,m=0;if(P(x,function(k,I,O,z,B){if(M===void 0||w>a||z>E||B>m){M=k,a=w,E=z,m=B,y=0;return}var F=b.lineString([M,k],x.properties);if(d(F,w,C,B,y)===!1)return!1;y++,M=k})===!1)return!1}}})}function u(i,d,x){var w=x,C=!1;return f(i,function(y,S,M,a,E){C===!1&&x===void 0?w=y:w=d(w,y,S,M,a,E),C=!0}),w}function g(i,d){if(!i)throw new Error("geojson is required");n(i,function(x,w,C){if(x.geometry!==null){var y=x.geometry.type,S=x.geometry.coordinates;switch(y){case"LineString":if(d(x,w,C,0,0)===!1)return!1;break;case"Polygon":for(var M=0;M<S.length;M++)if(d(b.lineString(S[M],x.properties),w,C,M)===!1)return!1;break}}})}function h(i,d,x){var w=x;return g(i,function(C,y,S,M){y===0&&x===void 0?w=C:w=d(w,C,y,S,M)}),w}function T(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.segmentIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":case"MultiPoint":return null;case"LineString":return y<0&&(y=a.length+y-1),b.lineString([a[y],a[y+1]],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y-1),b.lineString([a[C][y],a[C][y+1]],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y-1),b.lineString([a[w][y],a[w][y+1]],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y-1),b.lineString([a[w][C][y],a[w][C][y+1]],S,d)}throw new Error("geojson is invalid")}function c(i,d){if(d=d||{},!b.isObject(d))throw new Error("options is invalid");var x=d.featureIndex||0,w=d.multiFeatureIndex||0,C=d.geometryIndex||0,y=d.coordIndex||0,S=d.properties,M;switch(i.type){case"FeatureCollection":x<0&&(x=i.features.length+x),S=S||i.features[x].properties,M=i.features[x].geometry;break;case"Feature":S=S||i.properties,M=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":M=i;break;default:throw new Error("geojson is invalid")}if(M===null)return null;var a=M.coordinates;switch(M.type){case"Point":return b.point(a,S,d);case"MultiPoint":return w<0&&(w=a.length+w),b.point(a[w],S,d);case"LineString":return y<0&&(y=a.length+y),b.point(a[y],S,d);case"Polygon":return C<0&&(C=a.length+C),y<0&&(y=a[C].length+y),b.point(a[C][y],S,d);case"MultiLineString":return w<0&&(w=a.length+w),y<0&&(y=a[w].length+y),b.point(a[w][y],S,d);case"MultiPolygon":return w<0&&(w=a.length+w),C<0&&(C=a[w].length+C),y<0&&(y=a[w][C].length-y),b.point(a[w][C][y],S,d)}throw new Error("geojson is invalid")}V.coordEach=P,V.coordReduce=o,V.propEach=L,V.propReduce=A,V.featureEach=v,V.featureReduce=p,V.coordAll=r,V.geomEach=e,V.geomReduce=s,V.flattenEach=n,V.flattenReduce=l,V.segmentEach=f,V.segmentReduce=u,V.lineEach=g,V.lineReduce=h,V.findSegment=T,V.findPoint=c},49972:function(j){j.exports=V;function V(t){var b=0,P=0,o=0,L=0;return t.map(function(A){A=A.slice();var v=A[0],p=v.toUpperCase();if(v!=p)switch(A[0]=p,v){case"a":A[6]+=o,A[7]+=L;break;case"v":A[1]+=L;break;case"h":A[1]+=o;break;default:for(var r=1;r<A.length;)A[r++]+=o,A[r++]+=L}switch(p){case"Z":o=b,L=P;break;case"H":o=A[1];break;case"V":L=A[1];break;case"M":o=b=A[1],L=P=A[2];break;default:o=A[A.length-2],L=A[A.length-1]}return A})}},76752:function(j){j.exports=V;function V(t,b){if(!t||t.length==null)throw Error("Argument should be an array");b==null?b=1:b=Math.floor(b);for(var P=Array(b*2),o=0;o<b;o++){for(var L=-1/0,A=1/0,v=o,p=t.length;v<p;v+=b)t[v]>L&&(L=t[v]),t[v]<A&&(A=t[v]);P[o]=A,P[b+o]=L}return P}},10272:function(j){j.exports=function(V,t,b){if(typeof Array.prototype.findIndex=="function")return V.findIndex(t,b);if(typeof t!="function")throw new TypeError("predicate must be a function");var P=Object(V),o=P.length;if(o===0)return-1;for(var L=0;L<o;L++)if(t.call(b,P[L],L,P))return L;return-1}},71152:function(j,V,t){var b=t(76752);j.exports=P;function P(o,L,A){if(!o||o.length==null)throw Error("Argument should be an array");L==null&&(L=1),A==null&&(A=b(o,L));for(var v=0;v<L;v++){var p=A[L+v],r=A[v],e=v,s=o.length;if(p===1/0&&r===-1/0)for(e=v;e<s;e+=L)o[e]=o[e]===p?1:o[e]===r?0:.5;else if(p===1/0)for(e=v;e<s;e+=L)o[e]=o[e]===p?1:0;else if(r===-1/0)for(e=v;e<s;e+=L)o[e]=o[e]===r?0:1;else{var n=p-r;for(e=v;e<s;e+=L)isNaN(o[e])||(o[e]=n===0?.5:(o[e]-r)/n)}}return o}},67752:function(j){j.exports=function(t,b){var P=typeof t=="number",o=typeof b=="number";P&&!o?(b=t,t=0):!P&&!o&&(t=0,b=0),t=t|0,b=b|0;var L=b-t;if(L<0)throw new Error("array length must be positive");for(var A=new Array(L),v=0,p=t;v<L;v++,p++)A[v]=p;return A}},45408:function(j,V,t){var b=t(4168);function P(X){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(et){return typeof et}:P=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},P(X)}function o(X,$){if(!(X instanceof $))throw new TypeError("Cannot call a class as a function")}var L=t(86832),A=L.codes,v=A.ERR_AMBIGUOUS_ARGUMENT,p=A.ERR_INVALID_ARG_TYPE,r=A.ERR_INVALID_ARG_VALUE,e=A.ERR_INVALID_RETURN_VALUE,s=A.ERR_MISSING_ARGS,n=t(26144),l=t(35840),f=l.inspect,u=t(35840).types,g=u.isPromise,h=u.isRegExp,T=Object.assign?Object.assign:t(60964).assign,c=Object.is?Object.is:t(39896),i,d;function x(){var X=t(25116);i=X.isDeepEqual,d=X.isDeepStrictEqual}var w=!1,C=j.exports=E,y={};function S(X){throw X.message instanceof Error?X.message:new n(X)}function M(X,$,et,ot,nt){var Z=arguments.length,Q;if(Z===0)Q="Failed";else if(Z===1)et=X,X=void 0;else{if(w===!1){w=!0;var W=b.emitWarning?b.emitWarning:console.warn.bind(console);W("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}Z===2&&(ot="!=")}if(et instanceof Error)throw et;var J={actual:X,expected:$,operator:ot===void 0?"fail":ot,stackStartFn:nt||M};et!==void 0&&(J.message=et);var it=new n(J);throw Q&&(it.message=Q,it.generatedMessage=!0),it}C.fail=M,C.AssertionError=n;function a(X,$,et,ot){if(!et){var nt=!1;if($===0)nt=!0,ot="No value argument passed to `assert.ok()`";else if(ot instanceof Error)throw ot;var Z=new n({actual:et,expected:!0,message:ot,operator:"==",stackStartFn:X});throw Z.generatedMessage=nt,Z}}function E(){for(var X=arguments.length,$=new Array(X),et=0;et<X;et++)$[et]=arguments[et];a.apply(void 0,[E,$.length].concat($))}C.ok=E,C.equal=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");$!=et&&S({actual:$,expected:et,message:ot,operator:"==",stackStartFn:X})},C.notEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");$==et&&S({actual:$,expected:et,message:ot,operator:"!=",stackStartFn:X})},C.deepEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");i===void 0&&x(),i($,et)||S({actual:$,expected:et,message:ot,operator:"deepEqual",stackStartFn:X})},C.notDeepEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");i===void 0&&x(),i($,et)&&S({actual:$,expected:et,message:ot,operator:"notDeepEqual",stackStartFn:X})},C.deepStrictEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");i===void 0&&x(),d($,et)||S({actual:$,expected:et,message:ot,operator:"deepStrictEqual",stackStartFn:X})},C.notDeepStrictEqual=m;function m(X,$,et){if(arguments.length<2)throw new s("actual","expected");i===void 0&&x(),d(X,$)&&S({actual:X,expected:$,message:et,operator:"notDeepStrictEqual",stackStartFn:m})}C.strictEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");c($,et)||S({actual:$,expected:et,message:ot,operator:"strictEqual",stackStartFn:X})},C.notStrictEqual=function X($,et,ot){if(arguments.length<2)throw new s("actual","expected");c($,et)&&S({actual:$,expected:et,message:ot,operator:"notStrictEqual",stackStartFn:X})};var k=function X($,et,ot){var nt=this;o(this,X),et.forEach(function(Z){Z in $&&(ot!==void 0&&typeof ot[Z]=="string"&&h($[Z])&&$[Z].test(ot[Z])?nt[Z]=ot[Z]:nt[Z]=$[Z])})};function I(X,$,et,ot,nt,Z){if(!(et in X)||!d(X[et],$[et])){if(!ot){var Q=new k(X,nt),W=new k($,nt,X),J=new n({actual:Q,expected:W,operator:"deepStrictEqual",stackStartFn:Z});throw J.actual=X,J.expected=$,J.operator=Z.name,J}S({actual:X,expected:$,message:ot,operator:Z.name,stackStartFn:Z})}}function O(X,$,et,ot){if(typeof $!="function"){if(h($))return $.test(X);if(arguments.length===2)throw new p("expected",["Function","RegExp"],$);if(P(X)!=="object"||X===null){var nt=new n({actual:X,expected:$,message:et,operator:"deepStrictEqual",stackStartFn:ot});throw nt.operator=ot.name,nt}var Z=Object.keys($);if($ instanceof Error)Z.push("name","message");else if(Z.length===0)throw new r("error",$,"may not be an empty object");return i===void 0&&x(),Z.forEach(function(Q){typeof X[Q]=="string"&&h($[Q])&&$[Q].test(X[Q])||I(X,$,Q,et,Z,ot)}),!0}return $.prototype!==void 0&&X instanceof $?!0:Error.isPrototypeOf($)?!1:$.call({},X)===!0}function z(X){if(typeof X!="function")throw new p("fn","Function",X);try{X()}catch($){return $}return y}function B(X){return g(X)||X!==null&&P(X)==="object"&&typeof X.then=="function"&&typeof X.catch=="function"}function F(X){return Promise.resolve().then(function(){var $;if(typeof X=="function"){if($=X(),!B($))throw new e("instance of Promise","promiseFn",$)}else if(B(X))$=X;else throw new p("promiseFn",["Function","Promise"],X);return Promise.resolve().then(function(){return $}).then(function(){return y}).catch(function(et){return et})})}function _(X,$,et,ot){if(typeof et=="string"){if(arguments.length===4)throw new p("error",["Object","Error","Function","RegExp"],et);if(P($)==="object"&&$!==null){if($.message===et)throw new v("error/message",'The error message "'.concat($.message,'" is identical to the message.'))}else if($===et)throw new v("error/message",'The error "'.concat($,'" is identical to the message.'));ot=et,et=void 0}else if(et!=null&&P(et)!=="object"&&typeof et!="function")throw new p("error",["Object","Error","Function","RegExp"],et);if($===y){var nt="";et&&et.name&&(nt+=" (".concat(et.name,")")),nt+=ot?": ".concat(ot):".";var Z=X.name==="rejects"?"rejection":"exception";S({actual:void 0,expected:et,operator:X.name,message:"Missing expected ".concat(Z).concat(nt),stackStartFn:X})}if(et&&!O($,et,ot,X))throw $}function N(X,$,et,ot){if($!==y){if(typeof et=="string"&&(ot=et,et=void 0),!et||O($,et)){var nt=ot?": ".concat(ot):".",Z=X.name==="doesNotReject"?"rejection":"exception";S({actual:$,expected:et,operator:X.name,message:"Got unwanted ".concat(Z).concat(nt,`
`)+'Actual message: "'.concat($&&$.message,'"'),stackStartFn:X})}throw $}}C.throws=function X($){for(var et=arguments.length,ot=new Array(et>1?et-1:0),nt=1;nt<et;nt++)ot[nt-1]=arguments[nt];_.apply(void 0,[X,z($)].concat(ot))},C.rejects=function X($){for(var et=arguments.length,ot=new Array(et>1?et-1:0),nt=1;nt<et;nt++)ot[nt-1]=arguments[nt];return F($).then(function(Z){return _.apply(void 0,[X,Z].concat(ot))})},C.doesNotThrow=function X($){for(var et=arguments.length,ot=new Array(et>1?et-1:0),nt=1;nt<et;nt++)ot[nt-1]=arguments[nt];N.apply(void 0,[X,z($)].concat(ot))},C.doesNotReject=function X($){for(var et=arguments.length,ot=new Array(et>1?et-1:0),nt=1;nt<et;nt++)ot[nt-1]=arguments[nt];return F($).then(function(Z){return N.apply(void 0,[X,Z].concat(ot))})},C.ifError=function X($){if($!=null){var et="ifError got unwanted exception: ";P($)==="object"&&typeof $.message=="string"?$.message.length===0&&$.constructor?et+=$.constructor.name:et+=$.message:et+=f($);var ot=new n({actual:$,expected:null,operator:"ifError",message:et,stackStartFn:X}),nt=$.stack;if(typeof nt=="string"){var Z=nt.split(`
`);Z.shift();for(var Q=ot.stack.split(`
`),W=0;W<Z.length;W++){var J=Q.indexOf(Z[W]);if(J!==-1){Q=Q.slice(0,J);break}}ot.stack="".concat(Q.join(`
`),`
`).concat(Z.join(`
`))}throw ot}};function G(){for(var X=arguments.length,$=new Array(X),et=0;et<X;et++)$[et]=arguments[et];a.apply(void 0,[G,$.length].concat($))}C.strict=T(G,C,{equal:C.strictEqual,deepEqual:C.deepStrictEqual,notEqual:C.notStrictEqual,notDeepEqual:C.notDeepStrictEqual}),C.strict.strict=C.strict},26144:function(j,V,t){var b=t(4168);function P(z){for(var B=1;B<arguments.length;B++){var F=arguments[B]!=null?arguments[B]:{},_=Object.keys(F);typeof Object.getOwnPropertySymbols=="function"&&(_=_.concat(Object.getOwnPropertySymbols(F).filter(function(N){return Object.getOwnPropertyDescriptor(F,N).enumerable}))),_.forEach(function(N){o(z,N,F[N])})}return z}function o(z,B,F){return B in z?Object.defineProperty(z,B,{value:F,enumerable:!0,configurable:!0,writable:!0}):z[B]=F,z}function L(z,B){if(!(z instanceof B))throw new TypeError("Cannot call a class as a function")}function A(z,B){for(var F=0;F<B.length;F++){var _=B[F];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(z,_.key,_)}}function v(z,B,F){return B&&A(z.prototype,B),z}function p(z,B){return B&&(h(B)==="object"||typeof B=="function")?B:r(z)}function r(z){if(z===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return z}function e(z,B){if(typeof B!="function"&&B!==null)throw new TypeError("Super expression must either be null or a function");z.prototype=Object.create(B&&B.prototype,{constructor:{value:z,writable:!0,configurable:!0}}),B&&u(z,B)}function s(z){var B=typeof Map=="function"?new Map:void 0;return s=function(_){if(_===null||!f(_))return _;if(typeof _!="function")throw new TypeError("Super expression must either be null or a function");if(typeof B<"u"){if(B.has(_))return B.get(_);B.set(_,N)}function N(){return l(_,arguments,g(this).constructor)}return N.prototype=Object.create(_.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),u(N,_)},s(z)}function n(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function l(z,B,F){return n()?l=Reflect.construct:l=function(N,G,X){var $=[null];$.push.apply($,G);var et=Function.bind.apply(N,$),ot=new et;return X&&u(ot,X.prototype),ot},l.apply(null,arguments)}function f(z){return Function.toString.call(z).indexOf("[native code]")!==-1}function u(z,B){return u=Object.setPrototypeOf||function(_,N){return _.__proto__=N,_},u(z,B)}function g(z){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(F){return F.__proto__||Object.getPrototypeOf(F)},g(z)}function h(z){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(F){return typeof F}:h=function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},h(z)}var T=t(35840),c=T.inspect,i=t(86832),d=i.codes.ERR_INVALID_ARG_TYPE;function x(z,B,F){return(F===void 0||F>z.length)&&(F=z.length),z.substring(F-B.length,F)===B}function w(z,B){if(B=Math.floor(B),z.length==0||B==0)return"";var F=z.length*B;for(B=Math.floor(Math.log(B)/Math.log(2));B;)z+=z,B--;return z+=z.substring(0,F-z.length),z}var C="",y="",S="",M="",a={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},E=10;function m(z){var B=Object.keys(z),F=Object.create(Object.getPrototypeOf(z));return B.forEach(function(_){F[_]=z[_]}),Object.defineProperty(F,"message",{value:z.message}),F}function k(z){return c(z,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function I(z,B,F){var _="",N="",G=0,X="",$=!1,et=k(z),ot=et.split(`
`),nt=k(B).split(`
`),Z=0,Q="";if(F==="strictEqual"&&h(z)==="object"&&h(B)==="object"&&z!==null&&B!==null&&(F="strictEqualObject"),ot.length===1&&nt.length===1&&ot[0]!==nt[0]){var W=ot[0].length+nt[0].length;if(W<=E){if((h(z)!=="object"||z===null)&&(h(B)!=="object"||B===null)&&(z!==0||B!==0))return"".concat(a[F],`

`)+"".concat(ot[0]," !== ").concat(nt[0],`
`)}else if(F!=="strictEqualObject"){var J=b.stderr&&b.stderr.isTTY?b.stderr.columns:80;if(W<J){for(;ot[0][Z]===nt[0][Z];)Z++;Z>2&&(Q=`
  `.concat(w(" ",Z),"^"),Z=0)}}}for(var it=ot[ot.length-1],K=nt[nt.length-1];it===K&&(Z++<2?X=`
  `.concat(it).concat(X):_=it,ot.pop(),nt.pop(),!(ot.length===0||nt.length===0));)it=ot[ot.length-1],K=nt[nt.length-1];var H=Math.max(ot.length,nt.length);if(H===0){var at=et.split(`
`);if(at.length>30)for(at[26]="".concat(C,"...").concat(M);at.length>27;)at.pop();return"".concat(a.notIdentical,`

`).concat(at.join(`
`),`
`)}Z>3&&(X=`
`.concat(C,"...").concat(M).concat(X),$=!0),_!==""&&(X=`
  `.concat(_).concat(X),_="");var tt=0,lt=a[F]+`
`.concat(y,"+ actual").concat(M," ").concat(S,"- expected").concat(M),dt=" ".concat(C,"...").concat(M," Lines skipped");for(Z=0;Z<H;Z++){var mt=Z-G;if(ot.length<Z+1)mt>1&&Z>2&&(mt>4?(N+=`
`.concat(C,"...").concat(M),$=!0):mt>3&&(N+=`
  `.concat(nt[Z-2]),tt++),N+=`
  `.concat(nt[Z-1]),tt++),G=Z,_+=`
`.concat(S,"-").concat(M," ").concat(nt[Z]),tt++;else if(nt.length<Z+1)mt>1&&Z>2&&(mt>4?(N+=`
`.concat(C,"...").concat(M),$=!0):mt>3&&(N+=`
  `.concat(ot[Z-2]),tt++),N+=`
  `.concat(ot[Z-1]),tt++),G=Z,N+=`
`.concat(y,"+").concat(M," ").concat(ot[Z]),tt++;else{var gt=nt[Z],Mt=ot[Z],Lt=Mt!==gt&&(!x(Mt,",")||Mt.slice(0,-1)!==gt);Lt&&x(gt,",")&&gt.slice(0,-1)===Mt&&(Lt=!1,Mt+=","),Lt?(mt>1&&Z>2&&(mt>4?(N+=`
`.concat(C,"...").concat(M),$=!0):mt>3&&(N+=`
  `.concat(ot[Z-2]),tt++),N+=`
  `.concat(ot[Z-1]),tt++),G=Z,N+=`
`.concat(y,"+").concat(M," ").concat(Mt),_+=`
`.concat(S,"-").concat(M," ").concat(gt),tt+=2):(N+=_,_="",(mt===1||Z===0)&&(N+=`
  `.concat(Mt),tt++))}if(tt>20&&Z<H-2)return"".concat(lt).concat(dt,`
`).concat(N,`
`).concat(C,"...").concat(M).concat(_,`
`)+"".concat(C,"...").concat(M)}return"".concat(lt).concat($?dt:"",`
`).concat(N).concat(_).concat(X).concat(Q)}var O=function(z){e(B,z);function B(F){var _;if(L(this,B),h(F)!=="object"||F===null)throw new d("options","Object",F);var N=F.message,G=F.operator,X=F.stackStartFn,$=F.actual,et=F.expected,ot=Error.stackTraceLimit;if(Error.stackTraceLimit=0,N!=null)_=p(this,g(B).call(this,String(N)));else if(b.stderr&&b.stderr.isTTY&&(b.stderr&&b.stderr.getColorDepth&&b.stderr.getColorDepth()!==1?(C="\x1B[34m",y="\x1B[32m",M="\x1B[39m",S="\x1B[31m"):(C="",y="",M="",S="")),h($)==="object"&&$!==null&&h(et)==="object"&&et!==null&&"stack"in $&&$ instanceof Error&&"stack"in et&&et instanceof Error&&($=m($),et=m(et)),G==="deepStrictEqual"||G==="strictEqual")_=p(this,g(B).call(this,I($,et,G)));else if(G==="notDeepStrictEqual"||G==="notStrictEqual"){var nt=a[G],Z=k($).split(`
`);if(G==="notStrictEqual"&&h($)==="object"&&$!==null&&(nt=a.notStrictEqualObject),Z.length>30)for(Z[26]="".concat(C,"...").concat(M);Z.length>27;)Z.pop();Z.length===1?_=p(this,g(B).call(this,"".concat(nt," ").concat(Z[0]))):_=p(this,g(B).call(this,"".concat(nt,`

`).concat(Z.join(`
`),`
`)))}else{var Q=k($),W="",J=a[G];G==="notDeepEqual"||G==="notEqual"?(Q="".concat(a[G],`

`).concat(Q),Q.length>1024&&(Q="".concat(Q.slice(0,1021),"..."))):(W="".concat(k(et)),Q.length>512&&(Q="".concat(Q.slice(0,509),"...")),W.length>512&&(W="".concat(W.slice(0,509),"...")),G==="deepEqual"||G==="equal"?Q="".concat(J,`

`).concat(Q,`

should equal

`):W=" ".concat(G," ").concat(W)),_=p(this,g(B).call(this,"".concat(Q).concat(W)))}return Error.stackTraceLimit=ot,_.generatedMessage=!N,Object.defineProperty(r(_),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),_.code="ERR_ASSERTION",_.actual=$,_.expected=et,_.operator=G,Error.captureStackTrace&&Error.captureStackTrace(r(_),X),_.stack,_.name="AssertionError",p(_)}return v(B,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:c.custom,value:function(_,N){return c(this,P({},N,{customInspect:!1,depth:0}))}}]),B}(s(Error));j.exports=O},86832:function(j,V,t){function b(h){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(c){return typeof c}:b=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},b(h)}function P(h,T){if(!(h instanceof T))throw new TypeError("Cannot call a class as a function")}function o(h,T){return T&&(b(T)==="object"||typeof T=="function")?T:L(h)}function L(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function A(h){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},A(h)}function v(h,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(T&&T.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),T&&p(h,T)}function p(h,T){return p=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},p(h,T)}var r={},e,s;function n(h,T,c){c||(c=Error);function i(x,w,C){return typeof T=="string"?T:T(x,w,C)}var d=function(x){v(w,x);function w(C,y,S){var M;return P(this,w),M=o(this,A(w).call(this,i(C,y,S))),M.code=h,M}return w}(c);r[h]=d}function l(h,T){if(Array.isArray(h)){var c=h.length;return h=h.map(function(i){return String(i)}),c>2?"one of ".concat(T," ").concat(h.slice(0,c-1).join(", "),", or ")+h[c-1]:c===2?"one of ".concat(T," ").concat(h[0]," or ").concat(h[1]):"of ".concat(T," ").concat(h[0])}else return"of ".concat(T," ").concat(String(h))}function f(h,T,c){return h.substr(0,T.length)===T}function u(h,T,c){return(c===void 0||c>h.length)&&(c=h.length),h.substring(c-T.length,c)===T}function g(h,T,c){return typeof c!="number"&&(c=0),c+T.length>h.length?!1:h.indexOf(T,c)!==-1}n("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),n("ERR_INVALID_ARG_TYPE",function(h,T,c){e===void 0&&(e=t(45408)),e(typeof h=="string","'name' must be a string");var i;typeof T=="string"&&f(T,"not ")?(i="must not be",T=T.replace(/^not /,"")):i="must be";var d;if(u(h," argument"))d="The ".concat(h," ").concat(i," ").concat(l(T,"type"));else{var x=g(h,".")?"property":"argument";d='The "'.concat(h,'" ').concat(x," ").concat(i," ").concat(l(T,"type"))}return d+=". Received type ".concat(b(c)),d},TypeError),n("ERR_INVALID_ARG_VALUE",function(h,T){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";s===void 0&&(s=t(35840));var i=s.inspect(T);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(h,"' ").concat(c,". Received ").concat(i)},TypeError),n("ERR_INVALID_RETURN_VALUE",function(h,T,c){var i;return c&&c.constructor&&c.constructor.name?i="instance of ".concat(c.constructor.name):i="type ".concat(b(c)),"Expected ".concat(h,' to be returned from the "').concat(T,'"')+" function but got ".concat(i,".")},TypeError),n("ERR_MISSING_ARGS",function(){for(var h=arguments.length,T=new Array(h),c=0;c<h;c++)T[c]=arguments[c];e===void 0&&(e=t(45408)),e(T.length>0,"At least one arg needs to be specified");var i="The ",d=T.length;switch(T=T.map(function(x){return'"'.concat(x,'"')}),d){case 1:i+="".concat(T[0]," argument");break;case 2:i+="".concat(T[0]," and ").concat(T[1]," arguments");break;default:i+=T.slice(0,d-1).join(", "),i+=", and ".concat(T[d-1]," arguments");break}return"".concat(i," must be specified")},TypeError),j.exports.codes=r},25116:function(j,V,t){function b(zt,xt){return L(zt)||o(zt,xt)||P()}function P(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(zt,xt){var Ct=[],wt=!0,Rt=!1,Tt=void 0;try{for(var Bt=zt[Symbol.iterator](),Gt;!(wt=(Gt=Bt.next()).done)&&(Ct.push(Gt.value),!(xt&&Ct.length===xt));wt=!0);}catch(te){Rt=!0,Tt=te}finally{try{!wt&&Bt.return!=null&&Bt.return()}finally{if(Rt)throw Tt}}return Ct}function L(zt){if(Array.isArray(zt))return zt}function A(zt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(Ct){return typeof Ct}:A=function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},A(zt)}var v=/a/g.flags!==void 0,p=function(xt){var Ct=[];return xt.forEach(function(wt){return Ct.push(wt)}),Ct},r=function(xt){var Ct=[];return xt.forEach(function(wt,Rt){return Ct.push([Rt,wt])}),Ct},e=Object.is?Object.is:t(39896),s=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},n=Number.isNaN?Number.isNaN:t(1560);function l(zt){return zt.call.bind(zt)}var f=l(Object.prototype.hasOwnProperty),u=l(Object.prototype.propertyIsEnumerable),g=l(Object.prototype.toString),h=t(35840).types,T=h.isAnyArrayBuffer,c=h.isArrayBufferView,i=h.isDate,d=h.isMap,x=h.isRegExp,w=h.isSet,C=h.isNativeError,y=h.isBoxedPrimitive,S=h.isNumberObject,M=h.isStringObject,a=h.isBooleanObject,E=h.isBigIntObject,m=h.isSymbolObject,k=h.isFloat32Array,I=h.isFloat64Array;function O(zt){if(zt.length===0||zt.length>10)return!0;for(var xt=0;xt<zt.length;xt++){var Ct=zt.charCodeAt(xt);if(Ct<48||Ct>57)return!0}return zt.length===10&&zt>=Math.pow(2,32)}function z(zt){return Object.keys(zt).filter(O).concat(s(zt).filter(Object.prototype.propertyIsEnumerable.bind(zt)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function B(zt,xt){if(zt===xt)return 0;for(var Ct=zt.length,wt=xt.length,Rt=0,Tt=Math.min(Ct,wt);Rt<Tt;++Rt)if(zt[Rt]!==xt[Rt]){Ct=zt[Rt],wt=xt[Rt];break}return Ct<wt?-1:wt<Ct?1:0}var F=!0,_=!1,N=0,G=1,X=2,$=3;function et(zt,xt){return v?zt.source===xt.source&&zt.flags===xt.flags:RegExp.prototype.toString.call(zt)===RegExp.prototype.toString.call(xt)}function ot(zt,xt){if(zt.byteLength!==xt.byteLength)return!1;for(var Ct=0;Ct<zt.byteLength;Ct++)if(zt[Ct]!==xt[Ct])return!1;return!0}function nt(zt,xt){return zt.byteLength!==xt.byteLength?!1:B(new Uint8Array(zt.buffer,zt.byteOffset,zt.byteLength),new Uint8Array(xt.buffer,xt.byteOffset,xt.byteLength))===0}function Z(zt,xt){return zt.byteLength===xt.byteLength&&B(new Uint8Array(zt),new Uint8Array(xt))===0}function Q(zt,xt){return S(zt)?S(xt)&&e(Number.prototype.valueOf.call(zt),Number.prototype.valueOf.call(xt)):M(zt)?M(xt)&&String.prototype.valueOf.call(zt)===String.prototype.valueOf.call(xt):a(zt)?a(xt)&&Boolean.prototype.valueOf.call(zt)===Boolean.prototype.valueOf.call(xt):E(zt)?E(xt)&&BigInt.prototype.valueOf.call(zt)===BigInt.prototype.valueOf.call(xt):m(xt)&&Symbol.prototype.valueOf.call(zt)===Symbol.prototype.valueOf.call(xt)}function W(zt,xt,Ct,wt){if(zt===xt)return zt!==0?!0:Ct?e(zt,xt):!0;if(Ct){if(A(zt)!=="object")return typeof zt=="number"&&n(zt)&&n(xt);if(A(xt)!=="object"||zt===null||xt===null||Object.getPrototypeOf(zt)!==Object.getPrototypeOf(xt))return!1}else{if(zt===null||A(zt)!=="object")return xt===null||A(xt)!=="object"?zt==xt:!1;if(xt===null||A(xt)!=="object")return!1}var Rt=g(zt),Tt=g(xt);if(Rt!==Tt)return!1;if(Array.isArray(zt)){if(zt.length!==xt.length)return!1;var Bt=z(zt),Gt=z(xt);return Bt.length!==Gt.length?!1:it(zt,xt,Ct,wt,G,Bt)}if(Rt==="[object Object]"&&(!d(zt)&&d(xt)||!w(zt)&&w(xt)))return!1;if(i(zt)){if(!i(xt)||Date.prototype.getTime.call(zt)!==Date.prototype.getTime.call(xt))return!1}else if(x(zt)){if(!x(xt)||!et(zt,xt))return!1}else if(C(zt)||zt instanceof Error){if(zt.message!==xt.message||zt.name!==xt.name)return!1}else if(c(zt)){if(!Ct&&(k(zt)||I(zt))){if(!ot(zt,xt))return!1}else if(!nt(zt,xt))return!1;var te=z(zt),Wt=z(xt);return te.length!==Wt.length?!1:it(zt,xt,Ct,wt,N,te)}else{if(w(zt))return!w(xt)||zt.size!==xt.size?!1:it(zt,xt,Ct,wt,X);if(d(zt))return!d(xt)||zt.size!==xt.size?!1:it(zt,xt,Ct,wt,$);if(T(zt)){if(!Z(zt,xt))return!1}else if(y(zt)&&!Q(zt,xt))return!1}return it(zt,xt,Ct,wt,N)}function J(zt,xt){return xt.filter(function(Ct){return u(zt,Ct)})}function it(zt,xt,Ct,wt,Rt,Tt){if(arguments.length===5){Tt=Object.keys(zt);var Bt=Object.keys(xt);if(Tt.length!==Bt.length)return!1}for(var Gt=0;Gt<Tt.length;Gt++)if(!f(xt,Tt[Gt]))return!1;if(Ct&&arguments.length===5){var te=s(zt);if(te.length!==0){var Wt=0;for(Gt=0;Gt<te.length;Gt++){var jt=te[Gt];if(u(zt,jt)){if(!u(xt,jt))return!1;Tt.push(jt),Wt++}else if(u(xt,jt))return!1}var ie=s(xt);if(te.length!==ie.length&&J(xt,ie).length!==Wt)return!1}else{var ue=s(xt);if(ue.length!==0&&J(xt,ue).length!==0)return!1}}if(Tt.length===0&&(Rt===N||Rt===G&&zt.length===0||zt.size===0))return!0;if(wt===void 0)wt={val1:new Map,val2:new Map,position:0};else{var fe=wt.val1.get(zt);if(fe!==void 0){var pe=wt.val2.get(xt);if(pe!==void 0)return fe===pe}wt.position++}wt.val1.set(zt,wt.position),wt.val2.set(xt,wt.position);var Te=gt(zt,xt,Ct,Tt,wt,Rt);return wt.val1.delete(zt),wt.val2.delete(xt),Te}function K(zt,xt,Ct,wt){for(var Rt=p(zt),Tt=0;Tt<Rt.length;Tt++){var Bt=Rt[Tt];if(W(xt,Bt,Ct,wt))return zt.delete(Bt),!0}return!1}function H(zt){switch(A(zt)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":zt=+zt;case"number":if(n(zt))return!1}return!0}function at(zt,xt,Ct){var wt=H(Ct);return wt??(xt.has(wt)&&!zt.has(wt))}function tt(zt,xt,Ct,wt,Rt){var Tt=H(Ct);if(Tt!=null)return Tt;var Bt=xt.get(Tt);return Bt===void 0&&!xt.has(Tt)||!W(wt,Bt,!1,Rt)?!1:!zt.has(Tt)&&W(wt,Bt,!1,Rt)}function lt(zt,xt,Ct,wt){for(var Rt=null,Tt=p(zt),Bt=0;Bt<Tt.length;Bt++){var Gt=Tt[Bt];if(A(Gt)==="object"&&Gt!==null)Rt===null&&(Rt=new Set),Rt.add(Gt);else if(!xt.has(Gt)){if(Ct||!at(zt,xt,Gt))return!1;Rt===null&&(Rt=new Set),Rt.add(Gt)}}if(Rt!==null){for(var te=p(xt),Wt=0;Wt<te.length;Wt++){var jt=te[Wt];if(A(jt)==="object"&&jt!==null){if(!K(Rt,jt,Ct,wt))return!1}else if(!Ct&&!zt.has(jt)&&!K(Rt,jt,Ct,wt))return!1}return Rt.size===0}return!0}function dt(zt,xt,Ct,wt,Rt,Tt){for(var Bt=p(zt),Gt=0;Gt<Bt.length;Gt++){var te=Bt[Gt];if(W(Ct,te,Rt,Tt)&&W(wt,xt.get(te),Rt,Tt))return zt.delete(te),!0}return!1}function mt(zt,xt,Ct,wt){for(var Rt=null,Tt=r(zt),Bt=0;Bt<Tt.length;Bt++){var Gt=b(Tt[Bt],2),te=Gt[0],Wt=Gt[1];if(A(te)==="object"&&te!==null)Rt===null&&(Rt=new Set),Rt.add(te);else{var jt=xt.get(te);if(jt===void 0&&!xt.has(te)||!W(Wt,jt,Ct,wt)){if(Ct||!tt(zt,xt,te,Wt,wt))return!1;Rt===null&&(Rt=new Set),Rt.add(te)}}}if(Rt!==null){for(var ie=r(xt),ue=0;ue<ie.length;ue++){var fe=b(ie[ue],2),te=fe[0],pe=fe[1];if(A(te)==="object"&&te!==null){if(!dt(Rt,zt,te,pe,Ct,wt))return!1}else if(!Ct&&(!zt.has(te)||!W(zt.get(te),pe,!1,wt))&&!dt(Rt,zt,te,pe,!1,wt))return!1}return Rt.size===0}return!0}function gt(zt,xt,Ct,wt,Rt,Tt){var Bt=0;if(Tt===X){if(!lt(zt,xt,Ct,Rt))return!1}else if(Tt===$){if(!mt(zt,xt,Ct,Rt))return!1}else if(Tt===G)for(;Bt<zt.length;Bt++)if(f(zt,Bt)){if(!f(xt,Bt)||!W(zt[Bt],xt[Bt],Ct,Rt))return!1}else{if(f(xt,Bt))return!1;for(var Gt=Object.keys(zt);Bt<Gt.length;Bt++){var te=Gt[Bt];if(!f(xt,te)||!W(zt[te],xt[te],Ct,Rt))return!1}return Gt.length===Object.keys(xt).length}for(Bt=0;Bt<wt.length;Bt++){var Wt=wt[Bt];if(!W(zt[Wt],xt[Wt],Ct,Rt))return!1}return!0}function Mt(zt,xt){return W(zt,xt,_)}function Lt(zt,xt){return W(zt,xt,F)}j.exports={isDeepEqual:Mt,isDeepStrictEqual:Lt}},83160:function(j,V,t){t.r(V),t.d(V,{decode:function(){return A},encode:function(){return L}});for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=typeof Uint8Array>"u"?[]:new Uint8Array(256),o=0;o<b.length;o++)P[b.charCodeAt(o)]=o;var L=function(v){var p=new Uint8Array(v),r,e=p.length,s="";for(r=0;r<e;r+=3)s+=b[p[r]>>2],s+=b[(p[r]&3)<<4|p[r+1]>>4],s+=b[(p[r+1]&15)<<2|p[r+2]>>6],s+=b[p[r+2]&63];return e%3===2?s=s.substring(0,s.length-1)+"=":e%3===1&&(s=s.substring(0,s.length-2)+"=="),s},A=function(v){var p=v.length*.75,r=v.length,e,s=0,n,l,f,u;v[v.length-1]==="="&&(p--,v[v.length-2]==="="&&p--);var g=new ArrayBuffer(p),h=new Uint8Array(g);for(e=0;e<r;e+=4)n=P[v.charCodeAt(e)],l=P[v.charCodeAt(e+1)],f=P[v.charCodeAt(e+2)],u=P[v.charCodeAt(e+3)],h[s++]=n<<2|l>>4,h[s++]=(l&15)<<4|f>>2,h[s++]=(f&3)<<6|u&63;return g}},59968:function(j,V){V.byteLength=p,V.toByteArray=e,V.fromByteArray=l;for(var t=[],b=[],P=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",L=0,A=o.length;L<A;++L)t[L]=o[L],b[o.charCodeAt(L)]=L;b[45]=62,b[95]=63;function v(f){var u=f.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=f.indexOf("=");g===-1&&(g=u);var h=g===u?0:4-g%4;return[g,h]}function p(f){var u=v(f),g=u[0],h=u[1];return(g+h)*3/4-h}function r(f,u,g){return(u+g)*3/4-g}function e(f){var u,g=v(f),h=g[0],T=g[1],c=new P(r(f,h,T)),i=0,d=T>0?h-4:h,x;for(x=0;x<d;x+=4)u=b[f.charCodeAt(x)]<<18|b[f.charCodeAt(x+1)]<<12|b[f.charCodeAt(x+2)]<<6|b[f.charCodeAt(x+3)],c[i++]=u>>16&255,c[i++]=u>>8&255,c[i++]=u&255;return T===2&&(u=b[f.charCodeAt(x)]<<2|b[f.charCodeAt(x+1)]>>4,c[i++]=u&255),T===1&&(u=b[f.charCodeAt(x)]<<10|b[f.charCodeAt(x+1)]<<4|b[f.charCodeAt(x+2)]>>2,c[i++]=u>>8&255,c[i++]=u&255),c}function s(f){return t[f>>18&63]+t[f>>12&63]+t[f>>6&63]+t[f&63]}function n(f,u,g){for(var h,T=[],c=u;c<g;c+=3)h=(f[c]<<16&16711680)+(f[c+1]<<8&65280)+(f[c+2]&255),T.push(s(h));return T.join("")}function l(f){for(var u,g=f.length,h=g%3,T=[],c=16383,i=0,d=g-h;i<d;i+=c)T.push(n(f,i,i+c>d?d:i+c));return h===1?(u=f[g-1],T.push(t[u>>2]+t[u<<4&63]+"==")):h===2&&(u=(f[g-2]<<8)+f[g-1],T.push(t[u>>10]+t[u>>4&63]+t[u<<2&63]+"=")),T.join("")}},64928:function(j){function V(A,v,p,r,e){for(var s=e+1;r<=e;){var n=r+e>>>1,l=A[n],f=p!==void 0?p(l,v):l-v;f>=0?(s=n,e=n-1):r=n+1}return s}function t(A,v,p,r,e){for(var s=e+1;r<=e;){var n=r+e>>>1,l=A[n],f=p!==void 0?p(l,v):l-v;f>0?(s=n,e=n-1):r=n+1}return s}function b(A,v,p,r,e){for(var s=r-1;r<=e;){var n=r+e>>>1,l=A[n],f=p!==void 0?p(l,v):l-v;f<0?(s=n,r=n+1):e=n-1}return s}function P(A,v,p,r,e){for(var s=r-1;r<=e;){var n=r+e>>>1,l=A[n],f=p!==void 0?p(l,v):l-v;f<=0?(s=n,r=n+1):e=n-1}return s}function o(A,v,p,r,e){for(;r<=e;){var s=r+e>>>1,n=A[s],l=p!==void 0?p(n,v):n-v;if(l===0)return s;l<=0?r=s+1:e=s-1}return-1}function L(A,v,p,r,e,s){return typeof p=="function"?s(A,v,p,r===void 0?0:r|0,e===void 0?A.length-1:e|0):s(A,v,void 0,p===void 0?0:p|0,r===void 0?A.length-1:r|0)}j.exports={ge:function(A,v,p,r,e){return L(A,v,p,r,e,V)},gt:function(A,v,p,r,e){return L(A,v,p,r,e,t)},lt:function(A,v,p,r,e){return L(A,v,p,r,e,b)},le:function(A,v,p,r,e){return L(A,v,p,r,e,P)},eq:function(A,v,p,r,e){return L(A,v,p,r,e,o)}}},308:function(j,V){"use restrict";var t=32;V.INT_BITS=t,V.INT_MAX=2147483647,V.INT_MIN=-1<<t-1,V.sign=function(o){return(o>0)-(o<0)},V.abs=function(o){var L=o>>t-1;return(o^L)-L},V.min=function(o,L){return L^(o^L)&-(o<L)},V.max=function(o,L){return o^(o^L)&-(o<L)},V.isPow2=function(o){return!(o&o-1)&&!!o},V.log2=function(o){var L,A;return L=(o>65535)<<4,o>>>=L,A=(o>255)<<3,o>>>=A,L|=A,A=(o>15)<<2,o>>>=A,L|=A,A=(o>3)<<1,o>>>=A,L|=A,L|o>>1},V.log10=function(o){return o>=1e9?9:o>=1e8?8:o>=1e7?7:o>=1e6?6:o>=1e5?5:o>=1e4?4:o>=1e3?3:o>=100?2:o>=10?1:0},V.popCount=function(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),(o+(o>>>4)&252645135)*16843009>>>24};function b(o){var L=32;return o&=-o,o&&L--,o&65535&&(L-=16),o&16711935&&(L-=8),o&252645135&&(L-=4),o&858993459&&(L-=2),o&1431655765&&(L-=1),L}V.countTrailingZeros=b,V.nextPow2=function(o){return o+=o===0,--o,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o+1},V.prevPow2=function(o){return o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o-(o>>>1)},V.parity=function(o){return o^=o>>>16,o^=o>>>8,o^=o>>>4,o&=15,27030>>>o&1};var P=new Array(256);(function(o){for(var L=0;L<256;++L){var A=L,v=L,p=7;for(A>>>=1;A;A>>>=1)v<<=1,v|=A&1,--p;o[L]=v<<p&255}})(P),V.reverse=function(o){return P[o&255]<<24|P[o>>>8&255]<<16|P[o>>>16&255]<<8|P[o>>>24&255]},V.interleave2=function(o,L){return o&=65535,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,L&=65535,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,o|L<<1},V.deinterleave2=function(o,L){return o=o>>>L&1431655765,o=(o|o>>>1)&858993459,o=(o|o>>>2)&252645135,o=(o|o>>>4)&16711935,o=(o|o>>>16)&65535,o<<16>>16},V.interleave3=function(o,L,A){return o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,L&=1023,L=(L|L<<16)&4278190335,L=(L|L<<8)&251719695,L=(L|L<<4)&3272356035,L=(L|L<<2)&1227133513,o|=L<<1,A&=1023,A=(A|A<<16)&4278190335,A=(A|A<<8)&251719695,A=(A|A<<4)&3272356035,A=(A|A<<2)&1227133513,o|A<<2},V.deinterleave3=function(o,L){return o=o>>>L&1227133513,o=(o|o>>>2)&3272356035,o=(o|o>>>4)&251719695,o=(o|o>>>8)&4278190335,o=(o|o>>>16)&1023,o<<22>>22},V.nextCombination=function(o){var L=o|o-1;return L+1|(~L&-~L)-1>>>b(o)+1}},29620:function(j,V,t){var b=t(32420);j.exports=o;var P=1e20;function o(v,p){p||(p={});var r=p.cutoff==null?.25:p.cutoff,e=p.radius==null?8:p.radius,s=p.channel||0,n,l,f,u,g,h,T,c,i,d,x;if(ArrayBuffer.isView(v)||Array.isArray(v)){if(!p.width||!p.height)throw Error("For raw data width and height should be provided by options");n=p.width,l=p.height,u=v,p.stride?h=p.stride:h=Math.floor(v.length/n/l)}else window.HTMLCanvasElement&&v instanceof window.HTMLCanvasElement?(c=v,T=c.getContext("2d"),n=c.width,l=c.height,i=T.getImageData(0,0,n,l),u=i.data,h=4):window.CanvasRenderingContext2D&&v instanceof window.CanvasRenderingContext2D?(c=v.canvas,T=v,n=c.width,l=c.height,i=T.getImageData(0,0,n,l),u=i.data,h=4):window.ImageData&&v instanceof window.ImageData&&(i=v,n=v.width,l=v.height,u=i.data,h=4);if(f=Math.max(n,l),window.Uint8ClampedArray&&u instanceof window.Uint8ClampedArray||window.Uint8Array&&u instanceof window.Uint8Array)for(g=u,u=Array(n*l),d=0,x=g.length;d<x;d++)u[d]=g[d*h+s]/255;else if(h!==1)throw Error("Raw data can have only 1 value per pixel");var w=Array(n*l),C=Array(n*l),y=Array(f),S=Array(f),M=Array(f+1),a=Array(f);for(d=0,x=n*l;d<x;d++){var E=u[d];w[d]=E===1?0:E===0?P:Math.pow(Math.max(0,.5-E),2),C[d]=E===1?P:E===0?0:Math.pow(Math.max(0,E-.5),2)}L(w,n,l,y,S,a,M),L(C,n,l,y,S,a,M);var m=window.Float32Array?new Float32Array(n*l):new Array(n*l);for(d=0,x=n*l;d<x;d++)m[d]=b(1-((w[d]-C[d])/e+r),0,1);return m}function L(v,p,r,e,s,n,l){for(var f=0;f<p;f++){for(var u=0;u<r;u++)e[u]=v[u*p+f];for(A(e,s,n,l,r),u=0;u<r;u++)v[u*p+f]=s[u]}for(u=0;u<r;u++){for(f=0;f<p;f++)e[f]=v[u*p+f];for(A(e,s,n,l,p),f=0;f<p;f++)v[u*p+f]=Math.sqrt(s[f])}}function A(v,p,r,e,s){r[0]=0,e[0]=-P,e[1]=+P;for(var n=1,l=0;n<s;n++){for(var f=(v[n]+n*n-(v[r[l]]+r[l]*r[l]))/(2*n-2*r[l]);f<=e[l];)l--,f=(v[n]+n*n-(v[r[l]]+r[l]*r[l]))/(2*n-2*r[l]);l++,r[l]=n,e[l]=f,e[l+1]=+P}for(n=0,l=0;n<s;n++){for(;e[l+1]<n;)l++;p[n]=(n-r[l])*(n-r[l])+v[r[l]]}}},99676:function(j,V,t){var b=t(53664),P=t(57916),o=P(b("String.prototype.indexOf"));j.exports=function(A,v){var p=b(A,!!v);return typeof p=="function"&&o(A,".prototype.")>-1?P(p):p}},57916:function(j,V,t){var b=t(8844),P=t(53664),o=t(14500),L=P("%TypeError%"),A=P("%Function.prototype.apply%"),v=P("%Function.prototype.call%"),p=P("%Reflect.apply%",!0)||b.call(v,A),r=P("%Object.defineProperty%",!0),e=P("%Math.max%");if(r)try{r({},"a",{value:1})}catch{r=null}j.exports=function(l){if(typeof l!="function")throw new L("a function is required");var f=p(b,v,arguments);return o(f,1+e(0,l.length-(arguments.length-1)),!0)};var s=function(){return p(b,A,arguments)};r?r(j.exports,"apply",{value:s}):j.exports.apply=s},32420:function(j){j.exports=V;function V(t,b,P){return b<P?t<b?b:t>P?P:t:t<P?P:t>b?b:t}},3808:function(j,V,t){var b=t(32420);j.exports=P,j.exports.to=P,j.exports.from=o;function P(L,A){A==null&&(A=!0);var v=L[0],p=L[1],r=L[2],e=L[3];e==null&&(e=A?1:255),A&&(v*=255,p*=255,r*=255,e*=255),v=b(v,0,255)&255,p=b(p,0,255)&255,r=b(r,0,255)&255,e=b(e,0,255)&255;var s=v*16777216+(p<<16)+(r<<8)+e;return s}function o(L,A){L=+L;var v=L>>>24,p=(L&16711680)>>>16,r=(L&65280)>>>8,e=L&255;return A===!1?[v,p,r,e]:[v/255,p/255,r/255,e/255]}},17592:function(j){j.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},72160:function(j,V,t){var b=t(96824),P=t(32420),o=t(72512);j.exports=function(v,p){(p==="float"||!p)&&(p="array"),p==="uint"&&(p="uint8"),p==="uint_clamped"&&(p="uint8_clamped");var r=o(p),e=new r(4),s=p!=="uint8"&&p!=="uint8_clamped";return(!v.length||typeof v=="string")&&(v=b(v),v[0]/=255,v[1]/=255,v[2]/=255),L(v)?(e[0]=v[0],e[1]=v[1],e[2]=v[2],e[3]=v[3]!=null?v[3]:255,s&&(e[0]/=255,e[1]/=255,e[2]/=255,e[3]/=255),e):(s?(e[0]=v[0],e[1]=v[1],e[2]=v[2],e[3]=v[3]!=null?v[3]:1):(e[0]=P(Math.floor(v[0]*255),0,255),e[1]=P(Math.floor(v[1]*255),0,255),e[2]=P(Math.floor(v[2]*255),0,255),e[3]=v[3]==null?255:P(Math.floor(v[3]*255),0,255)),e)};function L(A){return!!(A instanceof Uint8Array||A instanceof Uint8ClampedArray||Array.isArray(A)&&(A[0]>1||A[0]===0)&&(A[1]>1||A[1]===0)&&(A[2]>1||A[2]===0)&&(!A[3]||A[3]>1))}},96824:function(j,V,t){var b=t(95532),P=t(53576),o=t(32420);j.exports=function(A){var v,p=b(A);return p.space?(v=Array(3),v[0]=o(p.values[0],0,255),v[1]=o(p.values[1],0,255),v[2]=o(p.values[2],0,255),p.space[0]==="h"&&(v=P.rgb(v)),v.push(o(p.alpha,0,1)),v):[]}},95532:function(j,V,t){var b=t(17592);j.exports=o;var P={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function o(L){var A,v=[],p=1,r;if(typeof L=="string")if(L=L.toLowerCase(),b[L])v=b[L].slice(),r="rgb";else if(L==="transparent")p=0,r="rgb",v=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(L)){var e=L.slice(1),s=e.length,n=s<=4;p=1,n?(v=[parseInt(e[0]+e[0],16),parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16)],s===4&&(p=parseInt(e[3]+e[3],16)/255)):(v=[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)],s===8&&(p=parseInt(e[6]+e[7],16)/255)),v[0]||(v[0]=0),v[1]||(v[1]=0),v[2]||(v[2]=0),r="rgb"}else if(A=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(L)){var l=A[1],f=l==="rgb",e=l.replace(/a$/,"");r=e;var s=e==="cmyk"?4:e==="gray"?1:3;v=A[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(h,T){if(/%$/.test(h))return T===s?parseFloat(h)/100:e==="rgb"?parseFloat(h)*255/100:parseFloat(h);if(e[T]==="h"){if(/deg$/.test(h))return parseFloat(h);if(P[h]!==void 0)return P[h]}return parseFloat(h)}),l===e&&v.push(1),p=f||v[s]===void 0?1:v[s],v=v.slice(0,s)}else L.length>10&&/[0-9](?:\s|\/)/.test(L)&&(v=L.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),r=L.match(/([a-z])/ig).join("").toLowerCase());else isNaN(L)?Array.isArray(L)||L.length?(v=[L[0],L[1],L[2]],r="rgb",p=L.length===4?L[3]:1):L instanceof Object&&(L.r!=null||L.red!=null||L.R!=null?(r="rgb",v=[L.r||L.red||L.R||0,L.g||L.green||L.G||0,L.b||L.blue||L.B||0]):(r="hsl",v=[L.h||L.hue||L.H||0,L.s||L.saturation||L.S||0,L.l||L.lightness||L.L||L.b||L.brightness]),p=L.a||L.alpha||L.opacity||1,L.opacity!=null&&(p/=100)):(r="rgb",v=[L>>>16,(L&65280)>>>8,L&255]);return{space:r,values:v,alpha:p}}},53576:function(j,V,t){var b=t(19336);j.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(P){var o=P[0]/360,L=P[1]/100,A=P[2]/100,v,p,r,e,s;if(L===0)return s=A*255,[s,s,s];A<.5?p=A*(1+L):p=A+L-A*L,v=2*A-p,e=[0,0,0];for(var n=0;n<3;n++)r=o+.3333333333333333*-(n-1),r<0?r++:r>1&&r--,6*r<1?s=v+(p-v)*6*r:2*r<1?s=p:3*r<2?s=v+(p-v)*(.6666666666666666-r)*6:s=v,e[n]=s*255;return e}},b.hsl=function(P){var o=P[0]/255,L=P[1]/255,A=P[2]/255,v=Math.min(o,L,A),p=Math.max(o,L,A),r=p-v,e,s,n;return p===v?e=0:o===p?e=(L-A)/r:L===p?e=2+(A-o)/r:A===p&&(e=4+(o-L)/r),e=Math.min(e*60,360),e<0&&(e+=360),n=(v+p)/2,p===v?s=0:n<=.5?s=r/(p+v):s=r/(2-p-v),[e,s*100,n*100]}},19336:function(j){j.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},36116:function(j){j.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|ç)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|é)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|é)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|ã)o.?tom(e|é)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},42771:function(j,V,t){j.exports={parse:t(46416),stringify:t(49395)}},8744:function(j,V,t){var b=t(30584);j.exports={isSize:function(o){return/^[\d\.]/.test(o)||o.indexOf("/")!==-1||b.indexOf(o)!==-1}}},46416:function(j,V,t){var b=t(92384),P=t(68194),o=t(3748),L=t(2904),A=t(47916),v=t(7294),p=t(39956),r=t(8744).isSize;j.exports=s;var e=s.cache={};function s(l){if(typeof l!="string")throw new Error("Font argument must be a string.");if(e[l])return e[l];if(l==="")throw new Error("Cannot parse an empty string.");if(o.indexOf(l)!==-1)return e[l]={system:l};for(var f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},u=p(l,/\s+/),g;g=u.shift();){if(P.indexOf(g)!==-1)return["style","variant","weight","stretch"].forEach(function(T){f[T]=g}),e[l]=f;if(A.indexOf(g)!==-1){f.style=g;continue}if(g==="normal"||g==="small-caps"){f.variant=g;continue}if(v.indexOf(g)!==-1){f.stretch=g;continue}if(L.indexOf(g)!==-1){f.weight=g;continue}if(r(g)){var h=p(g,"/");if(f.size=h[0],h[1]!=null?f.lineHeight=n(h[1]):u[0]==="/"&&(u.shift(),f.lineHeight=n(u.shift())),!u.length)throw new Error("Missing required font-family.");return f.family=p(u.join(" "),/\s*,\s*/).map(b),e[l]=f}throw new Error("Unknown or unsupported font token: "+g)}throw new Error("Missing required font-size.")}function n(l){var f=parseFloat(l);return f.toString()===l?f:l}},49395:function(j,V,t){var b=t(55616),P=t(8744).isSize,o=l(t(68194)),L=l(t(3748)),A=l(t(2904)),v=l(t(47916)),p=l(t(7294)),r={normal:1,"small-caps":1},e={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},s={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};j.exports=function(u){if(u=b(u,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),u.system)return u.system&&n(u.system,L),u.system;if(n(u.style,v),n(u.variant,r),n(u.weight,A),n(u.stretch,p),u.size==null&&(u.size=s.size),typeof u.size=="number"&&(u.size+="px"),!P)throw Error("Bad size value `"+u.size+"`");u.family||(u.family=s.family),Array.isArray(u.family)&&(u.family.length||(u.family=[s.family]),u.family=u.family.map(function(h){return e[h]?h:'"'+h+'"'}).join(", "));var g=[];return g.push(u.style),u.variant!==u.style&&g.push(u.variant),u.weight!==u.variant&&u.weight!==u.style&&g.push(u.weight),u.stretch!==u.weight&&u.stretch!==u.variant&&u.stretch!==u.style&&g.push(u.stretch),g.push(u.size+(u.lineHeight==null||u.lineHeight==="normal"||u.lineHeight+""=="1"?"":"/"+u.lineHeight)),g.push(u.family),g.filter(Boolean).join(" ")};function n(f,u){if(f&&!u[f]&&!o[f])throw Error("Unknown keyword `"+f+"`");return f}function l(f){for(var u={},g=0;g<f.length;g++)u[f[g]]=1;return u}},27940:function(j,V,t){var b=t(81680),P=t(18496),o=t(87396),L=t(95920),A=t(50868),v=t(84323),p=Function.prototype.bind,r=Object.defineProperty,e=Object.prototype.hasOwnProperty,s;s=function(n,l,f){var u=P(l)&&o(l.value),g;return g=L(l),delete g.writable,delete g.value,g.get=function(){return!f.overwriteDefinition&&e.call(this,n)?u:(l.value=p.call(u,f.resolveContext?f.resolveContext(this):this),r(this,n,l),this[n])},g},j.exports=function(n){var l=A(arguments[1]);return b(l.resolveContext)&&o(l.resolveContext),v(n,function(f,u){return s(u,f,l)})}},21092:function(j,V,t){var b=t(81680),P=t(85488),o=t(38452),L=t(50868),A=t(71056),v=j.exports=function(p,r){var e,s,n,l,f;return arguments.length<2||typeof p!="string"?(l=r,r=p,p=null):l=arguments[2],b(p)?(e=A.call(p,"c"),s=A.call(p,"e"),n=A.call(p,"w")):(e=n=!0,s=!1),f={value:r,configurable:e,enumerable:s,writable:n},l?o(L(l),f):f};v.gs=function(p,r,e){var s,n,l,f;return typeof p!="string"?(l=e,e=r,r=p,p=null):l=arguments[3],b(r)?P(r)?b(e)?P(e)||(l=e,e=void 0):e=void 0:(l=r,r=e=void 0):r=void 0,b(p)?(s=A.call(p,"c"),n=A.call(p,"e")):(s=!0,n=!1),f={get:r,set:e,configurable:s,enumerable:n},l?o(L(l),f):f}},84706:function(j,V,t){t.d(V,{XE:function(){return b},kv:function(){return L},mo:function(){return v},Uf:function(){return p},SY:function(){return r},ik:function(){return e},oh:function(){return s}});function b(n,l){return n<l?-1:n>l?1:n>=l?0:NaN}function P(n){return n.length===1&&(n=o(n)),{left:function(l,f,u,g){for(u==null&&(u=0),g==null&&(g=l.length);u<g;){var h=u+g>>>1;n(l[h],f)<0?u=h+1:g=h}return u},right:function(l,f,u,g){for(u==null&&(u=0),g==null&&(g=l.length);u<g;){var h=u+g>>>1;n(l[h],f)>0?g=h:u=h+1}return u}}}function o(n){return function(l,f){return b(n(l),f)}}P(b);function L(n,l){var f=n.length,u=-1,g,h;if(l==null){for(;++u<f;)if((g=n[u])!=null&&g>=g)for(h=g;++u<f;)(g=n[u])!=null&&g>h&&(h=g)}else for(;++u<f;)if((g=l(n[u],u,n))!=null&&g>=g)for(h=g;++u<f;)(g=l(n[u],u,n))!=null&&g>h&&(h=g);return h}function A(n){return n===null?NaN:+n}function v(n,l){var f=n.length,u=f,g=-1,h,T=0;if(l==null)for(;++g<f;)isNaN(h=A(n[g]))?--u:T+=h;else for(;++g<f;)isNaN(h=A(l(n[g],g,n)))?--u:T+=h;if(u)return T/u}function p(n){for(var l=n.length,f,u=-1,g=0,h,T;++u<l;)g+=n[u].length;for(h=new Array(g);--l>=0;)for(T=n[l],f=T.length;--f>=0;)h[--g]=T[f];return h}function r(n,l){var f=n.length,u=-1,g,h;if(l==null){for(;++u<f;)if((g=n[u])!=null&&g>=g)for(h=g;++u<f;)(g=n[u])!=null&&h>g&&(h=g)}else for(;++u<f;)if((g=l(n[u],u,n))!=null&&g>=g)for(h=g;++u<f;)(g=l(n[u],u,n))!=null&&h>g&&(h=g);return h}function e(n,l,f){n=+n,l=+l,f=(g=arguments.length)<2?(l=n,n=0,1):g<3?1:+f;for(var u=-1,g=Math.max(0,Math.ceil((l-n)/f))|0,h=new Array(g);++u<g;)h[u]=n+u*f;return h}function s(n,l){var f=n.length,u=-1,g,h=0;if(l==null)for(;++u<f;)(g=+n[u])&&(h+=g);else for(;++u<f;)(g=+l(n[u],u,n))&&(h+=g);return h}},34712:function(j,V,t){t.d(V,{kH:function(){return L},UJ:function(){return A}});var b="$";function P(){}P.prototype=o.prototype={constructor:P,has:function(l){return b+l in this},get:function(l){return this[b+l]},set:function(l,f){return this[b+l]=f,this},remove:function(l){var f=b+l;return f in this&&delete this[f]},clear:function(){for(var l in this)l[0]===b&&delete this[l]},keys:function(){var l=[];for(var f in this)f[0]===b&&l.push(f.slice(1));return l},values:function(){var l=[];for(var f in this)f[0]===b&&l.push(this[f]);return l},entries:function(){var l=[];for(var f in this)f[0]===b&&l.push({key:f.slice(1),value:this[f]});return l},size:function(){var l=0;for(var f in this)f[0]===b&&++l;return l},empty:function(){for(var l in this)if(l[0]===b)return!1;return!0},each:function(l){for(var f in this)f[0]===b&&l(this[f],f.slice(1),this)}};function o(l,f){var u=new P;if(l instanceof P)l.each(function(i,d){u.set(d,i)});else if(Array.isArray(l)){var g=-1,h=l.length,T;if(f==null)for(;++g<h;)u.set(g,l[g]);else for(;++g<h;)u.set(f(T=l[g],g,l),T)}else if(l)for(var c in l)u.set(c,l[c]);return u}var L=o;function A(){var l=[],f=[],u,g,h;function T(i,d,x,w){if(d>=l.length)return u!=null&&i.sort(u),g!=null?g(i):i;for(var C=-1,y=i.length,S=l[d++],M,a,E=L(),m,k=x();++C<y;)(m=E.get(M=S(a=i[C])+""))?m.push(a):E.set(M,[a]);return E.each(function(I,O){w(k,O,T(I,d,x,w))}),k}function c(i,d){if(++d>l.length)return i;var x,w=f[d-1];return g!=null&&d>=l.length?x=i.entries():(x=[],i.each(function(C,y){x.push({key:y,values:c(C,d)})})),w!=null?x.sort(function(C,y){return w(C.key,y.key)}):x}return h={object:function(i){return T(i,0,v,p)},map:function(i){return T(i,0,r,e)},entries:function(i){return c(T(i,0,r,e),0)},key:function(i){return l.push(i),h},sortKeys:function(i){return f[l.length-1]=i,h},sortValues:function(i){return u=i,h},rollup:function(i){return g=i,h}}}function v(){return{}}function p(l,f,u){l[f]=u}function r(){return L()}function e(l,f,u){l.set(f,u)}function s(){}var n=L.prototype;s.prototype={constructor:s,has:n.has,add:function(l){return l+="",this[b+l]=l,this},remove:n.remove,clear:n.clear,values:n.keys,size:n.size,empty:n.empty,each:n.each}},49812:function(j,V,t){t.r(V),t.d(V,{forceCenter:function(){return b},forceCollide:function(){return E},forceLink:function(){return O},forceManyBody:function(){return Bt},forceRadial:function(){return Gt},forceSimulation:function(){return Tt},forceX:function(){return te},forceY:function(){return Wt}});function b(jt,ie){var ue;jt==null&&(jt=0),ie==null&&(ie=0);function fe(){var pe,Te=ue.length,Qt,Pt=0,Ot=0;for(pe=0;pe<Te;++pe)Qt=ue[pe],Pt+=Qt.x,Ot+=Qt.y;for(Pt=Pt/Te-jt,Ot=Ot/Te-ie,pe=0;pe<Te;++pe)Qt=ue[pe],Qt.x-=Pt,Qt.y-=Ot}return fe.initialize=function(pe){ue=pe},fe.x=function(pe){return arguments.length?(jt=+pe,fe):jt},fe.y=function(pe){return arguments.length?(ie=+pe,fe):ie},fe}function P(jt){return function(){return jt}}function o(){return(Math.random()-.5)*1e-6}function L(jt){var ie=+this._x.call(null,jt),ue=+this._y.call(null,jt);return A(this.cover(ie,ue),ie,ue,jt)}function A(jt,ie,ue,fe){if(isNaN(ie)||isNaN(ue))return jt;var pe,Te=jt._root,Qt={data:fe},Pt=jt._x0,Ot=jt._y0,Nt=jt._x1,Ht=jt._y1,St,kt,Ft,At,ft,pt,Dt,Ut;if(!Te)return jt._root=Qt,jt;for(;Te.length;)if((ft=ie>=(St=(Pt+Nt)/2))?Pt=St:Nt=St,(pt=ue>=(kt=(Ot+Ht)/2))?Ot=kt:Ht=kt,pe=Te,!(Te=Te[Dt=pt<<1|ft]))return pe[Dt]=Qt,jt;if(Ft=+jt._x.call(null,Te.data),At=+jt._y.call(null,Te.data),ie===Ft&&ue===At)return Qt.next=Te,pe?pe[Dt]=Qt:jt._root=Qt,jt;do pe=pe?pe[Dt]=new Array(4):jt._root=new Array(4),(ft=ie>=(St=(Pt+Nt)/2))?Pt=St:Nt=St,(pt=ue>=(kt=(Ot+Ht)/2))?Ot=kt:Ht=kt;while((Dt=pt<<1|ft)===(Ut=(At>=kt)<<1|Ft>=St));return pe[Ut]=Te,pe[Dt]=Qt,jt}function v(jt){var ie,ue,fe=jt.length,pe,Te,Qt=new Array(fe),Pt=new Array(fe),Ot=1/0,Nt=1/0,Ht=-1/0,St=-1/0;for(ue=0;ue<fe;++ue)isNaN(pe=+this._x.call(null,ie=jt[ue]))||isNaN(Te=+this._y.call(null,ie))||(Qt[ue]=pe,Pt[ue]=Te,pe<Ot&&(Ot=pe),pe>Ht&&(Ht=pe),Te<Nt&&(Nt=Te),Te>St&&(St=Te));if(Ot>Ht||Nt>St)return this;for(this.cover(Ot,Nt).cover(Ht,St),ue=0;ue<fe;++ue)A(this,Qt[ue],Pt[ue],jt[ue]);return this}function p(jt,ie){if(isNaN(jt=+jt)||isNaN(ie=+ie))return this;var ue=this._x0,fe=this._y0,pe=this._x1,Te=this._y1;if(isNaN(ue))pe=(ue=Math.floor(jt))+1,Te=(fe=Math.floor(ie))+1;else{for(var Qt=pe-ue,Pt=this._root,Ot,Nt;ue>jt||jt>=pe||fe>ie||ie>=Te;)switch(Nt=(ie<fe)<<1|jt<ue,Ot=new Array(4),Ot[Nt]=Pt,Pt=Ot,Qt*=2,Nt){case 0:pe=ue+Qt,Te=fe+Qt;break;case 1:ue=pe-Qt,Te=fe+Qt;break;case 2:pe=ue+Qt,fe=Te-Qt;break;case 3:ue=pe-Qt,fe=Te-Qt;break}this._root&&this._root.length&&(this._root=Pt)}return this._x0=ue,this._y0=fe,this._x1=pe,this._y1=Te,this}function r(){var jt=[];return this.visit(function(ie){if(!ie.length)do jt.push(ie.data);while(ie=ie.next)}),jt}function e(jt){return arguments.length?this.cover(+jt[0][0],+jt[0][1]).cover(+jt[1][0],+jt[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function s(jt,ie,ue,fe,pe){this.node=jt,this.x0=ie,this.y0=ue,this.x1=fe,this.y1=pe}function n(jt,ie,ue){var fe,pe=this._x0,Te=this._y0,Qt,Pt,Ot,Nt,Ht=this._x1,St=this._y1,kt=[],Ft=this._root,At,ft;for(Ft&&kt.push(new s(Ft,pe,Te,Ht,St)),ue==null?ue=1/0:(pe=jt-ue,Te=ie-ue,Ht=jt+ue,St=ie+ue,ue*=ue);At=kt.pop();)if(!(!(Ft=At.node)||(Qt=At.x0)>Ht||(Pt=At.y0)>St||(Ot=At.x1)<pe||(Nt=At.y1)<Te))if(Ft.length){var pt=(Qt+Ot)/2,Dt=(Pt+Nt)/2;kt.push(new s(Ft[3],pt,Dt,Ot,Nt),new s(Ft[2],Qt,Dt,pt,Nt),new s(Ft[1],pt,Pt,Ot,Dt),new s(Ft[0],Qt,Pt,pt,Dt)),(ft=(ie>=Dt)<<1|jt>=pt)&&(At=kt[kt.length-1],kt[kt.length-1]=kt[kt.length-1-ft],kt[kt.length-1-ft]=At)}else{var Ut=jt-+this._x.call(null,Ft.data),$t=ie-+this._y.call(null,Ft.data),re=Ut*Ut+$t*$t;if(re<ue){var Be=Math.sqrt(ue=re);pe=jt-Be,Te=ie-Be,Ht=jt+Be,St=ie+Be,fe=Ft.data}}return fe}function l(jt){if(isNaN(Ht=+this._x.call(null,jt))||isNaN(St=+this._y.call(null,jt)))return this;var ie,ue=this._root,fe,pe,Te,Qt=this._x0,Pt=this._y0,Ot=this._x1,Nt=this._y1,Ht,St,kt,Ft,At,ft,pt,Dt;if(!ue)return this;if(ue.length)for(;;){if((At=Ht>=(kt=(Qt+Ot)/2))?Qt=kt:Ot=kt,(ft=St>=(Ft=(Pt+Nt)/2))?Pt=Ft:Nt=Ft,ie=ue,!(ue=ue[pt=ft<<1|At]))return this;if(!ue.length)break;(ie[pt+1&3]||ie[pt+2&3]||ie[pt+3&3])&&(fe=ie,Dt=pt)}for(;ue.data!==jt;)if(pe=ue,!(ue=ue.next))return this;return(Te=ue.next)&&delete ue.next,pe?(Te?pe.next=Te:delete pe.next,this):ie?(Te?ie[pt]=Te:delete ie[pt],(ue=ie[0]||ie[1]||ie[2]||ie[3])&&ue===(ie[3]||ie[2]||ie[1]||ie[0])&&!ue.length&&(fe?fe[Dt]=ue:this._root=ue),this):(this._root=Te,this)}function f(jt){for(var ie=0,ue=jt.length;ie<ue;++ie)this.remove(jt[ie]);return this}function u(){return this._root}function g(){var jt=0;return this.visit(function(ie){if(!ie.length)do++jt;while(ie=ie.next)}),jt}function h(jt){var ie=[],ue,fe=this._root,pe,Te,Qt,Pt,Ot;for(fe&&ie.push(new s(fe,this._x0,this._y0,this._x1,this._y1));ue=ie.pop();)if(!jt(fe=ue.node,Te=ue.x0,Qt=ue.y0,Pt=ue.x1,Ot=ue.y1)&&fe.length){var Nt=(Te+Pt)/2,Ht=(Qt+Ot)/2;(pe=fe[3])&&ie.push(new s(pe,Nt,Ht,Pt,Ot)),(pe=fe[2])&&ie.push(new s(pe,Te,Ht,Nt,Ot)),(pe=fe[1])&&ie.push(new s(pe,Nt,Qt,Pt,Ht)),(pe=fe[0])&&ie.push(new s(pe,Te,Qt,Nt,Ht))}return this}function T(jt){var ie=[],ue=[],fe;for(this._root&&ie.push(new s(this._root,this._x0,this._y0,this._x1,this._y1));fe=ie.pop();){var pe=fe.node;if(pe.length){var Te,Qt=fe.x0,Pt=fe.y0,Ot=fe.x1,Nt=fe.y1,Ht=(Qt+Ot)/2,St=(Pt+Nt)/2;(Te=pe[0])&&ie.push(new s(Te,Qt,Pt,Ht,St)),(Te=pe[1])&&ie.push(new s(Te,Ht,Pt,Ot,St)),(Te=pe[2])&&ie.push(new s(Te,Qt,St,Ht,Nt)),(Te=pe[3])&&ie.push(new s(Te,Ht,St,Ot,Nt))}ue.push(fe)}for(;fe=ue.pop();)jt(fe.node,fe.x0,fe.y0,fe.x1,fe.y1);return this}function c(jt){return jt[0]}function i(jt){return arguments.length?(this._x=jt,this):this._x}function d(jt){return jt[1]}function x(jt){return arguments.length?(this._y=jt,this):this._y}function w(jt,ie,ue){var fe=new C(ie??c,ue??d,NaN,NaN,NaN,NaN);return jt==null?fe:fe.addAll(jt)}function C(jt,ie,ue,fe,pe,Te){this._x=jt,this._y=ie,this._x0=ue,this._y0=fe,this._x1=pe,this._y1=Te,this._root=void 0}function y(jt){for(var ie={data:jt.data},ue=ie;jt=jt.next;)ue=ue.next={data:jt.data};return ie}var S=w.prototype=C.prototype;S.copy=function(){var jt=new C(this._x,this._y,this._x0,this._y0,this._x1,this._y1),ie=this._root,ue,fe;if(!ie)return jt;if(!ie.length)return jt._root=y(ie),jt;for(ue=[{source:ie,target:jt._root=new Array(4)}];ie=ue.pop();)for(var pe=0;pe<4;++pe)(fe=ie.source[pe])&&(fe.length?ue.push({source:fe,target:ie.target[pe]=new Array(4)}):ie.target[pe]=y(fe));return jt},S.add=L,S.addAll=v,S.cover=p,S.data=r,S.extent=e,S.find=n,S.remove=l,S.removeAll=f,S.root=u,S.size=g,S.visit=h,S.visitAfter=T,S.x=i,S.y=x;function M(jt){return jt.x+jt.vx}function a(jt){return jt.y+jt.vy}function E(jt){var ie,ue,fe=1,pe=1;typeof jt!="function"&&(jt=P(jt==null?1:+jt));function Te(){for(var Ot,Nt=ie.length,Ht,St,kt,Ft,At,ft,pt=0;pt<pe;++pt)for(Ht=w(ie,M,a).visitAfter(Qt),Ot=0;Ot<Nt;++Ot)St=ie[Ot],At=ue[St.index],ft=At*At,kt=St.x+St.vx,Ft=St.y+St.vy,Ht.visit(Dt);function Dt(Ut,$t,re,Be,We){var me=Ut.data,Se=Ut.r,je=At+Se;if(me){if(me.index>St.index){var vr=kt-me.x-me.vx,he=Ft-me.y-me.vy,Ye=vr*vr+he*he;Ye<je*je&&(vr===0&&(vr=o(),Ye+=vr*vr),he===0&&(he=o(),Ye+=he*he),Ye=(je-(Ye=Math.sqrt(Ye)))/Ye*fe,St.vx+=(vr*=Ye)*(je=(Se*=Se)/(ft+Se)),St.vy+=(he*=Ye)*je,me.vx-=vr*(je=1-je),me.vy-=he*je)}return}return $t>kt+je||Be<kt-je||re>Ft+je||We<Ft-je}}function Qt(Ot){if(Ot.data)return Ot.r=ue[Ot.data.index];for(var Nt=Ot.r=0;Nt<4;++Nt)Ot[Nt]&&Ot[Nt].r>Ot.r&&(Ot.r=Ot[Nt].r)}function Pt(){if(ie){var Ot,Nt=ie.length,Ht;for(ue=new Array(Nt),Ot=0;Ot<Nt;++Ot)Ht=ie[Ot],ue[Ht.index]=+jt(Ht,Ot,ie)}}return Te.initialize=function(Ot){ie=Ot,Pt()},Te.iterations=function(Ot){return arguments.length?(pe=+Ot,Te):pe},Te.strength=function(Ot){return arguments.length?(fe=+Ot,Te):fe},Te.radius=function(Ot){return arguments.length?(jt=typeof Ot=="function"?Ot:P(+Ot),Pt(),Te):jt},Te}var m=t(34712);function k(jt){return jt.index}function I(jt,ie){var ue=jt.get(ie);if(!ue)throw new Error("missing: "+ie);return ue}function O(jt){var ie=k,ue=Ht,fe,pe=P(30),Te,Qt,Pt,Ot,Nt=1;jt==null&&(jt=[]);function Ht(ft){return 1/Math.min(Pt[ft.source.index],Pt[ft.target.index])}function St(ft){for(var pt=0,Dt=jt.length;pt<Nt;++pt)for(var Ut=0,$t,re,Be,We,me,Se,je;Ut<Dt;++Ut)$t=jt[Ut],re=$t.source,Be=$t.target,We=Be.x+Be.vx-re.x-re.vx||o(),me=Be.y+Be.vy-re.y-re.vy||o(),Se=Math.sqrt(We*We+me*me),Se=(Se-Te[Ut])/Se*ft*fe[Ut],We*=Se,me*=Se,Be.vx-=We*(je=Ot[Ut]),Be.vy-=me*je,re.vx+=We*(je=1-je),re.vy+=me*je}function kt(){if(Qt){var ft,pt=Qt.length,Dt=jt.length,Ut=(0,m.kH)(Qt,ie),$t;for(ft=0,Pt=new Array(pt);ft<Dt;++ft)$t=jt[ft],$t.index=ft,typeof $t.source!="object"&&($t.source=I(Ut,$t.source)),typeof $t.target!="object"&&($t.target=I(Ut,$t.target)),Pt[$t.source.index]=(Pt[$t.source.index]||0)+1,Pt[$t.target.index]=(Pt[$t.target.index]||0)+1;for(ft=0,Ot=new Array(Dt);ft<Dt;++ft)$t=jt[ft],Ot[ft]=Pt[$t.source.index]/(Pt[$t.source.index]+Pt[$t.target.index]);fe=new Array(Dt),Ft(),Te=new Array(Dt),At()}}function Ft(){if(Qt)for(var ft=0,pt=jt.length;ft<pt;++ft)fe[ft]=+ue(jt[ft],ft,jt)}function At(){if(Qt)for(var ft=0,pt=jt.length;ft<pt;++ft)Te[ft]=+pe(jt[ft],ft,jt)}return St.initialize=function(ft){Qt=ft,kt()},St.links=function(ft){return arguments.length?(jt=ft,kt(),St):jt},St.id=function(ft){return arguments.length?(ie=ft,St):ie},St.iterations=function(ft){return arguments.length?(Nt=+ft,St):Nt},St.strength=function(ft){return arguments.length?(ue=typeof ft=="function"?ft:P(+ft),Ft(),St):ue},St.distance=function(ft){return arguments.length?(pe=typeof ft=="function"?ft:P(+ft),At(),St):pe},St}var z={value:function(){}};function B(){for(var jt=0,ie=arguments.length,ue={},fe;jt<ie;++jt){if(!(fe=arguments[jt]+"")||fe in ue||/[\s.]/.test(fe))throw new Error("illegal type: "+fe);ue[fe]=[]}return new F(ue)}function F(jt){this._=jt}function _(jt,ie){return jt.trim().split(/^|\s+/).map(function(ue){var fe="",pe=ue.indexOf(".");if(pe>=0&&(fe=ue.slice(pe+1),ue=ue.slice(0,pe)),ue&&!ie.hasOwnProperty(ue))throw new Error("unknown type: "+ue);return{type:ue,name:fe}})}F.prototype=B.prototype={constructor:F,on:function(jt,ie){var ue=this._,fe=_(jt+"",ue),pe,Te=-1,Qt=fe.length;if(arguments.length<2){for(;++Te<Qt;)if((pe=(jt=fe[Te]).type)&&(pe=N(ue[pe],jt.name)))return pe;return}if(ie!=null&&typeof ie!="function")throw new Error("invalid callback: "+ie);for(;++Te<Qt;)if(pe=(jt=fe[Te]).type)ue[pe]=G(ue[pe],jt.name,ie);else if(ie==null)for(pe in ue)ue[pe]=G(ue[pe],jt.name,null);return this},copy:function(){var jt={},ie=this._;for(var ue in ie)jt[ue]=ie[ue].slice();return new F(jt)},call:function(jt,ie){if((pe=arguments.length-2)>0)for(var ue=new Array(pe),fe=0,pe,Te;fe<pe;++fe)ue[fe]=arguments[fe+2];if(!this._.hasOwnProperty(jt))throw new Error("unknown type: "+jt);for(Te=this._[jt],fe=0,pe=Te.length;fe<pe;++fe)Te[fe].value.apply(ie,ue)},apply:function(jt,ie,ue){if(!this._.hasOwnProperty(jt))throw new Error("unknown type: "+jt);for(var fe=this._[jt],pe=0,Te=fe.length;pe<Te;++pe)fe[pe].value.apply(ie,ue)}};function N(jt,ie){for(var ue=0,fe=jt.length,pe;ue<fe;++ue)if((pe=jt[ue]).name===ie)return pe.value}function G(jt,ie,ue){for(var fe=0,pe=jt.length;fe<pe;++fe)if(jt[fe].name===ie){jt[fe]=z,jt=jt.slice(0,fe).concat(jt.slice(fe+1));break}return ue!=null&&jt.push({name:ie,value:ue}),jt}var X=B,$=0,et=0,ot=0,nt=1e3,Z,Q,W=0,J=0,it=0,K=typeof performance=="object"&&performance.now?performance:Date,H=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(jt){setTimeout(jt,17)};function at(){return J||(H(tt),J=K.now()+it)}function tt(){J=0}function lt(){this._call=this._time=this._next=null}lt.prototype=dt.prototype={constructor:lt,restart:function(jt,ie,ue){if(typeof jt!="function")throw new TypeError("callback is not a function");ue=(ue==null?at():+ue)+(ie==null?0:+ie),!this._next&&Q!==this&&(Q?Q._next=this:Z=this,Q=this),this._call=jt,this._time=ue,zt()},stop:function(){this._call&&(this._call=null,this._time=1/0,zt())}};function dt(jt,ie,ue){var fe=new lt;return fe.restart(jt,ie,ue),fe}function mt(){at(),++$;for(var jt=Z,ie;jt;)(ie=J-jt._time)>=0&&jt._call.call(null,ie),jt=jt._next;--$}function gt(){J=(W=K.now())+it,$=et=0;try{mt()}finally{$=0,Lt(),J=0}}function Mt(){var jt=K.now(),ie=jt-W;ie>nt&&(it-=ie,W=jt)}function Lt(){for(var jt,ie=Z,ue,fe=1/0;ie;)ie._call?(fe>ie._time&&(fe=ie._time),jt=ie,ie=ie._next):(ue=ie._next,ie._next=null,ie=jt?jt._next=ue:Z=ue);Q=jt,zt(fe)}function zt(jt){if(!$){et&&(et=clearTimeout(et));var ie=jt-J;ie>24?(jt<1/0&&(et=setTimeout(gt,jt-K.now()-it)),ot&&(ot=clearInterval(ot))):(ot||(W=K.now(),ot=setInterval(Mt,nt)),$=1,H(gt))}}function xt(jt){return jt.x}function Ct(jt){return jt.y}var wt=10,Rt=Math.PI*(3-Math.sqrt(5));function Tt(jt){var ie,ue=1,fe=.001,pe=1-Math.pow(fe,1/300),Te=0,Qt=.6,Pt=(0,m.kH)(),Ot=dt(Ht),Nt=X("tick","end");jt==null&&(jt=[]);function Ht(){St(),Nt.call("tick",ie),ue<fe&&(Ot.stop(),Nt.call("end",ie))}function St(At){var ft,pt=jt.length,Dt;At===void 0&&(At=1);for(var Ut=0;Ut<At;++Ut)for(ue+=(Te-ue)*pe,Pt.each(function($t){$t(ue)}),ft=0;ft<pt;++ft)Dt=jt[ft],Dt.fx==null?Dt.x+=Dt.vx*=Qt:(Dt.x=Dt.fx,Dt.vx=0),Dt.fy==null?Dt.y+=Dt.vy*=Qt:(Dt.y=Dt.fy,Dt.vy=0);return ie}function kt(){for(var At=0,ft=jt.length,pt;At<ft;++At){if(pt=jt[At],pt.index=At,pt.fx!=null&&(pt.x=pt.fx),pt.fy!=null&&(pt.y=pt.fy),isNaN(pt.x)||isNaN(pt.y)){var Dt=wt*Math.sqrt(At),Ut=At*Rt;pt.x=Dt*Math.cos(Ut),pt.y=Dt*Math.sin(Ut)}(isNaN(pt.vx)||isNaN(pt.vy))&&(pt.vx=pt.vy=0)}}function Ft(At){return At.initialize&&At.initialize(jt),At}return kt(),ie={tick:St,restart:function(){return Ot.restart(Ht),ie},stop:function(){return Ot.stop(),ie},nodes:function(At){return arguments.length?(jt=At,kt(),Pt.each(Ft),ie):jt},alpha:function(At){return arguments.length?(ue=+At,ie):ue},alphaMin:function(At){return arguments.length?(fe=+At,ie):fe},alphaDecay:function(At){return arguments.length?(pe=+At,ie):+pe},alphaTarget:function(At){return arguments.length?(Te=+At,ie):Te},velocityDecay:function(At){return arguments.length?(Qt=1-At,ie):1-Qt},force:function(At,ft){return arguments.length>1?(ft==null?Pt.remove(At):Pt.set(At,Ft(ft)),ie):Pt.get(At)},find:function(At,ft,pt){var Dt=0,Ut=jt.length,$t,re,Be,We,me;for(pt==null?pt=1/0:pt*=pt,Dt=0;Dt<Ut;++Dt)We=jt[Dt],$t=At-We.x,re=ft-We.y,Be=$t*$t+re*re,Be<pt&&(me=We,pt=Be);return me},on:function(At,ft){return arguments.length>1?(Nt.on(At,ft),ie):Nt.on(At)}}}function Bt(){var jt,ie,ue,fe=P(-30),pe,Te=1,Qt=1/0,Pt=.81;function Ot(kt){var Ft,At=jt.length,ft=w(jt,xt,Ct).visitAfter(Ht);for(ue=kt,Ft=0;Ft<At;++Ft)ie=jt[Ft],ft.visit(St)}function Nt(){if(jt){var kt,Ft=jt.length,At;for(pe=new Array(Ft),kt=0;kt<Ft;++kt)At=jt[kt],pe[At.index]=+fe(At,kt,jt)}}function Ht(kt){var Ft=0,At,ft,pt=0,Dt,Ut,$t;if(kt.length){for(Dt=Ut=$t=0;$t<4;++$t)(At=kt[$t])&&(ft=Math.abs(At.value))&&(Ft+=At.value,pt+=ft,Dt+=ft*At.x,Ut+=ft*At.y);kt.x=Dt/pt,kt.y=Ut/pt}else{At=kt,At.x=At.data.x,At.y=At.data.y;do Ft+=pe[At.data.index];while(At=At.next)}kt.value=Ft}function St(kt,Ft,At,ft){if(!kt.value)return!0;var pt=kt.x-ie.x,Dt=kt.y-ie.y,Ut=ft-Ft,$t=pt*pt+Dt*Dt;if(Ut*Ut/Pt<$t)return $t<Qt&&(pt===0&&(pt=o(),$t+=pt*pt),Dt===0&&(Dt=o(),$t+=Dt*Dt),$t<Te&&($t=Math.sqrt(Te*$t)),ie.vx+=pt*kt.value*ue/$t,ie.vy+=Dt*kt.value*ue/$t),!0;if(kt.length||$t>=Qt)return;(kt.data!==ie||kt.next)&&(pt===0&&(pt=o(),$t+=pt*pt),Dt===0&&(Dt=o(),$t+=Dt*Dt),$t<Te&&($t=Math.sqrt(Te*$t)));do kt.data!==ie&&(Ut=pe[kt.data.index]*ue/$t,ie.vx+=pt*Ut,ie.vy+=Dt*Ut);while(kt=kt.next)}return Ot.initialize=function(kt){jt=kt,Nt()},Ot.strength=function(kt){return arguments.length?(fe=typeof kt=="function"?kt:P(+kt),Nt(),Ot):fe},Ot.distanceMin=function(kt){return arguments.length?(Te=kt*kt,Ot):Math.sqrt(Te)},Ot.distanceMax=function(kt){return arguments.length?(Qt=kt*kt,Ot):Math.sqrt(Qt)},Ot.theta=function(kt){return arguments.length?(Pt=kt*kt,Ot):Math.sqrt(Pt)},Ot}function Gt(jt,ie,ue){var fe,pe=P(.1),Te,Qt;typeof jt!="function"&&(jt=P(+jt)),ie==null&&(ie=0),ue==null&&(ue=0);function Pt(Nt){for(var Ht=0,St=fe.length;Ht<St;++Ht){var kt=fe[Ht],Ft=kt.x-ie||1e-6,At=kt.y-ue||1e-6,ft=Math.sqrt(Ft*Ft+At*At),pt=(Qt[Ht]-ft)*Te[Ht]*Nt/ft;kt.vx+=Ft*pt,kt.vy+=At*pt}}function Ot(){if(fe){var Nt,Ht=fe.length;for(Te=new Array(Ht),Qt=new Array(Ht),Nt=0;Nt<Ht;++Nt)Qt[Nt]=+jt(fe[Nt],Nt,fe),Te[Nt]=isNaN(Qt[Nt])?0:+pe(fe[Nt],Nt,fe)}}return Pt.initialize=function(Nt){fe=Nt,Ot()},Pt.strength=function(Nt){return arguments.length?(pe=typeof Nt=="function"?Nt:P(+Nt),Ot(),Pt):pe},Pt.radius=function(Nt){return arguments.length?(jt=typeof Nt=="function"?Nt:P(+Nt),Ot(),Pt):jt},Pt.x=function(Nt){return arguments.length?(ie=+Nt,Pt):ie},Pt.y=function(Nt){return arguments.length?(ue=+Nt,Pt):ue},Pt}function te(jt){var ie=P(.1),ue,fe,pe;typeof jt!="function"&&(jt=P(jt==null?0:+jt));function Te(Pt){for(var Ot=0,Nt=ue.length,Ht;Ot<Nt;++Ot)Ht=ue[Ot],Ht.vx+=(pe[Ot]-Ht.x)*fe[Ot]*Pt}function Qt(){if(ue){var Pt,Ot=ue.length;for(fe=new Array(Ot),pe=new Array(Ot),Pt=0;Pt<Ot;++Pt)fe[Pt]=isNaN(pe[Pt]=+jt(ue[Pt],Pt,ue))?0:+ie(ue[Pt],Pt,ue)}}return Te.initialize=function(Pt){ue=Pt,Qt()},Te.strength=function(Pt){return arguments.length?(ie=typeof Pt=="function"?Pt:P(+Pt),Qt(),Te):ie},Te.x=function(Pt){return arguments.length?(jt=typeof Pt=="function"?Pt:P(+Pt),Qt(),Te):jt},Te}function Wt(jt){var ie=P(.1),ue,fe,pe;typeof jt!="function"&&(jt=P(jt==null?0:+jt));function Te(Pt){for(var Ot=0,Nt=ue.length,Ht;Ot<Nt;++Ot)Ht=ue[Ot],Ht.vy+=(pe[Ot]-Ht.y)*fe[Ot]*Pt}function Qt(){if(ue){var Pt,Ot=ue.length;for(fe=new Array(Ot),pe=new Array(Ot),Pt=0;Pt<Ot;++Pt)fe[Pt]=isNaN(pe[Pt]=+jt(ue[Pt],Pt,ue))?0:+ie(ue[Pt],Pt,ue)}}return Te.initialize=function(Pt){ue=Pt,Qt()},Te.strength=function(Pt){return arguments.length?(ie=typeof Pt=="function"?Pt:P(+Pt),Qt(),Te):ie},Te.y=function(Pt){return arguments.length?(jt=typeof Pt=="function"?Pt:P(+Pt),Qt(),Te):jt},Te}},57624:function(j,V,t){t.d(V,{E9:function(){return i},SO:function(){return T}});function b(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function P(x,w){if((C=(x=w?x.toExponential(w-1):x.toExponential()).indexOf("e"))<0)return null;var C,y=x.slice(0,C);return[y.length>1?y[0]+y.slice(2):y,+x.slice(C+1)]}function o(x){return x=P(Math.abs(x)),x?x[1]:NaN}function L(x,w){return function(C,y){for(var S=C.length,M=[],a=0,E=x[0],m=0;S>0&&E>0&&(m+E+1>y&&(E=Math.max(1,y-m)),M.push(C.substring(S-=E,S+E)),!((m+=E+1)>y));)E=x[a=(a+1)%x.length];return M.reverse().join(w)}}function A(x){return function(w){return w.replace(/[0-9]/g,function(C){return x[+C]})}}var v=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function p(x){if(!(w=v.exec(x)))throw new Error("invalid format: "+x);var w;return new r({fill:w[1],align:w[2],sign:w[3],symbol:w[4],zero:w[5],width:w[6],comma:w[7],precision:w[8]&&w[8].slice(1),trim:w[9],type:w[10]})}p.prototype=r.prototype;function r(x){this.fill=x.fill===void 0?" ":x.fill+"",this.align=x.align===void 0?">":x.align+"",this.sign=x.sign===void 0?"-":x.sign+"",this.symbol=x.symbol===void 0?"":x.symbol+"",this.zero=!!x.zero,this.width=x.width===void 0?void 0:+x.width,this.comma=!!x.comma,this.precision=x.precision===void 0?void 0:+x.precision,this.trim=!!x.trim,this.type=x.type===void 0?"":x.type+""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function e(x){t:for(var w=x.length,C=1,y=-1,S;C<w;++C)switch(x[C]){case".":y=S=C;break;case"0":y===0&&(y=C),S=C;break;default:if(!+x[C])break t;y>0&&(y=0);break}return y>0?x.slice(0,y)+x.slice(S+1):x}var s;function n(x,w){var C=P(x,w);if(!C)return x+"";var y=C[0],S=C[1],M=S-(s=Math.max(-8,Math.min(8,Math.floor(S/3)))*3)+1,a=y.length;return M===a?y:M>a?y+new Array(M-a+1).join("0"):M>0?y.slice(0,M)+"."+y.slice(M):"0."+new Array(1-M).join("0")+P(x,Math.max(0,w+M-1))[0]}function l(x,w){var C=P(x,w);if(!C)return x+"";var y=C[0],S=C[1];return S<0?"0."+new Array(-S).join("0")+y:y.length>S+1?y.slice(0,S+1)+"."+y.slice(S+1):y+new Array(S-y.length+2).join("0")}var f={"%":function(x,w){return(x*100).toFixed(w)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:b,e:function(x,w){return x.toExponential(w)},f:function(x,w){return x.toFixed(w)},g:function(x,w){return x.toPrecision(w)},o:function(x){return Math.round(x).toString(8)},p:function(x,w){return l(x*100,w)},r:l,s:n,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function u(x){return x}var g=Array.prototype.map,h=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function T(x){var w=x.grouping===void 0||x.thousands===void 0?u:L(g.call(x.grouping,Number),x.thousands+""),C=x.currency===void 0?"":x.currency[0]+"",y=x.currency===void 0?"":x.currency[1]+"",S=x.decimal===void 0?".":x.decimal+"",M=x.numerals===void 0?u:A(g.call(x.numerals,String)),a=x.percent===void 0?"%":x.percent+"",E=x.minus===void 0?"-":x.minus+"",m=x.nan===void 0?"NaN":x.nan+"";function k(O){O=p(O);var z=O.fill,B=O.align,F=O.sign,_=O.symbol,N=O.zero,G=O.width,X=O.comma,$=O.precision,et=O.trim,ot=O.type;ot==="n"?(X=!0,ot="g"):f[ot]||($===void 0&&($=12),et=!0,ot="g"),(N||z==="0"&&B==="=")&&(N=!0,z="0",B="=");var nt=_==="$"?C:_==="#"&&/[boxX]/.test(ot)?"0"+ot.toLowerCase():"",Z=_==="$"?y:/[%p]/.test(ot)?a:"",Q=f[ot],W=/[defgprs%]/.test(ot);$=$===void 0?6:/[gprs]/.test(ot)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function J(it){var K=nt,H=Z,at,tt,lt;if(ot==="c")H=Q(it)+H,it="";else{it=+it;var dt=it<0||1/it<0;if(it=isNaN(it)?m:Q(Math.abs(it),$),et&&(it=e(it)),dt&&+it==0&&F!=="+"&&(dt=!1),K=(dt?F==="("?F:E:F==="-"||F==="("?"":F)+K,H=(ot==="s"?h[8+s/3]:"")+H+(dt&&F==="("?")":""),W){for(at=-1,tt=it.length;++at<tt;)if(lt=it.charCodeAt(at),48>lt||lt>57){H=(lt===46?S+it.slice(at+1):it.slice(at))+H,it=it.slice(0,at);break}}}X&&!N&&(it=w(it,1/0));var mt=K.length+it.length+H.length,gt=mt<G?new Array(G-mt+1).join(z):"";switch(X&&N&&(it=w(gt+it,gt.length?G-H.length:1/0),gt=""),B){case"<":it=K+it+H+gt;break;case"=":it=K+gt+it+H;break;case"^":it=gt.slice(0,mt=gt.length>>1)+K+it+H+gt.slice(mt);break;default:it=gt+K+it+H;break}return M(it)}return J.toString=function(){return O+""},J}function I(O,z){var B=k((O=p(O),O.type="f",O)),F=Math.max(-8,Math.min(8,Math.floor(o(z)/3)))*3,_=Math.pow(10,-F),N=h[8+F/3];return function(G){return B(_*G)+N}}return{format:k,formatPrefix:I}}var c,i;d({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function d(x){return c=T(x),i=c.format,c.formatPrefix,c}},87108:function(j,V,t){t.r(V),t.d(V,{geoAiry:function(){return N},geoAiryRaw:function(){return _},geoAitoff:function(){return X},geoAitoffRaw:function(){return G},geoArmadillo:function(){return et},geoArmadilloRaw:function(){return $},geoAugust:function(){return nt},geoAugustRaw:function(){return ot},geoBaker:function(){return J},geoBakerRaw:function(){return W},geoBerghaus:function(){return H},geoBerghausRaw:function(){return K},geoBertin1953:function(){return Lt},geoBertin1953Raw:function(){return Mt},geoBoggs:function(){return Gt},geoBoggsRaw:function(){return Bt},geoBonne:function(){return ue},geoBonneRaw:function(){return ie},geoBottomley:function(){return pe},geoBottomleyRaw:function(){return fe},geoBromley:function(){return Qt},geoBromleyRaw:function(){return Te},geoChamberlin:function(){return ft},geoChamberlinAfrica:function(){return At},geoChamberlinRaw:function(){return kt},geoCollignon:function(){return Dt},geoCollignonRaw:function(){return pt},geoCraig:function(){return $t},geoCraigRaw:function(){return Ut},geoCraster:function(){return We},geoCrasterRaw:function(){return Be},geoCylindricalEqualArea:function(){return Se},geoCylindricalEqualAreaRaw:function(){return me},geoCylindricalStereographic:function(){return vr},geoCylindricalStereographicRaw:function(){return je},geoEckert1:function(){return Ye},geoEckert1Raw:function(){return he},geoEckert2:function(){return mr},geoEckert2Raw:function(){return Qe},geoEckert3:function(){return ve},geoEckert3Raw:function(){return ir},geoEckert4:function(){return ge},geoEckert4Raw:function(){return ne},geoEckert5:function(){return Re},geoEckert5Raw:function(){return Ae},geoEckert6:function(){return ke},geoEckert6Raw:function(){return ze},geoEisenlohr:function(){return hr},geoEisenlohrRaw:function(){return Ke},geoFahey:function(){return fr},geoFaheyRaw:function(){return dr},geoFoucaut:function(){return xr},geoFoucautRaw:function(){return Lr},geoFoucautSinusoidal:function(){return Jt},geoFoucautSinusoidalRaw:function(){return Yt},geoGilbert:function(){return Xe},geoGingery:function(){return yr},geoGingeryRaw:function(){return rr},geoGinzburg4:function(){return vn},geoGinzburg4Raw:function(){return Tr},geoGinzburg5:function(){return En},geoGinzburg5Raw:function(){return Or},geoGinzburg6:function(){return gr},geoGinzburg6Raw:function(){return nn},geoGinzburg8:function(){return Xr},geoGinzburg8Raw:function(){return Pr},geoGinzburg9:function(){return pn},geoGinzburg9Raw:function(){return kr},geoGringorten:function(){return ma},geoGringortenQuincuncial:function(){return sc},geoGringortenRaw:function(){return Tn},geoGuyou:function(){return ln},geoGuyouRaw:function(){return Cr},geoHammer:function(){return dt},geoHammerRaw:function(){return tt},geoHammerRetroazimuthal:function(){return Un},geoHammerRetroazimuthalRaw:function(){return gn},geoHealpix:function(){return cn},geoHealpixRaw:function(){return Mr},geoHill:function(){return Yr},geoHillRaw:function(){return Er},geoHomolosine:function(){return Vn},geoHomolosineRaw:function(){return On},geoHufnagel:function(){return Zn},geoHufnagelRaw:function(){return zn},geoHyperelliptical:function(){return mi},geoHyperellipticalRaw:function(){return Ra},geoInterrupt:function(){return ro},geoInterruptedBoggs:function(){return il},geoInterruptedHomolosine:function(){return ni},geoInterruptedMollweide:function(){return Iu},geoInterruptedMollweideHemispheres:function(){return mo},geoInterruptedQuarticAuthalic:function(){return Ps},geoInterruptedSinuMollweide:function(){return uu},geoInterruptedSinusoidal:function(){return sl},geoKavrayskiy7:function(){return Xi},geoKavrayskiy7Raw:function(){return Ui},geoLagrange:function(){return no},geoLagrangeRaw:function(){return ll},geoLarrivee:function(){return of},geoLarriveeRaw:function(){return ko},geoLaskowski:function(){return Zf},geoLaskowskiRaw:function(){return Eo},geoLittrow:function(){return $i},geoLittrowRaw:function(){return as},geoLoximuthal:function(){return Ls},geoLoximuthalRaw:function(){return ku},geoMiller:function(){return zu},geoMillerRaw:function(){return is},geoModifiedStereographic:function(){return Ys},geoModifiedStereographicAlaska:function(){return _u},geoModifiedStereographicGs48:function(){return $f},geoModifiedStereographicGs50:function(){return qf},geoModifiedStereographicLee:function(){return uf},geoModifiedStereographicMiller:function(){return lf},geoModifiedStereographicRaw:function(){return sf},geoMollweide:function(){return wt},geoMollweideRaw:function(){return Ct},geoMtFlatPolarParabolic:function(){return ff},geoMtFlatPolarParabolicRaw:function(){return Ol},geoMtFlatPolarQuartic:function(){return tc},geoMtFlatPolarQuarticRaw:function(){return ms},geoMtFlatPolarSinusoidal:function(){return cf},geoMtFlatPolarSinusoidalRaw:function(){return cu},geoNaturalEarth:function(){return hf.c},geoNaturalEarth2:function(){return Vo},geoNaturalEarth2Raw:function(){return hu},geoNaturalEarthRaw:function(){return hf.g},geoNellHammer:function(){return Xs},geoNellHammerRaw:function(){return fl},geoNicolosi:function(){return Fu},geoNicolosiRaw:function(){return os},geoPatterson:function(){return dl},geoPattersonRaw:function(){return du},geoPeirceQuincuncial:function(){return mf},geoPierceQuincuncial:function(){return mf},geoPolyconic:function(){return rc},geoPolyconicRaw:function(){return pu},geoPolyhedral:function(){return xi},geoPolyhedralButterfly:function(){return Ul},geoPolyhedralCollignon:function(){return js},geoPolyhedralWaterman:function(){return Ds},geoProject:function(){return ic},geoQuantize:function(){return xf},geoQuincuncial:function(){return ws},geoRectangularPolyconic:function(){return bf},geoRectangularPolyconicRaw:function(){return Gu},geoRobinson:function(){return Is},geoRobinsonRaw:function(){return Zo},geoSatellite:function(){return Ks},geoSatelliteRaw:function(){return xu},geoSinuMollweide:function(){return An},geoSinuMollweideRaw:function(){return wn},geoSinusoidal:function(){return jt},geoSinusoidalRaw:function(){return Wt},geoStitch:function(){return Zl},geoTimes:function(){return Zi},geoTimesRaw:function(){return _s},geoTwoPointAzimuthal:function(){return Tu},geoTwoPointAzimuthalRaw:function(){return Yu},geoTwoPointAzimuthalUsa:function(){return Qs},geoTwoPointEquidistant:function(){return Af},geoTwoPointEquidistantRaw:function(){return jl},geoTwoPointEquidistantUsa:function(){return lc},geoVanDerGrinten:function(){return Kl},geoVanDerGrinten2:function(){return Mf},geoVanDerGrinten2Raw:function(){return Ml},geoVanDerGrinten3:function(){return uc},geoVanDerGrinten3Raw:function(){return Fs},geoVanDerGrinten4:function(){return Jl},geoVanDerGrinten4Raw:function(){return Lo},geoVanDerGrintenRaw:function(){return vo},geoWagner:function(){return Os},geoWagner4:function(){return Sf},geoWagner4Raw:function(){return Mu},geoWagner6:function(){return Zu},geoWagner6Raw:function(){return ql},geoWagner7:function(){return Xu},geoWagnerRaw:function(){return Ms},geoWiechel:function(){return ju},geoWiechelRaw:function(){return $s},geoWinkel3:function(){return Ef},geoWinkel3Raw:function(){return tu}});var b=t(87952),P=Math.abs,o=Math.atan,L=Math.atan2,A=Math.cos,v=Math.exp,p=Math.floor,r=Math.log,e=Math.max,s=Math.min,n=Math.pow,l=Math.round,f=Math.sign||function(Xt){return Xt>0?1:Xt<0?-1:0},u=Math.sin,g=Math.tan,h=1e-6,T=1e-12,c=Math.PI,i=c/2,d=c/4,x=Math.SQRT1_2,w=k(2),C=k(c),y=c*2,S=180/c,M=c/180;function a(Xt){return Xt?Xt/Math.sin(Xt):1}function E(Xt){return Xt>1?i:Xt<-1?-i:Math.asin(Xt)}function m(Xt){return Xt>1?0:Xt<-1?c:Math.acos(Xt)}function k(Xt){return Xt>0?Math.sqrt(Xt):0}function I(Xt){return Xt=v(2*Xt),(Xt-1)/(Xt+1)}function O(Xt){return(v(Xt)-v(-Xt))/2}function z(Xt){return(v(Xt)+v(-Xt))/2}function B(Xt){return r(Xt+k(Xt*Xt+1))}function F(Xt){return r(Xt+k(Xt*Xt-1))}function _(Xt){var ee=g(Xt/2),de=2*r(A(Xt/2))/(ee*ee);function ye(De,Pe){var Ie=A(De),pr=A(Pe),wr=u(Pe),sr=pr*Ie,Sr=-((1-sr?r((1+sr)/2)/(1-sr):-.5)+de/(1+sr));return[Sr*pr*u(De),Sr*wr]}return ye.invert=function(De,Pe){var Ie=k(De*De+Pe*Pe),pr=-Xt/2,wr=50,sr;if(!Ie)return[0,0];do{var Sr=pr/2,_r=A(Sr),Vr=u(Sr),rn=Vr/_r,bn=-r(P(_r));pr-=sr=(2/rn*bn-de*rn-Ie)/(-bn/(Vr*Vr)+1-de/(2*_r*_r))*(_r<0?.7:1)}while(P(sr)>h&&--wr>0);var Pn=u(pr);return[L(De*Pn,Ie*A(pr)),E(Pe*Pn/Ie)]},ye}function N(){var Xt=i,ee=(0,b.U)(_),de=ee(Xt);return de.radius=function(ye){return arguments.length?ee(Xt=ye*M):Xt*S},de.scale(179.976).clipAngle(147)}function G(Xt,ee){var de=A(ee),ye=a(m(de*A(Xt/=2)));return[2*de*u(Xt)*ye,u(ee)*ye]}G.invert=function(Xt,ee){if(!(Xt*Xt+4*ee*ee>c*c+h)){var de=Xt,ye=ee,De=25;do{var Pe=u(de),Ie=u(de/2),pr=A(de/2),wr=u(ye),sr=A(ye),Sr=u(2*ye),_r=wr*wr,Vr=sr*sr,rn=Ie*Ie,bn=1-Vr*pr*pr,Pn=bn?m(sr*pr)*k(In=1/bn):In=0,In,$n=2*Pn*sr*Ie-Xt,Da=Pn*wr-ee,Ia=In*(Vr*rn+Pn*sr*pr*_r),za=In*(.5*Pe*Sr-Pn*2*wr*Ie),Oa=In*.25*(Sr*Ie-Pn*wr*Vr*Pe),Ka=In*(_r*pr+Pn*rn*sr),pi=za*Oa-Ka*Ia;if(!pi)break;var Ni=(Da*za-$n*Ka)/pi,st=($n*Oa-Da*Ia)/pi;de-=Ni,ye-=st}while((P(Ni)>h||P(st)>h)&&--De>0);return[de,ye]}};function X(){return(0,b.c)(G).scale(152.63)}function $(Xt){var ee=u(Xt),de=A(Xt),ye=Xt>=0?1:-1,De=g(ye*Xt),Pe=(1+ee-de)/2;function Ie(pr,wr){var sr=A(wr),Sr=A(pr/=2);return[(1+sr)*u(pr),(ye*wr>-L(Sr,De)-.001?0:-ye*10)+Pe+u(wr)*de-(1+sr)*ee*Sr]}return Ie.invert=function(pr,wr){var sr=0,Sr=0,_r=50;do{var Vr=A(sr),rn=u(sr),bn=A(Sr),Pn=u(Sr),In=1+bn,$n=In*rn-pr,Da=Pe+Pn*de-In*ee*Vr-wr,Ia=In*Vr/2,za=-rn*Pn,Oa=ee*In*rn/2,Ka=de*bn+ee*Vr*Pn,pi=za*Oa-Ka*Ia,Ni=(Da*za-$n*Ka)/pi/2,st=($n*Oa-Da*Ia)/pi;P(st)>2&&(st/=2),sr-=Ni,Sr-=st}while((P(Ni)>h||P(st)>h)&&--_r>0);return ye*Sr>-L(A(sr),De)-.001?[sr*2,Sr]:null},Ie}function et(){var Xt=20*M,ee=Xt>=0?1:-1,de=g(ee*Xt),ye=(0,b.U)($),De=ye(Xt),Pe=De.stream;return De.parallel=function(Ie){return arguments.length?(de=g((ee=(Xt=Ie*M)>=0?1:-1)*Xt),ye(Xt)):Xt*S},De.stream=function(Ie){var pr=De.rotate(),wr=Pe(Ie),sr=(De.rotate([0,0]),Pe(Ie)),Sr=De.precision();return De.rotate(pr),wr.sphere=function(){sr.polygonStart(),sr.lineStart();for(var _r=ee*-180;ee*_r<180;_r+=ee*90)sr.point(_r,ee*90);if(Xt)for(;ee*(_r-=3*ee*Sr)>=-180;)sr.point(_r,ee*-L(A(_r*M/2),de)*S);sr.lineEnd(),sr.polygonEnd()},wr},De.scale(218.695).center([0,28.0974])}function ot(Xt,ee){var de=g(ee/2),ye=k(1-de*de),De=1+ye*A(Xt/=2),Pe=u(Xt)*ye/De,Ie=de/De,pr=Pe*Pe,wr=Ie*Ie;return[1.3333333333333333*Pe*(3+pr-3*wr),1.3333333333333333*Ie*(3+3*pr-wr)]}ot.invert=function(Xt,ee){if(Xt*=.375,ee*=.375,!Xt&&P(ee)>1)return null;var de=Xt*Xt,ye=ee*ee,De=1+de+ye,Pe=k((De-k(De*De-4*ee*ee))/2),Ie=E(Pe)/3,pr=Pe?F(P(ee/Pe))/3:B(P(Xt))/3,wr=A(Ie),sr=z(pr),Sr=sr*sr-wr*wr;return[f(Xt)*2*L(O(pr)*wr,.25-Sr),f(ee)*2*L(sr*u(Ie),.25+Sr)]};function nt(){return(0,b.c)(ot).scale(66.1603)}var Z=k(8),Q=r(1+w);function W(Xt,ee){var de=P(ee);return de<d?[Xt,r(g(d+ee/2))]:[Xt*A(de)*(2*w-1/u(de)),f(ee)*(2*w*(de-d)-r(g(de/2)))]}W.invert=function(Xt,ee){if((Pe=P(ee))<Q)return[Xt,2*o(v(ee))-i];var de=d,ye=25,De,Pe;do{var Ie=A(de/2),pr=g(de/2);de-=De=(Z*(de-d)-r(pr)-Pe)/(Z-Ie*Ie/(2*pr))}while(P(De)>T&&--ye>0);return[Xt/(A(de)*(Z-1/u(de))),f(ee)*de]};function J(){return(0,b.c)(W).scale(112.314)}var it=t(69020);function K(Xt){var ee=2*c/Xt;function de(ye,De){var Pe=(0,it.O)(ye,De);if(P(ye)>i){var Ie=L(Pe[1],Pe[0]),pr=k(Pe[0]*Pe[0]+Pe[1]*Pe[1]),wr=ee*l((Ie-i)/ee)+i,sr=L(u(Ie-=wr),2-A(Ie));Ie=wr+E(c/pr*u(sr))-sr,Pe[0]=pr*A(Ie),Pe[1]=pr*u(Ie)}return Pe}return de.invert=function(ye,De){var Pe=k(ye*ye+De*De);if(Pe>i){var Ie=L(De,ye),pr=ee*l((Ie-i)/ee)+i,wr=Ie>pr?-1:1,sr=Pe*A(pr-Ie),Sr=1/g(wr*m((sr-c)/k(c*(c-2*sr)+Pe*Pe)));Ie=pr+2*o((Sr+wr*k(Sr*Sr-3))/3),ye=Pe*A(Ie),De=Pe*u(Ie)}return it.O.invert(ye,De)},de}function H(){var Xt=5,ee=(0,b.U)(K),de=ee(Xt),ye=de.stream,De=.01,Pe=-A(De*M),Ie=u(De*M);return de.lobes=function(pr){return arguments.length?ee(Xt=+pr):Xt},de.stream=function(pr){var wr=de.rotate(),sr=ye(pr),Sr=(de.rotate([0,0]),ye(pr));return de.rotate(wr),sr.sphere=function(){Sr.polygonStart(),Sr.lineStart();for(var _r=0,Vr=360/Xt,rn=2*c/Xt,bn=90-180/Xt,Pn=i;_r<Xt;++_r,bn-=Vr,Pn-=rn)Sr.point(L(Ie*A(Pn),Pe)*S,E(Ie*u(Pn))*S),bn<-90?(Sr.point(-90,-180-bn-De),Sr.point(-90,-180-bn+De)):(Sr.point(90,bn+De),Sr.point(90,bn-De));Sr.lineEnd(),Sr.polygonEnd()},sr},de.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}var at=t(54724);function tt(Xt,ee){if(arguments.length<2&&(ee=Xt),ee===1)return at.y;if(ee===1/0)return lt;function de(ye,De){var Pe=(0,at.y)(ye/ee,De);return Pe[0]*=Xt,Pe}return de.invert=function(ye,De){var Pe=at.y.invert(ye/Xt,De);return Pe[0]*=ee,Pe},de}function lt(Xt,ee){return[Xt*A(ee)/A(ee/=2),2*u(ee)]}lt.invert=function(Xt,ee){var de=2*E(ee/2);return[Xt*A(de/2)/A(de),de]};function dt(){var Xt=2,ee=(0,b.U)(tt),de=ee(Xt);return de.coefficient=function(ye){return arguments.length?ee(Xt=+ye):Xt},de.scale(169.529)}function mt(Xt,ee,de){var ye=100,De,Pe,Ie;de=de===void 0?0:+de,ee=+ee;do Pe=Xt(de),Ie=Xt(de+h),Pe===Ie&&(Ie=Pe+h),de-=De=-1*h*(Pe-ee)/(Pe-Ie);while(ye-- >0&&P(De)>h);return ye<0?NaN:de}function gt(Xt,ee,de){return ee===void 0&&(ee=40),de===void 0&&(de=T),function(ye,De,Pe,Ie){var pr,wr,sr;Pe=Pe===void 0?0:+Pe,Ie=Ie===void 0?0:+Ie;for(var Sr=0;Sr<ee;Sr++){var _r=Xt(Pe,Ie),Vr=_r[0]-ye,rn=_r[1]-De;if(P(Vr)<de&&P(rn)<de)break;var bn=Vr*Vr+rn*rn;if(bn>pr){Pe-=wr/=2,Ie-=sr/=2;continue}pr=bn;var Pn=(Pe>0?-1:1)*de,In=(Ie>0?-1:1)*de,$n=Xt(Pe+Pn,Ie),Da=Xt(Pe,Ie+In),Ia=($n[0]-_r[0])/Pn,za=($n[1]-_r[1])/Pn,Oa=(Da[0]-_r[0])/In,Ka=(Da[1]-_r[1])/In,pi=Ka*Ia-za*Oa,Ni=(P(pi)<.5?.5:1)/pi;if(wr=(rn*Oa-Vr*Ka)*Ni,sr=(Vr*za-rn*Ia)*Ni,Pe+=wr,Ie+=sr,P(wr)<de&&P(sr)<de)break}return[Pe,Ie]}}function Mt(){var Xt=tt(1.68,2),ee=1.4,de=12;function ye(De,Pe){if(De+Pe<-ee){var Ie=(De-Pe+1.6)*(De+Pe+ee)/8;De+=Ie,Pe-=.8*Ie*u(Pe+c/2)}var pr=Xt(De,Pe),wr=(1-A(De*Pe))/de;return pr[1]<0&&(pr[0]*=1+wr),pr[1]>0&&(pr[1]*=1+wr/1.5*pr[0]*pr[0]),pr}return ye.invert=gt(ye),ye}function Lt(){return(0,b.c)(Mt()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function zt(Xt,ee){var de=Xt*u(ee),ye=30,De;do ee-=De=(ee+u(ee)-de)/(1+A(ee));while(P(De)>h&&--ye>0);return ee/2}function xt(Xt,ee,de){function ye(De,Pe){return[Xt*De*A(Pe=zt(de,Pe)),ee*u(Pe)]}return ye.invert=function(De,Pe){return Pe=E(Pe/ee),[De/(Xt*A(Pe)),E((2*Pe+u(2*Pe))/de)]},ye}var Ct=xt(w/i,w,c);function wt(){return(0,b.c)(Ct).scale(169.529)}var Rt=2.00276,Tt=1.11072;function Bt(Xt,ee){var de=zt(c,ee);return[Rt*Xt/(1/A(ee)+Tt/A(de)),(ee+w*u(de))/Rt]}Bt.invert=function(Xt,ee){var de=Rt*ee,ye=ee<0?-d:d,De=25,Pe,Ie;do Ie=de-w*u(ye),ye-=Pe=(u(2*ye)+2*ye-c*u(Ie))/(2*A(2*ye)+2+c*A(Ie)*w*A(ye));while(P(Pe)>h&&--De>0);return Ie=de-w*u(ye),[Xt*(1/A(Ie)+Tt/A(ye))/Rt,Ie]};function Gt(){return(0,b.c)(Bt).scale(160.857)}function te(Xt){var ee=0,de=(0,b.U)(Xt),ye=de(ee);return ye.parallel=function(De){return arguments.length?de(ee=De*M):ee*S},ye}function Wt(Xt,ee){return[Xt*A(ee),ee]}Wt.invert=function(Xt,ee){return[Xt/A(ee),ee]};function jt(){return(0,b.c)(Wt).scale(152.63)}function ie(Xt){if(!Xt)return Wt;var ee=1/g(Xt);function de(ye,De){var Pe=ee+Xt-De,Ie=Pe&&ye*A(De)/Pe;return[Pe*u(Ie),ee-Pe*A(Ie)]}return de.invert=function(ye,De){var Pe=k(ye*ye+(De=ee-De)*De),Ie=ee+Xt-Pe;return[Pe/A(Ie)*L(ye,De),Ie]},de}function ue(){return te(ie).scale(123.082).center([0,26.1441]).parallel(45)}function fe(Xt){function ee(de,ye){var De=i-ye,Pe=De&&de*Xt*u(De)/De;return[De*u(Pe)/Xt,i-De*A(Pe)]}return ee.invert=function(de,ye){var De=de*Xt,Pe=i-ye,Ie=k(De*De+Pe*Pe),pr=L(De,Pe);return[(Ie?Ie/u(Ie):1)*pr/Xt,i-Ie]},ee}function pe(){var Xt=.5,ee=(0,b.U)(fe),de=ee(Xt);return de.fraction=function(ye){return arguments.length?ee(Xt=+ye):Xt},de.scale(158.837)}var Te=xt(1,4/c,c);function Qt(){return(0,b.c)(Te).scale(152.63)}var Pt=t(24052),Ot=t(92992);function Nt(Xt,ee,de,ye,De,Pe){var Ie=A(Pe),pr;if(P(Xt)>1||P(Pe)>1)pr=m(de*De+ee*ye*Ie);else{var wr=u(Xt/2),sr=u(Pe/2);pr=2*E(k(wr*wr+ee*ye*sr*sr))}return P(pr)>h?[pr,L(ye*u(Pe),ee*De-de*ye*Ie)]:[0,0]}function Ht(Xt,ee,de){return m((Xt*Xt+ee*ee-de*de)/(2*Xt*ee))}function St(Xt){return Xt-2*c*p((Xt+c)/(2*c))}function kt(Xt,ee,de){for(var ye=[[Xt[0],Xt[1],u(Xt[1]),A(Xt[1])],[ee[0],ee[1],u(ee[1]),A(ee[1])],[de[0],de[1],u(de[1]),A(de[1])]],De=ye[2],Pe,Ie=0;Ie<3;++Ie,De=Pe)Pe=ye[Ie],De.v=Nt(Pe[1]-De[1],De[3],De[2],Pe[3],Pe[2],Pe[0]-De[0]),De.point=[0,0];var pr=Ht(ye[0].v[0],ye[2].v[0],ye[1].v[0]),wr=Ht(ye[0].v[0],ye[1].v[0],ye[2].v[0]),sr=c-pr;ye[2].point[1]=0,ye[0].point[0]=-(ye[1].point[0]=ye[0].v[0]/2);var Sr=[ye[2].point[0]=ye[0].point[0]+ye[2].v[0]*A(pr),2*(ye[0].point[1]=ye[1].point[1]=ye[2].v[0]*u(pr))];function _r(Vr,rn){var bn=u(rn),Pn=A(rn),In=new Array(3),$n;for($n=0;$n<3;++$n){var Da=ye[$n];if(In[$n]=Nt(rn-Da[1],Da[3],Da[2],Pn,bn,Vr-Da[0]),!In[$n][0])return Da.point;In[$n][1]=St(In[$n][1]-Da.v[1])}var Ia=Sr.slice();for($n=0;$n<3;++$n){var za=$n==2?0:$n+1,Oa=Ht(ye[$n].v[0],In[$n][0],In[za][0]);In[$n][1]<0&&(Oa=-Oa),$n?$n==1?(Oa=wr-Oa,Ia[0]-=In[$n][0]*A(Oa),Ia[1]-=In[$n][0]*u(Oa)):(Oa=sr-Oa,Ia[0]+=In[$n][0]*A(Oa),Ia[1]+=In[$n][0]*u(Oa)):(Ia[0]+=In[$n][0]*A(Oa),Ia[1]-=In[$n][0]*u(Oa))}return Ia[0]/=3,Ia[1]/=3,Ia}return _r}function Ft(Xt){return Xt[0]*=M,Xt[1]*=M,Xt}function At(){return ft([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ft(Xt,ee,de){var ye=(0,Pt.c)({type:"MultiPoint",coordinates:[Xt,ee,de]}),De=[-ye[0],-ye[1]],Pe=(0,Ot.c)(De),Ie=kt(Ft(Pe(Xt)),Ft(Pe(ee)),Ft(Pe(de)));Ie.invert=gt(Ie);var pr=(0,b.c)(Ie).rotate(De),wr=pr.center;return delete pr.rotate,pr.center=function(sr){return arguments.length?wr(Pe(sr)):Pe.invert(wr())},pr.clipAngle(90)}function pt(Xt,ee){var de=k(1-u(ee));return[2/C*Xt*de,C*(1-de)]}pt.invert=function(Xt,ee){var de=(de=ee/C-1)*de;return[de>0?Xt*k(c/de)/2:0,E(1-de)]};function Dt(){return(0,b.c)(pt).scale(95.6464).center([0,30])}function Ut(Xt){var ee=g(Xt);function de(ye,De){return[ye,(ye?ye/u(ye):1)*(u(De)*A(ye)-ee*A(De))]}return de.invert=ee?function(ye,De){ye&&(De*=u(ye)/ye);var Pe=A(ye);return[ye,2*L(k(Pe*Pe+ee*ee-De*De)-Pe,ee-De)]}:function(ye,De){return[ye,E(ye?De*g(ye)/ye:De)]},de}function $t(){return te(Ut).scale(249.828).clipAngle(90)}var re=k(3);function Be(Xt,ee){return[re*Xt*(2*A(2*ee/3)-1)/C,re*C*u(ee/3)]}Be.invert=function(Xt,ee){var de=3*E(ee/(re*C));return[C*Xt/(re*(2*A(2*de/3)-1)),de]};function We(){return(0,b.c)(Be).scale(156.19)}function me(Xt){var ee=A(Xt);function de(ye,De){return[ye*ee,u(De)/ee]}return de.invert=function(ye,De){return[ye/ee,E(De*ee)]},de}function Se(){return te(me).parallel(38.58).scale(195.044)}function je(Xt){var ee=A(Xt);function de(ye,De){return[ye*ee,(1+ee)*g(De/2)]}return de.invert=function(ye,De){return[ye/ee,o(De/(1+ee))*2]},de}function vr(){return te(je).scale(124.75)}function he(Xt,ee){var de=k(8/(3*c));return[de*Xt*(1-P(ee)/c),de*ee]}he.invert=function(Xt,ee){var de=k(8/(3*c)),ye=ee/de;return[Xt/(de*(1-P(ye)/c)),ye]};function Ye(){return(0,b.c)(he).scale(165.664)}function Qe(Xt,ee){var de=k(4-3*u(P(ee)));return[2/k(6*c)*Xt*de,f(ee)*k(2*c/3)*(2-de)]}Qe.invert=function(Xt,ee){var de=2-P(ee)/k(2*c/3);return[Xt*k(6*c)/(2*de),f(ee)*E((4-de*de)/3)]};function mr(){return(0,b.c)(Qe).scale(165.664)}function ir(Xt,ee){var de=k(c*(4+c));return[2/de*Xt*(1+k(1-4*ee*ee/(c*c))),4/de*ee]}ir.invert=function(Xt,ee){var de=k(c*(4+c))/2;return[Xt*de/(1+k(1-ee*ee*(4+c)/(4*c))),ee*de/2]};function ve(){return(0,b.c)(ir).scale(180.739)}function ne(Xt,ee){var de=(2+i)*u(ee);ee/=2;for(var ye=0,De=1/0;ye<10&&P(De)>h;ye++){var Pe=A(ee);ee-=De=(ee+u(ee)*(Pe+2)-de)/(2*Pe*(1+Pe))}return[2/k(c*(4+c))*Xt*(1+A(ee)),2*k(c/(4+c))*u(ee)]}ne.invert=function(Xt,ee){var de=ee*k((4+c)/c)/2,ye=E(de),De=A(ye);return[Xt/(2/k(c*(4+c))*(1+De)),E((ye+de*(De+2))/(2+i))]};function ge(){return(0,b.c)(ne).scale(180.739)}function Ae(Xt,ee){return[Xt*(1+A(ee))/k(2+c),2*ee/k(2+c)]}Ae.invert=function(Xt,ee){var de=k(2+c),ye=ee*de/2;return[de*Xt/(1+A(ye)),ye]};function Re(){return(0,b.c)(Ae).scale(173.044)}function ze(Xt,ee){for(var de=(1+i)*u(ee),ye=0,De=1/0;ye<10&&P(De)>h;ye++)ee-=De=(ee+u(ee)-de)/(1+A(ee));return de=k(2+c),[Xt*(1+A(ee))/de,2*ee/de]}ze.invert=function(Xt,ee){var de=1+i,ye=k(de/2);return[Xt*2*ye/(1+A(ee*=ye)),E((ee+u(ee))/de)]};function ke(){return(0,b.c)(ze).scale(173.044)}var _e=3+2*w;function Ke(Xt,ee){var de=u(Xt/=2),ye=A(Xt),De=k(A(ee)),Pe=A(ee/=2),Ie=u(ee)/(Pe+w*ye*De),pr=k(2/(1+Ie*Ie)),wr=k((w*Pe+(ye+de)*De)/(w*Pe+(ye-de)*De));return[_e*(pr*(wr-1/wr)-2*r(wr)),_e*(pr*Ie*(wr+1/wr)-2*o(Ie))]}Ke.invert=function(Xt,ee){if(!(Pe=ot.invert(Xt/1.2,ee*1.065)))return null;var de=Pe[0],ye=Pe[1],De=20,Pe;Xt/=_e,ee/=_e;do{var Ie=de/2,pr=ye/2,wr=u(Ie),sr=A(Ie),Sr=u(pr),_r=A(pr),Vr=A(ye),rn=k(Vr),bn=Sr/(_r+w*sr*rn),Pn=bn*bn,In=k(2/(1+Pn)),$n=w*_r+(sr+wr)*rn,Da=w*_r+(sr-wr)*rn,Ia=$n/Da,za=k(Ia),Oa=za-1/za,Ka=za+1/za,pi=In*Oa-2*r(za)-Xt,Ni=In*bn*Ka-2*o(bn)-ee,st=Sr&&x*rn*wr*Pn/Sr,bt=(w*sr*_r+rn)/(2*(_r+w*sr*rn)*(_r+w*sr*rn)*rn),_t=-.5*bn*In*In*In,Kt=_t*st,qt=_t*bt,le=(le=2*_r+w*rn*(sr-wr))*le*za,Ce=(w*sr*_r*rn+Vr)/le,be=-(w*wr*Sr)/(rn*le),Oe=Oa*Kt-2*Ce/za+In*(Ce+Ce/Ia),Ue=Oa*qt-2*be/za+In*(be+be/Ia),nr=bn*Ka*Kt-2*st/(1+Pn)+In*Ka*st+In*bn*(Ce-Ce/Ia),Rr=bn*Ka*qt-2*bt/(1+Pn)+In*Ka*bt+In*bn*(be-be/Ia),Dr=Ue*nr-Rr*Oe;if(!Dr)break;var Qr=(Ni*Ue-pi*Rr)/Dr,sn=(pi*nr-Ni*Oe)/Dr;de-=Qr,ye=e(-i,s(i,ye-sn))}while((P(Qr)>h||P(sn)>h)&&--De>0);return P(P(ye)-i)<h?[0,ye]:De&&[de,ye]};function hr(){return(0,b.c)(Ke).scale(62.5271)}var cr=A(35*M);function dr(Xt,ee){var de=g(ee/2);return[Xt*cr*k(1-de*de),(1+cr)*de]}dr.invert=function(Xt,ee){var de=ee/(1+cr);return[Xt&&Xt/(cr*k(1-de*de)),2*o(de)]};function fr(){return(0,b.c)(dr).scale(137.152)}function Lr(Xt,ee){var de=ee/2,ye=A(de);return[2*Xt/C*A(ee)*ye*ye,C*g(de)]}Lr.invert=function(Xt,ee){var de=o(ee/C),ye=A(de),De=2*de;return[Xt*C/2/(A(De)*ye*ye),De]};function xr(){return(0,b.c)(Lr).scale(135.264)}function Yt(Xt){var ee=1-Xt,de=Pe(c,0)[0]-Pe(-c,0)[0],ye=Pe(0,i)[1]-Pe(0,-i)[1],De=k(2*ye/de);function Pe(wr,sr){var Sr=A(sr),_r=u(sr);return[Sr/(ee+Xt*Sr)*wr,ee*sr+Xt*_r]}function Ie(wr,sr){var Sr=Pe(wr,sr);return[Sr[0]*De,Sr[1]/De]}function pr(wr){return Ie(0,wr)[1]}return Ie.invert=function(wr,sr){var Sr=mt(pr,sr),_r=wr/De*(Xt+ee/A(Sr));return[_r,Sr]},Ie}function Jt(){var Xt=.5,ee=(0,b.U)(Yt),de=ee(Xt);return de.alpha=function(ye){return arguments.length?ee(Xt=+ye):Xt},de.scale(168.725)}var qe=t(4888),tr=t(69604);function Ge(Xt){return[Xt[0]/2,E(g(Xt[1]/2*M))*S]}function Ee(Xt){return[Xt[0]*2,2*o(u(Xt[1]*M))*S]}function Xe(Xt){Xt==null&&(Xt=qe.c);var ee=Xt(),de=(0,tr.c)().scale(S).precision(0).clipAngle(null).translate([0,0]);function ye(Pe){return ee(Ge(Pe))}ee.invert&&(ye.invert=function(Pe){return Ee(ee.invert(Pe))}),ye.stream=function(Pe){var Ie=ee.stream(Pe),pr=de.stream({point:function(wr,sr){Ie.point(wr/2,E(g(-sr/2*M))*S)},lineStart:function(){Ie.lineStart()},lineEnd:function(){Ie.lineEnd()},polygonStart:function(){Ie.polygonStart()},polygonEnd:function(){Ie.polygonEnd()}});return pr.sphere=Ie.sphere,pr};function De(Pe){ye[Pe]=function(){return arguments.length?(ee[Pe].apply(ee,arguments),ye):ee[Pe]()}}return ye.rotate=function(Pe){return arguments.length?(de.rotate(Pe),ye):de.rotate()},ye.center=function(Pe){return arguments.length?(ee.center(Ge(Pe)),ye):Ee(ee.center())},De("angle"),De("clipAngle"),De("clipExtent"),De("fitExtent"),De("fitHeight"),De("fitSize"),De("fitWidth"),De("scale"),De("translate"),De("precision"),ye.scale(249.5)}function rr(Xt,ee){var de=2*c/ee,ye=Xt*Xt;function De(Pe,Ie){var pr=(0,it.O)(Pe,Ie),wr=pr[0],sr=pr[1],Sr=wr*wr+sr*sr;if(Sr>ye){var _r=k(Sr),Vr=L(sr,wr),rn=de*l(Vr/de),bn=Vr-rn,Pn=Xt*A(bn),In=(Xt*u(bn)-bn*u(Pn))/(i-Pn),$n=Je(bn,In),Da=(c-Xt)/He($n,Pn,c);wr=_r;var Ia=50,za;do wr-=za=(Xt+He($n,Pn,wr)*Da-_r)/($n(wr)*Da);while(P(za)>h&&--Ia>0);sr=bn*u(wr),wr<i&&(sr-=In*(wr-i));var Oa=u(rn),Ka=A(rn);pr[0]=wr*Ka-sr*Oa,pr[1]=wr*Oa+sr*Ka}return pr}return De.invert=function(Pe,Ie){var pr=Pe*Pe+Ie*Ie;if(pr>ye){var wr=k(pr),sr=L(Ie,Pe),Sr=de*l(sr/de),_r=sr-Sr;Pe=wr*A(_r),Ie=wr*u(_r);for(var Vr=Pe-i,rn=u(Pe),bn=Ie/rn,Pn=Pe<i?1/0:0,In=10;;){var $n=Xt*u(bn),Da=Xt*A(bn),Ia=u(Da),za=i-Da,Oa=($n-bn*Ia)/za,Ka=Je(bn,Oa);if(P(Pn)<T||!--In)break;bn-=Pn=(bn*rn-Oa*Vr-Ie)/(rn-Vr*2*(za*(Da+bn*$n*A(Da)-Ia)-$n*($n-bn*Ia))/(za*za))}wr=Xt+He(Ka,Da,Pe)*(c-Xt)/He(Ka,Da,c),sr=Sr+bn,Pe=wr*A(sr),Ie=wr*u(sr)}return it.O.invert(Pe,Ie)},De}function Je(Xt,ee){return function(de){var ye=Xt*A(de);return de<i&&(ye-=ee),k(1+ye*ye)}}function He(Xt,ee,de){for(var ye=50,De=(de-ee)/ye,Pe=Xt(ee)+Xt(de),Ie=1,pr=ee;Ie<ye;++Ie)Pe+=2*Xt(pr+=De);return Pe*.5*De}function yr(){var Xt=6,ee=30*M,de=A(ee),ye=u(ee),De=(0,b.U)(rr),Pe=De(ee,Xt),Ie=Pe.stream,pr=.01,wr=-A(pr*M),sr=u(pr*M);return Pe.radius=function(Sr){return arguments.length?(de=A(ee=Sr*M),ye=u(ee),De(ee,Xt)):ee*S},Pe.lobes=function(Sr){return arguments.length?De(ee,Xt=+Sr):Xt},Pe.stream=function(Sr){var _r=Pe.rotate(),Vr=Ie(Sr),rn=(Pe.rotate([0,0]),Ie(Sr));return Pe.rotate(_r),Vr.sphere=function(){rn.polygonStart(),rn.lineStart();for(var bn=0,Pn=2*c/Xt,In=0;bn<Xt;++bn,In-=Pn)rn.point(L(sr*A(In),wr)*S,E(sr*u(In))*S),rn.point(L(ye*A(In-Pn/2),de)*S,E(ye*u(In-Pn/2))*S);rn.lineEnd(),rn.polygonEnd()},Vr},Pe.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}function Ir(Xt,ee,de,ye,De,Pe,Ie,pr){arguments.length<8&&(pr=0);function wr(sr,Sr){if(!Sr)return[Xt*sr/c,0];var _r=Sr*Sr,Vr=Xt+_r*(ee+_r*(de+_r*ye)),rn=Sr*(De-1+_r*(Pe-pr+_r*Ie)),bn=(Vr*Vr+rn*rn)/(2*rn),Pn=sr*E(Vr/bn)/c;return[bn*u(Pn),Sr*(1+_r*pr)+bn*(1-A(Pn))]}return wr.invert=function(sr,Sr){var _r=c*sr/Xt,Vr=Sr,rn,bn,Pn=50;do{var In=Vr*Vr,$n=Xt+In*(ee+In*(de+In*ye)),Da=Vr*(De-1+In*(Pe-pr+In*Ie)),Ia=$n*$n+Da*Da,za=2*Da,Oa=Ia/za,Ka=Oa*Oa,pi=E($n/Oa)/c,Ni=_r*pi,st=$n*$n,bt=(2*ee+In*(4*de+In*6*ye))*Vr,_t=De+In*(3*Pe+In*5*Ie),Kt=2*($n*bt+Da*(_t-1)),qt=2*(_t-1),le=(Kt*za-Ia*qt)/(za*za),Ce=A(Ni),be=u(Ni),Oe=Oa*Ce,Ue=Oa*be,nr=_r/c*(1/k(1-st/Ka))*(bt*Oa-$n*le)/Ka,Rr=Ue-sr,Dr=Vr*(1+In*pr)+Oa-Oe-Sr,Qr=le*be+Oe*nr,sn=Oe*pi,zr=1+le-(le*Ce-Ue*nr),Hr=Ue*pi,Kr=Qr*Hr-zr*sn;if(!Kr)break;_r-=rn=(Dr*Qr-Rr*zr)/Kr,Vr-=bn=(Rr*Hr-Dr*sn)/Kr}while((P(rn)>h||P(bn)>h)&&--Pn>0);return[_r,Vr]},wr}var Tr=Ir(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function vn(){return(0,b.c)(Tr).scale(149.995)}var Or=Ir(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function En(){return(0,b.c)(Or).scale(153.93)}var nn=Ir(5/6*c,-.62636,-.0344,0,1.3493,-.05524,0,.045);function gr(){return(0,b.c)(nn).scale(130.945)}function Pr(Xt,ee){var de=Xt*Xt,ye=ee*ee;return[Xt*(1-.162388*ye)*(.87-952426e-9*de*de),ee*(1+ye/12)]}Pr.invert=function(Xt,ee){var de=Xt,ye=ee,De=50,Pe;do{var Ie=ye*ye;ye-=Pe=(ye*(1+Ie/12)-ee)/(1+Ie/4)}while(P(Pe)>h&&--De>0);De=50,Xt/=1-.162388*Ie;do{var pr=(pr=de*de)*pr;de-=Pe=(de*(.87-952426e-9*pr)-Xt)/(.87-.00476213*pr)}while(P(Pe)>h&&--De>0);return[de,ye]};function Xr(){return(0,b.c)(Pr).scale(131.747)}var kr=Ir(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function pn(){return(0,b.c)(kr).scale(131.087)}function en(Xt){var ee=Xt(i,0)[0]-Xt(-i,0)[0];function de(ye,De){var Pe=ye>0?-.5:.5,Ie=Xt(ye+Pe*c,De);return Ie[0]-=Pe*ee,Ie}return Xt.invert&&(de.invert=function(ye,De){var Pe=ye>0?-.5:.5,Ie=Xt.invert(ye+Pe*ee,De),pr=Ie[0]-Pe*c;return pr<-c?pr+=2*c:pr>c&&(pr-=2*c),Ie[0]=pr,Ie}),de}function Tn(Xt,ee){var de=f(Xt),ye=f(ee),De=A(ee),Pe=A(Xt)*De,Ie=u(Xt)*De,pr=u(ye*ee);Xt=P(L(Ie,pr)),ee=E(Pe),P(Xt-i)>h&&(Xt%=i);var wr=Ln(Xt>c/4?i-Xt:Xt,ee);return Xt>c/4&&(pr=wr[0],wr[0]=-wr[1],wr[1]=-pr),wr[0]*=de,wr[1]*=-ye,wr}Tn.invert=function(Xt,ee){P(Xt)>1&&(Xt=f(Xt)*2-Xt),P(ee)>1&&(ee=f(ee)*2-ee);var de=f(Xt),ye=f(ee),De=-de*Xt,Pe=-ye*ee,Ie=Pe/De<1,pr=Yn(Ie?Pe:De,Ie?De:Pe),wr=pr[0],sr=pr[1],Sr=A(sr);return Ie&&(wr=-i-wr),[de*(L(u(wr)*Sr,-u(sr))+c),ye*E(A(wr)*Sr)]};function Ln(Xt,ee){if(ee===i)return[0,0];var de=u(ee),ye=de*de,De=ye*ye,Pe=1+De,Ie=1+3*De,pr=1-De,wr=E(1/k(Pe)),sr=pr+ye*Pe*wr,Sr=(1-de)/sr,_r=k(Sr),Vr=Sr*Pe,rn=k(Vr),bn=_r*pr,Pn,In;if(Xt===0)return[0,-(bn+ye*rn)];var $n=A(ee),Da=1/$n,Ia=2*de*$n,za=(-3*ye+wr*Ie)*Ia,Oa=(-sr*$n-(1-de)*za)/(sr*sr),Ka=.5*Oa/_r,pi=pr*Ka-2*ye*_r*Ia,Ni=ye*Pe*Oa+Sr*Ie*Ia,st=-Da*Ia,bt=-Da*Ni,_t=-2*Da*pi,Kt=4*Xt/c,qt;if(Xt>.222*c||ee<c/4&&Xt>.175*c){if(Pn=(bn+ye*k(Vr*(1+De)-bn*bn))/(1+De),Xt>c/4)return[Pn,Pn];var le=Pn,Ce=.5*Pn;Pn=.5*(Ce+le),In=50;do{var be=k(Vr-Pn*Pn),Oe=Pn*(_t+st*be)+bt*E(Pn/rn)-Kt;if(!Oe)break;Oe<0?Ce=Pn:le=Pn,Pn=.5*(Ce+le)}while(P(le-Ce)>h&&--In>0)}else{Pn=h,In=25;do{var Ue=Pn*Pn,nr=k(Vr-Ue),Rr=_t+st*nr,Dr=Pn*Rr+bt*E(Pn/rn)-Kt,Qr=Rr+(bt-st*Ue)/nr;Pn-=qt=nr?Dr/Qr:0}while(P(qt)>h&&--In>0)}return[Pn,-bn-ye*k(Vr-Pn*Pn)]}function Yn(Xt,ee){for(var de=0,ye=1,De=.5,Pe=50;;){var Ie=De*De,pr=k(De),wr=E(1/k(1+Ie)),sr=1-Ie+De*(1+Ie)*wr,Sr=(1-pr)/sr,_r=k(Sr),Vr=Sr*(1+Ie),rn=_r*(1-Ie),bn=Vr-Xt*Xt,Pn=k(bn),In=ee+rn+De*Pn;if(P(ye-de)<T||--Pe===0||In===0)break;In>0?de=De:ye=De,De=.5*(de+ye)}if(!Pe)return null;var $n=E(pr),Da=A($n),Ia=1/Da,za=2*pr*Da,Oa=(-3*De+wr*(1+3*Ie))*za,Ka=(-sr*Da-(1-pr)*Oa)/(sr*sr),pi=.5*Ka/_r,Ni=(1-Ie)*pi-2*De*_r*za,st=-2*Ia*Ni,bt=-Ia*za,_t=-Ia*(De*(1+Ie)*Ka+Sr*(1+3*Ie)*za);return[c/4*(Xt*(st+bt*Pn)+_t*E(Xt/k(Vr))),$n]}function ma(){return(0,b.c)(en(Tn)).scale(239.75)}function wa(Xt,ee,de){var ye,De,Pe;return Xt?(ye=la(Xt,de),ee?(De=la(ee,1-de),Pe=De[1]*De[1]+de*ye[0]*ye[0]*De[0]*De[0],[[ye[0]*De[2]/Pe,ye[1]*ye[2]*De[0]*De[1]/Pe],[ye[1]*De[1]/Pe,-ye[0]*ye[2]*De[0]*De[2]/Pe],[ye[2]*De[1]*De[2]/Pe,-de*ye[0]*ye[1]*De[0]/Pe]]):[[ye[0],0],[ye[1],0],[ye[2],0]]):(De=la(ee,1-de),[[0,De[0]/De[1]],[1/De[1],0],[De[2]/De[1],0]])}function la(Xt,ee){var de,ye,De,Pe,Ie;if(ee<h)return Pe=u(Xt),ye=A(Xt),de=ee*(Xt-Pe*ye)/4,[Pe-de*ye,ye+de*Pe,1-ee*Pe*Pe/2,Xt-de];if(ee>=1-h)return de=(1-ee)/4,ye=z(Xt),Pe=I(Xt),De=1/ye,Ie=ye*O(Xt),[Pe+de*(Ie-Xt)/(ye*ye),De-de*Pe*De*(Ie-Xt),De+de*Pe*De*(Ie+Xt),2*o(v(Xt))-i+de*(Ie-Xt)/ye];var pr=[1,0,0,0,0,0,0,0,0],wr=[k(ee),0,0,0,0,0,0,0,0],sr=0;for(ye=k(1-ee),Ie=1;P(wr[sr]/pr[sr])>h&&sr<8;)de=pr[sr++],wr[sr]=(de-ye)/2,pr[sr]=(de+ye)/2,ye=k(de*ye),Ie*=2;De=Ie*pr[sr]*Xt;do Pe=wr[sr]*u(ye=De)/pr[sr],De=(E(Pe)+De)/2;while(--sr);return[u(De),Pe=A(De),Pe/A(De-ye),De]}function ia(Xt,ee,de){var ye=P(Xt),De=P(ee),Pe=O(De);if(ye){var Ie=1/u(ye),pr=1/(g(ye)*g(ye)),wr=-(pr+de*(Pe*Pe*Ie*Ie)-1+de),sr=(de-1)*pr,Sr=(-wr+k(wr*wr-4*sr))/2;return[Rn(o(1/k(Sr)),de)*f(Xt),Rn(o(k((Sr/pr-1)/de)),1-de)*f(ee)]}return[0,Rn(o(Pe),1-de)*f(ee)]}function Rn(Xt,ee){if(!ee)return Xt;if(ee===1)return r(g(Xt/2+d));for(var de=1,ye=k(1-ee),De=k(ee),Pe=0;P(De)>h;Pe++){if(Xt%c){var Ie=o(ye*g(Xt)/de);Ie<0&&(Ie+=c),Xt+=Ie+~~(Xt/c)*c}else Xt+=Xt;De=(de+ye)/2,ye=k(de*ye),De=((de=De)-ye)/2}return Xt/(n(2,Pe)*de)}function Cr(Xt,ee){var de=(w-1)/(w+1),ye=k(1-de*de),De=Rn(i,ye*ye),Pe=-1,Ie=r(g(c/4+P(ee)/2)),pr=v(Pe*Ie)/k(de),wr=an(pr*A(Pe*Xt),pr*u(Pe*Xt)),sr=ia(wr[0],wr[1],ye*ye);return[-sr[1],(ee>=0?1:-1)*(.5*De-sr[0])]}function an(Xt,ee){var de=Xt*Xt,ye=ee+1,De=1-de-ee*ee;return[.5*((Xt>=0?i:-i)-L(De,2*Xt)),-.25*r(De*De+4*de)+.5*r(ye*ye+de)]}function on(Xt,ee){var de=ee[0]*ee[0]+ee[1]*ee[1];return[(Xt[0]*ee[0]+Xt[1]*ee[1])/de,(Xt[1]*ee[0]-Xt[0]*ee[1])/de]}Cr.invert=function(Xt,ee){var de=(w-1)/(w+1),ye=k(1-de*de),De=Rn(i,ye*ye),Pe=-1,Ie=wa(.5*De-ee,-Xt,ye*ye),pr=on(Ie[0],Ie[1]),wr=L(pr[1],pr[0])/Pe;return[wr,2*o(v(.5/Pe*r(de*pr[0]*pr[0]+de*pr[1]*pr[1])))-i]};function ln(){return(0,b.c)(en(Cr)).scale(151.496)}var Nn=t(61780);function gn(Xt){var ee=u(Xt),de=A(Xt),ye=Cn(Xt);ye.invert=Cn(-Xt);function De(Pe,Ie){var pr=ye(Pe,Ie);Pe=pr[0],Ie=pr[1];var wr=u(Ie),sr=A(Ie),Sr=A(Pe),_r=m(ee*wr+de*sr*Sr),Vr=u(_r),rn=P(Vr)>h?_r/Vr:1;return[rn*de*u(Pe),(P(Pe)>i?rn:-rn)*(ee*sr-de*wr*Sr)]}return De.invert=function(Pe,Ie){var pr=k(Pe*Pe+Ie*Ie),wr=-u(pr),sr=A(pr),Sr=pr*sr,_r=-Ie*wr,Vr=pr*ee,rn=k(Sr*Sr+_r*_r-Vr*Vr),bn=L(Sr*Vr+_r*rn,_r*Vr-Sr*rn),Pn=(pr>i?-1:1)*L(Pe*wr,pr*A(bn)*sr+Ie*u(bn)*wr);return ye.invert(Pn,bn)},De}function Cn(Xt){var ee=u(Xt),de=A(Xt);return function(ye,De){var Pe=A(De),Ie=A(ye)*Pe,pr=u(ye)*Pe,wr=u(De);return[L(pr,Ie*de-wr*ee),E(wr*de+Ie*ee)]}}function Un(){var Xt=0,ee=(0,b.U)(gn),de=ee(Xt),ye=de.rotate,De=de.stream,Pe=(0,Nn.c)();return de.parallel=function(Ie){if(!arguments.length)return Xt*S;var pr=de.rotate();return ee(Xt=Ie*M).rotate(pr)},de.rotate=function(Ie){return arguments.length?(ye.call(de,[Ie[0],Ie[1]-Xt*S]),Pe.center([-Ie[0],-Ie[1]]),de):(Ie=ye.call(de),Ie[1]+=Xt*S,Ie)},de.stream=function(Ie){return Ie=De(Ie),Ie.sphere=function(){Ie.polygonStart();var pr=.01,wr=Pe.radius(90-pr)().coordinates[0],sr=wr.length-1,Sr=-1,_r;for(Ie.lineStart();++Sr<sr;)Ie.point((_r=wr[Sr])[0],_r[1]);for(Ie.lineEnd(),wr=Pe.radius(90+pr)().coordinates[0],sr=wr.length-1,Ie.lineStart();--Sr>=0;)Ie.point((_r=wr[Sr])[0],_r[1]);Ie.lineEnd(),Ie.polygonEnd()},Ie},de.scale(79.4187).parallel(45).clipAngle(179.999)}var ta=t(84706),pa=t(16016),ka=3,Ar=E(1-1/ka)*S,Br=me(0);function Mr(Xt){var ee=Ar*M,de=pt(c,ee)[0]-pt(-c,ee)[0],ye=Br(0,ee)[1],De=pt(0,ee)[1],Pe=C-De,Ie=y/Xt,pr=4/y,wr=ye+Pe*Pe*4/y;function sr(Sr,_r){var Vr,rn=P(_r);if(rn>ee){var bn=s(Xt-1,e(0,p((Sr+c)/Ie)));Sr+=c*(Xt-1)/Xt-bn*Ie,Vr=pt(Sr,rn),Vr[0]=Vr[0]*y/de-y*(Xt-1)/(2*Xt)+bn*y/Xt,Vr[1]=ye+(Vr[1]-De)*4*Pe/y,_r<0&&(Vr[1]=-Vr[1])}else Vr=Br(Sr,_r);return Vr[0]*=pr,Vr[1]/=wr,Vr}return sr.invert=function(Sr,_r){Sr/=pr,_r*=wr;var Vr=P(_r);if(Vr>ye){var rn=s(Xt-1,e(0,p((Sr+c)/Ie)));Sr=(Sr+c*(Xt-1)/Xt-rn*Ie)*de/y;var bn=pt.invert(Sr,.25*(Vr-ye)*y/Pe+De);return bn[0]-=c*(Xt-1)/Xt-rn*Ie,_r<0&&(bn[1]=-bn[1]),bn}return Br.invert(Sr,_r)},sr}function Nr(Xt,ee){return[Xt,ee&1?90-h:Ar]}function un(Xt,ee){return[Xt,ee&1?-90+h:-Ar]}function Dn(Xt){return[Xt[0]*(1-h),Xt[1]]}function mn(Xt){var ee=[].concat((0,ta.ik)(-180,180+Xt/2,Xt).map(Nr),(0,ta.ik)(180,-180-Xt/2,-Xt).map(un));return{type:"Polygon",coordinates:[Xt===180?ee.map(Dn):ee]}}function cn(){var Xt=4,ee=(0,b.U)(Mr),de=ee(Xt),ye=de.stream;return de.lobes=function(De){return arguments.length?ee(Xt=+De):Xt},de.stream=function(De){var Pe=de.rotate(),Ie=ye(De),pr=(de.rotate([0,0]),ye(De));return de.rotate(Pe),Ie.sphere=function(){(0,pa.c)(mn(180/Xt),pr)},Ie},de.scale(239.75)}function Er(Xt){var ee=1+Xt,de=u(1/ee),ye=E(de),De=2*k(c/(Pe=c+4*ye*ee)),Pe,Ie=.5*De*(ee+k(Xt*(2+Xt))),pr=Xt*Xt,wr=ee*ee;function sr(Sr,_r){var Vr=1-u(_r),rn,bn;if(Vr&&Vr<2){var Pn=i-_r,In=25,$n;do{var Da=u(Pn),Ia=A(Pn),za=ye+L(Da,ee-Ia),Oa=1+wr-2*ee*Ia;Pn-=$n=(Pn-pr*ye-ee*Da+Oa*za-.5*Vr*Pe)/(2*ee*Da*za)}while(P($n)>T&&--In>0);rn=De*k(Oa),bn=Sr*za/c}else rn=De*(Xt+Vr),bn=Sr*ye/c;return[rn*u(bn),Ie-rn*A(bn)]}return sr.invert=function(Sr,_r){var Vr=Sr*Sr+(_r-=Ie)*_r,rn=(1+wr-Vr/(De*De))/(2*ee),bn=m(rn),Pn=u(bn),In=ye+L(Pn,ee-rn);return[E(Sr/k(Vr))*c/In,E(1-2*(bn-pr*ye-ee*Pn+(1+wr-2*ee*rn)*In)/Pe)]},sr}function Yr(){var Xt=1,ee=(0,b.U)(Er),de=ee(Xt);return de.ratio=function(ye){return arguments.length?ee(Xt=+ye):Xt},de.scale(167.774).center([0,18.67])}var Gr=.7109889596207567,$r=.0528035274542;function wn(Xt,ee){return ee>-Gr?(Xt=Ct(Xt,ee),Xt[1]+=$r,Xt):Wt(Xt,ee)}wn.invert=function(Xt,ee){return ee>-Gr?Ct.invert(Xt,ee-$r):Wt.invert(Xt,ee)};function An(){return(0,b.c)(wn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function On(Xt,ee){return P(ee)>Gr?(Xt=Ct(Xt,ee),Xt[1]-=ee>0?$r:-$r,Xt):Wt(Xt,ee)}On.invert=function(Xt,ee){return P(ee)>Gr?Ct.invert(Xt,ee+(ee>0?$r:-$r)):Wt.invert(Xt,ee)};function Vn(){return(0,b.c)(On).scale(152.63)}function zn(Xt,ee,de,ye){var De=k(4*c/(2*de+(1+Xt-ee/2)*u(2*de)+(Xt+ee)/2*u(4*de)+ee/2*u(6*de))),Pe=k(ye*u(de)*k((1+Xt*A(2*de)+ee*A(4*de))/(1+Xt+ee))),Ie=de*wr(1);function pr(_r){return k(1+Xt*A(2*_r)+ee*A(4*_r))}function wr(_r){var Vr=_r*de;return(2*Vr+(1+Xt-ee/2)*u(2*Vr)+(Xt+ee)/2*u(4*Vr)+ee/2*u(6*Vr))/de}function sr(_r){return pr(_r)*u(_r)}var Sr=function(_r,Vr){var rn=de*mt(wr,Ie*u(Vr)/de,Vr/c);isNaN(rn)&&(rn=de*f(Vr));var bn=De*pr(rn);return[bn*Pe*_r/c*A(rn),bn/Pe*u(rn)]};return Sr.invert=function(_r,Vr){var rn=mt(sr,Vr*Pe/De);return[_r*c/(A(rn)*De*Pe*pr(rn)),E(de*wr(rn/de)/Ie)]},de===0&&(De=k(ye/c),Sr=function(_r,Vr){return[_r*De,u(Vr)/De]},Sr.invert=function(_r,Vr){return[_r/De,E(Vr*De)]}),Sr}function Zn(){var Xt=1,ee=0,de=45*M,ye=2,De=(0,b.U)(zn),Pe=De(Xt,ee,de,ye);return Pe.a=function(Ie){return arguments.length?De(Xt=+Ie,ee,de,ye):Xt},Pe.b=function(Ie){return arguments.length?De(Xt,ee=+Ie,de,ye):ee},Pe.psiMax=function(Ie){return arguments.length?De(Xt,ee,de=+Ie*M,ye):de*S},Pe.ratio=function(Ie){return arguments.length?De(Xt,ee,de,ye=+Ie):ye},Pe.scale(180.739)}function Jn(Xt,ee,de,ye,De,Pe,Ie,pr,wr,sr,Sr){if(Sr.nanEncountered)return NaN;var _r,Vr,rn,bn,Pn,In,$n,Da,Ia,za;if(_r=de-ee,Vr=Xt(ee+_r*.25),rn=Xt(de-_r*.25),isNaN(Vr)){Sr.nanEncountered=!0;return}if(isNaN(rn)){Sr.nanEncountered=!0;return}return bn=_r*(ye+4*Vr+De)/12,Pn=_r*(De+4*rn+Pe)/12,In=bn+Pn,za=(In-Ie)/15,sr>wr?(Sr.maxDepthCount++,In+za):Math.abs(za)<pr?In+za:($n=ee+_r*.5,Da=Jn(Xt,ee,$n,ye,Vr,De,bn,pr*.5,wr,sr+1,Sr),isNaN(Da)?(Sr.nanEncountered=!0,NaN):(Ia=Jn(Xt,$n,de,De,rn,Pe,Pn,pr*.5,wr,sr+1,Sr),isNaN(Ia)?(Sr.nanEncountered=!0,NaN):Da+Ia))}function ua(Xt,ee,de,ye,De){var Pe={maxDepthCount:0,nanEncountered:!1};De===void 0&&(De=20);var Ie=Xt(ee),pr=Xt(.5*(ee+de)),wr=Xt(de),sr=(Ie+4*pr+wr)*(de-ee)/6,Sr=Jn(Xt,ee,de,Ie,pr,wr,sr,ye,De,1,Pe);return Sr}function Ra(Xt,ee,de){function ye(rn){return Xt+(1-Xt)*n(1-n(rn,ee),1/ee)}function De(rn){return ua(ye,0,rn,1e-4)}for(var Pe=1/De(1),Ie=1e3,pr=(1+1e-8)*Pe,wr=[],sr=0;sr<=Ie;sr++)wr.push(De(sr/Ie)*pr);function Sr(rn){var bn=0,Pn=Ie,In=Ie>>1;do wr[In]>rn?Pn=In:bn=In,In=bn+Pn>>1;while(In>bn);var $n=wr[In+1]-wr[In];return $n&&($n=(rn-wr[In+1])/$n),(In+1+$n)/Ie}var _r=2*Sr(1)/c*Pe/de,Vr=function(rn,bn){var Pn=Sr(P(u(bn))),In=ye(Pn)*rn;return Pn/=_r,[In,bn>=0?Pn:-Pn]};return Vr.invert=function(rn,bn){var Pn;return bn*=_r,P(bn)<1&&(Pn=f(bn)*E(De(P(bn))*Pe)),[rn/ye(P(bn)),Pn]},Vr}function mi(){var Xt=0,ee=2.5,de=1.183136,ye=(0,b.U)(Ra),De=ye(Xt,ee,de);return De.alpha=function(Pe){return arguments.length?ye(Xt=+Pe,ee,de):Xt},De.k=function(Pe){return arguments.length?ye(Xt,ee=+Pe,de):ee},De.gamma=function(Pe){return arguments.length?ye(Xt,ee,de=+Pe):de},De.scale(152.63)}function ri(Xt,ee){return P(Xt[0]-ee[0])<h&&P(Xt[1]-ee[1])<h}function ho(Xt,ee){for(var de=-1,ye=Xt.length,De=Xt[0],Pe,Ie,pr,wr=[];++de<ye;){Pe=Xt[de],Ie=(Pe[0]-De[0])/ee,pr=(Pe[1]-De[1])/ee;for(var sr=0;sr<ee;++sr)wr.push([De[0]+sr*Ie,De[1]+sr*pr]);De=Pe}return wr.push(Pe),wr}function So(Xt){var ee=[],de,ye,De,Pe,Ie,pr,wr,sr=Xt[0].length;for(wr=0;wr<sr;++wr)de=Xt[0][wr],ye=de[0][0],De=de[0][1],Pe=de[1][1],Ie=de[2][0],pr=de[2][1],ee.push(ho([[ye+h,De+h],[ye+h,Pe-h],[Ie-h,Pe-h],[Ie-h,pr+h]],30));for(wr=Xt[1].length-1;wr>=0;--wr)de=Xt[1][wr],ye=de[0][0],De=de[0][1],Pe=de[1][1],Ie=de[2][0],pr=de[2][1],ee.push(ho([[Ie-h,pr-h],[Ie-h,Pe+h],[ye+h,Pe+h],[ye+h,De-h]],30));return{type:"Polygon",coordinates:[(0,ta.Uf)(ee)]}}function ro(Xt,ee,de){var ye,De;function Pe(wr,sr){for(var Sr=sr<0?-1:1,_r=ee[+(sr<0)],Vr=0,rn=_r.length-1;Vr<rn&&wr>_r[Vr][2][0];++Vr);var bn=Xt(wr-_r[Vr][1][0],sr);return bn[0]+=Xt(_r[Vr][1][0],Sr*sr>Sr*_r[Vr][0][1]?_r[Vr][0][1]:sr)[0],bn}de?Pe.invert=de(Pe):Xt.invert&&(Pe.invert=function(wr,sr){for(var Sr=De[+(sr<0)],_r=ee[+(sr<0)],Vr=0,rn=Sr.length;Vr<rn;++Vr){var bn=Sr[Vr];if(bn[0][0]<=wr&&wr<bn[1][0]&&bn[0][1]<=sr&&sr<bn[1][1]){var Pn=Xt.invert(wr-Xt(_r[Vr][1][0],0)[0],sr);return Pn[0]+=_r[Vr][1][0],ri(Pe(Pn[0],Pn[1]),[wr,sr])?Pn:null}}});var Ie=(0,b.c)(Pe),pr=Ie.stream;return Ie.stream=function(wr){var sr=Ie.rotate(),Sr=pr(wr),_r=(Ie.rotate([0,0]),pr(wr));return Ie.rotate(sr),Sr.sphere=function(){(0,pa.c)(ye,_r)},Sr},Ie.lobes=function(wr){return arguments.length?(ye=So(wr),ee=wr.map(function(sr){return sr.map(function(Sr){return[[Sr[0][0]*M,Sr[0][1]*M],[Sr[1][0]*M,Sr[1][1]*M],[Sr[2][0]*M,Sr[2][1]*M]]})}),De=ee.map(function(sr){return sr.map(function(Sr){var _r=Xt(Sr[0][0],Sr[0][1])[0],Vr=Xt(Sr[2][0],Sr[2][1])[0],rn=Xt(Sr[1][0],Sr[0][1])[1],bn=Xt(Sr[1][0],Sr[1][1])[1],Pn;return rn>bn&&(Pn=rn,rn=bn,bn=Pn),[[_r,rn],[Vr,bn]]})}),Ie):ee.map(function(sr){return sr.map(function(Sr){return[[Sr[0][0]*S,Sr[0][1]*S],[Sr[1][0]*S,Sr[1][1]*S],[Sr[2][0]*S,Sr[2][1]*S]]})})},ee!=null&&Ie.lobes(ee),Ie}var ys=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function il(){return ro(Bt,ys).scale(160.857)}var zl=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ni(){return ro(On,zl).scale(152.63)}var _l=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Iu(){return ro(Ct,_l).scale(169.529)}var Qi=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function mo(){return ro(Ct,Qi).scale(169.529).rotate([20,0])}var ol=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function uu(){return ro(wn,ol,gt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var Oi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function sl(){return ro(Wt,Oi).scale(152.63).rotate([-20,0])}function Ui(Xt,ee){return[3/y*Xt*k(c*c/3-ee*ee),ee]}Ui.invert=function(Xt,ee){return[y/3*Xt/k(c*c/3-ee*ee),ee]};function Xi(){return(0,b.c)(Ui).scale(158.837)}function ll(Xt){function ee(de,ye){if(P(P(ye)-i)<h)return[0,ye<0?-2:2];var De=u(ye),Pe=n((1+De)/(1-De),Xt/2),Ie=.5*(Pe+1/Pe)+A(de*=Xt);return[2*u(de)/Ie,(Pe-1/Pe)/Ie]}return ee.invert=function(de,ye){var De=P(ye);if(P(De-2)<h)return de?null:[0,f(ye)*i];if(De>2)return null;de/=2,ye/=2;var Pe=de*de,Ie=ye*ye,pr=2*ye/(1+Pe+Ie);return pr=n((1+pr)/(1-pr),1/Xt),[L(2*de,1-Pe-Ie)/Xt,E((pr-1)/(pr+1))]},ee}function no(){var Xt=.5,ee=(0,b.U)(ll),de=ee(Xt);return de.spacing=function(ye){return arguments.length?ee(Xt=+ye):Xt},de.scale(124.75)}var ao=c/w;function ko(Xt,ee){return[Xt*(1+k(A(ee)))/2,ee/(A(ee/2)*A(Xt/6))]}ko.invert=function(Xt,ee){var de=P(Xt),ye=P(ee),De=h,Pe=i;ye<ao?Pe*=ye/ao:De+=6*m(ao/ye);for(var Ie=0;Ie<25;Ie++){var pr=u(Pe),wr=k(A(Pe)),sr=u(Pe/2),Sr=A(Pe/2),_r=u(De/6),Vr=A(De/6),rn=.5*De*(1+wr)-de,bn=Pe/(Sr*Vr)-ye,Pn=wr?-.25*De*pr/wr:0,In=.5*(1+wr),$n=(1+.5*Pe*sr/Sr)/(Sr*Vr),Da=Pe/Sr*(_r/6)/(Vr*Vr),Ia=Pn*Da-$n*In,za=(rn*Da-bn*In)/Ia,Oa=(bn*Pn-rn*$n)/Ia;if(Pe-=za,De-=Oa,P(za)<h&&P(Oa)<h)break}return[Xt<0?-De:De,ee<0?-Pe:Pe]};function of(){return(0,b.c)(ko).scale(97.2672)}function Eo(Xt,ee){var de=Xt*Xt,ye=ee*ee;return[Xt*(.975534+ye*(-.119161+de*-.0143059+ye*-.0547009)),ee*(1.00384+de*(.0802894+ye*-.02855+de*199025e-9)+ye*(.0998909+ye*-.0491032))]}Eo.invert=function(Xt,ee){var de=f(Xt)*c,ye=ee/2,De=50;do{var Pe=de*de,Ie=ye*ye,pr=de*ye,wr=de*(.975534+Ie*(-.119161+Pe*-.0143059+Ie*-.0547009))-Xt,sr=ye*(1.00384+Pe*(.0802894+Ie*-.02855+Pe*199025e-9)+Ie*(.0998909+Ie*-.0491032))-ee,Sr=.975534-Ie*(.119161+3*Pe*.0143059+Ie*.0547009),_r=-pr*(2*.119161+4*.0547009*Ie+2*.0143059*Pe),Vr=pr*(2*.0802894+4*199025e-9*Pe+2*-.02855*Ie),rn=1.00384+Pe*(.0802894+199025e-9*Pe)+Ie*(3*(.0998909-.02855*Pe)-5*.0491032*Ie),bn=_r*Vr-rn*Sr,Pn=(sr*_r-wr*rn)/bn,In=(wr*Vr-sr*Sr)/bn;de-=Pn,ye-=In}while((P(Pn)>h||P(In)>h)&&--De>0);return De&&[de,ye]};function Zf(){return(0,b.c)(Eo).scale(139.98)}function as(Xt,ee){return[u(Xt)/A(ee),g(ee)*A(Xt)]}as.invert=function(Xt,ee){var de=Xt*Xt,ye=ee*ee,De=ye+1,Pe=de+De,Ie=Xt?x*k((Pe-k(Pe*Pe-4*de))/de):1/k(De);return[E(Xt*Ie),f(ee)*m(Ie)]};function $i(){return(0,b.c)(as).scale(144.049).clipAngle(89.999)}function ku(Xt){var ee=A(Xt),de=g(d+Xt/2);function ye(De,Pe){var Ie=Pe-Xt,pr=P(Ie)<h?De*ee:P(pr=d+Pe/2)<h||P(P(pr)-i)<h?0:De*Ie/r(g(pr)/de);return[pr,Ie]}return ye.invert=function(De,Pe){var Ie,pr=Pe+Xt;return[P(Pe)<h?De/ee:P(Ie=d+pr/2)<h||P(P(Ie)-i)<h?0:De*r(g(Ie)/de)/Pe,pr]},ye}function Ls(){return te(ku).parallel(40).scale(158.837)}function is(Xt,ee){return[Xt,1.25*r(g(d+.4*ee))]}is.invert=function(Xt,ee){return[Xt,2.5*o(v(.8*ee))-.625*c]};function zu(){return(0,b.c)(is).scale(108.318)}function sf(Xt){var ee=Xt.length-1;function de(ye,De){for(var Pe=A(De),Ie=2/(1+Pe*A(ye)),pr=Ie*Pe*u(ye),wr=Ie*u(De),sr=ee,Sr=Xt[sr],_r=Sr[0],Vr=Sr[1],rn;--sr>=0;)Sr=Xt[sr],_r=Sr[0]+pr*(rn=_r)-wr*Vr,Vr=Sr[1]+pr*Vr+wr*rn;return _r=pr*(rn=_r)-wr*Vr,Vr=pr*Vr+wr*rn,[_r,Vr]}return de.invert=function(ye,De){var Pe=20,Ie=ye,pr=De;do{for(var wr=ee,sr=Xt[wr],Sr=sr[0],_r=sr[1],Vr=0,rn=0,bn;--wr>=0;)sr=Xt[wr],Vr=Sr+Ie*(bn=Vr)-pr*rn,rn=_r+Ie*rn+pr*bn,Sr=sr[0]+Ie*(bn=Sr)-pr*_r,_r=sr[1]+Ie*_r+pr*bn;Vr=Sr+Ie*(bn=Vr)-pr*rn,rn=_r+Ie*rn+pr*bn,Sr=Ie*(bn=Sr)-pr*_r-ye,_r=Ie*_r+pr*bn-De;var Pn=Vr*Vr+rn*rn,In,$n;Ie-=In=(Sr*Vr+_r*rn)/Pn,pr-=$n=(_r*Vr-Sr*rn)/Pn}while(P(In)+P($n)>h*h&&--Pe>0);if(Pe){var Da=k(Ie*Ie+pr*pr),Ia=2*o(Da*.5),za=u(Ia);return[L(Ie*za,Da*A(Ia)),Da?E(pr*za/Da):0]}},de}var jf=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],fu=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Kf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Jf=[[.9245,0],[0,0],[.01943,0]],Qf=[[.721316,0],[0,0],[-.00881625,-.00617325]];function _u(){return Ys(jf,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function $f(){return Ys(fu,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function qf(){return Ys(Kf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function lf(){return Ys(Jf,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function uf(){return Ys(Qf,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Ys(Xt,ee){var de=(0,b.c)(sf(Xt)).rotate(ee).clipAngle(90),ye=(0,Ot.c)(ee),De=de.center;return delete de.rotate,de.center=function(Pe){return arguments.length?De(ye(Pe)):ye.invert(De())},de}var ul=k(6),Fl=k(7);function Ol(Xt,ee){var de=E(7*u(ee)/(3*ul));return[ul*Xt*(2*A(2*de/3)-1)/Fl,9*u(de/3)/Fl]}Ol.invert=function(Xt,ee){var de=3*E(ee*Fl/9);return[Xt*Fl/(ul*(2*A(2*de/3)-1)),E(u(de)*3*ul/7)]};function ff(){return(0,b.c)(Ol).scale(164.859)}function ms(Xt,ee){for(var de=(1+x)*u(ee),ye=ee,De=0,Pe;De<25&&(ye-=Pe=(u(ye/2)+u(ye)-de)/(.5*A(ye/2)+A(ye)),!(P(Pe)<h));De++);return[Xt*(1+2*A(ye)/A(ye/2))/(3*w),2*k(3)*u(ye/2)/k(2+w)]}ms.invert=function(Xt,ee){var de=ee*k(2+w)/(2*k(3)),ye=2*E(de);return[3*w*Xt/(1+2*A(ye)/A(ye/2)),E((de+u(ye))/(1+x))]};function tc(){return(0,b.c)(ms).scale(188.209)}function cu(Xt,ee){for(var de=k(6/(4+c)),ye=(1+c/4)*u(ee),De=ee/2,Pe=0,Ie;Pe<25&&(De-=Ie=(De/2+u(De)-ye)/(.5+A(De)),!(P(Ie)<h));Pe++);return[de*(.5+A(De))*Xt/1.5,de*De]}cu.invert=function(Xt,ee){var de=k(6/(4+c)),ye=ee/de;return P(P(ye)-i)<h&&(ye=ye<0?-i:i),[1.5*Xt/(de*(.5+A(ye))),E((ye/2+u(ye))/(1+c/4))]};function cf(){return(0,b.c)(cu).scale(166.518)}var hf=t(47984);function hu(Xt,ee){var de=ee*ee,ye=de*de,De=de*ye;return[Xt*(.84719-.13063*de+De*De*(-.04515+.05494*de-.02326*ye+.00331*De)),ee*(1.01183+ye*ye*(-.02625+.01926*de-.00396*ye))]}hu.invert=function(Xt,ee){var de=ee,ye=25,De,Pe,Ie,pr;do Pe=de*de,Ie=Pe*Pe,de-=De=(de*(1.01183+Ie*Ie*(-.02625+.01926*Pe-.00396*Ie))-ee)/(1.01183+Ie*Ie*(-.23625+.21186*Pe+-.05148*Ie));while(P(De)>T&&--ye>0);return Pe=de*de,Ie=Pe*Pe,pr=Pe*Ie,[Xt/(.84719-.13063*Pe+pr*pr*(-.04515+.05494*Pe-.02326*Ie+.00331*pr)),de]};function Vo(){return(0,b.c)(hu).scale(175.295)}function fl(Xt,ee){return[Xt*(1+A(ee))/2,2*(ee-g(ee/2))]}fl.invert=function(Xt,ee){for(var de=ee/2,ye=0,De=1/0;ye<10&&P(De)>h;++ye){var Pe=A(ee/2);ee-=De=(ee-g(ee/2)-de)/(1-.5/(Pe*Pe))}return[2*Xt/(1+A(ee)),ee]};function Xs(){return(0,b.c)(fl).scale(152.63)}var Bl=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Ps(){return ro(tt(1/0),Bl).rotate([20,0]).scale(152.63)}function os(Xt,ee){var de=u(ee),ye=A(ee),De=f(Xt);if(Xt===0||P(ee)===i)return[0,ee];if(ee===0)return[Xt,0];if(P(Xt)===i)return[Xt*ye,i*de];var Pe=c/(2*Xt)-2*Xt/c,Ie=2*ee/c,pr=(1-Ie*Ie)/(de-Ie),wr=Pe*Pe,sr=pr*pr,Sr=1+wr/sr,_r=1+sr/wr,Vr=(Pe*de/pr-Pe/2)/Sr,rn=(sr*de/wr+pr/2)/_r,bn=Vr*Vr+ye*ye/Sr,Pn=rn*rn-(sr*de*de/wr+pr*de-1)/_r;return[i*(Vr+k(bn)*De),i*(rn+k(Pn<0?0:Pn)*f(-ee*Pe)*De)]}os.invert=function(Xt,ee){Xt/=i,ee/=i;var de=Xt*Xt,ye=ee*ee,De=de+ye,Pe=c*c;return[Xt?(De-1+k((1-De)*(1-De)+4*de))/(2*Xt)*i:0,mt(function(Ie){return De*(c*u(Ie)-2*Ie)*c+4*Ie*Ie*(ee-u(Ie))+2*c*Ie-Pe*ee},0)]};function Fu(){return(0,b.c)(os).scale(127.267)}var cl=1.0148,Ho=.23185,zi=-.14499,Ou=.02406,ec=cl,vu=5*Ho,hl=7*zi,vl=9*Ou,Co=1.790857183;function du(Xt,ee){var de=ee*ee;return[Xt,ee*(cl+de*de*(Ho+de*(zi+Ou*de)))]}du.invert=function(Xt,ee){ee>Co?ee=Co:ee<-Co&&(ee=-Co);var de=ee,ye;do{var De=de*de;de-=ye=(de*(cl+De*De*(Ho+De*(zi+Ou*De)))-ee)/(ec+De*De*(vu+De*(hl+vl*De)))}while(P(ye)>h);return[Xt,de]};function dl(){return(0,b.c)(du).scale(139.319)}function pu(Xt,ee){if(P(ee)<h)return[Xt,0];var de=g(ee),ye=Xt*u(ee);return[u(ye)/de,ee+(1-A(ye))/de]}pu.invert=function(Xt,ee){if(P(ee)<h)return[Xt,0];var de=Xt*Xt+ee*ee,ye=ee*.5,De=10,Pe;do{var Ie=g(ye),pr=1/A(ye),wr=de-2*ee*ye+ye*ye;ye-=Pe=(Ie*wr+2*(ye-ee))/(2+wr*pr*pr+2*(ye-ee)*Ie)}while(P(Pe)>h&&--De>0);return Ie=g(ye),[(P(ee)<P(ye+1/Ie)?E(Xt*Ie):f(ee)*f(Xt)*(m(P(Xt*Ie))+i))/u(ye),ye]};function rc(){return(0,b.c)(pu).scale(103.74)}var vf=t(13696),Bu=t(27284);function Nu(Xt,ee){var de=gu(Xt[1],Xt[0]),ye=gu(ee[1],ee[0]),De=yu(de,ye),Pe=Nl(de)/Nl(ye);return pl([1,0,Xt[0][0],0,1,Xt[0][1]],pl([Pe,0,0,0,Pe,0],pl([A(De),u(De),0,-u(De),A(De),0],[1,0,-ee[0][0],0,1,-ee[0][1]])))}function Uu(Xt){var ee=1/(Xt[0]*Xt[4]-Xt[1]*Xt[3]);return[ee*Xt[4],-ee*Xt[1],ee*(Xt[1]*Xt[5]-Xt[2]*Xt[4]),-ee*Xt[3],ee*Xt[0],ee*(Xt[2]*Xt[3]-Xt[0]*Xt[5])]}function pl(Xt,ee){return[Xt[0]*ee[0]+Xt[1]*ee[3],Xt[0]*ee[1]+Xt[1]*ee[4],Xt[0]*ee[2]+Xt[1]*ee[5]+Xt[2],Xt[3]*ee[0]+Xt[4]*ee[3],Xt[3]*ee[1]+Xt[4]*ee[4],Xt[3]*ee[2]+Xt[4]*ee[5]+Xt[5]]}function gu(Xt,ee){return[Xt[0]-ee[0],Xt[1]-ee[1]]}function Nl(Xt){return k(Xt[0]*Xt[0]+Xt[1]*Xt[1])}function yu(Xt,ee){return L(Xt[0]*ee[1]-Xt[1]*ee[0],Xt[0]*ee[0]+Xt[1]*ee[1])}function xi(Xt,ee,de){ye(Xt,{transform:null});function ye(sr,Sr){if(sr.edges=Vu(sr.face),Sr.face){var _r=sr.shared=pf(sr.face,Sr.face),Vr=Nu(_r.map(Sr.project),_r.map(sr.project));sr.transform=Sr.transform?pl(Sr.transform,Vr):Vr;for(var rn=Sr.edges,bn=0,Pn=rn.length;bn<Pn;++bn)Go(_r[0],rn[bn][1])&&Go(_r[1],rn[bn][0])&&(rn[bn]=sr),Go(_r[0],rn[bn][0])&&Go(_r[1],rn[bn][1])&&(rn[bn]=sr);for(rn=sr.edges,bn=0,Pn=rn.length;bn<Pn;++bn)Go(_r[0],rn[bn][0])&&Go(_r[1],rn[bn][1])&&(rn[bn]=Sr),Go(_r[0],rn[bn][1])&&Go(_r[1],rn[bn][0])&&(rn[bn]=Sr)}else sr.transform=Sr.transform;return sr.children&&sr.children.forEach(function(In){ye(In,sr)}),sr}function De(sr,Sr){var _r=ee(sr,Sr),Vr=_r.project([sr*S,Sr*S]),rn;return(rn=_r.transform)?[rn[0]*Vr[0]+rn[1]*Vr[1]+rn[2],-(rn[3]*Vr[0]+rn[4]*Vr[1]+rn[5])]:(Vr[1]=-Vr[1],Vr)}Zs(Xt)&&(De.invert=function(sr,Sr){var _r=Pe(Xt,[sr,-Sr]);return _r&&(_r[0]*=M,_r[1]*=M,_r)});function Pe(sr,Sr){var _r=sr.project.invert,Vr=sr.transform,rn=Sr;if(Vr&&(Vr=Uu(Vr),rn=[Vr[0]*rn[0]+Vr[1]*rn[1]+Vr[2],Vr[3]*rn[0]+Vr[4]*rn[1]+Vr[5]]),_r&&sr===Ie(bn=_r(rn)))return bn;for(var bn,Pn=sr.children,In=0,$n=Pn&&Pn.length;In<$n;++In)if(bn=Pe(Pn[In],Sr))return bn}function Ie(sr){return ee(sr[0]*M,sr[1]*M)}var pr=(0,b.c)(De),wr=pr.stream;return pr.stream=function(sr){var Sr=pr.rotate(),_r=wr(sr),Vr=(pr.rotate([0,0]),wr(sr));return pr.rotate(Sr),_r.sphere=function(){Vr.polygonStart(),Vr.lineStart(),df(Vr,Xt),Vr.lineEnd(),Vr.polygonEnd()},_r},pr.angle(de==null?-30:de*S)}function df(Xt,ee,de){var ye,De=ee.edges,Pe=De.length,Ie,pr={type:"MultiPoint",coordinates:ee.face},wr=ee.face.filter(function(Pn){return P(Pn[1])!==90}),sr=(0,vf.c)({type:"MultiPoint",coordinates:wr}),Sr=!1,_r=-1,Vr=sr[1][0]-sr[0][0],rn=Vr===180||Vr===360?[(sr[0][0]+sr[1][0])/2,(sr[0][1]+sr[1][1])/2]:(0,Pt.c)(pr);if(de)for(;++_r<Pe&&De[_r]!==de;);++_r;for(var bn=0;bn<Pe;++bn)Ie=De[(bn+_r)%Pe],Array.isArray(Ie)?(Sr||(Xt.point((ye=(0,Bu.c)(Ie[0],rn)(h))[0],ye[1]),Sr=!0),Xt.point((ye=(0,Bu.c)(Ie[1],rn)(h))[0],ye[1])):(Sr=!1,Ie!==de&&df(Xt,Ie,ee))}function Go(Xt,ee){return Xt&&ee&&Xt[0]===ee[0]&&Xt[1]===ee[1]}function pf(Xt,ee){for(var de,ye,De=Xt.length,Pe=null,Ie=0;Ie<De;++Ie){de=Xt[Ie];for(var pr=ee.length;--pr>=0;)if(ye=ee[pr],de[0]===ye[0]&&de[1]===ye[1]){if(Pe)return[Pe,de];Pe=de}}}function Vu(Xt){for(var ee=Xt.length,de=[],ye=Xt[ee-1],De=0;De<ee;++De)de.push([ye,ye=Xt[De]]);return de}function Zs(Xt){return Xt.project.invert||Xt.children&&Xt.children.some(Zs)}var Rs=t(53285),mu=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Bi=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Xt){return Xt.map(function(ee){return mu[ee]})});function Ul(Xt){Xt=Xt||function(de){var ye=(0,Pt.c)({type:"MultiPoint",coordinates:de});return(0,Rs.c)().scale(1).translate([0,0]).rotate([-ye[0],-ye[1]])};var ee=Bi.map(function(de){return{face:de,project:Xt(de)}});return[-1,0,0,1,0,1,4,5].forEach(function(de,ye){var De=ee[de];De&&(De.children||(De.children=[])).push(ee[ye])}),xi(ee[0],function(de,ye){return ee[de<-c/2?ye<0?6:4:de<0?ye<0?2:0:de<c/2?ye<0?3:1:ye<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Wo=2/k(3);function xs(Xt,ee){var de=pt(Xt,ee);return[de[0]*Wo,de[1]]}xs.invert=function(Xt,ee){return pt.invert(Xt/Wo,ee)};function js(Xt){Xt=Xt||function(de){var ye=(0,Pt.c)({type:"MultiPoint",coordinates:de});return(0,b.c)(xs).translate([0,0]).scale(1).rotate(ye[1]>0?[-ye[0],0]:[180-ye[0],180])};var ee=Bi.map(function(de){return{face:de,project:Xt(de)}});return[-1,0,0,1,0,1,4,5].forEach(function(de,ye){var De=ee[de];De&&(De.children||(De.children=[])).push(ee[ye])}),xi(ee[0],function(de,ye){return ee[de<-c/2?ye<0?6:4:de<0?ye<0?2:0:de<c/2?ye<0?3:1:ye<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ds(Xt){Xt=Xt||function(Ie){var pr=Ie.length===6?(0,Pt.c)({type:"MultiPoint",coordinates:Ie}):Ie[0];return(0,Rs.c)().scale(1).translate([0,0]).rotate([-pr[0],-pr[1]])};var ee=Bi.map(function(Ie){for(var pr=Ie.map(Fo),wr=pr.length,sr=pr[wr-1],Sr,_r=[],Vr=0;Vr<wr;++Vr)Sr=pr[Vr],_r.push(Xo([sr[0]*.9486832980505138+Sr[0]*.31622776601683794,sr[1]*.9486832980505138+Sr[1]*.31622776601683794,sr[2]*.9486832980505138+Sr[2]*.31622776601683794]),Xo([Sr[0]*.9486832980505138+sr[0]*.31622776601683794,Sr[1]*.9486832980505138+sr[1]*.31622776601683794,Sr[2]*.9486832980505138+sr[2]*.31622776601683794])),sr=Sr;return _r}),de=[],ye=[-1,0,0,1,0,1,4,5];ee.forEach(function(Ie,pr){for(var wr=Bi[pr],sr=wr.length,Sr=de[pr]=[],_r=0;_r<sr;++_r)ee.push([wr[_r],Ie[(_r*2+2)%(2*sr)],Ie[(_r*2+1)%(2*sr)]]),ye.push(pr),Sr.push(bs(Fo(Ie[(_r*2+2)%(2*sr)]),Fo(Ie[(_r*2+1)%(2*sr)])))});var De=ee.map(function(Ie){return{project:Xt(Ie),face:Ie}});ye.forEach(function(Ie,pr){var wr=De[Ie];wr&&(wr.children||(wr.children=[])).push(De[pr])});function Pe(Ie,pr){var wr=A(pr),sr=[wr*A(Ie),wr*u(Ie),u(pr)],Sr=Ie<-c/2?pr<0?6:4:Ie<0?pr<0?2:0:Ie<c/2?pr<0?3:1:pr<0?7:5,_r=de[Sr];return De[Yo(_r[0],sr)<0?8+3*Sr:Yo(_r[1],sr)<0?8+3*Sr+1:Yo(_r[2],sr)<0?8+3*Sr+2:Sr]}return xi(De[0],Pe).angle(-30).scale(110.625).center([0,45])}function Yo(Xt,ee){for(var de=0,ye=Xt.length,De=0;de<ye;++de)De+=Xt[de]*ee[de];return De}function bs(Xt,ee){return[Xt[1]*ee[2]-Xt[2]*ee[1],Xt[2]*ee[0]-Xt[0]*ee[2],Xt[0]*ee[1]-Xt[1]*ee[0]]}function Xo(Xt){return[L(Xt[1],Xt[0])*S,E(e(-1,s(1,Xt[2])))*S]}function Fo(Xt){var ee=Xt[0]*M,de=Xt[1]*M,ye=A(de);return[ye*A(ee),ye*u(ee),u(de)]}function Vl(){}function nc(Xt){if((de=Xt.length)<4)return!1;for(var ee=0,de,ye=Xt[de-1][1]*Xt[0][0]-Xt[de-1][0]*Xt[0][1];++ee<de;)ye+=Xt[ee-1][1]*Xt[ee][0]-Xt[ee-1][0]*Xt[ee][1];return ye<=0}function ac(Xt,ee){for(var de=ee[0],ye=ee[1],De=!1,Pe=0,Ie=Xt.length,pr=Ie-1;Pe<Ie;pr=Pe++){var wr=Xt[Pe],sr=wr[0],Sr=wr[1],_r=Xt[pr],Vr=_r[0],rn=_r[1];Sr>ye^rn>ye&&de<(Vr-sr)*(ye-Sr)/(rn-Sr)+sr&&(De=!De)}return De}function ic(Xt,ee){var de=ee.stream,ye;if(!de)throw new Error("invalid projection");switch(Xt&&Xt.type){case"Feature":ye=Hu;break;case"FeatureCollection":ye=oc;break;default:ye=yl;break}return ye(Xt,de)}function oc(Xt,ee){return{type:"FeatureCollection",features:Xt.features.map(function(de){return Hu(de,ee)})}}function Hu(Xt,ee){return{type:"Feature",id:Xt.id,properties:Xt.properties,geometry:yl(Xt.geometry,ee)}}function gf(Xt,ee){return{type:"GeometryCollection",geometries:Xt.geometries.map(function(de){return yl(de,ee)})}}function yl(Xt,ee){if(!Xt)return null;if(Xt.type==="GeometryCollection")return gf(Xt,ee);var de;switch(Xt.type){case"Point":de=ml;break;case"MultiPoint":de=ml;break;case"LineString":de=yf;break;case"MultiLineString":de=yf;break;case"Polygon":de=Hl;break;case"MultiPolygon":de=Hl;break;case"Sphere":de=Hl;break;default:return null}return(0,pa.c)(Xt,ee(de)),de.result()}var qi=[],zo=[],ml={point:function(Xt,ee){qi.push([Xt,ee])},result:function(){var Xt=qi.length?qi.length<2?{type:"Point",coordinates:qi[0]}:{type:"MultiPoint",coordinates:qi}:null;return qi=[],Xt}},yf={lineStart:Vl,point:function(Xt,ee){qi.push([Xt,ee])},lineEnd:function(){qi.length&&(zo.push(qi),qi=[])},result:function(){var Xt=zo.length?zo.length<2?{type:"LineString",coordinates:zo[0]}:{type:"MultiLineString",coordinates:zo}:null;return zo=[],Xt}},Hl={polygonStart:Vl,lineStart:Vl,point:function(Xt,ee){qi.push([Xt,ee])},lineEnd:function(){var Xt=qi.length;if(Xt){do qi.push(qi[0].slice());while(++Xt<4);zo.push(qi),qi=[]}},polygonEnd:Vl,result:function(){if(!zo.length)return null;var Xt=[],ee=[];return zo.forEach(function(de){nc(de)?Xt.push([de]):ee.push(de)}),ee.forEach(function(de){var ye=de[0];Xt.some(function(De){if(ac(De[0],ye))return De.push(de),!0})||Xt.push([de])}),zo=[],Xt.length?Xt.length>1?{type:"MultiPolygon",coordinates:Xt}:{type:"Polygon",coordinates:Xt[0]}:null}};function ws(Xt){var ee=Xt(i,0)[0]-Xt(-i,0)[0];function de(ye,De){var Pe=P(ye)<i,Ie=Xt(Pe?ye:ye>0?ye-c:ye+c,De),pr=(Ie[0]-Ie[1])*x,wr=(Ie[0]+Ie[1])*x;if(Pe)return[pr,wr];var sr=ee*x,Sr=pr>0^wr>0?-1:1;return[Sr*pr-f(wr)*sr,Sr*wr-f(pr)*sr]}return Xt.invert&&(de.invert=function(ye,De){var Pe=(ye+De)*x,Ie=(De-ye)*x,pr=P(Pe)<.5*ee&&P(Ie)<.5*ee;if(!pr){var wr=ee*x,sr=Pe>0^Ie>0?-1:1,Sr=-sr*ye+(Ie>0?1:-1)*wr,_r=-sr*De+(Pe>0?1:-1)*wr;Pe=(-Sr-_r)*x,Ie=(Sr-_r)*x}var Vr=Xt.invert(Pe,Ie);return pr||(Vr[0]+=Pe>0?c:-c),Vr}),(0,b.c)(de).rotate([-90,-90,45]).clipAngle(179.999)}function sc(){return ws(Tn).scale(176.423)}function mf(){return ws(Cr).scale(111.48)}function xf(Xt,ee){if(!(0<=(ee=+ee)&&ee<=20))throw new Error("invalid digits");function de(sr){var Sr=sr.length,_r=2,Vr=new Array(Sr);for(Vr[0]=+sr[0].toFixed(ee),Vr[1]=+sr[1].toFixed(ee);_r<Sr;)Vr[_r]=sr[_r],++_r;return Vr}function ye(sr){return sr.map(de)}function De(sr){for(var Sr=de(sr[0]),_r=[Sr],Vr=1;Vr<sr.length;Vr++){var rn=de(sr[Vr]);(rn.length>2||rn[0]!=Sr[0]||rn[1]!=Sr[1])&&(_r.push(rn),Sr=rn)}return _r.length===1&&sr.length>1&&_r.push(de(sr[sr.length-1])),_r}function Pe(sr){return sr.map(De)}function Ie(sr){if(sr==null)return sr;var Sr;switch(sr.type){case"GeometryCollection":Sr={type:"GeometryCollection",geometries:sr.geometries.map(Ie)};break;case"Point":Sr={type:"Point",coordinates:de(sr.coordinates)};break;case"MultiPoint":Sr={type:sr.type,coordinates:ye(sr.coordinates)};break;case"LineString":Sr={type:sr.type,coordinates:De(sr.coordinates)};break;case"MultiLineString":case"Polygon":Sr={type:sr.type,coordinates:Pe(sr.coordinates)};break;case"MultiPolygon":Sr={type:"MultiPolygon",coordinates:sr.coordinates.map(Pe)};break;default:return sr}return sr.bbox!=null&&(Sr.bbox=sr.bbox),Sr}function pr(sr){var Sr={type:"Feature",properties:sr.properties,geometry:Ie(sr.geometry)};return sr.id!=null&&(Sr.id=sr.id),sr.bbox!=null&&(Sr.bbox=sr.bbox),Sr}if(Xt!=null)switch(Xt.type){case"Feature":return pr(Xt);case"FeatureCollection":{var wr={type:"FeatureCollection",features:Xt.features.map(pr)};return Xt.bbox!=null&&(wr.bbox=Xt.bbox),wr}default:return Ie(Xt)}return Xt}function Gu(Xt){var ee=u(Xt);function de(ye,De){var Pe=ee?g(ye*ee/2)/ee:ye/2;if(!De)return[2*Pe,-Xt];var Ie=2*o(Pe*u(De)),pr=1/g(De);return[u(Ie)*pr,De+(1-A(Ie))*pr-Xt]}return de.invert=function(ye,De){if(P(De+=Xt)<h)return[ee?2*o(ee*ye/2)/ee:ye,0];var Pe=ye*ye+De*De,Ie=0,pr=10,wr;do{var sr=g(Ie),Sr=1/A(Ie),_r=Pe-2*De*Ie+Ie*Ie;Ie-=wr=(sr*_r+2*(Ie-De))/(2+_r*Sr*Sr+2*(Ie-De)*sr)}while(P(wr)>h&&--pr>0);var Vr=ye*(sr=g(Ie)),rn=g(P(De)<P(Ie+1/sr)?E(Vr)*.5:m(Vr)*.5+c/4)/u(Ie);return[ee?2*o(ee*rn)/ee:2*rn,Ie]},de}function bf(){return te(Gu).scale(131.215)}var xo=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];xo.forEach(function(Xt){Xt[1]*=1.0144});function Zo(Xt,ee){var de=s(18,P(ee)*36/c),ye=p(de),De=de-ye,Pe=(_r=xo[ye])[0],Ie=_r[1],pr=(_r=xo[++ye])[0],wr=_r[1],sr=(_r=xo[s(19,++ye)])[0],Sr=_r[1],_r;return[Xt*(pr+De*(sr-Pe)/2+De*De*(sr-2*pr+Pe)/2),(ee>0?i:-i)*(wr+De*(Sr-Ie)/2+De*De*(Sr-2*wr+Ie)/2)]}Zo.invert=function(Xt,ee){var de=ee/i,ye=de*90,De=s(18,P(ye/5)),Pe=e(0,p(De));do{var Ie=xo[Pe][1],pr=xo[Pe+1][1],wr=xo[s(19,Pe+2)][1],sr=wr-Ie,Sr=wr-2*pr+Ie,_r=2*(P(de)-pr)/sr,Vr=Sr/sr,rn=_r*(1-Vr*_r*(1-2*Vr*_r));if(rn>=0||Pe===1){ye=(ee>=0?5:-5)*(rn+De);var bn=50,Pn;do De=s(18,P(ye)/5),Pe=p(De),rn=De-Pe,Ie=xo[Pe][1],pr=xo[Pe+1][1],wr=xo[s(19,Pe+2)][1],ye-=(Pn=(ee>=0?i:-i)*(pr+rn*(wr-Ie)/2+rn*rn*(wr-2*pr+Ie)/2)-ee)*S;while(P(Pn)>T&&--bn>0);break}}while(--Pe>=0);var In=xo[Pe][0],$n=xo[Pe+1][0],Da=xo[s(19,Pe+2)][0];return[Xt/($n+rn*(Da-In)/2+rn*rn*(Da-2*$n+In)/2),ye*M]};function Is(){return(0,b.c)(Zo).scale(152.63)}function xl(Xt){function ee(de,ye){var De=A(ye),Pe=(Xt-1)/(Xt-De*A(de));return[Pe*De*u(de),Pe*u(ye)]}return ee.invert=function(de,ye){var De=de*de+ye*ye,Pe=k(De),Ie=(Xt-k(1-De*(Xt+1)/(Xt-1)))/((Xt-1)/Pe+Pe/(Xt-1));return[L(de*Ie,Pe*k(1-Ie*Ie)),Pe?E(ye*Ie/Pe):0]},ee}function xu(Xt,ee){var de=xl(Xt);if(!ee)return de;var ye=A(ee),De=u(ee);function Pe(Ie,pr){var wr=de(Ie,pr),sr=wr[1],Sr=sr*De/(Xt-1)+ye;return[wr[0]*ye/Sr,sr/Sr]}return Pe.invert=function(Ie,pr){var wr=(Xt-1)/(Xt-1-pr*De);return de.invert(wr*Ie,wr*pr*ye)},Pe}function Ks(){var Xt=2,ee=0,de=(0,b.U)(xu),ye=de(Xt,ee);return ye.distance=function(De){return arguments.length?de(Xt=+De,ee):Xt},ye.tilt=function(De){return arguments.length?de(Xt,ee=De*M):ee*S},ye.scale(432.147).clipAngle(m(1/Xt)*S-1e-6)}var Js=1e-4,wf=1e4,Ts=-180,bl=Ts+Js,ks=180,As=ks-Js,Gl=-90,wl=Gl+Js,di=90,Tl=di-Js;function bu(Xt){return Xt.length>0}function Tf(Xt){return Math.floor(Xt*wf)/wf}function Al(Xt){return Xt===Gl||Xt===di?[0,Xt]:[Ts,Tf(Xt)]}function Wl(Xt){var ee=Xt[0],de=Xt[1],ye=!1;return ee<=bl?(ee=Ts,ye=!0):ee>=As&&(ee=ks,ye=!0),de<=wl?(de=Gl,ye=!0):de>=Tl&&(de=di,ye=!0),ye?[ee,de]:Xt}function wu(Xt){return Xt.map(Wl)}function Wu(Xt,ee,de){for(var ye=0,De=Xt.length;ye<De;++ye){var Pe=Xt[ye].slice();de.push({index:-1,polygon:ee,ring:Pe});for(var Ie=0,pr=Pe.length;Ie<pr;++Ie){var wr=Pe[Ie],sr=wr[0],Sr=wr[1];if(sr<=bl||sr>=As||Sr<=wl||Sr>=Tl){Pe[Ie]=Wl(wr);for(var _r=Ie+1;_r<pr;++_r){var Vr=Pe[_r],rn=Vr[0],bn=Vr[1];if(rn>bl&&rn<As&&bn>wl&&bn<Tl)break}if(_r===Ie+1)continue;if(Ie){var Pn={index:-1,polygon:ee,ring:Pe.slice(0,Ie+1)};Pn.ring[Pn.ring.length-1]=Al(Sr),de[de.length-1]=Pn}else de.pop();if(_r>=pr)break;de.push({index:-1,polygon:ee,ring:Pe=Pe.slice(_r-1)}),Pe[0]=Al(Pe[0][1]),Ie=-1,pr=Pe.length}}}}function Yl(Xt){var ee,de=Xt.length,ye={},De={},Pe,Ie,pr,wr,sr;for(ee=0;ee<de;++ee){if(Pe=Xt[ee],Ie=Pe.ring[0],wr=Pe.ring[Pe.ring.length-1],Ie[0]===wr[0]&&Ie[1]===wr[1]){Pe.polygon.push(Pe.ring),Xt[ee]=null;continue}Pe.index=ee,ye[Ie]=De[wr]=Pe}for(ee=0;ee<de;++ee)if(Pe=Xt[ee],Pe){if(Ie=Pe.ring[0],wr=Pe.ring[Pe.ring.length-1],pr=De[Ie],sr=ye[wr],delete ye[Ie],delete De[wr],Ie[0]===wr[0]&&Ie[1]===wr[1]){Pe.polygon.push(Pe.ring);continue}pr?(delete De[Ie],delete ye[pr.ring[0]],pr.ring.pop(),Xt[pr.index]=null,Pe={index:-1,polygon:pr.polygon,ring:pr.ring.concat(Pe.ring)},pr===sr?Pe.polygon.push(Pe.ring):(Pe.index=de++,Xt.push(ye[Pe.ring[0]]=De[Pe.ring[Pe.ring.length-1]]=Pe))):sr?(delete ye[wr],delete De[sr.ring[sr.ring.length-1]],Pe.ring.pop(),Pe={index:de++,polygon:sr.polygon,ring:Pe.ring.concat(sr.ring)},Xt[sr.index]=null,Xt.push(ye[Pe.ring[0]]=De[Pe.ring[Pe.ring.length-1]]=Pe)):(Pe.ring.push(Pe.ring[0]),Pe.polygon.push(Pe.ring))}}function Xl(Xt){var ee={type:"Feature",geometry:zs(Xt.geometry)};return Xt.id!=null&&(ee.id=Xt.id),Xt.bbox!=null&&(ee.bbox=Xt.bbox),Xt.properties!=null&&(ee.properties=Xt.properties),ee}function zs(Xt){if(Xt==null)return Xt;var ee,de,ye,De;switch(Xt.type){case"GeometryCollection":ee={type:"GeometryCollection",geometries:Xt.geometries.map(zs)};break;case"Point":ee={type:"Point",coordinates:Wl(Xt.coordinates)};break;case"MultiPoint":case"LineString":ee={type:Xt.type,coordinates:wu(Xt.coordinates)};break;case"MultiLineString":ee={type:"MultiLineString",coordinates:Xt.coordinates.map(wu)};break;case"Polygon":{var Pe=[];Wu(Xt.coordinates,Pe,de=[]),Yl(de),ee={type:"Polygon",coordinates:Pe};break}case"MultiPolygon":{de=[],ye=-1,De=Xt.coordinates.length;for(var Ie=new Array(De);++ye<De;)Wu(Xt.coordinates[ye],Ie[ye]=[],de);Yl(de),ee={type:"MultiPolygon",coordinates:Ie.filter(bu)};break}default:return Xt}return Xt.bbox!=null&&(ee.bbox=Xt.bbox),ee}function Zl(Xt){if(Xt==null)return Xt;switch(Xt.type){case"Feature":return Xl(Xt);case"FeatureCollection":{var ee={type:"FeatureCollection",features:Xt.features.map(Xl)};return Xt.bbox!=null&&(ee.bbox=Xt.bbox),ee}default:return zs(Xt)}}function _s(Xt,ee){var de=g(ee/2),ye=u(d*de);return[Xt*(.74482-.34588*ye*ye),1.70711*de]}_s.invert=function(Xt,ee){var de=ee/1.70711,ye=u(d*de);return[Xt/(.74482-.34588*ye*ye),2*o(de)]};function Zi(){return(0,b.c)(_s).scale(146.153)}function ss(Xt,ee,de){var ye=(0,Bu.c)(ee,de),De=ye(.5),Pe=(0,Ot.c)([-De[0],-De[1]])(ee),Ie=ye.distance/2,pr=-E(u(Pe[1]*M)/u(Ie)),wr=[-De[0],-De[1],-(Pe[0]>0?c-pr:pr)*S],sr=(0,b.c)(Xt(Ie)).rotate(wr),Sr=(0,Ot.c)(wr),_r=sr.center;return delete sr.rotate,sr.center=function(Vr){return arguments.length?_r(Sr(Vr)):Sr.invert(_r())},sr.clipAngle(90)}function Yu(Xt){var ee=A(Xt);function de(ye,De){var Pe=(0,Rs.Y)(ye,De);return Pe[0]*=ee,Pe}return de.invert=function(ye,De){return Rs.Y.invert(ye/ee,De)},de}function Qs(){return Tu([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Tu(Xt,ee){return ss(Yu,Xt,ee)}function jl(Xt){if(!(Xt*=2))return it.O;var ee=-Xt/2,de=-ee,ye=Xt*Xt,De=g(de),Pe=.5/u(de);function Ie(pr,wr){var sr=m(A(wr)*A(pr-ee)),Sr=m(A(wr)*A(pr-de)),_r=wr<0?-1:1;return sr*=sr,Sr*=Sr,[(sr-Sr)/(2*Xt),_r*k(4*ye*Sr-(ye-sr+Sr)*(ye-sr+Sr))/(2*Xt)]}return Ie.invert=function(pr,wr){var sr=wr*wr,Sr=A(k(sr+(Vr=pr+ee)*Vr)),_r=A(k(sr+(Vr=pr+de)*Vr)),Vr,rn;return[L(rn=Sr-_r,Vr=(Sr+_r)*De),(wr<0?-1:1)*m(k(Vr*Vr+rn*rn)*Pe)]},Ie}function lc(){return Af([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Af(Xt,ee){return ss(jl,Xt,ee)}function vo(Xt,ee){if(P(ee)<h)return[Xt,0];var de=P(ee/i),ye=E(de);if(P(Xt)<h||P(P(ee)-i)<h)return[0,f(ee)*c*g(ye/2)];var De=A(ye),Pe=P(c/Xt-Xt/c)/2,Ie=Pe*Pe,pr=De/(de+De-1),wr=pr*(2/de-1),sr=wr*wr,Sr=sr+Ie,_r=pr-sr,Vr=Ie+pr;return[f(Xt)*c*(Pe*_r+k(Ie*_r*_r-Sr*(pr*pr-sr)))/Sr,f(ee)*c*(wr*Vr-Pe*k((Ie+1)*Sr-Vr*Vr))/Sr]}vo.invert=function(Xt,ee){if(P(ee)<h)return[Xt,0];if(P(Xt)<h)return[0,i*u(2*o(ee/c))];var de=(Xt/=c)*Xt,ye=(ee/=c)*ee,De=de+ye,Pe=De*De,Ie=-P(ee)*(1+De),pr=Ie-2*ye+de,wr=-2*Ie+1+2*ye+Pe,sr=ye/wr+(2*pr*pr*pr/(wr*wr*wr)-9*Ie*pr/(wr*wr))/27,Sr=(Ie-pr*pr/(3*wr))/wr,_r=2*k(-Sr/3),Vr=m(3*sr/(Sr*_r))/3;return[c*(De-1+k(1+2*(de-ye)+Pe))/(2*Xt),f(ee)*c*(-_r*A(Vr+c/3)-pr/(3*wr))]};function Kl(){return(0,b.c)(vo).scale(79.4183)}function Ml(Xt,ee){if(P(ee)<h)return[Xt,0];var de=P(ee/i),ye=E(de);if(P(Xt)<h||P(P(ee)-i)<h)return[0,f(ee)*c*g(ye/2)];var De=A(ye),Pe=P(c/Xt-Xt/c)/2,Ie=Pe*Pe,pr=De*(k(1+Ie)-Pe*De)/(1+Ie*de*de);return[f(Xt)*c*pr,f(ee)*c*k(1-pr*(2*Pe+pr))]}Ml.invert=function(Xt,ee){if(!Xt)return[0,i*u(2*o(ee/c))];var de=P(Xt/c),ye=(1-de*de-(ee/=c)*ee)/(2*de),De=ye*ye,Pe=k(De+1);return[f(Xt)*c*(Pe-ye),f(ee)*i*u(2*L(k((1-2*ye*de)*(ye+Pe)-de),k(Pe+ye+de)))]};function Mf(){return(0,b.c)(Ml).scale(79.4183)}function Fs(Xt,ee){if(P(ee)<h)return[Xt,0];var de=ee/i,ye=E(de);if(P(Xt)<h||P(P(ee)-i)<h)return[0,c*g(ye/2)];var De=(c/Xt-Xt/c)/2,Pe=de/(1+A(ye));return[c*(f(Xt)*k(De*De+1-Pe*Pe)-De),c*Pe]}Fs.invert=function(Xt,ee){if(!ee)return[Xt,0];var de=ee/c,ye=(c*c*(1-de*de)-Xt*Xt)/(2*c*Xt);return[Xt?c*(f(Xt)*k(ye*ye+1)-ye):0,i*u(2*o(de))]};function uc(){return(0,b.c)(Fs).scale(79.4183)}function Lo(Xt,ee){if(!ee)return[Xt,0];var de=P(ee);if(!Xt||de===i)return[0,ee];var ye=de/i,De=ye*ye,Pe=(8*ye-De*(De+2)-5)/(2*De*(ye-1)),Ie=Pe*Pe,pr=ye*Pe,wr=De+Ie+2*pr,sr=ye+3*Pe,Sr=Xt/i,_r=Sr+1/Sr,Vr=f(P(Xt)-i)*k(_r*_r-4),rn=Vr*Vr,bn=wr*(De+Ie*rn-1)+(1-De)*(De*(sr*sr+4*Ie)+12*pr*Ie+4*Ie*Ie),Pn=(Vr*(wr+Ie-1)+2*k(bn))/(4*wr+rn);return[f(Xt)*i*Pn,f(ee)*i*k(1+Vr*P(Pn)-Pn*Pn)]}Lo.invert=function(Xt,ee){var de;if(!Xt||!ee)return[Xt,ee];ee/=c;var ye=f(Xt)*Xt/i,De=(ye*ye-1+4*ee*ee)/P(ye),Pe=De*De,Ie=2*ee,pr=50;do{var wr=Ie*Ie,sr=(8*Ie-wr*(wr+2)-5)/(2*wr*(Ie-1)),Sr=(3*Ie-wr*Ie-10)/(2*wr*Ie),_r=sr*sr,Vr=Ie*sr,rn=Ie+sr,bn=rn*rn,Pn=Ie+3*sr,In=bn*(wr+_r*Pe-1)+(1-wr)*(wr*(Pn*Pn+4*_r)+_r*(12*Vr+4*_r)),$n=-2*rn*(4*Vr*_r+(1-4*wr+3*wr*wr)*(1+Sr)+_r*(-6+14*wr-Pe+(-8+8*wr-2*Pe)*Sr)+Vr*(-8+12*wr+(-10+10*wr-Pe)*Sr)),Da=k(In),Ia=De*(bn+_r-1)+2*Da-ye*(4*bn+Pe),za=De*(2*sr*Sr+2*rn*(1+Sr))+$n/Da-8*rn*(De*(-1+_r+bn)+2*Da)*(1+Sr)/(Pe+4*bn);Ie-=de=Ia/za}while(de>h&&--pr>0);return[f(Xt)*(k(De*De+4)+De)*c/4,i*Ie]};function Jl(){return(0,b.c)(Lo).scale(127.16)}function Au(Xt,ee,de,ye,De){function Pe(Ie,pr){var wr=de*u(ye*pr),sr=k(1-wr*wr),Sr=k(2/(1+sr*A(Ie*=De)));return[Xt*sr*Sr*u(Ie),ee*wr*Sr]}return Pe.invert=function(Ie,pr){var wr=Ie/Xt,sr=pr/ee,Sr=k(wr*wr+sr*sr),_r=2*E(Sr/2);return[L(Ie*g(_r),Xt*Sr)/De,Sr&&E(pr*u(_r)/(ee*de*Sr))/ye]},Pe}function Ms(Xt,ee,de,ye){var De=c/3;Xt=e(Xt,h),ee=e(ee,h),Xt=s(Xt,i),ee=s(ee,c-h),de=e(de,0),de=s(de,100-h),ye=e(ye,h);var Pe=de/100+1,Ie=ye/100,pr=m(Pe*A(De))/De,wr=u(Xt)/u(pr*i),sr=ee/c,Sr=k(Ie*u(Xt/2)/u(ee/2)),_r=Sr/k(sr*wr*pr),Vr=1/(Sr*k(sr*wr*pr));return Au(_r,Vr,wr,pr,sr)}function Os(){var Xt=65*M,ee=60*M,de=20,ye=200,De=(0,b.U)(Ms),Pe=De(Xt,ee,de,ye);return Pe.poleline=function(Ie){return arguments.length?De(Xt=+Ie*M,ee,de,ye):Xt*S},Pe.parallels=function(Ie){return arguments.length?De(Xt,ee=+Ie*M,de,ye):ee*S},Pe.inflation=function(Ie){return arguments.length?De(Xt,ee,de=+Ie,ye):de},Pe.ratio=function(Ie){return arguments.length?De(Xt,ee,de,ye=+Ie):ye},Pe.scale(163.775)}function Xu(){return Os().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Ql=4*c+3*k(3),$l=2*k(2*c*k(3)/Ql),Mu=xt($l*k(3)/c,$l,Ql/6);function Sf(){return(0,b.c)(Mu).scale(176.84)}function ql(Xt,ee){return[Xt*k(1-3*ee*ee/(c*c)),ee]}ql.invert=function(Xt,ee){return[Xt/k(1-3*ee*ee/(c*c)),ee]};function Zu(){return(0,b.c)(ql).scale(152.63)}function $s(Xt,ee){var de=A(ee),ye=A(Xt)*de,De=1-ye,Pe=A(Xt=L(u(Xt)*de,-u(ee))),Ie=u(Xt);return de=k(1-ye*ye),[Ie*de-Pe*De,-Pe*de-Ie*De]}$s.invert=function(Xt,ee){var de=(Xt*Xt+ee*ee)/-2,ye=k(-de*(2+de)),De=ee*de+Xt*ye,Pe=Xt*de-ee*ye,Ie=k(Pe*Pe+De*De);return[L(ye*De,Ie*(1+de)),Ie?-E(ye*Pe/Ie):0]};function ju(){return(0,b.c)($s).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}function tu(Xt,ee){var de=G(Xt,ee);return[(de[0]+Xt/i)/2,(de[1]+ee)/2]}tu.invert=function(Xt,ee){var de=Xt,ye=ee,De=25;do{var Pe=A(ye),Ie=u(ye),pr=u(2*ye),wr=Ie*Ie,sr=Pe*Pe,Sr=u(de),_r=A(de/2),Vr=u(de/2),rn=Vr*Vr,bn=1-sr*_r*_r,Pn=bn?m(Pe*_r)*k(In=1/bn):In=0,In,$n=.5*(2*Pn*Pe*Vr+de/i)-Xt,Da=.5*(Pn*Ie+ye)-ee,Ia=.5*In*(sr*rn+Pn*Pe*_r*wr)+.5/i,za=In*(Sr*pr/4-Pn*Ie*Vr),Oa=.125*In*(pr*Vr-Pn*Ie*sr*Sr),Ka=.5*In*(wr*_r+Pn*rn*Pe)+.5,pi=za*Oa-Ka*Ia,Ni=(Da*za-$n*Ka)/pi,st=($n*Oa-Da*Ia)/pi;de-=Ni,ye-=st}while((P(Ni)>h||P(st)>h)&&--De>0);return[de,ye]};function Ef(){return(0,b.c)(tu).scale(158.837)}},88728:function(j,V,t){t.d(V,{c:function(){return b}});function b(){return new P}function P(){this.reset()}P.prototype={constructor:P,reset:function(){this.s=this.t=0},add:function(A){L(o,A,this.t),L(this,o.s,this.s),this.s?this.t+=o.t:this.s=o.t},valueOf:function(){return this.s}};var o=new P;function L(A,v,p){var r=A.s=v+p,e=r-v,s=r-e;A.t=v-s+(p-e)}},95384:function(j,V,t){t.d(V,{cp:function(){return T},mQ:function(){return A},oB:function(){return l}});var b=t(88728),P=t(64528),o=t(70932),L=t(16016),A=(0,b.c)(),v=(0,b.c)(),p,r,e,s,n,l={point:o.c,lineStart:o.c,lineEnd:o.c,polygonStart:function(){A.reset(),l.lineStart=f,l.lineEnd=u},polygonEnd:function(){var c=+A;v.add(c<0?P.kD+c:c),this.lineStart=this.lineEnd=this.point=o.c},sphere:function(){v.add(P.kD)}};function f(){l.point=g}function u(){h(p,r)}function g(c,i){l.point=h,p=c,r=i,c*=P.qw,i*=P.qw,e=c,s=(0,P.W8)(i=i/2+P.wL),n=(0,P.g$)(i)}function h(c,i){c*=P.qw,i*=P.qw,i=i/2+P.wL;var d=c-e,x=d>=0?1:-1,w=x*d,C=(0,P.W8)(i),y=(0,P.g$)(i),S=n*y,M=s*C+S*(0,P.W8)(w),a=S*x*(0,P.g$)(w);A.add((0,P.WE)(a,M)),e=c,s=C,n=y}function T(c){return v.reset(),(0,L.c)(c,l),v*2}},13696:function(j,V,t){t.d(V,{c:function(){return E}});var b=t(88728),P=t(95384),o=t(84220),L=t(64528),A=t(16016),v,p,r,e,s,n,l,f,u=(0,b.c)(),g,h,T={point:c,lineStart:d,lineEnd:x,polygonStart:function(){T.point=w,T.lineStart=C,T.lineEnd=y,u.reset(),P.oB.polygonStart()},polygonEnd:function(){P.oB.polygonEnd(),T.point=c,T.lineStart=d,T.lineEnd=x,P.mQ<0?(v=-(r=180),p=-(e=90)):u>L.Gg?e=90:u<-L.Gg&&(p=-90),h[0]=v,h[1]=r},sphere:function(){v=-(r=180),p=-(e=90)}};function c(m,k){g.push(h=[v=m,r=m]),k<p&&(p=k),k>e&&(e=k)}function i(m,k){var I=(0,o.ux)([m*L.qw,k*L.qw]);if(f){var O=(0,o.CW)(f,I),z=[O[1],-O[0],0],B=(0,o.CW)(z,O);(0,o.cJ)(B),B=(0,o.G)(B);var F=m-s,_=F>0?1:-1,N=B[0]*L.oh*_,G,X=(0,L.a2)(F)>180;X^(_*s<N&&N<_*m)?(G=B[1]*L.oh,G>e&&(e=G)):(N=(N+360)%360-180,X^(_*s<N&&N<_*m)?(G=-B[1]*L.oh,G<p&&(p=G)):(k<p&&(p=k),k>e&&(e=k))),X?m<s?S(v,m)>S(v,r)&&(r=m):S(m,r)>S(v,r)&&(v=m):r>=v?(m<v&&(v=m),m>r&&(r=m)):m>s?S(v,m)>S(v,r)&&(r=m):S(m,r)>S(v,r)&&(v=m)}else g.push(h=[v=m,r=m]);k<p&&(p=k),k>e&&(e=k),f=I,s=m}function d(){T.point=i}function x(){h[0]=v,h[1]=r,T.point=c,f=null}function w(m,k){if(f){var I=m-s;u.add((0,L.a2)(I)>180?I+(I>0?360:-360):I)}else n=m,l=k;P.oB.point(m,k),i(m,k)}function C(){P.oB.lineStart()}function y(){w(n,l),P.oB.lineEnd(),(0,L.a2)(u)>L.Gg&&(v=-(r=180)),h[0]=v,h[1]=r,f=null}function S(m,k){return(k-=m)<0?k+360:k}function M(m,k){return m[0]-k[0]}function a(m,k){return m[0]<=m[1]?m[0]<=k&&k<=m[1]:k<m[0]||m[1]<k}function E(m){var k,I,O,z,B,F,_;if(e=r=-(v=p=1/0),g=[],(0,A.c)(m,T),I=g.length){for(g.sort(M),k=1,O=g[0],B=[O];k<I;++k)z=g[k],a(O,z[0])||a(O,z[1])?(S(O[0],z[1])>S(O[0],O[1])&&(O[1]=z[1]),S(z[0],O[1])>S(O[0],O[1])&&(O[0]=z[0])):B.push(O=z);for(F=-1/0,I=B.length-1,k=0,O=B[I];k<=I;O=z,++k)z=B[k],(_=S(O[1],z[0]))>F&&(F=_,v=z[0],r=O[1])}return g=h=null,v===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[v,p],[r,e]]}},84220:function(j,V,t){t.d(V,{CW:function(){return A},Ez:function(){return L},G:function(){return P},cJ:function(){return r},mg:function(){return v},ux:function(){return o},wx:function(){return p}});var b=t(64528);function P(e){return[(0,b.WE)(e[1],e[0]),(0,b.qR)(e[2])]}function o(e){var s=e[0],n=e[1],l=(0,b.W8)(n);return[l*(0,b.W8)(s),l*(0,b.g$)(s),(0,b.g$)(n)]}function L(e,s){return e[0]*s[0]+e[1]*s[1]+e[2]*s[2]}function A(e,s){return[e[1]*s[2]-e[2]*s[1],e[2]*s[0]-e[0]*s[2],e[0]*s[1]-e[1]*s[0]]}function v(e,s){e[0]+=s[0],e[1]+=s[1],e[2]+=s[2]}function p(e,s){return[e[0]*s,e[1]*s,e[2]*s]}function r(e){var s=(0,b._I)(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=s,e[1]/=s,e[2]/=s}},24052:function(j,V,t){t.d(V,{c:function(){return I}});var b=t(64528),P=t(70932),o=t(16016),L,A,v,p,r,e,s,n,l,f,u,g,h,T,c,i,d={sphere:P.c,point:x,lineStart:C,lineEnd:M,polygonStart:function(){d.lineStart=a,d.lineEnd=E},polygonEnd:function(){d.lineStart=C,d.lineEnd=M}};function x(O,z){O*=b.qw,z*=b.qw;var B=(0,b.W8)(z);w(B*(0,b.W8)(O),B*(0,b.g$)(O),(0,b.g$)(z))}function w(O,z,B){++L,v+=(O-v)/L,p+=(z-p)/L,r+=(B-r)/L}function C(){d.point=y}function y(O,z){O*=b.qw,z*=b.qw;var B=(0,b.W8)(z);T=B*(0,b.W8)(O),c=B*(0,b.g$)(O),i=(0,b.g$)(z),d.point=S,w(T,c,i)}function S(O,z){O*=b.qw,z*=b.qw;var B=(0,b.W8)(z),F=B*(0,b.W8)(O),_=B*(0,b.g$)(O),N=(0,b.g$)(z),G=(0,b.WE)((0,b._I)((G=c*N-i*_)*G+(G=i*F-T*N)*G+(G=T*_-c*F)*G),T*F+c*_+i*N);A+=G,e+=G*(T+(T=F)),s+=G*(c+(c=_)),n+=G*(i+(i=N)),w(T,c,i)}function M(){d.point=x}function a(){d.point=m}function E(){k(g,h),d.point=x}function m(O,z){g=O,h=z,O*=b.qw,z*=b.qw,d.point=k;var B=(0,b.W8)(z);T=B*(0,b.W8)(O),c=B*(0,b.g$)(O),i=(0,b.g$)(z),w(T,c,i)}function k(O,z){O*=b.qw,z*=b.qw;var B=(0,b.W8)(z),F=B*(0,b.W8)(O),_=B*(0,b.g$)(O),N=(0,b.g$)(z),G=c*N-i*_,X=i*F-T*N,$=T*_-c*F,et=(0,b._I)(G*G+X*X+$*$),ot=(0,b.qR)(et),nt=et&&-ot/et;l+=nt*G,f+=nt*X,u+=nt*$,A+=ot,e+=ot*(T+(T=F)),s+=ot*(c+(c=_)),n+=ot*(i+(i=N)),w(T,c,i)}function I(O){L=A=v=p=r=e=s=n=l=f=u=0,(0,o.c)(O,d);var z=l,B=f,F=u,_=z*z+B*B+F*F;return _<b.a8&&(z=e,B=s,F=n,A<b.Gg&&(z=v,B=p,F=r),_=z*z+B*B+F*F,_<b.a8)?[NaN,NaN]:[(0,b.WE)(B,z)*b.oh,(0,b.qR)(F/(0,b._I)(_))*b.oh]}},61780:function(j,V,t){t.d(V,{Q:function(){return A},c:function(){return p}});var b=t(84220);function P(r){return function(){return r}}var o=t(64528),L=t(92992);function A(r,e,s,n,l,f){if(s){var u=(0,o.W8)(e),g=(0,o.g$)(e),h=n*s;l==null?(l=e+n*o.kD,f=e-h/2):(l=v(u,l),f=v(u,f),(n>0?l<f:l>f)&&(l+=n*o.kD));for(var T,c=l;n>0?c>f:c<f;c-=h)T=(0,b.G)([u,-g*(0,o.W8)(c),-g*(0,o.g$)(c)]),r.point(T[0],T[1])}}function v(r,e){e=(0,b.ux)(e),e[0]-=r,(0,b.cJ)(e);var s=(0,o.mE)(-e[1]);return((-e[2]<0?-s:s)+o.kD-o.Gg)%o.kD}function p(){var r=P([0,0]),e=P(90),s=P(6),n,l,f={point:u};function u(h,T){n.push(h=l(h,T)),h[0]*=o.oh,h[1]*=o.oh}function g(){var h=r.apply(this,arguments),T=e.apply(this,arguments)*o.qw,c=s.apply(this,arguments)*o.qw;return n=[],l=(0,L.O)(-h[0]*o.qw,-h[1]*o.qw,0).invert,A(f,T,c,1),h={type:"Polygon",coordinates:[n]},n=l=null,h}return g.center=function(h){return arguments.length?(r=typeof h=="function"?h:P([+h[0],+h[1]]),g):r},g.radius=function(h){return arguments.length?(e=typeof h=="function"?h:P(+h),g):e},g.precision=function(h){return arguments.length?(s=typeof h=="function"?h:P(+h),g):s},g}},78284:function(j,V,t){var b=t(14229),P=t(64528);V.c=(0,b.c)(function(){return!0},o,A,[-P.pi,-P.or]);function o(v){var p=NaN,r=NaN,e=NaN,s;return{lineStart:function(){v.lineStart(),s=1},point:function(n,l){var f=n>0?P.pi:-P.pi,u=(0,P.a2)(n-p);(0,P.a2)(u-P.pi)<P.Gg?(v.point(p,r=(r+l)/2>0?P.or:-P.or),v.point(e,r),v.lineEnd(),v.lineStart(),v.point(f,r),v.point(n,r),s=0):e!==f&&u>=P.pi&&((0,P.a2)(p-e)<P.Gg&&(p-=e*P.Gg),(0,P.a2)(n-f)<P.Gg&&(n-=f*P.Gg),r=L(p,r,n,l),v.point(e,r),v.lineEnd(),v.lineStart(),v.point(f,r),s=0),v.point(p=n,r=l),e=f},lineEnd:function(){v.lineEnd(),p=r=NaN},clean:function(){return 2-s}}}function L(v,p,r,e){var s,n,l=(0,P.g$)(v-r);return(0,P.a2)(l)>P.Gg?(0,P.MQ)(((0,P.g$)(p)*(n=(0,P.W8)(e))*(0,P.g$)(r)-(0,P.g$)(e)*(s=(0,P.W8)(p))*(0,P.g$)(v))/(s*n*l)):(p+e)/2}function A(v,p,r,e){var s;if(v==null)s=r*P.or,e.point(-P.pi,s),e.point(0,s),e.point(P.pi,s),e.point(P.pi,0),e.point(P.pi,-s),e.point(0,-s),e.point(-P.pi,-s),e.point(-P.pi,0),e.point(-P.pi,s);else if((0,P.a2)(v[0]-p[0])>P.Gg){var n=v[0]<p[0]?P.pi:-P.pi;s=r*n/2,e.point(-n,s),e.point(0,s),e.point(n,s)}else e.point(p[0],p[1])}},97208:function(j,V,t){t.d(V,{c:function(){return P}});var b=t(70932);function P(){var o=[],L;return{point:function(A,v,p){L.push([A,v,p])},lineStart:function(){o.push(L=[])},lineEnd:b.c,rejoin:function(){o.length>1&&o.push(o.pop().concat(o.shift()))},result:function(){var A=o;return o=[],L=null,A}}}},2728:function(j,V,t){t.d(V,{c:function(){return v}});var b=t(84220),P=t(61780),o=t(64528),L=t(41860),A=t(14229);function v(p){var r=(0,o.W8)(p),e=6*o.qw,s=r>0,n=(0,o.a2)(r)>o.Gg;function l(T,c,i,d){(0,P.Q)(d,p,e,i,T,c)}function f(T,c){return(0,o.W8)(T)*(0,o.W8)(c)>r}function u(T){var c,i,d,x,w;return{lineStart:function(){x=d=!1,w=1},point:function(C,y){var S=[C,y],M,a=f(C,y),E=s?a?0:h(C,y):a?h(C+(C<0?o.pi:-o.pi),y):0;if(!c&&(x=d=a)&&T.lineStart(),a!==d&&(M=g(c,S),(!M||(0,L.c)(c,M)||(0,L.c)(S,M))&&(S[2]=1)),a!==d)w=0,a?(T.lineStart(),M=g(S,c),T.point(M[0],M[1])):(M=g(c,S),T.point(M[0],M[1],2),T.lineEnd()),c=M;else if(n&&c&&s^a){var m;!(E&i)&&(m=g(S,c,!0))&&(w=0,s?(T.lineStart(),T.point(m[0][0],m[0][1]),T.point(m[1][0],m[1][1]),T.lineEnd()):(T.point(m[1][0],m[1][1]),T.lineEnd(),T.lineStart(),T.point(m[0][0],m[0][1],3)))}a&&(!c||!(0,L.c)(c,S))&&T.point(S[0],S[1]),c=S,d=a,i=E},lineEnd:function(){d&&T.lineEnd(),c=null},clean:function(){return w|(x&&d)<<1}}}function g(T,c,i){var d=(0,b.ux)(T),x=(0,b.ux)(c),w=[1,0,0],C=(0,b.CW)(d,x),y=(0,b.Ez)(C,C),S=C[0],M=y-S*S;if(!M)return!i&&T;var a=r*y/M,E=-r*S/M,m=(0,b.CW)(w,C),k=(0,b.wx)(w,a),I=(0,b.wx)(C,E);(0,b.mg)(k,I);var O=m,z=(0,b.Ez)(k,O),B=(0,b.Ez)(O,O),F=z*z-B*((0,b.Ez)(k,k)-1);if(!(F<0)){var _=(0,o._I)(F),N=(0,b.wx)(O,(-z-_)/B);if((0,b.mg)(N,k),N=(0,b.G)(N),!i)return N;var G=T[0],X=c[0],$=T[1],et=c[1],ot;X<G&&(ot=G,G=X,X=ot);var nt=X-G,Z=(0,o.a2)(nt-o.pi)<o.Gg,Q=Z||nt<o.Gg;if(!Z&&et<$&&(ot=$,$=et,et=ot),Q?Z?$+et>0^N[1]<((0,o.a2)(N[0]-G)<o.Gg?$:et):$<=N[1]&&N[1]<=et:nt>o.pi^(G<=N[0]&&N[0]<=X)){var W=(0,b.wx)(O,(-z+_)/B);return(0,b.mg)(W,k),[N,(0,b.G)(W)]}}}function h(T,c){var i=s?p:o.pi-p,d=0;return T<-i?d|=1:T>i&&(d|=2),c<-i?d|=4:c>i&&(d|=8),d}return(0,A.c)(f,u,l,s?[0,-p]:[-o.pi,p-o.pi])}},14229:function(j,V,t){t.d(V,{c:function(){return v}});var b=t(97208),P=t(32232),o=t(64528),L=t(58196),A=t(84706);function v(e,s,n,l){return function(f){var u=s(f),g=(0,b.c)(),h=s(g),T=!1,c,i,d,x={point:w,lineStart:y,lineEnd:S,polygonStart:function(){x.point=M,x.lineStart=a,x.lineEnd=E,i=[],c=[]},polygonEnd:function(){x.point=w,x.lineStart=y,x.lineEnd=S,i=(0,A.Uf)(i);var m=(0,L.c)(c,l);i.length?(T||(f.polygonStart(),T=!0),(0,P.c)(i,r,m,n,f)):m&&(T||(f.polygonStart(),T=!0),f.lineStart(),n(null,null,1,f),f.lineEnd()),T&&(f.polygonEnd(),T=!1),i=c=null},sphere:function(){f.polygonStart(),f.lineStart(),n(null,null,1,f),f.lineEnd(),f.polygonEnd()}};function w(m,k){e(m,k)&&f.point(m,k)}function C(m,k){u.point(m,k)}function y(){x.point=C,u.lineStart()}function S(){x.point=w,u.lineEnd()}function M(m,k){d.push([m,k]),h.point(m,k)}function a(){h.lineStart(),d=[]}function E(){M(d[0][0],d[0][1]),h.lineEnd();var m=h.clean(),k=g.result(),I,O=k.length,z,B,F;if(d.pop(),c.push(d),d=null,!!O){if(m&1){if(B=k[0],(z=B.length-1)>0){for(T||(f.polygonStart(),T=!0),f.lineStart(),I=0;I<z;++I)f.point((F=B[I])[0],F[1]);f.lineEnd()}return}O>1&&m&2&&k.push(k.pop().concat(k.shift())),i.push(k.filter(p))}}return x}}function p(e){return e.length>1}function r(e,s){return((e=e.x)[0]<0?e[1]-o.or-o.Gg:o.or-e[1])-((s=s.x)[0]<0?s[1]-o.or-o.Gg:o.or-s[1])}},21676:function(j,V,t){t.d(V,{c:function(){return r}});var b=t(64528),P=t(97208);function o(e,s,n,l,f,u){var g=e[0],h=e[1],T=s[0],c=s[1],i=0,d=1,x=T-g,w=c-h,C;if(C=n-g,!(!x&&C>0)){if(C/=x,x<0){if(C<i)return;C<d&&(d=C)}else if(x>0){if(C>d)return;C>i&&(i=C)}if(C=f-g,!(!x&&C<0)){if(C/=x,x<0){if(C>d)return;C>i&&(i=C)}else if(x>0){if(C<i)return;C<d&&(d=C)}if(C=l-h,!(!w&&C>0)){if(C/=w,w<0){if(C<i)return;C<d&&(d=C)}else if(w>0){if(C>d)return;C>i&&(i=C)}if(C=u-h,!(!w&&C<0)){if(C/=w,w<0){if(C>d)return;C>i&&(i=C)}else if(w>0){if(C<i)return;C<d&&(d=C)}return i>0&&(e[0]=g+i*x,e[1]=h+i*w),d<1&&(s[0]=g+d*x,s[1]=h+d*w),!0}}}}}var L=t(32232),A=t(84706),v=1e9,p=-v;function r(e,s,n,l){function f(c,i){return e<=c&&c<=n&&s<=i&&i<=l}function u(c,i,d,x){var w=0,C=0;if(c==null||(w=g(c,d))!==(C=g(i,d))||T(c,i)<0^d>0)do x.point(w===0||w===3?e:n,w>1?l:s);while((w=(w+d+4)%4)!==C);else x.point(i[0],i[1])}function g(c,i){return(0,b.a2)(c[0]-e)<b.Gg?i>0?0:3:(0,b.a2)(c[0]-n)<b.Gg?i>0?2:1:(0,b.a2)(c[1]-s)<b.Gg?i>0?1:0:i>0?3:2}function h(c,i){return T(c.x,i.x)}function T(c,i){var d=g(c,1),x=g(i,1);return d!==x?d-x:d===0?i[1]-c[1]:d===1?c[0]-i[0]:d===2?c[1]-i[1]:i[0]-c[0]}return function(c){var i=c,d=(0,P.c)(),x,w,C,y,S,M,a,E,m,k,I,O={point:z,lineStart:N,lineEnd:G,polygonStart:F,polygonEnd:_};function z($,et){f($,et)&&i.point($,et)}function B(){for(var $=0,et=0,ot=w.length;et<ot;++et)for(var nt=w[et],Z=1,Q=nt.length,W=nt[0],J,it,K=W[0],H=W[1];Z<Q;++Z)J=K,it=H,W=nt[Z],K=W[0],H=W[1],it<=l?H>l&&(K-J)*(l-it)>(H-it)*(e-J)&&++$:H<=l&&(K-J)*(l-it)<(H-it)*(e-J)&&--$;return $}function F(){i=d,x=[],w=[],I=!0}function _(){var $=B(),et=I&&$,ot=(x=(0,A.Uf)(x)).length;(et||ot)&&(c.polygonStart(),et&&(c.lineStart(),u(null,null,1,c),c.lineEnd()),ot&&(0,L.c)(x,h,$,u,c),c.polygonEnd()),i=c,x=w=C=null}function N(){O.point=X,w&&w.push(C=[]),k=!0,m=!1,a=E=NaN}function G(){x&&(X(y,S),M&&m&&d.rejoin(),x.push(d.result())),O.point=z,m&&i.lineEnd()}function X($,et){var ot=f($,et);if(w&&C.push([$,et]),k)y=$,S=et,M=ot,k=!1,ot&&(i.lineStart(),i.point($,et));else if(ot&&m)i.point($,et);else{var nt=[a=Math.max(p,Math.min(v,a)),E=Math.max(p,Math.min(v,E))],Z=[$=Math.max(p,Math.min(v,$)),et=Math.max(p,Math.min(v,et))];o(nt,Z,e,s,n,l)?(m||(i.lineStart(),i.point(nt[0],nt[1])),i.point(Z[0],Z[1]),ot||i.lineEnd(),I=!1):ot&&(i.lineStart(),i.point($,et),I=!1)}a=$,E=et,m=ot}return O}}},32232:function(j,V,t){t.d(V,{c:function(){return L}});var b=t(41860),P=t(64528);function o(v,p,r,e){this.x=v,this.z=p,this.o=r,this.e=e,this.v=!1,this.n=this.p=null}function L(v,p,r,e,s){var n=[],l=[],f,u;if(v.forEach(function(d){if(!((x=d.length-1)<=0)){var x,w=d[0],C=d[x],y;if((0,b.c)(w,C)){if(!w[2]&&!C[2]){for(s.lineStart(),f=0;f<x;++f)s.point((w=d[f])[0],w[1]);s.lineEnd();return}C[0]+=2*P.Gg}n.push(y=new o(w,d,null,!0)),l.push(y.o=new o(w,null,y,!1)),n.push(y=new o(C,d,null,!1)),l.push(y.o=new o(C,null,y,!0))}}),!!n.length){for(l.sort(p),A(n),A(l),f=0,u=l.length;f<u;++f)l[f].e=r=!r;for(var g=n[0],h,T;;){for(var c=g,i=!0;c.v;)if((c=c.n)===g)return;h=c.z,s.lineStart();do{if(c.v=c.o.v=!0,c.e){if(i)for(f=0,u=h.length;f<u;++f)s.point((T=h[f])[0],T[1]);else e(c.x,c.n.x,1,s);c=c.n}else{if(i)for(h=c.p.z,f=h.length-1;f>=0;--f)s.point((T=h[f])[0],T[1]);else e(c.x,c.p.x,-1,s);c=c.p}c=c.o,h=c.z,i=!i}while(!c.v);s.lineEnd()}}}function A(v){if(p=v.length){for(var p,r=0,e=v[0],s;++r<p;)e.n=s=v[r],s.p=e,e=s;e.n=s=v[0],s.p=e}}},68120:function(j,V,t){t.d(V,{c:function(){return b}});function b(P,o){function L(A,v){return A=P(A,v),o(A[0],A[1])}return P.invert&&o.invert&&(L.invert=function(A,v){return A=o.invert(A,v),A&&P.invert(A[0],A[1])}),L}},7376:function(j,V,t){t.d(V,{c:function(){return b}});function b(P){return P}},83356:function(j,V,t){t.r(V),t.d(V,{geoAlbers:function(){return mr},geoAlbersUsa:function(){return ne},geoArea:function(){return b.cp},geoAzimuthalEqualArea:function(){return ge.c},geoAzimuthalEqualAreaRaw:function(){return ge.y},geoAzimuthalEquidistant:function(){return Ae.c},geoAzimuthalEquidistantRaw:function(){return Ae.O},geoBounds:function(){return P.c},geoCentroid:function(){return o.c},geoCircle:function(){return L.c},geoClipAntimeridian:function(){return A.c},geoClipCircle:function(){return v.c},geoClipExtent:function(){return r},geoClipRectangle:function(){return p.c},geoConicConformal:function(){return cr},geoConicConformalRaw:function(){return hr},geoConicEqualArea:function(){return Qe},geoConicEqualAreaRaw:function(){return Ye},geoConicEquidistant:function(){return Lr},geoConicEquidistantRaw:function(){return fr},geoContains:function(){return F},geoDistance:function(){return M},geoEqualEarth:function(){return Xe},geoEqualEarthRaw:function(){return Ee},geoEquirectangular:function(){return dr.c},geoEquirectangularRaw:function(){return dr.u},geoGnomonic:function(){return rr.c},geoGnomonicRaw:function(){return rr.Y},geoGraticule:function(){return X},geoGraticule10:function(){return $},geoIdentity:function(){return He},geoInterpolate:function(){return et.c},geoLength:function(){return C},geoMercator:function(){return ke},geoMercatorRaw:function(){return ze},geoNaturalEarth1:function(){return yr.c},geoNaturalEarth1Raw:function(){return yr.g},geoOrthographic:function(){return Ir.c},geoOrthographicRaw:function(){return Ir.t},geoPath:function(){return Se},geoProjection:function(){return je.c},geoProjectionMutator:function(){return je.U},geoRotation:function(){return Re.c},geoStereographic:function(){return Or},geoStereographicRaw:function(){return vn},geoStream:function(){return f.c},geoTransform:function(){return Je.c},geoTransverseMercator:function(){return nn},geoTransverseMercatorRaw:function(){return En}});var b=t(95384),P=t(13696),o=t(24052),L=t(61780),A=t(78284),v=t(2728),p=t(21676);function r(){var gr=0,Pr=0,Xr=960,kr=500,pn,en,Tn;return Tn={stream:function(Ln){return pn&&en===Ln?pn:pn=(0,p.c)(gr,Pr,Xr,kr)(en=Ln)},extent:function(Ln){return arguments.length?(gr=+Ln[0][0],Pr=+Ln[0][1],Xr=+Ln[1][0],kr=+Ln[1][1],pn=en=null,Tn):[[gr,Pr],[Xr,kr]]}}}var e=t(58196),s=t(88728),n=t(64528),l=t(70932),f=t(16016),u=(0,s.c)(),g,h,T,c={sphere:l.c,point:l.c,lineStart:i,lineEnd:l.c,polygonStart:l.c,polygonEnd:l.c};function i(){c.point=x,c.lineEnd=d}function d(){c.point=c.lineEnd=l.c}function x(gr,Pr){gr*=n.qw,Pr*=n.qw,g=gr,h=(0,n.g$)(Pr),T=(0,n.W8)(Pr),c.point=w}function w(gr,Pr){gr*=n.qw,Pr*=n.qw;var Xr=(0,n.g$)(Pr),kr=(0,n.W8)(Pr),pn=(0,n.a2)(gr-g),en=(0,n.W8)(pn),Tn=(0,n.g$)(pn),Ln=kr*Tn,Yn=T*Xr-h*kr*en,ma=h*Xr+T*kr*en;u.add((0,n.WE)((0,n._I)(Ln*Ln+Yn*Yn),ma)),g=gr,h=Xr,T=kr}function C(gr){return u.reset(),(0,f.c)(gr,c),+u}var y=[null,null],S={type:"LineString",coordinates:y};function M(gr,Pr){return y[0]=gr,y[1]=Pr,C(S)}var a={Feature:function(gr,Pr){return m(gr.geometry,Pr)},FeatureCollection:function(gr,Pr){for(var Xr=gr.features,kr=-1,pn=Xr.length;++kr<pn;)if(m(Xr[kr].geometry,Pr))return!0;return!1}},E={Sphere:function(){return!0},Point:function(gr,Pr){return k(gr.coordinates,Pr)},MultiPoint:function(gr,Pr){for(var Xr=gr.coordinates,kr=-1,pn=Xr.length;++kr<pn;)if(k(Xr[kr],Pr))return!0;return!1},LineString:function(gr,Pr){return I(gr.coordinates,Pr)},MultiLineString:function(gr,Pr){for(var Xr=gr.coordinates,kr=-1,pn=Xr.length;++kr<pn;)if(I(Xr[kr],Pr))return!0;return!1},Polygon:function(gr,Pr){return O(gr.coordinates,Pr)},MultiPolygon:function(gr,Pr){for(var Xr=gr.coordinates,kr=-1,pn=Xr.length;++kr<pn;)if(O(Xr[kr],Pr))return!0;return!1},GeometryCollection:function(gr,Pr){for(var Xr=gr.geometries,kr=-1,pn=Xr.length;++kr<pn;)if(m(Xr[kr],Pr))return!0;return!1}};function m(gr,Pr){return gr&&E.hasOwnProperty(gr.type)?E[gr.type](gr,Pr):!1}function k(gr,Pr){return M(gr,Pr)===0}function I(gr,Pr){for(var Xr,kr,pn,en=0,Tn=gr.length;en<Tn;en++){if(kr=M(gr[en],Pr),kr===0||en>0&&(pn=M(gr[en],gr[en-1]),pn>0&&Xr<=pn&&kr<=pn&&(Xr+kr-pn)*(1-Math.pow((Xr-kr)/pn,2))<n.a8*pn))return!0;Xr=kr}return!1}function O(gr,Pr){return!!(0,e.c)(gr.map(z),B(Pr))}function z(gr){return gr=gr.map(B),gr.pop(),gr}function B(gr){return[gr[0]*n.qw,gr[1]*n.qw]}function F(gr,Pr){return(gr&&a.hasOwnProperty(gr.type)?a[gr.type]:m)(gr,Pr)}var _=t(84706);function N(gr,Pr,Xr){var kr=(0,_.ik)(gr,Pr-n.Gg,Xr).concat(Pr);return function(pn){return kr.map(function(en){return[pn,en]})}}function G(gr,Pr,Xr){var kr=(0,_.ik)(gr,Pr-n.Gg,Xr).concat(Pr);return function(pn){return kr.map(function(en){return[en,pn]})}}function X(){var gr,Pr,Xr,kr,pn,en,Tn,Ln,Yn=10,ma=Yn,wa=90,la=360,ia,Rn,Cr,an,on=2.5;function ln(){return{type:"MultiLineString",coordinates:Nn()}}function Nn(){return(0,_.ik)((0,n.Km)(kr/wa)*wa,Xr,wa).map(Cr).concat((0,_.ik)((0,n.Km)(Ln/la)*la,Tn,la).map(an)).concat((0,_.ik)((0,n.Km)(Pr/Yn)*Yn,gr,Yn).filter(function(gn){return(0,n.a2)(gn%wa)>n.Gg}).map(ia)).concat((0,_.ik)((0,n.Km)(en/ma)*ma,pn,ma).filter(function(gn){return(0,n.a2)(gn%la)>n.Gg}).map(Rn))}return ln.lines=function(){return Nn().map(function(gn){return{type:"LineString",coordinates:gn}})},ln.outline=function(){return{type:"Polygon",coordinates:[Cr(kr).concat(an(Tn).slice(1),Cr(Xr).reverse().slice(1),an(Ln).reverse().slice(1))]}},ln.extent=function(gn){return arguments.length?ln.extentMajor(gn).extentMinor(gn):ln.extentMinor()},ln.extentMajor=function(gn){return arguments.length?(kr=+gn[0][0],Xr=+gn[1][0],Ln=+gn[0][1],Tn=+gn[1][1],kr>Xr&&(gn=kr,kr=Xr,Xr=gn),Ln>Tn&&(gn=Ln,Ln=Tn,Tn=gn),ln.precision(on)):[[kr,Ln],[Xr,Tn]]},ln.extentMinor=function(gn){return arguments.length?(Pr=+gn[0][0],gr=+gn[1][0],en=+gn[0][1],pn=+gn[1][1],Pr>gr&&(gn=Pr,Pr=gr,gr=gn),en>pn&&(gn=en,en=pn,pn=gn),ln.precision(on)):[[Pr,en],[gr,pn]]},ln.step=function(gn){return arguments.length?ln.stepMajor(gn).stepMinor(gn):ln.stepMinor()},ln.stepMajor=function(gn){return arguments.length?(wa=+gn[0],la=+gn[1],ln):[wa,la]},ln.stepMinor=function(gn){return arguments.length?(Yn=+gn[0],ma=+gn[1],ln):[Yn,ma]},ln.precision=function(gn){return arguments.length?(on=+gn,ia=N(en,pn,90),Rn=G(Pr,gr,on),Cr=N(Ln,Tn,90),an=G(kr,Xr,on),ln):on},ln.extentMajor([[-180,-90+n.Gg],[180,90-n.Gg]]).extentMinor([[-180,-80-n.Gg],[180,80+n.Gg]])}function $(){return X()()}var et=t(27284),ot=t(7376),nt=(0,s.c)(),Z=(0,s.c)(),Q,W,J,it,K={point:l.c,lineStart:l.c,lineEnd:l.c,polygonStart:function(){K.lineStart=H,K.lineEnd=lt},polygonEnd:function(){K.lineStart=K.lineEnd=K.point=l.c,nt.add((0,n.a2)(Z)),Z.reset()},result:function(){var gr=nt/2;return nt.reset(),gr}};function H(){K.point=at}function at(gr,Pr){K.point=tt,Q=J=gr,W=it=Pr}function tt(gr,Pr){Z.add(it*gr-J*Pr),J=gr,it=Pr}function lt(){tt(Q,W)}var dt=K,mt=t(73784),gt=0,Mt=0,Lt=0,zt=0,xt=0,Ct=0,wt=0,Rt=0,Tt=0,Bt,Gt,te,Wt,jt={point:ie,lineStart:ue,lineEnd:Te,polygonStart:function(){jt.lineStart=Qt,jt.lineEnd=Pt},polygonEnd:function(){jt.point=ie,jt.lineStart=ue,jt.lineEnd=Te},result:function(){var gr=Tt?[wt/Tt,Rt/Tt]:Ct?[zt/Ct,xt/Ct]:Lt?[gt/Lt,Mt/Lt]:[NaN,NaN];return gt=Mt=Lt=zt=xt=Ct=wt=Rt=Tt=0,gr}};function ie(gr,Pr){gt+=gr,Mt+=Pr,++Lt}function ue(){jt.point=fe}function fe(gr,Pr){jt.point=pe,ie(te=gr,Wt=Pr)}function pe(gr,Pr){var Xr=gr-te,kr=Pr-Wt,pn=(0,n._I)(Xr*Xr+kr*kr);zt+=pn*(te+gr)/2,xt+=pn*(Wt+Pr)/2,Ct+=pn,ie(te=gr,Wt=Pr)}function Te(){jt.point=ie}function Qt(){jt.point=Ot}function Pt(){Nt(Bt,Gt)}function Ot(gr,Pr){jt.point=Nt,ie(Bt=te=gr,Gt=Wt=Pr)}function Nt(gr,Pr){var Xr=gr-te,kr=Pr-Wt,pn=(0,n._I)(Xr*Xr+kr*kr);zt+=pn*(te+gr)/2,xt+=pn*(Wt+Pr)/2,Ct+=pn,pn=Wt*gr-te*Pr,wt+=pn*(te+gr),Rt+=pn*(Wt+Pr),Tt+=pn*3,ie(te=gr,Wt=Pr)}var Ht=jt;function St(gr){this._context=gr}St.prototype={_radius:4.5,pointRadius:function(gr){return this._radius=gr,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(gr,Pr){switch(this._point){case 0:{this._context.moveTo(gr,Pr),this._point=1;break}case 1:{this._context.lineTo(gr,Pr);break}default:{this._context.moveTo(gr+this._radius,Pr),this._context.arc(gr,Pr,this._radius,0,n.kD);break}}},result:l.c};var kt=(0,s.c)(),Ft,At,ft,pt,Dt,Ut={point:l.c,lineStart:function(){Ut.point=$t},lineEnd:function(){Ft&&re(At,ft),Ut.point=l.c},polygonStart:function(){Ft=!0},polygonEnd:function(){Ft=null},result:function(){var gr=+kt;return kt.reset(),gr}};function $t(gr,Pr){Ut.point=re,At=pt=gr,ft=Dt=Pr}function re(gr,Pr){pt-=gr,Dt-=Pr,kt.add((0,n._I)(pt*pt+Dt*Dt)),pt=gr,Dt=Pr}var Be=Ut;function We(){this._string=[]}We.prototype={_radius:4.5,_circle:me(4.5),pointRadius:function(gr){return(gr=+gr)!==this._radius&&(this._radius=gr,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(gr,Pr){switch(this._point){case 0:{this._string.push("M",gr,",",Pr),this._point=1;break}case 1:{this._string.push("L",gr,",",Pr);break}default:{this._circle==null&&(this._circle=me(this._radius)),this._string.push("M",gr,",",Pr,this._circle);break}}},result:function(){if(this._string.length){var gr=this._string.join("");return this._string=[],gr}else return null}};function me(gr){return"m0,"+gr+"a"+gr+","+gr+" 0 1,1 0,"+-2*gr+"a"+gr+","+gr+" 0 1,1 0,"+2*gr+"z"}function Se(gr,Pr){var Xr=4.5,kr,pn;function en(Tn){return Tn&&(typeof Xr=="function"&&pn.pointRadius(+Xr.apply(this,arguments)),(0,f.c)(Tn,kr(pn))),pn.result()}return en.area=function(Tn){return(0,f.c)(Tn,kr(dt)),dt.result()},en.measure=function(Tn){return(0,f.c)(Tn,kr(Be)),Be.result()},en.bounds=function(Tn){return(0,f.c)(Tn,kr(mt.c)),mt.c.result()},en.centroid=function(Tn){return(0,f.c)(Tn,kr(Ht)),Ht.result()},en.projection=function(Tn){return arguments.length?(kr=Tn==null?(gr=null,ot.c):(gr=Tn).stream,en):gr},en.context=function(Tn){return arguments.length?(pn=Tn==null?(Pr=null,new We):new St(Pr=Tn),typeof Xr!="function"&&pn.pointRadius(Xr),en):Pr},en.pointRadius=function(Tn){return arguments.length?(Xr=typeof Tn=="function"?Tn:(pn.pointRadius(+Tn),+Tn),en):Xr},en.projection(gr).context(Pr)}var je=t(87952);function vr(gr){var Pr=0,Xr=n.pi/3,kr=(0,je.U)(gr),pn=kr(Pr,Xr);return pn.parallels=function(en){return arguments.length?kr(Pr=en[0]*n.qw,Xr=en[1]*n.qw):[Pr*n.oh,Xr*n.oh]},pn}function he(gr){var Pr=(0,n.W8)(gr);function Xr(kr,pn){return[kr*Pr,(0,n.g$)(pn)/Pr]}return Xr.invert=function(kr,pn){return[kr/Pr,(0,n.qR)(pn*Pr)]},Xr}function Ye(gr,Pr){var Xr=(0,n.g$)(gr),kr=(Xr+(0,n.g$)(Pr))/2;if((0,n.a2)(kr)<n.Gg)return he(gr);var pn=1+Xr*(2*kr-Xr),en=(0,n._I)(pn)/kr;function Tn(Ln,Yn){var ma=(0,n._I)(pn-2*kr*(0,n.g$)(Yn))/kr;return[ma*(0,n.g$)(Ln*=kr),en-ma*(0,n.W8)(Ln)]}return Tn.invert=function(Ln,Yn){var ma=en-Yn,wa=(0,n.WE)(Ln,(0,n.a2)(ma))*(0,n.kq)(ma);return ma*kr<0&&(wa-=n.pi*(0,n.kq)(Ln)*(0,n.kq)(ma)),[wa/kr,(0,n.qR)((pn-(Ln*Ln+ma*ma)*kr*kr)/(2*kr))]},Tn}function Qe(){return vr(Ye).scale(155.424).center([0,33.6442])}function mr(){return Qe().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}var ir=t(86420);function ve(gr){var Pr=gr.length;return{point:function(Xr,kr){for(var pn=-1;++pn<Pr;)gr[pn].point(Xr,kr)},sphere:function(){for(var Xr=-1;++Xr<Pr;)gr[Xr].sphere()},lineStart:function(){for(var Xr=-1;++Xr<Pr;)gr[Xr].lineStart()},lineEnd:function(){for(var Xr=-1;++Xr<Pr;)gr[Xr].lineEnd()},polygonStart:function(){for(var Xr=-1;++Xr<Pr;)gr[Xr].polygonStart()},polygonEnd:function(){for(var Xr=-1;++Xr<Pr;)gr[Xr].polygonEnd()}}}function ne(){var gr,Pr,Xr=mr(),kr,pn=Qe().rotate([154,0]).center([-2,58.5]).parallels([55,65]),en,Tn=Qe().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Ln,Yn,ma={point:function(ia,Rn){Yn=[ia,Rn]}};function wa(ia){var Rn=ia[0],Cr=ia[1];return Yn=null,kr.point(Rn,Cr),Yn||(en.point(Rn,Cr),Yn)||(Ln.point(Rn,Cr),Yn)}wa.invert=function(ia){var Rn=Xr.scale(),Cr=Xr.translate(),an=(ia[0]-Cr[0])/Rn,on=(ia[1]-Cr[1])/Rn;return(on>=.12&&on<.234&&an>=-.425&&an<-.214?pn:on>=.166&&on<.234&&an>=-.214&&an<-.115?Tn:Xr).invert(ia)},wa.stream=function(ia){return gr&&Pr===ia?gr:gr=ve([Xr.stream(Pr=ia),pn.stream(ia),Tn.stream(ia)])},wa.precision=function(ia){return arguments.length?(Xr.precision(ia),pn.precision(ia),Tn.precision(ia),la()):Xr.precision()},wa.scale=function(ia){return arguments.length?(Xr.scale(ia),pn.scale(ia*.35),Tn.scale(ia),wa.translate(Xr.translate())):Xr.scale()},wa.translate=function(ia){if(!arguments.length)return Xr.translate();var Rn=Xr.scale(),Cr=+ia[0],an=+ia[1];return kr=Xr.translate(ia).clipExtent([[Cr-.455*Rn,an-.238*Rn],[Cr+.455*Rn,an+.238*Rn]]).stream(ma),en=pn.translate([Cr-.307*Rn,an+.201*Rn]).clipExtent([[Cr-.425*Rn+n.Gg,an+.12*Rn+n.Gg],[Cr-.214*Rn-n.Gg,an+.234*Rn-n.Gg]]).stream(ma),Ln=Tn.translate([Cr-.205*Rn,an+.212*Rn]).clipExtent([[Cr-.214*Rn+n.Gg,an+.166*Rn+n.Gg],[Cr-.115*Rn-n.Gg,an+.234*Rn-n.Gg]]).stream(ma),la()},wa.fitExtent=function(ia,Rn){return(0,ir.QX)(wa,ia,Rn)},wa.fitSize=function(ia,Rn){return(0,ir.UV)(wa,ia,Rn)},wa.fitWidth=function(ia,Rn){return(0,ir.Qx)(wa,ia,Rn)},wa.fitHeight=function(ia,Rn){return(0,ir.OW)(wa,ia,Rn)};function la(){return gr=Pr=null,wa}return wa.scale(1070)}var ge=t(54724),Ae=t(69020),Re=t(92992);function ze(gr,Pr){return[gr,(0,n.Yz)((0,n.a6)((n.or+Pr)/2))]}ze.invert=function(gr,Pr){return[gr,2*(0,n.MQ)((0,n.oN)(Pr))-n.or]};function ke(){return _e(ze).scale(961/n.kD)}function _e(gr){var Pr=(0,je.c)(gr),Xr=Pr.center,kr=Pr.scale,pn=Pr.translate,en=Pr.clipExtent,Tn=null,Ln,Yn,ma;Pr.scale=function(la){return arguments.length?(kr(la),wa()):kr()},Pr.translate=function(la){return arguments.length?(pn(la),wa()):pn()},Pr.center=function(la){return arguments.length?(Xr(la),wa()):Xr()},Pr.clipExtent=function(la){return arguments.length?(la==null?Tn=Ln=Yn=ma=null:(Tn=+la[0][0],Ln=+la[0][1],Yn=+la[1][0],ma=+la[1][1]),wa()):Tn==null?null:[[Tn,Ln],[Yn,ma]]};function wa(){var la=n.pi*kr(),ia=Pr((0,Re.c)(Pr.rotate()).invert([0,0]));return en(Tn==null?[[ia[0]-la,ia[1]-la],[ia[0]+la,ia[1]+la]]:gr===ze?[[Math.max(ia[0]-la,Tn),Ln],[Math.min(ia[0]+la,Yn),ma]]:[[Tn,Math.max(ia[1]-la,Ln)],[Yn,Math.min(ia[1]+la,ma)]])}return wa()}function Ke(gr){return(0,n.a6)((n.or+gr)/2)}function hr(gr,Pr){var Xr=(0,n.W8)(gr),kr=gr===Pr?(0,n.g$)(gr):(0,n.Yz)(Xr/(0,n.W8)(Pr))/(0,n.Yz)(Ke(Pr)/Ke(gr)),pn=Xr*(0,n.g3)(Ke(gr),kr)/kr;if(!kr)return ze;function en(Tn,Ln){pn>0?Ln<-n.or+n.Gg&&(Ln=-n.or+n.Gg):Ln>n.or-n.Gg&&(Ln=n.or-n.Gg);var Yn=pn/(0,n.g3)(Ke(Ln),kr);return[Yn*(0,n.g$)(kr*Tn),pn-Yn*(0,n.W8)(kr*Tn)]}return en.invert=function(Tn,Ln){var Yn=pn-Ln,ma=(0,n.kq)(kr)*(0,n._I)(Tn*Tn+Yn*Yn),wa=(0,n.WE)(Tn,(0,n.a2)(Yn))*(0,n.kq)(Yn);return Yn*kr<0&&(wa-=n.pi*(0,n.kq)(Tn)*(0,n.kq)(Yn)),[wa/kr,2*(0,n.MQ)((0,n.g3)(pn/ma,1/kr))-n.or]},en}function cr(){return vr(hr).scale(109.5).parallels([30,30])}var dr=t(69604);function fr(gr,Pr){var Xr=(0,n.W8)(gr),kr=gr===Pr?(0,n.g$)(gr):(Xr-(0,n.W8)(Pr))/(Pr-gr),pn=Xr/kr+gr;if((0,n.a2)(kr)<n.Gg)return dr.u;function en(Tn,Ln){var Yn=pn-Ln,ma=kr*Tn;return[Yn*(0,n.g$)(ma),pn-Yn*(0,n.W8)(ma)]}return en.invert=function(Tn,Ln){var Yn=pn-Ln,ma=(0,n.WE)(Tn,(0,n.a2)(Yn))*(0,n.kq)(Yn);return Yn*kr<0&&(ma-=n.pi*(0,n.kq)(Tn)*(0,n.kq)(Yn)),[ma/kr,pn-(0,n.kq)(kr)*(0,n._I)(Tn*Tn+Yn*Yn)]},en}function Lr(){return vr(fr).scale(131.154).center([0,13.9389])}var xr=1.340264,Yt=-.081106,Jt=893e-6,qe=.003796,tr=(0,n._I)(3)/2,Ge=12;function Ee(gr,Pr){var Xr=(0,n.qR)(tr*(0,n.g$)(Pr)),kr=Xr*Xr,pn=kr*kr*kr;return[gr*(0,n.W8)(Xr)/(tr*(xr+3*Yt*kr+pn*(7*Jt+9*qe*kr))),Xr*(xr+Yt*kr+pn*(Jt+qe*kr))]}Ee.invert=function(gr,Pr){for(var Xr=Pr,kr=Xr*Xr,pn=kr*kr*kr,en=0,Tn,Ln,Yn;en<Ge&&(Ln=Xr*(xr+Yt*kr+pn*(Jt+qe*kr))-Pr,Yn=xr+3*Yt*kr+pn*(7*Jt+9*qe*kr),Xr-=Tn=Ln/Yn,kr=Xr*Xr,pn=kr*kr*kr,!((0,n.a2)(Tn)<n.a8));++en);return[tr*gr*(xr+3*Yt*kr+pn*(7*Jt+9*qe*kr))/(0,n.W8)(Xr),(0,n.qR)((0,n.g$)(Xr)/tr)]};function Xe(){return(0,je.c)(Ee).scale(177.158)}var rr=t(53285),Je=t(15196);function He(){var gr=1,Pr=0,Xr=0,kr=1,pn=1,en=0,Tn,Ln,Yn=null,ma,wa,la,ia=1,Rn=1,Cr=(0,Je.s)({point:function(Cn,Un){var ta=gn([Cn,Un]);this.stream.point(ta[0],ta[1])}}),an=ot.c,on,ln;function Nn(){return ia=gr*kr,Rn=gr*pn,on=ln=null,gn}function gn(Cn){var Un=Cn[0]*ia,ta=Cn[1]*Rn;if(en){var pa=ta*Tn-Un*Ln;Un=Un*Tn+ta*Ln,ta=pa}return[Un+Pr,ta+Xr]}return gn.invert=function(Cn){var Un=Cn[0]-Pr,ta=Cn[1]-Xr;if(en){var pa=ta*Tn+Un*Ln;Un=Un*Tn-ta*Ln,ta=pa}return[Un/ia,ta/Rn]},gn.stream=function(Cn){return on&&ln===Cn?on:on=Cr(an(ln=Cn))},gn.postclip=function(Cn){return arguments.length?(an=Cn,Yn=ma=wa=la=null,Nn()):an},gn.clipExtent=function(Cn){return arguments.length?(an=Cn==null?(Yn=ma=wa=la=null,ot.c):(0,p.c)(Yn=+Cn[0][0],ma=+Cn[0][1],wa=+Cn[1][0],la=+Cn[1][1]),Nn()):Yn==null?null:[[Yn,ma],[wa,la]]},gn.scale=function(Cn){return arguments.length?(gr=+Cn,Nn()):gr},gn.translate=function(Cn){return arguments.length?(Pr=+Cn[0],Xr=+Cn[1],Nn()):[Pr,Xr]},gn.angle=function(Cn){return arguments.length?(en=Cn%360*n.qw,Ln=(0,n.g$)(en),Tn=(0,n.W8)(en),Nn()):en*n.oh},gn.reflectX=function(Cn){return arguments.length?(kr=Cn?-1:1,Nn()):kr<0},gn.reflectY=function(Cn){return arguments.length?(pn=Cn?-1:1,Nn()):pn<0},gn.fitExtent=function(Cn,Un){return(0,ir.QX)(gn,Cn,Un)},gn.fitSize=function(Cn,Un){return(0,ir.UV)(gn,Cn,Un)},gn.fitWidth=function(Cn,Un){return(0,ir.Qx)(gn,Cn,Un)},gn.fitHeight=function(Cn,Un){return(0,ir.OW)(gn,Cn,Un)},gn}var yr=t(47984),Ir=t(4888),Tr=t(62280);function vn(gr,Pr){var Xr=(0,n.W8)(Pr),kr=1+(0,n.W8)(gr)*Xr;return[Xr*(0,n.g$)(gr)/kr,(0,n.g$)(Pr)/kr]}vn.invert=(0,Tr.g)(function(gr){return 2*(0,n.MQ)(gr)});function Or(){return(0,je.c)(vn).scale(250).clipAngle(142)}function En(gr,Pr){return[(0,n.Yz)((0,n.a6)((n.or+Pr)/2)),-gr]}En.invert=function(gr,Pr){return[-Pr,2*(0,n.MQ)((0,n.oN)(gr))-n.or]};function nn(){var gr=_e(En),Pr=gr.center,Xr=gr.rotate;return gr.center=function(kr){return arguments.length?Pr([-kr[1],kr[0]]):(kr=Pr(),[kr[1],-kr[0]])},gr.rotate=function(kr){return arguments.length?Xr([kr[0],kr[1],kr.length>2?kr[2]+90:90]):(kr=Xr(),[kr[0],kr[1],kr[2]-90])},Xr([0,0,90]).scale(159.155)}},27284:function(j,V,t){t.d(V,{c:function(){return P}});var b=t(64528);function P(o,L){var A=o[0]*b.qw,v=o[1]*b.qw,p=L[0]*b.qw,r=L[1]*b.qw,e=(0,b.W8)(v),s=(0,b.g$)(v),n=(0,b.W8)(r),l=(0,b.g$)(r),f=e*(0,b.W8)(A),u=e*(0,b.g$)(A),g=n*(0,b.W8)(p),h=n*(0,b.g$)(p),T=2*(0,b.qR)((0,b._I)((0,b.SD)(r-v)+e*n*(0,b.SD)(p-A))),c=(0,b.g$)(T),i=T?function(d){var x=(0,b.g$)(d*=T)/c,w=(0,b.g$)(T-d)/c,C=w*f+x*g,y=w*u+x*h,S=w*s+x*l;return[(0,b.WE)(y,C)*b.oh,(0,b.WE)(S,(0,b._I)(C*C+y*y))*b.oh]}:function(){return[A*b.oh,v*b.oh]};return i.distance=T,i}},64528:function(j,V,t){t.d(V,{Gg:function(){return b},Km:function(){return f},MQ:function(){return s},SD:function(){return C},W8:function(){return l},WE:function(){return n},Yz:function(){return g},_I:function(){return i},a2:function(){return e},a6:function(){return d},a8:function(){return P},g$:function(){return T},g3:function(){return h},kD:function(){return v},kq:function(){return c},mE:function(){return x},oN:function(){return u},oh:function(){return p},or:function(){return L},pi:function(){return o},qR:function(){return w},qw:function(){return r},wL:function(){return A}});var b=1e-6,P=1e-12,o=Math.PI,L=o/2,A=o/4,v=o*2,p=180/o,r=o/180,e=Math.abs,s=Math.atan,n=Math.atan2,l=Math.cos,f=Math.ceil,u=Math.exp,g=Math.log,h=Math.pow,T=Math.sin,c=Math.sign||function(y){return y>0?1:y<0?-1:0},i=Math.sqrt,d=Math.tan;function x(y){return y>1?0:y<-1?o:Math.acos(y)}function w(y){return y>1?L:y<-1?-L:Math.asin(y)}function C(y){return(y=T(y/2))*y}},70932:function(j,V,t){t.d(V,{c:function(){return b}});function b(){}},73784:function(j,V,t){var b=t(70932),P=1/0,o=P,L=-P,A=L,v={point:p,lineStart:b.c,lineEnd:b.c,polygonStart:b.c,polygonEnd:b.c,result:function(){var r=[[P,o],[L,A]];return L=A=-(o=P=1/0),r}};function p(r,e){r<P&&(P=r),r>L&&(L=r),e<o&&(o=e),e>A&&(A=e)}V.c=v},41860:function(j,V,t){t.d(V,{c:function(){return P}});var b=t(64528);function P(o,L){return(0,b.a2)(o[0]-L[0])<b.Gg&&(0,b.a2)(o[1]-L[1])<b.Gg}},58196:function(j,V,t){t.d(V,{c:function(){return v}});var b=t(88728),P=t(84220),o=t(64528),L=(0,b.c)();function A(p){return(0,o.a2)(p[0])<=o.pi?p[0]:(0,o.kq)(p[0])*(((0,o.a2)(p[0])+o.pi)%o.kD-o.pi)}function v(p,r){var e=A(r),s=r[1],n=(0,o.g$)(s),l=[(0,o.g$)(e),-(0,o.W8)(e),0],f=0,u=0;L.reset(),n===1?s=o.or+o.Gg:n===-1&&(s=-o.or-o.Gg);for(var g=0,h=p.length;g<h;++g)if(c=(T=p[g]).length)for(var T,c,i=T[c-1],d=A(i),x=i[1]/2+o.wL,w=(0,o.g$)(x),C=(0,o.W8)(x),y=0;y<c;++y,d=M,w=E,C=m,i=S){var S=T[y],M=A(S),a=S[1]/2+o.wL,E=(0,o.g$)(a),m=(0,o.W8)(a),k=M-d,I=k>=0?1:-1,O=I*k,z=O>o.pi,B=w*E;if(L.add((0,o.WE)(B*I*(0,o.g$)(O),C*m+B*(0,o.W8)(O))),f+=z?k+I*o.kD:k,z^d>=e^M>=e){var F=(0,P.CW)((0,P.ux)(i),(0,P.ux)(S));(0,P.cJ)(F);var _=(0,P.CW)(l,F);(0,P.cJ)(_);var N=(z^k>=0?-1:1)*(0,o.qR)(_[2]);(s>N||s===N&&(F[0]||F[1]))&&(u+=z^k>=0?1:-1)}}return(f<-o.Gg||f<o.Gg&&L<-o.Gg)^u&1}},62280:function(j,V,t){t.d(V,{a:function(){return P},g:function(){return o}});var b=t(64528);function P(L){return function(A,v){var p=(0,b.W8)(A),r=(0,b.W8)(v),e=L(p*r);return[e*r*(0,b.g$)(A),e*(0,b.g$)(v)]}}function o(L){return function(A,v){var p=(0,b._I)(A*A+v*v),r=L(p),e=(0,b.g$)(r),s=(0,b.W8)(r);return[(0,b.WE)(A*e,p*s),(0,b.qR)(p&&v*e/p)]}}},54724:function(j,V,t){t.d(V,{c:function(){return A},y:function(){return L}});var b=t(64528),P=t(62280),o=t(87952),L=(0,P.a)(function(v){return(0,b._I)(2/(1+v))});L.invert=(0,P.g)(function(v){return 2*(0,b.qR)(v/2)});function A(){return(0,o.c)(L).scale(124.75).clipAngle(179.999)}},69020:function(j,V,t){t.d(V,{O:function(){return L},c:function(){return A}});var b=t(64528),P=t(62280),o=t(87952),L=(0,P.a)(function(v){return(v=(0,b.mE)(v))&&v/(0,b.g$)(v)});L.invert=(0,P.g)(function(v){return v});function A(){return(0,o.c)(L).scale(79.4188).clipAngle(179.999)}},69604:function(j,V,t){t.d(V,{c:function(){return o},u:function(){return P}});var b=t(87952);function P(L,A){return[L,A]}P.invert=P;function o(){return(0,b.c)(P).scale(152.63)}},86420:function(j,V,t){t.d(V,{OW:function(){return p},QX:function(){return L},Qx:function(){return v},UV:function(){return A}});var b=t(16016),P=t(73784);function o(r,e,s){var n=r.clipExtent&&r.clipExtent();return r.scale(150).translate([0,0]),n!=null&&r.clipExtent(null),(0,b.c)(s,r.stream(P.c)),e(P.c.result()),n!=null&&r.clipExtent(n),r}function L(r,e,s){return o(r,function(n){var l=e[1][0]-e[0][0],f=e[1][1]-e[0][1],u=Math.min(l/(n[1][0]-n[0][0]),f/(n[1][1]-n[0][1])),g=+e[0][0]+(l-u*(n[1][0]+n[0][0]))/2,h=+e[0][1]+(f-u*(n[1][1]+n[0][1]))/2;r.scale(150*u).translate([g,h])},s)}function A(r,e,s){return L(r,[[0,0],e],s)}function v(r,e,s){return o(r,function(n){var l=+e,f=l/(n[1][0]-n[0][0]),u=(l-f*(n[1][0]+n[0][0]))/2,g=-f*n[0][1];r.scale(150*f).translate([u,g])},s)}function p(r,e,s){return o(r,function(n){var l=+e,f=l/(n[1][1]-n[0][1]),u=-f*n[0][0],g=(l-f*(n[1][1]+n[0][1]))/2;r.scale(150*f).translate([u,g])},s)}},53285:function(j,V,t){t.d(V,{Y:function(){return L},c:function(){return A}});var b=t(64528),P=t(62280),o=t(87952);function L(v,p){var r=(0,b.W8)(p),e=(0,b.W8)(v)*r;return[r*(0,b.g$)(v)/e,(0,b.g$)(p)/e]}L.invert=(0,P.g)(b.MQ);function A(){return(0,o.c)(L).scale(144.049).clipAngle(60)}},87952:function(j,V,t){t.d(V,{c:function(){return d},U:function(){return x}});var b=t(78284),P=t(2728),o=t(21676),L=t(68120),A=t(7376),v=t(64528),p=t(92992),r=t(15196),e=t(86420),s=t(84220),n=16,l=(0,v.W8)(30*v.qw);function f(w,C){return+C?g(w,C):u(w)}function u(w){return(0,r.s)({point:function(C,y){C=w(C,y),this.stream.point(C[0],C[1])}})}function g(w,C){function y(S,M,a,E,m,k,I,O,z,B,F,_,N,G){var X=I-S,$=O-M,et=X*X+$*$;if(et>4*C&&N--){var ot=E+B,nt=m+F,Z=k+_,Q=(0,v._I)(ot*ot+nt*nt+Z*Z),W=(0,v.qR)(Z/=Q),J=(0,v.a2)((0,v.a2)(Z)-1)<v.Gg||(0,v.a2)(a-z)<v.Gg?(a+z)/2:(0,v.WE)(nt,ot),it=w(J,W),K=it[0],H=it[1],at=K-S,tt=H-M,lt=$*at-X*tt;(lt*lt/et>C||(0,v.a2)((X*at+$*tt)/et-.5)>.3||E*B+m*F+k*_<l)&&(y(S,M,a,E,m,k,K,H,J,ot/=Q,nt/=Q,Z,N,G),G.point(K,H),y(K,H,J,ot,nt,Z,I,O,z,B,F,_,N,G))}}return function(S){var M,a,E,m,k,I,O,z,B,F,_,N,G={point:X,lineStart:$,lineEnd:ot,polygonStart:function(){S.polygonStart(),G.lineStart=nt},polygonEnd:function(){S.polygonEnd(),G.lineStart=$}};function X(W,J){W=w(W,J),S.point(W[0],W[1])}function $(){z=NaN,G.point=et,S.lineStart()}function et(W,J){var it=(0,s.ux)([W,J]),K=w(W,J);y(z,B,O,F,_,N,z=K[0],B=K[1],O=W,F=it[0],_=it[1],N=it[2],n,S),S.point(z,B)}function ot(){G.point=X,S.lineEnd()}function nt(){$(),G.point=Z,G.lineEnd=Q}function Z(W,J){et(M=W,J),a=z,E=B,m=F,k=_,I=N,G.point=et}function Q(){y(z,B,O,F,_,N,a,E,M,m,k,I,n,S),G.lineEnd=ot,ot()}return G}}var h=(0,r.s)({point:function(w,C){this.stream.point(w*v.qw,C*v.qw)}});function T(w){return(0,r.s)({point:function(C,y){var S=w(C,y);return this.stream.point(S[0],S[1])}})}function c(w,C,y,S,M){function a(E,m){return E*=S,m*=M,[C+w*E,y-w*m]}return a.invert=function(E,m){return[(E-C)/w*S,(y-m)/w*M]},a}function i(w,C,y,S,M,a){var E=(0,v.W8)(a),m=(0,v.g$)(a),k=E*w,I=m*w,O=E/w,z=m/w,B=(m*y-E*C)/w,F=(m*C+E*y)/w;function _(N,G){return N*=S,G*=M,[k*N-I*G+C,y-I*N-k*G]}return _.invert=function(N,G){return[S*(O*N-z*G+B),M*(F-z*N-O*G)]},_}function d(w){return x(function(){return w})()}function x(w){var C,y=150,S=480,M=250,a=0,E=0,m=0,k=0,I=0,O,z=0,B=1,F=1,_=null,N=b.c,G=null,X,$,et,ot=A.c,nt=.5,Z,Q,W,J,it;function K(lt){return W(lt[0]*v.qw,lt[1]*v.qw)}function H(lt){return lt=W.invert(lt[0],lt[1]),lt&&[lt[0]*v.oh,lt[1]*v.oh]}K.stream=function(lt){return J&&it===lt?J:J=h(T(O)(N(Z(ot(it=lt)))))},K.preclip=function(lt){return arguments.length?(N=lt,_=void 0,tt()):N},K.postclip=function(lt){return arguments.length?(ot=lt,G=X=$=et=null,tt()):ot},K.clipAngle=function(lt){return arguments.length?(N=+lt?(0,P.c)(_=lt*v.qw):(_=null,b.c),tt()):_*v.oh},K.clipExtent=function(lt){return arguments.length?(ot=lt==null?(G=X=$=et=null,A.c):(0,o.c)(G=+lt[0][0],X=+lt[0][1],$=+lt[1][0],et=+lt[1][1]),tt()):G==null?null:[[G,X],[$,et]]},K.scale=function(lt){return arguments.length?(y=+lt,at()):y},K.translate=function(lt){return arguments.length?(S=+lt[0],M=+lt[1],at()):[S,M]},K.center=function(lt){return arguments.length?(a=lt[0]%360*v.qw,E=lt[1]%360*v.qw,at()):[a*v.oh,E*v.oh]},K.rotate=function(lt){return arguments.length?(m=lt[0]%360*v.qw,k=lt[1]%360*v.qw,I=lt.length>2?lt[2]%360*v.qw:0,at()):[m*v.oh,k*v.oh,I*v.oh]},K.angle=function(lt){return arguments.length?(z=lt%360*v.qw,at()):z*v.oh},K.reflectX=function(lt){return arguments.length?(B=lt?-1:1,at()):B<0},K.reflectY=function(lt){return arguments.length?(F=lt?-1:1,at()):F<0},K.precision=function(lt){return arguments.length?(Z=f(Q,nt=lt*lt),tt()):(0,v._I)(nt)},K.fitExtent=function(lt,dt){return(0,e.QX)(K,lt,dt)},K.fitSize=function(lt,dt){return(0,e.UV)(K,lt,dt)},K.fitWidth=function(lt,dt){return(0,e.Qx)(K,lt,dt)},K.fitHeight=function(lt,dt){return(0,e.OW)(K,lt,dt)};function at(){var lt=i(y,0,0,B,F,z).apply(null,C(a,E)),dt=(z?i:c)(y,S-lt[0],M-lt[1],B,F,z);return O=(0,p.O)(m,k,I),Q=(0,L.c)(C,dt),W=(0,L.c)(O,Q),Z=f(Q,nt),tt()}function tt(){return J=it=null,K}return function(){return C=w.apply(this,arguments),K.invert=C.invert&&H,at()}}},47984:function(j,V,t){t.d(V,{c:function(){return L},g:function(){return o}});var b=t(87952),P=t(64528);function o(A,v){var p=v*v,r=p*p;return[A*(.8707-.131979*p+r*(-.013791+r*(.003971*p-.001529*r))),v*(1.007226+p*(.015085+r*(-.044475+.028874*p-.005916*r)))]}o.invert=function(A,v){var p=v,r=25,e;do{var s=p*p,n=s*s;p-=e=(p*(1.007226+s*(.015085+n*(-.044475+.028874*s-.005916*n)))-v)/(1.007226+s*(.045255+n*(-.311325+.259866*s-.06507600000000001*n)))}while((0,P.a2)(e)>P.Gg&&--r>0);return[A/(.8707+(s=p*p)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),p]};function L(){return(0,b.c)(o).scale(175.295)}},4888:function(j,V,t){t.d(V,{c:function(){return A},t:function(){return L}});var b=t(64528),P=t(62280),o=t(87952);function L(v,p){return[(0,b.W8)(p)*(0,b.g$)(v),(0,b.g$)(p)]}L.invert=(0,P.g)(b.qR);function A(){return(0,o.c)(L).scale(249.5).clipAngle(90+b.Gg)}},92992:function(j,V,t){t.d(V,{O:function(){return L},c:function(){return r}});var b=t(68120),P=t(64528);function o(e,s){return[(0,P.a2)(e)>P.pi?e+Math.round(-e/P.kD)*P.kD:e,s]}o.invert=o;function L(e,s,n){return(e%=P.kD)?s||n?(0,b.c)(v(e),p(s,n)):v(e):s||n?p(s,n):o}function A(e){return function(s,n){return s+=e,[s>P.pi?s-P.kD:s<-P.pi?s+P.kD:s,n]}}function v(e){var s=A(e);return s.invert=A(-e),s}function p(e,s){var n=(0,P.W8)(e),l=(0,P.g$)(e),f=(0,P.W8)(s),u=(0,P.g$)(s);function g(h,T){var c=(0,P.W8)(T),i=(0,P.W8)(h)*c,d=(0,P.g$)(h)*c,x=(0,P.g$)(T),w=x*n+i*l;return[(0,P.WE)(d*f-w*u,i*n-x*l),(0,P.qR)(w*f+d*u)]}return g.invert=function(h,T){var c=(0,P.W8)(T),i=(0,P.W8)(h)*c,d=(0,P.g$)(h)*c,x=(0,P.g$)(T),w=x*f-d*u;return[(0,P.WE)(d*f+x*u,i*n+w*l),(0,P.qR)(w*n-i*l)]},g}function r(e){e=L(e[0]*P.qw,e[1]*P.qw,e.length>2?e[2]*P.qw:0);function s(n){return n=e(n[0]*P.qw,n[1]*P.qw),n[0]*=P.oh,n[1]*=P.oh,n}return s.invert=function(n){return n=e.invert(n[0]*P.qw,n[1]*P.qw),n[0]*=P.oh,n[1]*=P.oh,n},s}},16016:function(j,V,t){t.d(V,{c:function(){return v}});function b(p,r){p&&o.hasOwnProperty(p.type)&&o[p.type](p,r)}var P={Feature:function(p,r){b(p.geometry,r)},FeatureCollection:function(p,r){for(var e=p.features,s=-1,n=e.length;++s<n;)b(e[s].geometry,r)}},o={Sphere:function(p,r){r.sphere()},Point:function(p,r){p=p.coordinates,r.point(p[0],p[1],p[2])},MultiPoint:function(p,r){for(var e=p.coordinates,s=-1,n=e.length;++s<n;)p=e[s],r.point(p[0],p[1],p[2])},LineString:function(p,r){L(p.coordinates,r,0)},MultiLineString:function(p,r){for(var e=p.coordinates,s=-1,n=e.length;++s<n;)L(e[s],r,0)},Polygon:function(p,r){A(p.coordinates,r)},MultiPolygon:function(p,r){for(var e=p.coordinates,s=-1,n=e.length;++s<n;)A(e[s],r)},GeometryCollection:function(p,r){for(var e=p.geometries,s=-1,n=e.length;++s<n;)b(e[s],r)}};function L(p,r,e){var s=-1,n=p.length-e,l;for(r.lineStart();++s<n;)l=p[s],r.point(l[0],l[1],l[2]);r.lineEnd()}function A(p,r){var e=-1,s=p.length;for(r.polygonStart();++e<s;)L(p[e],r,1);r.polygonEnd()}function v(p,r){p&&P.hasOwnProperty(p.type)?P[p.type](p,r):b(p,r)}},15196:function(j,V,t){t.d(V,{c:function(){return b},s:function(){return P}});function b(L){return{stream:P(L)}}function P(L){return function(A){var v=new o;for(var p in L)v[p]=L[p];return v.stream=A,v}}function o(){}o.prototype={constructor:o,point:function(L,A){this.stream.point(L,A)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},74148:function(j,V,t){t.r(V),t.d(V,{cluster:function(){return r},hierarchy:function(){return w},pack:function(){return H},packEnclose:function(){return k},packSiblings:function(){return Z},partition:function(){return gt},stratify:function(){return wt},tree:function(){return ue},treemap:function(){return Pt},treemapBinary:function(){return Ot},treemapDice:function(){return mt},treemapResquarify:function(){return Ht},treemapSlice:function(){return fe},treemapSliceDice:function(){return Nt},treemapSquarify:function(){return Qt}});function b(St,kt){return St.parent===kt.parent?1:2}function P(St){return St.reduce(o,0)/St.length}function o(St,kt){return St+kt.x}function L(St){return 1+St.reduce(A,0)}function A(St,kt){return Math.max(St,kt.y)}function v(St){for(var kt;kt=St.children;)St=kt[0];return St}function p(St){for(var kt;kt=St.children;)St=kt[kt.length-1];return St}function r(){var St=b,kt=1,Ft=1,At=!1;function ft(pt){var Dt,Ut=0;pt.eachAfter(function(me){var Se=me.children;Se?(me.x=P(Se),me.y=L(Se)):(me.x=Dt?Ut+=St(me,Dt):0,me.y=0,Dt=me)});var $t=v(pt),re=p(pt),Be=$t.x-St($t,re)/2,We=re.x+St(re,$t)/2;return pt.eachAfter(At?function(me){me.x=(me.x-pt.x)*kt,me.y=(pt.y-me.y)*Ft}:function(me){me.x=(me.x-Be)/(We-Be)*kt,me.y=(1-(pt.y?me.y/pt.y:1))*Ft})}return ft.separation=function(pt){return arguments.length?(St=pt,ft):St},ft.size=function(pt){return arguments.length?(At=!1,kt=+pt[0],Ft=+pt[1],ft):At?null:[kt,Ft]},ft.nodeSize=function(pt){return arguments.length?(At=!0,kt=+pt[0],Ft=+pt[1],ft):At?[kt,Ft]:null},ft}function e(St){var kt=0,Ft=St.children,At=Ft&&Ft.length;if(!At)kt=1;else for(;--At>=0;)kt+=Ft[At].value;St.value=kt}function s(){return this.eachAfter(e)}function n(St){var kt=this,Ft,At=[kt],ft,pt,Dt;do for(Ft=At.reverse(),At=[];kt=Ft.pop();)if(St(kt),ft=kt.children,ft)for(pt=0,Dt=ft.length;pt<Dt;++pt)At.push(ft[pt]);while(At.length);return this}function l(St){for(var kt=this,Ft=[kt],At,ft;kt=Ft.pop();)if(St(kt),At=kt.children,At)for(ft=At.length-1;ft>=0;--ft)Ft.push(At[ft]);return this}function f(St){for(var kt=this,Ft=[kt],At=[],ft,pt,Dt;kt=Ft.pop();)if(At.push(kt),ft=kt.children,ft)for(pt=0,Dt=ft.length;pt<Dt;++pt)Ft.push(ft[pt]);for(;kt=At.pop();)St(kt);return this}function u(St){return this.eachAfter(function(kt){for(var Ft=+St(kt.data)||0,At=kt.children,ft=At&&At.length;--ft>=0;)Ft+=At[ft].value;kt.value=Ft})}function g(St){return this.eachBefore(function(kt){kt.children&&kt.children.sort(St)})}function h(St){for(var kt=this,Ft=T(kt,St),At=[kt];kt!==Ft;)kt=kt.parent,At.push(kt);for(var ft=At.length;St!==Ft;)At.splice(ft,0,St),St=St.parent;return At}function T(St,kt){if(St===kt)return St;var Ft=St.ancestors(),At=kt.ancestors(),ft=null;for(St=Ft.pop(),kt=At.pop();St===kt;)ft=St,St=Ft.pop(),kt=At.pop();return ft}function c(){for(var St=this,kt=[St];St=St.parent;)kt.push(St);return kt}function i(){var St=[];return this.each(function(kt){St.push(kt)}),St}function d(){var St=[];return this.eachBefore(function(kt){kt.children||St.push(kt)}),St}function x(){var St=this,kt=[];return St.each(function(Ft){Ft!==St&&kt.push({source:Ft.parent,target:Ft})}),kt}function w(St,kt){var Ft=new a(St),At=+St.value&&(Ft.value=St.value),ft,pt=[Ft],Dt,Ut,$t,re;for(kt==null&&(kt=y);ft=pt.pop();)if(At&&(ft.value=+ft.data.value),(Ut=kt(ft.data))&&(re=Ut.length))for(ft.children=new Array(re),$t=re-1;$t>=0;--$t)pt.push(Dt=ft.children[$t]=new a(Ut[$t])),Dt.parent=ft,Dt.depth=ft.depth+1;return Ft.eachBefore(M)}function C(){return w(this).eachBefore(S)}function y(St){return St.children}function S(St){St.data=St.data.data}function M(St){var kt=0;do St.height=kt;while((St=St.parent)&&St.height<++kt)}function a(St){this.data=St,this.depth=this.height=0,this.parent=null}a.prototype=w.prototype={constructor:a,count:s,each:n,eachAfter:f,eachBefore:l,sum:u,sort:g,path:h,ancestors:c,descendants:i,leaves:d,links:x,copy:C};var E=Array.prototype.slice;function m(St){for(var kt=St.length,Ft,At;kt;)At=Math.random()*kt--|0,Ft=St[kt],St[kt]=St[At],St[At]=Ft;return St}function k(St){for(var kt=0,Ft=(St=m(E.call(St))).length,At=[],ft,pt;kt<Ft;)ft=St[kt],pt&&z(pt,ft)?++kt:(pt=F(At=I(At,ft)),kt=0);return pt}function I(St,kt){var Ft,At;if(B(kt,St))return[kt];for(Ft=0;Ft<St.length;++Ft)if(O(kt,St[Ft])&&B(N(St[Ft],kt),St))return[St[Ft],kt];for(Ft=0;Ft<St.length-1;++Ft)for(At=Ft+1;At<St.length;++At)if(O(N(St[Ft],St[At]),kt)&&O(N(St[Ft],kt),St[At])&&O(N(St[At],kt),St[Ft])&&B(G(St[Ft],St[At],kt),St))return[St[Ft],St[At],kt];throw new Error}function O(St,kt){var Ft=St.r-kt.r,At=kt.x-St.x,ft=kt.y-St.y;return Ft<0||Ft*Ft<At*At+ft*ft}function z(St,kt){var Ft=St.r-kt.r+1e-6,At=kt.x-St.x,ft=kt.y-St.y;return Ft>0&&Ft*Ft>At*At+ft*ft}function B(St,kt){for(var Ft=0;Ft<kt.length;++Ft)if(!z(St,kt[Ft]))return!1;return!0}function F(St){switch(St.length){case 1:return _(St[0]);case 2:return N(St[0],St[1]);case 3:return G(St[0],St[1],St[2])}}function _(St){return{x:St.x,y:St.y,r:St.r}}function N(St,kt){var Ft=St.x,At=St.y,ft=St.r,pt=kt.x,Dt=kt.y,Ut=kt.r,$t=pt-Ft,re=Dt-At,Be=Ut-ft,We=Math.sqrt($t*$t+re*re);return{x:(Ft+pt+$t/We*Be)/2,y:(At+Dt+re/We*Be)/2,r:(We+ft+Ut)/2}}function G(St,kt,Ft){var At=St.x,ft=St.y,pt=St.r,Dt=kt.x,Ut=kt.y,$t=kt.r,re=Ft.x,Be=Ft.y,We=Ft.r,me=At-Dt,Se=At-re,je=ft-Ut,vr=ft-Be,he=$t-pt,Ye=We-pt,Qe=At*At+ft*ft-pt*pt,mr=Qe-Dt*Dt-Ut*Ut+$t*$t,ir=Qe-re*re-Be*Be+We*We,ve=Se*je-me*vr,ne=(je*ir-vr*mr)/(ve*2)-At,ge=(vr*he-je*Ye)/ve,Ae=(Se*mr-me*ir)/(ve*2)-ft,Re=(me*Ye-Se*he)/ve,ze=ge*ge+Re*Re-1,ke=2*(pt+ne*ge+Ae*Re),_e=ne*ne+Ae*Ae-pt*pt,Ke=-(ze?(ke+Math.sqrt(ke*ke-4*ze*_e))/(2*ze):_e/ke);return{x:At+ne+ge*Ke,y:ft+Ae+Re*Ke,r:Ke}}function X(St,kt,Ft){var At=St.x-kt.x,ft,pt,Dt=St.y-kt.y,Ut,$t,re=At*At+Dt*Dt;re?(pt=kt.r+Ft.r,pt*=pt,$t=St.r+Ft.r,$t*=$t,pt>$t?(ft=(re+$t-pt)/(2*re),Ut=Math.sqrt(Math.max(0,$t/re-ft*ft)),Ft.x=St.x-ft*At-Ut*Dt,Ft.y=St.y-ft*Dt+Ut*At):(ft=(re+pt-$t)/(2*re),Ut=Math.sqrt(Math.max(0,pt/re-ft*ft)),Ft.x=kt.x+ft*At-Ut*Dt,Ft.y=kt.y+ft*Dt+Ut*At)):(Ft.x=kt.x+Ft.r,Ft.y=kt.y)}function $(St,kt){var Ft=St.r+kt.r-1e-6,At=kt.x-St.x,ft=kt.y-St.y;return Ft>0&&Ft*Ft>At*At+ft*ft}function et(St){var kt=St._,Ft=St.next._,At=kt.r+Ft.r,ft=(kt.x*Ft.r+Ft.x*kt.r)/At,pt=(kt.y*Ft.r+Ft.y*kt.r)/At;return ft*ft+pt*pt}function ot(St){this._=St,this.next=null,this.previous=null}function nt(St){if(!(ft=St.length))return 0;var kt,Ft,At,ft,pt,Dt,Ut,$t,re,Be,We;if(kt=St[0],kt.x=0,kt.y=0,!(ft>1))return kt.r;if(Ft=St[1],kt.x=-Ft.r,Ft.x=kt.r,Ft.y=0,!(ft>2))return kt.r+Ft.r;X(Ft,kt,At=St[2]),kt=new ot(kt),Ft=new ot(Ft),At=new ot(At),kt.next=At.previous=Ft,Ft.next=kt.previous=At,At.next=Ft.previous=kt;t:for(Ut=3;Ut<ft;++Ut){X(kt._,Ft._,At=St[Ut]),At=new ot(At),$t=Ft.next,re=kt.previous,Be=Ft._.r,We=kt._.r;do if(Be<=We){if($($t._,At._)){Ft=$t,kt.next=Ft,Ft.previous=kt,--Ut;continue t}Be+=$t._.r,$t=$t.next}else{if($(re._,At._)){kt=re,kt.next=Ft,Ft.previous=kt,--Ut;continue t}We+=re._.r,re=re.previous}while($t!==re.next);for(At.previous=kt,At.next=Ft,kt.next=Ft.previous=Ft=At,pt=et(kt);(At=At.next)!==Ft;)(Dt=et(At))<pt&&(kt=At,pt=Dt);Ft=kt.next}for(kt=[Ft._],At=Ft;(At=At.next)!==Ft;)kt.push(At._);for(At=k(kt),Ut=0;Ut<ft;++Ut)kt=St[Ut],kt.x-=At.x,kt.y-=At.y;return At.r}function Z(St){return nt(St),St}function Q(St){return St==null?null:W(St)}function W(St){if(typeof St!="function")throw new Error;return St}function J(){return 0}function it(St){return function(){return St}}function K(St){return Math.sqrt(St.value)}function H(){var St=null,kt=1,Ft=1,At=J;function ft(pt){return pt.x=kt/2,pt.y=Ft/2,St?pt.eachBefore(at(St)).eachAfter(tt(At,.5)).eachBefore(lt(1)):pt.eachBefore(at(K)).eachAfter(tt(J,1)).eachAfter(tt(At,pt.r/Math.min(kt,Ft))).eachBefore(lt(Math.min(kt,Ft)/(2*pt.r))),pt}return ft.radius=function(pt){return arguments.length?(St=Q(pt),ft):St},ft.size=function(pt){return arguments.length?(kt=+pt[0],Ft=+pt[1],ft):[kt,Ft]},ft.padding=function(pt){return arguments.length?(At=typeof pt=="function"?pt:it(+pt),ft):At},ft}function at(St){return function(kt){kt.children||(kt.r=Math.max(0,+St(kt)||0))}}function tt(St,kt){return function(Ft){if(At=Ft.children){var At,ft,pt=At.length,Dt=St(Ft)*kt||0,Ut;if(Dt)for(ft=0;ft<pt;++ft)At[ft].r+=Dt;if(Ut=nt(At),Dt)for(ft=0;ft<pt;++ft)At[ft].r-=Dt;Ft.r=Ut+Dt}}}function lt(St){return function(kt){var Ft=kt.parent;kt.r*=St,Ft&&(kt.x=Ft.x+St*kt.x,kt.y=Ft.y+St*kt.y)}}function dt(St){St.x0=Math.round(St.x0),St.y0=Math.round(St.y0),St.x1=Math.round(St.x1),St.y1=Math.round(St.y1)}function mt(St,kt,Ft,At,ft){for(var pt=St.children,Dt,Ut=-1,$t=pt.length,re=St.value&&(At-kt)/St.value;++Ut<$t;)Dt=pt[Ut],Dt.y0=Ft,Dt.y1=ft,Dt.x0=kt,Dt.x1=kt+=Dt.value*re}function gt(){var St=1,kt=1,Ft=0,At=!1;function ft(Dt){var Ut=Dt.height+1;return Dt.x0=Dt.y0=Ft,Dt.x1=St,Dt.y1=kt/Ut,Dt.eachBefore(pt(kt,Ut)),At&&Dt.eachBefore(dt),Dt}function pt(Dt,Ut){return function($t){$t.children&&mt($t,$t.x0,Dt*($t.depth+1)/Ut,$t.x1,Dt*($t.depth+2)/Ut);var re=$t.x0,Be=$t.y0,We=$t.x1-Ft,me=$t.y1-Ft;We<re&&(re=We=(re+We)/2),me<Be&&(Be=me=(Be+me)/2),$t.x0=re,$t.y0=Be,$t.x1=We,$t.y1=me}}return ft.round=function(Dt){return arguments.length?(At=!!Dt,ft):At},ft.size=function(Dt){return arguments.length?(St=+Dt[0],kt=+Dt[1],ft):[St,kt]},ft.padding=function(Dt){return arguments.length?(Ft=+Dt,ft):Ft},ft}var Mt="$",Lt={depth:-1},zt={};function xt(St){return St.id}function Ct(St){return St.parentId}function wt(){var St=xt,kt=Ct;function Ft(At){var ft,pt,Dt=At.length,Ut,$t,re,Be=new Array(Dt),We,me,Se={};for(pt=0;pt<Dt;++pt)ft=At[pt],re=Be[pt]=new a(ft),(We=St(ft,pt,At))!=null&&(We+="")&&(me=Mt+(re.id=We),Se[me]=me in Se?zt:re);for(pt=0;pt<Dt;++pt)if(re=Be[pt],We=kt(At[pt],pt,At),We==null||!(We+="")){if(Ut)throw new Error("multiple roots");Ut=re}else{if($t=Se[Mt+We],!$t)throw new Error("missing: "+We);if($t===zt)throw new Error("ambiguous: "+We);$t.children?$t.children.push(re):$t.children=[re],re.parent=$t}if(!Ut)throw new Error("no root");if(Ut.parent=Lt,Ut.eachBefore(function(je){je.depth=je.parent.depth+1,--Dt}).eachBefore(M),Ut.parent=null,Dt>0)throw new Error("cycle");return Ut}return Ft.id=function(At){return arguments.length?(St=W(At),Ft):St},Ft.parentId=function(At){return arguments.length?(kt=W(At),Ft):kt},Ft}function Rt(St,kt){return St.parent===kt.parent?1:2}function Tt(St){var kt=St.children;return kt?kt[0]:St.t}function Bt(St){var kt=St.children;return kt?kt[kt.length-1]:St.t}function Gt(St,kt,Ft){var At=Ft/(kt.i-St.i);kt.c-=At,kt.s+=Ft,St.c+=At,kt.z+=Ft,kt.m+=Ft}function te(St){for(var kt=0,Ft=0,At=St.children,ft=At.length,pt;--ft>=0;)pt=At[ft],pt.z+=kt,pt.m+=kt,kt+=pt.s+(Ft+=pt.c)}function Wt(St,kt,Ft){return St.a.parent===kt.parent?St.a:Ft}function jt(St,kt){this._=St,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=kt}jt.prototype=Object.create(a.prototype);function ie(St){for(var kt=new jt(St,0),Ft,At=[kt],ft,pt,Dt,Ut;Ft=At.pop();)if(pt=Ft._.children)for(Ft.children=new Array(Ut=pt.length),Dt=Ut-1;Dt>=0;--Dt)At.push(ft=Ft.children[Dt]=new jt(pt[Dt],Dt)),ft.parent=Ft;return(kt.parent=new jt(null,0)).children=[kt],kt}function ue(){var St=Rt,kt=1,Ft=1,At=null;function ft(re){var Be=ie(re);if(Be.eachAfter(pt),Be.parent.m=-Be.z,Be.eachBefore(Dt),At)re.eachBefore($t);else{var We=re,me=re,Se=re;re.eachBefore(function(Qe){Qe.x<We.x&&(We=Qe),Qe.x>me.x&&(me=Qe),Qe.depth>Se.depth&&(Se=Qe)});var je=We===me?1:St(We,me)/2,vr=je-We.x,he=kt/(me.x+je+vr),Ye=Ft/(Se.depth||1);re.eachBefore(function(Qe){Qe.x=(Qe.x+vr)*he,Qe.y=Qe.depth*Ye})}return re}function pt(re){var Be=re.children,We=re.parent.children,me=re.i?We[re.i-1]:null;if(Be){te(re);var Se=(Be[0].z+Be[Be.length-1].z)/2;me?(re.z=me.z+St(re._,me._),re.m=re.z-Se):re.z=Se}else me&&(re.z=me.z+St(re._,me._));re.parent.A=Ut(re,me,re.parent.A||We[0])}function Dt(re){re._.x=re.z+re.parent.m,re.m+=re.parent.m}function Ut(re,Be,We){if(Be){for(var me=re,Se=re,je=Be,vr=me.parent.children[0],he=me.m,Ye=Se.m,Qe=je.m,mr=vr.m,ir;je=Bt(je),me=Tt(me),je&&me;)vr=Tt(vr),Se=Bt(Se),Se.a=re,ir=je.z+Qe-me.z-he+St(je._,me._),ir>0&&(Gt(Wt(je,re,We),re,ir),he+=ir,Ye+=ir),Qe+=je.m,he+=me.m,mr+=vr.m,Ye+=Se.m;je&&!Bt(Se)&&(Se.t=je,Se.m+=Qe-Ye),me&&!Tt(vr)&&(vr.t=me,vr.m+=he-mr,We=re)}return We}function $t(re){re.x*=kt,re.y=re.depth*Ft}return ft.separation=function(re){return arguments.length?(St=re,ft):St},ft.size=function(re){return arguments.length?(At=!1,kt=+re[0],Ft=+re[1],ft):At?null:[kt,Ft]},ft.nodeSize=function(re){return arguments.length?(At=!0,kt=+re[0],Ft=+re[1],ft):At?[kt,Ft]:null},ft}function fe(St,kt,Ft,At,ft){for(var pt=St.children,Dt,Ut=-1,$t=pt.length,re=St.value&&(ft-Ft)/St.value;++Ut<$t;)Dt=pt[Ut],Dt.x0=kt,Dt.x1=At,Dt.y0=Ft,Dt.y1=Ft+=Dt.value*re}var pe=(1+Math.sqrt(5))/2;function Te(St,kt,Ft,At,ft,pt){for(var Dt=[],Ut=kt.children,$t,re,Be=0,We=0,me=Ut.length,Se,je,vr=kt.value,he,Ye,Qe,mr,ir,ve,ne;Be<me;){Se=ft-Ft,je=pt-At;do he=Ut[We++].value;while(!he&&We<me);for(Ye=Qe=he,ve=Math.max(je/Se,Se/je)/(vr*St),ne=he*he*ve,ir=Math.max(Qe/ne,ne/Ye);We<me;++We){if(he+=re=Ut[We].value,re<Ye&&(Ye=re),re>Qe&&(Qe=re),ne=he*he*ve,mr=Math.max(Qe/ne,ne/Ye),mr>ir){he-=re;break}ir=mr}Dt.push($t={value:he,dice:Se<je,children:Ut.slice(Be,We)}),$t.dice?mt($t,Ft,At,ft,vr?At+=je*he/vr:pt):fe($t,Ft,At,vr?Ft+=Se*he/vr:ft,pt),vr-=he,Be=We}return Dt}var Qt=function St(kt){function Ft(At,ft,pt,Dt,Ut){Te(kt,At,ft,pt,Dt,Ut)}return Ft.ratio=function(At){return St((At=+At)>1?At:1)},Ft}(pe);function Pt(){var St=Qt,kt=!1,Ft=1,At=1,ft=[0],pt=J,Dt=J,Ut=J,$t=J,re=J;function Be(me){return me.x0=me.y0=0,me.x1=Ft,me.y1=At,me.eachBefore(We),ft=[0],kt&&me.eachBefore(dt),me}function We(me){var Se=ft[me.depth],je=me.x0+Se,vr=me.y0+Se,he=me.x1-Se,Ye=me.y1-Se;he<je&&(je=he=(je+he)/2),Ye<vr&&(vr=Ye=(vr+Ye)/2),me.x0=je,me.y0=vr,me.x1=he,me.y1=Ye,me.children&&(Se=ft[me.depth+1]=pt(me)/2,je+=re(me)-Se,vr+=Dt(me)-Se,he-=Ut(me)-Se,Ye-=$t(me)-Se,he<je&&(je=he=(je+he)/2),Ye<vr&&(vr=Ye=(vr+Ye)/2),St(me,je,vr,he,Ye))}return Be.round=function(me){return arguments.length?(kt=!!me,Be):kt},Be.size=function(me){return arguments.length?(Ft=+me[0],At=+me[1],Be):[Ft,At]},Be.tile=function(me){return arguments.length?(St=W(me),Be):St},Be.padding=function(me){return arguments.length?Be.paddingInner(me).paddingOuter(me):Be.paddingInner()},Be.paddingInner=function(me){return arguments.length?(pt=typeof me=="function"?me:it(+me),Be):pt},Be.paddingOuter=function(me){return arguments.length?Be.paddingTop(me).paddingRight(me).paddingBottom(me).paddingLeft(me):Be.paddingTop()},Be.paddingTop=function(me){return arguments.length?(Dt=typeof me=="function"?me:it(+me),Be):Dt},Be.paddingRight=function(me){return arguments.length?(Ut=typeof me=="function"?me:it(+me),Be):Ut},Be.paddingBottom=function(me){return arguments.length?($t=typeof me=="function"?me:it(+me),Be):$t},Be.paddingLeft=function(me){return arguments.length?(re=typeof me=="function"?me:it(+me),Be):re},Be}function Ot(St,kt,Ft,At,ft){var pt=St.children,Dt,Ut=pt.length,$t,re=new Array(Ut+1);for(re[0]=$t=Dt=0;Dt<Ut;++Dt)re[Dt+1]=$t+=pt[Dt].value;Be(0,Ut,St.value,kt,Ft,At,ft);function Be(We,me,Se,je,vr,he,Ye){if(We>=me-1){var Qe=pt[We];Qe.x0=je,Qe.y0=vr,Qe.x1=he,Qe.y1=Ye;return}for(var mr=re[We],ir=Se/2+mr,ve=We+1,ne=me-1;ve<ne;){var ge=ve+ne>>>1;re[ge]<ir?ve=ge+1:ne=ge}ir-re[ve-1]<re[ve]-ir&&We+1<ve&&--ve;var Ae=re[ve]-mr,Re=Se-Ae;if(he-je>Ye-vr){var ze=(je*Re+he*Ae)/Se;Be(We,ve,Ae,je,vr,ze,Ye),Be(ve,me,Re,ze,vr,he,Ye)}else{var ke=(vr*Re+Ye*Ae)/Se;Be(We,ve,Ae,je,vr,he,ke),Be(ve,me,Re,je,ke,he,Ye)}}}function Nt(St,kt,Ft,At,ft){(St.depth&1?fe:mt)(St,kt,Ft,At,ft)}var Ht=function St(kt){function Ft(At,ft,pt,Dt,Ut){if(($t=At._squarify)&&$t.ratio===kt)for(var $t,re,Be,We,me=-1,Se,je=$t.length,vr=At.value;++me<je;){for(re=$t[me],Be=re.children,We=re.value=0,Se=Be.length;We<Se;++We)re.value+=Be[We].value;re.dice?mt(re,ft,pt,Dt,pt+=(Ut-pt)*re.value/vr):fe(re,ft,pt,ft+=(Dt-ft)*re.value/vr,Ut),vr-=re.value}else At._squarify=$t=Te(kt,At,ft,pt,Dt,Ut),$t.ratio=kt}return Ft.ratio=function(At){return St((At=+At)>1?At:1)},Ft}(pe)},10132:function(j,V,t){t.d(V,{ak:function(){return h}});var b=Math.PI,P=2*b,o=1e-6,L=P-o;function A(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function v(){return new A}A.prototype=v.prototype={constructor:A,moveTo:function(T,c){this._+="M"+(this._x0=this._x1=+T)+","+(this._y0=this._y1=+c)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(T,c){this._+="L"+(this._x1=+T)+","+(this._y1=+c)},quadraticCurveTo:function(T,c,i,d){this._+="Q"+ +T+","+ +c+","+(this._x1=+i)+","+(this._y1=+d)},bezierCurveTo:function(T,c,i,d,x,w){this._+="C"+ +T+","+ +c+","+ +i+","+ +d+","+(this._x1=+x)+","+(this._y1=+w)},arcTo:function(T,c,i,d,x){T=+T,c=+c,i=+i,d=+d,x=+x;var w=this._x1,C=this._y1,y=i-T,S=d-c,M=w-T,a=C-c,E=M*M+a*a;if(x<0)throw new Error("negative radius: "+x);if(this._x1===null)this._+="M"+(this._x1=T)+","+(this._y1=c);else if(E>o)if(!(Math.abs(a*y-S*M)>o)||!x)this._+="L"+(this._x1=T)+","+(this._y1=c);else{var m=i-w,k=d-C,I=y*y+S*S,O=m*m+k*k,z=Math.sqrt(I),B=Math.sqrt(E),F=x*Math.tan((b-Math.acos((I+E-O)/(2*z*B)))/2),_=F/B,N=F/z;Math.abs(_-1)>o&&(this._+="L"+(T+_*M)+","+(c+_*a)),this._+="A"+x+","+x+",0,0,"+ +(a*m>M*k)+","+(this._x1=T+N*y)+","+(this._y1=c+N*S)}},arc:function(T,c,i,d,x,w){T=+T,c=+c,i=+i,w=!!w;var C=i*Math.cos(d),y=i*Math.sin(d),S=T+C,M=c+y,a=1^w,E=w?d-x:x-d;if(i<0)throw new Error("negative radius: "+i);this._x1===null?this._+="M"+S+","+M:(Math.abs(this._x1-S)>o||Math.abs(this._y1-M)>o)&&(this._+="L"+S+","+M),i&&(E<0&&(E=E%P+P),E>L?this._+="A"+i+","+i+",0,1,"+a+","+(T-C)+","+(c-y)+"A"+i+","+i+",0,1,"+a+","+(this._x1=S)+","+(this._y1=M):E>o&&(this._+="A"+i+","+i+",0,"+ +(E>=b)+","+a+","+(this._x1=T+i*Math.cos(x))+","+(this._y1=c+i*Math.sin(x))))},rect:function(T,c,i,d){this._+="M"+(this._x0=this._x1=+T)+","+(this._y0=this._y1=+c)+"h"+ +i+"v"+ +d+"h"+-i+"Z"},toString:function(){return this._}};var p=v,r=Array.prototype.slice;function e(T){return function(){return T}}function s(T){return T[0]}function n(T){return T[1]}function l(T){return T.source}function f(T){return T.target}function u(T){var c=l,i=f,d=s,x=n,w=null;function C(){var y,S=r.call(arguments),M=c.apply(this,S),a=i.apply(this,S);if(w||(w=y=p()),T(w,+d.apply(this,(S[0]=M,S)),+x.apply(this,S),+d.apply(this,(S[0]=a,S)),+x.apply(this,S)),y)return w=null,y+""||null}return C.source=function(y){return arguments.length?(c=y,C):c},C.target=function(y){return arguments.length?(i=y,C):i},C.x=function(y){return arguments.length?(d=typeof y=="function"?y:e(+y),C):d},C.y=function(y){return arguments.length?(x=typeof y=="function"?y:e(+y),C):x},C.context=function(y){return arguments.length?(w=y??null,C):w},C}function g(T,c,i,d,x){T.moveTo(c,i),T.bezierCurveTo(c=(c+d)/2,i,c,x,d,x)}function h(){return u(g)}},94336:function(j,V,t){t.d(V,{Yn:function(){return Ot},m_:function(){return s},E9:function(){return Nt}});var b=t(8208),P=t(58931),o=t(46192),L=t(68936),A=t(32171),v=t(53528);function p(St){if(0<=St.y&&St.y<100){var kt=new Date(-1,St.m,St.d,St.H,St.M,St.S,St.L);return kt.setFullYear(St.y),kt}return new Date(St.y,St.m,St.d,St.H,St.M,St.S,St.L)}function r(St){if(0<=St.y&&St.y<100){var kt=new Date(Date.UTC(-1,St.m,St.d,St.H,St.M,St.S,St.L));return kt.setUTCFullYear(St.y),kt}return new Date(Date.UTC(St.y,St.m,St.d,St.H,St.M,St.S,St.L))}function e(St,kt,Ft){return{y:St,m:kt,d:Ft,H:0,M:0,S:0,L:0}}function s(St){var kt=St.dateTime,Ft=St.date,At=St.time,ft=St.periods,pt=St.days,Dt=St.shortDays,Ut=St.months,$t=St.shortMonths,re=T(ft),Be=c(ft),We=T(pt),me=c(pt),Se=T(Dt),je=c(Dt),vr=T(Ut),he=c(Ut),Ye=T($t),Qe=c($t),mr={a:fr,A:Lr,b:xr,B:Yt,c:null,d:X,e:X,f:Z,H:$,I:et,j:ot,L:nt,m:Q,M:W,p:Jt,q:qe,Q:Te,s:Qt,S:J,u:it,U:K,V:H,w:at,W:tt,x:null,X:null,y:lt,Y:dt,Z:mt,"%":pe},ir={a:tr,A:Ge,b:Ee,B:Xe,c:null,d:gt,e:gt,f:Ct,H:Mt,I:Lt,j:zt,L:xt,m:wt,M:Rt,p:rr,q:Je,Q:Te,s:Qt,S:Tt,u:Bt,U:Gt,V:te,w:Wt,W:jt,x:null,X:null,y:ie,Y:ue,Z:fe,"%":pe},ve={a:ze,A:ke,b:_e,B:Ke,c:hr,d:m,e:m,f:F,H:I,I,j:k,L:B,m:E,M:O,p:Re,q:a,Q:N,s:G,S:z,u:d,U:x,V:w,w:i,W:C,x:cr,X:dr,y:S,Y:y,Z:M,"%":_};mr.x=ne(Ft,mr),mr.X=ne(At,mr),mr.c=ne(kt,mr),ir.x=ne(Ft,ir),ir.X=ne(At,ir),ir.c=ne(kt,ir);function ne(He,yr){return function(Ir){var Tr=[],vn=-1,Or=0,En=He.length,nn,gr,Pr;for(Ir instanceof Date||(Ir=new Date(+Ir));++vn<En;)He.charCodeAt(vn)===37&&(Tr.push(He.slice(Or,vn)),(gr=n[nn=He.charAt(++vn)])!=null?nn=He.charAt(++vn):gr=nn==="e"?" ":"0",(Pr=yr[nn])&&(nn=Pr(Ir,gr)),Tr.push(nn),Or=vn+1);return Tr.push(He.slice(Or,vn)),Tr.join("")}}function ge(He,yr){return function(Ir){var Tr=e(1900,void 0,1),vn=Ae(Tr,He,Ir+="",0),Or,En;if(vn!=Ir.length)return null;if("Q"in Tr)return new Date(Tr.Q);if("s"in Tr)return new Date(Tr.s*1e3+("L"in Tr?Tr.L:0));if(yr&&!("Z"in Tr)&&(Tr.Z=0),"p"in Tr&&(Tr.H=Tr.H%12+Tr.p*12),Tr.m===void 0&&(Tr.m="q"in Tr?Tr.q:0),"V"in Tr){if(Tr.V<1||Tr.V>53)return null;"w"in Tr||(Tr.w=1),"Z"in Tr?(Or=r(e(Tr.y,0,1)),En=Or.getUTCDay(),Or=En>4||En===0?b.ot.ceil(Or):(0,b.ot)(Or),Or=P.c.offset(Or,(Tr.V-1)*7),Tr.y=Or.getUTCFullYear(),Tr.m=Or.getUTCMonth(),Tr.d=Or.getUTCDate()+(Tr.w+6)%7):(Or=p(e(Tr.y,0,1)),En=Or.getDay(),Or=En>4||En===0?o.qT.ceil(Or):(0,o.qT)(Or),Or=L.c.offset(Or,(Tr.V-1)*7),Tr.y=Or.getFullYear(),Tr.m=Or.getMonth(),Tr.d=Or.getDate()+(Tr.w+6)%7)}else("W"in Tr||"U"in Tr)&&("w"in Tr||(Tr.w="u"in Tr?Tr.u%7:"W"in Tr?1:0),En="Z"in Tr?r(e(Tr.y,0,1)).getUTCDay():p(e(Tr.y,0,1)).getDay(),Tr.m=0,Tr.d="W"in Tr?(Tr.w+6)%7+Tr.W*7-(En+5)%7:Tr.w+Tr.U*7-(En+6)%7);return"Z"in Tr?(Tr.H+=Tr.Z/100|0,Tr.M+=Tr.Z%100,r(Tr)):p(Tr)}}function Ae(He,yr,Ir,Tr){for(var vn=0,Or=yr.length,En=Ir.length,nn,gr;vn<Or;){if(Tr>=En)return-1;if(nn=yr.charCodeAt(vn++),nn===37){if(nn=yr.charAt(vn++),gr=ve[nn in n?yr.charAt(vn++):nn],!gr||(Tr=gr(He,Ir,Tr))<0)return-1}else if(nn!=Ir.charCodeAt(Tr++))return-1}return Tr}function Re(He,yr,Ir){var Tr=re.exec(yr.slice(Ir));return Tr?(He.p=Be[Tr[0].toLowerCase()],Ir+Tr[0].length):-1}function ze(He,yr,Ir){var Tr=Se.exec(yr.slice(Ir));return Tr?(He.w=je[Tr[0].toLowerCase()],Ir+Tr[0].length):-1}function ke(He,yr,Ir){var Tr=We.exec(yr.slice(Ir));return Tr?(He.w=me[Tr[0].toLowerCase()],Ir+Tr[0].length):-1}function _e(He,yr,Ir){var Tr=Ye.exec(yr.slice(Ir));return Tr?(He.m=Qe[Tr[0].toLowerCase()],Ir+Tr[0].length):-1}function Ke(He,yr,Ir){var Tr=vr.exec(yr.slice(Ir));return Tr?(He.m=he[Tr[0].toLowerCase()],Ir+Tr[0].length):-1}function hr(He,yr,Ir){return Ae(He,kt,yr,Ir)}function cr(He,yr,Ir){return Ae(He,Ft,yr,Ir)}function dr(He,yr,Ir){return Ae(He,At,yr,Ir)}function fr(He){return Dt[He.getDay()]}function Lr(He){return pt[He.getDay()]}function xr(He){return $t[He.getMonth()]}function Yt(He){return Ut[He.getMonth()]}function Jt(He){return ft[+(He.getHours()>=12)]}function qe(He){return 1+~~(He.getMonth()/3)}function tr(He){return Dt[He.getUTCDay()]}function Ge(He){return pt[He.getUTCDay()]}function Ee(He){return $t[He.getUTCMonth()]}function Xe(He){return Ut[He.getUTCMonth()]}function rr(He){return ft[+(He.getUTCHours()>=12)]}function Je(He){return 1+~~(He.getUTCMonth()/3)}return{format:function(He){var yr=ne(He+="",mr);return yr.toString=function(){return He},yr},parse:function(He){var yr=ge(He+="",!1);return yr.toString=function(){return He},yr},utcFormat:function(He){var yr=ne(He+="",ir);return yr.toString=function(){return He},yr},utcParse:function(He){var yr=ge(He+="",!0);return yr.toString=function(){return He},yr}}}var n={"-":"",_:" ",0:"0"},l=/^\s*\d+/,f=/^%/,u=/[\\^$*+?|[\]().{}]/g;function g(St,kt,Ft){var At=St<0?"-":"",ft=(At?-St:St)+"",pt=ft.length;return At+(pt<Ft?new Array(Ft-pt+1).join(kt)+ft:ft)}function h(St){return St.replace(u,"\\$&")}function T(St){return new RegExp("^(?:"+St.map(h).join("|")+")","i")}function c(St){for(var kt={},Ft=-1,At=St.length;++Ft<At;)kt[St[Ft].toLowerCase()]=Ft;return kt}function i(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+1));return At?(St.w=+At[0],Ft+At[0].length):-1}function d(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+1));return At?(St.u=+At[0],Ft+At[0].length):-1}function x(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.U=+At[0],Ft+At[0].length):-1}function w(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.V=+At[0],Ft+At[0].length):-1}function C(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.W=+At[0],Ft+At[0].length):-1}function y(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+4));return At?(St.y=+At[0],Ft+At[0].length):-1}function S(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.y=+At[0]+(+At[0]>68?1900:2e3),Ft+At[0].length):-1}function M(St,kt,Ft){var At=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(kt.slice(Ft,Ft+6));return At?(St.Z=At[1]?0:-(At[2]+(At[3]||"00")),Ft+At[0].length):-1}function a(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+1));return At?(St.q=At[0]*3-3,Ft+At[0].length):-1}function E(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.m=At[0]-1,Ft+At[0].length):-1}function m(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.d=+At[0],Ft+At[0].length):-1}function k(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+3));return At?(St.m=0,St.d=+At[0],Ft+At[0].length):-1}function I(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.H=+At[0],Ft+At[0].length):-1}function O(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.M=+At[0],Ft+At[0].length):-1}function z(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+2));return At?(St.S=+At[0],Ft+At[0].length):-1}function B(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+3));return At?(St.L=+At[0],Ft+At[0].length):-1}function F(St,kt,Ft){var At=l.exec(kt.slice(Ft,Ft+6));return At?(St.L=Math.floor(At[0]/1e3),Ft+At[0].length):-1}function _(St,kt,Ft){var At=f.exec(kt.slice(Ft,Ft+1));return At?Ft+At[0].length:-1}function N(St,kt,Ft){var At=l.exec(kt.slice(Ft));return At?(St.Q=+At[0],Ft+At[0].length):-1}function G(St,kt,Ft){var At=l.exec(kt.slice(Ft));return At?(St.s=+At[0],Ft+At[0].length):-1}function X(St,kt){return g(St.getDate(),kt,2)}function $(St,kt){return g(St.getHours(),kt,2)}function et(St,kt){return g(St.getHours()%12||12,kt,2)}function ot(St,kt){return g(1+L.c.count((0,A.c)(St),St),kt,3)}function nt(St,kt){return g(St.getMilliseconds(),kt,3)}function Z(St,kt){return nt(St,kt)+"000"}function Q(St,kt){return g(St.getMonth()+1,kt,2)}function W(St,kt){return g(St.getMinutes(),kt,2)}function J(St,kt){return g(St.getSeconds(),kt,2)}function it(St){var kt=St.getDay();return kt===0?7:kt}function K(St,kt){return g(o.uU.count((0,A.c)(St)-1,St),kt,2)}function H(St,kt){var Ft=St.getDay();return St=Ft>=4||Ft===0?(0,o.kD)(St):o.kD.ceil(St),g(o.kD.count((0,A.c)(St),St)+((0,A.c)(St).getDay()===4),kt,2)}function at(St){return St.getDay()}function tt(St,kt){return g(o.qT.count((0,A.c)(St)-1,St),kt,2)}function lt(St,kt){return g(St.getFullYear()%100,kt,2)}function dt(St,kt){return g(St.getFullYear()%1e4,kt,4)}function mt(St){var kt=St.getTimezoneOffset();return(kt>0?"-":(kt*=-1,"+"))+g(kt/60|0,"0",2)+g(kt%60,"0",2)}function gt(St,kt){return g(St.getUTCDate(),kt,2)}function Mt(St,kt){return g(St.getUTCHours(),kt,2)}function Lt(St,kt){return g(St.getUTCHours()%12||12,kt,2)}function zt(St,kt){return g(1+P.c.count((0,v.c)(St),St),kt,3)}function xt(St,kt){return g(St.getUTCMilliseconds(),kt,3)}function Ct(St,kt){return xt(St,kt)+"000"}function wt(St,kt){return g(St.getUTCMonth()+1,kt,2)}function Rt(St,kt){return g(St.getUTCMinutes(),kt,2)}function Tt(St,kt){return g(St.getUTCSeconds(),kt,2)}function Bt(St){var kt=St.getUTCDay();return kt===0?7:kt}function Gt(St,kt){return g(b.EV.count((0,v.c)(St)-1,St),kt,2)}function te(St,kt){var Ft=St.getUTCDay();return St=Ft>=4||Ft===0?(0,b.yA)(St):b.yA.ceil(St),g(b.yA.count((0,v.c)(St),St)+((0,v.c)(St).getUTCDay()===4),kt,2)}function Wt(St){return St.getUTCDay()}function jt(St,kt){return g(b.ot.count((0,v.c)(St)-1,St),kt,2)}function ie(St,kt){return g(St.getUTCFullYear()%100,kt,2)}function ue(St,kt){return g(St.getUTCFullYear()%1e4,kt,4)}function fe(){return"+0000"}function pe(){return"%"}function Te(St){return+St}function Qt(St){return Math.floor(+St/1e3)}var Pt,Ot,Nt;Ht({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ht(St){return Pt=s(St),Ot=Pt.format,Pt.parse,Nt=Pt.utcFormat,Pt.utcParse,Pt}},68936:function(j,V,t){t.d(V,{m:function(){return L}});var b=t(81628),P=t(69792),o=(0,b.c)(function(A){A.setHours(0,0,0,0)},function(A,v){A.setDate(A.getDate()+v)},function(A,v){return(v-A-(v.getTimezoneOffset()-A.getTimezoneOffset())*P.iy)/P.SK},function(A){return A.getDate()-1});V.c=o;var L=o.range},69792:function(j,V,t){t.d(V,{KK:function(){return A},SK:function(){return L},cg:function(){return o},iy:function(){return P},yc:function(){return b}});var b=1e3,P=6e4,o=36e5,L=864e5,A=6048e5},73220:function(j,V,t){t.r(V),t.d(V,{timeDay:function(){return g.c},timeDays:function(){return g.m},timeFriday:function(){return h.iB},timeFridays:function(){return h.sJ},timeHour:function(){return f},timeHours:function(){return u},timeInterval:function(){return b.c},timeMillisecond:function(){return o},timeMilliseconds:function(){return L},timeMinute:function(){return s},timeMinutes:function(){return n},timeMonday:function(){return h.qT},timeMondays:function(){return h.QP},timeMonth:function(){return c},timeMonths:function(){return i},timeSaturday:function(){return h.Wc},timeSaturdays:function(){return h.aI},timeSecond:function(){return p},timeSeconds:function(){return r},timeSunday:function(){return h.uU},timeSundays:function(){return h.Ab},timeThursday:function(){return h.kD},timeThursdays:function(){return h.eC},timeTuesday:function(){return h.Mf},timeTuesdays:function(){return h.Oc},timeWednesday:function(){return h.eg},timeWednesdays:function(){return h.sn},timeWeek:function(){return h.uU},timeWeeks:function(){return h.Ab},timeYear:function(){return d.c},timeYears:function(){return d.Q},utcDay:function(){return a.c},utcDays:function(){return a.o},utcFriday:function(){return E.od},utcFridays:function(){return E.iG},utcHour:function(){return S},utcHours:function(){return M},utcMillisecond:function(){return o},utcMilliseconds:function(){return L},utcMinute:function(){return w},utcMinutes:function(){return C},utcMonday:function(){return E.ot},utcMondays:function(){return E.iO},utcMonth:function(){return k},utcMonths:function(){return I},utcSaturday:function(){return E.Ad},utcSaturdays:function(){return E.K8},utcSecond:function(){return p},utcSeconds:function(){return r},utcSunday:function(){return E.EV},utcSundays:function(){return E.Wq},utcThursday:function(){return E.yA},utcThursdays:function(){return E.ob},utcTuesday:function(){return E.sG},utcTuesdays:function(){return E.kl},utcWednesday:function(){return E._6},utcWednesdays:function(){return E.W_},utcWeek:function(){return E.EV},utcWeeks:function(){return E.Wq},utcYear:function(){return O.c},utcYears:function(){return O.i}});var b=t(81628),P=(0,b.c)(function(){},function(z,B){z.setTime(+z+B)},function(z,B){return B-z});P.every=function(z){return z=Math.floor(z),!isFinite(z)||!(z>0)?null:z>1?(0,b.c)(function(B){B.setTime(Math.floor(B/z)*z)},function(B,F){B.setTime(+B+F*z)},function(B,F){return(F-B)/z}):P};var o=P,L=P.range,A=t(69792),v=(0,b.c)(function(z){z.setTime(z-z.getMilliseconds())},function(z,B){z.setTime(+z+B*A.yc)},function(z,B){return(B-z)/A.yc},function(z){return z.getUTCSeconds()}),p=v,r=v.range,e=(0,b.c)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*A.yc)},function(z,B){z.setTime(+z+B*A.iy)},function(z,B){return(B-z)/A.iy},function(z){return z.getMinutes()}),s=e,n=e.range,l=(0,b.c)(function(z){z.setTime(z-z.getMilliseconds()-z.getSeconds()*A.yc-z.getMinutes()*A.iy)},function(z,B){z.setTime(+z+B*A.cg)},function(z,B){return(B-z)/A.cg},function(z){return z.getHours()}),f=l,u=l.range,g=t(68936),h=t(46192),T=(0,b.c)(function(z){z.setDate(1),z.setHours(0,0,0,0)},function(z,B){z.setMonth(z.getMonth()+B)},function(z,B){return B.getMonth()-z.getMonth()+(B.getFullYear()-z.getFullYear())*12},function(z){return z.getMonth()}),c=T,i=T.range,d=t(32171),x=(0,b.c)(function(z){z.setUTCSeconds(0,0)},function(z,B){z.setTime(+z+B*A.iy)},function(z,B){return(B-z)/A.iy},function(z){return z.getUTCMinutes()}),w=x,C=x.range,y=(0,b.c)(function(z){z.setUTCMinutes(0,0,0)},function(z,B){z.setTime(+z+B*A.cg)},function(z,B){return(B-z)/A.cg},function(z){return z.getUTCHours()}),S=y,M=y.range,a=t(58931),E=t(8208),m=(0,b.c)(function(z){z.setUTCDate(1),z.setUTCHours(0,0,0,0)},function(z,B){z.setUTCMonth(z.getUTCMonth()+B)},function(z,B){return B.getUTCMonth()-z.getUTCMonth()+(B.getUTCFullYear()-z.getUTCFullYear())*12},function(z){return z.getUTCMonth()}),k=m,I=m.range,O=t(53528)},81628:function(j,V,t){t.d(V,{c:function(){return o}});var b=new Date,P=new Date;function o(L,A,v,p){function r(e){return L(e=arguments.length===0?new Date:new Date(+e)),e}return r.floor=function(e){return L(e=new Date(+e)),e},r.ceil=function(e){return L(e=new Date(e-1)),A(e,1),L(e),e},r.round=function(e){var s=r(e),n=r.ceil(e);return e-s<n-e?s:n},r.offset=function(e,s){return A(e=new Date(+e),s==null?1:Math.floor(s)),e},r.range=function(e,s,n){var l=[],f;if(e=r.ceil(e),n=n==null?1:Math.floor(n),!(e<s)||!(n>0))return l;do l.push(f=new Date(+e)),A(e,n),L(e);while(f<e&&e<s);return l},r.filter=function(e){return o(function(s){if(s>=s)for(;L(s),!e(s);)s.setTime(s-1)},function(s,n){if(s>=s)if(n<0)for(;++n<=0;)for(;A(s,-1),!e(s););else for(;--n>=0;)for(;A(s,1),!e(s););})},v&&(r.count=function(e,s){return b.setTime(+e),P.setTime(+s),L(b),L(P),Math.floor(v(b,P))},r.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?r.filter(p?function(s){return p(s)%e===0}:function(s){return r.count(0,s)%e===0}):r}),r}},58931:function(j,V,t){t.d(V,{o:function(){return L}});var b=t(81628),P=t(69792),o=(0,b.c)(function(A){A.setUTCHours(0,0,0,0)},function(A,v){A.setUTCDate(A.getUTCDate()+v)},function(A,v){return(v-A)/P.SK},function(A){return A.getUTCDate()-1});V.c=o;var L=o.range},8208:function(j,V,t){t.d(V,{Ad:function(){return s},EV:function(){return L},K8:function(){return T},W_:function(){return u},Wq:function(){return n},_6:function(){return p},iG:function(){return h},iO:function(){return l},kl:function(){return f},ob:function(){return g},od:function(){return e},ot:function(){return A},sG:function(){return v},yA:function(){return r}});var b=t(81628),P=t(69792);function o(c){return(0,b.c)(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-c)%7),i.setUTCHours(0,0,0,0)},function(i,d){i.setUTCDate(i.getUTCDate()+d*7)},function(i,d){return(d-i)/P.KK})}var L=o(0),A=o(1),v=o(2),p=o(3),r=o(4),e=o(5),s=o(6),n=L.range,l=A.range,f=v.range,u=p.range,g=r.range,h=e.range,T=s.range},53528:function(j,V,t){t.d(V,{i:function(){return o}});var b=t(81628),P=(0,b.c)(function(L){L.setUTCMonth(0,1),L.setUTCHours(0,0,0,0)},function(L,A){L.setUTCFullYear(L.getUTCFullYear()+A)},function(L,A){return A.getUTCFullYear()-L.getUTCFullYear()},function(L){return L.getUTCFullYear()});P.every=function(L){return!isFinite(L=Math.floor(L))||!(L>0)?null:(0,b.c)(function(A){A.setUTCFullYear(Math.floor(A.getUTCFullYear()/L)*L),A.setUTCMonth(0,1),A.setUTCHours(0,0,0,0)},function(A,v){A.setUTCFullYear(A.getUTCFullYear()+v*L)})},V.c=P;var o=P.range},46192:function(j,V,t){t.d(V,{Ab:function(){return n},Mf:function(){return v},Oc:function(){return f},QP:function(){return l},Wc:function(){return s},aI:function(){return T},eC:function(){return g},eg:function(){return p},iB:function(){return e},kD:function(){return r},qT:function(){return A},sJ:function(){return h},sn:function(){return u},uU:function(){return L}});var b=t(81628),P=t(69792);function o(c){return(0,b.c)(function(i){i.setDate(i.getDate()-(i.getDay()+7-c)%7),i.setHours(0,0,0,0)},function(i,d){i.setDate(i.getDate()+d*7)},function(i,d){return(d-i-(d.getTimezoneOffset()-i.getTimezoneOffset())*P.iy)/P.KK})}var L=o(0),A=o(1),v=o(2),p=o(3),r=o(4),e=o(5),s=o(6),n=L.range,l=A.range,f=v.range,u=p.range,g=r.range,h=e.range,T=s.range},32171:function(j,V,t){t.d(V,{Q:function(){return o}});var b=t(81628),P=(0,b.c)(function(L){L.setMonth(0,1),L.setHours(0,0,0,0)},function(L,A){L.setFullYear(L.getFullYear()+A)},function(L,A){return A.getFullYear()-L.getFullYear()},function(L){return L.getFullYear()});P.every=function(L){return!isFinite(L=Math.floor(L))||!(L>0)?null:(0,b.c)(function(A){A.setFullYear(Math.floor(A.getFullYear()/L)*L),A.setMonth(0,1),A.setHours(0,0,0,0)},function(A,v){A.setFullYear(A.getFullYear()+v*L)})},V.c=P;var o=P.range},64348:function(j,V,t){var b=t(39640)(),P=t(53664),o=b&&P("%Object.defineProperty%",!0);if(o)try{o({},"a",{value:1})}catch{o=!1}var L=P("%SyntaxError%"),A=P("%TypeError%"),v=t(2304);j.exports=function(r,e,s){if(!r||typeof r!="object"&&typeof r!="function")throw new A("`obj` must be an object or a function`");if(typeof e!="string"&&typeof e!="symbol")throw new A("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new A("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new A("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new A("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new A("`loose`, if provided, must be a boolean");var n=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,f=arguments.length>5?arguments[5]:null,u=arguments.length>6?arguments[6]:!1,g=!!v&&v(r,e);if(o)o(r,e,{configurable:f===null&&g?g.configurable:!f,enumerable:n===null&&g?g.enumerable:!n,value:s,writable:l===null&&g?g.writable:!l});else if(u||!n&&!l&&!f)r[e]=s;else throw new L("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")}},81288:function(j,V,t){var b=t(41820),P=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",o=Object.prototype.toString,L=Array.prototype.concat,A=Object.defineProperty,v=function(n){return typeof n=="function"&&o.call(n)==="[object Function]"},p=t(39640)(),r=A&&p,e=function(n,l,f,u){if(l in n){if(u===!0){if(n[l]===f)return}else if(!v(u)||!u())return}r?A(n,l,{configurable:!0,enumerable:!1,value:f,writable:!0}):n[l]=f},s=function(n,l){var f=arguments.length>2?arguments[2]:{},u=b(l);P&&(u=L.call(u,Object.getOwnPropertySymbols(l)));for(var g=0;g<u.length;g+=1)e(n,u[g],l[u[g]],f[u[g]])};s.supportsDescriptors=!!r,j.exports=s},31264:function(j){j.exports=function(){for(var V=0;V<arguments.length;V++)if(arguments[V]!==void 0)return arguments[V]}},63768:function(j){j.exports=P;var V=P.canvas=document.createElement("canvas"),t=V.getContext("2d"),b=o([32,126]);P.createPairs=o,P.ascii=b;function P(L,A){Array.isArray(L)&&(L=L.join(", "));var v={},p,r=16,e=.05;A&&(A.length===2&&typeof A[0]=="number"?p=o(A):Array.isArray(A)?p=A:(A.o?p=o(A.o):A.pairs&&(p=A.pairs),A.fontSize&&(r=A.fontSize),A.threshold!=null&&(e=A.threshold))),p||(p=b),t.font=r+"px "+L;for(var s=0;s<p.length;s++){var n=p[s],l=t.measureText(n[0]).width+t.measureText(n[1]).width,f=t.measureText(n).width;if(Math.abs(l-f)>r*e){var u=(f-l)/r;v[n]=u*1e3}}return v}function o(L){for(var A=[],v=L[0];v<=L[1];v++)for(var p=String.fromCharCode(v),r=L[0];r<L[1];r++){var e=String.fromCharCode(r),s=p+e;A.push(s)}return A}},22235:function(j,V,t){var b=t(49972),P=t(48816),o={M:"moveTo",C:"bezierCurveTo"};j.exports=function(L,A){L.beginPath(),P(b(A)).forEach(function(v){var p=v[0],r=v.slice(1);L[o[p]].apply(L,r)}),L.closePath()}},72512:function(j){j.exports=function(V){switch(V){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},10352:function(j){function V(P,o,L){var A=P[L]|0;if(A<=0)return[];var v=new Array(A),p;if(L===P.length-1)for(p=0;p<A;++p)v[p]=o;else for(p=0;p<A;++p)v[p]=V(P,o,L+1);return v}function t(P,o){var L,A;for(L=new Array(P),A=0;A<P;++A)L[A]=o;return L}function b(P,o){switch(typeof o>"u"&&(o=0),typeof P){case"number":if(P>0)return t(P|0,o);break;case"object":if(typeof P.length=="number")return V(P,o,0);break}return[]}j.exports=b},28912:function(j){j.exports=V,j.exports.default=V;function V(I,O,z){z=z||2;var B=O&&O.length,F=B?O[0]*z:I.length,_=t(I,0,F,z,!0),N=[];if(!_||_.next===_.prev)return N;var G,X,$,et,ot,nt,Z;if(B&&(_=p(I,O,_,z)),I.length>80*z){G=$=I[0],X=et=I[1];for(var Q=z;Q<F;Q+=z)ot=I[Q],nt=I[Q+1],ot<G&&(G=ot),nt<X&&(X=nt),ot>$&&($=ot),nt>et&&(et=nt);Z=Math.max($-G,et-X),Z=Z!==0?1/Z:0}return P(_,N,z,G,X,Z),N}function t(I,O,z,B,F){var _,N;if(F===k(I,O,z,B)>0)for(_=O;_<z;_+=B)N=a(_,I[_],I[_+1],N);else for(_=z-B;_>=O;_-=B)N=a(_,I[_],I[_+1],N);return N&&i(N,N.next)&&(E(N),N=N.next),N}function b(I,O){if(!I)return I;O||(O=I);var z=I,B;do if(B=!1,!z.steiner&&(i(z,z.next)||c(z.prev,z,z.next)===0)){if(E(z),z=O=z.prev,z===z.next)break;B=!0}else z=z.next;while(B||z!==O);return O}function P(I,O,z,B,F,_,N){if(I){!N&&_&&l(I,B,F,_);for(var G=I,X,$;I.prev!==I.next;){if(X=I.prev,$=I.next,_?L(I,B,F,_):o(I)){O.push(X.i/z),O.push(I.i/z),O.push($.i/z),E(I),I=$.next,G=$.next;continue}if(I=$,I===G){N?N===1?(I=A(b(I),O,z),P(I,O,z,B,F,_,2)):N===2&&v(I,O,z,B,F,_):P(b(I),O,z,B,F,_,1);break}}}}function o(I){var O=I.prev,z=I,B=I.next;if(c(O,z,B)>=0)return!1;for(var F=I.next.next;F!==I.prev;){if(h(O.x,O.y,z.x,z.y,B.x,B.y,F.x,F.y)&&c(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function L(I,O,z,B){var F=I.prev,_=I,N=I.next;if(c(F,_,N)>=0)return!1;for(var G=F.x<_.x?F.x<N.x?F.x:N.x:_.x<N.x?_.x:N.x,X=F.y<_.y?F.y<N.y?F.y:N.y:_.y<N.y?_.y:N.y,$=F.x>_.x?F.x>N.x?F.x:N.x:_.x>N.x?_.x:N.x,et=F.y>_.y?F.y>N.y?F.y:N.y:_.y>N.y?_.y:N.y,ot=u(G,X,O,z,B),nt=u($,et,O,z,B),Z=I.prevZ,Q=I.nextZ;Z&&Z.z>=ot&&Q&&Q.z<=nt;){if(Z!==I.prev&&Z!==I.next&&h(F.x,F.y,_.x,_.y,N.x,N.y,Z.x,Z.y)&&c(Z.prev,Z,Z.next)>=0||(Z=Z.prevZ,Q!==I.prev&&Q!==I.next&&h(F.x,F.y,_.x,_.y,N.x,N.y,Q.x,Q.y)&&c(Q.prev,Q,Q.next)>=0))return!1;Q=Q.nextZ}for(;Z&&Z.z>=ot;){if(Z!==I.prev&&Z!==I.next&&h(F.x,F.y,_.x,_.y,N.x,N.y,Z.x,Z.y)&&c(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;Q&&Q.z<=nt;){if(Q!==I.prev&&Q!==I.next&&h(F.x,F.y,_.x,_.y,N.x,N.y,Q.x,Q.y)&&c(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function A(I,O,z){var B=I;do{var F=B.prev,_=B.next.next;!i(F,_)&&d(F,B,B.next,_)&&y(F,_)&&y(_,F)&&(O.push(F.i/z),O.push(B.i/z),O.push(_.i/z),E(B),E(B.next),B=I=_),B=B.next}while(B!==I);return b(B)}function v(I,O,z,B,F,_){var N=I;do{for(var G=N.next.next;G!==N.prev;){if(N.i!==G.i&&T(N,G)){var X=M(N,G);N=b(N,N.next),X=b(X,X.next),P(N,O,z,B,F,_),P(X,O,z,B,F,_);return}G=G.next}N=N.next}while(N!==I)}function p(I,O,z,B){var F=[],_,N,G,X,$;for(_=0,N=O.length;_<N;_++)G=O[_]*B,X=_<N-1?O[_+1]*B:I.length,$=t(I,G,X,B,!1),$===$.next&&($.steiner=!0),F.push(g($));for(F.sort(r),_=0;_<F.length;_++)e(F[_],z),z=b(z,z.next);return z}function r(I,O){return I.x-O.x}function e(I,O){if(O=s(I,O),O){var z=M(O,I);b(O,O.next),b(z,z.next)}}function s(I,O){var z=O,B=I.x,F=I.y,_=-1/0,N;do{if(F<=z.y&&F>=z.next.y&&z.next.y!==z.y){var G=z.x+(F-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(G<=B&&G>_){if(_=G,G===B){if(F===z.y)return z;if(F===z.next.y)return z.next}N=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!N)return null;if(B===_)return N;var X=N,$=N.x,et=N.y,ot=1/0,nt;z=N;do B>=z.x&&z.x>=$&&B!==z.x&&h(F<et?B:_,F,$,et,F<et?_:B,F,z.x,z.y)&&(nt=Math.abs(F-z.y)/(B-z.x),y(z,I)&&(nt<ot||nt===ot&&(z.x>N.x||z.x===N.x&&n(N,z)))&&(N=z,ot=nt)),z=z.next;while(z!==X);return N}function n(I,O){return c(I.prev,I,O.prev)<0&&c(O.next,I,I.next)<0}function l(I,O,z,B){var F=I;do F.z===null&&(F.z=u(F.x,F.y,O,z,B)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==I);F.prevZ.nextZ=null,F.prevZ=null,f(F)}function f(I){var O,z,B,F,_,N,G,X,$=1;do{for(z=I,I=null,_=null,N=0;z;){for(N++,B=z,G=0,O=0;O<$&&(G++,B=B.nextZ,!!B);O++);for(X=$;G>0||X>0&&B;)G!==0&&(X===0||!B||z.z<=B.z)?(F=z,z=z.nextZ,G--):(F=B,B=B.nextZ,X--),_?_.nextZ=F:I=F,F.prevZ=_,_=F;z=B}_.nextZ=null,$*=2}while(N>1);return I}function u(I,O,z,B,F){return I=32767*(I-z)*F,O=32767*(O-B)*F,I=(I|I<<8)&16711935,I=(I|I<<4)&252645135,I=(I|I<<2)&858993459,I=(I|I<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,I|O<<1}function g(I){var O=I,z=I;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==I);return z}function h(I,O,z,B,F,_,N,G){return(F-N)*(O-G)-(I-N)*(_-G)>=0&&(I-N)*(B-G)-(z-N)*(O-G)>=0&&(z-N)*(_-G)-(F-N)*(B-G)>=0}function T(I,O){return I.next.i!==O.i&&I.prev.i!==O.i&&!C(I,O)&&(y(I,O)&&y(O,I)&&S(I,O)&&(c(I.prev,I,O.prev)||c(I,O.prev,O))||i(I,O)&&c(I.prev,I,I.next)>0&&c(O.prev,O,O.next)>0)}function c(I,O,z){return(O.y-I.y)*(z.x-O.x)-(O.x-I.x)*(z.y-O.y)}function i(I,O){return I.x===O.x&&I.y===O.y}function d(I,O,z,B){var F=w(c(I,O,z)),_=w(c(I,O,B)),N=w(c(z,B,I)),G=w(c(z,B,O));return!!(F!==_&&N!==G||F===0&&x(I,z,O)||_===0&&x(I,B,O)||N===0&&x(z,I,B)||G===0&&x(z,O,B))}function x(I,O,z){return O.x<=Math.max(I.x,z.x)&&O.x>=Math.min(I.x,z.x)&&O.y<=Math.max(I.y,z.y)&&O.y>=Math.min(I.y,z.y)}function w(I){return I>0?1:I<0?-1:0}function C(I,O){var z=I;do{if(z.i!==I.i&&z.next.i!==I.i&&z.i!==O.i&&z.next.i!==O.i&&d(z,z.next,I,O))return!0;z=z.next}while(z!==I);return!1}function y(I,O){return c(I.prev,I,I.next)<0?c(I,O,I.next)>=0&&c(I,I.prev,O)>=0:c(I,O,I.prev)<0||c(I,I.next,O)<0}function S(I,O){var z=I,B=!1,F=(I.x+O.x)/2,_=(I.y+O.y)/2;do z.y>_!=z.next.y>_&&z.next.y!==z.y&&F<(z.next.x-z.x)*(_-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next;while(z!==I);return B}function M(I,O){var z=new m(I.i,I.x,I.y),B=new m(O.i,O.x,O.y),F=I.next,_=O.prev;return I.next=O,O.prev=I,z.next=F,F.prev=z,B.next=z,z.prev=B,_.next=B,B.prev=_,B}function a(I,O,z,B){var F=new m(I,O,z);return B?(F.next=B.next,F.prev=B,B.next.prev=F,B.next=F):(F.prev=F,F.next=F),F}function E(I){I.next.prev=I.prev,I.prev.next=I.next,I.prevZ&&(I.prevZ.nextZ=I.nextZ),I.nextZ&&(I.nextZ.prevZ=I.prevZ)}function m(I,O,z){this.i=I,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}V.deviation=function(I,O,z,B){var F=O&&O.length,_=F?O[0]*z:I.length,N=Math.abs(k(I,0,_,z));if(F)for(var G=0,X=O.length;G<X;G++){var $=O[G]*z,et=G<X-1?O[G+1]*z:I.length;N-=Math.abs(k(I,$,et,z))}var ot=0;for(G=0;G<B.length;G+=3){var nt=B[G]*z,Z=B[G+1]*z,Q=B[G+2]*z;ot+=Math.abs((I[nt]-I[Q])*(I[Z+1]-I[nt+1])-(I[nt]-I[Z])*(I[Q+1]-I[nt+1]))}return N===0&&ot===0?0:Math.abs((ot-N)/N)};function k(I,O,z,B){for(var F=0,_=O,N=z-B;_<z;_+=B)F+=(I[N]-I[_])*(I[_+1]+I[N+1]),N=_;return F}V.flatten=function(I){for(var O=I[0][0].length,z={vertices:[],holes:[],dimensions:O},B=0,F=0;F<I.length;F++){for(var _=0;_<I[F].length;_++)for(var N=0;N<O;N++)z.vertices.push(I[F][_][N]);F>0&&(B+=I[F-1].length,z.holes.push(B))}return z}},6688:function(j,V,t){var b=t(78484);j.exports=function(o,L){var A=[],v=[],p=[],r={},e=[],s;function n(x){p[x]=!1,r.hasOwnProperty(x)&&Object.keys(r[x]).forEach(function(w){delete r[x][w],p[w]&&n(w)})}function l(x){var w=!1;v.push(x),p[x]=!0;var C,y;for(C=0;C<e[x].length;C++)y=e[x][C],y===s?(f(s,v),w=!0):p[y]||(w=l(y));if(w)n(x);else for(C=0;C<e[x].length;C++){y=e[x][C];var S=r[y];S||(S={},r[y]=S),S[y]=!0}return v.pop(),w}function f(x,w){var C=[].concat(w).concat(x);L?L(l):A.push(C)}function u(x){for(var w=0;w<o.length;w++)w<x&&(o[w]=[]),o[w]=o[w].filter(function(C){return C>=x})}function g(x){u(x);for(var w=o,C=b(w),y=C.components.filter(function(I){return I.length>1}),S=1/0,M,a=0;a<y.length;a++)for(var E=0;E<y[a].length;E++)y[a][E]<S&&(S=y[a][E],M=a);var m=y[M];if(!m)return!1;var k=o.map(function(I,O){return m.indexOf(O)===-1?[]:I.filter(function(z){return m.indexOf(z)!==-1})});return{leastVertex:S,adjList:k}}s=0;for(var h=o.length;s<h;){var T=g(s);if(s=T.leastVertex,e=T.adjList,e){for(var c=0;c<e.length;c++)for(var i=0;i<e[c].length;i++){var d=e[c][i];p[+d]=!1,r[d]={}}l(s),s=s+1}else s=h}if(!L)return A}},41476:function(j,V,t){var b=t(9252);j.exports=function(){return b(this).length=0,this}},74772:function(j,V,t){j.exports=t(44716)()?Array.from:t(80816)},44716:function(j){j.exports=function(){var V=Array.from,t,b;return typeof V!="function"?!1:(t=["raz","dwa"],b=V(t),!!(b&&b!==t&&b[1]==="dwa"))}},80816:function(j,V,t){var b=t(92664).iterator,P=t(60948),o=t(17024),L=t(81304),A=t(34044),v=t(9252),p=t(42584),r=t(29768),e=Array.isArray,s=Function.prototype.call,n={configurable:!0,enumerable:!0,writable:!0,value:null},l=Object.defineProperty;j.exports=function(f){var u=arguments[1],g=arguments[2],h,T,c,i,d,x,w,C,y,S;if(f=Object(v(f)),p(u)&&A(u),!this||this===Array||!o(this)){if(!u){if(P(f))return d=f.length,d!==1?Array.apply(null,f):(i=new Array(1),i[0]=f[0],i);if(e(f)){for(i=new Array(d=f.length),T=0;T<d;++T)i[T]=f[T];return i}}i=[]}else h=this;if(!e(f)){if((y=f[b])!==void 0){for(w=A(y).call(f),h&&(i=new h),C=w.next(),T=0;!C.done;)S=u?s.call(u,g,C.value,T):C.value,h?(n.value=S,l(i,T,n)):i[T]=S,C=w.next(),++T;d=T}else if(r(f)){for(d=f.length,h&&(i=new h),T=0,c=0;T<d;++T)S=f[T],T+1<d&&(x=S.charCodeAt(0),x>=55296&&x<=56319&&(S+=f[++T])),S=u?s.call(u,g,S,c):S,h?(n.value=S,l(i,c,n)):i[c]=S,++c;d=c}}if(d===void 0)for(d=L(f.length),h&&(i=new h(d)),T=0;T<d;++T)S=u?s.call(u,g,f[T],T):f[T],h?(n.value=S,l(i,T,n)):i[T]=S;return h&&(n.value=null,i.length=d),i}},60948:function(j){var V=Object.prototype.toString,t=V.call(function(){return arguments}());j.exports=function(b){return V.call(b)===t}},17024:function(j){var V=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);j.exports=function(b){return typeof b=="function"&&t(V.call(b))}},33208:function(j){j.exports=function(){}},85608:function(j,V,t){j.exports=t(37328)()?Math.sign:t(92928)},37328:function(j){j.exports=function(){var V=Math.sign;return typeof V!="function"?!1:V(10)===1&&V(-20)===-1}},92928:function(j){j.exports=function(V){return V=Number(V),isNaN(V)||V===0?V:V>0?1:-1}},96936:function(j,V,t){var b=t(85608),P=Math.abs,o=Math.floor;j.exports=function(L){return isNaN(L)?0:(L=Number(L),L===0||!isFinite(L)?L:b(L)*o(P(L)))}},81304:function(j,V,t){var b=t(96936),P=Math.max;j.exports=function(o){return P(0,b(o))}},14428:function(j,V,t){var b=t(34044),P=t(9252),o=Function.prototype.bind,L=Function.prototype.call,A=Object.keys,v=Object.prototype.propertyIsEnumerable;j.exports=function(p,r){return function(e,s){var n,l=arguments[2],f=arguments[3];return e=Object(P(e)),b(s),n=A(e),f&&n.sort(typeof f=="function"?o.call(f,e):void 0),typeof p!="function"&&(p=n[p]),L.call(p,n,function(u,g){return v.call(e,u)?L.call(s,l,e[u],u,e,g):r})}}},38452:function(j,V,t){j.exports=t(96276)()?Object.assign:t(81892)},96276:function(j){j.exports=function(){var V=Object.assign,t;return typeof V!="function"?!1:(t={foo:"raz"},V(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},81892:function(j,V,t){var b=t(54768),P=t(9252),o=Math.max;j.exports=function(L,A){var v,p,r=o(arguments.length,2),e;for(L=Object(P(L)),e=function(s){try{L[s]=A[s]}catch(n){v||(v=n)}},p=1;p<r;++p)A=arguments[p],b(A).forEach(e);if(v!==void 0)throw v;return L}},95920:function(j,V,t){var b=t(74772),P=t(38452),o=t(9252);j.exports=function(L){var A=Object(o(L)),v=arguments[1],p=Object(arguments[2]);if(A!==L&&!v)return A;var r={};return v?b(v,function(e){(p.ensure||e in L)&&(r[e]=L[e])}):P(r,L),r}},14452:function(j,V,t){var b=Object.create,P;t(63092)()||(P=t(8672)),j.exports=function(){var o,L,A;return!P||P.level!==1?b:(o={},L={},A={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(v){if(v==="__proto__"){L[v]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}L[v]=A}),Object.defineProperties(o,L),Object.defineProperty(P,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:o}),function(v,p){return b(v===null?o:v,p)})}()},42748:function(j,V,t){j.exports=t(14428)("forEach")},69127:function(j,V,t){var b=t(42584),P={function:!0,object:!0};j.exports=function(o){return b(o)&&P[typeof o]||!1}},42584:function(j,V,t){var b=t(33208)();j.exports=function(P){return P!==b&&P!==null}},54768:function(j,V,t){j.exports=t(87888)()?Object.keys:t(89592)},87888:function(j){j.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},89592:function(j,V,t){var b=t(42584),P=Object.keys;j.exports=function(o){return P(b(o)?Object(o):o)}},84323:function(j,V,t){var b=t(34044),P=t(42748),o=Function.prototype.call;j.exports=function(L,A){var v={},p=arguments[2];return b(A),P(L,function(r,e,s,n){v[e]=o.call(A,p,r,e,s,n)}),v}},50868:function(j,V,t){var b=t(42584),P=Array.prototype.forEach,o=Object.create,L=function(A,v){var p;for(p in A)v[p]=A[p]};j.exports=function(A){var v=o(null);return P.call(arguments,function(p){b(p)&&L(Object(p),v)}),v}},69932:function(j,V,t){j.exports=t(63092)()?Object.setPrototypeOf:t(8672)},63092:function(j){var V=Object.create,t=Object.getPrototypeOf,b={};j.exports=function(){var P=Object.setPrototypeOf,o=arguments[0]||V;return typeof P!="function"?!1:t(P(o(null),b))===b}},8672:function(j,V,t){var b=t(69127),P=t(9252),o=Object.prototype.isPrototypeOf,L=Object.defineProperty,A={configurable:!0,enumerable:!1,writable:!0,value:void 0},v;v=function(p,r){if(P(p),r===null||b(r))return p;throw new TypeError("Prototype must be null or an object")},j.exports=function(p){var r,e;return p?(p.level===2?p.set?(e=p.set,r=function(s,n){return e.call(v(s,n),n),s}):r=function(s,n){return v(s,n).__proto__=n,s}:r=function s(n,l){var f;return v(n,l),f=o.call(s.nullPolyfill,n),f&&delete s.nullPolyfill.__proto__,l===null&&(l=s.nullPolyfill),n.__proto__=l,f&&L(s.nullPolyfill,"__proto__",A),n},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:p.level})):null}(function(){var p=Object.create(null),r={},e,s=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(s){try{e=s.set,e.call(p,r)}catch{}if(Object.getPrototypeOf(p)===r)return{set:e,level:2}}return p.__proto__=r,Object.getPrototypeOf(p)===r?{level:2}:(p={},p.__proto__=r,Object.getPrototypeOf(p)===r?{level:1}:!1)}()),t(14452)},34044:function(j){j.exports=function(V){if(typeof V!="function")throw new TypeError(V+" is not a function");return V}},92584:function(j,V,t){var b=t(69127);j.exports=function(P){if(!b(P))throw new TypeError(P+" is not an Object");return P}},9252:function(j,V,t){var b=t(42584);j.exports=function(P){if(!b(P))throw new TypeError("Cannot use null or undefined");return P}},71056:function(j,V,t){j.exports=t(42976)()?String.prototype.contains:t(93040)},42976:function(j){var V="razdwatrzy";j.exports=function(){return typeof V.contains!="function"?!1:V.contains("dwa")===!0&&V.contains("foo")===!1}},93040:function(j){var V=String.prototype.indexOf;j.exports=function(t){return V.call(this,t,arguments[1])>-1}},29768:function(j){var V=Object.prototype.toString,t=V.call("");j.exports=function(b){return typeof b=="string"||b&&typeof b=="object"&&(b instanceof String||V.call(b)===t)||!1}},82252:function(j){var V=Object.create(null),t=Math.random;j.exports=function(){var b;do b=t().toString(36).slice(2);while(V[b]);return b}},52104:function(j,V,t){var b=t(69932),P=t(71056),o=t(21092),L=t(92664),A=t(85512),v=Object.defineProperty,p;p=j.exports=function(r,e){if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");A.call(this,r),e?P.call(e,"key+value")?e="key+value":P.call(e,"key")?e="key":e="value":e="value",v(this,"__kind__",o("",e))},b&&b(p,A),delete p.prototype.constructor,p.prototype=Object.create(A.prototype,{_resolve:o(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),v(p.prototype,L.toStringTag,o("c","Array Iterator"))},76024:function(j,V,t){var b=t(60948),P=t(34044),o=t(29768),L=t(76252),A=Array.isArray,v=Function.prototype.call,p=Array.prototype.some;j.exports=function(r,e){var s,n=arguments[2],l,f,u,g,h,T,c;if(A(r)||b(r)?s="array":o(r)?s="string":r=L(r),P(e),f=function(){u=!0},s==="array"){p.call(r,function(i){return v.call(e,n,i,f),u});return}if(s==="string"){for(h=r.length,g=0;g<h&&(T=r[g],g+1<h&&(c=T.charCodeAt(0),c>=55296&&c<=56319&&(T+=r[++g])),v.call(e,n,T,f),!u);++g);return}for(l=r.next();!l.done;){if(v.call(e,n,l.value,f),u)return;l=r.next()}}},76252:function(j,V,t){var b=t(60948),P=t(29768),o=t(52104),L=t(80940),A=t(52891),v=t(92664).iterator;j.exports=function(p){return typeof A(p)[v]=="function"?p[v]():b(p)?new o(p):P(p)?new L(p):new o(p)}},85512:function(j,V,t){var b=t(41476),P=t(38452),o=t(34044),L=t(9252),A=t(21092),v=t(27940),p=t(92664),r=Object.defineProperty,e=Object.defineProperties,s;j.exports=s=function(n,l){if(!(this instanceof s))throw new TypeError("Constructor requires 'new'");e(this,{__list__:A("w",L(n)),__context__:A("w",l),__nextIndex__:A("w",0)}),l&&(o(l.on),l.on("_add",this._onAdd),l.on("_delete",this._onDelete),l.on("_clear",this._onClear))},delete s.prototype.constructor,e(s.prototype,P({_next:A(function(){var n;if(this.__list__){if(this.__redo__&&(n=this.__redo__.shift(),n!==void 0))return n;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:A(function(){return this._createResult(this._next())}),_createResult:A(function(n){return n===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(n)}}),_resolve:A(function(n){return this.__list__[n]}),_unBind:A(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:A(function(){return"[object "+(this[p.toStringTag]||"Object")+"]"})},v({_onAdd:A(function(n){if(!(n>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",A("c",[n]));return}this.__redo__.forEach(function(l,f){l>=n&&(this.__redo__[f]=++l)},this),this.__redo__.push(n)}}),_onDelete:A(function(n){var l;n>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(l=this.__redo__.indexOf(n),l!==-1&&this.__redo__.splice(l,1),this.__redo__.forEach(function(f,u){f>n&&(this.__redo__[u]=--f)},this)))}),_onClear:A(function(){this.__redo__&&b.call(this.__redo__),this.__nextIndex__=0})}))),r(s.prototype,p.iterator,A(function(){return this}))},76368:function(j,V,t){var b=t(60948),P=t(42584),o=t(29768),L=t(92664).iterator,A=Array.isArray;j.exports=function(v){return P(v)?A(v)||o(v)||b(v)?!0:typeof v[L]=="function":!1}},80940:function(j,V,t){var b=t(69932),P=t(21092),o=t(92664),L=t(85512),A=Object.defineProperty,v;v=j.exports=function(p){if(!(this instanceof v))throw new TypeError("Constructor requires 'new'");p=String(p),L.call(this,p),A(this,"__length__",P("",p.length))},b&&b(v,L),delete v.prototype.constructor,v.prototype=Object.create(L.prototype,{_next:P(function(){if(this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:P(function(p){var r=this.__list__[p],e;return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0),e>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),A(v.prototype,o.toStringTag,P("c","String Iterator"))},52891:function(j,V,t){var b=t(76368);j.exports=function(P){if(!b(P))throw new TypeError(P+" is not iterable");return P}},60964:function(j){function V(b,P){if(b==null)throw new TypeError("Cannot convert first argument to object");for(var o=Object(b),L=1;L<arguments.length;L++){var A=arguments[L];if(A!=null)for(var v=Object.keys(Object(A)),p=0,r=v.length;p<r;p++){var e=v[p],s=Object.getOwnPropertyDescriptor(A,e);s!==void 0&&s.enumerable&&(o[e]=A[e])}}return o}function t(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:V})}j.exports={assign:V,polyfill:t}},92664:function(j,V,t){j.exports=t(43580)()?t(12296).Symbol:t(18376)},43580:function(j,V,t){var b=t(12296),P={object:!0,symbol:!0};j.exports=function(){var o=b.Symbol,L;if(typeof o!="function")return!1;L=o("test symbol");try{String(L)}catch{return!1}return!(!P[typeof o.iterator]||!P[typeof o.toPrimitive]||!P[typeof o.toStringTag])}},53908:function(j){j.exports=function(V){return V?typeof V=="symbol"?!0:!V.constructor||V.constructor.name!=="Symbol"?!1:V[V.constructor.toStringTag]==="Symbol":!1}},96863:function(j,V,t){var b=t(21092),P=Object.create,o=Object.defineProperty,L=Object.prototype,A=P(null);j.exports=function(v){for(var p=0,r,e;A[v+(p||"")];)++p;return v+=p||"",A[v]=!0,r="@@"+v,o(L,r,b.gs(null,function(s){e||(e=!0,o(this,r,b(s)),e=!1)})),r}},53540:function(j,V,t){var b=t(21092),P=t(12296).Symbol;j.exports=function(o){return Object.defineProperties(o,{hasInstance:b("",P&&P.hasInstance||o("hasInstance")),isConcatSpreadable:b("",P&&P.isConcatSpreadable||o("isConcatSpreadable")),iterator:b("",P&&P.iterator||o("iterator")),match:b("",P&&P.match||o("match")),replace:b("",P&&P.replace||o("replace")),search:b("",P&&P.search||o("search")),species:b("",P&&P.species||o("species")),split:b("",P&&P.split||o("split")),toPrimitive:b("",P&&P.toPrimitive||o("toPrimitive")),toStringTag:b("",P&&P.toStringTag||o("toStringTag")),unscopables:b("",P&&P.unscopables||o("unscopables"))})}},73852:function(j,V,t){var b=t(21092),P=t(63948),o=Object.create(null);j.exports=function(L){return Object.defineProperties(L,{for:b(function(A){return o[A]?o[A]:o[A]=L(String(A))}),keyFor:b(function(A){var v;P(A);for(v in o)if(o[v]===A)return v})})}},18376:function(j,V,t){var b=t(21092),P=t(63948),o=t(12296).Symbol,L=t(96863),A=t(53540),v=t(73852),p=Object.create,r=Object.defineProperties,e=Object.defineProperty,s,n,l;if(typeof o=="function")try{String(o()),l=!0}catch{}else o=null;n=function(u){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return s(u)},j.exports=s=function f(u){var g;if(this instanceof f)throw new TypeError("Symbol is not a constructor");return l?o(u):(g=p(n.prototype),u=u===void 0?"":String(u),r(g,{__description__:b("",u),__name__:b("",L(u))}))},A(s),v(s),r(n.prototype,{constructor:b(s),toString:b("",function(){return this.__name__})}),r(s.prototype,{toString:b(function(){return"Symbol ("+P(this).__description__+")"}),valueOf:b(function(){return P(this)})}),e(s.prototype,s.toPrimitive,b("",function(){var f=P(this);return typeof f=="symbol"?f:f.toString()})),e(s.prototype,s.toStringTag,b("c","Symbol")),e(n.prototype,s.toStringTag,b("c",s.prototype[s.toStringTag])),e(n.prototype,s.toPrimitive,b("c",s.prototype[s.toPrimitive]))},63948:function(j,V,t){var b=t(53908);j.exports=function(P){if(!b(P))throw new TypeError(P+" is not a symbol");return P}},60463:function(j,V,t){j.exports=t(96979)()?WeakMap:t(64864)},96979:function(j){j.exports=function(){var V,t;if(typeof WeakMap!="function")return!1;try{V=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(V)!=="[object WeakMap]"||typeof V.set!="function"||V.set({},1)!==V||typeof V.delete!="function"||typeof V.has!="function"||V.get(t)!=="one")}},69876:function(j){j.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},64864:function(j,V,t){var b=t(42584),P=t(69932),o=t(92584),L=t(9252),A=t(82252),v=t(21092),p=t(76252),r=t(76024),e=t(92664).toStringTag,s=t(69876),n=Array.isArray,l=Object.defineProperty,f=Object.prototype.hasOwnProperty,u=Object.getPrototypeOf,g;j.exports=g=function(){var h=arguments[0],T;if(!(this instanceof g))throw new TypeError("Constructor requires 'new'");return T=s&&P&&WeakMap!==g?P(new WeakMap,u(this)):this,b(h)&&(n(h)||(h=p(h))),l(T,"__weakMapData__",v("c","$weakMap$"+A())),h&&r(h,function(c){L(c),T.set(c[0],c[1])}),T},s&&(P&&P(g,WeakMap),g.prototype=Object.create(WeakMap.prototype,{constructor:v(g)})),Object.defineProperties(g.prototype,{delete:v(function(h){return f.call(o(h),this.__weakMapData__)?(delete h[this.__weakMapData__],!0):!1}),get:v(function(h){if(f.call(o(h),this.__weakMapData__))return h[this.__weakMapData__]}),has:v(function(h){return f.call(o(h),this.__weakMapData__)}),set:v(function(h,T){return l(o(h),this.__weakMapData__,v("c",T)),this}),toString:v(function(){return"[object WeakMap]"})}),l(g.prototype,e,v("c","WeakMap"))},61252:function(j){var V=typeof Reflect=="object"?Reflect:null,t=V&&typeof V.apply=="function"?V.apply:function(d,x,w){return Function.prototype.apply.call(d,x,w)},b;V&&typeof V.ownKeys=="function"?b=V.ownKeys:Object.getOwnPropertySymbols?b=function(d){return Object.getOwnPropertyNames(d).concat(Object.getOwnPropertySymbols(d))}:b=function(d){return Object.getOwnPropertyNames(d)};function P(i){console&&console.warn&&console.warn(i)}var o=Number.isNaN||function(d){return d!==d};function L(){L.init.call(this)}j.exports=L,j.exports.once=h,L.EventEmitter=L,L.prototype._events=void 0,L.prototype._eventsCount=0,L.prototype._maxListeners=void 0;var A=10;function v(i){if(typeof i!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof i)}Object.defineProperty(L,"defaultMaxListeners",{enumerable:!0,get:function(){return A},set:function(i){if(typeof i!="number"||i<0||o(i))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+i+".");A=i}}),L.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},L.prototype.setMaxListeners=function(d){if(typeof d!="number"||d<0||o(d))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+d+".");return this._maxListeners=d,this};function p(i){return i._maxListeners===void 0?L.defaultMaxListeners:i._maxListeners}L.prototype.getMaxListeners=function(){return p(this)},L.prototype.emit=function(d){for(var x=[],w=1;w<arguments.length;w++)x.push(arguments[w]);var C=d==="error",y=this._events;if(y!==void 0)C=C&&y.error===void 0;else if(!C)return!1;if(C){var S;if(x.length>0&&(S=x[0]),S instanceof Error)throw S;var M=new Error("Unhandled error."+(S?" ("+S.message+")":""));throw M.context=S,M}var a=y[d];if(a===void 0)return!1;if(typeof a=="function")t(a,this,x);else for(var E=a.length,m=f(a,E),w=0;w<E;++w)t(m[w],this,x);return!0};function r(i,d,x,w){var C,y,S;if(v(x),y=i._events,y===void 0?(y=i._events=Object.create(null),i._eventsCount=0):(y.newListener!==void 0&&(i.emit("newListener",d,x.listener?x.listener:x),y=i._events),S=y[d]),S===void 0)S=y[d]=x,++i._eventsCount;else if(typeof S=="function"?S=y[d]=w?[x,S]:[S,x]:w?S.unshift(x):S.push(x),C=p(i),C>0&&S.length>C&&!S.warned){S.warned=!0;var M=new Error("Possible EventEmitter memory leak detected. "+S.length+" "+String(d)+" listeners added. Use emitter.setMaxListeners() to increase limit");M.name="MaxListenersExceededWarning",M.emitter=i,M.type=d,M.count=S.length,P(M)}return i}L.prototype.addListener=function(d,x){return r(this,d,x,!1)},L.prototype.on=L.prototype.addListener,L.prototype.prependListener=function(d,x){return r(this,d,x,!0)};function e(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function s(i,d,x){var w={fired:!1,wrapFn:void 0,target:i,type:d,listener:x},C=e.bind(w);return C.listener=x,w.wrapFn=C,C}L.prototype.once=function(d,x){return v(x),this.on(d,s(this,d,x)),this},L.prototype.prependOnceListener=function(d,x){return v(x),this.prependListener(d,s(this,d,x)),this},L.prototype.removeListener=function(d,x){var w,C,y,S,M;if(v(x),C=this._events,C===void 0)return this;if(w=C[d],w===void 0)return this;if(w===x||w.listener===x)--this._eventsCount===0?this._events=Object.create(null):(delete C[d],C.removeListener&&this.emit("removeListener",d,w.listener||x));else if(typeof w!="function"){for(y=-1,S=w.length-1;S>=0;S--)if(w[S]===x||w[S].listener===x){M=w[S].listener,y=S;break}if(y<0)return this;y===0?w.shift():u(w,y),w.length===1&&(C[d]=w[0]),C.removeListener!==void 0&&this.emit("removeListener",d,M||x)}return this},L.prototype.off=L.prototype.removeListener,L.prototype.removeAllListeners=function(d){var x,w,C;if(w=this._events,w===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[d]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete w[d]),this;if(arguments.length===0){var y=Object.keys(w),S;for(C=0;C<y.length;++C)S=y[C],S!=="removeListener"&&this.removeAllListeners(S);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(x=w[d],typeof x=="function")this.removeListener(d,x);else if(x!==void 0)for(C=x.length-1;C>=0;C--)this.removeListener(d,x[C]);return this};function n(i,d,x){var w=i._events;if(w===void 0)return[];var C=w[d];return C===void 0?[]:typeof C=="function"?x?[C.listener||C]:[C]:x?g(C):f(C,C.length)}L.prototype.listeners=function(d){return n(this,d,!0)},L.prototype.rawListeners=function(d){return n(this,d,!1)},L.listenerCount=function(i,d){return typeof i.listenerCount=="function"?i.listenerCount(d):l.call(i,d)},L.prototype.listenerCount=l;function l(i){var d=this._events;if(d!==void 0){var x=d[i];if(typeof x=="function")return 1;if(x!==void 0)return x.length}return 0}L.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]};function f(i,d){for(var x=new Array(d),w=0;w<d;++w)x[w]=i[w];return x}function u(i,d){for(;d+1<i.length;d++)i[d]=i[d+1];i.pop()}function g(i){for(var d=new Array(i.length),x=0;x<d.length;++x)d[x]=i[x].listener||i[x];return d}function h(i,d){return new Promise(function(x,w){function C(S){i.removeListener(d,y),w(S)}function y(){typeof i.removeListener=="function"&&i.removeListener("error",C),x([].slice.call(arguments))}c(i,d,y,{once:!0}),d!=="error"&&T(i,C,{once:!0})})}function T(i,d,x){typeof i.on=="function"&&c(i,"error",d,x)}function c(i,d,x,w){if(typeof i.on=="function")w.once?i.once(d,x):i.on(d,x);else if(typeof i.addEventListener=="function")i.addEventListener(d,function C(y){w.once&&i.removeEventListener(d,C),x(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof i)}},39072:function(j){var V=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};j.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return V()}try{return __global__||V()}finally{delete Object.prototype.__global__}}()},12296:function(j,V,t){j.exports=t(45072)()?globalThis:t(39072)},45072:function(j){j.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},38248:function(j,V,t){var b=t(94576);j.exports=function(P){var o=typeof P;if(o==="string"){var L=P;if(P=+P,P===0&&b(L))return!1}else if(o!=="number")return!1;return P-P<1}},47520:function(j,V,t){var b=t(72512);j.exports=P;function P(o,L,A){if(!o)throw new TypeError("must specify data as first parameter");if(A=+(A||0)|0,Array.isArray(o)&&o[0]&&typeof o[0][0]=="number"){var v=o[0].length,p=o.length*v,r,e,s,n;(!L||typeof L=="string")&&(L=new(b(L||"float32"))(p+A));var l=L.length-A;if(p!==l)throw new Error("source length "+p+" ("+v+"x"+o.length+") does not match destination length "+l);for(r=0,s=A;r<o.length;r++)for(e=0;e<v;e++)L[s++]=o[r][e]===null?NaN:o[r][e]}else if(!L||typeof L=="string"){var f=b(L||"float32");if(Array.isArray(o)||L==="array")for(L=new f(o.length+A),r=0,s=A,n=L.length;s<n;s++,r++)L[s]=o[r]===null?NaN:o[r];else A===0?L=new f(o):(L=new f(o.length+A),L.set(o,A))}else L.set(o,A);return L}},33888:function(j,V,t){var b=t(49395),P=[32,126];j.exports=o;function o(L){L=L||{};var A=L.shape?L.shape:L.canvas?[L.canvas.width,L.canvas.height]:[512,512],v=L.canvas||document.createElement("canvas"),p=L.font,r=typeof L.step=="number"?[L.step,L.step]:L.step||[32,32],e=L.chars||P;if(p&&typeof p!="string"&&(p=b(p)),!Array.isArray(e))e=String(e).split("");else if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){for(var s=[],n=e[0],l=0;n<=e[1];n++)s[l++]=String.fromCharCode(n);e=s}A=A.slice(),v.width=A[0],v.height=A[1];var f=v.getContext("2d");f.fillStyle="#000",f.fillRect(0,0,v.width,v.height),f.font=p,f.textAlign="center",f.textBaseline="middle",f.fillStyle="#fff";for(var u=r[0]/2,g=r[1]/2,n=0;n<e.length;n++)f.fillText(e[n],u,g),(u+=r[0])>A[0]-r[0]/2&&(u=r[0]/2,g+=r[1]);return v}},71920:function(j){j.exports=V,V.canvas=document.createElement("canvas"),V.cache={};function V(e,L){L||(L={}),(typeof e=="string"||Array.isArray(e))&&(L.family=e);var A=Array.isArray(L.family)?L.family.join(", "):L.family;if(!A)throw Error("`family` must be defined");var v=L.size||L.fontSize||L.em||48,p=L.weight||L.fontWeight||"",r=L.style||L.fontStyle||"",e=[r,p,v].join(" ")+"px "+A,s=L.origin||"top";if(V.cache[A]&&v<=V.cache[A].em)return t(V.cache[A],s);var n=L.canvas||V.canvas,l=n.getContext("2d"),f={upper:L.upper!==void 0?L.upper:"H",lower:L.lower!==void 0?L.lower:"x",descent:L.descent!==void 0?L.descent:"p",ascent:L.ascent!==void 0?L.ascent:"h",tittle:L.tittle!==void 0?L.tittle:"i",overshoot:L.overshoot!==void 0?L.overshoot:"O"},u=Math.ceil(v*1.5);n.height=u,n.width=u*.5,l.font=e;var g="H",h={top:0};l.clearRect(0,0,u,u),l.textBaseline="top",l.fillStyle="black",l.fillText(g,0,0);var T=b(l.getImageData(0,0,u,u));l.clearRect(0,0,u,u),l.textBaseline="bottom",l.fillText(g,0,u);var c=b(l.getImageData(0,0,u,u));h.lineHeight=h.bottom=u-c+T,l.clearRect(0,0,u,u),l.textBaseline="alphabetic",l.fillText(g,0,u);var i=b(l.getImageData(0,0,u,u)),d=u-i-1+T;h.baseline=h.alphabetic=d,l.clearRect(0,0,u,u),l.textBaseline="middle",l.fillText(g,0,u*.5);var x=b(l.getImageData(0,0,u,u));h.median=h.middle=u-x-1+T-u*.5,l.clearRect(0,0,u,u),l.textBaseline="hanging",l.fillText(g,0,u*.5);var w=b(l.getImageData(0,0,u,u));h.hanging=u-w-1+T-u*.5,l.clearRect(0,0,u,u),l.textBaseline="ideographic",l.fillText(g,0,u);var C=b(l.getImageData(0,0,u,u));if(h.ideographic=u-C-1+T,f.upper&&(l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.upper,0,0),h.upper=b(l.getImageData(0,0,u,u)),h.capHeight=h.baseline-h.upper),f.lower&&(l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.lower,0,0),h.lower=b(l.getImageData(0,0,u,u)),h.xHeight=h.baseline-h.lower),f.tittle&&(l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.tittle,0,0),h.tittle=b(l.getImageData(0,0,u,u))),f.ascent&&(l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.ascent,0,0),h.ascent=b(l.getImageData(0,0,u,u))),f.descent&&(l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.descent,0,0),h.descent=P(l.getImageData(0,0,u,u))),f.overshoot){l.clearRect(0,0,u,u),l.textBaseline="top",l.fillText(f.overshoot,0,0);var y=P(l.getImageData(0,0,u,u));h.overshoot=y-d}for(var S in h)h[S]/=v;return h.em=v,V.cache[A]=h,t(h,s)}function t(o,L){var A={};typeof L=="string"&&(L=o[L]);for(var v in o)v!=="em"&&(A[v]=o[v]-L);return A}function b(o){for(var L=o.height,A=o.data,v=3;v<A.length;v+=4)if(A[v]!==0)return Math.floor((v-3)*.25/L)}function P(o){for(var L=o.height,A=o.data,v=A.length-1;v>0;v-=4)if(A[v]!==0)return Math.floor((v-3)*.25/L)}},46492:function(j,V,t){var b=t(90720),P=Object.prototype.toString,o=Object.prototype.hasOwnProperty,L=function(e,s,n){for(var l=0,f=e.length;l<f;l++)o.call(e,l)&&(n==null?s(e[l],l,e):s.call(n,e[l],l,e))},A=function(e,s,n){for(var l=0,f=e.length;l<f;l++)n==null?s(e.charAt(l),l,e):s.call(n,e.charAt(l),l,e)},v=function(e,s,n){for(var l in e)o.call(e,l)&&(n==null?s(e[l],l,e):s.call(n,e[l],l,e))},p=function(e,s,n){if(!b(s))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=n),P.call(e)==="[object Array]"?L(e,s,l):typeof e=="string"?A(e,s,l):v(e,s,l)};j.exports=p},74336:function(j){var V="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,b=Math.max,P="[object Function]",o=function(p,r){for(var e=[],s=0;s<p.length;s+=1)e[s]=p[s];for(var n=0;n<r.length;n+=1)e[n+p.length]=r[n];return e},L=function(p,r){for(var e=[],s=r,n=0;s<p.length;s+=1,n+=1)e[n]=p[s];return e},A=function(v,p){for(var r="",e=0;e<v.length;e+=1)r+=v[e],e+1<v.length&&(r+=p);return r};j.exports=function(p){var r=this;if(typeof r!="function"||t.apply(r)!==P)throw new TypeError(V+r);for(var e=L(arguments,1),s,n=function(){if(this instanceof s){var h=r.apply(this,o(e,arguments));return Object(h)===h?h:this}return r.apply(p,o(e,arguments))},l=b(0,r.length-e.length),f=[],u=0;u<l;u++)f[u]="$"+u;if(s=Function("binder","return function ("+A(f,",")+"){ return binder.apply(this,arguments); }")(n),r.prototype){var g=function(){};g.prototype=r.prototype,s.prototype=new g,g.prototype=null}return s}},8844:function(j,V,t){var b=t(74336);j.exports=Function.prototype.bind||b},13380:function(j){j.exports=V;function V(t,b){if(typeof t!="string")throw new TypeError("must specify type string");if(b=b||{},typeof document>"u"&&!b.canvas)return null;var P=b.canvas||document.createElement("canvas");typeof b.width=="number"&&(P.width=b.width),typeof b.height=="number"&&(P.height=b.height);var o=b,L;try{var A=[t];t.indexOf("webgl")===0&&A.push("experimental-"+t);for(var v=0;v<A.length;v++)if(L=P.getContext(A[v],o),L)return L}catch{L=null}return L||null}},53664:function(j,V,t){var b,P=SyntaxError,o=Function,L=TypeError,A=function(m){try{return o('"use strict"; return ('+m+").constructor;")()}catch{}},v=Object.getOwnPropertyDescriptor;if(v)try{v({},"")}catch{v=null}var p=function(){throw new L},r=v?function(){try{return arguments.callee,p}catch{try{return v(arguments,"callee").get}catch{return p}}}():p,e=t(71080)(),s=t(69572)(),n=Object.getPrototypeOf||(s?function(m){return m.__proto__}:null),l={},f=typeof Uint8Array>"u"||!n?b:n(Uint8Array),u={"%AggregateError%":typeof AggregateError>"u"?b:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?b:ArrayBuffer,"%ArrayIteratorPrototype%":e&&n?n([][Symbol.iterator]()):b,"%AsyncFromSyncIteratorPrototype%":b,"%AsyncFunction%":l,"%AsyncGenerator%":l,"%AsyncGeneratorFunction%":l,"%AsyncIteratorPrototype%":l,"%Atomics%":typeof Atomics>"u"?b:Atomics,"%BigInt%":typeof BigInt>"u"?b:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?b:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?b:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?b:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?b:Float32Array,"%Float64Array%":typeof Float64Array>"u"?b:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?b:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":l,"%Int8Array%":typeof Int8Array>"u"?b:Int8Array,"%Int16Array%":typeof Int16Array>"u"?b:Int16Array,"%Int32Array%":typeof Int32Array>"u"?b:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":e&&n?n(n([][Symbol.iterator]())):b,"%JSON%":typeof JSON=="object"?JSON:b,"%Map%":typeof Map>"u"?b:Map,"%MapIteratorPrototype%":typeof Map>"u"||!e||!n?b:n(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?b:Promise,"%Proxy%":typeof Proxy>"u"?b:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?b:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?b:Set,"%SetIteratorPrototype%":typeof Set>"u"||!e||!n?b:n(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?b:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":e&&n?n(""[Symbol.iterator]()):b,"%Symbol%":e?Symbol:b,"%SyntaxError%":P,"%ThrowTypeError%":r,"%TypedArray%":f,"%TypeError%":L,"%Uint8Array%":typeof Uint8Array>"u"?b:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?b:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?b:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?b:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?b:WeakMap,"%WeakRef%":typeof WeakRef>"u"?b:WeakRef,"%WeakSet%":typeof WeakSet>"u"?b:WeakSet};if(n)try{null.error}catch(m){var g=n(n(m));u["%Error.prototype%"]=g}var h=function m(k){var I;if(k==="%AsyncFunction%")I=A("async function () {}");else if(k==="%GeneratorFunction%")I=A("function* () {}");else if(k==="%AsyncGeneratorFunction%")I=A("async function* () {}");else if(k==="%AsyncGenerator%"){var O=m("%AsyncGeneratorFunction%");O&&(I=O.prototype)}else if(k==="%AsyncIteratorPrototype%"){var z=m("%AsyncGenerator%");z&&n&&(I=n(z.prototype))}return u[k]=I,I},T={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},c=t(8844),i=t(92064),d=c.call(Function.call,Array.prototype.concat),x=c.call(Function.apply,Array.prototype.splice),w=c.call(Function.call,String.prototype.replace),C=c.call(Function.call,String.prototype.slice),y=c.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,M=/\\(\\)?/g,a=function(k){var I=C(k,0,1),O=C(k,-1);if(I==="%"&&O!=="%")throw new P("invalid intrinsic syntax, expected closing `%`");if(O==="%"&&I!=="%")throw new P("invalid intrinsic syntax, expected opening `%`");var z=[];return w(k,S,function(B,F,_,N){z[z.length]=_?w(N,M,"$1"):F||B}),z},E=function(k,I){var O=k,z;if(i(T,O)&&(z=T[O],O="%"+z[0]+"%"),i(u,O)){var B=u[O];if(B===l&&(B=h(O)),typeof B>"u"&&!I)throw new L("intrinsic "+k+" exists, but is not available. Please file an issue!");return{alias:z,name:O,value:B}}throw new P("intrinsic "+k+" does not exist!")};j.exports=function(k,I){if(typeof k!="string"||k.length===0)throw new L("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof I!="boolean")throw new L('"allowMissing" argument must be a boolean');if(y(/^%?[^%]*%?$/,k)===null)throw new P("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var O=a(k),z=O.length>0?O[0]:"",B=E("%"+z+"%",I),F=B.name,_=B.value,N=!1,G=B.alias;G&&(z=G[0],x(O,d([0,1],G)));for(var X=1,$=!0;X<O.length;X+=1){var et=O[X],ot=C(et,0,1),nt=C(et,-1);if((ot==='"'||ot==="'"||ot==="`"||nt==='"'||nt==="'"||nt==="`")&&ot!==nt)throw new P("property names with quotes must have matching quotes");if((et==="constructor"||!$)&&(N=!0),z+="."+et,F="%"+z+"%",i(u,F))_=u[F];else if(_!=null){if(!(et in _)){if(!I)throw new L("base intrinsic for "+k+" exists, but the property is not available.");return}if(v&&X+1>=O.length){var Z=v(_,et);$=!!Z,$&&"get"in Z&&!("originalValue"in Z.get)?_=Z.get:_=_[et]}else $=i(_,et),_=_[et];$&&!N&&(u[F]=_)}}return _}},12408:function(j){j.exports=V;function V(t,b){var P=b[0],o=b[1],L=b[2],A=b[3],v=b[4],p=b[5],r=b[6],e=b[7],s=b[8],n=b[9],l=b[10],f=b[11],u=b[12],g=b[13],h=b[14],T=b[15];return t[0]=p*(l*T-f*h)-n*(r*T-e*h)+g*(r*f-e*l),t[1]=-(o*(l*T-f*h)-n*(L*T-A*h)+g*(L*f-A*l)),t[2]=o*(r*T-e*h)-p*(L*T-A*h)+g*(L*e-A*r),t[3]=-(o*(r*f-e*l)-p*(L*f-A*l)+n*(L*e-A*r)),t[4]=-(v*(l*T-f*h)-s*(r*T-e*h)+u*(r*f-e*l)),t[5]=P*(l*T-f*h)-s*(L*T-A*h)+u*(L*f-A*l),t[6]=-(P*(r*T-e*h)-v*(L*T-A*h)+u*(L*e-A*r)),t[7]=P*(r*f-e*l)-v*(L*f-A*l)+s*(L*e-A*r),t[8]=v*(n*T-f*g)-s*(p*T-e*g)+u*(p*f-e*n),t[9]=-(P*(n*T-f*g)-s*(o*T-A*g)+u*(o*f-A*n)),t[10]=P*(p*T-e*g)-v*(o*T-A*g)+u*(o*e-A*p),t[11]=-(P*(p*f-e*n)-v*(o*f-A*n)+s*(o*e-A*p)),t[12]=-(v*(n*h-l*g)-s*(p*h-r*g)+u*(p*l-r*n)),t[13]=P*(n*h-l*g)-s*(o*h-L*g)+u*(o*l-L*n),t[14]=-(P*(p*h-r*g)-v*(o*h-L*g)+u*(o*r-L*p)),t[15]=P*(p*l-r*n)-v*(o*l-L*n)+s*(o*r-L*p),t}},76860:function(j){j.exports=V;function V(t){var b=new Float32Array(16);return b[0]=t[0],b[1]=t[1],b[2]=t[2],b[3]=t[3],b[4]=t[4],b[5]=t[5],b[6]=t[6],b[7]=t[7],b[8]=t[8],b[9]=t[9],b[10]=t[10],b[11]=t[11],b[12]=t[12],b[13]=t[13],b[14]=t[14],b[15]=t[15],b}},64492:function(j){j.exports=V;function V(t,b){return t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=b[3],t[4]=b[4],t[5]=b[5],t[6]=b[6],t[7]=b[7],t[8]=b[8],t[9]=b[9],t[10]=b[10],t[11]=b[11],t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15],t}},54212:function(j){j.exports=V;function V(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},70800:function(j){j.exports=V;function V(t){var b=t[0],P=t[1],o=t[2],L=t[3],A=t[4],v=t[5],p=t[6],r=t[7],e=t[8],s=t[9],n=t[10],l=t[11],f=t[12],u=t[13],g=t[14],h=t[15],T=b*v-P*A,c=b*p-o*A,i=b*r-L*A,d=P*p-o*v,x=P*r-L*v,w=o*r-L*p,C=e*u-s*f,y=e*g-n*f,S=e*h-l*f,M=s*g-n*u,a=s*h-l*u,E=n*h-l*g;return T*E-c*a+i*M+d*S-x*y+w*C}},61784:function(j){j.exports=V;function V(t,b){var P=b[0],o=b[1],L=b[2],A=b[3],v=P+P,p=o+o,r=L+L,e=P*v,s=o*v,n=o*p,l=L*v,f=L*p,u=L*r,g=A*v,h=A*p,T=A*r;return t[0]=1-n-u,t[1]=s+T,t[2]=l-h,t[3]=0,t[4]=s-T,t[5]=1-e-u,t[6]=f+g,t[7]=0,t[8]=l+h,t[9]=f-g,t[10]=1-e-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},91616:function(j){j.exports=V;function V(t,b,P){var o,L,A,v=P[0],p=P[1],r=P[2],e=Math.sqrt(v*v+p*p+r*r);return Math.abs(e)<1e-6?null:(e=1/e,v*=e,p*=e,r*=e,o=Math.sin(b),L=Math.cos(b),A=1-L,t[0]=v*v*A+L,t[1]=p*v*A+r*o,t[2]=r*v*A-p*o,t[3]=0,t[4]=v*p*A-r*o,t[5]=p*p*A+L,t[6]=r*p*A+v*o,t[7]=0,t[8]=v*r*A+p*o,t[9]=p*r*A-v*o,t[10]=r*r*A+L,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}},51944:function(j){j.exports=V;function V(t,b,P){var o=b[0],L=b[1],A=b[2],v=b[3],p=o+o,r=L+L,e=A+A,s=o*p,n=o*r,l=o*e,f=L*r,u=L*e,g=A*e,h=v*p,T=v*r,c=v*e;return t[0]=1-(f+g),t[1]=n+c,t[2]=l-T,t[3]=0,t[4]=n-c,t[5]=1-(s+g),t[6]=u+h,t[7]=0,t[8]=l+T,t[9]=u-h,t[10]=1-(s+f),t[11]=0,t[12]=P[0],t[13]=P[1],t[14]=P[2],t[15]=1,t}},69444:function(j){j.exports=V;function V(t,b){return t[0]=b[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=b[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=b[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},48268:function(j){j.exports=V;function V(t,b){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=b[0],t[13]=b[1],t[14]=b[2],t[15]=1,t}},21856:function(j){j.exports=V;function V(t,b){var P=Math.sin(b),o=Math.cos(b);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=P,t[7]=0,t[8]=0,t[9]=-P,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},79216:function(j){j.exports=V;function V(t,b){var P=Math.sin(b),o=Math.cos(b);return t[0]=o,t[1]=0,t[2]=-P,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=P,t[9]=0,t[10]=o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},57736:function(j){j.exports=V;function V(t,b){var P=Math.sin(b),o=Math.cos(b);return t[0]=o,t[1]=P,t[2]=0,t[3]=0,t[4]=-P,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},38848:function(j){j.exports=V;function V(t,b,P,o,L,A,v){var p=1/(P-b),r=1/(L-o),e=1/(A-v);return t[0]=A*2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A*2*r,t[6]=0,t[7]=0,t[8]=(P+b)*p,t[9]=(L+o)*r,t[10]=(v+A)*e,t[11]=-1,t[12]=0,t[13]=0,t[14]=v*A*2*e,t[15]=0,t}},36635:function(j){j.exports=V;function V(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},36524:function(j,V,t){j.exports={create:t(54212),clone:t(76860),copy:t(64492),identity:t(36635),transpose:t(86520),invert:t(4308),adjoint:t(12408),determinant:t(70800),multiply:t(80944),translate:t(35176),scale:t(68152),rotate:t(30016),rotateX:t(15456),rotateY:t(64840),rotateZ:t(4192),fromRotation:t(91616),fromRotationTranslation:t(51944),fromScaling:t(69444),fromTranslation:t(48268),fromXRotation:t(21856),fromYRotation:t(79216),fromZRotation:t(57736),fromQuat:t(61784),frustum:t(38848),perspective:t(51296),perspectiveFromFieldOfView:t(63688),ortho:t(97688),lookAt:t(56508),str:t(89412)}},4308:function(j){j.exports=V;function V(t,b){var P=b[0],o=b[1],L=b[2],A=b[3],v=b[4],p=b[5],r=b[6],e=b[7],s=b[8],n=b[9],l=b[10],f=b[11],u=b[12],g=b[13],h=b[14],T=b[15],c=P*p-o*v,i=P*r-L*v,d=P*e-A*v,x=o*r-L*p,w=o*e-A*p,C=L*e-A*r,y=s*g-n*u,S=s*h-l*u,M=s*T-f*u,a=n*h-l*g,E=n*T-f*g,m=l*T-f*h,k=c*m-i*E+d*a+x*M-w*S+C*y;return k?(k=1/k,t[0]=(p*m-r*E+e*a)*k,t[1]=(L*E-o*m-A*a)*k,t[2]=(g*C-h*w+T*x)*k,t[3]=(l*w-n*C-f*x)*k,t[4]=(r*M-v*m-e*S)*k,t[5]=(P*m-L*M+A*S)*k,t[6]=(h*d-u*C-T*i)*k,t[7]=(s*C-l*d+f*i)*k,t[8]=(v*E-p*M+e*y)*k,t[9]=(o*M-P*E-A*y)*k,t[10]=(u*w-g*d+T*c)*k,t[11]=(n*d-s*w-f*c)*k,t[12]=(p*S-v*a-r*y)*k,t[13]=(P*a-o*S+L*y)*k,t[14]=(g*i-u*x-h*c)*k,t[15]=(s*x-n*i+l*c)*k,t):null}},56508:function(j,V,t){var b=t(36635);j.exports=P;function P(o,L,A,v){var p,r,e,s,n,l,f,u,g,h,T=L[0],c=L[1],i=L[2],d=v[0],x=v[1],w=v[2],C=A[0],y=A[1],S=A[2];return Math.abs(T-C)<1e-6&&Math.abs(c-y)<1e-6&&Math.abs(i-S)<1e-6?b(o):(f=T-C,u=c-y,g=i-S,h=1/Math.sqrt(f*f+u*u+g*g),f*=h,u*=h,g*=h,p=x*g-w*u,r=w*f-d*g,e=d*u-x*f,h=Math.sqrt(p*p+r*r+e*e),h?(h=1/h,p*=h,r*=h,e*=h):(p=0,r=0,e=0),s=u*e-g*r,n=g*p-f*e,l=f*r-u*p,h=Math.sqrt(s*s+n*n+l*l),h?(h=1/h,s*=h,n*=h,l*=h):(s=0,n=0,l=0),o[0]=p,o[1]=s,o[2]=f,o[3]=0,o[4]=r,o[5]=n,o[6]=u,o[7]=0,o[8]=e,o[9]=l,o[10]=g,o[11]=0,o[12]=-(p*T+r*c+e*i),o[13]=-(s*T+n*c+l*i),o[14]=-(f*T+u*c+g*i),o[15]=1,o)}},80944:function(j){j.exports=V;function V(t,b,P){var o=b[0],L=b[1],A=b[2],v=b[3],p=b[4],r=b[5],e=b[6],s=b[7],n=b[8],l=b[9],f=b[10],u=b[11],g=b[12],h=b[13],T=b[14],c=b[15],i=P[0],d=P[1],x=P[2],w=P[3];return t[0]=i*o+d*p+x*n+w*g,t[1]=i*L+d*r+x*l+w*h,t[2]=i*A+d*e+x*f+w*T,t[3]=i*v+d*s+x*u+w*c,i=P[4],d=P[5],x=P[6],w=P[7],t[4]=i*o+d*p+x*n+w*g,t[5]=i*L+d*r+x*l+w*h,t[6]=i*A+d*e+x*f+w*T,t[7]=i*v+d*s+x*u+w*c,i=P[8],d=P[9],x=P[10],w=P[11],t[8]=i*o+d*p+x*n+w*g,t[9]=i*L+d*r+x*l+w*h,t[10]=i*A+d*e+x*f+w*T,t[11]=i*v+d*s+x*u+w*c,i=P[12],d=P[13],x=P[14],w=P[15],t[12]=i*o+d*p+x*n+w*g,t[13]=i*L+d*r+x*l+w*h,t[14]=i*A+d*e+x*f+w*T,t[15]=i*v+d*s+x*u+w*c,t}},97688:function(j){j.exports=V;function V(t,b,P,o,L,A,v){var p=1/(b-P),r=1/(o-L),e=1/(A-v);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*e,t[11]=0,t[12]=(b+P)*p,t[13]=(L+o)*r,t[14]=(v+A)*e,t[15]=1,t}},51296:function(j){j.exports=V;function V(t,b,P,o,L){var A=1/Math.tan(b/2),v=1/(o-L);return t[0]=A/P,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=A,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(L+o)*v,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*L*o*v,t[15]=0,t}},63688:function(j){j.exports=V;function V(t,b,P,o){var L=Math.tan(b.upDegrees*Math.PI/180),A=Math.tan(b.downDegrees*Math.PI/180),v=Math.tan(b.leftDegrees*Math.PI/180),p=Math.tan(b.rightDegrees*Math.PI/180),r=2/(v+p),e=2/(L+A);return t[0]=r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=0,t[7]=0,t[8]=-((v-p)*r*.5),t[9]=(L-A)*e*.5,t[10]=o/(P-o),t[11]=-1,t[12]=0,t[13]=0,t[14]=o*P/(P-o),t[15]=0,t}},30016:function(j){j.exports=V;function V(t,b,P,o){var L=o[0],A=o[1],v=o[2],p=Math.sqrt(L*L+A*A+v*v),r,e,s,n,l,f,u,g,h,T,c,i,d,x,w,C,y,S,M,a,E,m,k,I;return Math.abs(p)<1e-6?null:(p=1/p,L*=p,A*=p,v*=p,r=Math.sin(P),e=Math.cos(P),s=1-e,n=b[0],l=b[1],f=b[2],u=b[3],g=b[4],h=b[5],T=b[6],c=b[7],i=b[8],d=b[9],x=b[10],w=b[11],C=L*L*s+e,y=A*L*s+v*r,S=v*L*s-A*r,M=L*A*s-v*r,a=A*A*s+e,E=v*A*s+L*r,m=L*v*s+A*r,k=A*v*s-L*r,I=v*v*s+e,t[0]=n*C+g*y+i*S,t[1]=l*C+h*y+d*S,t[2]=f*C+T*y+x*S,t[3]=u*C+c*y+w*S,t[4]=n*M+g*a+i*E,t[5]=l*M+h*a+d*E,t[6]=f*M+T*a+x*E,t[7]=u*M+c*a+w*E,t[8]=n*m+g*k+i*I,t[9]=l*m+h*k+d*I,t[10]=f*m+T*k+x*I,t[11]=u*m+c*k+w*I,b!==t&&(t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15]),t)}},15456:function(j){j.exports=V;function V(t,b,P){var o=Math.sin(P),L=Math.cos(P),A=b[4],v=b[5],p=b[6],r=b[7],e=b[8],s=b[9],n=b[10],l=b[11];return b!==t&&(t[0]=b[0],t[1]=b[1],t[2]=b[2],t[3]=b[3],t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15]),t[4]=A*L+e*o,t[5]=v*L+s*o,t[6]=p*L+n*o,t[7]=r*L+l*o,t[8]=e*L-A*o,t[9]=s*L-v*o,t[10]=n*L-p*o,t[11]=l*L-r*o,t}},64840:function(j){j.exports=V;function V(t,b,P){var o=Math.sin(P),L=Math.cos(P),A=b[0],v=b[1],p=b[2],r=b[3],e=b[8],s=b[9],n=b[10],l=b[11];return b!==t&&(t[4]=b[4],t[5]=b[5],t[6]=b[6],t[7]=b[7],t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15]),t[0]=A*L-e*o,t[1]=v*L-s*o,t[2]=p*L-n*o,t[3]=r*L-l*o,t[8]=A*o+e*L,t[9]=v*o+s*L,t[10]=p*o+n*L,t[11]=r*o+l*L,t}},4192:function(j){j.exports=V;function V(t,b,P){var o=Math.sin(P),L=Math.cos(P),A=b[0],v=b[1],p=b[2],r=b[3],e=b[4],s=b[5],n=b[6],l=b[7];return b!==t&&(t[8]=b[8],t[9]=b[9],t[10]=b[10],t[11]=b[11],t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15]),t[0]=A*L+e*o,t[1]=v*L+s*o,t[2]=p*L+n*o,t[3]=r*L+l*o,t[4]=e*L-A*o,t[5]=s*L-v*o,t[6]=n*L-p*o,t[7]=l*L-r*o,t}},68152:function(j){j.exports=V;function V(t,b,P){var o=P[0],L=P[1],A=P[2];return t[0]=b[0]*o,t[1]=b[1]*o,t[2]=b[2]*o,t[3]=b[3]*o,t[4]=b[4]*L,t[5]=b[5]*L,t[6]=b[6]*L,t[7]=b[7]*L,t[8]=b[8]*A,t[9]=b[9]*A,t[10]=b[10]*A,t[11]=b[11]*A,t[12]=b[12],t[13]=b[13],t[14]=b[14],t[15]=b[15],t}},89412:function(j){j.exports=V;function V(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}},35176:function(j){j.exports=V;function V(t,b,P){var o=P[0],L=P[1],A=P[2],v,p,r,e,s,n,l,f,u,g,h,T;return b===t?(t[12]=b[0]*o+b[4]*L+b[8]*A+b[12],t[13]=b[1]*o+b[5]*L+b[9]*A+b[13],t[14]=b[2]*o+b[6]*L+b[10]*A+b[14],t[15]=b[3]*o+b[7]*L+b[11]*A+b[15]):(v=b[0],p=b[1],r=b[2],e=b[3],s=b[4],n=b[5],l=b[6],f=b[7],u=b[8],g=b[9],h=b[10],T=b[11],t[0]=v,t[1]=p,t[2]=r,t[3]=e,t[4]=s,t[5]=n,t[6]=l,t[7]=f,t[8]=u,t[9]=g,t[10]=h,t[11]=T,t[12]=v*o+s*L+u*A+b[12],t[13]=p*o+n*L+g*A+b[13],t[14]=r*o+l*L+h*A+b[14],t[15]=e*o+f*L+T*A+b[15]),t}},86520:function(j){j.exports=V;function V(t,b){if(t===b){var P=b[1],o=b[2],L=b[3],A=b[6],v=b[7],p=b[11];t[1]=b[4],t[2]=b[8],t[3]=b[12],t[4]=P,t[6]=b[9],t[7]=b[13],t[8]=o,t[9]=A,t[11]=b[14],t[12]=L,t[13]=v,t[14]=p}else t[0]=b[0],t[1]=b[4],t[2]=b[8],t[3]=b[12],t[4]=b[1],t[5]=b[5],t[6]=b[9],t[7]=b[13],t[8]=b[2],t[9]=b[6],t[10]=b[10],t[11]=b[14],t[12]=b[3],t[13]=b[7],t[14]=b[11],t[15]=b[15];return t}},23352:function(j,V,t){var b=t(42771),P=t(55616),o=t(28624),L=t(55212),A=t(60463),v=t(72160),p=t(33888),r=t(14144),e=t(51160),s=t(58908),n=t(65819),l=t(23464),f=t(63768),u=t(50896),g=t(71920),h=t(47520),T=t(308),c=T.nextPow2,i=new A,d=!1;if(document.body){var x=document.body.appendChild(document.createElement("div"));x.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(x).fontStretch&&(d=!0),document.body.removeChild(x)}var w=function(S){C(S)?(S={regl:S},this.gl=S.regl._gl):this.gl=L(S),this.shader=i.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=S.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),i.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(s(S)?S:{})};w.prototype.createShader=function(){var S=this.regl,M=S({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:S.prop("count"),offset:S.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:S.this("sizeBuffer")},width:{offset:0,stride:8,buffer:S.this("sizeBuffer")},char:S.this("charBuffer"),position:S.this("position")},uniforms:{atlasSize:function(E,m){return[m.atlas.width,m.atlas.height]},atlasDim:function(E,m){return[m.atlas.cols,m.atlas.rows]},atlas:function(E,m){return m.atlas.texture},charStep:function(E,m){return m.atlas.step},em:function(E,m){return m.atlas.em},color:S.prop("color"),opacity:S.prop("opacity"),viewport:S.this("viewportArray"),scale:S.this("scale"),align:S.prop("align"),baseline:S.prop("baseline"),translate:S.this("translate"),positionOffset:S.prop("positionOffset")},primitive:"points",viewport:S.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),a={};return{regl:S,draw:M,atlas:a}},w.prototype.update=function(S){var M=this;if(typeof S=="string")S={text:S};else if(!S)return;S=P(S,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),S.opacity!=null&&(Array.isArray(S.opacity)?this.opacity=S.opacity.map(function(Tt){return parseFloat(Tt)}):this.opacity=parseFloat(S.opacity)),S.viewport!=null&&(this.viewport=e(S.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),S.kerning!=null&&(this.kerning=S.kerning),S.offset!=null&&(typeof S.offset=="number"&&(S.offset=[S.offset,0]),this.positionOffset=h(S.offset)),S.direction&&(this.direction=S.direction),S.range&&(this.range=S.range,this.scale=[1/(S.range[2]-S.range[0]),1/(S.range[3]-S.range[1])],this.translate=[-S.range[0],-S.range[1]]),S.scale&&(this.scale=S.scale),S.translate&&(this.translate=S.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!S.font&&(S.font=w.baseFontSize+"px sans-serif");var a=!1,E=!1;if(S.font&&(Array.isArray(S.font)?S.font:[S.font]).forEach(function(Tt,Bt){if(typeof Tt=="string")try{Tt=b.parse(Tt)}catch{Tt=b.parse(w.baseFontSize+"px "+Tt)}else{var Gt=Tt.style,te=Tt.weight,Wt=Tt.stretch,jt=Tt.variant;Tt=b.parse(b.stringify(Tt)),Gt&&(Tt.style=Gt),te&&(Tt.weight=te),Wt&&(Tt.stretch=Wt),jt&&(Tt.variant=jt)}var ie=b.stringify({size:w.baseFontSize,family:Tt.family,stretch:d?Tt.stretch:void 0,variant:Tt.variant,weight:Tt.weight,style:Tt.style}),ue=n(Tt.size),fe=Math.round(ue[0]*l(ue[1]));if(fe!==M.fontSize[Bt]&&(E=!0,M.fontSize[Bt]=fe),(!M.font[Bt]||ie!=M.font[Bt].baseString)&&(a=!0,M.font[Bt]=w.fonts[ie],!M.font[Bt])){var pe=Tt.family.join(", "),Te=[Tt.style];Tt.style!=Tt.variant&&Te.push(Tt.variant),Tt.variant!=Tt.weight&&Te.push(Tt.weight),d&&Tt.weight!=Tt.stretch&&Te.push(Tt.stretch),M.font[Bt]={baseString:ie,family:pe,weight:Tt.weight,stretch:Tt.stretch,style:Tt.style,variant:Tt.variant,width:{},kerning:{},metrics:g(pe,{origin:"top",fontSize:w.baseFontSize,fontStyle:Te.join(" ")})},w.fonts[ie]=M.font[Bt]}}),(a||E)&&this.font.forEach(function(Tt,Bt){var Gt=b.stringify({size:M.fontSize[Bt],family:Tt.family,stretch:d?Tt.stretch:void 0,variant:Tt.variant,weight:Tt.weight,style:Tt.style});if(M.fontAtlas[Bt]=M.shader.atlas[Gt],!M.fontAtlas[Bt]){var te=Tt.metrics;M.shader.atlas[Gt]=M.fontAtlas[Bt]={fontString:Gt,step:Math.ceil(M.fontSize[Bt]*te.bottom*.5)*2,em:M.fontSize[Bt],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:M.regl.texture()}}S.text==null&&(S.text=M.text)}),typeof S.text=="string"&&S.position&&S.position.length>2){for(var m=Array(S.position.length*.5),k=0;k<m.length;k++)m[k]=S.text;S.text=m}var I;if(S.text!=null||a){if(this.textOffsets=[0],Array.isArray(S.text)){this.count=S.text[0].length,this.counts=[this.count];for(var O=1;O<S.text.length;O++)this.textOffsets[O]=this.textOffsets[O-1]+S.text[O-1].length,this.count+=S.text[O].length,this.counts.push(S.text[O].length);this.text=S.text.join("")}else this.text=S.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(Tt,Bt){w.atlasContext.font=Tt.baseString;for(var Gt=M.fontAtlas[Bt],te=0;te<M.text.length;te++){var Wt=M.text.charAt(te);if(Gt.ids[Wt]==null&&(Gt.ids[Wt]=Gt.chars.length,Gt.chars.push(Wt),I.push(Wt)),Tt.width[Wt]==null&&(Tt.width[Wt]=w.atlasContext.measureText(Wt).width/w.baseFontSize,M.kerning)){var jt=[];for(var ie in Tt.width)jt.push(ie+Wt,Wt+ie);u(Tt.kerning,f(Tt.family,{pairs:jt}))}}})}if(S.position)if(S.position.length>2){for(var z=!S.position[0].length,B=r.mallocFloat(this.count*2),F=0,_=0;F<this.counts.length;F++){var N=this.counts[F];if(z)for(var G=0;G<N;G++)B[_++]=S.position[F*2],B[_++]=S.position[F*2+1];else for(var X=0;X<N;X++)B[_++]=S.position[F][0],B[_++]=S.position[F][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),r.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:S.position};if(S.text||a){var $=r.mallocUint8(this.count),et=r.mallocFloat(this.count*2);this.textWidth=[];for(var ot=0,nt=0;ot<this.counts.length;ot++){for(var Z=this.counts[ot],Q=this.font[ot]||this.font[0],W=this.fontAtlas[ot]||this.fontAtlas[0],J=0;J<Z;J++){var it=this.text.charAt(nt),K=this.text.charAt(nt-1);if($[nt]=W.ids[it],et[nt*2]=Q.width[it],J){var H=et[nt*2-2],at=et[nt*2],tt=et[nt*2-1],lt=tt+H*.5+at*.5;if(this.kerning){var dt=Q.kerning[K+it];dt&&(lt+=dt*.001)}et[nt*2+1]=lt}else et[nt*2+1]=et[nt*2]*.5;nt++}this.textWidth.push(et.length?et[nt*2-2]*.5+et[nt*2-1]:0)}S.align||(S.align=this.align),this.charBuffer({data:$,type:"uint8",usage:"stream"}),this.sizeBuffer({data:et,type:"float",usage:"stream"}),r.freeUint8($),r.freeFloat(et),I.length&&this.font.forEach(function(Tt,Bt){var Gt=M.fontAtlas[Bt],te=Gt.step,Wt=Math.floor(w.maxAtlasSize/te),jt=Math.min(Wt,Gt.chars.length),ie=Math.ceil(Gt.chars.length/jt),ue=c(jt*te),fe=c(ie*te);Gt.width=ue,Gt.height=fe,Gt.rows=ie,Gt.cols=jt,Gt.em&&Gt.texture({data:p({canvas:w.atlasCanvas,font:Gt.fontString,chars:Gt.chars,shape:[ue,fe],step:[te,te]})})})}if(S.align&&(this.align=S.align,this.alignOffset=this.textWidth.map(function(Tt,Bt){var Gt=Array.isArray(M.align)?M.align.length>1?M.align[Bt]:M.align[0]:M.align;if(typeof Gt=="number")return Gt;switch(Gt){case"right":case"end":return-Tt;case"center":case"centre":case"middle":return-Tt*.5}return 0})),this.baseline==null&&S.baseline==null&&(S.baseline=0),S.baseline!=null&&(this.baseline=S.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Tt,Bt){var Gt=(M.font[Bt]||M.font[0]).metrics,te=0;return te+=Gt.bottom*.5,typeof Tt=="number"?te+=Tt-Gt.baseline:te+=-Gt[Tt],te*=-1,te})),S.color!=null)if(S.color||(S.color="transparent"),typeof S.color=="string"||!isNaN(S.color))this.color=v(S.color,"uint8");else{var mt;if(typeof S.color[0]=="number"&&S.color.length>this.counts.length){var gt=S.color.length;mt=r.mallocUint8(gt);for(var Mt=(S.color.subarray||S.color.slice).bind(S.color),Lt=0;Lt<gt;Lt+=4)mt.set(v(Mt(Lt,Lt+4),"uint8"),Lt)}else{var zt=S.color.length;mt=r.mallocUint8(zt*4);for(var xt=0;xt<zt;xt++)mt.set(v(S.color[xt]||0,"uint8"),xt*4)}this.color=mt}if(S.position||S.text||S.color||S.baseline||S.align||S.font||S.offset||S.opacity){var Ct=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Ct){var wt=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(wt);for(var Rt=0;Rt<this.batch.length;Rt++)this.batch[Rt]={count:this.counts.length>1?this.counts[Rt]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Rt]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Rt*4,Rt*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Rt]:this.opacity,baseline:this.baselineOffset[Rt]!=null?this.baselineOffset[Rt]:this.baselineOffset[0],align:this.align?this.alignOffset[Rt]!=null?this.alignOffset[Rt]:this.alignOffset[0]:0,atlas:this.fontAtlas[Rt]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Rt*2,Rt*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},w.prototype.destroy=function(){},w.prototype.kerning=!0,w.prototype.position={constant:new Float32Array(2)},w.prototype.translate=null,w.prototype.scale=null,w.prototype.font=null,w.prototype.text="",w.prototype.positionOffset=[0,0],w.prototype.opacity=1,w.prototype.color=new Uint8Array([0,0,0,255]),w.prototype.alignOffset=[0,0],w.maxAtlasSize=1024,w.atlasCanvas=document.createElement("canvas"),w.atlasContext=w.atlasCanvas.getContext("2d",{alpha:!1}),w.baseFontSize=64,w.fonts={};function C(y){return typeof y=="function"&&y._gl&&y.prop&&y.texture&&y.buffer}j.exports=w},55212:function(j,V,t){var b=t(55616);j.exports=function(r){if(r?typeof r=="string"&&(r={container:r}):r={},o(r)?r={container:r}:L(r)?r={container:r}:A(r)?r={gl:r}:r=b(r,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),r.pixelRatio||(r.pixelRatio=t.g.pixelRatio||1),r.gl)return r.gl;if(r.canvas&&(r.container=r.canvas.parentNode),r.container){if(typeof r.container=="string"){var e=document.querySelector(r.container);if(!e)throw Error("Element "+r.container+" is not found");r.container=e}o(r.container)?(r.canvas=r.container,r.container=r.canvas.parentNode):r.canvas||(r.canvas=v(),r.container.appendChild(r.canvas),P(r))}else if(!r.canvas)if(typeof document<"u")r.container=document.body||document.documentElement,r.canvas=v(),r.container.appendChild(r.canvas),P(r);else throw Error("Not DOM environment. Use headless-gl.");return r.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{r.gl=r.canvas.getContext(s,r.attrs)}catch{}return r.gl}),r.gl};function P(p){if(p.container)if(p.container==document.body)document.body.style.width||(p.canvas.width=p.width||p.pixelRatio*t.g.innerWidth),document.body.style.height||(p.canvas.height=p.height||p.pixelRatio*t.g.innerHeight);else{var r=p.container.getBoundingClientRect();p.canvas.width=p.width||r.right-r.left,p.canvas.height=p.height||r.bottom-r.top}}function o(p){return typeof p.getContext=="function"&&"width"in p&&"height"in p}function L(p){return typeof p.nodeName=="string"&&typeof p.appendChild=="function"&&typeof p.getBoundingClientRect=="function"}function A(p){return typeof p.drawArrays=="function"||typeof p.drawElements=="function"}function v(){var p=document.createElement("canvas");return p.style.position="absolute",p.style.top=0,p.style.left=0,p}},26444:function(j){j.exports=function(V){typeof V=="string"&&(V=[V]);for(var t=[].slice.call(arguments,1),b=[],P=0;P<V.length-1;P++)b.push(V[P],t[P]||"");return b.push(V[P]),b.join("")}},2304:function(j,V,t){var b=t(53664),P=b("%Object.getOwnPropertyDescriptor%",!0);if(P)try{P([],"length")}catch{P=null}j.exports=P},52264:function(j,V,t){var b=t(24200),P;typeof t.g.matchMedia=="function"?P=!t.g.matchMedia("(hover: none)").matches:P=b,j.exports=P},89184:function(j,V,t){var b=t(24200);function P(){var o=!1;try{var L=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,L),window.removeEventListener("test",null,L)}catch{o=!1}return o}j.exports=b&&P()},39640:function(j,V,t){var b=t(53664),P=b("%Object.defineProperty%",!0),o=function(){if(P)try{return P({},"a",{value:1}),!0}catch{return!1}return!1};o.hasArrayLengthDefineBug=function(){if(!o())return null;try{return P([],"length",{value:1}).length!==1}catch{return!0}},j.exports=o},69572:function(j){var V={foo:{}},t=Object;j.exports=function(){return{__proto__:V}.foo===V.foo&&!({__proto__:null}instanceof t)}},71080:function(j,V,t){var b=typeof Symbol<"u"&&Symbol,P=t(89320);j.exports=function(){return typeof b!="function"||typeof Symbol!="function"||typeof b("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:P()}},89320:function(j){j.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},b=Symbol("test"),P=Object(b);if(typeof b=="string"||Object.prototype.toString.call(b)!=="[object Symbol]"||Object.prototype.toString.call(P)!=="[object Symbol]")return!1;var o=42;t[b]=o;for(b in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var L=Object.getOwnPropertySymbols(t);if(L.length!==1||L[0]!==b||!Object.prototype.propertyIsEnumerable.call(t,b))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var A=Object.getOwnPropertyDescriptor(t,b);if(A.value!==o||A.enumerable!==!0)return!1}return!0}},46672:function(j,V,t){var b=t(89320);j.exports=function(){return b()&&!!Symbol.toStringTag}},92064:function(j,V,t){var b=Function.prototype.call,P=Object.prototype.hasOwnProperty,o=t(8844);j.exports=o.call(b,P)},35984:function(j,V){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */V.read=function(t,b,P,o,L){var A,v,p=L*8-o-1,r=(1<<p)-1,e=r>>1,s=-7,n=P?L-1:0,l=P?-1:1,f=t[b+n];for(n+=l,A=f&(1<<-s)-1,f>>=-s,s+=p;s>0;A=A*256+t[b+n],n+=l,s-=8);for(v=A&(1<<-s)-1,A>>=-s,s+=o;s>0;v=v*256+t[b+n],n+=l,s-=8);if(A===0)A=1-e;else{if(A===r)return v?NaN:(f?-1:1)*(1/0);v=v+Math.pow(2,o),A=A-e}return(f?-1:1)*v*Math.pow(2,A-o)},V.write=function(t,b,P,o,L,A){var v,p,r,e=A*8-L-1,s=(1<<e)-1,n=s>>1,l=L===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=o?0:A-1,u=o?1:-1,g=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(p=isNaN(b)?1:0,v=s):(v=Math.floor(Math.log(b)/Math.LN2),b*(r=Math.pow(2,-v))<1&&(v--,r*=2),v+n>=1?b+=l/r:b+=l*Math.pow(2,1-n),b*r>=2&&(v++,r/=2),v+n>=s?(p=0,v=s):v+n>=1?(p=(b*r-1)*Math.pow(2,L),v=v+n):(p=b*Math.pow(2,n-1)*Math.pow(2,L),v=0));L>=8;t[P+f]=p&255,f+=u,p/=256,L-=8);for(v=v<<L|p,e+=L;e>0;t[P+f]=v&255,f+=u,v/=256,e-=8);t[P+f-u]|=g*128}},6768:function(j){typeof Object.create=="function"?j.exports=function(t,b){b&&(t.super_=b,t.prototype=Object.create(b.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:j.exports=function(t,b){if(b){t.super_=b;var P=function(){};P.prototype=b.prototype,t.prototype=new P,t.prototype.constructor=t}}},91148:function(j,V,t){var b=t(46672)(),P=t(99676),o=P("Object.prototype.toString"),L=function(r){return b&&r&&typeof r=="object"&&Symbol.toStringTag in r?!1:o(r)==="[object Arguments]"},A=function(r){return L(r)?!0:r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&o(r)!=="[object Array]"&&o(r.callee)==="[object Function]"},v=function(){return L(arguments)}();L.isLegacyArguments=A,j.exports=v?L:A},24200:function(j){j.exports=!0},90720:function(j){var V=Function.prototype.toString,t=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,b,P;if(typeof t=="function"&&typeof Object.defineProperty=="function")try{b=Object.defineProperty({},"length",{get:function(){throw P}}),P={},t(function(){throw 42},null,b)}catch(T){T!==P&&(t=null)}else t=null;var o=/^\s*class\b/,L=function(c){try{var i=V.call(c);return o.test(i)}catch{return!1}},A=function(c){try{return L(c)?!1:(V.call(c),!0)}catch{return!1}},v=Object.prototype.toString,p="[object Object]",r="[object Function]",e="[object GeneratorFunction]",s="[object HTMLAllCollection]",n="[object HTML document.all class]",l="[object HTMLCollection]",f=typeof Symbol=="function"&&!!Symbol.toStringTag,u=!(0 in[,]),g=function(){return!1};if(typeof document=="object"){var h=document.all;v.call(h)===v.call(document.all)&&(g=function(c){if((u||!c)&&(typeof c>"u"||typeof c=="object"))try{var i=v.call(c);return(i===s||i===n||i===l||i===p)&&c("")==null}catch{}return!1})}j.exports=t?function(c){if(g(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;try{t(c,null,b)}catch(i){if(i!==P)return!1}return!L(c)&&A(c)}:function(c){if(g(c))return!0;if(!c||typeof c!="function"&&typeof c!="object")return!1;if(f)return A(c);if(L(c))return!1;var i=v.call(c);return i!==r&&i!==e&&!/^\[object HTML/.test(i)?!1:A(c)}},84420:function(j,V,t){var b=Object.prototype.toString,P=Function.prototype.toString,o=/^\s*(?:function)?\*/,L=t(46672)(),A=Object.getPrototypeOf,v=function(){if(!L)return!1;try{return Function("return function*() {}")()}catch{}},p;j.exports=function(e){if(typeof e!="function")return!1;if(o.test(P.call(e)))return!0;if(!L){var s=b.call(e);return s==="[object GeneratorFunction]"}if(!A)return!1;if(typeof p>"u"){var n=v();p=n?A(n):!1}return A(e)===p}},96604:function(j){j.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},85992:function(j){j.exports=function(t){return t!==t}},1560:function(j,V,t){var b=t(57916),P=t(81288),o=t(85992),L=t(57740),A=t(59736),v=b(L(),Number);P(v,{getPolyfill:L,implementation:o,shim:A}),j.exports=v},57740:function(j,V,t){var b=t(85992);j.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:b}},59736:function(j,V,t){var b=t(81288),P=t(57740);j.exports=function(){var L=P();return b(Number,{isNaN:L},{isNaN:function(){return Number.isNaN!==L}}),L}},18400:function(j){j.exports=function(V){var t=typeof V;return V!==null&&(t==="object"||t==="function")}},58908:function(j){var V=Object.prototype.toString;j.exports=function(t){var b;return V.call(t)==="[object Object]"&&(b=Object.getPrototypeOf(t),b===null||b===Object.getPrototypeOf({}))}},94576:function(j){j.exports=function(V){for(var t=V.length,b,P=0;P<t;P++)if(b=V.charCodeAt(P),(b<9||b>13)&&b!==32&&b!==133&&b!==160&&b!==5760&&b!==6158&&(b<8192||b>8205)&&b!==8232&&b!==8233&&b!==8239&&b!==8287&&b!==8288&&b!==12288&&b!==65279)return!1;return!0}},53520:function(j){j.exports=function(t){return typeof t!="string"?!1:(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}},7728:function(j,V,t){var b=t(46492),P=t(63436),o=t(99676),L=o("Object.prototype.toString"),A=t(46672)(),v=t(2304),p=typeof globalThis>"u"?t.g:globalThis,r=P(),e=o("Array.prototype.indexOf",!0)||function(g,h){for(var T=0;T<g.length;T+=1)if(g[T]===h)return T;return-1},s=o("String.prototype.slice"),n={},l=Object.getPrototypeOf;A&&v&&l&&b(r,function(u){var g=new p[u];if(Symbol.toStringTag in g){var h=l(g),T=v(h,Symbol.toStringTag);if(!T){var c=l(h);T=v(c,Symbol.toStringTag)}n[u]=T.get}});var f=function(g){var h=!1;return b(n,function(T,c){if(!h)try{h=T.call(g)===c}catch{}}),h};j.exports=function(g){if(!g||typeof g!="object")return!1;if(!A||!(Symbol.toStringTag in g)){var h=s(L(g),8,-1);return e(r,h)>-1}return v?f(g):!1}},76244:function(j){j.exports=Math.log2||function(V){return Math.log(V)*Math.LOG2E}},62644:function(j,V,t){j.exports=P;var b=t(93784);function P(o,L){L||(L=o,o=window);var A=0,v=0,p=0,r={shift:!1,alt:!1,control:!1,meta:!1},e=!1;function s(x){var w=!1;return"altKey"in x&&(w=w||x.altKey!==r.alt,r.alt=!!x.altKey),"shiftKey"in x&&(w=w||x.shiftKey!==r.shift,r.shift=!!x.shiftKey),"ctrlKey"in x&&(w=w||x.ctrlKey!==r.control,r.control=!!x.ctrlKey),"metaKey"in x&&(w=w||x.metaKey!==r.meta,r.meta=!!x.metaKey),w}function n(x,w){var C=b.x(w),y=b.y(w);"buttons"in w&&(x=w.buttons|0),(x!==A||C!==v||y!==p||s(w))&&(A=x|0,v=C||0,p=y||0,L&&L(A,v,p,r))}function l(x){n(0,x)}function f(){(A||v||p||r.shift||r.alt||r.meta||r.control)&&(v=p=0,A=0,r.shift=r.alt=r.control=r.meta=!1,L&&L(0,0,0,r))}function u(x){s(x)&&L&&L(A,v,p,r)}function g(x){b.buttons(x)===0?n(0,x):n(A,x)}function h(x){n(A|b.buttons(x),x)}function T(x){n(A&~b.buttons(x),x)}function c(){e||(e=!0,o.addEventListener("mousemove",g),o.addEventListener("mousedown",h),o.addEventListener("mouseup",T),o.addEventListener("mouseleave",l),o.addEventListener("mouseenter",l),o.addEventListener("mouseout",l),o.addEventListener("mouseover",l),o.addEventListener("blur",f),o.addEventListener("keyup",u),o.addEventListener("keydown",u),o.addEventListener("keypress",u),o!==window&&(window.addEventListener("blur",f),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function i(){e&&(e=!1,o.removeEventListener("mousemove",g),o.removeEventListener("mousedown",h),o.removeEventListener("mouseup",T),o.removeEventListener("mouseleave",l),o.removeEventListener("mouseenter",l),o.removeEventListener("mouseout",l),o.removeEventListener("mouseover",l),o.removeEventListener("blur",f),o.removeEventListener("keyup",u),o.removeEventListener("keydown",u),o.removeEventListener("keypress",u),o!==window&&(window.removeEventListener("blur",f),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}c();var d={element:o};return Object.defineProperties(d,{enabled:{get:function(){return e},set:function(x){x?c():i()},enumerable:!0},buttons:{get:function(){return A},enumerable:!0},x:{get:function(){return v},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),d}},29128:function(j){var V={left:0,top:0};j.exports=t;function t(P,o,L){o=o||P.currentTarget||P.srcElement,Array.isArray(L)||(L=[0,0]);var A=P.clientX||0,v=P.clientY||0,p=b(o);return L[0]=A-p.left,L[1]=v-p.top,L}function b(P){return P===window||P===document||P===document.body?V:P.getBoundingClientRect()}},93784:function(j,V){function t(L){if(typeof L=="object"){if("buttons"in L)return L.buttons;if("which"in L){var A=L.which;if(A===2)return 4;if(A===3)return 2;if(A>0)return 1<<A-1}else if("button"in L){var A=L.button;if(A===1)return 4;if(A===2)return 2;if(A>=0)return 1<<A}}return 0}V.buttons=t;function b(L){return L.target||L.srcElement||window}V.element=b;function P(L){if(typeof L=="object"){if("offsetX"in L)return L.offsetX;var A=b(L),v=A.getBoundingClientRect();return L.clientX-v.left}return 0}V.x=P;function o(L){if(typeof L=="object"){if("offsetY"in L)return L.offsetY;var A=b(L),v=A.getBoundingClientRect();return L.clientY-v.top}return 0}V.y=o},97264:function(j,V,t){var b=t(23464);j.exports=P;function P(o,L,A){typeof o=="function"&&(A=!!L,L=o,o=window);var v=b("ex",o),p=function(r){A&&r.preventDefault();var e=r.deltaX||0,s=r.deltaY||0,n=r.deltaZ||0,l=r.deltaMode,f=1;switch(l){case 1:f=v;break;case 2:f=window.innerHeight;break}if(e*=f,s*=f,n*=f,e||s||n)return L(e,s,n,r)};return o.addEventListener("wheel",p),p}},88324:function(j,V,t){var b;/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(o,L,A){L[o]=L[o]||A(),j.exports?j.exports=L[o]:(b=function(){return L[o]}.call(V,t,V,j),b!==void 0&&(j.exports=b))})("Promise",typeof t.g<"u"?t.g:this,function(){var o,L,A,v=Object.prototype.toString,p=typeof setImmediate<"u"?function(d){return setImmediate(d)}:setTimeout;try{Object.defineProperty({},"x",{}),o=function(d,x,w,C){return Object.defineProperty(d,x,{value:w,writable:!0,configurable:C!==!1})}}catch{o=function(x,w,C){return x[w]=C,x}}A=function(){var d,x,w;function C(y,S){this.fn=y,this.self=S,this.next=void 0}return{add:function(S,M){w=new C(S,M),x?x.next=w:d=w,x=w,w=void 0},drain:function(){var S=d;for(d=x=L=void 0;S;)S.fn.call(S.self),S=S.next}}}();function r(i,d){A.add(i,d),L||(L=p(A.drain))}function e(i){var d,x=typeof i;return i!=null&&(x=="object"||x=="function")&&(d=i.then),typeof d=="function"?d:!1}function s(){for(var i=0;i<this.chain.length;i++)n(this,this.state===1?this.chain[i].success:this.chain[i].failure,this.chain[i]);this.chain.length=0}function n(i,d,x){var w,C;try{d===!1?x.reject(i.msg):(d===!0?w=i.msg:w=d.call(void 0,i.msg),w===x.promise?x.reject(TypeError("Promise-chain cycle")):(C=e(w))?C.call(w,x.resolve,x.reject):x.resolve(w))}catch(y){x.reject(y)}}function l(i){var d,x=this;if(!x.triggered){x.triggered=!0,x.def&&(x=x.def);try{(d=e(i))?r(function(){var w=new g(x);try{d.call(i,function(){l.apply(w,arguments)},function(){f.apply(w,arguments)})}catch(C){f.call(w,C)}}):(x.msg=i,x.state=1,x.chain.length>0&&r(s,x))}catch(w){f.call(new g(x),w)}}}function f(i){var d=this;d.triggered||(d.triggered=!0,d.def&&(d=d.def),d.msg=i,d.state=2,d.chain.length>0&&r(s,d))}function u(i,d,x,w){for(var C=0;C<d.length;C++)(function(S){i.resolve(d[S]).then(function(a){x(S,a)},w)})(C)}function g(i){this.def=i,this.triggered=!1}function h(i){this.promise=i,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function T(i){if(typeof i!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var d=new h(this);this.then=function(w,C){var y={success:typeof w=="function"?w:!0,failure:typeof C=="function"?C:!1};return y.promise=new this.constructor(function(M,a){if(typeof M!="function"||typeof a!="function")throw TypeError("Not a function");y.resolve=M,y.reject=a}),d.chain.push(y),d.state!==0&&r(s,d),y.promise},this.catch=function(w){return this.then(void 0,w)};try{i.call(void 0,function(w){l.call(d,w)},function(w){f.call(d,w)})}catch(x){f.call(d,x)}}var c=o({},"constructor",T,!1);return T.prototype=c,o(c,"__NPO__",0,!1),o(T,"resolve",function(d){var x=this;return d&&typeof d=="object"&&d.__NPO__===1?d:new x(function(C,y){if(typeof C!="function"||typeof y!="function")throw TypeError("Not a function");C(d)})}),o(T,"reject",function(d){return new this(function(w,C){if(typeof w!="function"||typeof C!="function")throw TypeError("Not a function");C(d)})}),o(T,"all",function(d){var x=this;return v.call(d)!="[object Array]"?x.reject(TypeError("Not an array")):d.length===0?x.resolve([]):new x(function(C,y){if(typeof C!="function"||typeof y!="function")throw TypeError("Not a function");var S=d.length,M=Array(S),a=0;u(x,d,function(m,k){M[m]=k,++a===S&&C(M)},y)})}),o(T,"race",function(d){var x=this;return v.call(d)!="[object Array]"?x.reject(TypeError("Not an array")):new x(function(C,y){if(typeof C!="function"||typeof y!="function")throw TypeError("Not a function");u(x,d,function(M,a){C(a)},y)})}),T})},48816:function(j){var V=Math.PI,t=v(120);j.exports=b;function b(p){for(var r,e=[],s=0,n=0,l=0,f=0,u=null,g=null,h=0,T=0,c=0,i=p.length;c<i;c++){var d=p[c],x=d[0];switch(x){case"M":l=d[1],f=d[2];break;case"A":d=L(h,T,d[1],d[2],v(d[3]),d[4],d[5],d[6],d[7]),d.unshift("C"),d.length>7&&(e.push(d.splice(0,7)),d.unshift("C"));break;case"S":var w=h,C=T;(r=="C"||r=="S")&&(w+=w-s,C+=C-n),d=["C",w,C,d[1],d[2],d[3],d[4]];break;case"T":r=="Q"||r=="T"?(u=h*2-u,g=T*2-g):(u=h,g=T),d=o(h,T,u,g,d[1],d[2]);break;case"Q":u=d[1],g=d[2],d=o(h,T,d[1],d[2],d[3],d[4]);break;case"L":d=P(h,T,d[1],d[2]);break;case"H":d=P(h,T,d[1],T);break;case"V":d=P(h,T,h,d[1]);break;case"Z":d=P(h,T,l,f);break}r=x,h=d[d.length-2],T=d[d.length-1],d.length>4?(s=d[d.length-4],n=d[d.length-3]):(s=h,n=T),e.push(d)}return e}function P(p,r,e,s){return["C",p,r,e,s,e,s]}function o(p,r,e,s,n,l){return["C",p/3+.6666666666666666*e,r/3+.6666666666666666*s,n/3+.6666666666666666*e,l/3+.6666666666666666*s,n,l]}function L(p,r,e,s,n,l,f,u,g,h){if(h)M=h[0],a=h[1],y=h[2],S=h[3];else{var T=A(p,r,-n);p=T.x,r=T.y,T=A(u,g,-n),u=T.x,g=T.y;var c=(p-u)/2,i=(r-g)/2,d=c*c/(e*e)+i*i/(s*s);d>1&&(d=Math.sqrt(d),e=d*e,s=d*s);var x=e*e,w=s*s,C=(l==f?-1:1)*Math.sqrt(Math.abs((x*w-x*i*i-w*c*c)/(x*i*i+w*c*c)));C==1/0&&(C=1);var y=C*e*i/s+(p+u)/2,S=C*-s*c/e+(r+g)/2,M=Math.asin(((r-S)/s).toFixed(9)),a=Math.asin(((g-S)/s).toFixed(9));M=p<y?V-M:M,a=u<y?V-a:a,M<0&&(M=V*2+M),a<0&&(a=V*2+a),f&&M>a&&(M=M-V*2),!f&&a>M&&(a=a-V*2)}if(Math.abs(a-M)>t){var E=a,m=u,k=g;a=M+t*(f&&a>M?1:-1),u=y+e*Math.cos(a),g=S+s*Math.sin(a);var I=L(u,g,e,s,n,0,f,m,k,[a,E,y,S])}var O=Math.tan((a-M)/4),z=4/3*e*O,B=4/3*s*O,F=[2*p-(p+z*Math.sin(M)),2*r-(r-B*Math.cos(M)),u+z*Math.sin(a),g-B*Math.cos(a),u,g];if(h)return F;I&&(F=F.concat(I));for(var _=0;_<F.length;){var N=A(F[_],F[_+1],n);F[_++]=N.x,F[_++]=N.y}return F}function A(p,r,e){return{x:p*Math.cos(e)-r*Math.sin(e),y:p*Math.sin(e)+r*Math.cos(e)}}function v(p){return p*(V/180)}},50896:function(j){/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var V=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;function P(L){if(L==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(L)}function o(){try{if(!Object.assign)return!1;var L=new String("abc");if(L[5]="de",Object.getOwnPropertyNames(L)[0]==="5")return!1;for(var A={},v=0;v<10;v++)A["_"+String.fromCharCode(v)]=v;var p=Object.getOwnPropertyNames(A).map(function(e){return A[e]});if(p.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}j.exports=o()?Object.assign:function(L,A){for(var v,p=P(L),r,e=1;e<arguments.length;e++){v=Object(arguments[e]);for(var s in v)t.call(v,s)&&(p[s]=v[s]);if(V){r=V(v);for(var n=0;n<r.length;n++)b.call(v,r[n])&&(p[r[n]]=v[r[n]])}}return p}},76835:function(j){var V=function(t){return t!==t};j.exports=function(b,P){return b===0&&P===0?1/b===1/P:!!(b===P||V(b)&&V(P))}},39896:function(j,V,t){var b=t(81288),P=t(57916),o=t(76835),L=t(66148),A=t(16408),v=P(L(),Object);b(v,{getPolyfill:L,implementation:o,shim:A}),j.exports=v},66148:function(j,V,t){var b=t(76835);j.exports=function(){return typeof Object.is=="function"?Object.is:b}},16408:function(j,V,t){var b=t(66148),P=t(81288);j.exports=function(){var L=b();return P(Object,{is:L},{is:function(){return Object.is!==L}}),L}},32764:function(j,V,t){var b;if(!Object.keys){var P=Object.prototype.hasOwnProperty,o=Object.prototype.toString,L=t(97344),A=Object.prototype.propertyIsEnumerable,v=!A.call({toString:null},"toString"),p=A.call(function(){},"prototype"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=function(f){var u=f.constructor;return u&&u.prototype===f},s={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},n=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!s["$"+f]&&P.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{e(window[f])}catch{return!0}}catch{return!0}return!1}(),l=function(f){if(typeof window>"u"||!n)return e(f);try{return e(f)}catch{return!1}};b=function(u){var g=u!==null&&typeof u=="object",h=o.call(u)==="[object Function]",T=L(u),c=g&&o.call(u)==="[object String]",i=[];if(!g&&!h&&!T)throw new TypeError("Object.keys called on a non-object");var d=p&&h;if(c&&u.length>0&&!P.call(u,0))for(var x=0;x<u.length;++x)i.push(String(x));if(T&&u.length>0)for(var w=0;w<u.length;++w)i.push(String(w));else for(var C in u)!(d&&C==="prototype")&&P.call(u,C)&&i.push(String(C));if(v)for(var y=l(u),S=0;S<r.length;++S)!(y&&r[S]==="constructor")&&P.call(u,r[S])&&i.push(r[S]);return i}}j.exports=b},41820:function(j,V,t){var b=Array.prototype.slice,P=t(97344),o=Object.keys,L=o?function(p){return o(p)}:t(32764),A=Object.keys;L.shim=function(){if(Object.keys){var p=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);p||(Object.keys=function(e){return P(e)?A(b.call(e)):A(e)})}else Object.keys=L;return Object.keys||L},j.exports=L},97344:function(j){var V=Object.prototype.toString;j.exports=function(b){var P=V.call(b),o=P==="[object Arguments]";return o||(o=P!=="[object Array]"&&b!==null&&typeof b=="object"&&typeof b.length=="number"&&b.length>=0&&V.call(b.callee)==="[object Function]"),o}},32868:function(j){function V(P,o){if(typeof P!="string")return[P];var L=[P];typeof o=="string"||Array.isArray(o)?o={brackets:o}:o||(o={});var A=o.brackets?Array.isArray(o.brackets)?o.brackets:[o.brackets]:["{}","[]","()"],v=o.escape||"___",p=!!o.flat;A.forEach(function(s){var n=new RegExp(["\\",s[0],"[^\\",s[0],"\\",s[1],"]*\\",s[1]].join("")),l=[];function f(u,g,h){var T=L.push(u.slice(s[0].length,-s[1].length))-1;return l.push(T),v+T+v}L.forEach(function(u,g){for(var h,T=0;u!=h;)if(h=u,u=u.replace(n,f),T++>1e4)throw Error("References have circular dependency. Please, check them.");L[g]=u}),l=l.reverse(),L=L.map(function(u){return l.forEach(function(g){u=u.replace(new RegExp("(\\"+v+g+"\\"+v+")","g"),s[0]+"$1"+s[1])}),u})});var r=new RegExp("\\"+v+"([0-9]+)\\"+v);function e(s,n,l){for(var f=[],u,g=0;u=r.exec(s);){if(g++>1e4)throw Error("Circular references in parenthesis");f.push(s.slice(0,u.index)),f.push(e(n[u[1]],n)),s=s.slice(u.index+u[0].length)}return f.push(s),f}return p?L:e(L[0],L)}function t(P,o){if(o&&o.flat){var L=o&&o.escape||"___",A=P[0],v;if(!A)return"";for(var p=new RegExp("\\"+L+"([0-9]+)\\"+L),r=0;A!=v;){if(r++>1e4)throw Error("Circular references in "+P);v=A,A=A.replace(p,e)}return A}return P.reduce(function s(n,l){return Array.isArray(l)&&(l=l.reduce(s,"")),n+l},"");function e(s,n){if(P[n]==null)throw Error("Reference "+n+"is undefined");return P[n]}}function b(P,o){return Array.isArray(P)?t(P,o):V(P,o)}b.parse=V,b.stringify=t,j.exports=b},51160:function(j,V,t){var b=t(55616);j.exports=P;function P(o){var L;return arguments.length>1&&(o=arguments),typeof o=="string"?o=o.split(/\s/).map(parseFloat):typeof o=="number"&&(o=[o]),o.length&&typeof o[0]=="number"?o.length===1?L={width:o[0],height:o[0],x:0,y:0}:o.length===2?L={width:o[0],height:o[1],x:0,y:0}:L={x:o[0],y:o[1],width:o[2]-o[0]||0,height:o[3]-o[1]||0}:o&&(o=b(o,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),L={x:o.left||0,y:o.top||0},o.width==null?o.right?L.width=o.right-L.x:L.width=0:L.width=o.width,o.height==null?o.bottom?L.height=o.bottom-L.y:L.height=0:L.height=o.height),L}},21984:function(j){j.exports=b;var V={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function b(L){var A=[];return L.replace(t,function(v,p,r){var e=p.toLowerCase();for(r=o(r),e=="m"&&r.length>2&&(A.push([p].concat(r.splice(0,2))),e="l",p=p=="m"?"l":"L");;){if(r.length==V[e])return r.unshift(p),A.push(r);if(r.length<V[e])throw new Error("malformed path data");A.push([p].concat(r.splice(0,V[e])))}}),A}var P=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function o(L){var A=L.match(P);return A?A.map(Number):[]}},65819:function(j){j.exports=function(t,b){b||(b=[0,""]),t=String(t);var P=parseFloat(t,10);return b[0]=P,b[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",b}},41984:function(j,V,t){var b=t(4168);(function(){var P,o,L,A,v,p;typeof performance<"u"&&performance!==null&&performance.now?j.exports=function(){return performance.now()}:typeof b<"u"&&b!==null&&b.hrtime?(j.exports=function(){return(P()-v)/1e6},o=b.hrtime,P=function(){var r;return r=o(),r[0]*1e9+r[1]},A=P(),p=b.uptime()*1e9,v=A-p):Date.now?(j.exports=function(){return Date.now()-L},L=Date.now()):(j.exports=function(){return new Date().getTime()-L},L=new Date().getTime())}).call(this)},55616:function(j){j.exports=function(P,o,L){var A={},v,p;if(typeof o=="string"&&(o=t(o)),Array.isArray(o)){var r={};for(p=0;p<o.length;p++)r[o[p]]=!0;o=r}for(v in o)o[v]=t(o[v]);var e={};for(v in o){var s=o[v];if(Array.isArray(s))for(p=0;p<s.length;p++){var n=s[p];if(L&&(e[n]=!0),n in P){if(A[v]=P[n],L)for(var l=p;l<s.length;l++)e[s[l]]=!0;break}}else v in P&&(o[v]&&(A[v]=P[v]),L&&(e[v]=!0))}if(L)for(v in P)e[v]||(A[v]=P[v]);return A};var V={};function t(b){return V[b]?V[b]:(typeof b=="string"&&(b=V[b]=b.split(/\s*,\s*|\s+/)),b)}},61456:function(j){j.exports=function(t,b,P,o){var L=t[0],A=t[1],v=!1;P===void 0&&(P=0),o===void 0&&(o=b.length);for(var p=o-P,r=0,e=p-1;r<p;e=r++){var s=b[r+P][0],n=b[r+P][1],l=b[e+P][0],f=b[e+P][1],u=n>A!=f>A&&L<(l-s)*(A-n)/(f-n)+s;u&&(v=!v)}return v}},14756:function(j,V,t){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var b=t(7688),P=t(28648),o=t(72200),L=t(11403),A=t(82368),v=t(17792),p=!1,r=P(),e;e={buildLog:function(n){return n===!0?p=b():n===!1&&(p=!1),p===!1?!1:p.list},epsilon:function(n){return r.epsilon(n)},segments:function(n){var l=o(!0,r,p);return n.regions.forEach(l.addRegion),{segments:l.calculate(n.inverted),inverted:n.inverted}},combine:function(n,l){var f=o(!1,r,p);return{combined:f.calculate(n.segments,n.inverted,l.segments,l.inverted),inverted1:n.inverted,inverted2:l.inverted}},selectUnion:function(n){return{segments:A.union(n.combined,p),inverted:n.inverted1||n.inverted2}},selectIntersect:function(n){return{segments:A.intersect(n.combined,p),inverted:n.inverted1&&n.inverted2}},selectDifference:function(n){return{segments:A.difference(n.combined,p),inverted:n.inverted1&&!n.inverted2}},selectDifferenceRev:function(n){return{segments:A.differenceRev(n.combined,p),inverted:!n.inverted1&&n.inverted2}},selectXor:function(n){return{segments:A.xor(n.combined,p),inverted:n.inverted1!==n.inverted2}},polygon:function(n){return{regions:L(n.segments,r,p),inverted:n.inverted}},polygonFromGeoJSON:function(n){return v.toPolygon(e,n)},polygonToGeoJSON:function(n){return v.fromPolygon(e,r,n)},union:function(n,l){return s(n,l,e.selectUnion)},intersect:function(n,l){return s(n,l,e.selectIntersect)},difference:function(n,l){return s(n,l,e.selectDifference)},differenceRev:function(n,l){return s(n,l,e.selectDifferenceRev)},xor:function(n,l){return s(n,l,e.selectXor)}};function s(n,l,f){var u=e.segments(n),g=e.segments(l),h=e.combine(u,g),T=f(h);return e.polygon(T)}typeof window=="object"&&(window.PolyBool=e),j.exports=e},7688:function(j){function V(){var t,b=0,P=!1;function o(L,A){return t.list.push({type:L,data:A?JSON.parse(JSON.stringify(A)):void 0}),t}return t={list:[],segmentId:function(){return b++},checkIntersection:function(L,A){return o("check",{seg1:L,seg2:A})},segmentChop:function(L,A){return o("div_seg",{seg:L,pt:A}),o("chop",{seg:L,pt:A})},statusRemove:function(L){return o("pop_seg",{seg:L})},segmentUpdate:function(L){return o("seg_update",{seg:L})},segmentNew:function(L,A){return o("new_seg",{seg:L,primary:A})},segmentRemove:function(L){return o("rem_seg",{seg:L})},tempStatus:function(L,A,v){return o("temp_status",{seg:L,above:A,below:v})},rewind:function(L){return o("rewind",{seg:L})},status:function(L,A,v){return o("status",{seg:L,above:A,below:v})},vert:function(L){return L===P?t:(P=L,o("vert",{x:L}))},log:function(L){return typeof L!="string"&&(L=JSON.stringify(L,!1,"  ")),o("log",{txt:L})},reset:function(){return o("reset")},selected:function(L){return o("selected",{segs:L})},chainStart:function(L){return o("chain_start",{seg:L})},chainRemoveHead:function(L,A){return o("chain_rem_head",{index:L,pt:A})},chainRemoveTail:function(L,A){return o("chain_rem_tail",{index:L,pt:A})},chainNew:function(L,A){return o("chain_new",{pt1:L,pt2:A})},chainMatch:function(L){return o("chain_match",{index:L})},chainClose:function(L){return o("chain_close",{index:L})},chainAddHead:function(L,A){return o("chain_add_head",{index:L,pt:A})},chainAddTail:function(L,A){return o("chain_add_tail",{index:L,pt:A})},chainConnect:function(L,A){return o("chain_con",{index1:L,index2:A})},chainReverse:function(L){return o("chain_rev",{index:L})},chainJoin:function(L,A){return o("chain_join",{index1:L,index2:A})},done:function(){return o("done")}},t}j.exports=V},28648:function(j){function V(t){typeof t!="number"&&(t=1e-10);var b={epsilon:function(P){return typeof P=="number"&&(t=P),t},pointAboveOrOnLine:function(P,o,L){var A=o[0],v=o[1],p=L[0],r=L[1],e=P[0],s=P[1];return(p-A)*(s-v)-(r-v)*(e-A)>=-t},pointBetween:function(P,o,L){var A=P[1]-o[1],v=L[0]-o[0],p=P[0]-o[0],r=L[1]-o[1],e=p*v+A*r;if(e<t)return!1;var s=v*v+r*r;return!(e-s>-t)},pointsSameX:function(P,o){return Math.abs(P[0]-o[0])<t},pointsSameY:function(P,o){return Math.abs(P[1]-o[1])<t},pointsSame:function(P,o){return b.pointsSameX(P,o)&&b.pointsSameY(P,o)},pointsCompare:function(P,o){return b.pointsSameX(P,o)?b.pointsSameY(P,o)?0:P[1]<o[1]?-1:1:P[0]<o[0]?-1:1},pointsCollinear:function(P,o,L){var A=P[0]-o[0],v=P[1]-o[1],p=o[0]-L[0],r=o[1]-L[1];return Math.abs(A*r-p*v)<t},linesIntersect:function(P,o,L,A){var v=o[0]-P[0],p=o[1]-P[1],r=A[0]-L[0],e=A[1]-L[1],s=v*e-p*r;if(Math.abs(s)<t)return!1;var n=P[0]-L[0],l=P[1]-L[1],f=(r*l-e*n)/s,u=(v*l-p*n)/s,g={alongA:0,alongB:0,pt:[P[0]+f*v,P[1]+f*p]};return f<=-t?g.alongA=-2:f<t?g.alongA=-1:f-1<=-t?g.alongA=0:f-1<t?g.alongA=1:g.alongA=2,u<=-t?g.alongB=-2:u<t?g.alongB=-1:u-1<=-t?g.alongB=0:u-1<t?g.alongB=1:g.alongB=2,g},pointInsideRegion:function(P,o){for(var L=P[0],A=P[1],v=o[o.length-1][0],p=o[o.length-1][1],r=!1,e=0;e<o.length;e++){var s=o[e][0],n=o[e][1];n-A>t!=p-A>t&&(v-s)*(A-n)/(p-n)+s-L>t&&(r=!r),v=s,p=n}return r}};return b}j.exports=V},17792:function(j){var V={toPolygon:function(t,b){function P(A){if(A.length<=0)return t.segments({inverted:!1,regions:[]});function v(e){var s=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[s]})}for(var p=v(A[0]),r=1;r<A.length;r++)p=t.selectDifference(t.combine(p,v(A[r])));return p}if(b.type==="Polygon")return t.polygon(P(b.coordinates));if(b.type==="MultiPolygon"){for(var o=t.segments({inverted:!1,regions:[]}),L=0;L<b.coordinates.length;L++)o=t.selectUnion(t.combine(o,P(b.coordinates[L])));return t.polygon(o)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,b,P){P=t.polygon(t.segments(P));function o(f,u){return b.pointInsideRegion([(f[0][0]+f[1][0])*.5,(f[0][1]+f[1][1])*.5],u)}function L(f){return{region:f,children:[]}}var A=L(null);function v(f,u){for(var g=0;g<f.children.length;g++){var h=f.children[g];if(o(u,h.region)){v(h,u);return}}for(var T=L(u),g=0;g<f.children.length;g++){var h=f.children[g];o(h.region,u)&&(T.children.push(h),f.children.splice(g,1),g--)}f.children.push(T)}for(var p=0;p<P.regions.length;p++){var r=P.regions[p];r.length<3||v(A,r)}function e(f,u){for(var g=0,h=f[f.length-1][0],T=f[f.length-1][1],c=[],i=0;i<f.length;i++){var d=f[i][0],x=f[i][1];c.push([d,x]),g+=x*h-d*T,h=d,T=x}var w=g<0;return w!==u&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var s=[];function n(f){var u=[e(f.region,!1)];s.push(u);for(var g=0;g<f.children.length;g++)u.push(l(f.children[g]))}function l(f){for(var u=0;u<f.children.length;u++)n(f.children[u]);return e(f.region,!0)}for(var p=0;p<A.children.length;p++)n(A.children[p]);return s.length<=0?{type:"Polygon",coordinates:[]}:s.length==1?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}};j.exports=V},72200:function(j,V,t){var b=t(48088);function P(o,L,A){function v(T,c){return{id:A?A.segmentId():-1,start:T,end:c,myFill:{above:null,below:null},otherFill:null}}function p(T,c,i){return{id:A?A.segmentId():-1,start:T,end:c,myFill:{above:i.myFill.above,below:i.myFill.below},otherFill:null}}var r=b.create();function e(T,c,i,d,x,w){var C=L.pointsCompare(c,x);return C!==0?C:L.pointsSame(i,w)?0:T!==d?T?1:-1:L.pointAboveOrOnLine(i,d?x:w,d?w:x)?1:-1}function s(T,c){r.insertBefore(T,function(i){var d=e(T.isStart,T.pt,c,i.isStart,i.pt,i.other.pt);return d<0})}function n(T,c){var i=b.node({isStart:!0,pt:T.start,seg:T,primary:c,other:null,status:null});return s(i,T.end),i}function l(T,c,i){var d=b.node({isStart:!1,pt:c.end,seg:c,primary:i,other:T,status:null});T.other=d,s(d,T.pt)}function f(T,c){var i=n(T,c);return l(i,T,c),i}function u(T,c){A&&A.segmentChop(T.seg,c),T.other.remove(),T.seg.end=c,T.other.pt=c,s(T.other,T.pt)}function g(T,c){var i=p(c,T.seg.end,T.seg);return u(T,c),f(i,T.primary)}function h(T,c){var i=b.create();function d(z,B){var F=z.seg.start,_=z.seg.end,N=B.seg.start,G=B.seg.end;return L.pointsCollinear(F,N,G)?L.pointsCollinear(_,N,G)||L.pointAboveOrOnLine(_,N,G)?1:-1:L.pointAboveOrOnLine(F,N,G)?1:-1}function x(z){return i.findTransition(function(B){var F=d(z,B.ev);return F>0})}function w(z,B){var F=z.seg,_=B.seg,N=F.start,G=F.end,X=_.start,$=_.end;A&&A.checkIntersection(F,_);var et=L.linesIntersect(N,G,X,$);if(et===!1){if(!L.pointsCollinear(N,G,X)||L.pointsSame(N,$)||L.pointsSame(G,X))return!1;var ot=L.pointsSame(N,X),nt=L.pointsSame(G,$);if(ot&&nt)return B;var Z=!ot&&L.pointBetween(N,X,$),Q=!nt&&L.pointBetween(G,X,$);if(ot)return Q?g(B,G):g(z,$),B;Z&&(nt||(Q?g(B,G):g(z,$)),g(B,N))}else et.alongA===0&&(et.alongB===-1?g(z,X):et.alongB===0?g(z,et.pt):et.alongB===1&&g(z,$)),et.alongB===0&&(et.alongA===-1?g(B,N):et.alongA===0?g(B,et.pt):et.alongA===1&&g(B,G));return!1}for(var C=[];!r.isEmpty();){var y=r.getHead();if(A&&A.vert(y.pt[0]),y.isStart){let z=function(){if(M){var B=w(y,M);if(B)return B}return a?w(y,a):!1};A&&A.segmentNew(y.seg,y.primary);var S=x(y),M=S.before?S.before.ev:null,a=S.after?S.after.ev:null;A&&A.tempStatus(y.seg,M?M.seg:!1,a?a.seg:!1);var E=z();if(E){if(o){var m;y.seg.myFill.below===null?m=!0:m=y.seg.myFill.above!==y.seg.myFill.below,m&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=y.seg.myFill;A&&A.segmentUpdate(E.seg),y.other.remove(),y.remove()}if(r.getHead()!==y){A&&A.rewind(y.seg);continue}if(o){var m;y.seg.myFill.below===null?m=!0:m=y.seg.myFill.above!==y.seg.myFill.below,a?y.seg.myFill.below=a.seg.myFill.above:y.seg.myFill.below=T,m?y.seg.myFill.above=!y.seg.myFill.below:y.seg.myFill.above=y.seg.myFill.below}else if(y.seg.otherFill===null){var k;a?y.primary===a.primary?k=a.seg.otherFill.above:k=a.seg.myFill.above:k=y.primary?c:T,y.seg.otherFill={above:k,below:k}}A&&A.status(y.seg,M?M.seg:!1,a?a.seg:!1),y.other.status=S.insert(b.node({ev:y}))}else{var I=y.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(i.exists(I.prev)&&i.exists(I.next)&&w(I.prev.ev,I.next.ev),A&&A.statusRemove(I.ev.seg),I.remove(),!y.primary){var O=y.seg.myFill;y.seg.myFill=y.seg.otherFill,y.seg.otherFill=O}C.push(y.seg)}r.getHead().remove()}return A&&A.done(),C}return o?{addRegion:function(T){for(var c,i=T[T.length-1],d=0;d<T.length;d++){c=i,i=T[d];var x=L.pointsCompare(c,i);x!==0&&f(v(x<0?c:i,x<0?i:c),!0)}},calculate:function(T){return h(T,!1)}}:{calculate:function(T,c,i,d){return T.forEach(function(x){f(p(x.start,x.end,x),!0)}),i.forEach(function(x){f(p(x.start,x.end,x),!1)}),h(c,d)}}}j.exports=P},48088:function(j){var V={create:function(){var t={root:{root:!0,next:null},exists:function(b){return!(b===null||b===t.root)},isEmpty:function(){return t.root.next===null},getHead:function(){return t.root.next},insertBefore:function(b,P){for(var o=t.root,L=t.root.next;L!==null;){if(P(L)){b.prev=L.prev,b.next=L,L.prev.next=b,L.prev=b;return}o=L,L=L.next}o.next=b,b.prev=o,b.next=null},findTransition:function(b){for(var P=t.root,o=t.root.next;o!==null&&!b(o);)P=o,o=o.next;return{before:P===t.root?null:P,after:o,insert:function(L){return L.prev=P,L.next=o,P.next=L,o!==null&&(o.prev=L),L}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};j.exports=V},11403:function(j){function V(t,b,P){var o=[],L=[];return t.forEach(function(A){var v=A.start,p=A.end;if(b.pointsSame(v,p)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}P&&P.chainStart(A);var r={index:0,matches_head:!1,matches_pt1:!1},e={index:0,matches_head:!1,matches_pt1:!1},s=r;function n(E,m,k){return s.index=E,s.matches_head=m,s.matches_pt1=k,s===r?(s=e,!1):(s=null,!0)}for(var l=0;l<o.length;l++){var f=o[l],u=f[0];f[1];var g=f[f.length-1];if(f[f.length-2],b.pointsSame(u,v)){if(n(l,!0,!0))break}else if(b.pointsSame(u,p)){if(n(l,!0,!1))break}else if(b.pointsSame(g,v)){if(n(l,!1,!0))break}else if(b.pointsSame(g,p)&&n(l,!1,!1))break}if(s===r){o.push([v,p]),P&&P.chainNew(v,p);return}if(s===e){P&&P.chainMatch(r.index);var h=r.index,T=r.matches_pt1?p:v,c=r.matches_head,f=o[h],i=c?f[0]:f[f.length-1],d=c?f[1]:f[f.length-2],x=c?f[f.length-1]:f[0],w=c?f[f.length-2]:f[1];if(b.pointsCollinear(d,i,T)&&(c?(P&&P.chainRemoveHead(r.index,T),f.shift()):(P&&P.chainRemoveTail(r.index,T),f.pop()),i=d),b.pointsSame(x,T)){o.splice(h,1),b.pointsCollinear(w,x,i)&&(c?(P&&P.chainRemoveTail(r.index,i),f.pop()):(P&&P.chainRemoveHead(r.index,i),f.shift())),P&&P.chainClose(r.index),L.push(f);return}c?(P&&P.chainAddHead(r.index,T),f.unshift(T)):(P&&P.chainAddTail(r.index,T),f.push(T));return}function C(E){P&&P.chainReverse(E),o[E].reverse()}function y(E,m){var k=o[E],I=o[m],O=k[k.length-1],z=k[k.length-2],B=I[0],F=I[1];b.pointsCollinear(z,O,B)&&(P&&P.chainRemoveTail(E,O),k.pop(),O=z),b.pointsCollinear(O,B,F)&&(P&&P.chainRemoveHead(m,B),I.shift()),P&&P.chainJoin(E,m),o[E]=k.concat(I),o.splice(m,1)}var S=r.index,M=e.index;P&&P.chainConnect(S,M);var a=o[S].length<o[M].length;r.matches_head?e.matches_head?a?(C(S),y(S,M)):(C(M),y(M,S)):y(M,S):e.matches_head?y(S,M):a?(C(S),y(M,S)):(C(M),y(S,M))}),L}j.exports=V},82368:function(j){function V(b,P,o){var L=[];return b.forEach(function(A){var v=(A.myFill.above?8:0)+(A.myFill.below?4:0)+(A.otherFill&&A.otherFill.above?2:0)+(A.otherFill&&A.otherFill.below?1:0);P[v]!==0&&L.push({id:o?o.segmentId():-1,start:A.start,end:A.end,myFill:{above:P[v]===1,below:P[v]===2},otherFill:null})}),o&&o.selected(L),L}var t={union:function(b,P){return V(b,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],P)},intersect:function(b,P){return V(b,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],P)},difference:function(b,P){return V(b,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],P)},differenceRev:function(b,P){return V(b,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],P)},xor:function(b,P){return V(b,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],P)}};j.exports=t},9696:function(j,V,t){var b=t(29936).Transform,P=t(55619);function o(){b.call(this,{readableObjectMode:!0})}o.prototype=Object.create(b.prototype),o.prototype.constructor=o,P(o.prototype),V.gS=function(A,v,p){for(var r=v,e=0;e<p.length;)if(A[r++]!==p[e++])return!1;return!0},V.wR=function(A,v){var p=[],r=0;if(v&&v==="hex")for(;r<A.length;)p.push(parseInt(A.slice(r,r+2),16)),r+=2;else for(;r<A.length;r++)p.push(A.charCodeAt(r)&255);return p},V.Bz=function(A,v){return A[v]|A[v+1]<<8},V.eW=function(A,v){return A[v+1]|A[v]<<8},V.st=function(A,v){return A[v]|A[v+1]<<8|A[v+2]<<16|A[v+3]*16777216},V.eI=function(A,v){return A[v+3]|A[v+2]<<8|A[v+1]<<16|A[v]*16777216};function L(A,v,p){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=A,v&&(this.code=v),p&&(this.statusCode=p)}L.prototype=Object.create(Error.prototype),L.prototype.constructor=L},11688:function(j){function V(P,o){var L=new Error(P);return L.code=o,L}function t(P){try{return decodeURIComponent(escape(P))}catch{return P}}function b(P,o,L){this.input=P.subarray(o,L),this.start=o;var A=String.fromCharCode.apply(null,this.input.subarray(0,4));if(A!=="II*\0"&&A!=="MM\0*")throw V("invalid TIFF signature","EBADDATA");this.big_endian=A[0]==="M"}b.prototype.each=function(P){this.aborted=!1;var o=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:o}];this.ifds_to_read.length>0&&!this.aborted;){var L=this.ifds_to_read.shift();L.offset&&this.scan_ifd(L.id,L.offset,P)}},b.prototype.read_uint16=function(P){var o=this.input;if(P+2>o.length)throw V("unexpected EOF","EBADDATA");return this.big_endian?o[P]*256+o[P+1]:o[P]+o[P+1]*256},b.prototype.read_uint32=function(P){var o=this.input;if(P+4>o.length)throw V("unexpected EOF","EBADDATA");return this.big_endian?o[P]*16777216+o[P+1]*65536+o[P+2]*256+o[P+3]:o[P]+o[P+1]*256+o[P+2]*65536+o[P+3]*16777216},b.prototype.is_subifd_link=function(P,o){return P===0&&o===34665||P===0&&o===34853||P===34665&&o===40965},b.prototype.exif_format_length=function(P){switch(P){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},b.prototype.exif_format_read=function(P,o){var L;switch(P){case 1:case 2:return L=this.input[o],L;case 6:return L=this.input[o],L|(L&128)*33554430;case 3:return L=this.read_uint16(o),L;case 8:return L=this.read_uint16(o),L|(L&32768)*131070;case 4:return L=this.read_uint32(o),L;case 9:return L=this.read_uint32(o),L|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},b.prototype.scan_ifd=function(P,o,L){var A=this.read_uint16(o);o+=2;for(var v=0;v<A;v++){var p=this.read_uint16(o),r=this.read_uint16(o+2),e=this.read_uint32(o+4),s=this.exif_format_length(r),n=e*s,l=n<=4?o+8:this.read_uint32(o+8),f=!1;if(l+n>this.input.length)throw V("unexpected EOF","EBADDATA");for(var u=[],g=l,h=0;h<e;h++,g+=s){var T=this.exif_format_read(r,g);if(T===null){u=null;break}u.push(T)}Array.isArray(u)&&r===2&&(u=t(String.fromCharCode.apply(null,u)),u&&u[u.length-1]==="\0"&&(u=u.slice(0,-1))),this.is_subifd_link(P,p)&&Array.isArray(u)&&Number.isInteger(u[0])&&u[0]>0&&(this.ifds_to_read.push({id:p,offset:u[0]}),f=!0);var c={is_big_endian:this.big_endian,ifd:P,tag:p,format:r,count:e,entry_offset:o+this.start,data_length:n,data_offset:l+this.start,value:u,is_subifd_link:f};if(L(c)===!1){this.aborted=!0;return}o+=12}P===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(o)})},j.exports.ExifParser=b,j.exports.get_orientation=function(P){var o=0;try{return new b(P,0,P.length).each(function(L){if(L.ifd===0&&L.tag===274&&Array.isArray(L.value))return o=L.value[0],!1}),o}catch{return-1}}},44600:function(j,V,t){var b=t(9696).eW,P=t(9696).eI;function o(n,l){if(n.length<4+l)return null;var f=P(n,l);return n.length<f+l||f<8?null:{boxtype:String.fromCharCode.apply(null,n.slice(l+4,l+8)),data:n.slice(l+8,l+f),end:l+f}}j.exports.unbox=o;function L(n,l){for(var f=0;;){var u=o(n,f);if(!u)break;switch(u.boxtype){case"ispe":l.sizes.push({width:P(u.data,4),height:P(u.data,8)});break;case"irot":l.transforms.push({type:"irot",value:u.data[0]&3});break;case"imir":l.transforms.push({type:"imir",value:u.data[0]&1});break}f=u.end}}function A(n,l,f){for(var u=0,g=0;g<f;g++)u=u*256+(n[l+g]||0);return u}function v(n,l){for(var f=n[4]>>4&15,u=n[4]&15,g=n[5]>>4&15,h=b(n,6),T=8,c=0;c<h;c++){var i=b(n,T);T+=2;var d=b(n,T);T+=2;var x=A(n,T,g);T+=g;var w=b(n,T);if(T+=2,d===0&&w===1){var C=A(n,T,f),y=A(n,T+f,u);l.item_loc[i]={length:y,offset:C+x}}T+=w*(f+u)}}function p(n,l){for(var f=b(n,4),u=6,g=0;g<f;g++){var h=o(n,u);if(!h)break;if(h.boxtype==="infe"){for(var T=b(h.data,4),c="",i=8;i<h.data.length&&h.data[i];i++)c+=String.fromCharCode(h.data[i]);l.item_inf[c]=T}u=h.end}}function r(n,l){for(var f=0;;){var u=o(n,f);if(!u)break;u.boxtype==="ipco"&&L(u.data,l),f=u.end}}function e(n,l){for(var f=4;;){var u=o(n,f);if(!u)break;u.boxtype==="iprp"&&r(u.data,l),u.boxtype==="iloc"&&v(u.data,l),u.boxtype==="iinf"&&p(u.data,l),f=u.end}}function s(n){var l=n.reduce(function(g,h){return g.width>h.width||g.width===h.width&&g.height>h.height?g:h}),f=n.reduce(function(g,h){return g.height>h.height||g.height===h.height&&g.width>h.width?g:h}),u;return l.width>f.height||l.width===f.height&&l.height>f.width?u=l:u=f,u}j.exports.readSizeFromMeta=function(n){var l={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(e(n,l),!!l.sizes.length){var f=s(l.sizes),u=1;l.transforms.forEach(function(h){var T={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},c={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(h.type==="imir"&&(h.value===0?u=c[u]:(u=c[u],u=T[u],u=T[u])),h.type==="irot")for(var i=0;i<h.value;i++)u=T[u]});var g=null;return l.item_inf.Exif&&(g=l.item_loc[l.item_inf.Exif]),{width:f.width,height:f.height,orientation:l.transforms.length?u:null,variants:l.sizes,exif_location:g}}},j.exports.getMimeType=function(n){var l=String.fromCharCode.apply(null,n.slice(0,4)),f={};f[l]=!0;for(var u=8;u<n.length;u+=4)f[String.fromCharCode.apply(null,n.slice(u,u+4))]=!0;if(!(!f.mif1&&!f.msf1&&!f.miaf))return l==="avif"||l==="avis"||l==="avio"?{type:"avif",mime:"image/avif"}:l==="heic"||l==="heix"?{type:"heic",mime:"image/heic"}:l==="hevc"||l==="hevx"?{type:"heic",mime:"image/heic-sequence"}:f.avif||f.avis?{type:"avif",mime:"image/avif"}:f.heic||f.heix||f.hevc||f.hevx||f.heis?f.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},40528:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).eI,L=t(44600),A=t(11688),v=b("ftyp");j.exports=function(p){if(P(p,4,v)){var r=L.unbox(p,0);if(r){var e=L.getMimeType(r.data);if(e){for(var s,n=r.end;;){var l=L.unbox(p,n);if(!l)break;if(n=l.end,l.boxtype==="mdat")return;if(l.boxtype==="meta"){s=l.data;break}}if(s){var f=L.readSizeFromMeta(s);if(f){var u={width:f.width,height:f.height,type:e.type,mime:e.mime,wUnits:"px",hUnits:"px"};if(f.variants.length>1&&(u.variants=f.variants),f.orientation&&(u.orientation=f.orientation),f.exif_location&&f.exif_location.offset+f.exif_location.length<=p.length){var g=o(p,f.exif_location.offset),h=p.slice(f.exif_location.offset+g+4,f.exif_location.offset+f.exif_location.length),T=A.get_orientation(h);T>0&&(u.orientation=T)}return u}}}}}}},38728:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).Bz,L=b("BM");j.exports=function(A){if(!(A.length<26)&&P(A,0,L))return{width:o(A,18),height:o(A,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},5588:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).Bz,L=b("GIF87a"),A=b("GIF89a");j.exports=function(v){if(!(v.length<10)&&!(!P(v,0,L)&&!P(v,0,A)))return{width:o(v,6),height:o(v,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},41924:function(j,V,t){var b=t(9696).Bz,P=0,o=1,L=16;j.exports=function(A){var v=b(A,0),p=b(A,2),r=b(A,4);if(!(v!==P||p!==o||!r)){for(var e=[],s={width:0,height:0},n=0;n<r;n++){var l=A[6+L*n]||256,f=A[6+L*n+1]||256,u={width:l,height:f};e.push(u),(l>s.width||f>s.height)&&(s=u)}return{width:s.width,height:s.height,variants:e,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},87968:function(j,V,t){var b=t(9696).eW,P=t(9696).wR,o=t(9696).gS,L=t(11688),A=P("Exif\0\0");j.exports=function(v){if(!(v.length<2)&&!(v[0]!==255||v[1]!==216||v[2]!==255))for(var p=2;;){for(;;){if(v.length-p<2)return;if(v[p++]===255)break}for(var r=v[p++],e;r===255;)r=v[p++];if(208<=r&&r<=217||r===1)e=0;else if(192<=r&&r<=254){if(v.length-p<2)return;e=b(v,p)-2,p+=2}else return;if(r===217||r===218)return;var s;if(r===225&&e>=10&&o(v,p,A)&&(s=L.get_orientation(v.slice(p+6,p+e))),e>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(v.length-p<e)return;var n={width:b(v,p+3),height:b(v,p+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return s>0&&(n.orientation=s),n}p+=e}}},37276:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).eI,L=b(`PNG\r

`),A=b("IHDR");j.exports=function(v){if(!(v.length<24)&&P(v,0,L)&&P(v,12,A))return{width:o(v,16),height:o(v,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},90328:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).eI,L=b("8BPS\0");j.exports=function(A){if(!(A.length<22)&&P(A,0,L))return{width:o(A,18),height:o(A,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},16024:function(j){function V(s){return s===32||s===9||s===13||s===10}function t(s){return typeof s=="number"&&isFinite(s)&&s>0}function b(s){var n=0,l=s.length;for(s[0]===239&&s[1]===187&&s[2]===191&&(n=3);n<l&&V(s[n]);)n++;return n===l?!1:s[n]===60}var P=/<[-_.:a-zA-Z0-9][^>]*>/,o=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,L=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,A=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,v=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,p=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function r(s){var n=s.match(L),l=s.match(A),f=s.match(v);return{width:n&&(n[1]||n[2]),height:l&&(l[1]||l[2]),viewbox:f&&(f[1]||f[2])}}function e(s){return p.test(s)?s.match(p)[0]:"px"}j.exports=function(s){if(b(s)){for(var n="",l=0;l<s.length;l++)n+=String.fromCharCode(s[l]);var f=(n.match(P)||[""])[0];if(o.test(f)){var u=r(f),g=parseFloat(u.width),h=parseFloat(u.height);if(u.width&&u.height)return!t(g)||!t(h)?void 0:{width:g,height:h,type:"svg",mime:"image/svg+xml",wUnits:e(u.width),hUnits:e(u.height)};var T=(u.viewbox||"").split(" "),c={width:T[2],height:T[3]},i=parseFloat(c.width),d=parseFloat(c.height);if(!(!t(i)||!t(d))&&e(c.width)===e(c.height)){var x=i/d;return u.width?t(g)?{width:g,height:g/x,type:"svg",mime:"image/svg+xml",wUnits:e(u.width),hUnits:e(u.width)}:void 0:u.height?t(h)?{width:h*x,height:h,type:"svg",mime:"image/svg+xml",wUnits:e(u.height),hUnits:e(u.height)}:void 0:{width:i,height:d,type:"svg",mime:"image/svg+xml",wUnits:e(c.width),hUnits:e(c.height)}}}}}},98792:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).Bz,L=t(9696).eW,A=t(9696).st,v=t(9696).eI,p=b("II*\0"),r=b("MM\0*");function e(l,f,u){return u?L(l,f):o(l,f)}function s(l,f,u){return u?v(l,f):A(l,f)}function n(l,f,u){var g=e(l,f+2,u),h=s(l,f+4,u);return h!==1||g!==3&&g!==4?null:g===3?e(l,f+8,u):s(l,f+8,u)}j.exports=function(l){if(!(l.length<8)&&!(!P(l,0,p)&&!P(l,0,r))){var f=l[0]===77,u=s(l,4,f)-8;if(!(u<0)){var g=u+8;if(!(l.length-g<2)){var h=e(l,g+0,f)*12;if(!(h<=0)&&(g+=2,!(l.length-g<h))){var T,c,i,d;for(T=0;T<h;T+=12)d=e(l,g+T,f),d===256?c=n(l,g+T,f):d===257&&(i=n(l,g+T,f));if(c&&i)return{width:c,height:i,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},20704:function(j,V,t){var b=t(9696).wR,P=t(9696).gS,o=t(9696).Bz,L=t(9696).st,A=t(11688),v=b("RIFF"),p=b("WEBP");function r(n,l){if(!(n[l+3]!==157||n[l+4]!==1||n[l+5]!==42))return{width:o(n,l+6)&16383,height:o(n,l+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function e(n,l){if(n[l]===47){var f=L(n,l+1);return{width:(f&16383)+1,height:(f>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function s(n,l){return{width:(n[l+6]<<16|n[l+5]<<8|n[l+4])+1,height:(n[l+9]<<l|n[l+8]<<8|n[l+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}j.exports=function(n){if(!(n.length<16)&&!(!P(n,0,v)&&!P(n,8,p))){var l=12,f=null,u=0,g=L(n,4)+8;if(!(g>n.length)){for(;l+8<g;){if(n[l]===0){l++;continue}var h=String.fromCharCode.apply(null,n.slice(l,l+4)),T=L(n,l+4);h==="VP8 "&&T>=10?f=f||r(n,l+8):h==="VP8L"&&T>=9?f=f||e(n,l+8):h==="VP8X"&&T>=10?f=f||s(n,l+8):h==="EXIF"&&(u=A.get_orientation(n.slice(l+8,l+8+T)),l=1/0),l+=8+T}if(f)return u>0&&(f.orientation=u),f}}}},87480:function(j,V,t){j.exports={avif:t(40528),bmp:t(38728),gif:t(5588),ico:t(41924),jpeg:t(87968),png:t(37276),psd:t(90328),svg:t(16024),tiff:t(98792),webp:t(20704)}},19480:function(j,V,t){var b=t(87480);function P(o){for(var L=Object.keys(b),A=0;A<L.length;A++){var v=b[L[A]](o);if(v)return v}return null}j.exports=function(L){return P(L)},j.exports.parsers=b},4168:function(j){var V=j.exports={},t,b;function P(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=P}catch{t=P}try{typeof clearTimeout=="function"?b=clearTimeout:b=o}catch{b=o}})();function L(u){if(t===setTimeout)return setTimeout(u,0);if((t===P||!t)&&setTimeout)return t=setTimeout,setTimeout(u,0);try{return t(u,0)}catch{try{return t.call(null,u,0)}catch{return t.call(this,u,0)}}}function A(u){if(b===clearTimeout)return clearTimeout(u);if((b===o||!b)&&clearTimeout)return b=clearTimeout,clearTimeout(u);try{return b(u)}catch{try{return b.call(null,u)}catch{return b.call(this,u)}}}var v=[],p=!1,r,e=-1;function s(){!p||!r||(p=!1,r.length?v=r.concat(v):e=-1,v.length&&n())}function n(){if(!p){var u=L(s);p=!0;for(var g=v.length;g;){for(r=v,v=[];++e<g;)r&&r[e].run();e=-1,g=v.length}r=null,p=!1,A(u)}}V.nextTick=function(u){var g=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)g[h-1]=arguments[h];v.push(new l(u,g)),v.length===1&&!p&&L(n)};function l(u,g){this.fun=u,this.array=g}l.prototype.run=function(){this.fun.apply(null,this.array)},V.title="browser",V.browser=!0,V.env={},V.argv=[],V.version="",V.versions={};function f(){}V.on=f,V.addListener=f,V.once=f,V.off=f,V.removeListener=f,V.removeAllListeners=f,V.emit=f,V.prependListener=f,V.prependOnceListener=f,V.listeners=function(u){return[]},V.binding=function(u){throw new Error("process.binding is not supported")},V.cwd=function(){return"/"},V.chdir=function(u){throw new Error("process.chdir is not supported")},V.umask=function(){return 0}},3951:function(j,V,t){for(var b=t(41984),P=typeof window>"u"?t.g:window,o=["moz","webkit"],L="AnimationFrame",A=P["request"+L],v=P["cancel"+L]||P["cancelRequest"+L],p=0;!A&&p<o.length;p++)A=P[o[p]+"Request"+L],v=P[o[p]+"Cancel"+L]||P[o[p]+"CancelRequest"+L];if(!A||!v){var r=0,e=0,s=[],n=1e3/60;A=function(l){if(s.length===0){var f=b(),u=Math.max(0,n-(f-r));r=u+f,setTimeout(function(){var g=s.slice(0);s.length=0;for(var h=0;h<g.length;h++)if(!g[h].cancelled)try{g[h].callback(r)}catch(T){setTimeout(function(){throw T},0)}},Math.round(u))}return s.push({handle:++e,callback:l,cancelled:!1}),e},v=function(l){for(var f=0;f<s.length;f++)s[f].handle===l&&(s[f].cancelled=!0)}}j.exports=function(l){return A.call(P,l)},j.exports.cancel=function(){v.apply(P,arguments)},j.exports.polyfill=function(l){l||(l=P),l.requestAnimationFrame=A,l.cancelAnimationFrame=v}},24544:function(j,V,t){var b=t(76752),P=t(72160),o=t(45223),L=t(55616),A=t(50896),v=t(47520),p=t(37816),r=p.float32,e=p.fract32;j.exports=n;var s=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function n(l,f){if(typeof l=="function"?(f||(f={}),f.regl=l):f=l,f.length&&(f.positions=f),l=f.regl,!l.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var u=l._gl,g,h,T,c,i,d,x={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},w=[];return c=l.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),T=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),i=l.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),d=l.buffer({usage:"static",type:"float",data:s}),M(f),g=l({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:l.prop("range"),lineWidth:l.prop("lineWidth"),capSize:l.prop("capSize"),opacity:l.prop("opacity"),scale:l.prop("scale"),translate:l.prop("translate"),scaleFract:l.prop("scaleFract"),translateFract:l.prop("translateFract"),viewport:function(E,m){return[m.viewport.x,m.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:c,offset:function(E,m){return m.offset*4},divisor:1},position:{buffer:h,offset:function(E,m){return m.offset*8},divisor:1},positionFract:{buffer:T,offset:function(E,m){return m.offset*8},divisor:1},error:{buffer:i,offset:function(E,m){return m.offset*16},divisor:1},direction:{buffer:d,stride:24,offset:0},lineOffset:{buffer:d,stride:24,offset:8},capOffset:{buffer:d,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:l.prop("viewport")},viewport:l.prop("viewport"),stencil:!1,instances:l.prop("count"),count:s.length}),A(C,{update:M,draw:y,destroy:a,regl:l,gl:u,canvas:u.canvas,groups:w}),C;function C(E){E?M(E):E===null&&a(),y()}function y(E){if(typeof E=="number")return S(E);E&&!Array.isArray(E)&&(E=[E]),l._refresh(),w.forEach(function(m,k){if(m){if(E&&(E[k]?m.draw=!0:m.draw=!1),!m.draw){m.draw=!0;return}S(k)}})}function S(E){typeof E=="number"&&(E=w[E]),E!=null&&E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1&&(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],g(E),E.after&&E.after(E))}function M(E){if(E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var m=0,k=0;if(C.groups=w=E.map(function(N,G){var X=w[G];if(N)typeof N=="function"?N={after:N}:typeof N[0]=="number"&&(N={positions:N});else return X;return N=L(N,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(w[G]=X={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},N=A({},x,N)),o(X,N,[{lineWidth:function($){return+$*.5},capSize:function($){return+$*.5},opacity:parseFloat,errors:function($){return $=v($),k+=$.length,$},positions:function($,et){return $=v($,"float64"),et.count=Math.floor($.length/2),et.bounds=b($,2),et.offset=m,m+=et.count,$}},{color:function($,et){var ot=et.count;if($||($="transparent"),!Array.isArray($)||typeof $[0]=="number"){var nt=$;$=Array(ot);for(var Z=0;Z<ot;Z++)$[Z]=nt}if($.length<ot)throw Error("Not enough colors");for(var Q=new Uint8Array(ot*4),W=0;W<ot;W++){var J=P($[W],"uint8");Q.set(J,W*4)}return Q},range:function($,et,ot){var nt=et.bounds;return $||($=nt),et.scale=[1/($[2]-$[0]),1/($[3]-$[1])],et.translate=[-$[0],-$[1]],et.scaleFract=e(et.scale),et.translateFract=e(et.translate),$},viewport:function($){var et;return Array.isArray($)?et={x:$[0],y:$[1],width:$[2]-$[0],height:$[3]-$[1]}:$?(et={x:$.x||$.left||0,y:$.y||$.top||0},$.right?et.width=$.right-et.x:et.width=$.w||$.width||0,$.bottom?et.height=$.bottom-et.y:et.height=$.h||$.height||0):et={x:0,y:0,width:u.drawingBufferWidth,height:u.drawingBufferHeight},et}}]),X}),m||k){var I=w.reduce(function(N,G,X){return N+(G?G.count:0)},0),O=new Float64Array(I*2),z=new Uint8Array(I*4),B=new Float32Array(I*4);w.forEach(function(N,G){if(N){var X=N.positions,$=N.count,et=N.offset,ot=N.color,nt=N.errors;$&&(z.set(ot,et*4),B.set(nt,et*4),O.set(X,et*2))}});var F=r(O);h(F);var _=e(O,F);T(_),c(z),i(B)}}}function a(){h.destroy(),T.destroy(),c.destroy(),i.destroy(),d.destroy()}}},13472:function(j,V,t){var b=t(72160),P=t(76752),o=t(50896),L=t(55616),A=t(47520),v=t(28912),p=t(71152),r=t(37816),e=r.float32,s=r.fract32,n=t(60463),l=t(51160),f=t(10272),u=`
precision highp float;

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`,g=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`,h=`
precision highp float;

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`,T=`
precision highp float;
varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`,c=`
precision highp float;

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);


	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`,i=`
precision highp float;

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`;j.exports=d;function d(x,w){if(!(this instanceof d))return new d(x,w);if(typeof x=="function"?(w||(w={}),w.regl=x):w=x,w.length&&(w.positions=w),x=w.regl,!x.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=x._gl,this.regl=x,this.passes=[],this.shaders=d.shaders.has(x)?d.shaders.get(x):d.shaders.set(x,d.createShaders(x)).get(x),this.update(w)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new n,d.createShaders=function(x){var w=x.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),C={primitive:"triangle strip",instances:x.prop("count"),count:4,offset:0,uniforms:{miterMode:function(a,E){return E.join==="round"?2:1},miterLimit:x.prop("miterLimit"),scale:x.prop("scale"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),thickness:x.prop("thickness"),dashTexture:x.prop("dashTexture"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),dashLength:x.prop("dashLength"),viewport:function(a,E){return[E.viewport.x,E.viewport.y,a.viewportWidth,a.viewportHeight]},depth:x.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(a,E){return!E.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:x.prop("viewport")},viewport:x.prop("viewport")},y=x(o({vert:u,frag:g,attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},C)),S;try{S=x(o({cull:{enable:!0,face:"back"},vert:c,frag:i,attributes:{lineEnd:{buffer:w,divisor:0,stride:8,offset:0},lineTop:{buffer:w,divisor:0,stride:8,offset:4},aColor:{buffer:x.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:x.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:x.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},C))}catch{S=y}var M=x({primitive:"triangle",elements:function(a,E){return E.triangles},offset:0,vert:h,frag:T,uniforms:{scale:x.prop("scale"),color:x.prop("fill"),scaleFract:x.prop("scaleFract"),translateFract:x.prop("translateFract"),translate:x.prop("translate"),opacity:x.prop("opacity"),pixelRatio:x.context("pixelRatio"),id:x.prop("id"),viewport:function(a,E){return[E.viewport.x,E.viewport.y,a.viewportWidth,a.viewportHeight]}},attributes:{position:{buffer:x.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:x.prop("positionFractBuffer"),stride:8,offset:8}},blend:C.blend,depth:{enable:!1},scissor:C.scissor,stencil:C.stencil,viewport:C.viewport});return{fill:M,rect:y,miter:S}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var x,w=[],C=arguments.length;C--;)w[C]=arguments[C];w.length&&(x=this).update.apply(x,w),this.draw()},d.prototype.draw=function(){for(var x=this,w=[],C=arguments.length;C--;)w[C]=arguments[C];return(w.length?w:this.passes).forEach(function(y,S){var M;if(y&&Array.isArray(y))return(M=x).draw.apply(M,y);typeof y=="number"&&(y=x.passes[y]),y&&y.count>1&&y.opacity&&(x.regl._refresh(),y.fill&&y.triangles&&y.triangles.length>2&&x.shaders.fill(y),y.thickness&&(y.scale[0]*y.viewport.width>d.precisionThreshold||y.scale[1]*y.viewport.height>d.precisionThreshold||y.join==="rect"||!y.join&&(y.thickness<=2||y.count>=d.maxPoints)?x.shaders.rect(y):x.shaders.miter(y)))}),this},d.prototype.update=function(x){var w=this;if(x){x.length!=null?typeof x[0]=="number"&&(x=[{positions:x}]):Array.isArray(x)||(x=[x]);var C=this,y=C.regl,S=C.gl;if(x.forEach(function(k,I){var O=w.passes[I];if(k!==void 0){if(k===null){w.passes[I]=null;return}if(typeof k[0]=="number"&&(k={positions:k}),k=L(k,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),O||(w.passes[I]=O={id:I,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:y.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:y.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},k=o({},d.defaults,k)),k.thickness!=null&&(O.thickness=parseFloat(k.thickness)),k.opacity!=null&&(O.opacity=parseFloat(k.opacity)),k.miterLimit!=null&&(O.miterLimit=parseFloat(k.miterLimit)),k.overlay!=null&&(O.overlay=!!k.overlay,I<d.maxLines&&(O.depth=2*(d.maxLines-1-I%d.maxLines)/d.maxLines-1)),k.join!=null&&(O.join=k.join),k.hole!=null&&(O.hole=k.hole),k.fill!=null&&(O.fill=k.fill?b(k.fill,"uint8"):null),k.viewport!=null&&(O.viewport=l(k.viewport)),O.viewport||(O.viewport=l([S.drawingBufferWidth,S.drawingBufferHeight])),k.close!=null&&(O.close=k.close),k.positions===null&&(k.positions=[]),k.positions){var z,B;if(k.positions.x&&k.positions.y){var F=k.positions.x,_=k.positions.y;B=O.count=Math.max(F.length,_.length),z=new Float64Array(B*2);for(var N=0;N<B;N++)z[N*2]=F[N],z[N*2+1]=_[N]}else z=A(k.positions,"float64"),B=O.count=Math.floor(z.length/2);var G=O.bounds=P(z,2);if(O.fill){for(var X=[],$={},et=0,ot=0,nt=0,Z=O.count;ot<Z;ot++){var Q=z[ot*2],W=z[ot*2+1];isNaN(Q)||isNaN(W)||Q==null||W==null?(Q=z[et*2],W=z[et*2+1],$[ot]=et):et=ot,X[nt++]=Q,X[nt++]=W}if(k.splitNull){O.count-1 in $||($[O.count]=O.count-1);var J=Object.keys($).map(Number).sort(function(ft,pt){return ft-pt}),it=[],K=0,H=O.hole!=null?O.hole[0]:null;if(H!=null){var at=f(J,function(ft){return ft>=H});J=J.slice(0,at),J.push(H)}for(var tt=function(ft){var pt=X.slice(K*2,J[ft]*2).concat(H?X.slice(H*2):[]),Dt=(O.hole||[]).map(function($t){return $t-H+(J[ft]-K)}),Ut=v(pt,Dt);Ut=Ut.map(function($t){return $t+K+($t+K<J[ft]?0:H-J[ft])}),it.push.apply(it,Ut),K=J[ft]+1},lt=0;lt<J.length;lt++)tt(lt);for(var dt=0,mt=it.length;dt<mt;dt++)$[it[dt]]!=null&&(it[dt]=$[it[dt]]);O.triangles=it}else{for(var gt=v(X,O.hole||[]),Mt=0,Lt=gt.length;Mt<Lt;Mt++)$[gt[Mt]]!=null&&(gt[Mt]=$[gt[Mt]]);O.triangles=gt}}var zt=new Float64Array(z);p(zt,2,G);var xt=new Float64Array(B*2+6);O.close?z[0]===z[B*2-2]&&z[1]===z[B*2-1]?(xt[0]=zt[B*2-4],xt[1]=zt[B*2-3]):(xt[0]=zt[B*2-2],xt[1]=zt[B*2-1]):(xt[0]=zt[0],xt[1]=zt[1]),xt.set(zt,2),O.close?z[0]===z[B*2-2]&&z[1]===z[B*2-1]?(xt[B*2+2]=zt[2],xt[B*2+3]=zt[3],O.count-=1):(xt[B*2+2]=zt[0],xt[B*2+3]=zt[1],xt[B*2+4]=zt[2],xt[B*2+5]=zt[3]):(xt[B*2+2]=zt[B*2-2],xt[B*2+3]=zt[B*2-1],xt[B*2+4]=zt[B*2-2],xt[B*2+5]=zt[B*2-1]);var Ct=e(xt);O.positionBuffer(Ct);var wt=s(xt,Ct);O.positionFractBuffer(wt)}if(k.range?O.range=k.range:O.range||(O.range=O.bounds),(k.range||k.positions)&&O.count){var Rt=O.bounds,Tt=Rt[2]-Rt[0],Bt=Rt[3]-Rt[1],Gt=O.range[2]-O.range[0],te=O.range[3]-O.range[1];O.scale=[Tt/Gt,Bt/te],O.translate=[-O.range[0]/Gt+Rt[0]/Gt||0,-O.range[1]/te+Rt[1]/te||0],O.scaleFract=s(O.scale),O.translateFract=s(O.translate)}if(k.dashes){var Wt=0,jt;if(!k.dashes||k.dashes.length<2)Wt=1,jt=new Uint8Array([255,255,255,255,255,255,255,255]);else{Wt=0;for(var ie=0;ie<k.dashes.length;++ie)Wt+=k.dashes[ie];jt=new Uint8Array(Wt*d.dashMult);for(var ue=0,fe=255,pe=0;pe<2;pe++)for(var Te=0;Te<k.dashes.length;++Te){for(var Qt=0,Pt=k.dashes[Te]*d.dashMult*.5;Qt<Pt;++Qt)jt[ue++]=fe;fe^=255}}O.dashLength=Wt,O.dashTexture({channels:1,data:jt,width:jt.length,height:1,mag:"linear",min:"linear"},0,0)}if(k.color){var Ot=O.count,Nt=k.color;Nt||(Nt="transparent");var Ht=new Uint8Array(Ot*4+4);if(!Array.isArray(Nt)||typeof Nt[0]=="number")for(var St=b(Nt,"uint8"),kt=0;kt<Ot+1;kt++)Ht.set(St,kt*4);else{for(var Ft=0;Ft<Ot;Ft++){var At=b(Nt[Ft],"uint8");Ht.set(At,Ft*4)}Ht.set(b(Nt[0],"uint8"),Ot*4)}O.colorBuffer({usage:"dynamic",type:"uint8",data:Ht})}}}),x.length<this.passes.length){for(var M=x.length;M<this.passes.length;M++){var a=this.passes[M];a&&(a.colorBuffer.destroy(),a.positionBuffer.destroy(),a.dashTexture.destroy())}this.passes.length=x.length}for(var E=[],m=0;m<this.passes.length;m++)this.passes[m]!==null&&E.push(this.passes[m]);return this.passes=E,this}},d.prototype.destroy=function(){return this.passes.forEach(function(x){x.colorBuffer.destroy(),x.positionBuffer.destroy(),x.dashTexture.destroy()}),this.passes.length=0,this}},38540:function(j,V,t){function b(a,E){var m=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(m!=null){var k,I,O,z,B=[],F=!0,_=!1;try{if(O=(m=m.call(a)).next,E!==0)for(;!(F=(k=O.call(m)).done)&&(B.push(k.value),B.length!==E);F=!0);}catch(N){_=!0,I=N}finally{try{if(!F&&m.return!=null&&(z=m.return(),Object(z)!==z))return}finally{if(_)throw I}}return B}}function P(a,E){return A(a)||b(a,E)||p(a,E)||s()}function o(a){return L(a)||v(a)||p(a)||e()}function L(a){if(Array.isArray(a))return r(a)}function A(a){if(Array.isArray(a))return a}function v(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function p(a,E){if(a){if(typeof a=="string")return r(a,E);var m=Object.prototype.toString.call(a).slice(8,-1);if(m==="Object"&&a.constructor&&(m=a.constructor.name),m==="Map"||m==="Set")return Array.from(a);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return r(a,E)}}function r(a,E){(E==null||E>a.length)&&(E=a.length);for(var m=0,k=new Array(E);m<E;m++)k[m]=a[m];return k}function e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var n=t(72160),l=t(76752),f=t(3808),u=t(3108),g=t(50896),h=t(26444),T=t(55616),c=t(45223),i=t(47520),d=t(96604),x=t(37816),w=t(51160),C=y;function y(a,E){var m=this;if(!(this instanceof y))return new y(a,E);typeof a=="function"?(E||(E={}),E.regl=a):(E=a,a=null),E&&E.length&&(E.positions=E),a=E.regl;var k=a._gl,I,O=[],z={},B=[],F=[null],_=[null],N=255,G=100;this.tooManyColors=d,I=a.texture({data:new Uint8Array(N*4),width:N,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),g(this,{regl:a,gl:k,groups:B,markerCache:_,markerTextures:F,palette:O,paletteIds:z,paletteTexture:I,maxColors:N,maxSize:G,canvas:k.canvas}),this.update(E);var X={uniforms:{constPointSize:!!E.constPointSize,opacity:a.prop("opacity"),paletteSize:function(nt,Z){return[m.tooManyColors?0:N,I.height]},pixelRatio:a.context("pixelRatio"),scale:a.prop("scale"),scaleFract:a.prop("scaleFract"),translate:a.prop("translate"),translateFract:a.prop("translateFract"),markerTexture:a.prop("markerTexture"),paletteTexture:I},attributes:{x:function(nt,Z){return Z.xAttr||{buffer:Z.positionBuffer,stride:8,offset:0}},y:function(nt,Z){return Z.yAttr||{buffer:Z.positionBuffer,stride:8,offset:4}},xFract:function(nt,Z){return Z.xAttr?{constant:[0,0]}:{buffer:Z.positionFractBuffer,stride:8,offset:0}},yFract:function(nt,Z){return Z.yAttr?{constant:[0,0]}:{buffer:Z.positionFractBuffer,stride:8,offset:4}},size:function(nt,Z){return Z.size.length?{buffer:Z.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(Z.size*255/m.maxSize)]}},borderSize:function(nt,Z){return Z.borderSize.length?{buffer:Z.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(Z.borderSize*255/m.maxSize)]}},colorId:function(nt,Z){return Z.color.length?{buffer:Z.colorBuffer,stride:m.tooManyColors?8:4,offset:0}:{constant:m.tooManyColors?O.slice(Z.color*4,Z.color*4+4):[Z.color]}},borderColorId:function(nt,Z){return Z.borderColor.length?{buffer:Z.colorBuffer,stride:m.tooManyColors?8:4,offset:m.tooManyColors?4:2}:{constant:m.tooManyColors?O.slice(Z.borderColor*4,Z.borderColor*4+4):[Z.borderColor]}},isActive:function(nt,Z){return Z.activation===!0?{constant:[1]}:Z.activation?Z.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:a.prop("viewport")},viewport:a.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:a.prop("elements"),count:a.prop("count"),offset:a.prop("offset"),primitive:"points"},$=g({},X);$.frag=h([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),$.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}
`]),this.drawMarker=a($);var et=g({},X);et.frag=h([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),et.vert=h([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

// \`invariant\` effectively turns off optimizations for the position.
// We need this because -fast-math on M1 Macs is re-ordering
// floating point operations in a way that causes floating point
// precision limits to put points in the wrong locations.
invariant gl_Position;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),d&&(et.frag=et.frag.replace("smoothstep","smoothStep"),$.frag=$.frag.replace("smoothstep","smoothStep")),this.drawCircle=a(et)}y.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},y.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},y.prototype.draw=function(){for(var a=this,E=arguments.length,m=new Array(E),k=0;k<E;k++)m[k]=arguments[k];var I=this.groups;if(m.length===1&&Array.isArray(m[0])&&(m[0][0]===null||Array.isArray(m[0][0]))&&(m=m[0]),this.regl._refresh(),m.length)for(var O=0;O<m.length;O++)this.drawItem(O,m[O]);else I.forEach(function(z,B){a.drawItem(B)});return this},y.prototype.drawItem=function(a,E){var m=this.groups,k=m[a];if(typeof E=="number"&&(a=E,k=m[E],E=null),!!(k&&k.count&&k.opacity)){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,E));for(var I=[],O=1;O<k.activation.length;O++)!k.activation[O]||k.activation[O]!==!0&&!k.activation[O].data.length||I.push.apply(I,o(this.getMarkerDrawOptions(O,k,E)));I.length&&this.drawMarker(I)}},y.prototype.getMarkerDrawOptions=function(a,E,m){var k=E.range,I=E.tree,O=E.viewport,z=E.activation,B=E.selectionBuffer,F=E.count;if(this.regl,!I)return m?[g({},E,{markerTexture:this.markerTextures[a],activation:z[a],count:m.length,elements:m,offset:0})]:[g({},E,{markerTexture:this.markerTextures[a],activation:z[a],offset:0})];var _=[],N=I.range(k,{lod:!0,px:[(k[2]-k[0])/O.width,(k[3]-k[1])/O.height]});if(m){for(var G=z[a],X=G.data,$=new Uint8Array(F),et=0;et<m.length;et++){var ot=m[et];$[ot]=X?X[ot]:1}B.subdata($)}for(var nt=N.length;nt--;){var Z=P(N[nt],2),Q=Z[0],W=Z[1];_.push(g({},E,{markerTexture:this.markerTextures[a],activation:m?B:z[a],offset:Q,count:W-Q}))}return _},y.prototype.update=function(){for(var a=this,E=arguments.length,m=new Array(E),k=0;k<E;k++)m[k]=arguments[k];if(m.length){m.length===1&&Array.isArray(m[0])&&(m=m[0]);var I=this.groups,O=this.gl,z=this.regl,B=this.maxSize,F=this.maxColors,_=this.palette;this.groups=I=m.map(function(N,G){var X=I[G];if(N===void 0)return X;N===null?N={positions:null}:typeof N=="function"?N={ondraw:N}:typeof N[0]=="number"&&(N={positions:N}),N=T(N,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),N.positions===null&&(N.positions=[]),N.tooManyColors!=null&&(a.tooManyColors=N.tooManyColors),X||(I[G]=X={id:G,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:z.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:z.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:z.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:z.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:z.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},N=g({},y.defaults,N)),N.positions&&!("marker"in N)&&(N.marker=X.marker,delete X.marker),N.marker&&!("positions"in N)&&(N.positions=X.positions,delete X.positions);var $=0,et=0;if(c(X,N,[{snap:!0,size:function(xt,Ct){return xt==null&&(xt=y.defaults.size),$+=xt&&xt.length?1:0,xt},borderSize:function(xt,Ct){return xt==null&&(xt=y.defaults.borderSize),$+=xt&&xt.length?1:0,xt},opacity:parseFloat,color:function(xt,Ct){return xt==null&&(xt=y.defaults.color),xt=a.updateColor(xt),et++,xt},borderColor:function(xt,Ct){return xt==null&&(xt=y.defaults.borderColor),xt=a.updateColor(xt),et++,xt},bounds:function(xt,Ct,wt){return"range"in wt||(wt.range=null),xt},positions:function(xt,Ct,wt){var Rt=Ct.snap,Tt=Ct.positionBuffer,Bt=Ct.positionFractBuffer,Gt=Ct.selectionBuffer;if(xt.x||xt.y)return xt.x.length?Ct.xAttr={buffer:z.buffer(xt.x),offset:0,stride:4,count:xt.x.length}:Ct.xAttr={buffer:xt.x.buffer,offset:xt.x.offset*4||0,stride:(xt.x.stride||1)*4,count:xt.x.count},xt.y.length?Ct.yAttr={buffer:z.buffer(xt.y),offset:0,stride:4,count:xt.y.length}:Ct.yAttr={buffer:xt.y.buffer,offset:xt.y.offset*4||0,stride:(xt.y.stride||1)*4,count:xt.y.count},Ct.count=Math.max(Ct.xAttr.count,Ct.yAttr.count),xt;xt=i(xt,"float64");var te=Ct.count=Math.floor(xt.length/2),Wt=Ct.bounds=te?l(xt,2):null;if(!wt.range&&!Ct.range&&(delete Ct.range,wt.range=Wt),!wt.marker&&!Ct.marker&&(delete Ct.marker,wt.marker=null),Rt&&(Rt===!0||te>Rt)?Ct.tree=u(xt,{bounds:Wt}):Rt&&Rt.length&&(Ct.tree=Rt),Ct.tree){var jt={primitive:"points",usage:"static",data:Ct.tree,type:"uint32"};Ct.elements?Ct.elements(jt):Ct.elements=z.elements(jt)}var ie=x.float32(xt);Tt({data:ie,usage:"dynamic"});var ue=x.fract32(xt,ie);return Bt({data:ue,usage:"dynamic"}),Gt({data:new Uint8Array(te),type:"uint8",usage:"stream"}),xt}},{marker:function(xt,Ct,wt){var Rt=Ct.activation;if(Rt.forEach(function(ue){return ue&&ue.destroy&&ue.destroy()}),Rt.length=0,!xt||typeof xt[0]=="number"){var Tt=a.addMarker(xt);Rt[Tt]=!0}else{for(var Bt=[],Gt=0,te=Math.min(xt.length,Ct.count);Gt<te;Gt++){var Wt=a.addMarker(xt[Gt]);Bt[Wt]||(Bt[Wt]=new Uint8Array(Ct.count)),Bt[Wt][Gt]=1}for(var jt=0;jt<Bt.length;jt++)if(Bt[jt]){var ie={data:Bt[jt],type:"uint8",usage:"static"};Rt[jt]?Rt[jt](ie):Rt[jt]=z.buffer(ie),Rt[jt].data=Bt[jt]}}return xt},range:function(xt,Ct,wt){var Rt=Ct.bounds;if(Rt)return xt||(xt=Rt),Ct.scale=[1/(xt[2]-xt[0]),1/(xt[3]-xt[1])],Ct.translate=[-xt[0],-xt[1]],Ct.scaleFract=x.fract(Ct.scale),Ct.translateFract=x.fract(Ct.translate),xt},viewport:function(xt){var Ct=w(xt||[O.drawingBufferWidth,O.drawingBufferHeight]);return Ct}}]),$){var ot=X,nt=ot.count,Z=ot.size,Q=ot.borderSize,W=ot.sizeBuffer,J=new Uint8Array(nt*2);if(Z.length||Q.length)for(var it=0;it<nt;it++)J[it*2]=Math.round((Z[it]==null?Z:Z[it])*255/B),J[it*2+1]=Math.round((Q[it]==null?Q:Q[it])*255/B);W({data:J,usage:"dynamic"})}if(et){var K=X,H=K.count,at=K.color,tt=K.borderColor,lt=K.colorBuffer,dt;if(a.tooManyColors){if(at.length||tt.length){dt=new Uint8Array(H*8);for(var mt=0;mt<H;mt++){var gt=at[mt];dt[mt*8]=_[gt*4],dt[mt*8+1]=_[gt*4+1],dt[mt*8+2]=_[gt*4+2],dt[mt*8+3]=_[gt*4+3];var Mt=tt[mt];dt[mt*8+4]=_[Mt*4],dt[mt*8+5]=_[Mt*4+1],dt[mt*8+6]=_[Mt*4+2],dt[mt*8+7]=_[Mt*4+3]}}}else if(at.length||tt.length){dt=new Uint8Array(H*4+2);for(var Lt=0;Lt<H;Lt++)at[Lt]!=null&&(dt[Lt*4]=at[Lt]%F,dt[Lt*4+1]=Math.floor(at[Lt]/F)),tt[Lt]!=null&&(dt[Lt*4+2]=tt[Lt]%F,dt[Lt*4+3]=Math.floor(tt[Lt]/F))}lt({data:dt||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return X})}},y.prototype.addMarker=function(a){var E=this.markerTextures,m=this.regl,k=this.markerCache,I=a==null?0:k.indexOf(a);if(I>=0)return I;var O;if(a instanceof Uint8Array||a instanceof Uint8ClampedArray)O=a;else{O=new Uint8Array(a.length);for(var z=0,B=a.length;z<B;z++)O[z]=a[z]*255}var F=Math.floor(Math.sqrt(O.length));return I=E.length,k.push(a),E.push(m.texture({channels:1,data:O,radius:F,mag:"linear",min:"linear"})),I},y.prototype.updateColor=function(a){var E=this.paletteIds,m=this.palette,k=this.maxColors;Array.isArray(a)||(a=[a]);var I=[];if(typeof a[0]=="number"){var O=[];if(Array.isArray(a))for(var z=0;z<a.length;z+=4)O.push(a.slice(z,z+4));else for(var B=0;B<a.length;B+=4)O.push(a.subarray(B,B+4));a=O}for(var F=0;F<a.length;F++){var _=a[F];_=n(_,"uint8");var N=f(_,!1);if(E[N]==null){var G=m.length;E[N]=Math.floor(G/4),m[G]=_[0],m[G+1]=_[1],m[G+2]=_[2],m[G+3]=_[3]}I[F]=E[N]}return!this.tooManyColors&&m.length>k*4&&(this.tooManyColors=!0),this.updatePalette(m),I.length===1?I[0]:I},y.prototype.updatePalette=function(a){if(!this.tooManyColors){var E=this.maxColors,m=this.paletteTexture,k=Math.ceil(a.length*.25/E);if(k>1){a=a.slice();for(var I=a.length*.25%E;I<k*E;I++)a.push(0,0,0,0)}m.height<k&&m.resize(E,k),m.subimage({width:Math.min(a.length*.25,E),height:k,data:a},0,0)}},y.prototype.destroy=function(){return this.groups.forEach(function(a){a.sizeBuffer.destroy(),a.positionBuffer.destroy(),a.positionFractBuffer.destroy(),a.colorBuffer.destroy(),a.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),a.selectionBuffer.destroy(),a.elements&&a.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(a){return a&&a.destroy&&a.destroy()}),this};var S=t(50896),M=function(E,m){var k=new C(E,m),I=k.render.bind(k);return S(I,{render:I,update:k.update.bind(k),draw:k.draw.bind(k),destroy:k.destroy.bind(k),regl:k.regl,gl:k.gl,canvas:k.gl.canvas,groups:k.groups,markers:k.markerCache,palette:k.palette}),I};j.exports=M},55795:function(j,V,t){var b=t(38540),P=t(55616),o=t(76752),L=t(3951),A=t(67752),v=t(51160),p=t(47520);j.exports=r;function r(l,f){if(!(this instanceof r))return new r(l);this.traces=[],this.passes={},this.regl=l,this.scatter=b(l),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var l=this,f,u=[],g=arguments.length;g--;)u[g]=arguments[g];return u.length&&(f=this).update.apply(f,u),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=L(function(){l.draw(),l.dirty=!0,l.planned=null})):(this.draw(),this.dirty=!0,L(function(){l.dirty=!1})),this)},r.prototype.update=function(){for(var l,f=[],u=arguments.length;u--;)f[u]=arguments[u];if(f.length){for(var g=0;g<f.length;g++)this.updateItem(g,f[g]);this.traces=this.traces.filter(Boolean);for(var h=[],T=0,c=0;c<this.traces.length;c++){for(var i=this.traces[c],d=this.traces[c].passes,x=0;x<d.length;x++)h.push(this.passes[d[x]]);i.passOffset=T,T+=i.passes.length}return(l=this.scatter).update.apply(l,h),this}},r.prototype.updateItem=function(l,f){var u=this,g=u.regl;if(f===null)return this.traces[l]=null,this;if(!f)return this;var h=P(f,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),T=this.traces[l]||(this.traces[l]={id:l,buffer:g.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:v([g._gl.drawingBufferWidth,g._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(h.color!=null&&(T.color=h.color),h.size!=null&&(T.size=h.size),h.marker!=null&&(T.marker=h.marker),h.borderColor!=null&&(T.borderColor=h.borderColor),h.borderSize!=null&&(T.borderSize=h.borderSize),h.opacity!=null&&(T.opacity=h.opacity),h.viewport&&(T.viewport=v(h.viewport)),h.diagonal!=null&&(T.diagonal=h.diagonal),h.upper!=null&&(T.upper=h.upper),h.lower!=null&&(T.lower=h.lower),h.data){T.buffer(p(h.data)),T.columns=h.data.length,T.count=h.data[0].length,T.bounds=[];for(var c=0;c<T.columns;c++)T.bounds[c]=o(h.data[c],1)}var i;h.range&&(T.range=h.range,i=T.range&&typeof T.range[0]!="number"),h.domain&&(T.domain=h.domain);var d=!1;h.padding!=null&&(Array.isArray(h.padding)&&h.padding.length===T.columns&&typeof h.padding[h.padding.length-1]=="number"?(T.padding=h.padding.map(n),d=!0):T.padding=n(h.padding));var x=T.columns,w=T.count,C=T.viewport.width,y=T.viewport.height,S=T.viewport.x,M=T.viewport.y,a=C/x,E=y/x;T.passes=[];for(var m=0;m<x;m++)for(var k=0;k<x;k++)if(!(!T.diagonal&&k===m)&&!(!T.upper&&m>k)&&!(!T.lower&&m<k)){var I=e(T.id,m,k),O=this.passes[I]||(this.passes[I]={});if(h.data&&(h.transpose?O.positions={x:{buffer:T.buffer,offset:k,count:w,stride:x},y:{buffer:T.buffer,offset:m,count:w,stride:x}}:O.positions={x:{buffer:T.buffer,offset:k*w,count:w},y:{buffer:T.buffer,offset:m*w,count:w}},O.bounds=s(T.bounds,m,k)),h.domain||h.viewport||h.data){var z=d?s(T.padding,m,k):T.padding;if(T.domain){var B=s(T.domain,m,k),F=B[0],_=B[1],N=B[2],G=B[3];O.viewport=[S+F*C+z[0],M+_*y+z[1],S+N*C-z[2],M+G*y-z[3]]}else O.viewport=[S+k*a+a*z[0],M+m*E+E*z[1],S+(k+1)*a-a*z[2],M+(m+1)*E-E*z[3]]}h.color&&(O.color=T.color),h.size&&(O.size=T.size),h.marker&&(O.marker=T.marker),h.borderSize&&(O.borderSize=T.borderSize),h.borderColor&&(O.borderColor=T.borderColor),h.opacity&&(O.opacity=T.opacity),h.range&&(O.range=i?s(T.range,m,k):T.range||O.bounds),T.passes.push(I)}return this},r.prototype.draw=function(){for(var l,f=[],u=arguments.length;u--;)f[u]=arguments[u];if(!f.length)this.scatter.draw();else{for(var g=[],h=0;h<f.length;h++)if(typeof f[h]=="number"){var T=this.traces[f[h]],c=T.passes,i=T.passOffset;g.push.apply(g,A(i,i+c.length))}else if(f[h].length){var d=f[h],x=this.traces[h],w=x.passes,C=x.passOffset;w=w.map(function(y,S){g[C+S]=d})}(l=this.scatter).draw.apply(l,g)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(l){l.buffer&&l.buffer.destroy&&l.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function e(l,f,u){var g=l.id!=null?l.id:l,h=f,T=u,c=g<<16|(h&255)<<8|T&255;return c}function s(l,f,u){var g,h,T,c,i=l[f],d=l[u];return i.length>2?(i[0],i[2],g=i[1],h=i[3]):i.length?(g=i[0],h=i[1]):(i.x,g=i.y,i.x+i.width,h=i.y+i.height),d.length>2?(T=d[0],c=d[2],d[1],d[3]):d.length?(T=d[0],c=d[1]):(T=d.x,d.y,c=d.x+d.width,d.y+d.height),[T,g,c,h]}function n(l){if(typeof l=="number")return[l,l,l,l];if(l.length===2)return[l[0],l[1],l[0],l[1]];var f=v(l);return[f.x,f.y,f.x+f.width,f.y+f.height]}},28624:function(j){(function(V,t){j.exports=t()})(this,function(){function V(he,Ye){this.id=lt++,this.type=he,this.data=Ye}function t(he){if(he.length===0)return[];var Ye=he.charAt(0),Qe=he.charAt(he.length-1);if(1<he.length&&Ye===Qe&&(Ye==='"'||Ye==="'"))return['"'+he.substr(1,he.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ye=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(he))return t(he.substr(0,Ye.index)).concat(t(Ye[1])).concat(t(he.substr(Ye.index+Ye[0].length)));if(Ye=he.split("."),Ye.length===1)return['"'+he.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(he=[],Qe=0;Qe<Ye.length;++Qe)he=he.concat(t(Ye[Qe]));return he}function b(he){return"["+t(he).join("][")+"]"}function P(he,Ye){if(typeof he=="function")return new V(0,he);if(typeof he=="number"||typeof he=="boolean")return new V(5,he);if(Array.isArray(he))return new V(6,he.map(function(Qe,mr){return P(Qe)}));if(he instanceof V)return he}function o(){var he={"":0},Ye=[""];return{id:function(Qe){var mr=he[Qe];return mr||(mr=he[Qe]=Ye.length,Ye.push(Qe),mr)},str:function(Qe){return Ye[Qe]}}}function L(he,Ye,Qe){function mr(){var ne=window.innerWidth,ge=window.innerHeight;he!==document.body&&(ge=ir.getBoundingClientRect(),ne=ge.right-ge.left,ge=ge.bottom-ge.top),ir.width=Qe*ne,ir.height=Qe*ge}var ir=document.createElement("canvas");tt(ir.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),he.appendChild(ir),he===document.body&&(ir.style.position="absolute",tt(he.style,{margin:0,padding:0}));var ve;return he!==document.body&&typeof ResizeObserver=="function"?(ve=new ResizeObserver(function(){setTimeout(mr)}),ve.observe(he)):window.addEventListener("resize",mr,!1),mr(),{canvas:ir,onDestroy:function(){ve?ve.disconnect():window.removeEventListener("resize",mr),he.removeChild(ir)}}}function A(he,Ye){function Qe(mr){try{return he.getContext(mr,Ye)}catch{return null}}return Qe("webgl")||Qe("experimental-webgl")||Qe("webgl-experimental")}function v(he){return typeof he=="string"?he.split():he}function p(he){return typeof he=="string"?document.querySelector(he):he}function r(he){var Ye=he||{},Qe,mr,ir,ve;he={};var ne=[],ge=[],Ae=typeof window>"u"?1:window.devicePixelRatio,Re=!1,ze={},ke=function(Ke){},_e=function(){};if(typeof Ye=="string"?Qe=document.querySelector(Ye):typeof Ye=="object"&&(typeof Ye.nodeName=="string"&&typeof Ye.appendChild=="function"&&typeof Ye.getBoundingClientRect=="function"?Qe=Ye:typeof Ye.drawArrays=="function"||typeof Ye.drawElements=="function"?(ve=Ye,ir=ve.canvas):("gl"in Ye?ve=Ye.gl:"canvas"in Ye?ir=p(Ye.canvas):"container"in Ye&&(mr=p(Ye.container)),"attributes"in Ye&&(he=Ye.attributes),"extensions"in Ye&&(ne=v(Ye.extensions)),"optionalExtensions"in Ye&&(ge=v(Ye.optionalExtensions)),"onDone"in Ye&&(ke=Ye.onDone),"profile"in Ye&&(Re=!!Ye.profile),"pixelRatio"in Ye&&(Ae=+Ye.pixelRatio),"cachedCode"in Ye&&(ze=Ye.cachedCode))),Qe&&(Qe.nodeName.toLowerCase()==="canvas"?ir=Qe:mr=Qe),!ve){if(!ir){if(Qe=L(mr||document.body,ke,Ae),!Qe)return null;ir=Qe.canvas,_e=Qe.onDestroy}he.premultipliedAlpha===void 0&&(he.premultipliedAlpha=!0),ve=A(ir,he)}return ve?{gl:ve,canvas:ir,container:mr,extensions:ne,optionalExtensions:ge,pixelRatio:Ae,profile:Re,cachedCode:ze,onDone:ke,onDestroy:_e}:(_e(),ke("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function e(he,Ye){function Qe(ne){ne=ne.toLowerCase();var ge;try{ge=mr[ne]=he.getExtension(ne)}catch{}return!!ge}for(var mr={},ir=0;ir<Ye.extensions.length;++ir){var ve=Ye.extensions[ir];if(!Qe(ve))return Ye.onDestroy(),Ye.onDone('"'+ve+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ye.optionalExtensions.forEach(Qe),{extensions:mr,restore:function(){Object.keys(mr).forEach(function(ne){if(mr[ne]&&!Qe(ne))throw Error("(regl): error restoring extension "+ne)})}}}function s(he,Ye){for(var Qe=Array(he),mr=0;mr<he;++mr)Qe[mr]=Ye(mr);return Qe}function n(he){var Ye,Qe;return Ye=(65535<he)<<4,he>>>=Ye,Qe=(255<he)<<3,he>>>=Qe,Ye|=Qe,Qe=(15<he)<<2,he>>>=Qe,Ye|=Qe,Qe=(3<he)<<1,Ye|Qe|he>>>Qe>>1}function l(){function he(mr){t:{for(var ir=16;268435456>=ir;ir*=16)if(mr<=ir){mr=ir;break t}mr=0}return ir=Qe[n(mr)>>2],0<ir.length?ir.pop():new ArrayBuffer(mr)}function Ye(mr){Qe[n(mr.byteLength)>>2].push(mr)}var Qe=s(8,function(){return[]});return{alloc:he,free:Ye,allocType:function(mr,ir){var ve=null;switch(mr){case 5120:ve=new Int8Array(he(ir),0,ir);break;case 5121:ve=new Uint8Array(he(ir),0,ir);break;case 5122:ve=new Int16Array(he(2*ir),0,ir);break;case 5123:ve=new Uint16Array(he(2*ir),0,ir);break;case 5124:ve=new Int32Array(he(4*ir),0,ir);break;case 5125:ve=new Uint32Array(he(4*ir),0,ir);break;case 5126:ve=new Float32Array(he(4*ir),0,ir);break;default:return null}return ve.length!==ir?ve.subarray(0,ir):ve},freeType:function(mr){Ye(mr.buffer)}}}function f(he){return!!he&&typeof he=="object"&&Array.isArray(he.shape)&&Array.isArray(he.stride)&&typeof he.offset=="number"&&he.shape.length===he.stride.length&&(Array.isArray(he.data)||zt(he.data))}function u(he,Ye,Qe,mr,ir,ve){for(var ne=0;ne<Ye;++ne)for(var ge=he[ne],Ae=0;Ae<Qe;++Ae)for(var Re=ge[Ae],ze=0;ze<mr;++ze)ir[ve++]=Re[ze]}function g(he,Ye,Qe,mr,ir){for(var ve=1,ne=Qe+1;ne<Ye.length;++ne)ve*=Ye[ne];var ge=Ye[Qe];if(Ye.length-Qe===4){var Ae=Ye[Qe+1],Re=Ye[Qe+2];for(Ye=Ye[Qe+3],ne=0;ne<ge;++ne)u(he[ne],Ae,Re,Ye,mr,ir),ir+=ve}else for(ne=0;ne<ge;++ne)g(he[ne],Ye,Qe+1,mr,ir),ir+=ve}function h(he){return wt[Object.prototype.toString.call(he)]|0}function T(he,Ye){for(var Qe=0;Qe<Ye.length;++Qe)he[Qe]=Ye[Qe]}function c(he,Ye,Qe,mr,ir,ve,ne){for(var ge=0,Ae=0;Ae<Qe;++Ae)for(var Re=0;Re<mr;++Re)he[ge++]=Ye[ir*Ae+ve*Re+ne]}function i(he,Ye,Qe,mr){function ir(ke){this.id=Ae++,this.buffer=he.createBuffer(),this.type=ke,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Qe.profile&&(this.stats={size:0})}function ve(ke,_e,Ke){ke.byteLength=_e.byteLength,he.bufferData(ke.type,_e,Ke)}function ne(ke,_e,Ke,hr,cr,dr){if(ke.usage=Ke,Array.isArray(_e)){if(ke.dtype=hr||5126,0<_e.length)if(Array.isArray(_e[0])){cr=Gt(_e);for(var fr=hr=1;fr<cr.length;++fr)hr*=cr[fr];ke.dimension=hr,_e=Bt(_e,cr,ke.dtype),ve(ke,_e,Ke),dr?ke.persistentData=_e:Mt.freeType(_e)}else typeof _e[0]=="number"?(ke.dimension=cr,cr=Mt.allocType(ke.dtype,_e.length),T(cr,_e),ve(ke,cr,Ke),dr?ke.persistentData=cr:Mt.freeType(cr)):zt(_e[0])&&(ke.dimension=_e[0].length,ke.dtype=hr||h(_e[0])||5126,_e=Bt(_e,[_e.length,_e[0].length],ke.dtype),ve(ke,_e,Ke),dr?ke.persistentData=_e:Mt.freeType(_e))}else if(zt(_e))ke.dtype=hr||h(_e),ke.dimension=cr,ve(ke,_e,Ke),dr&&(ke.persistentData=new Uint8Array(new Uint8Array(_e.buffer)));else if(f(_e)){cr=_e.shape;var Lr=_e.stride,fr=_e.offset,xr=0,Yt=0,Jt=0,qe=0;cr.length===1?(xr=cr[0],Yt=1,Jt=Lr[0],qe=0):cr.length===2&&(xr=cr[0],Yt=cr[1],Jt=Lr[0],qe=Lr[1]),ke.dtype=hr||h(_e.data)||5126,ke.dimension=Yt,cr=Mt.allocType(ke.dtype,xr*Yt),c(cr,_e.data,xr,Yt,Jt,qe,fr),ve(ke,cr,Ke),dr?ke.persistentData=cr:Mt.freeType(cr)}else _e instanceof ArrayBuffer&&(ke.dtype=5121,ke.dimension=cr,ve(ke,_e,Ke),dr&&(ke.persistentData=new Uint8Array(new Uint8Array(_e))))}function ge(ke){Ye.bufferCount--,mr(ke),he.deleteBuffer(ke.buffer),ke.buffer=null,delete Re[ke.id]}var Ae=0,Re={};ir.prototype.bind=function(){he.bindBuffer(this.type,this.buffer)},ir.prototype.destroy=function(){ge(this)};var ze=[];return Qe.profile&&(Ye.getTotalBufferSize=function(){var ke=0;return Object.keys(Re).forEach(function(_e){ke+=Re[_e].stats.size}),ke}),{create:function(ke,_e,Ke,hr){function cr(fr){var Lr=35044,xr=null,Yt=0,Jt=0,qe=1;return Array.isArray(fr)||zt(fr)||f(fr)||fr instanceof ArrayBuffer?xr=fr:typeof fr=="number"?Yt=fr|0:fr&&("data"in fr&&(xr=fr.data),"usage"in fr&&(Lr=Tt[fr.usage]),"type"in fr&&(Jt=Rt[fr.type]),"dimension"in fr&&(qe=fr.dimension|0),"length"in fr&&(Yt=fr.length|0)),dr.bind(),xr?ne(dr,xr,Lr,Jt,qe,hr):(Yt&&he.bufferData(dr.type,Yt,Lr),dr.dtype=Jt||5121,dr.usage=Lr,dr.dimension=qe,dr.byteLength=Yt),Qe.profile&&(dr.stats.size=dr.byteLength*te[dr.dtype]),cr}Ye.bufferCount++;var dr=new ir(_e);return Re[dr.id]=dr,Ke||cr(ke),cr._reglType="buffer",cr._buffer=dr,cr.subdata=function(fr,Lr){var xr=(Lr||0)|0,Yt;if(dr.bind(),zt(fr)||fr instanceof ArrayBuffer)he.bufferSubData(dr.type,xr,fr);else if(Array.isArray(fr)){if(0<fr.length)if(typeof fr[0]=="number"){var Jt=Mt.allocType(dr.dtype,fr.length);T(Jt,fr),he.bufferSubData(dr.type,xr,Jt),Mt.freeType(Jt)}else(Array.isArray(fr[0])||zt(fr[0]))&&(Yt=Gt(fr),Jt=Bt(fr,Yt,dr.dtype),he.bufferSubData(dr.type,xr,Jt),Mt.freeType(Jt))}else if(f(fr)){Yt=fr.shape;var qe=fr.stride,tr=Jt=0,Ge=0,Ee=0;Yt.length===1?(Jt=Yt[0],tr=1,Ge=qe[0],Ee=0):Yt.length===2&&(Jt=Yt[0],tr=Yt[1],Ge=qe[0],Ee=qe[1]),Yt=Array.isArray(fr.data)?dr.dtype:h(fr.data),Yt=Mt.allocType(Yt,Jt*tr),c(Yt,fr.data,Jt,tr,Ge,Ee,fr.offset),he.bufferSubData(dr.type,xr,Yt),Mt.freeType(Yt)}return cr},Qe.profile&&(cr.stats=dr.stats),cr.destroy=function(){ge(dr)},cr},createStream:function(ke,_e){var Ke=ze.pop();return Ke||(Ke=new ir(ke)),Ke.bind(),ne(Ke,_e,35040,0,1,!1),Ke},destroyStream:function(ke){ze.push(ke)},clear:function(){xt(Re).forEach(ge),ze.forEach(ge)},getBuffer:function(ke){return ke&&ke._buffer instanceof ir?ke._buffer:null},restore:function(){xt(Re).forEach(function(ke){ke.buffer=he.createBuffer(),he.bindBuffer(ke.type,ke.buffer),he.bufferData(ke.type,ke.persistentData||ke.byteLength,ke.usage)})},_initBuffer:ne}}function d(he,Ye,Qe,mr){function ir(ke){this.id=Ae++,ge[this.id]=this,this.buffer=ke,this.primType=4,this.type=this.vertCount=0}function ve(ke,_e,Ke,hr,cr,dr,fr){ke.buffer.bind();var Lr;if(_e?((Lr=fr)||zt(_e)&&(!f(_e)||zt(_e.data))||(Lr=Ye.oes_element_index_uint?5125:5123),Qe._initBuffer(ke.buffer,_e,Ke,Lr,3)):(he.bufferData(34963,dr,Ke),ke.buffer.dtype=Lr||5121,ke.buffer.usage=Ke,ke.buffer.dimension=3,ke.buffer.byteLength=dr),Lr=fr,!fr){switch(ke.buffer.dtype){case 5121:case 5120:Lr=5121;break;case 5123:case 5122:Lr=5123;break;case 5125:case 5124:Lr=5125}ke.buffer.dtype=Lr}ke.type=Lr,_e=cr,0>_e&&(_e=ke.buffer.byteLength,Lr===5123?_e>>=1:Lr===5125&&(_e>>=2)),ke.vertCount=_e,_e=hr,0>hr&&(_e=4,hr=ke.buffer.dimension,hr===1&&(_e=0),hr===2&&(_e=1),hr===3&&(_e=4)),ke.primType=_e}function ne(ke){mr.elementsCount--,delete ge[ke.id],ke.buffer.destroy(),ke.buffer=null}var ge={},Ae=0,Re={uint8:5121,uint16:5123};Ye.oes_element_index_uint&&(Re.uint32=5125),ir.prototype.bind=function(){this.buffer.bind()};var ze=[];return{create:function(ke,_e){function Ke(dr){if(dr)if(typeof dr=="number")hr(dr),cr.primType=4,cr.vertCount=dr|0,cr.type=5121;else{var fr=null,Lr=35044,xr=-1,Yt=-1,Jt=0,qe=0;Array.isArray(dr)||zt(dr)||f(dr)?fr=dr:("data"in dr&&(fr=dr.data),"usage"in dr&&(Lr=Tt[dr.usage]),"primitive"in dr&&(xr=Wt[dr.primitive]),"count"in dr&&(Yt=dr.count|0),"type"in dr&&(qe=Re[dr.type]),"length"in dr?Jt=dr.length|0:(Jt=Yt,qe===5123||qe===5122?Jt*=2:(qe===5125||qe===5124)&&(Jt*=4))),ve(cr,fr,Lr,xr,Yt,Jt,qe)}else hr(),cr.primType=4,cr.vertCount=0,cr.type=5121;return Ke}var hr=Qe.create(null,34963,!0),cr=new ir(hr._buffer);return mr.elementsCount++,Ke(ke),Ke._reglType="elements",Ke._elements=cr,Ke.subdata=function(dr,fr){return hr.subdata(dr,fr),Ke},Ke.destroy=function(){ne(cr)},Ke},createStream:function(ke){var _e=ze.pop();return _e||(_e=new ir(Qe.create(null,34963,!0,!1)._buffer)),ve(_e,ke,35040,-1,-1,0,0),_e},destroyStream:function(ke){ze.push(ke)},getElements:function(ke){return typeof ke=="function"&&ke._elements instanceof ir?ke._elements:null},clear:function(){xt(ge).forEach(ne)}}}function x(he){for(var Ye=Mt.allocType(5123,he.length),Qe=0;Qe<he.length;++Qe)if(isNaN(he[Qe]))Ye[Qe]=65535;else if(he[Qe]===1/0)Ye[Qe]=31744;else if(he[Qe]===-1/0)Ye[Qe]=64512;else{jt[0]=he[Qe];var ve=ie[0],mr=ve>>>31<<15,ir=(ve<<1>>>24)-127,ve=ve>>13&1023;Ye[Qe]=-24>ir?mr:-14>ir?mr+(ve+1024>>-14-ir):15<ir?mr+31744:mr+(ir+15<<10)+ve}return Ye}function w(he){return Array.isArray(he)||zt(he)}function C(he){return"[object "+he+"]"}function y(he){return Array.isArray(he)&&(he.length===0||typeof he[0]=="number")}function S(he){return!!(Array.isArray(he)&&he.length!==0&&w(he[0]))}function M(he){return Object.prototype.toString.call(he)}function a(he){if(!he)return!1;var Ye=M(he);return 0<=St.indexOf(Ye)?!0:y(he)||S(he)||f(he)}function E(he,Ye){he.type===36193?(he.data=x(Ye),Mt.freeType(Ye)):he.data=Ye}function m(he,Ye,Qe,mr,ir,ve){if(he=typeof Ft[he]<"u"?Ft[he]:pe[he]*kt[Ye],ve&&(he*=6),ir){for(mr=0;1<=Qe;)mr+=he*Qe*Qe,Qe/=2;return mr}return he*Qe*mr}function k(he,Ye,Qe,mr,ir,ve,ne){function ge(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Ae(Cr,an){Cr.internalformat=an.internalformat,Cr.format=an.format,Cr.type=an.type,Cr.compressed=an.compressed,Cr.premultiplyAlpha=an.premultiplyAlpha,Cr.flipY=an.flipY,Cr.unpackAlignment=an.unpackAlignment,Cr.colorSpace=an.colorSpace,Cr.width=an.width,Cr.height=an.height,Cr.channels=an.channels}function Re(Cr,an){if(typeof an=="object"&&an){"premultiplyAlpha"in an&&(Cr.premultiplyAlpha=an.premultiplyAlpha),"flipY"in an&&(Cr.flipY=an.flipY),"alignment"in an&&(Cr.unpackAlignment=an.alignment),"colorSpace"in an&&(Cr.colorSpace=vn[an.colorSpace]),"type"in an&&(Cr.type=Or[an.type]);var on=Cr.width,ln=Cr.height,Nn=Cr.channels,gn=!1;"shape"in an?(on=an.shape[0],ln=an.shape[1],an.shape.length===3&&(Nn=an.shape[2],gn=!0)):("radius"in an&&(on=ln=an.radius),"width"in an&&(on=an.width),"height"in an&&(ln=an.height),"channels"in an&&(Nn=an.channels,gn=!0)),Cr.width=on|0,Cr.height=ln|0,Cr.channels=Nn|0,on=!1,"format"in an&&(on=an.format,ln=Cr.internalformat=En[on],Cr.format=Ln[ln],on in Or&&!("type"in an)&&(Cr.type=Or[on]),on in nn&&(Cr.compressed=!0),on=!0),!gn&&on?Cr.channels=pe[Cr.format]:gn&&!on&&Cr.channels!==fe[Cr.format]&&(Cr.format=Cr.internalformat=fe[Cr.channels])}}function ze(Cr){he.pixelStorei(37440,Cr.flipY),he.pixelStorei(37441,Cr.premultiplyAlpha),he.pixelStorei(37443,Cr.colorSpace),he.pixelStorei(3317,Cr.unpackAlignment)}function ke(){ge.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function _e(Cr,an){var on=null;if(a(an)?on=an:an&&(Re(Cr,an),"x"in an&&(Cr.xOffset=an.x|0),"y"in an&&(Cr.yOffset=an.y|0),a(an.data)&&(on=an.data)),an.copy){var ln=ir.viewportWidth,Nn=ir.viewportHeight;Cr.width=Cr.width||ln-Cr.xOffset,Cr.height=Cr.height||Nn-Cr.yOffset,Cr.needsCopy=!0}else if(!on)Cr.width=Cr.width||1,Cr.height=Cr.height||1,Cr.channels=Cr.channels||4;else if(zt(on))Cr.channels=Cr.channels||4,Cr.data=on,"type"in an||Cr.type!==5121||(Cr.type=wt[Object.prototype.toString.call(on)]|0);else if(y(on)){switch(Cr.channels=Cr.channels||4,ln=on,Nn=ln.length,Cr.type){case 5121:case 5123:case 5125:case 5126:Nn=Mt.allocType(Cr.type,Nn),Nn.set(ln),Cr.data=Nn;break;case 36193:Cr.data=x(ln)}Cr.alignment=1,Cr.needsFree=!0}else if(f(on)){ln=on.data,Array.isArray(ln)||Cr.type!==5121||(Cr.type=wt[Object.prototype.toString.call(ln)]|0);var Nn=on.shape,gn=on.stride,Cn,Un,ta,pa;Nn.length===3?(ta=Nn[2],pa=gn[2]):pa=ta=1,Cn=Nn[0],Un=Nn[1],Nn=gn[0],gn=gn[1],Cr.alignment=1,Cr.width=Cn,Cr.height=Un,Cr.channels=ta,Cr.format=Cr.internalformat=fe[ta],Cr.needsFree=!0,Cn=pa,on=on.offset,ta=Cr.width,pa=Cr.height,Un=Cr.channels;for(var ka=Mt.allocType(Cr.type===36193?5126:Cr.type,ta*pa*Un),Ar=0,Br=0;Br<pa;++Br)for(var Mr=0;Mr<ta;++Mr)for(var Nr=0;Nr<Un;++Nr)ka[Ar++]=ln[Nn*Mr+gn*Br+Cn*Nr+on];E(Cr,ka)}else if(M(on)===Te||M(on)===Qt||M(on)===Pt)M(on)===Te||M(on)===Qt?Cr.element=on:Cr.element=on.canvas,Cr.width=Cr.element.width,Cr.height=Cr.element.height,Cr.channels=4;else if(M(on)===Ot)Cr.element=on,Cr.width=on.width,Cr.height=on.height,Cr.channels=4;else if(M(on)===Nt)Cr.element=on,Cr.width=on.naturalWidth,Cr.height=on.naturalHeight,Cr.channels=4;else if(M(on)===Ht)Cr.element=on,Cr.width=on.videoWidth,Cr.height=on.videoHeight,Cr.channels=4;else if(S(on)){for(ln=Cr.width||on[0].length,Nn=Cr.height||on.length,gn=Cr.channels,gn=w(on[0][0])?gn||on[0][0].length:gn||1,Cn=Ct.shape(on),ta=1,pa=0;pa<Cn.length;++pa)ta*=Cn[pa];ta=Mt.allocType(Cr.type===36193?5126:Cr.type,ta),Ct.flatten(on,Cn,"",ta),E(Cr,ta),Cr.alignment=1,Cr.width=ln,Cr.height=Nn,Cr.channels=gn,Cr.format=Cr.internalformat=fe[gn],Cr.needsFree=!0}}function Ke(Cr,an,on,ln,Nn){var gn=Cr.element,Cn=Cr.data,Un=Cr.internalformat,ta=Cr.format,pa=Cr.type,ka=Cr.width,Ar=Cr.height;ze(Cr),gn?he.texSubImage2D(an,Nn,on,ln,ta,pa,gn):Cr.compressed?he.compressedTexSubImage2D(an,Nn,on,ln,Un,ka,Ar,Cn):Cr.needsCopy?(mr(),he.copyTexSubImage2D(an,Nn,on,ln,Cr.xOffset,Cr.yOffset,ka,Ar)):he.texSubImage2D(an,Nn,on,ln,ka,Ar,ta,pa,Cn)}function hr(){return Yn.pop()||new ke}function cr(Cr){Cr.needsFree&&Mt.freeType(Cr.data),ke.call(Cr),Yn.push(Cr)}function dr(){ge.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function fr(Cr,an,on){var ln=Cr.images[0]=hr();Cr.mipmask=1,ln.width=Cr.width=an,ln.height=Cr.height=on,ln.channels=Cr.channels=4}function Lr(Cr,an){var on=null;if(a(an))on=Cr.images[0]=hr(),Ae(on,Cr),_e(on,an),Cr.mipmask=1;else if(Re(Cr,an),Array.isArray(an.mipmap))for(var ln=an.mipmap,Nn=0;Nn<ln.length;++Nn)on=Cr.images[Nn]=hr(),Ae(on,Cr),on.width>>=Nn,on.height>>=Nn,_e(on,ln[Nn]),Cr.mipmask|=1<<Nn;else on=Cr.images[0]=hr(),Ae(on,Cr),_e(on,an),Cr.mipmask=1;Ae(Cr,Cr.images[0])}function xr(Cr,an){for(var on=Cr.images,ln=0;ln<on.length&&on[ln];++ln){var Nn=on[ln],gn=an,Cn=ln,Un=Nn.element,ta=Nn.data,pa=Nn.internalformat,ka=Nn.format,Ar=Nn.type,Br=Nn.width,Mr=Nn.height;ze(Nn),Un?he.texImage2D(gn,Cn,ka,ka,Ar,Un):Nn.compressed?he.compressedTexImage2D(gn,Cn,pa,Br,Mr,0,ta):Nn.needsCopy?(mr(),he.copyTexImage2D(gn,Cn,ka,Nn.xOffset,Nn.yOffset,Br,Mr,0)):he.texImage2D(gn,Cn,ka,Br,Mr,0,ka,Ar,ta||null)}}function Yt(){var Cr=ma.pop()||new dr;ge.call(Cr);for(var an=Cr.mipmask=0;16>an;++an)Cr.images[an]=null;return Cr}function Jt(Cr){for(var an=Cr.images,on=0;on<an.length;++on)an[on]&&cr(an[on]),an[on]=null;ma.push(Cr)}function qe(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function tr(Cr,an){"min"in an&&(Cr.minFilter=Tr[an.min],0<=ue.indexOf(Cr.minFilter)&&!("faces"in an)&&(Cr.genMipmaps=!0)),"mag"in an&&(Cr.magFilter=Ir[an.mag]);var on=Cr.wrapS,ln=Cr.wrapT;if("wrap"in an){var Nn=an.wrap;typeof Nn=="string"?on=ln=yr[Nn]:Array.isArray(Nn)&&(on=yr[Nn[0]],ln=yr[Nn[1]])}else"wrapS"in an&&(on=yr[an.wrapS]),"wrapT"in an&&(ln=yr[an.wrapT]);if(Cr.wrapS=on,Cr.wrapT=ln,"anisotropic"in an&&(Cr.anisotropic=an.anisotropic),"mipmap"in an){switch(on=!1,typeof an.mipmap){case"string":Cr.mipmapHint=He[an.mipmap],on=Cr.genMipmaps=!0;break;case"boolean":on=Cr.genMipmaps=an.mipmap;break;case"object":Cr.genMipmaps=!1,on=!0}!on||"min"in an||(Cr.minFilter=9984)}}function Ge(Cr,an){he.texParameteri(an,10241,Cr.minFilter),he.texParameteri(an,10240,Cr.magFilter),he.texParameteri(an,10242,Cr.wrapS),he.texParameteri(an,10243,Cr.wrapT),Ye.ext_texture_filter_anisotropic&&he.texParameteri(an,34046,Cr.anisotropic),Cr.genMipmaps&&(he.hint(33170,Cr.mipmapHint),he.generateMipmap(an))}function Ee(Cr){ge.call(this),this.mipmask=0,this.internalformat=6408,this.id=wa++,this.refCount=1,this.target=Cr,this.texture=he.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new qe,ne.profile&&(this.stats={size:0})}function Xe(Cr){he.activeTexture(33984),he.bindTexture(Cr.target,Cr.texture)}function rr(){var Cr=Rn[0];Cr?he.bindTexture(Cr.target,Cr.texture):he.bindTexture(3553,null)}function Je(Cr){var an=Cr.texture,on=Cr.unit,ln=Cr.target;0<=on&&(he.activeTexture(33984+on),he.bindTexture(ln,null),Rn[on]=null),he.deleteTexture(an),Cr.texture=null,Cr.params=null,Cr.pixels=null,Cr.refCount=0,delete la[Cr.id],ve.textureCount--}var He={"don't care":4352,"dont care":4352,nice:4354,fast:4353},yr={repeat:10497,clamp:33071,mirror:33648},Ir={nearest:9728,linear:9729},Tr=tt({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Ir),vn={none:0,browser:37444},Or={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},En={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},nn={};Ye.ext_srgb&&(En.srgb=35904,En.srgba=35906),Ye.oes_texture_float&&(Or.float32=Or.float=5126),Ye.oes_texture_half_float&&(Or.float16=Or["half float"]=36193),Ye.webgl_depth_texture&&(tt(En,{depth:6402,"depth stencil":34041}),tt(Or,{uint16:5123,uint32:5125,"depth stencil":34042})),Ye.webgl_compressed_texture_s3tc&&tt(nn,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ye.webgl_compressed_texture_atc&&tt(nn,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ye.webgl_compressed_texture_pvrtc&&tt(nn,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ye.webgl_compressed_texture_etc1&&(nn["rgb etc1"]=36196);var gr=Array.prototype.slice.call(he.getParameter(34467));Object.keys(nn).forEach(function(Cr){var an=nn[Cr];0<=gr.indexOf(an)&&(En[Cr]=an)});var Pr=Object.keys(En);Qe.textureFormats=Pr;var Xr=[];Object.keys(En).forEach(function(Cr){Xr[En[Cr]]=Cr});var kr=[];Object.keys(Or).forEach(function(Cr){kr[Or[Cr]]=Cr});var pn=[];Object.keys(Ir).forEach(function(Cr){pn[Ir[Cr]]=Cr});var en=[];Object.keys(Tr).forEach(function(Cr){en[Tr[Cr]]=Cr});var Tn=[];Object.keys(yr).forEach(function(Cr){Tn[yr[Cr]]=Cr});var Ln=Pr.reduce(function(Cr,an){var on=En[an];return on===6409||on===6406||on===6409||on===6410||on===6402||on===34041||Ye.ext_srgb&&(on===35904||on===35906)?Cr[on]=on:on===32855||0<=an.indexOf("rgba")?Cr[on]=6408:Cr[on]=6407,Cr},{}),Yn=[],ma=[],wa=0,la={},ia=Qe.maxTextureUnits,Rn=Array(ia).map(function(){return null});return tt(Ee.prototype,{bind:function(){this.bindCount+=1;var Cr=this.unit;if(0>Cr){for(var an=0;an<ia;++an){var on=Rn[an];if(on){if(0<on.bindCount)continue;on.unit=-1}Rn[an]=this,Cr=an;break}ne.profile&&ve.maxTextureUnits<Cr+1&&(ve.maxTextureUnits=Cr+1),this.unit=Cr,he.activeTexture(33984+Cr),he.bindTexture(this.target,this.texture)}return Cr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Je(this)}}),ne.profile&&(ve.getTotalTextureSize=function(){var Cr=0;return Object.keys(la).forEach(function(an){Cr+=la[an].stats.size}),Cr}),{create2D:function(Cr,an){function on(Nn,gn){var Cn=ln.texInfo;qe.call(Cn);var Un=Yt();return typeof Nn=="number"?typeof gn=="number"?fr(Un,Nn|0,gn|0):fr(Un,Nn|0,Nn|0):Nn?(tr(Cn,Nn),Lr(Un,Nn)):fr(Un,1,1),Cn.genMipmaps&&(Un.mipmask=(Un.width<<1)-1),ln.mipmask=Un.mipmask,Ae(ln,Un),ln.internalformat=Un.internalformat,on.width=Un.width,on.height=Un.height,Xe(ln),xr(Un,3553),Ge(Cn,3553),rr(),Jt(Un),ne.profile&&(ln.stats.size=m(ln.internalformat,ln.type,Un.width,Un.height,Cn.genMipmaps,!1)),on.format=Xr[ln.internalformat],on.type=kr[ln.type],on.mag=pn[Cn.magFilter],on.min=en[Cn.minFilter],on.wrapS=Tn[Cn.wrapS],on.wrapT=Tn[Cn.wrapT],on}var ln=new Ee(3553);return la[ln.id]=ln,ve.textureCount++,on(Cr,an),on.subimage=function(Nn,gn,Cn,Un){gn|=0,Cn|=0,Un|=0;var ta=hr();return Ae(ta,ln),ta.width=0,ta.height=0,_e(ta,Nn),ta.width=ta.width||(ln.width>>Un)-gn,ta.height=ta.height||(ln.height>>Un)-Cn,Xe(ln),Ke(ta,3553,gn,Cn,Un),rr(),cr(ta),on},on.resize=function(Nn,gn){var Cn=Nn|0,Un=gn|0||Cn;if(Cn===ln.width&&Un===ln.height)return on;on.width=ln.width=Cn,on.height=ln.height=Un,Xe(ln);for(var ta=0;ln.mipmask>>ta;++ta){var pa=Cn>>ta,ka=Un>>ta;if(!pa||!ka)break;he.texImage2D(3553,ta,ln.format,pa,ka,0,ln.format,ln.type,null)}return rr(),ne.profile&&(ln.stats.size=m(ln.internalformat,ln.type,Cn,Un,!1,!1)),on},on._reglType="texture2d",on._texture=ln,ne.profile&&(on.stats=ln.stats),on.destroy=function(){ln.decRef()},on},createCube:function(Cr,an,on,ln,Nn,gn){function Cn(pa,ka,Ar,Br,Mr,Nr){var un,Dn=Un.texInfo;for(qe.call(Dn),un=0;6>un;++un)ta[un]=Yt();if(typeof pa=="number"||!pa)for(pa=pa|0||1,un=0;6>un;++un)fr(ta[un],pa,pa);else if(typeof pa=="object")if(ka)Lr(ta[0],pa),Lr(ta[1],ka),Lr(ta[2],Ar),Lr(ta[3],Br),Lr(ta[4],Mr),Lr(ta[5],Nr);else if(tr(Dn,pa),Re(Un,pa),"faces"in pa)for(pa=pa.faces,un=0;6>un;++un)Ae(ta[un],Un),Lr(ta[un],pa[un]);else for(un=0;6>un;++un)Lr(ta[un],pa);for(Ae(Un,ta[0]),Un.mipmask=Dn.genMipmaps?(ta[0].width<<1)-1:ta[0].mipmask,Un.internalformat=ta[0].internalformat,Cn.width=ta[0].width,Cn.height=ta[0].height,Xe(Un),un=0;6>un;++un)xr(ta[un],34069+un);for(Ge(Dn,34067),rr(),ne.profile&&(Un.stats.size=m(Un.internalformat,Un.type,Cn.width,Cn.height,Dn.genMipmaps,!0)),Cn.format=Xr[Un.internalformat],Cn.type=kr[Un.type],Cn.mag=pn[Dn.magFilter],Cn.min=en[Dn.minFilter],Cn.wrapS=Tn[Dn.wrapS],Cn.wrapT=Tn[Dn.wrapT],un=0;6>un;++un)Jt(ta[un]);return Cn}var Un=new Ee(34067);la[Un.id]=Un,ve.cubeCount++;var ta=Array(6);return Cn(Cr,an,on,ln,Nn,gn),Cn.subimage=function(pa,ka,Ar,Br,Mr){Ar|=0,Br|=0,Mr|=0;var Nr=hr();return Ae(Nr,Un),Nr.width=0,Nr.height=0,_e(Nr,ka),Nr.width=Nr.width||(Un.width>>Mr)-Ar,Nr.height=Nr.height||(Un.height>>Mr)-Br,Xe(Un),Ke(Nr,34069+pa,Ar,Br,Mr),rr(),cr(Nr),Cn},Cn.resize=function(pa){if(pa|=0,pa!==Un.width){Cn.width=Un.width=pa,Cn.height=Un.height=pa,Xe(Un);for(var ka=0;6>ka;++ka)for(var Ar=0;Un.mipmask>>Ar;++Ar)he.texImage2D(34069+ka,Ar,Un.format,pa>>Ar,pa>>Ar,0,Un.format,Un.type,null);return rr(),ne.profile&&(Un.stats.size=m(Un.internalformat,Un.type,Cn.width,Cn.height,!1,!0)),Cn}},Cn._reglType="textureCube",Cn._texture=Un,ne.profile&&(Cn.stats=Un.stats),Cn.destroy=function(){Un.decRef()},Cn},clear:function(){for(var Cr=0;Cr<ia;++Cr)he.activeTexture(33984+Cr),he.bindTexture(3553,null),Rn[Cr]=null;xt(la).forEach(Je),ve.cubeCount=0,ve.textureCount=0},getTexture:function(Cr){return null},restore:function(){for(var Cr=0;Cr<ia;++Cr){var an=Rn[Cr];an&&(an.bindCount=0,an.unit=-1,Rn[Cr]=null)}xt(la).forEach(function(on){on.texture=he.createTexture(),he.bindTexture(on.target,on.texture);for(var ln=0;32>ln;++ln)if(on.mipmask&1<<ln)if(on.target===3553)he.texImage2D(3553,ln,on.internalformat,on.width>>ln,on.height>>ln,0,on.internalformat,on.type,null);else for(var Nn=0;6>Nn;++Nn)he.texImage2D(34069+Nn,ln,on.internalformat,on.width>>ln,on.height>>ln,0,on.internalformat,on.type,null);Ge(on.texInfo,on.target)})},refresh:function(){for(var Cr=0;Cr<ia;++Cr){var an=Rn[Cr];an&&(an.bindCount=0,an.unit=-1,Rn[Cr]=null),he.activeTexture(33984+Cr),he.bindTexture(3553,null),he.bindTexture(34067,null)}}}}function I(he,Ye,Qe,mr,ir,ve){function ne(Ee,Xe,rr){this.target=Ee,this.texture=Xe,this.renderbuffer=rr;var Je=Ee=0;Xe?(Ee=Xe.width,Je=Xe.height):rr&&(Ee=rr.width,Je=rr.height),this.width=Ee,this.height=Je}function ge(Ee){Ee&&(Ee.texture&&Ee.texture._texture.decRef(),Ee.renderbuffer&&Ee.renderbuffer._renderbuffer.decRef())}function Ae(Ee,Xe,rr){Ee&&(Ee.texture?Ee.texture._texture.refCount+=1:Ee.renderbuffer._renderbuffer.refCount+=1)}function Re(Ee,Xe){Xe&&(Xe.texture?he.framebufferTexture2D(36160,Ee,Xe.target,Xe.texture._texture.texture,0):he.framebufferRenderbuffer(36160,Ee,36161,Xe.renderbuffer._renderbuffer.renderbuffer))}function ze(Ee){var Xe=3553,rr=null,Je=null,He=Ee;return typeof Ee=="object"&&(He=Ee.data,"target"in Ee&&(Xe=Ee.target|0)),Ee=He._reglType,Ee==="texture2d"||Ee==="textureCube"?rr=He:Ee==="renderbuffer"&&(Je=He,Xe=36161),new ne(Xe,rr,Je)}function ke(Ee,Xe,rr,Je,He){return rr?(Ee=mr.create2D({width:Ee,height:Xe,format:Je,type:He}),Ee._texture.refCount=0,new ne(3553,Ee,null)):(Ee=ir.create({width:Ee,height:Xe,format:Je}),Ee._renderbuffer.refCount=0,new ne(36161,null,Ee))}function _e(Ee){return Ee&&(Ee.texture||Ee.renderbuffer)}function Ke(Ee,Xe,rr){Ee&&(Ee.texture?Ee.texture.resize(Xe,rr):Ee.renderbuffer&&Ee.renderbuffer.resize(Xe,rr),Ee.width=Xe,Ee.height=rr)}function hr(){this.id=tr++,Ge[this.id]=this,this.framebuffer=he.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function cr(Ee){Ee.colorAttachments.forEach(ge),ge(Ee.depthAttachment),ge(Ee.stencilAttachment),ge(Ee.depthStencilAttachment)}function dr(Ee){he.deleteFramebuffer(Ee.framebuffer),Ee.framebuffer=null,ve.framebufferCount--,delete Ge[Ee.id]}function fr(Ee){var Xe;he.bindFramebuffer(36160,Ee.framebuffer);var rr=Ee.colorAttachments;for(Xe=0;Xe<rr.length;++Xe)Re(36064+Xe,rr[Xe]);for(Xe=rr.length;Xe<Qe.maxColorAttachments;++Xe)he.framebufferTexture2D(36160,36064+Xe,3553,null,0);he.framebufferTexture2D(36160,33306,3553,null,0),he.framebufferTexture2D(36160,36096,3553,null,0),he.framebufferTexture2D(36160,36128,3553,null,0),Re(36096,Ee.depthAttachment),Re(36128,Ee.stencilAttachment),Re(33306,Ee.depthStencilAttachment),he.checkFramebufferStatus(36160),he.isContextLost(),he.bindFramebuffer(36160,xr.next?xr.next.framebuffer:null),xr.cur=xr.next,he.getError()}function Lr(Ee,Xe){function rr(He,yr){var Ir,Tr=0,vn=0,Or=!0,En=!0;Ir=null;var nn=!0,gr="rgba",Pr="uint8",Xr=1,kr=null,pn=null,en=null,Tn=!1;typeof He=="number"?(Tr=He|0,vn=yr|0||Tr):He?("shape"in He?(vn=He.shape,Tr=vn[0],vn=vn[1]):("radius"in He&&(Tr=vn=He.radius),"width"in He&&(Tr=He.width),"height"in He&&(vn=He.height)),("color"in He||"colors"in He)&&(Ir=He.color||He.colors),Ir||("colorCount"in He&&(Xr=He.colorCount|0),"colorTexture"in He&&(nn=!!He.colorTexture,gr="rgba4"),"colorType"in He&&(Pr=He.colorType,!nn)&&(Pr==="half float"||Pr==="float16"?gr="rgba16f":(Pr==="float"||Pr==="float32")&&(gr="rgba32f")),"colorFormat"in He&&(gr=He.colorFormat,0<=Yt.indexOf(gr)?nn=!0:0<=Jt.indexOf(gr)&&(nn=!1))),("depthTexture"in He||"depthStencilTexture"in He)&&(Tn=!(!He.depthTexture&&!He.depthStencilTexture)),"depth"in He&&(typeof He.depth=="boolean"?Or=He.depth:(kr=He.depth,En=!1)),"stencil"in He&&(typeof He.stencil=="boolean"?En=He.stencil:(pn=He.stencil,Or=!1)),"depthStencil"in He&&(typeof He.depthStencil=="boolean"?Or=En=He.depthStencil:(en=He.depthStencil,En=Or=!1))):Tr=vn=1;var Ln=null,Yn=null,ma=null,wa=null;if(Array.isArray(Ir))Ln=Ir.map(ze);else if(Ir)Ln=[ze(Ir)];else for(Ln=Array(Xr),Ir=0;Ir<Xr;++Ir)Ln[Ir]=ke(Tr,vn,nn,gr,Pr);for(Tr=Tr||Ln[0].width,vn=vn||Ln[0].height,kr?Yn=ze(kr):Or&&!En&&(Yn=ke(Tr,vn,Tn,"depth","uint32")),pn?ma=ze(pn):En&&!Or&&(ma=ke(Tr,vn,!1,"stencil","uint8")),en?wa=ze(en):!kr&&!pn&&En&&Or&&(wa=ke(Tr,vn,Tn,"depth stencil","depth stencil")),Or=null,Ir=0;Ir<Ln.length;++Ir)Ae(Ln[Ir]),Ln[Ir]&&Ln[Ir].texture&&(En=pt[Ln[Ir].texture._texture.format]*Dt[Ln[Ir].texture._texture.type],Or===null&&(Or=En));return Ae(Yn),Ae(ma),Ae(wa),cr(Je),Je.width=Tr,Je.height=vn,Je.colorAttachments=Ln,Je.depthAttachment=Yn,Je.stencilAttachment=ma,Je.depthStencilAttachment=wa,rr.color=Ln.map(_e),rr.depth=_e(Yn),rr.stencil=_e(ma),rr.depthStencil=_e(wa),rr.width=Je.width,rr.height=Je.height,fr(Je),rr}var Je=new hr;return ve.framebufferCount++,rr(Ee,Xe),tt(rr,{resize:function(He,yr){var Ir=Math.max(He|0,1),Tr=Math.max(yr|0||Ir,1);if(Ir===Je.width&&Tr===Je.height)return rr;for(var vn=Je.colorAttachments,Or=0;Or<vn.length;++Or)Ke(vn[Or],Ir,Tr);return Ke(Je.depthAttachment,Ir,Tr),Ke(Je.stencilAttachment,Ir,Tr),Ke(Je.depthStencilAttachment,Ir,Tr),Je.width=rr.width=Ir,Je.height=rr.height=Tr,fr(Je),rr},_reglType:"framebuffer",_framebuffer:Je,destroy:function(){dr(Je),cr(Je)},use:function(He){xr.setFBO({framebuffer:rr},He)}})}var xr={cur:null,next:null,dirty:!1,setFBO:null},Yt=["rgba"],Jt=["rgba4","rgb565","rgb5 a1"];Ye.ext_srgb&&Jt.push("srgba"),Ye.ext_color_buffer_half_float&&Jt.push("rgba16f","rgb16f"),Ye.webgl_color_buffer_float&&Jt.push("rgba32f");var qe=["uint8"];Ye.oes_texture_half_float&&qe.push("half float","float16"),Ye.oes_texture_float&&qe.push("float","float32");var tr=0,Ge={};return tt(xr,{getFramebuffer:function(Ee){return typeof Ee=="function"&&Ee._reglType==="framebuffer"&&(Ee=Ee._framebuffer,Ee instanceof hr)?Ee:null},create:Lr,createCube:function(Ee){function Xe(Je){var He,yr={color:null},Ir=0,Tr=null;He="rgba";var vn="uint8",Or=1;if(typeof Je=="number"?Ir=Je|0:Je?("shape"in Je?Ir=Je.shape[0]:("radius"in Je&&(Ir=Je.radius|0),"width"in Je?Ir=Je.width|0:"height"in Je&&(Ir=Je.height|0)),("color"in Je||"colors"in Je)&&(Tr=Je.color||Je.colors),Tr||("colorCount"in Je&&(Or=Je.colorCount|0),"colorType"in Je&&(vn=Je.colorType),"colorFormat"in Je&&(He=Je.colorFormat)),"depth"in Je&&(yr.depth=Je.depth),"stencil"in Je&&(yr.stencil=Je.stencil),"depthStencil"in Je&&(yr.depthStencil=Je.depthStencil)):Ir=1,Tr)if(Array.isArray(Tr))for(Je=[],He=0;He<Tr.length;++He)Je[He]=Tr[He];else Je=[Tr];else for(Je=Array(Or),Tr={radius:Ir,format:He,type:vn},He=0;He<Or;++He)Je[He]=mr.createCube(Tr);for(yr.color=Array(Je.length),He=0;He<Je.length;++He)Or=Je[He],Ir=Ir||Or.width,yr.color[He]={target:34069,data:Je[He]};for(He=0;6>He;++He){for(Or=0;Or<Je.length;++Or)yr.color[Or].target=34069+He;0<He&&(yr.depth=rr[0].depth,yr.stencil=rr[0].stencil,yr.depthStencil=rr[0].depthStencil),rr[He]?rr[He](yr):rr[He]=Lr(yr)}return tt(Xe,{width:Ir,height:Ir,color:Je})}var rr=Array(6);return Xe(Ee),tt(Xe,{faces:rr,resize:function(Je){var He=Je|0;if(He===Xe.width)return Xe;var yr=Xe.color;for(Je=0;Je<yr.length;++Je)yr[Je].resize(He);for(Je=0;6>Je;++Je)rr[Je].resize(He);return Xe.width=Xe.height=He,Xe},_reglType:"framebufferCube",destroy:function(){rr.forEach(function(Je){Je.destroy()})}})},clear:function(){xt(Ge).forEach(dr)},restore:function(){xr.cur=null,xr.next=null,xr.dirty=!0,xt(Ge).forEach(function(Ee){Ee.framebuffer=he.createFramebuffer(),fr(Ee)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(he,Ye,Qe,mr,ir,ve,ne){function ge(fr){if(fr!==dr.currentVAO){var Lr=Ye.oes_vertex_array_object;fr?Lr.bindVertexArrayOES(fr.vao):Lr.bindVertexArrayOES(null),dr.currentVAO=fr}}function Ae(fr){if(fr!==dr.currentVAO){if(fr)fr.bindAttrs();else{for(var Lr=Ye.angle_instanced_arrays,xr=0;xr<Ke.length;++xr){var Yt=Ke[xr];Yt.buffer?(he.enableVertexAttribArray(xr),Yt.buffer.bind(),he.vertexAttribPointer(xr,Yt.size,Yt.type,Yt.normalized,Yt.stride,Yt.offfset),Lr&&Yt.divisor&&Lr.vertexAttribDivisorANGLE(xr,Yt.divisor)):(he.disableVertexAttribArray(xr),he.vertexAttrib4f(xr,Yt.x,Yt.y,Yt.z,Yt.w))}ne.elements?he.bindBuffer(34963,ne.elements.buffer.buffer):he.bindBuffer(34963,null)}dr.currentVAO=fr}}function Re(){xt(cr).forEach(function(fr){fr.destroy()})}function ze(){this.id=++hr,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var fr=Ye.oes_vertex_array_object;this.vao=fr?fr.createVertexArrayOES():null,cr[this.id]=this,this.buffers=[]}function ke(){Ye.oes_vertex_array_object&&xt(cr).forEach(function(fr){fr.refresh()})}var _e=Qe.maxAttributes,Ke=Array(_e);for(Qe=0;Qe<_e;++Qe)Ke[Qe]=new O;var hr=0,cr={},dr={Record:O,scope:{},state:Ke,currentVAO:null,targetVAO:null,restore:Ye.oes_vertex_array_object?ke:function(){},createVAO:function(fr){function Lr(Yt){var Jt;Array.isArray(Yt)?(Jt=Yt,xr.elements&&xr.ownsElements&&xr.elements.destroy(),xr.elements=null,xr.ownsElements=!1,xr.offset=0,xr.count=0,xr.instances=-1,xr.primitive=4):(Yt.elements?(Jt=Yt.elements,xr.ownsElements?(typeof Jt=="function"&&Jt._reglType==="elements"?xr.elements.destroy():xr.elements(Jt),xr.ownsElements=!1):ve.getElements(Yt.elements)?(xr.elements=Yt.elements,xr.ownsElements=!1):(xr.elements=ve.create(Yt.elements),xr.ownsElements=!0)):(xr.elements=null,xr.ownsElements=!1),Jt=Yt.attributes,xr.offset=0,xr.count=-1,xr.instances=-1,xr.primitive=4,xr.elements&&(xr.count=xr.elements._elements.vertCount,xr.primitive=xr.elements._elements.primType),"offset"in Yt&&(xr.offset=Yt.offset|0),"count"in Yt&&(xr.count=Yt.count|0),"instances"in Yt&&(xr.instances=Yt.instances|0),"primitive"in Yt&&(xr.primitive=Wt[Yt.primitive])),Yt={};var qe=xr.attributes;qe.length=Jt.length;for(var tr=0;tr<Jt.length;++tr){var Ge=Jt[tr],Ee=qe[tr]=new O,Xe=Ge.data||Ge;if(Array.isArray(Xe)||zt(Xe)||f(Xe)){var rr;xr.buffers[tr]&&(rr=xr.buffers[tr],zt(Xe)&&rr._buffer.byteLength>=Xe.byteLength?rr.subdata(Xe):(rr.destroy(),xr.buffers[tr]=null)),xr.buffers[tr]||(rr=xr.buffers[tr]=ir.create(Ge,34962,!1,!0)),Ee.buffer=ir.getBuffer(rr),Ee.size=Ee.buffer.dimension|0,Ee.normalized=!1,Ee.type=Ee.buffer.dtype,Ee.offset=0,Ee.stride=0,Ee.divisor=0,Ee.state=1,Yt[tr]=1}else ir.getBuffer(Ge)?(Ee.buffer=ir.getBuffer(Ge),Ee.size=Ee.buffer.dimension|0,Ee.normalized=!1,Ee.type=Ee.buffer.dtype,Ee.offset=0,Ee.stride=0,Ee.divisor=0,Ee.state=1):ir.getBuffer(Ge.buffer)?(Ee.buffer=ir.getBuffer(Ge.buffer),Ee.size=(+Ge.size||Ee.buffer.dimension)|0,Ee.normalized=!!Ge.normalized||!1,Ee.type="type"in Ge?Rt[Ge.type]:Ee.buffer.dtype,Ee.offset=(Ge.offset||0)|0,Ee.stride=(Ge.stride||0)|0,Ee.divisor=(Ge.divisor||0)|0,Ee.state=1):"x"in Ge&&(Ee.x=+Ge.x||0,Ee.y=+Ge.y||0,Ee.z=+Ge.z||0,Ee.w=+Ge.w||0,Ee.state=2)}for(rr=0;rr<xr.buffers.length;++rr)!Yt[rr]&&xr.buffers[rr]&&(xr.buffers[rr].destroy(),xr.buffers[rr]=null);return xr.refresh(),Lr}var xr=new ze;return mr.vaoCount+=1,Lr.destroy=function(){for(var Yt=0;Yt<xr.buffers.length;++Yt)xr.buffers[Yt]&&xr.buffers[Yt].destroy();xr.buffers.length=0,xr.ownsElements&&(xr.elements.destroy(),xr.elements=null,xr.ownsElements=!1),xr.destroy()},Lr._vao=xr,Lr._reglType="vao",Lr(fr)},getVAO:function(fr){return typeof fr=="function"&&fr._vao?fr._vao:null},destroyBuffer:function(fr){for(var Lr=0;Lr<Ke.length;++Lr){var xr=Ke[Lr];xr.buffer===fr&&(he.disableVertexAttribArray(Lr),xr.buffer=null)}},setVAO:Ye.oes_vertex_array_object?ge:Ae,clear:Ye.oes_vertex_array_object?Re:function(){}};return ze.prototype.bindAttrs=function(){for(var fr=Ye.angle_instanced_arrays,Lr=this.attributes,xr=0;xr<Lr.length;++xr){var Yt=Lr[xr];Yt.buffer?(he.enableVertexAttribArray(xr),he.bindBuffer(34962,Yt.buffer.buffer),he.vertexAttribPointer(xr,Yt.size,Yt.type,Yt.normalized,Yt.stride,Yt.offset),fr&&Yt.divisor&&fr.vertexAttribDivisorANGLE(xr,Yt.divisor)):(he.disableVertexAttribArray(xr),he.vertexAttrib4f(xr,Yt.x,Yt.y,Yt.z,Yt.w))}for(fr=Lr.length;fr<_e;++fr)he.disableVertexAttribArray(fr);(fr=ve.getElements(this.elements))?he.bindBuffer(34963,fr.buffer.buffer):he.bindBuffer(34963,null)},ze.prototype.refresh=function(){var fr=Ye.oes_vertex_array_object;fr&&(fr.bindVertexArrayOES(this.vao),this.bindAttrs(),dr.currentVAO=null,fr.bindVertexArrayOES(null))},ze.prototype.destroy=function(){if(this.vao){var fr=Ye.oes_vertex_array_object;this===dr.currentVAO&&(dr.currentVAO=null,fr.bindVertexArrayOES(null)),fr.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),cr[this.id]&&(delete cr[this.id],--mr.vaoCount)},dr}function B(he,Ye,Qe,mr){function ir(hr,cr,dr,fr){this.name=hr,this.id=cr,this.location=dr,this.info=fr}function ve(hr,cr){for(var dr=0;dr<hr.length;++dr)if(hr[dr].id===cr.id){hr[dr].location=cr.location;return}hr.push(cr)}function ne(hr,cr,dr){dr=hr===35632?Re:ze;var fr=dr[cr];if(!fr){var Lr=Ye.str(cr),fr=he.createShader(hr);he.shaderSource(fr,Lr),he.compileShader(fr),dr[cr]=fr}return fr}function ge(hr,cr){this.id=Ke++,this.fragId=hr,this.vertId=cr,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,mr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Ae(hr,cr,dr){var fr;fr=ne(35632,hr.fragId);var Lr=ne(35633,hr.vertId);if(cr=hr.program=he.createProgram(),he.attachShader(cr,fr),he.attachShader(cr,Lr),dr)for(fr=0;fr<dr.length;++fr)Lr=dr[fr],he.bindAttribLocation(cr,Lr[0],Lr[1]);he.linkProgram(cr),Lr=he.getProgramParameter(cr,35718),mr.profile&&(hr.stats.uniformsCount=Lr);var xr=hr.uniforms;for(fr=0;fr<Lr;++fr)if(dr=he.getActiveUniform(cr,fr))if(1<dr.size)for(var Yt=0;Yt<dr.size;++Yt){var Jt=dr.name.replace("[0]","["+Yt+"]");ve(xr,new ir(Jt,Ye.id(Jt),he.getUniformLocation(cr,Jt),dr))}else ve(xr,new ir(dr.name,Ye.id(dr.name),he.getUniformLocation(cr,dr.name),dr));for(Lr=he.getProgramParameter(cr,35721),mr.profile&&(hr.stats.attributesCount=Lr),hr=hr.attributes,fr=0;fr<Lr;++fr)(dr=he.getActiveAttrib(cr,fr))&&ve(hr,new ir(dr.name,Ye.id(dr.name),he.getAttribLocation(cr,dr.name),dr))}var Re={},ze={},ke={},_e=[],Ke=0;return mr.profile&&(Qe.getMaxUniformsCount=function(){var hr=0;return _e.forEach(function(cr){cr.stats.uniformsCount>hr&&(hr=cr.stats.uniformsCount)}),hr},Qe.getMaxAttributesCount=function(){var hr=0;return _e.forEach(function(cr){cr.stats.attributesCount>hr&&(hr=cr.stats.attributesCount)}),hr}),{clear:function(){var hr=he.deleteShader.bind(he);xt(Re).forEach(hr),Re={},xt(ze).forEach(hr),ze={},_e.forEach(function(cr){he.deleteProgram(cr.program)}),_e.length=0,ke={},Qe.shaderCount=0},program:function(hr,cr,dr,fr){var Lr=ke[cr];Lr||(Lr=ke[cr]={});var xr=Lr[hr];if(xr&&(xr.refCount++,!fr))return xr;var Yt=new ge(cr,hr);return Qe.shaderCount++,Ae(Yt,dr,fr),xr||(Lr[hr]=Yt),_e.push(Yt),tt(Yt,{destroy:function(){if(Yt.refCount--,0>=Yt.refCount){he.deleteProgram(Yt.program);var Jt=_e.indexOf(Yt);_e.splice(Jt,1),Qe.shaderCount--}0>=Lr[Yt.vertId].refCount&&(he.deleteShader(ze[Yt.vertId]),delete ze[Yt.vertId],delete ke[Yt.fragId][Yt.vertId]),Object.keys(ke[Yt.fragId]).length||(he.deleteShader(Re[Yt.fragId]),delete Re[Yt.fragId],delete ke[Yt.fragId])}})},restore:function(){Re={},ze={};for(var hr=0;hr<_e.length;++hr)Ae(_e[hr],null,_e[hr].attributes.map(function(cr){return[cr.location,cr.name]}))},shader:ne,frag:-1,vert:-1}}function F(he,Ye,Qe,mr,ir,ve,ne){function ge(Re){var ze;ze=Ye.next===null?5121:Ye.next.colorAttachments[0].texture._texture.type;var ke=0,_e=0,Ke=mr.framebufferWidth,hr=mr.framebufferHeight,cr=null;return zt(Re)?cr=Re:Re&&(ke=Re.x|0,_e=Re.y|0,Ke=(Re.width||mr.framebufferWidth-ke)|0,hr=(Re.height||mr.framebufferHeight-_e)|0,cr=Re.data||null),Qe(),Re=Ke*hr*4,cr||(ze===5121?cr=new Uint8Array(Re):ze===5126&&(cr=cr||new Float32Array(Re))),he.pixelStorei(3333,4),he.readPixels(ke,_e,Ke,hr,6408,ze,cr),cr}function Ae(Re){var ze;return Ye.setFBO({framebuffer:Re.framebuffer},function(){ze=ge(Re)}),ze}return function(Re){return Re&&"framebuffer"in Re?Ae(Re):ge(Re)}}function _(he){for(var Ye=Array(he.length>>2),mr=0;mr<Ye.length;mr++)Ye[mr]=0;for(mr=0;mr<8*he.length;mr+=8)Ye[mr>>5]|=(he.charCodeAt(mr/8)&255)<<24-mr%32;var Qe=8*he.length;he=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var mr=Array(64),ir,ve,ne,ge,Ae,Re,ze,ke,_e,Ke,hr;for(Ye[Qe>>5]|=128<<24-Qe%32,Ye[(Qe+64>>9<<4)+15]=Qe,ke=0;ke<Ye.length;ke+=16){for(Qe=he[0],ir=he[1],ve=he[2],ne=he[3],ge=he[4],Ae=he[5],Re=he[6],ze=he[7],_e=0;64>_e;_e++){if(16>_e)mr[_e]=Ye[_e+ke];else{Ke=_e,hr=mr[_e-2],hr=X(hr,17)^X(hr,19)^hr>>>10,hr=$(hr,mr[_e-7]);var cr;cr=mr[_e-15],cr=X(cr,7)^X(cr,18)^cr>>>3,mr[Ke]=$($(hr,cr),mr[_e-16])}Ke=ge,Ke=X(Ke,6)^X(Ke,11)^X(Ke,25),Ke=$($($($(ze,Ke),ge&Ae^~ge&Re),Ut[_e]),mr[_e]),ze=Qe,ze=X(ze,2)^X(ze,13)^X(ze,22),hr=$(ze,Qe&ir^Qe&ve^ir&ve),ze=Re,Re=Ae,Ae=ge,ge=$(ne,Ke),ne=ve,ve=ir,ir=Qe,Qe=$(Ke,hr)}he[0]=$(Qe,he[0]),he[1]=$(ir,he[1]),he[2]=$(ve,he[2]),he[3]=$(ne,he[3]),he[4]=$(ge,he[4]),he[5]=$(Ae,he[5]),he[6]=$(Re,he[6]),he[7]=$(ze,he[7])}for(Ye="",mr=0;mr<32*he.length;mr+=8)Ye+=String.fromCharCode(he[mr>>5]>>>24-mr%32&255);return Ye}function N(he){for(var Ye="",Qe,mr=0;mr<he.length;mr++)Qe=he.charCodeAt(mr),Ye+="0123456789abcdef".charAt(Qe>>>4&15)+"0123456789abcdef".charAt(Qe&15);return Ye}function G(he){for(var Ye="",Qe=-1,mr,ir;++Qe<he.length;)mr=he.charCodeAt(Qe),ir=Qe+1<he.length?he.charCodeAt(Qe+1):0,55296<=mr&&56319>=mr&&56320<=ir&&57343>=ir&&(mr=65536+((mr&1023)<<10)+(ir&1023),Qe++),127>=mr?Ye+=String.fromCharCode(mr):2047>=mr?Ye+=String.fromCharCode(192|mr>>>6&31,128|mr&63):65535>=mr?Ye+=String.fromCharCode(224|mr>>>12&15,128|mr>>>6&63,128|mr&63):2097151>=mr&&(Ye+=String.fromCharCode(240|mr>>>18&7,128|mr>>>12&63,128|mr>>>6&63,128|mr&63));return Ye}function X(he,Ye){return he>>>Ye|he<<32-Ye}function $(he,Ye){var Qe=(he&65535)+(Ye&65535);return(he>>16)+(Ye>>16)+(Qe>>16)<<16|Qe&65535}function et(he){return Array.prototype.slice.call(he)}function ot(he){return et(he).join("")}function nt(he){function Ye(){var ze=[],ke=[];return tt(function(){ze.push.apply(ze,et(arguments))},{def:function(){var _e="v"+ir++;return ke.push(_e),0<arguments.length&&(ze.push(_e,"="),ze.push.apply(ze,et(arguments)),ze.push(";")),_e},toString:function(){return ot([0<ke.length?"var "+ke.join(",")+";":"",ot(ze)])}})}function Qe(){function ze(cr,dr){_e(cr,dr,"=",ke.def(cr,dr),";")}var ke=Ye(),_e=Ye(),Ke=ke.toString,hr=_e.toString;return tt(function(){ke.apply(ke,et(arguments))},{def:ke.def,entry:ke,exit:_e,save:ze,set:function(cr,dr,fr){ze(cr,dr),ke(cr,dr,"=",fr,";")},toString:function(){return Ke()+hr()}})}var mr=he&&he.cache,ir=0,ve=[],ne=[],ge=[],Ae=Ye(),Re={};return{global:Ae,link:function(ze,ke){var _e=ke&&ke.stable;if(!_e){for(var Ke=0;Ke<ne.length;++Ke)if(ne[Ke]===ze&&!ge[Ke])return ve[Ke]}return Ke="g"+ir++,ve.push(Ke),ne.push(ze),ge.push(_e),Ke},block:Ye,proc:function(ze,ke){function _e(){var dr="a"+Ke.length;return Ke.push(dr),dr}var Ke=[];ke=ke||0;for(var hr=0;hr<ke;++hr)_e();var hr=Qe(),cr=hr.toString;return Re[ze]=tt(hr,{arg:_e,toString:function(){return ot(["function(",Ke.join(),"){",cr(),"}"])}})},scope:Qe,cond:function(){var ze=ot(arguments),ke=Qe(),_e=Qe(),Ke=ke.toString,hr=_e.toString;return tt(ke,{then:function(){return ke.apply(ke,et(arguments)),this},else:function(){return _e.apply(_e,et(arguments)),this},toString:function(){var cr=hr();return cr&&(cr="else{"+cr+"}"),ot(["if(",ze,"){",Ke(),"}",cr])}})},compile:function(){var ze=['"use strict";',Ae,"return {"];Object.keys(Re).forEach(function(Ke){ze.push('"',Ke,'":',Re[Ke].toString(),",")}),ze.push("}");var ke=ot(ze).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),_e;return mr&&(_e=N(_(G(ke))),mr[_e])?mr[_e].apply(null,ne):(ke=Function.apply(null,ve.concat(ke)),mr&&(mr[_e]=ke),ke.apply(null,ne))}}}function Z(he){return Array.isArray(he)||zt(he)||f(he)}function Q(he){return he.sort(function(Ye,Qe){return Ye==="viewport"?-1:Qe==="viewport"?1:Ye<Qe?-1:1})}function W(he,Ye,Qe,mr){this.thisDep=he,this.contextDep=Ye,this.propDep=Qe,this.append=mr}function J(he){return he&&!(he.thisDep||he.contextDep||he.propDep)}function it(he){return new W(!1,!1,!1,he)}function K(he,Ye){var Qe=he.type;if(Qe===0)return Qe=he.data.length,new W(!0,1<=Qe,2<=Qe,Ye);if(Qe===4)return Qe=he.data,new W(Qe.thisDep,Qe.contextDep,Qe.propDep,Ye);if(Qe===5)return new W(!1,!1,!1,Ye);if(Qe===6){for(var mr=Qe=!1,ir=!1,ve=0;ve<he.data.length;++ve){var ne=he.data[ve];ne.type===1?ir=!0:ne.type===2?mr=!0:ne.type===3?Qe=!0:ne.type===0?(Qe=!0,ne=ne.data,1<=ne&&(mr=!0),2<=ne&&(ir=!0)):ne.type===4&&(Qe=Qe||ne.data.thisDep,mr=mr||ne.data.contextDep,ir=ir||ne.data.propDep)}return new W(Qe,mr,ir,Ye)}return new W(Qe===3,Qe===2,Qe===1,Ye)}function H(he,Ye,Qe,mr,ir,ve,ne,ge,Ae,Re,ze,ke,_e,Ke,hr,cr){function dr(Ar){return Ar.replace(".","_")}function fr(Ar,Br,Mr){var Nr=dr(Ar);gn.push(Ar),Nn[Nr]=ln[Nr]=!!Mr,Cn[Nr]=Br}function Lr(Ar,Br,Mr){var Nr=dr(Ar);gn.push(Ar),Array.isArray(Mr)?(ln[Nr]=Mr.slice(),Nn[Nr]=Mr.slice()):ln[Nr]=Nn[Nr]=Mr,Un[Nr]=Br}function xr(){var Ar=nt({cache:hr}),Br=Ar.link,Mr=Ar.global;Ar.id=ka++,Ar.batchId="0";var Nr=Br(ta),un=Ar.shared={props:"a0"};Object.keys(ta).forEach(function(Yr){un[Yr]=Mr.def(Nr,".",Yr)});var Dn=Ar.next={},mn=Ar.current={};Object.keys(Un).forEach(function(Yr){Array.isArray(ln[Yr])&&(Dn[Yr]=Mr.def(un.next,".",Yr),mn[Yr]=Mr.def(un.current,".",Yr))});var cn=Ar.constants={};Object.keys(pa).forEach(function(Yr){cn[Yr]=Mr.def(JSON.stringify(pa[Yr]))}),Ar.invoke=function(Yr,Gr){switch(Gr.type){case 0:var $r=["this",un.context,un.props,Ar.batchId];return Yr.def(Br(Gr.data),".call(",$r.slice(0,Math.max(Gr.data.length+1,4)),")");case 1:return Yr.def(un.props,Gr.data);case 2:return Yr.def(un.context,Gr.data);case 3:return Yr.def("this",Gr.data);case 4:return Gr.data.append(Ar,Yr),Gr.data.ref;case 5:return Gr.data.toString();case 6:return Gr.data.map(function(wn){return Ar.invoke(Yr,wn)})}},Ar.attribCache={};var Er={};return Ar.scopeAttrib=function(Yr){if(Yr=Ye.id(Yr),Yr in Er)return Er[Yr];var Gr=Re.scope[Yr];return Gr||(Gr=Re.scope[Yr]=new ia),Er[Yr]=Br(Gr)},Ar}function Yt(Ar){var Br=Ar.static;Ar=Ar.dynamic;var Mr;if("profile"in Br){var Nr=!!Br.profile;Mr=it(function(Dn,mn){return Nr}),Mr.enable=Nr}else if("profile"in Ar){var un=Ar.profile;Mr=K(un,function(Dn,mn){return Dn.invoke(mn,un)})}return Mr}function Jt(Ar,Br){var Mr=Ar.static,Nr=Ar.dynamic;if("framebuffer"in Mr){var un=Mr.framebuffer;return un?(un=ge.getFramebuffer(un),it(function(mn,cn){var Er=mn.link(un),Yr=mn.shared;return cn.set(Yr.framebuffer,".next",Er),Yr=Yr.context,cn.set(Yr,".framebufferWidth",Er+".width"),cn.set(Yr,".framebufferHeight",Er+".height"),Er})):it(function(mn,cn){var Er=mn.shared;return cn.set(Er.framebuffer,".next","null"),Er=Er.context,cn.set(Er,".framebufferWidth",Er+".drawingBufferWidth"),cn.set(Er,".framebufferHeight",Er+".drawingBufferHeight"),"null"})}if("framebuffer"in Nr){var Dn=Nr.framebuffer;return K(Dn,function(mn,cn){var Gr=mn.invoke(cn,Dn),Er=mn.shared,Yr=Er.framebuffer,Gr=cn.def(Yr,".getFramebuffer(",Gr,")");return cn.set(Yr,".next",Gr),Er=Er.context,cn.set(Er,".framebufferWidth",Gr+"?"+Gr+".width:"+Er+".drawingBufferWidth"),cn.set(Er,".framebufferHeight",Gr+"?"+Gr+".height:"+Er+".drawingBufferHeight"),Gr})}return null}function qe(Ar,Br,Mr){function Nr(cn){if(cn in un){var Er=un[cn];cn=!0;var Yr=Er.x|0,Gr=Er.y|0,$r,wn;return"width"in Er?$r=Er.width|0:cn=!1,"height"in Er?wn=Er.height|0:cn=!1,new W(!cn&&Br&&Br.thisDep,!cn&&Br&&Br.contextDep,!cn&&Br&&Br.propDep,function(On,Vn){var zn=On.shared.context,Zn=$r;"width"in Er||(Zn=Vn.def(zn,".","framebufferWidth","-",Yr));var Jn=wn;return"height"in Er||(Jn=Vn.def(zn,".","framebufferHeight","-",Gr)),[Yr,Gr,Zn,Jn]})}if(cn in Dn){var An=Dn[cn];return cn=K(An,function(On,Vn){var Ra=On.invoke(Vn,An),zn=On.shared.context,Zn=Vn.def(Ra,".x|0"),Jn=Vn.def(Ra,".y|0"),ua=Vn.def('"width" in ',Ra,"?",Ra,".width|0:","(",zn,".","framebufferWidth","-",Zn,")"),Ra=Vn.def('"height" in ',Ra,"?",Ra,".height|0:","(",zn,".","framebufferHeight","-",Jn,")");return[Zn,Jn,ua,Ra]}),Br&&(cn.thisDep=cn.thisDep||Br.thisDep,cn.contextDep=cn.contextDep||Br.contextDep,cn.propDep=cn.propDep||Br.propDep),cn}return Br?new W(Br.thisDep,Br.contextDep,Br.propDep,function(On,Vn){var zn=On.shared.context;return[0,0,Vn.def(zn,".","framebufferWidth"),Vn.def(zn,".","framebufferHeight")]}):null}var un=Ar.static,Dn=Ar.dynamic;if(Ar=Nr("viewport")){var mn=Ar;Ar=new W(Ar.thisDep,Ar.contextDep,Ar.propDep,function(cn,Er){var Yr=mn.append(cn,Er),Gr=cn.shared.context;return Er.set(Gr,".viewportWidth",Yr[2]),Er.set(Gr,".viewportHeight",Yr[3]),Yr})}return{viewport:Ar,scissor_box:Nr("scissor.box")}}function tr(Ar,Br){var Mr=Ar.static;if(typeof Mr.frag=="string"&&typeof Mr.vert=="string"){if(0<Object.keys(Br.dynamic).length)return null;var Mr=Br.static,Nr=Object.keys(Mr);if(0<Nr.length&&typeof Mr[Nr[0]]=="number"){for(var un=[],Dn=0;Dn<Nr.length;++Dn)un.push([Mr[Nr[Dn]]|0,Nr[Dn]]);return un}}return null}function Ge(Ar,Br,Mr){function Nr(Yr){if(Yr in un){var Gr=Ye.id(un[Yr]);return Yr=it(function(){return Gr}),Yr.id=Gr,Yr}if(Yr in Dn){var $r=Dn[Yr];return K($r,function(wn,An){var On=wn.invoke(An,$r);return An.def(wn.shared.strings,".id(",On,")")})}return null}var un=Ar.static,Dn=Ar.dynamic,mn=Nr("frag"),cn=Nr("vert"),Er=null;return J(mn)&&J(cn)?(Er=ze.program(cn.id,mn.id,null,Mr),Ar=it(function(Yr,Gr){return Yr.link(Er)})):Ar=new W(mn&&mn.thisDep||cn&&cn.thisDep,mn&&mn.contextDep||cn&&cn.contextDep,mn&&mn.propDep||cn&&cn.propDep,function(Yr,Gr){var $r=Yr.shared.shader,wn;wn=mn?mn.append(Yr,Gr):Gr.def($r,".","frag");var An;return An=cn?cn.append(Yr,Gr):Gr.def($r,".","vert"),Gr.def($r+".program("+An+","+wn+")")}),{frag:mn,vert:cn,progVar:Ar,program:Er}}function Ee(Ar,Br){function Mr(On,Vn){if(On in Nr){var zn=Nr[On]|0;return Vn?Dn.offset=zn:Dn.instances=zn,it(function(Jn,ua){return Vn&&(Jn.OFFSET=zn),zn})}if(On in un){var Zn=un[On];return K(Zn,function(Jn,ua){var Ra=Jn.invoke(ua,Zn);return Vn&&(Jn.OFFSET=Ra),Ra})}if(Vn){if(Er)return it(function(Jn,ua){return Jn.OFFSET=0});if(mn)return new W(cn.thisDep,cn.contextDep,cn.propDep,function(Jn,ua){return ua.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.offset:0")})}else if(mn)return new W(cn.thisDep,cn.contextDep,cn.propDep,function(Jn,ua){return ua.def(Jn.shared.vao+".currentVAO?"+Jn.shared.vao+".currentVAO.instances:-1")});return null}var Nr=Ar.static,un=Ar.dynamic,Dn={},mn=!1,cn=function(){if("vao"in Nr){var On=Nr.vao;return On!==null&&Re.getVAO(On)===null&&(On=Re.createVAO(On)),mn=!0,Dn.vao=On,it(function(zn){var Zn=Re.getVAO(On);return Zn?zn.link(Zn):"null"})}if("vao"in un){mn=!0;var Vn=un.vao;return K(Vn,function(zn,Zn){var Jn=zn.invoke(Zn,Vn);return Zn.def(zn.shared.vao+".getVAO("+Jn+")")})}return null}(),Er=!1,Yr=function(){if("elements"in Nr){var On=Nr.elements;if(Dn.elements=On,Z(On)){var Vn=Dn.elements=ve.create(On,!0),On=ve.getElements(Vn);Er=!0}else On&&(On=ve.getElements(On),Er=!0);return Vn=it(function(Zn,Jn){if(On){var ua=Zn.link(On);return Zn.ELEMENTS=ua}return Zn.ELEMENTS=null}),Vn.value=On,Vn}if("elements"in un){Er=!0;var zn=un.elements;return K(zn,function(Zn,Jn){var ua=Zn.shared,mi=ua.isBufferArgs,ua=ua.elements,ri=Zn.invoke(Jn,zn),Ra=Jn.def("null"),mi=Jn.def(mi,"(",ri,")"),ri=Zn.cond(mi).then(Ra,"=",ua,".createStream(",ri,");").else(Ra,"=",ua,".getElements(",ri,");");return Jn.entry(ri),Jn.exit(Zn.cond(mi).then(ua,".destroyStream(",Ra,");")),Zn.ELEMENTS=Ra})}return mn?new W(cn.thisDep,cn.contextDep,cn.propDep,function(Zn,Jn){return Jn.def(Zn.shared.vao+".currentVAO?"+Zn.shared.elements+".getElements("+Zn.shared.vao+".currentVAO.elements):null")}):null}(),Gr=Mr("offset",!0),$r=function(){if("primitive"in Nr){var On=Nr.primitive;return Dn.primitive=On,it(function(zn,Zn){return Wt[On]})}if("primitive"in un){var Vn=un.primitive;return K(Vn,function(zn,Zn){var Jn=zn.constants.primTypes,ua=zn.invoke(Zn,Vn);return Zn.def(Jn,"[",ua,"]")})}return Er?J(Yr)?Yr.value?it(function(zn,Zn){return Zn.def(zn.ELEMENTS,".primType")}):it(function(){return 4}):new W(Yr.thisDep,Yr.contextDep,Yr.propDep,function(zn,Zn){var Jn=zn.ELEMENTS;return Zn.def(Jn,"?",Jn,".primType:",4)}):mn?new W(cn.thisDep,cn.contextDep,cn.propDep,function(zn,Zn){return Zn.def(zn.shared.vao+".currentVAO?"+zn.shared.vao+".currentVAO.primitive:4")}):null}(),wn=function(){if("count"in Nr){var On=Nr.count|0;return Dn.count=On,it(function(){return On})}if("count"in un){var Vn=un.count;return K(Vn,function(zn,Zn){return zn.invoke(Zn,Vn)})}return Er?J(Yr)?Yr?Gr?new W(Gr.thisDep,Gr.contextDep,Gr.propDep,function(zn,Zn){return Zn.def(zn.ELEMENTS,".vertCount-",zn.OFFSET)}):it(function(zn,Zn){return Zn.def(zn.ELEMENTS,".vertCount")}):it(function(){return-1}):new W(Yr.thisDep||Gr.thisDep,Yr.contextDep||Gr.contextDep,Yr.propDep||Gr.propDep,function(zn,Zn){var Jn=zn.ELEMENTS;return zn.OFFSET?Zn.def(Jn,"?",Jn,".vertCount-",zn.OFFSET,":-1"):Zn.def(Jn,"?",Jn,".vertCount:-1")}):mn?new W(cn.thisDep,cn.contextDep,cn.propDep,function(zn,Zn){return Zn.def(zn.shared.vao,".currentVAO?",zn.shared.vao,".currentVAO.count:-1")}):null}(),An=Mr("instances",!1);return{elements:Yr,primitive:$r,count:wn,instances:An,offset:Gr,vao:cn,vaoActive:mn,elementsActive:Er,static:Dn}}function Xe(Ar,Br){var Mr=Ar.static,Nr=Ar.dynamic,un={};return gn.forEach(function(Dn){function mn(Er,Yr){if(Dn in Mr){var Gr=Er(Mr[Dn]);un[cn]=it(function(){return Gr})}else if(Dn in Nr){var $r=Nr[Dn];un[cn]=K($r,function(wn,An){return Yr(wn,An,wn.invoke(An,$r))})}}var cn=dr(Dn);switch(Dn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return mn(function(Er){return Er},function(Er,Yr,Gr){return Gr});case"depth.func":return mn(function(Er){return We[Er]},function(Er,Yr,Gr){return Yr.def(Er.constants.compareFuncs,"[",Gr,"]")});case"depth.range":return mn(function(Er){return Er},function(Er,Yr,Gr){return Er=Yr.def("+",Gr,"[0]"),Yr=Yr.def("+",Gr,"[1]"),[Er,Yr]});case"blend.func":return mn(function(Er){return[Be["srcRGB"in Er?Er.srcRGB:Er.src],Be["dstRGB"in Er?Er.dstRGB:Er.dst],Be["srcAlpha"in Er?Er.srcAlpha:Er.src],Be["dstAlpha"in Er?Er.dstAlpha:Er.dst]]},function(Er,Yr,Gr){function $r(Vn,zn){return Yr.def('"',Vn,zn,'" in ',Gr,"?",Gr,".",Vn,zn,":",Gr,".",Vn)}Er=Er.constants.blendFuncs;var wn=$r("src","RGB"),On=$r("dst","RGB"),wn=Yr.def(Er,"[",wn,"]"),An=Yr.def(Er,"[",$r("src","Alpha"),"]"),On=Yr.def(Er,"[",On,"]");return Er=Yr.def(Er,"[",$r("dst","Alpha"),"]"),[wn,On,An,Er]});case"blend.equation":return mn(function(Er){if(typeof Er=="string")return[Rn[Er],Rn[Er]];if(typeof Er=="object")return[Rn[Er.rgb],Rn[Er.alpha]]},function(Er,Yr,Gr){var $r=Er.constants.blendEquations,wn=Yr.def(),An=Yr.def();return Er=Er.cond("typeof ",Gr,'==="string"'),Er.then(wn,"=",An,"=",$r,"[",Gr,"];"),Er.else(wn,"=",$r,"[",Gr,".rgb];",An,"=",$r,"[",Gr,".alpha];"),Yr(Er),[wn,An]});case"blend.color":return mn(function(Er){return s(4,function(Yr){return+Er[Yr]})},function(Er,Yr,Gr){return s(4,function($r){return Yr.def("+",Gr,"[",$r,"]")})});case"stencil.mask":return mn(function(Er){return Er|0},function(Er,Yr,Gr){return Yr.def(Gr,"|0")});case"stencil.func":return mn(function(Er){return[We[Er.cmp||"keep"],Er.ref||0,"mask"in Er?Er.mask:-1]},function(Er,Yr,Gr){Er=Yr.def('"cmp" in ',Gr,"?",Er.constants.compareFuncs,"[",Gr,".cmp]",":",7680);var $r=Yr.def(Gr,".ref|0");return Yr=Yr.def('"mask" in ',Gr,"?",Gr,".mask|0:-1"),[Er,$r,Yr]});case"stencil.opFront":case"stencil.opBack":return mn(function(Er){return[Dn==="stencil.opBack"?1029:1028,me[Er.fail||"keep"],me[Er.zfail||"keep"],me[Er.zpass||"keep"]]},function(Er,Yr,Gr){function $r(An){return Yr.def('"',An,'" in ',Gr,"?",wn,"[",Gr,".",An,"]:",7680)}var wn=Er.constants.stencilOps;return[Dn==="stencil.opBack"?1029:1028,$r("fail"),$r("zfail"),$r("zpass")]});case"polygonOffset.offset":return mn(function(Er){return[Er.factor|0,Er.units|0]},function(Er,Yr,Gr){return Er=Yr.def(Gr,".factor|0"),Yr=Yr.def(Gr,".units|0"),[Er,Yr]});case"cull.face":return mn(function(Er){var Yr=0;return Er==="front"?Yr=1028:Er==="back"&&(Yr=1029),Yr},function(Er,Yr,Gr){return Yr.def(Gr,'==="front"?',1028,":",1029)});case"lineWidth":return mn(function(Er){return Er},function(Er,Yr,Gr){return Gr});case"frontFace":return mn(function(Er){return Se[Er]},function(Er,Yr,Gr){return Yr.def(Gr+'==="cw"?2304:2305')});case"colorMask":return mn(function(Er){return Er.map(function(Yr){return!!Yr})},function(Er,Yr,Gr){return s(4,function($r){return"!!"+Gr+"["+$r+"]"})});case"sample.coverage":return mn(function(Er){return["value"in Er?Er.value:1,!!Er.invert]},function(Er,Yr,Gr){return Er=Yr.def('"value" in ',Gr,"?+",Gr,".value:1"),Yr=Yr.def("!!",Gr,".invert"),[Er,Yr]})}}),un}function rr(Ar,Br){var Mr=Ar.static,Nr=Ar.dynamic,un={};return Object.keys(Mr).forEach(function(Dn){var mn=Mr[Dn],cn;if(typeof mn=="number"||typeof mn=="boolean")cn=it(function(){return mn});else if(typeof mn=="function"){var Er=mn._reglType;Er==="texture2d"||Er==="textureCube"?cn=it(function(Yr){return Yr.link(mn)}):(Er==="framebuffer"||Er==="framebufferCube")&&(cn=it(function(Yr){return Yr.link(mn.color[0])}))}else w(mn)&&(cn=it(function(Yr){return Yr.global.def("[",s(mn.length,function(Gr){return mn[Gr]}),"]")}));cn.value=mn,un[Dn]=cn}),Object.keys(Nr).forEach(function(Dn){var mn=Nr[Dn];un[Dn]=K(mn,function(cn,Er){return cn.invoke(Er,mn)})}),un}function Je(Ar,Br){var Mr=Ar.static,Nr=Ar.dynamic,un={};return Object.keys(Mr).forEach(function(Dn){var mn=Mr[Dn],cn=Ye.id(Dn),Er=new ia;if(Z(mn))Er.state=1,Er.buffer=ir.getBuffer(ir.create(mn,34962,!1,!0)),Er.type=0;else{var Yr=ir.getBuffer(mn);if(Yr)Er.state=1,Er.buffer=Yr,Er.type=0;else if("constant"in mn){var Gr=mn.constant;Er.buffer="null",Er.state=2,typeof Gr=="number"?Er.x=Gr:$t.forEach(function(zn,Zn){Zn<Gr.length&&(Er[zn]=Gr[Zn])})}else{var Yr=Z(mn.buffer)?ir.getBuffer(ir.create(mn.buffer,34962,!1,!0)):ir.getBuffer(mn.buffer),$r=mn.offset|0,wn=mn.stride|0,An=mn.size|0,On=!!mn.normalized,Vn=0;"type"in mn&&(Vn=Rt[mn.type]),mn=mn.divisor|0,Er.buffer=Yr,Er.state=1,Er.size=An,Er.normalized=On,Er.type=Vn||Yr.dtype,Er.offset=$r,Er.stride=wn,Er.divisor=mn}}un[Dn]=it(function(zn,Zn){var Jn=zn.attribCache;if(cn in Jn)return Jn[cn];var ua={isStream:!1};return Object.keys(Er).forEach(function(Ra){ua[Ra]=Er[Ra]}),Er.buffer&&(ua.buffer=zn.link(Er.buffer),ua.type=ua.type||ua.buffer+".dtype"),Jn[cn]=ua})}),Object.keys(Nr).forEach(function(Dn){var mn=Nr[Dn];un[Dn]=K(mn,function(cn,Er){function Yr(Jn){Er(On[Jn],"=",Gr,".",Jn,"|0;")}var Gr=cn.invoke(Er,mn),An=cn.shared,$r=cn.constants,wn=An.isBufferArgs,An=An.buffer,On={isStream:Er.def(!1)},Vn=new ia;Vn.state=1,Object.keys(Vn).forEach(function(Jn){On[Jn]=Er.def(""+Vn[Jn])});var zn=On.buffer,Zn=On.type;return Er("if(",wn,"(",Gr,")){",On.isStream,"=true;",zn,"=",An,".createStream(",34962,",",Gr,");",Zn,"=",zn,".dtype;","}else{",zn,"=",An,".getBuffer(",Gr,");","if(",zn,"){",Zn,"=",zn,".dtype;",'}else if("constant" in ',Gr,"){",On.state,"=",2,";","if(typeof "+Gr+'.constant === "number"){',On[$t[0]],"=",Gr,".constant;",$t.slice(1).map(function(Jn){return On[Jn]}).join("="),"=0;","}else{",$t.map(function(Jn,ua){return On[Jn]+"="+Gr+".constant.length>"+ua+"?"+Gr+".constant["+ua+"]:0;"}).join(""),"}}else{","if(",wn,"(",Gr,".buffer)){",zn,"=",An,".createStream(",34962,",",Gr,".buffer);","}else{",zn,"=",An,".getBuffer(",Gr,".buffer);","}",Zn,'="type" in ',Gr,"?",$r.glTypes,"[",Gr,".type]:",zn,".dtype;",On.normalized,"=!!",Gr,".normalized;"),Yr("size"),Yr("offset"),Yr("stride"),Yr("divisor"),Er("}}"),Er.exit("if(",On.isStream,"){",An,".destroyStream(",zn,");","}"),On})}),un}function He(Ar){var Br=Ar.static,Mr=Ar.dynamic,Nr={};return Object.keys(Br).forEach(function(un){var Dn=Br[un];Nr[un]=it(function(mn,cn){return typeof Dn=="number"||typeof Dn=="boolean"?""+Dn:mn.link(Dn)})}),Object.keys(Mr).forEach(function(un){var Dn=Mr[un];Nr[un]=K(Dn,function(mn,cn){return mn.invoke(cn,Dn)})}),Nr}function yr(Ar,Br,Mr,Nr,un){function Dn(Vn){var zn=cn[Vn];zn&&(Yr[Vn]=zn)}var mn=tr(Ar,Br),wn=Jt(Ar),cn=qe(Ar,wn),Er=Ee(Ar),Yr=Xe(Ar),Gr=Ge(Ar,un,mn);Dn("viewport"),Dn(dr("scissor.box"));var $r=0<Object.keys(Yr).length,wn={framebuffer:wn,draw:Er,shader:Gr,state:Yr,dirty:$r,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(wn.profile=Yt(Ar),wn.uniforms=rr(Mr),wn.drawVAO=wn.scopeVAO=Er.vao,!wn.drawVAO&&Gr.program&&!mn&&Qe.angle_instanced_arrays&&Er.static.elements){var An=!0;if(Ar=Gr.program.attributes.map(function(Vn){return Vn=Br.static[Vn],An=An&&!!Vn,Vn}),An&&0<Ar.length){var On=Re.getVAO(Re.createVAO({attributes:Ar,elements:Er.static.elements}));wn.drawVAO=new W(null,null,null,function(Vn,zn){return Vn.link(On)}),wn.useVAO=!0}}return mn?wn.useVAO=!0:wn.attributes=Je(Br),wn.context=He(Nr),wn}function Ir(Ar,Br,Mr){var Nr=Ar.shared.context,un=Ar.scope();Object.keys(Mr).forEach(function(Dn){Br.save(Nr,"."+Dn);var mn=Mr[Dn].append(Ar,Br);Array.isArray(mn)?un(Nr,".",Dn,"=[",mn.join(),"];"):un(Nr,".",Dn,"=",mn,";")}),Br(un)}function Tr(Ar,Br,Mr,Nr){var cn=Ar.shared,un=cn.gl,Dn=cn.framebuffer,mn;an&&(mn=Br.def(cn.extensions,".webgl_draw_buffers"));var Er=Ar.constants,cn=Er.drawBuffer,Er=Er.backBuffer;Ar=Mr?Mr.append(Ar,Br):Br.def(Dn,".next"),Nr||Br("if(",Ar,"!==",Dn,".cur){"),Br("if(",Ar,"){",un,".bindFramebuffer(",36160,",",Ar,".framebuffer);"),an&&Br(mn,".drawBuffersWEBGL(",cn,"[",Ar,".colorAttachments.length]);"),Br("}else{",un,".bindFramebuffer(",36160,",null);"),an&&Br(mn,".drawBuffersWEBGL(",Er,");"),Br("}",Dn,".cur=",Ar,";"),Nr||Br("}")}function vn(Ar,Br,Mr){var Nr=Ar.shared,un=Nr.gl,Dn=Ar.current,mn=Ar.next,cn=Nr.current,Er=Nr.next,Yr=Ar.cond(cn,".dirty");gn.forEach(function(Gr){if(Gr=dr(Gr),!(Gr in Mr.state)){var $r,wn;if(Gr in mn){$r=mn[Gr],wn=Dn[Gr];var An=s(ln[Gr].length,function(On){return Yr.def($r,"[",On,"]")});Yr(Ar.cond(An.map(function(On,Vn){return On+"!=="+wn+"["+Vn+"]"}).join("||")).then(un,".",Un[Gr],"(",An,");",An.map(function(On,Vn){return wn+"["+Vn+"]="+On}).join(";"),";"))}else $r=Yr.def(Er,".",Gr),An=Ar.cond($r,"!==",cn,".",Gr),Yr(An),Gr in Cn?An(Ar.cond($r).then(un,".enable(",Cn[Gr],");").else(un,".disable(",Cn[Gr],");"),cn,".",Gr,"=",$r,";"):An(un,".",Un[Gr],"(",$r,");",cn,".",Gr,"=",$r,";")}}),Object.keys(Mr.state).length===0&&Yr(cn,".dirty=false;"),Br(Yr)}function Or(Ar,Br,Mr,Nr){var un=Ar.shared,Dn=Ar.current,mn=un.current,cn=un.gl,Er;Q(Object.keys(Mr)).forEach(function(Yr){var Gr=Mr[Yr];if(!Nr||Nr(Gr)){var $r=Gr.append(Ar,Br);if(Cn[Yr]){var wn=Cn[Yr];J(Gr)?(Er=Ar.link($r,{stable:!0}),Br(Ar.cond(Er).then(cn,".enable(",wn,");").else(cn,".disable(",wn,");")),Br(mn,".",Yr,"=",Er,";")):(Br(Ar.cond($r).then(cn,".enable(",wn,");").else(cn,".disable(",wn,");")),Br(mn,".",Yr,"=",$r,";"))}else if(w($r)){var An=Dn[Yr];Br(cn,".",Un[Yr],"(",$r,");",$r.map(function(On,Vn){return An+"["+Vn+"]="+On}).join(";"),";")}else J(Gr)?(Er=Ar.link($r,{stable:!0}),Br(cn,".",Un[Yr],"(",Er,");",mn,".",Yr,"=",Er,";")):Br(cn,".",Un[Yr],"(",$r,");",mn,".",Yr,"=",$r,";")}})}function En(Ar,Br){Cr&&(Ar.instancing=Br.def(Ar.shared.extensions,".angle_instanced_arrays"))}function nn(Ar,Br,Mr,Nr,un){function Dn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function mn(Vn){An=Br.def(),Vn(An,"=",Dn(),";"),typeof un=="string"?Vn(Gr,".count+=",un,";"):Vn(Gr,".count++;"),Ke&&(Nr?(On=Br.def(),Vn(On,"=",wn,".getNumPendingQueries();")):Vn(wn,".beginQuery(",Gr,");"))}function cn(Vn){Vn(Gr,".cpuTime+=",Dn(),"-",An,";"),Ke&&(Nr?Vn(wn,".pushScopeStats(",On,",",wn,".getNumPendingQueries(),",Gr,");"):Vn(wn,".endQuery();"))}function Er(Vn){var zn=Br.def($r,".profile");Br($r,".profile=",Vn,";"),Br.exit($r,".profile=",zn,";")}var Yr=Ar.shared,Gr=Ar.stats,$r=Yr.current,wn=Yr.timer;Mr=Mr.profile;var An,On;if(Mr){if(J(Mr)){Mr.enable?(mn(Br),cn(Br.exit),Er("true")):Er("false");return}Mr=Mr.append(Ar,Br),Er(Mr)}else Mr=Br.def($r,".profile");Yr=Ar.block(),mn(Yr),Br("if(",Mr,"){",Yr,"}"),Ar=Ar.block(),cn(Ar),Br.exit("if(",Mr,"){",Ar,"}")}function gr(Ar,Br,Mr,Nr,un){function Dn(Er){switch(Er){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function mn(Er,Yr,Gr){function $r(){Br("if(!",Vn,".buffer){",An,".enableVertexAttribArray(",On,");}");var ua=Gr.type,Ra;Ra=Gr.size?Br.def(Gr.size,"||",Yr):Yr,Br("if(",Vn,".type!==",ua,"||",Vn,".size!==",Ra,"||",Jn.map(function(mi){return Vn+"."+mi+"!=="+Gr[mi]}).join("||"),"){",An,".bindBuffer(",34962,",",zn,".buffer);",An,".vertexAttribPointer(",[On,Ra,ua,Gr.normalized,Gr.stride,Gr.offset],");",Vn,".type=",ua,";",Vn,".size=",Ra,";",Jn.map(function(mi){return Vn+"."+mi+"="+Gr[mi]+";"}).join(""),"}"),Cr&&(ua=Gr.divisor,Br("if(",Vn,".divisor!==",ua,"){",Ar.instancing,".vertexAttribDivisorANGLE(",[On,ua],");",Vn,".divisor=",ua,";}"))}function wn(){Br("if(",Vn,".buffer){",An,".disableVertexAttribArray(",On,");",Vn,".buffer=null;","}if(",$t.map(function(ua,Ra){return Vn+"."+ua+"!=="+Zn[Ra]}).join("||"),"){",An,".vertexAttrib4f(",On,",",Zn,");",$t.map(function(ua,Ra){return Vn+"."+ua+"="+Zn[Ra]+";"}).join(""),"}")}var An=cn.gl,On=Br.def(Er,".location"),Vn=Br.def(cn.attributes,"[",On,"]");Er=Gr.state;var zn=Gr.buffer,Zn=[Gr.x,Gr.y,Gr.z,Gr.w],Jn=["buffer","normalized","offset","stride"];Er===1?$r():Er===2?wn():(Br("if(",Er,"===",1,"){"),$r(),Br("}else{"),wn(),Br("}"))}var cn=Ar.shared;Nr.forEach(function(Er){var Yr=Er.name,Gr=Mr.attributes[Yr],$r;if(Gr){if(!un(Gr))return;$r=Gr.append(Ar,Br)}else{if(!un(je))return;var wn=Ar.scopeAttrib(Yr);$r={},Object.keys(new ia).forEach(function(An){$r[An]=Br.def(wn,".",An)})}mn(Ar.link(Er),Dn(Er.info.type),$r)})}function Pr(Ar,Br,Mr,Nr,un,Dn){for(var mn=Ar.shared,cn=mn.gl,Er,Yr=0;Yr<Nr.length;++Yr){var An=Nr[Yr],Gr=An.name,$r=An.info.type,wn=Mr.uniforms[Gr],An=Ar.link(An)+".location",On;if(wn){if(!un(wn))continue;if(J(wn)){if(Gr=wn.value,$r===35678||$r===35680)$r=Ar.link(Gr._texture||Gr.color[0]._texture),Br(cn,".uniform1i(",An,",",$r+".bind());"),Br.exit($r,".unbind();");else if($r===35674||$r===35675||$r===35676)Gr=Ar.global.def("new Float32Array(["+Array.prototype.slice.call(Gr)+"])"),wn=2,$r===35675?wn=3:$r===35676&&(wn=4),Br(cn,".uniformMatrix",wn,"fv(",An,",false,",Gr,");");else{switch($r){case 5126:Er="1f";break;case 35664:Er="2f";break;case 35665:Er="3f";break;case 35666:Er="4f";break;case 35670:Er="1i";break;case 5124:Er="1i";break;case 35671:Er="2i";break;case 35667:Er="2i";break;case 35672:Er="3i";break;case 35668:Er="3i";break;case 35673:Er="4i";break;case 35669:Er="4i"}Br(cn,".uniform",Er,"(",An,",",w(Gr)?Array.prototype.slice.call(Gr):Gr,");")}continue}else On=wn.append(Ar,Br)}else{if(!un(je))continue;On=Br.def(mn.uniforms,"[",Ye.id(Gr),"]")}switch($r===35678?Br("if(",On,"&&",On,'._reglType==="framebuffer"){',On,"=",On,".color[0];","}"):$r===35680&&Br("if(",On,"&&",On,'._reglType==="framebufferCube"){',On,"=",On,".color[0];","}"),Gr=1,$r){case 35678:case 35680:$r=Br.def(On,"._texture"),Br(cn,".uniform1i(",An,",",$r,".bind());"),Br.exit($r,".unbind();");continue;case 5124:case 35670:Er="1i";break;case 35667:case 35671:Er="2i",Gr=2;break;case 35668:case 35672:Er="3i",Gr=3;break;case 35669:case 35673:Er="4i",Gr=4;break;case 5126:Er="1f";break;case 35664:Er="2f",Gr=2;break;case 35665:Er="3f",Gr=3;break;case 35666:Er="4f",Gr=4;break;case 35674:Er="Matrix2fv";break;case 35675:Er="Matrix3fv";break;case 35676:Er="Matrix4fv"}if(Er.charAt(0)==="M"){Br(cn,".uniform",Er,"(",An,",");var An=Math.pow($r-35674+2,2),Vn=Ar.global.def("new Float32Array(",An,")");Array.isArray(On)?Br("false,(",s(An,function(Jn){return Vn+"["+Jn+"]="+On[Jn]}),",",Vn,")"):Br("false,(Array.isArray(",On,")||",On," instanceof Float32Array)?",On,":(",s(An,function(Jn){return Vn+"["+Jn+"]="+On+"["+Jn+"]"}),",",Vn,")"),Br(");")}else{if(1<Gr){for(var $r=[],zn=[],wn=0;wn<Gr;++wn)Array.isArray(On)?zn.push(On[wn]):zn.push(Br.def(On+"["+wn+"]")),Dn&&$r.push(Br.def());Dn&&Br("if(!",Ar.batchId,"||",$r.map(function(Zn,Jn){return Zn+"!=="+zn[Jn]}).join("||"),"){",$r.map(function(Zn,Jn){return Zn+"="+zn[Jn]+";"}).join("")),Br(cn,".uniform",Er,"(",An,",",zn.join(","),");")}else Dn&&($r=Br.def(),Br("if(!",Ar.batchId,"||",$r,"!==",On,"){",$r,"=",On,";")),Br(cn,".uniform",Er,"(",An,",",On,");");Dn&&Br("}")}}}function Xr(Ar,Br,Mr,Nr){function un(ua){var Ra=Gr[ua];return Ra?Ra.contextDep&&Nr.contextDynamic||Ra.propDep?Ra.append(Ar,Mr):Ra.append(Ar,Br):Br.def(Yr,".",ua)}function Dn(){function ua(){Mr(zn,".drawElementsInstancedANGLE(",[wn,On,Zn,An+"<<(("+Zn+"-5121)>>1)",Vn],");")}function Ra(){Mr(zn,".drawArraysInstancedANGLE(",[wn,An,On,Vn],");")}$r&&$r!=="null"?Jn?ua():(Mr("if(",$r,"){"),ua(),Mr("}else{"),Ra(),Mr("}")):Ra()}function mn(){function ua(){Mr(Er+".drawElements("+[wn,On,Zn,An+"<<(("+Zn+"-5121)>>1)"]+");")}function Ra(){Mr(Er+".drawArrays("+[wn,An,On]+");")}$r&&$r!=="null"?Jn?ua():(Mr("if(",$r,"){"),ua(),Mr("}else{"),Ra(),Mr("}")):Ra()}var cn=Ar.shared,Er=cn.gl,Yr=cn.draw,Gr=Nr.draw,$r=function(){var ua=Gr.elements,Ra=Br;return ua?((ua.contextDep&&Nr.contextDynamic||ua.propDep)&&(Ra=Mr),ua=ua.append(Ar,Ra),Gr.elementsActive&&Ra("if("+ua+")"+Er+".bindBuffer(34963,"+ua+".buffer.buffer);")):(ua=Ra.def(),Ra(ua,"=",Yr,".","elements",";","if(",ua,"){",Er,".bindBuffer(",34963,",",ua,".buffer.buffer);}","else if(",cn.vao,".currentVAO){",ua,"=",Ar.shared.elements+".getElements("+cn.vao,".currentVAO.elements);",on?"":"if("+ua+")"+Er+".bindBuffer(34963,"+ua+".buffer.buffer);","}")),ua}(),wn=un("primitive"),An=un("offset"),On=function(){var ua=Gr.count,Ra=Br;return ua?((ua.contextDep&&Nr.contextDynamic||ua.propDep)&&(Ra=Mr),ua=ua.append(Ar,Ra)):ua=Ra.def(Yr,".","count"),ua}();if(typeof On=="number"){if(On===0)return}else Mr("if(",On,"){"),Mr.exit("}");var Vn,zn;Cr&&(Vn=un("instances"),zn=Ar.instancing);var Zn=$r+".type",Jn=Gr.elements&&J(Gr.elements)&&!Gr.vaoActive;Cr&&(typeof Vn!="number"||0<=Vn)?typeof Vn=="string"?(Mr("if(",Vn,">0){"),Dn(),Mr("}else if(",Vn,"<0){"),mn(),Mr("}")):Dn():mn()}function kr(Ar,Br,Mr,Nr,un){return Br=xr(),un=Br.proc("body",un),Cr&&(Br.instancing=un.def(Br.shared.extensions,".angle_instanced_arrays")),Ar(Br,un,Mr,Nr),Br.compile().body}function pn(Ar,Br,Mr,Nr){En(Ar,Br),Mr.useVAO?Mr.drawVAO?Br(Ar.shared.vao,".setVAO(",Mr.drawVAO.append(Ar,Br),");"):Br(Ar.shared.vao,".setVAO(",Ar.shared.vao,".targetVAO);"):(Br(Ar.shared.vao,".setVAO(null);"),gr(Ar,Br,Mr,Nr.attributes,function(){return!0})),Pr(Ar,Br,Mr,Nr.uniforms,function(){return!0},!1),Xr(Ar,Br,Br,Mr)}function en(Ar,Br){var Mr=Ar.proc("draw",1);En(Ar,Mr),Ir(Ar,Mr,Br.context),Tr(Ar,Mr,Br.framebuffer),vn(Ar,Mr,Br),Or(Ar,Mr,Br.state),nn(Ar,Mr,Br,!1,!0);var Nr=Br.shader.progVar.append(Ar,Mr);if(Mr(Ar.shared.gl,".useProgram(",Nr,".program);"),Br.shader.program)pn(Ar,Mr,Br,Br.shader.program);else{Mr(Ar.shared.vao,".setVAO(null);");var un=Ar.global.def("{}"),Dn=Mr.def(Nr,".id"),mn=Mr.def(un,"[",Dn,"]");Mr(Ar.cond(mn).then(mn,".call(this,a0);").else(mn,"=",un,"[",Dn,"]=",Ar.link(function(cn){return kr(pn,Ar,Br,cn,1)}),"(",Nr,");",mn,".call(this,a0);"))}0<Object.keys(Br.state).length&&Mr(Ar.shared.current,".dirty=true;"),Ar.shared.vao&&Mr(Ar.shared.vao,".setVAO(null);")}function Tn(Ar,Br,Mr,Nr){function un(){return!0}Ar.batchId="a1",En(Ar,Br),gr(Ar,Br,Mr,Nr.attributes,un),Pr(Ar,Br,Mr,Nr.uniforms,un,!1),Xr(Ar,Br,Br,Mr)}function Ln(Ar,Br,Mr,Nr){function un($r){return $r.contextDep&&mn||$r.propDep}function Dn($r){return!un($r)}En(Ar,Br);var mn=Mr.contextDep,cn=Br.def(),Er=Br.def();Ar.shared.props=Er,Ar.batchId=cn;var Yr=Ar.scope(),Gr=Ar.scope();Br(Yr.entry,"for(",cn,"=0;",cn,"<","a1",";++",cn,"){",Er,"=","a0","[",cn,"];",Gr,"}",Yr.exit),Mr.needsContext&&Ir(Ar,Gr,Mr.context),Mr.needsFramebuffer&&Tr(Ar,Gr,Mr.framebuffer),Or(Ar,Gr,Mr.state,un),Mr.profile&&un(Mr.profile)&&nn(Ar,Gr,Mr,!1,!0),Nr?(Mr.useVAO?Mr.drawVAO?un(Mr.drawVAO)?Gr(Ar.shared.vao,".setVAO(",Mr.drawVAO.append(Ar,Gr),");"):Yr(Ar.shared.vao,".setVAO(",Mr.drawVAO.append(Ar,Yr),");"):Yr(Ar.shared.vao,".setVAO(",Ar.shared.vao,".targetVAO);"):(Yr(Ar.shared.vao,".setVAO(null);"),gr(Ar,Yr,Mr,Nr.attributes,Dn),gr(Ar,Gr,Mr,Nr.attributes,un)),Pr(Ar,Yr,Mr,Nr.uniforms,Dn,!1),Pr(Ar,Gr,Mr,Nr.uniforms,un,!0),Xr(Ar,Yr,Gr,Mr)):(Br=Ar.global.def("{}"),Nr=Mr.shader.progVar.append(Ar,Gr),Er=Gr.def(Nr,".id"),Yr=Gr.def(Br,"[",Er,"]"),Gr(Ar.shared.gl,".useProgram(",Nr,".program);","if(!",Yr,"){",Yr,"=",Br,"[",Er,"]=",Ar.link(function($r){return kr(Tn,Ar,Mr,$r,2)}),"(",Nr,");}",Yr,".call(this,a0[",cn,"],",cn,");"))}function Yn(Ar,Br){function Mr(Yr){return Yr.contextDep&&un||Yr.propDep}var Nr=Ar.proc("batch",2);Ar.batchId="0",En(Ar,Nr);var un=!1,Dn=!0;Object.keys(Br.context).forEach(function(Yr){un=un||Br.context[Yr].propDep}),un||(Ir(Ar,Nr,Br.context),Dn=!1);var mn=Br.framebuffer,cn=!1;if(mn?(mn.propDep?un=cn=!0:mn.contextDep&&un&&(cn=!0),cn||Tr(Ar,Nr,mn)):Tr(Ar,Nr,null),Br.state.viewport&&Br.state.viewport.propDep&&(un=!0),vn(Ar,Nr,Br),Or(Ar,Nr,Br.state,function(Yr){return!Mr(Yr)}),Br.profile&&Mr(Br.profile)||nn(Ar,Nr,Br,!1,"a1"),Br.contextDep=un,Br.needsContext=Dn,Br.needsFramebuffer=cn,Dn=Br.shader.progVar,Dn.contextDep&&un||Dn.propDep)Ln(Ar,Nr,Br,null);else if(Dn=Dn.append(Ar,Nr),Nr(Ar.shared.gl,".useProgram(",Dn,".program);"),Br.shader.program)Ln(Ar,Nr,Br,Br.shader.program);else{Nr(Ar.shared.vao,".setVAO(null);");var mn=Ar.global.def("{}"),cn=Nr.def(Dn,".id"),Er=Nr.def(mn,"[",cn,"]");Nr(Ar.cond(Er).then(Er,".call(this,a0,a1);").else(Er,"=",mn,"[",cn,"]=",Ar.link(function($r){return kr(Ln,Ar,Br,$r,2)}),"(",Dn,");",Er,".call(this,a0,a1);"))}0<Object.keys(Br.state).length&&Nr(Ar.shared.current,".dirty=true;"),Ar.shared.vao&&Nr(Ar.shared.vao,".setVAO(null);")}function ma(Ar,Br){function Mr(cn){var Er=Br.shader[cn];Er&&(Er=Er.append(Ar,Nr),isNaN(Er)?Nr.set(un.shader,"."+cn,Er):Nr.set(un.shader,"."+cn,Ar.link(Er,{stable:!0})))}var Nr=Ar.proc("scope",3);Ar.batchId="a2";var un=Ar.shared,Dn=un.current;if(Ir(Ar,Nr,Br.context),Br.framebuffer&&Br.framebuffer.append(Ar,Nr),Q(Object.keys(Br.state)).forEach(function(cn){var Er=Br.state[cn],Yr=Er.append(Ar,Nr);w(Yr)?Yr.forEach(function(Gr,$r){isNaN(Gr)?Nr.set(Ar.next[cn],"["+$r+"]",Gr):Nr.set(Ar.next[cn],"["+$r+"]",Ar.link(Gr,{stable:!0}))}):J(Er)?Nr.set(un.next,"."+cn,Ar.link(Yr,{stable:!0})):Nr.set(un.next,"."+cn,Yr)}),nn(Ar,Nr,Br,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(cn){var Er=Br.draw[cn];Er&&(Er=Er.append(Ar,Nr),isNaN(Er)?Nr.set(un.draw,"."+cn,Er):Nr.set(un.draw,"."+cn,Ar.link(Er),{stable:!0}))}),Object.keys(Br.uniforms).forEach(function(cn){var Er=Br.uniforms[cn].append(Ar,Nr);Array.isArray(Er)&&(Er="["+Er.map(function(Yr){return isNaN(Yr)?Yr:Ar.link(Yr,{stable:!0})})+"]"),Nr.set(un.uniforms,"["+Ar.link(Ye.id(cn),{stable:!0})+"]",Er)}),Object.keys(Br.attributes).forEach(function(cn){var Er=Br.attributes[cn].append(Ar,Nr),Yr=Ar.scopeAttrib(cn);Object.keys(new ia).forEach(function(Gr){Nr.set(Yr,"."+Gr,Er[Gr])})}),Br.scopeVAO){var mn=Br.scopeVAO.append(Ar,Nr);isNaN(mn)?Nr.set(un.vao,".targetVAO",mn):Nr.set(un.vao,".targetVAO",Ar.link(mn,{stable:!0}))}Mr("vert"),Mr("frag"),0<Object.keys(Br.state).length&&(Nr(Dn,".dirty=true;"),Nr.exit(Dn,".dirty=true;")),Nr("a1(",Ar.shared.context,",a0,",Ar.batchId,");")}function wa(Ar){if(typeof Ar=="object"&&!w(Ar)){for(var Br=Object.keys(Ar),Mr=0;Mr<Br.length;++Mr)if(dt.isDynamic(Ar[Br[Mr]]))return!0;return!1}}function la(Ar,Br,Mr){function Nr($r,wn){mn.forEach(function(An){var On=un[An];dt.isDynamic(On)&&(On=$r.invoke(wn,On),wn(Gr,".",An,"=",On,";"))})}var un=Br.static[Mr];if(un&&wa(un)){var Dn=Ar.global,mn=Object.keys(un),cn=!1,Er=!1,Yr=!1,Gr=Ar.global.def("{}");mn.forEach(function($r){var wn=un[$r];if(dt.isDynamic(wn))typeof wn=="function"&&(wn=un[$r]=dt.unbox(wn)),$r=K(wn,null),cn=cn||$r.thisDep,Yr=Yr||$r.propDep,Er=Er||$r.contextDep;else{switch(Dn(Gr,".",$r,"="),typeof wn){case"number":Dn(wn);break;case"string":Dn('"',wn,'"');break;case"object":Array.isArray(wn)&&Dn("[",wn.join(),"]");break;default:Dn(Ar.link(wn))}Dn(";")}}),Br.dynamic[Mr]=new dt.DynamicVariable(4,{thisDep:cn,contextDep:Er,propDep:Yr,ref:Gr,append:Nr}),delete Br.static[Mr]}}var ia=Re.Record,Rn={add:32774,subtract:32778,"reverse subtract":32779};Qe.ext_blend_minmax&&(Rn.min=32775,Rn.max=32776);var Cr=Qe.angle_instanced_arrays,an=Qe.webgl_draw_buffers,on=Qe.oes_vertex_array_object,ln={dirty:!0,profile:cr.profile},Nn={},gn=[],Cn={},Un={};fr("dither",3024),fr("blend.enable",3042),Lr("blend.color","blendColor",[0,0,0,0]),Lr("blend.equation","blendEquationSeparate",[32774,32774]),Lr("blend.func","blendFuncSeparate",[1,0,1,0]),fr("depth.enable",2929,!0),Lr("depth.func","depthFunc",513),Lr("depth.range","depthRange",[0,1]),Lr("depth.mask","depthMask",!0),Lr("colorMask","colorMask",[!0,!0,!0,!0]),fr("cull.enable",2884),Lr("cull.face","cullFace",1029),Lr("frontFace","frontFace",2305),Lr("lineWidth","lineWidth",1),fr("polygonOffset.enable",32823),Lr("polygonOffset.offset","polygonOffset",[0,0]),fr("sample.alpha",32926),fr("sample.enable",32928),Lr("sample.coverage","sampleCoverage",[1,!1]),fr("stencil.enable",2960),Lr("stencil.mask","stencilMask",-1),Lr("stencil.func","stencilFunc",[519,0,-1]),Lr("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Lr("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),fr("scissor.enable",3089),Lr("scissor.box","scissor",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]),Lr("viewport","viewport",[0,0,he.drawingBufferWidth,he.drawingBufferHeight]);var ta={gl:he,context:_e,strings:Ye,next:Nn,current:ln,draw:ke,elements:ve,buffer:ir,shader:ze,attributes:Re.state,vao:Re,uniforms:Ae,framebuffer:ge,extensions:Qe,timer:Ke,isBufferArgs:Z},pa={primTypes:Wt,compareFuncs:We,blendFuncs:Be,blendEquations:Rn,stencilOps:me,glTypes:Rt,orientationType:Se};an&&(pa.backBuffer=[1029],pa.drawBuffer=s(mr.maxDrawbuffers,function(Ar){return Ar===0?[0]:s(Ar,function(Br){return 36064+Br})}));var ka=0;return{next:Nn,current:ln,procs:function(){var Ar=xr(),Br=Ar.proc("poll"),Mr=Ar.proc("refresh"),Nr=Ar.block();Br(Nr),Mr(Nr);var Er=Ar.shared,un=Er.gl,Dn=Er.next,mn=Er.current;Nr(mn,".dirty=false;"),Tr(Ar,Br),Tr(Ar,Mr,null,!0);var cn;Cr&&(cn=Ar.link(Cr)),Qe.oes_vertex_array_object&&Mr(Ar.link(Qe.oes_vertex_array_object),".bindVertexArrayOES(null);");var Er=Mr.def(Er.attributes),Yr=Mr.def(0),Gr=Ar.cond(Yr,".buffer");Gr.then(un,".enableVertexAttribArray(i);",un,".bindBuffer(",34962,",",Yr,".buffer.buffer);",un,".vertexAttribPointer(i,",Yr,".size,",Yr,".type,",Yr,".normalized,",Yr,".stride,",Yr,".offset);").else(un,".disableVertexAttribArray(i);",un,".vertexAttrib4f(i,",Yr,".x,",Yr,".y,",Yr,".z,",Yr,".w);",Yr,".buffer=null;");var $r=Ar.link(mr.maxAttributes,{stable:!0});return Mr("for(var i=0;i<",$r,";++i){",Yr,"=",Er,"[i];",Gr,"}"),Cr&&Mr("for(var i=0;i<",$r,";++i){",cn,".vertexAttribDivisorANGLE(i,",Er,"[i].divisor);","}"),Mr(Ar.shared.vao,".currentVAO=null;",Ar.shared.vao,".setVAO(",Ar.shared.vao,".targetVAO);"),Object.keys(Cn).forEach(function(wn){var An=Cn[wn],On=Nr.def(Dn,".",wn),Vn=Ar.block();Vn("if(",On,"){",un,".enable(",An,")}else{",un,".disable(",An,")}",mn,".",wn,"=",On,";"),Mr(Vn),Br("if(",On,"!==",mn,".",wn,"){",Vn,"}")}),Object.keys(Un).forEach(function(wn){var An=Un[wn],On=ln[wn],Vn,zn,Zn=Ar.block();Zn(un,".",An,"("),w(On)?(An=On.length,Vn=Ar.global.def(Dn,".",wn),zn=Ar.global.def(mn,".",wn),Zn(s(An,function(Jn){return Vn+"["+Jn+"]"}),");",s(An,function(Jn){return zn+"["+Jn+"]="+Vn+"["+Jn+"];"}).join("")),Br("if(",s(An,function(Jn){return Vn+"["+Jn+"]!=="+zn+"["+Jn+"]"}).join("||"),"){",Zn,"}")):(Vn=Nr.def(Dn,".",wn),zn=Nr.def(mn,".",wn),Zn(Vn,");",mn,".",wn,"=",Vn,";"),Br("if(",Vn,"!==",zn,"){",Zn,"}")),Mr(Zn)}),Ar.compile()}(),compile:function(Ar,Br,Mr,Nr,un){var Dn=xr();Dn.stats=Dn.link(un),Object.keys(Br.static).forEach(function(cn){la(Dn,Br,cn)}),re.forEach(function(cn){la(Dn,Ar,cn)});var mn=yr(Ar,Br,Mr,Nr,Dn);return mn.shader.program&&(mn.shader.program.attributes.sort(function(cn,Er){return cn.name<Er.name?-1:1}),mn.shader.program.uniforms.sort(function(cn,Er){return cn.name<Er.name?-1:1})),en(Dn,mn),ma(Dn,mn),Yn(Dn,mn),tt(Dn.compile(),{destroy:function(){mn.shader.program.destroy()}})}}}function at(he,Ye){for(var Qe=0;Qe<he.length;++Qe)if(he[Qe]===Ye)return Qe;return-1}var tt=function(he,Ye){for(var Qe=Object.keys(Ye),mr=0;mr<Qe.length;++mr)he[Qe[mr]]=Ye[Qe[mr]];return he},lt=0,dt={DynamicVariable:V,define:function(he,Ye){return new V(he,b(Ye+""))},isDynamic:function(he){return typeof he=="function"&&!he._reglType||he instanceof V},unbox:P,accessor:b},mt={next:typeof requestAnimationFrame=="function"?function(he){return requestAnimationFrame(he)}:function(he){return setTimeout(he,16)},cancel:typeof cancelAnimationFrame=="function"?function(he){return cancelAnimationFrame(he)}:clearTimeout},gt=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Mt=l();Mt.zero=l();var Lt=function(he,Ye){var Qe=1;Ye.ext_texture_filter_anisotropic&&(Qe=he.getParameter(34047));var mr=1,ir=1;Ye.webgl_draw_buffers&&(mr=he.getParameter(34852),ir=he.getParameter(36063));var ve=!!Ye.oes_texture_float;if(ve){ve=he.createTexture(),he.bindTexture(3553,ve),he.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var ne=he.createFramebuffer();if(he.bindFramebuffer(36160,ne),he.framebufferTexture2D(36160,36064,3553,ve,0),he.bindTexture(3553,null),he.checkFramebufferStatus(36160)!==36053)ve=!1;else{he.viewport(0,0,1,1),he.clearColor(1,0,0,1),he.clear(16384);var ge=Mt.allocType(5126,4);he.readPixels(0,0,1,1,6408,5126,ge),he.getError()?ve=!1:(he.deleteFramebuffer(ne),he.deleteTexture(ve),ve=ge[0]===1),Mt.freeType(ge)}}return ge=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ge=he.createTexture(),ne=Mt.allocType(5121,36),he.activeTexture(33984),he.bindTexture(34067,ge),he.texImage2D(34069,0,6408,3,3,0,6408,5121,ne),Mt.freeType(ne),he.bindTexture(34067,null),he.deleteTexture(ge),ge=!he.getError()),{colorBits:[he.getParameter(3410),he.getParameter(3411),he.getParameter(3412),he.getParameter(3413)],depthBits:he.getParameter(3414),stencilBits:he.getParameter(3415),subpixelBits:he.getParameter(3408),extensions:Object.keys(Ye).filter(function(Ae){return!!Ye[Ae]}),maxAnisotropic:Qe,maxDrawbuffers:mr,maxColorAttachments:ir,pointSizeDims:he.getParameter(33901),lineWidthDims:he.getParameter(33902),maxViewportDims:he.getParameter(3386),maxCombinedTextureUnits:he.getParameter(35661),maxCubeMapSize:he.getParameter(34076),maxRenderbufferSize:he.getParameter(34024),maxTextureUnits:he.getParameter(34930),maxTextureSize:he.getParameter(3379),maxAttributes:he.getParameter(34921),maxVertexUniforms:he.getParameter(36347),maxVertexTextureUnits:he.getParameter(35660),maxVaryingVectors:he.getParameter(36348),maxFragmentUniforms:he.getParameter(36349),glsl:he.getParameter(35724),renderer:he.getParameter(7937),vendor:he.getParameter(7936),version:he.getParameter(7938),readFloat:ve,npotTextureCube:ge}},zt=function(he){return he instanceof Uint8Array||he instanceof Uint16Array||he instanceof Uint32Array||he instanceof Int8Array||he instanceof Int16Array||he instanceof Int32Array||he instanceof Float32Array||he instanceof Float64Array||he instanceof Uint8ClampedArray},xt=function(he){return Object.keys(he).map(function(Ye){return he[Ye]})},Ct={shape:function(he){for(var Ye=[];he.length;he=he[0])Ye.push(he.length);return Ye},flatten:function(he,Ye,Qe,mr){var ir=1;if(Ye.length)for(var ve=0;ve<Ye.length;++ve)ir*=Ye[ve];else ir=0;switch(Qe=mr||Mt.allocType(Qe,ir),Ye.length){case 0:break;case 1:for(mr=Ye[0],Ye=0;Ye<mr;++Ye)Qe[Ye]=he[Ye];break;case 2:for(mr=Ye[0],Ye=Ye[1],ve=ir=0;ve<mr;++ve)for(var ne=he[ve],ge=0;ge<Ye;++ge)Qe[ir++]=ne[ge];break;case 3:u(he,Ye[0],Ye[1],Ye[2],Qe,0);break;default:g(he,Ye,0,Qe,0)}return Qe}},wt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Rt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Tt={dynamic:35048,stream:35040,static:35044},Bt=Ct.flatten,Gt=Ct.shape,te=[];te[5120]=1,te[5122]=2,te[5124]=4,te[5121]=1,te[5123]=2,te[5125]=4,te[5126]=4;var Wt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},jt=new Float32Array(1),ie=new Uint32Array(jt.buffer),ue=[9984,9986,9985,9987],fe=[0,6409,6410,6407,6408],pe={};pe[6409]=pe[6406]=pe[6402]=1,pe[34041]=pe[6410]=2,pe[6407]=pe[35904]=3,pe[6408]=pe[35906]=4;var Te=C("HTMLCanvasElement"),Qt=C("OffscreenCanvas"),Pt=C("CanvasRenderingContext2D"),Ot=C("ImageBitmap"),Nt=C("HTMLImageElement"),Ht=C("HTMLVideoElement"),St=Object.keys(wt).concat([Te,Qt,Pt,Ot,Nt,Ht]),kt=[];kt[5121]=1,kt[5126]=4,kt[36193]=2,kt[5123]=2,kt[5125]=4;var Ft=[];Ft[32854]=2,Ft[32855]=2,Ft[36194]=2,Ft[34041]=4,Ft[33776]=.5,Ft[33777]=.5,Ft[33778]=1,Ft[33779]=1,Ft[35986]=.5,Ft[35987]=1,Ft[34798]=1,Ft[35840]=.5,Ft[35841]=.25,Ft[35842]=.5,Ft[35843]=.25,Ft[36196]=.5;var At=[];At[32854]=2,At[32855]=2,At[36194]=2,At[33189]=2,At[36168]=1,At[34041]=4,At[35907]=4,At[34836]=16,At[34842]=8,At[34843]=6;var ft=function(he,Ye,Qe,mr,ir){function ve(ke){this.id=Re++,this.refCount=1,this.renderbuffer=ke,this.format=32854,this.height=this.width=0,ir.profile&&(this.stats={size:0})}function ne(ke){var _e=ke.renderbuffer;he.bindRenderbuffer(36161,null),he.deleteRenderbuffer(_e),ke.renderbuffer=null,ke.refCount=0,delete ze[ke.id],mr.renderbufferCount--}var ge={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ye.ext_srgb&&(ge.srgba=35907),Ye.ext_color_buffer_half_float&&(ge.rgba16f=34842,ge.rgb16f=34843),Ye.webgl_color_buffer_float&&(ge.rgba32f=34836);var Ae=[];Object.keys(ge).forEach(function(ke){Ae[ge[ke]]=ke});var Re=0,ze={};return ve.prototype.decRef=function(){0>=--this.refCount&&ne(this)},ir.profile&&(mr.getTotalRenderbufferSize=function(){var ke=0;return Object.keys(ze).forEach(function(_e){ke+=ze[_e].stats.size}),ke}),{create:function(ke,_e){function Ke(cr,dr){var fr=0,Lr=0,xr=32854;if(typeof cr=="object"&&cr?("shape"in cr?(Lr=cr.shape,fr=Lr[0]|0,Lr=Lr[1]|0):("radius"in cr&&(fr=Lr=cr.radius|0),"width"in cr&&(fr=cr.width|0),"height"in cr&&(Lr=cr.height|0)),"format"in cr&&(xr=ge[cr.format])):typeof cr=="number"?(fr=cr|0,Lr=typeof dr=="number"?dr|0:fr):cr||(fr=Lr=1),fr!==hr.width||Lr!==hr.height||xr!==hr.format)return Ke.width=hr.width=fr,Ke.height=hr.height=Lr,hr.format=xr,he.bindRenderbuffer(36161,hr.renderbuffer),he.renderbufferStorage(36161,xr,fr,Lr),ir.profile&&(hr.stats.size=At[hr.format]*hr.width*hr.height),Ke.format=Ae[hr.format],Ke}var hr=new ve(he.createRenderbuffer());return ze[hr.id]=hr,mr.renderbufferCount++,Ke(ke,_e),Ke.resize=function(cr,dr){var fr=cr|0,Lr=dr|0||fr;return fr===hr.width&&Lr===hr.height||(Ke.width=hr.width=fr,Ke.height=hr.height=Lr,he.bindRenderbuffer(36161,hr.renderbuffer),he.renderbufferStorage(36161,hr.format,fr,Lr),ir.profile&&(hr.stats.size=At[hr.format]*hr.width*hr.height)),Ke},Ke._reglType="renderbuffer",Ke._renderbuffer=hr,ir.profile&&(Ke.stats=hr.stats),Ke.destroy=function(){hr.decRef()},Ke},clear:function(){xt(ze).forEach(ne)},restore:function(){xt(ze).forEach(function(ke){ke.renderbuffer=he.createRenderbuffer(),he.bindRenderbuffer(36161,ke.renderbuffer),he.renderbufferStorage(36161,ke.format,ke.width,ke.height)}),he.bindRenderbuffer(36161,null)}}},pt=[];pt[6408]=4,pt[6407]=3;var Dt=[];Dt[5121]=1,Dt[5126]=4,Dt[36193]=2;var Ut=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],$t=["x","y","z","w"],re="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Be={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},We={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},me={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Se={cw:2304,ccw:2305},je=new W(!1,!1,!1,function(){}),vr=function(he,Ye){function Qe(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function mr(ze,ke,_e){var Ke=ne.pop()||new Qe;Ke.startQueryIndex=ze,Ke.endQueryIndex=ke,Ke.sum=0,Ke.stats=_e,ge.push(Ke)}if(!Ye.ext_disjoint_timer_query)return null;var ir=[],ve=[],ne=[],ge=[],Ae=[],Re=[];return{beginQuery:function(ze){var ke=ir.pop()||Ye.ext_disjoint_timer_query.createQueryEXT();Ye.ext_disjoint_timer_query.beginQueryEXT(35007,ke),ve.push(ke),mr(ve.length-1,ve.length,ze)},endQuery:function(){Ye.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:mr,update:function(){var ze,ke;if(ze=ve.length,ze!==0){Re.length=Math.max(Re.length,ze+1),Ae.length=Math.max(Ae.length,ze+1),Ae[0]=0;var _e=Re[0]=0;for(ke=ze=0;ke<ve.length;++ke){var Ke=ve[ke];Ye.ext_disjoint_timer_query.getQueryObjectEXT(Ke,34919)?(_e+=Ye.ext_disjoint_timer_query.getQueryObjectEXT(Ke,34918),ir.push(Ke)):ve[ze++]=Ke,Ae[ke+1]=_e,Re[ke+1]=ze}for(ve.length=ze,ke=ze=0;ke<ge.length;++ke){var _e=ge[ke],hr=_e.startQueryIndex,Ke=_e.endQueryIndex;_e.sum+=Ae[Ke]-Ae[hr],hr=Re[hr],Ke=Re[Ke],Ke===hr?(_e.stats.gpuTime+=_e.sum/1e6,ne.push(_e)):(_e.startQueryIndex=hr,_e.endQueryIndex=Ke,ge[ze++]=_e)}ge.length=ze}},getNumPendingQueries:function(){return ve.length},clear:function(){ir.push.apply(ir,ve);for(var ze=0;ze<ir.length;ze++)Ye.ext_disjoint_timer_query.deleteQueryEXT(ir[ze]);ve.length=0,ir.length=0},restore:function(){ve.length=0,ir.length=0}}};return function(he){function Ye(){if(nn.length===0)xr&&xr.update(),kr=null;else{kr=mt.next(Ye),ze();for(var en=nn.length-1;0<=en;--en){var Tn=nn[en];Tn&&Tn(qe,null,0)}Ke.flush(),xr&&xr.update()}}function Qe(){!kr&&0<nn.length&&(kr=mt.next(Ye))}function mr(){kr&&(mt.cancel(Ye),kr=null)}function ir(en){en.preventDefault(),mr(),gr.forEach(function(Tn){Tn()})}function ve(en){Ke.getError(),cr.restore(),Je.restore(),Ee.restore(),He.restore(),yr.restore(),Ir.restore(),rr.restore(),xr&&xr.restore(),Tr.procs.refresh(),Qe(),Pr.forEach(function(Tn){Tn()})}function ne(en){function Tn(ln,Nn){var gn={},Cn={};return Object.keys(ln).forEach(function(Un){var ta=ln[Un];if(dt.isDynamic(ta))Cn[Un]=dt.unbox(ta,Un);else{if(Nn&&Array.isArray(ta)){for(var pa=0;pa<ta.length;++pa)if(dt.isDynamic(ta[pa])){Cn[Un]=dt.unbox(ta,Un);return}}gn[Un]=ta}}),{dynamic:Cn,static:gn}}function Ln(ln){for(;on.length<ln;)on.push(null);return on}var Yn=Tn(en.context||{},!0),ma=Tn(en.uniforms||{},!0),wa=Tn(en.attributes||{},!1);en=Tn(function(ln){function Nn(Cn){if(Cn in gn){var Un=gn[Cn];delete gn[Cn],Object.keys(Un).forEach(function(ta){gn[Cn+"."+ta]=Un[ta]})}}var gn=tt({},ln);return delete gn.uniforms,delete gn.attributes,delete gn.context,delete gn.vao,"stencil"in gn&&gn.stencil.op&&(gn.stencil.opBack=gn.stencil.opFront=gn.stencil.op,delete gn.stencil.op),Nn("blend"),Nn("depth"),Nn("cull"),Nn("stencil"),Nn("polygonOffset"),Nn("scissor"),Nn("sample"),"vao"in ln&&(gn.vao=ln.vao),gn}(en),!1);var la={gpuTime:0,cpuTime:0,count:0},ia=Tr.compile(en,wa,ma,Yn,la),Rn=ia.draw,Cr=ia.batch,an=ia.scope,on=[];return tt(function(ln,Nn){var gn;if(typeof ln=="function")return an.call(this,null,ln,0);if(typeof Nn=="function")if(typeof ln=="number")for(gn=0;gn<ln;++gn)an.call(this,null,Nn,gn);else if(Array.isArray(ln))for(gn=0;gn<ln.length;++gn)an.call(this,ln[gn],Nn,gn);else return an.call(this,ln,Nn,0);else if(typeof ln=="number"){if(0<ln)return Cr.call(this,Ln(ln|0),ln|0)}else if(Array.isArray(ln)){if(ln.length)return Cr.call(this,ln,ln.length)}else return Rn.call(this,ln)},{stats:la,destroy:function(){ia.destroy()}})}function ge(en,Tn){var Ln=0;Tr.procs.poll();var Yn=Tn.color;Yn&&(Ke.clearColor(+Yn[0]||0,+Yn[1]||0,+Yn[2]||0,+Yn[3]||0),Ln|=16384),"depth"in Tn&&(Ke.clearDepth(+Tn.depth),Ln|=256),"stencil"in Tn&&(Ke.clearStencil(Tn.stencil|0),Ln|=1024),Ke.clear(Ln)}function Ae(en){return nn.push(en),Qe(),{cancel:function(){function Tn(){var Yn=at(nn,Tn);nn[Yn]=nn[nn.length-1],--nn.length,0>=nn.length&&mr()}var Ln=at(nn,en);nn[Ln]=Tn}}}function Re(){var en=Or.viewport,Tn=Or.scissor_box;en[0]=en[1]=Tn[0]=Tn[1]=0,qe.viewportWidth=qe.framebufferWidth=qe.drawingBufferWidth=en[2]=Tn[2]=Ke.drawingBufferWidth,qe.viewportHeight=qe.framebufferHeight=qe.drawingBufferHeight=en[3]=Tn[3]=Ke.drawingBufferHeight}function ze(){qe.tick+=1,qe.time=_e(),Re(),Tr.procs.poll()}function ke(){He.refresh(),Re(),Tr.procs.refresh(),xr&&xr.update()}function _e(){return(gt()-Yt)/1e3}if(he=r(he),!he)return null;var Ke=he.gl,hr=Ke.getContextAttributes();Ke.isContextLost();var cr=e(Ke,he);if(!cr)return null;var vn=o(),dr={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},fr=he.cachedCode||{},Lr=cr.extensions,xr=vr(Ke,Lr),Yt=gt(),tr=Ke.drawingBufferWidth,Jt=Ke.drawingBufferHeight,qe={tick:0,time:0,viewportWidth:tr,viewportHeight:Jt,framebufferWidth:tr,framebufferHeight:Jt,drawingBufferWidth:tr,drawingBufferHeight:Jt,pixelRatio:he.pixelRatio},tr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ge=Lt(Ke,Lr),Ee=i(Ke,dr,he,function(en){return rr.destroyBuffer(en)}),Xe=d(Ke,Lr,Ee,dr),rr=z(Ke,Lr,Ge,dr,Ee,Xe,tr),Je=B(Ke,vn,dr,he),He=k(Ke,Lr,Ge,function(){Tr.procs.poll()},qe,dr,he),yr=ft(Ke,Lr,Ge,dr,he),Ir=I(Ke,Lr,Ge,He,yr,dr),Tr=H(Ke,vn,Lr,Ge,Ee,Xe,He,Ir,{},rr,Je,tr,qe,xr,fr,he),vn=F(Ke,Ir,Tr.procs.poll,qe),Or=Tr.next,En=Ke.canvas,nn=[],gr=[],Pr=[],Xr=[he.onDestroy],kr=null;En&&(En.addEventListener("webglcontextlost",ir,!1),En.addEventListener("webglcontextrestored",ve,!1));var pn=Ir.setFBO=ne({framebuffer:dt.define.call(null,1,"framebuffer")});return ke(),hr=tt(ne,{clear:function(en){if("framebuffer"in en)if(en.framebuffer&&en.framebuffer_reglType==="framebufferCube")for(var Tn=0;6>Tn;++Tn)pn(tt({framebuffer:en.framebuffer.faces[Tn]},en),ge);else pn(en,ge);else ge(null,en)},prop:dt.define.bind(null,1),context:dt.define.bind(null,2),this:dt.define.bind(null,3),draw:ne({}),buffer:function(en){return Ee.create(en,34962,!1,!1)},elements:function(en){return Xe.create(en,!1)},texture:He.create2D,cube:He.createCube,renderbuffer:yr.create,framebuffer:Ir.create,framebufferCube:Ir.createCube,vao:rr.createVAO,attributes:hr,frame:Ae,on:function(en,Tn){var Ln;switch(en){case"frame":return Ae(Tn);case"lost":Ln=gr;break;case"restore":Ln=Pr;break;case"destroy":Ln=Xr}return Ln.push(Tn),{cancel:function(){for(var Yn=0;Yn<Ln.length;++Yn)if(Ln[Yn]===Tn){Ln[Yn]=Ln[Ln.length-1],Ln.pop();break}}}},limits:Ge,hasExtension:function(en){return 0<=Ge.extensions.indexOf(en.toLowerCase())},read:vn,destroy:function(){nn.length=0,mr(),En&&(En.removeEventListener("webglcontextlost",ir),En.removeEventListener("webglcontextrestored",ve)),Je.clear(),Ir.clear(),yr.clear(),rr.clear(),He.clear(),Xe.clear(),Ee.clear(),xr&&xr.clear(),Xr.forEach(function(en){en()})},_gl:Ke,_refresh:ke,poll:function(){ze(),xr&&xr.update()},now:_e,stats:dr,getCachedCode:function(){return fr},preloadCachedCode:function(en){Object.entries(en).forEach(function(Tn){fr[Tn[0]]=Tn[1]})}}),he.onDone(null,hr),hr}})},30456:function(j,V,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var b=t(33576),P=b.Buffer;function o(A,v){for(var p in A)v[p]=A[p]}P.from&&P.alloc&&P.allocUnsafe&&P.allocUnsafeSlow?j.exports=b:(o(b,V),V.Buffer=L);function L(A,v,p){return P(A,v,p)}L.prototype=Object.create(P.prototype),o(P,L),L.from=function(A,v,p){if(typeof A=="number")throw new TypeError("Argument must not be a number");return P(A,v,p)},L.alloc=function(A,v,p){if(typeof A!="number")throw new TypeError("Argument must be a number");var r=P(A);return v!==void 0?typeof p=="string"?r.fill(v,p):r.fill(v):r.fill(0),r},L.allocUnsafe=function(A){if(typeof A!="number")throw new TypeError("Argument must be a number");return P(A)},L.allocUnsafeSlow=function(A){if(typeof A!="number")throw new TypeError("Argument must be a number");return b.SlowBuffer(A)}},14500:function(j,V,t){var b=t(53664),P=t(64348),o=t(39640)(),L=t(2304),A=b("%TypeError%"),v=b("%Math.floor%");j.exports=function(r,e){if(typeof r!="function")throw new A("`fn` is not a function");if(typeof e!="number"||e<0||e>4294967295||v(e)!==e)throw new A("`length` must be a positive 32-bit integer");var s=arguments.length>2&&!!arguments[2],n=!0,l=!0;if("length"in r&&L){var f=L(r,"length");f&&!f.configurable&&(n=!1),f&&!f.writable&&(l=!1)}return(n||l||!s)&&(o?P(r,"length",e,!0,!0):P(r,"length",e)),r}},29936:function(j,V,t){j.exports=o;var b=t(61252).EventEmitter,P=t(6768);P(o,b),o.Readable=t(12348),o.Writable=t(11288),o.Duplex=t(15316),o.Transform=t(22477),o.PassThrough=t(27136),o.finished=t(15932),o.pipeline=t(38180),o.Stream=o;function o(){b.call(this)}o.prototype.pipe=function(L,A){var v=this;function p(u){L.writable&&L.write(u)===!1&&v.pause&&v.pause()}v.on("data",p);function r(){v.readable&&v.resume&&v.resume()}L.on("drain",r),!L._isStdio&&(!A||A.end!==!1)&&(v.on("end",s),v.on("close",n));var e=!1;function s(){e||(e=!0,L.end())}function n(){e||(e=!0,typeof L.destroy=="function"&&L.destroy())}function l(u){if(f(),b.listenerCount(this,"error")===0)throw u}v.on("error",l),L.on("error",l);function f(){v.removeListener("data",p),L.removeListener("drain",r),v.removeListener("end",s),v.removeListener("close",n),v.removeListener("error",l),L.removeListener("error",l),v.removeListener("end",f),v.removeListener("close",f),L.removeListener("close",f)}return v.on("end",f),v.on("close",f),L.on("close",f),L.emit("pipe",v),L}},92784:function(j){function V(v,p){v.prototype=Object.create(p.prototype),v.prototype.constructor=v,v.__proto__=p}var t={};function b(v,p,r){r||(r=Error);function e(n,l,f){return typeof p=="string"?p:p(n,l,f)}var s=function(n){V(l,n);function l(f,u,g){return n.call(this,e(f,u,g))||this}return l}(r);s.prototype.name=r.name,s.prototype.code=v,t[v]=s}function P(v,p){if(Array.isArray(v)){var r=v.length;return v=v.map(function(e){return String(e)}),r>2?"one of ".concat(p," ").concat(v.slice(0,r-1).join(", "),", or ")+v[r-1]:r===2?"one of ".concat(p," ").concat(v[0]," or ").concat(v[1]):"of ".concat(p," ").concat(v[0])}else return"of ".concat(p," ").concat(String(v))}function o(v,p,r){return v.substr(0,p.length)===p}function L(v,p,r){return(r===void 0||r>v.length)&&(r=v.length),v.substring(r-p.length,r)===p}function A(v,p,r){return typeof r!="number"&&(r=0),r+p.length>v.length?!1:v.indexOf(p,r)!==-1}b("ERR_INVALID_OPT_VALUE",function(v,p){return'The value "'+p+'" is invalid for option "'+v+'"'},TypeError),b("ERR_INVALID_ARG_TYPE",function(v,p,r){var e;typeof p=="string"&&o(p,"not ")?(e="must not be",p=p.replace(/^not /,"")):e="must be";var s;if(L(v," argument"))s="The ".concat(v," ").concat(e," ").concat(P(p,"type"));else{var n=A(v,".")?"property":"argument";s='The "'.concat(v,'" ').concat(n," ").concat(e," ").concat(P(p,"type"))}return s+=". Received type ".concat(typeof r),s},TypeError),b("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),b("ERR_METHOD_NOT_IMPLEMENTED",function(v){return"The "+v+" method is not implemented"}),b("ERR_STREAM_PREMATURE_CLOSE","Premature close"),b("ERR_STREAM_DESTROYED",function(v){return"Cannot call "+v+" after a stream was destroyed"}),b("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),b("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),b("ERR_STREAM_WRITE_AFTER_END","write after end"),b("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),b("ERR_UNKNOWN_ENCODING",function(v){return"Unknown encoding: "+v},TypeError),b("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),j.exports.i=t},15316:function(j,V,t){var b=t(4168),P=Object.keys||function(n){var l=[];for(var f in n)l.push(f);return l};j.exports=r;var o=t(12348),L=t(11288);t(6768)(r,o);for(var A=P(L.prototype),v=0;v<A.length;v++){var p=A[v];r.prototype[p]||(r.prototype[p]=L.prototype[p])}function r(n){if(!(this instanceof r))return new r(n);o.call(this,n),L.call(this,n),this.allowHalfOpen=!0,n&&(n.readable===!1&&(this.readable=!1),n.writable===!1&&(this.writable=!1),n.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",e)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function e(){this._writableState.ended||b.nextTick(s,this)}function s(n){n.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(l){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=l,this._writableState.destroyed=l)}})},27136:function(j,V,t){j.exports=P;var b=t(22477);t(6768)(P,b);function P(o){if(!(this instanceof P))return new P(o);b.call(this,o)}P.prototype._transform=function(o,L,A){A(null,o)}},12348:function(j,V,t){var b=t(4168);j.exports=a;var P;a.ReadableState=M,t(61252).EventEmitter;var o=function(H,at){return H.listeners(at).length},L=t(4776),A=t(33576).Buffer,v=t.g.Uint8Array||function(){};function p(K){return A.from(K)}function r(K){return A.isBuffer(K)||K instanceof v}var e=t(19768),s;e&&e.debuglog?s=e.debuglog("stream"):s=function(){};var n=t(47264),l=t(55324),f=t(24888),u=f.getHighWaterMark,g=t(92784).i,h=g.ERR_INVALID_ARG_TYPE,T=g.ERR_STREAM_PUSH_AFTER_EOF,c=g.ERR_METHOD_NOT_IMPLEMENTED,i=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,d,x,w;t(6768)(a,L);var C=l.errorOrDestroy,y=["error","close","destroy","pause","resume"];function S(K,H,at){if(typeof K.prependListener=="function")return K.prependListener(H,at);!K._events||!K._events[H]?K.on(H,at):Array.isArray(K._events[H])?K._events[H].unshift(at):K._events[H]=[at,K._events[H]]}function M(K,H,at){P=P||t(15316),K=K||{},typeof at!="boolean"&&(at=H instanceof P),this.objectMode=!!K.objectMode,at&&(this.objectMode=this.objectMode||!!K.readableObjectMode),this.highWaterMark=u(this,K,"readableHighWaterMark",at),this.buffer=new n,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=K.emitClose!==!1,this.autoDestroy=!!K.autoDestroy,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(d||(d=t(86032).o),this.decoder=new d(K.encoding),this.encoding=K.encoding)}function a(K){if(P=P||t(15316),!(this instanceof a))return new a(K);var H=this instanceof P;this._readableState=new M(K,this,H),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),L.call(this)}Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(H){this._readableState&&(this._readableState.destroyed=H)}}),a.prototype.destroy=l.destroy,a.prototype._undestroy=l.undestroy,a.prototype._destroy=function(K,H){H(K)},a.prototype.push=function(K,H){var at=this._readableState,tt;return at.objectMode?tt=!0:typeof K=="string"&&(H=H||at.defaultEncoding,H!==at.encoding&&(K=A.from(K,H),H=""),tt=!0),E(this,K,H,!1,tt)},a.prototype.unshift=function(K){return E(this,K,null,!0,!1)};function E(K,H,at,tt,lt){s("readableAddChunk",H);var dt=K._readableState;if(H===null)dt.reading=!1,B(K,dt);else{var mt;if(lt||(mt=k(dt,H)),mt)C(K,mt);else if(dt.objectMode||H&&H.length>0)if(typeof H!="string"&&!dt.objectMode&&Object.getPrototypeOf(H)!==A.prototype&&(H=p(H)),tt)dt.endEmitted?C(K,new i):m(K,dt,H,!0);else if(dt.ended)C(K,new T);else{if(dt.destroyed)return!1;dt.reading=!1,dt.decoder&&!at?(H=dt.decoder.write(H),dt.objectMode||H.length!==0?m(K,dt,H,!1):N(K,dt)):m(K,dt,H,!1)}else tt||(dt.reading=!1,N(K,dt))}return!dt.ended&&(dt.length<dt.highWaterMark||dt.length===0)}function m(K,H,at,tt){H.flowing&&H.length===0&&!H.sync?(H.awaitDrain=0,K.emit("data",at)):(H.length+=H.objectMode?1:at.length,tt?H.buffer.unshift(at):H.buffer.push(at),H.needReadable&&F(K)),N(K,H)}function k(K,H){var at;return!r(H)&&typeof H!="string"&&H!==void 0&&!K.objectMode&&(at=new h("chunk",["string","Buffer","Uint8Array"],H)),at}a.prototype.isPaused=function(){return this._readableState.flowing===!1},a.prototype.setEncoding=function(K){d||(d=t(86032).o);var H=new d(K);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;for(var at=this._readableState.buffer.head,tt="";at!==null;)tt+=H.write(at.data),at=at.next;return this._readableState.buffer.clear(),tt!==""&&this._readableState.buffer.push(tt),this._readableState.length=tt.length,this};var I=1073741824;function O(K){return K>=I?K=I:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function z(K,H){return K<=0||H.length===0&&H.ended?0:H.objectMode?1:K!==K?H.flowing&&H.length?H.buffer.head.data.length:H.length:(K>H.highWaterMark&&(H.highWaterMark=O(K)),K<=H.length?K:H.ended?H.length:(H.needReadable=!0,0))}a.prototype.read=function(K){s("read",K),K=parseInt(K,10);var H=this._readableState,at=K;if(K!==0&&(H.emittedReadable=!1),K===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return s("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?W(this):F(this),null;if(K=z(K,H),K===0&&H.ended)return H.length===0&&W(this),null;var tt=H.needReadable;s("need readable",tt),(H.length===0||H.length-K<H.highWaterMark)&&(tt=!0,s("length less than watermark",tt)),H.ended||H.reading?(tt=!1,s("reading or ended",tt)):tt&&(s("do read"),H.reading=!0,H.sync=!0,H.length===0&&(H.needReadable=!0),this._read(H.highWaterMark),H.sync=!1,H.reading||(K=z(at,H)));var lt;return K>0?lt=Q(K,H):lt=null,lt===null?(H.needReadable=H.length<=H.highWaterMark,K=0):(H.length-=K,H.awaitDrain=0),H.length===0&&(H.ended||(H.needReadable=!0),at!==K&&H.ended&&W(this)),lt!==null&&this.emit("data",lt),lt};function B(K,H){if(s("onEofChunk"),!H.ended){if(H.decoder){var at=H.decoder.end();at&&at.length&&(H.buffer.push(at),H.length+=H.objectMode?1:at.length)}H.ended=!0,H.sync?F(K):(H.needReadable=!1,H.emittedReadable||(H.emittedReadable=!0,_(K)))}}function F(K){var H=K._readableState;s("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(s("emitReadable",H.flowing),H.emittedReadable=!0,b.nextTick(_,K))}function _(K){var H=K._readableState;s("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&(H.length||H.ended)&&(K.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,Z(K)}function N(K,H){H.readingMore||(H.readingMore=!0,b.nextTick(G,K,H))}function G(K,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){var at=H.length;if(s("maybeReadMore read 0"),K.read(0),at===H.length)break}H.readingMore=!1}a.prototype._read=function(K){C(this,new c("_read()"))},a.prototype.pipe=function(K,H){var at=this,tt=this._readableState;switch(tt.pipesCount){case 0:tt.pipes=K;break;case 1:tt.pipes=[tt.pipes,K];break;default:tt.pipes.push(K);break}tt.pipesCount+=1,s("pipe count=%d opts=%j",tt.pipesCount,H);var lt=(!H||H.end!==!1)&&K!==b.stdout&&K!==b.stderr,dt=lt?gt:Tt;tt.endEmitted?b.nextTick(dt):at.once("end",dt),K.on("unpipe",mt);function mt(Bt,Gt){s("onunpipe"),Bt===at&&Gt&&Gt.hasUnpiped===!1&&(Gt.hasUnpiped=!0,zt())}function gt(){s("onend"),K.end()}var Mt=X(at);K.on("drain",Mt);var Lt=!1;function zt(){s("cleanup"),K.removeListener("close",wt),K.removeListener("finish",Rt),K.removeListener("drain",Mt),K.removeListener("error",Ct),K.removeListener("unpipe",mt),at.removeListener("end",gt),at.removeListener("end",Tt),at.removeListener("data",xt),Lt=!0,tt.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&Mt()}at.on("data",xt);function xt(Bt){s("ondata");var Gt=K.write(Bt);s("dest.write",Gt),Gt===!1&&((tt.pipesCount===1&&tt.pipes===K||tt.pipesCount>1&&it(tt.pipes,K)!==-1)&&!Lt&&(s("false write response, pause",tt.awaitDrain),tt.awaitDrain++),at.pause())}function Ct(Bt){s("onerror",Bt),Tt(),K.removeListener("error",Ct),o(K,"error")===0&&C(K,Bt)}S(K,"error",Ct);function wt(){K.removeListener("finish",Rt),Tt()}K.once("close",wt);function Rt(){s("onfinish"),K.removeListener("close",wt),Tt()}K.once("finish",Rt);function Tt(){s("unpipe"),at.unpipe(K)}return K.emit("pipe",at),tt.flowing||(s("pipe resume"),at.resume()),K};function X(K){return function(){var at=K._readableState;s("pipeOnDrain",at.awaitDrain),at.awaitDrain&&at.awaitDrain--,at.awaitDrain===0&&o(K,"data")&&(at.flowing=!0,Z(K))}}a.prototype.unpipe=function(K){var H=this._readableState,at={hasUnpiped:!1};if(H.pipesCount===0)return this;if(H.pipesCount===1)return K&&K!==H.pipes?this:(K||(K=H.pipes),H.pipes=null,H.pipesCount=0,H.flowing=!1,K&&K.emit("unpipe",this,at),this);if(!K){var tt=H.pipes,lt=H.pipesCount;H.pipes=null,H.pipesCount=0,H.flowing=!1;for(var dt=0;dt<lt;dt++)tt[dt].emit("unpipe",this,{hasUnpiped:!1});return this}var mt=it(H.pipes,K);return mt===-1?this:(H.pipes.splice(mt,1),H.pipesCount-=1,H.pipesCount===1&&(H.pipes=H.pipes[0]),K.emit("unpipe",this,at),this)},a.prototype.on=function(K,H){var at=L.prototype.on.call(this,K,H),tt=this._readableState;return K==="data"?(tt.readableListening=this.listenerCount("readable")>0,tt.flowing!==!1&&this.resume()):K==="readable"&&!tt.endEmitted&&!tt.readableListening&&(tt.readableListening=tt.needReadable=!0,tt.flowing=!1,tt.emittedReadable=!1,s("on readable",tt.length,tt.reading),tt.length?F(this):tt.reading||b.nextTick(et,this)),at},a.prototype.addListener=a.prototype.on,a.prototype.removeListener=function(K,H){var at=L.prototype.removeListener.call(this,K,H);return K==="readable"&&b.nextTick($,this),at},a.prototype.removeAllListeners=function(K){var H=L.prototype.removeAllListeners.apply(this,arguments);return(K==="readable"||K===void 0)&&b.nextTick($,this),H};function $(K){var H=K._readableState;H.readableListening=K.listenerCount("readable")>0,H.resumeScheduled&&!H.paused?H.flowing=!0:K.listenerCount("data")>0&&K.resume()}function et(K){s("readable nexttick read 0"),K.read(0)}a.prototype.resume=function(){var K=this._readableState;return K.flowing||(s("resume"),K.flowing=!K.readableListening,ot(this,K)),K.paused=!1,this};function ot(K,H){H.resumeScheduled||(H.resumeScheduled=!0,b.nextTick(nt,K,H))}function nt(K,H){s("resume",H.reading),H.reading||K.read(0),H.resumeScheduled=!1,K.emit("resume"),Z(K),H.flowing&&!H.reading&&K.read(0)}a.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Z(K){var H=K._readableState;for(s("flow",H.flowing);H.flowing&&K.read()!==null;);}a.prototype.wrap=function(K){var H=this,at=this._readableState,tt=!1;K.on("end",function(){if(s("wrapped end"),at.decoder&&!at.ended){var mt=at.decoder.end();mt&&mt.length&&H.push(mt)}H.push(null)}),K.on("data",function(mt){if(s("wrapped data"),at.decoder&&(mt=at.decoder.write(mt)),!(at.objectMode&&mt==null)&&!(!at.objectMode&&(!mt||!mt.length))){var gt=H.push(mt);gt||(tt=!0,K.pause())}});for(var lt in K)this[lt]===void 0&&typeof K[lt]=="function"&&(this[lt]=function(gt){return function(){return K[gt].apply(K,arguments)}}(lt));for(var dt=0;dt<y.length;dt++)K.on(y[dt],this.emit.bind(this,y[dt]));return this._read=function(mt){s("wrapped _read",mt),tt&&(tt=!1,K.resume())},this},typeof Symbol=="function"&&(a.prototype[Symbol.asyncIterator]=function(){return x===void 0&&(x=t(60328)),x(this)}),Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(a.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(a.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(H){this._readableState&&(this._readableState.flowing=H)}}),a._fromList=Q,Object.defineProperty(a.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Q(K,H){if(H.length===0)return null;var at;return H.objectMode?at=H.buffer.shift():!K||K>=H.length?(H.decoder?at=H.buffer.join(""):H.buffer.length===1?at=H.buffer.first():at=H.buffer.concat(H.length),H.buffer.clear()):at=H.buffer.consume(K,H.decoder),at}function W(K){var H=K._readableState;s("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,b.nextTick(J,H,K))}function J(K,H){if(s("endReadableNT",K.endEmitted,K.length),!K.endEmitted&&K.length===0&&(K.endEmitted=!0,H.readable=!1,H.emit("end"),K.autoDestroy)){var at=H._writableState;(!at||at.autoDestroy&&at.finished)&&H.destroy()}}typeof Symbol=="function"&&(a.from=function(K,H){return w===void 0&&(w=t(90555)),w(a,K,H)});function it(K,H){for(var at=0,tt=K.length;at<tt;at++)if(K[at]===H)return at;return-1}},22477:function(j,V,t){j.exports=r;var b=t(92784).i,P=b.ERR_METHOD_NOT_IMPLEMENTED,o=b.ERR_MULTIPLE_CALLBACK,L=b.ERR_TRANSFORM_ALREADY_TRANSFORMING,A=b.ERR_TRANSFORM_WITH_LENGTH_0,v=t(15316);t(6768)(r,v);function p(n,l){var f=this._transformState;f.transforming=!1;var u=f.writecb;if(u===null)return this.emit("error",new o);f.writechunk=null,f.writecb=null,l!=null&&this.push(l),u(n);var g=this._readableState;g.reading=!1,(g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}function r(n){if(!(this instanceof r))return new r(n);v.call(this,n),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",e)}function e(){var n=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(l,f){s(n,l,f)}):s(this,null,null)}r.prototype.push=function(n,l){return this._transformState.needTransform=!1,v.prototype.push.call(this,n,l)},r.prototype._transform=function(n,l,f){f(new P("_transform()"))},r.prototype._write=function(n,l,f){var u=this._transformState;if(u.writecb=f,u.writechunk=n,u.writeencoding=l,!u.transforming){var g=this._readableState;(u.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},r.prototype._read=function(n){var l=this._transformState;l.writechunk!==null&&!l.transforming?(l.transforming=!0,this._transform(l.writechunk,l.writeencoding,l.afterTransform)):l.needTransform=!0},r.prototype._destroy=function(n,l){v.prototype._destroy.call(this,n,function(f){l(f)})};function s(n,l,f){if(l)return n.emit("error",l);if(f!=null&&n.push(f),n._writableState.length)throw new A;if(n._transformState.transforming)throw new L;return n.push(null)}},11288:function(j,V,t){var b=t(4168);j.exports=M;function P(Z){var Q=this;this.next=null,this.entry=null,this.finish=function(){nt(Q,Z)}}var o;M.WritableState=y;var L={deprecate:t(96656)},A=t(4776),v=t(33576).Buffer,p=t.g.Uint8Array||function(){};function r(Z){return v.from(Z)}function e(Z){return v.isBuffer(Z)||Z instanceof p}var s=t(55324),n=t(24888),l=n.getHighWaterMark,f=t(92784).i,u=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,h=f.ERR_MULTIPLE_CALLBACK,T=f.ERR_STREAM_CANNOT_PIPE,c=f.ERR_STREAM_DESTROYED,i=f.ERR_STREAM_NULL_VALUES,d=f.ERR_STREAM_WRITE_AFTER_END,x=f.ERR_UNKNOWN_ENCODING,w=s.errorOrDestroy;t(6768)(M,A);function C(){}function y(Z,Q,W){o=o||t(15316),Z=Z||{},typeof W!="boolean"&&(W=Q instanceof o),this.objectMode=!!Z.objectMode,W&&(this.objectMode=this.objectMode||!!Z.writableObjectMode),this.highWaterMark=l(this,Z,"writableHighWaterMark",W),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var J=Z.decodeStrings===!1;this.decodeStrings=!J,this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(it){B(Q,it)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Z.emitClose!==!1,this.autoDestroy=!!Z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new P(this)}y.prototype.getBuffer=function(){for(var Q=this.bufferedRequest,W=[];Q;)W.push(Q),Q=Q.next;return W},function(){try{Object.defineProperty(y.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var S;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(S=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(Q){return S.call(this,Q)?!0:this!==M?!1:Q&&Q._writableState instanceof y}})):S=function(Q){return Q instanceof this};function M(Z){o=o||t(15316);var Q=this instanceof o;if(!Q&&!S.call(M,this))return new M(Z);this._writableState=new y(Z,this,Q),this.writable=!0,Z&&(typeof Z.write=="function"&&(this._write=Z.write),typeof Z.writev=="function"&&(this._writev=Z.writev),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.final=="function"&&(this._final=Z.final)),A.call(this)}M.prototype.pipe=function(){w(this,new T)};function a(Z,Q){var W=new d;w(Z,W),b.nextTick(Q,W)}function E(Z,Q,W,J){var it;return W===null?it=new i:typeof W!="string"&&!Q.objectMode&&(it=new u("chunk",["string","Buffer"],W)),it?(w(Z,it),b.nextTick(J,it),!1):!0}M.prototype.write=function(Z,Q,W){var J=this._writableState,it=!1,K=!J.objectMode&&e(Z);return K&&!v.isBuffer(Z)&&(Z=r(Z)),typeof Q=="function"&&(W=Q,Q=null),K?Q="buffer":Q||(Q=J.defaultEncoding),typeof W!="function"&&(W=C),J.ending?a(this,W):(K||E(this,J,Z,W))&&(J.pendingcb++,it=k(this,J,K,Z,Q,W)),it},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&N(this,Z))},M.prototype.setDefaultEncoding=function(Q){if(typeof Q=="string"&&(Q=Q.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Q+"").toLowerCase())>-1))throw new x(Q);return this._writableState.defaultEncoding=Q,this},Object.defineProperty(M.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function m(Z,Q,W){return!Z.objectMode&&Z.decodeStrings!==!1&&typeof Q=="string"&&(Q=v.from(Q,W)),Q}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function k(Z,Q,W,J,it,K){if(!W){var H=m(Q,J,it);J!==H&&(W=!0,it="buffer",J=H)}var at=Q.objectMode?1:J.length;Q.length+=at;var tt=Q.length<Q.highWaterMark;if(tt||(Q.needDrain=!0),Q.writing||Q.corked){var lt=Q.lastBufferedRequest;Q.lastBufferedRequest={chunk:J,encoding:it,isBuf:W,callback:K,next:null},lt?lt.next=Q.lastBufferedRequest:Q.bufferedRequest=Q.lastBufferedRequest,Q.bufferedRequestCount+=1}else I(Z,Q,!1,at,J,it,K);return tt}function I(Z,Q,W,J,it,K,H){Q.writelen=J,Q.writecb=H,Q.writing=!0,Q.sync=!0,Q.destroyed?Q.onwrite(new c("write")):W?Z._writev(it,Q.onwrite):Z._write(it,K,Q.onwrite),Q.sync=!1}function O(Z,Q,W,J,it){--Q.pendingcb,W?(b.nextTick(it,J),b.nextTick(et,Z,Q),Z._writableState.errorEmitted=!0,w(Z,J)):(it(J),Z._writableState.errorEmitted=!0,w(Z,J),et(Z,Q))}function z(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}function B(Z,Q){var W=Z._writableState,J=W.sync,it=W.writecb;if(typeof it!="function")throw new h;if(z(W),Q)O(Z,W,J,Q,it);else{var K=G(W)||Z.destroyed;!K&&!W.corked&&!W.bufferProcessing&&W.bufferedRequest&&N(Z,W),J?b.nextTick(F,Z,W,K,it):F(Z,W,K,it)}}function F(Z,Q,W,J){W||_(Z,Q),Q.pendingcb--,J(),et(Z,Q)}function _(Z,Q){Q.length===0&&Q.needDrain&&(Q.needDrain=!1,Z.emit("drain"))}function N(Z,Q){Q.bufferProcessing=!0;var W=Q.bufferedRequest;if(Z._writev&&W&&W.next){var J=Q.bufferedRequestCount,it=new Array(J),K=Q.corkedRequestsFree;K.entry=W;for(var H=0,at=!0;W;)it[H]=W,W.isBuf||(at=!1),W=W.next,H+=1;it.allBuffers=at,I(Z,Q,!0,Q.length,it,"",K.finish),Q.pendingcb++,Q.lastBufferedRequest=null,K.next?(Q.corkedRequestsFree=K.next,K.next=null):Q.corkedRequestsFree=new P(Q),Q.bufferedRequestCount=0}else{for(;W;){var tt=W.chunk,lt=W.encoding,dt=W.callback,mt=Q.objectMode?1:tt.length;if(I(Z,Q,!1,mt,tt,lt,dt),W=W.next,Q.bufferedRequestCount--,Q.writing)break}W===null&&(Q.lastBufferedRequest=null)}Q.bufferedRequest=W,Q.bufferProcessing=!1}M.prototype._write=function(Z,Q,W){W(new g("_write()"))},M.prototype._writev=null,M.prototype.end=function(Z,Q,W){var J=this._writableState;return typeof Z=="function"?(W=Z,Z=null,Q=null):typeof Q=="function"&&(W=Q,Q=null),Z!=null&&this.write(Z,Q),J.corked&&(J.corked=1,this.uncork()),J.ending||ot(this,J,W),this},Object.defineProperty(M.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function G(Z){return Z.ending&&Z.length===0&&Z.bufferedRequest===null&&!Z.finished&&!Z.writing}function X(Z,Q){Z._final(function(W){Q.pendingcb--,W&&w(Z,W),Q.prefinished=!0,Z.emit("prefinish"),et(Z,Q)})}function $(Z,Q){!Q.prefinished&&!Q.finalCalled&&(typeof Z._final=="function"&&!Q.destroyed?(Q.pendingcb++,Q.finalCalled=!0,b.nextTick(X,Z,Q)):(Q.prefinished=!0,Z.emit("prefinish")))}function et(Z,Q){var W=G(Q);if(W&&($(Z,Q),Q.pendingcb===0&&(Q.finished=!0,Z.emit("finish"),Q.autoDestroy))){var J=Z._readableState;(!J||J.autoDestroy&&J.endEmitted)&&Z.destroy()}return W}function ot(Z,Q,W){Q.ending=!0,et(Z,Q),W&&(Q.finished?b.nextTick(W):Z.once("finish",W)),Q.ended=!0,Z.writable=!1}function nt(Z,Q,W){var J=Z.entry;for(Z.entry=null;J;){var it=J.callback;Q.pendingcb--,it(W),J=J.next}Q.corkedRequestsFree.next=Z}Object.defineProperty(M.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Q){this._writableState&&(this._writableState.destroyed=Q)}}),M.prototype.destroy=s.destroy,M.prototype._undestroy=s.undestroy,M.prototype._destroy=function(Z,Q){Q(Z)}},60328:function(j,V,t){var b=t(4168),P;function o(i,d,x){return d in i?Object.defineProperty(i,d,{value:x,enumerable:!0,configurable:!0,writable:!0}):i[d]=x,i}var L=t(15932),A=Symbol("lastResolve"),v=Symbol("lastReject"),p=Symbol("error"),r=Symbol("ended"),e=Symbol("lastPromise"),s=Symbol("handlePromise"),n=Symbol("stream");function l(i,d){return{value:i,done:d}}function f(i){var d=i[A];if(d!==null){var x=i[n].read();x!==null&&(i[e]=null,i[A]=null,i[v]=null,d(l(x,!1)))}}function u(i){b.nextTick(f,i)}function g(i,d){return function(x,w){i.then(function(){if(d[r]){x(l(void 0,!0));return}d[s](x,w)},w)}}var h=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((P={get stream(){return this[n]},next:function(){var d=this,x=this[p];if(x!==null)return Promise.reject(x);if(this[r])return Promise.resolve(l(void 0,!0));if(this[n].destroyed)return new Promise(function(S,M){b.nextTick(function(){d[p]?M(d[p]):S(l(void 0,!0))})});var w=this[e],C;if(w)C=new Promise(g(w,this));else{var y=this[n].read();if(y!==null)return Promise.resolve(l(y,!1));C=new Promise(this[s])}return this[e]=C,C}},o(P,Symbol.asyncIterator,function(){return this}),o(P,"return",function(){var d=this;return new Promise(function(x,w){d[n].destroy(null,function(C){if(C){w(C);return}x(l(void 0,!0))})})}),P),h),c=function(d){var x,w=Object.create(T,(x={},o(x,n,{value:d,writable:!0}),o(x,A,{value:null,writable:!0}),o(x,v,{value:null,writable:!0}),o(x,p,{value:null,writable:!0}),o(x,r,{value:d._readableState.endEmitted,writable:!0}),o(x,s,{value:function(y,S){var M=w[n].read();M?(w[e]=null,w[A]=null,w[v]=null,y(l(M,!1))):(w[A]=y,w[v]=S)},writable:!0}),x));return w[e]=null,L(d,function(C){if(C&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"){var y=w[v];y!==null&&(w[e]=null,w[A]=null,w[v]=null,y(C)),w[p]=C;return}var S=w[A];S!==null&&(w[e]=null,w[A]=null,w[v]=null,S(l(void 0,!0))),w[r]=!0}),d.on("readable",u.bind(null,w)),w};j.exports=c},47264:function(j,V,t){function b(f,u){var g=Object.keys(f);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(f);u&&(h=h.filter(function(T){return Object.getOwnPropertyDescriptor(f,T).enumerable})),g.push.apply(g,h)}return g}function P(f){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?b(Object(g),!0).forEach(function(h){o(f,h,g[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(g)):b(Object(g)).forEach(function(h){Object.defineProperty(f,h,Object.getOwnPropertyDescriptor(g,h))})}return f}function o(f,u,g){return u in f?Object.defineProperty(f,u,{value:g,enumerable:!0,configurable:!0,writable:!0}):f[u]=g,f}function L(f,u){if(!(f instanceof u))throw new TypeError("Cannot call a class as a function")}function A(f,u){for(var g=0;g<u.length;g++){var h=u[g];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(f,h.key,h)}}function v(f,u,g){return u&&A(f.prototype,u),f}var p=t(33576),r=p.Buffer,e=t(21576),s=e.inspect,n=s&&s.custom||"inspect";function l(f,u,g){r.prototype.copy.call(f,u,g)}j.exports=function(){function f(){L(this,f),this.head=null,this.tail=null,this.length=0}return v(f,[{key:"push",value:function(g){var h={data:g,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(g){var h={data:g,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var g=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,g}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(g){if(this.length===0)return"";for(var h=this.head,T=""+h.data;h=h.next;)T+=g+h.data;return T}},{key:"concat",value:function(g){if(this.length===0)return r.alloc(0);for(var h=r.allocUnsafe(g>>>0),T=this.head,c=0;T;)l(T.data,h,c),c+=T.data.length,T=T.next;return h}},{key:"consume",value:function(g,h){var T;return g<this.head.data.length?(T=this.head.data.slice(0,g),this.head.data=this.head.data.slice(g)):g===this.head.data.length?T=this.shift():T=h?this._getString(g):this._getBuffer(g),T}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(g){var h=this.head,T=1,c=h.data;for(g-=c.length;h=h.next;){var i=h.data,d=g>i.length?i.length:g;if(d===i.length?c+=i:c+=i.slice(0,g),g-=d,g===0){d===i.length?(++T,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=i.slice(d));break}++T}return this.length-=T,c}},{key:"_getBuffer",value:function(g){var h=r.allocUnsafe(g),T=this.head,c=1;for(T.data.copy(h),g-=T.data.length;T=T.next;){var i=T.data,d=g>i.length?i.length:g;if(i.copy(h,h.length-g,0,d),g-=d,g===0){d===i.length?(++c,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=i.slice(d));break}++c}return this.length-=c,h}},{key:n,value:function(g,h){return s(this,P({},h,{depth:0,customInspect:!1}))}}]),f}()},55324:function(j,V,t){var b=t(4168);function P(r,e){var s=this,n=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return n||l?(e?e(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,b.nextTick(v,this,r)):b.nextTick(v,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(f){!e&&f?s._writableState?s._writableState.errorEmitted?b.nextTick(L,s):(s._writableState.errorEmitted=!0,b.nextTick(o,s,f)):b.nextTick(o,s,f):e?(b.nextTick(L,s),e(f)):b.nextTick(L,s)}),this)}function o(r,e){v(r,e),L(r)}function L(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function A(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function v(r,e){r.emit("error",e)}function p(r,e){var s=r._readableState,n=r._writableState;s&&s.autoDestroy||n&&n.autoDestroy?r.destroy(e):r.emit("error",e)}j.exports={destroy:P,undestroy:A,errorOrDestroy:p}},15932:function(j,V,t){var b=t(92784).i.ERR_STREAM_PREMATURE_CLOSE;function P(v){var p=!1;return function(){if(!p){p=!0;for(var r=arguments.length,e=new Array(r),s=0;s<r;s++)e[s]=arguments[s];v.apply(this,e)}}}function o(){}function L(v){return v.setHeader&&typeof v.abort=="function"}function A(v,p,r){if(typeof p=="function")return A(v,null,p);p||(p={}),r=P(r||o);var e=p.readable||p.readable!==!1&&v.readable,s=p.writable||p.writable!==!1&&v.writable,n=function(){v.writable||f()},l=v._writableState&&v._writableState.finished,f=function(){s=!1,l=!0,e||r.call(v)},u=v._readableState&&v._readableState.endEmitted,g=function(){e=!1,u=!0,s||r.call(v)},h=function(d){r.call(v,d)},T=function(){var d;if(e&&!u)return(!v._readableState||!v._readableState.ended)&&(d=new b),r.call(v,d);if(s&&!l)return(!v._writableState||!v._writableState.ended)&&(d=new b),r.call(v,d)},c=function(){v.req.on("finish",f)};return L(v)?(v.on("complete",f),v.on("abort",T),v.req?c():v.on("request",c)):s&&!v._writableState&&(v.on("end",n),v.on("close",n)),v.on("end",g),v.on("finish",f),p.error!==!1&&v.on("error",h),v.on("close",T),function(){v.removeListener("complete",f),v.removeListener("abort",T),v.removeListener("request",c),v.req&&v.req.removeListener("finish",f),v.removeListener("end",n),v.removeListener("close",n),v.removeListener("finish",f),v.removeListener("end",g),v.removeListener("error",h),v.removeListener("close",T)}}j.exports=A},90555:function(j){j.exports=function(){throw new Error("Readable.from is not available in the browser")}},38180:function(j,V,t){var b;function P(f){var u=!1;return function(){u||(u=!0,f.apply(void 0,arguments))}}var o=t(92784).i,L=o.ERR_MISSING_ARGS,A=o.ERR_STREAM_DESTROYED;function v(f){if(f)throw f}function p(f){return f.setHeader&&typeof f.abort=="function"}function r(f,u,g,h){h=P(h);var T=!1;f.on("close",function(){T=!0}),b===void 0&&(b=t(15932)),b(f,{readable:u,writable:g},function(i){if(i)return h(i);T=!0,h()});var c=!1;return function(i){if(!T&&!c){if(c=!0,p(f))return f.abort();if(typeof f.destroy=="function")return f.destroy();h(i||new A("pipe"))}}}function e(f){f()}function s(f,u){return f.pipe(u)}function n(f){return!f.length||typeof f[f.length-1]!="function"?v:f.pop()}function l(){for(var f=arguments.length,u=new Array(f),g=0;g<f;g++)u[g]=arguments[g];var h=n(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new L("streams");var T,c=u.map(function(i,d){var x=d<u.length-1,w=d>0;return r(i,x,w,function(C){T||(T=C),C&&c.forEach(e),!x&&(c.forEach(e),h(T))})});return u.reduce(s)}j.exports=l},24888:function(j,V,t){var b=t(92784).i.ERR_INVALID_OPT_VALUE;function P(L,A,v){return L.highWaterMark!=null?L.highWaterMark:A?L[v]:null}function o(L,A,v,p){var r=P(A,p,v);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var e=p?v:"highWaterMark";throw new b(e,r)}return Math.floor(r)}return L.objectMode?16:16384}j.exports={getHighWaterMark:o}},4776:function(j,V,t){j.exports=t(61252).EventEmitter},86032:function(j,V,t){var b=t(30456).Buffer,P=b.isEncoding||function(c){switch(c=""+c,c&&c.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(c){if(!c)return"utf8";for(var i;;)switch(c){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return c;default:if(i)return;c=(""+c).toLowerCase(),i=!0}}function L(c){var i=o(c);if(typeof i!="string"&&(b.isEncoding===P||!P(c)))throw new Error("Unknown encoding: "+c);return i||c}V.o=A;function A(c){this.encoding=L(c);var i;switch(this.encoding){case"utf16le":this.text=l,this.end=f,i=4;break;case"utf8":this.fillLast=e,i=4;break;case"base64":this.text=u,this.end=g,i=3;break;default:this.write=h,this.end=T;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(i)}A.prototype.write=function(c){if(c.length===0)return"";var i,d;if(this.lastNeed){if(i=this.fillLast(c),i===void 0)return"";d=this.lastNeed,this.lastNeed=0}else d=0;return d<c.length?i?i+this.text(c,d):this.text(c,d):i||""},A.prototype.end=n,A.prototype.text=s,A.prototype.fillLast=function(c){if(this.lastNeed<=c.length)return c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,this.lastTotal-this.lastNeed,0,c.length),this.lastNeed-=c.length};function v(c){return c<=127?0:c>>5===6?2:c>>4===14?3:c>>3===30?4:c>>6===2?-1:-2}function p(c,i,d){var x=i.length-1;if(x<d)return 0;var w=v(i[x]);return w>=0?(w>0&&(c.lastNeed=w-1),w):--x<d||w===-2?0:(w=v(i[x]),w>=0?(w>0&&(c.lastNeed=w-2),w):--x<d||w===-2?0:(w=v(i[x]),w>=0?(w>0&&(w===2?w=0:c.lastNeed=w-3),w):0))}function r(c,i,d){if((i[0]&192)!==128)return c.lastNeed=0,"�";if(c.lastNeed>1&&i.length>1){if((i[1]&192)!==128)return c.lastNeed=1,"�";if(c.lastNeed>2&&i.length>2&&(i[2]&192)!==128)return c.lastNeed=2,"�"}}function e(c){var i=this.lastTotal-this.lastNeed,d=r(this,c);if(d!==void 0)return d;if(this.lastNeed<=c.length)return c.copy(this.lastChar,i,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);c.copy(this.lastChar,i,0,c.length),this.lastNeed-=c.length}function s(c,i){var d=p(this,c,i);if(!this.lastNeed)return c.toString("utf8",i);this.lastTotal=d;var x=c.length-(d-this.lastNeed);return c.copy(this.lastChar,0,x),c.toString("utf8",i,x)}function n(c){var i=c&&c.length?this.write(c):"";return this.lastNeed?i+"�":i}function l(c,i){if((c.length-i)%2===0){var d=c.toString("utf16le",i);if(d){var x=d.charCodeAt(d.length-1);if(x>=55296&&x<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1],d.slice(0,-1)}return d}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=c[c.length-1],c.toString("utf16le",i,c.length-1)}function f(c){var i=c&&c.length?this.write(c):"";if(this.lastNeed){var d=this.lastTotal-this.lastNeed;return i+this.lastChar.toString("utf16le",0,d)}return i}function u(c,i){var d=(c.length-i)%3;return d===0?c.toString("base64",i):(this.lastNeed=3-d,this.lastTotal=3,d===1?this.lastChar[0]=c[c.length-1]:(this.lastChar[0]=c[c.length-2],this.lastChar[1]=c[c.length-1]),c.toString("base64",i,c.length-d))}function g(c){var i=c&&c.length?this.write(c):"";return this.lastNeed?i+this.lastChar.toString("base64",0,3-this.lastNeed):i}function h(c){return c.toString(this.encoding)}function T(c){return c&&c.length?this.write(c):""}},55619:function(j,V,t){var b=t(45408),P=t(86844)("stream-parser");j.exports=p;var o=-1,L=0,A=1,v=2;function p(c){var i=c&&typeof c._transform=="function",d=c&&typeof c._write=="function";if(!i&&!d)throw new Error("must pass a Writable or Transform stream in");P("extending Parser into stream"),c._bytes=e,c._skipBytes=s,i&&(c._passthrough=n),i?c._transform=f:c._write=l}function r(c){P("initializing parser stream"),c._parserBytesLeft=0,c._parserBuffers=[],c._parserBuffered=0,c._parserState=o,c._parserCallback=null,typeof c.push=="function"&&(c._parserOutput=c.push.bind(c)),c._parserInit=!0}function e(c,i){b(!this._parserCallback,'there is already a "callback" set!'),b(isFinite(c)&&c>0,'can only buffer a finite number of bytes > 0, got "'+c+'"'),this._parserInit||r(this),P("buffering %o bytes",c),this._parserBytesLeft=c,this._parserCallback=i,this._parserState=L}function s(c,i){b(!this._parserCallback,'there is already a "callback" set!'),b(c>0,'can only skip > 0 bytes, got "'+c+'"'),this._parserInit||r(this),P("skipping %o bytes",c),this._parserBytesLeft=c,this._parserCallback=i,this._parserState=A}function n(c,i){b(!this._parserCallback,'There is already a "callback" set!'),b(c>0,'can only pass through > 0 bytes, got "'+c+'"'),this._parserInit||r(this),P("passing through %o bytes",c),this._parserBytesLeft=c,this._parserCallback=i,this._parserState=v}function l(c,i,d){this._parserInit||r(this),P("write(%o bytes)",c.length),typeof i=="function"&&(d=i),h(this,c,null,d)}function f(c,i,d){this._parserInit||r(this),P("transform(%o bytes)",c.length),typeof i!="function"&&(i=this._parserOutput),h(this,c,i,d)}function u(c,i,d,x){return c._parserBytesLeft<=0?x(new Error("got data but not currently parsing anything")):i.length<=c._parserBytesLeft?function(){return g(c,i,d,x)}:function(){var w=i.slice(0,c._parserBytesLeft);return g(c,w,d,function(C){if(C)return x(C);if(i.length>w.length)return function(){return u(c,i.slice(w.length),d,x)}})}}function g(c,i,d,x){if(c._parserBytesLeft-=i.length,P("%o bytes left for stream piece",c._parserBytesLeft),c._parserState===L?(c._parserBuffers.push(i),c._parserBuffered+=i.length):c._parserState===v&&d(i),c._parserBytesLeft===0){var w=c._parserCallback;if(w&&c._parserState===L&&c._parserBuffers.length>1&&(i=Buffer.concat(c._parserBuffers,c._parserBuffered)),c._parserState!==L&&(i=null),c._parserCallback=null,c._parserBuffered=0,c._parserState=o,c._parserBuffers.splice(0),w){var C=[];i&&C.push(i),d&&C.push(d);var y=w.length>C.length;y&&C.push(T(x));var S=w.apply(c,C);if(!y||x===S)return x}}else return x}var h=T(u);function T(c){return function(){for(var i=c.apply(this,arguments);typeof i=="function";)i=i();return i}}},86844:function(j,V,t){var b=t(4168);V=j.exports=t(89416),V.log=L,V.formatArgs=o,V.save=A,V.load=v,V.useColors=P,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:p(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function P(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}};function o(r){var e=this.useColors;if(r[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+r[0]+(e?"%c ":" ")+"+"+V.humanize(this.diff),!!e){var s="color: "+this.color;r.splice(1,0,s,"color: inherit");var n=0,l=0;r[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(n++,f==="%c"&&(l=n))}),r.splice(l,0,s)}}function L(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function A(r){try{r==null?V.storage.removeItem("debug"):V.storage.debug=r}catch{}}function v(){var r;try{r=V.storage.debug}catch{}return!r&&typeof b<"u"&&"env"in b&&(r=b.env.DEBUG),r}V.enable(v());function p(){try{return window.localStorage}catch{}}},89416:function(j,V,t){V=j.exports=o.debug=o.default=o,V.coerce=p,V.disable=A,V.enable=L,V.enabled=v,V.humanize=t(93744),V.names=[],V.skips=[],V.formatters={};var b;function P(r){var e=0,s;for(s in r)e=(e<<5)-e+r.charCodeAt(s),e|=0;return V.colors[Math.abs(e)%V.colors.length]}function o(r){function e(){if(e.enabled){var s=e,n=+new Date,l=n-(b||n);s.diff=l,s.prev=b,s.curr=n,b=n;for(var f=new Array(arguments.length),u=0;u<f.length;u++)f[u]=arguments[u];f[0]=V.coerce(f[0]),typeof f[0]!="string"&&f.unshift("%O");var g=0;f[0]=f[0].replace(/%([a-zA-Z%])/g,function(T,c){if(T==="%%")return T;g++;var i=V.formatters[c];if(typeof i=="function"){var d=f[g];T=i.call(s,d),f.splice(g,1),g--}return T}),V.formatArgs.call(s,f);var h=e.log||V.log||console.log.bind(console);h.apply(s,f)}}return e.namespace=r,e.enabled=V.enabled(r),e.useColors=V.useColors(),e.color=P(r),typeof V.init=="function"&&V.init(e),e}function L(r){V.save(r),V.names=[],V.skips=[];for(var e=(typeof r=="string"?r:"").split(/[\s,]+/),s=e.length,n=0;n<s;n++)e[n]&&(r=e[n].replace(/\*/g,".*?"),r[0]==="-"?V.skips.push(new RegExp("^"+r.substr(1)+"$")):V.names.push(new RegExp("^"+r+"$")))}function A(){V.enable("")}function v(r){var e,s;for(e=0,s=V.skips.length;e<s;e++)if(V.skips[e].test(r))return!1;for(e=0,s=V.names.length;e<s;e++)if(V.names[e].test(r))return!0;return!1}function p(r){return r instanceof Error?r.stack||r.message:r}},93744:function(j){var V=1e3,t=V*60,b=t*60,P=b*24,o=P*365.25;j.exports=function(r,e){e=e||{};var s=typeof r;if(s==="string"&&r.length>0)return L(r);if(s==="number"&&isNaN(r)===!1)return e.long?v(r):A(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function L(r){if(r=String(r),!(r.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(e){var s=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*P;case"hours":case"hour":case"hrs":case"hr":case"h":return s*b;case"minutes":case"minute":case"mins":case"min":case"m":return s*t;case"seconds":case"second":case"secs":case"sec":case"s":return s*V;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}function A(r){return r>=P?Math.round(r/P)+"d":r>=b?Math.round(r/b)+"h":r>=t?Math.round(r/t)+"m":r>=V?Math.round(r/V)+"s":r+"ms"}function v(r){return p(r,P,"day")||p(r,b,"hour")||p(r,t,"minute")||p(r,V,"second")||r+" ms"}function p(r,e,s){if(!(r<e))return r<e*1.5?Math.floor(r/e)+" "+s:Math.ceil(r/e)+" "+s+"s"}},39956:function(j,V,t){var b=t(32868);j.exports=function(o,L,A){if(o==null)throw Error("First argument should be a string");if(L==null)throw Error("Separator should be a string or a RegExp");A?(typeof A=="string"||Array.isArray(A))&&(A={ignore:A}):A={},A.escape==null&&(A.escape=!0),A.ignore==null?A.ignore=["[]","()","{}","<>",'""',"''","``","“”","«»"]:(typeof A.ignore=="string"&&(A.ignore=[A.ignore]),A.ignore=A.ignore.map(function(f){return f.length===1&&(f=f+f),f}));var v=b.parse(o,{flat:!0,brackets:A.ignore}),p=v[0],r=p.split(L);if(A.escape){for(var e=[],s=0;s<r.length;s++){var n=r[s],l=r[s+1];n[n.length-1]==="\\"&&n[n.length-2]!=="\\"?(e.push(n+L+l),s++):e.push(n)}r=e}for(var s=0;s<r.length;s++)v[0]=r[s],r[s]=b.stringify(v,{flat:!0});return r}},78484:function(j){j.exports=V;function V(t){for(var b=t.length,P=new Array(b),o=new Array(b),L=new Array(b),A=new Array(b),v=new Array(b),p=new Array(b),r=0;r<b;++r)P[r]=-1,o[r]=0,L[r]=!1,A[r]=0,v[r]=-1,p[r]=[];var e=0,s=[],n=[];function l(h){var T=[h],c=[h];for(P[h]=o[h]=e,L[h]=!0,e+=1;c.length>0;){h=c[c.length-1];var i=t[h];if(A[h]<i.length){for(var d=A[h];d<i.length;++d){var x=i[d];if(P[x]<0){P[x]=o[x]=e,L[x]=!0,e+=1,T.push(x),c.push(x);break}else L[x]&&(o[h]=Math.min(o[h],o[x])|0);v[x]>=0&&p[h].push(v[x])}A[h]=d}else{if(o[h]===P[h]){for(var w=[],C=[],y=0,d=T.length-1;d>=0;--d){var S=T[d];if(L[S]=!1,w.push(S),C.push(p[S]),y+=p[S].length,v[S]=s.length,S===h){T.length=d;break}}s.push(w);for(var M=new Array(y),d=0;d<C.length;d++)for(var a=0;a<C[d].length;a++)M[--y]=C[d][a];n.push(M)}c.pop()}}}for(var r=0;r<b;++r)P[r]<0&&l(r);for(var f,r=0;r<n.length;r++){var u=n[r];if(u.length!==0){u.sort(function(T,c){return T-c}),f=[u[0]];for(var g=1;g<u.length;g++)u[g]!==u[g-1]&&f.push(u[g]);n[r]=f}}return{components:s,adjacencyList:n}}},92848:function(j,V,t){t.r(V);var b=function(){function r(e,s){var n=[],l=!0,f=!1,u=void 0;try{for(var g=e[Symbol.iterator](),h;!(l=(h=g.next()).done)&&(n.push(h.value),!(s&&n.length===s));l=!0);}catch(T){f=!0,u=T}finally{try{!l&&g.return&&g.return()}finally{if(f)throw u}}return n}return function(e,s){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return r(e,s);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),P=Math.PI*2,o=function(e,s,n,l,f,u,g){var h=e.x,T=e.y;h*=s,T*=n;var c=l*h-f*T,i=f*h+l*T;return{x:c+u,y:i+g}},L=function(e,s){var n=s===1.5707963267948966?.551915024494:s===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(s/4),l=Math.cos(e),f=Math.sin(e),u=Math.cos(e+s),g=Math.sin(e+s);return[{x:l-f*n,y:f+l*n},{x:u+g*n,y:g-u*n},{x:u,y:g}]},A=function(e,s,n,l){var f=e*l-s*n<0?-1:1,u=e*n+s*l;return u>1&&(u=1),u<-1&&(u=-1),f*Math.acos(u)},v=function(e,s,n,l,f,u,g,h,T,c,i,d){var x=Math.pow(f,2),w=Math.pow(u,2),C=Math.pow(i,2),y=Math.pow(d,2),S=x*w-x*y-w*C;S<0&&(S=0),S/=x*y+w*C,S=Math.sqrt(S)*(g===h?-1:1);var M=S*f/u*d,a=S*-u/f*i,E=c*M-T*a+(e+n)/2,m=T*M+c*a+(s+l)/2,k=(i-M)/f,I=(d-a)/u,O=(-i-M)/f,z=(-d-a)/u,B=A(1,0,k,I),F=A(k,I,O,z);return h===0&&F>0&&(F-=P),h===1&&F<0&&(F+=P),[E,m,B,F]},p=function(e){var s=e.px,n=e.py,l=e.cx,f=e.cy,u=e.rx,g=e.ry,h=e.xAxisRotation,T=h===void 0?0:h,c=e.largeArcFlag,i=c===void 0?0:c,d=e.sweepFlag,x=d===void 0?0:d,w=[];if(u===0||g===0)return[];var C=Math.sin(T*P/360),y=Math.cos(T*P/360),S=y*(s-l)/2+C*(n-f)/2,M=-C*(s-l)/2+y*(n-f)/2;if(S===0&&M===0)return[];u=Math.abs(u),g=Math.abs(g);var a=Math.pow(S,2)/Math.pow(u,2)+Math.pow(M,2)/Math.pow(g,2);a>1&&(u*=Math.sqrt(a),g*=Math.sqrt(a));var E=v(s,n,l,f,u,g,i,x,C,y,S,M),m=b(E,4),k=m[0],I=m[1],O=m[2],z=m[3],B=Math.abs(z)/(P/4);Math.abs(1-B)<1e-7&&(B=1);var F=Math.max(Math.ceil(B),1);z/=F;for(var _=0;_<F;_++)w.push(L(O,z)),O+=z;return w.map(function(N){var G=o(N[0],u,g,y,C,k,I),X=G.x,$=G.y,et=o(N[1],u,g,y,C,k,I),ot=et.x,nt=et.y,Z=o(N[2],u,g,y,C,k,I),Q=Z.x,W=Z.y;return{x1:X,y1:$,x2:ot,y2:nt,x:Q,y:W}})};V.default=p},74840:function(j,V,t){var b=t(21984),P=t(49972),o=t(41976),L=t(53520),A=t(45408);j.exports=v;function v(p){if(Array.isArray(p)&&p.length===1&&typeof p[0]=="string"&&(p=p[0]),typeof p=="string"&&(A(L(p),"String is not an SVG path."),p=b(p)),A(Array.isArray(p),"Argument should be a string or an array of path segments."),p=P(p),p=o(p),!p.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],e=0,s=p.length;e<s;e++)for(var n=p[e].slice(1),l=0;l<n.length;l+=2)n[l+0]<r[0]&&(r[0]=n[l+0]),n[l+1]<r[1]&&(r[1]=n[l+1]),n[l+0]>r[2]&&(r[2]=n[l+0]),n[l+1]>r[3]&&(r[3]=n[l+1]);return r}},41976:function(j,V,t){j.exports=P;var b=t(92848);function P(A){for(var v,p=[],r=0,e=0,s=0,n=0,l=null,f=null,u=0,g=0,h=0,T=A.length;h<T;h++){var c=A[h],i=c[0];switch(i){case"M":s=c[1],n=c[2];break;case"A":var d=b({px:u,py:g,cx:c[6],cy:c[7],rx:c[1],ry:c[2],xAxisRotation:c[3],largeArcFlag:c[4],sweepFlag:c[5]});if(!d.length)continue;for(var x=0,w;x<d.length;x++)w=d[x],c=["C",w.x1,w.y1,w.x2,w.y2,w.x,w.y],x<d.length-1&&p.push(c);break;case"S":var C=u,y=g;(v=="C"||v=="S")&&(C+=C-r,y+=y-e),c=["C",C,y,c[1],c[2],c[3],c[4]];break;case"T":v=="Q"||v=="T"?(l=u*2-l,f=g*2-f):(l=u,f=g),c=L(u,g,l,f,c[1],c[2]);break;case"Q":l=c[1],f=c[2],c=L(u,g,c[1],c[2],c[3],c[4]);break;case"L":c=o(u,g,c[1],c[2]);break;case"H":c=o(u,g,c[1],g);break;case"V":c=o(u,g,u,c[1]);break;case"Z":c=o(u,g,s,n);break}v=i,u=c[c.length-2],g=c[c.length-1],c.length>4?(r=c[c.length-4],e=c[c.length-3]):(r=u,e=g),p.push(c)}return p}function o(A,v,p,r){return["C",A,v,p,r,p,r]}function L(A,v,p,r,e,s){return["C",A/3+.6666666666666666*p,v/3+.6666666666666666*r,e/3+.6666666666666666*p,s/3+.6666666666666666*r,e,s]}},20472:function(j,V,t){var b=t(74840),P=t(21984),o=t(22235),L=t(53520),A=t(29620),v=document.createElement("canvas"),p=v.getContext("2d");j.exports=r;function r(n,l){if(!L(n))throw Error("Argument should be valid svg path string");l||(l={});var f,u;l.shape?(f=l.shape[0],u=l.shape[1]):(f=v.width=l.w||l.width||200,u=v.height=l.h||l.height||200);var g=Math.min(f,u),h=l.stroke||0,T=l.viewbox||l.viewBox||b(n),c=[f/(T[2]-T[0]),u/(T[3]-T[1])],i=Math.min(c[0]||0,c[1]||0)/2;if(p.fillStyle="black",p.fillRect(0,0,f,u),p.fillStyle="white",h&&(typeof h!="number"&&(h=1),h>0?p.strokeStyle="white":p.strokeStyle="black",p.lineWidth=Math.abs(h)),p.translate(f*.5,u*.5),p.scale(i,i),s()){var d=new Path2D(n);p.fill(d),h&&p.stroke(d)}else{var x=P(n);o(p,x),p.fill(),h&&p.stroke()}p.setTransform(1,0,0,1,0,0);var w=A(p,{cutoff:l.cutoff!=null?l.cutoff:.5,radius:l.radius!=null?l.radius:g*.5});return w}var e;function s(){if(e!=null)return e;var n=document.createElement("canvas").getContext("2d");if(n.canvas.width=n.canvas.height=1,!window.Path2D)return e=!1;var l=new Path2D("M0,0h1v1h-1v-1Z");n.fillStyle="black",n.fill(l);var f=n.getImageData(0,0,1,1);return e=f&&f.data&&f.data[3]===255}},49760:function(j,V,t){var b;(function(P){var o=/^\s+/,L=/\s+$/,A=0,v=P.round,p=P.min,r=P.max,e=P.random;function s(H,at){if(H=H||"",at=at||{},H instanceof s)return H;if(!(this instanceof s))return new s(H,at);var tt=n(H);this._originalInput=H,this._r=tt.r,this._g=tt.g,this._b=tt.b,this._a=tt.a,this._roundA=v(100*this._a)/100,this._format=at.format||tt.format,this._gradientType=at.gradientType,this._r<1&&(this._r=v(this._r)),this._g<1&&(this._g=v(this._g)),this._b<1&&(this._b=v(this._b)),this._ok=tt.ok,this._tc_id=A++}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var H=this.toRgb();return(H.r*299+H.g*587+H.b*114)/1e3},getLuminance:function(){var H=this.toRgb(),at,tt,lt,dt,mt,gt;return at=H.r/255,tt=H.g/255,lt=H.b/255,at<=.03928?dt=at/12.92:dt=P.pow((at+.055)/1.055,2.4),tt<=.03928?mt=tt/12.92:mt=P.pow((tt+.055)/1.055,2.4),lt<=.03928?gt=lt/12.92:gt=P.pow((lt+.055)/1.055,2.4),.2126*dt+.7152*mt+.0722*gt},setAlpha:function(H){return this._a=_(H),this._roundA=v(100*this._a)/100,this},toHsv:function(){var H=g(this._r,this._g,this._b);return{h:H.h*360,s:H.s,v:H.v,a:this._a}},toHsvString:function(){var H=g(this._r,this._g,this._b),at=v(H.h*360),tt=v(H.s*100),lt=v(H.v*100);return this._a==1?"hsv("+at+", "+tt+"%, "+lt+"%)":"hsva("+at+", "+tt+"%, "+lt+"%, "+this._roundA+")"},toHsl:function(){var H=f(this._r,this._g,this._b);return{h:H.h*360,s:H.s,l:H.l,a:this._a}},toHslString:function(){var H=f(this._r,this._g,this._b),at=v(H.h*360),tt=v(H.s*100),lt=v(H.l*100);return this._a==1?"hsl("+at+", "+tt+"%, "+lt+"%)":"hsla("+at+", "+tt+"%, "+lt+"%, "+this._roundA+")"},toHex:function(H){return T(this._r,this._g,this._b,H)},toHexString:function(H){return"#"+this.toHex(H)},toHex8:function(H){return c(this._r,this._g,this._b,this._a,H)},toHex8String:function(H){return"#"+this.toHex8(H)},toRgb:function(){return{r:v(this._r),g:v(this._g),b:v(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+v(this._r)+", "+v(this._g)+", "+v(this._b)+")":"rgba("+v(this._r)+", "+v(this._g)+", "+v(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:v(N(this._r,255)*100)+"%",g:v(N(this._g,255)*100)+"%",b:v(N(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+v(N(this._r,255)*100)+"%, "+v(N(this._g,255)*100)+"%, "+v(N(this._b,255)*100)+"%)":"rgba("+v(N(this._r,255)*100)+"%, "+v(N(this._g,255)*100)+"%, "+v(N(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:B[T(this._r,this._g,this._b,!0)]||!1},toFilter:function(H){var at="#"+i(this._r,this._g,this._b,this._a),tt=at,lt=this._gradientType?"GradientType = 1, ":"";if(H){var dt=s(H);tt="#"+i(dt._r,dt._g,dt._b,dt._a)}return"progid:DXImageTransform.Microsoft.gradient("+lt+"startColorstr="+at+",endColorstr="+tt+")"},toString:function(H){var at=!!H;H=H||this._format;var tt=!1,lt=this._a<1&&this._a>=0,dt=!at&&lt&&(H==="hex"||H==="hex6"||H==="hex3"||H==="hex4"||H==="hex8"||H==="name");return dt?H==="name"&&this._a===0?this.toName():this.toRgbString():(H==="rgb"&&(tt=this.toRgbString()),H==="prgb"&&(tt=this.toPercentageRgbString()),(H==="hex"||H==="hex6")&&(tt=this.toHexString()),H==="hex3"&&(tt=this.toHexString(!0)),H==="hex4"&&(tt=this.toHex8String(!0)),H==="hex8"&&(tt=this.toHex8String()),H==="name"&&(tt=this.toName()),H==="hsl"&&(tt=this.toHslString()),H==="hsv"&&(tt=this.toHsvString()),tt||this.toHexString())},clone:function(){return s(this.toString())},_applyModification:function(H,at){var tt=H.apply(null,[this].concat([].slice.call(at)));return this._r=tt._r,this._g=tt._g,this._b=tt._b,this.setAlpha(tt._a),this},lighten:function(){return this._applyModification(C,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(x,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(M,arguments)},_applyCombination:function(H,at){return H.apply(null,[this].concat([].slice.call(at)))},analogous:function(){return this._applyCombination(I,arguments)},complement:function(){return this._applyCombination(a,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(m,arguments)}},s.fromRatio=function(H,at){if(typeof H=="object"){var tt={};for(var lt in H)H.hasOwnProperty(lt)&&(lt==="a"?tt[lt]=H[lt]:tt[lt]=nt(H[lt]));H=tt}return s(H,at)};function n(H){var at={r:0,g:0,b:0},tt=1,lt=null,dt=null,mt=null,gt=!1,Mt=!1;return typeof H=="string"&&(H=it(H)),typeof H=="object"&&(J(H.r)&&J(H.g)&&J(H.b)?(at=l(H.r,H.g,H.b),gt=!0,Mt=String(H.r).substr(-1)==="%"?"prgb":"rgb"):J(H.h)&&J(H.s)&&J(H.v)?(lt=nt(H.s),dt=nt(H.v),at=h(H.h,lt,dt),gt=!0,Mt="hsv"):J(H.h)&&J(H.s)&&J(H.l)&&(lt=nt(H.s),mt=nt(H.l),at=u(H.h,lt,mt),gt=!0,Mt="hsl"),H.hasOwnProperty("a")&&(tt=H.a)),tt=_(tt),{ok:gt,format:H.format||Mt,r:p(255,r(at.r,0)),g:p(255,r(at.g,0)),b:p(255,r(at.b,0)),a:tt}}function l(H,at,tt){return{r:N(H,255)*255,g:N(at,255)*255,b:N(tt,255)*255}}function f(H,at,tt){H=N(H,255),at=N(at,255),tt=N(tt,255);var lt=r(H,at,tt),dt=p(H,at,tt),mt,gt,Mt=(lt+dt)/2;if(lt==dt)mt=gt=0;else{var Lt=lt-dt;switch(gt=Mt>.5?Lt/(2-lt-dt):Lt/(lt+dt),lt){case H:mt=(at-tt)/Lt+(at<tt?6:0);break;case at:mt=(tt-H)/Lt+2;break;case tt:mt=(H-at)/Lt+4;break}mt/=6}return{h:mt,s:gt,l:Mt}}function u(H,at,tt){var lt,dt,mt;H=N(H,360),at=N(at,100),tt=N(tt,100);function gt(zt,xt,Ct){return Ct<0&&(Ct+=1),Ct>1&&(Ct-=1),Ct<.16666666666666666?zt+(xt-zt)*6*Ct:Ct<.5?xt:Ct<.6666666666666666?zt+(xt-zt)*(.6666666666666666-Ct)*6:zt}if(at===0)lt=dt=mt=tt;else{var Mt=tt<.5?tt*(1+at):tt+at-tt*at,Lt=2*tt-Mt;lt=gt(Lt,Mt,H+.3333333333333333),dt=gt(Lt,Mt,H),mt=gt(Lt,Mt,H-.3333333333333333)}return{r:lt*255,g:dt*255,b:mt*255}}function g(H,at,tt){H=N(H,255),at=N(at,255),tt=N(tt,255);var lt=r(H,at,tt),dt=p(H,at,tt),mt,gt,Mt=lt,Lt=lt-dt;if(gt=lt===0?0:Lt/lt,lt==dt)mt=0;else{switch(lt){case H:mt=(at-tt)/Lt+(at<tt?6:0);break;case at:mt=(tt-H)/Lt+2;break;case tt:mt=(H-at)/Lt+4;break}mt/=6}return{h:mt,s:gt,v:Mt}}function h(H,at,tt){H=N(H,360)*6,at=N(at,100),tt=N(tt,100);var lt=P.floor(H),dt=H-lt,mt=tt*(1-at),gt=tt*(1-dt*at),Mt=tt*(1-(1-dt)*at),Lt=lt%6,zt=[tt,gt,mt,mt,Mt,tt][Lt],xt=[Mt,tt,tt,gt,mt,mt][Lt],Ct=[mt,mt,Mt,tt,tt,gt][Lt];return{r:zt*255,g:xt*255,b:Ct*255}}function T(H,at,tt,lt){var dt=[ot(v(H).toString(16)),ot(v(at).toString(16)),ot(v(tt).toString(16))];return lt&&dt[0].charAt(0)==dt[0].charAt(1)&&dt[1].charAt(0)==dt[1].charAt(1)&&dt[2].charAt(0)==dt[2].charAt(1)?dt[0].charAt(0)+dt[1].charAt(0)+dt[2].charAt(0):dt.join("")}function c(H,at,tt,lt,dt){var mt=[ot(v(H).toString(16)),ot(v(at).toString(16)),ot(v(tt).toString(16)),ot(Z(lt))];return dt&&mt[0].charAt(0)==mt[0].charAt(1)&&mt[1].charAt(0)==mt[1].charAt(1)&&mt[2].charAt(0)==mt[2].charAt(1)&&mt[3].charAt(0)==mt[3].charAt(1)?mt[0].charAt(0)+mt[1].charAt(0)+mt[2].charAt(0)+mt[3].charAt(0):mt.join("")}function i(H,at,tt,lt){var dt=[ot(Z(lt)),ot(v(H).toString(16)),ot(v(at).toString(16)),ot(v(tt).toString(16))];return dt.join("")}s.equals=function(H,at){return!H||!at?!1:s(H).toRgbString()==s(at).toRgbString()},s.random=function(){return s.fromRatio({r:e(),g:e(),b:e()})};function d(H,at){at=at===0?0:at||10;var tt=s(H).toHsl();return tt.s-=at/100,tt.s=G(tt.s),s(tt)}function x(H,at){at=at===0?0:at||10;var tt=s(H).toHsl();return tt.s+=at/100,tt.s=G(tt.s),s(tt)}function w(H){return s(H).desaturate(100)}function C(H,at){at=at===0?0:at||10;var tt=s(H).toHsl();return tt.l+=at/100,tt.l=G(tt.l),s(tt)}function y(H,at){at=at===0?0:at||10;var tt=s(H).toRgb();return tt.r=r(0,p(255,tt.r-v(255*-(at/100)))),tt.g=r(0,p(255,tt.g-v(255*-(at/100)))),tt.b=r(0,p(255,tt.b-v(255*-(at/100)))),s(tt)}function S(H,at){at=at===0?0:at||10;var tt=s(H).toHsl();return tt.l-=at/100,tt.l=G(tt.l),s(tt)}function M(H,at){var tt=s(H).toHsl(),lt=(tt.h+at)%360;return tt.h=lt<0?360+lt:lt,s(tt)}function a(H){var at=s(H).toHsl();return at.h=(at.h+180)%360,s(at)}function E(H){var at=s(H).toHsl(),tt=at.h;return[s(H),s({h:(tt+120)%360,s:at.s,l:at.l}),s({h:(tt+240)%360,s:at.s,l:at.l})]}function m(H){var at=s(H).toHsl(),tt=at.h;return[s(H),s({h:(tt+90)%360,s:at.s,l:at.l}),s({h:(tt+180)%360,s:at.s,l:at.l}),s({h:(tt+270)%360,s:at.s,l:at.l})]}function k(H){var at=s(H).toHsl(),tt=at.h;return[s(H),s({h:(tt+72)%360,s:at.s,l:at.l}),s({h:(tt+216)%360,s:at.s,l:at.l})]}function I(H,at,tt){at=at||6,tt=tt||30;var lt=s(H).toHsl(),dt=360/tt,mt=[s(H)];for(lt.h=(lt.h-(dt*at>>1)+720)%360;--at;)lt.h=(lt.h+dt)%360,mt.push(s(lt));return mt}function O(H,at){at=at||6;for(var tt=s(H).toHsv(),lt=tt.h,dt=tt.s,mt=tt.v,gt=[],Mt=1/at;at--;)gt.push(s({h:lt,s:dt,v:mt})),mt=(mt+Mt)%1;return gt}s.mix=function(H,at,tt){tt=tt===0?0:tt||50;var lt=s(H).toRgb(),dt=s(at).toRgb(),mt=tt/100,gt={r:(dt.r-lt.r)*mt+lt.r,g:(dt.g-lt.g)*mt+lt.g,b:(dt.b-lt.b)*mt+lt.b,a:(dt.a-lt.a)*mt+lt.a};return s(gt)},s.readability=function(H,at){var tt=s(H),lt=s(at);return(P.max(tt.getLuminance(),lt.getLuminance())+.05)/(P.min(tt.getLuminance(),lt.getLuminance())+.05)},s.isReadable=function(H,at,tt){var lt=s.readability(H,at),dt,mt;switch(mt=!1,dt=K(tt),dt.level+dt.size){case"AAsmall":case"AAAlarge":mt=lt>=4.5;break;case"AAlarge":mt=lt>=3;break;case"AAAsmall":mt=lt>=7;break}return mt},s.mostReadable=function(H,at,tt){var lt=null,dt=0,mt,gt,Mt,Lt;tt=tt||{},gt=tt.includeFallbackColors,Mt=tt.level,Lt=tt.size;for(var zt=0;zt<at.length;zt++)mt=s.readability(H,at[zt]),mt>dt&&(dt=mt,lt=s(at[zt]));return s.isReadable(H,lt,{level:Mt,size:Lt})||!gt?lt:(tt.includeFallbackColors=!1,s.mostReadable(H,["#fff","#000"],tt))};var z=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=s.hexNames=F(z);function F(H){var at={};for(var tt in H)H.hasOwnProperty(tt)&&(at[H[tt]]=tt);return at}function _(H){return H=parseFloat(H),(isNaN(H)||H<0||H>1)&&(H=1),H}function N(H,at){$(H)&&(H="100%");var tt=et(H);return H=p(at,r(0,parseFloat(H))),tt&&(H=parseInt(H*at,10)/100),P.abs(H-at)<1e-6?1:H%at/parseFloat(at)}function G(H){return p(1,r(0,H))}function X(H){return parseInt(H,16)}function $(H){return typeof H=="string"&&H.indexOf(".")!=-1&&parseFloat(H)===1}function et(H){return typeof H=="string"&&H.indexOf("%")!=-1}function ot(H){return H.length==1?"0"+H:""+H}function nt(H){return H<=1&&(H=H*100+"%"),H}function Z(H){return P.round(parseFloat(H)*255).toString(16)}function Q(H){return X(H)/255}var W=function(){var H="[-\\+]?\\d+%?",at="[-\\+]?\\d*\\.\\d+%?",tt="(?:"+at+")|(?:"+H+")",lt="[\\s|\\(]+("+tt+")[,|\\s]+("+tt+")[,|\\s]+("+tt+")\\s*\\)?",dt="[\\s|\\(]+("+tt+")[,|\\s]+("+tt+")[,|\\s]+("+tt+")[,|\\s]+("+tt+")\\s*\\)?";return{CSS_UNIT:new RegExp(tt),rgb:new RegExp("rgb"+lt),rgba:new RegExp("rgba"+dt),hsl:new RegExp("hsl"+lt),hsla:new RegExp("hsla"+dt),hsv:new RegExp("hsv"+lt),hsva:new RegExp("hsva"+dt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function J(H){return!!W.CSS_UNIT.exec(H)}function it(H){H=H.replace(o,"").replace(L,"").toLowerCase();var at=!1;if(z[H])H=z[H],at=!0;else if(H=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var tt;return(tt=W.rgb.exec(H))?{r:tt[1],g:tt[2],b:tt[3]}:(tt=W.rgba.exec(H))?{r:tt[1],g:tt[2],b:tt[3],a:tt[4]}:(tt=W.hsl.exec(H))?{h:tt[1],s:tt[2],l:tt[3]}:(tt=W.hsla.exec(H))?{h:tt[1],s:tt[2],l:tt[3],a:tt[4]}:(tt=W.hsv.exec(H))?{h:tt[1],s:tt[2],v:tt[3]}:(tt=W.hsva.exec(H))?{h:tt[1],s:tt[2],v:tt[3],a:tt[4]}:(tt=W.hex8.exec(H))?{r:X(tt[1]),g:X(tt[2]),b:X(tt[3]),a:Q(tt[4]),format:at?"name":"hex8"}:(tt=W.hex6.exec(H))?{r:X(tt[1]),g:X(tt[2]),b:X(tt[3]),format:at?"name":"hex"}:(tt=W.hex4.exec(H))?{r:X(tt[1]+""+tt[1]),g:X(tt[2]+""+tt[2]),b:X(tt[3]+""+tt[3]),a:Q(tt[4]+""+tt[4]),format:at?"name":"hex8"}:(tt=W.hex3.exec(H))?{r:X(tt[1]+""+tt[1]),g:X(tt[2]+""+tt[2]),b:X(tt[3]+""+tt[3]),format:at?"name":"hex"}:!1}function K(H){var at,tt;return H=H||{level:"AA",size:"small"},at=(H.level||"AA").toUpperCase(),tt=(H.size||"small").toLowerCase(),at!=="AA"&&at!=="AAA"&&(at="AA"),tt!=="small"&&tt!=="large"&&(tt="small"),{level:at,size:tt}}j.exports?j.exports=s:(b=function(){return s}.call(V,t,V,j),b!==void 0&&(j.exports=b))})(Math)},37816:function(j){j.exports=b,j.exports.float32=j.exports.float=b,j.exports.fract32=j.exports.fract=t;var V=new Float32Array(1);function t(P,o){if(P.length){if(P instanceof Float32Array)return new Float32Array(P.length);o instanceof Float32Array||(o=b(P));for(var L=0,A=o.length;L<A;L++)o[L]=P[L]-o[L];return o}return b(P-b(P))}function b(P){return P.length?P instanceof Float32Array?P:new Float32Array(P):(V[0]=P,V[0])}},23464:function(j,V,t){var b=t(65819);j.exports=A;var P=96;function o(v,p){var r=b(getComputedStyle(v).getPropertyValue(p));return r[0]*A(r[1],v)}function L(v,p){var r=document.createElement("div");r.style["font-size"]="128"+v,p.appendChild(r);var e=o(r,"font-size")/128;return p.removeChild(r),e}function A(v,p){switch(p=p||document.body,v=(v||"px").trim().toLowerCase(),(p===window||p===document)&&(p=document.body),v){case"%":return p.clientHeight/100;case"ch":case"ex":return L(v,p);case"em":return o(p,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return P;case"cm":return P/2.54;case"mm":return P/25.4;case"pt":return P/72;case"pc":return P/6}return 1}},55712:function(j,V,t){t.d(V,{NO:function(){return L}});function b(p,r){for(var e,s=p.length,n=s-r;n<--s;)e=p[n],p[n++]=p[s],p[s]=e}function P(p){return p}function o(p){if(p==null)return P;var r,e,s=p.scale[0],n=p.scale[1],l=p.translate[0],f=p.translate[1];return function(u,g){g||(r=e=0);var h=2,T=u.length,c=new Array(T);for(c[0]=(r+=u[0])*s+l,c[1]=(e+=u[1])*n+f;h<T;)c[h]=u[h],++h;return c}}function L(p,r){return typeof r=="string"&&(r=p.objects[r]),r.type==="GeometryCollection"?{type:"FeatureCollection",features:r.geometries.map(function(e){return A(p,e)})}:A(p,r)}function A(p,r){var e=r.id,s=r.bbox,n=r.properties==null?{}:r.properties,l=v(p,r);return e==null&&s==null?{type:"Feature",properties:n,geometry:l}:s==null?{type:"Feature",id:e,properties:n,geometry:l}:{type:"Feature",id:e,bbox:s,properties:n,geometry:l}}function v(p,r){var e=o(p.transform),s=p.arcs;function n(T,c){c.length&&c.pop();for(var i=s[T<0?~T:T],d=0,x=i.length;d<x;++d)c.push(e(i[d],d));T<0&&b(c,x)}function l(T){return e(T)}function f(T){for(var c=[],i=0,d=T.length;i<d;++i)n(T[i],c);return c.length<2&&c.push(c[0]),c}function u(T){for(var c=f(T);c.length<4;)c.push(c[0]);return c}function g(T){return T.map(u)}function h(T){var c=T.type,i;switch(c){case"GeometryCollection":return{type:c,geometries:T.geometries.map(h)};case"Point":i=l(T.coordinates);break;case"MultiPoint":i=T.coordinates.map(l);break;case"LineString":i=f(T.arcs);break;case"MultiLineString":i=T.arcs.map(f);break;case"Polygon":i=g(T.arcs);break;case"MultiPolygon":i=T.arcs.map(g);break;default:return null}return{type:c,coordinates:i}}return h(r)}},73384:function(j,V,t){var b=t(54612);j.exports=function(P){if(typeof P!="function"||!hasOwnProperty.call(P,"length"))return!1;try{if(typeof P.length!="number"||typeof P.call!="function"||typeof P.apply!="function")return!1}catch{return!1}return!b(P)}},57980:function(j,V,t){var b=t(81680),P=t(7328),o=t(33940),L=t(18856),A=function(v,p){return v.replace("%v",L(p))};j.exports=function(v,p,r){if(!P(r))throw new TypeError(A(p,v));if(!b(v)){if("default"in r)return r.default;if(r.isOptional)return null}var e=o(r.errorMessage);throw b(e)||(e=p),new TypeError(A(e,v))}},32336:function(j){j.exports=function(V){try{return V.toString()}catch{try{return String(V)}catch{return null}}}},18856:function(j,V,t){var b=t(32336),P=/[\n\r\u2028\u2029]/g;j.exports=function(o){var L=b(o);return L===null?"<Non-coercible to string value>":(L.length>100&&(L=L.slice(0,99)+"…"),L=L.replace(P,function(A){switch(A){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),L)}},7328:function(j,V,t){var b=t(81680),P={object:!0,function:!0,undefined:!0};j.exports=function(o){return b(o)?hasOwnProperty.call(P,typeof o):!1}},87396:function(j,V,t){var b=t(57980),P=t(85488);j.exports=function(o){return P(o)?o:b(o,"%v is not a plain function",arguments[1])}},85488:function(j,V,t){var b=t(73384),P=/^\s*class[\s{/}]/,o=Function.prototype.toString;j.exports=function(L){return!(!b(L)||P.test(o.call(L)))}},54612:function(j,V,t){var b=t(7328);j.exports=function(P){if(!b(P))return!1;try{return P.constructor?P.constructor.prototype===P:!1}catch{return!1}}},33940:function(j,V,t){var b=t(81680),P=t(7328),o=Object.prototype.toString;j.exports=function(L){if(!b(L))return null;if(P(L)){var A=L.toString;if(typeof A!="function"||A===o)return null}try{return""+L}catch{return null}}},18496:function(j,V,t){var b=t(57980),P=t(81680);j.exports=function(o){return P(o)?o:b(o,"Cannot use %v",arguments[1])}},81680:function(j){var V=void 0;j.exports=function(t){return t!==V&&t!==null}},14144:function(j,V,t){var b=t(308),P=t(10352),o=t(33576).Buffer;t.g.__TYPEDARRAY_POOL||(t.g.__TYPEDARRAY_POOL={UINT8:P([32,0]),UINT16:P([32,0]),UINT32:P([32,0]),BIGUINT64:P([32,0]),INT8:P([32,0]),INT16:P([32,0]),INT32:P([32,0]),BIGINT64:P([32,0]),FLOAT:P([32,0]),DOUBLE:P([32,0]),DATA:P([32,0]),UINT8C:P([32,0]),BUFFER:P([32,0])});var L=typeof Uint8ClampedArray<"u",A=typeof BigUint64Array<"u",v=typeof BigInt64Array<"u",p=t.g.__TYPEDARRAY_POOL;p.UINT8C||(p.UINT8C=P([32,0])),p.BIGUINT64||(p.BIGUINT64=P([32,0])),p.BIGINT64||(p.BIGINT64=P([32,0])),p.BUFFER||(p.BUFFER=P([32,0]));var r=p.DATA,e=p.BUFFER;V.free=function(a){if(o.isBuffer(a))e[b.log2(a.length)].push(a);else{if(Object.prototype.toString.call(a)!=="[object ArrayBuffer]"&&(a=a.buffer),!a)return;var E=a.length||a.byteLength,m=b.log2(E)|0;r[m].push(a)}};function s(M){if(M){var a=M.length||M.byteLength,E=b.log2(a);r[E].push(M)}}function n(M){s(M.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=n,V.freeArrayBuffer=s,V.freeBuffer=function(a){e[b.log2(a.length)].push(a)},V.malloc=function(a,E){if(E===void 0||E==="arraybuffer")return l(a);switch(E){case"uint8":return f(a);case"uint16":return u(a);case"uint32":return g(a);case"int8":return h(a);case"int16":return T(a);case"int32":return c(a);case"float":case"float32":return i(a);case"double":case"float64":return d(a);case"uint8_clamped":return x(a);case"bigint64":return C(a);case"biguint64":return w(a);case"buffer":return S(a);case"data":case"dataview":return y(a);default:return null}return null};function l(a){var a=b.nextPow2(a),E=b.log2(a),m=r[E];return m.length>0?m.pop():new ArrayBuffer(a)}V.mallocArrayBuffer=l;function f(M){return new Uint8Array(l(M),0,M)}V.mallocUint8=f;function u(M){return new Uint16Array(l(2*M),0,M)}V.mallocUint16=u;function g(M){return new Uint32Array(l(4*M),0,M)}V.mallocUint32=g;function h(M){return new Int8Array(l(M),0,M)}V.mallocInt8=h;function T(M){return new Int16Array(l(2*M),0,M)}V.mallocInt16=T;function c(M){return new Int32Array(l(4*M),0,M)}V.mallocInt32=c;function i(M){return new Float32Array(l(4*M),0,M)}V.mallocFloat32=V.mallocFloat=i;function d(M){return new Float64Array(l(8*M),0,M)}V.mallocFloat64=V.mallocDouble=d;function x(M){return L?new Uint8ClampedArray(l(M),0,M):f(M)}V.mallocUint8Clamped=x;function w(M){return A?new BigUint64Array(l(8*M),0,M):null}V.mallocBigUint64=w;function C(M){return v?new BigInt64Array(l(8*M),0,M):null}V.mallocBigInt64=C;function y(M){return new DataView(l(M),0,M)}V.mallocDataView=y;function S(M){M=b.nextPow2(M);var a=b.log2(M),E=e[a];return E.length>0?E.pop():new o(M)}V.mallocBuffer=S,V.clearCache=function(){for(var a=0;a<32;++a)p.UINT8[a].length=0,p.UINT16[a].length=0,p.UINT32[a].length=0,p.INT8[a].length=0,p.INT16[a].length=0,p.INT32[a].length=0,p.FLOAT[a].length=0,p.DOUBLE[a].length=0,p.BIGUINT64[a].length=0,p.BIGINT64[a].length=0,p.UINT8C[a].length=0,r[a].length=0,e[a].length=0}},92384:function(j){var V=/[\'\"]/;j.exports=function(b){return b?(V.test(b.charAt(0))&&(b=b.substr(1)),V.test(b.charAt(b.length-1))&&(b=b.substr(0,b.length-1)),b):""}},45223:function(j){j.exports=function(t,b,P){Array.isArray(P)||(P=[].slice.call(arguments,2));for(var o=0,L=P.length;o<L;o++){var A=P[o];for(var v in A)if(!(b[v]!==void 0&&!Array.isArray(b[v])&&t[v]===b[v])&&v in b){var p;if(A[v]===!0)p=b[v];else{if(A[v]===!1)continue;if(typeof A[v]=="function"&&(p=A[v](b[v],t,b),p===void 0))continue}t[v]=p}}return t}},96656:function(j,V,t){j.exports=b;function b(o,L){if(P("noDeprecation"))return o;var A=!1;function v(){if(!A){if(P("throwDeprecation"))throw new Error(L);P("traceDeprecation")?console.trace(L):console.warn(L),A=!0}return o.apply(this,arguments)}return v}function P(o){try{if(!t.g.localStorage)return!1}catch{return!1}var L=t.g.localStorage[o];return L==null?!1:String(L).toLowerCase()==="true"}},75272:function(j){j.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}},41088:function(j,V,t){var b=t(91148),P=t(84420),o=t(96632),L=t(7728);function A(mt){return mt.call.bind(mt)}var v=typeof BigInt<"u",p=typeof Symbol<"u",r=A(Object.prototype.toString),e=A(Number.prototype.valueOf),s=A(String.prototype.valueOf),n=A(Boolean.prototype.valueOf);if(v)var l=A(BigInt.prototype.valueOf);if(p)var f=A(Symbol.prototype.valueOf);function u(mt,gt){if(typeof mt!="object")return!1;try{return gt(mt),!0}catch{return!1}}V.isArgumentsObject=b,V.isGeneratorFunction=P,V.isTypedArray=L;function g(mt){return typeof Promise<"u"&&mt instanceof Promise||mt!==null&&typeof mt=="object"&&typeof mt.then=="function"&&typeof mt.catch=="function"}V.isPromise=g;function h(mt){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(mt):L(mt)||X(mt)}V.isArrayBufferView=h;function T(mt){return o(mt)==="Uint8Array"}V.isUint8Array=T;function c(mt){return o(mt)==="Uint8ClampedArray"}V.isUint8ClampedArray=c;function i(mt){return o(mt)==="Uint16Array"}V.isUint16Array=i;function d(mt){return o(mt)==="Uint32Array"}V.isUint32Array=d;function x(mt){return o(mt)==="Int8Array"}V.isInt8Array=x;function w(mt){return o(mt)==="Int16Array"}V.isInt16Array=w;function C(mt){return o(mt)==="Int32Array"}V.isInt32Array=C;function y(mt){return o(mt)==="Float32Array"}V.isFloat32Array=y;function S(mt){return o(mt)==="Float64Array"}V.isFloat64Array=S;function M(mt){return o(mt)==="BigInt64Array"}V.isBigInt64Array=M;function a(mt){return o(mt)==="BigUint64Array"}V.isBigUint64Array=a;function E(mt){return r(mt)==="[object Map]"}E.working=typeof Map<"u"&&E(new Map);function m(mt){return typeof Map>"u"?!1:E.working?E(mt):mt instanceof Map}V.isMap=m;function k(mt){return r(mt)==="[object Set]"}k.working=typeof Set<"u"&&k(new Set);function I(mt){return typeof Set>"u"?!1:k.working?k(mt):mt instanceof Set}V.isSet=I;function O(mt){return r(mt)==="[object WeakMap]"}O.working=typeof WeakMap<"u"&&O(new WeakMap);function z(mt){return typeof WeakMap>"u"?!1:O.working?O(mt):mt instanceof WeakMap}V.isWeakMap=z;function B(mt){return r(mt)==="[object WeakSet]"}B.working=typeof WeakSet<"u"&&B(new WeakSet);function F(mt){return B(mt)}V.isWeakSet=F;function _(mt){return r(mt)==="[object ArrayBuffer]"}_.working=typeof ArrayBuffer<"u"&&_(new ArrayBuffer);function N(mt){return typeof ArrayBuffer>"u"?!1:_.working?_(mt):mt instanceof ArrayBuffer}V.isArrayBuffer=N;function G(mt){return r(mt)==="[object DataView]"}G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1));function X(mt){return typeof DataView>"u"?!1:G.working?G(mt):mt instanceof DataView}V.isDataView=X;var $=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function et(mt){return r(mt)==="[object SharedArrayBuffer]"}function ot(mt){return typeof $>"u"?!1:(typeof et.working>"u"&&(et.working=et(new $)),et.working?et(mt):mt instanceof $)}V.isSharedArrayBuffer=ot;function nt(mt){return r(mt)==="[object AsyncFunction]"}V.isAsyncFunction=nt;function Z(mt){return r(mt)==="[object Map Iterator]"}V.isMapIterator=Z;function Q(mt){return r(mt)==="[object Set Iterator]"}V.isSetIterator=Q;function W(mt){return r(mt)==="[object Generator]"}V.isGeneratorObject=W;function J(mt){return r(mt)==="[object WebAssembly.Module]"}V.isWebAssemblyCompiledModule=J;function it(mt){return u(mt,e)}V.isNumberObject=it;function K(mt){return u(mt,s)}V.isStringObject=K;function H(mt){return u(mt,n)}V.isBooleanObject=H;function at(mt){return v&&u(mt,l)}V.isBigIntObject=at;function tt(mt){return p&&u(mt,f)}V.isSymbolObject=tt;function lt(mt){return it(mt)||K(mt)||H(mt)||at(mt)||tt(mt)}V.isBoxedPrimitive=lt;function dt(mt){return typeof Uint8Array<"u"&&(N(mt)||ot(mt))}V.isAnyArrayBuffer=dt,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(mt){Object.defineProperty(V,mt,{enumerable:!1,value:function(){throw new Error(mt+" is not supported in userland")}})})},35840:function(j,V,t){var b=t(4168),P=Object.getOwnPropertyDescriptors||function($){for(var et=Object.keys($),ot={},nt=0;nt<et.length;nt++)ot[et[nt]]=Object.getOwnPropertyDescriptor($,et[nt]);return ot},o=/%[sdj%]/g;V.format=function(X){if(!w(X)){for(var $=[],et=0;et<arguments.length;et++)$.push(p(arguments[et]));return $.join(" ")}for(var et=1,ot=arguments,nt=ot.length,Z=String(X).replace(o,function(W){if(W==="%%")return"%";if(et>=nt)return W;switch(W){case"%s":return String(ot[et++]);case"%d":return Number(ot[et++]);case"%j":try{return JSON.stringify(ot[et++])}catch{return"[Circular]"}default:return W}}),Q=ot[et];et<nt;Q=ot[++et])i(Q)||!M(Q)?Z+=" "+Q:Z+=" "+p(Q);return Z},V.deprecate=function(X,$){if(typeof b<"u"&&b.noDeprecation===!0)return X;if(typeof b>"u")return function(){return V.deprecate(X,$).apply(this,arguments)};var et=!1;function ot(){if(!et){if(b.throwDeprecation)throw new Error($);b.traceDeprecation?console.trace($):console.error($),et=!0}return X.apply(this,arguments)}return ot};var L={},A=/^$/;if(b.env.NODE_DEBUG){var v=b.env.NODE_DEBUG;v=v.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),A=new RegExp("^"+v+"$","i")}V.debuglog=function(X){if(X=X.toUpperCase(),!L[X])if(A.test(X)){var $=b.pid;L[X]=function(){var et=V.format.apply(V,arguments);console.error("%s %d: %s",X,$,et)}}else L[X]=function(){};return L[X]};function p(X,$){var et={seen:[],stylize:e};return arguments.length>=3&&(et.depth=arguments[2]),arguments.length>=4&&(et.colors=arguments[3]),c($)?et.showHidden=$:$&&V._extend(et,$),y(et.showHidden)&&(et.showHidden=!1),y(et.depth)&&(et.depth=2),y(et.colors)&&(et.colors=!1),y(et.customInspect)&&(et.customInspect=!0),et.colors&&(et.stylize=r),n(et,X,et.depth)}V.inspect=p,p.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},p.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function r(X,$){var et=p.styles[$];return et?"\x1B["+p.colors[et][0]+"m"+X+"\x1B["+p.colors[et][1]+"m":X}function e(X,$){return X}function s(X){var $={};return X.forEach(function(et,ot){$[et]=!0}),$}function n(X,$,et){if(X.customInspect&&$&&m($.inspect)&&$.inspect!==V.inspect&&!($.constructor&&$.constructor.prototype===$)){var ot=$.inspect(et,X);return w(ot)||(ot=n(X,ot,et)),ot}var nt=l(X,$);if(nt)return nt;var Z=Object.keys($),Q=s(Z);if(X.showHidden&&(Z=Object.getOwnPropertyNames($)),E($)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return f($);if(Z.length===0){if(m($)){var W=$.name?": "+$.name:"";return X.stylize("[Function"+W+"]","special")}if(S($))return X.stylize(RegExp.prototype.toString.call($),"regexp");if(a($))return X.stylize(Date.prototype.toString.call($),"date");if(E($))return f($)}var J="",it=!1,K=["{","}"];if(T($)&&(it=!0,K=["[","]"]),m($)){var H=$.name?": "+$.name:"";J=" [Function"+H+"]"}if(S($)&&(J=" "+RegExp.prototype.toString.call($)),a($)&&(J=" "+Date.prototype.toUTCString.call($)),E($)&&(J=" "+f($)),Z.length===0&&(!it||$.length==0))return K[0]+J+K[1];if(et<0)return S($)?X.stylize(RegExp.prototype.toString.call($),"regexp"):X.stylize("[Object]","special");X.seen.push($);var at;return it?at=u(X,$,et,Q,Z):at=Z.map(function(tt){return g(X,$,et,Q,tt,it)}),X.seen.pop(),h(at,J,K)}function l(X,$){if(y($))return X.stylize("undefined","undefined");if(w($)){var et="'"+JSON.stringify($).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return X.stylize(et,"string")}if(x($))return X.stylize(""+$,"number");if(c($))return X.stylize(""+$,"boolean");if(i($))return X.stylize("null","null")}function f(X){return"["+Error.prototype.toString.call(X)+"]"}function u(X,$,et,ot,nt){for(var Z=[],Q=0,W=$.length;Q<W;++Q)F($,String(Q))?Z.push(g(X,$,et,ot,String(Q),!0)):Z.push("");return nt.forEach(function(J){J.match(/^\d+$/)||Z.push(g(X,$,et,ot,J,!0))}),Z}function g(X,$,et,ot,nt,Z){var Q,W,J;if(J=Object.getOwnPropertyDescriptor($,nt)||{value:$[nt]},J.get?J.set?W=X.stylize("[Getter/Setter]","special"):W=X.stylize("[Getter]","special"):J.set&&(W=X.stylize("[Setter]","special")),F(ot,nt)||(Q="["+nt+"]"),W||(X.seen.indexOf(J.value)<0?(i(et)?W=n(X,J.value,null):W=n(X,J.value,et-1),W.indexOf(`
`)>-1&&(Z?W=W.split(`
`).map(function(it){return"  "+it}).join(`
`).slice(2):W=`
`+W.split(`
`).map(function(it){return"   "+it}).join(`
`))):W=X.stylize("[Circular]","special")),y(Q)){if(Z&&nt.match(/^\d+$/))return W;Q=JSON.stringify(""+nt),Q.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Q=Q.slice(1,-1),Q=X.stylize(Q,"name")):(Q=Q.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Q=X.stylize(Q,"string"))}return Q+": "+W}function h(X,$,et){var ot=X.reduce(function(nt,Z){return Z.indexOf(`
`)>=0,nt+Z.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ot>60?et[0]+($===""?"":$+`
 `)+" "+X.join(`,
  `)+" "+et[1]:et[0]+$+" "+X.join(", ")+" "+et[1]}V.types=t(41088);function T(X){return Array.isArray(X)}V.isArray=T;function c(X){return typeof X=="boolean"}V.isBoolean=c;function i(X){return X===null}V.isNull=i;function d(X){return X==null}V.isNullOrUndefined=d;function x(X){return typeof X=="number"}V.isNumber=x;function w(X){return typeof X=="string"}V.isString=w;function C(X){return typeof X=="symbol"}V.isSymbol=C;function y(X){return X===void 0}V.isUndefined=y;function S(X){return M(X)&&I(X)==="[object RegExp]"}V.isRegExp=S,V.types.isRegExp=S;function M(X){return typeof X=="object"&&X!==null}V.isObject=M;function a(X){return M(X)&&I(X)==="[object Date]"}V.isDate=a,V.types.isDate=a;function E(X){return M(X)&&(I(X)==="[object Error]"||X instanceof Error)}V.isError=E,V.types.isNativeError=E;function m(X){return typeof X=="function"}V.isFunction=m;function k(X){return X===null||typeof X=="boolean"||typeof X=="number"||typeof X=="string"||typeof X=="symbol"||typeof X>"u"}V.isPrimitive=k,V.isBuffer=t(75272);function I(X){return Object.prototype.toString.call(X)}function O(X){return X<10?"0"+X.toString(10):X.toString(10)}var z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B(){var X=new Date,$=[O(X.getHours()),O(X.getMinutes()),O(X.getSeconds())].join(":");return[X.getDate(),z[X.getMonth()],$].join(" ")}V.log=function(){console.log("%s - %s",B(),V.format.apply(V,arguments))},V.inherits=t(6768),V._extend=function(X,$){if(!$||!M($))return X;for(var et=Object.keys($),ot=et.length;ot--;)X[et[ot]]=$[et[ot]];return X};function F(X,$){return Object.prototype.hasOwnProperty.call(X,$)}var _=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;V.promisify=function($){if(typeof $!="function")throw new TypeError('The "original" argument must be of type Function');if(_&&$[_]){var et=$[_];if(typeof et!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(et,_,{value:et,enumerable:!1,writable:!1,configurable:!0}),et}function et(){for(var ot,nt,Z=new Promise(function(J,it){ot=J,nt=it}),Q=[],W=0;W<arguments.length;W++)Q.push(arguments[W]);Q.push(function(J,it){J?nt(J):ot(it)});try{$.apply(this,Q)}catch(J){nt(J)}return Z}return Object.setPrototypeOf(et,Object.getPrototypeOf($)),_&&Object.defineProperty(et,_,{value:et,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(et,P($))},V.promisify.custom=_;function N(X,$){if(!X){var et=new Error("Promise was rejected with a falsy value");et.reason=X,X=et}return $(X)}function G(X){if(typeof X!="function")throw new TypeError('The "original" argument must be of type Function');function $(){for(var et=[],ot=0;ot<arguments.length;ot++)et.push(arguments[ot]);var nt=et.pop();if(typeof nt!="function")throw new TypeError("The last argument must be of type Function");var Z=this,Q=function(){return nt.apply(Z,arguments)};X.apply(this,et).then(function(W){b.nextTick(Q.bind(null,null,W))},function(W){b.nextTick(N.bind(null,W,Q))})}return Object.setPrototypeOf($,Object.getPrototypeOf(X)),Object.defineProperties($,P(X)),$}V.callbackify=G},5408:function(j,V,t){var b=t(13380);j.exports=function(o){return b("webgl",o)}},96632:function(j,V,t){var b=t(46492),P=t(63436),o=t(57916),L=t(99676),A=t(2304),v=L("Object.prototype.toString"),p=t(46672)(),r=typeof globalThis>"u"?t.g:globalThis,e=P(),s=L("String.prototype.slice"),n=Object.getPrototypeOf,l=L("Array.prototype.indexOf",!0)||function(T,c){for(var i=0;i<T.length;i+=1)if(T[i]===c)return i;return-1},f={__proto__:null};p&&A&&n?b(e,function(h){var T=new r[h];if(Symbol.toStringTag in T){var c=n(T),i=A(c,Symbol.toStringTag);if(!i){var d=n(c);i=A(d,Symbol.toStringTag)}f["$"+h]=o(i.get)}}):b(e,function(h){var T=new r[h],c=T.slice||T.set;c&&(f["$"+h]=o(c))});var u=function(T){var c=!1;return b(f,function(i,d){if(!c)try{"$"+i(T)===d&&(c=s(d,1))}catch{}}),c},g=function(T){var c=!1;return b(f,function(i,d){if(!c)try{i(T),c=s(d,1)}catch{}}),c};j.exports=function(T){if(!T||typeof T!="object")return!1;if(!p){var c=s(v(T),8,-1);return l(e,c)>-1?c:c!=="Object"?!1:g(T)}return A?u(T):null}},67020:function(j,V,t){var b=t(38700),P=t(50896),o=b.instance();function L(f){this.local=this.regionalOptions[f||""]||this.regionalOptions[""]}L.prototype=new b.baseCalendar,P(L.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(f,u){if(typeof f=="string"){var g=f.match(v);return g?g[0]:""}var h=this._validateYear(f),T=f.month(),c=""+this.toChineseMonth(h,T);return u&&c.length<2&&(c="0"+c),this.isIntercalaryMonth(h,T)&&(c+="i"),c},monthNames:function(f){if(typeof f=="string"){var u=f.match(p);return u?u[0]:""}var g=this._validateYear(f),h=f.month(),T=this.toChineseMonth(g,h),c=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][T-1];return this.isIntercalaryMonth(g,h)&&(c="闰"+c),c},monthNamesShort:function(f){if(typeof f=="string"){var u=f.match(r);return u?u[0]:""}var g=this._validateYear(f),h=f.month(),T=this.toChineseMonth(g,h),c=["一","二","三","四","五","六","七","八","九","十","十一","十二"][T-1];return this.isIntercalaryMonth(g,h)&&(c="闰"+c),c},parseMonth:function(f,u){f=this._validateYear(f);var g=parseInt(u),h;if(isNaN(g))u[0]==="闰"&&(h=!0,u=u.substring(1)),u[u.length-1]==="月"&&(u=u.substring(0,u.length-1)),g=1+["一","二","三","四","五","六","七","八","九","十","十一","十二"].indexOf(u);else{var T=u[u.length-1];h=T==="i"||T==="I"}var c=this.toMonthIndex(f,g,h);return c},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(f,u){if(f.year&&(f=f.year()),typeof f!="number"||f<1888||f>2111)throw u.replace(/\{0\}/,this.local.name);return f},toMonthIndex:function(f,u,g){var h=this.intercalaryMonth(f),T=g&&u!==h;if(T||u<1||u>12)throw b.local.invalidMonth.replace(/\{0\}/,this.local.name);var c;return h?!g&&u<=h?c=u-1:c=u:c=u-1,c},toChineseMonth:function(f,u){f.year&&(f=f.year(),u=f.month());var g=this.intercalaryMonth(f),h=g?12:11;if(u<0||u>h)throw b.local.invalidMonth.replace(/\{0\}/,this.local.name);var T;return g?u<g?T=u+1:T=u:T=u+1,T},intercalaryMonth:function(f){f=this._validateYear(f);var u=e[f-e[0]],g=u>>13;return g},isIntercalaryMonth:function(f,u){f.year&&(f=f.year(),u=f.month());var g=this.intercalaryMonth(f);return!!g&&g===u},leapYear:function(f){return this.intercalaryMonth(f)!==0},weekOfYear:function(f,u,g){var h=this._validateYear(f,b.local.invalidyear),T=s[h-s[0]],c=T>>9&4095,i=T>>5&15,d=T&31,x;x=o.newDate(c,i,d),x.add(4-(x.dayOfWeek()||7),"d");var w=this.toJD(f,u,g)-x.toJD();return 1+Math.floor(w/7)},monthsInYear:function(f){return this.leapYear(f)?13:12},daysInMonth:function(f,u){f.year&&(u=f.month(),f=f.year()),f=this._validateYear(f);var g=e[f-e[0]],h=g>>13,T=h?12:11;if(u>T)throw b.local.invalidMonth.replace(/\{0\}/,this.local.name);var c=g&1<<12-u?30:29;return c},weekDay:function(f,u,g){return(this.dayOfWeek(f,u,g)||7)<6},toJD:function(f,u,g){var h=this._validate(f,c,g,b.local.invalidDate);f=this._validateYear(h.year()),u=h.month(),g=h.day();var T=this.isIntercalaryMonth(f,u),c=this.toChineseMonth(f,u),i=l(f,c,g,T);return o.toJD(i.year,i.month,i.day)},fromJD:function(f){var u=o.fromJD(f),g=n(u.year(),u.month(),u.day()),h=this.toMonthIndex(g.year,g.month,g.isIntercalary);return this.newDate(g.year,h,g.day)},fromString:function(f){var u=f.match(A),g=this._validateYear(+u[1]),h=+u[2],T=!!u[3],c=this.toMonthIndex(g,h,T),i=+u[4];return this.newDate(g,c,i)},add:function(f,u,g){var h=f.year(),T=f.month(),c=this.isIntercalaryMonth(h,T),i=this.toChineseMonth(h,T),d=Object.getPrototypeOf(L.prototype).add.call(this,f,u,g);if(g==="y"){var x=d.year(),w=d.month(),C=this.isIntercalaryMonth(x,i),y=c&&C?this.toMonthIndex(x,i,!0):this.toMonthIndex(x,i,!1);y!==w&&d.month(y)}return d}});var A=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,v=/^\d?\d[iI]?/m,p=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;b.calendars.chinese=L;var e=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],s=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function n(f,u,g,h){var T,c;if(typeof f=="object")T=f,c=u||{};else{var i=typeof f=="number"&&f>=1888&&f<=2111;if(!i)throw new Error("Solar year outside range 1888-2111");var d=typeof u=="number"&&u>=1&&u<=12;if(!d)throw new Error("Solar month outside range 1 - 12");var x=typeof g=="number"&&g>=1&&g<=31;if(!x)throw new Error("Solar day outside range 1 - 31");T={year:f,month:u,day:g},c={}}var w=s[T.year-s[0]],C=T.year<<9|T.month<<5|T.day;c.year=C>=w?T.year:T.year-1,w=s[c.year-s[0]];var y=w>>9&4095,S=w>>5&15,M=w&31,a,E=new Date(y,S-1,M),m=new Date(T.year,T.month-1,T.day);a=Math.round((m-E)/864e5);var k=e[c.year-e[0]],I;for(I=0;I<13;I++){var O=k&1<<12-I?30:29;if(a<O)break;a-=O}var z=k>>13;return!z||I<z?(c.isIntercalary=!1,c.month=1+I):I===z?(c.isIntercalary=!0,c.month=I):(c.isIntercalary=!1,c.month=I),c.day=1+a,c}function l(f,u,g,h,T){var c,i;if(typeof f=="object")i=f,c=u||{};else{var d=typeof f=="number"&&f>=1888&&f<=2111;if(!d)throw new Error("Lunar year outside range 1888-2111");var x=typeof u=="number"&&u>=1&&u<=12;if(!x)throw new Error("Lunar month outside range 1 - 12");var w=typeof g=="number"&&g>=1&&g<=30;if(!w)throw new Error("Lunar day outside range 1 - 30");var C;typeof h=="object"?(C=!1,c=h):(C=!!h,c={}),i={year:f,month:u,day:g,isIntercalary:C}}var y;y=i.day-1;var S=e[i.year-e[0]],M=S>>13,a;M&&(i.month>M||i.isIntercalary)?a=i.month:a=i.month-1;for(var E=0;E<a;E++){var m=S&1<<12-E?30:29;y+=m}var k=s[i.year-s[0]],I=k>>9&4095,O=k>>5&15,z=k&31,B=new Date(I,O-1,z+y);return c.year=B.getFullYear(),c.month=1+B.getMonth(),c.day=B.getDate(),c}},89792:function(j,V,t){var b=t(38700),P=t(50896);function o(L){this.local=this.regionalOptions[L||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var A=this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),v=A.year()+(A.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(L){return this._validate(L,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear),13},weekOfYear:function(L,A,v){var p=this.newDate(L,A,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(L,A){var v=this._validate(L,A,this.minDay,b.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(L,A,v){return(this.dayOfWeek(L,A,v)||7)<6},toJD:function(L,A,v){var p=this._validate(L,A,v,b.local.invalidDate);return L=p.year(),L<0&&L++,p.day()+(p.month()-1)*30+(L-1)*365+Math.floor(L/4)+this.jdEpoch-1},fromJD:function(L){var A=Math.floor(L)+.5-this.jdEpoch,v=Math.floor((A-Math.floor((A+366)/1461))/365)+1;v<=0&&v--,A=Math.floor(L)+.5-this.newDate(v,1,1).toJD();var p=Math.floor(A/30)+1,r=A-(p-1)*30+1;return this.newDate(v,p,r)}}),b.calendars.coptic=o},55668:function(j,V,t){var b=t(38700),P=t(50896);function o(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(A){return this._validate(A,this.minMonth,this.minDay,b.local.invalidYear),!1},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,b.local.invalidYear),13},daysInYear:function(A){return this._validate(A,this.minMonth,this.minDay,b.local.invalidYear),400},weekOfYear:function(A,v,p){var r=this.newDate(A,v,p);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(A,v){var p=this._validate(A,v,this.minDay,b.local.invalidMonth);return this.daysPerMonth[p.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);return(r.day()+1)%8},weekDay:function(A,v,p){var r=this.dayOfWeek(A,v,p);return r>=2&&r<=6},extraInfo:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);return{century:L[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);return A=r.year()+(r.year()<0?1:0),v=r.month(),p=r.day(),p+(v>1?16:0)+(v>2?(v-2)*32:0)+(A-1)*400+this.jdEpoch-1},fromJD:function(A){A=Math.floor(A+.5)-Math.floor(this.jdEpoch)-1;var v=Math.floor(A/400)+1;A-=(v-1)*400,A+=A>15?16:0;var p=Math.floor(A/32)+1,r=A-(p-1)*32+1;return this.newDate(v<=0?v-1:v,p,r)}});var L={20:"Fruitbat",21:"Anchovy"};b.calendars.discworld=o},65168:function(j,V,t){var b=t(38700),P=t(50896);function o(L){this.local=this.regionalOptions[L||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var A=this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),v=A.year()+(A.year()<0?1:0);return v%4===3||v%4===-1},monthsInYear:function(L){return this._validate(L,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear),13},weekOfYear:function(L,A,v){var p=this.newDate(L,A,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(L,A){var v=this._validate(L,A,this.minDay,b.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===13&&this.leapYear(v.year())?1:0)},weekDay:function(L,A,v){return(this.dayOfWeek(L,A,v)||7)<6},toJD:function(L,A,v){var p=this._validate(L,A,v,b.local.invalidDate);return L=p.year(),L<0&&L++,p.day()+(p.month()-1)*30+(L-1)*365+Math.floor(L/4)+this.jdEpoch-1},fromJD:function(L){var A=Math.floor(L)+.5-this.jdEpoch,v=Math.floor((A-Math.floor((A+366)/1461))/365)+1;v<=0&&v--,A=Math.floor(L)+.5-this.newDate(v,1,1).toJD();var p=Math.floor(A/30)+1,r=A-(p-1)*30+1;return this.newDate(v,p,r)}}),b.calendars.ethiopian=o},2084:function(j,V,t){var b=t(38700),P=t(50896);function o(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var v=this._validate(A,this.minMonth,this.minDay,b.local.invalidYear);return this._leapYear(v.year())},_leapYear:function(A){return A=A<0?A+1:A,L(A*7+1,19)<7},monthsInYear:function(A){return this._validate(A,this.minMonth,this.minDay,b.local.invalidYear),this._leapYear(A.year?A.year():A)?13:12},weekOfYear:function(A,v,p){var r=this.newDate(A,v,p);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(A){var v=this._validate(A,this.minMonth,this.minDay,b.local.invalidYear);return A=v.year(),this.toJD(A===-1?1:A+1,7,1)-this.toJD(A,7,1)},daysInMonth:function(A,v){return A.year&&(v=A.month(),A=A.year()),this._validate(A,v,this.minDay,b.local.invalidMonth),v===12&&this.leapYear(A)||v===8&&L(this.daysInYear(A),10)===5?30:v===9&&L(this.daysInYear(A),10)===3?29:this.daysPerMonth[v-1]},weekDay:function(A,v,p){return this.dayOfWeek(A,v,p)!==6},extraInfo:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);A=r.year(),v=r.month(),p=r.day();var e=A<=0?A+1:A,s=this.jdEpoch+this._delay1(e)+this._delay2(e)+p+1;if(v<7){for(var n=7;n<=this.monthsInYear(A);n++)s+=this.daysInMonth(A,n);for(var n=1;n<v;n++)s+=this.daysInMonth(A,n)}else for(var n=7;n<v;n++)s+=this.daysInMonth(A,n);return s},_delay1:function(A){var v=Math.floor((235*A-234)/19),p=12084+13753*v,r=v*29+Math.floor(p/25920);return L(3*(r+1),7)<3&&r++,r},_delay2:function(A){var v=this._delay1(A-1),p=this._delay1(A),r=this._delay1(A+1);return r-p===356?2:p-v===382?1:0},fromJD:function(A){A=Math.floor(A)+.5;for(var v=Math.floor((A-this.jdEpoch)*98496/35975351)-1;A>=this.toJD(v===-1?1:v+1,7,1);)v++;for(var p=A<this.toJD(v,1,1)?7:1;A>this.toJD(v,p,this.daysInMonth(v,p));)p++;var r=A-this.toJD(v,p,1)+1;return this.newDate(v,p,r)}});function L(A,v){return A-v*Math.floor(A/v)}b.calendars.hebrew=o},26368:function(j,V,t){var b=t(38700),P=t(50896);function o(L){this.local=this.regionalOptions[L||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-khamīs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(L){var A=this._validate(L,this.minMonth,this.minDay,b.local.invalidYear);return(A.year()*11+14)%30<11},weekOfYear:function(L,A,v){var p=this.newDate(L,A,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(L){return this.leapYear(L)?355:354},daysInMonth:function(L,A){var v=this._validate(L,A,this.minDay,b.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===12&&this.leapYear(v.year())?1:0)},weekDay:function(L,A,v){return this.dayOfWeek(L,A,v)!==5},toJD:function(L,A,v){var p=this._validate(L,A,v,b.local.invalidDate);return L=p.year(),A=p.month(),v=p.day(),L=L<=0?L+1:L,v+Math.ceil(29.5*(A-1))+(L-1)*354+Math.floor((3+11*L)/30)+this.jdEpoch-1},fromJD:function(L){L=Math.floor(L)+.5;var A=Math.floor((30*(L-this.jdEpoch)+10646)/10631);A=A<=0?A-1:A;var v=Math.min(12,Math.ceil((L-29-this.toJD(A,1,1))/29.5)+1),p=L-this.toJD(A,v,1)+1;return this.newDate(A,v,p)}}),b.calendars.islamic=o},24747:function(j,V,t){var b=t(38700),P=t(50896);function o(L){this.local=this.regionalOptions[L||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(v){var A=this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),v=A.year()<0?A.year()+1:A.year();return v%4===0},weekOfYear:function(L,A,v){var p=this.newDate(L,A,v);return p.add(4-(p.dayOfWeek()||7),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInMonth:function(L,A){var v=this._validate(L,A,this.minDay,b.local.invalidMonth);return this.daysPerMonth[v.month()-1]+(v.month()===2&&this.leapYear(v.year())?1:0)},weekDay:function(L,A,v){return(this.dayOfWeek(L,A,v)||7)<6},toJD:function(L,A,v){var p=this._validate(L,A,v,b.local.invalidDate);return L=p.year(),A=p.month(),v=p.day(),L<0&&L++,A<=2&&(L--,A+=12),Math.floor(365.25*(L+4716))+Math.floor(30.6001*(A+1))+v-1524.5},fromJD:function(L){var A=Math.floor(L+.5),v=A+1524,p=Math.floor((v-122.1)/365.25),r=Math.floor(365.25*p),e=Math.floor((v-r)/30.6001),s=e-Math.floor(e<14?1:13),n=p-Math.floor(s>2?4716:4715),l=v-r-Math.floor(30.6001*e);return n<=0&&n--,this.newDate(n,s,l)}}),b.calendars.julian=o},65616:function(j,V,t){var b=t(38700),P=t(50896);function o(v){this.local=this.regionalOptions[v||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(v){return this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),!1},formatYear:function(v){var p=this._validate(v,this.minMonth,this.minDay,b.local.invalidYear);v=p.year();var r=Math.floor(v/400);v=v%400,v+=v<0?400:0;var e=Math.floor(v/20);return r+"."+e+"."+v%20},forYear:function(v){if(v=v.split("."),v.length<3)throw"Invalid Mayan year";for(var p=0,r=0;r<v.length;r++){var e=parseInt(v[r],10);if(Math.abs(e)>19||r>0&&e<0)throw"Invalid Mayan year";p=p*20+e}return p},monthsInYear:function(v){return this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),18},weekOfYear:function(v,p,r){return this._validate(v,p,r,b.local.invalidDate),0},daysInYear:function(v){return this._validate(v,this.minMonth,this.minDay,b.local.invalidYear),360},daysInMonth:function(v,p){return this._validate(v,p,this.minDay,b.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(v,p,r){var e=this._validate(v,p,r,b.local.invalidDate);return e.day()},weekDay:function(v,p,r){return this._validate(v,p,r,b.local.invalidDate),!0},extraInfo:function(v,p,r){var e=this._validate(v,p,r,b.local.invalidDate),s=e.toJD(),n=this._toHaab(s),l=this._toTzolkin(s);return{haabMonthName:this.local.haabMonths[n[0]-1],haabMonth:n[0],haabDay:n[1],tzolkinDayName:this.local.tzolkinMonths[l[0]-1],tzolkinDay:l[0],tzolkinTrecena:l[1]}},_toHaab:function(v){v-=this.jdEpoch;var p=L(v+8+17*20,365);return[Math.floor(p/20)+1,L(p,20)]},_toTzolkin:function(v){return v-=this.jdEpoch,[A(v+20,20),A(v+4,13)]},toJD:function(v,p,r){var e=this._validate(v,p,r,b.local.invalidDate);return e.day()+e.month()*20+e.year()*360+this.jdEpoch},fromJD:function(v){v=Math.floor(v)+.5-this.jdEpoch;var p=Math.floor(v/360);v=v%360,v+=v<0?360:0;var r=Math.floor(v/20),e=v%20;return this.newDate(p,r,e)}});function L(v,p){return v-p*Math.floor(v/p)}function A(v,p){return L(v-1,p)+1}b.calendars.mayan=o},30632:function(j,V,t){var b=t(38700),P=t(50896);function o(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar;var L=b.instance("gregorian");P(o.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(A){var v=this._validate(A,this.minMonth,this.minDay,b.local.invalidYear||b.regionalOptions[""].invalidYear);return L.leapYear(v.year()+(v.year()<1?1:0)+1469)},weekOfYear:function(A,v,p){var r=this.newDate(A,v,p);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(A,v){var p=this._validate(A,v,this.minDay,b.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(A,v,p){return(this.dayOfWeek(A,v,p)||7)<6},toJD:function(e,v,p){var r=this._validate(e,v,p,b.local.invalidMonth),e=r.year();e<0&&e++;for(var s=r.day(),n=1;n<r.month();n++)s+=this.daysPerMonth[n-1];return s+L.toJD(e+1468,3,13)},fromJD:function(A){A=Math.floor(A+.5);for(var v=Math.floor((A-(this.jdEpoch-1))/366);A>=this.toJD(v+1,1,1);)v++;for(var p=A-Math.floor(this.toJD(v,1,1)+.5)+1,r=1;p>this.daysInMonth(v,r);)p-=this.daysInMonth(v,r),r++;return this.newDate(v,r,p)}}),b.calendars.nanakshahi=o},73040:function(j,V,t){var b=t(38700),P=t(50896);function o(L){this.local=this.regionalOptions[L||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(L){return this.daysInYear(L)!==this.daysPerYear},weekOfYear:function(L,A,v){var p=this.newDate(L,A,v);return p.add(-p.dayOfWeek(),"d"),Math.floor((p.dayOfYear()-1)/7)+1},daysInYear:function(L){var A=this._validate(L,this.minMonth,this.minDay,b.local.invalidYear);if(L=A.year(),typeof this.NEPALI_CALENDAR_DATA[L]>"u")return this.daysPerYear;for(var v=0,p=this.minMonth;p<=12;p++)v+=this.NEPALI_CALENDAR_DATA[L][p];return v},daysInMonth:function(L,A){return L.year&&(A=L.month(),L=L.year()),this._validate(L,A,this.minDay,b.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[L]>"u"?this.daysPerMonth[A-1]:this.NEPALI_CALENDAR_DATA[L][A]},weekDay:function(L,A,v){return this.dayOfWeek(L,A,v)!==6},toJD:function(L,A,v){var p=this._validate(L,A,v,b.local.invalidDate);L=p.year(),A=p.month(),v=p.day();var r=b.instance(),e=0,s=A,n=L;this._createMissingCalendarData(L);var l=L-(s>9||s===9&&v>=this.NEPALI_CALENDAR_DATA[n][0]?56:57);for(A!==9&&(e=v,s--);s!==9;)s<=0&&(s=12,n--),e+=this.NEPALI_CALENDAR_DATA[n][s],s--;return A===9?(e+=v-this.NEPALI_CALENDAR_DATA[n][0],e<0&&(e+=r.daysInYear(l))):e+=this.NEPALI_CALENDAR_DATA[n][9]-this.NEPALI_CALENDAR_DATA[n][0],r.newDate(l,1,1).add(e,"d").toJD()},fromJD:function(L){var A=b.instance(),v=A.fromJD(L),p=v.year(),r=v.dayOfYear(),e=p+56;this._createMissingCalendarData(e);for(var s=9,n=this.NEPALI_CALENDAR_DATA[e][0],l=this.NEPALI_CALENDAR_DATA[e][s]-n+1;r>l;)s++,s>12&&(s=1,e++),l+=this.NEPALI_CALENDAR_DATA[e][s];var f=this.NEPALI_CALENDAR_DATA[e][s]-(l-r);return this.newDate(e,s,f)},_createMissingCalendarData:function(L){var A=this.daysPerMonth.slice(0);A.unshift(17);for(var v=L-1;v<L+2;v++)typeof this.NEPALI_CALENDAR_DATA[v]>"u"&&(this.NEPALI_CALENDAR_DATA[v]=A)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),b.calendars.nepali=o},1104:function(j,V,t){var b=t(38700),P=t(50896);function o(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Chæharshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Chæ","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(A){var v=this._validate(A,this.minMonth,this.minDay,b.local.invalidYear);return((v.year()-(v.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(A,v,p){var r=this.newDate(A,v,p);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(A,v){var p=this._validate(A,v,this.minDay,b.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===12&&this.leapYear(p.year())?1:0)},weekDay:function(A,v,p){return this.dayOfWeek(A,v,p)!==5},toJD:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate);A=r.year(),v=r.month(),p=r.day();var e=A-(A>=0?474:473),s=474+L(e,2820);return p+(v<=7?(v-1)*31:(v-1)*30+6)+Math.floor((s*682-110)/2816)+(s-1)*365+Math.floor(e/2820)*1029983+this.jdEpoch-1},fromJD:function(A){A=Math.floor(A)+.5;var v=A-this.toJD(475,1,1),p=Math.floor(v/1029983),r=L(v,1029983),e=2820;if(r!==1029982){var s=Math.floor(r/366),n=L(r,366);e=Math.floor((2134*s+2816*n+2815)/1028522)+s+1}var l=e+2820*p+474;l=l<=0?l-1:l;var f=A-this.toJD(l,1,1)+1,u=f<=186?Math.ceil(f/31):Math.ceil((f-6)/30),g=A-this.toJD(l,u,1)+1;return this.newDate(l,u,g)}});function L(A,v){return A-v*Math.floor(A/v)}b.calendars.persian=o,b.calendars.jalali=o},51456:function(j,V,t){var b=t(38700),P=t(50896),o=b.instance();function L(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}L.prototype=new b.baseCalendar,P(L.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(p){var v=this._validate(p,this.minMonth,this.minDay,b.local.invalidYear),p=this._t2gYear(v.year());return o.leapYear(p)},weekOfYear:function(e,v,p){var r=this._validate(e,this.minMonth,this.minDay,b.local.invalidYear),e=this._t2gYear(r.year());return o.weekOfYear(e,r.month(),r.day())},daysInMonth:function(A,v){var p=this._validate(A,v,this.minDay,b.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(A,v,p){return(this.dayOfWeek(A,v,p)||7)<6},toJD:function(e,v,p){var r=this._validate(e,v,p,b.local.invalidDate),e=this._t2gYear(r.year());return o.toJD(e,r.month(),r.day())},fromJD:function(A){var v=o.fromJD(A),p=this._g2tYear(v.year());return this.newDate(p,v.month(),v.day())},_t2gYear:function(A){return A+this.yearsOffset+(A>=-this.yearsOffset&&A<=-1?1:0)},_g2tYear:function(A){return A-this.yearsOffset-(A>=1&&A<=this.yearsOffset?1:0)}}),b.calendars.taiwan=L},4592:function(j,V,t){var b=t(38700),P=t(50896),o=b.instance();function L(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}L.prototype=new b.baseCalendar,P(L.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(p){var v=this._validate(p,this.minMonth,this.minDay,b.local.invalidYear),p=this._t2gYear(v.year());return o.leapYear(p)},weekOfYear:function(e,v,p){var r=this._validate(e,this.minMonth,this.minDay,b.local.invalidYear),e=this._t2gYear(r.year());return o.weekOfYear(e,r.month(),r.day())},daysInMonth:function(A,v){var p=this._validate(A,v,this.minDay,b.local.invalidMonth);return this.daysPerMonth[p.month()-1]+(p.month()===2&&this.leapYear(p.year())?1:0)},weekDay:function(A,v,p){return(this.dayOfWeek(A,v,p)||7)<6},toJD:function(e,v,p){var r=this._validate(e,v,p,b.local.invalidDate),e=this._t2gYear(r.year());return o.toJD(e,r.month(),r.day())},fromJD:function(A){var v=o.fromJD(A),p=this._g2tYear(v.year());return this.newDate(p,v.month(),v.day())},_t2gYear:function(A){return A-this.yearsOffset-(A>=1&&A<=this.yearsOffset?1:0)},_g2tYear:function(A){return A+this.yearsOffset+(A>=-this.yearsOffset&&A<=-1?1:0)}}),b.calendars.thai=L},45348:function(j,V,t){var b=t(38700),P=t(50896);function o(A){this.local=this.regionalOptions[A||""]||this.regionalOptions[""]}o.prototype=new b.baseCalendar,P(o.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thalāthā’","Yawm al-Arba‘ā’","Yawm al-Khamīs","Yawm al-Jum‘a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(A){var v=this._validate(A,this.minMonth,this.minDay,b.local.invalidYear);return this.daysInYear(v.year())===355},weekOfYear:function(A,v,p){var r=this.newDate(A,v,p);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(A){for(var v=0,p=1;p<=12;p++)v+=this.daysInMonth(A,p);return v},daysInMonth:function(A,v){for(var p=this._validate(A,v,this.minDay,b.local.invalidMonth),r=p.toJD()-24e5+.5,e=0,s=0;s<L.length;s++){if(L[s]>r)return L[e]-L[e-1];e++}return 30},weekDay:function(A,v,p){return this.dayOfWeek(A,v,p)!==5},toJD:function(A,v,p){var r=this._validate(A,v,p,b.local.invalidDate),e=12*(r.year()-1)+r.month()-15292,s=r.day()+L[e-1]-1;return s+24e5-.5},fromJD:function(A){for(var v=A-24e5+.5,p=0,r=0;r<L.length&&!(L[r]>v);r++)p++;var e=p+15292,s=Math.floor((e-1)/12),n=s+1,l=e-12*s,f=v-L[p-1]+1;return this.newDate(n,l,f)},isValid:function(A,v,p){var r=b.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(A=A.year!=null?A.year:A,r=A>=1276&&A<=1500),r},_validate:function(A,v,p,r){var e=b.baseCalendar.prototype._validate.apply(this,arguments);if(e.year<1276||e.year>1500)throw r.replace(/\{0\}/,this.local.name);return e}}),b.calendars.ummalqura=o;var L=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},38700:function(j,V,t){var b=t(50896);function P(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}b(P.prototype,{instance:function(r,e){r=(r||"gregorian").toLowerCase(),e=e||"";var s=this._localCals[r+"-"+e];if(!s&&this.calendars[r]&&(s=new this.calendars[r](e),this._localCals[r+"-"+e]=s),!s)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return s},newDate:function(r,e,s,n,l){return n=(r!=null&&r.year?r.calendar():typeof n=="string"?this.instance(n,l):n)||this.instance(),n.newDate(r,e,s)},substituteDigits:function(r){return function(e){return(e+"").replace(/[0-9]/g,function(s){return r[s]})}},substituteChineseDigits:function(r,e){return function(s){for(var n="",l=0;s>0;){var f=s%10;n=(f===0?"":r[f]+e[l])+n,l++,s=Math.floor(s/10)}return n.indexOf(r[1]+e[1])===0&&(n=n.substr(1)),n||r[0]}}});function o(r,e,s,n){if(this._calendar=r,this._year=e,this._month=s,this._day=n,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(p.local.invalidDate||p.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function L(r,e){return r=""+r,"000000".substring(0,e-r.length)+r}b(o.prototype,{newDate:function(r,e,s){return this._calendar.newDate(r??this,e,s)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,e,s){if(!this._calendar.isValid(r,e,s))throw(p.local.invalidDate||p.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=e,this._day=s,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,e){return this._calendar.add(this,r,e)},set:function(r,e){return this._calendar.set(this,r,e)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(p.local.differentCalendars||p.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var e=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return e===0?0:e<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+L(Math.abs(this.year()),4)+"-"+L(this.month(),2)+"-"+L(this.day(),2)}});function A(){this.shortYearCutoff="+10"}b(A.prototype,{_validateLevel:0,newDate:function(r,e,s){return r==null?this.today():(r.year&&(this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate),s=r.day(),e=r.month(),r=r.year()),new o(this,r,e,s))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var e=this._validate(r,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return e.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var e=this._validate(r,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return(e.year()<0?"-":"")+L(Math.abs(e.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),12},monthOfYear:function(r,e){var s=this._validate(r,e,this.minDay,p.local.invalidMonth||p.regionalOptions[""].invalidMonth);return(s.month()+this.monthsInYear(s)-this.firstMonth)%this.monthsInYear(s)+this.minMonth},fromMonthOfYear:function(r,e){var s=(e+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,s,this.minDay,p.local.invalidMonth||p.regionalOptions[""].invalidMonth),s},daysInYear:function(r){var e=this._validate(r,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear);return this.leapYear(e)?366:365},dayOfYear:function(r,e,s){var n=this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate);return n.toJD()-this.newDate(n.year(),this.fromMonthOfYear(n.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,e,s){var n=this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(n))+2)%this.daysInWeek()},extraInfo:function(r,e,s){return this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate),{}},add:function(r,e,s){return this._validate(r,this.minMonth,this.minDay,p.local.invalidDate||p.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,e,s),e,s)},_add:function(r,e,s){if(this._validateLevel++,s==="d"||s==="w"){var n=r.toJD()+e*(s==="w"?this.daysInWeek():1),l=r.calendar().fromJD(n);return this._validateLevel--,[l.year(),l.month(),l.day()]}try{var f=r.year()+(s==="y"?e:0),u=r.monthOfYear()+(s==="m"?e:0),l=r.day(),g=function(c){for(;u<c.minMonth;)f--,u+=c.monthsInYear(f);for(var i=c.monthsInYear(f);u>i-1+c.minMonth;)f++,u-=i,i=c.monthsInYear(f)};s==="y"?(r.month()!==this.fromMonthOfYear(f,u)&&(u=this.newDate(f,r.month(),this.minDay).monthOfYear()),u=Math.min(u,this.monthsInYear(f)),l=Math.min(l,this.daysInMonth(f,this.fromMonthOfYear(f,u)))):s==="m"&&(g(this),l=Math.min(l,this.daysInMonth(f,this.fromMonthOfYear(f,u))));var h=[f,this.fromMonthOfYear(f,u),l];return this._validateLevel--,h}catch(T){throw this._validateLevel--,T}},_correctAdd:function(r,e,s,n){if(!this.hasYearZero&&(n==="y"||n==="m")&&(e[0]===0||r.year()>0!=e[0]>0)){var l={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[n],f=s<0?-1:1;e=this._add(r,s*l[0]+f*l[1],l[2])}return r.date(e[0],e[1],e[2])},set:function(r,e,s){this._validate(r,this.minMonth,this.minDay,p.local.invalidDate||p.regionalOptions[""].invalidDate);var n=s==="y"?e:r.year(),l=s==="m"?e:r.month(),f=s==="d"?e:r.day();return(s==="y"||s==="m")&&(f=Math.min(f,this.daysInMonth(n,l))),r.date(n,l,f)},isValid:function(r,e,s){this._validateLevel++;var n=this.hasYearZero||r!==0;if(n){var l=this.newDate(r,e,this.minDay);n=e>=this.minMonth&&e-this.minMonth<this.monthsInYear(l)&&s>=this.minDay&&s-this.minDay<this.daysInMonth(l)}return this._validateLevel--,n},toJSDate:function(r,e,s){var n=this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate);return p.instance().fromJD(this.toJD(n)).toJSDate()},fromJSDate:function(r){return this.fromJD(p.instance().fromJSDate(r).toJD())},_validate:function(r,e,s,n){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(p.local.differentCalendars||p.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,e,s))throw n.replace(/\{0\}/,this.local.name);var l=this.newDate(r,e,s);return this._validateLevel--,l}catch(f){throw this._validateLevel--,f}}});function v(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}v.prototype=new A,b(v.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(s){var e=this._validate(s,this.minMonth,this.minDay,p.local.invalidYear||p.regionalOptions[""].invalidYear),s=e.year()+(e.year()<0?1:0);return s%4===0&&(s%100!==0||s%400===0)},weekOfYear:function(r,e,s){var n=this.newDate(r,e,s);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(r,e){var s=this._validate(r,e,this.minDay,p.local.invalidMonth||p.regionalOptions[""].invalidMonth);return this.daysPerMonth[s.month()-1]+(s.month()===2&&this.leapYear(s.year())?1:0)},weekDay:function(r,e,s){return(this.dayOfWeek(r,e,s)||7)<6},toJD:function(r,e,s){var n=this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate);r=n.year(),e=n.month(),s=n.day(),r<0&&r++,e<3&&(e+=12,r--);var l=Math.floor(r/100),f=2-l+Math.floor(l/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(e+1))+s+f-1524.5},fromJD:function(r){var e=Math.floor(r+.5),s=Math.floor((e-186721625e-2)/36524.25);s=e+1+s-Math.floor(s/4);var n=s+1524,l=Math.floor((n-122.1)/365.25),f=Math.floor(365.25*l),u=Math.floor((n-f)/30.6001),g=n-f-Math.floor(u*30.6001),h=u-(u>13.5?13:1),T=l-(h>2.5?4716:4715);return T<=0&&T--,this.newDate(T,h,g)},toJSDate:function(r,e,s){var n=this._validate(r,e,s,p.local.invalidDate||p.regionalOptions[""].invalidDate),l=new Date(n.year(),n.month()-1,n.day());return l.setHours(0),l.setMinutes(0),l.setSeconds(0),l.setMilliseconds(0),l.setHours(l.getHours()>12?l.getHours()+2:0),l},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var p=j.exports=new P;p.cdate=o,p.baseCalendar=A,p.calendars.gregorian=v},15168:function(j,V,t){var b=t(50896),P=t(38700);b(P.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),P.local=P.regionalOptions[""],b(P.cdate.prototype,{formatDate:function(o,L){return typeof o!="string"&&(L=o,o=""),this._calendar.formatDate(o||"",this,L)}}),b(P.baseCalendar.prototype,{UNIX_EPOCH:P.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:P.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(o,L,A){if(typeof o!="string"&&(A=L,L=o,o=""),!L)return"";if(L.calendar()!==this)throw P.local.invalidFormat||P.regionalOptions[""].invalidFormat;o=o||this.local.dateFormat,A=A||{};var v=A.dayNamesShort||this.local.dayNamesShort,p=A.dayNames||this.local.dayNames,r=A.monthNumbers||this.local.monthNumbers,e=A.monthNamesShort||this.local.monthNamesShort,s=A.monthNames||this.local.monthNames;A.calculateWeek||this.local.calculateWeek;for(var n=function(w,C){for(var y=1;x+y<o.length&&o.charAt(x+y)===w;)y++;return x+=y-1,Math.floor(y/(C||1))>1},l=function(w,C,y,S){var M=""+C;if(n(w,S))for(;M.length<y;)M="0"+M;return M},f=function(w,C,y,S){return n(w)?S[C]:y[C]},u=this,g=function(w){return typeof r=="function"?r.call(u,w,n("m")):c(l("m",w.month(),2))},h=function(w,C){return C?typeof s=="function"?s.call(u,w):s[w.month()-u.minMonth]:typeof e=="function"?e.call(u,w):e[w.month()-u.minMonth]},T=this.local.digits,c=function(w){return A.localNumbers&&T?T(w):w},i="",d=!1,x=0;x<o.length;x++)if(d)o.charAt(x)==="'"&&!n("'")?d=!1:i+=o.charAt(x);else switch(o.charAt(x)){case"d":i+=c(l("d",L.day(),2));break;case"D":i+=f("D",L.dayOfWeek(),v,p);break;case"o":i+=l("o",L.dayOfYear(),3);break;case"w":i+=l("w",L.weekOfYear(),2);break;case"m":i+=g(L);break;case"M":i+=h(L,n("M"));break;case"y":i+=n("y",2)?L.year():(L.year()%100<10?"0":"")+L.year()%100;break;case"Y":n("Y",2),i+=L.formatYear();break;case"J":i+=L.toJD();break;case"@":i+=(L.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":i+=(L.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":n("'")?i+="'":d=!0;break;default:i+=o.charAt(x)}return i},parseDate:function(o,L,A){if(L==null)throw P.local.invalidArguments||P.regionalOptions[""].invalidArguments;if(L=typeof L=="object"?L.toString():L+"",L==="")return null;o=o||this.local.dateFormat,A=A||{};var v=A.shortYearCutoff||this.shortYearCutoff;v=typeof v!="string"?v:this.today().year()%100+parseInt(v,10);for(var p=A.dayNamesShort||this.local.dayNamesShort,r=A.dayNames||this.local.dayNames,e=A.parseMonth||this.local.parseMonth,s=A.monthNumbers||this.local.monthNumbers,n=A.monthNamesShort||this.local.monthNamesShort,l=A.monthNames||this.local.monthNames,f=-1,u=-1,g=-1,h=-1,T=-1,c=!1,i=!1,d=function(I,O){for(var z=1;E+z<o.length&&o.charAt(E+z)===I;)z++;return E+=z-1,Math.floor(z/(O||1))>1},x=function(I,O){var z=d(I,O),B=[2,3,z?4:2,z?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+B+"}"),_=L.substring(a).match(F);if(!_)throw(P.local.missingNumberAt||P.regionalOptions[""].missingNumberAt).replace(/\{0\}/,a);return a+=_[0].length,parseInt(_[0],10)},w=this,C=function(){if(typeof s=="function"){d("m");var I=s.call(w,L.substring(a));return a+=I.length,I}return x("m")},y=function(I,O,z,B){for(var F=d(I,B)?z:O,_=0;_<F.length;_++)if(L.substr(a,F[_].length).toLowerCase()===F[_].toLowerCase())return a+=F[_].length,_+w.minMonth;throw(P.local.unknownNameAt||P.regionalOptions[""].unknownNameAt).replace(/\{0\}/,a)},S=function(){if(typeof l=="function"){var I=d("M")?l.call(w,L.substring(a)):n.call(w,L.substring(a));return a+=I.length,I}return y("M",n,l)},M=function(){if(L.charAt(a)!==o.charAt(E))throw(P.local.unexpectedLiteralAt||P.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,a);a++},a=0,E=0;E<o.length;E++)if(i)o.charAt(E)==="'"&&!d("'")?i=!1:M();else switch(o.charAt(E)){case"d":h=x("d");break;case"D":y("D",p,r);break;case"o":T=x("o");break;case"w":x("w");break;case"m":g=C();break;case"M":g=S();break;case"y":var m=E;c=!d("y",2),E=m,u=x("y",2);break;case"Y":u=x("Y",2);break;case"J":f=x("J")+.5,L.charAt(a)==="."&&(a++,x("J"));break;case"@":f=x("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":f=x("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":a=L.length;break;case"'":d("'")?M():i=!0;break;default:M()}if(a<L.length)throw P.local.unexpectedText||P.regionalOptions[""].unexpectedText;if(u===-1?u=this.today().year():u<100&&c&&(u+=v===-1?1900:this.today().year()-this.today().year()%100-(u<=v?0:100)),typeof g=="string"&&(g=e.call(this,u,g)),T>-1){g=1,h=T;for(var k=this.daysInMonth(u,g);h>k;k=this.daysInMonth(u,g))g++,h-=k}return f>-1?this.fromJD(f):this.newDate(u,g,h)},determineDate:function(o,L,A,v,p){A&&typeof A!="object"&&(p=v,v=A,A=null),typeof v!="string"&&(p=v,v="");var r=this,e=function(s){try{return r.parseDate(v,s,p)}catch{}s=s.toLowerCase();for(var n=(s.match(/^c/)&&A?A.newDate():null)||r.today(),l=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,f=l.exec(s);f;)n.add(parseInt(f[1],10),f[2]||"d"),f=l.exec(s);return n};return L=L?L.newDate():null,o=o==null?L:typeof o=="string"?e(o):typeof o=="number"?isNaN(o)||o===1/0||o===-1/0?L:r.today().add(o,"d"):r.newDate(o),o}})},21576:function(){},19768:function(){},63436:function(j,V,t){var b=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],P=typeof globalThis>"u"?t.g:globalThis;j.exports=function(){for(var L=[],A=0;A<b.length;A++)typeof P[b[A]]=="function"&&(L[L.length]=b[A]);return L}},67756:function(j,V,t){t.d(V,{qy:function(){return zt},Gz:function(){return it}});function b(xt,Ct,wt){xt.prototype=Ct.prototype=wt,wt.constructor=xt}function P(xt,Ct){var wt=Object.create(xt.prototype);for(var Rt in Ct)wt[Rt]=Ct[Rt];return wt}function o(){}var L=.7,A=1/L,v="\\s*([+-]?\\d+)\\s*",p="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",e=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\(".concat(v,",").concat(v,",").concat(v,"\\)$")),n=new RegExp("^rgb\\(".concat(r,",").concat(r,",").concat(r,"\\)$")),l=new RegExp("^rgba\\(".concat(v,",").concat(v,",").concat(v,",").concat(p,"\\)$")),f=new RegExp("^rgba\\(".concat(r,",").concat(r,",").concat(r,",").concat(p,"\\)$")),u=new RegExp("^hsl\\(".concat(p,",").concat(r,",").concat(r,"\\)$")),g=new RegExp("^hsla\\(".concat(p,",").concat(r,",").concat(r,",").concat(p,"\\)$")),h={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};b(o,x,{copy:function(Ct){return Object.assign(new this.constructor,this,Ct)},displayable:function(){return this.rgb().displayable()},hex:T,formatHex:T,formatHex8:c,formatHsl:i,formatRgb:d,toString:d});function T(){return this.rgb().formatHex()}function c(){return this.rgb().formatHex8()}function i(){return B(this).formatHsl()}function d(){return this.rgb().formatRgb()}function x(xt){var Ct,wt;return xt=(xt+"").trim().toLowerCase(),(Ct=e.exec(xt))?(wt=Ct[1].length,Ct=parseInt(Ct[1],16),wt===6?w(Ct):wt===3?new M(Ct>>8&15|Ct>>4&240,Ct>>4&15|Ct&240,(Ct&15)<<4|Ct&15,1):wt===8?C(Ct>>24&255,Ct>>16&255,Ct>>8&255,(Ct&255)/255):wt===4?C(Ct>>12&15|Ct>>8&240,Ct>>8&15|Ct>>4&240,Ct>>4&15|Ct&240,((Ct&15)<<4|Ct&15)/255):null):(Ct=s.exec(xt))?new M(Ct[1],Ct[2],Ct[3],1):(Ct=n.exec(xt))?new M(Ct[1]*255/100,Ct[2]*255/100,Ct[3]*255/100,1):(Ct=l.exec(xt))?C(Ct[1],Ct[2],Ct[3],Ct[4]):(Ct=f.exec(xt))?C(Ct[1]*255/100,Ct[2]*255/100,Ct[3]*255/100,Ct[4]):(Ct=u.exec(xt))?z(Ct[1],Ct[2]/100,Ct[3]/100,1):(Ct=g.exec(xt))?z(Ct[1],Ct[2]/100,Ct[3]/100,Ct[4]):h.hasOwnProperty(xt)?w(h[xt]):xt==="transparent"?new M(NaN,NaN,NaN,0):null}function w(xt){return new M(xt>>16&255,xt>>8&255,xt&255,1)}function C(xt,Ct,wt,Rt){return Rt<=0&&(xt=Ct=wt=NaN),new M(xt,Ct,wt,Rt)}function y(xt){return xt instanceof o||(xt=x(xt)),xt?(xt=xt.rgb(),new M(xt.r,xt.g,xt.b,xt.opacity)):new M}function S(xt,Ct,wt,Rt){return arguments.length===1?y(xt):new M(xt,Ct,wt,Rt??1)}function M(xt,Ct,wt,Rt){this.r=+xt,this.g=+Ct,this.b=+wt,this.opacity=+Rt}b(M,S,P(o,{brighter:function(Ct){return Ct=Ct==null?A:Math.pow(A,Ct),new M(this.r*Ct,this.g*Ct,this.b*Ct,this.opacity)},darker:function(Ct){return Ct=Ct==null?L:Math.pow(L,Ct),new M(this.r*Ct,this.g*Ct,this.b*Ct,this.opacity)},rgb:function(){return this},clamp:function(){return new M(I(this.r),I(this.g),I(this.b),k(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a,formatHex:a,formatHex8:E,formatRgb:m,toString:m}));function a(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b))}function E(){return"#".concat(O(this.r)).concat(O(this.g)).concat(O(this.b)).concat(O((isNaN(this.opacity)?1:this.opacity)*255))}function m(){var xt=k(this.opacity);return"".concat(xt===1?"rgb(":"rgba(").concat(I(this.r),", ").concat(I(this.g),", ").concat(I(this.b)).concat(xt===1?")":", ".concat(xt,")"))}function k(xt){return isNaN(xt)?1:Math.max(0,Math.min(1,xt))}function I(xt){return Math.max(0,Math.min(255,Math.round(xt)||0))}function O(xt){return xt=I(xt),(xt<16?"0":"")+xt.toString(16)}function z(xt,Ct,wt,Rt){return Rt<=0?xt=Ct=wt=NaN:wt<=0||wt>=1?xt=Ct=NaN:Ct<=0&&(xt=NaN),new _(xt,Ct,wt,Rt)}function B(xt){if(xt instanceof _)return new _(xt.h,xt.s,xt.l,xt.opacity);if(xt instanceof o||(xt=x(xt)),!xt)return new _;if(xt instanceof _)return xt;xt=xt.rgb();var Ct=xt.r/255,wt=xt.g/255,Rt=xt.b/255,Tt=Math.min(Ct,wt,Rt),Bt=Math.max(Ct,wt,Rt),Gt=NaN,te=Bt-Tt,Wt=(Bt+Tt)/2;return te?(Ct===Bt?Gt=(wt-Rt)/te+(wt<Rt)*6:wt===Bt?Gt=(Rt-Ct)/te+2:Gt=(Ct-wt)/te+4,te/=Wt<.5?Bt+Tt:2-Bt-Tt,Gt*=60):te=Wt>0&&Wt<1?0:Gt,new _(Gt,te,Wt,xt.opacity)}function F(xt,Ct,wt,Rt){return arguments.length===1?B(xt):new _(xt,Ct,wt,Rt??1)}function _(xt,Ct,wt,Rt){this.h=+xt,this.s=+Ct,this.l=+wt,this.opacity=+Rt}b(_,F,P(o,{brighter:function(Ct){return Ct=Ct==null?A:Math.pow(A,Ct),new _(this.h,this.s,this.l*Ct,this.opacity)},darker:function(Ct){return Ct=Ct==null?L:Math.pow(L,Ct),new _(this.h,this.s,this.l*Ct,this.opacity)},rgb:function(){var Ct=this.h%360+(this.h<0)*360,wt=isNaN(Ct)||isNaN(this.s)?0:this.s,Rt=this.l,Tt=Rt+(Rt<.5?Rt:1-Rt)*wt,Bt=2*Rt-Tt;return new M(X(Ct>=240?Ct-240:Ct+120,Bt,Tt),X(Ct,Bt,Tt),X(Ct<120?Ct+240:Ct-120,Bt,Tt),this.opacity)},clamp:function(){return new _(N(this.h),G(this.s),G(this.l),k(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ct=k(this.opacity);return"".concat(Ct===1?"hsl(":"hsla(").concat(N(this.h),", ").concat(G(this.s)*100,"%, ").concat(G(this.l)*100,"%").concat(Ct===1?")":", ".concat(Ct,")"))}}));function N(xt){return xt=(xt||0)%360,xt<0?xt+360:xt}function G(xt){return Math.max(0,Math.min(1,xt||0))}function X(xt,Ct,wt){return(xt<60?Ct+(wt-Ct)*xt/60:xt<180?wt:xt<240?Ct+(wt-Ct)*(240-xt)/60:Ct)*255}var $=function(xt){return function(){return xt}};function et(xt,Ct){return function(wt){return xt+wt*Ct}}function ot(xt,Ct,wt){return xt=Math.pow(xt,wt),Ct=Math.pow(Ct,wt)-xt,wt=1/wt,function(Rt){return Math.pow(xt+Rt*Ct,wt)}}function nt(xt){return(xt=+xt)==1?Z:function(Ct,wt){return wt-Ct?ot(Ct,wt,xt):$(isNaN(Ct)?wt:Ct)}}function Z(xt,Ct){var wt=Ct-xt;return wt?et(xt,wt):$(isNaN(xt)?Ct:xt)}var Q=function xt(Ct){var wt=nt(Ct);function Rt(Tt,Bt){var Gt=wt((Tt=S(Tt)).r,(Bt=S(Bt)).r),te=wt(Tt.g,Bt.g),Wt=wt(Tt.b,Bt.b),jt=Z(Tt.opacity,Bt.opacity);return function(ie){return Tt.r=Gt(ie),Tt.g=te(ie),Tt.b=Wt(ie),Tt.opacity=jt(ie),Tt+""}}return Rt.gamma=xt,Rt}(1);function W(xt,Ct){var wt=Ct?Ct.length:0,Rt=xt?Math.min(wt,xt.length):0,Tt=new Array(Rt),Bt=new Array(wt),Gt;for(Gt=0;Gt<Rt;++Gt)Tt[Gt]=zt(xt[Gt],Ct[Gt]);for(;Gt<wt;++Gt)Bt[Gt]=Ct[Gt];return function(te){for(Gt=0;Gt<Rt;++Gt)Bt[Gt]=Tt[Gt](te);return Bt}}function J(xt,Ct){var wt=new Date;return xt=+xt,Ct=+Ct,function(Rt){return wt.setTime(xt*(1-Rt)+Ct*Rt),wt}}function it(xt,Ct){return xt=+xt,Ct=+Ct,function(wt){return xt*(1-wt)+Ct*wt}}function K(xt){"@babel/helpers - typeof";return K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},K(xt)}function H(xt,Ct){var wt={},Rt={},Tt;(xt===null||K(xt)!=="object")&&(xt={}),(Ct===null||K(Ct)!=="object")&&(Ct={});for(Tt in Ct)Tt in xt?wt[Tt]=zt(xt[Tt],Ct[Tt]):Rt[Tt]=Ct[Tt];return function(Bt){for(Tt in wt)Rt[Tt]=wt[Tt](Bt);return Rt}}var at=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tt=new RegExp(at.source,"g");function lt(xt){return function(){return xt}}function dt(xt){return function(Ct){return xt(Ct)+""}}function mt(xt,Ct){var wt=at.lastIndex=tt.lastIndex=0,Rt,Tt,Bt,Gt=-1,te=[],Wt=[];for(xt=xt+"",Ct=Ct+"";(Rt=at.exec(xt))&&(Tt=tt.exec(Ct));)(Bt=Tt.index)>wt&&(Bt=Ct.slice(wt,Bt),te[Gt]?te[Gt]+=Bt:te[++Gt]=Bt),(Rt=Rt[0])===(Tt=Tt[0])?te[Gt]?te[Gt]+=Tt:te[++Gt]=Tt:(te[++Gt]=null,Wt.push({i:Gt,x:it(Rt,Tt)})),wt=tt.lastIndex;return wt<Ct.length&&(Bt=Ct.slice(wt),te[Gt]?te[Gt]+=Bt:te[++Gt]=Bt),te.length<2?Wt[0]?dt(Wt[0].x):lt(Ct):(Ct=Wt.length,function(jt){for(var ie=0,ue;ie<Ct;++ie)te[(ue=Wt[ie]).i]=ue.x(jt);return te.join("")})}function gt(xt,Ct){Ct||(Ct=[]);var wt=xt?Math.min(Ct.length,xt.length):0,Rt=Ct.slice(),Tt;return function(Bt){for(Tt=0;Tt<wt;++Tt)Rt[Tt]=xt[Tt]*(1-Bt)+Ct[Tt]*Bt;return Rt}}function Mt(xt){return ArrayBuffer.isView(xt)&&!(xt instanceof DataView)}function Lt(xt){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ct){return typeof Ct}:function(Ct){return Ct&&typeof Symbol=="function"&&Ct.constructor===Symbol&&Ct!==Symbol.prototype?"symbol":typeof Ct},Lt(xt)}function zt(xt,Ct){var wt=Lt(Ct),Rt;return Ct==null||wt==="boolean"?$(Ct):(wt==="number"?it:wt==="string"?(Rt=x(Ct))?(Ct=Rt,Q):mt:Ct instanceof x?Q:Ct instanceof Date?J:Mt(Ct)?gt:Array.isArray(Ct)?W:typeof Ct.valueOf!="function"&&typeof Ct.toString!="function"||isNaN(Ct)?H:it)(xt,Ct)}},30584:function(j){j.exports=JSON.parse('["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]')},7294:function(j){j.exports=JSON.parse('["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]')},47916:function(j){j.exports=JSON.parse('["normal","italic","oblique"]')},2904:function(j){j.exports=JSON.parse('["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]')},68194:function(j){j.exports=JSON.parse('["inherit","initial","unset"]')},3748:function(j){j.exports=JSON.parse('["caption","icon","menu","message-box","small-caption","status-bar"]')}},Ne={};function Ze(j){var V=Ne[j];if(V!==void 0)return V.exports;var t=Ne[j]={exports:{}};return xe[j].call(t.exports,t,t.exports,Ze),t.exports}(function(){Ze.n=function(j){var V=j&&j.__esModule?function(){return j.default}:function(){return j};return Ze.d(V,{a:V}),V}})(),function(){Ze.d=function(j,V){for(var t in V)Ze.o(V,t)&&!Ze.o(j,t)&&Object.defineProperty(j,t,{enumerable:!0,get:V[t]})}}(),function(){Ze.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}()}(),function(){Ze.o=function(j,V){return Object.prototype.hasOwnProperty.call(j,V)}}(),function(){Ze.r=function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}}();var or=Ze(13792);return or}()})})(gp);var Vm=gp.exports;const xd=Um(Vm);var Hm=gi("<span><span></span> = <span>"),Gm=gi("<sub>"),Wm=gi("<div> + (<!>) = <span>"),Ym=gi("<div><button>&times;</button><h2>Neuron Info</h2><div><p><strong>ID:</strong> </p></div><div><h3>Neuron Equation:</h3></div><div><div id=activationFunctionPlot style=width:100%;height:300px;>");const Xm=oe=>{Rl(()=>{oe.neuron&&ae()});const ae=()=>{const Ze=document.getElementById("activationFunctionPlot");if(Ze&&oe.neuron){let or,j,V,t,b;switch(oe.neuron.activation){case"tanh":or=Math.tanh,j=-4,V=4,t=-1,b=1;break;case"relu":or=e=>Math.max(0,e),j=-2,V=4,t=-.5,b=4;break;case"sigmoid":or=e=>1/(1+Math.exp(-e)),j=-6,V=6,t=0,b=1;break;default:or=e=>e,j=-4,V=4,t=-4,b=4}const P=oe.neuron.inputValues?oe.neuron.inputValues.reduce((e,s,n)=>e+s*oe.neuron.weights[n],0)+oe.neuron.bias:0,o=or(P);j=Math.min(j,P-1),V=Math.max(V,P+1),t=Math.min(t,o-.5),b=Math.max(b,o+.5);const L=Array.from({length:200},(e,s)=>j+s/199*(V-j)),A=L.map(or),v=[{x:L,y:A,type:"scatter",mode:"lines",name:`${oe.neuron.activation} Activation`,line:{color:Bn.primary,width:3}},{x:[P],y:[o],type:"scatter",mode:"markers",name:"Neuron Input/Output",marker:{color:Bn.error,size:12,symbol:"star"}},{x:[P,P],y:[t,o],type:"scatter",mode:"lines",name:"Input Line",line:{color:Bn.secondary,dash:"dash",width:2}},{x:[j,P],y:[o,o],type:"scatter",mode:"lines",name:"Output Line",line:{color:Bn.secondary,dash:"dash",width:2}}],p={title:{text:"Activation Function",font:{size:24,color:Bn.text}},xaxis:{title:"Input",range:[j,V],gridcolor:Bn.border,zerolinecolor:Bn.border},yaxis:{title:"Output",range:[t,b],gridcolor:Bn.border,zerolinecolor:Bn.border},showlegend:!1,annotations:[{x:P,y:t,xref:"x",yref:"y",text:`Input: ${P.toFixed(4)}`,showarrow:!0,arrowhead:4,ax:0,ay:40},{x:j,y:o,xref:"x",yref:"y",text:`Output: ${o.toFixed(4)}`,showarrow:!0,arrowhead:4,ax:40,ay:0}],shapes:[{type:"circle",xref:"x",yref:"y",x0:P-.1,y0:o-.1,x1:P+.1,y1:o+.1,fillcolor:Bn.error,line:{color:Bn.error}}],plot_bgcolor:Bn.background,paper_bgcolor:Bn.surface,font:{color:Bn.text},margin:{t:50,r:50,b:50,l:50}},r={responsive:!0,displayModeBar:!1};xd.newPlot(Ze,v,p,r)}},xe=Ze=>(()=>{var or=Hm(),j=or.firstChild,V=j.nextSibling,t=V.nextSibling;return Pa(j,()=>Ze.variable,null),Pa(j,(()=>{var b=Gs(()=>Ze.subscript!==void 0);return()=>b()&&(()=>{var P=Gm();return Pa(P,()=>Ze.subscript),P})()})(),null),Pa(t,()=>Ze.value),qa(b=>{var P=su.term,o=su.variable,L=su.value;return P!==b.e&&Fn(or,b.e=P),o!==b.t&&Fn(j,b.t=o),L!==b.a&&Fn(t,b.a=L),b},{e:void 0,t:void 0,a:void 0}),or})(),Ne=Ze=>{const or=Ze.weights.map((t,b)=>{const P=Ze.inputValues?.[b]?.toFixed(4)||"N/A",o=t.toFixed(4);return["(",Ya(xe,{variable:"X",value:P,subscript:b+1}),") * (",Ya(xe,{variable:"w",value:o,subscript:b+1}),")"]}),j=Ze.bias.toFixed(4),V=Ze.outputValue?.toFixed(4)||"N/A";return(()=>{var t=Wm(),b=t.firstChild,P=b.nextSibling,o=P.nextSibling,L=o.nextSibling;return Pa(t,()=>or.map((A,v)=>[v>0&&" + ",A]),b),Pa(t,Ya(xe,{variable:"b",value:j}),P),Pa(L,V),qa(A=>{var v=su.equationText,p=su.totalResult;return v!==A.e&&Fn(t,A.e=v),p!==A.t&&Fn(L,A.t=p),A},{e:void 0,t:void 0}),t})()};return Ya(Dl,{get when(){return oe.neuron},get children(){var Ze=Ym(),or=Ze.firstChild,j=or.nextSibling,V=j.nextSibling,t=V.firstChild,b=t.firstChild;b.nextSibling;var P=V.nextSibling;P.firstChild;var o=P.nextSibling;return op(or,"click",oe.onClose,!0),Pa(t,()=>oe.neuron?.id,null),Pa(P,()=>Ne(oe.neuron),null),qa(L=>{var A=su.sidebar,v=su.closeButton,p=su.title,r=su.infoSection,e=su.equationSection,s=su.chartSection;return A!==L.e&&Fn(Ze,L.e=A),v!==L.t&&Fn(or,L.t=v),p!==L.a&&Fn(j,L.a=p),r!==L.o&&Fn(V,L.o=r),e!==L.i&&Fn(P,L.i=e),s!==L.n&&Fn(o,L.n=s),L},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),Ze}})},su={sidebar:Wn("position:fixed;top:0;right:0;width:400px;height:100%;background-color:",Bn.surface,";box-shadow:-2px 0 5px rgba(0, 0, 0, 0.1);overflow-y:auto;padding:20px;box-sizing:border-box;z-index:1000;display:flex;flex-direction:column;",""),closeButton:Wn("position:absolute;top:10px;right:10px;background:none;border:none;font-size:1.5rem;cursor:pointer;color:",Bn.text,";",""),title:Wn("color:",Bn.primary,";font-size:",bi.fontSize.xl,";margin-bottom:1rem;",""),infoSection:Wn({name:"8dk3vg",styles:"margin-bottom:1rem"}),equationSection:Wn({name:"8dk3vg",styles:"margin-bottom:1rem"}),detailsButton:Wn("background-color:",Bn.secondary,";color:",Bn.surface,";border:none;padding:5px 10px;border-radius:4px;cursor:pointer;margin-top:10px;",""),detailsSection:Wn("margin-top:10px;padding:10px;background-color:",Bn.background,";border-radius:4px;",""),chartSection:Wn({name:"akdqam",styles:"margin-top:1rem"}),equationText:Wn("font-family:monospace;white-space:pre-wrap;word-break:break-word;padding:10px;background-color:",Bn.background,";border-radius:4px;line-height:1.6;",""),term:Wn({name:"1vfabde",styles:"display:inline-block;margin:0 4px"}),variable:Wn("font-weight:bold;color:",Bn.primary,";",""),value:Wn("color:",Bn.secondary,";text-decoration:underline;",""),termResult:Wn("color:",Bn.success,";font-weight:bold;",""),totalResult:Wn("color:",Bn.error,";font-weight:bold;font-size:1.1em;","")};Il(["click"]);const bd=Symbol("store-raw"),Jc=Symbol("store-node"),nf=Symbol("store-has"),yp=Symbol("store-self");function mp(oe){let ae=oe[lu];if(!ae&&(Object.defineProperty(oe,lu,{value:ae=new Proxy(oe,Km)}),!Array.isArray(oe))){const xe=Object.keys(oe),Ne=Object.getOwnPropertyDescriptors(oe);for(let Ze=0,or=xe.length;Ze<or;Ze++){const j=xe[Ze];Ne[j].get&&Object.defineProperty(oe,j,{enumerable:Ne[j].enumerable,get:Ne[j].get.bind(ae)})}}return ae}function Av(oe){let ae;return oe!=null&&typeof oe=="object"&&(oe[lu]||!(ae=Object.getPrototypeOf(oe))||ae===Object.prototype||Array.isArray(oe))}function Ch(oe,ae=new Set){let xe,Ne,Ze,or;if(xe=oe!=null&&oe[bd])return xe;if(!Av(oe)||ae.has(oe))return oe;if(Array.isArray(oe)){Object.isFrozen(oe)?oe=oe.slice(0):ae.add(oe);for(let j=0,V=oe.length;j<V;j++)Ze=oe[j],(Ne=Ch(Ze,ae))!==Ze&&(oe[j]=Ne)}else{Object.isFrozen(oe)?oe=Object.assign({},oe):ae.add(oe);const j=Object.keys(oe),V=Object.getOwnPropertyDescriptors(oe);for(let t=0,b=j.length;t<b;t++)or=j[t],!V[or].get&&(Ze=oe[or],(Ne=Ch(Ze,ae))!==Ze&&(oe[or]=Ne))}return oe}function Mv(oe,ae){let xe=oe[ae];return xe||Object.defineProperty(oe,ae,{value:xe=Object.create(null)}),xe}function Lh(oe,ae,xe){if(oe[ae])return oe[ae];const[Ne,Ze]=Hi(xe,{equals:!1,internal:!0});return Ne.$=Ze,oe[ae]=Ne}function Zm(oe,ae){const xe=Reflect.getOwnPropertyDescriptor(oe,ae);return!xe||xe.get||!xe.configurable||ae===lu||ae===Jc||(delete xe.value,delete xe.writable,xe.get=()=>oe[lu][ae]),xe}function xp(oe){dd()&&Lh(Mv(oe,Jc),yp)()}function jm(oe){return xp(oe),Reflect.ownKeys(oe)}const Km={get(oe,ae,xe){if(ae===bd)return oe;if(ae===lu)return xe;if(ae===vd)return xp(oe),xe;const Ne=Mv(oe,Jc),Ze=Ne[ae];let or=Ze?Ze():oe[ae];if(ae===Jc||ae===nf||ae==="__proto__")return or;if(!Ze){const j=Object.getOwnPropertyDescriptor(oe,ae);dd()&&(typeof or!="function"||oe.hasOwnProperty(ae))&&!(j&&j.get)&&(or=Lh(Ne,ae,or)())}return Av(or)?mp(or):or},has(oe,ae){return ae===bd||ae===lu||ae===vd||ae===Jc||ae===nf||ae==="__proto__"?!0:(dd()&&Lh(Mv(oe,nf),ae)(),ae in oe)},set(){return!0},deleteProperty(){return!0},ownKeys:jm,getOwnPropertyDescriptor:Zm};function Sv(oe,ae,xe,Ne=!1){if(!Ne&&oe[ae]===xe)return;const Ze=oe[ae],or=oe.length;xe===void 0?(delete oe[ae],oe[nf]&&oe[nf][ae]&&Ze!==void 0&&oe[nf][ae].$()):(oe[ae]=xe,oe[nf]&&oe[nf][ae]&&Ze===void 0&&oe[nf][ae].$());let j=Mv(oe,Jc),V;if((V=Lh(j,ae,Ze))&&V.$(()=>xe),Array.isArray(oe)&&oe.length!==or){for(let t=oe.length;t<or;t++)(V=j[t])&&V.$();(V=Lh(j,"length",or))&&V.$(oe.length)}(V=j[yp])&&V.$()}function bp(oe,ae){const xe=Object.keys(ae);for(let Ne=0;Ne<xe.length;Ne+=1){const Ze=xe[Ne];Sv(oe,Ze,ae[Ze])}}function Jm(oe,ae){if(typeof ae=="function"&&(ae=ae(oe)),ae=Ch(ae),Array.isArray(ae)){if(oe===ae)return;let xe=0,Ne=ae.length;for(;xe<Ne;xe++){const Ze=ae[xe];oe[xe]!==Ze&&Sv(oe,xe,Ze)}Sv(oe,"length",Ne)}else bp(oe,ae)}function Mh(oe,ae,xe=[]){let Ne,Ze=oe;if(ae.length>1){Ne=ae.shift();const j=typeof Ne,V=Array.isArray(oe);if(Array.isArray(Ne)){for(let t=0;t<Ne.length;t++)Mh(oe,[Ne[t]].concat(ae),xe);return}else if(V&&j==="function"){for(let t=0;t<oe.length;t++)Ne(oe[t],t)&&Mh(oe,[t].concat(ae),xe);return}else if(V&&j==="object"){const{from:t=0,to:b=oe.length-1,by:P=1}=Ne;for(let o=t;o<=b;o+=P)Mh(oe,[o].concat(ae),xe);return}else if(ae.length>1){Mh(oe[Ne],ae,[Ne].concat(xe));return}Ze=oe[Ne],xe=[Ne].concat(xe)}let or=ae[0];typeof or=="function"&&(or=or(Ze,xe),or===Ze)||Ne===void 0&&or==null||(or=Ch(or),Ne===void 0||Av(Ze)&&Av(or)&&!Array.isArray(or)?bp(Ze,or):Sv(oe,Ne,or))}function Qm(...[oe,ae]){const xe=Ch(oe||{}),Ne=Array.isArray(xe),Ze=mp(xe);function or(...j){Wf(()=>{Ne&&j.length===1?Jm(xe,j[0]):Mh(xe,j)})}return[Ze,or]}function $m(oe,ae=!0){const xe=[];for(let Ne=0;Ne<oe;Ne++){const Ze=Math.random()*100;let or=50*Math.sin(Ze/10)+30*Math.exp(-Math.pow(Ze-40,2)/1e3)-Ze/5+60;if(ae){const j=(Math.random()-.5)*20;or+=j}or=Math.max(0,Math.min(100,or)),xe.push({x:Ze,y:or})}return xe}function qm(oe){return 50*Math.sin(oe/10)+30*Math.exp(-Math.pow(oe-40,2)/1e3)-oe/5+60}class Fi{#t;#e;_prev;_op;_backward;label;id;constructor(ae,xe=[],Ne="",Ze=""){this.#t=ae,this.#e=0,this._prev=new Set(xe),this._op=Ne,this._backward=()=>{},this.label=Ze,this.id=Fi.idCounter++}static idCounter=0;static from(ae){return ae instanceof Fi?ae:new Fi(ae)}get data(){return this.#t}set data(ae){this.#t=ae}get grad(){return this.#e}set grad(ae){this.#e=ae}add(ae){const xe=Fi.from(ae),Ne=new Fi(this.data+xe.data,[this,xe],"+");return Ne._backward=()=>{this.grad+=Ne.grad,xe.grad+=Ne.grad},Ne}sub(ae){const xe=Fi.from(ae),Ne=this.add(xe.mul(-1));return Ne._backward=()=>{this.grad+=Ne.grad,xe.grad-=Ne.grad},Ne}div(ae){const xe=Fi.from(ae),Ne=this.mul(xe.pow(-1));return Ne._backward=()=>{this.grad+=1/xe.data*Ne.grad,xe.grad-=this.data/Math.pow(xe.data,2)*Ne.grad},Ne}mul(ae){const xe=Fi.from(ae),Ne=new Fi(this.data*xe.data,[this,xe],"*");return Ne._backward=()=>{this.grad+=xe.data*Ne.grad,xe.grad+=this.data*Ne.grad},Ne}pow(ae){const xe=new Fi(Math.pow(this.data,ae),[this],`^${ae}`);return xe._backward=()=>{this.grad+=ae*Math.pow(this.data,ae-1)*xe.grad},xe}exp(){const ae=new Fi(Math.exp(this.data),[this],"exp");return ae._backward=()=>{this.grad+=ae.data*ae.grad},ae}tanh(){const ae=this.data,xe=(Math.exp(2*ae)-1)/(Math.exp(2*ae)+1),Ne=new Fi(xe,[this],"tanh");return Ne._backward=()=>{this.grad+=(1-xe*xe)*Ne.grad},Ne}relu(){const ae=new Fi(this.data<0?0:this.data,[this],"ReLU");return ae._backward=()=>{this.grad+=(ae.data>0?1:0)*ae.grad},ae}sigmoid(){const ae=1/(1+Math.exp(-this.data)),xe=new Fi(ae,[this],"sigmoid");return xe._backward=()=>{this.grad+=ae*(1-ae)*xe.grad},xe}backward(){const ae=[],xe=new Set;function Ne(Ze){if(!xe.has(Ze)){xe.add(Ze);for(const or of Ze._prev)Ne(or);ae.push(Ze)}}Ne(this),this.grad=1;for(const Ze of ae.reverse())Ze._backward()}toString(){return`Value(data=${this.data}, grad=${this.grad})`}toDot(){const ae=[],xe=[],Ne=new Set,Ze=or=>{if(Ne.has(or))return`node_${or.id}`;Ne.add(or);const j=`node_${or.id}`;return ae.push(`${j} [label="${or.label} (${or.data.toFixed(4)})"];`),or._prev.size>0&&or._prev.forEach(V=>{const t=Ze(V);xe.push(`${t} -> ${j} [label="${or._op}"];`)}),j};return Ze(this),`digraph G {
        rankdir=BT;
        ${ae.join(`
`)}
        ${xe.join(`
`)}
    }`}}Fi.idCounter=0;class tx{w;b;activation;constructor(ae,xe="tanh"){this.w=Array(ae).fill(0).map(()=>new Fi(Math.random()*2-1)),this.b=new Fi(0),this.activation=xe,console.log(`Neuron created with ${ae} inputs and ${this.activation} activation`)}forward(ae){if(ae.length!==this.w.length){for(console.error(`Input size (${ae.length}) doesn't match weight count (${this.w.length})`);ae.length<this.w.length;)ae.push(new Fi(0));for(;this.w.length<ae.length;)this.w.push(new Fi(Math.random()*2-1))}const xe=ae.reduce((Ne,Ze,or)=>Ne.add(this.w[or].mul(Ze)),this.b);return this.applyActivation(xe)}applyActivation(ae){switch(this.activation){case"tanh":return ae.tanh();case"relu":return ae.relu();case"sigmoid":return ae.sigmoid();case"identity":default:return ae}}parameters(){return[...this.w,this.b]}toJSON(){return{id:Math.random().toString(36).substr(2,9),weights:this.w.map(ae=>ae.data),bias:this.b.data,activation:this.activation,name:this.activation}}}class j0{neurons;constructor(ae,xe,Ne="tanh"){this.neurons=Array(xe).fill(0).map(()=>new tx(ae,Ne))}forward(ae){return this.neurons.map(xe=>xe.forward(ae))}parameters(){return this.neurons.flatMap(ae=>ae.parameters())}getParametersCount(){return this.neurons.map((ae,xe)=>({neuron:xe+1,weights:ae.w.length,bias:1}))}}class Iv{layers;activations;inputSize;layerOutputs=[];gradientMapping=[];_initialInput=[];constructor(ae){const{inputSize:xe,layers:Ne,activations:Ze}=ae;this.inputSize=xe;const or=[xe,...Ne];this.activations=Ze||[],this.layers=[];for(let j=0;j<Ne.length;j++)this.layers.push(new j0(or[j],Ne[j],this.activations[j]||"identity"));console.log("Creating MLP with layers:",Ne,"and activations:",this.activations),this.layers.forEach((j,V)=>{console.log(`Layer ${V}: size ${j.neurons.length}, activation ${j.neurons[0].activation}`)}),this.clearLayerOutputs(),this.computeGradientMapping()}getLayerOutputs(){return this.layerOutputs.map(ae=>ae.map(xe=>xe.data))}clearLayerOutputs(){this.layerOutputs=[]}forward(ae){console.log("MLP forward pass starting..."),this.clearLayerOutputs(),this._initialInput=ae.map(Fi.from);let xe=this._initialInput;console.log("Input:",xe.map(Ne=>Ne.data));for(let Ne=0;Ne<this.layers.length;Ne++){const Ze=this.layers[Ne];console.log(`Processing layer ${Ne+1}...`),xe=Ze.forward(xe),console.log(`Layer ${Ne+1} output:`,xe.map(or=>or.data)),this.layerOutputs.push(xe)}return console.log("MLP forward pass completed."),xe}parameters(){return this.layers.flatMap(ae=>ae.parameters())}zeroGrad(){this.parameters().forEach(ae=>ae.grad=0)}toJSON(){return{inputSize:this.inputSize,layers:this.layers.map((ae,xe)=>({id:`layer_${xe}`,neurons:ae.neurons.map((Ne,Ze)=>({id:`neuron_${xe}_${Ze}`,weights:Ne.w.map(or=>or.data),bias:Ne.b.data,activation:Ne.activation,name:Ne.activation}))}))}}clone(){const ae={inputSize:this.inputSize,layers:this.layers.map(Ne=>Ne.neurons.length),activations:this.activations},xe=new Iv(ae);return this.layers.forEach((Ne,Ze)=>{Ne.neurons.forEach((or,j)=>{or.w.forEach((V,t)=>{xe.layers[Ze].neurons[j].w[t].data=V.data}),xe.layers[Ze].neurons[j].b.data=or.b.data})}),xe}updateFromJSON(ae){ae.layers.length!==this.layers.length&&(this.layers=ae.layers.map(xe=>new j0(xe.nin,xe.nout,xe.activation))),this.layers.forEach((xe,Ne)=>{xe.neurons.forEach((Ze,or)=>{Ze.w=ae.layers[Ne].neurons[or].weights.map(j=>new Fi(j)),Ze.b=new Fi(ae.layers[Ne].neurons[or].bias)})})}computeGradientMapping(){const ae=this.getParametersPerNeuron();for(const{neuron:xe,weights:Ne,bias:Ze}of ae)for(let or=0;or<Ne+Ze;or++)this.gradientMapping.push({neuron:xe,parameter:or})}getGradientMapping(){return this.gradientMapping}getParametersPerNeuron(){return this.layers.flatMap(ae=>ae.getParametersCount())}}const Sd={INITIAL_NETWORK:{inputSize:25,layers:[5,1],activations:["tanh","identity"]},INITIAL_TRAINING:{learningRate:.01},VISUALIZATION:{width:1e3,height:800,nodeWidth:60,nodeHeight:40,layerSpacing:200,nodeSpacing:80}};class ex{_network;currentIteration=0;xs=[];yt=[];currentOutput=null;currentLoss=null;currentDataIndex=0;currentBatchInputs=[];currentBatchTargets=[];constructor(ae,xe){this._network=ae.clone()}get network(){return this._network}setTrainingData(ae,xe){this.xs=ae,this.yt=xe,this.currentIteration=0}singleStepForward(){if(this.currentDataIndex>=this.xs.length)return this.currentDataIndex=0,null;const ae=this.xs[this.currentDataIndex],xe=this.yt[this.currentDataIndex];this.currentOutput=this._network.forward(ae.map(Ze=>new Fi(Ze))),this.currentBatchInputs.push(ae),this.currentBatchTargets.push(xe);const Ne={input:ae,output:this.currentOutput.map(Ze=>Ze.data)};return this.currentDataIndex++,Ne}calculateLoss(){return this.currentBatchInputs.length===0?(console.error("No data in the current batch"),null):(this.currentLoss=this.calculateBatchLoss(this.currentBatchInputs,this.currentBatchTargets),console.log("Calculated loss:",this.currentLoss.data),this.currentLoss)}calculateBatchLoss(ae,xe){let Ne=new Fi(0);for(let or=0;or<ae.length;or++){const j=this._network.forward(ae[or].map(P=>new Fi(P)))[0],V=new Fi(xe[or]),t=j.sub(V),b=t.mul(t);console.log(`Prediction: ${j.data}, Target: ${V.data}, Squared Diff: ${b.data}`),Ne=Ne.add(b)}const Ze=Ne.div(new Fi(ae.length));return console.log(`Total Loss: ${Ne.data}, Avg Loss: ${Ze.data}`),Ze}stepBackward(){if(this.calculateLoss(),!this.currentLoss)return console.error("Loss not calculated"),null;console.log("Gradients before zeroing:",this._network.parameters().map(xe=>xe.grad)),this._network.zeroGrad(),console.log("Gradients after zeroing:",this._network.parameters().map(xe=>xe.grad)),this.currentLoss.backward();const ae=this._network.layers.flatMap((xe,Ne)=>xe.neurons.map((Ze,or)=>({neuron:or+1,weights:Ze.w.length,bias:1,gradients:[...Ze.w.map(j=>j.grad),Ze.b.grad]})));return console.log("Gradients after backward pass:",ae),ae}updateWeights(ae){const xe=this._network.parameters().map(Ze=>Ze.data);this._network.parameters().forEach(Ze=>{Ze.data-=ae*Ze.grad});const Ne=this._network.parameters().map(Ze=>Ze.data);return{gradients:this._network.parameters().map(Ze=>Ze.grad),oldWeights:xe,newWeights:Ne}}getCurrentIteration(){return this.currentIteration}}const rx=Sd.INITIAL_NETWORK,nx=Sd.INITIAL_TRAINING,ax={network:new Iv(rx),visualData:{nodes:[],connections:[]},trainingConfig:nx,trainingData:null,trainingState:{currentPhase:"idle",iteration:0,currentLoss:null,forwardStepResults:[],backwardStepGradients:[],lossHistory:[]},trainingStepResult:{gradients:[],oldWeights:[],newWeights:[]},trainer:null,currentInput:[],simulationResult:{input:[],output:[],layerOutputs:[]}},[Va,Hs]=Qm(ax);function ix(){const oe=$m(100),ae=oe.map(Ne=>[Ne.x]),xe=oe.map(Ne=>Ne.y);Hs("trainingData",{xs:ae,ys:xe}),console.log("Training data set:",JSON.parse(JSON.stringify(Va.trainingData)))}function ox(){if(!Va.trainingData){console.error("No training data available");return}}function sx(){}function lx(){}function ux(){}function fx(){if(!Va.trainingData||!Va.trainingConfig)throw new Error("Training data or configuration not available");const oe=new ex(Va.network,Va.trainingConfig);return oe.setTrainingData(Va.trainingData.xs,Va.trainingData.ys),Hs("trainer",oe),oe}function wp(){Wf(()=>{Hs("trainingState",{forwardStepResults:[],backwardStepGradients:[],lossHistory:[],currentLoss:null,currentPhase:"idle"})})}function cx(){console.log("Starting singleStepForward");const{trainer:oe}=Va;let ae=oe;if(oe||(ae=fx()),!ae)throw new Error("Trainer not available");console.log("Starting forward step...");const xe=ae.singleStepForward(),Ne=ae.network.getLayerOutputs();if(xe===null){console.log("Completed one epoch of training"),Wf(()=>{Hs("trainingState","forwardStepResults",[])});return}console.log("Forward step completed. Result:",xe),Wf(()=>{Hs("trainingState","forwardStepResults",[...Va.trainingState.forwardStepResults,{input:xe.input,output:xe.output}]),Hs("simulationResult",{input:xe.input,output:xe.output,layerOutputs:Ne})}),console.log("Finished singleStepForward")}function hx(){if(console.log("Starting calculateLoss"),!Va.trainer){console.error("Trainer not initialized");return}const oe=Va.trainer.calculateLoss();console.log("After calling trainer.calculateLoss(). Result:",oe);let ae;if(oe===null)throw new Error("Error calculating loss");oe instanceof Fi?ae=oe.data:ae=oe,console.log("Current loss:",{currentLoss:ae}),Wf(()=>{Hs("trainingState",{currentPhase:"loss",currentLoss:ae,lossHistory:[...Va.trainingState.lossHistory,ae]})}),console.log("Finished calculateLoss")}function vx(){if(console.log("Starting stepBackward"),!Va.trainer){console.error("Trainer not initialized");return}console.log("Calling trainer.stepBackward()");let oe;try{oe=Va.trainer.stepBackward()}catch(ae){console.error("Error in stepBackward:",ae);return}if(console.log("After calling trainer.stepBackward(). Result:",oe),oe&&Array.isArray(oe)){console.log("Updating store with result");try{console.log("here stepBackward",oe),Hs("trainingState","backwardStepGradients",oe),console.log("Store updated successfully")}catch(ae){console.error("Error updating store:",ae)}}else console.log("No valid result from stepBackward");console.log("Finished stepBackward")}function dx(){Wf(()=>{if(!Va.trainer||!Va.trainingConfig){console.error("Trainer or training configuration not initialized");return}const oe=Va.trainer.updateWeights(Va.trainingConfig.learningRate);Hs("trainingStepResult",oe),Hs("network",Va.trainer.network),Hs("trainingState","currentPhase","update")})}function px(oe){if(!Va.currentInput){alert("Please set input values first");return}const ae=Va.network.forward(oe),xe=Va.network.getLayerOutputs();Hs({simulationResult:{input:Va.currentInput,output:ae.map(Ne=>Ne.data),layerOutputs:xe},currentInput:oe})}function gx(oe,ae){Wf(()=>{const xe=Sd.INITIAL_NETWORK.inputSize,Ne=new Iv({inputSize:xe,layers:oe,activations:ae});Hs("network",Ne),console.log("Store updated with new network"),wp()})}const bc={initializeTrainingData:ix,startTraining:ox,stopTraining:sx,pauseTraining:lx,resumeTraining:ux,singleStepForward:cx,calculateLoss:hx,stepBackward:vx,updateWeights:dx,simulateInput:px,trainingStateReset:wp,updateNetworkConfig:gx};class yx{constructor(ae,xe){this.canvasWidth=ae,this.canvasHeight=xe}nodeWidth=50;nodeHeight=30;inputNodeWidth=100;inputNodeHeight=40;layerSpacing=180;nodeSpacing=60;inputValuesSpacing=10;inputValueAndNetworkSpacing=150;calculateLayout(ae,xe,Ne,Ze){const or=[],j=[];console.log("Network data:",ae),console.log("network.inputSize",ae.inputSize);const V=ae.inputSize;console.log("Calculated inputSize:",V);const t=ae.layers.length,b=Math.max(V,...ae.layers.map(A=>A.neurons.length)),P=(t+1)*this.layerSpacing,o=(b+1)*(this.nodeHeight+this.nodeSpacing);this.canvasWidth=Math.max(this.canvasWidth,P),this.canvasHeight=Math.max(this.canvasHeight,o);const L=(this.canvasHeight-o)/2;for(let A=0;A<V;A++)or.push({id:`input_${A}`,label:"ChatGPT Usage",layerId:"input",x:this.inputValuesSpacing,y:L+A*(this.nodeHeight+this.nodeSpacing),weights:[0],bias:0});if(xe&&or.forEach((A,v)=>{A.layerId==="input"&&xe[v]!==void 0&&(A.outputValue=xe[v])}),ae.layers.forEach((A,v)=>{const p=this.inputValueAndNetworkSpacing+v*this.layerSpacing+this.layerSpacing/2,r=A.neurons.length*this.nodeHeight+(A.neurons.length-1)*this.nodeSpacing,e=(this.canvasHeight-r)/2;A.neurons.forEach((s,n)=>{const l=`neuron_${v}_${n}`,f=Ze?.[l],u={id:l,label:`N${n}`,layerId:A.id,x:f?f.x:p-this.nodeWidth/2,y:f?f.y:e+n*(this.nodeHeight+this.nodeSpacing),activation:s.activation,weights:s.weights,bias:s.bias};if(or.push(u),v===0)for(let g=0;g<V;g++)j.push({from:`input_${g}`,to:s.id,weight:s.weights[g],bias:s.bias});else ae.layers[v-1].neurons.forEach((g,h)=>{j.push({from:g.id,to:s.id,weight:s.weights[h],bias:s.bias})})})}),console.log("Generated nodes:",or),console.log("Generated connections:",j),Ne){const{input:A,layerOutputs:v}=Ne;or.forEach(p=>{const[r,e,s]=p.id.split("_"),n=parseInt(e),l=parseInt(s);r==="input"&&A[l]!==void 0?p.outputValue=A[l]:r==="neuron"&&v[n]&&v[n][l]!==void 0&&(p.outputValue=v[n][l],p.inputValues=n===0?A:Ne?.layerOutputs?.[n-1])})}return{nodes:or,connections:j}}findNodeAt(ae,xe,Ne,Ze,or,j){const V=(ae-or)/Ze,t=(xe-j)/Ze;for(const b of Ne)if(V>=b.x&&V<=b.x+this.nodeWidth&&t>=b.y&&t<=b.y+this.nodeHeight)return b;return null}updateDimensions(ae,xe){this.canvasWidth=ae,this.canvasHeight=xe}}var Tp=(oe,ae)=>{let xe;const Ne=()=>clearTimeout(xe);return E1()&&$c(Ne),Object.assign((...or)=>{xe!==void 0&&Ne(),xe=setTimeout(()=>oe(...or),ae)},{clear:Ne})};class mx{constructor(ae){this.canvas=ae,this.ctx=ae.getContext("2d"),this.nodeWidth=60,this.nodeHeight=40,this.debouncedRender=Tp((xe,Ne)=>{this._render(xe,Ne)},16),this.lastRenderedSelectedNode=null}ctx;scale=1;offsetX=0;offsetY=0;debouncedRender;nodeWidth;nodeHeight;highlightedNodeId=null;lastRenderedData;lastRenderedSelectedNode;render(ae,xe){this.lastRenderedData=ae,this.lastRenderedSelectedNode=xe,this._render(ae,xe)}setHighlightedNode(ae){this.highlightedNodeId=ae,this.debouncedRender(this.lastRenderedData,this.lastRenderedSelectedNode)}pan(ae,xe){this.offsetX+=ae/this.scale,this.offsetY+=xe/this.scale}zoom(ae,xe,Ne){const Ze=this.scale;this.scale*=Ne,this.scale=Math.max(.1,Math.min(5,this.scale)),this.offsetX=ae-(ae-this.offsetX)*(this.scale/Ze),this.offsetY=xe-(xe-this.offsetY)*(this.scale/Ze)}getScaledMousePosition(ae,xe){const Ne=this.canvas.getBoundingClientRect(),Ze=(ae-Ne.left-this.offsetX)/this.scale,or=(xe-Ne.top-this.offsetY)/this.scale;return{x:Ze,y:or}}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawNodes(ae,xe){ae.forEach(Ne=>{const Ze=Ne.id===this.highlightedNodeId;switch(Ne.layerId){case"input":this.drawInputNode(Ne,Ze);break;default:this.drawHiddenNode(Ne,xe,Ze);break}})}drawHiddenNode(ae,xe,Ne){const Ze="rgba(255, 255, 255, 0.8)",or=Bn.border,j=Bn.textDark;this.ctx.fillStyle=Ze,this.ctx.strokeStyle=or,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.roundRect(ae.x,ae.y,50,30,5),this.ctx.fill(),this.ctx.stroke(),ae.layerId!=="input"&&ae.activation&&(this.ctx.fillStyle=Bn.primary,this.ctx.font="10px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(ae.activation,ae.x+25,ae.y+10)),this.ctx.fillStyle=j,this.ctx.font="bold 9px Arial",this.ctx.fillText(ae.label,ae.x+25,ae.y+22),this.drawBias(ae),ae.outputValue!==void 0&&this.drawOutputValue(ae),xe&&ae.id===xe.id&&this.highlightSelectedNeuron(ae),Ne&&(this.ctx.shadowColor=Bn.primary,this.ctx.shadowBlur=15,this.ctx.lineWidth=3,this.ctx.strokeStyle=Bn.primary,this.ctx.stroke(),this.ctx.shadowBlur=0,this.ctx.lineWidth=1)}drawInputNode(ae,xe){const Ne=Bn.surface,Ze=Bn.primary,or=Bn.text,j=Bn.primary,V=110,t=40,b=5;this.ctx.fillStyle=Ne,this.ctx.strokeStyle=Ze,this.ctx.lineWidth=2,this.ctx.beginPath(),this.ctx.roundRect(ae.x,ae.y,V,t,10),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle=Bn.primary,this.ctx.font="bold 18px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText("I",ae.x+15,ae.y+t/2),this.ctx.fillStyle=or,this.ctx.font="12px Arial",this.ctx.textAlign="left",this.ctx.textBaseline="top";const P=this.truncateText(ae.label,V-40,"12px Arial");if(this.ctx.fillText(P,ae.x+30,ae.y+b),ae.outputValue!==void 0){this.ctx.fillStyle=j,this.ctx.font="bold 14px Arial",this.ctx.textAlign="right",this.ctx.textBaseline="bottom";const o=ae.outputValue.toFixed(2),L=this.truncateText(o,V-35,"bold 14px Arial");this.ctx.fillText(L,ae.x+V-b,ae.y+t-b)}xe&&(this.ctx.shadowColor=Bn.primary,this.ctx.shadowBlur=15,this.ctx.lineWidth=4,this.ctx.strokeStyle=Bn.primary,this.ctx.stroke(),this.ctx.shadowBlur=0,this.ctx.lineWidth=2)}truncateText(ae,xe,Ne){this.ctx.font=Ne;let Ze=this.ctx.measureText(ae).width,or="...",j=ae;if(Ze<=xe)return ae;for(;Ze>xe;)j=j.slice(0,-1),Ze=this.ctx.measureText(j+or).width;return j+or}drawBias(ae){const xe=ae.x-20,Ne=ae.y+15;this.ctx.beginPath(),this.ctx.moveTo(xe,Ne-8),this.ctx.lineTo(xe+8,Ne),this.ctx.lineTo(xe,Ne+8),this.ctx.lineTo(xe-8,Ne),this.ctx.closePath(),this.ctx.fillStyle=ae.bias>=0?Bn.secondary:Bn.secondaryDark,this.ctx.fill(),this.ctx.strokeStyle=Bn.border,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.fillStyle=Bn.text,this.ctx.font="bold 8px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(`${ae.bias>=0?"+":"-"}${Math.abs(ae.bias).toFixed(2)}`,xe,Ne),this.ctx.fillStyle=Bn.textLight,this.ctx.font="7px Arial",this.ctx.fillText("Bias",xe,Ne+15)}drawOutputValue(ae){const xe=ae.x+60,Ne=ae.y+15;this.ctx.beginPath(),this.ctx.moveTo(xe+10,Ne),this.ctx.lineTo(xe+5,Ne-8.66),this.ctx.lineTo(xe-5,Ne-8.66),this.ctx.lineTo(xe-10,Ne),this.ctx.lineTo(xe-5,Ne+8.66),this.ctx.lineTo(xe+5,Ne+8.66),this.ctx.closePath(),this.ctx.fillStyle=Bn.primary,this.ctx.fill(),this.ctx.strokeStyle=Bn.border,this.ctx.lineWidth=1,this.ctx.stroke(),this.ctx.fillStyle=Bn.text,this.ctx.font="bold 8px Arial",this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(ae.outputValue.toFixed(2),xe,Ne),this.ctx.fillStyle=Bn.textLight,this.ctx.font="7px Arial",this.ctx.fillText("Output",xe,Ne+15)}drawConnections(ae,xe){ae.forEach(Ne=>{const Ze=xe.find(A=>A.id===Ne.from),or=xe.find(A=>A.id===Ne.to),j=Ze.x+50,V=Ze.y+15,t=or.x,b=or.y+15,P=this.getConnectionColor(Ne.weight);this.drawCurvedArrow(j,V,t,b,P);const o=(j+t)/2,L=(V+b)/2-10;this.drawLabel(o,L,`x${Ne.weight.toFixed(2)}`)})}drawLabel(ae,xe,Ne){this.ctx.font="8px Arial",this.ctx.fillStyle=Bn.textLight,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.fillText(Ne,ae,xe)}drawCurvedArrow(ae,xe,Ne,Ze,or){const V=Math.abs(Ne-ae)*.2;this.ctx.strokeStyle=or,this.ctx.fillStyle=or,this.ctx.lineWidth=1,this.ctx.beginPath(),this.ctx.moveTo(ae,xe),this.ctx.bezierCurveTo(ae+V,xe,Ne-V,Ze,Ne,Ze),this.ctx.stroke();const t=Ne-V*2,P=Math.atan2(Ze-Ze,Ne-t);this.ctx.beginPath(),this.ctx.moveTo(Ne,Ze),this.ctx.lineTo(Ne-5*Math.cos(P-Math.PI/6),Ze-5*Math.sin(P-Math.PI/6)),this.ctx.lineTo(Ne-5*Math.cos(P+Math.PI/6),Ze-5*Math.sin(P+Math.PI/6)),this.ctx.closePath(),this.ctx.fill()}highlightSelectedNeuron(ae){this.ctx.save(),this.ctx.strokeStyle="#FF4500",this.ctx.lineWidth=4,this.ctx.shadowColor="#FF4500",this.ctx.shadowBlur=15,this.ctx.beginPath(),this.ctx.roundRect(ae.x-2,ae.y-2,52,34,10),this.ctx.stroke(),this.ctx.restore()}getConnectionColor(ae){const xe=Math.max(-1,Math.min(1,ae)),Ne=.6,Ze=.3;return xe<0?`rgba(70, ${Math.round(255*(1+xe))}, 255, ${Ne+Ze*Math.abs(xe)})`:`rgba(255, ${Math.round(255*(1-xe))}, 70, ${Ne+Ze*Math.abs(xe)})`}drawConnection(ae,xe,Ne){const Ze=this.getConnectionColor(Ne);this.ctx.beginPath(),this.ctx.moveTo(ae.x,ae.y),this.ctx.lineTo(xe.x,xe.y),this.ctx.strokeStyle=Ze,this.ctx.lineWidth=Math.abs(Ne)*2+1,this.ctx.stroke()}_render(ae,xe){this.clear(),this.ctx.save(),this.ctx.translate(this.offsetX,this.offsetY),this.ctx.scale(this.scale,this.scale),this.drawConnections(ae.connections,ae.nodes),this.drawNodes(ae.nodes,xe),this.ctx.restore()}updateDimensions(ae,xe){this.canvas.width=ae,this.canvas.height=xe,this.render(this.lastRenderedData,this.lastRenderedSelectedNode)}}function xx(oe){const[ae,xe]=Hi(null),[Ne,Ze]=Hi(null),[or,j]=Hi(null),[V,t]=Hi(null),[b,P]=Hi(!1),o=A=>{const v=V();if(!v){console.error("Container ref is undefined");return}const{width:p,height:r}=v.getBoundingClientRect();p>0&&r>0?(A.width=p,A.height=r,xe(new yx(A.width,A.height)),Ze(new mx(A)),oe(),P(!0)):(console.warn("Container dimensions are zero, retrying in 100ms"),setTimeout(()=>o(A),100))},L=()=>{const A=V(),v=or();if(A&&v){const{width:p,height:r}=A.getBoundingClientRect();p>0&&r>0&&(v.width=p,v.height=r,ae()?.updateDimensions(p,r),Ne()?.updateDimensions(p,r),oe())}};return Rl(()=>{const A=V(),v=or();if(A&&v){const p=new ResizeObserver(L);p.observe(A),$c(()=>{p.disconnect()})}}),{layoutCalculator:ae,renderer:Ne,canvasRef:or,setCanvasRef:j,setContainerRef:t,isCanvasInitialized:b,initializeCanvas:o,handleResize:L}}const bx=Wn`
  width: 100%;
  height: 0;
  padding-bottom: 75%;
  position: relative;
  min-height: 400px;
  overflow: hidden;
  border: 1px solid ${Bn.border};
  background-color: #1B213D;  // A darker shade for better contrast
  
  @media (max-width: 768px) {
    padding-bottom: 100%;
  }
`,wx=Wn`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,Tx=Wn`
  position: fixed;
  display: none;
  background-color: ${Bn.surface};
  border: 1px solid ${Bn.border};
  padding: 5px;
  border-radius: 4px;
  font-size: 12px;
  pointer-events: none;
  z-index: 1000;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
`;var Ax=gi("<div><canvas>"),Mx=gi("<div>");const K0=oe=>{const{layoutCalculator:ae,renderer:xe,canvasRef:Ne,setCanvasRef:Ze,setContainerRef:or,isCanvasInitialized:j,initializeCanvas:V,handleResize:t}=xx(oe.onVisualizationUpdate),[b,P]=Hi(!1),[o,L]=Hi(null),[A,v]=Hi({}),[p,r]=Hi(null),[e,s]=Hi(0);let n=null,l=null,f={x:0,y:0};const u=Gs(()=>{const a=ae();if(!a)return console.warn("Layout calculator is not initialized"),{nodes:[],connections:[]};const E=Va.network.toJSON();return a.calculateLayout(E,Va.currentInput,Va.simulationResult,A())}),g=Gs(()=>o()&&u().nodes.find(a=>a.id===o()?.id)||null);Rl(()=>{j()&&h()}),Rl(()=>{const a=xe(),E=o();a&&a.render(u(),E)}),Rl(()=>{const a=xe();if(a)switch(e()){case 1:a.setHighlightedNode("neuron_0_0");break;case 2:a.setHighlightedNode(null);break}});const h=()=>{const a=Ne();if(a){const E={mousedown:i,mousemove:T,mouseup:M,wheel:c,contextmenu:m=>m.preventDefault()};Object.entries(E).forEach(([m,k])=>{a.addEventListener(m,k,{passive:!1})}),$c(()=>{Object.entries(E).forEach(([m,k])=>{a.removeEventListener(m,k)})})}},T=Tp(a=>{const E=Ne(),m=xe();if(!E||!m)return;const k=E.getBoundingClientRect(),I=a.clientX-k.left,O=a.clientY-k.top;b()?d(a,m):n&&a.buttons===1?x(a,m):S(I,O,m)},2),c=a=>{a.preventDefault(),a.stopPropagation();const E=Ne(),m=xe();if(m&&E){const k=E.getBoundingClientRect(),I=a.clientX-k.left,O=a.clientY-k.top,z=a.deltaY>0?.9:1.1;m.zoom(I,O,z),m.render(u(),o())}},i=a=>{const E=Ne();if(E&&ae&&xe){const m=E.getBoundingClientRect(),k=a.clientX-m.left,I=a.clientY-m.top,O=ae().findNodeAt(k,I,u().nodes,xe().scale,xe().offsetX,xe().offsetY);O?(n=O,l=setTimeout(()=>{l=null},200)):(P(!0),f={x:a.clientX,y:a.clientY})}},d=(a,E)=>{const m=a.clientX-f.x,k=a.clientY-f.y;E.pan(m,k),f={x:a.clientX,y:a.clientY},E.render(u(),o())},x=(a,E)=>{const m=Ne();if(!m||!n)return;const k=m.getBoundingClientRect(),I=(a.clientX-k.left-E.offsetX)/E.scale,O=(a.clientY-k.top-E.offsetY)/E.scale;w(n.id,I,O),E.render(u(),o())},w=(a,E,m)=>{v(k=>({...k,[a]:{x:E,y:m}}))},C=(a,E,m)=>{r({x:a,y:E,text:m})},y=()=>{r(null)},S=(a,E,m)=>{const k=ae();if(!k)return;const I=k.findNodeAt(a,E,u().nodes,m.scale,m.offsetX,m.offsetY);I?(Ne().style.cursor="pointer",C(a,E,`Node: ${I.label}
Output: ${I.outputValue?.toFixed(4)||"N/A"}`)):(Ne().style.cursor="grab",y())},M=()=>{const a=Ne();a&&(Wf(()=>{l!==null&&(clearTimeout(l),n&&(L(n),xe()?.render(u(),n))),P(!1),n=null,l=null,f={x:0,y:0}}),a.style.cursor="grab")};return(()=>{var a=Ax(),E=a.firstChild;return a.addEventListener("resize",m=>{const k=m.target;oe.onResize(k.clientWidth,k.clientHeight),t()}),xv(or,a),E.$$mousedown=i,xv(m=>{Ze(m),m&&V(m)},E),Fn(E,wx),Pa(a,Ya(Xm,{get neuron(){return g()},onClose:()=>{L(null),xe()?.render(u(),null)}}),null),Pa(a,Ya(Dl,{get when(){return p()},children:m=>{const k=m();return(()=>{var I=Mx();return I.style.setProperty("display","block"),Pa(I,()=>k.text),qa(O=>{var z=Wn(Tx," background-color:",Bn.surface,";color:",Bn.text,";border:1px solid ",Bn.border,";box-shadow:0 2px 4px ",Bn.shadow,";",""),B=`${k.x}px`,F=`${k.y}px`;return z!==O.e&&Fn(I,O.e=z),B!==O.t&&((O.t=B)!=null?I.style.setProperty("left",B):I.style.removeProperty("left")),F!==O.a&&((O.a=F)!=null?I.style.setProperty("top",F):I.style.removeProperty("top")),O},{e:void 0,t:void 0,a:void 0}),I})()}}),null),qa(()=>Fn(a,Wn(bx," resize:both;overflow:hidden;min-height:400px;min-width:300px;",""))),a})()};Il(["mousedown"]);const Ru={xs:"0.25rem",sm:"0.5rem",md:"1rem",lg:"1.5rem",xl:"2rem"},yi={button:Wn`
    font-family: ${bi.fontFamily};
    font-size: ${bi.fontSize.xs};
    font-weight: ${bi.fontWeight.medium};
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    cursor: pointer;
    transition: background-color 0.2s, color 0.2s;
    
    color: ${Bn.text};
    background-color: ${Bn.surface};
    
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  `,primaryButton:Wn`
    background-color: ${Bn.primary};
    color: ${Bn.text};
    border: none;
    
    &:hover:not(:disabled) {
      background-color: ${Bn.primaryDark};
    }
  `,secondaryButton:Wn`
    background-color: ${Bn.secondary};
    color: ${Bn.text};
    border: none;
    
    &:hover:not(:disabled) {
      background-color: ${Bn.secondaryDark};
    }
  `,input:Wn`
    font-family: ${bi.fontFamily};
    font-size: ${bi.fontSize.xs};
    padding: 0.125rem 0.25rem;
    border: 1px solid ${Bn.border};
    border-radius: 0.25rem;
    background-color: ${Bn.surface};
    color: ${Bn.text};
    
    &:focus {
      outline: none;
      border-color: ${Bn.primary};
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
  `,card:Wn`
    background-color: ${Bn.surface};
    border-radius: ${Ru.md};
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    padding: ${Ru.md};
  `,label:Wn`
    font-family: ${bi.fontFamily};
    font-size: ${bi.fontSize.xs};
    font-weight: ${bi.fontWeight.medium};
    color: ${Bn.textLight};
    margin-bottom: 0.25rem;
    display: block;
  `,formGroup:Wn`
    margin-bottom: ${Ru.md};
  `,errorText:Wn`
    color: ${Bn.error};
    font-size: ${bi.fontSize.xs};
    margin-top: ${Ru.xs};
  `,sectionTitle:Wn`
    font-size: ${bi.fontSize.lg};
    font-weight: ${bi.fontWeight.bold};
    margin-bottom: 1rem;
  `,breakpoints:{sm:"@media (min-width: 640px)",md:"@media (min-width: 768px)",lg:"@media (min-width: 1024px)",xl:"@media (min-width: 1280px)"}};var Sx=gi("<div><h2>ChatGPT Productivity Function</h2><div></div><button> Learned Function");const J0=()=>{let oe;const[ae,xe]=Hi(!0),Ne=()=>{if(!oe||!Va.trainingData||!Va.network)return;const{xs:or,ys:j}=Va.trainingData,V=Array.from({length:100},(p,r)=>r),t=V.map(qm),b=V.map(p=>Va.network.forward([p])[0].data),P=or.map(p=>p[0]),o=j,L=[{x:V,y:t,type:"scatter",mode:"lines+text",name:"True Function",line:{color:Bn.primary,width:3},hoverinfo:"x+y"},{x:P,y:o,type:"scatter",mode:"markers+text",name:"Training Data",marker:{color:Bn.error,size:8},hoverinfo:"x+y"},{x:V,y:b,type:"scatter",mode:"lines+text",name:"Learned Function",line:{color:Bn.success,width:3,dash:"dash"},visible:ae()?!0:"legendonly",hoverinfo:"x+y"}],A={xaxis:{title:"ChatGPT Usage (%)",range:[0,100],gridcolor:Bn.border,zerolinecolor:Bn.border},yaxis:{title:"Productivity Score",range:[0,100],gridcolor:Bn.border,zerolinecolor:Bn.border},legend:{x:1,xanchor:"right",y:1,bordercolor:Bn.border,borderwidth:1},hovermode:"closest",plot_bgcolor:"#1B213D",paper_bgcolor:"#1B213D",font:{family:bi.fontFamily,size:14,color:Bn.text}},v={responsive:!0,displayModeBar:!0,modeBarButtonsToAdd:["select2d","lasso2d"],modeBarButtonsToRemove:["autoScale2d"],displaylogo:!1,scrollZoom:!0};xd.newPlot(oe,L,A,v),oe.on("plotly_legendclick",p=>(p.curveNumber===2&&xe(!ae()),!1))};S1(()=>{Ne();const or=new ResizeObserver(()=>{oe&&xd.Plots.resize(oe)});oe&&or.observe(oe),$c(()=>{or.disconnect()})}),Rl(()=>{Va.trainingData&&Va.network&&Ne()});const Ze={container:Wn(yi.card," padding:",Ru.xl,";margin-top:",Ru.xl,";background-color:#1B213D;box-shadow:0 4px 6px rgba(0, 0, 0, 0.3);border-radius:8px;height:100%;display:flex;flex-direction:column;@media (max-width: 768px){padding:",Ru.lg,";}",""),title:Wn("font-size:",bi.fontSize["2xl"],";font-weight:",bi.fontWeight.bold,";margin-bottom:",Ru.lg,";color:",Bn.text,";",""),plotContainer:Wn({name:"13qp02y",styles:"flex-grow:1;min-height:0;background-color:#1B213D"}),toggleButton:Wn(yi.button," ",yi.secondaryButton," display:flex;align-items:center;justify-content:center;gap:",Ru.sm,";width:100%;max-width:200px;margin:",Ru.md," auto 0;","")};return(()=>{var or=Sx(),j=or.firstChild,V=j.nextSibling,t=V.nextSibling,b=t.firstChild;return xv(P=>oe=P,V),t.$$click=()=>xe(!ae()),Pa(t,()=>ae()?"Hide":"Show",b),qa(P=>{var o=Ze.container,L=Ze.title,A=Ze.plotContainer,v=Ze.toggleButton;return o!==P.e&&Fn(or,P.e=o),L!==P.t&&Fn(j,P.t=L),A!==P.a&&Fn(V,P.a=A),v!==P.o&&Fn(t,P.o=v),P},{e:void 0,t:void 0,a:void 0,o:void 0}),or})()};Il(["click"]);var Ex=gi("<div><div>");const Ev=oe=>{const[ae,xe]=Hi(!1),Ne={container:Wn({name:"1nrevy2",styles:"position:relative;display:inline-block"}),tooltip:Wn("position:absolute;bottom:100%;left:50%;transform:translateX(-50%);background-color:",Bn.text,";color:",Bn.surface,";padding:8px 12px;border-radius:4px;font-size:14px;white-space:nowrap;z-index:1000;opacity:",ae()?1:0,";transition:opacity 0.2s;pointer-events:none;","")};return(()=>{var Ze=Ex(),or=Ze.firstChild;return Ze.addEventListener("mouseleave",()=>xe(!1)),Ze.addEventListener("mouseenter",()=>xe(!0)),Pa(Ze,()=>oe.children,or),Pa(or,()=>oe.content),qa(j=>{var V=Ne.container,t=Ne.tooltip;return V!==j.e&&Fn(Ze,j.e=V),t!==j.t&&Fn(or,j.t=t),j},{e:void 0,t:void 0}),Ze})()};var Cx=gi('<input type=text placeholder="e.g., 5,3,1">'),Lx=gi('<input type=text placeholder="e.g., tanh,relu,sigmoid">'),Px=gi("<div><form><div><label>Layer sizes:</label></div><div><label>Activations:</label></div><button type=submit>Update Network</button></form><div><p>Current: <!> | ");const Hf={container:Wn(yi.card," max-width:100%;",""),title:Wn("font-size:",bi.fontSize.xl,";font-weight:",bi.fontWeight.bold,";margin-bottom:1rem;color:",Bn.text,";",""),form:Wn({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),inputGroup:Wn({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),label:Wn(yi.label,";",""),input:Wn(yi.input," width:100%;",""),button:Wn(yi.button," ",yi.primaryButton," width:100%;",""),currentConfig:Wn("margin-top:1rem;font-size:",bi.fontSize.sm,";color:",Bn.textLight,";","")},Rx=()=>{const[oe,ae]=Hi(Va.network.layers.map(V=>V.neurons.length).join(",")),[xe,Ne]=Hi(Va.network.activations.join(","));Rl(()=>{console.log("Current network store:",Va.network)});const Ze=V=>{const t=V.target;ae(t.value)},or=V=>{const t=V.target;Ne(t.value)},j=V=>{V.preventDefault();const t=oe().split(",").map(Number).filter(P=>!isNaN(P)),b=xe().split(",");if(t.length===0){alert("Please enter at least one layer size");return}if(b.length!==t.length){alert("The number of activation functions should be equal to the number of layers");return}bc.updateNetworkConfig(t,b),ae(t.join(",")),Ne(b.join(","))};return(()=>{var V=Px(),t=V.firstChild,b=t.firstChild,P=b.firstChild;P.firstChild;var o=b.nextSibling,L=o.firstChild;L.firstChild;var A=o.nextSibling,v=t.nextSibling,p=v.firstChild,r=p.firstChild,e=r.nextSibling;return e.nextSibling,t.addEventListener("submit",j),Pa(P,Ya(Ev,{content:"Enter the number of neurons for each layer, separated by commas. E.g., 5,3,1",get children(){var s=Cx();return s.$$input=Ze,qa(()=>Fn(s,Hf.input)),qa(()=>s.value=oe()),s}}),null),Pa(L,Ya(Ev,{content:"Enter the activation function for each layer, separated by commas. E.g., tanh,relu,sigmoid",get children(){var s=Lx();return s.$$input=or,qa(()=>Fn(s,Hf.input)),qa(()=>s.value=xe()),s}}),null),Pa(p,()=>Va.network.layers.map(s=>s.neurons.length).join(", "),e),Pa(p,()=>Va.network.activations.join(", "),null),qa(s=>{var n=Hf.container,l=Hf.form,f=Hf.inputGroup,u=yi.label,g=Hf.inputGroup,h=yi.label,T=Hf.button,c=Hf.currentConfig;return n!==s.e&&Fn(V,s.e=n),l!==s.t&&Fn(t,s.t=l),f!==s.a&&Fn(b,s.a=f),u!==s.o&&Fn(P,s.o=u),g!==s.i&&Fn(o,s.i=g),h!==s.n&&Fn(L,s.n=h),T!==s.s&&Fn(A,s.s=T),c!==s.h&&Fn(v,s.h=c),s},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),V})()};Il(["input"]);var Dx=gi("<input type=number step=0.001 min=0.001 max=1>"),Ix=gi("<div><form><div><label>Learning Rate:</label></div><button type=submit>Update Training Config");const sv={container:Wn(yi.card,";",""),title:Wn("font-size:",bi.fontSize.xl,";font-weight:",bi.fontWeight.bold,";margin-bottom:1rem;color:",Bn.text,";",""),form:Wn({name:"yv62ki",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:0.5rem"}),inputGroup:Wn({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),label:Wn(yi.label,";",""),input:Wn(yi.input,";",""),button:Wn(yi.button," ",yi.primaryButton," grid-column:span 2;","")},kx=()=>{const oe=ae=>{ae.preventDefault(),console.log("Training config updated:",Va.trainingConfig)};return(()=>{var ae=Ix(),xe=ae.firstChild,Ne=xe.firstChild,Ze=Ne.firstChild;Ze.firstChild;var or=Ne.nextSibling;return xe.addEventListener("submit",oe),Pa(Ze,Ya(Ev,{content:"The learning rate determines how quickly the model adapts to the problem. Typical values range from 0.001 to 0.1.",get children(){var j=Dx();return j.$$input=V=>Hs("trainingConfig","learningRate",Number(V.currentTarget.value)),qa(()=>Fn(j,yi.input)),qa(()=>j.value=Va.trainingConfig.learningRate),j}}),null),qa(j=>{var V=sv.container,t=sv.form,b=sv.inputGroup,P=yi.label,o=sv.button;return V!==j.e&&Fn(ae,j.e=V),t!==j.t&&Fn(xe,j.t=t),b!==j.a&&Fn(Ne,j.a=b),P!==j.o&&Fn(Ze,j.o=P),o!==j.i&&Fn(or,j.i=o),j},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),ae})()};Il(["input"]);var zx=gi("<svg stroke-width=0>");function kl(oe,ae){const xe=_0(oe.a,ae),[Ne,Ze]=_1(xe,["src"]),[or,j]=Hi(""),V=Gs(()=>ae.title?`${oe.c}<title>${ae.title}</title>`:oe.c);return Rl(()=>j(V())),$c(()=>{j("")}),(()=>{var t=zx();return X1(t,_0({get stroke(){return oe.a?.stroke},get color(){return ae.color||"currentColor"},get fill(){return ae.color||"currentColor"},get style(){return{...ae.style,overflow:"visible"}}},Ze,{get height(){return ae.size||"1em"},get width(){return ae.size||"1em"},xmlns:"http://www.w3.org/2000/svg",get innerHTML(){return or()}}),!0),Pa(t,()=>J1),t})()}function _x(oe){return kl({a:{viewBox:"0 0 384 512"},c:'<path d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8V64c0-17.7-14.3-32-32-32s-32 14.3-32 32v306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"/>'},oe)}function Fx(oe){return kl({a:{viewBox:"0 0 448 512"},c:'<path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H109.3l105.3-105.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/>'},oe)}function Ap(oe){return kl({a:{viewBox:"0 0 448 512"},c:'<path d="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h306.7L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"/>'},oe)}function Ox(oe){return kl({a:{viewBox:"0 0 512 512"},c:'<path d="M459.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29V96c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4L288 214.3v83.4l171.5 142.9zM256 352V96c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160C4.2 237.5 0 246.5 0 256s4.2 18.5 11.5 24.6l192 160c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29v-64z"/>'},oe)}function Mp(oe){return kl({a:{viewBox:"0 0 384 512"},c:'<path d="M64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64H64zm32 64h192c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1-64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm-32 64c0-17.7 14.3-32 32-32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H96c-17.7 0-32-14.3-32-32zm128-160a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1-64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1-64 0 32 32 0 1 1 64 0zm-32 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"/>'},oe)}function Bx(oe){return kl({a:{viewBox:"0 0 512 512"},c:'<path d="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"/>'},oe)}function Nx(oe){return kl({a:{viewBox:"0 0 320 512"},c:'<path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"/>'},oe)}function Ux(oe){return kl({a:{viewBox:"0 0 320 512"},c:'<path d="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"/>'},oe)}function Vx(oe){return kl({a:{viewBox:"0 0 512 512"},c:'<path d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"/>'},oe)}function Hx(oe){return kl({a:{viewBox:"0 0 512 512"},c:'<path d="M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416V96c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4L224 214.3v83.4L52.5 440.6zM256 352V96c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4S256 428.4 256 416v-64z"/>'},oe)}function Gx(oe){return kl({a:{viewBox:"0 0 576 512"},c:'<path d="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0l-218.6-101c-8.5-4-13.9-12.5-13.9-21.8s5.4-17.9 13.9-21.8l218.6-101zm212.4 204.4 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0l-218.6-101c-8.5-4-13.9-12.5-13.9-21.8s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2a88.1 88.1 0 0 0 73.8 0l152-70.2zm-152 198.2 152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0l-218.6-101c-8.5-4-13.9-12.5-13.9-21.8s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2a88.1 88.1 0 0 0 73.8 0z"/>'},oe)}function Wx(oe){return kl({a:{viewBox:"0 0 512 512"},c:'<path d="M128 176a128 128 0 1 1 256 0 128 128 0 1 1-256 0zM391.8 64C359.5 24.9 310.7 0 256 0S152.5 24.9 120.2 64H64C28.7 64 0 92.7 0 128v320c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V128c0-35.3-28.7-64-64-64h-56.2zM296 224c0-10.6-4.1-20.2-10.9-27.4l33.6-78.3c3.5-8.1-.3-17.5-8.4-21s-17.5.3-21 8.4L255.7 184c-22 .1-39.7 18-39.7 40 0 22.1 17.9 40 40 40s40-17.9 40-40z"/>'},oe)}var Yx=gi("<div><div></div><div>Update</div><div>"),Xx=gi("<div><span></span><span>");const Zx=oe=>{const ae={container:Wn({name:"1qlfvbe",styles:"display:flex;flex-direction:column;align-items:center;background-color:#e6f7ff;border:1px solid #91d5ff;border-radius:0.25rem;padding:0.5rem;box-shadow:0 1px 2px rgba(0, 0, 0, 0.1);transition:transform 0.2s,box-shadow 0.2s;&:hover{transform:translateY(-2px);box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);}"}),stepIcon:Wn({name:"zvcn9q",styles:"font-size:1rem;color:#1890ff"}),stepLabel:Wn({name:"1oxtz3v",styles:"font-size:0.75rem;font-weight:bold;margin-top:0.25rem"}),weightList:Wn({name:"i5etcb",styles:"width:100%;margin-top:0.25rem;font-size:0.625rem"}),weightItem:Wn({name:"q3zkte",styles:"display:flex;justify-content:space-between;align-items:center;margin-bottom:0.125rem"}),weightValue:Wn({name:"1n7r223",styles:"font-family:monospace"}),arrow:Wn({name:"5gella",styles:"color:#52c41a;margin:0 0.125rem"})};return(()=>{var xe=Yx(),Ne=xe.firstChild,Ze=Ne.nextSibling,or=Ze.nextSibling;return Pa(Ne,Ya(_x,{})),Pa(or,Ya(fv,{get each(){return oe.oldWeights},children:(j,V)=>(()=>{var t=Xx(),b=t.firstChild,P=b.nextSibling;return Pa(b,()=>j.toFixed(2)),Pa(t,Ya(Ap,{get class(){return ae.arrow}}),P),Pa(P,()=>oe.newWeights[V()].toFixed(2)),qa(o=>{var L=ae.weightItem,A=ae.weightValue,v=ae.weightValue;return L!==o.e&&Fn(t,o.e=L),A!==o.t&&Fn(b,o.t=A),v!==o.a&&Fn(P,o.a=v),o},{e:void 0,t:void 0,a:void 0}),t})()})),qa(j=>{var V=ae.container,t=ae.stepIcon,b=ae.stepLabel,P=ae.weightList;return V!==j.e&&Fn(xe,j.e=V),t!==j.t&&Fn(Ne,j.t=t),b!==j.a&&Fn(Ze,j.a=b),P!==j.o&&Fn(or,j.o=P),j},{e:void 0,t:void 0,a:void 0,o:void 0}),xe})()};var jx=gi("<div><div></div><div>Loss</div><div><div>"),Kx=gi("<div><div></div><div>Backward</div><div><div>"),Jx=gi("<div><div><div>"),Qx=gi("<div> Steps"),$x=gi("<div><div><div></div><div>Forward</div><div><div>In: </div><div>Out: "),qx=gi("<div><h4>Neuron </h4><div><div><span>B:</span><span>"),tb=gi("<div><span>W<!>:</span><span>");const eb=oe=>{const xe=Gs(()=>{const or=Math.max(0,oe.forwardStepResults.length-4);return oe.forwardStepResults.slice(or)}),Ne=Wn("display:flex;flex-direction:column;align-items:center;background-color:",Bn.surface,";border-radius:0.75rem;padding:0.75rem;width:130px;height:130px;justify-content:space-between;box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);transition:transform 0.2s,box-shadow 0.2s;&:hover{transform:translateY(-3px);box-shadow:0 6px 8px rgba(0, 0, 0, 0.15);}",""),Ze={container:Wn("background-color:",Bn.background,";border-radius:1rem;padding:1rem;max-width:400px;box-shadow:0 4px 8px rgba(0, 0, 0, 0.1);",""),stepsVisualization:Wn({name:"17isdg2",styles:"display:flex;align-items:flex-start;justify-content:center;gap:1rem;flex-wrap:wrap"}),forwardStepsContainer:Wn({name:"1lv8af9",styles:"position:relative;width:150px;height:170px"}),forwardStep:Wn({name:"1vei4rz",styles:"position:absolute;width:100%;height:100%;transition:all 0.3s ease;cursor:pointer;&:hover{transform:translateY(-5px)!important;box-shadow:0 6px 8px rgba(0, 0, 0, 0.15);}"}),step:Ne,stepIcon:Wn("font-size:1.5rem;color:",Bn.primary,";",""),stepLabel:Wn("font-size:0.875rem;font-weight:bold;color:",Bn.text,";margin:0.5rem 0;",""),stepDetails:Wn("text-align:center;width:100%;font-size:0.75rem;color:",Bn.textLight,";",""),lossStep:Wn(Ne," background-color:",Bn.warning,"22;",""),backwardStep:Wn(Ne," background-color:",Bn.error,"11;width:150px;height:150px;",""),backwardStepIcon:Wn("font-size:1.5rem;color:",Bn.error,";",""),stepCounter:Wn("position:absolute;top:-12px;left:50%;transform:translateX(-50%);background-color:",Bn.primary,";color:",Bn.surface,";border-radius:1rem;padding:4px 8px;font-size:0.75rem;font-weight:bold;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);display:flex;align-items:center;gap:4px;z-index:10;",""),gradientsContainer:Wn("display:flex;flex-direction:column;gap:0.25rem;max-height:100px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:",Bn.primary," ",Bn.surface,";&::-webkit-scrollbar{width:4px;}&::-webkit-scrollbar-track{background:",Bn.surface,";}&::-webkit-scrollbar-thumb{background-color:",Bn.primary,";border-radius:2px;}",""),neuronGradients:Wn("background-color:",Bn.surface,"88;border-radius:0.25rem;padding:0.25rem;margin-bottom:0.25rem;",""),neuronLabel:Wn("font-size:0.75rem;font-weight:bold;color:",Bn.primary,";margin-bottom:0.25rem;",""),gradientGroup:Wn({name:"10itbrw",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:0.125rem"}),gradientItem:Wn("display:flex;justify-content:space-between;font-size:0.625rem;color:",Bn.textLight,";",""),gradientLabel:Wn("font-weight:bold;color:",Bn.text,";",""),gradientValue:Wn("color:",Bn.textLight,";","")};return(()=>{var or=Jx(),j=or.firstChild,V=j.firstChild;return Pa(V,(()=>{var t=Gs(()=>oe.forwardStepResults.length>1);return()=>t()&&(()=>{var b=Qx(),P=b.firstChild;return Pa(b,Ya(Gx,{}),P),Pa(b,()=>oe.forwardStepResults.length,P),qa(()=>Fn(b,Ze.stepCounter)),b})()})(),null),Pa(V,Ya(fv,{get each(){return xe()},children:(t,b)=>(()=>{var P=$x(),o=P.firstChild,L=o.firstChild,A=L.nextSibling,v=A.nextSibling,p=v.firstChild;p.firstChild;var r=p.nextSibling;return r.firstChild,Pa(L,Ya(Ap,{})),Pa(p,()=>t.input.map(e=>e.toFixed(2)).join(","),null),Pa(r,()=>t.output.map(e=>e.toFixed(3)).join(","),null),qa(e=>{var s=Ze.forwardStep,n=`translateY(${-5*b()}px) translateX(${-2*b()}px)`,l=4-b(),f=Math.max(.8,1-b()*.1),u=Ze.step,g=Ze.stepIcon,h=Ze.stepLabel,T=Ze.stepDetails;return s!==e.e&&Fn(P,e.e=s),n!==e.t&&((e.t=n)!=null?P.style.setProperty("transform",n):P.style.removeProperty("transform")),l!==e.a&&((e.a=l)!=null?P.style.setProperty("z-index",l):P.style.removeProperty("z-index")),f!==e.o&&((e.o=f)!=null?P.style.setProperty("opacity",f):P.style.removeProperty("opacity")),u!==e.i&&Fn(o,e.i=u),g!==e.n&&Fn(L,e.n=g),h!==e.s&&Fn(A,e.s=h),T!==e.h&&Fn(v,e.h=T),e},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),P})()}),null),Pa(j,Ya(Dl,{get when(){return oe.currentLoss!==void 0&&oe.currentLoss!==null},get children(){var t=jx(),b=t.firstChild,P=b.nextSibling,o=P.nextSibling,L=o.firstChild;return Pa(b,Ya(Mp,{})),Pa(L,()=>oe.currentLoss?.toFixed(5)||"N/A"),qa(A=>{var v=Ze.lossStep,p=Ze.stepIcon,r=Ze.stepLabel,e=Ze.stepDetails;return v!==A.e&&Fn(t,A.e=v),p!==A.t&&Fn(b,A.t=p),r!==A.a&&Fn(P,A.a=r),e!==A.o&&Fn(o,A.o=e),A},{e:void 0,t:void 0,a:void 0,o:void 0}),t}}),null),Pa(j,Ya(Dl,{get when(){return oe.currentLoss!==void 0&&oe.currentLoss!==null&&oe.backwardStepResults.length>0},get children(){var t=Kx(),b=t.firstChild,P=b.nextSibling,o=P.nextSibling,L=o.firstChild;return Pa(b,Ya(Fx,{})),Pa(L,Ya(fv,{get each(){return oe.backwardStepResults},children:(A,v)=>(()=>{var p=qx(),r=p.firstChild;r.firstChild;var e=r.nextSibling,s=e.firstChild,n=s.firstChild,l=n.nextSibling;return Pa(r,v,null),Pa(e,Ya(fv,{get each(){return A.gradients.slice(0,A.weights)},children:(f,u)=>(()=>{var g=tb(),h=g.firstChild,T=h.firstChild,c=T.nextSibling;c.nextSibling;var i=h.nextSibling;return Pa(h,()=>u()+1,c),Pa(i,()=>f.toFixed(4)),qa(d=>{var x=Ze.gradientItem,w=Ze.gradientLabel,C=Ze.gradientValue;return x!==d.e&&Fn(g,d.e=x),w!==d.t&&Fn(h,d.t=w),C!==d.a&&Fn(i,d.a=C),d},{e:void 0,t:void 0,a:void 0}),g})()}),s),Pa(l,()=>A.gradients[A.gradients.length-1].toFixed(4)),qa(f=>{var u=Ze.neuronGradients,g=Ze.neuronLabel,h=Ze.gradientGroup,T=Ze.gradientItem,c=Ze.gradientLabel,i=Ze.gradientValue;return u!==f.e&&Fn(p,f.e=u),g!==f.t&&Fn(r,f.t=g),h!==f.a&&Fn(e,f.a=h),T!==f.o&&Fn(s,f.o=T),c!==f.i&&Fn(n,f.i=c),i!==f.n&&Fn(l,f.n=i),f},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),p})()})),qa(A=>{var v=Ze.backwardStep,p=Ze.backwardStepIcon,r=Ze.stepLabel,e=Ze.stepDetails,s=Ze.gradientsContainer;return v!==A.e&&Fn(t,A.e=v),p!==A.t&&Fn(b,A.t=p),r!==A.a&&Fn(P,A.a=r),e!==A.o&&Fn(o,A.o=e),s!==A.i&&Fn(L,A.i=s),A},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),t}}),null),Pa(j,Ya(Dl,{get when(){return oe.weightUpdateResults?.newWeights?.length},get children(){return Ya(Zx,{get oldWeights(){return oe.weightUpdateResults.oldWeights??[]},get newWeights(){return oe.weightUpdateResults.newWeights??[]}})}}),null),qa(t=>{var b=Ze.container,P=Ze.stepsVisualization,o=Ze.forwardStepsContainer;return b!==t.e&&Fn(or,t.e=b),P!==t.t&&Fn(j,t.t=P),o!==t.a&&Fn(V,t.a=o),t},{e:void 0,t:void 0,a:void 0}),or})()};var rb=gi("<div><div><div>Iteration</div><div> / </div><div><div></div></div></div><div><div>Current Loss</div><div>");const nb=oe=>{const ae={statusGrid:Wn({name:"1gbi25y",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;margin-bottom:1rem"}),statusItem:Wn({name:"qazqbw",styles:"padding:1rem;border-radius:0.5rem;transition:all 0.3s ease;&:hover{box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);transform:translateY(-2px);}"}),iterationItem:Wn("background-color:",Bn.primary,"22;",""),lossItem:Wn("background-color:",Bn.warning,"22;",""),statusLabel:Wn("font-size:0.875rem;color:",Bn.textLight,";margin-bottom:0.25rem;",""),statusValue:Wn({name:"6z9tyc",styles:"font-size:1.25rem;font-weight:bold"}),progressBar:Wn("width:100%;height:0.5rem;background-color:",Bn.border,";border-radius:0.25rem;overflow:hidden;margin-top:0.5rem;",""),progressFill:Wn("height:100%;background-color:",Bn.primary,";transition:width 300ms ease-in-out;","")};return(()=>{var xe=rb(),Ne=xe.firstChild,Ze=Ne.firstChild,or=Ze.nextSibling,j=or.firstChild,V=or.nextSibling,t=V.firstChild,b=Ne.nextSibling,P=b.firstChild,o=P.nextSibling;return Pa(or,()=>oe.iteration,j),Pa(or,()=>oe.totalIterations,null),Pa(o,(()=>{var L=Gs(()=>oe.currentLoss!==null);return()=>L()?oe.currentLoss.toFixed(4):"N/A"})()),qa(L=>{var A=ae.statusGrid,v=`${ae.statusItem} ${ae.iterationItem}`,p=ae.statusLabel,r=ae.statusValue,e=ae.progressBar,s=ae.progressFill,n=`${oe.iterationProgress*100}%`,l=`${ae.statusItem} ${ae.lossItem}`,f=ae.statusLabel,u=ae.statusValue,g=oe.getLossColor(oe.currentLoss);return A!==L.e&&Fn(xe,L.e=A),v!==L.t&&Fn(Ne,L.t=v),p!==L.a&&Fn(Ze,L.a=p),r!==L.o&&Fn(or,L.o=r),e!==L.i&&Fn(V,L.i=e),s!==L.n&&Fn(t,L.n=s),n!==L.s&&((L.s=n)!=null?t.style.setProperty("width",n):t.style.removeProperty("width")),l!==L.h&&Fn(b,L.h=l),f!==L.r&&Fn(P,L.r=f),u!==L.d&&Fn(o,L.d=u),g!==L.l&&((L.l=g)!=null?o.style.setProperty("color",g):o.style.removeProperty("color")),L},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),xe})()};var ab=gi("<div><h4>Loss History</h4><div>"),ib=gi("<div>");const lv={container:Wn("margin-top:1rem;padding:1rem;background-color:",Bn.surface,";border-radius:0.5rem;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);",""),title:Wn("font-size:1rem;font-weight:bold;margin-bottom:0.5rem;color:",Bn.text,";",""),chart:Wn("display:flex;align-items:flex-end;height:100px;border-bottom:1px solid ",Bn.border,";border-left:1px solid ",Bn.border,";",""),bar:Wn("width:4px;background-color:",Bn.primary,";margin-right:2px;transition:height 0.3s ease;","")},ob=()=>{const oe=()=>Va.trainingState.lossHistory||[];return Rl(()=>{oe()}),(()=>{var ae=ab(),xe=ae.firstChild,Ne=xe.nextSibling;return Pa(Ne,()=>oe().map(Ze=>(()=>{var or=ib();return qa(j=>{var V=lv.bar,t=`${Math.min(100,Ze*100)}%`,b=`Loss: ${Ze.toFixed(4)}`;return V!==j.e&&Fn(or,j.e=V),t!==j.t&&((j.t=t)!=null?or.style.setProperty("height",t):or.style.removeProperty("height")),b!==j.a&&mv(or,"title",j.a=b),j},{e:void 0,t:void 0,a:void 0}),or})())),qa(Ze=>{var or=lv.container,j=lv.title,V=lv.chart;return or!==Ze.e&&Fn(ae,Ze.e=or),j!==Ze.t&&Fn(xe,Ze.t=j),V!==Ze.a&&Fn(Ne,Ze.a=V),Ze},{e:void 0,t:void 0,a:void 0}),ae})()};var sb=gi("<div><div><div></div></div><div><div><button> Forward</button><button> Loss</button></div><div><button> Backward</button><button> Update weights</button></div></div><div></div><button>Reset");const es={container:Wn(yi.card," margin-top:1rem;",""),title:Wn("font-size:",bi.fontSize.xl,";font-weight:",bi.fontWeight.bold,";margin-bottom:1rem;color:",Bn.text,";",""),controlsContainer:Wn({name:"1gbi25y",styles:"display:grid;grid-template-columns:repeat(2, 1fr);gap:1rem;margin-bottom:1rem"}),controlButton:Wn(yi.button," ",yi.primaryButton," display:flex;align-items:center;justify-content:center;gap:0.5rem;font-size:",bi.fontSize.sm,";padding:0.75rem 1rem;border-radius:8px;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);transition:all 0.2s ease-in-out;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);}",""),exportButton:Wn(yi.button," ",yi.secondaryButton," margin-top:1rem;",""),progressBar:Wn("width:100%;height:6px;background-color:",Bn.border,";border-radius:4px;overflow:hidden;margin-bottom:1rem;",""),progressFill:Wn("height:100%;background-color:",Bn.primary,";transition:width 300ms ease-in-out;",""),trainingStepsContainer:Wn({name:"12xq20f",styles:"display:flex;justify-content:space-between;margin-bottom:1rem"}),trainingStepButton:Wn(yi.button," ",yi.primaryButton," display:flex;align-items:center;justify-content:center;gap:0.25rem;font-size:",bi.fontSize.xs,";padding:0.5rem 1rem;border-radius:4px;box-shadow:0 2px 4px rgba(0, 0, 0, 0.1);",""),disabledButton:Wn({name:"1k4lyc2",styles:"opacity:0.5;cursor:not-allowed"}),buttonGroup:Wn({name:"p5tmle",styles:"display:flex;flex-direction:column;gap:0.5rem"}),separator:Wn("height:1px;background-color:",Bn.border,";margin:1rem 0;",""),resetButton:Wn(yi.button," ",yi.secondaryButton," width:100%;padding:0.75rem 1rem;border-radius:8px;font-size:",bi.fontSize.sm,";transition:all 0.2s ease-in-out;&:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);}","")},lb=()=>{const[oe,ae]=Hi([0,100]),[xe,Ne]=Hi("line"),[Ze,or]=Hi(!1);Rl(()=>{const{currentPhase:n}=Va.trainingState;n==="forward"||n==="backward"?or(!1):n==="loss"&&or(!0)});const j=()=>{const n=Va.trainingState.iteration||0,l=Va.trainingConfig?.iterations||1;return n/l},V=n=>n<.2?Bn.success:(n<.5,Bn.error),t=()=>Va.trainingState.currentPhase!=="idle"&&Va.trainingState.currentPhase!=="update"||Va.trainingState.backwardStepGradients.length>0,b=()=>Va.trainingState.forwardStepResults.length===0||Va.trainingState.backwardStepGradients.length>0,P=()=>Va.trainingState.currentPhase!=="loss",o=()=>Va.trainingState.backwardStepGradients.length===0,L=()=>Va.trainingState.forwardStepResults.length===0,A=()=>{t()||bc.singleStepForward(),or(!1)},v=()=>{L()||bc.trainingStateReset(),or(!1)},p=()=>{b()||bc.calculateLoss(),or(!0)},r=()=>{P()||bc.stepBackward()},e=()=>{o()||bc.updateWeights()},s=n=>{n.preventDefault();const l=n.deltaY>0?1.1:.9,[f,u]=oe(),h=(u-f)*l,T=(f+u)/2,c=Math.max(0,T-h/2),i=Math.min(100,T+h/2);ae([c,i])};return(()=>{var n=sb(),l=n.firstChild,f=l.firstChild,u=l.nextSibling,g=u.firstChild,h=g.firstChild,T=h.firstChild,c=h.nextSibling,i=c.firstChild,d=g.nextSibling,x=d.firstChild,w=x.firstChild,C=x.nextSibling,y=C.firstChild,S=u.nextSibling,M=S.nextSibling;return Pa(n,Ya(nb,{get iteration(){return Va.trainingState.iteration||0},get currentLoss(){return Va.trainingState.currentLoss},get iterationProgress(){return j()},getLossColor:V}),l),Pa(n,Ya(eb,{get forwardStepResults(){return Va.trainingState.forwardStepResults},get backwardStepResults(){return Va.trainingState.backwardStepGradients},get currentLoss(){return Va.trainingState.currentLoss},get weightUpdateResults(){return Va.trainingState.weightUpdateResults}}),u),h.$$click=A,Pa(h,Ya(Hx,{}),T),c.$$click=p,Pa(c,Ya(Mp,{}),i),x.$$click=r,Pa(x,Ya(Ox,{}),w),C.$$click=e,Pa(C,Ya(Wx,{}),y),M.$$click=v,Pa(n,Ya(ob,{get lossHistory(){return Va.trainingState.lossHistory},get trainingRuns(){return Va.trainingRuns},selectedRuns:[],get chartType(){return xe()},get zoomRange(){return oe()},maxLoss:5,handleWheel:s,onChartTypeChange:a=>Ne(a),onZoomRangeChange:a=>ae(a)}),null),qa(a=>{var E=es.container,m=es.progressBar,k=es.progressFill,I=`${j()*100}%`,O=es.controlsContainer,z=es.buttonGroup,B=`${es.controlButton} ${t()?es.disabledButton:""}`,F=t(),_=`${es.controlButton} ${b()?es.disabledButton:""}`,N=b(),G=es.buttonGroup,X=`${es.controlButton} ${P()?es.disabledButton:""}`,$=P(),et=`${es.controlButton} ${o()?es.disabledButton:""}`,ot=o(),nt=es.separator,Z=`${es.resetButton} ${L()?es.disabledButton:""}`,Q=L();return E!==a.e&&Fn(n,a.e=E),m!==a.t&&Fn(l,a.t=m),k!==a.a&&Fn(f,a.a=k),I!==a.o&&((a.o=I)!=null?f.style.setProperty("width",I):f.style.removeProperty("width")),O!==a.i&&Fn(u,a.i=O),z!==a.n&&Fn(g,a.n=z),B!==a.s&&Fn(h,a.s=B),F!==a.h&&(h.disabled=a.h=F),_!==a.r&&Fn(c,a.r=_),N!==a.d&&(c.disabled=a.d=N),G!==a.l&&Fn(d,a.l=G),X!==a.u&&Fn(x,a.u=X),$!==a.c&&(x.disabled=a.c=$),et!==a.w&&Fn(C,a.w=et),ot!==a.m&&(C.disabled=a.m=ot),nt!==a.f&&Fn(S,a.f=nt),Z!==a.y&&Fn(M,a.y=Z),Q!==a.g&&(M.disabled=a.g=Q),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),n})()};Il(["click"]);var ub=gi("<input id=chatGPTUsage type=number min=0 max=100 step=0.1 placeholder=0-100>"),fb=gi("<div><h3>Simulate ChatGPT Usage</h3><form><div><label for=chatGPTUsage>ChatGPT Usage (%)</label></div><button type=submit>Simulate"),cb=gi("<div>");const jc={container:Wn(yi.card,";",""),title:Wn("font-size:",bi.fontSize.xl,";font-weight:",bi.fontWeight.bold,";margin-bottom:1rem;color:",Bn.text,";",""),form:Wn({name:"1s9rt3e",styles:"display:flex;align-items:flex-end;gap:0.5rem"}),inputGroup:Wn({name:"82a6rk",styles:"flex:1"}),label:Wn(yi.label,";",""),input:Wn(yi.input,";",""),inputError:Wn("border-color:",Bn.error,";",""),errorMessage:Wn("color:",Bn.error,";font-size:",bi.fontSize.sm,";margin-top:0.25rem;",""),button:Wn(yi.button," ",yi.primaryButton,";","")},hb=({onSimulate:oe})=>{const[ae,xe]=Hi(""),[Ne,Ze]=Hi(null),or=j=>{j.preventDefault(),Ze(null);const V=Number(ae());if(isNaN(V)||V<0||V>100){Ze("Please enter a valid percentage between 0 and 100.");return}oe(V)};return(()=>{var j=fb(),V=j.firstChild,t=V.nextSibling,b=t.firstChild,P=b.firstChild,o=b.nextSibling;return t.addEventListener("submit",or),Pa(b,Ya(Ev,{content:"Enter a value between 0 and 100",get children(){var L=ub();return L.$$input=A=>xe(A.currentTarget.value),qa(()=>Fn(L,`${yi.input} ${Ne()?jc.inputError:""}`)),qa(()=>L.value=ae()),L}}),null),Pa(b,(()=>{var L=Gs(()=>!!Ne());return()=>L()&&(()=>{var A=cb();return Pa(A,Ne),qa(()=>Fn(A,jc.errorMessage)),A})()})(),null),qa(L=>{var A=jc.container,v=yi.sectionTitle,p=jc.form,r=jc.inputGroup,e=yi.label,s=jc.button;return A!==L.e&&Fn(j,L.e=A),v!==L.t&&Fn(V,L.t=v),p!==L.a&&Fn(t,L.a=p),r!==L.o&&Fn(b,L.o=r),e!==L.i&&Fn(P,L.i=e),s!==L.n&&Fn(o,L.n=s),L},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),j})()};Il(["input"]);var vb=gi("<div><div><div><button>Network</button><button>Training</button><button>Simulation</button></div></div><div><div><div><span>Current Loss</span><span></span></div><div><span>Iteration</span><span></span></div><div><span>Accuracy</span><span>N/A");const rs={container:Wn(yi.card," display:flex;flex-direction:column;height:100%;background-color:",Bn.surface,";border-radius:8px;box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);",""),content:Wn({name:"1ybmm9i",styles:"flex-grow:1;overflow-y:auto;padding:1rem"}),header:Wn({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),title:Wn("font-size:",bi.fontSize["2xl"],";font-weight:",bi.fontWeight.bold,";color:",Bn.text,";",""),tabs:Wn({name:"aj6rbz",styles:"display:flex;gap:0.5rem"}),tab:Wn(yi.button," font-size:",bi.fontSize.sm,";padding:0.25rem 0.5rem;&.active{background-color:",Bn.primary,";color:",Bn.surface,";}",""),metricsContainer:Wn("display:flex;gap:1rem;justify-content:space-between;background-color:",Bn.background,";padding:0.5rem;border-radius:4px;",""),metric:Wn({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),metricLabel:Wn("font-size:",bi.fontSize.xs,";color:",Bn.textLight,";",""),metricValue:Wn("font-size:",bi.fontSize.lg,";font-weight:",bi.fontWeight.bold,";color:",Bn.text,";",""),scrollableContent:Wn("flex-grow:1;overflow-y:auto;padding:1rem;&::-webkit-scrollbar{width:8px;}&::-webkit-scrollbar-track{background:",Bn.background,";border-radius:4px;}&::-webkit-scrollbar-thumb{background:",Bn.primary,";border-radius:4px;}&::-webkit-scrollbar-thumb:hover{background:",Bn.primaryDark,";}scrollbar-width:thin;scrollbar-color:",Bn.primary," ",Bn.background,";","")},db=()=>{const[oe,ae]=Hi("training");return(()=>{var xe=vb(),Ne=xe.firstChild,Ze=Ne.firstChild,or=Ze.firstChild,j=or.nextSibling,V=j.nextSibling,t=Ne.nextSibling,b=t.firstChild,P=b.firstChild,o=P.firstChild,L=o.nextSibling,A=P.nextSibling,v=A.firstChild,p=v.nextSibling,r=A.nextSibling,e=r.firstChild,s=e.nextSibling;return or.$$click=()=>ae("network"),j.$$click=()=>ae("training"),V.$$click=()=>ae("simulation"),Pa(L,()=>Va.trainingState.currentLoss?.toFixed(4)||"N/A"),Pa(p,()=>Va.trainingState.iteration||0),Pa(t,Ya(Dl,{get when(){return oe()==="network"},get children(){return Ya(Rx,{})}}),null),Pa(t,Ya(Dl,{get when(){return oe()==="training"},get children(){return[Ya(kx,{}),Ya(lb,{onVisualizationUpdate:()=>{}})]}}),null),Pa(t,Ya(Dl,{get when(){return oe()==="simulation"},get children(){return Ya(hb,{onSimulate:()=>{}})}}),null),qa(n=>{var l=rs.container,f=rs.header,u=rs.tabs,g=`${rs.tab} ${oe()==="network"?"active":""}`,h=`${rs.tab} ${oe()==="training"?"active":""}`,T=`${rs.tab} ${oe()==="simulation"?"active":""}`,c=rs.scrollableContent,i=rs.metricsContainer,d=rs.metric,x=rs.metricLabel,w=rs.metricValue,C=rs.metric,y=rs.metricLabel,S=rs.metricValue,M=rs.metric,a=rs.metricLabel,E=rs.metricValue;return l!==n.e&&Fn(xe,n.e=l),f!==n.t&&Fn(Ne,n.t=f),u!==n.a&&Fn(Ze,n.a=u),g!==n.o&&Fn(or,n.o=g),h!==n.i&&Fn(j,n.i=h),T!==n.n&&Fn(V,n.n=T),c!==n.s&&Fn(t,n.s=c),i!==n.h&&Fn(b,n.h=i),d!==n.r&&Fn(P,n.r=d),x!==n.d&&Fn(o,n.d=x),w!==n.l&&Fn(L,n.l=w),C!==n.u&&Fn(A,n.u=C),y!==n.c&&Fn(v,n.c=y),S!==n.w&&Fn(p,n.w=S),M!==n.m&&Fn(r,n.m=M),a!==n.f&&Fn(e,n.f=a),E!==n.y&&Fn(s,n.y=E),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0}),xe})()};Il(["click"]);var pb=gi("<div><button>");const Q0={sidebar:Wn("background-color:",Bn.surface,";transition:width 0.3s ease;overflow:hidden;",""),toggleButton:Wn("position:absolute;top:50%;left:0;transform:translateY(-50%);background-color:",Bn.primary,";color:",Bn.surface,";border:none;padding:8px;cursor:pointer;z-index:10;","")},gb=oe=>{const[ae,xe]=Hi(!0);return(()=>{var Ne=pb(),Ze=Ne.firstChild;return Ze.$$click=()=>xe(!ae()),Pa(Ze,(()=>{var or=Gs(()=>!!ae());return()=>or()?Ya(Ux,{}):Ya(Nx,{})})()),Pa(Ne,()=>ae()&&oe.children,null),qa(or=>{var j=Wn(Q0.sidebar," width:",ae()?"330px":"0px",";",""),V=Q0.toggleButton,t=ae()?"300px":"0px";return j!==or.e&&Fn(Ne,or.e=j),V!==or.t&&Fn(Ze,or.t=V),t!==or.a&&((or.a=t)!=null?Ze.style.setProperty("left",t):Ze.style.removeProperty("left")),or},{e:void 0,t:void 0,a:void 0}),Ne})()};Il(["click"]);var yb=gi("<div><div><h1>Task: Boost Alice's Productivity with Neural Networks!</h1><h2>Welcome to the AI-Powered Productivity Challenge!</h2><p>Hey there, future AI maestro! 👋 Ready to embark on a neural network adventure? Your mission, should you choose to accept it (cue dramatic music 🎵), is to help Alice, our junior developer, master the art of ChatGPT usage for maximum productivity!</p><p>Here's the lowdown on your exciting task:</p><ul><li><span>Input:</span> Alice's ChatGPT usage time (0-100%)</li><li><span>Output:</span> Her productivity score (0-100)</li><li><span>The Twist:</span> The relationship between ChatGPT time and productivity is as unpredictable as a cat on a hot tin roof! 🐱🔥</li></ul><p>We've cooked up a funky formula that captures this wild relationship. Your job? Train a neural network to match it and uncover the sweet spot where Alice's productivity skyrockets! 🚀</p><p>No fancy libraries here – you're building this neural network from scratch. It's like assembling a LEGO Death Star without instructions, but way cooler because it's AI! 🧠✨</p><p>By the time you're done, you'll not only be Alice's productivity hero but also a neural network ninja. So, flex those coding muscles and get ready to dive into the wonderful world of AI!</p><p>Remember, no pressure... but Alice's productivity (and the fate of the universe) depends on you! May the code be with you! 😄🖖"),mb=gi("<div><div></div><button>Tutorial");const ds={container:Wn({name:"e0bt9i",styles:"position:relative;width:100%;transition:height 0.3s ease;z-index:1000;flex-shrink:0"}),bar:Wn("background-color:",Bn.surface,";border-top:1px solid ",Bn.border,";height:100%;overflow-y:auto;",""),content:Wn("padding:20px;max-width:800px;margin:0 auto;font-family:",bi.fontFamily,";color:",Bn.text,";",""),toggleButton:Wn("position:absolute;top:-30px;left:50%;transform:translateX(-50%);background-color:",Bn.primary,";color:",Bn.surface,";border:none;padding:8px 16px;cursor:pointer;border-radius:8px 8px 0 0;display:flex;align-items:center;gap:8px;",""),resizeHandle:Wn("position:absolute;top:0;left:0;right:0;height:5px;cursor:ns-resize;background-color:",Bn.border,";",""),title:Wn("font-size:24px;color:",Bn.primary,";margin-bottom:16px;",""),subtitle:Wn("font-size:18px;color:",Bn.secondary,";margin-bottom:12px;",""),paragraph:Wn({name:"1kby1d2",styles:"margin-bottom:12px;line-height:1.6"}),highlight:Wn("background-color:",Bn.primary,"22;padding:2px 4px;border-radius:4px;","")},xb=()=>{const[oe,ae]=Hi(!0),[xe,Ne]=Hi(400);let Ze,or;const j=b=>{Ze=b.clientY,or=xe(),document.addEventListener("mousemove",V),document.addEventListener("mouseup",t)},V=b=>{const P=Ze-b.clientY;Ne(Math.max(200,Math.min(window.innerHeight-100,or+P)))},t=()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",t)};return(()=>{var b=mb(),P=b.firstChild,o=P.nextSibling,L=o.firstChild;return P.$$mousedown=j,o.$$click=()=>ae(!oe()),Pa(o,(()=>{var A=Gs(()=>!!oe());return()=>A()?Ya(Bx,{}):Ya(Vx,{})})(),L),Pa(b,Ya(Dl,{get when(){return oe()},get children(){var A=yb(),v=A.firstChild,p=v.firstChild,r=p.nextSibling,e=r.nextSibling,s=e.nextSibling,n=s.nextSibling,l=n.firstChild,f=l.firstChild,u=l.nextSibling,g=u.firstChild,h=u.nextSibling,T=h.firstChild,c=n.nextSibling,i=c.nextSibling,d=i.nextSibling,x=d.nextSibling;return qa(w=>{var C=ds.bar,y=ds.content,S=ds.title,M=ds.subtitle,a=ds.paragraph,E=ds.paragraph,m=ds.highlight,k=ds.highlight,I=ds.highlight,O=ds.paragraph,z=ds.paragraph,B=ds.paragraph,F=ds.paragraph;return C!==w.e&&Fn(A,w.e=C),y!==w.t&&Fn(v,w.t=y),S!==w.a&&Fn(p,w.a=S),M!==w.o&&Fn(r,w.o=M),a!==w.i&&Fn(e,w.i=a),E!==w.n&&Fn(s,w.n=E),m!==w.s&&Fn(f,w.s=m),k!==w.h&&Fn(g,w.h=k),I!==w.r&&Fn(T,w.r=I),O!==w.d&&Fn(c,w.d=O),z!==w.l&&Fn(i,w.l=z),B!==w.u&&Fn(d,w.u=B),F!==w.c&&Fn(x,w.c=F),w},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0}),A}}),null),qa(A=>{var v=ds.container,p=`${oe()?xe():30}px`,r=ds.resizeHandle,e=ds.toggleButton;return v!==A.e&&Fn(b,A.e=v),p!==A.t&&((A.t=p)!=null?b.style.setProperty("height",p):b.style.removeProperty("height")),r!==A.a&&Fn(P,A.a=r),e!==A.o&&Fn(o,A.o=e),A},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()};Il(["mousedown","click"]);var $0=gi("<div>"),bb=gi("<div><div><div>Network Visualization</div><div></div></div><div><div>Function Visualization</div><div>"),wb=gi("<div><div><div><div><div><button>Network</button><button>Function</button><button>Combined View</button></div><div>");const Tb=()=>{Rl(()=>{bc.initializeTrainingData()});const[oe,ae]=Hi("network"),xe={mainContainer:Wn({name:"zyllbl",styles:"display:flex;flex-direction:column;height:100vh"}),contentWrapper:Wn({name:"sgfifm",styles:"display:flex;flex-direction:row;flex-grow:1;overflow:hidden"}),content:Wn({name:"1i1zgvg",styles:"display:flex;flex-direction:column;flex-grow:1;overflow:hidden"}),visualizer:Wn({name:"q6y1bw",styles:"flex-grow:1;background-color:#1B213D;border-radius:4px;display:flex;flex-direction:column;overflow:hidden;min-height:0"}),tabContainer:Wn("display:flex;background-color:",Bn.background,";flex-shrink:0;",""),tab:Wn("padding:10px 20px;cursor:pointer;background-color:",Bn.surface,";border:none;&.active{background-color:",Bn.primary,";color:",Bn.text,";}",""),flexContainer:Wn({name:"zyllbl",styles:"display:flex;flex-direction:column;height:100vh"}),mainContent:Wn({name:"oh6gjl",styles:"flex-grow:1;display:flex;flex-direction:column;overflow:hidden"}),combinedView:Wn("display:flex;flex-direction:row;height:100%;background-color:",Bn.background,";border-radius:8px;overflow:hidden;box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);",""),combinedViewSection:Wn("flex:1;min-width:0;overflow:hidden;padding:16px;display:flex;flex-direction:column;&:first-of-type{border-right:2px solid ",Bn.primary,";}",""),sectionTitle:Wn("font-size:18px;font-weight:bold;margin-bottom:12px;color:",Bn.text,";flex-shrink:0;",""),visualizerContent:Wn({name:"aoo5gc",styles:"flex-grow:1;min-height:0;position:relative"})};return(()=>{var Ne=wb(),Ze=Ne.firstChild,or=Ze.firstChild,j=or.firstChild,V=j.firstChild,t=V.firstChild,b=t.nextSibling,P=b.nextSibling,o=V.nextSibling;return Pa(or,Ya(gb,{get children(){return Ya(db,{})}}),j),t.$$click=()=>ae("network"),b.$$click=()=>ae("function"),P.$$click=()=>ae("combinedView"),Pa(o,Ya(Dl,{get when(){return oe()==="network"},get children(){var L=$0();return Pa(L,Ya(K0,{includeLossNode:!1,onVisualizationUpdate:()=>console.log("Visualization updated"),onSidebarToggle:()=>{},onResize:(A,v)=>console.log(`Resized to ${A}x${v}`)})),qa(()=>Fn(L,xe.visualizerContent)),L}}),null),Pa(o,Ya(Dl,{get when(){return oe()==="function"},get children(){var L=$0();return Pa(L,Ya(J0,{})),qa(()=>Fn(L,xe.visualizerContent)),L}}),null),Pa(o,Ya(Dl,{get when(){return oe()==="combinedView"},get children(){var L=bb(),A=L.firstChild,v=A.firstChild,p=v.nextSibling,r=A.nextSibling,e=r.firstChild,s=e.nextSibling;return Pa(p,Ya(K0,{includeLossNode:!1,onVisualizationUpdate:()=>console.log("Visualization updated"),onSidebarToggle:()=>{},onResize:(n,l)=>{console.log(`Network visualizer resized to ${n}x${l}`)}})),Pa(s,Ya(J0,{})),qa(n=>{var l=xe.combinedView,f=xe.combinedViewSection,u=xe.sectionTitle,g=xe.visualizerContent,h=xe.combinedViewSection,T=xe.sectionTitle,c=xe.visualizerContent;return l!==n.e&&Fn(L,n.e=l),f!==n.t&&Fn(A,n.t=f),u!==n.a&&Fn(v,n.a=u),g!==n.o&&Fn(p,n.o=g),h!==n.i&&Fn(r,n.i=h),T!==n.n&&Fn(e,n.n=T),c!==n.s&&Fn(s,n.s=c),n},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),L}}),null),Pa(Ne,Ya(xb,{}),null),qa(L=>{var A=xe.flexContainer,v=xe.mainContent,p=xe.contentWrapper,r=xe.content,e=xe.tabContainer,s=`${xe.tab} ${oe()==="network"?"active":""}`,n=`${xe.tab} ${oe()==="function"?"active":""}`,l=`${xe.tab} ${oe()==="combinedView"?"active":""}`,f=xe.visualizer;return A!==L.e&&Fn(Ne,L.e=A),v!==L.t&&Fn(Ze,L.t=v),p!==L.a&&Fn(or,L.a=p),r!==L.o&&Fn(j,L.o=r),e!==L.i&&Fn(V,L.i=e),s!==L.n&&Fn(t,L.n=s),n!==L.s&&Fn(b,L.s=n),l!==L.h&&Fn(P,L.h=l),f!==L.r&&Fn(o,L.r=f),L},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),Ne})()};Il(["click"]);globalThis.EMOTION_RUNTIME_AUTO_LABEL=!0;const Ab=document.getElementById("root");H1(()=>Ya(Tb,{}),Ab);
